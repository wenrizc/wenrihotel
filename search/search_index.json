{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"\u6b22\u8fce","text":"<p>\u6211\u6709\u5609\u5bbe\uff0c\u9f13\u745f\u9f13\u7434\u3002</p> <p>\u9f13\u745f\u9f13\u7434\uff0c\u548c\u4e50\u4e14\u6e5b\u3002</p> <p>\u6211\u6709\u65e8\u9152\uff0c\u4ee5\u71d5\u4e50\u5609\u5bbe\u4e4b\u5fc3\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/AQS%E5%8E%9F%E7%90%86/","title":"AQS\u539f\u7406","text":""},{"location":"%E7%AC%94%E8%AE%B0/java/AQS%E5%8E%9F%E7%90%86/#reentrantlock","title":"ReentrantLock","text":""},{"location":"%E7%AC%94%E8%AE%B0/java/AQS%E5%8E%9F%E7%90%86/#_1","title":"\u7279\u6027","text":"<p><code>ReentrantLock</code> \u662f\u4e00\u79cd\u53ef\u91cd\u5165\u9501\uff0c\u610f\u5473\u7740\u540c\u4e00\u4e2a\u7ebf\u7a0b\u53ef\u4ee5\u591a\u6b21\u83b7\u53d6\u540c\u4e00\u628a\u9501\u3002</p> ReentrantLock Synchronized \u9501\u7c7b\u578b \u9ed8\u8ba4\u975e\u516c\u5e73\uff0c\u53ef\u9009\u62e9\u516c\u5e73\u9501 \u975e\u516c\u5e73\u9501 \u5b9e\u73b0\u673a\u5236 \u57fa\u4e8eAQS\u6846\u67b6\uff0cCAS + \u7b49\u5f85\u961f\u5217 JVM\u5c42\u9762\u5b9e\u73b0\uff0c\u57fa\u4e8eMonitor\u5bf9\u8c61 \u7075\u6d3b\u6027 \u652f\u6301\u4e2d\u65ad\u3001\u8d85\u65f6\u3001\u5c1d\u8bd5\u83b7\u53d6\u9501 \u4e0d\u652f\u6301 \u53ef\u91cd\u5165\u6027 \u662f \u662f Condition \u652f\u6301\u591a\u4e2aCondition\uff0c\u5b9e\u73b0\u7cbe\u786e\u5524\u9192 \u4ec5\u652f\u6301\u4e00\u4e2a\u7b49\u5f85\u961f\u5217\uff0c\u901a\u8fc7<code>wait</code>/<code>notifyAll</code>\u5524\u9192 \u91ca\u653e\u9501 \u5fc5\u987b\u5728<code>finally</code>\u5757\u4e2d\u624b\u52a8<code>unlock()</code> JVM\u81ea\u52a8\u91ca\u653e"},{"location":"%E7%AC%94%E8%AE%B0/java/AQS%E5%8E%9F%E7%90%86/#reentrantlock-aqs","title":"ReentrantLock \u4e0e AQS \u7684\u5173\u8054","text":"<p><code>ReentrantLock</code> \u5185\u90e8\u5305\u542b\u4e00\u4e2a <code>Sync</code> \u62bd\u8c61\u7c7b\uff0c\u5b83\u7ee7\u627f\u81ea AQS\u3002<code>Sync</code> \u6709\u4e24\u4e2a\u5177\u4f53\u7684\u5b50\u7c7b\uff1a<code>FairSync</code> (\u516c\u5e73\u9501) \u548c <code>NonfairSync</code> (\u975e\u516c\u5e73\u9501)\u3002</p> <ul> <li>\u6838\u5fc3\u5173\u8054\u70b9\uff1a <code>ReentrantLock</code> \u7684\u52a0\u9501 (<code>lock</code>) \u548c\u89e3\u9501 (<code>unlock</code>) \u64cd\u4f5c\uff0c\u6700\u7ec8\u90fd\u59d4\u6258\u7ed9\u4e86\u5176\u5185\u90e8\u7684 <code>Sync</code> \u5bf9\u8c61\uff0c\u800c <code>Sync</code> \u7684\u6838\u5fc3\u65b9\u6cd5\uff08\u5982 <code>acquire</code>, <code>release</code>\uff09\u5219\u76f4\u63a5\u8c03\u7528\u6216\u4f9d\u8d56\u4e8e AQS \u63d0\u4f9b\u7684\u6846\u67b6\u65b9\u6cd5\u3002</li> </ul> <p>\u52a0\u9501\u6d41\u7a0b\u7684\u5dee\u5f02\uff1a</p> <ul> <li>\u975e\u516c\u5e73\u9501 (<code>NonfairSync</code>) <code>lock()</code> \u6d41\u7a0b\uff1a<ol> <li>\u5c1d\u8bd5\u901a\u8fc7 CAS (Compare-And-Set) \u76f4\u63a5\u5c06\u540c\u6b65\u72b6\u6001 <code>state</code> \u4ece 0 \u4fee\u6539\u4e3a 1\u3002</li> <li>\u5982\u679c\u6210\u529f\uff0c\u8868\u793a\u83b7\u53d6\u9501\u6210\u529f\uff0c\u5c06\u5f53\u524d\u7ebf\u7a0b\u8bbe\u7f6e\u4e3a\u9501\u7684\u6301\u6709\u8005\u3002</li> <li>\u5982\u679c\u5931\u8d25\uff08\u9501\u5df2\u88ab\u5360\u7528\u6216CAS\u7ade\u4e89\u5931\u8d25\uff09\uff0c\u5219\u8c03\u7528 AQS \u7684 <code>acquire(1)</code> \u65b9\u6cd5\uff0c\u8fdb\u5165\u6392\u961f\u7b49\u5f85\u6d41\u7a0b\u3002</li> </ol> </li> <li>\u516c\u5e73\u9501 (<code>FairSync</code>) <code>lock()</code> \u6d41\u7a0b\uff1a<ol> <li>\u4e0d\u5c1d\u8bd5\u62a2\u5360\uff0c\u76f4\u63a5\u8c03\u7528 AQS \u7684 <code>acquire(1)</code> \u65b9\u6cd5\u3002</li> </ol> </li> </ul> <p>\u4e24\u79cd\u9501\u7684\u5b9e\u73b0\u867d\u7136\u5165\u53e3\u4e0d\u540c\uff0c\u4f46\u6700\u7ec8\u90fd\u4f1a\u8d70\u5230 AQS \u7684 <code>acquire</code> \u65b9\u6cd5\uff0c\u540e\u7eed\u7684\u6392\u961f\u3001\u963b\u585e\u3001\u5524\u9192\u903b\u8f91\u90fd\u7531 AQS \u7edf\u4e00\u5904\u7406\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/AQS%E5%8E%9F%E7%90%86/#aqs-abstractqueuedsynchronizer","title":"AQS (AbstractQueuedSynchronizer) \u6838\u5fc3\u539f\u7406","text":"<p>AQS \u662f\u4e00\u4e2a\u7528\u4e8e\u6784\u5efa\u9501\u548c\u540c\u6b65\u5668\u7684\u6846\u67b6\uff0c\u5176\u6838\u5fc3\u601d\u60f3\u662f\uff1a</p> <ul> <li>\u6838\u5fc3\u72b6\u6001\uff1a \u4f7f\u7528\u4e00\u4e2a <code>volatile int state</code> \u53d8\u91cf\u4f5c\u4e3a\u540c\u6b65\u72b6\u6001\u3002<code>state</code> \u4e3a 0 \u8868\u793a\u8d44\u6e90\u672a\u88ab\u5360\u7528\uff0c\u5927\u4e8e 0 \u8868\u793a\u88ab\u5360\u7528\u3002</li> <li>\u6838\u5fc3\u673a\u5236\uff1a \u5982\u679c\u8d44\u6e90\u7a7a\u95f2\uff0c\u8bf7\u6c42\u7ebf\u7a0b\u83b7\u53d6\u9501\u5e76\u66f4\u65b0 <code>state</code>\u3002\u5982\u679c\u8d44\u6e90\u88ab\u5360\u7528\uff0c\u5219\u5c06\u7ebf\u7a0b\u5c01\u88c5\u6210\u8282\u70b9\u52a0\u5165\u4e00\u4e2a CLH \u961f\u5217\u7684\u53d8\u4f53 \u4e2d\u8fdb\u884c\u6392\u961f\u7b49\u5f85\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/AQS%E5%8E%9F%E7%90%86/#aqs","title":"AQS \u6846\u67b6\u4e0e\u6570\u636e\u7ed3\u6784","text":"<p>AQS \u6846\u67b6\u5206\u5c42\uff1a</p> <ol> <li>API\u5c42\uff1a \u66b4\u9732\u7ed9\u81ea\u5b9a\u4e49\u540c\u6b65\u5668\u91cd\u5199\u7684\u65b9\u6cd5\uff0c\u5982 <code>tryAcquire</code>, <code>tryRelease</code>\u3002</li> <li>\u83b7\u53d6/\u91ca\u653e\u5c42\uff1a AQS \u63d0\u4f9b\u7684\u6838\u5fc3\u65b9\u6cd5\uff0c\u5982 <code>acquire</code>, <code>release</code>\uff0c\u5b83\u4eec\u4f1a\u8c03\u7528 API \u5c42\u7684\u65b9\u6cd5\u3002</li> <li>\u961f\u5217\u64cd\u4f5c\u5c42\uff1a \u5c01\u88c5\u4e86\u5bf9\u7b49\u5f85\u961f\u5217\u7684\u539f\u5b50\u64cd\u4f5c\uff0c\u5982 <code>addWaiter</code>, <code>enq</code>\u3002</li> <li>\u7b49\u5f85/\u5524\u9192\u5c42\uff1a \u8d1f\u8d23\u7ebf\u7a0b\u7684\u963b\u585e (<code>park</code>) \u548c\u5524\u9192 (<code>unpark</code>)\u3002</li> <li>\u57fa\u7840\u6570\u636e\u5c42\uff1a \u5305\u62ec <code>state</code> \u53d8\u91cf\u548c\u7b49\u5f85\u961f\u5217\u7684\u5934 (<code>head</code>)\u3001\u5c3e (<code>tail</code>) \u6307\u9488\u3002</li> </ol> <p>\u6838\u5fc3\u6570\u636e\u7ed3\u6784 - <code>Node</code>\uff1a</p> <p>\u7b49\u5f85\u961f\u5217\u4e2d\u7684\u6bcf\u4e2a\u8282\u70b9 (<code>Node</code>) \u4ee3\u8868\u4e00\u4e2a\u7b49\u5f85\u9501\u7684\u7ebf\u7a0b\u3002</p> <ul> <li><code>thread</code>: \u8282\u70b9\u5173\u8054\u7684\u7ebf\u7a0b\u3002</li> <li><code>prev</code>, <code>next</code>: \u53cc\u5411\u94fe\u8868\u7684\u524d\u540e\u6307\u9488\u3002</li> <li><code>waitStatus</code>: \u8282\u70b9\u72b6\u6001\uff0c\u975e\u5e38\u5173\u952e\u3002<ul> <li><code>0</code> (\u9ed8\u8ba4): \u8282\u70b9\u7684\u521d\u59cb\u72b6\u6001\u3002</li> <li><code>SIGNAL</code> (-1): \u8868\u793a\u540e\u7ee7\u8282\u70b9\u5df2\u51c6\u5907\u597d\uff0c\u5f53\u524d\u8282\u70b9\u91ca\u653e\u9501\u65f6\u9700\u8981\u5524\u9192 (<code>unpark</code>) \u540e\u7ee7\u8282\u70b9\u3002</li> <li><code>CANCELLED</code> (1): \u8868\u793a\u8282\u70b9\u5185\u7684\u7ebf\u7a0b\u5df2\u53d6\u6d88\u7b49\u5f85\uff08\u5982\u8d85\u65f6\u6216\u4e2d\u65ad\uff09\u3002</li> <li><code>CONDITION</code> (-2): \u7528\u4e8e <code>Condition</code> \u961f\u5217\uff0c\u8868\u793a\u8282\u70b9\u6b63\u5728\u7b49\u5f85\u6761\u4ef6\u3002</li> <li><code>PROPAGATE</code> (-3): \u7528\u4e8e\u5171\u4eab\u9501\uff0c\u8868\u793a\u91ca\u653e\u64cd\u4f5c\u4f1a\u5411\u540e\u4f20\u64ad\u3002</li> </ul> </li> <li><code>nextWaiter</code>: \u7528\u4e8e <code>Condition</code> \u961f\u5217\uff0c\u6307\u5411\u4e0b\u4e00\u4e2a\u7b49\u5f85\u6761\u4ef6\u7684\u8282\u70b9\u3002</li> <li>\u9501\u6a21\u5f0f: <code>SHARED</code> (\u5171\u4eab) \u548c <code>EXCLUSIVE</code> (\u72ec\u5360)\u3002</li> </ul> <p>AQS \u5b9a\u4e49\u4e86\u4e00\u4e9b <code>protected</code> \u65b9\u6cd5\uff0c\u9700\u8981\u540c\u6b65\u5668\uff08\u5982 <code>ReentrantLock</code>\uff09\u53bb\u5b9e\u73b0\u5b83\u4eec\uff0c\u4ece\u800c\u5b9a\u4e49\u81ea\u5df1\u7684\u540c\u6b65\u903b\u8f91\u3002</p> AQS \u65b9\u6cd5 (protected) ReentrantLock (\u72ec\u5360\u9501) \u5b9e\u73b0 \u63cf\u8ff0 <code>tryAcquire(int arg)</code> \u662f (<code>FairSync</code> / <code>NonfairSync</code>) \u5c1d\u8bd5\u4ee5\u72ec\u5360\u65b9\u5f0f\u83b7\u53d6\u9501\u3002\u6210\u529f\u8fd4\u56de <code>true</code>\uff0c\u5931\u8d25\u8fd4\u56de <code>false</code>\u3002 <code>tryRelease(int arg)</code> \u662f (<code>Sync</code>) \u5c1d\u8bd5\u91ca\u653e\u9501\u3002\u6210\u529f\u8fd4\u56de <code>true</code>\uff0c\u5931\u8d25\u8fd4\u56de <code>false</code>\u3002 <code>isHeldExclusively()</code> \u662f \u5224\u65ad\u9501\u662f\u5426\u88ab\u5f53\u524d\u7ebf\u7a0b\u72ec\u5360\u3002 <p>\u4ea4\u4e92\u6d41\u7a0b\uff1a</p> <ul> <li>\u52a0\u9501 (<code>lock</code> -&gt; <code>acquire</code>):<ol> <li><code>ReentrantLock.lock()</code> \u8c03\u7528 <code>Sync.lock()</code>\u3002</li> <li><code>Sync.lock()</code> (\u516c\u5e73/\u975e\u516c\u5e73) \u8c03\u7528 AQS \u7684 <code>acquire()</code>\u3002</li> <li>AQS <code>acquire()</code> \u8c03\u7528 <code>ReentrantLock</code> \u81ea\u5df1\u5b9e\u73b0\u7684 <code>tryAcquire()</code>\u3002</li> <li>\u5982\u679c <code>tryAcquire()</code> \u5931\u8d25\uff0cAQS \u6846\u67b6\u8d1f\u8d23\u5c06\u7ebf\u7a0b\u5165\u961f\u3001\u6302\u8d77\u7b49\u540e\u7eed\u64cd\u4f5c\u3002</li> </ol> </li> <li>\u89e3\u9501 (<code>unlock</code> -&gt; <code>release</code>):<ol> <li><code>ReentrantLock.unlock()</code> \u8c03\u7528 <code>Sync.release()</code>\u3002</li> <li><code>Sync.release()</code> \u662f AQS \u7684\u65b9\u6cd5\uff0c\u5b83\u4f1a\u8c03\u7528 <code>ReentrantLock</code> \u81ea\u5df1\u5b9e\u73b0\u7684 <code>tryRelease()</code>\u3002</li> <li>\u5982\u679c <code>tryRelease()</code> \u6210\u529f\uff08\u9501\u5b8c\u5168\u91ca\u653e\uff09\uff0cAQS \u6846\u67b6\u8d1f\u8d23\u5524\u9192\u7b49\u5f85\u961f\u5217\u4e2d\u7684\u540e\u7ee7\u8282\u70b9\u3002</li> </ol> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/AQS%E5%8E%9F%E7%90%86/#qs-reentrantlock","title":"QS \u72ec\u5360\u9501\u6838\u5fc3\u6d41\u7a0b(\u901a\u8fc7 ReentrantLock)","text":""},{"location":"%E7%AC%94%E8%AE%B0/java/AQS%E5%8E%9F%E7%90%86/#acquire-addwaiter-acquirequeued","title":"\u7ebf\u7a0b\u52a0\u9501\u4e0e\u5165\u961f (<code>acquire</code> -&gt; <code>addWaiter</code> -&gt; <code>acquireQueued</code>)","text":"<p>\u5f53 <code>tryAcquire()</code> \u5931\u8d25\u540e\uff0cAQS \u6267\u884c <code>acquire(int arg)</code> \u65b9\u6cd5\u4e2d\u7684\u6838\u5fc3\u903b\u8f91\uff1a<code>!tryAcquire(arg) &amp;&amp; acquireQueued(addWaiter(Node.EXCLUSIVE), arg)</code></p> <ol> <li> <p><code>addWaiter(Node.EXCLUSIVE)</code>:</p> <ul> <li>\u5c06\u5f53\u524d\u7ebf\u7a0b\u548c\u72ec\u5360\u6a21\u5f0f (<code>EXCLUSIVE</code>) \u5c01\u88c5\u6210\u4e00\u4e2a\u65b0\u7684 <code>Node</code>\u3002</li> <li>\u5feb\u901f\u5165\u961f\u5c1d\u8bd5\uff1a\u901a\u8fc7 CAS \u64cd\u4f5c\u5c1d\u8bd5\u5c06\u65b0\u8282\u70b9\u76f4\u63a5\u8bbe\u7f6e\u4e3a\u5c3e\u8282\u70b9 (<code>tail</code>)\u3002<ul> <li><code>node.prev = tail;</code></li> <li><code>compareAndSetTail(pred, node);</code></li> <li><code>pred.next = node;</code></li> </ul> </li> <li>\u5b8c\u6574\u5165\u961f (<code>enq</code>): \u5982\u679c\u5feb\u901f\u5c1d\u8bd5\u5931\u8d25\uff08\u5982\u961f\u5217\u4e3a\u7a7a\u6216\u5e76\u53d1\u4fee\u6539\uff09\uff0c\u5219\u8fdb\u5165 <code>enq</code> \u65b9\u6cd5\u81ea\u65cb\u3002<ul> <li>\u5982\u679c\u961f\u5217\u4e3a\u7a7a (<code>tail == null</code>)\uff0c\u5219\u521d\u59cb\u5316\u961f\u5217\uff0c\u521b\u5efa\u4e00\u4e2a\u865a\u62df\u7684\u5934\u8282\u70b9 (<code>head</code>)\uff0c\u7136\u540e\u8ba9 <code>tail</code> \u6307\u5411\u5b83\u3002</li> <li>\u901a\u8fc7 CAS \u4e0d\u65ad\u5c1d\u8bd5\u5c06\u65b0\u8282\u70b9\u8bbe\u7f6e\u4e3a\u5c3e\u8282\u70b9\uff0c\u76f4\u5230\u6210\u529f\u4e3a\u6b62\u3002</li> </ul> </li> <li>\u6ce8\u610f\uff1a\u961f\u5217\u7684\u5934\u8282\u70b9\u662f\u4e00\u4e2a\u4e0d\u5173\u8054\u4efb\u4f55\u7ebf\u7a0b\u7684\u865a\u8282\u70b9\uff0c\u4ec5\u4f5c\u4e3a\u6807\u8bb0\u3002</li> </ul> </li> <li> <p><code>acquireQueued(final Node node, int arg)</code>:</p> <ul> <li>\u8282\u70b9\u5165\u961f\u540e\uff0c\u6b64\u65b9\u6cd5\u8d1f\u8d23\u8ba9\u8282\u70b9\u5728\u961f\u5217\u4e2d\u81ea\u65cb\u3001\u963b\u585e\u548c\u6700\u7ec8\u83b7\u53d6\u9501\u3002</li> <li>\u81ea\u65cb (<code>for (;;)</code>):<ul> <li>\u68c0\u67e5\u662f\u5426\u53ef\u4ee5\u83b7\u53d6\u9501: \u83b7\u53d6\u5f53\u524d\u8282\u70b9 <code>node</code> \u7684\u524d\u9a71\u8282\u70b9 <code>p</code>\u3002\u5982\u679c <code>p == head</code>\uff0c\u8bf4\u660e\u5f53\u524d\u8282\u70b9\u662f\u961f\u5217\u4e2d\u7684\u7b2c\u4e00\u4e2a\u6709\u6548\u8282\u70b9\uff0c\u6709\u8d44\u683c\u5c1d\u8bd5\u83b7\u53d6\u9501\u3002</li> <li>\u83b7\u53d6\u9501\u6210\u529f: \u5982\u679c <code>p == head</code> \u5e76\u4e14 <code>tryAcquire(arg)</code> \u6210\u529f\uff1a<ol> <li>\u5c06\u5f53\u524d\u8282\u70b9 <code>node</code> \u8bbe\u7f6e\u4e3a\u65b0\u7684\u5934\u8282\u70b9 (<code>setHead(node)</code>)\uff0c\u5e76\u6e05\u7a7a\u5176\u7ebf\u7a0b\u4fe1\u606f\uff0c\u4f7f\u5176\u53d8\u4e3a\u65b0\u7684\u865a\u8282\u70b9\u3002</li> <li>\u5c06\u65e7\u7684\u5934\u8282\u70b9\u7684 <code>next</code> \u6307\u9488\u7f6e\u4e3a <code>null</code>\uff0c\u5e2e\u52a9 GC\u3002</li> <li>\u65b9\u6cd5\u8fd4\u56de\uff0c\u52a0\u9501\u6d41\u7a0b\u7ed3\u675f\u3002</li> </ol> </li> <li>\u83b7\u53d6\u9501\u5931\u8d25: \u5982\u679c <code>p != head</code> \u6216 <code>tryAcquire(arg)</code> \u5931\u8d25\uff0c\u5219\u8fdb\u5165\u963b\u585e\u903b\u8f91\u3002</li> </ul> </li> </ul> </li> <li> <p>\u7ebf\u7a0b\u963b\u585e (<code>shouldParkAfterFailedAcquire</code> -&gt; <code>parkAndCheckInterrupt</code>):</p> <ul> <li><code>shouldParkAfterFailedAcquire(p, node)</code>: \u5224\u65ad\u5f53\u524d\u7ebf\u7a0b\u662f\u5426\u5e94\u8be5\u88ab\u6302\u8d77 (<code>park</code>)\u3002<ul> <li>\u68c0\u67e5\u524d\u9a71\u8282\u70b9 <code>p</code> \u7684 <code>waitStatus</code>\u3002</li> <li>\u5982\u679c <code>p.waitStatus == Node.SIGNAL (-1)</code>\uff0c\u8bf4\u660e\u524d\u9a71\u8282\u70b9\u5df2\u627f\u8bfa\u4f1a\u5524\u9192\u81ea\u5df1\uff0c\u6240\u4ee5\u5f53\u524d\u7ebf\u7a0b\u53ef\u4ee5\u5b89\u5168\u5730\u6302\u8d77\u3002\u8fd4\u56de <code>true</code>\u3002</li> <li>\u5982\u679c <code>p.waitStatus &gt; 0</code> (\u5373 <code>CANCELLED</code>)\uff0c\u8bf4\u660e\u524d\u9a71\u8282\u70b9\u5df2\u53d6\u6d88\uff0c\u5219\u5411\u524d\u904d\u5386\uff0c\u5c06\u5f53\u524d\u8282\u70b9\u94fe\u63a5\u5230\u7b2c\u4e00\u4e2a\u672a\u88ab\u53d6\u6d88\u7684\u8282\u70b9\u4e0a\u3002\u8fd4\u56de <code>false</code>\uff0c\u8ba9\u5916\u5c42\u5faa\u73af\u7ee7\u7eed\u3002</li> <li>\u5982\u679c <code>p.waitStatus</code> \u662f <code>0</code> \u6216 <code>PROPAGATE</code>\uff0c\u5219\u901a\u8fc7 CAS \u5c06\u5176\u72b6\u6001\u8bbe\u7f6e\u4e3a <code>SIGNAL</code>\uff0c\u8868\u793a\u201c\u6211\u9700\u8981\u4f60\u5c06\u6765\u5524\u9192\u6211\u201d\u3002\u8fd4\u56de <code>false</code>\uff0c\u8ba9\u5916\u5c42\u5faa\u73af\u518d\u8bd5\u4e00\u6b21\uff0c\u4e0b\u6b21\u5faa\u73af\u65f6 <code>waitStatus</code> \u5c31\u662f <code>SIGNAL</code> \u4e86\u3002</li> </ul> </li> <li><code>parkAndCheckInterrupt()</code>: \u5982\u679c <code>shouldParkAfterFailedAcquire</code> \u8fd4\u56de <code>true</code>\uff0c\u5219\u8c03\u7528 <code>LockSupport.park(this)</code> \u6302\u8d77\u5f53\u524d\u7ebf\u7a0b\uff0c\u7ebf\u7a0b\u5c06\u5728\u6b64\u5904\u505c\u6b62\u6267\u884c\uff0c\u76f4\u5230\u88ab <code>unpark</code>\u3002</li> </ul> </li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/java/AQS%E5%8E%9F%E7%90%86/#cancelacquire","title":"\u53d6\u6d88\u72b6\u6001\u8282\u70b9\u751f\u6210 (<code>cancelAcquire</code>)","text":"<p>\u5982\u679c\u5728 <code>acquireQueued</code> \u7684 <code>try</code> \u5757\u4e2d\u53d1\u751f\u5f02\u5e38\uff08\u5982\u4e2d\u65ad\uff09\uff0c<code>finally</code> \u5757\u4e2d\u7684 <code>cancelAcquire(node)</code> \u4f1a\u88ab\u8c03\u7528\u3002</p> <ul> <li>\u6838\u5fc3\u903b\u8f91: \u5c06\u4e00\u4e2a\u8282\u70b9\u4ece\u7b49\u5f85\u961f\u5217\u4e2d\u79fb\u9664\u3002<ol> <li>\u5c06\u8282\u70b9\u7684 <code>thread</code> \u8bbe\u4e3a <code>null</code>\u3002</li> <li>\u5411\u524d\u904d\u5386\uff0c\u8df3\u8fc7\u6240\u6709\u5df2\u662f <code>CANCELLED</code> \u72b6\u6001\u7684\u524d\u9a71\u8282\u70b9\u3002</li> <li>\u5c06\u5f53\u524d\u8282\u70b9\u7684 <code>waitStatus</code> \u8bbe\u4e3a <code>Node.CANCELLED</code>\u3002</li> <li>\u91cd\u65b0\u8fde\u63a5\u94fe\u8868\uff1a\u5c06\u6709\u6548\u7684\u524d\u9a71\u8282\u70b9\u7684 <code>next</code> \u6307\u9488\uff0c\u6307\u5411\u5f53\u524d\u8282\u70b9\u7684 <code>next</code> \u6307\u9488\uff0c\u4ece\u800c\u5728\u903b\u8f91\u4e0a\u201c\u8df3\u8fc7\u201d\u5f53\u524d\u8282\u70b9\u3002</li> <li>\u5982\u679c\u5f53\u524d\u8282\u70b9\u662f\u5c3e\u8282\u70b9\uff0c\u5219\u66f4\u65b0 <code>tail</code> \u6307\u9488\u3002</li> <li>\u5982\u679c\u4ee5\u4e0a\u90fd\u4e0d\u6ee1\u8db3\uff0c\u5219\u5c1d\u8bd5\u5524\u9192\u540e\u7ee7\u8282\u70b9 <code>unparkSuccessor(node)</code>\u3002</li> </ol> </li> <li>Prev \u6307\u9488\u7684\u5904\u7406: <code>cancelAcquire</code> \u4e3b\u8981\u5904\u7406 <code>next</code> \u6307\u9488\u3002<code>prev</code> \u6307\u9488\u7684\u4fee\u6b63\u53d1\u751f\u5728 <code>shouldParkAfterFailedAcquire</code> \u4e2d\uff0c\u56e0\u4e3a\u90a3\u65f6\u961f\u5217\u76f8\u5bf9\u7a33\u5b9a\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/AQS%E5%8E%9F%E7%90%86/#release-unparksuccessor","title":"\u89e3\u9501\u4e0e\u5524\u9192 (<code>release</code> -&gt; <code>unparkSuccessor</code>)","text":"<ol> <li> <p><code>release(int arg)</code>:</p> <ul> <li>\u8c03\u7528\u81ea\u5b9a\u4e49\u540c\u6b65\u5668\u5b9e\u73b0\u7684 <code>tryRelease(arg)</code>\u3002\u5bf9\u4e8e <code>ReentrantLock</code>\uff0c\u6b64\u65b9\u6cd5\u4f1a\u51cf\u5c11 <code>state</code> \u7684\u503c\u3002</li> <li>\u5982\u679c <code>tryRelease</code> \u8fd4\u56de <code>true</code> (\u8868\u793a\u9501\u5df2\u5b8c\u5168\u91ca\u653e\uff0c<code>state</code> \u53d8\u4e3a 0)\uff0c\u5219\u6267\u884c\u5524\u9192\u903b\u8f91\u3002</li> <li>\u83b7\u53d6\u5934\u8282\u70b9 <code>h</code>\uff0c\u5982\u679c <code>h != null</code> \u4e14 <code>h.waitStatus != 0</code>\uff0c\u5219\u8c03\u7528 <code>unparkSuccessor(h)</code>\u3002<ul> <li><code>h.waitStatus != 0</code>: \u901a\u5e38\u610f\u5473\u7740 <code>waitStatus</code> \u662f <code>SIGNAL</code>\uff0c\u8868\u660e\u6709\u540e\u7ee7\u8282\u70b9\u5728\u7b49\u5f85\u88ab\u5524\u9192\u3002</li> </ul> </li> </ul> </li> <li> <p><code>unparkSuccessor(Node node)</code>:</p> <ul> <li><code>node</code> \u53c2\u6570\u6b64\u65f6\u662f\u5934\u8282\u70b9\u3002\u6b64\u65b9\u6cd5\u8d1f\u8d23\u5524\u9192\u5b83\u7684\u540e\u7ee7\u8282\u70b9\u3002</li> <li>\u83b7\u53d6\u5934\u8282\u70b9\u7684\u540e\u7ee7\u8282\u70b9 <code>s = node.next</code>\u3002</li> <li>\u6838\u5fc3\u903b\u8f91\uff1a\u5982\u679c <code>s</code> \u4e3a <code>null</code> \u6216 <code>s</code> \u5df2\u88ab\u53d6\u6d88 (<code>waitStatus &gt; 0</code>)\uff0c\u5219\u4ece\u5c3e\u90e8\u5411\u524d\u904d\u5386\u961f\u5217\uff0c\u627e\u5230\u79bb\u5934\u8282\u70b9\u6700\u8fd1\u7684\u3001\u672a\u88ab\u53d6\u6d88\u7684\u8282\u70b9\u3002</li> <li>\u4e3a\u4ec0\u4e48\u4ece\u540e\u5f80\u524d\u904d\u5386\uff1f<ol> <li><code>addWaiter</code> \u5165\u961f\u65f6\uff0c<code>node.prev = tail</code> \u548c <code>compareAndSetTail</code> \u662f\u539f\u5b50\u6027\u7684\uff0c\u4f46 <code>pred.next = node</code> \u8fd9\u4e00\u6b65\u5728\u4e4b\u540e\u3002\u5728\u6781\u7aef\u5e76\u53d1\u4e0b\uff0c\u4ece\u524d\u5411\u540e\u904d\u5386\u53ef\u80fd\u65e0\u6cd5\u89e6\u53ca\u65b0\u52a0\u5165\u7684\u8282\u70b9\u3002</li> <li><code>cancelAcquire</code> \u65f6\uff0c\u4f1a\u5148\u65ad\u5f00 <code>next</code> \u6307\u9488\uff0c<code>prev</code> \u6307\u9488\u7684\u8fde\u63a5\u76f8\u5bf9\u53ef\u9760\u3002</li> </ol> </li> <li>\u627e\u5230\u5408\u9002\u7684\u540e\u7ee7\u8282\u70b9 <code>s</code> \u540e\uff0c\u8c03\u7528 <code>LockSupport.unpark(s.thread)</code> \u5524\u9192\u5176\u7ebf\u7a0b\u3002</li> </ul> </li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/java/AQS%E5%8E%9F%E7%90%86/#_2","title":"\u4e2d\u65ad\u5904\u7406","text":"<ul> <li>AQS \u5bf9\u4e2d\u65ad\u7684\u5904\u7406\u662f\u534f\u4f5c\u5f0f\u7684\u3002\u5728\u7b49\u5f85\u8fc7\u7a0b\u4e2d\uff0c\u5982\u679c\u7ebf\u7a0b\u88ab\u4e2d\u65ad\uff0c<code>parkAndCheckInterrupt</code> \u4f1a\u8fd4\u56de <code>true</code>\uff0c<code>acquireQueued</code> \u65b9\u6cd5\u4f1a\u8bb0\u5f55\u4e2d\u65ad\u72b6\u6001 (<code>interrupted = true</code>)\uff0c\u4f46\u5e76\u4e0d\u4f1a\u7acb\u5373\u505c\u6b62\u83b7\u53d6\u9501\u3002</li> <li>\u7ebf\u7a0b\u4f1a\u7ee7\u7eed\u5c1d\u8bd5\u83b7\u53d6\u9501\u3002</li> <li>\u5f53\u6210\u529f\u83b7\u53d6\u9501\u540e\uff0c<code>acquireQueued</code> \u8fd4\u56de\u8bb0\u5f55\u7684\u4e2d\u65ad\u72b6\u6001\u3002</li> <li>\u5982\u679c\u8fd4\u56de <code>true</code>\uff0c<code>acquire</code> \u65b9\u6cd5\u4f1a\u8c03\u7528 <code>selfInterrupt()</code>\uff0c\u5373 <code>Thread.currentThread().interrupt()</code>\uff0c\u91cd\u65b0\u8bbe\u7f6e\u5f53\u524d\u7ebf\u7a0b\u7684\u4e2d\u65ad\u6807\u5fd7\u3002\u8fd9\u662f\u4e00\u79cd\u201c\u5ef6\u8fdf\u201d\u4e2d\u65ad\uff0c\u5c06\u4e2d\u65ad\u7684\u54cd\u5e94\u6743\u4ea4\u8fd8\u7ed9\u8c03\u7528\u8005\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/AQS%E5%8E%9F%E7%90%86/#aqs_1","title":"AQS \u7684\u5e94\u7528","text":""},{"location":"%E7%AC%94%E8%AE%B0/java/AQS%E5%8E%9F%E7%90%86/#reentrantlock_1","title":"ReentrantLock \u7684\u53ef\u91cd\u5165\u6027\u5b9e\u73b0","text":"<p>\u53ef\u91cd\u5165\u6027\u662f\u901a\u8fc7 <code>tryAcquire</code> \u65b9\u6cd5\u4e2d\u7684\u903b\u8f91\u5b9e\u73b0\u7684\uff1a</p> <ol> <li>\u83b7\u53d6\u5f53\u524d <code>state</code> \u503c <code>c</code>\u3002</li> <li>\u5982\u679c <code>c == 0</code>\uff0c\u8868\u793a\u9501\u672a\u88ab\u6301\u6709\uff0c\u5c1d\u8bd5\u901a\u8fc7 CAS \u83b7\u53d6\u9501\u3002</li> <li>\u5982\u679c <code>c &gt; 0</code>\uff0c\u5219\u68c0\u67e5\u5f53\u524d\u9501\u7684\u6301\u6709\u8005\u662f\u5426\u662f\u5f53\u524d\u7ebf\u7a0b (<code>current == getExclusiveOwnerThread()</code>)\u3002</li> <li>\u5982\u679c\u662f\uff0c\u5c06 <code>state</code> \u7684\u503c\u52a0 1 (<code>nextc = c + acquires</code>)\uff0c\u4ee3\u8868\u91cd\u5165\u6b21\u6570\u589e\u52a0\u3002</li> <li>\u89e3\u9501\u65f6 (<code>tryRelease</code>)\uff0c\u76f8\u5e94\u5730\u5c06 <code>state</code> \u51cf 1\uff0c\u76f4\u5230 <code>state</code> \u51cf\u4e3a 0\uff0c\u9501\u624d\u88ab\u771f\u6b63\u91ca\u653e\u3002</li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/java/AQS%E5%8E%9F%E7%90%86/#juc","title":"JUC \u4e2d\u7684\u5176\u4ed6\u5e94\u7528","text":"\u540c\u6b65\u5de5\u5177 AQS \u5e94\u7528\u65b9\u5f0f Semaphore <code>state</code> \u7528\u4e8e\u8868\u793a\u5f53\u524d\u53ef\u7528\u7684\u4fe1\u53f7\u91cf\u8bb8\u53ef\u6570\u91cf\u3002<code>acquire</code> \u51cf\u5c11 <code>state</code>\uff0c<code>release</code> \u589e\u52a0 <code>state</code>\u3002\u4f7f\u7528\u5171\u4eab\u6a21\u5f0f\u3002 CountDownLatch <code>state</code> \u7528\u4e8e\u8868\u793a\u5012\u8ba1\u6570\u7684\u8ba1\u6570\u503c\u3002<code>countDown()</code> \u65b9\u6cd5\u901a\u8fc7 <code>release</code> \u51cf\u5c11 <code>state</code>\u3002\u5f53 <code>state</code> \u4e3a 0 \u65f6\uff0c\u6240\u6709\u5728 <code>await()</code> \u7684\u7ebf\u7a0b\u88ab\u5524\u9192\u3002 ReentrantReadWriteLock <code>state</code> \u88ab\u62c6\u5206\u4e3a\u4e24\u90e8\u5206\uff1a\u9ad8 16 \u4f4d\u8868\u793a\u8bfb\u9501\u7684\u6301\u6709\u6570\u91cf\uff0c\u4f4e 16 \u4f4d\u8868\u793a\u5199\u9501\u7684\u91cd\u5165\u6b21\u6570\u3002 ThreadPoolExecutor \u5176\u5185\u90e8\u5de5\u4f5c\u7ebf\u7a0b <code>Worker</code> \u7ee7\u627f\u81ea AQS\uff0c\u4f7f\u7528 <code>state</code> \u6765\u5b9e\u73b0\u5bf9\u7ebf\u7a0b\u7684\u72ec\u5360\u63a7\u5236\uff0c\u9632\u6b62\u4efb\u52a1\u6267\u884c\u65f6\u88ab\u4e0d\u5f53\u4e2d\u65ad\u3002"},{"location":"%E7%AC%94%E8%AE%B0/java/AQS%E5%8E%9F%E7%90%86/#leelock","title":"\u81ea\u5b9a\u4e49\u540c\u6b65\u5de5\u5177\u793a\u4f8b (<code>LeeLock</code>)","text":"<p>\u901a\u8fc7\u7ee7\u627f AQS\uff0c\u53ef\u4ee5\u8f7b\u677e\u5b9e\u73b0\u4e00\u4e2a\u7b80\u5355\u7684\u3001\u4e0d\u53ef\u91cd\u5165\u7684\u72ec\u5360\u9501\uff1a</p> <ol> <li>\u521b\u5efa\u4e00\u4e2a\u79c1\u6709\u9759\u6001\u5185\u90e8\u7c7b <code>Sync</code> \u7ee7\u627f <code>AbstractQueuedSynchronizer</code>\u3002</li> <li>\u91cd\u5199 <code>tryAcquire</code>\uff1a\u4f7f\u7528 <code>compareAndSetState(0, 1)</code>\uff0c\u6210\u529f\u5219\u83b7\u53d6\u9501\u3002</li> <li>\u91cd\u5199 <code>tryRelease</code>\uff1a\u76f4\u63a5 <code>setState(0)</code> \u91ca\u653e\u9501\u3002</li> <li>\u91cd\u5199 <code>isHeldExclusively</code>\uff1a\u5224\u65ad <code>getState() == 1</code>\u3002</li> <li>\u5916\u90e8 <code>lock()</code> \u548c <code>unlock()</code> \u65b9\u6cd5\u5206\u522b\u8c03\u7528 <code>sync.acquire(1)</code> \u548c <code>sync.release(1)</code>\u3002</li> </ol> <p>\u8fd9\u4e2a\u4f8b\u5b50\u5b8c\u7f8e\u5c55\u793a\u4e86 AQS \u4f5c\u4e3a\u540c\u6b65\u5668\u6846\u67b6\u7684\u5f3a\u5927\u4e4b\u5904\uff1a\u5f00\u53d1\u8005\u53ea\u9700\u5173\u6ce8\u72b6\u6001\u7684\u83b7\u53d6\u4e0e\u91ca\u653e\u903b\u8f91\uff0c\u800c\u7ebf\u7a0b\u7684\u6392\u961f\u3001\u963b\u585e\u3001\u5524\u9192\u7b49\u590d\u6742\u5de5\u4f5c\u5168\u90e8\u7531 AQS \u6846\u67b6\u5b8c\u6210\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/G1/","title":"G1","text":""},{"location":"%E7%AC%94%E8%AE%B0/java/G1/#_1","title":"\u6982\u8ff0","text":"<p>G1 (Garbage-First) \u662f\u4e00\u6b3e\u9762\u5411\u670d\u52a1\u7aef\u5e94\u7528\u3001\u4e3a\u5927\u5185\u5b58\u548c\u591a\u5904\u7406\u5668\u73af\u5883\u8bbe\u8ba1\u7684\u5783\u573e\u56de\u6536\u5668\uff0c\u4e8eJava 7u4\u7248\u672c\u6b63\u5f0f\u5f15\u5165\u3002\u5b83\u7684\u6838\u5fc3\u76ee\u6807\u662f\u5728\u4fdd\u6301\u9ad8\u541e\u5410\u91cf\u7684\u540c\u65f6\uff0c\u6ee1\u8db3\u7528\u6237\u8bbe\u5b9a\u7684\u505c\u987f\u65f6\u95f4\u76ee\u6807\uff08\u8f6f\u5b9e\u65f6\uff09\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/G1/#g1","title":"G1\u7684\u6838\u5fc3\u4f18\u52bf","text":"<ul> <li>\u5e76\u884c\u4e0e\u5e76\u53d1: \u5229\u7528\u591aCPU\u6838\u5fc3\u6765\u7f29\u77ed\u505c\u987f\u65f6\u95f4\uff08STW\uff09\uff0c\u5e76\u901a\u8fc7\u4e0e\u5e94\u7528\u7ebf\u7a0b\u5e76\u53d1\u6267\u884c\u7684\u65b9\u5f0f\u5b8c\u6210\u90e8\u5206\u5de5\u4f5c\u3002</li> <li>\u5206\u4ee3\u4f46\u975e\u7269\u7406\u5206\u533a: \u903b\u8f91\u4e0a\u4fdd\u7559\u5206\u4ee3\u6982\u5ff5\uff08\u5e74\u8f7b\u4ee3\u3001\u8001\u5e74\u4ee3\uff09\uff0c\u4f46\u7269\u7406\u4e0a\u4e0d\u518d\u662f\u8fde\u7eed\u7a7a\u95f4\uff0c\u63d0\u4f9b\u4e86\u66f4\u9ad8\u7684\u7075\u6d3b\u6027\u3002</li> <li>\u7a7a\u95f4\u6574\u5408\uff08\u538b\u7f29\uff09: G1\u4ece\u6574\u4f53\u4e0a\u770b\u662f\u4e00\u6b3e\u57fa\u4e8e\u201c\u6807\u8bb0-\u590d\u5236\u201d\u7b97\u6cd5\u7684\u6536\u96c6\u5668\uff0c\u4ece\u5c40\u90e8\uff08\u4e24\u4e2aRegion\u4e4b\u95f4\uff09\u770b\u662f\u201c\u590d\u5236\u201d\u7b97\u6cd5\u3002\u8fd9\u610f\u5473\u7740G1\u5728\u56de\u6536\u540e\u4e0d\u4f1a\u4ea7\u751f\u5185\u5b58\u788e\u7247\uff0c\u6709\u5229\u4e8e\u7a0b\u5e8f\u957f\u65f6\u95f4\u7a33\u5b9a\u8fd0\u884c\u3002</li> <li>\u53ef\u9884\u6d4b\u7684\u505c\u987f: G1\u7684\u6838\u5fc3\u8bbe\u8ba1\u54f2\u5b66\u3002\u7528\u6237\u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2a\u671f\u671b\u7684\u6700\u5927\u505c\u987f\u65f6\u95f4\uff08\u901a\u8fc7 <code>-XX:MaxGCPauseMillis</code>\uff09\uff0cG1\u4f1a\u5c3d\u529b\u8fbe\u6210\u6b64\u76ee\u6807\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/G1/#g1cms","title":"G1\u4e0eCMS\u7684\u4e3b\u8981\u533a\u522b","text":"<ul> <li>\u7b97\u6cd5: G1\u4f7f\u7528\u201c\u6807\u8bb0-\u590d\u5236\u201d\uff0c\u800cCMS\u4f7f\u7528\u201c\u6807\u8bb0-\u6e05\u9664\u201d\uff0c\u56e0\u6b64G1\u5929\u7136\u907f\u514d\u4e86\u5185\u5b58\u788e\u7247\u95ee\u9898\u3002</li> <li>\u5185\u5b58\u6a21\u578b: G1\u57fa\u4e8e\u5206\u533a\uff08Region\uff09\u6a21\u578b\uff0c\u800cCMS\u57fa\u4e8e\u4f20\u7edf\u7684\u8fde\u7eed\u5206\u4ee3\u6a21\u578b\u3002</li> <li>\u53ef\u9884\u6d4b\u6027: G1\u901a\u8fc7\u5176\u201cGarbage-First\u201d\u7b56\u7565\u548c\u5206\u533a\u6a21\u578b\uff0c\u5728\u505c\u987f\u65f6\u95f4\u63a7\u5236\u4e0a\u6bd4CMS\u66f4\u5177\u53ef\u9884\u6d4b\u6027\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/G1/#g1_1","title":"G1\u7684\u5185\u5b58\u6a21\u578b","text":"<p>G1\u98a0\u8986\u4e86\u4f20\u7edfGC\u5c06\u5806\u5212\u5206\u4e3a\u8fde\u7eed\u7269\u7406\u7a7a\u95f4\u7684\u505a\u6cd5\uff0c\u5f15\u5165\u4e86\u5206\u533a\uff08Region\uff09\u7684\u6982\u5ff5\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/G1/#_2","title":"\u6838\u5fc3\u6982\u5ff5","text":"<ul> <li>\u5206\u533a (Region)</li> <li>\u6574\u4e2aJava\u5806\u88ab\u5212\u5206\u4e3a\u7ea62048\u4e2a\u5927\u5c0f\u76f8\u7b49\u7684\u72ec\u7acb\u5206\u533a\uff08Region\uff09\uff0c\u6bcf\u4e2a\u5206\u533a\u5927\u5c0f\u57281MB\u523032MB\u4e4b\u95f4\uff0c\u5fc5\u987b\u662f2\u7684\u5e42\u3002</li> <li> <p>\u6bcf\u4e2aRegion\u5728\u4efb\u4f55\u65f6\u523b\u90fd\u626e\u6f14\u4e00\u4e2a\u7279\u5b9a\u7684\u89d2\u8272\uff1aEden\u3001Survivor\u3001Old\u6216Humongous\u3002\u8fd9\u79cd\u89d2\u8272\u662f\u52a8\u6001\u53d8\u5316\u7684\u3002</p> </li> <li> <p>\u6536\u96c6\u96c6\u5408 (CSet - Collection Set)</p> </li> <li>CSet\u662f\u6307\u5728\u4e00\u6b21GC\u505c\u987f\u65f6\uff0c\u88ab\u9009\u4e2d\u8fdb\u884c\u56de\u6536\u7684\u4e00\u7cfb\u5217\u5206\u533a\u7684\u96c6\u5408\u3002</li> <li> <p>G1\u7684\u56de\u6536\u64cd\u4f5c\uff08\u65e0\u8bba\u662f\u5e74\u8f7b\u4ee3\u6536\u96c6\u8fd8\u662f\u6df7\u5408\u6536\u96c6\uff09\u90fd\u662f\u9488\u5bf9CSet\u4e2d\u7684\u5206\u533a\u8fdb\u884c\u7684\u3002</p> </li> <li> <p>\u5df2\u8bb0\u5fc6\u96c6\u5408 (RSet - Remembered Set)</p> </li> <li>RSet\u662fG1\u89e3\u51b3\u8de8\u5206\u533a\u5f15\u7528\u95ee\u9898\u7684\u5173\u952e\u3002\u6bcf\u4e2a\u5206\u533a\u90fd\u6709\u4e00\u4e2aRSet\uff0c\u7528\u4e8e\u8bb0\u5f55\u5176\u4ed6\u5206\u533a\u4e2d\u7684\u5bf9\u8c61\u5bf9\u672c\u5206\u533a\u5185\u5bf9\u8c61\u7684\u5f15\u7528\u3002</li> <li> <p>\u5f53\u56de\u6536\u4e00\u4e2a\u5206\u533a\u65f6\uff0c\u53ea\u9700\u626b\u63cf\u5176RSet\uff0c\u5373\u53ef\u77e5\u9053\u5916\u90e8\u5f15\u7528\u662f\u5426\u5b58\u6d3b\uff0c\u4ece\u800c\u907f\u514d\u4e86\u5168\u5806\u626b\u63cf\uff0c\u8fd9\u662f\u5b9e\u73b0\u53ef\u9884\u6d4b\u505c\u987f\u7684\u5173\u952e\u3002RSet\u7684\u7ef4\u62a4\u901a\u8fc7\u5199\u5c4f\u969c\uff08Write Barrier\uff09\u5b9e\u73b0\u3002</p> </li> <li> <p>\u5de8\u578b\u5bf9\u8c61 (Humongous Object)</p> </li> <li>\u5f53\u4e00\u4e2a\u5bf9\u8c61\u7684\u5927\u5c0f\u8d85\u8fc7\u4e00\u4e2aRegion\u5bb9\u91cf\u768450%\u65f6\uff0c\u5b83\u88ab\u89c6\u4e3a\u5de8\u578b\u5bf9\u8c61\u3002</li> <li>\u5de8\u578b\u5bf9\u8c61\u4f1a\u76f4\u63a5\u5206\u914d\u5728\u8001\u5e74\u4ee3\u7684\u8fde\u7eed\u5206\u533a\uff08Humongous Region\uff09\u4e2d\u3002G1\u5bf9\u5de8\u578b\u5bf9\u8c61\u7684\u56de\u6536\u6709\u7279\u6b8a\u4f18\u5316\uff0c\u4f8b\u5982\u5728\u5e76\u53d1\u6807\u8bb0\u9636\u6bb5\u53d1\u73b0\u5176\u4e0d\u88ab\u5f15\u7528\uff0c\u5c31\u53ef\u4ee5\u5728\u6e05\u7406\u9636\u6bb5\u76f4\u63a5\u56de\u6536\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/G1/#g1_2","title":"G1\u7684\u5783\u573e\u6536\u96c6\u5468\u671f","text":"<p>G1\u7684\u6536\u96c6\u6d3b\u52a8\u4e3b\u8981\u5206\u4e3a\u4e24\u79cd\uff1a\u5e74\u8f7b\u4ee3\u6536\u96c6\uff08Young Collection\uff09\u548c\u6df7\u5408\u6536\u96c6\uff08Mixed Collection\uff09\u3002\u5b83\u6ca1\u6709\u4f20\u7edf\u7684Full GC\u6982\u5ff5\uff0c\u9664\u975e\u53d1\u751f\u8f6c\u79fb\u5931\u8d25\uff08Evacuation Failure\uff09\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/G1/#young-collection","title":"\u5e74\u8f7b\u4ee3\u6536\u96c6 (Young Collection)","text":"<ul> <li>\u89e6\u53d1\u65f6\u673a: \u5f53Eden\u7a7a\u95f4\u88ab\u5360\u6ee1\uff0c\u65b0\u7684\u5bf9\u8c61\u65e0\u6cd5\u5206\u914d\u65f6\u89e6\u53d1\u3002</li> <li>\u5de5\u4f5c\u5185\u5bb9:</li> <li>\u8fd9\u662f\u4e00\u4e2a\u5b8c\u5168STW\uff08Stop-The-World\uff09\u7684\u8fc7\u7a0b\u3002</li> <li>G1\u5c06\u6240\u6709\u5e74\u8f7b\u4ee3\u5206\u533a\uff08Eden + Survivor\uff09\u4f5c\u4e3aCSet\u3002</li> <li>\u5b58\u6d3b\u7684\u5bf9\u8c61\u88ab\u590d\u5236\u5230\u65b0\u7684Survivor\u5206\u533a\u6216\u664b\u5347\u5230\u8001\u5e74\u4ee3\u5206\u533a\u3002</li> <li>\u56de\u6536\u5b8c\u6210\u540e\uff0c\u539f\u6709\u7684\u5e74\u8f7b\u4ee3\u5206\u533a\u88ab\u5b8c\u5168\u6e05\u7a7a\uff0c\u53d8\u4e3a\u53ef\u7528\u7a7a\u95f2\u5206\u533a\u3002</li> <li>\u4f5c\u7528: \u5b8c\u6210\u5e38\u89c4\u7684\u5783\u573e\u56de\u6536\uff0c\u5e76\u7d2f\u79ef\u8001\u5e74\u4ee3\u7684\u4f7f\u7528\u7387\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/G1/#mixed-collection-cycle","title":"\u6df7\u5408\u6536\u96c6\u5468\u671f (Mixed Collection Cycle)","text":"<p>\u6df7\u5408\u6536\u96c6\u662fG1\u56de\u6536\u8001\u5e74\u4ee3\u7a7a\u95f4\u7684\u6838\u5fc3\u673a\u5236\uff0c\u5b83\u4e0d\u662f\u4e00\u6b21\u5355\u72ec\u7684GC\uff0c\u800c\u662f\u4e00\u4e2a\u5b8c\u6574\u7684\u5468\u671f\uff0c\u5305\u542b\u5e76\u53d1\u9636\u6bb5\u548cSTW\u56de\u6536\u9636\u6bb5\u3002</p> <ul> <li> <p>\u89e6\u53d1\u65f6\u673a: \u5f53\u8001\u5e74\u4ee3\u5360\u7528\u5806\u603b\u5927\u5c0f\u7684\u6bd4\u4f8b\u8fbe\u5230<code>InitiatingHeapOccupancyPercent</code>\uff08IHOP\uff0c\u9ed8\u8ba445%\uff09\u9608\u503c\u65f6\uff0cG1\u4f1a\u542f\u52a8\u6df7\u5408\u6536\u96c6\u5468\u671f\u3002</p> </li> <li> <p>\u5468\u671f\u9636\u6bb5:</p> </li> <li> <p>\u521d\u59cb\u6807\u8bb0 (Initial Mark)</p> <ul> <li>STW\u9636\u6bb5\u3002</li> <li>\u6b64\u9636\u6bb5\u901a\u5e38\u201c\u501f\u7528\u201d\u4e00\u6b21\u6b63\u5e38\u7684\u5e74\u8f7b\u4ee3\u6536\u96c6\uff08Piggybacking\uff09\u7684STW\u65f6\u95f4\u6765\u5b8c\u6210\u3002</li> <li>\u5b83\u4ec5\u6807\u8bb0GC Roots\u80fd\u76f4\u63a5\u5173\u8054\u5230\u7684\u5bf9\u8c61\uff0c\u901f\u5ea6\u5f88\u5feb\u3002</li> </ul> </li> <li> <p>\u5e76\u53d1\u6807\u8bb0 (Concurrent Marking)</p> <ul> <li>\u4e0e\u5e94\u7528\u7a0b\u5e8f\u5e76\u53d1\u6267\u884c\uff0c\u4e0d\u4ea7\u751fSTW\u3002</li> <li>G1\u4ece\u6b64\u524d\u7684GC Roots\u51fa\u53d1\uff0c\u904d\u5386\u6574\u4e2a\u5bf9\u8c61\u56fe\uff0c\u67e5\u627e\u5e76\u6807\u8bb0\u6240\u6709\u5b58\u6d3b\u5bf9\u8c61\u3002</li> <li>\u8fd9\u4e2a\u9636\u6bb5\u4f1a\u4f7f\u7528SATB\uff08Snapshot-at-the-Beginning\uff09\u7b97\u6cd5\u6765\u4fdd\u8bc1\u5e76\u53d1\u6807\u8bb0\u7684\u6b63\u786e\u6027\u3002</li> </ul> </li> <li> <p>\u6700\u7ec8\u6807\u8bb0 (Remark)</p> <ul> <li>STW\u9636\u6bb5\u3002</li> <li>\u8fd9\u4e2a\u9636\u6bb5\u9700\u8981\u77ed\u6682\u6682\u505c\u5e94\u7528\uff0c\u4ee5\u5904\u7406\u5e76\u53d1\u6807\u8bb0\u9636\u6bb5\u7ed3\u675f\u540e\u5bf9\u8c61\u5f15\u7528\u5173\u7cfb\u7684\u5c11\u91cf\u53d8\u5316\uff08\u5904\u7406SATB\u65e5\u5fd7\uff09\uff0c\u5e76\u6700\u7ec8\u786e\u5b9a\u6240\u6709\u5b58\u6d3b\u5bf9\u8c61\u3002</li> </ul> </li> <li> <p>\u6e05\u7406 (Cleanup)</p> <ul> <li>STW\u9636\u6bb5\u3002</li> <li>\u8ba1\u7b97\u5404\u4e2a\u8001\u5e74\u4ee3\u5206\u533a\u7684\u5b58\u6d3b\u5bf9\u8c61\u6570\u91cf\u548c\u7a7a\u95f4\uff0c\u5e76\u8fdb\u884c\u6392\u5e8f\uff0c\u8bc6\u522b\u51fa\u56de\u6536\u4ef7\u503c\u6700\u9ad8\u7684\u5206\u533a\uff08Garbage-First\uff09\u3002</li> <li>\u8bc6\u522b\u5e76\u76f4\u63a5\u56de\u6536\u5b8c\u5168\u6ca1\u6709\u5b58\u6d3b\u5bf9\u8c61\u7684\u7a7a\u95f2\u5206\u533a\u3002</li> </ul> </li> <li> <p>\u6df7\u5408\u6536\u96c6 (Mixed Collection)</p> <ul> <li>STW\u9636\u6bb5\u3002</li> <li>\u5728\u8fd9\u4e2a\u9636\u6bb5\uff0cG1\u4f1a\u6267\u884c\u4e00\u6b21\u201c\u6df7\u5408\u201d\u6a21\u5f0f\u7684GC\u3002</li> <li>CSet\u4e2d\u4e0d\u4ec5\u5305\u542b\u6240\u6709\u5e74\u8f7b\u4ee3\u5206\u533a\uff0c\u8fd8\u5305\u542b\u4e86\u90e8\u5206\u6839\u636e\u6e05\u7406\u9636\u6bb5\u8ba1\u7b97\u51fa\u7684\u3001\u56de\u6536\u4ef7\u503c\u6700\u9ad8\u7684\u8001\u5e74\u4ee3\u5206\u533a\u3002</li> <li>\u8fd9\u4e2a\u9636\u6bb5\u4f1a\u6267\u884c\u591a\u6b21\uff0c\u76f4\u5230\u56de\u6536\u7684\u8001\u5e74\u4ee3\u5206\u533a\u8fbe\u5230\u4e86\u9884\u8bbe\u76ee\u6807\u6216\u4e0d\u518d\u6709\u9ad8\u6536\u76ca\u7684\u5206\u533a\u4e3a\u6b62\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/G1/#full-gc","title":"\u8f6c\u79fb\u5931\u8d25\u7684\u62c5\u4fdd\u673a\u5236 (Full GC)","text":"<p>\u5f53G1\u5728\u8fdb\u884c\u5bf9\u8c61\u590d\u5236\uff08Evacuation\uff09\u65f6\uff0c\u5982\u679c\u76ee\u6807\u7a7a\u95f4\uff08To-Space\uff09\u4e0d\u8db3\u4ee5\u5bb9\u7eb3\u6240\u6709\u5b58\u6d3b\u5bf9\u8c61\uff0c\u5c31\u4f1a\u53d1\u751f\u201c\u8f6c\u79fb\u5931\u8d25\u201d\uff08Evacuation Failure\uff09\u3002\u6b64\u65f6\uff0cG1\u4f1a\u653e\u5f03\u539f\u6709\u7684\u56de\u6536\u7b56\u7565\uff0c\u8f6c\u800c\u89e6\u53d1\u4e00\u6b21\u5355\u7ebf\u7a0b\u3001\u957f\u65f6\u95f4STW\u7684Full GC\uff0c\u5bf9\u6574\u4e2a\u5806\u8fdb\u884c\u6807\u8bb0\u3001\u6574\u7406\u548c\u538b\u7f29\u3002\u8fd9\u662fG1\u4e2d\u5e94\u6781\u529b\u907f\u514d\u7684\u60c5\u51b5\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/G1/#_3","title":"\u6838\u5fc3\u7b97\u6cd5\u4e0e\u673a\u5236","text":""},{"location":"%E7%AC%94%E8%AE%B0/java/G1/#_4","title":"\u5e76\u53d1\u6807\u8bb0\u4e0e\u6f0f\u6807\u95ee\u9898","text":"<ul> <li>\u4e09\u8272\u6807\u8bb0\u6cd5: \u662f\u5e76\u53d1\u6807\u8bb0\u7684\u57fa\u7840\uff0c\u5c06\u5bf9\u8c61\u5206\u4e3a\u767d\uff08\u672a\u8bbf\u95ee\uff09\u3001\u7070\uff08\u81ea\u8eab\u5df2\u8bbf\u95ee\uff0c\u4f46\u5176\u5f15\u7528\u672a\u5b8c\u5168\u626b\u63cf\uff09\u3001\u9ed1\uff08\u81ea\u8eab\u548c\u5176\u5f15\u7528\u90fd\u5df2\u626b\u63cf\uff09\u4e09\u7c7b\u3002</li> <li>\u6f0f\u6807\u95ee\u9898: \u5728\u5e76\u53d1\u6807\u8bb0\u8fc7\u7a0b\u4e2d\uff0c\u5982\u679c\u5e94\u7528\u7ebf\u7a0b\u4fee\u6539\u4e86\u5bf9\u8c61\u5f15\u7528\uff08\u5982\u4e00\u4e2a\u9ed1\u8272\u5bf9\u8c61\u5f15\u7528\u4e86\u767d\u8272\u5bf9\u8c61\uff0c\u540c\u65f6\u7070\u8272\u5bf9\u8c61\u5230\u8fd9\u4e2a\u767d\u8272\u5bf9\u8c61\u7684\u5f15\u7528\u88ab\u5207\u65ad\uff09\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u672c\u5e94\u5b58\u6d3b\u7684\u767d\u8272\u5bf9\u8c61\u88ab\u9519\u8bef\u56de\u6536\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/G1/#g1satb","title":"G1\u7684\u89e3\u51b3\u65b9\u6848\uff1aSATB","text":"<ul> <li>SATB (Snapshot-at-the-Beginning / \u8d77\u59cb\u5feb\u7167): G1\u89e3\u51b3\u6f0f\u6807\u95ee\u9898\u7684\u6838\u5fc3\u7b97\u6cd5\u3002</li> <li>\u539f\u7406: \u5728\u5e76\u53d1\u6807\u8bb0\u5f00\u59cb\u65f6\uff0cG1\u903b\u8f91\u4e0a\u4e3a\u5806\u521b\u5efa\u4e86\u4e00\u4e2a\u201c\u5feb\u7167\u201d\u3002\u5b83\u4e0d\u5173\u5fc3\u6807\u8bb0\u8fc7\u7a0b\u4e2d\u65b0\u589e\u7684\u5f15\u7528\uff0c\u800c\u662f\u5173\u6ce8\u90a3\u4e9b\u201c\u6d88\u5931\u201d\u7684\u5f15\u7528\u3002</li> <li>\u5b9e\u73b0: \u901a\u8fc7\u5199\u524d\u5c4f\u969c\uff08Pre-Write Barrier\uff09\u5b9e\u73b0\u3002\u5f53\u4e00\u4e2a\u5bf9\u8c61\u5f15\u7528\u53d1\u751f\u6539\u53d8\u65f6\uff0c\u5b83\u539f\u6765\u7684\u5f15\u7528\u503c\uff08\u5373\u90a3\u4e2a\u5c06\u8981\u201c\u6d88\u5931\u201d\u7684\u5f15\u7528\uff09\u4f1a\u88ab\u8bb0\u5f55\u5230\u4e00\u4e2a\u65e5\u5fd7\uff08SATB Log Buffer\uff09\u4e2d\u3002\u5728\u540e\u7eed\u7684\u6807\u8bb0\u9636\u6bb5\uff0cG1\u4f1a\u5904\u7406\u8fd9\u4e9b\u65e5\u5fd7\uff0c\u786e\u4fdd\u5feb\u7167\u4e2d\u5b58\u6d3b\u7684\u5bf9\u8c61\u6700\u7ec8\u88ab\u6b63\u786e\u6807\u8bb0\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/G1/#rset","title":"RSet\u7684\u7ef4\u62a4","text":"<ul> <li>RSet\u7684\u66f4\u65b0\u4f9d\u8d56\u4e8e\u5199\u540e\u5c4f\u969c\uff08Post-Write Barrier\uff09\u3002</li> <li>\u5f53\u4e00\u4e2a\u5bf9\u8c61\u5b57\u6bb5\u88ab\u5199\u5165\u65b0\u7684\u5f15\u7528\u65f6\uff0c\u5199\u540e\u5c4f\u969c\u4f1a\u68c0\u67e5\u8fd9\u662f\u5426\u662f\u4e00\u4e2a\u8de8\u5206\u533a\u7684\u5f15\u7528\u3002\u5982\u679c\u662f\uff0c\u5b83\u4f1a\u5c06\u8fd9\u4e2a\u4fee\u6539\u4fe1\u606f\u8bb0\u5f55\u5230\u4e00\u4e2a\u201c\u810f\u5361\u7247\u961f\u5217\u201d\uff08Dirty Card Queue\uff09\u4e2d\u3002</li> <li>G1\u6709\u4e13\u95e8\u7684\u5e76\u53d1\u4f18\u5316\u7ebf\u7a0b\uff08Concurrent Refinement Threads\uff09\u5728\u540e\u53f0\u5f02\u6b65\u5904\u7406\u8fd9\u4e9b\u961f\u5217\uff0c\u5c06\u4fe1\u606f\u66f4\u65b0\u5230\u5bf9\u5e94\u5206\u533a\u7684RSet\u4e2d\uff0c\u4ece\u800c\u7ef4\u62a4RSet\u7684\u51c6\u786e\u6027\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/GC%20%E8%B0%83%E4%BC%98/","title":"GC \u8c03\u4f18","text":""},{"location":"%E7%AC%94%E8%AE%B0/java/GC%20%E8%B0%83%E4%BC%98/#gc","title":"\u5982\u4f55\u5224\u65ad GC \u662f\u5426\u5b58\u5728\u95ee\u9898","text":""},{"location":"%E7%AC%94%E8%AE%B0/java/GC%20%E8%B0%83%E4%BC%98/#_1","title":"\u8bc4\u4ef7\u6838\u5fc3\u6307\u6807","text":"<ol> <li>\u5ef6\u8fdf (Latency): \u6307 GC \u8fc7\u7a0b\u4e2d Stop-The-World (STW) \u7684\u6700\u5927\u505c\u987f\u65f6\u95f4\u3002\u76ee\u6807\u662f STW \u65f6\u95f4\u8d8a\u77ed\u8d8a\u597d\uff0c\u901a\u5e38\u9700\u8981\u4f4e\u4e8e\u670d\u52a1\u7684 TP9999 \u8017\u65f6\u3002</li> <li>\u541e\u5410\u91cf (Throughput): \u6307 <code>(1 - GC \u65f6\u95f4 / \u7a0b\u5e8f\u603b\u8fd0\u884c\u65f6\u95f4) * 100%</code>\u3002\u76ee\u6807\u662f\u541e\u5410\u91cf\u8d8a\u9ad8\u8d8a\u597d\uff0c\u901a\u5e38\u8981\u6c42\u4e0d\u4f4e\u4e8e 99.99%\u3002</li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/java/GC%20%E8%B0%83%E4%BC%98/#_2","title":"\u5224\u65ad\u95ee\u9898\u7684\u6839\u56e0","text":"<p>\u5f53\u51fa\u73b0\u670d\u52a1 RT \u4e0a\u6da8\u3001CPU \u8d1f\u8f7d\u9ad8\u3001\u7ebf\u7a0b Block \u7b49\u73b0\u8c61\u65f6\uff0c\u9700\u5224\u65ad GC \u662f\u95ee\u9898\u7684\u201c\u56e0\u201d\u8fd8\u662f\u201c\u679c\u201d\u3002 *   \u65f6\u5e8f\u5206\u6790: \u6700\u5148\u51fa\u73b0\u7684\u5f02\u5e38\u6307\u6807\uff0c\u66f4\u6709\u53ef\u80fd\u662f\u6839\u56e0\u3002 *   \u6982\u7387\u5206\u6790: \u7ed3\u5408\u5386\u53f2\u7ecf\u9a8c\uff0c\u4ece\u6700\u5e38\u51fa\u95ee\u9898\u7684\u6a21\u5757\u5f00\u59cb\u6392\u67e5\u3002 *   \u5b9e\u9a8c\u5206\u6790: \u5728\u6d4b\u8bd5\u73af\u5883\u6a21\u62df\u5355\u4e00\u53d8\u91cf\uff08\u5982\u9ad8 CPU\uff09\uff0c\u89c2\u5bdf\u662f\u5426\u80fd\u590d\u73b0\u95ee\u9898\u3002 *   \u53cd\u8bc1\u5206\u6790: \u5982\u679c\u96c6\u7fa4\u4e2d\u67d0\u4e9b\u8282\u70b9\u65e0\u6162\u67e5\u8be2\u3001CPU \u6b63\u5e38\u4f46\u4ecd\u6709\u95ee\u9898\uff0c\u5219\u53ef\u5c06\u5acc\u7591\u8f6c\u5411 GC\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/GC%20%E8%B0%83%E4%BC%98/#gc-cause","title":"\u8bfb\u61c2 GC Cause","text":"<p>\u901a\u8fc7 GC \u65e5\u5fd7\u4e2d\u7684 <code>GCCause</code> \u53ef\u4ee5\u4e86\u89e3\u89e6\u53d1 GC \u7684\u539f\u56e0\uff0c\u5e38\u89c1\u7684\u6709\uff1a *   <code>Allocation Failure</code>: \u5728\u5e74\u8f7b\u4ee3\u4e2d\u6ca1\u6709\u8db3\u591f\u7a7a\u95f4\u5206\u914d\u65b0\u5bf9\u8c61\u65f6\u89e6\u53d1\u3002 *   <code>System.gc()</code>: \u624b\u52a8\u8c03\u7528 <code>System.gc()</code> \u89e6\u53d1\u3002 *   <code>CMS Initial Mark</code> / <code>CMS Final Remark</code>: CMS GC \u8fc7\u7a0b\u4e2d\u7684 STW \u9636\u6bb5\u3002 *   <code>Concurrent Mode Failure</code>: \u5728 CMS \u5e76\u53d1\u6267\u884c\u671f\u95f4\uff0c\u6709\u65b0\u5bf9\u8c61\u9700\u8981\u664b\u5347\u5230\u8001\u5e74\u4ee3\uff0c\u4f46\u8001\u5e74\u4ee3\u7a7a\u95f4\u4e0d\u8db3\uff0c\u5bfc\u81f4\u5e76\u53d1\u5931\u8d25\uff0c\u9000\u5316\u4e3a\u4e00\u6b21 STW \u65f6\u95f4\u5f88\u957f\u7684 Full GC\u3002 *   <code>Promotion Failed</code>: \u5728\u8fdb\u884c Minor GC \u65f6\uff0cSurvivor \u533a\u65e0\u6cd5\u5bb9\u7eb3\u5b58\u6d3b\u5bf9\u8c61\uff0c\u4e14\u8001\u5e74\u4ee3\u4e5f\u65e0\u6cd5\u5bb9\u7eb3\u8fd9\u4e9b\u5bf9\u8c61\uff08\u53ef\u80fd\u662f\u7a7a\u95f4\u4e0d\u8db3\u6216\u788e\u7247\u8fc7\u591a\uff09\u3002 *   <code>GCLocker Initiated GC</code>: JNI \u8c03\u7528\u671f\u95f4\uff0c\u4e3a\u4fdd\u8bc1\u6570\u636e\u4e00\u81f4\u6027\u800c\u963b\u6b62\u4e86 GC\u3002\u5f53 JNI \u8c03\u7528\u7ed3\u675f\u540e\uff0c\u89e6\u53d1\u4e00\u6b21 GC\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/GC%20%E8%B0%83%E4%BC%98/#cms-gc","title":"\u5e38\u89c1 CMS GC \u95ee\u9898\u573a\u666f\u5206\u6790\u4e0e\u89e3\u51b3","text":""},{"location":"%E7%AC%94%E8%AE%B0/java/GC%20%E8%B0%83%E4%BC%98/#_3","title":"\u573a\u666f\u4e00\uff1a\u52a8\u6001\u6269\u5bb9\u5f15\u8d77\u7684\u7a7a\u95f4\u9707\u8361","text":"<ul> <li>\u73b0\u8c61: \u670d\u52a1\u542f\u52a8\u521d\u671f GC \u9891\u7e41\uff0c\u5373\u4f7f\u5806\u5185\u5b58\u6700\u5927\u503c (<code>-Xmx</code>) \u5f88\u5927\uff0c\u4f46\u4ecd\u4f1a\u89e6\u53d1 GC\u3002GC \u65e5\u5fd7\u663e\u793a\u5806\u7a7a\u95f4\u5728 GC \u540e\u88ab\u8c03\u6574\u5927\u5c0f\u3002</li> <li>\u539f\u56e0: <code>-Xms</code> (\u521d\u59cb\u5806\u5927\u5c0f) \u548c <code>-Xmx</code> (\u6700\u5927\u5806\u5927\u5c0f) \u8bbe\u7f6e\u4e0d\u4e00\u81f4\u3002JVM \u5728\u7a7a\u95f4\u4e0d\u8db3\u65f6\u4f1a\u6269\u5bb9\u5806\uff0c\u8fd9\u4f1a\u89e6\u53d1 GC\uff1b\u7a7a\u95f4\u7a7a\u95f2\u8f83\u591a\u65f6\u4f1a\u7f29\u5bb9\u5806\uff0c\u540c\u6837\u53ef\u80fd\u89e6\u53d1 GC\u3002</li> <li>\u89e3\u51b3\u7b56\u7565: \u5c06 <code>-Xms</code> \u548c <code>-Xmx</code> \u7684\u503c\u8bbe\u7f6e\u4e3a\u76f8\u540c\uff0c\u540c\u6837\u5730\uff0c\u5c06 <code>-XX:NewSize</code> \u548c <code>-XX:MaxNewSize</code>\uff0c\u4ee5\u53ca <code>-XX:MetaSpaceSize</code> \u548c <code>-XX:MaxMetaSpaceSize</code> \u8bbe\u7f6e\u4e3a\u4e00\u81f4\uff0c\u4ee5\u83b7\u5f97\u4e00\u4e2a\u7a33\u5b9a\u7684\u5806\u548c\u5143\u7a7a\u95f4\uff0c\u907f\u514d\u8fd0\u884c\u65f6\u52a8\u6001\u4f38\u7f29\u5e26\u6765\u7684\u5f00-\u9500\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/GC%20%E8%B0%83%E4%BC%98/#gc-systemgc","title":"\u573a\u666f\u4e8c\uff1a\u663e\u5f0f GC \u7684\u53bb\u4e0e\u7559 (<code>System.gc()</code>)","text":"<ul> <li>\u73b0\u8c61: \u5728\u672a\u8fbe\u5230\u5176\u4ed6 GC \u89e6\u53d1\u6761\u4ef6\u65f6\uff0c\u53d1\u751f\u4e86 GC\uff0cGC Cause \u4e3a <code>System.gc()</code>\u3002</li> <li>\u539f\u56e0:<ul> <li><code>System.gc()</code> \u9ed8\u8ba4\u4f1a\u89e6\u53d1\u4e00\u6b21 STW \u65f6\u95f4\u975e\u5e38\u957f\u7684 Full GC (\u91c7\u7528 Mark-Sweep-Compact \u7b97\u6cd5)\u3002</li> <li>\u7981\u7528\u5b83 (<code>-XX:+DisableExplicitGC</code>) \u770b\u8d77\u6765\u5f88\u7f8e\u597d\uff0c\u4f46\u4f1a\u5e26\u6765\u65b0\u95ee\u9898\uff1aNIO \u4e2d\u4f7f\u7528\u7684\u5806\u5916\u5185\u5b58 (DirectByteBuffer) \u4f9d\u8d56 <code>System.gc()</code> \u6765\u901a\u77e5 JVM \u56de\u6536\u5176\u5173\u8054\u7684 PhantomReference\uff0c\u4ece\u800c\u91ca\u653e\u5806\u5916\u5185\u5b58\u3002\u5982\u679c\u7981\u7528\uff0c\u53ef\u80fd\u5bfc\u81f4\u5806\u5916\u5185\u5b58\u6cc4\u6f0f\u3002</li> </ul> </li> <li>\u89e3\u51b3\u7b56\u7565: \u4e0d\u7981\u7528 <code>System.gc()</code>\u3002\u800c\u662f\u4f7f\u7528 <code>-XX:+ExplicitGCInvokesConcurrent</code> \u53c2\u6570\uff0c\u5c06 <code>System.gc()</code> \u7684\u884c\u4e3a\u4ece\u4e00\u6b21 STW \u7684 Full GC \u8f6c\u53d8\u4e3a\u4e00\u6b21\u5e76\u53d1\u7684 CMS GC\uff0c\u5927\u5927\u51cf\u5c11\u505c\u987f\u65f6\u95f4\uff0c\u540c\u65f6\u4fdd\u8bc1\u4e86\u5806\u5916\u5185\u5b58\u7684\u6b63\u5e38\u56de\u6536\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/GC%20%E8%B0%83%E4%BC%98/#metaspace-oom","title":"\u573a\u666f\u4e09\uff1aMetaSpace \u533a OOM","text":"<ul> <li>\u73b0\u8c61: MetaSpace \u4f7f\u7528\u7387\u6301\u7eed\u589e\u957f\uff0c\u5373\u4f7f GC \u4e5f\u65e0\u6cd5\u6709\u6548\u56de\u6536\uff0c\u6700\u7ec8\u5bfc\u81f4 OOM\u3002</li> <li>\u539f\u56e0: \u5143\u7a7a\u95f4\u7684\u56de\u6536\u6761\u4ef6\u975e\u5e38\u82db\u523b\uff0c\u53ea\u6709\u5f53\u5176\u5173\u8054\u7684 ClassLoader \u88ab\u5378\u8f7d\u65f6\uff0c\u5bf9\u5e94\u7684\u7c7b\u5143\u6570\u636e\u624d\u4f1a\u88ab\u56de\u6536\u3002\u95ee\u9898\u901a\u5e38\u7531\u52a8\u6001\u7c7b\u52a0\u8f7d\u6280\u672f\uff08\u5982 CGLIB\u3001Groovy\u3001Orika\uff09\u5f15\u8d77\uff0c\u8fd9\u4e9b\u6280\u672f\u4f1a\u4e0d\u65ad\u521b\u5efa\u65b0\u7684\u7c7b\uff0c\u4f46\u5176 ClassLoader \u5374\u4e00\u76f4\u5b58\u6d3b\uff0c\u5bfc\u81f4\u5143\u6570\u636e\u65e0\u6cd5\u5378\u8f7d\u3002</li> <li>\u89e3\u51b3\u7b56\u7565:<ol> <li>\u4f7f\u7528 <code>jcmd &lt;pid&gt; GC.class_stats</code> \u547d\u4ee4\uff0c\u591a\u6b21\u6267\u884c\u5e76\u6bd4\u5bf9\u8f93\u51fa\uff0c\u5b9a\u4f4d\u662f\u54ea\u4e2a\u5305\u4e0b\u7684\u7c7b\u5728\u6301\u7eed\u589e\u957f\u3002</li> <li>dump \u5185\u5b58\u5feb\u7167\uff0c\u4f7f\u7528 MAT \u7b49\u5de5\u5177\u5206\u6790\uff0c\u67e5\u627e ClassLoader \u7684\u5b9e\u4f8b\u548c\u5b83\u4eec\u52a0\u8f7d\u7684\u7c7b\u6570\u91cf\u3002</li> <li>\u4ece\u4e1a\u52a1\u4ee3\u7801\u5c42\u9762\u89e3\u51b3\uff0c\u4f8b\u5982\u7f13\u5b58\u52a8\u6001\u751f\u6210\u7684\u7c7b\uff0c\u907f\u514d\u91cd\u590d\u521b\u5efa\u3002</li> </ol> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/GC%20%E8%B0%83%E4%BC%98/#premature-promotion","title":"\u573a\u666f\u56db\uff1a\u8fc7\u65e9\u664b\u5347 (Premature Promotion)","text":"<ul> <li>\u73b0\u8c61:<ul> <li>Young GC \u9891\u7e41\uff0c\u4f46 Old GC \u540e\u8001\u5e74\u4ee3\u4f7f\u7528\u7387\u5927\u5e45\u4e0b\u964d\uff08\u4f8b\u5982\u4ece 80% \u964d\u5230 10%\uff09\uff0c\u8bf4\u660e\u664b\u5347\u5230\u8001\u5e74\u4ee3\u7684\u5bf9\u8c61\u5927\u591a\u662f\u201c\u77ed\u547d\u201d\u7684\u3002</li> <li>\u5bf9\u8c61\u7684\u664b\u5347\u5e74\u9f84\u5f88\u5c0f\uff08\u4f8b\u5982 GC \u65e5\u5fd7\u4e2d <code>new threshold 1</code>\uff09\u3002</li> </ul> </li> <li>\u539f\u56e0:<ul> <li>\u5e74\u8f7b\u4ee3\u7a7a\u95f4\u8fc7\u5c0f: Eden \u533a\u5f88\u5feb\u88ab\u586b\u6ee1\uff0c\u5bfc\u81f4\u5927\u91cf\u672c\u5e94\u5728\u5e74\u8f7b\u4ee3\u5c31\u88ab\u56de\u6536\u7684\u5bf9\u8c61\uff0c\u4e0d\u5f97\u4e0d\u63d0\u524d\u664b\u5347\u5230\u8001\u5e74\u4ee3\u3002</li> <li>\u5206\u914d\u901f\u7387\u8fc7\u5927: \u77ac\u95f4\u7684\u5927\u6d41\u91cf\u6216\u6279\u5904\u7406\u4efb\u52a1\u5bfc\u81f4\u5185\u5b58\u5206\u914d\u901f\u7387\u6fc0\u589e\u3002</li> <li>\u52a8\u6001\u5e74\u9f84\u5224\u65ad: \u5f53 Survivor \u533a\u4e2d\u540c\u4e00\u5e74\u9f84\u7684\u5bf9\u8c61\u603b\u5927\u5c0f\u8d85\u8fc7 Survivor \u7a7a\u95f4\u7684\u4e00\u534a\uff08\u7531 <code>-XX:TargetSurvivorRatio</code> \u63a7\u5236\uff09\u65f6\uff0cJVM \u4f1a\u52a8\u6001\u964d\u4f4e\u664b\u5347\u5e74\u9f84\u95e8\u69db\uff0c\u5bfc\u81f4\u5927\u91cf\u5bf9\u8c61\u63d0\u524d\u664b\u5347\u3002</li> </ul> </li> <li>\u89e3\u51b3\u7b56\u7565:<ul> <li>\u5728\u603b\u5806\u5185\u5b58\u4e0d\u53d8\u7684\u524d\u63d0\u4e0b\uff0c\u9002\u5f53\u589e\u5927\u5e74\u8f7b\u4ee3\u7a7a\u95f4\u3002\u4e00\u4e2a\u7ecf\u9a8c\u6cd5\u5219\u662f\uff0c\u8001\u5e74\u4ee3\u5927\u5c0f\u5e94\u4e3a\u6d3b\u8dc3\u5bf9\u8c61\u5927\u5c0f\u7684 2-3 \u500d\uff0c\u5176\u4f59\u7a7a\u95f4\u53ef\u5206\u914d\u7ed9\u5e74\u8f7b\u4ee3\u3002\u4f7f\u7528 <code>-Xmn</code> \u53c2\u6570\u6216\u8c03\u6574 <code>-XX:NewRatio</code>\u3002</li> <li>\u5982\u679c\u5206\u914d\u901f\u7387\u8fc7\u5927\uff0c\u9700\u4ece\u4e1a\u52a1\u5c42\u9762\u8fdb\u884c\u4f18\u5316\uff0c\u4f8b\u5982\u5904\u7406\u6d41\u91cf\u5c16\u5cf0\u6216\u4f18\u5316\u6570\u636e\u52a0\u8f7d\u903b\u8f91\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/GC%20%E8%B0%83%E4%BC%98/#cms-old-gc","title":"\u573a\u666f\u4e94\uff1aCMS Old GC \u9891\u7e41","text":"<ul> <li>\u73b0\u8c61: CMS GC \u9891\u7e41\u53d1\u751f\uff0c\u867d\u7136\u5355\u6b21 STW \u65f6\u95f4\u4e0d\u957f\uff0c\u4f46\u603b\u4f53\u4e0a\u62c9\u4f4e\u4e86\u670d\u52a1\u541e\u5410\u91cf\u3002</li> <li>\u539f\u56e0:<ul> <li>\u8001\u5e74\u4ee3\u7684\u4f7f\u7528\u7387\u8fbe\u5230\u4e86\u89e6\u53d1 CMS GC \u7684\u9608\u503c (<code>-XX:CMSInitiatingOccupancyFraction</code>\uff0c\u9ed8\u8ba4\u4e3a 92%)\u3002</li> <li>\u8fd9\u901a\u5e38\u662f\u7531\u4e8e\u5b58\u5728\u201c\u4e2d\u7b49\u751f\u547d\u5468\u671f\u201d\u7684\u5185\u5b58\u6cc4\u6f0f\uff0c\u4f8b\u5982\u7f13\u5b58\u3001\u6570\u636e\u5e93\u8fde\u63a5\u7b49\u5bf9\u8c61\uff0c\u5b83\u4eec\u5b58\u6d3b\u65f6\u95f4\u6bd4\u4e00\u6b21 Young GC \u957f\uff0c\u4f46\u53c8\u4e0d\u662f\u6c38\u4e45\u5b58\u6d3b\uff0c\u4e0d\u65ad\u7d2f\u79ef\u5728\u8001\u5e74\u4ee3\u3002</li> </ul> </li> <li>\u89e3\u51b3\u7b56\u7565: \u8fd9\u662f\u5178\u578b\u7684\u5185\u5b58\u6cc4\u6f0f\u6392\u67e5\u573a\u666f\u3002<ol> <li>\u5728 CMS GC \u524d\u540e\u5206\u522b dump \u5185\u5b58\u5feb\u7167\u3002</li> <li>\u4f7f\u7528 MAT \u7b49\u5de5\u5177\u8fdb\u884c\u5bf9\u6bd4\u5206\u6790\uff08Diff\uff09\uff0c\u6216\u76f4\u63a5\u5206\u6790\u5355\u4e2a\u5feb\u7167\u7684\u652f\u914d\u6811\uff08Dominator Tree\uff09\u548c\u6cc4\u6f0f\u5acc\u7591\uff08Leak Suspects\uff09\u3002</li> <li>\u91cd\u70b9\u5173\u6ce8 Unreachable Objects\uff0c\u8fd9\u4e9b\u5bf9\u8c61\u5373\u5c06\u88ab\u56de\u6536\uff0c\u53ef\u4ee5\u53cd\u63a8\u51fa\u54ea\u4e9b\u662f\u201c\u77ed\u547d\u201d\u7684\u3002</li> </ol> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/GC%20%E8%B0%83%E4%BC%98/#cms-old-gc_1","title":"\u573a\u666f\u516d\uff1a\u5355\u6b21 CMS Old GC \u8017\u65f6\u957f","text":"<ul> <li>\u73b0\u8c61: CMS GC \u7684 STW \u9636\u6bb5\uff08\u7279\u522b\u662f Final Remark\uff09\u8017\u65f6\u8fc7\u957f\uff0c\u53ef\u80fd\u8fbe\u5230\u6570\u79d2\u3002</li> <li>\u539f\u56e0: Final Remark \u9636\u6bb5\u8017\u65f6\u957f\u7684\u4e3b\u8981\u539f\u56e0\u6709\u4e24\u4e2a\uff1a<ol> <li>\u5904\u7406\u5927\u91cf\u7684\u5f15\u7528 (Reference): \u7279\u522b\u662f <code>FinalReference</code>\u3002\u5f53\u4e00\u4e2a\u7c7b\u5b9e\u73b0\u4e86 <code>finalize()</code> \u65b9\u6cd5\uff0c\u5176\u5bf9\u8c61\u5728\u88ab\u56de\u6536\u524d\u9700\u8981\u88ab\u653e\u5165 <code>Finalizer</code> \u7684\u961f\u5217\u4e2d\uff0c\u7531\u4e00\u4e2a\u4f4e\u4f18\u5148\u7ea7\u7684\u7ebf\u7a0b\u53bb\u6267\u884c <code>finalize()</code> \u65b9\u6cd5\u3002\u5982\u679c\u8fd9\u4e2a\u961f\u5217\u5806\u79ef\u4e86\u5927\u91cf\u5bf9\u8c61\uff0c\u5904\u7406\u8fc7\u7a0b\u4f1a\u5f88\u6162\u3002</li> <li>\u7c7b\u5378\u8f7d\u548c\u7b26\u53f7\u8868/\u5b57\u7b26\u4e32\u8868\u6e05\u7406: <code>scrub symbol table</code> \u8017\u65f6\u8fc7\u957f\u3002\u5982\u679c\u542f\u7528\u4e86 <code>-XX:+CMSClassUnloadingEnabled</code>\uff08JDK 8 \u9ed8\u8ba4\u5f00\u542f\uff09\uff0cCMS \u4f1a\u5728 Remark \u9636\u6bb5\u5c1d\u8bd5\u5378\u8f7d\u4e0d\u518d\u4f7f\u7528\u7684\u7c7b\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u53ef\u80fd\u5f88\u8017\u65f6\u3002</li> </ol> </li> <li>\u89e3\u51b3\u7b56\u7565:<ul> <li>\u5f00\u542f <code>-XX:+PrintReferenceGC</code> \u67e5\u770b\u5404\u7c7b\u5f15\u7528\u7684\u5904\u7406\u8017\u65f6\u3002</li> <li>\u5bf9\u4e8e <code>FinalReference</code> \u95ee\u9898\uff0cdump \u5185\u5b58\u5e76\u5206\u6790 <code>java.lang.ref.Finalizer</code> \u5bf9\u8c61\u7684\u652f\u914d\u6811\uff0c\u627e\u5230\u662f\u54ea\u4e9b\u5bf9\u8c61\u5728\u6ee5\u7528 <code>finalize()</code> \u65b9\u6cd5\u5e76\u4f18\u5316\u4ee3\u7801\u3002\u53ef\u4ee5\u5f00\u542f <code>-XX:+ParallelRefProcEnabled</code> \u5e76\u884c\u5904\u7406\u5f15\u7528\u4ee5\u7f13\u89e3\u95ee\u9898\u3002</li> <li>\u5bf9\u4e8e\u7c7b\u5378\u8f7d\u95ee\u9898\uff0c\u5982\u679c\u786e\u8ba4\u5143\u7a7a\u95f4\u4f7f\u7528\u7a33\u5b9a\uff0c\u6ca1\u6709\u52a8\u6001\u7c7b\u52a0\u8f7d\uff0c\u53ef\u4ee5\u8003\u8651\u4f7f\u7528 <code>-XX:-CMSClassUnloadingEnabled</code> \u5173\u95ed\u7c7b\u5378\u8f7d\u6765\u907f\u514d\u8fd9\u90e8\u5206\u5f00\u9500\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/GC%20%E8%B0%83%E4%BC%98/#_4","title":"\u573a\u666f\u4e03\uff1a\u5185\u5b58\u788e\u7247\u4e0e\u6536\u96c6\u5668\u9000\u5316","text":"<ul> <li>\u73b0\u8c61: GC \u65e5\u5fd7\u4e2d\u51fa\u73b0 <code>Concurrent Mode Failure</code> \u6216 <code>promotion failed</code>\uff0c\u968f\u540e\u53d1\u751f\u4e86\u4e00\u6b21 STW \u65f6\u95f4\u6781\u957f\u7684 Full GC\u3002</li> <li>\u539f\u56e0:<ul> <li>CMS \u4f7f\u7528\u201c\u6807\u8bb0-\u6e05\u9664\u201d\u7b97\u6cd5\uff0c\u4f1a\u4ea7\u751f\u5185\u5b58\u788e\u7247\u3002\u5f53 Young GC \u540e\u9700\u8981\u664b\u5347\u4e00\u4e2a\u5927\u5bf9\u8c61\u5230\u8001\u5e74\u4ee3\u65f6\uff0c\u53ef\u80fd\u56e0\u4e3a\u627e\u4e0d\u5230\u4e00\u5757\u8db3\u591f\u5927\u7684\u8fde\u7eed\u5185\u5b58\u800c\u5bfc\u81f4 <code>promotion failed</code>\uff0c\u8fdb\u800c\u9000\u5316\u4e3a Full GC\u3002</li> <li><code>Concurrent Mode Failure</code> \u662f\u56e0\u4e3a CMS \u5728\u5e76\u53d1\u56de\u6536\u8fc7\u7a0b\u4e2d\uff0c\u4e1a\u52a1\u7ebf\u7a0b\u4ecd\u5728\u8fd0\u884c\u5e76\u4ea7\u751f\u65b0\u7684\u5bf9\u8c61\uff08\u6d6e\u52a8\u5783\u573e\uff09\u3002\u5982\u679c\u9884\u7559\u7684\u8001\u5e74\u4ee3\u7a7a\u95f4\u4e0d\u8db3\u4ee5\u5bb9\u7eb3\u8fd9\u4e9b\u65b0\u5bf9\u8c61\uff0c\u5c31\u4f1a\u5bfc\u81f4\u5e76\u53d1\u5931\u8d25\uff0c\u9000\u5316\u4e3a Full GC\u3002</li> </ul> </li> <li>\u89e3\u51b3\u7b56\u7565:<ul> <li>\u9488\u5bf9\u5185\u5b58\u788e\u7247: \u4f7f\u7528 <code>-XX:UseCMSCompactAtFullCollection</code> (\u9ed8\u8ba4\u5f00\u542f) \u8ba9 Full GC \u65f6\u8fdb\u884c\u788e\u7247\u6574\u7406\u3002\u4f7f\u7528 <code>-XX:CMSFullGCsBeforeCompaction=N</code> \u63a7\u5236\u6bcf N \u6b21\u4e0d\u5e26\u538b\u7f29\u7684 Full GC \u540e\uff0c\u6267\u884c\u4e00\u6b21\u5e26\u538b\u7f29\u7684\u3002</li> <li>\u9488\u5bf9\u5e76\u53d1\u5931\u8d25: \u9002\u5f53\u8c03\u4f4e CMS \u7684\u89e6\u53d1\u9608\u503c <code>-XX:CMSInitiatingOccupancyFraction</code>\uff08\u4f8b\u5982 75% \u6216 80%\uff09\uff0c\u8ba9 GC \u66f4\u65e9\u5730\u542f\u52a8\uff0c\u4ee5\u9884\u7559\u66f4\u591a\u7a7a\u95f4\u3002\u9700\u8981\u914d\u5408 <code>-XX:+UseCMSInitiatingOccupancyOnly</code> \u4f7f\u7528\u3002</li> <li>\u4f7f\u7528 <code>-XX:+CMSScavengeBeforeRemark</code> \u5728 Final Remark \u4e4b\u524d\u5f3a\u5236\u8fdb\u884c\u4e00\u6b21 Young GC\uff0c\u4ee5\u51cf\u5c11 Remark \u9636\u6bb5\u9700\u8981\u626b\u63cf\u7684\u65b0\u589e\u5bf9\u8c61\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/GC%20%E8%B0%83%E4%BC%98/#oom","title":"\u573a\u666f\u516b\uff1a\u5806\u5916\u5185\u5b58 OOM","text":"<ul> <li>\u73b0\u8c61: Java \u8fdb\u7a0b\u7684\u5b9e\u9645\u7269\u7406\u5185\u5b58\u5360\u7528\uff08RES\uff09\u8fdc\u8d85 <code>-Xmx</code> \u8bbe\u7f6e\uff0cGC \u65f6\u95f4\u98d9\u5347\uff0c\u670d\u52a1\u5361\u987f\u3002</li> <li>\u539f\u56e0: \u672a\u80fd\u6b63\u786e\u91ca\u653e\u7531 <code>Unsafe.allocateMemory</code> \u6216 <code>DirectByteBuffer</code> \u5206\u914d\u7684\u5806\u5916\u5185\u5b58\uff0c\u6216\u8005 JNI \u8c03\u7528\u4e2d C \u4ee3\u7801\u5206\u914d\u7684\u5185\u5b58\u672a\u91ca\u653e\u3002</li> <li>\u89e3\u51b3\u7b56\u7565:<ol> <li>\u4f7f\u7528 <code>-XX:NativeMemoryTracking=detail</code> \u542f\u52a8 JVM\uff0c\u7136\u540e\u7528 <code>jcmd &lt;pid&gt; VM.native_memory detail</code> \u67e5\u770b\u672c\u5730\u5185\u5b58\u5206\u5e03\u3002</li> <li>\u5982\u679c Committed \u503c\u548c RES \u63a5\u8fd1\uff0c\u8bf4\u660e\u662f <code>DirectByteBuffer</code> \u7b49 Java \u4ee3\u7801\u7533\u8bf7\u7684\u5185\u5b58\u6cc4\u6f0f\u3002\u68c0\u67e5\u662f\u5426\u7981\u7528\u4e86 <code>System.gc</code>\uff0c\u6216\u76f8\u5173\u8d44\u6e90\u662f\u5426\u88ab\u6b63\u786e\u5173\u95ed\u3002</li> <li>\u5982\u679c\u76f8\u5dee\u5de8\u5927\uff0c\u8bf4\u660e\u662f JNI \u8c03\u7528\u7684 Native Code \u6cc4\u6f0f\u3002\u53ef\u4f7f\u7528 <code>gperftools</code> \u7b49\u5916\u90e8\u5de5\u5177\u6765\u8ffd\u8e2a <code>malloc</code> \u8c03\u7528\u6808\u3002</li> </ol> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/GC%20%E8%B0%83%E4%BC%98/#jni-gc","title":"\u573a\u666f\u4e5d\uff1aJNI \u5f15\u53d1\u7684 GC \u95ee\u9898","text":"<ul> <li>\u73b0\u8c61: GC \u65e5\u5fd7\u4e2d GC Cause \u4e3a <code>GCLocker Initiated GC</code>\u3002</li> <li>\u539f\u56e0: JNI \u63d0\u4f9b\u4e86 <code>GetPrimitiveArrayCritical</code> \u8fd9\u6837\u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u8ba9 Native Code \u76f4\u63a5\u8bbf\u95ee JVM \u5806\u5185\u6570\u7ec4\u7684\u6307\u9488\uff0c\u6027\u80fd\u5f88\u9ad8\u3002\u5728\u6b64\u671f\u95f4\uff0cJVM \u4f1a\u52a0\u4e00\u4e2a\u9501\uff08JNI Critical Region\uff09\uff0c\u7981\u6b62 GC \u53d1\u751f\u4ee5\u4fdd\u8bc1\u6570\u636e\u5b89\u5168\u3002\u5f53\u6240\u6709\u6301\u6709\u8be5\u9501\u7684\u7ebf\u7a0b\u90fd\u91ca\u653e\u540e\uff0c\u4f1a\u89e6\u53d1\u4e00\u6b21 GC\u3002</li> <li>\u89e3\u51b3\u7b56\u7565:<ul> <li>JNI \u8c03\u7528\u5e94\u975e\u5e38\u8c28\u614e\uff0c\u5176\u6027\u80fd\u63d0\u5347\u53ef\u80fd\u88ab GC \u95ee\u9898\u6240\u62b5\u6d88\u3002</li> <li>\u6dfb\u52a0 <code>-XX:+PrintJNIGCStalls</code> \u53c2\u6570\uff0c\u53ef\u4ee5\u6253\u5370\u51fa\u53d1\u751f JNI \u8c03\u7528\u65f6\u963b\u585e GC \u7684\u7ebf\u7a0b\u4fe1\u606f\uff0c\u5e2e\u52a9\u5b9a\u4f4d\u95ee\u9898\u4ee3\u7801\u3002</li> <li>\u5347\u7ea7 JDK \u7248\u672c\u53ef\u4ee5\u89c4\u907f\u4e00\u4e9b\u5df2\u77e5\u7684 GCLocker \u76f8\u5173\u7684 Bug\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/GC%20%E8%B0%83%E4%BC%98/#_5","title":"\u603b\u7ed3\u4e0e\u8c03\u4f18\u5efa\u8bae","text":""},{"location":"%E7%AC%94%E8%AE%B0/java/GC%20%E8%B0%83%E4%BC%98/#sop","title":"\u5904\u7406\u6d41\u7a0b (SOP)","text":"<ol> <li>\u5236\u5b9a\u6807\u51c6: \u7ed3\u5408\u670d\u52a1 SLA\uff0c\u4e3a\u5ef6\u8fdf\u548c\u541e\u5410\u91cf\u8bbe\u5b9a\u660e\u786e\u7684\u3001\u53ef\u91cf\u5316\u7684 GC \u76d1\u63a7\u6307\u6807\u3002</li> <li>\u4fdd\u7559\u73b0\u573a: \u51fa\u73b0\u95ee\u9898\u65f6\uff0c\u4f18\u5148\u901a\u8fc7\u6458\u6d41\u6765\u6062\u590d\u670d\u52a1\uff0c\u800c\u4e0d\u662f\u7acb\u5373\u91cd\u542f\uff0c\u4ee5\u4fbf\u4fdd\u7559\u5806\u8f6c\u50a8\uff08Heap Dump\uff09\u3001\u7ebf\u7a0b\u8f6c\u50a8\uff08Thread Dump\uff09\u3001GC \u65e5\u5fd7\u7b49\u5173\u952e\u4fe1\u606f\u3002</li> <li>\u56e0\u679c\u5206\u6790: \u4f7f\u7528\u65f6\u5e8f\u3001\u6982\u7387\u7b49\u65b9\u6cd5\uff0c\u5224\u65ad GC \u662f\u201c\u56e0\u201d\u8fd8\u662f\u201c\u679c\u201d\u3002</li> <li>\u6839\u56e0\u5206\u6790: \u786e\u8ba4\u4e3a GC \u95ee\u9898\u540e\uff0c\u501f\u52a9\u5de5\u5177\u548c\u4e0a\u8ff0\u573a\u666f\u8fdb\u884c\u5339\u914d\uff0c\u5b9a\u4f4d\u5230\u5177\u4f53\u539f\u56e0\u3002</li> <li>\u5b9e\u65bd\u4f18\u5316: \u6839\u636e\u6839\u56e0\u9009\u62e9\u5408\u9002\u7684\u7b56\u7565\u8fdb\u884c\u8c03\u4f18\u3002</li> <li>\u590d\u76d8\u603b\u7ed3: \u95ee\u9898\u89e3\u51b3\u540e\u8fdb\u884c\u590d\u76d8\uff0c\u5c06\u7ecf\u9a8c\u56fa\u5316\u4e3a\u56e2\u961f\u77e5\u8bc6\u3002</li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/java/GC%20%E8%B0%83%E4%BC%98/#_6","title":"\u6838\u5fc3\u8c03\u4f18\u5efa\u8bae","text":"<ul> <li>\u4e0d\u8981\u8fc7\u65e9\u4f18\u5316: \u5927\u90e8\u5206\u6027\u80fd\u95ee\u9898\u6e90\u4e8e\u4e1a\u52a1\u4ee3\u7801\uff0c\u800c\u975e JVM \u53c2\u6570\u3002GC \u8c03\u4f18\u5e94\u5728\u5e94\u7528\u5c42\u9762\u4f18\u5316\u65e0\u6548\u540e\uff0c\u4f5c\u4e3a\u6700\u7ec8\u624b\u6bb5\u3002</li> <li>\u63a7\u5236\u53d8\u91cf\u6cd5: \u6bcf\u6b21\u8c03\u4f18\u53ea\u4fee\u6539\u4e00\u4e2a\u53c2\u6570\uff0c\u4ee5\u4fbf\u6e05\u6670\u5730\u89c2\u5bdf\u5176\u6548\u679c\u3002</li> <li>\u5584\u7528\u5de5\u5177\u548c\u641c\u7d22: \u7edd\u5927\u591a\u6570\u95ee\u9898\u90fd\u6709\u524d\u4eba\u9047\u5230\u8fc7\u3002\u719f\u7ec3\u4f7f\u7528 MAT, JProfiler, Arthas \u7b49\u5de5\u5177\uff0c\u5e76\u5584\u7528\u641c\u7d22\u5f15\u64ce\u3002</li> <li>\u91cd\u8981\u7684 GC \u53c2\u6570\u5efa\u8bae:<ul> <li><code>-XX:+HeapDumpOnOutOfMemoryError</code>: \u5728 OOM \u65f6\u81ea\u52a8 dump \u5806\u5185\u5b58\u3002</li> <li><code>-XX:HeapDumpPath=&lt;path&gt;</code>: \u6307\u5b9a dump \u6587\u4ef6\u7684\u8def\u5f84\u3002</li> <li><code>-XX:+PrintGCDetails -XX:+PrintGCDateStamps</code>: \u6253\u5370\u8be6\u7ec6\u7684 GC \u65e5\u5fd7\u5e76\u5e26\u4e0a\u65f6\u95f4\u6233\u3002</li> <li><code>-Xloggc:&lt;file&gt;</code>: \u5c06 GC \u65e5\u5fd7\u8f93\u51fa\u5230\u6587\u4ef6\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/JVM%20%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/","title":"JVM \u5185\u5b58\u7ed3\u6784","text":""},{"location":"%E7%AC%94%E8%AE%B0/java/JVM%20%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/#_1","title":"\u7ebf\u7a0b\u79c1\u6709\u533a\u57df","text":"<p>\u8fd9\u4e9b\u533a\u57df\u7684\u751f\u547d\u5468\u671f\u4e0e\u7ebf\u7a0b\u76f8\u540c\uff0c\u968f\u7ebf\u7a0b\u7684\u521b\u5efa\u800c\u521b\u5efa\uff0c\u968f\u7ebf\u7a0b\u7684\u9500\u6bc1\u800c\u9500\u6bc1\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/JVM%20%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/#program-counter-register","title":"\u7a0b\u5e8f\u8ba1\u6570\u5668 (Program Counter Register)","text":"<p>\u7a0b\u5e8f\u8ba1\u6570\u5668\u662f\u4e00\u5757\u8f83\u5c0f\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u53ef\u4ee5\u770b\u4f5c\u662f\u5f53\u524d\u7ebf\u7a0b\u6240\u6267\u884c\u7684\u5b57\u8282\u7801\u7684\u884c\u53f7\u6307\u793a\u5668\u3002</p> <ul> <li>\u4f5c\u7528\uff1a\u8bb0\u5f55\u5f53\u524d\u7ebf\u7a0b\u6b63\u5728\u6267\u884c\u7684\u5b57\u8282\u7801\u6307\u4ee4\u7684\u5730\u5740\u3002\u6267\u884c\u5f15\u64ce\u901a\u8fc7\u8bfb\u53d6\u5b83\u7684\u503c\u6765\u786e\u5b9a\u4e0b\u4e00\u6761\u8981\u6267\u884c\u7684\u6307\u4ee4\u3002</li> <li>\u7279\u6027\uff1a<ul> <li>\u7ebf\u7a0b\u79c1\u6709\uff0c\u786e\u4fdd\u7ebf\u7a0b\u5207\u6362\u540e\u80fd\u6062\u590d\u5230\u6b63\u786e\u7684\u6267\u884c\u4f4d\u7f6e\u3002</li> <li>\u662f\u552f\u4e00\u4e00\u4e2a\u5728Java\u865a\u62df\u673a\u89c4\u8303\u4e2d\u6ca1\u6709\u89c4\u5b9a\u4efb\u4f55<code>OutOfMemoryError</code>\u60c5\u51b5\u7684\u533a\u57df\u3002</li> <li>\u5982\u679c\u7ebf\u7a0b\u6b63\u5728\u6267\u884c\u7684\u662f\u4e00\u4e2aJava\u65b9\u6cd5\uff0c\u8ba1\u6570\u5668\u8bb0\u5f55\u7684\u662f\u6b63\u5728\u6267\u884c\u7684\u865a\u62df\u673a\u5b57\u8282\u7801\u6307\u4ee4\u7684\u5730\u5740\uff1b\u5982\u679c\u6b63\u5728\u6267\u884c\u7684\u662f\u672c\u5730\uff08Native\uff09\u65b9\u6cd5\uff0c\u8fd9\u4e2a\u8ba1\u6570\u5668\u503c\u5219\u4e3a\u7a7a\uff08Undefined\uff09\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/JVM%20%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/#java-java-virtual-machine-stack","title":"Java\u865a\u62df\u673a\u6808 (Java Virtual Machine Stack)","text":"<p>\u6bcf\u4e2a\u65b9\u6cd5\u5728\u6267\u884c\u7684\u540c\u65f6\u90fd\u4f1a\u521b\u5efa\u4e00\u4e2a\u6808\u5e27\uff08Stack Frame\uff09\uff0c\u7528\u4e8e\u5b58\u50a8\u5c40\u90e8\u53d8\u91cf\u8868\u3001\u64cd\u4f5c\u6570\u6808\u3001\u52a8\u6001\u94fe\u63a5\u3001\u65b9\u6cd5\u51fa\u53e3\u7b49\u4fe1\u606f\u3002\u6bcf\u4e2a\u65b9\u6cd5\u4ece\u8c03\u7528\u76f4\u81f3\u6267\u884c\u5b8c\u6210\u7684\u8fc7\u7a0b\uff0c\u5c31\u5bf9\u5e94\u7740\u4e00\u4e2a\u6808\u5e27\u5728\u865a\u62df\u673a\u6808\u4e2d\u5165\u6808\u5230\u51fa\u6808\u7684\u8fc7\u7a0b\u3002</p> <ul> <li>\u7279\u70b9\uff1a<ul> <li>\u7ebf\u7a0b\u79c1\u6709\uff0c\u751f\u547d\u5468\u671f\u4e0e\u7ebf\u7a0b\u4e00\u81f4\u3002</li> <li>\u662fJava\u65b9\u6cd5\u6267\u884c\u7684\u5185\u5b58\u6a21\u578b\u3002</li> <li>\u53ef\u80fd\u51fa\u73b0\u4e24\u79cd\u5f02\u5e38\uff1a<ul> <li><code>StackOverflowError</code>\uff1a\u5982\u679c\u7ebf\u7a0b\u8bf7\u6c42\u7684\u6808\u6df1\u5ea6\u5927\u4e8e\u865a\u62df\u673a\u6240\u5141\u8bb8\u7684\u6df1\u5ea6\u3002</li> <li><code>OutOfMemoryError</code>\uff1a\u5982\u679c\u865a\u62df\u673a\u6808\u53ef\u4ee5\u52a8\u6001\u6269\u5c55\uff0c\u4f46\u5728\u6269\u5c55\u65f6\u65e0\u6cd5\u7533\u8bf7\u5230\u8db3\u591f\u7684\u5185\u5b58\u3002</li> </ul> </li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/JVM%20%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/#_2","title":"\u6808\u5e27\u7684\u5185\u90e8\u7ed3\u6784","text":"<ol> <li> <p>\u5c40\u90e8\u53d8\u91cf\u8868 (Local Variable Table)</p> <ul> <li>\u5b58\u653e\u65b9\u6cd5\u53c2\u6570\u548c\u65b9\u6cd5\u5185\u90e8\u5b9a\u4e49\u7684\u5c40\u90e8\u53d8\u91cf\u3002</li> <li>\u57fa\u672c\u5b58\u50a8\u5355\u4f4d\u662f\u69fd\uff08Slot\uff09\u3002<code>long</code>\u548c<code>double</code>\u7c7b\u578b\u7684\u53d8\u91cf\u4f1a\u5360\u75282\u4e2a\u69fd\uff0c\u5176\u4ed6\u57fa\u672c\u6570\u636e\u7c7b\u578b\u548c\u5f15\u7528\u7c7b\u578b\u5360\u75281\u4e2a\u69fd\u3002</li> <li>\u5bf9\u4e8e\u5b9e\u4f8b\u65b9\u6cd5\uff0c\u7b2c0\u4e2a\u69fd\uff08<code>slot[0]</code>\uff09\u9ed8\u8ba4\u7528\u4e8e\u5b58\u653e<code>this</code>\u5f15\u7528\u3002</li> </ul> </li> <li> <p>\u64cd\u4f5c\u6570\u6808 (Operand Stack)</p> <ul> <li>\u4e00\u4e2a\u540e\u8fdb\u5148\u51fa\uff08LIFO\uff09\u7684\u6808\uff0c\u7528\u4e8e\u4fdd\u5b58\u8ba1\u7b97\u8fc7\u7a0b\u7684\u4e2d\u95f4\u7ed3\u679c\uff0c\u5e76\u4f5c\u4e3a\u8ba1\u7b97\u8fc7\u7a0b\u4e2d\u53d8\u91cf\u4e34\u65f6\u7684\u5b58\u50a8\u7a7a\u95f4\u3002</li> <li>Java\u865a\u62df\u673a\u7684\u89e3\u91ca\u6267\u884c\u5f15\u64ce\u662f\u57fa\u4e8e\u6808\u7684\u6267\u884c\u5f15\u64ce\uff0c\u6b64\u5904\u7684\u201c\u6808\u201d\u5c31\u662f\u6307\u64cd\u4f5c\u6570\u6808\u3002</li> </ul> </li> <li> <p>\u52a8\u6001\u94fe\u63a5 (Dynamic Linking)</p> <ul> <li>\u6bcf\u4e2a\u6808\u5e27\u90fd\u5305\u542b\u4e00\u4e2a\u6307\u5411\u8fd0\u884c\u65f6\u5e38\u91cf\u6c60\u4e2d\u8be5\u6808\u5e27\u6240\u5c5e\u65b9\u6cd5\u7684\u5f15\u7528\u3002</li> <li>\u4f5c\u7528\u662f\u5c06\u7b26\u53f7\u5f15\u7528\uff08\u4ee3\u7801\u4e2d\u7684\u65b9\u6cd5\u540d\u3001\u53d8\u91cf\u540d\uff09\u8f6c\u6362\u4e3a\u76f4\u63a5\u5f15\u7528\uff08\u5185\u5b58\u5730\u5740\uff09\u3002</li> </ul> </li> <li> <p>\u65b9\u6cd5\u8fd4\u56de\u5730\u5740 (Return Address)</p> <ul> <li>\u5f53\u4e00\u4e2a\u65b9\u6cd5\u6267\u884c\u5b8c\u6bd5\u540e\uff0c\u9700\u8981\u8fd4\u56de\u5230\u8c03\u7528\u5b83\u7684\u5730\u65b9\u3002\u65b9\u6cd5\u8fd4\u56de\u5730\u5740\u5c31\u5b58\u653e\u4e86\u8c03\u7528\u8be5\u65b9\u6cd5\u7684\u6307\u4ee4\u7684\u4e0b\u4e00\u6761\u6307\u4ee4\u7684\u5730\u5740\u3002</li> </ul> </li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/java/JVM%20%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/#native-method-stack","title":"\u672c\u5730\u65b9\u6cd5\u6808 (Native Method Stack)","text":"<p>\u672c\u5730\u65b9\u6cd5\u6808\u4e0e\u865a\u62df\u673a\u6808\u6240\u53d1\u6325\u7684\u4f5c\u7528\u975e\u5e38\u76f8\u4f3c\uff0c\u5176\u533a\u522b\u662f\u865a\u62df\u673a\u6808\u4e3a\u865a\u62df\u673a\u6267\u884cJava\u65b9\u6cd5\uff08\u4e5f\u5c31\u662f\u5b57\u8282\u7801\uff09\u670d\u52a1\uff0c\u800c\u672c\u5730\u65b9\u6cd5\u6808\u5219\u662f\u4e3a\u865a\u62df\u673a\u4f7f\u7528\u5230\u7684\u672c\u5730\uff08Native\uff09\u65b9\u6cd5\u670d\u52a1\u3002\u5728HotSpot\u865a\u62df\u673a\u4e2d\uff0c\u76f4\u63a5\u5c06\u672c\u5730\u65b9\u6cd5\u6808\u548c\u865a\u62df\u673a\u6808\u5408\u4e8c\u4e3a\u4e00\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/JVM%20%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/#_3","title":"\u7ebf\u7a0b\u5171\u4eab\u533a\u57df","text":"<p>\u6240\u6709\u7ebf\u7a0b\u5171\u4eab\u8fd9\u4e9b\u6570\u636e\u533a\u57df\uff0c\u5728\u865a\u62df\u673a\u542f\u52a8\u65f6\u521b\u5efa\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/JVM%20%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/#heap","title":"\u5806 (Heap)","text":"<p>\u5806\u662fJava\u865a\u62df\u673a\u6240\u7ba1\u7406\u7684\u5185\u5b58\u4e2d\u6700\u5927\u7684\u4e00\u5757\uff0c\u662f\u6240\u6709\u7ebf\u7a0b\u5171\u4eab\u7684\u533a\u57df\uff0c\u5728\u865a\u62df\u673a\u542f\u52a8\u65f6\u521b\u5efa\u3002\u6b64\u5185\u5b58\u533a\u57df\u7684\u552f\u4e00\u76ee\u7684\u5c31\u662f\u5b58\u653e\u5bf9\u8c61\u5b9e\u4f8b\uff0c\u51e0\u4e4e\u6240\u6709\u7684\u5bf9\u8c61\u5b9e\u4f8b\u4ee5\u53ca\u6570\u7ec4\u90fd\u8981\u5728\u5806\u4e0a\u5206\u914d\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/JVM%20%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/#_4","title":"\u5185\u5b58\u5212\u5206\uff08\u5206\u4ee3\u6a21\u578b\uff09","text":"<p>\u4e3a\u4e86\u9ad8\u6548\u5730\u8fdb\u884c\u5783\u573e\u56de\u6536\uff0cHotSpot\u865a\u62df\u673a\u5c06\u5806\u5728\u903b\u8f91\u4e0a\u5212\u5206\u4e3a\uff1a</p> <ul> <li>\u65b0\u751f\u4ee3 (Young Generation)<ul> <li>\u65b0\u521b\u5efa\u7684\u5bf9\u8c61\u9996\u5148\u88ab\u5206\u914d\u5230\u8fd9\u91cc\u3002</li> <li>\u5206\u4e3a\u4e00\u4e2a\u4f0a\u7538\u56ed\u533a\uff08Eden Space\uff09\u548c\u4e24\u4e2a\u5e78\u5b58\u8005\u533a\uff08Survivor Space S0/S1\uff09\u3002\u7edd\u5927\u591a\u6570\u5bf9\u8c61\u5728Eden\u533a\u751f\u6210\uff0c\u7ecf\u8fc7Minor GC\u540e\u5b58\u6d3b\u7684\u5bf9\u8c61\u4f1a\u5728\u4e24\u4e2a\u5e78\u5b58\u8005\u533a\u4e4b\u95f4\u79fb\u52a8\u3002</li> </ul> </li> <li>\u8001\u5e74\u4ee3 (Old Generation)<ul> <li>\u5b58\u653e\u751f\u547d\u5468\u671f\u8f83\u957f\u7684\u5bf9\u8c61\uff0c\u901a\u5e38\u662f\u7ecf\u8fc7\u591a\u6b21\u65b0\u751f\u4ee3GC\u540e\u4ecd\u7136\u5b58\u6d3b\u7684\u5bf9\u8c61\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/JVM%20%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/#tlab","title":"\u5bf9\u8c61\u5206\u914d\u4e0eTLAB","text":"<ul> <li>\u5bf9\u8c61\u7684\u521b\u5efa\u975e\u5e38\u9891\u7e41\uff0c\u5728\u5e76\u53d1\u73af\u5883\u4e0b\u76f4\u63a5\u5728\u5806\u4e0a\u5206\u914d\u5185\u5b58\u9700\u8981\u52a0\u9501\uff0c\u5f71\u54cd\u6548\u7387\u3002</li> <li>TLAB (Thread Local Allocation Buffer\uff0c\u7ebf\u7a0b\u672c\u5730\u5206\u914d\u7f13\u51b2\u533a) \u662f\u4e00\u4e2a\u4f18\u5316\u63aa\u65bd\u3002\u865a\u62df\u673a\u4e3a\u6bcf\u4e2a\u7ebf\u7a0b\u5728\u65b0\u751f\u4ee3\u7684Eden\u533a\u9884\u5148\u5206\u914d\u4e00\u5c0f\u5757\u5185\u5b58\uff0c\u4f5c\u4e3a\u8be5\u7ebf\u7a0b\u7684\u79c1\u6709\u5206\u914d\u7f13\u51b2\u533a\u3002</li> <li>\u5f53\u9700\u8981\u5206\u914d\u5bf9\u8c61\u65f6\uff0c\u7ebf\u7a0b\u9996\u5148\u5728\u81ea\u5df1\u7684TLAB\u4e2d\u5206\u914d\uff0c\u8fd9\u6837\u53ef\u4ee5\u907f\u514d\u591a\u7ebf\u7a0b\u95f4\u7684\u9501\u7ade\u4e89\uff0c\u63d0\u5347\u5206\u914d\u6548\u7387\u3002TLAB\u7528\u5b8c\u540e\uff0c\u518d\u901a\u8fc7\u52a0\u9501\u7684\u65b9\u5f0f\u53bbEden\u533a\u7533\u8bf7\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/JVM%20%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/#_5","title":"\u9003\u9038\u5206\u6790\u4e0e\u6808\u4e0a\u5206\u914d","text":"<p>\u7406\u8bba\u4e0a\u6240\u6709\u5bf9\u8c61\u90fd\u5e94\u5728\u5806\u4e0a\u5206\u914d\uff0c\u4f46\u901a\u8fc7\u5373\u65f6\u7f16\u8bd1\u5668\uff08JIT\uff09\u7684\u9003\u9038\u5206\u6790\u6280\u672f\uff0c\u60c5\u51b5\u6709\u6240\u6539\u53d8\u3002</p> <ul> <li>\u9003\u9038\u5206\u6790\uff1a\u5206\u6790\u4e00\u4e2a\u5bf9\u8c61\u7684\u52a8\u6001\u4f5c\u7528\u57df\uff0c\u5224\u65ad\u5176\u662f\u5426\u53ef\u80fd\u201c\u9003\u9038\u201d\u51fa\u521b\u5efa\u5b83\u7684\u65b9\u6cd5\u3002</li> <li>\u5982\u679c\u4e00\u4e2a\u5bf9\u8c61\u6ca1\u6709\u53d1\u751f\u9003\u9038\uff0c\u7f16\u8bd1\u5668\u53ef\u4ee5\u8fdb\u884c\u4f18\u5316\uff1a<ul> <li>\u6808\u4e0a\u5206\u914d\uff1a\u76f4\u63a5\u5728\u6808\u4e0a\u4e3a\u5bf9\u8c61\u5206\u914d\u5185\u5b58\uff0c\u65b9\u6cd5\u6267\u884c\u7ed3\u675f\u540e\uff0c\u5bf9\u8c61\u968f\u6808\u5e27\u4e00\u8d77\u9500\u6bc1\uff0c\u65e0\u9700GC\u4ecb\u5165\uff0c\u6781\u5927\u63d0\u5347\u6027\u80fd\u3002</li> <li>\u6807\u91cf\u66ff\u6362\uff1a\u5c06\u4e00\u4e2a\u805a\u5408\u91cf\uff08\u5bf9\u8c61\uff09\u62c6\u6563\u6210\u591a\u4e2a\u6807\u91cf\uff08\u57fa\u672c\u6570\u636e\u7c7b\u578b\uff09\u6765\u5b58\u50a8\uff0c\u4e0d\u521b\u5efa\u8fd9\u4e2a\u5bf9\u8c61\uff0c\u800c\u662f\u5c06\u5b83\u7684\u6210\u5458\u53d8\u91cf\u76f4\u63a5\u5728\u6808\u4e0a\u5206\u914d\u3002</li> <li>\u540c\u6b65\u6d88\u9664\uff08\u9501\u6d88\u9664\uff09\uff1a\u5982\u679c\u4e00\u4e2a\u5bf9\u8c61\u4e0d\u4f1a\u88ab\u5176\u4ed6\u7ebf\u7a0b\u8bbf\u95ee\uff0c\u90a3\u4e48\u5bf9\u8fd9\u4e2a\u5bf9\u8c61\u7684\u6240\u6709\u540c\u6b65\u64cd\u4f5c\u90fd\u53ef\u4ee5\u5b89\u5168\u5730\u6d88\u9664\u6389\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/JVM%20%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/#method-area","title":"\u65b9\u6cd5\u533a (Method Area)","text":"<p>\u65b9\u6cd5\u533a\u7528\u4e8e\u5b58\u50a8\u5df2\u88ab\u865a\u62df\u673a\u52a0\u8f7d\u7684\u7c7b\u578b\u4fe1\u606f\u3001\u5e38\u91cf\u3001\u9759\u6001\u53d8\u91cf\u3001\u5373\u65f6\u7f16\u8bd1\u5668\uff08JIT\uff09\u7f16\u8bd1\u540e\u7684\u4ee3\u7801\u7f13\u5b58\u7b49\u6570\u636e\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/JVM%20%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/#_6","title":"\u65b9\u6cd5\u533a\u7684\u5b9e\u73b0\u6f14\u8fdb","text":"<p>\u65b9\u6cd5\u533a\u662f\u4e00\u4e2a\u903b\u8f91\u6982\u5ff5\uff0c\u4e0d\u540c\u7684\u865a\u62df\u673a\u6709\u4e0d\u540c\u7684\u5b9e\u73b0\u3002\u5728HotSpot\u865a\u62df\u673a\u4e2d\uff0c\u5b83\u7684\u5b9e\u73b0\u7ecf\u5386\u4e86\u6f14\u53d8\uff1a</p> JDK \u7248\u672c \u5b9e\u73b0\u65b9\u5f0f \u5b58\u50a8\u5185\u5bb9 JDK 1.6 \u53ca\u4e4b\u524d \u6c38\u4e45\u4ee3 (PermGen) \u7c7b\u578b\u4fe1\u606f\u3001\u5e38\u91cf\u3001\u9759\u6001\u53d8\u91cf\u3001\u5b57\u7b26\u4e32\u5e38\u91cf\u6c60\u90fd\u5b58\u653e\u5728\u6c38\u4e45\u4ee3\u3002\u6c38\u4e45\u4ee3\u5728JVM\u5806\u4e2d\u3002 JDK 1.7 \u6c38\u4e45\u4ee3 (PermGen) \u5b57\u7b26\u4e32\u5e38\u91cf\u6c60\u548c\u9759\u6001\u53d8\u91cf\u88ab\u79fb\u51fa\u6c38\u4e45\u4ee3\uff0c\u653e\u5230\u4e86Java\u5806\u4e2d\u3002 JDK 1.8 \u53ca\u4e4b\u540e \u5143\u7a7a\u95f4 (Metaspace) \u6c38\u4e45\u4ee3\u88ab\u5f7b\u5e95\u79fb\u9664\uff0c\u7531\u5143\u7a7a\u95f4\u53d6\u4ee3\u3002\u5143\u7a7a\u95f4\u4f7f\u7528\u672c\u5730\u5185\u5b58\uff08Native Memory\uff09\uff0c\u4e0d\u518d\u5360\u7528JVM\u5806\u5185\u5b58\u3002\u7c7b\u578b\u4fe1\u606f\u3001\u65b9\u6cd5\u4fe1\u606f\u7b49\u5b58\u653e\u5728\u5143\u7a7a\u95f4\uff0c\u4f46\u5b57\u7b26\u4e32\u5e38\u91cf\u6c60\u548c\u9759\u6001\u53d8\u91cf\u4ecd\u5728Java\u5806\u4e2d\u3002"},{"location":"%E7%AC%94%E8%AE%B0/java/JVM%20%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/#_7","title":"\u79fb\u9664\u6c38\u4e45\u4ee3\u7684\u539f\u56e0","text":"<ul> <li>\u6c38\u4e45\u4ee3\u5927\u5c0f\u96be\u4ee5\u8bbe\u5b9a\uff0c\u5bb9\u6613\u5bfc\u81f4<code>OutOfMemoryError</code>\u3002</li> <li>\u5207\u6362\u5230\u5143\u7a7a\u95f4\u4f7f\u7528\u672c\u5730\u5185\u5b58\uff0c\u5176\u5927\u5c0f\u53ea\u53d7\u9650\u4e8e\u7269\u7406\u5185\u5b58\uff0c\u964d\u4f4e\u4e86OOM\u7684\u98ce\u9669\uff0c\u4e5f\u7b80\u5316\u4e86Full GC\u7684\u8fc7\u7a0b\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/JVM%20%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/#runtime-constant-pool","title":"\u8fd0\u884c\u65f6\u5e38\u91cf\u6c60 (Runtime Constant Pool)","text":"<ul> <li>\u5b83\u662f\u65b9\u6cd5\u533a\u7684\u4e00\u90e8\u5206\uff0c\u662f\u6bcf\u4e2a\u7c7b\u6216\u63a5\u53e3\u7684\u5e38\u91cf\u6c60\u5728\u8fd0\u884c\u65f6\u7684\u8868\u73b0\u5f62\u5f0f\u3002</li> <li>\u7528\u4e8e\u5b58\u653e\u7f16\u8bd1\u671f\u751f\u6210\u7684\u5404\u79cd\u5b57\u9762\u91cf\u548c\u7b26\u53f7\u5f15\u7528\u3002</li> <li>\u76f8\u5bf9\u4e8eClass\u6587\u4ef6\u5e38\u91cf\u6c60\uff0c\u8fd0\u884c\u65f6\u5e38\u91cf\u6c60\u5177\u6709\u52a8\u6001\u6027\uff0c\u4f8b\u5982<code>String.intern()</code>\u65b9\u6cd5\u5c31\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u5c06\u65b0\u7684\u5e38\u91cf\u653e\u5165\u6c60\u4e2d\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/","title":"Java \u5185\u5b58\u6a21\u578b","text":""},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/#jmm-","title":"JMM\u7684\u62bd\u8c61\u6a21\u578b - \u5806\u4e0e\u6808","text":"<p>Java\u5185\u5b58\u6a21\u578b\uff08JMM\uff09\u9996\u5148\u4ece\u4e00\u4e2a\u903b\u8f91\u7684\u3001\u62bd\u8c61\u7684\u89c6\u89d2\u5b9a\u4e49\u4e86\u7ebf\u7a0b\u548c\u4e3b\u5185\u5b58\u4e4b\u95f4\u7684\u5173\u7cfb\u3002\u5b83\u89c4\u5b9a\u4e86\u865a\u62df\u673a\u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e0b\u5982\u4f55\u4ee5\u53ca\u4f55\u65f6\u53ef\u4ee5\u770b\u5230\u7531\u5176\u4ed6\u7ebf\u7a0b\u4fee\u6539\u8fc7\u7684\u5171\u4eab\u53d8\u91cf\u7684\u503c\uff0c\u4ee5\u53ca\u5728\u5fc5\u8981\u65f6\u5982\u4f55\u540c\u6b65\u5bf9\u5171\u4eab\u53d8\u91cf\u7684\u8bbf\u95ee\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/#1-thread-stack","title":"1. \u7ebf\u7a0b\u6808 (Thread Stack)","text":"<ul> <li><code>\u79c1\u6709\u6027</code>: \u6bcf\u4e2a\u7ebf\u7a0b\u90fd\u6709\u5176\u81ea\u5df1\u72ec\u7acb\u7684\u7ebf\u7a0b\u6808\uff0c\u7ebf\u7a0b\u4e4b\u95f4\u65e0\u6cd5\u76f4\u63a5\u8bbf\u95ee\u5bf9\u65b9\u7684\u6808\u3002</li> <li><code>\u5b58\u50a8\u5185\u5bb9</code>:<ul> <li><code>\u5c40\u90e8\u53d8\u91cf</code>: \u65b9\u6cd5\u5185\u90e8\u5b9a\u4e49\u7684\u6240\u6709\u5c40\u90e8\u53d8\u91cf\u3002</li> <li><code>\u57fa\u672c\u6570\u636e\u7c7b\u578b</code>: <code>int</code>, <code>long</code>, <code>double</code> \u7b49\u57fa\u672c\u7c7b\u578b\u7684\u503c\u76f4\u63a5\u5b58\u50a8\u5728\u6808\u4e0a\u3002</li> <li><code>\u5bf9\u8c61\u5f15\u7528</code>: \u5bf9\u8c61\u7684\u5f15\u7528\u5730\u5740\uff08reference\uff09\u5b58\u50a8\u5728\u6808\u4e0a\uff0c\u4f46\u5bf9\u8c61\u5b9e\u4f8b\u672c\u8eab\u5b58\u653e\u5728\u5806\u4e2d\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/#2-heap","title":"2. \u5806 (Heap)","text":"<ul> <li><code>\u5171\u4eab\u6027</code>: \u5806\u662f\u6240\u6709\u7ebf\u7a0b\u5171\u4eab\u7684\u4e00\u5757\u5185\u5b58\u533a\u57df\u3002</li> <li><code>\u5b58\u50a8\u5185\u5bb9</code>:<ul> <li><code>\u5bf9\u8c61\u5b9e\u4f8b</code>: \u51e0\u4e4e\u6240\u6709\u7684\u5bf9\u8c61\u5b9e\u4f8b\uff08<code>new Object()</code>\uff09\u90fd\u5728\u5806\u4e0a\u5206\u914d\u5185\u5b58\u3002</li> <li><code>\u6210\u5458\u53d8\u91cf</code>: \u5bf9\u8c61\u7684\u6240\u6709\u6210\u5458\u53d8\u91cf\uff08\u5305\u62ec\u57fa\u672c\u7c7b\u578b\u548c\u5f15\u7528\u7c7b\u578b\uff09\u90fd\u968f\u5bf9\u8c61\u4e00\u8d77\u5b58\u50a8\u5728\u5806\u4e2d\u3002</li> <li><code>\u9759\u6001\u53d8\u91cf</code>: \u7c7b\u7684\u9759\u6001\u53d8\u91cf\u4e5f\u5b58\u653e\u5728\u5806\u4e2d\uff08JDK 8\u53ca\u4ee5\u540e\uff09\u3002</li> <li><code>\u6570\u7ec4</code>: \u6570\u7ec4\u5bf9\u8c61\u672c\u8eab\u5b58\u653e\u5728\u5806\u4e2d\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/#_1","title":"\u7ebf\u7a0b\u6808\u4e0e\u5806\u7684\u4ea4\u4e92","text":"<p>\u7ebf\u7a0b\u901a\u8fc7\u5b58\u50a8\u5728\u81ea\u5df1\u7ebf\u7a0b\u6808\u4e0a\u7684\u5bf9\u8c61\u5f15\u7528\uff0c\u6765\u64cd\u4f5c\u4f4d\u4e8e\u5171\u4eab\u5806\u533a\u4e2d\u7684\u5bf9\u8c61\u5b9e\u4f8b\u53ca\u5176\u6210\u5458\u53d8\u91cf\u3002\u5982\u679c\u591a\u4e2a\u7ebf\u7a0b\u7684\u6808\u4e2d\u90fd\u6301\u6709\u5bf9\u540c\u4e00\u4e2a\u5806\u5bf9\u8c61\u7684\u5f15\u7528\uff0c\u5b83\u4eec\u5c31\u53ef\u4ee5\u5e76\u53d1\u5730\u8bbf\u95ee\u548c\u4fee\u6539\u8fd9\u4e2a\u5bf9\u8c61\u7684\u6210\u5458\u53d8\u91cf\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/#jmm","title":"JMM\u4e0e\u786c\u4ef6\u5185\u5b58\u7684\u6620\u5c04","text":"<p>JMM\u662f\u4e00\u4e2a\u62bd\u8c61\u6982\u5ff5\uff0c\u5b83\u9700\u8981\u6620\u5c04\u5230\u5e95\u5c42\u7684\u7269\u7406\u786c\u4ef6\u5185\u5b58\u67b6\u6784\u4e0a\u624d\u80fd\u88ab\u7406\u89e3\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/#1","title":"1. \u786c\u4ef6\u5185\u5b58\u67b6\u6784","text":"<p>\u73b0\u4ee3\u8ba1\u7b97\u673a\u901a\u5e38\u5305\u542b\u591a\u6838CPU\u3002\u5176\u5185\u5b58\u67b6\u6784\u5927\u81f4\u5982\u4e0b\uff1a *   <code>CPU</code>: \u6bcf\u4e2aCPU\u6838\u5fc3\u90fd\u6709\u81ea\u5df1\u7684\u5bc4\u5b58\u5668\uff08Registers\uff09\u548c\u9ad8\u901f\u7f13\u5b58\uff08Cache\uff09\u3002 *   <code>\u4e3b\u5185\u5b58 (RAM)</code>: \u6240\u6709CPU\u5171\u4eab\u7684\u7269\u7406\u5185\u5b58\u3002</p> <p>\u4e3a\u4e86\u63d0\u5347\u6027\u80fd\uff0cCPU\u5e76\u4e0d\u4f1a\u76f4\u63a5\u8bfb\u5199\u4e3b\u5185\u5b58\uff0c\u800c\u662f\u4f1a\u5148\u5c06\u4e3b\u5185\u5b58\u4e2d\u7684\u6570\u636e\u8bfb\u53d6\u5230\u81ea\u5df1\u7684\u9ad8\u901f\u7f13\u5b58\u4e2d\u8fdb\u884c\u64cd\u4f5c\u3002\u64cd\u4f5c\u5b8c\u6210\u540e\uff0c\u518d\u5728\u67d0\u4e2a\u65f6\u673a\u5c06\u7f13\u5b58\u4e2d\u7684\u6570\u636e\u5199\u56de\u5230\u4e3b\u5185\u5b58\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/#2-jmm","title":"2. JMM\u4e0e\u786c\u4ef6\u7684\u8fde\u63a5","text":"<ul> <li>JMM\u4e2d\u5b9a\u4e49\u7684<code>\u4e3b\u5185\u5b58</code>\u4e3b\u8981\u5bf9\u5e94\u7269\u7406\u4e0a\u7684<code>\u4e3b\u5185\u5b58 (RAM)</code>\u3002</li> <li>JMM\u4e2d\u5b9a\u4e49\u7684<code>\u5de5\u4f5c\u5185\u5b58</code>\uff08\u4e00\u4e2a\u66f4\u62bd\u8c61\u7684\u6982\u5ff5\uff09\u53ef\u4ee5\u7406\u89e3\u4e3a\u5bf9\u5e94\u7269\u7406\u4e0a\u7684<code>CPU\u9ad8\u901f\u7f13\u5b58</code>\u548c<code>\u5bc4\u5b58\u5668</code>\u3002</li> </ul> <p>\u5f53\u7ebf\u7a0b\u64cd\u4f5c\u5171\u4eab\u53d8\u91cf\u65f6\uff0c\u5b83\u5b9e\u9645\u4e0a\u662f\u5c06\u53d8\u91cf\u4ece\u4e3b\u5185\u5b58\u62f7\u8d1d\u4e00\u4efd\u5230\u81ea\u5df1\u7684\u5de5\u4f5c\u5185\u5b58\uff08CPU\u7f13\u5b58\uff09\u4e2d\uff0c\u64cd\u4f5c\u5b8c\u6210\u540e\u518d\u5199\u56de\u4e3b\u5185\u5b58\u3002\u6b63\u662f\u8fd9\u79cd<code>\u201c\u62f7\u8d1d-\u64cd\u4f5c-\u5199\u56de\u201d</code>\u7684\u673a\u5236\uff0c\u5bfc\u81f4\u4e86\u5e76\u53d1\u7f16\u7a0b\u4e2d\u7684\u4e24\u5927\u6838\u5fc3\u95ee\u9898\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/#_2","title":"\u5e76\u53d1\u7f16\u7a0b\u7684\u6838\u5fc3\u95ee\u9898","text":""},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/#1-visibility","title":"1. \u53ef\u89c1\u6027 (Visibility)","text":"<ul> <li><code>\u95ee\u9898\u63cf\u8ff0</code>: \u5f53\u4e00\u4e2a\u7ebf\u7a0b\u4fee\u6539\u4e86\u5171\u4eab\u53d8\u91cf\u7684\u503c\uff0c\u4f46\u8fd8\u672a\u5c06\u5176\u5199\u56de\u4e3b\u5185\u5b58\u65f6\uff0c\u8fd9\u4e2a\u53d8\u66f4\u5bf9\u5176\u4ed6\u7ebf\u7a0b\u662f\u4e0d\u53ef\u89c1\u7684\u3002\u5176\u4ed6\u7ebf\u7a0b\u4ecd\u7136\u53ef\u80fd\u4ece\u4e3b\u5185\u5b58\u6216\u81ea\u5df1\u7684\u7f13\u5b58\u4e2d\u8bfb\u53d6\u5230\u65e7\u7684\u503c\u3002</li> <li><code>\u89e3\u51b3\u65b9\u6848</code>: \u4f7f\u7528 <code>volatile</code> \u5173\u952e\u5b57\u3002<code>volatile</code> \u53ef\u4ee5\u4fdd\u8bc1\uff1a<ol> <li>\u5bf9\u8be5\u53d8\u91cf\u7684\u4fee\u6539\u4f1a\u7acb\u5373\u88ab\u5237\u65b0\u5230\u4e3b\u5185\u5b58\u3002</li> <li>\u5176\u4ed6\u7ebf\u7a0b\u5728\u8bfb\u53d6\u8be5\u53d8\u91cf\u65f6\uff0c\u4f1a\u5f3a\u5236\u4ece\u4e3b\u5185\u5b58\u4e2d\u91cd\u65b0\u83b7\u53d6\u6700\u65b0\u503c\uff0c\u800c\u4e0d\u662f\u4f7f\u7528\u672c\u5730\u7f13\u5b58\u3002</li> </ol> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/#2-race-condition","title":"2. \u7ade\u6001\u6761\u4ef6 (Race Condition) \u4e0e\u539f\u5b50\u6027","text":"<ul> <li><code>\u95ee\u9898\u63cf\u8ff0</code>: \u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u5bf9\u4e00\u4e2a\u5171\u4eab\u53d8\u91cf\u6267\u884c\u201c\u8bfb-\u6539-\u5199\u201d\u64cd\u4f5c\u5e8f\u5217\u65f6\uff0c\u7531\u4e8e\u8fd9\u4e2a\u5e8f\u5217\u4e0d\u662f\u539f\u5b50\u6027\u7684\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u8ba1\u7b97\u7ed3\u679c\u4e0d\u6b63\u786e\uff0c\u4ea7\u751f\u7ade\u6001\u6761\u4ef6\u3002\u4f8b\u5982\uff0c\u4e24\u4e2a\u7ebf\u7a0b\u540c\u65f6\u5bf9 <code>count = 0</code> \u6267\u884c <code>count++</code>\uff0c\u7406\u60f3\u7ed3\u679c\u662f2\uff0c\u4f46\u5b9e\u9645\u7ed3\u679c\u53ef\u80fd\u662f1\u3002</li> <li><code>\u89e3\u51b3\u65b9\u6848</code>: \u4f7f\u7528 <code>synchronized</code> \u5757\u6216\u9501\uff08Lock\uff09\u3002<code>synchronized</code> \u53ef\u4ee5\u4fdd\u8bc1\uff1a<ol> <li><code>\u539f\u5b50\u6027</code>: \u786e\u4fdd\u5728\u540c\u4e00\u65f6\u523b\uff0c\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u80fd\u8fdb\u5165\u88ab\u5176\u4fee\u9970\u7684\u4ee3\u7801\u5757\uff08\u4e34\u754c\u533a\uff09\uff0c\u4ece\u800c\u4fdd\u8bc1\u64cd\u4f5c\u7684\u539f\u5b50\u6027\u3002</li> <li><code>\u53ef\u89c1\u6027</code>: \u5f53\u4e00\u4e2a\u7ebf\u7a0b\u91ca\u653e\u9501\u65f6\uff0c\u5b83\u4f1a\u5f3a\u5236\u5c06\u5de5\u4f5c\u5185\u5b58\u4e2d\u7684\u4fee\u6539\u5237\u65b0\u5230\u4e3b\u5185\u5b58\u3002\u800c\u5f53\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u83b7\u53d6\u9501\u65f6\uff0c\u4f1a\u6e05\u7a7a\u5de5\u4f5c\u5185\u5b58\uff0c\u5f3a\u5236\u4ece\u4e3b\u5185\u5b58\u52a0\u8f7d\u6700\u65b0\u503c\u3002</li> </ol> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/#jmmjvm","title":"JMM\u4e0eJVM\u5185\u5b58\u7ed3\u6784\u7684\u533a\u522b","text":"<p>\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u5173\u952e\u4e14\u5bb9\u6613\u6df7\u6dc6\u7684\u6982\u5ff5\uff1a</p> <ul> <li><code>JVM\u5185\u5b58\u7ed3\u6784 (JVM Memory Structure)</code>: \u4e5f\u79f0\u4e3a\u201cJVM\u8fd0\u884c\u65f6\u6570\u636e\u533a\u201d\u3002\u5b83\u63cf\u8ff0\u7684\u662fJVM\u5728\u6267\u884cJava\u7a0b\u5e8f\u65f6\uff0c\u4ece\u64cd\u4f5c\u7cfb\u7edf\u7533\u8bf7\u7684\u5185\u5b58\u88ab\u5212\u5206\u6210\u4e86\u54ea\u4e9b<code>\u533a\u57df</code>\uff0c\u4ee5\u53ca\u6bcf\u4e2a\u533a\u57df\u7684<code>\u529f\u80fd</code>\u548c<code>\u7528\u9014</code>\u3002\u5b83\u4e3b\u8981\u5305\u62ec\uff1a\u5806\u3001\u865a\u62df\u673a\u6808\u3001\u65b9\u6cd5\u533a\u3001\u7a0b\u5e8f\u8ba1\u6570\u5668\u3001\u672c\u5730\u65b9\u6cd5\u6808\u3002\u5b83\u5173\u6ce8\u7684\u662f<code>\u5185\u5b58\u7684\u5212\u5206\u548c\u5b58\u50a8</code>\u3002</li> <li><code>Java\u5185\u5b58\u6a21\u578b (JMM - Java Memory Model)</code>: \u5b83\u662f\u4e00\u4e2a\u66f4<code>\u62bd\u8c61</code>\u7684\u6982\u5ff5\uff0c\u5e76\u975e\u5b9e\u9645\u7684\u5185\u5b58\u5e03\u5c40\u3002\u5b83\u5b9a\u4e49\u4e86\u591a\u7ebf\u7a0b\u73af\u5883\u4e0b\u5171\u4eab\u53d8\u91cf\u7684<code>\u8bbf\u95ee\u89c4\u5219</code>\u548c<code>\u4e00\u81f4\u6027\u4fdd\u8bc1</code>\uff0c\u65e8\u5728\u5c4f\u853d\u4e0d\u540c\u786c\u4ef6\u548c\u64cd\u4f5c\u7cfb\u7edf\u5185\u5b58\u6a21\u578b\u7684\u5dee\u5f02\uff0c\u4e3aJava\u7a0b\u5e8f\u5458\u63d0\u4f9b\u4e00\u4e2a\u7edf\u4e00\u7684\u3001\u53ef\u9884\u6d4b\u7684\u5e76\u53d1\u7f16\u7a0b\u6a21\u578b\u3002\u5b83\u5173\u6ce8\u7684\u662f<code>\u5e76\u53d1\u8bbf\u95ee\u7684\u89c4\u5219\u548c\u53ef\u89c1\u6027</code>\u3002</li> </ul> <p>\u7b80\u5355\u6765\u8bf4\uff0cJVM\u5185\u5b58\u7ed3\u6784\u662f\u201c\u6709\u4ec0\u4e48\u201d\uff0c\u800cJMM\u662f\u201c\u600e\u4e48\u529e\u201d\u3002JMM\u662f\u5efa\u7acb\u5728JVM\u5185\u5b58\u7ed3\u6784\u4e4b\u4e0a\u7684\u5e76\u53d1\u8bbf\u95ee\u89c4\u8303\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E5%B9%B6%E5%8F%91/","title":"Java \u5185\u5b58\u6a21\u578b\u5e76\u53d1","text":""},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E5%B9%B6%E5%8F%91/#_1","title":"\u57fa\u7840\u6982\u5ff5","text":""},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E5%B9%B6%E5%8F%91/#_2","title":"\u5e76\u53d1\u7f16\u7a0b\u6a21\u578b","text":"<ul> <li>\u5171\u4eab\u5185\u5b58\u6a21\u578b\uff1a\u7ebf\u7a0b\u4e4b\u95f4\u901a\u8fc7\u8bfb-\u5199\u516c\u5171\u7684\u5185\u5b58\u533a\u57df\u6765\u8fdb\u884c\u9690\u5f0f\u901a\u4fe1\u3002Java\u91c7\u7528\u6b64\u6a21\u578b\u3002</li> <li>\u6d88\u606f\u4f20\u9012\u6a21\u578b\uff1a\u7ebf\u7a0b\u4e4b\u95f4\u6ca1\u6709\u516c\u5171\u72b6\u6001\uff0c\u5fc5\u987b\u901a\u8fc7\u663e\u5f0f\u53d1\u9001\u6d88\u606f\u6765\u901a\u4fe1\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E5%B9%B6%E5%8F%91/#jmm","title":"JMM\u7684\u62bd\u8c61\u7ed3\u6784","text":"<p>JMM\u5b9a\u4e49\u4e86\u7ebf\u7a0b\u548c\u4e3b\u5185\u5b58\uff08Main Memory\uff09\u4e4b\u95f4\u7684\u5173\u7cfb\u3002</p> <ul> <li>\u4e3b\u5185\u5b58\uff1a\u5b58\u50a8\u6240\u6709\u7ebf\u7a0b\u5171\u4eab\u7684\u53d8\u91cf\uff08\u5b9e\u4f8b\u57df\u3001\u9759\u6001\u57df\u3001\u6570\u7ec4\u5143\u7d20\u7b49\uff09\u3002</li> <li>\u672c\u5730\u5185\u5b58\uff08Local Memory\uff09\uff1a\u6bcf\u4e2a\u7ebf\u7a0b\u79c1\u6709\u7684\u5de5\u4f5c\u5185\u5b58\uff0c\u5b58\u50a8\u4e86\u8be5\u7ebf\u7a0b\u8bfb/\u5199\u5171\u4eab\u53d8\u91cf\u7684\u526f\u672c\u3002\u672c\u5730\u5185\u5b58\u662f\u4e00\u4e2a\u62bd\u8c61\u6982\u5ff5\uff0c\u5b83\u6db5\u76d6\u4e86\u7f13\u5b58\u3001\u5199\u7f13\u51b2\u533a\u3001\u5bc4\u5b58\u5668\u7b49\u3002</li> </ul> <p>\u7ebf\u7a0b\u95f4\u7684\u901a\u4fe1\u5fc5\u987b\u7ecf\u8fc7\u4e3b\u5185\u5b58\u3002\u8fc7\u7a0b\u5982\u4e0b\uff1a 1.  \u7ebf\u7a0bA\u5c06\u66f4\u65b0\u540e\u7684\u5171\u4eab\u53d8\u91cf\u503c\u4ece\u5176\u672c\u5730\u5185\u5b58\u5237\u65b0\u5230\u4e3b\u5185\u5b58\u3002 2.  \u7ebf\u7a0bB\u4ece\u4e3b\u5185\u5b58\u8bfb\u53d6\u7ebf\u7a0bA\u66f4\u65b0\u8fc7\u7684\u5171\u4eab\u53d8\u91cf\u503c\u5230\u81ea\u5df1\u7684\u672c\u5730\u5185\u5b58\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E5%B9%B6%E5%8F%91/#_3","title":"\u91cd\u6392\u5e8f","text":"<p>\u4e3a\u4e86\u63d0\u9ad8\u6027\u80fd\uff0c\u7f16\u8bd1\u5668\u548c\u5904\u7406\u5668\u4f1a\u5bf9\u6307\u4ee4\u8fdb\u884c\u91cd\u6392\u5e8f\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E5%B9%B6%E5%8F%91/#_4","title":"\u91cd\u6392\u5e8f\u7684\u7c7b\u578b","text":"<ol> <li>\u7f16\u8bd1\u5668\u4f18\u5316\u91cd\u6392\u5e8f\uff1a\u4e0d\u6539\u53d8\u5355\u7ebf\u7a0b\u7a0b\u5e8f\u8bed\u4e49\u7684\u524d\u63d0\u4e0b\uff0c\u91cd\u65b0\u5b89\u6392\u8bed\u53e5\u7684\u6267\u884c\u987a\u5e8f\u3002</li> <li>\u6307\u4ee4\u7ea7\u5e76\u884c\u91cd\u6392\u5e8f\uff1a\u73b0\u4ee3\u5904\u7406\u5668\u91c7\u7528\u6307\u4ee4\u7ea7\u5e76\u884c\u6280\u672f\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u6570\u636e\u4f9d\u8d56\u6027\uff0c\u53ef\u4ee5\u6539\u53d8\u6307\u4ee4\u7684\u6267\u884c\u987a\u5e8f\u3002</li> <li>\u5185\u5b58\u7cfb\u7edf\u91cd\u6392\u5e8f\uff1a\u7531\u4e8e\u7f13\u5b58\u548c\u5199\u7f13\u51b2\u533a\u7684\u5b58\u5728\uff0c\u4f7f\u5f97\u52a0\u8f7d\u548c\u5b58\u50a8\u64cd\u4f5c\u770b\u8d77\u6765\u662f\u4e71\u5e8f\u6267\u884c\u7684\u3002</li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E5%B9%B6%E5%8F%91/#_5","title":"\u5904\u7406\u5668\u91cd\u6392\u5e8f\u4e0e\u5185\u5b58\u5c4f\u969c","text":"<ul> <li>\u5199\u7f13\u51b2\u533a\uff1a\u73b0\u4ee3\u5904\u7406\u5668\u4f7f\u7528\u5199\u7f13\u51b2\u533a\u6765\u4e34\u65f6\u4fdd\u5b58\u5199\u5165\u7684\u6570\u636e\uff0c\u8fd9\u53ef\u4ee5\u63d0\u9ad8\u6027\u80fd\uff0c\u4f46\u4e5f\u4f1a\u5bfc\u81f4\u5904\u7406\u5668\u5bf9\u5185\u5b58\u7684\u8bfb/\u5199\u987a\u5e8f\u4e0e\u5b9e\u9645\u53d1\u751f\u7684\u987a\u5e8f\u4e0d\u4e00\u81f4\uff0c\u5c24\u5176\u662f\u5728\u591a\u5904\u7406\u5668\u7cfb\u7edf\u4e2d\uff0c\u4e00\u4e2a\u5904\u7406\u5668\u7684\u5199\u7f13\u51b2\u5bf9\u5176\u4ed6\u5904\u7406\u5668\u662f\u4e0d\u53ef\u89c1\u7684\u3002\u8fd9\u662f\u5bfc\u81f4\u5185\u5b58\u53ef\u89c1\u6027\u95ee\u9898\u7684\u6839\u6e90\u4e4b\u4e00\u3002</li> <li>\u5185\u5b58\u5c4f\u969c (Memory Barriers)\uff1a\u4e3a\u4e86\u89e3\u51b3\u91cd\u6392\u5e8f\u5e26\u6765\u7684\u95ee\u9898\uff0cJMM\u5f15\u5165\u4e86\u5185\u5b58\u5c4f\u969c\u3002\u7f16\u8bd1\u5668\u5728\u751f\u6210\u6307\u4ee4\u5e8f\u5217\u65f6\uff0c\u4f1a\u5728\u9002\u5f53\u4f4d\u7f6e\u63d2\u5165\u5185\u5b58\u5c4f\u969c\u6307\u4ee4\uff0c\u4ee5\u7981\u6b62\u7279\u5b9a\u7c7b\u578b\u7684\u5904\u7406\u5668\u91cd\u6392\u5e8f\u3002<ul> <li>LoadLoad Barriers</li> <li>StoreStore Barriers</li> <li>LoadStore Barriers</li> <li>StoreLoad Barriers (\u529f\u80fd\u6700\u5168\uff0c\u5f00\u9500\u4e5f\u6700\u5927)</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E5%B9%B6%E5%8F%91/#happens-before","title":"Happens-Before \u539f\u5219","text":"<p>Happens-before\u662fJMM\u4e2d\u7528\u4e8e\u9610\u8ff0\u64cd\u4f5c\u4e4b\u95f4\u5185\u5b58\u53ef\u89c1\u6027\u7684\u6838\u5fc3\u6982\u5ff5\u3002\u5982\u679c\u4e00\u4e2a\u64cd\u4f5c\u7684\u7ed3\u679c\u9700\u8981\u5bf9\u53e6\u4e00\u4e2a\u64cd\u4f5c\u53ef\u89c1\uff0c\u90a3\u4e48\u8fd9\u4e24\u4e2a\u64cd\u4f5c\u4e4b\u95f4\u5fc5\u987b\u5b58\u5728happens-before\u5173\u7cfb\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E5%B9%B6%E5%8F%91/#_6","title":"\u4e3b\u8981\u89c4\u5219","text":"<ul> <li>\u7a0b\u5e8f\u987a\u5e8f\u89c4\u5219\uff1a\u5728\u4e00\u4e2a\u7ebf\u7a0b\u5185\uff0c\u4e66\u5199\u5728\u524d\u9762\u7684\u64cd\u4f5c happens-before \u4e8e\u4e66\u5199\u5728\u540e\u9762\u7684\u64cd\u4f5c\u3002</li> <li>\u76d1\u89c6\u5668\u9501\u89c4\u5219\uff1a\u4e00\u4e2a<code>unlock</code>\u64cd\u4f5c happens-before \u4e8e\u540e\u9762\u5bf9\u540c\u4e00\u4e2a\u9501\u7684<code>lock</code>\u64cd\u4f5c\u3002</li> <li>volatile\u53d8\u91cf\u89c4\u5219\uff1a\u5bf9\u4e00\u4e2a<code>volatile</code>\u53d8\u91cf\u7684\u5199\u64cd\u4f5c happens-before \u4e8e\u4efb\u610f\u540e\u7eed\u5bf9\u8fd9\u4e2a<code>volatile</code>\u53d8\u91cf\u7684\u8bfb\u64cd\u4f5c\u3002</li> <li>\u4f20\u9012\u6027\uff1a\u5982\u679c A happens-before B\uff0c\u4e14 B happens-before C\uff0c\u90a3\u4e48A happens-before C\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E5%B9%B6%E5%8F%91/#as-if-serial","title":"as-if-serial \u8bed\u4e49","text":"<p>\u6307\u65e0\u8bba\u5982\u4f55\u91cd\u6392\u5e8f\uff0c\uff08\u5355\u7ebf\u7a0b\uff09\u7a0b\u5e8f\u7684\u6267\u884c\u7ed3\u679c\u4e0d\u80fd\u88ab\u6539\u53d8\u3002\u7f16\u8bd1\u5668\u548c\u5904\u7406\u5668\u5fc5\u987b\u9075\u5b88\u6b64\u8bed\u4e49\u3002\u4e3a\u4e86\u9075\u5b88\u5b83\uff0c\u5b58\u5728\u6570\u636e\u4f9d\u8d56\u5173\u7cfb\u7684\u64cd\u4f5c\u4e0d\u4f1a\u88ab\u91cd\u6392\u5e8f\u3002\u4f46\u662f\uff0c\u6ca1\u6709\u6570\u636e\u4f9d\u8d56\u5173\u7cfb\u7684\u64cd\u4f5c\u5219\u53ef\u80fd\u88ab\u91cd\u6392\u5e8f\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E5%B9%B6%E5%8F%91/#_7","title":"\u91cd\u6392\u5e8f\u5bf9\u591a\u7ebf\u7a0b\u7684\u5f71\u54cd","text":"<p>\u5728\u5355\u7ebf\u7a0b\u4e2d\uff0c<code>as-if-serial</code>\u8bed\u4e49\u4fdd\u8bc1\u4e86\u7a0b\u5e8f\u7684\u6b63\u786e\u6027\u3002\u4f46\u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e2d\uff0c\u5373\u4fbf\u662f\u6ca1\u6709\u6570\u636e\u4f9d\u8d56\u7684\u64cd\u4f5c\uff0c\u5176\u91cd\u6392\u5e8f\u4e5f\u53ef\u80fd\u7834\u574f\u7a0b\u5e8f\u7684\u903b\u8f91\u3002\u4f8b\u5982\uff0c\u4e00\u4e2a\u7ebf\u7a0b\u5199\u5165\u6570\u636e\u540e\u518d\u8bbe\u7f6e\u4e00\u4e2a\u6807\u5fd7\u4f4d\uff0c\u5982\u679c\u8fd9\u4e24\u4e2a\u64cd\u4f5c\u88ab\u91cd\u6392\u5e8f\uff0c\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u53ef\u80fd\u4f1a\u770b\u5230\u6807\u5fd7\u4f4d\u88ab\u8bbe\u7f6e\uff0c\u4f46\u8bfb\u53d6\u5230\u7684\u6570\u636e\u5374\u662f\u65e7\u7684\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E5%B9%B6%E5%8F%91/#_8","title":"\u987a\u5e8f\u4e00\u81f4\u6027\u6a21\u578b","text":""},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E5%B9%B6%E5%8F%91/#_9","title":"\u987a\u5e8f\u4e00\u81f4\u6027\u6a21\u578b\u7b80\u4ecb","text":"<p>\u8fd9\u662f\u4e00\u4e2a\u7406\u8bba\u4e0a\u7684\u53c2\u8003\u6a21\u578b\uff0c\u5b83\u4e3a\u7a0b\u5e8f\u5458\u63d0\u4f9b\u4e86\u6781\u5f3a\u7684\u5185\u5b58\u53ef\u89c1\u6027\u4fdd\u8bc1\u3002</p> <ul> <li>\u4e24\u5927\u7279\u6027\uff1a<ol> <li>\u4e00\u4e2a\u7ebf\u7a0b\u4e2d\u7684\u6240\u6709\u64cd\u4f5c\u5fc5\u987b\u6309\u7167\u7a0b\u5e8f\u7684\u987a\u5e8f\u6765\u6267\u884c\u3002</li> <li>\u6240\u6709\u7ebf\u7a0b\u90fd\u53ea\u80fd\u770b\u5230\u4e00\u4e2a\u5355\u4e00\u7684\u64cd\u4f5c\u6267\u884c\u987a\u5e8f\uff0c\u6bcf\u4e2a\u64cd\u4f5c\u90fd\u5fc5\u987b\u539f\u5b50\u6267\u884c\u4e14\u7acb\u523b\u5bf9\u6240\u6709\u7ebf\u7a0b\u53ef\u89c1\u3002</li> </ol> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E5%B9%B6%E5%8F%91/#jmm_1","title":"JMM\u4e0e\u987a\u5e8f\u4e00\u81f4\u6027\u6a21\u578b\u7684\u5bf9\u6bd4","text":"<ul> <li> <p>\u5bf9\u4e8e\u6b63\u786e\u540c\u6b65\u7684\u7a0b\u5e8f\uff1aJMM\u4fdd\u8bc1\u5176\u6267\u884c\u7ed3\u679c\u4e0e\u5728\u987a\u5e8f\u4e00\u81f4\u6027\u6a21\u578b\u4e2d\u7684\u6267\u884c\u7ed3\u679c\u76f8\u540c\u3002JMM\u5141\u8bb8\u5728\u4e34\u754c\u533a\u5185\u8fdb\u884c\u91cd\u6392\u5e8f\u4ee5\u63d0\u9ad8\u6027\u80fd\uff0c\u4f46\u901a\u8fc7\u9501\u673a\u5236\u4fdd\u8bc1\u4e86\u5176\u4ed6\u7ebf\u7a0b\u65e0\u6cd5\u89c2\u5bdf\u5230\u8fd9\u79cd\u91cd\u6392\u5e8f\uff0c\u4ece\u800c\u5bf9\u5916\u5448\u73b0\u51fa\u987a\u5e8f\u4e00\u81f4\u6027\u7684\u6548\u679c\u3002</p> </li> <li> <p>\u5bf9\u4e8e\u672a\u540c\u6b65/\u672a\u6b63\u786e\u540c\u6b65\u7684\u7a0b\u5e8f\uff1aJMM\u63d0\u4f9b\u7684\u4fdd\u8bc1\u5f88\u5f31\u3002</p> <ul> <li>JMM\u4e0d\u4fdd\u8bc1\u64cd\u4f5c\u7684\u6267\u884c\u987a\u5e8f\u4e0e\u7a0b\u5e8f\u987a\u5e8f\u4e00\u81f4\u3002</li> <li>JMM\u4e0d\u4fdd\u8bc1\u6240\u6709\u7ebf\u7a0b\u770b\u5230\u7684\u64cd\u4f5c\u6267\u884c\u987a\u5e8f\u662f\u4e00\u81f4\u7684\u3002</li> <li>JMM\u4e0d\u4fdd\u8bc1\u5bf964\u4f4d<code>long</code>\u548c<code>double</code>\u7c7b\u578b\u53d8\u91cf\u7684\u8bfb\u5199\u662f\u539f\u5b50\u6027\u7684\uff08\u4f46\u5728\u73b0\u4ee3\u5546\u7528\u865a\u62df\u673a\u4e2d\u901a\u5e38\u4f1a\u5b9e\u73b0\u539f\u5b50\u6027\uff09\u3002</li> <li>JMM\u4ec5\u63d0\u4f9b\u6700\u5c0f\u5b89\u5168\u6027\uff1a\u7ebf\u7a0b\u8bfb\u53d6\u5230\u7684\u503c\u8981\u4e48\u662f\u4e4b\u524d\u67d0\u4e2a\u7ebf\u7a0b\u5199\u5165\u7684\u503c\uff0c\u8981\u4e48\u662f\u7c7b\u578b\u7684\u9ed8\u8ba4\u503c\uff080, null, false\uff09\uff0c\u4e0d\u4f1a\u65e0\u4e2d\u751f\u6709\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E5%B9%B6%E5%8F%91/#jmm_2","title":"JMM\u7684\u8bbe\u8ba1\u4e0e\u603b\u7ed3","text":""},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E5%B9%B6%E5%8F%91/#jmm_3","title":"JMM\u3001\u5904\u7406\u5668\u6a21\u578b\u4e0e\u987a\u5e8f\u4e00\u81f4\u6027\u6a21\u578b\u7684\u5173\u7cfb","text":"<ul> <li>\u5f3a\u5ea6\u5bf9\u6bd4\uff1a\u987a\u5e8f\u4e00\u81f4\u6027\u6a21\u578b &gt; JMM &gt; \u5904\u7406\u5668\u5185\u5b58\u6a21\u578b\u3002</li> <li>\u8d8a\u8ffd\u6c42\u6027\u80fd\u7684\u5904\u7406\u5668\u6216\u8bed\u8a00\uff0c\u5176\u5185\u5b58\u6a21\u578b\u5c31\u8bbe\u8ba1\u5f97\u8d8a\u5f31\uff0c\u5bf9\u4f18\u5316\u7684\u9650\u5236\u5c31\u8d8a\u5c11\u3002JMM\u901a\u8fc7\u63d2\u5165\u5185\u5b58\u5c4f\u969c\uff0c\u5c4f\u853d\u4e86\u4e0d\u540c\u5904\u7406\u5668\u5185\u5b58\u6a21\u578b\u7684\u5dee\u5f02\uff0c\u4e3aJava\u7a0b\u5e8f\u5458\u63d0\u4f9b\u4e86\u7edf\u4e00\u7684\u3001\u6bd4\u5927\u591a\u6570\u5904\u7406\u5668\u6a21\u578b\u66f4\u5f3a\u7684\u5185\u5b58\u6a21\u578b\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E5%B9%B6%E5%8F%91/#jmm_4","title":"JMM\u7684\u8bbe\u8ba1\u54f2\u5b66","text":"<p>JMM\u7684\u8bbe\u8ba1\u65e8\u5728\u5e73\u8861\u4e24\u4e2a\u77db\u76fe\u7684\u76ee\u6807\uff1a</p> <ol> <li>\u7a0b\u5e8f\u5458\u7684\u9700\u6c42\uff1a\u5e0c\u671b\u5185\u5b58\u6a21\u578b\u6613\u4e8e\u7406\u89e3\uff0c\u63d0\u4f9b\u5f3a\u5927\u7684\u5185\u5b58\u53ef\u89c1\u6027\u4fdd\u8bc1\uff08\u5f3a\u6a21\u578b\uff09\u3002</li> <li>\u7f16\u8bd1\u5668\u548c\u5904\u7406\u5668\u7684\u9700\u6c42\uff1a\u5e0c\u671b\u5185\u5b58\u6a21\u578b\u7684\u675f\u7f1a\u5c3d\u53ef\u80fd\u5c11\uff0c\u4ee5\u4fbf\u8fdb\u884c\u66f4\u591a\u4f18\u5316\u6765\u63d0\u5347\u6027\u80fd\uff08\u5f31\u6a21\u578b\uff09\u3002</li> </ol> <p>JMM\u7684\u89e3\u51b3\u65b9\u6848\u662f\uff1a -   \u5bf9\u7a0b\u5e8f\u5458\uff1a\u63d0\u4f9b\u7b80\u5355\u6613\u61c2\u7684<code>happens-before</code>\u89c4\u5219\u3002 -   \u5bf9\u7f16\u8bd1\u5668\u548c\u5904\u7406\u5668\uff1a\u9075\u5faa\u4e00\u4e2a\u57fa\u672c\u539f\u5219\u2014\u2014\u53ea\u8981\u4e0d\u6539\u53d8\uff08\u5355\u7ebf\u7a0b\u548c\u6b63\u786e\u540c\u6b65\u7684\u591a\u7ebf\u7a0b\uff09\u7a0b\u5e8f\u7684\u6267\u884c\u7ed3\u679c\uff0c\u5c31\u53ef\u4ee5\u8fdb\u884c\u4efb\u610f\u4f18\u5316\u3002\u5bf9\u4e8e\u4f1a\u6539\u53d8\u7a0b\u5e8f\u6267\u884c\u7ed3\u679c\u7684\u91cd\u6392\u5e8f\uff0cJMM\u8981\u6c42\u5fc5\u987b\u7981\u6b62\uff1b\u5bf9\u4e8e\u4e0d\u4f1a\u6539\u53d8\u7684\uff0c\u5219\u5141\u8bb8\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E5%B9%B6%E5%8F%91/#jsr-133","title":"JSR-133\u5bf9\u65e7\u6a21\u578b\u7684\u4fee\u8865","text":"<p>JDK 5\u4e4b\u540e\u91c7\u7528\u7684JSR-133\u5185\u5b58\u6a21\u578b\u4e3b\u8981\u505a\u4e86\u4e24\u9879\u91cd\u8981\u7684\u589e\u5f3a\uff1a -   \u589e\u5f3a\u4e86<code>volatile</code>\u7684\u5185\u5b58\u8bed\u4e49\uff1a\u4e25\u683c\u9650\u5236\u4e86<code>volatile</code>\u53d8\u91cf\u4e0e\u666e\u901a\u53d8\u91cf\u7684\u91cd\u6392\u5e8f\uff0c\u4f7f\u5176\u5199-\u8bfb\u64cd\u4f5c\u5177\u6709\u4e0e\u9501\u7684\u91ca\u653e-\u83b7\u53d6\u76f8\u540c\u7684\u5185\u5b58\u8bed\u4e49\u3002 -   \u589e\u5f3a\u4e86<code>final</code>\u7684\u5185\u5b58\u8bed\u4e49\uff1a\u4fdd\u8bc1\u4e86<code>final</code>\u57df\u7684\u521d\u59cb\u5316\u5b89\u5168\u6027\uff0c\u786e\u4fdd\u5bf9\u8c61\u6784\u9020\u5b8c\u6210\u540e\uff0c\u5176\u4ed6\u7ebf\u7a0b\u80fd\u770b\u5230<code>final</code>\u57df\u7684\u6b63\u786e\u521d\u59cb\u503c\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6/","title":"Java \u7c7b\u52a0\u8f7d\u673a\u5236","text":""},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6/#_1","title":"\u7c7b\u7684\u751f\u547d\u5468\u671f","text":"<p>\u4e00\u4e2a\u7c7b\u7684\u5b8c\u6574\u751f\u547d\u5468\u671f\u5305\u62ec\u4e03\u4e2a\u9636\u6bb5\uff1a\u52a0\u8f7d\u3001\u9a8c\u8bc1\u3001\u51c6\u5907\u3001\u89e3\u6790\u3001\u521d\u59cb\u5316\u3001\u4f7f\u7528\u548c\u5378\u8f7d\u3002\u5176\u4e2d\uff0c\u7c7b\u52a0\u8f7d\u8fc7\u7a0b\u6db5\u76d6\u4e86\u524d\u4e94\u4e2a\u9636\u6bb5\u3002</p> <ul> <li>\u52a0\u8f7d (Loading)</li> <li>\u8fde\u63a5 (Linking)<ul> <li>\u9a8c\u8bc1 (Verification)</li> <li>\u51c6\u5907 (Preparation)</li> <li>\u89e3\u6790 (Resolution)</li> </ul> </li> <li>\u521d\u59cb\u5316 (Initialization)</li> <li>\u4f7f\u7528 (Using)</li> <li>\u5378\u8f7d (Unloading)</li> </ul> <p>\u6ce8\u610f\uff1a\u8fd9\u4e9b\u9636\u6bb5\u901a\u5e38\u662f\u6309\u987a\u5e8f\u5f00\u59cb\uff0c\u4f46\u5e76\u975e\u6309\u987a\u5e8f\u5b8c\u6210\uff0c\u5b83\u4eec\u4f1a\u4ea4\u53c9\u6df7\u5408\u5730\u8fdb\u884c\u3002\u89e3\u6790\u9636\u6bb5\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u53ef\u80fd\u5728\u521d\u59cb\u5316\u4e4b\u540e\u624d\u5f00\u59cb\uff0c\u4ee5\u652f\u6301Java\u7684\u52a8\u6001\u7ed1\u5b9a\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6/#_2","title":"\u7c7b\u52a0\u8f7d\u8fc7\u7a0b","text":""},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6/#1-loading","title":"1. \u52a0\u8f7d (Loading)","text":"<p>\u8fd9\u662f\u7c7b\u52a0\u8f7d\u7684\u7b2c\u4e00\u4e2a\u9636\u6bb5\uff0c\u865a\u62df\u673a\u4e3b\u8981\u5b8c\u6210\u4e09\u4ef6\u4e8b\uff1a</p> <ol> <li>\u901a\u8fc7\u4e00\u4e2a\u7c7b\u7684\u5168\u9650\u5b9a\u540d\u83b7\u53d6\u5b9a\u4e49\u6b64\u7c7b\u7684\u4e8c\u8fdb\u5236\u5b57\u8282\u6d41\u3002</li> <li>\u5c06\u8fd9\u4e2a\u5b57\u8282\u6d41\u6240\u4ee3\u8868\u7684\u9759\u6001\u5b58\u50a8\u7ed3\u6784\u8f6c\u6362\u4e3a\u65b9\u6cd5\u533a\u7684\u8fd0\u884c\u65f6\u6570\u636e\u7ed3\u6784\u3002</li> <li>\u5728\u5185\u5b58\u4e2d\uff08\u5177\u4f53\u4e3aJava\u5806\uff09\u751f\u6210\u4e00\u4e2a\u4ee3\u8868\u8fd9\u4e2a\u7c7b\u7684 <code>java.lang.Class</code> \u5bf9\u8c61\uff0c\u4f5c\u4e3a\u65b9\u6cd5\u533a\u8fd9\u4e2a\u7c7b\u7684\u5404\u79cd\u6570\u636e\u7684\u8bbf\u95ee\u5165\u53e3\u3002</li> </ol> <p>\u52a0\u8f7d<code>.class</code>\u6587\u4ef6\u7684\u65b9\u5f0f\u975e\u5e38\u7075\u6d3b\uff0c\u53ef\u4ee5\u4ece\u672c\u5730\u6587\u4ef6\u3001\u7f51\u7edc\u3001jar\u5305\u3001\u6570\u636e\u5e93\u7b49\u6765\u6e90\u83b7\u53d6\uff0c\u751a\u81f3\u53ef\u4ee5\u52a8\u6001\u7f16\u8bd1\u751f\u6210\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6/#2-linking","title":"2. \u8fde\u63a5 (Linking)","text":""},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6/#verification","title":"\u9a8c\u8bc1 (Verification)","text":"<p>\u786e\u4fdd\u8bfb\u5165\u7684<code>.class</code>\u6587\u4ef6\u5b57\u8282\u6d41\u7b26\u5408JVM\u89c4\u8303\uff0c\u5e76\u4e14\u4e0d\u4f1a\u5371\u5bb3\u865a\u62df\u673a\u81ea\u8eab\u7684\u5b89\u5168\u3002\u8fd9\u4e2a\u9636\u6bb5\u5305\u62ec\u6587\u4ef6\u683c\u5f0f\u9a8c\u8bc1\u3001\u5143\u6570\u636e\u9a8c\u8bc1\u3001\u5b57\u8282\u7801\u9a8c\u8bc1\u548c\u7b26\u53f7\u5f15\u7528\u9a8c\u8bc1\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6/#preparation","title":"\u51c6\u5907 (Preparation)","text":"<p>\u6b63\u5f0f\u4e3a\u7c7b\u7684\u9759\u6001\u53d8\u91cf\uff08static variables\uff09\u5206\u914d\u5185\u5b58\uff0c\u5e76\u8bbe\u7f6e\u5176\u521d\u59cb\u503c\u3002</p> <ul> <li>\u5185\u5b58\u5206\u914d\uff1a\u4ec5\u4e3a\u7c7b\u53d8\u91cf\uff08<code>static</code>\u4fee\u9970\uff09\u5206\u914d\u5185\u5b58\uff0c\u4e0d\u5305\u62ec\u5b9e\u4f8b\u53d8\u91cf\u3002\u5185\u5b58\u5206\u914d\u5728\u65b9\u6cd5\u533a\u3002</li> <li>\u521d\u59cb\u503c\uff1a\u901a\u5e38\u662f\u6570\u636e\u7c7b\u578b\u7684\u201c\u96f6\u503c\u201d\uff0c\u800c\u4e0d\u662f\u4ee3\u7801\u4e2d\u663e\u5f0f\u8d4b\u4e88\u7684\u503c\u3002<ul> <li><code>int</code> \u7684\u96f6\u503c\u4e3a <code>0</code></li> <li><code>boolean</code> \u7684\u96f6\u503c\u4e3a <code>false</code></li> <li>\u5f15\u7528\u7c7b\u578b\u7684\u96f6\u503c\u4e3a <code>null</code></li> </ul> </li> <li>\u7279\u6b8a\u60c5\u51b5\uff1a\u5982\u679c\u4e00\u4e2a\u7c7b\u53d8\u91cf\u540c\u65f6\u88ab <code>static</code> \u548c <code>final</code> \u4fee\u9970\uff08\u5373\u5e38\u91cf\uff09\uff0c\u5e76\u4e14\u5176\u5728\u7f16\u8bd1\u65f6\u5c31\u80fd\u786e\u5b9a\u503c\uff0c\u90a3\u4e48\u5728\u51c6\u5907\u9636\u6bb5\uff0c\u8be5\u53d8\u91cf\u5c31\u4f1a\u88ab\u76f4\u63a5\u8d4b\u4e88\u4ee3\u7801\u4e2d\u6307\u5b9a\u7684\u503c\u3002<ul> <li>\u4f8b\u5982 <code>public static final int VALUE = 100;</code>\uff0c\u5728\u51c6\u5907\u9636\u6bb5 <code>VALUE</code> \u7684\u503c\u5c31\u662f <code>100</code>\uff0c\u800c\u4e0d\u662f <code>0</code>\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6/#resolution","title":"\u89e3\u6790 (Resolution)","text":"<p>\u5c06\u5e38\u91cf\u6c60\u5185\u7684\u7b26\u53f7\u5f15\u7528\u66ff\u6362\u4e3a\u76f4\u63a5\u5f15\u7528\u7684\u8fc7\u7a0b\u3002</p> <ul> <li>\u7b26\u53f7\u5f15\u7528\uff1a\u4ee5\u4e00\u7ec4\u7b26\u53f7\u6765\u63cf\u8ff0\u6240\u5f15\u7528\u7684\u76ee\u6807\uff0c\u4e0e\u865a\u62df\u673a\u5185\u5b58\u5e03\u5c40\u65e0\u5173\u3002</li> <li>\u76f4\u63a5\u5f15\u7528\uff1a\u53ef\u4ee5\u76f4\u63a5\u6307\u5411\u76ee\u6807\u7684\u6307\u9488\u3001\u76f8\u5bf9\u504f\u79fb\u91cf\u6216\u662f\u4e00\u4e2a\u80fd\u95f4\u63a5\u5b9a\u4f4d\u5230\u76ee\u6807\u7684\u53e5\u67c4\uff0c\u4e0e\u865a\u62df\u673a\u5185\u5b58\u5e03\u5c40\u76f8\u5173\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6/#3-initialization","title":"3. \u521d\u59cb\u5316 (Initialization)","text":"<p>\u8fd9\u662f\u7c7b\u52a0\u8f7d\u8fc7\u7a0b\u7684\u6700\u540e\u4e00\u6b65\u3002\u6b64\u9636\u6bb5\u6839\u636e\u7a0b\u5e8f\u5458\u901a\u8fc7\u7a0b\u5e8f\u5236\u5b9a\u7684\u4e3b\u89c2\u8ba1\u5212\u53bb\u521d\u59cb\u5316\u7c7b\u53d8\u91cf\u548c\u5176\u4ed6\u8d44\u6e90\uff0c\u4e3b\u8981\u662f\u6267\u884c\u7c7b\u6784\u9020\u5668 <code>&lt;clinit&gt;()</code> \u65b9\u6cd5\u7684\u8fc7\u7a0b\u3002</p> <ul> <li><code>&lt;clinit&gt;()</code> \u65b9\u6cd5\u662f\u7531\u7f16\u8bd1\u5668\u81ea\u52a8\u6536\u96c6\u7c7b\u4e2d\u6240\u6709\u7c7b\u53d8\u91cf\u7684\u8d4b\u503c\u52a8\u4f5c\u548c\u9759\u6001\u8bed\u53e5\u5757\uff08<code>static{}</code>\u5757\uff09\u4e2d\u7684\u8bed\u53e5\u5408\u5e76\u4ea7\u751f\u7684\u3002</li> <li>\u865a\u62df\u673a\u4f1a\u4fdd\u8bc1\u5728\u5b50\u7c7b\u7684 <code>&lt;clinit&gt;()</code> \u65b9\u6cd5\u6267\u884c\u524d\uff0c\u5176\u7236\u7c7b\u7684 <code>&lt;clinit&gt;()</code> \u65b9\u6cd5\u5df2\u7ecf\u6267\u884c\u5b8c\u6bd5\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6/#_3","title":"\u89e6\u53d1\u521d\u59cb\u5316\u7684\u65f6\u673a\uff08\u4e3b\u52a8\u4f7f\u7528\uff09","text":"<p>JVM\u89c4\u8303\u4e25\u683c\u89c4\u5b9a\u4e86\u6709\u4e14\u53ea\u6709\u516d\u79cd\u60c5\u51b5\u5fc5\u987b\u7acb\u5373\u5bf9\u7c7b\u8fdb\u884c\u521d\u59cb\u5316\uff1a 1.  \u521b\u5efa\u7c7b\u7684\u5b9e\u4f8b\u65f6\uff08\u5982 <code>new</code> \u5173\u952e\u5b57\uff09\u3002 2.  \u8bbf\u95ee\u67d0\u4e2a\u7c7b\u6216\u63a5\u53e3\u7684\u9759\u6001\u53d8\u91cf\uff0c\u6216\u8005\u5bf9\u8be5\u9759\u6001\u53d8\u91cf\u8d4b\u503c\u65f6\u3002 3.  \u8c03\u7528\u7c7b\u7684\u9759\u6001\u65b9\u6cd5\u65f6\u3002 4.  \u4f7f\u7528 <code>java.lang.reflect</code> \u5305\u7684\u65b9\u6cd5\u5bf9\u7c7b\u8fdb\u884c\u53cd\u5c04\u8c03\u7528\u65f6\uff08\u5982 <code>Class.forName(\"com.example.MyClass\")</code>\uff09\u3002 5.  \u5f53\u521d\u59cb\u5316\u4e00\u4e2a\u7c7b\u7684\u65f6\u5019\uff0c\u5982\u679c\u53d1\u73b0\u5176\u7236\u7c7b\u8fd8\u6ca1\u6709\u8fdb\u884c\u8fc7\u521d\u59cb\u5316\uff0c\u5219\u9700\u8981\u5148\u89e6\u53d1\u5176\u7236\u7c7b\u7684\u521d\u59cb\u5316\u3002 6.  \u5f53\u865a\u62df\u673a\u542f\u52a8\u65f6\uff0c\u7528\u6237\u9700\u8981\u6307\u5b9a\u4e00\u4e2a\u8981\u6267\u884c\u7684\u4e3b\u7c7b\uff08\u5305\u542b <code>main()</code> \u65b9\u6cd5\u7684\u90a3\u4e2a\u7c7b\uff09\uff0c\u865a\u62df\u673a\u4f1a\u5148\u521d\u59cb\u5316\u8fd9\u4e2a\u4e3b\u7c7b\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6/#classloaders","title":"\u7c7b\u52a0\u8f7d\u5668 (ClassLoaders)","text":""},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6/#_4","title":"\u7c7b\u52a0\u8f7d\u5668\u7684\u79cd\u7c7b\u4e0e\u5c42\u6b21","text":"<p>Java\u4e2d\u7684\u7c7b\u52a0\u8f7d\u5668\u4e3b\u8981\u5206\u4e3a\u4e09\u7c7b\uff1a</p> <ol> <li> <p>\u542f\u52a8\u7c7b\u52a0\u8f7d\u5668 (Bootstrap ClassLoader)</p> <ul> <li>\u7531C++\u5b9e\u73b0\uff0c\u662f\u865a\u62df\u673a\u81ea\u8eab\u7684\u4e00\u90e8\u5206\u3002</li> <li>\u8d1f\u8d23\u52a0\u8f7d <code>&lt;JAVA_HOME&gt;\\jre\\lib</code> \u76ee\u5f55\u4e0b\u7684\uff0c\u6216\u8005\u88ab <code>-Xbootclasspath</code> \u53c2\u6570\u6240\u6307\u5b9a\u7684\u8def\u5f84\u4e2d\u5b58\u653e\u7684\u3001\u80fd\u88ab\u865a\u62df\u673a\u8bc6\u522b\u7684\u7c7b\u5e93\uff08\u5982 rt.jar\uff09\u3002</li> <li>\u5b83\u6ca1\u6709\u7236\u52a0\u8f7d\u5668\uff0c\u5728Java\u4ee3\u7801\u4e2d\u5c1d\u8bd5\u83b7\u53d6\u5176\u7236\u52a0\u8f7d\u5668\u4f1a\u8fd4\u56de <code>null</code>\u3002</li> </ul> </li> <li> <p>\u6269\u5c55\u7c7b\u52a0\u8f7d\u5668 (Extension ClassLoader)</p> <ul> <li>\u7531Java\u8bed\u8a00\u5b9e\u73b0\u3002</li> <li>\u8d1f\u8d23\u52a0\u8f7d <code>&lt;JAVA_HOME&gt;\\jre\\lib\\ext</code> \u76ee\u5f55\u4e0b\u7684\uff0c\u6216\u8005\u88ab <code>java.ext.dirs</code> \u7cfb\u7edf\u53d8\u91cf\u6240\u6307\u5b9a\u7684\u8def\u5f84\u4e2d\u6240\u6709\u7684\u7c7b\u5e93\u3002</li> <li>\u5f00\u53d1\u8005\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u6269\u5c55\u7c7b\u52a0\u8f7d\u5668\u3002</li> </ul> </li> <li> <p>\u5e94\u7528\u7a0b\u5e8f\u7c7b\u52a0\u8f7d\u5668 (Application ClassLoader)</p> <ul> <li>\u4e5f\u79f0\u7cfb\u7edf\u7c7b\u52a0\u8f7d\u5668\uff0c\u7531Java\u8bed\u8a00\u5b9e\u73b0\u3002</li> <li>\u8d1f\u8d23\u52a0\u8f7d\u7528\u6237\u7c7b\u8def\u5f84\uff08Classpath\uff09\u4e0a\u6240\u6307\u5b9a\u7684\u7c7b\u5e93\u3002</li> <li>\u662f\u7a0b\u5e8f\u4e2d\u9ed8\u8ba4\u7684\u7c7b\u52a0\u8f7d\u5668\u3002</li> </ul> </li> </ol> <p>\u8fd9\u4e09\u8005\u4e4b\u95f4\u5e76\u975e\u7ee7\u627f\u5173\u7cfb\uff0c\u800c\u662f\u901a\u8fc7\u7ec4\u5408\u5173\u7cfb\u6765\u5b9e\u73b0\u201c\u7236\u5b50\u201d\u5c42\u7ea7\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6/#parent-delegation-model","title":"\u53cc\u4eb2\u59d4\u6d3e\u6a21\u578b (Parent-Delegation Model)","text":"<p>\u8fd9\u662fJava\u9ed8\u8ba4\u7684\u7c7b\u52a0\u8f7d\u673a\u5236\uff0c\u5176\u5de5\u4f5c\u8fc7\u7a0b\u662f\uff1a</p> <ol> <li>\u5f53\u4e00\u4e2a\u7c7b\u52a0\u8f7d\u5668\u6536\u5230\u7c7b\u52a0\u8f7d\u8bf7\u6c42\u65f6\uff0c\u5b83\u9996\u5148\u4e0d\u4f1a\u81ea\u5df1\u53bb\u5c1d\u8bd5\u52a0\u8f7d\u8fd9\u4e2a\u7c7b\u3002</li> <li>\u5b83\u4f1a\u628a\u8fd9\u4e2a\u8bf7\u6c42\u59d4\u6258\u7ed9\u7236\u7c7b\u52a0\u8f7d\u5668\u53bb\u5b8c\u6210\u3002</li> <li>\u6bcf\u4e00\u5c42\u7684\u7c7b\u52a0\u8f7d\u5668\u90fd\u662f\u5982\u6b64\uff0c\u56e0\u6b64\u6240\u6709\u7684\u52a0\u8f7d\u8bf7\u6c42\u6700\u7ec8\u90fd\u5e94\u8be5\u4f20\u9001\u5230\u9876\u5c42\u7684\u542f\u52a8\u7c7b\u52a0\u8f7d\u5668\u4e2d\u3002</li> <li>\u53ea\u6709\u5f53\u7236\u52a0\u8f7d\u5668\u53cd\u9988\u81ea\u5df1\u65e0\u6cd5\u5b8c\u6210\u8fd9\u4e2a\u52a0\u8f7d\u8bf7\u6c42\uff08\u5b83\u7684\u641c\u7d22\u8303\u56f4\u4e2d\u6ca1\u6709\u627e\u5230\u6240\u9700\u7684\u7c7b\uff09\u65f6\uff0c\u5b50\u52a0\u8f7d\u5668\u624d\u4f1a\u5c1d\u8bd5\u81ea\u5df1\u53bb\u52a0\u8f7d\u3002</li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6/#_5","title":"\u53cc\u4eb2\u59d4\u6d3e\u6a21\u578b\u7684\u4f18\u52bf","text":"<ul> <li>\u907f\u514d\u7c7b\u7684\u91cd\u590d\u52a0\u8f7d\uff1a\u4fdd\u8bc1\u4e00\u4e2a\u7c7b\u5728\u5404\u79cd\u7c7b\u52a0\u8f7d\u5668\u73af\u5883\u4e2d\u90fd\u662f\u540c\u4e00\u4e2a <code>Class</code> \u5bf9\u8c61\u3002</li> <li>\u4fdd\u8bc1\u6838\u5fc3\u7c7b\u5e93\u7684\u5b89\u5168\uff1a\u9632\u6b62\u7528\u6237\u81ea\u5df1\u7f16\u5199\u7684\u7c7b\u8986\u76d6Java\u6838\u5fc3\u7c7b\u5e93\u4e2d\u7684\u7c7b\uff08\u4f8b\u5982\uff0c\u9632\u6b62\u7528\u6237\u81ea\u5b9a\u4e49\u4e00\u4e2a <code>java.lang.String</code> \u7c7b\u6765\u66ff\u4ee3\u7cfb\u7edf\u4e2d\u7684 <code>String</code>\uff09\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6/#classforname-vs-classloaderloadclass","title":"<code>Class.forName()</code> vs <code>ClassLoader.loadClass()</code>","text":"<ul> <li><code>ClassLoader.loadClass(name)</code>: \u53ea\u5c06 <code>.class</code> \u6587\u4ef6\u52a0\u8f7d\u5230JVM\u4e2d\uff0c\u5b8c\u6210\u52a0\u8f7d\u3001\u9a8c\u8bc1\u3001\u51c6\u5907\u3001\u89e3\u6790\uff0c\u4f46\u4e0d\u4f1a\u6267\u884c\u521d\u59cb\u5316\u9636\u6bb5\u3002</li> <li><code>Class.forName(name)</code>: \u4e0d\u4ec5\u5b8c\u6210\u7c7b\u7684\u52a0\u8f7d\uff0c\u9ed8\u8ba4\u8fd8\u4f1a\u5bf9\u7c7b\u8fdb\u884c\u521d\u59cb\u5316\uff0c\u5373\u6267\u884c\u7c7b\u4e2d\u7684\u9759\u6001\u4ee3\u7801\u5757\u548c\u9759\u6001\u53d8\u91cf\u7684\u8d4b\u503c\u3002<code>Class.forName(name, initialize, loader)</code> \u65b9\u6cd5\u53ef\u4ee5\u901a\u8fc7<code>initialize</code>\u53c2\u6570\u63a7\u5236\u662f\u5426\u6267\u884c\u521d\u59cb\u5316\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6/#_6","title":"\u81ea\u5b9a\u4e49\u7c7b\u52a0\u8f7d\u5668","text":"<p>\u5728\u67d0\u4e9b\u573a\u666f\u4e0b\uff0c\u9700\u8981\u81ea\u5b9a\u4e49\u7c7b\u52a0\u8f7d\u5668\uff0c\u4f8b\u5982\uff1a</p> <ul> <li>\u9700\u8981\u4ece\u7f51\u7edc\u3001\u6570\u636e\u5e93\u7b49\u975e\u6807\u51c6\u6765\u6e90\u52a0\u8f7d\u52a0\u5bc6\u7684\u5b57\u8282\u7801\u3002</li> <li>\u5b9e\u73b0\u4ee3\u7801\u7684\u70ed\u90e8\u7f72\u3002</li> <li>\u9694\u79bb\u4e0d\u540c\u5e94\u7528\u7684\u7c7b\uff0c\u907f\u514d\u4f9d\u8d56\u51b2\u7a81\u3002</li> </ul> <p>\u5b9e\u73b0\u81ea\u5b9a\u4e49\u7c7b\u52a0\u8f7d\u5668\u901a\u5e38\u9700\u8981\u7ee7\u627f <code>java.lang.ClassLoader</code> \u7c7b\uff0c\u5e76\u91cd\u5199\u5176 <code>findClass(String name)</code> \u65b9\u6cd5\u3002\u5728 <code>findClass</code> \u65b9\u6cd5\u4e2d\u83b7\u53d6\u7c7b\u7684\u5b57\u8282\u7801\u6570\u636e\uff08\u5982\u89e3\u5bc6\u3001\u4ece\u7f51\u7edc\u4e0b\u8f7d\u7b49\uff09\uff0c\u7136\u540e\u8c03\u7528 <code>defineClass</code> \u65b9\u6cd5\u5c06\u5b57\u8282\u7801\u8f6c\u6362\u4e3a <code>Class</code> \u5bf9\u8c61\u3002\u4e3a\u4e86\u4e0d\u7834\u574f\u53cc\u4eb2\u59d4\u6d3e\u6a21\u578b\uff0c\u63a8\u8350\u7684\u505a\u6cd5\u662f\u53ea\u91cd\u5199 <code>findClass</code>\uff0c\u800c\u4e0d\u662f\u91cd\u5199 <code>loadClass</code>\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E7%B1%BB%E5%AD%97%E8%8A%82%E7%A0%81/","title":"Java \u7c7b\u5b57\u8282\u7801","text":""},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E7%B1%BB%E5%AD%97%E8%8A%82%E7%A0%81/#_1","title":"\u5b57\u8282\u7801","text":"<p>\u8ba1\u7b97\u673a CPU \u65e0\u6cd5\u76f4\u63a5\u8bc6\u522b\u5e76\u8fd0\u884c Java \u8fd9\u6837\u7684\u9ad8\u7ea7\u8bed\u8a00\u4ee3\u7801\u3002Java \u4ee3\u7801\u9996\u5148\u901a\u8fc7\u7f16\u8bd1\u5668\uff08<code>javac</code>\uff09\u88ab\u7f16\u8bd1\u6210\u4e00\u79cd\u4e2d\u95f4\u5f62\u6001\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u5373 Java \u5b57\u8282\u7801\uff08<code>.class</code> \u6587\u4ef6\uff09\u3002</p> <p>Java \u865a\u62df\u673a\uff08JVM\uff09\u8d1f\u8d23\u52a0\u8f7d\u5e76\u6267\u884c\u8fd9\u4e9b\u5b57\u8282\u7801\u6587\u4ef6\u3002\u7531\u4e8e\u4e0d\u540c\u64cd\u4f5c\u7cfb\u7edf\u5e73\u53f0\u90fd\u6709\u5176\u5bf9\u5e94\u7684 JVM \u5b9e\u73b0\uff0c\u56e0\u6b64\u5b57\u8282\u7801\u53ef\u4ee5\u65e0\u9700\u4fee\u6539\u5c31\u5728\u4efb\u4f55\u5b89\u88c5\u4e86 JVM \u7684\u8bbe\u5907\u4e0a\u8fd0\u884c\uff0c\u8fd9\u6b63\u662f Java \u201c\u4e00\u6b21\u7f16\u8bd1\uff0c\u5230\u5904\u8fd0\u884c\u201d\uff08Write Once, Run Anywhere\uff09\u7406\u5ff5\u7684\u6838\u5fc3\u3002</p> <p>JVM \u7684\u8bbe\u8ba1\u4e5f\u4e0d\u4ec5\u4ec5\u5c40\u9650\u4e8e Java \u8bed\u8a00\uff0c\u4efb\u4f55\u80fd\u591f\u88ab\u7f16\u8bd1\u6210\u7b26\u5408 JVM \u89c4\u8303\u7684\u5b57\u8282\u7801\u7684\u8bed\u8a00\uff0c\u90fd\u53ef\u4ee5\u5728 JVM \u4e0a\u8fd0\u884c\uff0c\u4f8b\u5982 Kotlin\u3001Scala\u3001Groovy \u7b49\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E7%B1%BB%E5%AD%97%E8%8A%82%E7%A0%81/#class","title":"Class \u6587\u4ef6\u7ed3\u6784","text":"<p>Class \u6587\u4ef6\u662f\u4e00\u4e2a\u4ee5 8 \u4f4d\u5b57\u8282\u4e3a\u57fa\u7840\u5355\u4f4d\u7684\u4e8c\u8fdb\u5236\u6d41\uff0c\u5185\u90e8\u6570\u636e\u9879\u76ee\u4e25\u683c\u6309\u7167\u9884\u8bbe\u987a\u5e8f\u6392\u5217\u3002JVM \u6309\u7167\u8fd9\u4e2a\u89c4\u8303\u6765\u89e3\u6790\u6587\u4ef6\u5185\u5bb9\u3002\u5176\u6838\u5fc3\u7ed3\u6784\u5305\u62ec\uff1a</p> <ul> <li><code>\u9b54\u6570 (Magic Number)</code>: \u6bcf\u4e2a Class \u6587\u4ef6\u7684\u5934 4 \u4e2a\u5b57\u8282\uff0c\u56fa\u5b9a\u4e3a <code>0xCAFEBABE</code>\uff0c\u662f JVM \u8bc6\u522b Class \u6587\u4ef6\u7684\u8eab\u4efd\u51ed\u8bc1\u3002</li> <li><code>\u7248\u672c\u53f7 (Version)</code>: \u7d27\u968f\u9b54\u6570\u4e4b\u540e\uff0c\u5305\u542b\u6b21\u7248\u672c\u53f7\u548c\u4e3b\u7248\u672c\u53f7\uff0c\u7528\u4e8e\u6807\u8bc6\u7f16\u8bd1\u8be5\u6587\u4ef6\u7684 JDK \u7248\u672c\u3002</li> <li><code>\u5e38\u91cf\u6c60 (Constant Pool)</code>: Class \u6587\u4ef6\u4e2d\u7684\u8d44\u6e90\u4ed3\u5e93\uff0c\u5b58\u653e\u4e24\u5927\u7c7b\u5e38\u91cf\uff1a\u5b57\u9762\u91cf\uff08\u5982\u6587\u672c\u5b57\u7b26\u4e32\u3001final \u5e38\u91cf\u503c\uff09\u548c\u7b26\u53f7\u5f15\u7528\uff08\u5982\u7c7b\u548c\u63a5\u53e3\u7684\u5168\u9650\u5b9a\u540d\u3001\u5b57\u6bb5\u7684\u540d\u79f0\u548c\u63cf\u8ff0\u7b26\u3001\u65b9\u6cd5\u7684\u540d\u79f0\u548c\u63cf\u8ff0\u7b26\uff09\u3002</li> <li><code>\u8bbf\u95ee\u6807\u5fd7 (Access Flags)</code>: \u7528\u4e8e\u8bc6\u522b\u7c7b\u6216\u63a5\u53e3\u7684\u8bbf\u95ee\u6743\u9650\u548c\u5c5e\u6027\uff0c\u5982 <code>ACC_PUBLIC</code>\u3001<code>ACC_FINAL</code> \u7b49\u3002</li> <li><code>\u7c7b\u7d22\u5f15\u3001\u7236\u7c7b\u7d22\u5f15\u3001\u63a5\u53e3\u7d22\u5f15\u96c6\u5408</code>: \u5206\u522b\u6307\u5411\u5e38\u91cf\u6c60\u4e2d\u7684\u7b26\u53f7\u5f15\u7528\uff0c\u7528\u4e8e\u786e\u5b9a\u5f53\u524d\u7c7b\u7684\u7ee7\u627f\u5173\u7cfb\u3002</li> <li><code>\u5b57\u6bb5\u8868\u96c6\u5408 (Fields)</code>: \u63cf\u8ff0\u7c7b\u4e2d\u58f0\u660e\u7684\u6240\u6709\u5b57\u6bb5\uff08\u6210\u5458\u53d8\u91cf\uff09\uff0c\u5305\u62ec\u5176\u4f5c\u7528\u57df\u3001\u7c7b\u578b\u3001\u540d\u79f0\u7b49\u3002</li> <li><code>\u65b9\u6cd5\u8868\u96c6\u5408 (Methods)</code>: \u63cf\u8ff0\u7c7b\u4e2d\u58f0\u660e\u7684\u6240\u6709\u65b9\u6cd5\uff0c\u5305\u542b\u65b9\u6cd5\u7684\u8bbf\u95ee\u6807\u5fd7\u3001\u540d\u79f0\u3001\u53c2\u6570\u5217\u8868\u3001\u8fd4\u56de\u503c\u4ee5\u53ca\u65b9\u6cd5\u4f53\u5185\u7684\u5b57\u8282\u7801\u6307\u4ee4\u3002</li> <li><code>\u5c5e\u6027\u8868\u96c6\u5408 (Attributes)</code>: \u7528\u4e8e\u63cf\u8ff0\u4e00\u4e9b\u989d\u5916\u4fe1\u606f\uff0c\u4f8b\u5982 <code>Code</code> \u5c5e\u6027\uff08\u5b58\u653e\u65b9\u6cd5\u4f53\u5b57\u8282\u7801\uff09\u3001<code>LineNumberTable</code>\uff08\u6e90\u7801\u884c\u53f7\u4e0e\u5b57\u8282\u7801\u6307\u4ee4\u7684\u5bf9\u5e94\u5173\u7cfb\uff09\u7b49\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E7%B1%BB%E5%AD%97%E8%8A%82%E7%A0%81/#_2","title":"\u5b57\u8282\u7801\u5206\u6790","text":"<p>\u6211\u4eec\u901a\u8fc7 <code>javac</code> \u7f16\u8bd1 Java \u6e90\u6587\u4ef6\uff0c\u7136\u540e\u4f7f\u7528 <code>javap</code> \u5de5\u5177\u6765\u53cd\u7f16\u8bd1 class \u6587\u4ef6\uff0c\u67e5\u770b\u5176\u5b57\u8282\u7801\u5185\u5bb9\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E7%B1%BB%E5%AD%97%E8%8A%82%E7%A0%81/#javap","title":"\u4f7f\u7528 javap \u53cd\u7f16\u8bd1","text":"<p><code>javap</code> \u662f JDK \u81ea\u5e26\u7684\u53cd\u7f16\u8bd1\u5de5\u5177\u3002\u4f7f\u7528 <code>-verbose</code> \u53c2\u6570\u53ef\u4ee5\u8f93\u51fa\u8be6\u7ec6\u7684\u5b57\u8282\u7801\u4fe1\u606f\uff0c\u5305\u62ec\u5e38\u91cf\u6c60\u3001\u65b9\u6cd5\u8868\u7b49\u3002</p> <pre><code># \u7f16\u8bd1\njavac Main.java\n\n# \u53cd\u7f16\u8bd1\u67e5\u770b\u8be6\u7ec6\u4fe1\u606f\njavap -verbose Main.class\n</code></pre>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E7%B1%BB%E5%AD%97%E8%8A%82%E7%A0%81/#_3","title":"\u89e3\u8bfb\u53cd\u7f16\u8bd1\u4fe1\u606f","text":""},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E7%B1%BB%E5%AD%97%E8%8A%82%E7%A0%81/#_4","title":"\u6587\u4ef6\u57fa\u672c\u4fe1\u606f\u4e0e\u8bbf\u95ee\u6807\u5fd7","text":"<p>\u53cd\u7f16\u8bd1\u8f93\u51fa\u7684\u5f00\u5934\u90e8\u5206\u4f1a\u663e\u793a\u6587\u4ef6\u7684\u57fa\u672c\u4fe1\u606f\uff08\u5982\u7f16\u8bd1\u6765\u6e90\u3001MD5\u3001\u4e3b\u6b21\u7248\u672c\u53f7\uff09\uff0c\u4ee5\u53ca\u7c7b\u7684\u8bbf\u95ee\u6807\u5fd7\uff08flags\uff09\u3002\u5e38\u89c1\u7684\u6807\u5fd7\u6709\uff1a</p> <ul> <li><code>ACC_PUBLIC</code>: \u6807\u8bc6\u4e3a public \u7c7b\u578b\u3002</li> <li><code>ACC_FINAL</code>: \u6807\u8bc6\u4e3a final \u7c7b\u3002</li> <li><code>ACC_SUPER</code>: \u4e00\u4e2a\u5386\u53f2\u517c\u5bb9\u6027\u6807\u5fd7\uff0c\u6307\u793a JVM \u5728\u5904\u7406 <code>invokespecial</code> \u6307\u4ee4\u65f6\u91c7\u7528\u65b0\u7684\u8bed\u4e49\u3002\u73b0\u5728\u6240\u6709 Class \u6587\u4ef6\u90fd\u5e94\u8bbe\u7f6e\u6b64\u6807\u5fd7\u3002</li> <li><code>ACC_INTERFACE</code>: \u6807\u8bc6\u4e3a\u63a5\u53e3\u3002</li> <li><code>ACC_ABSTRACT</code>: \u6807\u8bc6\u4e3a\u62bd\u8c61\u7c7b\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E7%B1%BB%E5%AD%97%E8%8A%82%E7%A0%81/#constant-pool","title":"\u5e38\u91cf\u6c60 (Constant Pool)","text":"<p>\u5e38\u91cf\u6c60\u662f\u7406\u89e3\u5b57\u8282\u7801\u7684\u5173\u952e\u3002\u5b83\u50cf\u4e00\u4e2a\u7d22\u5f15\u8868\uff0cClass \u6587\u4ef6\u4e2d\u7684\u5b57\u6bb5\u3001\u65b9\u6cd5\u7b49\u90fd\u9700\u8981\u5f15\u7528\u5e38\u91cf\u6c60\u4e2d\u7684\u7b26\u53f7\u6765\u63cf\u8ff0\u3002\u4f8b\u5982\uff0c\u4e00\u4e2a\u65b9\u6cd5\u8c03\u7528\u4f1a\u901a\u8fc7\u5f15\u7528\u6307\u5411\u5e38\u91cf\u6c60\u4e2d\u7684\u65b9\u6cd5\u7b26\u53f7\uff0c\u8be5\u7b26\u53f7\u53c8\u4f1a\u6307\u5411\u5305\u542b\u7c7b\u540d\u3001\u65b9\u6cd5\u540d\u548c\u63cf\u8ff0\u7b26\u7684 <code>Utf8</code> \u5b57\u7b26\u4e32\u3002</p> <p>\u5b57\u8282\u7801\u4e2d\u7684\u6570\u636e\u7c7b\u578b\u6709\u7279\u5b9a\u7684\u6807\u8bc6\u7b26\uff1a</p> \u6807\u8bc6\u5b57\u7b26 \u542b\u4e49 B <code>byte</code> C <code>char</code> D <code>double</code> F <code>float</code> I <code>int</code> J <code>long</code> S <code>short</code> Z <code>boolean</code> V <code>void</code> L \u5bf9\u8c61\u7c7b\u578b\uff0c\u5982 <code>Ljava/lang/Object;</code> [ \u6570\u7ec4\u7c7b\u578b\uff0c\u5982 <code>[[I</code> \u8868\u793a <code>int[][]</code>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E7%B1%BB%E5%AD%97%E8%8A%82%E7%A0%81/#method-collection","title":"\u65b9\u6cd5\u8868\u96c6\u5408 (Method Collection)","text":"<p>\u65b9\u6cd5\u8868\u8be6\u7ec6\u63cf\u8ff0\u4e86\u6bcf\u4e2a\u65b9\u6cd5\u7684\u5b9a\u4e49\u3002\u5176\u4e2d\u6700\u91cd\u8981\u7684\u90e8\u5206\u662f <code>Code</code> \u5c5e\u6027\uff0c\u5b83\u5305\u542b\u4e86\u65b9\u6cd5\u7684\u5b9e\u9645\u6267\u884c\u903b\u8f91\u3002</p> <ul> <li><code>stack</code>: \u64cd\u4f5c\u6570\u6808\u7684\u6700\u5927\u6df1\u5ea6\u3002JVM \u5728\u6267\u884c\u65b9\u6cd5\u65f6\u4f1a\u636e\u6b64\u5206\u914d\u6808\u7a7a\u95f4\u3002</li> <li><code>locals</code>: \u5c40\u90e8\u53d8\u91cf\u8868\u6240\u9700\u7684\u6700\u5927\u5b58\u50a8\u7a7a\u95f4\uff0c\u5355\u4f4d\u4e3a Slot\u3002</li> <li><code>args_size</code>: \u65b9\u6cd5\u53c2\u6570\u7684\u6570\u91cf\uff08\u5bf9\u4e8e\u5b9e\u4f8b\u65b9\u6cd5\uff0c\u6b64\u503c\u81f3\u5c11\u4e3a 1\uff0c\u56e0\u4e3a\u5305\u542b <code>this</code>\uff09\u3002</li> <li><code>\u5b57\u8282\u7801\u6307\u4ee4</code>: \u65b9\u6cd5\u4f53\u7531\u4e00\u7cfb\u5217\u7684\u5b57\u8282\u7801\u6307\u4ee4\u6784\u6210\uff0c\u4f8b\u5982 <code>aload_0</code> (\u5c06\u7b2c\u4e00\u4e2a\u672c\u5730\u53d8\u91cf this \u63a8\u9001\u5230\u64cd\u4f5c\u6570\u6808\u9876)\u3001<code>invokespecial</code> (\u8c03\u7528\u5b9e\u4f8b\u6784\u9020\u65b9\u6cd5\u3001\u79c1\u6709\u65b9\u6cd5\u7b49)\u3001<code>getfield</code> (\u83b7\u53d6\u5b57\u6bb5\u503c)\u3001<code>ireturn</code> (\u8fd4\u56de int \u7c7b\u578b\u7684\u503c)\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E7%B1%BB%E5%AD%97%E8%8A%82%E7%A0%81/#attribute-tables","title":"\u5c5e\u6027\u8868 (Attribute Tables)","text":"<ul> <li><code>LineNumberTable</code>: \u8bb0\u5f55\u4e86\u6e90\u7801\u884c\u53f7\u4e0e\u5b57\u8282\u7801\u6307\u4ee4\u504f\u79fb\u91cf\u7684\u5bf9\u5e94\u5173\u7cfb\u3002\u5982\u679c\u6ca1\u6709\u5b83\uff0c\u7a0b\u5e8f\u629b\u51fa\u5f02\u5e38\u65f6\u5c06\u65e0\u6cd5\u663e\u793a\u51fa\u9519\u7684\u884c\u53f7\u3002</li> <li><code>LocalVariableTable</code>: \u8bb0\u5f55\u4e86\u65b9\u6cd5\u4e2d\u5c40\u90e8\u53d8\u91cf\u7684\u540d\u79f0\u3001\u7c7b\u578b\u4ee5\u53ca\u5728\u5b57\u8282\u7801\u4e2d\u7684\u4f5c\u7528\u8303\u56f4\u3002\u5982\u679c\u6ca1\u6709\u5b83\uff0c\u8c03\u8bd5\u6216\u7b2c\u4e09\u65b9\u5de5\u5177\u5c06\u65e0\u6cd5\u83b7\u53d6\u65b9\u6cd5\u7684\u53c2\u6570\u540d\uff0c\u53ea\u80fd\u770b\u5230 <code>arg0</code>, <code>arg1</code> \u7b49\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E7%B1%BB%E5%AD%97%E8%8A%82%E7%A0%81/#_5","title":"\u9ad8\u7ea7\u6848\u4f8b\u5206\u6790","text":""},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E7%B1%BB%E5%AD%97%E8%8A%82%E7%A0%81/#try-catch-finally","title":"try-catch-finally \u7684\u5b9e\u73b0\u539f\u7406","text":"<p>\u901a\u8fc7\u5206\u6790\u4e00\u4e2a\u5305\u542b <code>try-catch-finally</code> \u7ed3\u6784\u7684\u65b9\u6cd5\u7684\u5b57\u8282\u7801\uff0c\u53ef\u4ee5\u53d1\u73b0\u5176\u5b9e\u73b0\u539f\u7406\uff1a</p> <ol> <li>finally \u4ee3\u7801\u590d\u5236\uff1a\u7f16\u8bd1\u5668\u4f1a\u5c06 <code>finally</code> \u8bed\u53e5\u5757\u4e2d\u7684\u5b57\u8282\u7801\u6307\u4ee4\uff0c\u590d\u5236\u5e76\u63d2\u5165\u5230 <code>try</code> \u5757\u6b63\u5e38\u7ed3\u675f\uff08return \u4e4b\u524d\uff09\u548c\u6240\u6709 <code>catch</code> \u5757\u7ed3\u675f\uff08return \u6216 re-throw \u4e4b\u524d\uff09\u7684\u4f4d\u7f6e\u3002\u8fd9\u786e\u4fdd\u4e86\u65e0\u8bba\u4ee3\u7801\u4ece\u54ea\u4e2a\u8def\u5f84\u9000\u51fa\uff0c<code>finally</code> \u5757\u7684\u903b\u8f91\u90fd\u4f1a\u88ab\u6267\u884c\u3002</li> <li>\u5f02\u5e38\u8868 (Exception table)\uff1a\u65b9\u6cd5\u8868\u4e2d\u4f1a\u6709\u4e00\u4e2a\u5f02\u5e38\u8868\uff0c\u5b83\u5b9a\u4e49\u4e86\u5b57\u8282\u7801\u7684\u76d1\u63a7\u8303\u56f4\u3002\u5982\u679c\u5728\u8fd9\u4e2a\u8303\u56f4\u5185\u7684\u6307\u4ee4\u6267\u884c\u65f6\u51fa\u73b0\u6307\u5b9a\u7c7b\u578b\u7684\u5f02\u5e38\uff0c\u63a7\u5236\u6d41\u5c31\u4f1a\u8df3\u8f6c\u5230\u6307\u5b9a\u7684\u5904\u7406\u4f4d\u7f6e\uff08\u5373 <code>catch</code> \u5757\u7684\u8d77\u59cb\u6307\u4ee4\uff09\u3002</li> </ol> <p>\u8fd9\u4e2a\u673a\u5236\u89e3\u91ca\u4e86\u4e3a\u4ec0\u4e48\u5728 <code>try</code> \u548c <code>catch</code> \u4e2d\u90fd\u6709 <code>return</code> \u8bed\u53e5\u65f6\uff0c<code>finally</code> \u91cc\u7684\u4ee3\u7801\u4ecd\u7136\u4f1a\u6267\u884c\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%20%E7%B1%BB%E5%AD%97%E8%8A%82%E7%A0%81/#kotlin","title":"Kotlin \u6269\u5c55\u51fd\u6570\u7684\u5b9e\u73b0\u539f\u7406","text":"<p>Kotlin \u8bed\u8a00\u7684\u6269\u5c55\u51fd\u6570\u7279\u6027\u5141\u8bb8\u6211\u4eec\u4e3a\u5df2\u6709\u7684\u7c7b\u6dfb\u52a0\u65b0\u65b9\u6cd5\u3002\u901a\u8fc7\u5206\u6790\u5176\u5b57\u8282\u7801\uff0c\u53ef\u4ee5\u63ed\u793a\u5176\u5b9e\u73b0\u65b9\u5f0f\uff1a</p> <ul> <li>\u5047\u8bbe\u6211\u4eec\u4e3a <code>Any</code> \u7c7b\u5b9a\u4e49\u4e86\u4e00\u4e2a\u6269\u5c55\u51fd\u6570 <code>fun Any.sayHello() {}</code>\uff0c\u8fd9\u4e2a\u51fd\u6570\u4f4d\u4e8e\u6587\u4ef6 <code>SayHello.kt</code> \u4e2d\u3002</li> <li>\u7f16\u8bd1\u5668\u4f1a\u751f\u6210\u4e00\u4e2a\u540d\u4e3a <code>SayHelloKt.class</code> \u7684\u6587\u4ef6\u3002</li> <li>\u6269\u5c55\u51fd\u6570 <code>sayHello</code> \u5728\u8fd9\u4e2a\u7c7b\u4e2d\u88ab\u7f16\u8bd1\u6210\u4e86\u4e00\u4e2a <code>public static final</code> \u7684\u9759\u6001\u65b9\u6cd5\u3002</li> <li>\u539f\u672c\u7684\u63a5\u6536\u8005\u7c7b\u578b <code>Any</code> \u6210\u4e3a\u4e86\u8fd9\u4e2a\u9759\u6001\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\u5373 <code>public static final void sayHello(java.lang.Object receiver)</code>\u3002</li> </ul> <p>\u56e0\u6b64\uff0c\u5728\u5176\u5b83\u4ee3\u7801\u4e2d\u8c03\u7528 <code>anyObject.sayHello()</code>\uff0c\u672c\u8d28\u4e0a\u662f\u8c03\u7528\u4e86 <code>SayHelloKt.sayHello(anyObject)</code>\u3002\u8fd9\u662f\u4e00\u79cd\u7f16\u8bd1\u65f6\u671f\u7684\u201c\u8bed\u6cd5\u7cd6\u201d\uff0c\u5b83\u5e76\u6ca1\u6709\u771f\u6b63\u4fee\u6539\u539f\u6709\u7684\u7c7b\uff0c\u800c\u662f\u901a\u8fc7\u9759\u6001\u65b9\u6cd5\u8c03\u7528\u7684\u65b9\u5f0f\u5de7\u5999\u5730\u5b9e\u73b0\u4e86\u6269\u5c55\u529f\u80fd\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%20%28JMM%29/","title":"Java\u5185\u5b58\u6a21\u578b (JMM)","text":""},{"location":"%E7%AC%94%E8%AE%B0/java/Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%20%28JMM%29/#_1","title":"\u57fa\u7840\u6982\u5ff5","text":"<ol> <li> <p>\u5e76\u53d1\u7f16\u7a0b\u6a21\u578b</p> <ul> <li>\u5e76\u53d1\u7f16\u7a0b\u9700\u89e3\u51b3\u4e24\u5927\u6838\u5fc3\u95ee\u9898\uff1a\u7ebf\u7a0b\u95f4\u7684\u901a\u4fe1\u4e0e\u540c\u6b65\u3002</li> <li>\u901a\u4fe1\u673a\u5236\u5206\u4e3a\u4e24\u7c7b\uff1a\u5171\u4eab\u5185\u5b58\u548c\u6d88\u606f\u4f20\u9012\u3002</li> <li>Java\u91c7\u7528\u7684\u662f\u5171\u4eab\u5185\u5b58\u5e76\u53d1\u6a21\u578b\uff0c\u7ebf\u7a0b\u4e4b\u95f4\u901a\u8fc7\u8bfb\u5199\u5171\u4eab\u53d8\u91cf\u8fdb\u884c\u9690\u5f0f\u901a\u4fe1\u3002</li> </ul> </li> <li> <p>Java\u5185\u5b58\u6a21\u578b\u7684\u62bd\u8c61</p> <ul> <li>JMM\u662f\u63a7\u5236Java\u7ebf\u7a0b\u95f4\u901a\u4fe1\u7684\u89c4\u5219\uff0c\u5b83\u51b3\u5b9a\u4e86\u4e00\u4e2a\u7ebf\u7a0b\u5bf9\u5171\u4eab\u53d8\u91cf\u7684\u5199\u5165\u4f55\u65f6\u5bf9\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u53ef\u89c1\u3002</li> <li>\u62bd\u8c61\u7ed3\u6784\uff1a<ul> <li>\u4e3b\u5185\u5b58\uff1a\u5b58\u50a8\u6240\u6709\u7ebf\u7a0b\u5171\u4eab\u7684\u53d8\u91cf\uff08\u5b9e\u4f8b\u57df\u3001\u9759\u6001\u57df\u3001\u6570\u7ec4\u5143\u7d20\uff09\u3002</li> <li>\u672c\u5730\u5185\u5b58\uff1a\u6bcf\u4e2a\u7ebf\u7a0b\u79c1\u6709\u7684\u5de5\u4f5c\u5185\u5b58\uff0c\u5b58\u50a8\u4e86\u5171\u4eab\u53d8\u91cf\u7684\u526f\u672c\u3002\u5b83\u662f\u4e00\u4e2a\u62bd\u8c61\u6982\u5ff5\uff0c\u53ef\u4ee5\u5305\u62ec\u7f13\u5b58\u3001\u5bc4\u5b58\u5668\u7b49\u3002</li> </ul> </li> <li>\u7ebf\u7a0b\u95f4\u901a\u4fe1\u8fc7\u7a0b\uff1a\u7ebf\u7a0bA\u8981\u5c06\u66f4\u65b0\u540e\u7684\u5171\u4eab\u53d8\u91cf\u503c\u4f20\u9012\u7ed9\u7ebf\u7a0bB\uff0c\u5fc5\u987b\u7ecf\u8fc7\u4e24\u4e2a\u6b65\u9aa4\uff1a1. \u7ebf\u7a0bA\u5c06\u672c\u5730\u5185\u5b58\u7684\u526f\u672c\u5237\u65b0\u5230\u4e3b\u5185\u5b58\u30022. \u7ebf\u7a0bB\u4ece\u4e3b\u5185\u5b58\u8bfb\u53d6\u66f4\u65b0\u540e\u7684\u53d8\u91cf\u503c\u3002</li> </ul> </li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%20%28JMM%29/#_2","title":"\u6838\u5fc3\u95ee\u9898\uff1a\u91cd\u6392\u5e8f","text":"<p>\u4e3a\u63d0\u5347\u6027\u80fd\uff0c\u7f16\u8bd1\u5668\u548c\u5904\u7406\u5668\u4f1a\u5bf9\u6307\u4ee4\u8fdb\u884c\u91cd\u6392\u5e8f\uff0c\u8fd9\u53ef\u80fd\u5bfc\u81f4\u591a\u7ebf\u7a0b\u7a0b\u5e8f\u51fa\u73b0\u5185\u5b58\u53ef\u89c1\u6027\u95ee\u9898\u3002</p> <ol> <li> <p>\u91cd\u6392\u5e8f\u7684\u7c7b\u578b</p> <ul> <li>\u7f16\u8bd1\u5668\u4f18\u5316\u7684\u91cd\u6392\u5e8f\uff1a\u4e0d\u6539\u53d8\u5355\u7ebf\u7a0b\u8bed\u4e49\u7684\u524d\u63d0\u4e0b\uff0c\u91cd\u65b0\u5b89\u6392\u8bed\u53e5\u6267\u884c\u987a\u5e8f\u3002</li> <li>\u6307\u4ee4\u7ea7\u5e76\u884c\u7684\u91cd\u6392\u5e8f\uff1a\u5904\u7406\u5668\u4e3a\u4e86\u91cd\u53e0\u6267\u884c\u591a\u6761\u6307\u4ee4\u800c\u6539\u53d8\u6267\u884c\u987a\u5e8f\u3002</li> <li>\u5185\u5b58\u7cfb\u7edf\u7684\u91cd\u6392\u5e8f\uff1a\u7531\u4e8e\u7f13\u5b58\u548c\u8bfb\u5199\u7f13\u51b2\u533a\u7684\u5b58\u5728\uff0c\u4f7f\u5f97\u5185\u5b58\u7684\u8bfb\u5199\u64cd\u4f5c\u770b\u8d77\u6765\u662f\u4e71\u5e8f\u7684\u3002</li> </ul> </li> <li> <p>JMM\u7684\u5bf9\u7b56</p> <ul> <li>JMM\u901a\u8fc7\u5b9a\u4e49\u4e00\u5957\u89c4\u5219\uff0c\u7981\u6b62\u7279\u5b9a\u7c7b\u578b\u7684\u7f16\u8bd1\u5668\u548c\u5904\u7406\u5668\u91cd\u6392\u5e8f\u3002</li> <li>\u5b9e\u73b0\u65b9\u5f0f\u662f\u5728\u751f\u6210\u6307\u4ee4\u65f6\uff0c\u5728\u9002\u5f53\u4f4d\u7f6e\u63d2\u5165\u5185\u5b58\u5c4f\u969c\uff08Memory Barriers\uff09\uff0c\u4ee5\u7981\u6b62\u7279\u5b9a\u7c7b\u578b\u7684\u91cd\u6392\u5e8f\u3002</li> </ul> </li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%20%28JMM%29/#happens-before","title":"\u6838\u5fc3\u539f\u5219\uff1aHappens-Before","text":"<p>JSR-133\u5185\u5b58\u6a21\u578b\u63d0\u51fa\u4e86Happens-Before\u7684\u6982\u5ff5\uff0c\u7528\u4e8e\u9610\u8ff0\u64cd\u4f5c\u95f4\u7684\u5185\u5b58\u53ef\u89c1\u6027\u3002\u5982\u679c\u4e00\u4e2a\u64cd\u4f5c\u7684\u7ed3\u679c\u9700\u8981\u5bf9\u53e6\u4e00\u4e2a\u64cd\u4f5c\u53ef\u89c1\uff0c\u90a3\u4e48\u8fd9\u4e24\u4e2a\u64cd\u4f5c\u4e4b\u95f4\u5fc5\u987b\u5b58\u5728Happens-Before\u5173\u7cfb\u3002</p> <ol> <li> <p>\u4e3b\u8981\u89c4\u5219</p> <ul> <li>\u7a0b\u5e8f\u987a\u5e8f\u89c4\u5219\uff1a\u5728\u4e00\u4e2a\u7ebf\u7a0b\u5185\uff0c\u4e66\u5199\u5728\u524d\u9762\u7684\u64cd\u4f5chappens-before\u4e8e\u4e66\u5199\u5728\u540e\u9762\u7684\u64cd\u4f5c\u3002</li> <li>\u76d1\u89c6\u5668\u9501\u89c4\u5219\uff1a\u5bf9\u4e00\u4e2a\u9501\u7684\u89e3\u9501\uff08unlock\uff09\u64cd\u4f5chappens-before\u4e8e\u540e\u7eed\u5bf9\u8fd9\u4e2a\u9501\u7684\u52a0\u9501\uff08lock\uff09\u64cd\u4f5c\u3002</li> <li>volatile\u53d8\u91cf\u89c4\u5219\uff1a\u5bf9\u4e00\u4e2avolatile\u53d8\u91cf\u7684\u5199\u64cd\u4f5chappens-before\u4e8e\u4efb\u610f\u540e\u7eed\u5bf9\u8fd9\u4e2avolatile\u53d8\u91cf\u7684\u8bfb\u64cd\u4f5c\u3002</li> <li>\u4f20\u9012\u6027\uff1a\u5982\u679cA happens-before B\uff0c\u4e14B happens-before C\uff0c\u90a3\u4e48A happens-before C\u3002</li> </ul> </li> <li> <p>\u91cd\u8981\u7406\u89e3</p> <ul> <li>\u4e24\u4e2a\u64cd\u4f5c\u5b58\u5728Happens-Before\u5173\u7cfb\uff0c\u4e0d\u610f\u5473\u7740\u524d\u4e00\u4e2a\u64cd\u4f5c\u5fc5\u987b\u5728\u540e\u4e00\u4e2a\u64cd\u4f5c\u4e4b\u524d\u6267\u884c\u3002</li> <li>JMM\u4ec5\u8981\u6c42\u524d\u4e00\u4e2a\u64cd\u4f5c\u7684\u6267\u884c\u7ed3\u679c\u5bf9\u540e\u4e00\u4e2a\u64cd\u4f5c\u53ef\u89c1\u3002\u5982\u679c\u91cd\u6392\u5e8f\u4e0d\u5f71\u54cd\u8fd9\u4e2a\u53ef\u89c1\u6027\uff08\u548c\u6700\u7ec8\u7ed3\u679c\uff09\uff0cJMM\u662f\u5141\u8bb8\u7684\u3002</li> </ul> </li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%20%28JMM%29/#_3","title":"\u91cd\u6392\u5e8f\u7684\u7ec6\u8282\u4e0e\u5f71\u54cd","text":"<ol> <li> <p>\u6570\u636e\u4f9d\u8d56\u6027\u4e0eas-if-serial\u8bed\u4e49</p> <ul> <li>\u6570\u636e\u4f9d\u8d56\u6027\uff1a\u5982\u679c\u4e24\u4e2a\u64cd\u4f5c\u8bbf\u95ee\u540c\u4e00\u4e2a\u53d8\u91cf\uff0c\u4e14\u5176\u4e2d\u4e00\u4e2a\u662f\u5199\u64cd\u4f5c\uff0c\u5219\u5b83\u4eec\u5b58\u5728\u6570\u636e\u4f9d\u8d56\u3002\u7f16\u8bd1\u5668\u548c\u5904\u7406\u5668\u4e0d\u4f1a\u5bf9\u6709\u6570\u636e\u4f9d\u8d56\u5173\u7cfb\u7684\u64cd\u4f5c\u8fdb\u884c\u91cd\u6392\u5e8f\u3002</li> <li>as-if-serial\u8bed\u4e49\uff1a\u65e0\u8bba\u5982\u4f55\u91cd\u6392\u5e8f\uff0c\u5355\u7ebf\u7a0b\u7a0b\u5e8f\u7684\u6267\u884c\u7ed3\u679c\u4e0d\u80fd\u88ab\u6539\u53d8\u3002\u8fd9\u4fdd\u8bc1\u4e86\u5355\u7ebf\u7a0b\u7a0b\u5e8f\u7684\u6b63\u786e\u6027\u3002</li> </ul> </li> <li> <p>\u91cd\u6392\u5e8f\u5bf9\u591a\u7ebf\u7a0b\u7684\u5f71\u54cd</p> <ul> <li>\u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e0b\uff0c\u6ca1\u6709\u6570\u636e\u4f9d\u8d56\u5173\u7cfb\u7684\u64cd\u4f5c\u53ef\u80fd\u88ab\u91cd\u6392\u5e8f\uff0c\u4ece\u800c\u7834\u574f\u7a0b\u5e8f\u7684\u539f\u6709\u903b\u8f91\u3002\u4f8b\u5982\uff0c\u7ebf\u7a0bA\u6267\u884c<code>a=1; flag=true;</code>\uff0c\u53ef\u80fd\u88ab\u91cd\u6392\u5e8f\u4e3a\u5148\u6267\u884c<code>flag=true</code>\uff0c\u6b64\u65f6\u7ebf\u7a0bB\u53ef\u80fd\u5728<code>a=1</code>\u8fd8\u672a\u6267\u884c\u65f6\u5c31\u8bfb\u5230\u4e86<code>flag=true</code>\uff0c\u5bfc\u81f4\u903b\u8f91\u9519\u8bef\u3002</li> </ul> </li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%20%28JMM%29/#_4","title":"\u7406\u8bba\u57fa\u7840\uff1a\u987a\u5e8f\u4e00\u81f4\u6027\u6a21\u578b","text":"<ol> <li> <p>\u987a\u5e8f\u4e00\u81f4\u6027\u6a21\u578b</p> <ul> <li>\u4e00\u4e2a\u7406\u60f3\u5316\u7684\u7406\u8bba\u53c2\u8003\u6a21\u578b\uff0c\u63d0\u4f9b\u4e86\u6781\u5f3a\u7684\u5185\u5b58\u53ef\u89c1\u6027\u4fdd\u8bc1\u3002</li> <li>\u4e24\u5927\u7279\u6027\uff1a1. \u5355\u4e2a\u7ebf\u7a0b\u5185\u7684\u6240\u6709\u64cd\u4f5c\u90fd\u6309\u7a0b\u5e8f\u987a\u5e8f\u6267\u884c\u30022. \u6240\u6709\u7ebf\u7a0b\u90fd\u53ea\u80fd\u770b\u5230\u4e00\u4e2a\u5355\u4e00\u3001\u4e00\u81f4\u7684\u64cd\u4f5c\u6267\u884c\u987a\u5e8f\u3002</li> </ul> </li> <li> <p>JMM\u4e0e\u987a\u5e8f\u4e00\u81f4\u6027\u7684\u5173\u7cfb</p> <ul> <li>\u5bf9\u4e8e\u6b63\u786e\u540c\u6b65\u7684\u591a\u7ebf\u7a0b\u7a0b\u5e8f\uff1aJMM\u4fdd\u8bc1\u5176\u6267\u884c\u7ed3\u679c\u4e0e\u5728\u987a\u5e8f\u4e00\u81f4\u6027\u6a21\u578b\u4e2d\u7684\u6267\u884c\u7ed3\u679c\u76f8\u540c\u3002\u8fd9\u662fJMM\u4e3a\u7a0b\u5e8f\u5458\u63d0\u4f9b\u7684\u6838\u5fc3\u4fdd\u969c\u3002</li> <li>\u5bf9\u4e8e\u672a\u540c\u6b65\u6216\u672a\u6b63\u786e\u540c\u6b65\u7684\u7a0b\u5e8f\uff1aJMM\u4e0d\u4fdd\u8bc1\u5176\u6267\u884c\u7ed3\u679c\u4e0e\u987a\u5e8f\u4e00\u81f4\u6027\u6a21\u578b\u4e2d\u7684\u7ed3\u679c\u4e00\u81f4\u3002JMM\u53ea\u63d0\u4f9b\u6700\u5c0f\u5b89\u5168\u6027\u4fdd\u969c\uff0c\u5373\u7ebf\u7a0b\u8bfb\u53d6\u5230\u7684\u503c\u8981\u4e48\u662f\u4e4b\u524d\u67d0\u4e2a\u7ebf\u7a0b\u5199\u5165\u7684\uff0c\u8981\u4e48\u662f\u7c7b\u578b\u7684\u9ed8\u8ba4\u503c\uff0c\u4e0d\u4f1a\u51ed\u7a7a\u51fa\u73b0\u3002</li> </ul> </li> <li> <p>\u672a\u540c\u6b65\u7a0b\u5e8f\u7684\u7279\u6027\u5dee\u5f02</p> <ul> <li>JMM\u4e0d\u4fdd\u8bc164\u4f4d\u7684long\u548cdouble\u7c7b\u578b\u53d8\u91cf\u7684\u8bfb\u5199\u662f\u539f\u5b50\u6027\u7684\uff08\u5728\u67d0\u4e9b32\u4f4d\u5904\u7406\u5668\u4e0a\u53ef\u80fd\u4f1a\u88ab\u62c6\u5206\u4e3a\u4e24\u6b2132\u4f4d\u64cd\u4f5c\uff09\u3002</li> </ul> </li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%20%28JMM%29/#jmm","title":"JMM\u7684\u8bbe\u8ba1\u54f2\u5b66\u4e0e\u5b9e\u73b0","text":"<ol> <li> <p>\u8bbe\u8ba1\u76ee\u6807</p> <ul> <li>\u5728\u7a0b\u5e8f\u5458\uff08\u5e0c\u671b\u6a21\u578b\u7b80\u5355\u6613\u61c2\uff0c\u53ef\u89c1\u6027\u5f3a\uff09\u548c\u7f16\u8bd1\u5668/\u5904\u7406\u5668\uff08\u5e0c\u671b\u675f\u7f1a\u5c11\uff0c\u4f18\u5316\u7a7a\u95f4\u5927\uff09\u4e4b\u95f4\u627e\u5230\u5e73\u8861\u70b9\u3002</li> <li>\u6838\u5fc3\u539f\u5219\uff1a\u53ea\u8981\u4e0d\u6539\u53d8\u6b63\u786e\u540c\u6b65\u7a0b\u5e8f\u7684\u6267\u884c\u7ed3\u679c\uff0c\u5c31\u5141\u8bb8\u7f16\u8bd1\u5668\u548c\u5904\u7406\u5668\u8fdb\u884c\u4f18\u5316\u3002</li> </ul> </li> <li> <p>\u5b9e\u73b0\u673a\u5236</p> <ul> <li>JMM\u5c4f\u853d\u4e86\u4e0d\u540c\u5904\u7406\u5668\u5185\u5b58\u6a21\u578b\u7684\u5dee\u5f02\u3002\u5e38\u89c1\u7684\u5904\u7406\u5668\u5185\u5b58\u6a21\u578b\u901a\u5e38\u6bd4JMM\u8981\u5f31\u3002</li> <li>Java\u7f16\u8bd1\u5668\u901a\u8fc7\u5728\u9002\u5f53\u4f4d\u7f6e\u63d2\u5165\u4e0d\u540c\u7c7b\u578b\u7684\u5185\u5b58\u5c4f\u969c\u6307\u4ee4\uff0c\u6765\u786e\u4fdd\u5728\u5404\u79cd\u786c\u4ef6\u5e73\u53f0\u4e0a\u90fd\u80fd\u63d0\u4f9b\u4e00\u81f4\u7684\u5185\u5b58\u53ef\u89c1\u6027\u4fdd\u8bc1\u3002</li> </ul> </li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/java/Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%20%28JMM%29/#jsr-133","title":"JSR-133\u5bf9\u65e7\u6a21\u578b\u7684\u4fee\u590d","text":"<p>JDK5\u542f\u7528\u7684JSR-133\u89c4\u8303\u4e3b\u8981\u4fee\u590d\u4e86\u65e7\u5185\u5b58\u6a21\u578b\u7684\u4e24\u4e2a\u95ee\u9898\uff1a 1.  \u589e\u5f3a\u4e86volatile\u7684\u5185\u5b58\u8bed\u4e49\uff1a\u4e25\u683c\u9650\u5236volatile\u53d8\u91cf\u4e0e\u666e\u901a\u53d8\u91cf\u7684\u91cd\u6392\u5e8f\u3002 2.  \u589e\u5f3a\u4e86final\u7684\u5185\u5b58\u8bed\u4e49\uff1a\u589e\u52a0\u4e86\u91cd\u6392\u5e8f\u89c4\u5219\uff0c\u4fdd\u8bc1\u4e86final\u53d8\u91cf\u7684\u521d\u59cb\u5316\u5b89\u5168\u6027\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/Synchronized%20%E9%94%81/","title":"Synchronized \u9501","text":""},{"location":"%E7%AC%94%E8%AE%B0/java/Synchronized%20%E9%94%81/#_1","title":"\u5bf9\u8c61\u7ed3\u6784\u548c\u9501\u72b6\u6001","text":"<p>Java\u4e2d\u7684 <code>synchronized</code> \u5173\u952e\u5b57\u662f\u5176\u5185\u7f6e\u9501\u7684\u5b9e\u73b0\u3002\u8fd9\u4e2a\u5185\u7f6e\u9501\u672c\u8d28\u4e0a\u662f\u9644\u52a0\u5728\u4efb\u4f55Java\u5bf9\u8c61\u4e0a\u7684\u3002</p> <p>\u4e00\u4e2aJava\u5bf9\u8c61\u5728\u5185\u5b58\u4e2d\u901a\u5e38\u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff1a\u5bf9\u8c61\u5934\uff08Header\uff09\u3001\u5b9e\u4f8b\u6570\u636e\uff08Instance Data\uff09\u548c\u5bf9\u9f50\u586b\u5145\uff08Padding\uff09\u3002\u5bf9\u8c61\u5934\u662f\u9501\u673a\u5236\u7684\u5173\u952e\uff0c\u5b83\u5305\u542b\u4e00\u4e2a\u540d\u4e3a\u201cMark Word\u201d\u7684\u5b57\u6bb5\u3002</p> <p>\u572864\u4f4dJVM\u4e2d\uff0cMark Word\u536064\u4e2a\u6bd4\u7279\uff088\u5b57\u8282\uff09\uff0c\u5b83\u7684\u5185\u5bb9\u4f1a\u6839\u636e\u5bf9\u8c61\u7684\u9501\u72b6\u6001\u800c\u53d8\u5316\uff0c\u4e3b\u8981\u4f5c\u7528\u5c31\u662f\u8bb0\u5f55\u5bf9\u8c61\u7684\u54c8\u5e0c\u7801\u3001GC\u5206\u4ee3\u5e74\u9f84\u4ee5\u53ca\u9501\u4fe1\u606f\u3002</p> <p>Mark Word \u7ed3\u6784 (64\u4f4d\u865a\u62df\u673a)</p> <p>Mark Word\u7684\u6700\u540e3\u4e2a\u6bd4\u7279\u4f4d\u662f\u9501\u72b6\u6001\u7684\u6807\u5fd7\uff1a</p> <ul> <li> <p><code>lock</code> (2 bit): \u9501\u72b6\u6001\u6807\u8bb0\u4f4d\u3002</p> </li> <li> <p><code>biased_lock</code> (1 bit): \u662f\u5426\u542f\u7528\u4e86\u504f\u5411\u9501\u7684\u6807\u8bb0\u3002\u4e3a1\u8868\u793a\u542f\u7528\uff0c\u4e3a0\u8868\u793a\u672a\u542f\u7528\u3002</p> </li> </ul> <p>\u8fd9\u4e24\u4e2a\u6807\u8bb0\u4f4d\u7684\u7ec4\u5408\u5171\u540c\u51b3\u5b9a\u4e86\u5bf9\u8c61\u7684\u5177\u4f53\u9501\u72b6\u6001\uff0c\u5982\u4e0b\u8868\u6240\u793a\uff1a</p> biased_lock lock \u542b\u4e49\uff08\u9501\u72b6\u6001\uff09 0 01 \u65e0\u9501 1 01 \u504f\u5411\u9501 0 00 \u8f7b\u91cf\u7ea7\u9501 0 10 \u91cd\u91cf\u7ea7\u9501 0 11 GC\u6807\u8bb0 <p>\u9501\u5347\u7ea7\u673a\u5236</p> <p>\u5728JDK 1.6\u4e4b\u524d\uff0c<code>synchronized</code> \u9501\u90fd\u662f\u91cd\u91cf\u7ea7\u9501\uff0c\u5b83\u4f9d\u8d56\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u7684\u4e92\u65a5\u91cf\uff08Mutex\uff09\uff0c\u4f1a\u5bfc\u81f4CPU\u5728\u7528\u6237\u6001\u548c\u6838\u5fc3\u6001\u4e4b\u95f4\u5207\u6362\uff0c\u6027\u80fd\u5f00\u9500\u5927\u3002\u4e3a\u4e86\u4f18\u5316\u6027\u80fd\uff0cJDK 1.6\u5f15\u5165\u4e86\u504f\u5411\u9501\u548c\u8f7b\u91cf\u7ea7\u9501\u3002</p> <p>synchronized \u7684\u9501\u72b6\u6001\u4f1a\u968f\u7740\u7ebf\u7a0b\u7ade\u4e89\u7684\u6fc0\u70c8\u7a0b\u5ea6\u800c\u5347\u7ea7\uff0c\u8fc7\u7a0b\u5982\u4e0b\uff1a</p> <p>\u65e0\u9501 -&gt; \u504f\u5411\u9501 -&gt; \u8f7b\u91cf\u7ea7\u9501 -&gt; \u91cd\u91cf\u7ea7\u9501</p> <p>\u8fd9\u4e2a\u5347\u7ea7\u8fc7\u7a0b\u662f\u5355\u5411\u7684\uff0c\u5373\u9501\u53ef\u4ee5\u5347\u7ea7\u4f46\u4e0d\u80fd\u964d\u7ea7\uff08\u4f8b\u5982\uff0c\u8f7b\u91cf\u7ea7\u9501\u4e0d\u80fd\u518d\u53d8\u56de\u504f\u5411\u9501\uff09\u3002\u8fd9\u79cd\u7b56\u7565\u65e8\u5728\u63d0\u9ad8\u9501\u83b7\u53d6\u548c\u91ca\u653e\u7684\u6548\u7387\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/Synchronized%20%E9%94%81/#_2","title":"\u65e0\u9501\u72b6\u6001","text":"<p>\u4e00\u4e2a\u5bf9\u8c61\u5728\u6ca1\u6709\u4efb\u4f55\u7ebf\u7a0b\u5c1d\u8bd5\u83b7\u53d6\u5176\u9501\u65f6\u7684\u521d\u59cb\u72b6\u6001\u5c31\u662f\u65e0\u9501\u72b6\u6001\u3002</p> <ul> <li> <p>\u5185\u5b58\u7ed3\u6784: \u6b64\u65f6Mark Word\u7684\u6700\u540e3\u4f4d\u662f <code>001</code> (<code>biased_lock</code>=0, <code>lock</code>=01)\u3002</p> </li> <li> <p>\u793a\u4f8b\u5206\u6790:</p> <ul> <li> <p>\u901a\u8fc7JOL\uff08Java Object Layout\uff09\u5de5\u5177\u53ef\u4ee5\u67e5\u770b\u5bf9\u8c61\u5185\u5b58\u5e03\u5c40\u3002</p> </li> <li> <p>\u5f53\u521b\u5efa\u4e00\u4e2a\u65b0\u5bf9\u8c61\u65f6\uff0c\u5982\u679c\u504f\u5411\u9501\u673a\u5236\u5c1a\u672a\u542f\u52a8\uff08JVM\u542f\u52a8\u540e\u67094\u79d2\u7684\u9ed8\u8ba4\u5ef6\u8fdf\uff09\uff0c\u5176Mark Word\u7684\u672b\u5c3e\u4f1a\u662f <code>...001</code>\uff0c\u8868\u793a\u5b83\u5904\u4e8e\u65e0\u9501\u4e14\u201c\u4e0d\u53ef\u504f\u5411\u201d\uff08non-biasable\uff09\u7684\u72b6\u6001\u3002</p> </li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/Synchronized%20%E9%94%81/#_3","title":"\u504f\u5411\u9501","text":"<p>1. \u504f\u5411\u9501\u6838\u5fc3\u539f\u7406</p> <ul> <li> <p>\u76ee\u7684: \u4f18\u5316\u201c\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u6301\u7eed\u8bbf\u95ee\u540c\u6b65\u4ee3\u7801\u5757\u201d\u7684\u573a\u666f\u3002</p> </li> <li> <p>\u5de5\u4f5c\u65b9\u5f0f:</p> <ol> <li> <p>\u5f53\u7b2c\u4e00\u4e2a\u7ebf\u7a0b\u83b7\u53d6\u9501\u65f6\uff0cJVM\u4f1a\u4f7f\u7528CAS\uff08\u6bd4\u8f83\u5e76\u4ea4\u6362\uff09\u64cd\u4f5c\u5c06\u8be5\u7ebf\u7a0b\u7684ID\u8bb0\u5f55\u5230\u9501\u5bf9\u8c61\u7684Mark Word\u4e2d\uff0c\u5e76\u5c06\u9501\u72b6\u6001\u6807\u5fd7\u4f4d\u6539\u4e3a <code>101</code> (<code>biased_lock</code>=1, <code>lock</code>=01)\u3002</p> </li> <li> <p>\u6b64\u540e\uff0c\u5f53\u8be5\u7ebf\u7a0b\u518d\u6b21\u8fdb\u5165\u540c\u6b65\u4ee3\u7801\u5757\u65f6\uff0c\u53ea\u9700\u68c0\u67e5Mark Word\u4e2d\u7684\u7ebf\u7a0bID\u662f\u5426\u662f\u81ea\u5df1\u7684ID\uff0c\u5982\u679c\u662f\uff0c\u5219\u65e0\u9700\u4efb\u4f55\u540c\u6b65\u64cd\u4f5c\uff08\u8fdeCAS\u90fd\u4e0d\u9700\u8981\uff09\uff0c\u76f4\u63a5\u6267\u884c\u4ee3\u7801\u3002\u8fd9\u6781\u5927\u5730\u964d\u4f4e\u4e86\u65e0\u7ade\u4e89\u60c5\u51b5\u4e0b\u7684\u9501\u83b7\u53d6\u5f00\u9500\u3002</p> </li> </ol> </li> <li> <p>\u9501\u64a4\u9500\u4e0e\u5347\u7ea7:</p> <ul> <li> <p>\u4e00\u65e6\u51fa\u73b0\u7b2c\u4e8c\u4e2a\u7ebf\u7a0b\u5c1d\u8bd5\u83b7\u53d6\u8fd9\u4e2a\u9501\uff0c\u504f\u5411\u6a21\u5f0f\u5c31\u4f1a\u7ed3\u675f\u3002</p> </li> <li> <p>JVM\u4f1a\u68c0\u67e5\u539f\u6301\u6709\u504f\u5411\u9501\u7684\u7ebf\u7a0b\u662f\u5426\u8fd8\u5728\u6267\u884c\u540c\u6b65\u4ee3\u7801\u3002\u5982\u679c\u4e0d\u5728\uff0c\u5c31\u5c06\u9501\u5bf9\u8c61\u7684Mark Word\u91cd\u7f6e\u4e3a\u65e0\u9501\u72b6\u6001\u6216\u91cd\u504f\u5411\u7ed9\u65b0\u7ebf\u7a0b\uff1b\u5982\u679c\u5728\uff0c\u5c31\u64a4\u9500\u539f\u7ebf\u7a0b\u7684\u504f\u5411\u9501\uff0c\u5e76\u5c06\u9501\u5347\u7ea7\u4e3a\u8f7b\u91cf\u7ea7\u9501\u3002</p> </li> </ul> </li> <li> <p>\u7f3a\u70b9: \u5982\u679c\u5e94\u7528\u4e2d\u5145\u6ee1\u4e86\u9501\u7ade\u4e89\uff0c\u504f\u5411\u9501\u7684\u64a4\u9500\u8fc7\u7a0b\u4f1a\u5e26\u6765\u989d\u5916\u7684\u6027\u80fd\u5f00\u9500\uff0c\u53cd\u800c\u5f97\u4e0d\u507f\u5931\u3002</p> </li> </ul> <p>2. \u504f\u5411\u9501\u6848\u4f8b\u5206\u6790</p> <ul> <li> <p>\u5355\u7ebf\u7a0b\u573a\u666f:</p> <ul> <li> <p>\u62a2\u5360\u9501\u524d\uff1a\u5bf9\u8c61\u5904\u4e8e\u201c\u53ef\u504f\u5411\u201d\uff08biasable\uff09\u72b6\u6001\uff0cMark Word\u672b\u5c3e\u4e3a <code>101</code>\uff0c\u4f46\u7ebf\u7a0bID\u5b57\u6bb5\u4e3a\u7a7a\u3002</p> </li> <li> <p>\u5360\u6709\u9501\u540e\uff1aMark Word\u4e2d\u8bb0\u5f55\u4e86\u5f53\u524d\u7ebf\u7a0b\u7684ID\uff0c\u72b6\u6001\u53d8\u4e3a\u201c\u5df2\u504f\u5411\u201d\uff08biased\uff09\u3002</p> </li> <li> <p>\u91ca\u653e\u9501\u540e\uff1a\u9501\u5bf9\u8c61\u4f9d\u7136\u4fdd\u6301\u504f\u5411\u72b6\u6001\uff0c\u5176Mark Word\u4e2d\u7684\u7ebf\u7a0bID\u4e5f\u4e0d\u4f1a\u88ab\u6e05\u9664\u3002\u8fd9\u662f\u56e0\u4e3aJVM\u4e50\u89c2\u5730\u8ba4\u4e3a\u8be5\u7ebf\u7a0b\u5f88\u53ef\u80fd\u4f1a\u518d\u6b21\u83b7\u53d6\u8be5\u9501\u3002</p> </li> </ul> </li> <li> <p>\u591a\u7ebf\u7a0b\u573a\u666f\uff08\u65e0\u4f18\u5316\uff09:</p> <ul> <li> <p>\u7ebf\u7a0bA\u83b7\u53d6\u9501\u540e\uff0c\u9501\u504f\u5411\u4e8eA\u3002</p> </li> <li> <p>\u7ebf\u7a0bA\u7ed3\u675f\u540e\uff0c\u7ebf\u7a0bB\u5c1d\u8bd5\u83b7\u53d6\u540c\u4e00\u4e2a\u9501\u3002\u6b64\u65f6\u4f1a\u53d1\u751f\u504f\u5411\u9501\u64a4\u9500\uff0c\u9501\u76f4\u63a5\u5347\u7ea7\u4e3a\u8f7b\u91cf\u7ea7\u9501\uff0c\u800c\u4e0d\u662f\u91cd\u504f\u5411\u7ed9\u7ebf\u7a0bB\u3002\u8fd9\u662f\u56e0\u4e3a\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5355\u6b21\u7684\u9501\u64a4\u9500\u4e0d\u8db3\u4ee5\u89e6\u53d1\u66f4\u590d\u6742\u7684\u4f18\u5316\u3002</p> </li> </ul> </li> </ul> <p>3. \u6279\u91cf\u91cd\u504f\u5411 (Bulk Re-biasing)</p> <ul> <li> <p>\u95ee\u9898\u80cc\u666f: \u5f53\u4e00\u4e2a\u7c7b\u7684\u591a\u4e2a\u5bf9\u8c61\u90fd\u88ab\u7ebf\u7a0bA\u504f\u5411\u540e\uff0c\u7ebf\u7a0bB\u53c8\u4f9d\u6b21\u6765\u83b7\u53d6\u8fd9\u4e9b\u9501\uff0c\u6bcf\u6b21\u90fd\u5347\u7ea7\u4e3a\u8f7b\u91cf\u7ea7\u9501\u7684\u5f00\u9500\u8f83\u5927\u3002</p> </li> <li> <p>\u673a\u5236: JVM\u5f15\u5165\u4e86\u6279\u91cf\u91cd\u504f\u5411\u673a\u5236\u6765\u4f18\u5316\u8fd9\u79cd\u60c5\u51b5\u3002</p> <ul> <li> <p>\u7531JVM\u53c2\u6570 <code>BiasedLockingBulkRebiasThreshold</code> \u63a7\u5236\uff0c\u9ed8\u8ba4\u503c\u4e3a20\u3002</p> </li> <li> <p>JVM\u4f1a\u4e3a\u6bcf\u4e2a\u7c7b\u7ef4\u62a4\u4e00\u4e2a\u504f\u5411\u9501\u64a4\u9500\u8ba1\u6570\u5668\u3002\u5f53\u4e00\u4e2a\u7c7b\u7684\u5bf9\u8c61\u53d1\u751f\u504f\u5411\u9501\u64a4\u9500\u65f6\uff0c\u8be5\u8ba1\u6570\u5668\u52a01\u3002</p> </li> <li> <p>\u5f53\u8ba1\u6570\u5668\u8fbe\u5230\u9608\u503c\uff08\u598220\uff09\u65f6\uff0cJVM\u8ba4\u4e3a\u8be5\u7c7b\u7684\u9501\u53ef\u80fd\u51fa\u73b0\u4e86\u6240\u6709\u6743\u8f6c\u79fb\u3002\u5b83\u4e0d\u4f1a\u518d\u5c06\u540e\u7eed\u7684\u9501\u5347\u7ea7\u4e3a\u8f7b\u91cf\u7ea7\u9501\uff0c\u800c\u662f\u4f1a\u6267\u884c\u201c\u6279\u91cf\u91cd\u504f\u5411\u201d\uff0c\u5c06\u540e\u7eed\u9047\u5230\u8be5\u7c7b\u5bf9\u8c61\u7684\u9501\u76f4\u63a5\u504f\u5411\u4e8e\u65b0\u7684\u7ebf\u7a0b\uff08\u5982\u7ebf\u7a0bB\uff09\u3002</p> </li> </ul> </li> <li> <p>\u793a\u4f8b\u9a8c\u8bc1: \u7ebf\u7a0bB\u5faa\u73af\u83b7\u53d620\u4e2a\u7531\u7ebf\u7a0bA\u504f\u5411\u7684\u9501\u5bf9\u8c61\u3002\u524d19\u6b21\uff0c\u9501\u4f1a\u5347\u7ea7\u4e3a\u8f7b\u91cf\u7ea7\u9501\uff1b\u4f46\u5728\u7b2c20\u6b21\uff0c\u4f1a\u89e6\u53d1\u6279\u91cf\u91cd\u504f\u5411\uff0c\u7b2c20\u4e2a\u9501\u5bf9\u8c61\u4f1a\u76f4\u63a5\u91cd\u504f\u5411\u4e8e\u7ebf\u7a0bB\uff0c\u540e\u7eed\u65b0\u5efa\u7684\u8be5\u7c7b\u5bf9\u8c61\u4e5f\u4f1a\u9ed8\u8ba4\u504f\u5411B\u3002</p> </li> </ul> <p>4. epoch \u5b57\u6bb5</p> <ul> <li> <p>\u4f5c\u7528: <code>epoch</code> \u662f\u5b9e\u73b0\u6279\u91cf\u91cd\u504f\u5411\u7684\u5173\u952e\u3002\u5b83\u662fMark Word\u5728\u504f\u5411\u9501\u72b6\u6001\u4e0b\u7684\u4e00\u4e2a2\u4f4d\u5b57\u6bb5\u3002</p> </li> <li> <p>\u5de5\u4f5c\u539f\u7406:</p> <ol> <li> <p>\u6bcf\u4e2aClass\u5bf9\u8c61\u5185\u90e8\u7ef4\u62a4\u4e00\u4e2a <code>epoch</code> \u503c\uff0c\u521d\u59cb\u4e3a0\u3002</p> </li> <li> <p>\u5f53\u4e00\u4e2a\u5bf9\u8c61\u88ab\u521b\u5efa\u5e76\u6210\u4e3a\u504f\u5411\u9501\u65f6\uff0c\u5176Mark Word\u4e2d\u7684 <code>epoch</code> \u4f1a\u88ab\u8bbe\u7f6e\u4e3a\u5176Class\u5bf9\u8c61\u5f53\u65f6\u7684 <code>epoch</code> \u503c\u3002</p> </li> <li> <p>\u5f53\u89e6\u53d1\u6279\u91cf\u91cd\u504f\u5411\u65f6\uff0cClass\u5bf9\u8c61\u7684 <code>epoch</code> \u503c\u4f1a\u52a01\u3002</p> </li> <li> <p>\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u5c1d\u8bd5\u83b7\u53d6\u4e00\u4e2a\u504f\u5411\u9501\u65f6\uff0c\u4f1a\u6bd4\u8f83\u9501\u5bf9\u8c61Mark Word\u4e2d\u7684 <code>epoch</code> \u548c\u5176Class\u5bf9\u8c61\u4e2d\u7684 <code>epoch</code>\uff1a</p> <ul> <li> <p>\u5982\u679c\u4e24\u8005\u4e0d\u76f8\u7b49\uff0c\u8bf4\u660eClass\u7684 <code>epoch</code> \u5df2\u7ecf\u66f4\u65b0\uff08\u53d1\u751f\u4e86\u6279\u91cf\u91cd\u504f\u5411\uff09\uff0c\u610f\u5473\u7740\u5f53\u524d\u5bf9\u8c61\u7684\u504f\u5411\u5df2\u201c\u8fc7\u65f6\u201d\u3002\u6b64\u65f6\uff0c\u8be5\u7ebf\u7a0b\u53ef\u4ee5\u901a\u8fc7CAS\u64cd\u4f5c\u5c06\u9501\u91cd\u504f\u5411\u4e8e\u81ea\u5df1\u3002</p> </li> <li> <p>\u5982\u679c\u4e24\u8005\u76f8\u7b49\uff0c\u8bf4\u660e\u4ecd\u5904\u4e8e\u540c\u4e00\u201c\u7eaa\u5143\u201d\uff0c\u6b64\u65f6\u53d1\u751f\u7ade\u4e89\u5219\u5fc5\u987b\u8d70\u9501\u5347\u7ea7\u6d41\u7a0b\u3002</p> </li> </ul> </li> </ol> </li> </ul> <p>5. \u6279\u91cf\u64a4\u9500 (Bulk Revocation)</p> <ul> <li> <p>\u95ee\u9898\u80cc\u666f: \u5982\u679c\u4e00\u4e2a\u7c7b\u7684\u5bf9\u8c61\u9501\u7ade\u4e89\u975e\u5e38\u6fc0\u70c8\uff0c\u5373\u4f7f\u91cd\u504f\u5411\u540e\uff0c\u64a4\u9500\u6b21\u6570\u4f9d\u7136\u6301\u7eed\u589e\u52a0\uff0c\u8bf4\u660e\u504f\u5411\u9501\u5bf9\u8fd9\u4e2a\u7c7b\u5b8c\u5168\u4e0d\u9002\u7528\u3002</p> </li> <li> <p>\u673a\u5236:</p> <ul> <li> <p>\u7531JVM\u53c2\u6570 <code>BiasedLockingBulkRevokeThreshold</code> \u63a7\u5236\uff0c\u9ed8\u8ba4\u503c\u4e3a40\u3002</p> </li> <li> <p>\u5f53\u4e00\u4e2a\u7c7b\u7684\u504f\u5411\u9501\u64a4\u9500\u8ba1\u6570\u5668\u8fbe\u5230\u8fd9\u4e2a\u66f4\u9ad8\u7684\u9608\u503c\u65f6\uff0cJVM\u4f1a\u6267\u884c\u201c\u6279\u91cf\u64a4\u9500\u201d\u3002</p> </li> <li> <p>\u540e\u679c:</p> <ol> <li> <p>JVM\u4f1a\u5c06\u8be5Class\u6807\u8bb0\u4e3a\u201c\u4e0d\u53ef\u504f\u5411\u201d\u3002</p> </li> <li> <p>\u4e4b\u540e\u6240\u6709\u65b0\u521b\u5efa\u7684\u8be5Class\u7684\u5bf9\u8c61\u90fd\u5c06\u662f\u65e0\u9501\u72b6\u6001\uff08\u4e0d\u53ef\u504f\u5411\uff09\uff0c\u5f53\u5b83\u4eec\u88ab\u52a0\u9501\u65f6\u4f1a\u76f4\u63a5\u8fdb\u5165\u8f7b\u91cf\u7ea7\u9501\u72b6\u6001\u3002</p> </li> <li> <p>JVM\u4f1a\u904d\u5386\u6240\u6709\u7ebf\u7a0b\u6808\uff0c\u5c06\u8be5Class\u6240\u6709\u73b0\u5b58\u7684\u504f\u5411\u9501\u5b9e\u4f8b\u5168\u90e8\u64a4\u9500\u3002</p> </li> </ol> </li> </ul> </li> </ul> <p>6. \u6279\u91cf\u64a4\u9500\u51b7\u9759\u671f</p> <ul> <li> <p>\u673a\u5236:</p> <ul> <li> <p>\u7531JVM\u53c2\u6570 <code>BiasedLockingDecayTime</code> \u63a7\u5236\uff0c\u9ed8\u8ba425000\u6beb\u79d2\uff0825\u79d2\uff09\u3002</p> </li> <li> <p>\u8fd9\u662f\u4e00\u4e2a\u201c\u518d\u7ed9\u4e00\u6b21\u673a\u4f1a\u201d\u7684\u673a\u5236\u3002\u5982\u679c\u5728\u8ddd\u79bb\u4e0a\u4e00\u6b21\u6279\u91cf\u91cd\u504f\u5411\u53d1\u751f\u8d85\u8fc725\u79d2\u540e\uff0c\u64a4\u9500\u8ba1\u6570\u5668\u624d\u8fbe\u5230\u6279\u91cf\u64a4\u9500\u9608\u503c\uff0c\u90a3\u4e48JVM\u4e0d\u4f1a\u7acb\u5373\u6267\u884c\u6279\u91cf\u64a4\u9500\uff0c\u800c\u662f\u4f1a\u91cd\u7f6e\u8ba1\u6570\u5668\uff0c\u8ba9\u8fd9\u4e2a\u7c7b\u4ece\u5934\u518d\u6765\u3002</p> </li> <li> <p>\u5982\u679c\u572825\u79d2\u7684\u201c\u51b7\u9759\u671f\u201d\u5185\u64a4\u9500\u6b21\u6570\u8fc5\u901f\u8fbe\u5230\u9608\u503c\uff0c\u5219\u4f1a\u7acb\u5373\u6267\u884c\u6279\u91cf\u64a4\u9500\u3002</p> </li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/Synchronized%20%E9%94%81/#_4","title":"\u56db\u3001\u8f7b\u91cf\u7ea7\u9501","text":"<p>1. \u8f7b\u91cf\u7ea7\u9501\u6838\u5fc3\u539f\u7406</p> <ul> <li> <p>\u76ee\u7684: \u5728\u7ebf\u7a0b\u4ea4\u66ff\u6267\u884c\u540c\u6b65\u5757\uff0c\u4f46\u7ade\u4e89\u4e0d\u6fc0\u70c8\uff08\u5373\u540c\u4e00\u65f6\u523b\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u7ade\u4e89\uff09\u7684\u60c5\u51b5\u4e0b\uff0c\u907f\u514d\u91cd\u91cf\u7ea7\u9501\u7684\u6027\u80fd\u5f00\u9500\u3002\u5b83\u662f\u4e00\u79cd\u57fa\u4e8eCAS\u7684\u81ea\u65cb\u9501\u3002</p> </li> <li> <p>\u52a0\u9501\u8fc7\u7a0b:</p> <ol> <li> <p>\u7ebf\u7a0b\u5728\u81ea\u5df1\u7684\u6808\u5e27\u4e2d\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a\u201c\u9501\u8bb0\u5f55\u201d\uff08Lock Record\uff09\u7684\u7a7a\u95f4\u3002</p> </li> <li> <p>JVM\u5c06\u9501\u5bf9\u8c61\u7684Mark Word\u590d\u5236\u5230\u8fd9\u4e2a\u9501\u8bb0\u5f55\u4e2d\uff08\u79f0\u4e3a Displaced Mark Word\uff09\u3002</p> </li> <li> <p>\u7ebf\u7a0b\u4f7f\u7528CAS\u64cd\u4f5c\uff0c\u5c1d\u8bd5\u5c06\u9501\u5bf9\u8c61\u7684Mark Word\u66f4\u65b0\u4e3a\u6307\u5411\u8fd9\u4e2a\u9501\u8bb0\u5f55\u7684\u6307\u9488\u3002</p> </li> <li> <p>\u5982\u679cCAS\u6210\u529f\uff0c\u7ebf\u7a0b\u83b7\u5f97\u9501\uff0c\u9501\u5bf9\u8c61\u7684Mark Word\u72b6\u6001\u53d8\u4e3a <code>00</code>\u3002</p> </li> </ol> </li> <li> <p>\u89e3\u9501\u8fc7\u7a0b:</p> <ol> <li> <p>\u7ebf\u7a0b\u4f7f\u7528CAS\u64cd\u4f5c\uff0c\u5c06\u4fdd\u5b58\u5728\u9501\u8bb0\u5f55\u4e2d\u7684 Displaced Mark Word \u6062\u590d\u5230\u5bf9\u8c61\u5934\u4e2d\u3002</p> </li> <li> <p>\u5982\u679cCAS\u6210\u529f\uff0c\u89e3\u9501\u5b8c\u6210\u3002\u5982\u679c\u5931\u8d25\uff0c\u8bf4\u660e\u5728\u6301\u6709\u9501\u671f\u95f4\u6709\u5176\u4ed6\u7ebf\u7a0b\u5c1d\u8bd5\u83b7\u53d6\u9501\uff0c\u9501\u5df2\u7ecf\u81a8\u80c0\u4e3a\u4e86\u91cd\u91cf\u7ea7\u9501\uff0c\u6b64\u65f6\u9700\u8981\u8fdb\u5165\u91cd\u91cf\u7ea7\u9501\u7684\u89e3\u9501\u6d41\u7a0b\u3002</p> </li> </ol> </li> </ul> <p>2. \u8f7b\u91cf\u7ea7\u9501\u5206\u7c7b</p> <p>\u8f7b\u91cf\u7ea7\u9501\u7684\u672c\u8d28\u662f\u81ea\u65cb\uff0c\u5373\u7ebf\u7a0b\u4e0d\u88ab\u6302\u8d77\uff0c\u800c\u662f\u6267\u884c\u4e00\u4e2a\u7a7a\u5faa\u73af\u7b49\u5f85\u9501\u91ca\u653e\u3002</p> <ul> <li> <p>\u666e\u901a\u81ea\u65cb\u9501: \u5faa\u73af\u56fa\u5b9a\u7684\u6b21\u6570\u3002\u5728JDK 1.7\u540e\u5df2\u88ab\u5f03\u7528\u3002</p> </li> <li> <p>\u81ea\u9002\u5e94\u81ea\u65cb\u9501:</p> <ul> <li> <p>\u8fd9\u662f\u5f53\u524dJVM\u7684\u5b9e\u73b0\u65b9\u5f0f\u3002\u81ea\u65cb\u7684\u6b21\u6570\u662f\u52a8\u6001\u8c03\u6574\u7684\u3002</p> </li> <li> <p>\u5982\u679c\u4e4b\u524d\u5728\u540c\u4e00\u4e2a\u9501\u4e0a\u81ea\u65cb\u6210\u529f\u8fc7\uff0cJVM\u4f1a\u8ba4\u4e3a\u8fd9\u6b21\u4e5f\u5f88\u53ef\u80fd\u6210\u529f\uff0c\u5c31\u4f1a\u5141\u8bb8\u66f4\u957f\u65f6\u95f4\u7684\u81ea\u65cb\u3002</p> </li> <li> <p>\u5982\u679c\u5bf9\u4e8e\u67d0\u4e2a\u9501\uff0c\u81ea\u65cb\u5f88\u5c11\u6210\u529f\uff0cJVM\u4f1a\u7f29\u77ed\u751a\u81f3\u76f4\u63a5\u8df3\u8fc7\u81ea\u65cb\uff0c\u4ee5\u907f\u514d\u6d6a\u8d39CPU\u8d44\u6e90\u3002</p> </li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/Synchronized%20%E9%94%81/#_5","title":"\u4e94\u3001\u91cd\u91cf\u7ea7\u9501","text":"<p>1. \u91cd\u91cf\u7ea7\u9501\u6838\u5fc3\u539f\u7406</p> <ul> <li> <p>\u57fa\u7840: \u5f53\u8f7b\u91cf\u7ea7\u9501\u7684\u81ea\u65cb\u5931\u8d25\u6216\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u7ade\u4e89\u9501\u65f6\uff0c\u9501\u4f1a\u81a8\u80c0\u4e3a\u91cd\u91cf\u7ea7\u9501\u3002\u5b83\u4f9d\u8d56\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u7684\u4e92\u65a5\u9501\uff08Mutex Lock\uff09\u5b9e\u73b0\u3002</p> </li> <li> <p>\u6027\u80fd\u5f00\u9500: \u4f1a\u5bfc\u81f4\u7ebf\u7a0b\u7684\u963b\u585e\u548c\u5524\u9192\uff0c\u8fd9\u9700\u8981\u5728\u7528\u6237\u6001\u548c\u5185\u6838\u6001\u4e4b\u95f4\u8fdb\u884c\u5207\u6362\uff0c\u5f00\u9500\u5f88\u5927\u3002</p> </li> <li> <p>ObjectMonitor:</p> <ul> <li> <p>\u6bcf\u4e2aJava\u5bf9\u8c61\u90fd\u4e0e\u4e00\u4e2a<code>ObjectMonitor</code>\u5173\u8054\u3002\u91cd\u91cf\u7ea7\u9501\u7684\u5b9e\u73b0\u5c31\u662f\u57fa\u4e8e\u8fd9\u4e2aC++\u5bf9\u8c61\u3002</p> </li> <li> <p><code>ObjectMonitor</code> \u5185\u90e8\u6709\u51e0\u4e2a\u5173\u952e\u961f\u5217\uff1a</p> <ul> <li> <p><code>_owner</code>: \u6307\u5411\u5f53\u524d\u6301\u6709\u9501\u7684\u7ebf\u7a0b\u3002</p> </li> <li> <p><code>_cxq</code> (Contention Queue): \u7ade\u4e89\u961f\u5217\u3002\u6240\u6709\u65b0\u6765\u7684\u3001\u8bf7\u6c42\u9501\u7684\u7ebf\u7a0b\u9996\u5148\u8fdb\u5165\u6b64\u961f\u5217\u3002</p> </li> <li> <p><code>_EntryList</code>: \u5165\u53e3\u961f\u5217\u3002<code>_cxq</code> \u4e2d\u6709\u8d44\u683c\u83b7\u53d6\u9501\u7684\u7ebf\u7a0b\u4f1a\u88ab\u79fb\u5230\u8fd9\u91cc\u3002</p> </li> <li> <p><code>_WaitSet</code>: \u7b49\u5f85\u961f\u5217\u3002\u8c03\u7528\u4e86 <code>object.wait()</code> \u65b9\u6cd5\u7684\u7ebf\u7a0b\u4f1a\u8fdb\u5165\u6b64\u961f\u5217\uff0c\u5e76\u91ca\u653e\u9501\u3002</p> </li> </ul> </li> </ul> </li> <li> <p>\u5de5\u4f5c\u6d41\u7a0b: \u62a2\u9501\u5931\u8d25\u7684\u7ebf\u7a0b\u4f1a\u88ab\u5c01\u88c5\u6210\u8282\u70b9\u653e\u5165 <code>_cxq</code>\uff0c\u7136\u540e\u8fdb\u5165 <code>_EntryList</code> \u6210\u4e3a\u5019\u9009\u8005\u5e76\u88ab\u6302\u8d77\uff08park\uff09\u3002\u5f53\u6301\u6709\u9501\u7684\u7ebf\u7a0b\u91ca\u653e\u9501\u65f6\uff0c\u4f1a\u4ece <code>_EntryList</code> \u4e2d\u5524\u9192\uff08unpark\uff09\u4e00\u4e2a\u7ebf\u7a0b\u6765\u83b7\u53d6\u9501\u3002</p> </li> </ul> <p>2. \u91cd\u91cf\u7ea7\u9501\u6848\u4f8b\u5206\u6790</p> <p>\u4e00\u4e2a\u5b8c\u6574\u7684\u9501\u5347\u7ea7\u8fc7\u7a0b\u53ef\u4ee5\u8fd9\u6837\u89e6\u53d1\uff1a</p> <ol> <li> <p>\u7ebf\u7a0bA \u9996\u5148\u6267\u884c\uff0c\u83b7\u53d6\u9501\uff0c\u6b64\u65f6\u9501\u53d8\u4e3a\u504f\u5411A\u7684 \u504f\u5411\u9501\u3002</p> </li> <li> <p>\u7ebf\u7a0bB \u5728A\u7ed3\u675f\u540e\u6267\u884c\uff0c\u5c1d\u8bd5\u83b7\u53d6\u9501\uff0c\u53d1\u751f\u504f\u5411\u9501\u64a4\u9500\uff0c\u9501\u5347\u7ea7\u4e3a \u8f7b\u91cf\u7ea7\u9501\u3002</p> </li> <li> <p>\u7ebf\u7a0bB\u5728\u6301\u6709\u8f7b\u91cf\u7ea7\u9501\u65f6\uff0c\u5982\u679c\u957f\u65f6\u95f4\u4e0d\u91ca\u653e\uff08\u4f8b\u5982\uff0c\u901a\u8fc7 <code>LockSupport.park()</code> \u6682\u505c\uff09\uff0c\u6b64\u65f6 \u7ebf\u7a0bC \u8fc7\u6765\u7ade\u4e89\u3002</p> </li> <li> <p>\u7ebf\u7a0bC\u81ea\u65cb\u5c1d\u8bd5\u83b7\u53d6\u9501\u5931\u8d25\uff0c\u4e8e\u662f\u9501\u81a8\u80c0\u4e3a \u91cd\u91cf\u7ea7\u9501\u3002\u7ebf\u7a0bC\u88ab\u963b\u585e\u3002</p> </li> <li> <p>\u6b64\u65f6\uff0c\u9501\u5bf9\u8c61\u7684Mark Word\u6807\u5fd7\u4f4d\u53d8\u4e3a <code>10</code>\uff0c\u5e76\u6307\u5411 <code>ObjectMonitor</code> \u7684\u5730\u5740\u3002</p> </li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/java/Synchronized%20%E9%94%81/#mark-word","title":"Mark Word \u5b57\u6bb5","text":"<p>\u9996\u5148\u8981\u7406\u89e3\u4e00\u4e2a\u6838\u5fc3\u601d\u60f3\uff1aMark Word \u7684\u8bbe\u8ba1\u662f\u4e3a\u4e86\u5728\u6709\u9650\u7684\u7a7a\u95f4\u5185\u5b58\u50a8\u5c3d\u53ef\u80fd\u591a\u7684\u4fe1\u606f\u3002\u5b83\u4e0d\u50cf\u4e00\u4e2a\u56fa\u5b9a\u7684\u7ed3\u6784\u4f53\uff0c\u5b83\u7684\u5206\u533a\u548c\u6bcf\u4e2a\u533a\u57df\u7684\u542b\u4e49\u4f1a\u6839\u636e\u5bf9\u8c61\u5f53\u524d\u6240\u5904\u7684\u9501\u72b6\u6001\u800c\u52a8\u6001\u53d8\u5316\u3002\u53ef\u4ee5\u628a\u5b83\u770b\u4f5c\u662f\u4e00\u4e2a\u201c\u591a\u8def\u590d\u7528\u201d\u7684\u5b57\u6bb5\uff0c\u5176\u6700\u540e\u51e0\u4e2a\u6bd4\u7279\u4f4d\u5145\u5f53\u201c\u72b6\u6001\u6807\u5fd7\u201d\uff0c\u51b3\u5b9a\u4e86\u524d\u9762\u6240\u6709\u6bd4\u7279\u4f4d\u7684\u542b\u4e49\u3002\u4ee5\u4e0b\u4ecb\u7ecd\u4ee5\u4e3b\u6d41\u7684 64\u4f4dHotSpot\u865a\u62df\u673a \u4e3a\u4f8b\u3002\u572832\u4f4d\u865a\u62df\u673a\u4e2d\uff0c\u4f4d\u6570\u51cf\u534a\uff0c\u4f46\u5206\u533a\u601d\u60f3\u662f\u76f8\u540c\u7684\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/Synchronized%20%E9%94%81/#1-unlocked","title":"1. \u65e0\u9501\u72b6\u6001 (Unlocked)","text":"<p>\u8fd9\u662f\u5bf9\u8c61\u7684\u9ed8\u8ba4\u521d\u59cb\u72b6\u6001\uff08\u5728\u504f\u5411\u9501\u5ef6\u8fdf\u542f\u52a8\u671f\u95f4\uff09\u3002</p> <ul> <li> <p>\u72b6\u6001\u6807\u5fd7: \u6700\u540e3\u4f4d\u4e3a <code>001</code> (<code>biased_lock</code>=0, <code>lock</code>=01)\u3002</p> </li> <li> <p>\u5206\u533a\u7ed3\u6784 (\u4ece\u9ad8\u4f4d\u5230\u4f4e\u4f4d):</p> <p><code>|--------------------------------------------------|-----------|----|---|----| | unused (25 bits) | identity_hashcode (31 bits) | age (4 bits) | 0 | 01 | |--------------------------------------------------|-----------|----|---|----|</code></p> </li> <li> <p>\u5b57\u6bb5\u8bf4\u660e:</p> <ul> <li> <p><code>unused</code>: \u672a\u4f7f\u7528\u7684\u7a7a\u95f4\u3002</p> </li> <li> <p><code>identity_hashcode</code>: \u5bf9\u8c61\u7684\u201c\u8eab\u4efd\u54c8\u5e0c\u7801\u201d\u3002\u8fd9\u662f\u4e00\u4e2a\u5ef6\u8fdf\u52a0\u8f7d\uff08lazily loaded\uff09\u7684\u503c\u3002\u53ea\u6709\u5f53\u7a0b\u5e8f\u7b2c\u4e00\u6b21\u8c03\u7528\u8be5\u5bf9\u8c61\u7684 <code>System.identityHashCode()</code> \u6216 <code>Object.hashCode()</code> \u65b9\u6cd5\u65f6\uff0cJVM\u624d\u4f1a\u8ba1\u7b97\u8fd9\u4e2a\u54c8\u5e0c\u7801\u5e76\u5c06\u5176\u5b58\u5165\u8fd9\u91cc\u3002\u5728\u6b64\u4e4b\u524d\uff0c\u8fd9\u90e8\u5206\u533a\u57df\u53ef\u80fd\u4e3a\u7a7a\u3002</p> </li> <li> <p><code>age</code>: GC\u5206\u4ee3\u5e74\u9f84\uff084 bits\uff09\u3002\u5bf9\u8c61\u5728\u65b0\u751f\u4ee3\u7684Survivor\u533a\u6bcf\u71ac\u8fc7\u4e00\u6b21Minor GC\uff0c\u5e74\u9f84\u5c31\u52a01\u3002\u5f53\u5e74\u9f84\u8fbe\u5230\u9608\u503c\uff08\u9ed8\u8ba4\u4e3a15\uff09\u65f6\uff0c\u5bf9\u8c61\u4f1a\u88ab\u664b\u5347\u5230\u8001\u5e74\u4ee3\u30024\u4e2a\u6bd4\u7279\u4f4d\u6700\u5927\u80fd\u8868\u793a15\u3002</p> </li> <li> <p><code>biased_lock</code>: \u504f\u5411\u9501\u6807\u5fd7\u4f4d\uff0c\u6b64\u65f6\u4e3a0\uff0c\u8868\u793a\u975e\u504f\u5411\u9501\u72b6\u6001\u3002</p> </li> <li> <p><code>lock</code>: \u9501\u6807\u5fd7\u4f4d\uff0c\u6b64\u65f6\u4e3a01\uff0c\u4e0e <code>biased_lock</code> \u7ec4\u5408\u8868\u793a\u201c\u65e0\u9501\u201d\u72b6\u6001\u3002</p> </li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/Synchronized%20%E9%94%81/#2-biased-lock","title":"2. \u504f\u5411\u9501\u72b6\u6001 (Biased Lock)","text":"<p>\u5f53\u5bf9\u8c61\u542f\u7528\u4e86\u504f\u5411\u9501\uff0c\u5e76\u4e14\u88ab\u7b2c\u4e00\u4e2a\u7ebf\u7a0b\u83b7\u53d6\u65f6\uff0c\u5b83\u4f1a\u8fdb\u5165\u6b64\u72b6\u6001\u3002</p> <ul> <li> <p>\u72b6\u6001\u6807\u5fd7: \u6700\u540e3\u4f4d\u4e3a <code>101</code> (<code>biased_lock</code>=1, <code>lock</code>=01)\u3002</p> </li> <li> <p>\u5206\u533a\u7ed3\u6784:</p> <p><code>|--------------------------------|-----------|----|---|----| | Thread ID (54 bits) | epoch (2 bits) | age (4 bits) | 1 | 01 | |--------------------------------|-----------|----|---|----|</code></p> </li> <li> <p>\u5b57\u6bb5\u8bf4\u660e:</p> <ul> <li> <p><code>Thread ID</code>: \u8bb0\u5f55\u6301\u6709\u8be5\u504f\u5411\u9501\u7684\u7ebf\u7a0b\u7684ID\u6216\u6307\u9488\u3002\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u4f18\u5316\uff0c\u56e0\u4e3a\u7ebf\u7a0b\u518d\u6b21\u8bbf\u95ee\u65f6\uff0c\u53ea\u9700\u68c0\u67e5\u8fd9\u4e2aID\u5373\u53ef\uff0c\u65e0\u9700\u66f4\u590d\u6742\u7684\u64cd\u4f5c\u3002</p> </li> <li> <p><code>epoch</code>: \u7528\u4e8e\u6279\u91cf\u91cd\u504f\u5411\u548c\u6279\u91cf\u64a4\u9500\u4f18\u5316\u7684\u4e00\u4e2a\u5b57\u6bb5\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u4e2a\u201c\u7eaa\u5143\u201d\u6216\u201c\u7248\u672c\u53f7\u201d\uff0c\u7528\u4e8e\u5904\u7406\u504f\u5411\u9501\u7684\u6709\u6548\u6027\u3002</p> </li> <li> <p><code>age</code>: GC\u5206\u4ee3\u5e74\u9f84\uff0c\u4e0e\u65e0\u9501\u72b6\u6001\u65f6\u76f8\u540c\u3002</p> </li> <li> <p><code>biased_lock</code>: \u504f\u5411\u9501\u6807\u5fd7\u4f4d\uff0c\u4e3a1\u3002</p> </li> <li> <p><code>lock</code>: \u9501\u6807\u5fd7\u4f4d\uff0c\u4e3a01\u3002</p> </li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/Synchronized%20%E9%94%81/#3-lightweight-lock","title":"3. \u8f7b\u91cf\u7ea7\u9501\u72b6\u6001 (Lightweight Lock)","text":"<p>\u5f53\u51fa\u73b0\u7ebf\u7a0b\u7ade\u4e89\uff0c\u504f\u5411\u9501\u88ab\u64a4\u9500\u540e\uff0c\u9501\u4f1a\u5347\u7ea7\u4e3a\u8f7b\u91cf\u7ea7\u9501\u3002</p> <ul> <li> <p>\u72b6\u6001\u6807\u5fd7: \u6700\u540e2\u4f4d\u4e3a <code>00</code>\u3002</p> </li> <li> <p>\u5206\u533a\u7ed3\u6784:</p> <p><code>|------------------------------------------------------|----| | Pointer to Lock Record (62 bits) | 00 | |------------------------------------------------------|----|</code></p> </li> <li> <p>\u5b57\u6bb5\u8bf4\u660e:</p> <ul> <li> <p><code>Pointer to Lock Record</code>: \u6b64\u65f6Mark Word\u4e0d\u518d\u5b58\u50a8\u5bf9\u8c61\u7684\u54c8\u5e0c\u7801\u6216GC\u5e74\u9f84\u7b49\u4fe1\u606f\u3002\u8fd9\u4e9b\u4fe1\u606f\u88ab\u590d\u5236\u5e76\u4fdd\u5b58\u5230\u4e86\u6301\u6709\u9501\u7684\u7ebf\u7a0b\u6808\u5e27\u4e2d\u7684\u4e00\u4e2a\u53eb\u505a\u201c\u9501\u8bb0\u5f55\uff08Lock Record\uff09\u201d\u7684\u7a7a\u95f4\u91cc\u3002\u800cMark Word\u672c\u8eab\u5219\u53d8\u6210\u4e00\u4e2a\u6307\u9488\uff0c\u6307\u5411\u8fd9\u4e2a\u9501\u8bb0\u5f55\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0cJVM\u53ef\u4ee5\u5224\u65ad\u9501\u662f\u5426\u88ab\u5f53\u524d\u7ebf\u7a0b\u6301\u6709\u3002</p> </li> <li> <p><code>lock</code>: \u9501\u6807\u5fd7\u4f4d\uff0c\u4e3a00\uff0c\u8868\u793a\u8f7b\u91cf\u7ea7\u9501\u72b6\u6001\u3002</p> </li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/Synchronized%20%E9%94%81/#4-heavyweight-lock","title":"4. \u91cd\u91cf\u7ea7\u9501\u72b6\u6001 (Heavyweight Lock)","text":"<p>\u5f53\u7ebf\u7a0b\u81ea\u65cb\u83b7\u53d6\u8f7b\u91cf\u7ea7\u9501\u5931\u8d25\uff0c\u7ade\u4e89\u8fdb\u4e00\u6b65\u52a0\u5267\u65f6\uff0c\u9501\u4f1a\u81a8\u80c0\u4e3a\u91cd\u91cf\u7ea7\u9501\u3002</p> <ul> <li> <p>\u72b6\u6001\u6807\u5fd7: \u6700\u540e2\u4f4d\u4e3a <code>10</code>\u3002</p> </li> <li> <p>\u5206\u533a\u7ed3\u6784:</p> <p><code>|------------------------------------------------------|----| | Pointer to Heavyweight Monitor (62 bits) | 10 | |------------------------------------------------------|----|</code></p> </li> <li> <p>\u5b57\u6bb5\u8bf4\u660e:</p> <ul> <li> <p><code>Pointer to Heavyweight Monitor</code>: \u4e0e\u8f7b\u91cf\u7ea7\u9501\u7c7b\u4f3c\uff0cMark Word\u53d8\u6210\u4e00\u4e2a\u6307\u9488\uff0c\u4f46\u6b64\u65f6\u5b83\u6307\u5411\u7684\u662f\u4e00\u4e2a\u91cd\u91cf\u7ea7\u7684\u76d1\u89c6\u5668\u5bf9\u8c61\uff08<code>ObjectMonitor</code>\uff09\u3002\u8fd9\u4e2a\u76d1\u89c6\u5668\u5bf9\u8c61\u662f\u5728C++\u5c42\u9762\u5b9e\u73b0\u7684\uff0c\u5305\u542b\u4e86\u7b49\u5f85\u961f\u5217\u3001\u6301\u6709\u8005\u4fe1\u606f\u7b49\uff0c\u80fd\u591f\u7ba1\u7406\u7ebf\u7a0b\u7684\u963b\u585e\u548c\u5524\u9192\u3002</p> </li> <li> <p><code>lock</code>: \u9501\u6807\u5fd7\u4f4d\uff0c\u4e3a10\uff0c\u8868\u793a\u91cd\u91cf\u7ea7\u9501\u72b6\u6001\u3002</p> </li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/Synchronized%20%E9%94%81/#5-gc","title":"5. GC\u6807\u8bb0\u72b6\u6001","text":"<p>\u5728\u5783\u573e\u56de\u6536\u671f\u95f4\uff0cMark Word\u8fd8\u6709\u4e00\u79cd\u7279\u6b8a\u72b6\u6001\u3002</p> <ul> <li> <p>\u72b6\u6001\u6807\u5fd7: \u6700\u540e2\u4f4d\u4e3a <code>11</code>\u3002</p> </li> <li> <p>\u5206\u533a\u7ed3\u6784:</p> <p><code>|------------------------------------------------------|----| | GC-specific data | 11 | |------------------------------------------------------|----|</code></p> </li> <li> <p>\u5b57\u6bb5\u8bf4\u660e:</p> <ul> <li>\u6b64\u65f6Mark Word\u4e0d\u5305\u542b\u4efb\u4f55\u9501\u4fe1\u606f\uff0c\u5b83\u88abGC\u6a21\u5757\u7528\u4e8e\u5b58\u50a8\u4e0e\u5783\u573e\u56de\u6536\u76f8\u5173\u7684\u4fe1\u606f\uff0c\u4f8b\u5982\u6807\u8bb0\u5bf9\u8c61\u662f\u5426\u5b58\u6d3b\u3002</li> </ul> </li> </ul> \u9501\u72b6\u6001 biased_lock lock \u5b58\u50a8\u5185\u5bb9 (64\u4f4d) \u65e0\u9501 0 01 unused(25) + identity_hashcode(31) + age(4) \u504f\u5411\u9501 1 01 Thread ID(54) + epoch(2) + age(4) \u8f7b\u91cf\u7ea7\u9501 (N/A) 00 Pointer to Lock Record (62) \u91cd\u91cf\u7ea7\u9501 (N/A) 10 Pointer to Heavyweight Monitor (62) GC\u6807\u8bb0 (N/A) 11 GC\u76f8\u5173\u6570\u636e"},{"location":"%E7%AC%94%E8%AE%B0/java/ZGC/","title":"ZGC","text":""},{"location":"%E7%AC%94%E8%AE%B0/java/ZGC/#_1","title":"\u6982\u8ff0","text":"<p>ZGC (The Z Garbage Collector) \u662f JDK 11 \u4e2d\u5f15\u5165\u7684\u4e00\u6b3e\u53ef\u6269\u5c55\u3001\u4f4e\u5ef6\u8fdf\u7684\u5783\u573e\u56de\u6536\u5668\u3002\u5b83\u7684\u8bbe\u8ba1\u76ee\u6807\u65e8\u5728\u89e3\u51b3\u73b0\u4ee3\u5e94\u7528\u4e2d\u5927\u5185\u5b58\uff08TB \u7ea7\u522b\uff09\u548c\u4f4e\u5ef6\u8fdf\uff08\u4e9a\u6beb\u79d2\u7ea7\u505c\u987f\uff09\u7684\u9700\u6c42\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/ZGC/#_2","title":"\u8bbe\u8ba1\u76ee\u6807","text":"<ul> <li>\u505c\u987f\u65f6\u95f4\u4e0d\u8d85\u8fc7 10ms\u3002</li> <li>\u505c\u987f\u65f6\u95f4\u4e0d\u4f1a\u968f\u7740\u5806\u5185\u5b58\u6216\u5b58\u6d3b\u5bf9\u8c61\u5927\u5c0f\u7684\u589e\u52a0\u800c\u589e\u52a0\u3002</li> <li>\u652f\u6301\u4ece 8MB \u5230 16TB \u7684\u5806\u5927\u5c0f\u3002</li> <li>\u5bf9\u5e94\u7528\u541e\u5410\u91cf\u7684\u5f71\u54cd\u5c0f\u4e8e 15%\u3002</li> </ul> <p>ZGC \u975e\u5e38\u9002\u7528\u4e8e\u5bf9\u54cd\u5e94\u65f6\u95f4\u8981\u6c42\u6781\u4e3a\u82db\u523b\u7684\u670d\u52a1\uff0c\u4f8b\u5982\u91d1\u878d\u98ce\u63a7\u3001\u5b9e\u65f6\u7ade\u4ef7\u3001\u5728\u7ebf\u6e38\u620f\u7b49\u573a\u666f\u3002</p> <p>\u5bf9\u4e8e\u4f4e\u5ef6\u8fdf\u670d\u52a1\u800c\u8a00\uff0cGC \u5bfc\u81f4\u7684 STW (Stop-The-World) \u662f\u53ef\u7528\u6027\u7684\u4e3b\u8981\u75db\u70b9\u3002\u5728 STW \u671f\u95f4\uff0c\u6240\u6709\u5e94\u7528\u7ebf\u7a0b\u90fd\u4f1a\u6682\u505c\uff0c\u7b49\u5f85 GC \u5b8c\u6210\uff0c\u8fd9\u4f1a\u76f4\u63a5\u5bfc\u81f4\u670d\u52a1\u54cd\u5e94\u65f6\u95f4\u51fa\u73b0\u6bdb\u523a\u3002</p> <p>\u4ee5 CMS \u548c G1 \u4e3a\u4f8b\uff0c\u5b83\u4eec\u867d\u7136\u5728\u4e0d\u65ad\u4f18\u5316\u505c\u987f\u65f6\u95f4\uff0c\u4f46\u4ecd\u5b58\u5728\u74f6\u9888\u3002\u5b83\u4eec\u90fd\u4f7f\u7528\u4e86\u6807\u8bb0-\u590d\u5236\u7b97\u6cd5\uff0c\u5176\u4e3b\u8981\u505c\u987f\u6765\u6e90\u5982\u4e0b\uff1a</p> <ul> <li>CMS (\u65b0\u751f\u4ee3 ParNew): Young GC \u8fc7\u7a0b\u662f\u5b8c\u5168 STW \u7684\u3002</li> <li>G1: G1 \u7684 Young GC \u548c Mixed GC \u90fd\u5305\u542b\u6807\u8bb0-\u590d\u5236\u8fc7\u7a0b\u3002\u867d\u7136\u5176\u5e76\u53d1\u6807\u8bb0\u9636\u6bb5\u53ef\u4ee5\u4e0e\u5e94\u7528\u7ebf\u7a0b\u5e76\u884c\uff0c\u4f46\u5176\u5bf9\u8c61\u8f6c\u79fb\uff08\u590d\u5236\uff09\u9636\u6bb5\u662f\u5b8c\u5168 STW \u7684\u3002\u5f53\u5b58\u6d3b\u5bf9\u8c61\u6570\u91cf\u5de8\u5927\u65f6\uff0c\u8fd9\u4e2a\u9636\u6bb5\u7684\u8017\u65f6\u4f1a\u53d8\u5f97\u5f88\u957f\uff0c\u6210\u4e3a\u4e3b\u8981\u7684\u505c\u987f\u74f6\u9888\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/ZGC/#zgc","title":"ZGC \u539f\u7406","text":"<p>ZGC \u901a\u8fc7\u5bf9\u6807\u8bb0-\u590d\u5236\u7b97\u6cd5\u8fdb\u884c\u91cd\u5927\u6539\u8fdb\uff0c\u5b9e\u73b0\u4e86\u51e0\u4e4e\u6240\u6709\u9636\u6bb5\u7684\u5e76\u53d1\u6267\u884c\uff0c\u4ece\u6839\u672c\u4e0a\u89e3\u51b3\u4e86 STW \u8017\u65f6\u8fc7\u957f\u7684\u95ee\u9898\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/ZGC/#zgc_1","title":"\u5168\u5e76\u53d1\u7684 ZGC","text":"<p>ZGC \u7684 GC \u5468\u671f\u4e2d\uff0c\u5927\u90e8\u5206\u7e41\u91cd\u7684\u5de5\u4f5c\uff0c\u5982\u6807\u8bb0\u3001\u8f6c\u79fb\uff08\u590d\u5236\uff09\u3001\u91cd\u5b9a\u4f4d\uff0c\u90fd\u662f\u5e76\u53d1\u6267\u884c\u7684\uff0c\u4e0d\u4f1a\u6682\u505c\u5e94\u7528\u7ebf\u7a0b\u3002\u5176 STW \u9636\u6bb5\u53ea\u6709\u4e09\u4e2a\uff0c\u4e14\u8017\u65f6\u6781\u77ed\uff1a</p> <ol> <li>\u521d\u59cb\u6807\u8bb0\uff1a\u4ec5\u6807\u8bb0 GC Roots \u7684\u76f4\u63a5\u5f15\u7528\uff0c\u8017\u65f6\u4e0e GC Roots \u6570\u91cf\u6210\u6b63\u6bd4\uff0c\u901a\u5e38\u5728 1ms \u4ee5\u5185\u3002</li> <li>\u518d\u6807\u8bb0\uff1a\u5904\u7406\u5e76\u53d1\u6807\u8bb0\u671f\u95f4\u53d1\u751f\u53d8\u5316\u7684\u5bf9\u8c61\uff0c\u8017\u65f6\u901a\u5e38\u4e5f\u975e\u5e38\u77ed\u3002</li> <li>\u521d\u59cb\u8f6c\u79fb\uff1a\u540c\u6837\u53ea\u5904\u7406 GC Roots\uff0c\u8017\u65f6\u7a33\u5b9a\u4e14\u77ed\u6682\u3002</li> </ol> <p>\u7531\u4e8e ZGC \u7684\u505c\u987f\u65f6\u95f4\u53ea\u548c GC Roots \u7684\u6570\u91cf\u6709\u5173\uff0c\u4e0e\u5806\u5927\u5c0f\u548c\u5b58\u6d3b\u5bf9\u8c61\u6570\u91cf\u65e0\u5173\uff0c\u56e0\u6b64\u5b83\u80fd\u591f\u5b9e\u73b0\u53ef\u9884\u6d4b\u7684\u3001\u6781\u4f4e\u7684\u505c\u987f\u65f6\u95f4\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/ZGC/#zgc_2","title":"ZGC \u5173\u952e\u6280\u672f","text":"<p>ZGC \u5b9e\u73b0\u5168\u5e76\u53d1\u7684\u6838\u5fc3\u5728\u4e8e\u4e24\u9879\u5173\u952e\u6280\u672f\uff1a\u7740\u8272\u6307\u9488 (Colored Pointers) \u548c\u8bfb\u5c4f\u969c (Read Barriers)\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/ZGC/#1-colored-pointers","title":"1. \u7740\u8272\u6307\u9488 (Colored Pointers)","text":"<p>ZGC \u5229\u7528\u4e86 64 \u4f4d\u64cd\u4f5c\u7cfb\u7edf\u6307\u9488\u4e2d\u5e76\u672a\u5b8c\u5168\u4f7f\u7528\u7684 bit \u4f4d\u3002\u5b83\u5c06\u5bf9\u8c61\u5730\u5740\u7684\u7279\u5b9a bit \u4f4d\u7528\u4e8e\u5b58\u50a8\u5143\u6570\u636e\uff0c\u5982\u5bf9\u8c61\u7684\u6807\u8bb0\u72b6\u6001\uff08Marked\uff09\u3001\u662f\u5426\u5df2\u7ecf\u91cd\u5b9a\u4f4d\uff08Remapped\uff09\u7b49\u3002</p> <ul> <li>\u4f18\u52bf\uff1aGC \u7ebf\u7a0b\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u6307\u9488\u7684\u989c\u8272\u6765\u5224\u65ad\u5bf9\u8c61\u72b6\u6001\uff0c\u65e0\u9700\u8bbf\u95ee\u5bf9\u8c61\u5934\uff0c\u901f\u5ea6\u66f4\u5feb\uff0c\u4e14\u51cf\u5c11\u4e86\u5185\u5b58\u8bbf\u95ee\u3002</li> <li>\u5730\u5740\u7a7a\u95f4\uff1aZGC \u5c06 64 \u4f4d\u865a\u62df\u5730\u5740\u5212\u5206\u4e3a\u4e0d\u540c\u7684\u89c6\u56fe\uff08\u5982 M0, M1, Remapped\uff09\uff0c\u5728 GC \u7684\u4e0d\u540c\u9636\u6bb5\uff0c\u901a\u8fc7\u5207\u6362\u5730\u5740\u89c6\u56fe\u6765\u9ad8\u6548\u5730\u7ba1\u7406\u5bf9\u8c61\u3002\u4f8b\u5982\uff0c\u4e00\u4e2a\u5bf9\u8c61\u7684\u7269\u7406\u5730\u5740\u662f\u56fa\u5b9a\u7684\uff0c\u4f46\u5b83\u5728 GC \u8fc7\u7a0b\u4e2d\u53ef\u4ee5\u6709\u591a\u4e2a\u4e0d\u540c\u201c\u989c\u8272\u201d\u7684\u865a\u62df\u5730\u5740\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/ZGC/#2-read-barriers","title":"2. \u8bfb\u5c4f\u969c (Read Barriers)","text":"<p>\u8bfb\u5c4f\u969c\u662f JVM \u5728 JIT \u7f16\u8bd1\u65f6\u63d2\u5165\u5230\u4ee3\u7801\u4e2d\u7684\u4e00\u5c0f\u6bb5\u903b\u8f91\u3002\u5f53\u5e94\u7528\u7a0b\u5e8f\u4ece\u5806\u4e2d\u8bfb\u53d6\u4e00\u4e2a\u5bf9\u8c61\u5f15\u7528\u65f6\uff0c\u4f1a\u89e6\u53d1\u8fd9\u6bb5\u903b\u8f91\u3002</p> <ul> <li>\u4f5c\u7528\uff1a\u5728 GC \u7684\u5e76\u53d1\u8f6c\u79fb\u9636\u6bb5\uff0c\u5e94\u7528\u7ebf\u7a0b\u53ef\u80fd\u4f1a\u8bfb\u53d6\u4e00\u4e2a\u5df2\u7ecf\u88ab GC \u7ebf\u7a0b\u79fb\u52a8\u4e86\u7684\u5bf9\u8c61\u3002\u6b64\u65f6\uff0c\u8bfb\u5c4f\u969c\u4f1a\u62e6\u622a\u8fd9\u6b21\u8bfb\u53d6\u64cd\u4f5c\uff0c\u53d1\u73b0\u6307\u9488\u6307\u5411\u7684\u662f\u65e7\u5730\u5740\uff08\u901a\u8fc7\u6307\u9488\u989c\u8272\u5224\u65ad\uff09\uff0c\u7136\u540e\u5b83\u4f1a\u81ea\u6211\u4fee\u590d\uff0c\u5c06\u6307\u9488\u66f4\u65b0\u4e3a\u5bf9\u8c61\u7684\u65b0\u5730\u5740\u518d\u8fd4\u56de\u7ed9\u5e94\u7528\u7ebf\u7a0b\u3002</li> <li>\u5bf9\u5e94\u7528\u7684\u5f71\u54cd\uff1a\u8fd9\u4e2a\u8fc7\u7a0b\u5bf9\u5e94\u7528\u4ee3\u7801\u662f\u900f\u660e\u7684\uff0c\u4fdd\u8bc1\u4e86\u5373\u4f7f\u5728\u5e76\u53d1\u8f6c\u79fb\u8fc7\u7a0b\u4e2d\uff0c\u5e94\u7528\u7ebf\u7a0b\u4e5f\u603b\u80fd\u8bbf\u95ee\u5230\u6b63\u786e\u7684\u5bf9\u8c61\u3002\u4e0d\u8fc7\uff0c\u8bfb\u5c4f\u969c\u4f1a\u5e26\u6765\u4e00\u5b9a\u7684\u6027\u80fd\u5f00\u9500\uff0c\u8fd9\u4e5f\u662f ZGC \u53ef\u80fd\u4f1a\u8f7b\u5fae\u964d\u4f4e\u5e94\u7528\u541e\u5410\u91cf\u7684\u4e00\u4e2a\u539f\u56e0\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/ZGC/#zgc_3","title":"ZGC \u8c03\u4f18\u5b9e\u8df5","text":"<p>ZGC \u5e76\u975e\u5f00\u7bb1\u5373\u7528\u5c31\u662f\u6700\u4f18\u7684\uff0c\u9700\u8981\u6839\u636e\u670d\u52a1\u7279\u6027\u8fdb\u884c\u8c03\u4f18\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/ZGC/#_3","title":"\u91cd\u8981\u914d\u7f6e\u53c2\u6570","text":"<ul> <li><code>-XX:+UseZGC</code>: \u542f\u7528 ZGC\u3002</li> <li><code>-Xms</code>, <code>-Xmx</code>: \u5efa\u8bae\u8bbe\u7f6e\u4e3a\u76f8\u540c\u7684\u503c\uff0c\u907f\u514d\u5806\u5185\u5b58\u52a8\u6001\u4f38\u7f29\u5e26\u6765\u7684\u5f00\u9500\u3002</li> <li><code>-XX:ConcGCThreads</code>: \u5e76\u53d1 GC \u7684\u7ebf\u7a0b\u6570\u3002\u589e\u52a0\u8be5\u503c\u53ef\u4ee5\u52a0\u5feb GC \u901f\u5ea6\uff0c\u4f46\u4f1a\u5360\u7528\u66f4\u591a CPU \u8d44\u6e90\uff0c\u53ef\u80fd\u5f71\u54cd\u5e94\u7528\u541e\u5410\u91cf\u3002</li> <li><code>-XX:ZCollectionInterval</code>: \u8bbe\u7f6e\u4e00\u4e2a\u56fa\u5b9a\u7684\u65f6\u95f4\u95f4\u9694\uff08\u79d2\uff09\u6765\u89e6\u53d1 GC\u3002\u9002\u7528\u4e8e\u5e94\u5bf9\u7a81\u53d1\u6d41\u91cf\uff0c\u907f\u514d\u81ea\u9002\u5e94\u7b97\u6cd5\u54cd\u5e94\u4e0d\u53ca\u65f6\u3002</li> <li><code>-XX:ZAllocationSpikeTolerance</code>: \u81ea\u9002\u5e94\u7b97\u6cd5\u7684\u4fee\u6b63\u7cfb\u6570\uff08\u9ed8\u8ba4\u4e3a 2\uff09\u3002\u503c\u8d8a\u5927\uff0cGC \u89e6\u53d1\u5f97\u8d8a\u4fdd\u5b88\u3001\u8d8a\u9891\u7e41\uff0c\u6709\u52a9\u4e8e\u5e94\u5bf9\u5185\u5b58\u5206\u914d\u901f\u7387\u7a81\u7136\u98d9\u5347\u7684\u60c5\u51b5\u3002</li> <li><code>-XX:-ZProactive</code>: \u5173\u95ed ZGC \u7684\u4e3b\u52a8\u56de\u6536\u673a\u5236\u3002\u5982\u679c\u5df2\u7ecf\u8bbe\u7f6e\u4e86\u56fa\u5b9a\u95f4\u9694\u89e6\u53d1\uff0c\u53ef\u4ee5\u5173\u95ed\u6b64\u9879\u4ee5\u907f\u514d\u4e0d\u5fc5\u8981\u7684 GC\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/ZGC/#gc","title":"GC \u89e6\u53d1\u65f6\u673a","text":"<p>\u7406\u89e3 ZGC \u4f55\u65f6\u89e6\u53d1 GC \u81f3\u5173\u91cd\u8981\uff0c\u6838\u5fc3\u76ee\u6807\u662f\u907f\u514d\u56e0\u5783\u573e\u56de\u6536\u901f\u5ea6\u8ddf\u4e0d\u4e0a\u5206\u914d\u901f\u5ea6\u800c\u5bfc\u81f4\u7684\u201c\u5185\u5b58\u5206\u914d\u963b\u585e (Allocation Stall)\u201d\uff0c\u8fd9\u4f1a\u9020\u6210\u5e94\u7528\u7ebf\u7a0b\u957f\u65f6\u95f4\u505c\u987f\u3002</p> <ul> <li>\u81ea\u9002\u5e94\u7b97\u6cd5\uff1a\u6700\u4e3b\u8981\u7684\u89e6\u53d1\u65b9\u5f0f\uff0c\u6839\u636e\u8fd1\u671f\u7684\u5185\u5b58\u5206\u914d\u901f\u7387\u548c GC \u8017\u65f6\u6765\u52a8\u6001\u8ba1\u7b97\u4e0b\u4e00\u6b21 GC \u7684\u89e6\u53d1\u65f6\u673a\u3002</li> <li>\u56fa\u5b9a\u65f6\u95f4\u95f4\u9694\uff1a\u901a\u8fc7 <code>-XX:ZCollectionInterval</code> \u8bbe\u7f6e\uff0c\u7528\u4e8e\u515c\u5e95\uff0c\u5e94\u5bf9\u7a81\u53d1\u6d41\u91cf\u3002</li> <li>\u5185\u5b58\u5206\u914d\u963b\u585e\uff1a\u6700\u4e0d\u5e0c\u671b\u770b\u5230\u7684\u89e6\u53d1\u65b9\u5f0f\uff0c\u8868\u793a\u5806\u5185\u5b58\u5df2\u88ab\u8017\u5c3d\uff0c\u5e94\u7528\u7ebf\u7a0b\u5fc5\u987b\u7b49\u5f85 GC \u5b8c\u6210\u624d\u80fd\u7ee7\u7eed\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/ZGC/#_4","title":"\u8c03\u4f18\u6848\u4f8b\u5206\u6790","text":""},{"location":"%E7%AC%94%E8%AE%B0/java/ZGC/#_5","title":"\u6848\u4f8b\u4e00\uff1a\u6d41\u91cf\u7a81\u589e\u5bfc\u81f4\u6027\u80fd\u6bdb\u523a","text":"<ul> <li>\u73b0\u8c61\uff1a\u65e5\u5fd7\u4e2d\u51fa\u73b0\u5927\u91cf \"Allocation Stall\"\u3002</li> <li>\u5206\u6790\uff1a\u81ea\u9002\u5e94\u7b97\u6cd5\u6ca1\u80fd\u53ca\u65f6\u9884\u6d4b\u5230\u6d41\u91cf\u9ad8\u5cf0\uff0cGC \u89e6\u53d1\u8fc7\u665a\u3002</li> <li>\u89e3\u51b3\uff1a<ol> <li>\u8bbe\u7f6e <code>-XX:ZCollectionInterval</code> \u6765\u4fdd\u8bc1\u89c4\u5f8b\u6027\u7684 GC\u3002</li> <li>\u589e\u5927 <code>-XX:ZAllocationSpikeTolerance</code> \u4f7f\u81ea\u9002\u5e94\u7b97\u6cd5\u66f4\u654f\u611f\u3002</li> </ol> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/ZGC/#gc_1","title":"\u6848\u4f8b\u4e8c\uff1aGC \u9891\u7e41\u4f46\u4f9d\u7136\u51fa\u73b0\u6027\u80fd\u6bdb\u523a","text":"<ul> <li>\u73b0\u8c61\uff1aGC \u95f4\u9694\u5f88\u77ed\uff0c\u4f46\u8fd8\u662f\u51fa\u73b0\u963b\u585e\u3002</li> <li>\u5206\u6790\uff1aGC \u89e6\u53d1\u53ca\u65f6\uff0c\u4f46\u56de\u6536\u901f\u5ea6\u8ddf\u4e0d\u4e0a\u5206\u914d\u901f\u5ea6\u3002</li> <li>\u89e3\u51b3\uff1a\u589e\u5927 <code>-XX:ConcGCThreads</code>\uff0c\u6295\u5165\u66f4\u591a CPU \u8d44\u6e90\u6765\u52a0\u5feb\u5e76\u53d1\u56de\u6536\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/ZGC/#gc_2","title":"\u6848\u4f8b\u4e09\uff1a\u5355\u6b21 GC \u505c\u987f\u65f6\u95f4\u8fdc\u8d85\u9884\u671f","text":"<ul> <li>\u73b0\u8c61\uff1aSTW \u9636\u6bb5\u65e5\u5fd7\u663e\u793a \"Pause Roots ClassLoaderDataGraph\" \u8017\u65f6\u8f83\u957f\u3002</li> <li>\u5206\u6790\uff1aSTW \u65f6\u95f4\u4e0e GC Roots \u6570\u91cf\u6b63\u76f8\u5173\u3002\u7ecf\u6392\u67e5\u53d1\u73b0\u7cfb\u7edf\u4e2d\u5b58\u5728\u4e0a\u4e07\u4e2a ClassLoader \u5b9e\u4f8b\uff0c\u5b83\u4eec\u90fd\u662f GC Roots\u3002</li> <li>\u89e3\u51b3\uff1a\u4ece\u5e94\u7528\u5c42\u9762\u89e3\u51b3\uff0c\u4f8b\u5982\u5347\u7ea7\u4e0d\u5408\u7406\u4f7f\u7528 ClassLoader \u7684\u7ec4\u4ef6\u7248\u672c\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/ZGC/#gc_3","title":"\u6848\u4f8b\u56db\uff1a\u670d\u52a1\u8fd0\u884c\u8d8a\u4e45\uff0cGC \u505c\u987f\u8d8a\u957f","text":"<ul> <li>\u73b0\u8c61\uff1aSTW \u9636\u6bb5\u65e5\u5fd7\u663e\u793a \"Pause Roots CodeCache\" \u8017\u65f6\u968f\u65f6\u95f4\u589e\u957f\u3002</li> <li>\u5206\u6790\uff1aCodeCache\uff08\u7528\u4e8e\u5b58\u653e JIT \u7f16\u8bd1\u540e\u7684\u4ee3\u7801\uff09\u4e5f\u662f GC Roots \u7684\u4e00\u90e8\u5206\u3002\u968f\u7740\u670d\u52a1\u8fd0\u884c\uff0c\u5927\u91cf\u65b9\u6cd5\u88ab JIT \u7f16\u8bd1\uff0c\u5bfc\u81f4 CodeCache \u81a8\u80c0\u3002</li> <li>\u89e3\u51b3\uff1a\u4ece\u4e1a\u52a1\u5c42\u9762\u4f18\u5316\uff0c\u51cf\u5c11\u9700\u8981 JIT \u7f16\u8bd1\u7684\u4ee3\u7801\u91cf\uff0c\u4f8b\u5982\u7cbe\u7b80\u6216\u5220\u9664\u65e0\u7528\u903b\u8f91\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%20%28GC%29/","title":"\u5783\u573e\u56de\u6536 (GC)","text":"<p>\u5783\u573e\u56de\u6536\u673a\u5236\uff08GC\uff09\u662f Java \u865a\u62df\u673a\uff08JVM\uff09\u63d0\u4f9b\u7684\u81ea\u52a8\u5185\u5b58\u7ba1\u7406\u529f\u80fd\u3002\u5b83\u4e3b\u8981\u9488\u5bf9\u5806\u5185\u5b58\u548c\u65b9\u6cd5\u533a\u8fdb\u884c\u56de\u6536\u3002\u800c\u865a\u62df\u673a\u6808\u3001\u672c\u5730\u65b9\u6cd5\u6808\u548c\u7a0b\u5e8f\u8ba1\u6570\u5668\u662f\u7ebf\u7a0b\u79c1\u6709\u7684\uff0c\u968f\u7ebf\u7a0b\u751f\u706d\uff0c\u65e0\u9700 GC \u7ba1\u7406\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%20%28GC%29/#_1","title":"\u5224\u65ad\u5bf9\u8c61\u662f\u5426\u53ef\u88ab\u56de\u6536","text":"<p>JVM \u4f7f\u7528\u201c\u53ef\u8fbe\u6027\u5206\u6790\u7b97\u6cd5\u201d\u6765\u786e\u5b9a\u4e00\u4e2a\u5bf9\u8c61\u662f\u5426\u201c\u5b58\u6d3b\u201d\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%20%28GC%29/#1","title":"1. \u5f15\u7528\u8ba1\u6570\u7b97\u6cd5","text":"<ul> <li>\u539f\u7406\uff1a\u4e3a\u6bcf\u4e2a\u5bf9\u8c61\u8bbe\u7f6e\u4e00\u4e2a\u5f15\u7528\u8ba1\u6570\u5668\u3002\u5f53\u6709\u5730\u65b9\u5f15\u7528\u5b83\u65f6\uff0c\u8ba1\u6570\u5668\u52a01\uff1b\u5f15\u7528\u5931\u6548\u65f6\uff0c\u51cf1\u3002\u4efb\u4f55\u65f6\u523b\u8ba1\u6570\u5668\u4e3a0\u7684\u5bf9\u8c61\u5c31\u662f\u4e0d\u53ef\u80fd\u518d\u88ab\u4f7f\u7528\u7684\u3002</li> <li>\u7f3a\u70b9\uff1a\u65e0\u6cd5\u89e3\u51b3\u5bf9\u8c61\u4e4b\u95f4<code>\u5faa\u73af\u5f15\u7528</code>\u7684\u95ee\u9898\u3002\u4f8b\u5982 <code>A.instance = B</code> \u4e14 <code>B.instance = A</code>\uff0c\u4f1a\u5bfc\u81f4\u4e8c\u8005\u7684\u5f15\u7528\u8ba1\u6570\u6c38\u8fdc\u4e0d\u4e3a0\uff0c\u4ece\u800c\u65e0\u6cd5\u88ab\u56de\u6536\u3002</li> <li>\u7ed3\u8bba\uff1aJava \u865a\u62df\u673a<code>\u4e0d\u4f7f\u7528</code>\u5f15\u7528\u8ba1\u6570\u7b97\u6cd5\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%20%28GC%29/#2","title":"2. \u53ef\u8fbe\u6027\u5206\u6790\u7b97\u6cd5","text":"<ul> <li>\u539f\u7406\uff1a\u4ece\u4e00\u7cfb\u5217\u79f0\u4e3a\u201cGC Roots\u201d\u7684\u6839\u5bf9\u8c61\u4f5c\u4e3a\u8d77\u59cb\u70b9\uff0c\u5411\u4e0b\u641c\u7d22\u5b83\u4eec\u6240\u5f15\u7528\u7684\u5bf9\u8c61\u3002\u641c\u7d22\u6240\u8d70\u8fc7\u7684\u8def\u5f84\u79f0\u4e3a\u5f15\u7528\u94fe\uff0c\u5f53\u4e00\u4e2a\u5bf9\u8c61\u5230 GC Roots \u6ca1\u6709\u4efb\u4f55\u5f15\u7528\u94fe\u76f8\u8fde\u65f6\uff0c\u5219\u8bc1\u660e\u6b64\u5bf9\u8c61\u662f\u4e0d\u53ef\u7528\u7684\u3002</li> <li>GC Roots \u5305\u62ec\uff1a<ul> <li>\u865a\u62df\u673a\u6808\u4e2d\u5f15\u7528\u7684\u5bf9\u8c61\uff08\u6808\u5e27\u4e2d\u7684\u672c\u5730\u53d8\u91cf\u8868\uff09\u3002</li> <li>\u672c\u5730\u65b9\u6cd5\u6808\u4e2d JNI\uff08\u5373 Native \u65b9\u6cd5\uff09\u5f15\u7528\u7684\u5bf9\u8c61\u3002</li> <li>\u65b9\u6cd5\u533a\u4e2d\u7c7b\u9759\u6001\u5c5e\u6027\u5f15\u7528\u7684\u5bf9\u8c61\u3002</li> <li>\u65b9\u6cd5\u533a\u4e2d\u5e38\u91cf\u5f15\u7528\u7684\u5bf9\u8c61\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%20%28GC%29/#3","title":"3. \u65b9\u6cd5\u533a\u7684\u56de\u6536","text":"<p>\u65b9\u6cd5\u533a\u7684\u5783\u573e\u56de\u6536\u6027\u4ef7\u6bd4\u901a\u5e38\u8f83\u4f4e\u3002\u4e3b\u8981\u56de\u6536\u4e24\u90e8\u5206\u5185\u5bb9\uff1a - <code>\u5e9f\u5f03\u7684\u5e38\u91cf</code>\uff1a\u6ca1\u6709\u5bf9\u8c61\u5f15\u7528\u8be5\u5e38\u91cf\u3002 - <code>\u4e0d\u518d\u4f7f\u7528\u7684\u7c7b</code>\uff1a\u56de\u6536\u6761\u4ef6\u6781\u4e3a\u82db\u523b\uff0c\u5fc5\u987b\u540c\u65f6\u6ee1\u8db3\uff1a     1. \u8be5\u7c7b\u7684\u6240\u6709\u5b9e\u4f8b\u90fd\u5df2\u88ab\u56de\u6536\u3002     2. \u52a0\u8f7d\u8be5\u7c7b\u7684 ClassLoader \u5df2\u88ab\u56de\u6536\u3002     3. \u8be5\u7c7b\u5bf9\u5e94\u7684 <code>java.lang.Class</code> \u5bf9\u8c61\u5728\u4efb\u4f55\u5730\u65b9\u90fd\u6ca1\u6709\u88ab\u5f15\u7528\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%20%28GC%29/#4-finalize","title":"4. finalize() \u65b9\u6cd5","text":"<ul> <li><code>finalize()</code> \u662f\u4e00\u4e2a\u7279\u6b8a\u65b9\u6cd5\uff0c\u5141\u8bb8\u5bf9\u8c61\u5728\u88ab\u56de\u6536\u524d\u6267\u884c\u4e00\u4e9b\u6e05\u7406\u64cd\u4f5c\uff08\u5982\u5173\u95ed\u5916\u90e8\u8d44\u6e90\uff09\u3002</li> <li>JVM \u4f1a\u5728\u5bf9\u8c61\u88ab\u6807\u8bb0\u4e3a\u4e0d\u53ef\u8fbe\u540e\uff0c\u5224\u65ad\u5176\u662f\u5426\u9700\u8981\u6267\u884c <code>finalize()</code>\u3002\u5982\u679c\u9700\u8981\uff0c\u5bf9\u8c61\u4f1a\u6682\u65f6\u88ab\u201c\u62ef\u6551\u201d\uff0c\u653e\u5165\u4e00\u4e2a\u961f\u5217\u4e2d\u7b49\u5f85\u6267\u884c\u3002\u5982\u679c\u5728 <code>finalize()</code> \u65b9\u6cd5\u4e2d\uff0c\u5bf9\u8c61\u91cd\u65b0\u4e0e GC Roots \u5efa\u7acb\u5173\u8054\uff0c\u5b83\u5c06\u5728\u6b64\u6b21\u56de\u6536\u4e2d\u5b58\u6d3b\u3002</li> <li>\u6ce8\u610f\uff1a<code>finalize()</code> \u65b9\u6cd5<code>\u53ea\u80fd\u88ab\u7cfb\u7edf\u8c03\u7528\u4e00\u6b21</code>\u3002\u4e0d\u63a8\u8350\u4f7f\u7528\u6b64\u65b9\u6cd5\uff0c\u56e0\u4e3a\u5b83\u8fd0\u884c\u4ee3\u4ef7\u9ad8\u3001\u4e0d\u786e\u5b9a\u6027\u5927\uff0c<code>try-finally</code> \u7ed3\u6784\u662f\u66f4\u597d\u7684\u66ff\u4ee3\u65b9\u6848\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%20%28GC%29/#java","title":"Java \u7684\u56db\u79cd\u5f15\u7528\u7c7b\u578b","text":""},{"location":"%E7%AC%94%E8%AE%B0/java/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%20%28GC%29/#1-strong-reference","title":"1. \u5f3a\u5f15\u7528 (Strong Reference)","text":"<ul> <li>\u5b9a\u4e49\uff1a\u7c7b\u4f3c <code>Object obj = new Object()</code> \u7684\u5f15\u7528\u3002</li> <li>\u7279\u70b9\uff1a\u53ea\u8981\u5f3a\u5f15\u7528\u5b58\u5728\uff0c\u5783\u573e\u6536\u96c6\u5668<code>\u6c38\u8fdc\u4e0d\u4f1a</code>\u56de\u6536\u88ab\u5f15\u7528\u7684\u5bf9\u8c61\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%20%28GC%29/#2-soft-reference","title":"2. \u8f6f\u5f15\u7528 (Soft Reference)","text":"<ul> <li>\u5b9a\u4e49\uff1a\u4f7f\u7528 <code>SoftReference</code> \u7c7b\u5b9e\u73b0\u3002</li> <li>\u7279\u70b9\uff1a\u5f53\u5185\u5b58\u5373\u5c06\u6ea2\u51fa\uff08OOM\uff09\u4e4b\u524d\uff0c\u5783\u573e\u6536\u96c6\u5668\u4f1a\u628a\u8fd9\u4e9b\u5bf9\u8c61\u5217\u8fdb\u56de\u6536\u8303\u56f4\u4e4b\u4e2d\u8fdb\u884c\u7b2c\u4e8c\u6b21\u56de\u6536\u3002\u5982\u679c\u8fd9\u6b21\u56de\u6536\u8fd8\u6ca1\u6709\u8db3\u591f\u7684\u5185\u5b58\uff0c\u624d\u4f1a\u629b\u51fa\u5185\u5b58\u6ea2\u51fa\u5f02\u5e38\u3002\u9002\u5408\u7528\u4f5c\u7f13\u5b58\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%20%28GC%29/#3-weak-reference","title":"3. \u5f31\u5f15\u7528 (Weak Reference)","text":"<ul> <li>\u5b9a\u4e49\uff1a\u4f7f\u7528 <code>WeakReference</code> \u7c7b\u5b9e\u73b0\u3002</li> <li>\u7279\u70b9\uff1a\u751f\u547d\u5468\u671f\u66f4\u77ed\u3002\u65e0\u8bba\u5f53\u524d\u5185\u5b58\u662f\u5426\u5145\u8db3\uff0c<code>\u53ea\u8981\u53d1\u751f\u5783\u573e\u56de\u6536</code>\uff0c\u88ab\u5f31\u5f15\u7528\u5173\u8054\u7684\u5bf9\u8c61\u90fd\u4f1a\u88ab\u56de\u6536\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%20%28GC%29/#4-phantom-reference","title":"4. \u865a\u5f15\u7528 (Phantom Reference)","text":"<ul> <li>\u5b9a\u4e49\uff1a\u4f7f\u7528 <code>PhantomReference</code> \u7c7b\u5b9e\u73b0\uff0c\u4e5f\u79f0\u201c\u5e7b\u5f71\u5f15\u7528\u201d\u3002</li> <li>\u7279\u70b9\uff1a\u5b8c\u5168\u4e0d\u5f71\u54cd\u5bf9\u8c61\u7684\u751f\u5b58\u65f6\u95f4\u3002\u5176\u552f\u4e00\u76ee\u7684\u662f\u80fd\u5728\u8fd9\u4e2a\u5bf9\u8c61\u88ab\u6536\u96c6\u5668\u56de\u6536\u65f6\u6536\u5230\u4e00\u4e2a\u7cfb\u7edf\u901a\u77e5\uff0c\u4ee5\u4fbf\u8fdb\u884c\u540e\u7eed\u5904\u7406\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%20%28GC%29/#_2","title":"\u4e09\u3001\u6838\u5fc3\u5783\u573e\u56de\u6536\u7b97\u6cd5","text":""},{"location":"%E7%AC%94%E8%AE%B0/java/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%20%28GC%29/#1-mark-sweep","title":"1. \u6807\u8bb0 - \u6e05\u9664 (Mark-Sweep)","text":"<ul> <li>\u8fc7\u7a0b\uff1a\u5206\u4e3a\u201c\u6807\u8bb0\u201d\u548c\u201c\u6e05\u9664\u201d\u4e24\u4e2a\u9636\u6bb5\u3002\u9996\u5148\u6807\u8bb0\u51fa\u6240\u6709\u9700\u8981\u56de\u6536\u7684\u5bf9\u8c61\uff0c\u6807\u8bb0\u5b8c\u6210\u540e\u7edf\u4e00\u56de\u6536\u6240\u6709\u88ab\u6807\u8bb0\u7684\u5bf9\u8c61\u3002</li> <li>\u7f3a\u70b9\uff1a<ul> <li>\u6548\u7387\u4e0d\u9ad8\uff08\u6807\u8bb0\u548c\u6e05\u9664\u4e24\u4e2a\u8fc7\u7a0b\u7684\u6548\u7387\u90fd\u4e0d\u9ad8\uff09\u3002</li> <li>\u4ea7\u751f\u5927\u91cf<code>\u5185\u5b58\u788e\u7247</code>\uff0c\u53ef\u80fd\u5bfc\u81f4\u4e4b\u540e\u65e0\u6cd5\u4e3a\u5927\u5bf9\u8c61\u5206\u914d\u5230\u8db3\u591f\u7684\u8fde\u7eed\u5185\u5b58\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%20%28GC%29/#2-mark-compact","title":"2. \u6807\u8bb0 - \u6574\u7406 (Mark-Compact)","text":"<ul> <li>\u8fc7\u7a0b\uff1a\u6807\u8bb0\u8fc7\u7a0b\u4e0e\u201c\u6807\u8bb0-\u6e05\u9664\u201d\u4e00\u6837\uff0c\u4f46\u540e\u7eed\u6b65\u9aa4\u4e0d\u662f\u76f4\u63a5\u5bf9\u53ef\u56de\u6536\u5bf9\u8c61\u8fdb\u884c\u6e05\u7406\uff0c\u800c\u662f\u8ba9\u6240\u6709\u5b58\u6d3b\u7684\u5bf9\u8c61\u90fd\u5411\u4e00\u7aef\u79fb\u52a8\uff0c\u7136\u540e\u76f4\u63a5\u6e05\u7406\u6389\u7aef\u8fb9\u754c\u4ee5\u5916\u7684\u5185\u5b58\u3002</li> <li>\u4f18\u70b9\uff1a\u89e3\u51b3\u4e86\u5185\u5b58\u788e\u7247\u95ee\u9898\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%20%28GC%29/#3-copying","title":"3. \u590d\u5236 (Copying)","text":"<ul> <li>\u8fc7\u7a0b\uff1a\u5c06\u53ef\u7528\u5185\u5b58\u6309\u5bb9\u91cf\u5212\u5206\u4e3a\u5927\u5c0f\u76f8\u7b49\u7684\u4e24\u5757\uff0c\u6bcf\u6b21\u53ea\u4f7f\u7528\u5176\u4e2d\u7684\u4e00\u5757\u3002\u5f53\u8fd9\u4e00\u5757\u7684\u5185\u5b58\u7528\u5b8c\u4e86\uff0c\u5c31\u5c06\u8fd8\u5b58\u6d3b\u7740\u7684\u5bf9\u8c61\u590d\u5236\u5230\u53e6\u5916\u4e00\u5757\u4e0a\u9762\uff0c\u7136\u540e\u518d\u628a\u5df2\u4f7f\u7528\u8fc7\u7684\u5185\u5b58\u7a7a\u95f4\u4e00\u6b21\u6e05\u7406\u6389\u3002</li> <li>\u4f18\u70b9\uff1a\u5b9e\u73b0\u7b80\u5355\uff0c\u8fd0\u884c\u9ad8\u6548\uff0c\u4e0d\u4f1a\u4ea7\u751f\u5185\u5b58\u788e\u7247\u3002</li> <li>\u7f3a\u70b9\uff1a\u5c06\u5185\u5b58\u7f29\u5c0f\u4e3a\u4e86\u539f\u6765\u7684\u4e00\u534a\uff0c\u4ee3\u4ef7\u8f83\u9ad8\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%20%28GC%29/#4-generational-collection","title":"4. \u5206\u4ee3\u6536\u96c6 (Generational Collection)","text":"<ul> <li>\u8fd9\u662f\u5f53\u524d\u5546\u4e1a\u865a\u62df\u673a\u90fd\u91c7\u7528\u7684\u4e3b\u6d41\u601d\u60f3\uff0c\u5b83\u672c\u8eab\u5e76\u975e\u4e00\u79cd\u5177\u4f53\u7684\u7b97\u6cd5\u3002</li> <li>\u6838\u5fc3\u601d\u60f3\uff1a\u6839\u636e\u5bf9\u8c61\u5b58\u6d3b\u5468\u671f\u7684\u4e0d\u540c\u5c06\u5185\u5b58\u5212\u5206\u4e3a\u51e0\u5757\u3002\u4e00\u822c\u662f\u628a Java \u5806\u5206\u4e3a\u65b0\u751f\u4ee3\uff08Young Generation\uff09\u548c\u8001\u5e74\u4ee3\uff08Old Generation\uff09\u3002\u65b0\u751f\u4ee3\u5185\u90e8\u901a\u5e38\u5206\u4e3a\u4e00\u4e2a\u8f83\u5927\u7684 Eden \u533a\u548c\u4e24\u4e2a\u8f83\u5c0f\u7684 Survivor \u533a\uff08From \u548c To\uff09\uff0c\u9ed8\u8ba4\u6bd4\u4f8b\u662f 8:1:1\u3002\u56de\u6536\u65f6\uff0c\u5c06 Eden \u548c\u4e00\u4e2a Survivor \u533a\u4e2d\u7684\u5b58\u6d3b\u5bf9\u8c61\u590d\u5236\u5230\u53e6\u4e00\u4e2a\u7a7a\u7684 Survivor \u533a\u3002</li> <li>\u56de\u6536\u7b56\u7565\uff1a<ul> <li><code>\u65b0\u751f\u4ee3</code>\uff1a\u5bf9\u8c61\u5b58\u6d3b\u7387\u4f4e\uff0c\u9009\u7528<code>\u590d\u5236\u7b97\u6cd5</code>\u3002</li> <li><code>\u8001\u5e74\u4ee3</code>\uff1a\u5bf9\u8c61\u5b58\u6d3b\u7387\u9ad8\uff0c\u9009\u7528<code>\u6807\u8bb0-\u6e05\u9664</code>\u6216<code>\u6807\u8bb0-\u6574\u7406</code>\u7b97\u6cd5\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%20%28GC%29/#_3","title":"\u4e3b\u6d41\u5783\u573e\u6536\u96c6\u5668","text":"<p>\u4e0d\u540c\u7684\u6536\u96c6\u5668\u6709\u4e0d\u540c\u7684\u7279\u70b9\uff0c\u5982\u201c\u5355\u7ebf\u7a0b/\u591a\u7ebf\u7a0b\u201d\u3001\u201c\u4e32\u884c/\u5e76\u884c/\u5e76\u53d1\u201d\u3002</p> <ul> <li><code>\u4e32\u884c</code>\uff1aGC \u8fd0\u884c\u65f6\uff0c\u7528\u6237\u7ebf\u7a0b\u5fc5\u987b\u6682\u505c\uff08Stop-the-World, STW\uff09\u3002</li> <li><code>\u5e76\u884c</code>\uff1a\u591a\u4e2a GC \u7ebf\u7a0b\u540c\u65f6\u5de5\u4f5c\uff0c\u4f46\u7528\u6237\u7ebf\u7a0b\u4ecd\u9700\u6682\u505c\uff08STW\uff09\u3002</li> <li><code>\u5e76\u53d1</code>\uff1aGC \u7ebf\u7a0b\u4e0e\u7528\u6237\u7ebf\u7a0b\u53ef\u4ee5\u540c\u65f6\u6267\u884c\uff08\u4e0d\u5b8c\u5168\u6ca1\u6709 STW\uff0c\u53ea\u662f\u65f6\u95f4\u6781\u77ed\uff09\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%20%28GC%29/#1_1","title":"1. \u65b0\u751f\u4ee3\u6536\u96c6\u5668","text":"<ul> <li><code>Serial</code>\uff1a\u5355\u7ebf\u7a0b\u3001\u4e32\u884c\u3001\u590d\u5236\u7b97\u6cd5\u3002\u7b80\u5355\u9ad8\u6548\uff0c\u662f Client \u6a21\u5f0f\u4e0b\u9ed8\u8ba4\u7684\u65b0\u751f\u4ee3\u6536\u96c6\u5668\u3002</li> <li><code>ParNew</code>\uff1aSerial \u7684\u591a\u7ebf\u7a0b\u7248\u672c\uff0c\u5e76\u884c\u3001\u590d\u5236\u7b97\u6cd5\u3002\u662f\u8bb8\u591a Server \u6a21\u5f0f\u4e0b JVM \u7684\u9996\u9009\uff0c\u5e38\u4e0e CMS \u6536\u96c6\u5668\u914d\u5408\u4f7f\u7528\u3002</li> <li><code>Parallel Scavenge</code>\uff1a\u591a\u7ebf\u7a0b\u3001\u5e76\u884c\u3001\u590d\u5236\u7b97\u6cd5\u3002\u5173\u6ce8\u70b9\u662f<code>\u541e\u5410\u91cf</code>\uff08\u7528\u6237\u4ee3\u7801\u8fd0\u884c\u65f6\u95f4 / (\u7528\u6237\u4ee3\u7801\u8fd0\u884c\u65f6\u95f4 + GC \u65f6\u95f4)\uff09\uff0c\u88ab\u79f0\u4e3a\u201c\u541e\u5410\u91cf\u4f18\u5148\u201d\u6536\u96c6\u5668\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%20%28GC%29/#2_1","title":"2. \u8001\u5e74\u4ee3\u6536\u96c6\u5668","text":"<ul> <li><code>Serial Old</code>\uff1aSerial \u7684\u8001\u5e74\u4ee3\u7248\u672c\uff0c\u5355\u7ebf\u7a0b\u3001\u4e32\u884c\u3001\u6807\u8bb0-\u6574\u7406\u7b97\u6cd5\u3002</li> <li><code>Parallel Old</code>\uff1aParallel Scavenge \u7684\u8001\u5e74\u4ee3\u7248\u672c\uff0c\u591a\u7ebf\u7a0b\u3001\u5e76\u884c\u3001\u6807\u8bb0-\u6574\u7406\u7b97\u6cd5\u3002\u4e0e Parallel Scavenge \u7ec4\u5408\u8ffd\u6c42\u9ad8\u541e\u5410\u91cf\u3002</li> <li><code>CMS (Concurrent Mark Sweep)</code>\uff1a\u5e76\u53d1\u3001\u6807\u8bb0-\u6e05\u9664\u7b97\u6cd5\u3002\u4ee5\u83b7\u53d6<code>\u6700\u77ed\u56de\u6536\u505c\u987f\u65f6\u95f4</code>\u4e3a\u76ee\u6807\u3002<ul> <li>\u7f3a\u70b9\uff1a\u5bf9 CPU \u8d44\u6e90\u654f\u611f\u3001\u4f1a\u4ea7\u751f\u6d6e\u52a8\u5783\u573e\u3001\u4f7f\u7528\u6807\u8bb0-\u6e05\u9664\u7b97\u6cd5\u5bfc\u81f4\u7a7a\u95f4\u788e\u7247\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%20%28GC%29/#3_1","title":"3. \u6574\u5806\u6536\u96c6\u5668","text":"<ul> <li><code>G1 (Garbage-First)</code>\uff1a\u9762\u5411\u670d\u52a1\u7aef\u5e94\u7528\uff0c\u662f\u672a\u6765\u66ff\u4ee3 CMS \u7684\u6536\u96c6\u5668\u3002<ul> <li>\u7279\u70b9\uff1a<ul> <li><code>\u7a7a\u95f4\u6574\u5408</code>\uff1a\u5c06\u5806\u5212\u5206\u4e3a\u591a\u4e2a\u72ec\u7acb\u7684 Region\uff0c\u6574\u4f53\u57fa\u4e8e\u201c\u6807\u8bb0-\u6574\u7406\u201d\uff0c\u5c40\u90e8\u57fa\u4e8e\u201c\u590d\u5236\u201d\uff0c\u4e0d\u4f1a\u4ea7\u751f\u788e\u7247\u3002</li> <li><code>\u53ef\u9884\u6d4b\u7684\u505c\u987f</code>\uff1a\u7528\u6237\u53ef\u4ee5\u6307\u5b9a\u671f\u671b\u7684\u505c\u987f\u65f6\u95f4\u3002</li> <li><code>\u5206\u4ee3\u4f46\u65e0\u9700\u7269\u7406\u9694\u79bb</code>\uff1a\u53ef\u4ee5\u540c\u65f6\u5bf9\u65b0\u751f\u4ee3\u548c\u8001\u5e74\u4ee3\u8fdb\u884c\u56de\u6536\uff08Mixed GC\uff09\u3002</li> </ul> </li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%20%28GC%29/#_4","title":"\u5185\u5b58\u5206\u914d\u4e0e\u56de\u6536\u7b56\u7565","text":""},{"location":"%E7%AC%94%E8%AE%B0/java/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%20%28GC%29/#gc","title":"GC \u7c7b\u578b\u5206\u7c7b","text":"<ul> <li><code>Minor GC / Young GC</code>\uff1a\u53ea\u9488\u5bf9\u65b0\u751f\u4ee3\u7684\u5783\u573e\u56de\u6536\u3002</li> <li><code>Major GC / Old GC</code>\uff1a\u53ea\u9488\u5bf9\u8001\u5e74\u4ee3\u7684\u5783\u573e\u56de\u6536\uff08\u76ee\u524d\u53ea\u6709 CMS \u6536\u96c6\u5668\u6709\u5355\u72ec\u7684\u8001\u5e74\u4ee3\u56de\u6536\uff09\u3002</li> <li><code>Mixed GC</code>\uff1a\u6536\u96c6\u6574\u4e2a\u65b0\u751f\u4ee3\u4ee5\u53ca\u90e8\u5206\u8001\u5e74\u4ee3\uff08\u76ee\u524d\u53ea\u6709 G1 \u6536\u96c6\u5668\u6709\u8fd9\u79cd\u884c\u4e3a\uff09\u3002</li> <li><code>Full GC</code>\uff1a\u6536\u96c6\u6574\u4e2a Java \u5806\u548c\u65b9\u6cd5\u533a\u7684\u56de\u6536\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%20%28GC%29/#_5","title":"\u5185\u5b58\u5206\u914d\u4e3b\u8981\u89c4\u5219","text":"<ol> <li><code>\u5bf9\u8c61\u4f18\u5148\u5728 Eden \u5206\u914d</code>\uff1a\u5927\u591a\u6570\u5bf9\u8c61\u5728\u65b0\u751f\u4ee3 Eden \u533a\u751f\u6210\u3002\u5f53 Eden \u6ee1\u65f6\u89e6\u53d1 Minor GC\u3002</li> <li><code>\u5927\u5bf9\u8c61\u76f4\u63a5\u8fdb\u5165\u8001\u5e74\u4ee3</code>\uff1a\u9700\u8981\u5927\u91cf\u8fde\u7eed\u5185\u5b58\u7a7a\u95f4\u7684\u5bf9\u8c61\uff08\u5982\u957f\u5b57\u7b26\u4e32\u3001\u6570\u7ec4\uff09\u76f4\u63a5\u5728\u8001\u5e74\u4ee3\u5206\u914d\uff0c\u907f\u514d\u5728\u65b0\u751f\u4ee3\u53cd\u590d\u590d\u5236\u3002</li> <li><code>\u957f\u671f\u5b58\u6d3b\u7684\u5bf9\u8c61\u5c06\u8fdb\u5165\u8001\u5e74\u4ee3</code>\uff1a\u5bf9\u8c61\u5728 Survivor \u533a\u6bcf\u71ac\u8fc7\u4e00\u6b21 Minor GC\uff0c\u5e74\u9f84\u5c31\u589e\u52a01\u3002\u5f53\u5e74\u9f84\u8fbe\u5230\u4e00\u5b9a\u9608\u503c\uff08\u9ed8\u8ba4\u4e3a15\uff09\uff0c\u5c31\u4f1a\u88ab\u664b\u5347\u5230\u8001\u5e74\u4ee3\u3002</li> <li><code>\u52a8\u6001\u5bf9\u8c61\u5e74\u9f84\u5224\u5b9a</code>\uff1a\u5982\u679c\u5728 Survivor \u7a7a\u95f4\u4e2d\u76f8\u540c\u5e74\u9f84\u6240\u6709\u5bf9\u8c61\u5927\u5c0f\u7684\u603b\u548c\u5927\u4e8e Survivor \u7a7a\u95f4\u7684\u4e00\u534a\uff0c\u5e74\u9f84\u5927\u4e8e\u6216\u7b49\u4e8e\u8be5\u5e74\u9f84\u7684\u5bf9\u8c61\u5c31\u53ef\u4ee5\u76f4\u63a5\u8fdb\u5165\u8001\u5e74\u4ee3\u3002</li> <li><code>\u7a7a\u95f4\u5206\u914d\u62c5\u4fdd</code>\uff1aMinor GC \u524d\uff0cJVM \u4f1a\u68c0\u67e5\u8001\u5e74\u4ee3\u6700\u5927\u53ef\u7528\u8fde\u7eed\u7a7a\u95f4\u662f\u5426\u5927\u4e8e\u65b0\u751f\u4ee3\u6240\u6709\u5bf9\u8c61\u603b\u7a7a\u95f4\u3002\u5982\u679c\u5927\u4e8e\uff0c\u5219 Minor GC \u5b89\u5168\uff1b\u5426\u5219\uff0c\u4f1a\u68c0\u67e5\u662f\u5426\u5927\u4e8e\u5386\u6b21\u664b\u5347\u5230\u8001\u5e74\u4ee3\u5bf9\u8c61\u7684\u5e73\u5747\u5927\u5c0f\uff0c\u4ee5\u51b3\u5b9a\u662f\u5426\u5192\u9669\u6267\u884c Minor GC \u8fd8\u662f\u76f4\u63a5\u8fdb\u884c Full GC\u3002</li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/java/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%20%28GC%29/#full-gc","title":"Full GC \u7684\u4e3b\u8981\u89e6\u53d1\u6761\u4ef6","text":"<ol> <li><code>\u8c03\u7528 System.gc()</code>\uff1a\u4ec5\u4e3a\u5efa\u8bae\uff0cJVM \u4e0d\u4e00\u5b9a\u4f1a\u6267\u884c\u3002</li> <li><code>\u8001\u5e74\u4ee3\u7a7a\u95f4\u4e0d\u8db3</code>\uff1a\u5f53\u8001\u5e74\u4ee3\u6ca1\u6709\u8db3\u591f\u7a7a\u95f4\u5b58\u653e\u65b0\u664b\u5347\u7684\u5bf9\u8c61\u6216\u5927\u5bf9\u8c61\u65f6\u3002</li> <li><code>\u7a7a\u95f4\u5206\u914d\u62c5\u4fdd\u5931\u8d25</code>\uff1a\u5728 Minor GC \u540e\uff0c\u5b58\u6d3b\u5bf9\u8c61\u5927\u4e8e\u8001\u5e74\u4ee3\u5269\u4f59\u7a7a\u95f4\uff0c\u5bfc\u81f4\u62c5\u4fdd\u5931\u8d25\u3002</li> <li><code>\u65b9\u6cd5\u533a\u7a7a\u95f4\u4e0d\u8db3</code>\uff08JDK 1.7 \u53ca\u4ee5\u524d\u7684\u6c38\u4e45\u4ee3\uff09\uff1a\u6c38\u4e45\u4ee3\u6ee1\u65f6\u4f1a\u89e6\u53d1 Full GC\u3002</li> <li><code>Concurrent Mode Failure</code>\uff1a\u5728\u6267\u884c CMS GC \u7684\u8fc7\u7a0b\u4e2d\uff0c\u6709\u65b0\u5bf9\u8c61\u8981\u653e\u5165\u8001\u5e74\u4ee3\uff0c\u4f46\u6b64\u65f6\u8001\u5e74\u4ee3\u7a7a\u95f4\u4e0d\u8db3\u3002</li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/java/%E9%94%81/","title":"\u9501","text":""},{"location":"%E7%AC%94%E8%AE%B0/java/%E9%94%81/#vs","title":"\u4e50\u89c2\u9501 vs. \u60b2\u89c2\u9501","text":"<p>\u8fd9\u662f\u4e24\u79cd\u5e7f\u4e49\u7684\u5e76\u53d1\u63a7\u5236\u601d\u60f3\u3002</p> <ul> <li> <p>\u60b2\u89c2\u9501 (Pessimistic Lock)</p> <ul> <li>\u7406\u5ff5\uff1a\u603b\u8ba4\u4e3a\u6570\u636e\u4f1a\u88ab\u5176\u4ed6\u7ebf\u7a0b\u4fee\u6539\uff0c\u6240\u4ee5\u5728\u64cd\u4f5c\u6570\u636e\u524d\u5148\u52a0\u9501\uff0c\u963b\u6b62\u5176\u4ed6\u7ebf\u7a0b\u8bbf\u95ee\u3002</li> <li>\u5b9e\u73b0\uff1aJava\u4e2d\u7684<code>synchronized</code>\u5173\u952e\u5b57\u548c<code>Lock</code>\u7684\u5b9e\u73b0\u7c7b\uff08\u5982<code>ReentrantLock</code>\uff09\u90fd\u662f\u60b2\u89c2\u9501\u3002</li> <li>\u9002\u7528\u573a\u666f\uff1a\u5199\u64cd\u4f5c\u591a\u7684\u573a\u666f\u3002\u5148\u52a0\u9501\u80fd\u4fdd\u8bc1\u6570\u636e\u5199\u5165\u7684\u6b63\u786e\u6027\u3002</li> <li> <p>\u8c03\u7528\u793a\u4f8b\uff1a     ```java     // synchronized     public synchronized void testMethod() {         // \u64cd\u4f5c\u540c\u6b65\u8d44\u6e90     }</p> <p>// ReentrantLock private ReentrantLock lock = new ReentrantLock(); public void modifyPublicResources() {     lock.lock();     // \u64cd\u4f5c\u540c\u6b65\u8d44\u6e90     lock.unlock(); } ```</p> </li> </ul> </li> <li> <p>\u4e50\u89c2\u9501 (Optimistic Lock)</p> <ul> <li>\u7406\u5ff5\uff1a\u603b\u8ba4\u4e3a\u6570\u636e\u4e0d\u4f1a\u88ab\u5176\u4ed6\u7ebf\u7a0b\u4fee\u6539\uff0c\u6240\u4ee5\u4e0d\u52a0\u9501\u3002\u53ea\u5728\u66f4\u65b0\u6570\u636e\u65f6\uff0c\u68c0\u67e5\u5728\u6b64\u671f\u95f4\u6570\u636e\u662f\u5426\u88ab\u5176\u4ed6\u7ebf\u7a0b\u4fee\u6539\u8fc7\u3002</li> <li>\u5b9e\u73b0\uff1a\u901a\u8fc7\u65e0\u9501\u7f16\u7a0b\u5b9e\u73b0\uff0c\u6700\u5e38\u7528\u7684\u662fCAS (Compare And Swap) \u7b97\u6cd5\u3002Java\u7684\u539f\u5b50\u7c7b\uff08\u5982<code>AtomicInteger</code>\uff09\u5c31\u662f\u57fa\u4e8eCAS\u5b9e\u73b0\u7684\u3002</li> <li>\u9002\u7528\u573a\u666f\uff1a\u8bfb\u64cd\u4f5c\u591a\u7684\u573a\u666f\u3002\u4e0d\u52a0\u9501\u7684\u7279\u6027\u53ef\u4ee5\u5927\u5e45\u63d0\u5347\u8bfb\u53d6\u6027\u80fd\u3002</li> <li>\u8c03\u7528\u793a\u4f8b\uff1a     <code>java     private AtomicInteger atomicInteger = new AtomicInteger();     atomicInteger.incrementAndGet(); // \u539f\u5b50\u81ea\u589e\u64cd\u4f5c</code></li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/%E9%94%81/#cas-compare-and-swap","title":"CAS (Compare And Swap)","text":"<p>CAS\u662f\u4e00\u79cd\u65e0\u9501\u7b97\u6cd5\uff0c\u5b83\u5305\u542b\u4e09\u4e2a\u64cd\u4f5c\u6570\uff1a 1.  \u5185\u5b58\u503c V 2.  \u9884\u671f\u503c A 3.  \u65b0\u503c B</p> <p>\u64cd\u4f5c\u6d41\u7a0b\uff1a\u5f53\u4e14\u4ec5\u5f53\u5185\u5b58\u503c<code>V</code>\u7b49\u4e8e\u9884\u671f\u503c<code>A</code>\u65f6\uff0c\u624d\u7528\u65b0\u503c<code>B</code>\u539f\u5b50\u6027\u5730\u66f4\u65b0<code>V</code>\u7684\u503c\u3002\u5426\u5219\uff0c\u4e0d\u505a\u4efb\u4f55\u64cd\u4f5c\u5e76\u901a\u5e38\u8fdb\u884c\u91cd\u8bd5\uff08\u8fd9\u4e2a\u91cd\u8bd5\u8fc7\u7a0b\u4e5f\u53eb\u81ea\u65cb\uff09\u3002</p> <p>\u6e90\u7801\u5206\u6790 (<code>AtomicInteger.incrementAndGet</code>) 1.  \u5e95\u5c42\u8c03\u7528<code>Unsafe</code>\u7c7b\u7684<code>getAndAddInt</code>\u65b9\u6cd5\u3002 2.  \u8be5\u65b9\u6cd5\u5728\u4e00\u4e2a<code>do-while</code>\u5faa\u73af\u4e2d\uff1a     *   \u9996\u5148\uff0c\u8bfb\u53d6\u5f53\u524d\u5185\u5b58\u4e2d\u7684\u503c<code>v</code> (<code>getIntVolatile</code>)\u3002     *   \u7136\u540e\uff0c\u8c03\u7528<code>compareAndSwapInt</code>\u5c1d\u8bd5\u5c06\u5185\u5b58\u503c\u4ece<code>v</code>\u66f4\u65b0\u4e3a<code>v + delta</code>\u3002     *   \u5982\u679c\u66f4\u65b0\u5931\u8d25\uff08\u610f\u5473\u7740\u5728\u8bfb\u53d6<code>v</code>\u4e4b\u540e\uff0c\u6709\u5176\u4ed6\u7ebf\u7a0b\u4fee\u6539\u4e86\u5185\u5b58\u503c\uff09\uff0c\u5faa\u73af\u7ee7\u7eed\u91cd\u8bd5\uff0c\u76f4\u5230\u6210\u529f\u4e3a\u6b62\u3002</p> <p>CAS\u7684\u4e09\u4e2a\u4e3b\u8981\u95ee\u9898\u53ca\u89e3\u51b3\u65b9\u6848 1.  ABA\u95ee\u9898\uff1a\u4e00\u4e2a\u503c\u4eceA\u53d8\u4e3aB\u53c8\u53d8\u56deA\uff0cCAS\u68c0\u67e5\u65f6\u4f1a\u8bef\u8ba4\u4e3a\u6ca1\u6709\u53d8\u5316\u3002     *   \u89e3\u51b3\uff1a\u4f7f\u7528\u7248\u672c\u53f7\u673a\u5236\u3002JDK 1.5+ \u63d0\u4f9b\u4e86<code>AtomicStampedReference</code>\u6765\u89e3\u51b3\u3002 2.  \u5faa\u73af\u65f6\u95f4\u957f\u5f00\u9500\u5927\uff1a\u5982\u679c\u81ea\u65cb\u957f\u65f6\u95f4\u4e0d\u6210\u529f\uff0c\u4f1a\u7ed9CPU\u5e26\u6765\u5de8\u5927\u5f00\u9500\u3002 3.  \u53ea\u80fd\u4fdd\u8bc1\u4e00\u4e2a\u5171\u4eab\u53d8\u91cf\u7684\u539f\u5b50\u64cd\u4f5c\uff1a\u5bf9\u591a\u4e2a\u53d8\u91cf\u64cd\u4f5c\u65f6\uff0c\u65e0\u6cd5\u4fdd\u8bc1\u539f\u5b50\u6027\u3002     *   \u89e3\u51b3\uff1a\u5c06\u591a\u4e2a\u53d8\u91cf\u5c01\u88c5\u6210\u4e00\u4e2a\u5bf9\u8c61\uff0c\u7136\u540e\u4f7f\u7528<code>AtomicReference</code>\u8fdb\u884cCAS\u64cd\u4f5c\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/%E9%94%81/#vs_1","title":"\u81ea\u65cb\u9501 vs. \u9002\u5e94\u6027\u81ea\u65cb\u9501","text":"<ul> <li> <p>\u80cc\u666f\uff1a\u7ebf\u7a0b\u7684\u963b\u585e\u548c\u5524\u9192\u9700\u8981\u64cd\u4f5c\u7cfb\u7edf\u5207\u6362CPU\u72b6\u6001\uff0c\u5f00\u9500\u8f83\u5927\u3002\u5982\u679c\u540c\u6b65\u4ee3\u7801\u5757\u6267\u884c\u65f6\u95f4\u5f88\u77ed\uff0c\u8fd9\u4e2a\u5f00\u9500\u53ef\u80fd\u5f97\u4e0d\u507f\u5931\u3002</p> </li> <li> <p>\u81ea\u65cb\u9501 (Spin Lock)</p> <ul> <li>\u7406\u5ff5\uff1a\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u8bf7\u6c42\u9501\u4f46\u9501\u88ab\u5360\u7528\u65f6\uff0c\u8be5\u7ebf\u7a0b\u4e0d\u88ab\u6302\u8d77\uff08\u4e0d\u653e\u5f03CPU\uff09\uff0c\u800c\u662f\u6267\u884c\u4e00\u4e2a\u5fd9\u5faa\u73af\uff08\u5373\u201c\u81ea\u65cb\u201d\uff09\uff0c\u7b49\u5f85\u9501\u7684\u91ca\u653e\u3002</li> <li>\u4f18\u70b9\uff1a\u907f\u514d\u4e86\u7ebf\u7a0b\u5207\u6362\u7684\u5f00\u9500\u3002</li> <li>\u7f3a\u70b9\uff1a\u5360\u7528CPU\u65f6\u95f4\u3002\u5982\u679c\u9501\u88ab\u5360\u7528\u65f6\u95f4\u957f\uff0c\u4f1a\u6d6a\u8d39\u5904\u7406\u5668\u8d44\u6e90\u3002</li> <li>\u5b9e\u73b0\uff1a\u5176\u539f\u7406\u4e5f\u662fCAS\u3002<code>AtomicInteger</code>\u7684<code>do-while</code>\u5faa\u73af\u5c31\u662f\u4e00\u4e2a\u81ea\u65cb\u64cd\u4f5c\u3002</li> <li>\u9650\u5236\uff1a\u81ea\u65cb\u6709\u6b21\u6570\u9650\u5236\uff08\u9ed8\u8ba410\u6b21\uff09\uff0c\u8d85\u8fc7\u9650\u5236\u4ecd\u672a\u83b7\u5f97\u9501\uff0c\u7ebf\u7a0b\u5c31\u4f1a\u88ab\u6302\u8d77\u3002</li> </ul> </li> <li> <p>\u9002\u5e94\u6027\u81ea\u65cb\u9501 (Adaptive Spin Lock)</p> <ul> <li>\u7406\u5ff5\uff1a\u81ea\u65cb\u7684\u65f6\u95f4\uff08\u6b21\u6570\uff09\u4e0d\u518d\u662f\u56fa\u5b9a\u7684\uff0c\u800c\u662f\u52a8\u6001\u8c03\u6574\u7684\u3002</li> <li>\u8c03\u6574\u4f9d\u636e\uff1a\u6839\u636e\u524d\u4e00\u6b21\u5728\u540c\u4e00\u4e2a\u9501\u4e0a\u7684\u81ea\u65cb\u65f6\u95f4\u4ee5\u53ca\u9501\u62e5\u6709\u8005\u7684\u72b6\u6001\u6765\u51b3\u5b9a\u3002</li> <li>\u89c4\u5219\uff1a<ul> <li>\u5982\u679c\u4e0a\u4e00\u6b21\u81ea\u65cb\u6210\u529f\u83b7\u53d6\u4e86\u9501\uff0c\u4e14\u6301\u6709\u9501\u7684\u7ebf\u7a0b\u6b63\u5728\u8fd0\u884c\uff0c\u865a\u62df\u673a\u4f1a\u8ba4\u4e3a\u8fd9\u6b21\u81ea\u65cb\u4e5f\u5f88\u53ef\u80fd\u6210\u529f\uff0c\u5e76\u5141\u8bb8\u66f4\u957f\u65f6\u95f4\u7684\u81ea\u65cb\u3002</li> <li>\u5982\u679c\u5bf9\u4e8e\u67d0\u4e2a\u9501\uff0c\u81ea\u65cb\u5f88\u5c11\u6210\u529f\uff0c\u90a3\u4e48\u540e\u7eed\u53ef\u80fd\u4f1a\u7701\u7565\u81ea\u65cb\u8fc7\u7a0b\uff0c\u76f4\u63a5\u963b\u585e\u7ebf\u7a0b\u3002</li> </ul> </li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/%E9%94%81/#-","title":"\u9501\u72b6\u6001\uff1a\u65e0\u9501 -&gt; \u504f\u5411\u9501 -&gt; \u8f7b\u91cf\u7ea7\u9501 -&gt; \u91cd\u91cf\u7ea7\u9501","text":"<p>\u8fd9\u56db\u79cd\u72b6\u6001\u662f\u9488\u5bf9<code>synchronized</code>\u5173\u952e\u5b57\u7684\u9501\u4f18\u5316\u673a\u5236\uff0c\u9501\u7684\u72b6\u6001\u4f1a\u968f\u7740\u7ade\u4e89\u7684\u6fc0\u70c8\u7a0b\u5ea6\u5355\u5411\u5347\u7ea7\uff08\u4e0d\u80fd\u964d\u7ea7\uff09\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/%E9%94%81/#_1","title":"\u57fa\u7840\u6982\u5ff5","text":"<ul> <li>Java\u5bf9\u8c61\u5934 (Object Header)\uff1a<code>synchronized</code>\u7684\u9501\u4fe1\u606f\u5c31\u5b58\u50a8\u5728\u8fd9\u91cc\u3002<ul> <li>Mark Word\uff1a\u5b58\u50a8\u5bf9\u8c61\u7684HashCode\u3001\u5206\u4ee3\u5e74\u9f84\u548c\u9501\u6807\u5fd7\u4f4d\u3002\u5176\u5185\u5bb9\u4f1a\u6839\u636e\u9501\u72b6\u6001\u800c\u6539\u53d8\u3002</li> <li>Klass Pointer\uff1a\u6307\u5411\u5bf9\u8c61\u6240\u5c5e\u7c7b\u7684\u5143\u6570\u636e\u6307\u9488\u3002</li> </ul> </li> <li>Monitor\uff1a\u6bcf\u4e2aJava\u5bf9\u8c61\u90fd\u5173\u8054\u4e00\u4e2aMonitor\u3002<code>synchronized</code>\u901a\u8fc7\u83b7\u53d6\u5bf9\u8c61\u7684Monitor\u6765\u5b9e\u73b0\u540c\u6b65\u3002Monitor\u4f9d\u8d56\u4e8e\u5e95\u5c42\u64cd\u4f5c\u7cfb\u7edf\u7684Mutex Lock (\u4e92\u65a5\u9501)\uff0c\u8fd9\u6d89\u53ca\u5230\u7528\u6237\u6001\u548c\u5185\u6838\u6001\u7684\u5207\u6362\uff0c\u5f00\u9500\u5927\uff0c\u56e0\u6b64\u88ab\u79f0\u4e3a\u91cd\u91cf\u7ea7\u9501\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/%E9%94%81/#_2","title":"\u56db\u79cd\u9501\u72b6\u6001","text":"\u9501\u72b6\u6001 \u9501\u6807\u5fd7\u4f4d Mark Word \u5b58\u50a8\u5185\u5bb9 \u89e3\u51b3\u7684\u95ee\u9898 \u65e0\u9501 01 \u5bf9\u8c61HashCode\u3001\u5206\u4ee3\u5e74\u9f84\u3001\u504f\u5411\u9501\u6807\u5fd7(0) - \u504f\u5411\u9501 01 \u504f\u5411\u7684\u7ebf\u7a0bID\u3001\u504f\u5411\u65f6\u95f4\u6233\u3001\u504f\u5411\u9501\u6807\u5fd7(1) \u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u8bbf\u95ee\u540c\u6b65\u5757\uff0c\u51cf\u5c11\u4e0d\u5fc5\u8981\u7684CAS \u8f7b\u91cf\u7ea7\u9501 00 \u6307\u5411\u6808\u4e2d\u9501\u8bb0\u5f55(Lock Record)\u7684\u6307\u9488 \u591a\u4e2a\u7ebf\u7a0b\u4ea4\u66ff\u6267\u884c\u540c\u6b65\u5757\uff0c\u901a\u8fc7\u81ea\u65cb\u907f\u514d\u963b\u585e \u91cd\u91cf\u7ea7\u9501 10 \u6307\u5411\u91cd\u91cf\u7ea7\u9501(Monitor)\u7684\u6307\u9488 \u591a\u7ebf\u7a0b\u540c\u65f6\u7ade\u4e89\uff0c\u901a\u8fc7\u963b\u585e-\u5524\u9192\u673a\u5236\u5904\u7406 <ul> <li> <p>\u65e0\u9501 (No Lock)</p> <ul> <li>\u4e0d\u9501\u5b9a\u8d44\u6e90\uff0c\u6240\u6709\u7ebf\u7a0b\u90fd\u80fd\u8bbf\u95ee\uff0c\u4f46\u53ea\u6709\u4e00\u4e2a\u80fd\u4fee\u6539\u6210\u529f\u3002</li> <li>\u901a\u8fc7CAS\u5faa\u73af\u5c1d\u8bd5\u4fee\u6539\u5171\u4eab\u8d44\u6e90\u3002</li> </ul> </li> <li> <p>\u504f\u5411\u9501 (Biased Lock)</p> <ul> <li>\u76ee\u6807\uff1a\u5728\u65e0\u591a\u7ebf\u7a0b\u7ade\u4e89\u7684\u60c5\u51b5\u4e0b\uff0c\u6d88\u9664\u540c\u6b65\u5f00\u9500\u3002</li> <li>\u6d41\u7a0b\uff1a\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u9996\u6b21\u83b7\u53d6\u9501\u65f6\uff0c\u5c06\u7ebf\u7a0bID\u8bb0\u5f55\u5728Mark Word\u4e2d\u3002\u4e4b\u540e\u8be5\u7ebf\u7a0b\u8fdb\u51fa\u540c\u6b65\u5757\u65f6\uff0c\u53ea\u9700\u68c0\u67e5Mark Word\u4e2d\u7684\u7ebf\u7a0bID\u662f\u5426\u662f\u81ea\u5df1\uff0c\u65e0\u9700CAS\u64cd\u4f5c\u3002</li> <li>\u5347\u7ea7\uff1a\u5f53\u6709\u5176\u4ed6\u7ebf\u7a0b\u5c1d\u8bd5\u83b7\u53d6\u8be5\u9501\u65f6\uff0c\u504f\u5411\u9501\u64a4\u9500\uff0c\u5e76\u5347\u7ea7\u4e3a\u8f7b\u91cf\u7ea7\u9501\u3002</li> </ul> </li> <li> <p>\u8f7b\u91cf\u7ea7\u9501 (Lightweight Lock)</p> <ul> <li>\u76ee\u6807\uff1a\u5728\u5b58\u5728\u7ade\u4e89\u4f46\u7ade\u4e89\u4e0d\u6fc0\u70c8\uff08\u7ebf\u7a0b\u4ea4\u66ff\u6267\u884c\uff09\u7684\u60c5\u51b5\u4e0b\uff0c\u901a\u8fc7\u81ea\u65cb\u63d0\u9ad8\u6027\u80fd\uff0c\u907f\u514d\u7ebf\u7a0b\u963b\u585e\u3002</li> <li>\u52a0\u9501\u6d41\u7a0b\uff1a<ol> <li>\u7ebf\u7a0b\u5728\u81ea\u5df1\u7684\u6808\u5e27\u4e2d\u521b\u5efa\u9501\u8bb0\u5f55(Lock Record)\u3002</li> <li>\u5c06\u9501\u5bf9\u8c61\u7684Mark Word\u62f7\u8d1d\u5230\u9501\u8bb0\u5f55\u4e2d\u3002</li> <li>\u901a\u8fc7CAS\u5c1d\u8bd5\u5c06\u9501\u5bf9\u8c61\u7684Mark Word\u66f4\u65b0\u4e3a\u6307\u5411\u9501\u8bb0\u5f55\u7684\u6307\u9488\u3002</li> <li>\u6210\u529f\u5219\u83b7\u53d6\u9501\uff1b\u5931\u8d25\u5219\u8bf4\u660e\u5b58\u5728\u7ade\u4e89\uff0c\u5f00\u59cb\u81ea\u65cb\u3002</li> </ol> </li> <li>\u5347\u7ea7\uff1a\u5982\u679c\u81ea\u65cb\u8d85\u8fc7\u4e00\u5b9a\u6b21\u6570\uff0c\u6216\u6709\u65b0\u7684\u7ebf\u7a0b\u52a0\u5165\u7ade\u4e89\uff0c\u9501\u4f1a\u5347\u7ea7\u4e3a\u91cd\u91cf\u7ea7\u9501\u3002</li> </ul> </li> <li> <p>\u91cd\u91cf\u7ea7\u9501 (Heavyweight Lock)</p> <ul> <li>\u673a\u5236\uff1a\u4f9d\u8d56\u64cd\u4f5c\u7cfb\u7edf\u7684Mutex Lock\u3002</li> <li>\u6d41\u7a0b\uff1a\u9664\u4e86\u6301\u6709\u9501\u7684\u7ebf\u7a0b\uff0c\u5176\u4ed6\u6240\u6709\u7b49\u5f85\u7684\u7ebf\u7a0b\u90fd\u4f1a\u8fdb\u5165\u963b\u585e\u72b6\u6001\uff0c\u7b49\u5f85\u88ab\u5524\u9192\u3002\u6027\u80fd\u5f00\u9500\u6700\u5927\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/%E9%94%81/#vs_2","title":"\u516c\u5e73\u9501 vs. \u975e\u516c\u5e73\u9501","text":"<ul> <li> <p>\u516c\u5e73\u9501 (Fair Lock)</p> <ul> <li>\u7406\u5ff5\uff1a\u7ebf\u7a0b\u6309\u7167\u7533\u8bf7\u9501\u7684\u5148\u540e\u987a\u5e8f\u83b7\u53d6\u9501\uff0c\u5148\u5230\u5148\u5f97\uff0c\u5c31\u50cf\u6392\u961f\u4e00\u6837\u3002</li> <li>\u4f18\u70b9\uff1a\u6240\u6709\u7b49\u5f85\u7684\u7ebf\u7a0b\u6700\u7ec8\u90fd\u80fd\u83b7\u53d6\u9501\uff0c\u4e0d\u4f1a\u201c\u997f\u6b7b\u201d\u3002</li> <li>\u7f3a\u70b9\uff1a\u541e\u5410\u91cf\u76f8\u5bf9\u8f83\u4f4e\uff0c\u56e0\u4e3a\u9664\u4e86\u961f\u9996\u7684\u7ebf\u7a0b\uff0c\u5176\u4ed6\u7ebf\u7a0b\u90fd\u4f1a\u963b\u585e\uff0c\u7ebf\u7a0b\u5524\u9192\u5f00\u9500\u5927\u3002</li> </ul> </li> <li> <p>\u975e\u516c\u5e73\u9501 (Non-fair Lock)</p> <ul> <li>\u7406\u5ff5\uff1a\u7ebf\u7a0b\u5c1d\u8bd5\u83b7\u53d6\u9501\u65f6\uff0c\u4e0d\u770b\u7b49\u5f85\u961f\u5217\uff0c\u76f4\u63a5\u5c1d\u8bd5\u62a2\u5360\u3002\u5931\u8d25\u540e\u624d\u8fdb\u5165\u961f\u5217\u7b49\u5f85\u3002</li> <li>\u4f18\u70b9\uff1a\u541e\u5410\u91cf\u66f4\u9ad8\u3002\u56e0\u4e3a\u65b0\u6765\u7684\u7ebf\u7a0b\u53ef\u80fd\u6b63\u597d\u9047\u5230\u9501\u91ca\u653e\uff0c\u65e0\u9700\u8fdb\u5165\u961f\u5217\u7b49\u5f85\u548c\u5524\u9192\uff0c\u51cf\u5c11\u4e86\u5f00\u9500\u3002</li> <li>\u7f3a\u70b9\uff1a\u53ef\u80fd\u5bfc\u81f4\u7b49\u5f85\u961f\u5217\u4e2d\u7684\u7ebf\u7a0b\u957f\u65f6\u95f4\u83b7\u53d6\u4e0d\u5230\u9501\uff08\u201c\u997f\u6b7b\u201d\uff09\u3002</li> </ul> </li> </ul> <p><code>ReentrantLock</code>\u4e2d\u7684\u5b9e\u73b0 *   <code>ReentrantLock</code>\u9ed8\u8ba4\u662f\u975e\u516c\u5e73\u9501\uff0c\u4f46\u53ef\u4ee5\u901a\u8fc7\u6784\u9020\u51fd\u6570\u6307\u5b9a\u4e3a\u516c\u5e73\u9501 (<code>new ReentrantLock(true)</code>)\u3002 *   \u5176\u5185\u90e8\u5b9e\u73b0<code>FairSync</code>\u548c<code>NonfairSync</code>\u7684\u552f\u4e00\u533a\u522b\u5728\u4e8e<code>lock()</code>\u65b9\u6cd5\u3002 *   \u516c\u5e73\u9501\u5728\u5c1d\u8bd5\u83b7\u53d6\u9501\u4e4b\u524d\uff0c\u4f1a\u591a\u4e00\u4e2a<code>hasQueuedPredecessors()</code>\u7684\u5224\u65ad\uff0c\u68c0\u67e5\u81ea\u5df1\u662f\u5426\u662f\u7b49\u5f85\u961f\u5217\u7684\u7b2c\u4e00\u4e2a\u8282\u70b9\u3002\u5982\u679c\u4e0d\u662f\uff0c\u5c31\u4e56\u4e56\u6392\u961f\u3002\u975e\u516c\u5e73\u9501\u5219\u6ca1\u6709\u8fd9\u4e2a\u68c0\u67e5\uff0c\u4f1a\u76f4\u63a5\u5c1d\u8bd5\u83b7\u53d6\u9501\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/java/%E9%94%81/#vs_3","title":"\u53ef\u91cd\u5165\u9501 vs. \u975e\u53ef\u91cd\u5165\u9501","text":"<ul> <li> <p>\u53ef\u91cd\u5165\u9501 (Reentrant Lock) / \u9012\u5f52\u9501</p> <ul> <li>\u7406\u5ff5\uff1a\u540c\u4e00\u4e2a\u7ebf\u7a0b\u5728\u6301\u6709\u9501\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u518d\u6b21\u83b7\u53d6\u8be5\u9501\u800c\u4e0d\u4f1a\u88ab\u963b\u585e\u3002</li> <li>\u4f5c\u7528\uff1a\u907f\u514d\u5728\u4e00\u4e2a\u7ebf\u7a0b\u7684\u5d4c\u5957\u65b9\u6cd5\u8c03\u7528\u4e2d\u53d1\u751f\u6b7b\u9501\u3002</li> <li>\u5b9e\u73b0\uff1aJava\u4e2d\u7684<code>synchronized</code>\u548c<code>ReentrantLock</code>\u90fd\u662f\u53ef\u91cd\u5165\u9501\u3002\u5b83\u4eec\u5185\u90e8\u901a\u8fc7\u4e00\u4e2a\u8ba1\u6570\u5668\u5b9e\u73b0\uff1a\u7ebf\u7a0b\u6bcf\u83b7\u53d6\u4e00\u6b21\u9501\uff0c\u8ba1\u6570\u5668\u52a01\uff1b\u6bcf\u91ca\u653e\u4e00\u6b21\u9501\uff0c\u8ba1\u6570\u5668\u51cf1\u3002\u53ea\u6709\u5f53\u8ba1\u6570\u5668\u4e3a0\u65f6\uff0c\u9501\u624d\u88ab\u771f\u6b63\u91ca\u653e\u3002</li> <li>\u793a\u4f8b\uff1a     <code>java     public synchronized void methodA() {         // ...         methodB(); // \u540c\u4e00\u4e2a\u7ebf\u7a0b\u53ef\u76f4\u63a5\u8c03\u7528\u53e6\u4e00\u4e2a\u540c\u6b65\u65b9\u6cd5     }     public synchronized void methodB() {         // ...     }</code></li> </ul> </li> <li> <p>\u975e\u53ef\u91cd\u5165\u9501 (Non-reentrant Lock)</p> <ul> <li>\u7406\u5ff5\uff1a\u4e00\u4e2a\u7ebf\u7a0b\u83b7\u53d6\u9501\u4e4b\u540e\uff0c\u65e0\u6cd5\u518d\u6b21\u83b7\u53d6\u8be5\u9501\uff0c\u5426\u5219\u4f1a\u9020\u6210\u6b7b\u9501\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/%E9%94%81/#vs_4","title":"\u72ec\u4eab\u9501 vs. \u5171\u4eab\u9501","text":"<ul> <li> <p>\u72ec\u4eab\u9501 (Exclusive Lock) / \u6392\u4ed6\u9501</p> <ul> <li>\u7406\u5ff5\uff1a\u8be5\u9501\u4e00\u6b21\u53ea\u80fd\u88ab\u4e00\u4e2a\u7ebf\u7a0b\u6301\u6709\u3002</li> <li>\u7279\u70b9\uff1a\u83b7\u53d6\u72ec\u4eab\u9501\u7684\u7ebf\u7a0b\u65e2\u53ef\u4ee5\u8bfb\u6570\u636e\uff0c\u4e5f\u53ef\u4ee5\u5199\u6570\u636e\u3002\u4e00\u65e6\u52a0\u9501\uff0c\u5176\u4ed6\u4efb\u4f55\u7ebf\u7a0b\u90fd\u4e0d\u80fd\u518d\u83b7\u53d6\u4efb\u4f55\u7c7b\u578b\u7684\u9501\u3002</li> <li>\u5b9e\u73b0\uff1a<code>synchronized</code>\u548c<code>ReentrantLock</code>\u90fd\u662f\u72ec\u4eab\u9501\u3002</li> </ul> </li> <li> <p>\u5171\u4eab\u9501 (Shared Lock)</p> <ul> <li>\u7406\u5ff5\uff1a\u8be5\u9501\u53ef\u4ee5\u88ab\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u6301\u6709\u3002</li> <li>\u7279\u70b9\uff1a\u4e3b\u8981\u7528\u4e8e\u8bfb\u64cd\u4f5c\u3002\u4e00\u4e2a\u7ebf\u7a0b\u83b7\u53d6\u5171\u4eab\u9501\u540e\uff0c\u5176\u4ed6\u7ebf\u7a0b\u4ecd\u7136\u53ef\u4ee5\u83b7\u53d6\u5171\u4eab\u9501\uff0c\u4f46\u4e0d\u80fd\u83b7\u53d6\u72ec\u4eab\u9501\u3002</li> <li>\u5b9e\u73b0\uff1a<code>ReentrantReadWriteLock</code>\u4e2d\u7684\u8bfb\u9501\u662f\u5171\u4eab\u9501\uff0c\u5199\u9501\u662f\u72ec\u4eab\u9501\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/java/%E9%94%81/#reentrantreadwritelock","title":"ReentrantReadWriteLock(\u8bfb\u5199\u9501)","text":"<p>\u5b83\u5185\u90e8\u5305\u542b\u4e24\u628a\u9501\uff1a<code>ReadLock</code>\uff08\u5171\u4eab\u9501\uff09\u548c<code>WriteLock</code>\uff08\u72ec\u4eab\u9501\uff09\u3002 *   \u8bfb-\u8bfb\uff1a\u53ef\u4ee5\u5e76\u53d1\uff0c\u4e0d\u4e92\u65a5\u3002 *   \u8bfb-\u5199 / \u5199-\u8bfb / \u5199-\u5199\uff1a\u4e92\u65a5\u3002</p> <p>\u5b9e\u73b0\u539f\u7406 *   \u5b83\u5229\u7528AQS\uff08AbstractQueuedSynchronizer\uff09\u4e2d\u7684\u4e00\u4e2a<code>int</code>\u7c7b\u578b<code>state</code>\u5b57\u6bb5\uff0832\u4f4d\uff09\u6765\u540c\u65f6\u8868\u793a\u8bfb\u9501\u548c\u5199\u9501\u7684\u72b6\u6001\u3002 *   \u72b6\u6001\u5206\u5272\uff1a\u5c06<code>state</code>\u5b57\u6bb5\u7684\u9ad816\u4f4d\u7528\u4e8e\u8868\u793a\u8bfb\u9501\u7684\u6570\u91cf\uff0c\u4f4e16\u4f4d\u7528\u4e8e\u8868\u793a\u5199\u9501\u7684\u91cd\u5165\u6b21\u6570\u3002 *   \u52a0\u9501\u89c4\u5219\uff1a     *   \u83b7\u53d6\u5199\u9501 (<code>tryAcquire</code>)\uff1a\u53ea\u6709\u5728\u6ca1\u6709\u5176\u4ed6\u7ebf\u7a0b\u6301\u6709\u8bfb\u9501\u6216\u5199\u9501\u65f6\u624d\u80fd\u6210\u529f\u3002     *   \u83b7\u53d6\u8bfb\u9501 (<code>tryAcquireShared</code>)\uff1a\u53ea\u6709\u5728\u6ca1\u6709\u5176\u4ed6\u7ebf\u7a0b\u6301\u6709\u5199\u9501\u65f6\u624d\u80fd\u6210\u529f\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E4%BA%8B%E4%BB%B6%E6%9C%BA%E5%88%B6/","title":"Redis\u4e8b\u4ef6\u673a\u5236","text":""},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E4%BA%8B%E4%BB%B6%E6%9C%BA%E5%88%B6/#_1","title":"\u6838\u5fc3\u601d\u60f3\uff1a\u5355\u7ebf\u7a0b\u4e3a\u4f55\u5982\u6b64\u9ad8\u6548\uff1f\u2014\u2014 \u4e8b\u4ef6\u9a71\u52a8\u6a21\u578b","text":"<p>Redis\u7684\u60ca\u4eba\u6027\u80fd\uff0c\u5c24\u5176\u662f\u57286.0\u7248\u672c\u4e4b\u524d\u7684\u5355\u7ebf\u7a0b\u6a21\u578b\u4e0b\uff0c\u4e3b\u8981\u5f52\u529f\u4e8e\u5176\u9ad8\u6548\u7684\u4e8b\u4ef6\u9a71\u52a8\u673a\u5236\u3002Redis\u7684\u7f51\u7edcIO\u548c\u547d\u4ee4\u8bfb\u5199\u7531\u5355\u4e2a\u4e3b\u7ebf\u7a0b\u5904\u7406\uff0c\u4f46\u8fd9\u5e76\u4e0d\u610f\u5473\u7740\u5b83\u4e00\u6b21\u53ea\u80fd\u5904\u7406\u4e00\u4e2a\u5ba2\u6237\u7aef\u3002\u5176\u6838\u5fc3\u662f\u5229\u7528\u4e86I/O\u591a\u8def\u590d\u7528\u6280\u672f\uff0c\u4f7f\u5f97\u5355\u4e2a\u7ebf\u7a0b\u80fd\u5e76\u53d1\u5904\u7406\u6210\u5343\u4e0a\u4e07\u4e2a\u7f51\u7edc\u8fde\u63a5\uff0c\u907f\u514d\u4e86\u5728\u7b49\u5f85IO\u65f6\u9020\u6210\u7684CPU\u8d44\u6e90\u6d6a\u8d39\u3002</p> <p>Redis\u81ea\u5df1\u5b9e\u73b0\u4e86\u4e00\u4e2a\u7b80\u6d01\u7684\u4e8b\u4ef6\u5e93<code>ae_event</code>\uff0c\u5b83\u4e3b\u8981\u5904\u7406\u4e24\u7c7b\u4e8b\u4ef6\uff1a</p> <ol> <li>\u6587\u4ef6\u4e8b\u4ef6 (File Event)\uff1a\u5904\u7406\u7f51\u7edcIO\uff0c\u662f\u6027\u80fd\u7684\u5173\u952e\u3002</li> <li>\u65f6\u95f4\u4e8b\u4ef6 (Time Event)\uff1a\u5904\u7406\u5b9a\u65f6\u4efb\u52a1\uff0c\u5982\u5468\u671f\u6027\u7684<code>serverCron</code>\u3002</li> </ol> <p>\u6574\u4e2a\u673a\u5236\u7684\u6838\u5fc3\u662f\u4e8b\u4ef6\u5faa\u73af (Event Loop)\uff0c\u7531<code>aeEventLoop</code>\u5bf9\u8c61\u7ba1\u7406\uff0c\u5b83\u4e0d\u65ad\u5730\u5faa\u73af\u5904\u7406\u5df2\u5c31\u7eea\u7684\u6587\u4ef6\u4e8b\u4ef6\u548c\u5df2\u5230\u671f\u7684\u65f6\u95f4\u4e8b\u4ef6\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E4%BA%8B%E4%BB%B6%E6%9C%BA%E5%88%B6/#file-event-io","title":"\u4e00\u3001 \u6587\u4ef6\u4e8b\u4ef6 (File Event) - \u7f51\u7edcIO\u7684\u6838\u5fc3","text":"<p>\u6587\u4ef6\u4e8b\u4ef6\u662fRedis\u5bf9\u5957\u63a5\u5b57\uff08Socket\uff09\u64cd\u4f5c\u7684\u62bd\u8c61\u3002\u5f53\u4e00\u4e2a\u5957\u63a5\u5b57\u53ef\u8bfb\u3001\u53ef\u5199\u6216\u51fa\u73b0\u9519\u8bef\u65f6\uff0c\u5c31\u4f1a\u4ea7\u751f\u4e00\u4e2a\u6587\u4ef6\u4e8b\u4ef6\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E4%BA%8B%E4%BB%B6%E6%9C%BA%E5%88%B6/#1-reactor","title":"1. Reactor\u8bbe\u8ba1\u6a21\u5f0f","text":"<p>Redis\u7684\u6587\u4ef6\u4e8b\u4ef6\u5904\u7406\u5668\u662f\u57fa\u4e8eReactor\u6a21\u5f0f\u5b9e\u73b0\u7684\uff0c\u5176\u4e3b\u8981\u7ec4\u4ef6\u5305\u62ec\uff1a</p> <ul> <li>\u5957\u63a5\u5b57 (Sockets)\uff1a\u5305\u62ec\u76d1\u542c\u5957\u63a5\u5b57\u548c\u5ba2\u6237\u7aef\u8fde\u63a5\u5957\u63a5\u5b57\u3002</li> <li>I/O\u591a\u8def\u590d\u7528\u7a0b\u5e8f\uff1a\u5c01\u88c5\u4e86<code>epoll</code>\u3001<code>kqueue</code>\u3001<code>select</code>\u7b49\u7cfb\u7edf\u8c03\u7528\u3002\u5b83\u80fd\u540c\u65f6\u76d1\u542c\u591a\u4e2a\u5957\u63a5\u5b57\uff0c\u5e76\u5c06\u4ea7\u751f\u4e8b\u4ef6\u7684\u5957\u63a5\u5b57\u653e\u5165\u4e00\u4e2a\u5c31\u7eea\u961f\u5217\u3002\u8fd9\u662f\u5b9e\u73b0\u5e76\u53d1\u7684\u5173\u952e\u3002</li> <li>\u6587\u4ef6\u4e8b\u4ef6\u5206\u6d3e\u5668 (Dispatcher)\uff1a\u4ece\u5c31\u7eea\u961f\u5217\u4e2d\u53d6\u51fa\u5957\u63a5\u5b57\uff0c\u6839\u636e\u4e8b\u4ef6\u7c7b\u578b\uff08\u8bfb/\u5199\uff09\u8c03\u7528\u5bf9\u5e94\u7684\u4e8b\u4ef6\u5904\u7406\u5668\u3002</li> <li>\u4e8b\u4ef6\u5904\u7406\u5668 (Handlers)\uff1a\u5177\u4f53\u7684\u4e1a\u52a1\u903b\u8f91\u4ee3\u7801\uff0c\u5982\u63a5\u53d7\u65b0\u8fde\u63a5\uff08<code>accept</code>\uff09\u3001\u8bfb\u53d6\u547d\u4ee4\uff08<code>read</code>\uff09\u3001\u53d1\u9001\u54cd\u5e94\uff08<code>write</code>\uff09\u7b49\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E4%BA%8B%E4%BB%B6%E6%9C%BA%E5%88%B6/#2-ioepoll","title":"2. IO\u591a\u8def\u590d\u7528\u6a21\u578b\uff08\u4ee5<code>epoll</code>\u4e3a\u4f8b\uff09","text":"<p>\u8fd9\u4e2a\u6a21\u578b\u53ef\u4ee5\u7c7b\u6bd4\u4e8e\u533b\u9662\u7684\u5206\u8bca\u53f0\uff1a</p> <ul> <li>Redis\u4e3b\u7ebf\u7a0b\uff1a\u5c31\u50cf\u4e00\u4f4d\u4e13\u5bb6\u533b\u751f\uff0c\u8d1f\u8d23\u6838\u5fc3\u7684\u8bca\u65ad\u548c\u6cbb\u7597\uff08\u5904\u7406\u547d\u4ee4\uff09\u3002</li> <li>Linux\u5185\u6838\u7684<code>epoll</code>\uff1a\u5c31\u50cf\u5206\u8bca\u53f0\u3002\u5b83\u8d1f\u8d23\u5904\u7406\u6240\u6709\u201c\u6742\u4e8b\u201d\uff0c\u5982\u76d1\u542c\u6240\u6709\u75c5\u4eba\uff08\u5ba2\u6237\u7aef\u8fde\u63a5\uff09\u7684\u5230\u6765\u3001\u6d4b\u6e29\u3001\u767b\u8bb0\uff08\u76d1\u542c\u8fde\u63a5\u8bf7\u6c42\u548c\u6570\u636e\u8bf7\u6c42\uff09\u3002</li> <li>\u4e8b\u4ef6\u961f\u5217\uff1a\u5c31\u50cf\u5206\u8bca\u53f0\u524d\u7684\u6392\u961f\u961f\u5217\u3002</li> <li>\u56de\u8c03\u673a\u5236\uff1a\u5206\u8bca\u53f0\u5904\u7406\u5b8c\u4e00\u4e2a\u75c5\u4eba\u540e\uff0c\u4f1a\u901a\u77e5\u533b\u751f\uff0c\u5e76\u628a\u75c5\u5386\u4ea4\u7ed9\u533b\u751f\u3002\u540c\u6837\uff0c<code>epoll</code>\u76d1\u542c\u5230\u4e8b\u4ef6\u540e\uff0c\u4f1a\u5c06\u4e8b\u4ef6\u653e\u5165\u961f\u5217\uff0c\u5e76\u89e6\u53d1Redis\u6ce8\u518c\u7684\u56de\u8c03\u51fd\u6570\u3002</li> </ul> <p>\u5de5\u4f5c\u6d41\u7a0b\uff1a 1.  Redis\u4e3b\u7ebf\u7a0b\u5c06\u6240\u6709\u9700\u8981\u76d1\u542c\u7684\u5957\u63a5\u5b57\uff08FDs\uff09\u901a\u8fc7<code>epoll_ctl</code>\u6ce8\u518c\u5230\u5185\u6838\u7684<code>epoll</code>\u5b9e\u4f8b\u4e2d\u3002 2.  \u4e3b\u7ebf\u7a0b\u8c03\u7528<code>epoll_wait</code>\uff0c\u963b\u585e\u5728\u8fd9\u91cc\u7b49\u5f85\u4e8b\u4ef6\u53d1\u751f\u3002\u6b64\u65f6\u4e3b\u7ebf\u7a0b\u4e0d\u6d88\u8017CPU\u3002 3.  \u5f53\u67d0\u4e2a\u6216\u67d0\u4e9b\u5957\u63a5\u5b57\u4e0a\u6709\u4e8b\u4ef6\u53d1\u751f\u65f6\uff08\u5982\u65b0\u8fde\u63a5\u3001\u6570\u636e\u5230\u8fbe\uff09\uff0c<code>epoll_wait</code>\u88ab\u5524\u9192\u5e76\u8fd4\u56de\u5c31\u7eea\u7684\u4e8b\u4ef6\u5217\u8868\u3002 4.  \u4e3b\u7ebf\u7a0b\u904d\u5386\u5c31\u7eea\u4e8b\u4ef6\u5217\u8868\uff0c\u6839\u636e\u4e8b\u4ef6\u7c7b\u578b\u8c03\u7528\u9884\u5148\u6ce8\u518c\u597d\u7684\u56de\u8c03\u51fd\u6570\u8fdb\u884c\u5904\u7406\u3002 5.  \u5904\u7406\u5b8c\u6240\u6709\u5c31\u7eea\u4e8b\u4ef6\u540e\uff0c\u518d\u6b21\u5faa\u73af\u8c03\u7528<code>epoll_wait</code>\uff0c\u7b49\u5f85\u4e0b\u4e00\u6279\u4e8b\u4ef6\u3002</p> <p>\u8fd9\u6837\uff0cRedis\u4e3b\u7ebf\u7a0b\u6c38\u8fdc\u5728\u5904\u7406\u201c\u5df2\u5c31\u7eea\u201d\u7684\u4e8b\u4ef6\uff0c\u4ece\u4e0d\u7a7a\u7b49\uff0c\u4ece\u800c\u5b9e\u73b0\u4e86\u5355\u7ebf\u7a0b\u5904\u7406\u9ad8\u5e76\u53d1IO\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E4%BA%8B%E4%BB%B6%E6%9C%BA%E5%88%B6/#time-event-","title":"\u4e8c\u3001 \u65f6\u95f4\u4e8b\u4ef6 (Time Event) - \u5b9a\u65f6\u4efb\u52a1","text":"<p>\u65f6\u95f4\u4e8b\u4ef6\u7528\u4e8e\u5904\u7406\u5b9a\u65f6\u6216\u5468\u671f\u6027\u7684\u4efb\u52a1\u3002</p> <ul> <li>\u5206\u7c7b\uff1a<ul> <li>\u5b9a\u65f6\u4e8b\u4ef6\uff1a\u5728\u6307\u5b9a\u65f6\u95f4\u540e\u6267\u884c\u4e00\u6b21\uff0c\u7136\u540e\u5220\u9664\u3002</li> <li>\u5468\u671f\u6027\u4e8b\u4ef6\uff1a\u6bcf\u9694\u6307\u5b9a\u65f6\u95f4\u5c31\u6267\u884c\u4e00\u6b21\u3002\u901a\u8fc7\u4e8b\u4ef6\u5904\u7406\u5668\u7684\u8fd4\u56de\u503c\u6765\u51b3\u5b9a\u662f\u5426\u91cd\u590d\uff08\u8fd4\u56de<code>AE_NOMORE</code>\u5219\u4e3a\u5b9a\u65f6\u4e8b\u4ef6\uff09\u3002</li> </ul> </li> <li>\u5b9e\u73b0\uff1a<ul> <li>\u6240\u6709\u65f6\u95f4\u4e8b\u4ef6\u88ab\u5b58\u653e\u5728\u4e00\u4e2a\u65e0\u5e8f\u94fe\u8868\u4e2d\u3002</li> <li>\u6bcf\u6b21\u4e8b\u4ef6\u5faa\u73af\u65f6\uff0c\u7a0b\u5e8f\u4f1a\u904d\u5386\u6b64\u94fe\u8868\uff0c\u68c0\u67e5\u662f\u5426\u6709\u4e8b\u4ef6\u5df2\u5230\u671f\uff0c\u5e76\u6267\u884c\u5176\u5904\u7406\u5668\u3002</li> <li>\u7531\u4e8eRedis\u4e2d\u7684\u65f6\u95f4\u4e8b\u4ef6\u975e\u5e38\u5c11\uff08\u6b63\u5e38\u6a21\u5f0f\u4e0b\u53ea\u6709<code>serverCron</code>\uff09\uff0c\u6240\u4ee5\u904d\u5386\u94fe\u8868\u7684\u6027\u80fd\u5f00\u9500\u53ef\u4ee5\u5ffd\u7565\u4e0d\u8ba1\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E4%BA%8B%E4%BB%B6%E6%9C%BA%E5%88%B6/#aeeventloop","title":"\u4e09\u3001 <code>aeEventLoop</code> \u7684\u5177\u4f53\u5b9e\u73b0\u6d41\u7a0b","text":"<ol> <li> <p>\u521b\u5efa\u4e8b\u4ef6\u7ba1\u7406\u5668 (<code>aeCreateEventLoop</code>)</p> <ul> <li>\u5728\u670d\u52a1\u5668\u521d\u59cb\u5316\u65f6\u8c03\u7528\uff0c\u521b\u5efa\u4e00\u4e2a<code>aeEventLoop</code>\u5bf9\u8c61\u3002</li> <li>\u521d\u59cb\u5316\u6587\u4ef6\u4e8b\u4ef6\u8868\uff08<code>events</code>\u6570\u7ec4\uff0c\u6309fd\u7d22\u5f15\uff09\u548c\u5c31\u7eea\u4e8b\u4ef6\u8868\uff08<code>fired</code>\u6570\u7ec4\uff09\u3002</li> <li>\u521d\u59cb\u5316\u65f6\u95f4\u4e8b\u4ef6\u94fe\u8868\uff08<code>timeEventHead</code>\u6307\u9488\uff09\u3002</li> <li>\u8c03\u7528<code>aeApiCreate</code>\uff0c\u5728\u5e95\u5c42\u521b\u5efa<code>epoll</code>\u5b9e\u4f8b\uff08<code>epoll_create</code>\uff09\uff0c\u5e76\u5c06\u5176\u4e0e\u4e8b\u4ef6\u5faa\u73af\u5173\u8054\u3002</li> </ul> </li> <li> <p>\u521b\u5efa/\u6ce8\u518c\u6587\u4ef6\u4e8b\u4ef6 (<code>aeCreateFileEvent</code>)</p> <ul> <li>\u5f53\u9700\u8981\u76d1\u542c\u67d0\u4e2a\u5957\u63a5\u5b57<code>fd</code>\u7684\u8bfb/\u5199\u4e8b\u4ef6\u65f6\u8c03\u7528\u6b64\u51fd\u6570\u3002</li> <li>\u51fd\u6570\u5185\u90e8\u8c03\u7528<code>aeApiAddEvent</code>\uff0c\u6700\u7ec8\u901a\u8fc7<code>epoll_ctl</code>\u7cfb\u7edf\u8c03\u7528\u5c06<code>fd</code>\u548c\u5173\u5fc3\u7684\u4e8b\u4ef6\uff08<code>EPOLLIN</code>/<code>EPOLLOUT</code>\uff09\u6ce8\u518c\u5230\u5185\u6838\u7684<code>epoll</code>\u5b9e\u4f8b\u4e2d\u3002</li> <li>\u540c\u65f6\uff0c\u5c06\u4e8b\u4ef6\u7684\u56de\u8c03\u51fd\u6570\uff08Handler\uff09\u548c\u79c1\u6709\u6570\u636e\uff08<code>clientData</code>\uff09\u4fdd\u5b58\u5728<code>events</code>\u6570\u7ec4\u4e2d\u5bf9\u5e94\u7684<code>fd</code>\u4f4d\u7f6e\u3002</li> </ul> </li> <li> <p>\u4e8b\u4ef6\u5904\u7406\u5faa\u73af (<code>aeProcessEvents</code>)     \u8fd9\u662f\u4e8b\u4ef6\u5faa\u73af\u7684\u6838\u5fc3\uff0c\u5728\u4e00\u4e2a<code>while</code>\u5faa\u73af\u4e2d\u88ab\u53cd\u590d\u8c03\u7528\u3002</p> <ol> <li>\u8ba1\u7b97\u8d85\u65f6\u65f6\u95f4\uff1a\u904d\u5386\u65f6\u95f4\u4e8b\u4ef6\u94fe\u8868\uff0c\u627e\u51fa\u6700\u5feb\u5230\u671f\u7684\u90a3\u4e2a\u4e8b\u4ef6\uff0c\u8ba1\u7b97\u51fa\u8ddd\u79bb\u73b0\u5728\u8fd8\u6709\u591a\u4e45\u3002\u8fd9\u4e2a\u65f6\u95f4\u5c06\u4f5c\u4e3a<code>epoll_wait</code>\u7684\u8d85\u65f6\u53c2\u6570\u3002</li> <li>\u7b49\u5f85IO\u4e8b\u4ef6\uff1a\u8c03\u7528<code>aeApiPoll</code>\uff08\u5185\u90e8\u8c03\u7528<code>epoll_wait</code>\uff09\uff0c\u963b\u585e\u7b49\u5f85\u6587\u4ef6\u4e8b\u4ef6\u7684\u53d1\u751f\uff0c\u6700\u5927\u963b\u585e\u65f6\u95f4\u5c31\u662f\u4e0a\u4e00\u6b65\u8ba1\u7b97\u51fa\u7684\u8d85\u65f6\u65f6\u95f4\u3002</li> <li>\u5904\u7406\u6587\u4ef6\u4e8b\u4ef6\uff1a<ul> <li><code>epoll_wait</code>\u8fd4\u56de\u540e\uff0c<code>aeApiPoll</code>\u4f1a\u5c06\u6240\u6709\u5c31\u7eea\u7684\u4e8b\u4ef6\uff08fd\u548c\u4e8b\u4ef6\u7c7b\u578b\uff09\u586b\u5145\u5230<code>fired</code>\u5c31\u7eea\u4e8b\u4ef6\u8868\u4e2d\u3002</li> <li>\u4e8b\u4ef6\u5206\u6d3e\u5668\u904d\u5386<code>fired</code>\u8868\uff0c\u6839\u636efd\u5728<code>events</code>\u8868\u4e2d\u627e\u5230\u5bf9\u5e94\u7684\u56de\u8c03\u51fd\u6570\uff0c\u5e76\u6267\u884c\u5b83\u3002</li> </ul> </li> <li>\u5904\u7406\u65f6\u95f4\u4e8b\u4ef6\uff1a<ul> <li>\u8c03\u7528<code>processTimeEvents</code>\u51fd\u6570\uff0c\u518d\u6b21\u904d\u5386\u65f6\u95f4\u4e8b\u4ef6\u94fe\u8868\u3002</li> <li>\u6267\u884c\u6240\u6709\u5df2\u7ecf\u5230\u671f\u7684\u65f6\u95f4\u4e8b\u4ef6\u5904\u7406\u5668\u3002</li> <li>\u6839\u636e\u5904\u7406\u5668\u8fd4\u56de\u503c\uff0c\u66f4\u65b0\u5468\u671f\u6027\u4e8b\u4ef6\u7684\u4e0b\u4e00\u6b21\u6267\u884c\u65f6\u95f4\uff0c\u6216\u6807\u8bb0\u4e00\u6b21\u6027\u4e8b\u4ef6\u4e3a\u5f85\u5220\u9664\u3002</li> </ul> </li> </ol> </li> <li> <p>\u5220\u9664\u4e8b\u4ef6 (<code>aeDeleteEventLoop</code>)</p> <ul> <li>\u5f53\u4e0d\u518d\u9700\u8981\u76d1\u542c\u67d0\u4e2a\u4e8b\u4ef6\u65f6\uff0c\u8c03\u7528\u6b64\u51fd\u6570\u3002</li> <li>\u5b83\u4f1a\u901a\u8fc7<code>epoll_ctl</code>\u4ece\u5185\u6838\u7684<code>epoll</code>\u5b9e\u4f8b\u4e2d\u79fb\u9664\u5bf9\u8be5\u4e8b\u4ef6\u7684\u76d1\u542c\u3002</li> </ul> </li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E4%BA%8B%E4%BB%B6%E6%9C%BA%E5%88%B6/#_2","title":"\u603b\u7ed3\u8868","text":"\u7ec4\u4ef6/\u6982\u5ff5 \u6838\u5fc3\u4f5c\u7528 \u5b9e\u73b0\u7ec6\u8282 <code>aeEventLoop</code> \u4e8b\u4ef6\u5faa\u73af\u6838\u5fc3\uff0c\u8c03\u5ea6\u6587\u4ef6\u4e8b\u4ef6\u548c\u65f6\u95f4\u4e8b\u4ef6\u3002 \u5305\u542b\u6587\u4ef6\u4e8b\u4ef6\u8868\u3001\u5c31\u7eea\u4e8b\u4ef6\u8868\u3001\u65f6\u95f4\u4e8b\u4ef6\u94fe\u8868\u3002 \u6587\u4ef6\u4e8b\u4ef6 \u5904\u7406\u7f51\u7edcIO\uff0c\u5b9e\u73b0\u9ad8\u5e76\u53d1\u3002 \u57fa\u4e8eReactor\u6a21\u5f0f\uff0c\u5bf9socket\u64cd\u4f5c\u7684\u62bd\u8c61\u3002 \u65f6\u95f4\u4e8b\u4ef6 \u5904\u7406\u5b9a\u65f6/\u5468\u671f\u6027\u4efb\u52a1\u3002 \u65e0\u5e8f\u94fe\u8868\u5b58\u50a8\uff0c\u901a\u8fc7\u904d\u5386\u68c0\u67e5\u662f\u5426\u5230\u671f\u3002 I/O\u591a\u8def\u590d\u7528 \u5e76\u53d1\u57fa\u7840\uff0c\u5141\u8bb8\u5355\u7ebf\u7a0b\u540c\u65f6\u76d1\u542c\u591a\u4e2aIO\u6d41\u3002 \u5c01\u88c5<code>epoll</code>\u7b49\u7cfb\u7edf\u8c03\u7528\uff0c\u7531<code>aeApiPoll</code>\u4e2d\u7684<code>epoll_wait</code>\u5b9e\u73b0\u963b\u585e\u7b49\u5f85\u3002 \u6587\u4ef6\u4e8b\u4ef6\u5206\u6d3e\u5668 \u4efb\u52a1\u5206\u53d1\uff0c\u6839\u636e\u5c31\u7eea\u4e8b\u4ef6\u7c7b\u578b\u8c03\u7528\u76f8\u5e94\u5904\u7406\u5668\u3002 \u904d\u5386<code>fired</code>\u5c31\u7eea\u4e8b\u4ef6\u8868\uff0c\u5e76\u6267\u884c<code>events</code>\u8868\u4e2d\u6ce8\u518c\u7684\u56de\u8c03\u51fd\u6570\u3002 <code>aeProcessEvents</code> \u5355\u6b21\u5faa\u73af\u7684\u4e3b\u4f53\uff0c\u9a71\u52a8\u6574\u4e2a\u4e8b\u4ef6\u5904\u7406\u6d41\u7a0b\u3002 \u987a\u5e8f\u6267\u884c\uff1a\u8ba1\u7b97\u8d85\u65f6 -&gt; \u7b49\u5f85IO -&gt; \u5904\u7406\u6587\u4ef6\u4e8b\u4ef6 -&gt; \u5904\u7406\u65f6\u95f4\u4e8b\u4ef6\u3002"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E4%BA%8B%E5%8A%A1/","title":"Redis\u4e8b\u52a1","text":"<p>Redis\u4e8b\u52a1\u5e76\u975e\u4f20\u7edf\u5173\u7cfb\u578b\u6570\u636e\u5e93\uff08\u5982MySQL\uff09\u4e2d\u5e26\u590d\u6742\u9694\u79bb\u7ea7\u522b\u548c\u56de\u6eda\u673a\u5236\u7684\u4e8b\u52a1\u3002\u5b83\u7684\u672c\u8d28\u662f\u4e00\u7ec4\u547d\u4ee4\u7684\u96c6\u5408\uff0c\u8fd9\u7ec4\u547d\u4ee4\u4f1a\u88ab\u6253\u5305\u3001\u5e8f\u5217\u5316\uff0c\u7136\u540e\u6309\u987a\u5e8f\u3001\u6392\u4ed6\u6027\u5730\u6267\u884c\uff0c\u6267\u884c\u671f\u95f4\u4e0d\u4f1a\u88ab\u5176\u4ed6\u5ba2\u6237\u7aef\u7684\u547d\u4ee4\u63d2\u5165\u3002</p> <p>\u6838\u5fc3\u7279\u5f81\uff1a *   \u4e00\u6b21\u6027 (\u4e00\u6b21\u6027\u63d0\u4ea4) *   \u987a\u5e8f\u6027 (\u6309\u5165\u961f\u987a\u5e8f\u6267\u884c) *   \u6392\u4ed6\u6027 (\u6267\u884c\u65f6\u4e0d\u88ab\u4e2d\u65ad)</p>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E4%BA%8B%E5%8A%A1/#_1","title":"\u4e00\u3001 \u4e8b\u52a1\u76f8\u5173\u547d\u4ee4\u53ca\u4f7f\u7528","text":"<p>Redis\u4e8b\u52a1\u4e3b\u8981\u901a\u8fc7\u4ee5\u4e0b\u56db\u4e2a\u547d\u4ee4\u5b9e\u73b0\uff1a</p> <ol> <li><code>MULTI</code>\uff1a\u5f00\u542f\u4e8b\u52a1\u3002\u6b64\u547d\u4ee4\u4e4b\u540e\u7684\u6240\u6709\u547d\u4ee4\u90fd\u4e0d\u4f1a\u7acb\u5373\u6267\u884c\uff0c\u800c\u662f\u88ab\u653e\u5165\u4e00\u4e2a\u4e8b\u52a1\u961f\u5217\u4e2d\u3002</li> <li><code>EXEC</code>\uff1a\u6267\u884c\u4e8b\u52a1\u3002\u539f\u5b50\u6027\u5730\u6267\u884c\u961f\u5217\u4e2d\u7684\u6240\u6709\u547d\u4ee4\u3002</li> <li><code>DISCARD</code>\uff1a\u53d6\u6d88\u4e8b\u52a1\u3002\u6e05\u7a7a\u4e8b\u52a1\u961f\u5217\uff0c\u653e\u5f03\u6267\u884c\u3002</li> <li><code>WATCH key [key ...]</code>\uff1a\u76d1\u89c6\u4e00\u4e2a\u6216\u591a\u4e2a\u952e\u3002\u5982\u679c\u5728<code>MULTI</code>\u6267\u884c\u540e\u3001<code>EXEC</code>\u6267\u884c\u524d\uff0c\u88ab\u76d1\u89c6\u7684\u952e\u88ab\u5176\u4ed6\u5ba2\u6237\u7aef\u4fee\u6539\uff0c\u5219\u6574\u4e2a\u4e8b\u52a1\u5c06\u88ab\u53d6\u6d88\u3002</li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E4%BA%8B%E5%8A%A1/#_2","title":"\u4f7f\u7528\u573a\u666f\u793a\u4f8b","text":"<ul> <li> <p>\u6807\u51c6\u4e8b\u52a1\uff1a     <code>MULTI     SET key1 val1     SET key2 val2     EXEC</code></p> </li> <li> <p>\u9519\u8bef\u5904\u7406\uff1aRedis\u4e8b\u52a1\u5bf9\u9519\u8bef\u7684\u5904\u7406\u65b9\u5f0f\u6bd4\u8f83\u7279\u6b8a\u3002</p> <ul> <li>\u8bed\u6cd5\u9519\u8bef\uff08\u5165\u961f\u65f6\u9519\u8bef\uff09\uff1a\u5982\u679c\u4e00\u4e2a\u547d\u4ee4\u5728\u5165\u961f\u65f6\u5c31\u53d1\u73b0\u8bed\u6cd5\u9519\u8bef\uff08\u5982<code>sets</code>\u800c\u975e<code>set</code>\uff09\uff0c\u6574\u4e2a\u4e8b\u52a1\u4f1a\u88ab\u6807\u8bb0\u4e3a\u5931\u8d25\u3002\u6267\u884c<code>EXEC</code>\u65f6\uff0c\u6240\u6709\u547d\u4ee4\u90fd\u4e0d\u4f1a\u88ab\u6267\u884c\u3002</li> <li>\u8fd0\u884c\u65f6\u9519\u8bef\uff08\u6267\u884c\u65f6\u9519\u8bef\uff09\uff1a\u5982\u679c\u547d\u4ee4\u8bed\u6cd5\u6b63\u786e\uff0c\u4f46\u6267\u884c\u65f6\u56e0\u7c7b\u578b\u4e0d\u5339\u914d\u7b49\u539f\u56e0\u51fa\u9519\uff08\u5982\u5bf9String\u7c7b\u578b\u6267\u884c<code>LPUSH</code>\uff09\uff0cRedis\u4e0d\u4f1a\u56de\u6eda\u3002\u5b83\u4f1a\u8df3\u8fc7\u8fd9\u6761\u9519\u8bef\u7684\u547d\u4ee4\uff0c\u7ee7\u7eed\u6267\u884c\u540e\u7eed\u7684\u6b63\u786e\u547d\u4ee4\u3002\u8fd9\u662fRedis\u4e8b\u52a1\u4e0e\u4f20\u7edf\u6570\u636e\u5e93\u4e8b\u52a1\u4e00\u4e2a\u6838\u5fc3\u533a\u522b\u3002</li> </ul> </li> <li> <p>\u4f7f\u7528<code>WATCH</code>\u5b9e\u73b0\u4e50\u89c2\u9501\uff08CAS\uff09\uff1a     <code>WATCH</code>\u662f\u5b9e\u73b0Check-And-Set (CAS)\u884c\u4e3a\u7684\u5173\u952e\uff0c\u5e38\u7528\u4e8e\u89e3\u51b3\u5e76\u53d1\u573a\u666f\u4e0b\u7684\u7ade\u4e89\u6761\u4ef6\u3002</p> <ul> <li>\u573a\u666f\uff1a\u539f\u5b50\u6027\u5730\u7ed9\u4e00\u4e2a<code>key</code>\u7684\u503c\u52a01\uff08\u4e0d\u4f7f\u7528<code>INCR</code>\u547d\u4ee4\uff09\u3002</li> <li>\u6d41\u7a0b\uff1a<ol> <li><code>WATCH mykey</code></li> <li><code>val = GET mykey</code> (\u5ba2\u6237\u7aef\u83b7\u53d6\u5f53\u524d\u503c)</li> <li><code>val = val + 1</code> (\u5ba2\u6237\u7aef\u8ba1\u7b97\u65b0\u503c)</li> <li><code>MULTI</code></li> <li><code>SET mykey $val</code></li> <li><code>EXEC</code></li> </ol> </li> <li>\u5de5\u4f5c\u539f\u7406\uff1a\u5982\u679c\u5728\u7b2c1\u6b65\u548c\u7b2c6\u6b65\u4e4b\u95f4\uff0c\u6709\u5176\u4ed6\u5ba2\u6237\u7aef\u4fee\u6539\u4e86<code>mykey</code>\uff0c\u90a3\u4e48\u7b2c6\u6b65\u7684<code>EXEC</code>\u4f1a\u5931\u8d25\uff08\u8fd4\u56de<code>nil</code>\uff09\uff0c\u4e8b\u52a1\u88ab\u53d6\u6d88\u3002\u5e94\u7528\u7a0b\u5e8f\u9700\u8981\u6355\u83b7\u8fd9\u4e2a\u5931\u8d25\uff0c\u7136\u540e\u91cd\u8bd5\u6574\u4e2a\u64cd\u4f5c\uff0c\u76f4\u5230\u6210\u529f\u4e3a\u6b62\u3002\u8fd9\u79cd\u673a\u5236\u88ab\u79f0\u4e3a\u4e50\u89c2\u9501\u3002</li> <li><code>UNWATCH</code>\uff1a\u53ef\u4ee5\u53d6\u6d88\u5bf9\u6240\u6709\u952e\u7684\u76d1\u89c6\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E4%BA%8B%E5%8A%A1/#redis","title":"\u4e8c\u3001 Redis\u4e8b\u52a1\u7684\u6267\u884c\u6b65\u9aa4","text":"<p>Redis\u4e8b\u52a1\u7684\u6267\u884c\u5206\u4e3a\u4e09\u4e2a\u660e\u786e\u7684\u9636\u6bb5\uff1a</p> <ol> <li>\u5f00\u542f (<code>MULTI</code>)\uff1a\u5ba2\u6237\u7aef\u8fdb\u5165\u4e8b\u52a1\u72b6\u6001\u3002</li> <li>\u5165\u961f (Queuing)\uff1a\u5ba2\u6237\u7aef\u53d1\u9001\u7684\u547d\u4ee4\uff08<code>EXEC</code>/<code>DISCARD</code>/<code>WATCH</code>/<code>MULTI</code>\u9664\u5916\uff09\u88ab\u653e\u5165\u4e00\u4e2a\u5148\u8fdb\u5148\u51fa\u7684\u4e8b\u52a1\u961f\u5217\uff0c\u670d\u52a1\u5668\u8fd4\u56de<code>QUEUED</code>\u3002</li> <li>\u6267\u884c (<code>EXEC</code>)\uff1a\u670d\u52a1\u5668\u6309\u987a\u5e8f\u6267\u884c\u961f\u5217\u4e2d\u7684\u6240\u6709\u547d\u4ee4\uff0c\u5e76\u5c06\u7ed3\u679c\u4e00\u6b21\u6027\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u3002</li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E4%BA%8B%E5%8A%A1/#redis_1","title":"\u4e09\u3001 \u6df1\u5165\u7406\u89e3Redis\u4e8b\u52a1","text":""},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E4%BA%8B%E5%8A%A1/#1-redis","title":"1. \u4e3a\u4ec0\u4e48Redis\u4e0d\u652f\u6301\u56de\u6eda\uff1f","text":"<p>Redis\u5b98\u65b9\u7ed9\u51fa\u7684\u7406\u7531\u662f\uff1a</p> <ul> <li>\u547d\u4ee4\u5931\u8d25\u901a\u5e38\u662f\u7f16\u7a0b\u9519\u8bef\uff1aRedis\u547d\u4ee4\u5931\u8d25\u7684\u4e3b\u8981\u539f\u56e0\u662f\u8bed\u6cd5\u9519\u8bef\u6216\u5bf9\u9519\u8bef\u7c7b\u578b\u7684\u6570\u636e\u8fdb\u884c\u64cd\u4f5c\u3002\u8fd9\u4e9b\u95ee\u9898\u5e94\u8be5\u5728\u5f00\u53d1\u9636\u6bb5\u88ab\u53d1\u73b0\u548c\u4fee\u590d\uff0c\u800c\u4e0d\u662f\u4f9d\u8d56\u751f\u4ea7\u73af\u5883\u7684\u56de\u6eda\u673a\u5236\u3002</li> <li>\u4fdd\u6301\u7b80\u5355\u548c\u9ad8\u6027\u80fd\uff1a\u4e0d\u652f\u6301\u56de\u6eda\u4f7f\u5f97Redis\u7684\u5185\u90e8\u5b9e\u73b0\u53ef\u4ee5\u66f4\u7b80\u5355\u3001\u66f4\u5feb\u901f\u3002</li> <li>\u56de\u6eda\u65e0\u6cd5\u89e3\u51b3\u903b\u8f91\u9519\u8bef\uff1a\u5373\u4f7f\u6709\u56de\u6eda\uff0c\u4e5f\u65e0\u6cd5\u5904\u7406\u4e1a\u52a1\u903b\u8f91\u4e0a\u7684\u9519\u8bef\uff08\u4f8b\u5982\uff0c\u672c\u8be5\u52a01\u5374\u5199\u6210\u4e86\u52a02\uff09\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E4%BA%8B%E5%8A%A1/#2-redisacid","title":"2. Redis\u4e8b\u52a1\u7684ACID\u6027\u8d28\u5206\u6790","text":"<ul> <li> <p>A - \u539f\u5b50\u6027 (Atomicity)</p> <ul> <li>Redis\u90e8\u5206\u6ee1\u8db3\u539f\u5b50\u6027\u3002\u4ece\u5176\u5b9a\u4e49\u201c\u8981\u4e48\u5168\u90e8\u6267\u884c\uff0c\u8981\u4e48\u5168\u90e8\u4e0d\u6267\u884c\u201d\u6765\u770b\uff0c\u5b83\u662f\u539f\u5b50\u7684\u3002\u4f46\u7531\u4e8e\u5b83\u5728\u9047\u5230\u8fd0\u884c\u65f6\u9519\u8bef\u65f6\u4e0d\u56de\u6eda\uff0c\u800c\u662f\u7ee7\u7eed\u6267\u884c\uff0c\u8fd9\u4e0e\u4f20\u7edf\u6570\u636e\u5e93\u7684\u201c\u5b8c\u5168\u6210\u529f\u6216\u5b8c\u5168\u56de\u6eda\u201d\u7684\u539f\u5b50\u6027\u5b9a\u4e49\u6709\u6240\u4e0d\u540c\u3002</li> </ul> </li> <li> <p>C - \u4e00\u81f4\u6027 (Consistency)</p> <ul> <li>\u6ee1\u8db3\u3002\u4e8b\u52a1\u6267\u884c\u524d\u540e\uff0c\u6570\u636e\u5e93\u4ece\u4e00\u4e2a\u4e00\u81f4\u6027\u72b6\u6001\u8f6c\u79fb\u5230\u53e6\u4e00\u4e2a\u4e00\u81f4\u6027\u72b6\u6001\u3002\u5982\u679c\u53d1\u751f\u9519\u8bef\uff08\u5982\u8bed\u6cd5\u9519\u8bef\u5bfc\u81f4\u4e8b\u52a1\u53d6\u6d88\uff09\uff0c\u6570\u636e\u4f1a\u6062\u590d\u5230\u4e8b\u52a1\u6267\u884c\u524d\u7684\u72b6\u6001\u3002\u5373\u4f7f\u662f\u8fd0\u884c\u65f6\u9519\u8bef\uff0c\u4e5f\u53ea\u662f\u8df3\u8fc7\u9519\u8bef\u547d\u4ee4\uff0c\u4e0d\u4f1a\u7834\u574f\u6570\u636e\u7684\u4e00\u81f4\u6027\u3002</li> </ul> </li> <li> <p>I - \u9694\u79bb\u6027 (Isolation)</p> <ul> <li>\u6ee1\u8db3\u3002\u7531\u4e8eRedis\u662f\u5355\u7ebf\u7a0b\u6a21\u578b\uff086.0\u524d\uff09\uff0c\u4e00\u4e2a\u4e8b\u52a1\u5728\u6267\u884c<code>EXEC</code>\u65f6\uff0c\u4f1a\u6392\u4ed6\u6027\u5730\u6267\u884c\u961f\u5217\u4e2d\u7684\u6240\u6709\u547d\u4ee4\uff0c\u671f\u95f4\u4e0d\u4f1a\u88ab\u5176\u4ed6\u5ba2\u6237\u7aef\u7684\u547d\u4ee4\u6253\u65ad\uff0c\u4fdd\u8bc1\u4e86\u5b8c\u7f8e\u7684\u9694\u79bb\u6027\u3002</li> </ul> </li> <li> <p>D - \u6301\u4e45\u6027 (Durability)</p> <ul> <li>\u4e0d\u6ee1\u8db3\u3002Redis\u4e8b\u52a1\u7684\u6301\u4e45\u6027\u4f9d\u8d56\u4e8e\u5176\u6301\u4e45\u5316\u914d\u7f6e\uff08RDB/AOF\uff09\u3002\u7531\u4e8e\u6301\u4e45\u5316\u901a\u5e38\u662f\u5f02\u6b65\u6267\u884c\u7684\uff0c<code>EXEC</code>\u6267\u884c\u6210\u529f\u540e\uff0c\u6570\u636e\u4e0d\u4e00\u5b9a\u5df2\u7ecf\u5199\u5165\u78c1\u76d8\u3002\u5982\u679c\u6b64\u65f6\u670d\u52a1\u5668\u5b95\u673a\uff0c\u4e8b\u52a1\u7684\u4fee\u6539\u53ef\u80fd\u4f1a\u4e22\u5931\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E4%BA%8B%E5%8A%A1/#_3","title":"\u56db\u3001 \u5176\u4ed6\u5b9e\u73b0\u4e8b\u52a1\u7684\u65b9\u5f0f","text":"<ul> <li>Lua\u811a\u672c\uff1aRedis\u4fdd\u8bc1Lua\u811a\u672c\u7684\u539f\u5b50\u6027\u6267\u884c\u3002\u53ef\u4ee5\u5c06\u4e00\u7ec4\u547d\u4ee4\u653e\u5728\u4e00\u4e2aLua\u811a\u672c\u4e2d\uff0c\u6548\u679c\u7c7b\u4f3c\u4e8e\u4e8b\u52a1\uff0c\u540c\u6837\u4e0d\u652f\u6301\u8fd0\u884c\u65f6\u9519\u8bef\u7684\u56de\u6eda\u3002</li> <li>\u57fa\u4e8e\u6807\u8bb0\u53d8\u91cf\uff1a\u901a\u8fc7\u4e00\u4e2a\u989d\u5916\u7684key\u4f5c\u4e3a\u201c\u9501\u201d\u6216\u201c\u72b6\u6001\u6807\u8bb0\u201d\u6765\u624b\u52a8\u63a7\u5236\u903b\u8f91\u4e0a\u7684\u4e8b\u52a1\uff0c\u8fd9\u79cd\u65b9\u5f0f\u5b9e\u73b0\u590d\u6742\uff0c\u9700\u8981\u5e94\u7528\u5c42\u7f16\u5199\u5927\u91cf\u4ee3\u7801\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E4%BA%8B%E5%8A%A1/#_4","title":"\u603b\u7ed3\u8868","text":"\u7279\u6027 Redis\u4e8b\u52a1\u7684\u5b9e\u73b0\u4e0e\u7279\u70b9 \u6838\u5fc3\u673a\u5236 <code>MULTI</code>\u5f00\u542f\uff0c\u547d\u4ee4\u5165\u961f\uff0c<code>EXEC</code>\u539f\u5b50\u6267\u884c\u3002 \u539f\u5b50\u6027 \u90e8\u5206\u6ee1\u8db3\u3002\u4fdd\u8bc1\u547d\u4ee4\u88ab\u4e00\u6b21\u6027\u3001\u987a\u5e8f\u6027\u3001\u6392\u4ed6\u6027\u5730\u6267\u884c\uff0c\u4f46\u8fd0\u884c\u65f6\u9519\u8bef\u4e0d\u56de\u6eda\u3002 \u9694\u79bb\u6027 \u6ee1\u8db3\u3002\u5355\u7ebf\u7a0b\u6a21\u578b\u5929\u7136\u4fdd\u8bc1\u4e86\u4e8b\u52a1\u6267\u884c\u671f\u95f4\u7684\u9694\u79bb\u3002 \u6301\u4e45\u6027 \u4e0d\u6ee1\u8db3\u3002\u4f9d\u8d56\u4e8e\u5f02\u6b65\u7684RDB/AOF\u6301\u4e45\u5316\u7b56\u7565\u3002 \u5e76\u53d1\u63a7\u5236 \u901a\u8fc7<code>WATCH</code>\u547d\u4ee4\u5b9e\u73b0\u4e50\u89c2\u9501 (CAS)\uff0c\u5728\u6570\u636e\u88ab\u4fee\u6539\u65f6\u53d6\u6d88\u4e8b\u52a1\uff0c\u9700\u8981\u5ba2\u6237\u7aef\u91cd\u8bd5\u3002 \u9002\u7528\u573a\u666f \u9700\u8981\u5c06\u591a\u4e2a\u547d\u4ee4\u6253\u5305\u6267\u884c\uff0c\u4ee5\u51cf\u5c11\u7f51\u7edc\u5f80\u8fd4\u548c\u4fdd\u8bc1\u64cd\u4f5c\u5e8f\u5217\u4e0d\u88ab\u6253\u65ad\u7684\u573a\u666f\uff0c\u4f46\u4e0d\u9002\u7528\u4e8e\u9700\u8981\u4e25\u683c\u56de\u6eda\u7684\u91d1\u878d\u7b49\u4e1a\u52a1\u3002"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E5%AF%B9%E8%B1%A1%E6%9C%BA%E5%88%B6/","title":"Redis\u5bf9\u8c61\u673a\u5236","text":""},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E5%AF%B9%E8%B1%A1%E6%9C%BA%E5%88%B6/#_1","title":"\u4e00\u3001 \u5f15\u5165\uff1a\u4ece\u54ea\u91cc\u5f00\u59cb\u5b66\u4e60\u5e95\u5c42\uff1f","text":"<p>\u8981\u6df1\u5165\u7406\u89e3 Redis \u7684\u6570\u636e\u7c7b\u578b\uff08String, List, Hash, Set, ZSet, Stream \u7b49\uff09\uff0c\u5c31\u5fc5\u987b\u4e86\u89e3\u5176\u5e95\u5c42\u7684\u5b9e\u73b0\u673a\u5236\u3002</p> <p>Redis \u7684\u6570\u636e\u7c7b\u578b\u5b9e\u73b0\u53ef\u4ee5\u5206\u4e3a\u4e24\u4e2a\u5c42\u6b21\uff1a</p> <ol> <li>\u5bf9\u8c61\u5c42\uff1a\u7edf\u4e00\u7684\u5bf9\u8c61\u7cfb\u7edf\uff0c\u5373 <code>redisObject</code>\u3002</li> <li>\u6570\u636e\u7ed3\u6784\u5c42\uff1a<code>redisObject</code> \u5185\u90e8\u6307\u5411\u7684\u3001\u7528\u4e8e\u5b9e\u9645\u5b58\u50a8\u6570\u636e\u7684\u7f16\u7801\u548c\u5e95\u5c42\u6570\u636e\u7ed3\u6784\u3002</li> </ol> <p>\u6838\u5fc3\u5173\u7cfb\uff1aRedis \u7684\u6bcf\u4e00\u79cd\u5bf9\u5916\u66b4\u9732\u7684\u6570\u636e\u7c7b\u578b\uff0c\u90fd\u662f\u7531\u4e00\u4e2a <code>redisObject</code> \u7ed3\u6784\u548c\u5176\u5185\u90e8\u6307\u9488 <code>ptr</code> \u6307\u5411\u7684\u7279\u5b9a \u7f16\u7801\uff08Encoding\uff09 \u7684\u6570\u636e\u7ed3\u6784\u7ec4\u5408\u800c\u6210\u3002\u540c\u4e00\u79cd\u6570\u636e\u7c7b\u578b\u5728\u4e0d\u540c\u573a\u666f\u4e0b\u53ef\u80fd\u4f1a\u4f7f\u7528\u4e0d\u540c\u7684\u7f16\u7801\u65b9\u5f0f\u4ee5\u4f18\u5316\u6027\u80fd\u548c\u5185\u5b58\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E5%AF%B9%E8%B1%A1%E6%9C%BA%E5%88%B6/#redis-redisobject","title":"\u4e8c\u3001 \u4e3a\u4ec0\u4e48 Redis \u8981\u8bbe\u8ba1 <code>redisObject</code> \u5bf9\u8c61\uff1f","text":"<p>\u8bbe\u8ba1 <code>redisObject</code> \u4e3b\u8981\u662f\u4e3a\u4e86\u89e3\u51b3\u4e24\u4e2a\u6838\u5fc3\u95ee\u9898\uff1a</p> <ol> <li> <p>\u7c7b\u578b\u68c0\u67e5\uff1aRedis \u662f\u5f3a\u7c7b\u578b\u6570\u636e\u5e93\uff0c\u4e0d\u540c\u6570\u636e\u7c7b\u578b\u7684\u952e\u80fd\u6267\u884c\u7684\u547d\u4ee4\u4e0d\u540c\uff08\u5982 <code>LPUSH</code> \u53ea\u80fd\u7528\u4e8e List\uff09\u3002Redis \u9700\u8981\u4e00\u4e2a\u673a\u5236\u6765\u8bc6\u522b\u6bcf\u4e2a\u952e\u7684\u7c7b\u578b\uff0c\u4ee5\u4fbf\u5141\u8bb8\u6216\u62d2\u7edd\u7279\u5b9a\u547d\u4ee4\u7684\u6267\u884c\u3002<code>redisObject</code> \u4e2d\u7684 <code>type</code> \u5b57\u6bb5\u5c31\u627f\u62c5\u4e86\u8fd9\u4e2a\u89d2\u8272\u3002</p> </li> <li> <p>\u591a\u6001\uff08Polymorphism\uff09\uff1a\u540c\u4e00\u79cd\u6570\u636e\u7c7b\u578b\u53ef\u80fd\u6709\u591a\u79cd\u5e95\u5c42\u5b9e\u73b0\uff08\u5373\u7f16\u7801\uff09\u3002\u4f8b\u5982\uff0c\u4e00\u4e2a\u96c6\u5408\uff08Set\uff09\u53ef\u4ee5\u7528 <code>intset</code> (\u6574\u6570\u96c6\u5408) \u6216 <code>hashtable</code> (\u54c8\u5e0c\u8868) \u5b9e\u73b0\u3002\u7528\u6237\u6267\u884c <code>SADD</code> \u547d\u4ee4\u65f6\uff0c\u65e0\u9700\u5173\u5fc3\u5e95\u5c42\u662f\u54ea\u79cd\u7f16\u7801\uff0cRedis \u5e94\u8be5\u80fd\u81ea\u52a8\u9009\u62e9\u6b63\u786e\u7684\u51fd\u6570\u6765\u64cd\u4f5c\u5bf9\u5e94\u7684\u6570\u636e\u7ed3\u6784\u3002<code>redisObject</code> \u4e2d\u7684 <code>encoding</code> \u5b57\u6bb5\u4f7f\u5f97\u8fd9\u79cd\u591a\u6001\u6210\u4e3a\u53ef\u80fd\u3002</p> </li> </ol> <p>\u603b\u7ed3\u6765\u8bf4\uff0c<code>redisObject</code> \u7cfb\u7edf\u63d0\u4f9b\u4e86\uff1a</p> <ul> <li>\u7edf\u4e00\u7684\u5bf9\u8c61\u8868\u793a (<code>redisObject</code>)\u3002</li> <li>\u57fa\u4e8e <code>type</code> \u5c5e\u6027\u7684\u7c7b\u578b\u68c0\u67e5\u3002</li> <li>\u57fa\u4e8e <code>encoding</code> \u5c5e\u6027\u7684\u547d\u4ee4\u591a\u6001\u3002</li> <li>\u7edf\u4e00\u7684\u5185\u5b58\u7ba1\u7406\u673a\u5236\uff08\u5206\u914d\u3001\u5171\u4eab\u3001\u9500\u6bc1\uff09\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E5%AF%B9%E8%B1%A1%E6%9C%BA%E5%88%B6/#redisobject","title":"\u4e09\u3001 <code>redisObject</code> \u6570\u636e\u7ed3\u6784","text":"<p><code>redisObject</code> \u662f Redis \u7c7b\u578b\u7cfb\u7edf\u7684\u6838\u5fc3\uff0c\u6570\u636e\u5e93\u4e2d\u6240\u6709\u7684\u952e\u548c\u503c\u90fd\u7531\u8fd9\u4e2a\u7ed3\u6784\u4f53\u8868\u793a\u3002</p> <p>\u7ed3\u6784\u4f53\u5b9a\u4e49 (<code>robj</code>)\uff1a</p> <pre><code>typedef struct redisObject {\n    unsigned type:4;      // \u5bf9\u8c61\u7c7b\u578b (4\u4f4d)\n    unsigned encoding:4;  // \u7f16\u7801\u65b9\u5f0f (4\u4f4d)\n    unsigned lru:24;      // LRU/LFU \u6570\u636e (24\u4f4d)\n    int refcount;         // \u5f15\u7528\u8ba1\u6570\n    void *ptr;            // \u6307\u5411\u5e95\u5c42\u6570\u636e\u7ed3\u6784\u7684\u6307\u9488\n} robj;\n</code></pre> <p>\u5404\u5b57\u6bb5\u8be6\u89e3\uff1a</p> <ol> <li> <p><code>type</code> (4\u4f4d)\uff1a\u8bb0\u5f55\u5bf9\u8c61\u7684\u7c7b\u578b\uff0c\u662f\u4ee5\u4e0b\u5e38\u91cf\u4e4b\u4e00\uff1a</p> <ul> <li><code>OBJ_STRING</code> (\u5b57\u7b26\u4e32)</li> <li><code>OBJ_LIST</code> (\u5217\u8868)</li> <li><code>OBJ_SET</code> (\u96c6\u5408)</li> <li><code>OBJ_ZSET</code> (\u6709\u5e8f\u96c6\u5408)</li> <li><code>OBJ_HASH</code> (\u54c8\u5e0c)</li> <li>(\u8fd8\u6709 <code>OBJ_MODULE</code>, <code>OBJ_STREAM</code> \u7b49)</li> </ul> </li> <li> <p><code>encoding</code> (4\u4f4d)\uff1a\u8bb0\u5f55 <code>ptr</code> \u6307\u9488\u6307\u5411\u7684\u6570\u636e\u7ed3\u6784\u7684\u7f16\u7801\u65b9\u5f0f\uff0c\u662f\u4ee5\u4e0b\u5e38\u91cf\u4e4b\u4e00\uff1a</p> <ul> <li><code>OBJ_ENCODING_RAW</code>: \u539f\u59cb SDS \u5b57\u7b26\u4e32</li> <li><code>OBJ_ENCODING_INT</code>: 64\u4f4d\u6709\u7b26\u53f7\u6574\u6570</li> <li><code>OBJ_ENCODING_EMBSTR</code>: \u5d4c\u5165\u5f0f SDS \u5b57\u7b26\u4e32 (\u77ed\u5b57\u7b26\u4e32\u4f18\u5316)</li> <li><code>OBJ_ENCODING_HT</code>: \u54c8\u5e0c\u8868 (dict)</li> <li><code>OBJ_ENCODING_ZIPLIST</code>: \u538b\u7f29\u5217\u8868</li> <li><code>OBJ_ENCODING_INTSET</code>: \u6574\u6570\u96c6\u5408</li> <li><code>OBJ_ENCODING_SKIPLIST</code>: \u8df3\u8868\u548c\u54c8\u5e0c\u8868</li> <li><code>OBJ_ENCODING_QUICKLIST</code>: \u5feb\u901f\u5217\u8868</li> <li><code>OBJ_ENCODING_STREAM</code>: \u57fa\u6570\u6811 (Radix Tree)</li> <li>\u6ce8\u610f\uff1a<code>OBJ_ENCODING_ZIPMAP</code> \u548c <code>OBJ_ENCODING_LINKEDLIST</code> \u5df2\u88ab\u5e9f\u5f03\u3002</li> </ul> </li> <li> <p><code>ptr</code>\uff1a\u4e00\u4e2a <code>void</code> \u6307\u9488\uff0c\u6307\u5411\u771f\u6b63\u5b58\u50a8\u6570\u636e\u7684\u5e95\u5c42\u6570\u636e\u7ed3\u6784\u5b9e\u4f8b\u3002\u4f8b\u5982\uff0c\u5982\u679c <code>type</code> \u662f <code>OBJ_LIST</code>\uff0c<code>encoding</code> \u662f <code>OBJ_ENCODING_QUICKLIST</code>\uff0c\u90a3\u4e48 <code>ptr</code> \u5c31\u6307\u5411\u4e00\u4e2a <code>quicklist</code> \u7ed3\u6784\u3002</p> </li> <li> <p><code>lru</code> (24\u4f4d)\uff1a</p> <ul> <li>\u8bb0\u5f55\u5bf9\u8c61\u6700\u540e\u4e00\u6b21\u88ab\u8bbf\u95ee\u7684\u65f6\u95f4\u6233\u3002</li> <li>\u7528\u4e8e\u5185\u5b58\u6dd8\u6c70\u7b56\u7565\uff1a\u5f53 Redis \u5185\u5b58\u8fbe\u5230 <code>maxmemory</code> \u9650\u5236\u4e14\u6dd8\u6c70\u7b56\u7565\u4e3a <code>volatile-lru</code> \u6216 <code>allkeys-lru</code> \u65f6\uff0c\u4f1a\u4f18\u5148\u6dd8\u6c70 <code>lru</code> \u503c\uff08\u5373\u7a7a\u8f6c\u65f6\u95f4\uff09\u8f83\u5927\u7684\u5bf9\u8c61\u3002</li> <li><code>OBJECT IDLETIME &lt;key&gt;</code> \u547d\u4ee4\u53ef\u4ee5\u67e5\u770b\u952e\u7684\u7a7a\u8f6c\u65f6\u957f\u3002</li> </ul> </li> <li> <p><code>refcount</code>\uff1a</p> <ul> <li>\u5f15\u7528\u8ba1\u6570\u3002\u7528\u4e8e\u5b9e\u73b0\u5bf9\u8c61\u7684\u5171\u4eab\u548c\u81ea\u52a8\u5185\u5b58\u56de\u6536\u3002</li> </ul> </li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E5%AF%B9%E8%B1%A1%E6%9C%BA%E5%88%B6/#_2","title":"\u56db\u3001 \u547d\u4ee4\u7684\u7c7b\u578b\u68c0\u67e5\u548c\u591a\u6001","text":"<p>\u5f53 Redis \u6267\u884c\u4e00\u4e2a\u547d\u4ee4\u65f6\uff08\u5982 <code>LPOP mylist</code>\uff09\uff0c\u9075\u5faa\u4ee5\u4e0b\u6b65\u9aa4\uff1a</p> <ol> <li>\u67e5\u627e\u5bf9\u8c61\uff1a\u6839\u636e\u952e\u540d <code>mylist</code> \u5728\u6570\u636e\u5e93\u4e2d\u67e5\u627e\u5bf9\u5e94\u7684 <code>redisObject</code>\u3002</li> <li>\u7c7b\u578b\u68c0\u67e5\uff1a\u68c0\u67e5 <code>redisObject-&gt;type</code> \u662f\u5426\u4e3a <code>OBJ_LIST</code>\u3002\u5982\u679c\u4e0d\u662f\uff0c\u5219\u8fd4\u56de\u7c7b\u578b\u9519\u8bef\u3002</li> <li>\u9009\u62e9\u5b9e\u73b0\uff1a\u6839\u636e <code>redisObject-&gt;encoding</code>\uff08\u6bd4\u5982\u662f <code>OBJ_ENCODING_QUICKLIST</code>\uff09\u9009\u62e9\u5e76\u8c03\u7528\u9488\u5bf9\u8be5\u7f16\u7801\u7684\u7279\u5b9a\u64cd\u4f5c\u51fd\u6570\u3002</li> <li>\u6267\u884c\u5e76\u8fd4\u56de\uff1a\u6267\u884c\u51fd\u6570\uff0c\u64cd\u4f5c <code>ptr</code> \u6307\u5411\u7684 <code>quicklist</code> \u7ed3\u6784\uff0c\u5e76\u8fd4\u56de\u7ed3\u679c\u3002</li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E5%AF%B9%E8%B1%A1%E6%9C%BA%E5%88%B6/#_3","title":"\u4e94\u3001 \u5bf9\u8c61\u5171\u4eab","text":"<p>\u4e3a\u4e86\u8282\u7ea6\u5185\u5b58\uff0cRedis \u4f1a\u521b\u5efa\u4e00\u4e9b\u5e38\u7528\u7684\u5bf9\u8c61\u5e76\u8fdb\u884c\u5171\u4eab\uff0c\u800c\u4e0d\u662f\u6bcf\u6b21\u90fd\u91cd\u65b0\u521b\u5efa\u3002</p> <ul> <li> <p>\u5171\u4eab\u8303\u56f4\uff1a</p> <ol> <li>\u5e38\u7528\u547d\u4ee4\u56de\u590d\uff1a\u5982\u6210\u529f\u65f6\u8fd4\u56de\u7684 <code>(shared.ok)</code>\uff0c\u9519\u8bef\u65f6\u8fd4\u56de\u7684 <code>(shared.err)</code> \u7b49\u3002</li> <li>\u6574\u6570\u5bf9\u8c61\uff1a\u5728\u9ed8\u8ba4\u914d\u7f6e\u4e0b\uff0cRedis \u4f1a\u9884\u5148\u521b\u5efa\u5e76\u5171\u4eab 0 \u5230 9999 \u7684\u6240\u6709\u6574\u6570\u5bf9\u8c61\u3002\u5f53\u4e00\u4e2a\u5b57\u7b26\u4e32\u53ef\u4ee5\u88ab\u89e3\u91ca\u4e3a\u8fd9\u4e2a\u8303\u56f4\u5185\u7684\u6574\u6570\u65f6\uff0cRedis \u4f1a\u76f4\u63a5\u8fd4\u56de\u5171\u4eab\u5bf9\u8c61\u7684\u6307\u9488\u3002</li> </ol> </li> <li> <p>\u4e3a\u4ec0\u4e48\u53ea\u5171\u4eab\u5b57\u7b26\u4e32/\u6574\u6570\u5bf9\u8c61\uff0c\u4e0d\u5171\u4eab\u590d\u6742\u5bf9\u8c61\uff08List, Hash\u7b49\uff09\uff1f</p> <ul> <li>\u5171\u4eab\u5bf9\u8c61\u7684\u524d\u63d0\u662f\u9a8c\u8bc1\u5f85\u521b\u5efa\u7684\u5bf9\u8c61\u662f\u5426\u548c\u5171\u4eab\u5bf9\u8c61\u5b8c\u5168\u4e00\u81f4\u3002</li> <li>\u9a8c\u8bc1\u590d\u6742\u5ea6\uff1a<ul> <li>\u9a8c\u8bc1\u4e00\u4e2a\u6574\u6570\u503c\u662f\u5426\u5728\u5171\u4eab\u8303\u56f4\u5185\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(1)\u3002</li> <li>\u9a8c\u8bc1\u4e00\u4e2a\u5b57\u7b26\u4e32\u503c\u662f\u5426\u4e0e\u5171\u4eab\u5bf9\u8c61\u76f8\u7b49\uff0c\u9700\u8981\u9010\u5b57\u7b26\u6bd4\u8f83\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(N)\uff0c\u5176\u4e2d N \u662f\u5b57\u7b26\u4e32\u957f\u5ea6\u3002</li> <li>\u9a8c\u8bc1\u4e00\u4e2a\u590d\u6742\u5bf9\u8c61\uff08\u5982 List\uff09\u662f\u5426\u4e0e\u5171\u4eab\u5bf9\u8c61\u76f8\u7b49\uff0c\u9700\u8981\u904d\u5386\u5176\u6240\u6709\u5143\u7d20\u5e76\u9010\u4e00\u6bd4\u8f83\uff0c\u590d\u6742\u5ea6\u4f1a\u4e0a\u5347\u5230 O(N^2) \u6216\u66f4\u9ad8\u3002</li> </ul> </li> <li>\u6743\u8861\uff1a\u5bf9\u4e8e\u590d\u6742\u5bf9\u8c61\uff0c\u9a8c\u8bc1\u5171\u4eab\u6240\u6d88\u8017\u7684 CPU \u6210\u672c\u8fdc\u5927\u4e8e\u8282\u7701\u4e0b\u6765\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u5f97\u4e0d\u507f\u5931\u3002\u56e0\u6b64 Redis \u53ea\u5bf9\u9a8c\u8bc1\u6210\u672c\u4f4e\u7684\u6574\u6570\u548c\u5e38\u7528\u56de\u590d\u5b57\u7b26\u4e32\u8fdb\u884c\u5171\u4eab\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E5%AF%B9%E8%B1%A1%E6%9C%BA%E5%88%B6/#_4","title":"\u516d\u3001 \u5f15\u7528\u8ba1\u6570\u4ee5\u53ca\u5bf9\u8c61\u7684\u9500\u6bc1","text":"<p>Redis \u4f7f\u7528\u5f15\u7528\u8ba1\u6570\uff08<code>refcount</code>\uff09\u673a\u5236\u6765\u5b9e\u73b0\u5185\u5b58\u7684\u81ea\u52a8\u56de\u6536\uff0c\u907f\u514d\u4e86\u5783\u573e\u56de\u6536\uff08GC\uff09\u5e26\u6765\u7684\u505c\u987f\u3002</p> <ul> <li>\u5de5\u4f5c\u673a\u5236\uff1a<ul> <li>\u521b\u5efa\u5bf9\u8c61\uff1a\u5f53\u4e00\u4e2a\u65b0\u5bf9\u8c61\u88ab\u521b\u5efa\u65f6\uff0c\u5176 <code>refcount</code> \u521d\u59cb\u5316\u4e3a 1\u3002</li> <li>\u589e\u52a0\u5f15\u7528\uff1a\u5f53\u4e00\u4e2a\u5bf9\u8c61\u88ab\u4e00\u4e2a\u65b0\u7684\u6307\u9488\u5f15\u7528\uff08\u4f8b\u5982\uff0c\u88ab\u5171\u4eab\uff09\u65f6\uff0c\u5176 <code>refcount</code> \u52a0 1\u3002</li> <li>\u51cf\u5c11\u5f15\u7528\uff1a\u5f53\u4e00\u4e2a\u6307\u5411\u5bf9\u8c61\u7684\u5f15\u7528\u88ab\u79fb\u9664\u65f6\uff08\u4f8b\u5982\uff0c\u4e00\u4e2a\u952e\u88ab\u5220\u9664\u6216\u88ab\u65b0\u503c\u8986\u76d6\uff09\uff0c\u5176 <code>refcount</code> \u51cf 1\u3002</li> <li>\u91ca\u653e\u5bf9\u8c61\uff1a\u5f53\u5bf9\u8c61\u7684 <code>refcount</code> \u53d8\u4e3a 0 \u65f6\uff0c\u8868\u793a\u6ca1\u6709\u4efb\u4f55\u5730\u65b9\u5f15\u7528\u8be5\u5bf9\u8c61\uff0c\u7a0b\u5e8f\u4f1a\u7acb\u5373\u91ca\u653e\u8fd9\u4e2a <code>redisObject</code> \u7ed3\u6784\u53ca\u5176 <code>ptr</code> \u6307\u5411\u7684\u5e95\u5c42\u6570\u636e\u7ed3\u6784\u6240\u5360\u7528\u7684\u5185\u5b58\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E5%AF%B9%E8%B1%A1%E6%9C%BA%E5%88%B6/#redisobject_1","title":"\u6838\u5fc3\uff1aRedisObject \u7ed3\u6784\u4f53","text":"<p>\u5728 Redis \u5185\u90e8\uff0c\u6bcf\u4e00\u4e2a\u952e\u503c\u5bf9\u7684\u201c\u503c\u201d\uff08Value\uff09\u90fd\u662f\u4e00\u4e2a <code>redisObject</code> \u7ed3\u6784\u4f53\u3002\u6211\u4eec\u53ef\u4ee5\u628a\u5b83\u60f3\u8c61\u6210\u4e00\u4e2a\u201c\u5bb9\u5668\u201d\u6216\u8005\u201c\u5305\u88c5\u76d2\u201d\uff0c\u91cc\u9762\u5305\u542b\u4e86\u6570\u636e\u7684\u5404\u79cd\u5143\u4fe1\u606f\u3002</p> <p>\u4e00\u4e2a\u7b80\u5316\u7684 <code>redisObject</code> \u7ed3\u6784\u4f53\u5305\u542b\u4ee5\u4e0b\u51e0\u4e2a\u5173\u952e\u6210\u5458\uff1a</p> <ol> <li> <p>type (\u7c7b\u578b)</p> <ul> <li> <p>\u8fd9\u4e2a\u5b57\u6bb5\u8bb0\u5f55\u4e86\u8be5\u5bf9\u8c61\u5bf9\u5916\u8868\u73b0\u51fa\u7684\u6570\u636e\u7c7b\u578b\u3002</p> </li> <li> <p>\u5b83\u5bf9\u5e94\u6211\u4eec\u5e73\u65f6\u4f7f\u7528\u7684 Redis \u547d\u4ee4\uff0c\u5982 <code>TYPE</code> \u547d\u4ee4\u8fd4\u56de\u7684\u5c31\u662f\u8fd9\u4e2a\u503c\u3002</p> </li> <li> <p>\u4e3b\u8981\u7684\u7c7b\u578b\u6709\uff1a<code>OBJ_STRING</code> (\u5b57\u7b26\u4e32)\u3001<code>OBJ_LIST</code> (\u5217\u8868)\u3001<code>OBJ_HASH</code> (\u54c8\u5e0c)\u3001<code>OBJ_SET</code> (\u96c6\u5408)\u3001<code>OBJ_ZSET</code> (\u6709\u5e8f\u96c6\u5408)\u3002</p> </li> </ul> </li> <li> <p>encoding (\u7f16\u7801)</p> <ul> <li> <p>\u8fd9\u662f Redis \u5bf9\u8c61\u673a\u5236\u7684\u7cbe\u9ad3\u6240\u5728\u3002\u5b83\u8bb0\u5f55\u4e86\u8be5\u5bf9\u8c61\u5728\u5185\u5b58\u4e2d\u5b9e\u9645\u7684\u5b58\u50a8\u65b9\u5f0f\u3002</p> </li> <li> <p>\u540c\u4e00\u79cd <code>type</code> \u7684\u5bf9\u8c61\uff0c\u53ef\u80fd\u4f1a\u6709\u591a\u79cd\u4e0d\u540c\u7684 <code>encoding</code> \u65b9\u5f0f\uff0c\u4ee5\u6b64\u6765\u5728\u4e0d\u540c\u573a\u666f\u4e0b\u4f18\u5316\u5185\u5b58\u4f7f\u7528\u548c\u6267\u884c\u6548\u7387\u3002</p> </li> <li> <p>\u6bd4\u5982\uff0c\u4e00\u4e2a\u5217\u8868\uff08type=OBJ_LIST\uff09\u5728\u5143\u7d20\u8f83\u5c11\u65f6\uff0c\u53ef\u80fd\u4f1a\u7528\u4e00\u5757\u8fde\u7eed\u7684\u5185\u5b58\uff08ziplist \u7f16\u7801\uff09\u6765\u5b58\u50a8\uff0c\u4ee5\u8282\u7701\u7a7a\u95f4\uff1b\u5f53\u5143\u7d20\u53d8\u591a\u65f6\uff0c\u5219\u4f1a\u81ea\u52a8\u8f6c\u6362\u4e3a\u53cc\u5411\u94fe\u8868\uff08linkedlist \u7f16\u7801\uff09\u6765\u4fdd\u8bc1\u64cd\u4f5c\u6548\u7387\u3002</p> </li> </ul> </li> <li> <p>ptr (\u6307\u9488)</p> <ul> <li> <p>\u4e00\u4e2a <code>void*</code> \u6307\u9488\uff0c\u6307\u5411\u5bf9\u8c61\u5728\u5185\u5b58\u4e2d\u5b9e\u9645\u7684\u6570\u636e\u7ed3\u6784\u3002</p> </li> <li> <p>\u4f8b\u5982\uff0c\u5982\u679c\u4e00\u4e2a\u5bf9\u8c61\u7684 <code>encoding</code> \u662f\u201chashtable\u201d\uff0c\u90a3\u4e48\u8fd9\u4e2a <code>ptr</code> \u5c31\u6307\u5411\u4e00\u4e2a\u54c8\u5e0c\u8868\u7684\u7ed3\u6784\u4f53\u3002\u5982\u679c <code>encoding</code> \u662f\u201cint\u201d\uff0c\u8fd9\u4e2a <code>ptr</code> \u5c31\u76f4\u63a5\u5b58\u50a8\u90a3\u4e2a\u6574\u6570\u503c\u3002</p> </li> </ul> </li> <li> <p>refcount (\u5f15\u7528\u8ba1\u6570)</p> <ul> <li> <p>\u8fd9\u662f\u4e00\u4e2a\u7528\u4e8e\u5185\u5b58\u56de\u6536\u7684\u5b57\u6bb5\uff0c\u5b9e\u73b0\u4e86\u5f15\u7528\u8ba1\u6570\u673a\u5236\u3002</p> </li> <li> <p>\u5f53\u4e00\u4e2a\u5bf9\u8c61\u88ab\u4e00\u4e2a\u65b0\u7684\u952e\u5f15\u7528\u65f6\uff0c\u5176 <code>refcount</code> \u4f1a\u52a0 1\u3002</p> </li> <li> <p>\u5f53\u5f15\u7528\u8fd9\u4e2a\u5bf9\u8c61\u7684\u952e\u88ab\u5220\u9664\u65f6\uff0c\u5176 <code>refcount</code> \u4f1a\u51cf 1\u3002</p> </li> <li> <p>\u5f53 <code>refcount</code> \u53d8\u4e3a 0 \u65f6\uff0c\u8bf4\u660e\u6ca1\u6709\u4efb\u4f55\u952e\u5f15\u7528\u8be5\u5bf9\u8c61\u4e86\uff0cRedis \u5c31\u4f1a\u91ca\u653e\u8fd9\u4e2a\u5bf9\u8c61\u6240\u5360\u7528\u7684\u5185\u5b58\u3002</p> </li> </ul> </li> <li> <p>lru (\u6700\u540e\u8bbf\u95ee\u65f6\u95f4)</p> <ul> <li> <p>\u8fd9\u4e2a\u5b57\u6bb5\u8bb0\u5f55\u4e86\u5bf9\u8c61\u6700\u540e\u4e00\u6b21\u88ab\u547d\u4ee4\u8bbf\u95ee\u7684\u65f6\u95f4\u3002</p> </li> <li> <p>\u5f53 Redis \u5185\u5b58\u4e0d\u8db3\u9700\u8981\u6dd8\u6c70\u6570\u636e\u65f6\uff0c\u8fd9\u4e2a <code>lru</code> \u5b57\u6bb5\u5c31\u4e3a LRU (Least Recently Used) \u6216 LFU (Least Frequently Used) \u7b49\u6dd8\u6c70\u7b56\u7565\u63d0\u4f9b\u4e86\u51b3\u7b56\u4f9d\u636e\u3002</p> </li> </ul> </li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E5%AF%B9%E8%B1%A1%E6%9C%BA%E5%88%B6/#type-encoding","title":"Type \u4e0e Encoding \u7684\u5173\u7cfb\uff1a\u4e00\u5bf9\u591a","text":"<p>Redis \u5bf9\u8c61\u673a\u5236\u7684\u6838\u5fc3\u5c31\u662f\u901a\u8fc7\u201c\u7c7b\u578b\u201d\u548c\u201c\u7f16\u7801\u201d\u7684\u6620\u5c04\uff0c\u5b9e\u73b0\u4e86\u52a8\u6001\u7684\u5185\u90e8\u8868\u793a\u3002\u4e00\u79cd\u5bf9\u5916\u7c7b\u578b\uff0c\u53ef\u4ee5\u5bf9\u5e94\u591a\u79cd\u5185\u90e8\u7f16\u7801\u3002</p> <p>\u4e0b\u9762\u662f\u5404\u79cd\u4e3b\u8981\u7c7b\u578b\u7684\u7f16\u7801\u65b9\u5f0f\uff1a</p> <p>1. String (\u5b57\u7b26\u4e32)</p> <ul> <li> <p><code>encoding: int</code>\uff1a\u5f53\u5b57\u7b26\u4e32\u503c\u53ef\u4ee5\u88ab\u8868\u793a\u4e3a\u4e00\u4e2a 64 \u4f4d\u6709\u7b26\u53f7\u6574\u6570\u65f6\uff0cRedis \u4f1a\u4f7f\u7528\u8fd9\u79cd\u7f16\u7801\u3002\u5b83\u76f4\u63a5\u5c06\u6574\u6570\u503c\u4fdd\u5b58\u5728 <code>ptr</code> \u6307\u9488\u91cc\uff0c\u4e0d\u989d\u5916\u5206\u914d\u5185\u5b58\uff0c\u6781\u5927\u5730\u8282\u7701\u4e86\u7a7a\u95f4\u3002</p> </li> <li> <p><code>encoding: embstr</code>\uff1a\u5f53\u5b57\u7b26\u4e32\u957f\u5ea6\u5f88\u77ed\uff08\u9ed8\u8ba4\u5c0f\u4e8e 44 \u5b57\u8282\uff09\u65f6\u4f7f\u7528\u3002\u5b83\u4f1a\u5c06 <code>redisObject</code> \u7ed3\u6784\u4f53\u548c\u5b57\u7b26\u4e32\u5185\u5bb9\u5206\u914d\u5728\u4e00\u5757\u8fde\u7eed\u7684\u5185\u5b58\u4e2d\u3002\u8fd9\u6837\u505a\u7684\u597d\u5904\u662f\u53ea\u9700\u8981\u4e00\u6b21\u5185\u5b58\u5206\u914d\uff0c\u5e76\u4e14\u6570\u636e\u5c40\u90e8\u6027\u66f4\u597d\uff0c\u8bbf\u95ee\u6548\u7387\u9ad8\u3002</p> </li> <li> <p><code>encoding: raw</code>\uff1a\u5f53\u5b57\u7b26\u4e32\u957f\u5ea6\u8f83\u957f\u65f6\u4f7f\u7528\u3002\u5b83\u4f1a\u4e3a\u5b57\u7b26\u4e32\u5185\u5bb9\u5355\u72ec\u5206\u914d\u4e00\u5757\u5185\u5b58\uff0c\u5e76\u901a\u8fc7 <code>ptr</code> \u6307\u9488\u6307\u5411\u5b83\u3002\u8fd9\u5c31\u662f Redis \u7684\u52a8\u6001\u5b57\u7b26\u4e32\uff08SDS\uff09\u3002</p> </li> </ul> <p>2. List (\u5217\u8868)</p> <ul> <li> <p><code>encoding: ziplist</code>\uff1a\u5f53\u5217\u8868\u7684\u5143\u7d20\u6570\u91cf\u8f83\u5c11\u4e14\u6bcf\u4e2a\u5143\u7d20\u7684\u5927\u5c0f\u4e5f\u8f83\u5c0f\u65f6\u4f7f\u7528\u3002<code>ziplist</code> \u662f\u4e00\u5757\u7ecf\u8fc7\u7279\u6b8a\u7f16\u7801\u7684\u8fde\u7eed\u5185\u5b58\uff0c\u975e\u5e38\u7d27\u51d1\uff0c\u4f46\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u53ef\u80fd\u4f1a\u5f15\u53d1\u8fde\u9501\u66f4\u65b0\uff0c\u6548\u7387\u8f83\u4f4e\u3002</p> </li> <li> <p><code>encoding: linkedlist</code>\uff1a\u5f53\u5217\u8868\u4e0d\u6ee1\u8db3 <code>ziplist</code> \u7684\u6761\u4ef6\u65f6\uff0c\u4f1a\u8f6c\u6362\u4e3a\u6807\u51c6\u7684\u53cc\u5411\u94fe\u8868\u3002\u5b83\u5728\u63d2\u5165\u548c\u5220\u9664\u8282\u70b9\u65f6\u6548\u7387\u5f88\u9ad8\uff08O(1)\uff09\uff0c\u4f46\u6bcf\u4e2a\u8282\u70b9\u90fd\u9700\u8981\u989d\u5916\u7684\u6307\u9488\u5f00\u9500\uff0c\u5185\u5b58\u5360\u7528\u8f83\u5927\u3002</p> </li> <li> <p>(\u6ce8\u610f\uff1a\u5728\u8f83\u65b0\u7248\u672c\u7684 Redis \u4e2d\uff0c<code>linkedlist</code> \u5df2\u88ab <code>quicklist</code> \u53d6\u4ee3\u3002<code>quicklist</code> \u662f\u4e00\u4e2a\u7531 <code>ziplist</code> \u7ec4\u6210\u7684\u53cc\u5411\u94fe\u8868\uff0c\u662f\u4e24\u8005\u7684\u6df7\u5408\u4f53\uff0c\u517c\u987e\u4e86\u7a7a\u95f4\u548c\u6548\u7387\u3002)</p> </li> </ul> <p>3. Hash (\u54c8\u5e0c)</p> <ul> <li> <p><code>encoding: ziplist</code>\uff1a\u5f53\u54c8\u5e0c\u7684\u952e\u503c\u5bf9\u6570\u91cf\u8f83\u5c11\u4e14\u952e\u548c\u503c\u7684\u5927\u5c0f\u4e5f\u8f83\u5c0f\u65f6\u4f7f\u7528\u3002</p> </li> <li> <p><code>encoding: hashtable</code>\uff1a\u5f53\u54c8\u5e0c\u4e0d\u6ee1\u8db3 <code>ziplist</code> \u7684\u6761\u4ef6\u65f6\uff0c\u4f1a\u8f6c\u6362\u4e3a\u6807\u51c6\u7684\u54c8\u5e0c\u8868\u7ed3\u6784\u3002</p> </li> </ul> <p>4. Set (\u96c6\u5408)</p> <ul> <li> <p><code>encoding: intset</code>\uff1a\u5f53\u96c6\u5408\u4e2d\u7684\u6240\u6709\u5143\u7d20\u90fd\u662f\u6574\u6570\u65f6\u4f7f\u7528\u3002<code>intset</code> \u662f\u4e00\u4e2a\u7d27\u51d1\u7684\u3001\u6709\u5e8f\u7684\u6574\u6570\u6570\u7ec4\uff0c\u975e\u5e38\u8282\u7701\u5185\u5b58\u3002</p> </li> <li> <p><code>encoding: hashtable</code>\uff1a\u5f53\u96c6\u5408\u4e2d\u51fa\u73b0\u975e\u6574\u6570\u5143\u7d20\uff0c\u6216\u5143\u7d20\u6570\u91cf\u8d85\u8fc7\u4e00\u5b9a\u9608\u503c\u65f6\uff0c\u4f1a\u8f6c\u6362\u4e3a\u6807\u51c6\u7684\u54c8\u5e0c\u8868\u3002</p> </li> </ul> <p>5. ZSet (\u6709\u5e8f\u96c6\u5408)</p> <ul> <li> <p><code>encoding: ziplist</code>\uff1a\u5f53\u6709\u5e8f\u96c6\u5408\u7684\u5143\u7d20\u6570\u91cf\u548c\u5927\u5c0f\u90fd\u8f83\u5c0f\u65f6\u4f7f\u7528\u3002\u6bcf\u4e2a\u5143\u7d20\uff08member \u548c score\uff09\u5728 <code>ziplist</code> \u4e2d\u76f8\u90bb\u5b58\u50a8\u3002</p> </li> <li> <p><code>encoding: skiplist</code>\uff1a\u5f53\u4e0d\u6ee1\u8db3 <code>ziplist</code> \u6761\u4ef6\u65f6\uff0c\u4f1a\u8f6c\u6362\u4e3a\u8df3\u8dc3\u8868\uff08skiplist\uff09\u3002\u5b9e\u9645\u4e0a\u5b83\u662f\u4e00\u4e2a\u590d\u5408\u7ed3\u6784\uff0c\u540c\u65f6\u5305\u542b\u4e00\u4e2a\u54c8\u5e0c\u8868\u548c\u4e00\u4e2a\u8df3\u8dc3\u8868\u3002\u54c8\u5e0c\u8868\u7528\u4e8e O(1) \u590d\u6742\u5ea6\u67e5\u627e\u6210\u5458\u7684\u5206\u6570\uff08score\uff09\uff0c\u8df3\u8dc3\u8868\u7528\u4e8e O(logN) \u590d\u6742\u5ea6\u7684\u8303\u56f4\u67e5\u627e\u548c\u6392\u5e8f\u64cd\u4f5c\u3002</p> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E5%AF%B9%E8%B1%A1%E6%9C%BA%E5%88%B6/#_5","title":"\u7f16\u7801\u7684\u81ea\u52a8\u8f6c\u6362","text":"<p>Redis \u7684\u7f16\u7801\u8f6c\u6362\u662f\u81ea\u52a8\u4e14\u5355\u5411\u7684\u3002\u5f53\u4e00\u4e2a\u5bf9\u8c61\u4e0d\u518d\u6ee1\u8db3\u67d0\u79cd\u7d27\u51d1\u7f16\u7801\u7684\u6761\u4ef6\u65f6\uff0cRedis \u4f1a\u81ea\u52a8\u5c06\u5176\u8f6c\u6362\u4e3a\u66f4\u901a\u7528\u7684\u7f16\u7801\u3002</p> <ul> <li> <p>\u89e6\u53d1\u6761\u4ef6\uff1a\u6bd4\u5982\u5411\u4e00\u4e2a <code>intset</code> \u7f16\u7801\u7684\u96c6\u5408\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u5b57\u7b26\u4e32\u5143\u7d20\uff0c\u6216\u8005\u4e00\u4e2a <code>ziplist</code> \u7f16\u7801\u7684\u5217\u8868\u957f\u5ea6\u8d85\u8fc7\u4e86\u914d\u7f6e\u7684\u9608\u503c\u3002</p> </li> <li> <p>\u8f6c\u6362\u65b9\u5411\uff1a\u8f6c\u6362\u6c38\u8fdc\u662f\u4ece\u7279\u6b8a\u3001\u7d27\u51d1\u7684\u7f16\u7801\u8f6c\u5411\u901a\u7528\u3001\u590d\u6742\u7684\u7f16\u7801\uff08\u4f8b\u5982 <code>intset</code> -&gt; <code>hashtable</code>\uff0c<code>ziplist</code> -&gt; <code>linkedlist</code>/<code>hashtable</code>\uff09\u3002\u4e00\u65e6\u8f6c\u6362\uff0c\u5c31\u65e0\u6cd5\u518d\u53d8\u56de\u53bb\u3002</p> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E5%AF%B9%E8%B1%A1%E6%9C%BA%E5%88%B6/#_6","title":"\u5185\u5b58\u7ba1\u7406\uff1a\u5bf9\u8c61\u5171\u4eab","text":"<p>\u4e3a\u4e86\u8fdb\u4e00\u6b65\u8282\u7701\u5185\u5b58\uff0cRedis \u8fd8\u5b9e\u73b0\u4e86\u5bf9\u8c61\u5171\u4eab\u673a\u5236\u3002</p> <p>\u5728 Redis \u542f\u52a8\u65f6\uff0c\u4f1a\u9884\u5148\u521b\u5efa 10000 \u4e2a\uff08\u9ed8\u8ba4 0 \u5230 9999\uff09\u5b57\u7b26\u4e32\u5bf9\u8c61\uff0c\u8fd9\u4e9b\u5bf9\u8c61\u5305\u542b\u4ece 0 \u5230 9999 \u7684\u6574\u6570\u503c\u3002\u5f53\u7a0b\u5e8f\u4e2d\u9700\u8981\u4f7f\u7528\u8fd9\u4e9b\u6570\u503c\u4f5c\u4e3a\u5b57\u7b26\u4e32\u503c\u65f6\uff08\u4f8b\u5982 <code>SET mykey 100</code>\uff09\uff0cRedis \u4e0d\u4f1a\u521b\u5efa\u65b0\u5bf9\u8c61\uff0c\u800c\u662f\u76f4\u63a5\u8ba9\u952e\u7684 <code>redisObject</code> \u6307\u9488\u6307\u5411\u5171\u4eab\u5bf9\u8c61\uff0c\u5e76\u5c06\u5176 <code>refcount</code> \u52a0 1\u3002</p> <p>\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u5f53\u591a\u4e2a\u952e\u5b58\u50a8\u76f8\u540c\u7684\u5e38\u7528\u5c0f\u6574\u6570\u65f6\uff0c\u5b83\u4eec\u5728\u5185\u90e8\u5b9e\u9645\u4e0a\u5171\u4eab\u7740\u540c\u4e00\u4e2a\u7269\u7406\u5bf9\u8c61\uff0c\u4ece\u800c\u5927\u5927\u8282\u7701\u4e86\u5185\u5b58\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E5%AF%B9%E8%B1%A1%E6%9C%BA%E5%88%B6/#_7","title":"\u603b\u7ed3","text":"<ol> <li> <p>\u7edf\u4e00\u5c01\u88c5\uff1aRedis \u4e0d\u76f4\u63a5\u5b58\u50a8\u6570\u636e\uff0c\u800c\u662f\u4f7f\u7528 <code>redisObject</code> \u5bf9\u6240\u6709\u503c\u8fdb\u884c\u5c01\u88c5\uff0c\u65b9\u4fbf\u7edf\u4e00\u7ba1\u7406\u3002</p> </li> <li> <p>\u7c7b\u578b\u4e0e\u7f16\u7801\u5206\u79bb\uff1a<code>type</code> \u5b9a\u4e49\u4e86\u5bf9\u8c61\u7684\u903b\u8f91\u884c\u4e3a\uff08\u5bf9\u5916\u547d\u4ee4\uff09\uff0c<code>encoding</code> \u51b3\u5b9a\u4e86\u5bf9\u8c61\u7684\u7269\u7406\u5b58\u50a8\uff0c\u8fd9\u662f\u4f18\u5316\u7684\u6838\u5fc3\u3002</p> </li> <li> <p>\u667a\u80fd\u7f16\u7801\uff1aRedis \u4f1a\u6839\u636e\u6570\u636e\u7684\u5927\u5c0f\u548c\u7c7b\u578b\u81ea\u52a8\u9009\u62e9\u6700\u8282\u7701\u7a7a\u95f4\u7684\u7f16\u7801\u65b9\u5f0f\u3002</p> </li> <li> <p>\u52a8\u6001\u8f6c\u6362\uff1a\u5728\u9700\u8981\u65f6\uff0c\u7f16\u7801\u4f1a\u81ea\u52a8\u4ece\u7d27\u51d1\u578b\u5411\u901a\u7528\u578b\u8f6c\u6362\uff0c\u4ee5\u9002\u5e94\u6570\u636e\u7684\u589e\u957f\u3002</p> </li> <li> <p>\u9ad8\u6548\u5185\u5b58\u56de\u6536\uff1a\u901a\u8fc7\u5f15\u7528\u8ba1\u6570 (<code>refcount</code>) \u5b9e\u73b0\u5bf9\u8c61\u7684\u751f\u547d\u5468\u671f\u7ba1\u7406\u548c\u5185\u5b58\u56de\u6536\u3002</p> </li> <li> <p>\u5185\u5b58\u5171\u4eab\uff1a\u901a\u8fc7\u5171\u4eab\u5e38\u7528\u7684\u5c0f\u6574\u6570\u5bf9\u8c61\uff0c\u8fdb\u4e00\u6b65\u51cf\u5c11\u5185\u5b58\u5f00\u9500\u3002</p> </li> </ol> <p>\u8fd9\u4e2a\u7cbe\u5de7\u7684\u5bf9\u8c61\u7cfb\u7edf\u662f Redis \u80fd\u591f\u517c\u5177\u9ad8\u6027\u80fd\u548c\u9ad8\u5185\u5b58\u6548\u7387\u7684\u5173\u952e\u539f\u56e0\u4e4b\u4e00\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%8C%81%E4%B9%85%E5%8C%96/","title":"Redis\u6301\u4e45\u5316","text":""},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%8C%81%E4%B9%85%E5%8C%96/#_1","title":"\u6838\u5fc3\u601d\u60f3\uff1a\u4e3a\u4ec0\u4e48\u9700\u8981\u6301\u4e45\u5316\uff1f","text":"<p>Redis\u662f\u4e00\u4e2a\u57fa\u4e8e\u5185\u5b58\u7684\u6570\u636e\u5e93\uff0c\u5176\u9ad8\u901f\u6027\u80fd\u6e90\u4e8e\u6b64\uff0c\u4f46\u4e5f\u5e26\u6765\u4e86\u81f4\u547d\u5f31\u70b9\uff1a\u4e00\u65e6\u670d\u52a1\u5668\u5b95\u673a\uff0c\u6240\u6709\u5185\u5b58\u6570\u636e\u5c06\u5168\u90e8\u4e22\u5931\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0cRedis\u63d0\u4f9b\u4e86\u6301\u4e45\u5316\u673a\u5236\uff0c\u5c06\u5185\u5b58\u4e2d\u7684\u6570\u636e\u4fdd\u5b58\u5230\u78c1\u76d8\uff0c\u4ee5\u4fbf\u5728\u670d\u52a1\u91cd\u542f\u65f6\u80fd\u591f\u6062\u590d\u6570\u636e\uff0c\u907f\u514d\u4e86\u4ece\u540e\u7aef\u6162\u901f\u6570\u636e\u5e93\u6062\u590d\u6570\u636e\u7684\u5de8\u5927\u538b\u529b\u548c\u6027\u80fd\u74f6\u9888\u3002</p> <p>Redis\u4e3b\u8981\u652f\u6301\u4e24\u79cd\u6301\u4e45\u5316\u65b9\u5f0f\uff1aRDB\uff08\u5feb\u7167\uff09 \u548c AOF\uff08\u53ea\u8ffd\u52a0\u6587\u4ef6\uff09\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%8C%81%E4%B9%85%E5%8C%96/#rdb-redis-database-","title":"\u4e00\u3001 RDB (Redis DataBase) \u6301\u4e45\u5316 - \u5feb\u7167\u6a21\u5f0f","text":"<p>RDB\u7684\u6838\u5fc3\u601d\u60f3\u662f\u5728\u67d0\u4e00\u65f6\u95f4\u70b9\uff0c\u5c06Redis\u5185\u5b58\u4e2d\u7684\u6570\u636e\u5b8c\u6574\u5730\u751f\u6210\u4e00\u4e2a\u5feb\u7167\u6587\u4ef6\uff08dump.rdb\uff09\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%8C%81%E4%B9%85%E5%8C%96/#1","title":"1. \u89e6\u53d1\u65b9\u5f0f","text":"<ul> <li>\u624b\u52a8\u89e6\u53d1\uff1a<ul> <li><code>save</code>: \u963b\u585e\u4e3b\u8fdb\u7a0b\uff0c\u76f4\u5230\u5feb\u7167\u5b8c\u6210\u3002\u7ebf\u4e0a\u7981\u7528\u3002</li> <li><code>bgsave</code>: \u975e\u963b\u585e\u3002\u4e3b\u8fdb\u7a0b<code>fork</code>\u4e00\u4e2a\u5b50\u8fdb\u7a0b\u6765\u6267\u884c\u5feb\u7167\uff0c\u4e3b\u8fdb\u7a0b\u7ee7\u7eed\u5904\u7406\u5ba2\u6237\u7aef\u8bf7\u6c42\u3002\u8fd9\u662f\u63a8\u8350\u7684\u65b9\u5f0f\u3002</li> </ul> </li> <li>\u81ea\u52a8\u89e6\u53d1\uff1a<ul> <li><code>redis.conf</code>\u4e2d\u914d\u7f6e<code>save &lt;seconds&gt; &lt;changes&gt;</code>\u89c4\u5219\uff0c\u4f8b\u5982<code>save 900 1</code>\u8868\u793a900\u79d2\u5185\u67091\u6b21\u5199\u5165\uff0c\u5219\u81ea\u52a8\u89e6\u53d1<code>bgsave</code>\u3002</li> <li>\u4e3b\u4ece\u590d\u5236\u65f6\uff0c\u4ece\u8282\u70b9\u8bf7\u6c42\u5168\u91cf\u540c\u6b65\uff0c\u4e3b\u8282\u70b9\u4f1a\u89e6\u53d1<code>bgsave</code>\u3002</li> <li>\u6267\u884c<code>shutdown</code>\u547d\u4ee4\uff08\u4e14\u672a\u5f00\u542fAOF\u65f6\uff09\u3002</li> <li>\u6267\u884c<code>debug reload</code>\u547d\u4ee4\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%8C%81%E4%B9%85%E5%8C%96/#2-bgsave","title":"2. <code>bgsave</code> \u5de5\u4f5c\u6d41\u7a0b\u4e0e\u539f\u7406","text":"<ol> <li>\u4e3b\u8fdb\u7a0b<code>fork</code>\u4e00\u4e2a\u5b50\u8fdb\u7a0b\u3002<code>fork</code>\u8fc7\u7a0b\u662f\u963b\u585e\u7684\uff0c\u4f46\u901a\u5e38\u5f88\u5feb\u3002</li> <li><code>fork</code>\u5229\u7528\u5199\u65f6\u590d\u5236\uff08Copy-on-Write, COW\uff09\u673a\u5236\u3002\u5b50\u8fdb\u7a0b\u5171\u4eab\u7236\u8fdb\u7a0b\u7684\u5185\u5b58\u9875\u8868\uff0c\u4e0d\u7acb\u5373\u590d\u5236\u7269\u7406\u5185\u5b58\u3002</li> <li>\u5b50\u8fdb\u7a0b\u8d1f\u8d23\u8bfb\u53d6\u5185\u5b58\u6570\u636e\uff0c\u5e76\u5c06\u5176\u5199\u5165\u4e00\u4e2a\u4e34\u65f6\u7684RDB\u6587\u4ef6\u3002</li> <li>\u5728\u5b50\u8fdb\u7a0b\u5199\u5feb\u7167\u671f\u95f4\uff0c\u5982\u679c\u4e3b\u8fdb\u7a0b\u63a5\u6536\u5230\u5199\u547d\u4ee4\u5e76\u9700\u8981\u4fee\u6539\u67d0\u5757\u6570\u636e\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u590d\u5236\u8fd9\u5757\u6570\u636e\u7684\u7269\u7406\u5185\u5b58\u9875\uff0c\u8ba9\u4e3b\u8fdb\u7a0b\u4fee\u6539\u526f\u672c\uff0c\u800c\u5b50\u8fdb\u7a0b\u7ee7\u7eed\u8bfb\u53d6\u539f\u59cb\u6570\u636e\uff0c\u4fdd\u8bc1\u4e86\u5feb\u7167\u7684\u4e00\u81f4\u6027\u3002</li> <li>\u5b50\u8fdb\u7a0b\u5b8c\u6210\u5feb\u7167\u540e\uff0c\u7528\u539f\u5b50\u64cd\u4f5c\u5c06\u4e34\u65f6\u6587\u4ef6\u66ff\u6362\u6389\u65e7\u7684<code>dump.rdb</code>\u6587\u4ef6\u3002</li> <li>\u5b50\u8fdb\u7a0b\u9000\u51fa\uff0c\u901a\u77e5\u4e3b\u8fdb\u7a0b\u5b8c\u6210\u3002</li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%8C%81%E4%B9%85%E5%8C%96/#3-rdb","title":"3. RDB \u4f18\u7f3a\u70b9","text":"<ul> <li>\u4f18\u70b9\uff1a<ul> <li>\u6062\u590d\u901f\u5ea6\u5feb\uff1aRDB\u6587\u4ef6\u662f\u7d27\u51d1\u7684\u4e8c\u8fdb\u5236\u683c\u5f0f\uff0c\u52a0\u8f7d\u5b83\u6765\u6062\u590d\u6570\u636e\u8fdc\u5feb\u4e8eAOF\u3002</li> <li>\u6587\u4ef6\u4f53\u79ef\u5c0f\uff1a\u7ecf\u8fc7\u538b\u7f29\uff08\u5982LZF\uff09\uff0c\u6587\u4ef6\u4f53\u79ef\u8fdc\u5c0f\u4e8e\u5185\u5b58\u6570\u636e\u5927\u5c0f\uff0c\u9002\u5408\u5907\u4efd\u548c\u6570\u636e\u4f20\u8f93\u3002</li> </ul> </li> <li>\u7f3a\u70b9\uff1a<ul> <li>\u6570\u636e\u4e22\u5931\u98ce\u9669\u9ad8\uff1aRDB\u662f\u5b9a\u65f6\u5feb\u7167\uff0c\u5982\u679c\u4e24\u6b21\u5feb\u7167\u4e4b\u95f4\u53d1\u751f\u5b95\u673a\uff0c\u4f1a\u4e22\u5931\u8fd9\u6bb5\u65f6\u95f4\u7684\u6240\u6709\u6570\u636e\uff0c\u65e0\u6cd5\u505a\u5230\u79d2\u7ea7\u6301\u4e45\u5316\u3002</li> <li><code>fork</code>\u5f00\u9500\u5927\uff1a<code>fork</code>\u5b50\u8fdb\u7a0b\u662f\u91cd\u91cf\u7ea7\u64cd\u4f5c\uff0c\u4f1a\u6d88\u8017CPU\u548c\u5185\u5b58\u8d44\u6e90\uff0c\u9891\u7e41\u6267\u884c\u6210\u672c\u9ad8\uff0c\u53ef\u80fd\u5bfc\u81f4\u4e3b\u8fdb\u7a0b\u77ed\u6682\u963b\u585e\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%8C%81%E4%B9%85%E5%8C%96/#aof-append-only-file-","title":"\u4e8c\u3001 AOF (Append Only File) \u6301\u4e45\u5316 - \u65e5\u5fd7\u6a21\u5f0f","text":"<p>AOF\u7684\u6838\u5fc3\u601d\u60f3\u662f\u5c06Redis\u6267\u884c\u7684\u6bcf\u4e00\u4e2a\u5199\u547d\u4ee4\u90fd\u4ee5\u6587\u672c\u534f\u8bae\u683c\u5f0f\u8bb0\u5f55\u5230\u4e00\u4e2a\u65e5\u5fd7\u6587\u4ef6\u4e2d\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%8C%81%E4%B9%85%E5%8C%96/#1-aof-","title":"1. AOF \u5b9e\u73b0\u673a\u5236 - \u201c\u5199\u540e\u65e5\u5fd7\u201d","text":"<p>Redis\u91c7\u7528\u201c\u5199\u540e\u65e5\u5fd7\u201d\u7b56\u7565\uff0c\u5373\u5148\u6267\u884c\u547d\u4ee4\u4fee\u6539\u5185\u5b58\u6570\u636e\uff0c\u6210\u529f\u540e\u518d\u8bb0\u5f55\u65e5\u5fd7\u3002 *   \u4f18\u70b9\uff1a\u907f\u514d\u4e86\u5bf9\u547d\u4ee4\u7684\u8bed\u6cd5\u68c0\u67e5\uff0c\u4e14\u4e0d\u4f1a\u963b\u585e\u5f53\u524d\u5199\u64cd\u4f5c\u3002 *   \u6f5c\u5728\u98ce\u9669\uff1a\u5982\u679c\u5728\u5199\u5b8c\u5185\u5b58\u3001\u4f46\u8fd8\u672a\u5199\u5165\u65e5\u5fd7\u65f6\u5b95\u673a\uff0c\u4f1a\u4e22\u5931\u8be5\u547d\u4ee4\u7684\u6570\u636e\u3002</p> <p>AOF\u7684\u5b8c\u6574\u8fc7\u7a0b\u5206\u4e3a\u4e09\u6b65\uff1a\u547d\u4ee4\u8ffd\u52a0 (append) -&gt; \u6587\u4ef6\u5199\u5165 (write) -&gt; \u6587\u4ef6\u540c\u6b65 (sync)\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%8C%81%E4%B9%85%E5%8C%96/#2-appendfsync","title":"2. \u5199\u56de\u7b56\u7565 (appendfsync)","text":"<p>\u63a7\u5236\u4f55\u65f6\u5c06\u65e5\u5fd7\u771f\u6b63\u5199\u5165\u78c1\u76d8\uff0c\u4f53\u73b0\u4e86\u6027\u80fd\u4e0e\u53ef\u9760\u6027\u7684\u6743\u8861\uff08trade-off\uff09\u3002</p> <ul> <li><code>always</code>: \u540c\u6b65\u5199\u56de\u3002\u6bcf\u4e2a\u547d\u4ee4\u6267\u884c\u5b8c\u540e\uff0c\u7acb\u523b<code>fsync</code>\u5230\u78c1\u76d8\u3002\u6700\u5b89\u5168\uff0c\u4f46\u6027\u80fd\u6700\u5dee\u3002</li> <li><code>everysec</code> (\u9ed8\u8ba4): \u6bcf\u79d2\u5199\u56de\u3002\u547d\u4ee4\u5148\u5199\u5165\u5185\u6838\u7f13\u51b2\u533a\uff0c\u6bcf\u79d2\u949f\u7531\u4e00\u4e2a\u540e\u53f0\u7ebf\u7a0b\u6267\u884c\u4e00\u6b21<code>fsync</code>\u3002\u6027\u80fd\u548c\u5b89\u5168\u7684\u6700\u4f73\u6298\u4e2d\uff0c\u6700\u591a\u4e22\u59311\u79d2\u6570\u636e\u3002</li> <li><code>no</code>: \u64cd\u4f5c\u7cfb\u7edf\u63a7\u5236\u3002\u7531\u64cd\u4f5c\u7cfb\u7edf\u51b3\u5b9a\u4f55\u65f6\u5c06\u7f13\u51b2\u533a\u6570\u636e\u5237\u5230\u78c1\u76d8\u3002\u6027\u80fd\u6700\u597d\uff0c\u4f46\u6700\u4e0d\u5b89\u5168\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%8C%81%E4%B9%85%E5%8C%96/#3-aof-rewrite-","title":"3. AOF \u91cd\u5199 (Rewrite) - \u6587\u4ef6\u7626\u8eab","text":"<p>\u4e3a\u4e86\u89e3\u51b3AOF\u6587\u4ef6\u65e0\u9650\u589e\u5927\u7684\u95ee\u9898\uff0cRedis\u63d0\u4f9b\u4e86AOF\u91cd\u5199\u673a\u5236\u3002</p> <ul> <li>\u539f\u7406\uff1a\u4e0d\u662f\u8bfb\u53d6\u65e7\u7684AOF\u6587\u4ef6\u8fdb\u884c\u4f18\u5316\uff0c\u800c\u662f<code>fork</code>\u4e00\u4e2a\u5b50\u8fdb\u7a0b\uff0c\u76f4\u63a5\u8bfb\u53d6\u5f53\u524d\u5185\u5b58\u4e2d\u7684\u6570\u636e\uff0c\u5e76\u4e3a\u6bcf\u4e2a\u952e\u751f\u6210\u4e00\u6761\u6700\u4f18\u7684\u5199\u5165\u547d\u4ee4\uff0c\u6700\u7ec8\u751f\u6210\u4e00\u4e2a\u5168\u65b0\u7684\u3001\u66f4\u5c0f\u7684AOF\u6587\u4ef6\u3002\u4f8b\u5982\uff0c\u5bf9\u4e00\u4e2a\u8ba1\u6570\u5668\u7684100\u6b21<code>INCR</code>\u64cd\u4f5c\uff0c\u5728\u91cd\u5199\u540e\u4f1a\u53d8\u6210\u4e00\u6761<code>SET</code>\u547d\u4ee4\u3002</li> <li>\u89e6\u53d1\u65f6\u673a\uff1a\u7531<code>auto-aof-rewrite-percentage</code>\u548c<code>auto-aof-rewrite-min-size</code>\u4e24\u4e2a\u914d\u7f6e\u9879\u81ea\u52a8\u89e6\u53d1\u3002</li> <li>\u91cd\u5199\u8fc7\u7a0b\u4e2d\u7684\u6570\u636e\u4e00\u81f4\u6027\uff1a<ol> <li>\u4e3b\u8fdb\u7a0b<code>fork</code>\u51fa\u91cd\u5199\u5b50\u8fdb\u7a0b\u3002</li> <li>\u5728\u5b50\u8fdb\u7a0b\u91cd\u5199\u671f\u95f4\uff0c\u4e3b\u8fdb\u7a0b\u63a5\u6536\u5230\u7684\u65b0\u5199\u547d\u4ee4\u4f1a\u540c\u65f6\u5199\u5165\u65e7\u7684AOF\u7f13\u51b2\u533a\u548cAOF\u91cd\u5199\u7f13\u51b2\u533a\u3002</li> <li>\u5b50\u8fdb\u7a0b\u5b8c\u6210\u91cd\u5199\u540e\uff0c\u901a\u77e5\u4e3b\u8fdb\u7a0b\u3002</li> <li>\u4e3b\u8fdb\u7a0b\u5c06AOF\u91cd\u5199\u7f13\u51b2\u533a\u4e2d\u7684\u589e\u91cf\u547d\u4ee4\u8ffd\u52a0\u5230\u65b0AOF\u6587\u4ef6\u7684\u672b\u5c3e\u3002</li> <li>\u7528\u539f\u5b50\u64cd\u4f5c\u5c06\u65b0\u6587\u4ef6\u66ff\u6362\u65e7\u6587\u4ef6\u3002</li> </ol> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%8C%81%E4%B9%85%E5%8C%96/#4-aof","title":"4. AOF \u4f18\u7f3a\u70b9","text":"<ul> <li>\u4f18\u70b9\uff1a<ul> <li>\u6570\u636e\u53ef\u9760\u6027\u9ad8\uff1a\u6839\u636e\u5199\u56de\u7b56\u7565\uff0c\u6700\u591a\u53ea\u4e22\u59311\u79d2\u7684\u6570\u636e\u3002</li> <li>\u53ef\u8bfb\u6027\u597d\uff1aAOF\u6587\u4ef6\u662f\u6587\u672c\u683c\u5f0f\uff0c\u6613\u4e8e\u7406\u89e3\u548c\u4fee\u590d\u3002</li> </ul> </li> <li>\u7f3a\u70b9\uff1a<ul> <li>\u6587\u4ef6\u4f53\u79ef\u5927\uff1a\u76f8\u6bd4RDB\uff0cAOF\u6587\u4ef6\u901a\u5e38\u66f4\u5927\u3002</li> <li>\u6062\u590d\u901f\u5ea6\u6162\uff1a\u6062\u590d\u65f6\u9700\u8981\u9010\u6761\u6267\u884c\u547d\u4ee4\uff0c\u901f\u5ea6\u8fdc\u6162\u4e8eRDB\u3002</li> <li>\u5b58\u5728<code>fork</code>\u5f00\u9500\uff1aAOF\u91cd\u5199\u540c\u6837\u9700\u8981<code>fork</code>\u5b50\u8fdb\u7a0b\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%8C%81%E4%B9%85%E5%8C%96/#rdb-aof-redis-40","title":"\u4e09\u3001 RDB \u548c AOF \u6df7\u5408\u6a21\u5f0f (Redis 4.0+)","text":"<p>\u4e3a\u4e86\u7ed3\u5408\u4e24\u8005\u7684\u4f18\u70b9\uff0cRedis 4.0\u5f15\u5165\u4e86\u6df7\u5408\u6301\u4e45\u5316\u3002</p> <ul> <li>\u5de5\u4f5c\u65b9\u5f0f\uff1a\u5f53\u89e6\u53d1AOF\u91cd\u5199\u65f6\uff0c<code>fork</code>\u7684\u5b50\u8fdb\u7a0b\u4e0d\u518d\u662f\u751f\u6210\u547d\u4ee4\uff0c\u800c\u662f\u5c06\u5f53\u524d\u5185\u5b58\u6570\u636e\u4ee5RDB\u683c\u5f0f\u5199\u5165\u65b0AOF\u6587\u4ef6\u7684\u5f00\u5934\uff0c\u7136\u540e\u4e3b\u8fdb\u7a0b\u5c06\u91cd\u5199\u671f\u95f4\u7684\u589e\u91cf\u5199\u547d\u4ee4\u4ee5AOF\u683c\u5f0f\u8ffd\u52a0\u5230\u6587\u4ef6\u672b\u5c3e\u3002</li> <li>\u4f18\u52bf\uff1a<ul> <li>\u5feb\u901f\u6062\u590d\uff1a\u52a0\u8f7d\u65f6\uff0c\u5148\u50cfRDB\u4e00\u6837\u5feb\u901f\u52a0\u8f7d\u6587\u4ef6\u5934\u90e8\u7684\u5feb\u7167\u90e8\u5206\u3002</li> <li>\u9ad8\u53ef\u9760\u6027\uff1a\u518d\u52a0\u8f7d\u6587\u4ef6\u672b\u5c3e\u7684AOF\u589e\u91cf\u65e5\u5fd7\uff0c\u4fdd\u8bc1\u4e86\u6570\u636e\u7684\u5b8c\u6574\u6027\u3002</li> <li>\u8fd9\u4e2a\u65b9\u6848\u662f\u76ee\u524d\u751f\u4ea7\u73af\u5883\u4e2d\u7684\u4e3b\u6d41\u9009\u62e9\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%8C%81%E4%B9%85%E5%8C%96/#_2","title":"\u56db\u3001 \u6570\u636e\u6062\u590d\u4e0e\u5b9e\u8df5","text":""},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%8C%81%E4%B9%85%E5%8C%96/#_3","title":"\u6062\u590d\u6d41\u7a0b","text":"<ul> <li>Redis\u91cd\u542f\u65f6\uff0c\u4f1a\u4f18\u5148\u52a0\u8f7dAOF\u6587\u4ef6\uff08\u5982\u679c\u5f00\u542f\u4e86AOF\uff09\uff0c\u56e0\u4e3a\u5b83\u901a\u5e38\u5305\u542b\u66f4\u5b8c\u6574\u7684\u6570\u636e\u3002</li> <li>\u5982\u679cAOF\u52a0\u8f7d\u5931\u8d25\u6216\u4e0d\u5b58\u5728\uff0c\u624d\u4f1a\u53bb\u52a0\u8f7dRDB\u6587\u4ef6\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%8C%81%E4%B9%85%E5%8C%96/#_4","title":"\u7ebf\u4e0a\u5b9e\u8df5\u5efa\u8bae","text":"<ol> <li>\u6027\u80fd\u4f18\u5148\uff0c\u6570\u636e\u53ef\u91cd\u5efa\uff1a\u53ef\u4ee5\u5173\u95ed\u6301\u4e45\u5316\u3002</li> <li>\u6570\u636e\u5b89\u5168\uff1a\u5f00\u542f\u6df7\u5408\u6301\u4e45\u5316\u6a21\u5f0f\u662f\u6700\u4f73\u5b9e\u8df5\u3002</li> <li>\u964d\u4f4e<code>fork</code>\u5f71\u54cd\uff1a<ul> <li>\u63a7\u5236Redis\u5b9e\u4f8b\u7684\u6700\u5927\u5185\u5b58\uff0c\u907f\u514d<code>fork</code>\u8017\u65f6\u8fc7\u957f\u3002</li> <li>\u907f\u514d\u591a\u4e2a\u5b9e\u4f8b\u5728\u540c\u4e00\u65f6\u95f4\u70b9\u8fdb\u884c\u6301\u4e45\u5316\u6216\u91cd\u5199\u64cd\u4f5c\u3002</li> <li>\u5728\u4e3b\u4ece\u67b6\u6784\u4e2d\uff0c\u53ef\u4ee5\u5229\u7528\u4ece\u8282\u70b9\u6765\u6267\u884cRDB\u5907\u4efd\uff0c\u4e0d\u5f71\u54cd\u4e3b\u8282\u70b9\u7684\u6027\u80fd\u3002</li> </ul> </li> <li>\u5408\u7406\u914d\u7f6e\uff1a\u6839\u636e\u4e1a\u52a1\u573a\u666f\u8c03\u6574<code>save</code>\u7b56\u7565\u548cAOF\u91cd\u5199\u89e6\u53d1\u6761\u4ef6\u3002</li> </ol> <p>\u603b\u7ed3\u8868</p> \u7279\u6027 RDB (\u5feb\u7167) AOF (\u65e5\u5fd7) \u6df7\u5408\u6a21\u5f0f (\u63a8\u8350) \u6570\u636e\u53ef\u9760\u6027 \u8f83\u4f4e\uff0c\u4e22\u5931\u4e0a\u6b21\u5feb\u7167\u81f3\u4eca\u7684\u6570\u636e \u9ad8\uff0c\u6700\u591a\u4e22\u59311\u79d2\u6570\u636e (<code>everysec</code>\u7b56\u7565) \u9ad8\uff0c\u540cAOF \u6587\u4ef6\u5927\u5c0f \u5c0f\uff0c\u4e8c\u8fdb\u5236\u538b\u7f29 \u5927\uff0c\u6587\u672c\u65e5\u5fd7\uff0c\u9700\u91cd\u5199\u7626\u8eab \u8f83\u5c0f\uff0cRDB\u5934\u90e8+AOF\u5c3e\u90e8 \u6062\u590d\u901f\u5ea6 \u5feb\uff0c\u76f4\u63a5\u52a0\u8f7d\u5185\u5b58\u955c\u50cf \u6162\uff0c\u9700\u91cd\u653e\u6240\u6709\u547d\u4ee4 \u5feb\uff0c\u5148\u52a0\u8f7dRDB\u90e8\u5206\uff0c\u518d\u91cd\u653e\u5c11\u91cfAOF\u589e\u91cf \u6838\u5fc3\u673a\u5236 <code>fork</code> + \u5199\u65f6\u590d\u5236 (COW) \u547d\u4ee4\u8ffd\u52a0 + \u5199\u56de\u7b56\u7565 + <code>fork</code>\u91cd\u5199 AOF\u91cd\u5199\u65f6\uff0c\u751f\u6210RDB\u683c\u5f0f\u6587\u4ef6\u5934+AOF\u683c\u5f0f\u589e\u91cf \u9002\u7528\u573a\u666f \u6570\u636e\u5907\u4efd\u3001\u707e\u96be\u6062\u590d\u3001\u4e3b\u4ece\u590d\u5236\u5168\u91cf\u540c\u6b65 \u5bf9\u6570\u636e\u5b8c\u6574\u6027\u8981\u6c42\u9ad8\u7684\u573a\u666f \u7edd\u5927\u591a\u6570\u751f\u4ea7\u73af\u5883"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/","title":"Redis\u6570\u636e\u7c7b\u578b","text":"<p>Redis \u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u3001\u57fa\u4e8e\u5185\u5b58\u7684\u3001\u4f7f\u7528 C \u8bed\u8a00\u7f16\u5199\u7684 Key-Value \u6570\u636e\u5e93\u3002\u5b83\u4e4b\u6240\u4ee5\u5982\u6b64\u6d41\u884c\uff0c\u4e0d\u4ec5\u4ec5\u662f\u56e0\u4e3a\u5176\u9ad8\u6027\u80fd\uff0c\u66f4\u5728\u4e8e\u5b83\u63d0\u4f9b\u4e86\u591a\u79cd\u4e30\u5bcc\u4e14\u9ad8\u6548\u7684\u6570\u636e\u7ed3\u6784\uff0c\u4f7f\u5f97\u5f00\u53d1\u8005\u53ef\u4ee5\u975e\u5e38\u7075\u6d3b\u5730\u89e3\u51b3\u5404\u79cd\u95ee\u9898\u3002</p> <p>Redis \u5b98\u65b9\u66b4\u9732\u7ed9\u7528\u6237\u7684\u4e3b\u8981\u6709\u4ee5\u4e0b\u51e0\u79cd\u6838\u5fc3\u6570\u636e\u7c7b\u578b\uff1a</p> <ol> <li> <p>String (\u5b57\u7b26\u4e32)</p> </li> <li> <p>List (\u5217\u8868)</p> </li> <li> <p>Hash (\u54c8\u5e0c/\u5b57\u5178)</p> </li> <li> <p>Set (\u96c6\u5408)</p> </li> <li> <p>Sorted Set (\u6709\u5e8f\u96c6\u5408 / ZSet)</p> </li> </ol> <p>\u6b64\u5916\uff0c\u8fd8\u6709\u4e00\u4e9b\u57fa\u4e8e\u8fd9\u4e9b\u6838\u5fc3\u7c7b\u578b\u5b9e\u73b0\u7684\u7279\u6b8a\u6570\u636e\u7c7b\u578b\uff1a</p> <ul> <li> <p>Bitmap (\u4f4d\u56fe)</p> </li> <li> <p>HyperLogLog (\u57fa\u6570\u7edf\u8ba1)</p> </li> <li> <p>Geospatial (\u5730\u7406\u7a7a\u95f4)</p> </li> <li> <p>Stream (\u6d41)</p> </li> </ul> <p>\u4e0b\u9762\u6211\u4eec\u9010\u4e00\u8be6\u7ec6\u5256\u6790\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#1-string","title":"1. String (\u5b57\u7b26\u4e32)","text":""},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#_1","title":"\u7b80\u4ecb","text":"<p>String \u662f Redis \u6700\u57fa\u672c\u7684\u6570\u636e\u7c7b\u578b\uff0c\u4e00\u4e2a Key \u5bf9\u5e94\u4e00\u4e2a Value\u3002\u5b83\u7684 Value \u4e0d\u4ec5\u53ef\u4ee5\u662f\u666e\u901a\u7684\u5b57\u7b26\u4e32\uff0c\u8fd8\u53ef\u4ee5\u662f\u6570\u5b57\uff08\u6574\u6570\u6216\u6d6e\u70b9\u6570\uff09\uff0c\u751a\u81f3\u662f\u4e8c\u8fdb\u5236\u6570\u636e\uff08\u5982\u56fe\u7247\u3001\u5e8f\u5217\u5316\u540e\u7684\u5bf9\u8c61\uff09\u3002\u4e00\u4e2a String \u7c7b\u578b\u7684 Value \u6700\u5927\u53ef\u4ee5\u5b58\u50a8 512MB\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#_2","title":"\u5e95\u5c42\u5b9e\u73b0\u539f\u7406","text":"<p>String \u7684\u5e95\u5c42\u5b9e\u73b0\u5e76\u975e\u7b80\u5355\u7684 C \u8bed\u8a00\u5b57\u7b26\u4e32\uff08\u4ee5 \\0 \u7ed3\u5c3e\uff09\uff0c\u800c\u662f\u81ea\u5df1\u6784\u5efa\u7684\u4e00\u79cd\u540d\u4e3a \u7b80\u5355\u52a8\u6001\u5b57\u7b26\u4e32 (Simple Dynamic String, SDS) \u7684\u7ed3\u6784\u3002</p> <p>SDS \u76f8\u6bd4 C \u5b57\u7b26\u4e32\u7684\u4f18\u52bf\uff1a</p> <ol> <li> <p>O(1) \u590d\u6742\u5ea6\u83b7\u53d6\u5b57\u7b26\u4e32\u957f\u5ea6\uff1a\u76f4\u63a5\u8bfb\u53d6 len \u5c5e\u6027\uff0c\u800c C \u5b57\u7b26\u4e32\u9700\u8981\u904d\u5386\u6574\u4e2a\u5b57\u7b26\u4e32\u3002</p> </li> <li> <p>\u675c\u7edd\u7f13\u51b2\u533a\u6ea2\u51fa\uff1a\u5f53\u5bf9 SDS \u8fdb\u884c\u4fee\u6539\u65f6\uff0cAPI \u4f1a\u5148\u68c0\u67e5 free \u7a7a\u95f4\u662f\u5426\u8db3\u591f\uff0c\u5982\u679c\u4e0d\u591f\uff0c\u4f1a\u81ea\u52a8\u6269\u5bb9\uff0c\u5b89\u5168\u53ef\u9760\u3002</p> </li> <li> <p>\u51cf\u5c11\u4fee\u6539\u5b57\u7b26\u4e32\u65f6\u7684\u5185\u5b58\u91cd\u5206\u914d\u6b21\u6570\uff1aSDS \u91c7\u7528\u4e86\u7a7a\u95f4\u9884\u5206\u914d\u548c\u60f0\u6027\u7a7a\u95f4\u91ca\u653e\u7b56\u7565\u3002</p> <ul> <li> <p>\u7a7a\u95f4\u9884\u5206\u914d\uff1a\u5f53\u5bf9 SDS \u8fdb\u884c\u6269\u5c55\u65f6\uff0c\u7a0b\u5e8f\u4e0d\u4ec5\u4f1a\u5206\u914d\u6240\u9700\u7a7a\u95f4\uff0c\u8fd8\u4f1a\u989d\u5916\u5206\u914d\u4e00\u4e9b\u672a\u7528\u7a7a\u95f4\uff08free\uff09\u3002\u5982\u679c\u4fee\u6539\u540e SDS \u957f\u5ea6\u5c0f\u4e8e 1MB\uff0c\u5219\u5206\u914d len * 2 \u7684\u7a7a\u95f4\uff1b\u5982\u679c\u8d85\u8fc7 1MB\uff0c\u5219\u989d\u5916\u5206\u914d 1MB \u7684\u7a7a\u95f4\u3002</p> </li> <li> <p>\u60f0\u6027\u7a7a\u95f4\u91ca\u653e\uff1a\u5f53\u5bf9 SDS \u8fdb\u884c\u7f29\u77ed\u65f6\uff0c\u7a0b\u5e8f\u4e0d\u4f1a\u7acb\u5373\u56de\u6536\u591a\u51fa\u6765\u7684\u5b57\u8282\uff0c\u800c\u662f\u66f4\u65b0 free \u5c5e\u6027\uff0c\u4ee5\u5907\u5c06\u6765\u4f7f\u7528\u3002</p> </li> </ul> </li> <li> <p>\u4e8c\u8fdb\u5236\u5b89\u5168\uff1aSDS \u7684 buf \u6570\u7ec4\u53ef\u4ee5\u5b58\u50a8\u4efb\u610f\u4e8c\u8fdb\u5236\u6570\u636e\uff08\u5305\u62ec \\0\uff09\uff0c\u56e0\u4e3a\u5b83\u4f7f\u7528 len \u5c5e\u6027\u6765\u5224\u65ad\u5b57\u7b26\u4e32\u7ed3\u675f\uff0c\u800c\u4e0d\u662f \\0 \u5b57\u7b26\u3002</p> </li> </ol> <p>\u7f16\u7801\u65b9\u5f0f\uff1a \u4e3a\u4e86\u4f18\u5316\u5b58\u50a8\uff0cString \u7c7b\u578b\u6709\u4e09\u79cd\u7f16\u7801\u65b9\u5f0f\uff1a</p> <ul> <li> <p>int: \u5982\u679c\u4e00\u4e2a\u5b57\u7b26\u4e32\u503c\u53ef\u4ee5\u88ab\u89e3\u6790\u4e3a 64 \u4f4d\u6709\u7b26\u53f7\u6574\u6570\uff0c\u90a3\u4e48 Redis \u4f1a\u5c06\u5176\u7f16\u7801\u4e3a long \u7c7b\u578b\u5b58\u50a8\uff0c\u4ee5\u8282\u7701\u5185\u5b58\u5e76\u63d0\u9ad8 INCR \u7b49\u64cd\u4f5c\u7684\u6548\u7387\u3002</p> </li> <li> <p>embstr: \u5982\u679c\u5b57\u7b26\u4e32\u957f\u5ea6\u5c0f\u4e8e\u7b49\u4e8e 44 \u5b57\u8282\uff08Redis 3.2 \u7248\u672c\u540e\uff09\uff0c\u4f1a\u4f7f\u7528 embstr \u7f16\u7801\u3002\u5b83\u5c06 RedisObject \u5bf9\u8c61\u5934\u548c SDS \u8fde\u7eed\u5b58\u653e\u5728\u4e00\u8d77\uff0c\u53ea\u9700\u8981\u4e00\u6b21\u5185\u5b58\u5206\u914d\uff0c\u6548\u7387\u66f4\u9ad8\u3002</p> </li> <li> <p>raw: \u5982\u679c\u5b57\u7b26\u4e32\u957f\u5ea6\u5927\u4e8e 44 \u5b57\u8282\uff0c\u5219\u4f7f\u7528 raw \u7f16\u7801\u3002RedisObject \u5bf9\u8c61\u5934\u548c SDS \u5206\u5f00\u5206\u914d\u5185\u5b58\uff0c\u7528\u6307\u9488\u8fde\u63a5\u3002</p> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#_3","title":"\u5e38\u7528\u547d\u4ee4","text":"<ul> <li> <p>SET key value: \u8bbe\u7f6e\u503c</p> </li> <li> <p>GET key: \u83b7\u53d6\u503c</p> </li> <li> <p>MSET key1 value1 key2 value2: \u6279\u91cf\u8bbe\u7f6e</p> </li> <li> <p>MGET key1 key2: \u6279\u91cf\u83b7\u53d6</p> </li> <li> <p>INCR key: \u5c06 key \u4e2d\u50a8\u5b58\u7684\u6570\u5b57\u503c\u589e\u4e00\uff08\u539f\u5b50\u64cd\u4f5c\uff09</p> </li> <li> <p>DECR key: \u5c06 key \u4e2d\u50a8\u5b58\u7684\u6570\u5b57\u503c\u51cf\u4e00\uff08\u539f\u5b50\u64cd\u4f5c\uff09</p> </li> <li> <p>SETEX key seconds value: \u8bbe\u7f6e\u5e26\u8fc7\u671f\u65f6\u95f4\u7684\u503c</p> </li> <li> <p>SETNX key value: \u5f53 key \u4e0d\u5b58\u5728\u65f6\u624d\u8bbe\u7f6e</p> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#_4","title":"\u4f7f\u7528\u573a\u666f","text":"<ol> <li> <p>\u7f13\u5b58\uff1a\u6700\u5e38\u89c1\u7684\u7528\u9014\u3002\u7f13\u5b58\u7528\u6237\u4fe1\u606f\u3001\u5546\u54c1\u4fe1\u606f\u3001API \u54cd\u5e94\u3001HTML \u7247\u6bb5\u7b49\u3002</p> </li> <li> <p>\u8ba1\u6570\u5668\uff1a\u5229\u7528 INCR / DECR \u7684\u539f\u5b50\u6027\uff0c\u5b9e\u73b0\u6587\u7ae0\u9605\u8bfb\u91cf\u3001\u70b9\u8d5e\u6570\u3001\u5e93\u5b58\u6570\u91cf\u7b49\u3002</p> </li> <li> <p>\u5206\u5e03\u5f0f\u9501\uff1a\u5229\u7528 SETNX (SET if Not eXists) \u547d\u4ee4\u7684\u7279\u6027\uff0c\u5f53 key \u4e0d\u5b58\u5728\u65f6\u624d\u80fd\u8bbe\u7f6e\u6210\u529f\uff0c\u53ef\u4ee5\u5b9e\u73b0\u7b80\u5355\u7684\u5206\u5e03\u5f0f\u9501\u3002</p> </li> <li> <p>\u5171\u4eab Session\uff1a\u5728\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\uff0c\u5c06\u7528\u6237\u7684 Session \u4fe1\u606f\u5b58\u50a8\u5728 Redis \u4e2d\uff0c\u5b9e\u73b0\u591a\u53f0\u5e94\u7528\u670d\u52a1\u5668\u95f4\u7684 Session \u5171\u4eab\u3002</p> </li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#2-list","title":"2. List (\u5217\u8868)","text":""},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#_5","title":"\u7b80\u4ecb","text":"<p>List \u662f\u4e00\u4e2a\u6709\u5e8f\u7684\u3001\u53ef\u91cd\u590d\u7684\u5b57\u7b26\u4e32\u96c6\u5408\u3002\u5b83\u6309\u7167\u5143\u7d20\u63d2\u5165\u7684\u987a\u5e8f\u8fdb\u884c\u6392\u5e8f\uff0c\u53ef\u4ee5\u5728\u5217\u8868\u7684\u5934\u90e8\uff08\u5de6\u4fa7\uff09\u6216\u5c3e\u90e8\uff08\u53f3\u4fa7\uff09\u6dfb\u52a0\u6216\u5220\u9664\u5143\u7d20\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#_6","title":"\u5e95\u5c42\u5b9e\u73b0\u539f\u7406","text":"<p>\u5728 Redis 3.2 \u7248\u672c\u4e4b\u524d\uff0cList \u7684\u5e95\u5c42\u5b9e\u73b0\u662f ziplist (\u538b\u7f29\u5217\u8868) \u548c linkedlist (\u53cc\u5411\u94fe\u8868) \u7684\u7ed3\u5408\u3002</p> <ul> <li> <p>\u5f53\u5217\u8868\u5143\u7d20\u8f83\u5c11\u4e14\u6bcf\u4e2a\u5143\u7d20\u90fd\u8f83\u5c0f\u65f6\uff0c\u4f7f\u7528 ziplist \u5b58\u50a8\uff0c\u8282\u7701\u5185\u5b58\u3002</p> </li> <li> <p>\u5f53\u5217\u8868\u5143\u7d20\u53d8\u591a\u6216\u5143\u7d20\u53d8\u5927\u65f6\uff0c\u8f6c\u6362\u4e3a linkedlist\u3002</p> </li> </ul> <p>Redis 3.2 \u4e4b\u540e\uff0c\u7edf\u4e00\u4f7f\u7528 quicklist \u4f5c\u4e3a List \u7684\u5e95\u5c42\u5b9e\u73b0\u3002 quicklist \u662f ziplist \u548c linkedlist \u7684\u6df7\u5408\u4f53\u3002\u5b83\u662f\u4e00\u4e2a\u53cc\u5411\u94fe\u8868\uff0c\u4f46\u6bcf\u4e2a\u94fe\u8868\u8282\u70b9\uff08quicklistNode\uff09\u90fd\u5305\u542b\u4e00\u4e2a ziplist\u3002</p> <p>quicklist \u7684\u4f18\u52bf\uff1a</p> <ul> <li> <p>\u7a7a\u95f4\u6548\u7387\uff1a\u591a\u4e2a\u5c0f\u7684 ziplist \u4e32\u8054\u8d77\u6765\uff0c\u76f8\u6bd4 linkedlist \u51cf\u5c11\u4e86\u5927\u91cf\u7684\u6307\u9488\u5f00\u9500\uff0c\u4e5f\u907f\u514d\u4e86\u5355\u4e2a ziplist \u8fc7\u5927\u65f6\u8fde\u9501\u66f4\u65b0\u7684\u6027\u80fd\u95ee\u9898\u3002</p> </li> <li> <p>\u65f6\u95f4\u6548\u7387\uff1a\u5728\u4e24\u7aef\u8fdb\u884c PUSH \u548c POP \u64cd\u4f5c\u65f6\uff0c\u590d\u6742\u5ea6\u4ecd\u7136\u662f O(1)\u3002\u5728\u4e2d\u95f4\u63d2\u5165/\u5220\u9664\u7684\u6548\u7387\u4e5f\u4f18\u4e8e\u5927\u7684 ziplist\u3002</p> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#_7","title":"\u5e38\u7528\u547d\u4ee4","text":"<ul> <li> <p>LPUSH key value1 [value2 ...]: \u5c06\u4e00\u4e2a\u6216\u591a\u4e2a\u503c\u63d2\u5165\u5230\u5217\u8868\u5934\u90e8</p> </li> <li> <p>RPUSH key value1 [value2 ...]: \u5c06\u4e00\u4e2a\u6216\u591a\u4e2a\u503c\u63d2\u5165\u5230\u5217\u8868\u5c3e\u90e8</p> </li> <li> <p>LPOP key: \u79fb\u9664\u5e76\u83b7\u53d6\u5217\u8868\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20</p> </li> <li> <p>RPOP key: \u79fb\u9664\u5e76\u83b7\u53d6\u5217\u8868\u7684\u6700\u540e\u4e00\u4e2a\u5143\u7d20</p> </li> <li> <p>LRANGE key start stop: \u83b7\u53d6\u5217\u8868\u6307\u5b9a\u8303\u56f4\u5185\u7684\u5143\u7d20</p> </li> <li> <p>LLEN key: \u83b7\u53d6\u5217\u8868\u957f\u5ea6</p> </li> <li> <p>BLPOP/BRPOP key [key ...] timeout: LPOP/RPOP \u7684\u963b\u585e\u7248\u672c\uff0c\u5f53\u5217\u8868\u4e3a\u7a7a\u65f6\u4f1a\u963b\u585e\u7b49\u5f85\uff0c\u5e38\u7528\u4e8e\u6d88\u606f\u961f\u5217\u3002</p> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#_8","title":"\u4f7f\u7528\u573a\u666f","text":"<ol> <li> <p>\u6d88\u606f\u961f\u5217/\u4efb\u52a1\u961f\u5217\uff1a\u5229\u7528 LPUSH + RPOP (\u6216 RPUSH + LPOP) \u7684\u6a21\u5f0f\uff0c\u53ef\u4ee5\u5b9e\u73b0\u4e00\u4e2a\u7b80\u5355\u7684\u5148\u8fdb\u5148\u51fa\uff08FIFO\uff09\u7684\u6d88\u606f\u961f\u5217\u3002BRPOP \u7684\u963b\u585e\u7279\u6027\u4f7f\u5f97\u6d88\u8d39\u8005\u53ef\u4ee5\u9ad8\u6548\u5730\u7b49\u5f85\u65b0\u4efb\u52a1\u3002</p> </li> <li> <p>\u65f6\u95f4\u7ebf (Timeline) / \u6700\u65b0\u52a8\u6001\uff1a\u4f8b\u5982\u5fae\u535a\u3001\u670b\u53cb\u5708\u7684 Feed\u6d41\u3002\u5f53\u7528\u6237\u53d1\u5e03\u65b0\u5185\u5bb9\u65f6\uff0cLPUSH \u5230\u5176\u5173\u6ce8\u8005\u7684\u5217\u8868\u4e2d\u3002LRANGE \u53ef\u4ee5\u5206\u9875\u83b7\u53d6\u6700\u65b0\u7684 N \u6761\u52a8\u6001\u3002</p> </li> <li> <p>\u6700\u65b0 N \u4e2a\u6570\u636e\uff1a\u4f8b\u5982\u7f51\u7ad9\u9996\u9875\u5c55\u793a\u7684\u201c\u6700\u65b0\u767b\u5f55\u7684 5 \u4f4d\u7528\u6237\u201d\uff0c\u6bcf\u6b21\u7528\u6237\u767b\u5f55\u65f6 LPUSH\uff0c\u5e76\u7528 LTRIM \u4fdd\u6301\u5217\u8868\u957f\u5ea6\u4e3a 5\u3002</p> </li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#3-hash","title":"3. Hash (\u54c8\u5e0c)","text":""},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#_9","title":"\u7b80\u4ecb","text":"<p>Hash \u662f\u4e00\u4e2a String \u7c7b\u578b\u7684 field \u548c value \u7684\u6620\u5c04\u8868\uff0c\u7279\u522b\u9002\u5408\u7528\u4e8e\u5b58\u50a8\u5bf9\u8c61\u3002\u4f60\u53ef\u4ee5\u628a\u5b83\u770b\u4f5c\u662f Map\u3002"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#_10","title":"\u5e95\u5c42\u5b9e\u73b0\u539f\u7406","text":"<p>Hash \u7684\u5e95\u5c42\u5b9e\u73b0\u4e5f\u6709\u4e24\u79cd\u7f16\u7801\u65b9\u5f0f\uff1a</p> <ul> <li> <p>ziplist (\u538b\u7f29\u5217\u8868)\uff1a\u5f53\u54c8\u5e0c\u4e2d\u952e\u503c\u5bf9\u6570\u91cf\u8f83\u5c11\uff0c\u4e14\u6bcf\u4e2a\u952e\u548c\u503c\u7684\u5927\u5c0f\u4e5f\u8f83\u5c0f\u65f6\uff0c\u4f7f\u7528 ziplist\u3002\u5b83\u5c06 field \u548c value \u7d27\u51d1\u5730\u8fde\u7eed\u5b58\u50a8\uff0c\u975e\u5e38\u8282\u7701\u5185\u5b58\u3002</p> </li> <li> <p>hashtable (\u54c8\u5e0c\u8868/\u5b57\u5178)\uff1a\u5f53\u952e\u503c\u5bf9\u6570\u91cf\u8d85\u8fc7\u914d\u7f6e\u9608\u503c\uff08hash-max-ziplist-entries\uff0c\u9ed8\u8ba4 512\uff09\u6216\u4efb\u4e00\u952e/\u503c\u5927\u5c0f\u8d85\u8fc7\u9608\u503c\uff08hash-max-ziplist-value\uff0c\u9ed8\u8ba4 64 \u5b57\u8282\uff09\u65f6\uff0c\u4f1a\u81ea\u52a8\u8f6c\u6362\u4e3a hashtable\u3002hashtable \u7684\u7ed3\u6784\u548c Java \u4e2d\u7684 HashMap \u7c7b\u4f3c\uff0c\u901a\u8fc7\u6570\u7ec4+\u94fe\u8868\uff08\u6216\u7ea2\u9ed1\u6811\uff09\u7684\u65b9\u5f0f\u89e3\u51b3\u54c8\u5e0c\u51b2\u7a81\u3002</p> </li> </ul> <p>hashtable \u7684 rehash \u673a\u5236\uff1a \u4e3a\u4e86\u907f\u514d\u5728\u6269\u5bb9\u6216\u7f29\u5bb9\u65f6\u56e0\u6570\u636e\u8fc1\u79fb\u5bfc\u81f4\u957f\u65f6\u95f4\u963b\u585e\uff0cRedis \u7684 hashtable \u91c7\u7528\u4e86\u6e10\u8fdb\u5f0f rehash\u3002\u5b83\u4f1a\u4fdd\u7559\u65b0\u65e7\u4e24\u4e2a\u54c8\u5e0c\u8868\uff0c\u5728\u540e\u7eed\u7684\u6bcf\u6b21\u589e\u5220\u6539\u67e5\u64cd\u4f5c\u65f6\uff0c\u9664\u4e86\u6267\u884c\u672c\u8eab\u7684\u64cd\u4f5c\uff0c\u8fd8\u4f1a\u987a\u4fbf\u5c06\u65e7\u54c8\u5e0c\u8868\u4e2d\u7684\u4e00\u90e8\u5206\u6570\u636e\u8fc1\u79fb\u5230\u65b0\u8868\u4e2d\uff0c\u5c06\u8fc1\u79fb\u6210\u672c\u5206\u644a\u5230\u591a\u6b21\u64cd\u4f5c\u4e2d\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#_11","title":"\u5e38\u7528\u547d\u4ee4","text":"<ul> <li> <p>HSET key field value: \u8bbe\u7f6e\u54c8\u5e0c\u4e2d\u6307\u5b9a\u5b57\u6bb5\u7684\u503c</p> </li> <li> <p>HGET key field: \u83b7\u53d6\u54c8\u5e0c\u4e2d\u6307\u5b9a\u5b57\u6bb5\u7684\u503c</p> </li> <li> <p>HMSET key field1 value1 [field2 value2 ...]: \u6279\u91cf\u8bbe\u7f6e</p> </li> <li> <p>HMGET key field1 [field2 ...]: \u6279\u91cf\u83b7\u53d6</p> </li> <li> <p>HGETALL key: \u83b7\u53d6\u6240\u6709\u5b57\u6bb5\u548c\u503c</p> </li> <li> <p>HKEYS key: \u83b7\u53d6\u6240\u6709\u5b57\u6bb5</p> </li> <li> <p>HVALS key: \u83b7\u53d6\u6240\u6709\u503c</p> </li> <li> <p>HINCRBY key field increment: \u4e3a\u54c8\u5e0c\u4e2d\u6307\u5b9a\u5b57\u6bb5\u7684\u6574\u6570\u503c\u589e\u52a0\u6307\u5b9a\u589e\u91cf</p> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#_12","title":"\u4f7f\u7528\u573a\u666f","text":"<ol> <li> <p>\u5b58\u50a8\u5bf9\u8c61\u6570\u636e\uff1a\u7528\u6237\u4fe1\u606f\uff08id, name, email, age\uff09\u3001\u5546\u54c1\u4fe1\u606f\u7b49\u3002\u76f8\u6bd4\u4e8e\u5c06\u6bcf\u4e2a\u5c5e\u6027\u90fd\u7528\u4e00\u4e2a String key \u5b58\u50a8\uff08\u5982 user:1:name, user:1:email\uff09\uff0c\u4f7f\u7528 Hash \u53ef\u4ee5\uff1a</p> <ul> <li> <p>\u8282\u7701\u5185\u5b58\uff1a\u5f53\u4f7f\u7528 ziplist \u7f16\u7801\u65f6\uff0c\u5185\u5b58\u5360\u7528\u8fdc\u5c0f\u4e8e\u591a\u4e2a String key\u3002</p> </li> <li> <p>\u4fbf\u4e8e\u7ba1\u7406\uff1a\u5c06\u540c\u4e00\u5bf9\u8c61\u7684\u5c5e\u6027\u805a\u5408\u5728\u4e00\u4e2a key \u4e2d\uff0c\u903b\u8f91\u66f4\u6e05\u6670\u3002</p> </li> </ul> </li> <li> <p>\u8d2d\u7269\u8f66\uff1a\u4ee5\u7528\u6237 ID \u4e3a key\uff0c\u5546\u54c1 ID \u4e3a field\uff0c\u5546\u54c1\u6570\u91cf\u4e3a value\uff0c\u53ef\u4ee5\u65b9\u4fbf\u5730\u5bf9\u8d2d\u7269\u8f66\u4e2d\u7684\u5546\u54c1\u8fdb\u884c\u589e\u5220\u6539\u67e5\u3002HINCRBY \u53ef\u4ee5\u65b9\u4fbf\u5730\u5b9e\u73b0\u5546\u54c1\u6570\u91cf\u7684\u589e\u51cf\u3002</p> </li> <li> <p>\u7f13\u5b58\u7ed3\u6784\u5316\u6570\u636e\uff1a\u5c06\u5173\u7cfb\u578b\u6570\u636e\u5e93\u4e2d\u7684\u4e00\u884c\u6570\u636e\u6216\u4e00\u4e2a JSON \u5bf9\u8c61\u7f13\u5b58\u5230 Hash \u4e2d\u3002</p> </li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#4-set","title":"4. Set (\u96c6\u5408)","text":""},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#_13","title":"\u7b80\u4ecb","text":"<p>Set \u662f\u4e00\u4e2a\u65e0\u5e8f\u7684\u3001\u4e0d\u91cd\u590d\u7684\u5b57\u7b26\u4e32\u96c6\u5408\u3002\u5b83\u7684\u6838\u5fc3\u4ef7\u503c\u5728\u4e8e\u5176\u6210\u5458\u7684\u552f\u4e00\u6027\u4ee5\u53ca\u80fd\u591f\u9ad8\u6548\u5730\u8fdb\u884c\u96c6\u5408\u95f4\u7684\u8fd0\u7b97\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#_14","title":"\u5e95\u5c42\u5b9e\u73b0\u539f\u7406","text":"<p>Set \u7684\u5e95\u5c42\u5b9e\u73b0\u4e5f\u6709\u4e24\u79cd\u7f16\u7801\u65b9\u5f0f\uff1a</p> <ul> <li> <p>intset (\u6574\u6570\u96c6\u5408)\uff1a\u5f53\u96c6\u5408\u4e2d\u7684\u6240\u6709\u5143\u7d20\u90fd\u662f\u6574\u6570\uff0c\u5e76\u4e14\u5143\u7d20\u6570\u91cf\u4e0d\u8d85\u8fc7\u914d\u7f6e\u9608\u503c\uff08set-max-intset-entries\uff0c\u9ed8\u8ba4 512\uff09\u65f6\uff0c\u4f7f\u7528 intset\u3002intset \u662f\u4e00\u4e2a\u6709\u5e8f\u7684\u3001\u7d27\u51d1\u7684\u6574\u6570\u6570\u7ec4\uff0c\u67e5\u627e\u65f6\u4f7f\u7528\u4e8c\u5206\u67e5\u627e\uff0c\u975e\u5e38\u9ad8\u6548\u4e14\u8282\u7701\u5185\u5b58\u3002</p> </li> <li> <p>hashtable (\u54c8\u5e0c\u8868)\uff1a\u5f53\u96c6\u5408\u5143\u7d20\u4e0d\u5168\u662f\u6574\u6570\uff0c\u6216\u5143\u7d20\u6570\u91cf\u8d85\u8fc7\u9608\u503c\u65f6\uff0c\u8f6c\u6362\u4e3a hashtable\u3002hashtable \u7684 key \u5b58\u50a8\u96c6\u5408\u6210\u5458\uff0cvalue \u5219\u7edf\u4e00\u4e3a NULL\u3002</p> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#_15","title":"\u5e38\u7528\u547d\u4ee4","text":"<ul> <li> <p>SADD key member1 [member2 ...]: \u5411\u96c6\u5408\u6dfb\u52a0\u4e00\u4e2a\u6216\u591a\u4e2a\u6210\u5458</p> </li> <li> <p>SREM key member1 [member2 ...]: \u79fb\u9664\u4e00\u4e2a\u6216\u591a\u4e2a\u6210\u5458</p> </li> <li> <p>SMEMBERS key: \u8fd4\u56de\u96c6\u5408\u4e2d\u7684\u6240\u6709\u6210\u5458</p> </li> <li> <p>SISMEMBER key member: \u5224\u65ad member \u662f\u5426\u662f\u96c6\u5408\u7684\u6210\u5458</p> </li> <li> <p>SCARD key: \u83b7\u53d6\u96c6\u5408\u7684\u6210\u5458\u6570</p> </li> <li> <p>SINTER key1 [key2 ...]: \u8fd4\u56de\u7ed9\u5b9a\u6240\u6709\u96c6\u5408\u7684\u4ea4\u96c6</p> </li> <li> <p>SUNION key1 [key2 ...]: \u8fd4\u56de\u7ed9\u5b9a\u6240\u6709\u96c6\u5408\u7684\u5e76\u96c6</p> </li> <li> <p>SDIFF key1 [key2 ...]: \u8fd4\u56de\u7ed9\u5b9a\u6240\u6709\u96c6\u5408\u7684\u5dee\u96c6</p> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#_16","title":"\u4f7f\u7528\u573a\u666f","text":"<ol> <li> <p>\u6807\u7b7e\u7cfb\u7edf (Tagging)\uff1a\u4e00\u7bc7\u6587\u7ae0\u53ef\u4ee5\u6709\u591a\u4e2a\u6807\u7b7e\uff0c\u4e00\u4e2a\u6807\u7b7e\u53ef\u4ee5\u5bf9\u5e94\u591a\u7bc7\u6587\u7ae0\u3002\u53ef\u4ee5\u4f7f\u7528 Set \u5b58\u50a8\u6bcf\u7bc7\u6587\u7ae0\u7684\u6807\u7b7e\uff0c\u6216\u6bcf\u4e2a\u6807\u7b7e\u4e0b\u7684\u6587\u7ae0 ID\u3002SINTER \u53ef\u4ee5\u65b9\u4fbf\u5730\u627e\u51fa\u540c\u65f6\u62e5\u6709\u591a\u4e2a\u6807\u7b7e\u7684\u6587\u7ae0\u3002</p> </li> <li> <p>\u5171\u540c\u597d\u53cb/\u5173\u6ce8\uff1a\u4f7f\u7528 SINTER \u53ef\u4ee5\u8f7b\u677e\u5b9e\u73b0\u201c\u67e5\u770b\u4f60\u548c Ta \u7684\u5171\u540c\u597d\u53cb\u201d\u529f\u80fd\u3002</p> </li> <li> <p>\u62bd\u5956\u7cfb\u7edf\uff1a\u5c06\u53c2\u4e0e\u62bd\u5956\u7684\u7528\u6237 ID \u5b58\u5165 Set\uff0c\u5229\u7528\u5176\u6210\u5458\u552f\u4e00\u6027\u4fdd\u8bc1\u6bcf\u4e2a\u7528\u6237\u53ea\u80fd\u53c2\u4e0e\u4e00\u6b21\u3002SPOP \u6216 SRANDMEMBER \u53ef\u4ee5\u968f\u673a\u62bd\u53d6\u4e2d\u5956\u7528\u6237\u3002</p> </li> <li> <p>\u53bb\u91cd\u7edf\u8ba1\uff1a\u4f8b\u5982\u7edf\u8ba1\u7f51\u7ad9\u7684\u72ec\u7acb\u8bbf\u5ba2\uff08UV\uff09\uff0c\u5c06\u6bcf\u4e2a\u8bbf\u5ba2\u7684 ID SADD \u5230\u4e00\u4e2a Set \u4e2d\uff0c\u6700\u540e\u901a\u8fc7 SCARD \u5f97\u5230\u603b\u6570\u3002</p> </li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#5-sorted-set-zset","title":"5. Sorted Set (\u6709\u5e8f\u96c6\u5408 / ZSet)","text":""},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#_17","title":"\u7b80\u4ecb","text":"<p>ZSet \u548c Set \u4e00\u6837\uff0c\u4e5f\u662f\u4e0d\u91cd\u590d\u7684\u5b57\u7b26\u4e32\u96c6\u5408\u3002\u4f46\u4e0d\u540c\u7684\u662f\uff0cZSet \u7684\u6bcf\u4e2a\u6210\u5458\u90fd\u4f1a\u5173\u8054\u4e00\u4e2a double \u7c7b\u578b\u7684\u5206\u6570 (score)\u3002Redis \u6b63\u662f\u6839\u636e\u8fd9\u4e2a score \u5bf9\u96c6\u5408\u4e2d\u7684\u6210\u5458\u8fdb\u884c\u6392\u5e8f\u3002\u6210\u5458\u662f\u552f\u4e00\u7684\uff0c\u4f46 score \u53ef\u4ee5\u91cd\u590d\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#_18","title":"\u5e95\u5c42\u5b9e\u73b0\u539f\u7406","text":"<p>ZSet \u662f Redis \u4e2d\u6700\u590d\u6742\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5b83\u7684\u5e95\u5c42\u5b9e\u73b0\u4e5f\u662f\u4e24\u79cd\u7f16\u7801\u65b9\u5f0f\uff1a</p> <ul> <li> <p>ziplist (\u538b\u7f29\u5217\u8868)\uff1a\u5f53 ZSet \u7684\u5143\u7d20\u6570\u91cf\u8f83\u5c11\uff0c\u4e14\u6bcf\u4e2a\u5143\u7d20\u548c score \u90fd\u8f83\u5c0f\u65f6\uff0c\u4f7f\u7528 ziplist\u3002\u5728 ziplist \u4e2d\uff0c\u5143\u7d20\u548c score \u6210\u5bf9\u51fa\u73b0\uff0c\u5e76\u6309 score \u6709\u5e8f\u6392\u5217\u3002</p> </li> <li> <p>skiplist (\u8df3\u8868) + hashtable (\u54c8\u5e0c\u8868)\uff1a\u5f53\u4e0d\u6ee1\u8db3 ziplist \u7684\u6761\u4ef6\u65f6\uff0c\u4f1a\u8f6c\u6362\u4e3a\u8fd9\u79cd\u7ec4\u5408\u7ed3\u6784\u3002</p> <ul> <li> <p>skiplist: \u4e00\u79cd\u9ad8\u6548\u7684\u3001\u652f\u6301\u8303\u56f4\u67e5\u627e\u7684\u6709\u5e8f\u6570\u636e\u7ed3\u6784\uff0c\u5176\u67e5\u627e\u3001\u63d2\u5165\u3001\u5220\u9664\u7684\u5e73\u5747\u65f6\u95f4\u590d\u6742\u5ea6\u90fd\u662f O(logN)\u3002\u5b83\u8d1f\u8d23\u6309 score \u6392\u5e8f\u548c\u8303\u56f4\u67e5\u8be2\u3002</p> </li> <li> <p>hashtable: \u8d1f\u8d23\u5b58\u50a8\u4ece\u6210\u5458 (member) \u5230\u5206\u6570 (score) \u7684\u6620\u5c04\uff0c\u4f7f\u5f97\u901a\u8fc7\u6210\u5458\u540d\u67e5\u627e\u5176 score \u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(1)\u3002</p> </li> <li> <p>\u7cbe\u5999\u4e4b\u5904\uff1askiplist \u548c hashtable \u4f1a\u5171\u4eab\u6210\u5458\u548c\u5206\u6570\u7684\u5185\u5b58\uff0c\u4e0d\u4f1a\u9020\u6210\u6570\u636e\u5197\u4f59\u3002\u8fd9\u4e24\u79cd\u7ed3\u6784\u7684\u7ed3\u5408\uff0c\u4f7f\u5f97 ZSet \u65e2\u80fd\u9ad8\u6548\u5730\u6309 score \u6392\u5e8f\u548c\u8303\u56f4\u67e5\u627e\uff0c\u4e5f\u80fd\u9ad8\u6548\u5730\u901a\u8fc7 member \u67e5\u627e score\u3002</p> </li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#_19","title":"\u5e38\u7528\u547d\u4ee4","text":"<ul> <li> <p>ZADD key score1 member1 [score2 member2 ...]: \u6dfb\u52a0\u6216\u66f4\u65b0\u4e00\u4e2a\u6216\u591a\u4e2a\u6210\u5458\u53ca\u5176 score</p> </li> <li> <p>ZREM key member1 [member2 ...]: \u79fb\u9664\u4e00\u4e2a\u6216\u591a\u4e2a\u6210\u5458</p> </li> <li> <p>ZRANGE key start stop [WITHSCORES]: \u6309 score \u4ece\u5c0f\u5230\u5927\u8fd4\u56de\u6307\u5b9a\u6392\u540d\u8303\u56f4\u7684\u6210\u5458</p> </li> <li> <p>ZREVRANGE key start stop [WITHSCORES]: \u6309 score \u4ece\u5927\u5230\u5c0f\u8fd4\u56de\u6307\u5b9a\u6392\u540d\u8303\u56f4\u7684- ZSCORE key member: \u83b7\u53d6\u6307\u5b9a\u6210\u5458\u7684 score</p> </li> <li> <p>ZRANK key member: \u83b7\u53d6\u6307\u5b9a\u6210\u5458\u7684\u6392\u540d\uff08\u4ece\u5c0f\u5230\u5927\uff09</p> </li> <li> <p>ZRANGEBYSCORE key min max [WITHSCORES]: \u6309 score \u8303\u56f4\u67e5\u8be2\u6210\u5458</p> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#_20","title":"\u4f7f\u7528\u573a\u666f","text":"<ol> <li> <p>\u6392\u884c\u699c/\u79ef\u5206\u699c\uff1a\u6700\u7ecf\u5178\u7684\u5e94\u7528\u3002\u4f8b\u5982\u6e38\u620f\u73a9\u5bb6\u79ef\u5206\u699c\u3001\u70ed\u95e8\u5546\u54c1\u699c\u3002ZADD \u66f4\u65b0\u5206\u6570\uff0cZREVRANGE \u83b7\u53d6 Top N \u5217\u8868\u3002</p> </li> <li> <p>\u5e26\u6743\u91cd\u7684\u6d88\u606f\u961f\u5217\uff1a\u5982\u679c\u6d88\u606f\u9700\u8981\u6709\u4f18\u5148\u7ea7\uff0c\u53ef\u4ee5\u5c06\u4f18\u5148\u7ea7\u4f5c\u4e3a score\uff0c\u9ad8\u4f18\u5148\u7ea7\u7684\u6d88\u606f\u5148\u88ab\u5904\u7406\u3002</p> </li> <li> <p>\u5ef6\u8fdf\u4efb\u52a1\u961f\u5217\uff1a\u5c06\u4efb\u52a1\u7684\u6267\u884c\u65f6\u95f4\u6233\u4f5c\u4e3a score\uff0c\u7136\u540e\u7528\u4e00\u4e2a\u5b9a\u65f6\u4efb\u52a1\u8f6e\u8be2 ZRANGEBYSCORE \u83b7\u53d6\u5f53\u524d\u9700\u8981\u6267\u884c\u7684\u4efb\u52a1\u3002</p> </li> <li> <p>\u8303\u56f4\u67e5\u627e\uff1a\u4f8b\u5982\uff0c\u67e5\u627e\u5de5\u8d44\u5728 5000 \u5230 10000 \u4e4b\u95f4\u7684\u5458\u5de5\u3002</p> </li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#_21","title":"\u5176\u4ed6\u7279\u6b8a\u6570\u636e\u7c7b\u578b","text":""},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#6-bitmap","title":"6. Bitmap (\u4f4d\u56fe)","text":"<ul> <li> <p>\u672c\u8d28\uff1a\u5b83\u4e0d\u662f\u4e00\u4e2a\u72ec\u7acb\u7684\u6570\u636e\u7c7b\u578b\uff0c\u800c\u662f\u5bf9 String \u7c7b\u578b\u7684\u4e00\u79cd\u6269\u5c55\u3002\u53ef\u4ee5\u770b\u4f5c\u662f\u4e00\u4e2a\u4ee5 bit \u4e3a\u5355\u4f4d\u7684\u6570\u7ec4\uff0c\u6bcf\u4e2a bit \u53ea\u80fd\u662f 0 \u6216 1\u3002</p> </li> <li> <p>\u539f\u7406\uff1a\u5e95\u5c42\u5c31\u662f String (SDS)\uff0c\u901a\u8fc7 SETBIT \u548c GETBIT \u7b49\u547d\u4ee4\u5728\u5b57\u8282\u7ea7\u522b\u4e0a\u64cd\u4f5c\u4f4d\u3002</p> </li> <li> <p>\u573a\u666f\uff1a</p> <ul> <li> <p>\u7528\u6237\u7b7e\u5230\u7edf\u8ba1\uff1a\u7528\u4e00\u4e2a Bitmap \u8bb0\u5f55\u4e00\u4e2a\u7528\u6237\u4e00\u5e74\u7684\u7b7e\u5230\u60c5\u51b5\uff0c365 \u5929\u53ea\u9700\u8981 365/8 \u2248 46 \u5b57\u8282\uff0c\u975e\u5e38\u8282\u7701\u7a7a\u95f4\u3002</p> </li> <li> <p>\u6d3b\u8dc3\u7528\u6237\u7edf\u8ba1\uff1aBITCOUNT \u53ef\u4ee5\u5feb\u901f\u7edf\u8ba1\u6307\u5b9a\u65f6\u95f4\u6bb5\u5185\u6d3b\u8dc3\u7528\u6237\u6570\u91cf\u3002</p> </li> <li> <p>\u7528\u6237\u5728\u7ebf\u72b6\u6001\uff1a\u7528\u4e00\u4f4d\u8868\u793a\u4e00\u4e2a\u7528\u6237\u662f\u5426\u5728\u7ebf\u3002</p> </li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#7-hyperloglog","title":"7. HyperLogLog","text":"<ul> <li> <p>\u672c\u8d28\uff1a\u4e00\u79cd\u6982\u7387\u6027\u6570\u636e\u7ed3\u6784\uff0c\u7528\u4e8e\u8fdb\u884c\u57fa\u6570\u7edf\u8ba1\uff08\u5373\u7edf\u8ba1\u96c6\u5408\u4e2d\u4e0d\u91cd\u590d\u5143\u7d20\u7684\u6570\u91cf\uff09\u3002</p> </li> <li> <p>\u539f\u7406\uff1a\u5b83\u4e0d\u662f\u7cbe\u786e\u8ba1\u6570\uff0c\u800c\u662f\u7ed9\u51fa\u4e00\u4e2a\u5e26\u6709\u5f88\u5c0f\u6807\u51c6\u8bef\u5dee\uff08\u7ea6 0.81%\uff09\u7684\u8fd1\u4f3c\u503c\u3002\u5176\u60ca\u4eba\u4e4b\u5904\u5728\u4e8e\uff0c\u65e0\u8bba\u7edf\u8ba1\u591a\u5c11\u4e2a\u5143\u7d20\uff0c\u5b83\u5360\u7528\u7684\u5185\u5b58\u90fd\u975e\u5e38\u5c0f\u4e14\u56fa\u5b9a\uff08\u7ea6 12KB\uff09\u3002</p> </li> <li> <p>\u573a\u666f\uff1a</p> <ul> <li> <p>\u7f51\u7ad9 UV \u7edf\u8ba1\uff1a\u7edf\u8ba1\u4e00\u4e2a\u9875\u9762\u7684\u6bcf\u65e5\u72ec\u7acb\u8bbf\u5ba2\u6570\uff0c\u76f8\u6bd4 Set\uff0cHyperLogLog \u5728\u6570\u636e\u91cf\u5de8\u5927\u65f6\u80fd\u8282\u7701\u5927\u91cf\u5185\u5b58\u3002</p> </li> <li> <p>\u5927\u89c4\u6a21\u6570\u636e\u53bb\u91cd\u8ba1\u6570\u3002</p> </li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#8-geospatial","title":"8. Geospatial (\u5730\u7406\u7a7a\u95f4)","text":"<ul> <li> <p>\u672c\u8d28\uff1a\u57fa\u4e8e ZSet \u5b9e\u73b0\uff0c\u7528\u4e8e\u5b58\u50a8\u5730\u7406\u4f4d\u7f6e\u4fe1\u606f\uff08\u7ecf\u5ea6\u3001\u7eac\u5ea6\uff09\u3002</p> </li> <li> <p>\u539f\u7406\uff1a\u5b83\u4f7f\u7528 Geohash \u7b97\u6cd5\u5c06\u4e8c\u7ef4\u7684\u7ecf\u7eac\u5ea6\u5750\u6807\u7f16\u7801\u6210\u4e00\u4e2a\u4e00\u7ef4\u7684\u5b57\u7b26\u4e32\uff08\u6216\u6574\u6570\uff09\uff0c\u7136\u540e\u5c06\u8fd9\u4e2a\u7f16\u7801\u503c\u4f5c\u4e3a ZSet \u7684 score\uff0c\u5730\u70b9\u540d\u79f0\u4f5c\u4e3a member\u3002\u5229\u7528 ZSet \u7684\u6709\u5e8f\u6027\u548c\u8303\u56f4\u67e5\u8be2\u80fd\u529b\uff0c\u53ef\u4ee5\u5b9e\u73b0\u5730\u7406\u4f4d\u7f6e\u7684\u90bb\u8fd1\u67e5\u8be2\u3002</p> </li> <li> <p>\u573a\u666f\uff1a</p> <ul> <li> <p>\u9644\u8fd1\u7684\u4eba/\u5730\u70b9\uff1a\u5982\u201c\u67e5\u627e\u6211\u9644\u8fd1 1 \u516c\u91cc\u5185\u7684\u9910\u5385\u201d\u3002</p> </li> <li> <p>\u8ba1\u7b97\u4e24\u70b9\u95f4\u8ddd\u79bb\u3002</p> </li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#9-stream","title":"9. Stream (\u6d41)","text":"<ul> <li> <p>\u672c\u8d28\uff1aRedis 5.0 \u65b0\u589e\u7684\u6570\u636e\u7ed3\u6784\uff0c\u662f\u4e00\u4e2a\u652f\u6301\u591a\u64ad\u7684\u3001\u53ef\u6301\u4e45\u5316\u7684\u3001\u8ffd\u52a0\u5f0f\u7684\u65e5\u5fd7 (append-only log)\u3002</p> </li> <li> <p>\u539f\u7406\uff1a\u7ed3\u6784\u4e0a\u7c7b\u4f3c\u4e00\u4e2a\u7b80\u7248\u7684 Kafka\u3002\u5b83\u5305\u542b\u6d88\u606f ID\u3001\u6d88\u606f\u5185\u5bb9\uff0c\u5e76\u652f\u6301\u6d88\u8d39\u7ec4 (Consumer Group)\uff0c\u5141\u8bb8\u591a\u4e2a\u6d88\u8d39\u8005\u534f\u540c\u6d88\u8d39\u540c\u4e00\u4e2a\u6d41\u4e2d\u7684\u6d88\u606f\uff0c\u5e76\u80fd\u8bb0\u5f55\u6bcf\u4e2a\u6d88\u8d39\u8005\u7684\u6d88\u8d39\u8fdb\u5ea6\u3002</p> </li> <li> <p>\u573a\u666f\uff1a</p> <ul> <li> <p>\u6d88\u606f\u961f\u5217\uff1a\u76f8\u6bd4 List \u5b9e\u73b0\u7684\u6d88\u606f\u961f\u5217\uff0cStream \u529f\u80fd\u66f4\u5f3a\u5927\uff0c\u652f\u6301\u6d88\u8d39\u7ec4\u3001\u6d88\u606f\u6301\u4e45\u5316\u548c ACK \u673a\u5236\uff0c\u66f4\u50cf\u4e00\u4e2a\u4e13\u4e1a\u7684 MQ\u3002</p> </li> <li> <p>\u4e8b\u4ef6\u6eaf\u6e90 (Event Sourcing)\u3002</p> </li> <li> <p>\u5b9e\u65f6\u6570\u636e\u6d41\u5904\u7406\u3002</p> </li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#_22","title":"\u603b\u7ed3","text":"\u6570\u636e\u7c7b\u578b \u5e95\u5c42\u5b9e\u73b0 \u6838\u5fc3\u7279\u70b9 \u4e3b\u8981\u4f7f\u7528\u573a\u666f String SDS (int, embstr, raw) \u952e\u503c\u5bf9\uff0c\u4e8c\u8fdb\u5236\u5b89\u5168 \u7f13\u5b58\u3001\u8ba1\u6570\u5668\u3001\u5206\u5e03\u5f0f\u9501\u3001\u5171\u4eabSession List quicklist (ziplist + linkedlist) \u6709\u5e8f\u3001\u53ef\u91cd\u590d \u6d88\u606f\u961f\u5217\u3001\u65f6\u95f4\u7ebf\u3001\u6700\u65b0\u5217\u8868 Hash ziplist / hashtable field-value \u6620\u5c04\uff0c\u5bf9\u8c61\u5b58\u50a8 \u5b58\u50a8\u5bf9\u8c61\uff08\u7528\u6237\u4fe1\u606f\uff09\u3001\u8d2d\u7269\u8f66 Set intset / hashtable \u65e0\u5e8f\u3001\u552f\u4e00 \u6807\u7b7e\u3001\u5171\u540c\u597d\u53cb\u3001\u62bd\u5956\u3001\u53bb\u91cd\u7edf\u8ba1 ZSet ziplist / (skiplist + hashtable) \u6709\u5e8f\u3001\u552f\u4e00\u3001\u5e26\u5206\u6570 \u6392\u884c\u699c\u3001\u5ef6\u8fdf\u4efb\u52a1\u3001\u8303\u56f4\u67e5\u627e Bitmap String (SDS) \u4f4d\u64cd\u4f5c\uff0c\u8282\u7701\u7a7a\u95f4 \u7b7e\u5230\u3001\u6d3b\u8dc3\u7528\u6237\u7edf\u8ba1\u3001\u5728\u7ebf\u72b6\u6001 HyperLogLog HLL \u7b97\u6cd5 \u6982\u7387\u6027\u57fa\u6570\u7edf\u8ba1\uff0c\u6781\u7701\u5185\u5b58 \u6d77\u91cf\u6570\u636e\u53bb\u91cd\u8ba1\u6570\uff08\u5982UV\uff09 Geospatial ZSet (Geohash) \u5730\u7406\u4f4d\u7f6e\u5b58\u50a8\u4e0e\u67e5\u8be2 \u9644\u8fd1\u7684\u4eba/\u5730\u70b9 Stream \u7c7b Radix Tree \u8ffd\u52a0\u5f0f\u65e5\u5fd7\uff0c\u652f\u6301\u6d88\u8d39\u7ec4 \u6d88\u606f\u961f\u5217\u3001\u4e8b\u4ef6\u6eaf\u6e90\u3001\u65e5\u5fd7\u7cfb\u7edf"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/","title":"Redis\u6570\u636e\u7ed3\u6784","text":"<p>Redis\u4e3a\u5176\u4e94\u79cd\u57fa\u672c\u6570\u636e\u7c7b\u578b\uff08\u5b57\u7b26\u4e32\u3001\u5217\u8868\u3001\u54c8\u5e0c\u3001\u96c6\u5408\u3001\u6709\u5e8f\u96c6\u5408\uff09\u8bbe\u8ba1\u4e86\u4e13\u95e8\u7684\u5e95\u5c42\u6570\u636e\u7ed3\u6784\u3002\u8fd9\u6837\u505a\u662f\u4e3a\u4e86\u5728\u7279\u5b9a\u573a\u666f\u4e0b\u6700\u5927\u5316\u5730\u63d0\u5347\u6027\u80fd\u548c\u5185\u5b58\u4f7f\u7528\u6548\u7387\u3002\u7406\u89e3\u8fd9\u4e9b\u5e95\u5c42\u5b9e\u73b0\u6709\u52a9\u4e8e\u5728\u5f00\u53d1\u4e2d\u8fdb\u884c\u6027\u80fd\u4f18\u5316\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#1-simple-dynamic-string-sds","title":"1. \u7b80\u5355\u52a8\u6001\u5b57\u7b26\u4e32 (Simple Dynamic String - SDS)","text":"<ul> <li> <p>\u5b9a\u4e49: Redis\u81ea\u5b9a\u4e49\u7684\u5b57\u7b26\u4e32\u5b9e\u73b0\uff0c\u7528\u4e8e\u66ff\u4ee3C\u8bed\u8a00\u4f20\u7edf\u7684\u4ee5\u7a7a\u5b57\u7b26<code>\\0</code>\u7ed3\u5c3e\u7684\u5b57\u7b26\u4e32\u3002</p> </li> <li> <p>\u6838\u5fc3\u4f18\u52bf:</p> <ul> <li> <p>\u5feb\u901f\u83b7\u53d6\u957f\u5ea6: \u5185\u90e8\u8bb0\u5f55\u4e86\u5b57\u7b26\u4e32\u957f\u5ea6\uff08len\u5c5e\u6027\uff09\uff0c\u83b7\u53d6\u957f\u5ea6\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(1)\u3002</p> </li> <li> <p>\u9632\u6b62\u7f13\u51b2\u533a\u6ea2\u51fa: \u5728\u62fc\u63a5\u6216\u4fee\u6539\u5b57\u7b26\u4e32\u65f6\uff0c\u4f1a\u9884\u5148\u68c0\u67e5\u7a7a\u95f4\uff0c\u4e0d\u8db3\u65f6\u81ea\u52a8\u6269\u5bb9\uff0c\u675c\u7edd\u4e86C\u8bed\u8a00\u5b57\u7b26\u4e32\u64cd\u4f5c\u7684\u6ea2\u51fa\u98ce\u9669\u3002</p> </li> <li> <p>\u4f18\u5316\u5185\u5b58\u5206\u914d:</p> <ul> <li> <p>\u7a7a\u95f4\u9884\u5206\u914d: \u6269\u5bb9\u65f6\u4f1a\u5206\u914d\u6bd4\u5b9e\u9645\u9700\u8981\u66f4\u591a\u7684\u7a7a\u95f4\uff0c\u51cf\u5c11\u8fde\u7eed\u589e\u957f\u64cd\u4f5c\u5e26\u6765\u7684\u5185\u5b58\u91cd\u5206\u914d\u6b21\u6570\u3002</p> </li> <li> <p>\u60f0\u6027\u7a7a\u95f4\u91ca\u653e: \u7f29\u77ed\u5b57\u7b26\u4e32\u65f6\uff0c\u591a\u4f59\u7684\u7a7a\u95f4\u4e0d\u4f1a\u7acb\u5373\u56de\u6536\uff0c\u800c\u662f\u8bb0\u5f55\u4e0b\u6765\u4ee5\u5907\u540e\u7528\u3002</p> </li> </ul> </li> <li> <p>\u4e8c\u8fdb\u5236\u5b89\u5168: \u901a\u8fc7len\u5c5e\u6027\u5224\u65ad\u5b57\u7b26\u4e32\u7ed3\u675f\uff0c\u800c\u975e<code>\\0</code>\uff0c\u56e0\u6b64\u53ef\u4ee5\u5b58\u50a8\u5305\u542b<code>\\0</code>\u7684\u4efb\u610f\u4e8c\u8fdb\u5236\u6570\u636e\uff08\u5982\u56fe\u7247\u3001\u5e8f\u5217\u5316\u5bf9\u8c61\uff09\u3002</p> </li> </ul> </li> <li> <p>\u7ed3\u6784: \u4e3b\u8981\u7531 <code>len</code> (\u5df2\u7528\u957f\u5ea6)\u3001<code>alloc</code> (\u603b\u5206\u914d\u957f\u5ea6) \u548c <code>buf[]</code> (\u5b9e\u9645\u6570\u636e\u5b58\u50a8\u533a) \u7ec4\u6210\u3002</p> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#2-ziplist","title":"2. \u538b\u7f29\u5217\u8868 (ZipList)","text":"<ul> <li> <p>\u5b9a\u4e49: \u4e00\u79cd\u4e3a\u6781\u5ea6\u8282\u7701\u5185\u5b58\u800c\u8bbe\u8ba1\u7684\u3001\u8fde\u7eed\u5b58\u50a8\u7684\u53cc\u5411\u94fe\u8868\u3002\u5f53\u5217\u8868\u6216\u54c8\u5e0c\u7684\u5143\u7d20\u6570\u91cf\u8f83\u5c11\u4e14\u5355\u4e2a\u5143\u7d20\u4f53\u79ef\u8f83\u5c0f\u65f6\uff0cRedis\u4f1a\u91c7\u7528\u5b83\u3002</p> </li> <li> <p>\u6838\u5fc3\u4f18\u52bf (\u7701\u5185\u5b58):</p> <ul> <li> <p>\u6bcf\u4e2a\u8282\u70b9\uff08entry\uff09\u7684\u957f\u5ea6\u662f\u53ef\u53d8\u7684\uff0c\u6839\u636e\u5b58\u50a8\u5185\u5bb9\u7684\u5b9e\u9645\u5927\u5c0f\u800c\u5b9a\u3002</p> </li> <li> <p>\u901a\u8fc7<code>encoding</code>\u5b57\u6bb5\u6765\u63cf\u8ff0\u5f53\u524d\u8282\u70b9\u6570\u636e\u7684\u7c7b\u578b\u548c\u957f\u5ea6\uff0c\u907f\u514d\u4e86\u4e3a\u6240\u6709\u8282\u70b9\u9884\u7559\u540c\u6837\u5927\u5c0f\u7684\u7a7a\u95f4\u3002</p> </li> </ul> </li> <li> <p>\u7ed3\u6784: \u6574\u4e2aZipList\u662f\u4e00\u5757\u8fde\u7eed\u5185\u5b58\uff0c\u5305\u542bzlbytes\uff08\u603b\u5b57\u8282\u6570\uff09\u3001zltail\uff08\u5c3e\u8282\u70b9\u504f\u79fb\u91cf\uff09\u3001zllen\uff08\u8282\u70b9\u6570\uff09\u548czlend\uff08\u7ed3\u675f\u6807\u5fd7\uff09\u3002\u6bcf\u4e2a\u8282\u70b9\u5305\u542b<code>prevlen</code>\uff08\u524d\u4e00\u8282\u70b9\u7684\u957f\u5ea6\uff0c\u7528\u4e8e\u53cd\u5411\u904d\u5386\uff09\u548c<code>encoding</code>\uff08\u7f16\u7801\u4fe1\u606f\uff09\u3002</p> </li> <li> <p>\u7f3a\u70b9:</p> <ul> <li> <p>\u8fde\u9501\u66f4\u65b0: \u4fee\u6539\u4e2d\u95f4\u7684\u4e00\u4e2a\u8282\u70b9\uff0c\u5982\u679c\u5bfc\u81f4\u5176\u957f\u5ea6\u53d8\u5316\uff0c\u53ef\u80fd\u4f1a\u5f15\u8d77\u5176\u540e\u6240\u6709\u8282\u70b9\u7684<code>prevlen</code>\u5b57\u6bb5\u90fd\u9700\u8981\u66f4\u65b0\uff0c\u5728\u6700\u574f\u60c5\u51b5\u4e0b\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(N)\u3002</p> </li> <li> <p>\u5199\u64cd\u4f5c\u6d89\u53ca\u5185\u5b58\u91cd\u5206\u914d\uff0c\u5f00\u9500\u8f83\u5927\u3002</p> </li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#3-quicklist","title":"3. \u5feb\u8868 (QuickList)","text":"<ul> <li> <p>\u5b9a\u4e49: Redis 3.2 \u4e4b\u540e\u5f15\u5165\uff0c\u662f\u5217\u8868\uff08List\uff09\u6570\u636e\u7c7b\u578b\u7684\u6807\u51c6\u5e95\u5c42\u5b9e\u73b0\u3002\u5b83\u662f\u4e00\u4e2a\u53cc\u5411\u94fe\u8868\uff0c\u4f46\u6bcf\u4e2a\u94fe\u8868\u8282\u70b9\u90fd\u662f\u4e00\u4e2aZipList\u3002</p> </li> <li> <p>\u6838\u5fc3\u4f18\u52bf:</p> <ul> <li> <p>\u5728<code>ziplist</code>\uff08\u7701\u5185\u5b58\u4f46\u4fee\u6539\u590d\u6742\uff09\u548c\u666e\u901a\u53cc\u5411\u94fe\u8868\uff08\u6307\u9488\u5f00\u9500\u5927\u4f46\u4fee\u6539\u7075\u6d3b\uff09\u4e4b\u95f4\u505a\u51fa\u4e86\u5b8c\u7f8e\u5e73\u8861\u3002</p> </li> <li> <p>\u5c06\u4e00\u4e2a\u5927\u5217\u8868\u5207\u5206\u6210\u591a\u4e2a\u5c0f\u7684ZipList\uff0c\u9650\u5236\u4e86\u8fde\u9501\u66f4\u65b0\u7684\u5f71\u54cd\u8303\u56f4\uff0c\u540c\u65f6\u51cf\u5c11\u4e86\u6307\u9488\u7684\u5185\u5b58\u5f00\u9500\u3002</p> </li> </ul> </li> <li> <p>\u7279\u70b9: \u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u9879<code>fill</code>\u6765\u9650\u5236\u6bcf\u4e2aZipList\u7684\u5927\u5c0f\uff0c\u8fd8\u53ef\u4ee5\u901a\u8fc7<code>compress</code>\u914d\u7f6e\u5bf9\u4e24\u7aef\u4e4b\u5916\u7684ZipList\u8282\u70b9\u8fdb\u884cLZF\u538b\u7f29\uff0c\u8fdb\u4e00\u6b65\u8282\u7701\u5185\u5b58\u3002</p> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#4-dict-hash-table","title":"4. \u5b57\u5178/\u54c8\u5e0c\u8868 (Dict / Hash Table)","text":"<ul> <li> <p>\u5b9a\u4e49: Redis\u7684\u54c8\u5e0c\uff08Hash\uff09\u7c7b\u578b\u548c\u6570\u636e\u5e93\u672c\u8eab\uff08\u5b58\u50a8\u6240\u6709\u952e\u503c\u5bf9\uff09\u7684\u5e95\u5c42\u5b9e\u73b0\uff0c\u672c\u8d28\u5c31\u662f\u54c8\u5e0c\u8868\u3002</p> </li> <li> <p>\u6838\u5fc3\u4f18\u52bf (\u6e10\u8fdb\u5f0fRehash):</p> <ul> <li> <p>\u5f53\u54c8\u5e0c\u8868\u9700\u8981\u6269\u5bb9\u6216\u7f29\u5bb9\u65f6\uff0c\u64cd\u4f5c\u4e0d\u662f\u4e00\u6b21\u6027\u5b8c\u6210\u7684\u3002</p> </li> <li> <p>\u5b83\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u7a7a\u54c8\u5e0c\u8868\uff0c\u7136\u540e\u5728\u540e\u7eed\u7684\u6bcf\u6b21\u589e\u3001\u5220\u3001\u6539\u3001\u67e5\u64cd\u4f5c\u4e2d\uff0c\u5c06\u65e7\u54c8\u5e0c\u8868\u4e2d\u7684\u4e00\u5c0f\u90e8\u5206\u6570\u636e\u201c\u987a\u4fbf\u201d\u8fc1\u79fb\u5230\u65b0\u8868\u4e2d\uff0c\u76f4\u5230\u8fc1\u79fb\u5b8c\u6210\u3002</p> </li> <li> <p>\u8fd9\u4e2a\u673a\u5236\u907f\u514d\u4e86\u56e0\u4e00\u6b21\u6027\u8fc1\u79fb\u6d77\u91cf\u6570\u636e\u800c\u5bfc\u81f4\u7684\u670d\u52a1\u5668\u957f\u65f6\u95f4\u963b\u585e\u3002</p> </li> </ul> </li> <li> <p>\u7ed3\u6784:</p> <ul> <li> <p>\u91c7\u7528\u94fe\u5730\u5740\u6cd5\u89e3\u51b3\u54c8\u5e0c\u51b2\u7a81\uff0c\u5373\u54c8\u5e0c\u503c\u76f8\u540c\u7684\u5143\u7d20\u4f1a\u901a\u8fc7\u6307\u9488\u5f62\u6210\u4e00\u4e2a\u94fe\u8868\u3002</p> </li> <li> <p>\u5185\u90e8\u5305\u542b\u4e24\u4e2a\u54c8\u5e0c\u8868\uff08ht[0]\u548cht[1]\uff09\uff0c\u4e00\u4e2a\u7528\u4e8e\u5f53\u524d\u4f7f\u7528\uff0c\u4e00\u4e2a\u7528\u4e8erehash\u8fc7\u7a0b\u3002</p> </li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#5-intset","title":"5. \u6574\u6570\u96c6 (IntSet)","text":"<ul> <li> <p>\u5b9a\u4e49: \u5f53\u96c6\u5408\uff08Set\uff09\u4e2d\u7684\u6240\u6709\u5143\u7d20\u90fd\u662f\u6574\u6570\uff0c\u4e14\u5143\u7d20\u6570\u91cf\u4e0d\u591a\u65f6\uff0cRedis\u4f1a\u4f7f\u7528\u6574\u6570\u96c6\u4f5c\u4e3a\u5176\u5e95\u5c42\u5b9e\u73b0\u3002</p> </li> <li> <p>\u6838\u5fc3\u4f18\u52bf:</p> <ul> <li>\u5185\u90e8\u6570\u636e\u5b58\u50a8\u5728\u4e00\u4e2a\u6709\u5e8f\u3001\u65e0\u91cd\u590d\u7684\u6570\u7ec4\u4e2d\uff0c\u975e\u5e38\u7d27\u51d1\uff0c\u8282\u7701\u5185\u5b58\u3002</li> </ul> </li> <li> <p>\u6838\u5fc3\u7279\u6027 (\u5347\u7ea7):</p> <ul> <li> <p>\u5f53\u5411\u4e00\u4e2a\u53ea\u80fd\u5b58\u50a816\u4f4d\u6574\u6570\uff08int16_t\uff09\u7684\u6574\u6570\u96c6\u4e2d\u6dfb\u52a0\u4e00\u4e2a32\u4f4d\u6574\u6570\uff08int32_t\uff09\u65f6\uff0c\u6574\u6570\u96c6\u4f1a\u81ea\u52a8\u201c\u5347\u7ea7\u201d\u3002</p> </li> <li> <p>\u5b83\u4f1a\u91cd\u65b0\u5206\u914d\u80fd\u5bb9\u7eb332\u4f4d\u6574\u6570\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u5e76\u5c06\u6240\u6709\u73b0\u6709\u5143\u7d20\u8f6c\u6362\u4e3a32\u4f4d\uff0c\u518d\u63d2\u5165\u65b0\u5143\u7d20\uff0c\u5e76\u4fdd\u6301\u6709\u5e8f\u3002</p> </li> <li> <p>\u5347\u7ea7\u662f\u5355\u5411\u7684\uff0c\u4e0d\u4f1a\u4e3a\u4e86\u8282\u7701\u7a7a\u95f4\u800c\u964d\u7ea7\u3002</p> </li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/Redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#6-zskiplist-skip-list","title":"6. \u8df3\u8868 (ZSkipList / Skip List)","text":"<ul> <li> <p>\u5b9a\u4e49: \u6709\u5e8f\u96c6\u5408\uff08ZSet\uff09\u7684\u5e95\u5c42\u5b9e\u73b0\u4e4b\u4e00\u3002\u5b83\u662f\u4e00\u79cd\u5728\u6709\u5e8f\u94fe\u8868\u57fa\u7840\u4e0a\u589e\u52a0\u4e86\u591a\u7ea7\u201c\u5feb\u901f\u901a\u9053\u201d\uff08\u7d22\u5f15\uff09\u7684\u6570\u636e\u7ed3\u6784\u3002</p> </li> <li> <p>\u6838\u5fc3\u4f18\u52bf:</p> <ul> <li> <p>\u901a\u8fc7\u591a\u7ea7\u7d22\u5f15\uff0c\u5b9e\u73b0\u4e86\u5e73\u5747O(logN)\u65f6\u95f4\u590d\u6742\u5ea6\u7684\u67e5\u627e\u3001\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\uff0c\u6027\u80fd\u5ab2\u7f8e\u5e73\u8861\u6811\u3002</p> </li> <li> <p>\u76f8\u6bd4\u5e73\u8861\u6811\uff08\u5982\u7ea2\u9ed1\u6811\uff09\uff0c\u8df3\u8868\u7684\u5b9e\u73b0\u66f4\u7b80\u5355\uff0c\u4ee3\u7801\u66f4\u6613\u4e8e\u7406\u89e3\u548c\u7ef4\u62a4\u3002</p> </li> <li> <p>\u8fdb\u884c\u8303\u56f4\u67e5\u627e\uff08\u5982<code>ZRANGE</code>\u547d\u4ee4\uff09\u65f6\uff0c\u903b\u8f91\u975e\u5e38\u6e05\u6670\uff0c\u53ea\u9700\u5728\u5e95\u5c42\u94fe\u8868\u4e0a\u987a\u5e8f\u904d\u5386\u5373\u53ef\u3002</p> </li> </ul> </li> <li> <p>\u7ed3\u6784:</p> <ul> <li> <p>\u6bcf\u4e2a\u8282\u70b9\u9664\u4e86\u6709\u6307\u5411\u4e0b\u4e00\u4e2a\u8282\u70b9\u7684\u6307\u9488\u5916\uff0c\u8fd8\u5305\u542b\u4e00\u4e2a\u5c42\uff08level\uff09\u6570\u7ec4\uff0c\u6bcf\u5c42\u90fd\u6709\u4e00\u4e2a\u6307\u5411\u8be5\u5c42\u66f4\u8fdc\u5904\u8282\u70b9\u7684<code>forward</code>\u6307\u9488\u3002</p> </li> <li> <p>\u8282\u70b9\u521b\u5efa\u65f6\u4f1a\u968f\u673a\u751f\u6210\u4e00\u4e2a\u5c42\u6570\uff0c\u5c42\u6570\u8d8a\u9ad8\u7684\u8282\u70b9\u8d8a\u5c11\uff0c\u6784\u6210\u4e86\u91d1\u5b57\u5854\u5f62\u7684\u7d22\u5f15\u7ed3\u6784\u3002</p> </li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%8F%8A%E5%85%B6%E7%BC%96%E7%A0%81%E5%AF%B9%E5%BA%94/","title":"\u6570\u636e\u7c7b\u578b\u53ca\u5176\u7f16\u7801\u5bf9\u5e94","text":""},{"location":"%E7%AC%94%E8%AE%B0/redis/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%8F%8A%E5%85%B6%E7%BC%96%E7%A0%81%E5%AF%B9%E5%BA%94/#1-string","title":"1. \u5b57\u7b26\u4e32\u5bf9\u8c61 (String)","text":"<p>\u8fd9\u662fRedis\u6700\u57fa\u7840\u7684\u7c7b\u578b\u3002<code>key</code>\u90fd\u662f\u5b57\u7b26\u4e32\uff0c\u5176\u4ed6\u590d\u6742\u7c7b\u578b\u7684\u5143\u7d20\u4e5f\u901a\u5e38\u662f\u5b57\u7b26\u4e32\u3002</p> <ul> <li> <p>\u7f16\u7801\u65b9\u5f0f (3\u79cd)\uff1a</p> <ol> <li><code>int</code>: \u5f53\u5b57\u7b26\u4e32\u5185\u5bb9\u53ef\u4ee5\u88ab\u89e3\u6790\u4e3a\u4e00\u4e2a64\u4f4d\u6709\u7b26\u53f7\u6574\u6570\uff08<code>long</code>\uff09\u65f6\u4f7f\u7528\u3002<ul> <li>\u4f18\u70b9: \u6781\u5ea6\u8282\u7701\u5185\u5b58\uff0c\u53ef\u4ee5\u76f4\u63a5\u8fdb\u884c\u6570\u503c\u8fd0\u7b97\u3002</li> </ul> </li> <li><code>embstr</code>: \u5f53\u5b57\u7b26\u4e32\u957f\u5ea6\u5c0f\u4e8e\u7b49\u4e8e44\u5b57\u8282\u65f6\u4f7f\u7528\u3002<code>redisObject</code>\u548c<code>sds</code>\u5934\u5728\u5185\u5b58\u4e2d\u662f\u8fde\u7eed\u5206\u914d\u7684\u3002<ul> <li>\u4f18\u70b9: \u521b\u5efa\u548c\u9500\u6bc1\u65f6\u53ea\u9700\u4e00\u6b21\u5185\u5b58\u5206\u914d/\u91ca\u653e\uff0c\u8bbf\u95ee\u5c40\u90e8\u6027\u597d\u3002</li> <li>\u7f3a\u70b9: \u53ea\u8bfb\u3002\u4efb\u4f55\u4fee\u6539\u90fd\u4f1a\u5bfc\u81f4\u5176\u8f6c\u5316\u4e3a<code>raw</code>\u7f16\u7801\u3002</li> </ul> </li> <li><code>raw</code>: \u5f53\u5b57\u7b26\u4e32\u957f\u5ea6\u5927\u4e8e44\u5b57\u8282\u65f6\u4f7f\u7528\u3002<code>redisObject</code>\u548c<code>sds</code>\u5934\u5728\u5185\u5b58\u4e2d\u662f\u5206\u5f00\u5206\u914d\u7684\u3002<ul> <li>\u4f18\u70b9: \u53ef\u4ee5\u52a8\u6001\u4fee\u6539\u548c\u8ffd\u52a0\u5185\u5bb9\u3002</li> </ul> </li> </ol> </li> <li> <p>\u7f16\u7801\u8f6c\u6362\uff1a</p> <ul> <li><code>int</code> -&gt; <code>raw</code>: \u5f53\u503c\u4e0d\u518d\u662f\u6574\u6570\u6216\u8d85\u51fa<code>long</code>\u8303\u56f4\u65f6\u3002</li> <li><code>embstr</code> -&gt; <code>raw</code>: \u4efb\u4f55\u4fee\u6539\u64cd\u4f5c\u90fd\u4f1a\u89e6\u53d1\u6b64\u8f6c\u6362\uff0c\u65e0\u8bba\u4fee\u6539\u540e\u957f\u5ea6\u662f\u5426\u8d85\u8fc744\u5b57\u8282\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%8F%8A%E5%85%B6%E7%BC%96%E7%A0%81%E5%AF%B9%E5%BA%94/#2-list","title":"2. \u5217\u8868\u5bf9\u8c61 (List)","text":"<p>\u6709\u5e8f\u7684\u5b57\u7b26\u4e32\u5217\u8868\uff0c\u652f\u6301\u5934\u5c3e\u63d2\u5165\u3002</p> <ul> <li>\u7f16\u7801\u65b9\u5f0f (1\u79cd)\uff1a<ul> <li><code>quicklist</code>: \u8fd9\u662fRedis 3.2\u4e4b\u540e\u552f\u4e00\u7684\u7f16\u7801\u65b9\u5f0f\u3002\u5b83\u662f\u4e00\u4e2a\u53cc\u5411\u94fe\u8868\uff0c\u6bcf\u4e2a\u8282\u70b9\u90fd\u662f\u4e00\u4e2a<code>ziplist</code>\u3002<ul> <li>\u4f18\u70b9: \u7ed3\u5408\u4e86<code>ziplist</code>\u7684\u5185\u5b58\u7d27\u51d1\u6027\u548c\u53cc\u5411\u94fe\u8868\u7684\u7075\u6d3b\u6027\uff0c\u5b9e\u73b0\u4e86\u7a7a\u95f4\u548c\u6027\u80fd\u7684\u5b8c\u7f8e\u5e73\u8861\u3002</li> <li>\u5386\u53f2: \u65e9\u671f\u7248\u672c\u66fe\u4f7f\u7528<code>ziplist</code>\u548c<code>linkedlist</code>\uff0c\u73b0\u5df2\u5e9f\u5f03\u3002</li> </ul> </li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%8F%8A%E5%85%B6%E7%BC%96%E7%A0%81%E5%AF%B9%E5%BA%94/#3-hash","title":"3. \u54c8\u5e0c\u5bf9\u8c61 (Hash)","text":"<p>\u952e\u503c\u5bf9\u7684\u96c6\u5408\uff0c\u7c7b\u4f3c\u4e8eJava\u4e2d\u7684<code>HashMap</code>\u3002</p> <ul> <li> <p>\u7f16\u7801\u65b9\u5f0f (2\u79cd)\uff1a</p> <ol> <li><code>ziplist</code>: \u5f53\u54c8\u5e0c\u5bf9\u8c61\u540c\u65f6\u6ee1\u8db3\u4ee5\u4e0b\u4e24\u4e2a\u6761\u4ef6\u65f6\u4f7f\u7528\uff1a<ul> <li>\u952e\u503c\u5bf9\u6570\u91cf\u5c0f\u4e8e512\u4e2a\u3002</li> <li>\u6240\u6709\u952e\u548c\u503c\u7684\u5b57\u7b26\u4e32\u957f\u5ea6\u90fd\u5c0f\u4e8e64\u5b57\u8282\u3002</li> <li>\u4f18\u70b9: \u5185\u5b58\u6781\u5176\u7d27\u51d1\u3002\u952e\u548c\u503c\u5728<code>ziplist</code>\u4e2d\u76f8\u90bb\u5b58\u50a8\u3002</li> </ul> </li> <li><code>hashtable</code> (\u5e95\u5c42\u4e3a<code>dict</code>)\uff1a\u4e0d\u6ee1\u8db3<code>ziplist</code>\u6761\u4ef6\u65f6\u4f7f\u7528\u3002<ul> <li>\u4f18\u70b9: \u67e5\u627e\u3001\u63d2\u5165\u3001\u5220\u9664\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(1)\uff0c\u6027\u80fd\u7a33\u5b9a\u3002</li> </ul> </li> </ol> </li> <li> <p>\u7f16\u7801\u8f6c\u6362\uff1a\u4ece<code>ziplist</code>\u5230<code>hashtable</code>\u7684\u8f6c\u6362\u662f\u5355\u5411\u7684\uff0c\u4e00\u65e6\u4e0d\u6ee1\u8db3<code>ziplist</code>\u7684\u6761\u4ef6\uff0c\u5c31\u4f1a\u8f6c\u6362\uff0c\u4e14\u4e0d\u4f1a\u518d\u8f6c\u56de\u3002</p> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%8F%8A%E5%85%B6%E7%BC%96%E7%A0%81%E5%AF%B9%E5%BA%94/#4-set","title":"4. \u96c6\u5408\u5bf9\u8c61 (Set)","text":"<p>\u65e0\u5e8f\u3001\u552f\u4e00\u7684\u5b57\u7b26\u4e32\u96c6\u5408\u3002</p> <ul> <li> <p>\u7f16\u7801\u65b9\u5f0f (2\u79cd)\uff1a</p> <ol> <li><code>intset</code>: \u5f53\u96c6\u5408\u5bf9\u8c61\u540c\u65f6\u6ee1\u8db3\u4ee5\u4e0b\u4e24\u4e2a\u6761\u4ef6\u65f6\u4f7f\u7528\uff1a<ul> <li>\u6240\u6709\u5143\u7d20\u90fd\u662f\u6574\u6570\u3002</li> <li>\u5143\u7d20\u6570\u91cf\u4e0d\u8d85\u8fc7512\u4e2a\u3002</li> <li>\u4f18\u70b9: \u4e13\u95e8\u4e3a\u5b58\u50a8\u6574\u6570\u8bbe\u8ba1\uff0c\u5185\u5b58\u6548\u7387\u6781\u9ad8\u3002</li> </ul> </li> <li><code>hashtable</code> (\u5e95\u5c42\u4e3a<code>dict</code>)\uff1a\u4e0d\u6ee1\u8db3<code>intset</code>\u6761\u4ef6\u65f6\u4f7f\u7528\u3002<ul> <li>\u5b9e\u73b0\u65b9\u5f0f: \u5143\u7d20\u4f5c\u4e3a<code>dict</code>\u7684<code>key</code>\u5b58\u50a8\uff0c<code>value</code>\u5219\u5168\u90e8\u8bbe\u4e3a<code>NULL</code>\u3002</li> <li>\u4f18\u70b9: \u63d0\u4f9b\u4e86O(1)\u590d\u6742\u5ea6\u7684\u6210\u5458\u68c0\u67e5\u3002</li> </ul> </li> </ol> </li> <li> <p>\u7f16\u7801\u8f6c\u6362\uff1a\u4ece<code>intset</code>\u5230<code>hashtable</code>\u662f\u5355\u5411\u7684\u3002</p> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%8F%8A%E5%85%B6%E7%BC%96%E7%A0%81%E5%AF%B9%E5%BA%94/#5-zset","title":"5. \u6709\u5e8f\u96c6\u5408\u5bf9\u8c61 (ZSet)","text":"<p>\u6709\u5e8f\u3001\u552f\u4e00\u7684\u5b57\u7b26\u4e32\u96c6\u5408\uff0c\u6bcf\u4e2a\u5143\u7d20\u5173\u8054\u4e00\u4e2a<code>score</code>\uff08\u5206\u6570\uff09\u7528\u4e8e\u6392\u5e8f\u3002</p> <ul> <li> <p>\u7f16\u7801\u65b9\u5f0f (2\u79cd)\uff1a</p> <ol> <li><code>ziplist</code>: \u5f53\u6709\u5e8f\u96c6\u5408\u540c\u65f6\u6ee1\u8db3\u4ee5\u4e0b\u4e24\u4e2a\u6761\u4ef6\u65f6\u4f7f\u7528\uff1a<ul> <li>\u5143\u7d20\u6570\u91cf\u5c0f\u4e8e128\u4e2a\u3002</li> <li>\u6240\u6709\u5143\u7d20\u7684\u5b57\u7b26\u4e32\u957f\u5ea6\u90fd\u5c0f\u4e8e64\u5b57\u8282\u3002</li> <li>\u5b9e\u73b0\u65b9\u5f0f: <code>ziplist</code>\u4e2d\uff0c\u5143\u7d20\u548c\u5176<code>score</code>\u76f8\u90bb\u5b58\u653e\uff0c\u5e76\u4fdd\u6301\u6709\u5e8f\u3002</li> <li>\u4f18\u70b9: \u5185\u5b58\u5360\u7528\u5c0f\u3002</li> </ul> </li> <li><code>skiplist</code>: \u4e0d\u6ee1\u8db3<code>ziplist</code>\u6761\u4ef6\u65f6\u4f7f\u7528\u3002<ul> <li>\u5b9e\u73b0\u65b9\u5f0f: \u8fd9\u662f\u4e00\u4e2a\u590d\u5408\u7ed3\u6784\uff0c\u540c\u65f6\u4f7f\u7528\u4e86<code>skiplist</code>\u548c<code>dict</code>\u3002<ul> <li><code>skiplist</code>: \u6309\u7167<code>score</code>\u5bf9\u5143\u7d20\u8fdb\u884c\u6392\u5e8f\uff0c\u652f\u6301\u9ad8\u6548\u7684\u8303\u56f4\u67e5\u8be2\u3002</li> <li><code>dict</code>: \u5b58\u50a8\u5143\u7d20\u5230<code>score</code>\u7684\u6620\u5c04\uff0c\u652f\u6301O(1)\u590d\u6742\u5ea6\u7684\u6210\u5458\u5206\u6570\u67e5\u627e\u3002</li> </ul> </li> <li>\u4f18\u70b9: \u7ed3\u5408\u4e86\u4e24\u8005\u7684\u4f18\u52bf\uff0c\u65e2\u80fd\u5feb\u901f\u67e5\u627e\uff0c\u53c8\u80fd\u9ad8\u6548\u8303\u56f4\u67e5\u8be2\u3002</li> </ul> </li> </ol> </li> <li> <p>\u7f16\u7801\u8f6c\u6362\uff1a\u4ece<code>ziplist</code>\u5230<code>skiplist</code>\u662f\u5355\u5411\u7684\u3002</p> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/redis/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%8F%8A%E5%85%B6%E7%BC%96%E7%A0%81%E5%AF%B9%E5%BA%94/#_1","title":"\u603b\u7ed3\u8868","text":"Redis\u5bf9\u8c61 \u7f16\u7801\u65b9\u5f0f\u53ca\u6761\u4ef6 \u5e95\u5c42\u6570\u636e\u7ed3\u6784 \u6838\u5fc3\u4f18\u52bf String <code>int</code> (\u6574\u6570\u503c) / <code>embstr</code> (&lt;=44\u5b57\u8282) / <code>raw</code> (&gt;44\u5b57\u8282) <code>long</code> / \u8fde\u7eed\u5185\u5b58<code>sds</code> / \u5206\u79bb\u5185\u5b58<code>sds</code> \u9488\u5bf9\u4e0d\u540c\u5927\u5c0f\u548c\u7c7b\u578b\u7684\u5b57\u7b26\u4e32\u8fdb\u884c\u5185\u5b58\u4f18\u5316 List <code>quicklist</code> (\u552f\u4e00) <code>quicklist</code> (\u53cc\u5411\u94fe\u8868 of <code>ziplist</code>) \u7a7a\u95f4\u4e0e\u6027\u80fd\u7684\u5b8c\u7f8e\u5e73\u8861 Hash <code>ziplist</code> (\u5143\u7d20&lt;512, \u957f\u5ea6&lt;64) / <code>hashtable</code> (\u5176\u4ed6) <code>ziplist</code> / <code>dict</code> \u5c0f\u6570\u636e\u91cf\u65f6\u5185\u5b58\u7d27\u51d1\uff0c\u5927\u6570\u636e\u91cf\u65f6\u6027\u80fd\u7a33\u5b9a Set <code>intset</code> (\u5168\u662f\u6574\u6570, \u6570\u91cf&lt;512) / <code>hashtable</code> (\u5176\u4ed6) <code>intset</code> / <code>dict</code> \u5bf9\u7eaf\u6574\u6570\u96c6\u5408\u8fdb\u884c\u6781\u81f4\u5185\u5b58\u4f18\u5316 ZSet <code>ziplist</code> (\u5143\u7d20&lt;128, \u957f\u5ea6&lt;64) / <code>skiplist</code> (\u5176\u4ed6) <code>ziplist</code> / <code>skiplist</code> + <code>dict</code> \u7ed3\u5408\u8df3\u8868\u548c\u5b57\u5178\uff0c\u540c\u65f6\u6ee1\u8db3\u9ad8\u6548\u7684\u8303\u56f4\u67e5\u8be2\u548c\u5355\u70b9\u67e5\u8be2 <p>\u6ce8\u610f\uff1a\u4e0a\u8ff0\u6761\u4ef6\u4e2d\u7684\u9608\u503c\uff08\u5982512, 64, 128\uff09\u5747\u53ef\u901a\u8fc7Redis\u914d\u7f6e\u6587\u4ef6\u8fdb\u884c\u4fee\u6539\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84/","title":"\u57fa\u7840\u67b6\u6784","text":""},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84/#_1","title":"\u5355\u673a\u623f\u7684\u5185\u90e8\u67b6\u6784","text":"<p>\u5355\u673a\u623f\u5178\u578b\u67b6\u6784\u89d2\u8272\u529f\u80fd\uff1a</p> <ol> <li>DNS\u670d\u52a1\u5668\uff1a\u57df\u540d\u6620\u5c04\u4e3a\u516c\u7f51IP\uff08\u673a\u623f\u5165\u53e3\uff09\u3002</li> <li>LVS (Linux Virtual Server)\uff1a\u63d0\u4f9b\u516c\u7f51IP\u4f5c\u4e3a\u673a\u623f\u5165\u53e3\uff0c\u4f5c\u4e3a\u56db\u5c42\u8d1f\u8f7d\u5747\u8861\u5668\u5206\u53d1\u8bf7\u6c42\u5230Nginx\u96c6\u7fa4\u3002</li> <li>Nginx\uff1a\u4e03\u5c42\u8d1f\u8f7d\u5747\u8861\u5668\uff0c\u6839\u636eHTTP(S)\u534f\u8bae\u5934/URL\u8def\u5f84\u8f6c\u53d1\u8bf7\u6c42\u5230\u5bf9\u5e94\u7684\u4e1a\u52a1HTTP\u670d\u52a1\u5668\u3002</li> <li>\u4e1a\u52a1\u670d\u52a1\u5c42 (HTTP\u670d\u52a1)\uff1a\u5904\u7406\u7528\u6237\u8bf7\u6c42\uff0c\u6839\u636eURL\u5411RPC\u670d\u52a1\u53d1\u9001\u4e1a\u52a1\u903b\u8f91\u5904\u7406\u8bf7\u6c42\u3002</li> <li>\u4e1a\u52a1\u670d\u52a1\u5c42 (RPC\u670d\u52a1)\uff1a\u6267\u884c\u6838\u5fc3\u4e1a\u52a1\u903b\u8f91\uff0c\u8bbf\u95ee\u6570\u636e\u5c42\u6216\u8c03\u7528\u5176\u4ed6RPC\u670d\u52a1\u3002</li> <li>\u5b58\u50a8\u5c42\uff1a\u6240\u6709\u5b58\u50a8\u7cfb\u7edf\u7684\u96c6\u5408\uff0c\u5305\u62ec\u5206\u5e03\u5f0f\u7f13\u5b58\uff08\u5982Redis\uff09\u3001\u5173\u7cfb\u578b\u6570\u636e\u5e93\uff08\u5982MySQL\uff09\u3001NoSQL\u6570\u636e\u5e93\u3002</li> <li>\u670d\u52a1\u53d1\u73b0\uff1a\u4fdd\u5b58\u6bcf\u4e2a\u670d\u52a1\u7684\u52a8\u6001\u8bbf\u95ee\u5730\u5740\u5217\u8868\uff0c\u4f9b\u5176\u4ed6\u670d\u52a1\u67e5\u627e\uff08\u529f\u80fd\u4e0eDNS\u76f8\u4f3c\uff09\u3002</li> <li>\u6d88\u606f\u4e2d\u95f4\u4ef6\uff1a\u8bf7\u6c42\u5f02\u6b65\u6267\u884c\u3001\u670d\u52a1\u95f4\u89e3\u8026\u3001\u8bf7\u6c42\u524a\u5cf0\u586b\u8c37\u3002</li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84/#dns","title":"\u5ba2\u6237\u7aef\u8fde\u63a5\u673a\u623f\u7684\u6280\u672f\uff1aDNS","text":"<ul> <li>TCP/IP\u901a\u4fe1\u57fa\u7840\uff1aIP\u5730\u5740\uff08\u6807\u8bc6\u8bbe\u5907\u3001\u7f51\u7edc\u5bfb\u5740\uff09\u3002</li> <li>\u57df\u540d\uff1a\u6613\u8bfb\u6613\u8bb0\u7684\u5b57\u7b26\u578b\u5730\u5740\u65b9\u6848\uff0cDNS\u5b9e\u73b0\u57df\u540d\u5230IP\u7684\u7ffb\u8bd1\u3002</li> <li>DNS\u610f\u4e49\uff1a<ul> <li>\u4e92\u8054\u7f51\u516c\u53f8\u521b\u5efa\u6613\u8bb0\u57df\u540d\u3002</li> <li>\u901a\u8fc7\u591aIP\u6620\u5c04\u5b9e\u73b0\u8d1f\u8f7d\u5747\u8861\u3002</li> <li>\u67b6\u6784\u5347\u7ea7/IP\u53d8\u66f4\u65f6\uff0c\u4ec5\u4fee\u6539DNS\uff0c\u5bf9\u7528\u6237\u65e0\u5e72\u6270\u3002</li> <li>\u53ef\u5b9e\u73b0\u7075\u6d3b\u8d1f\u8f7d\u5747\u8861\u7b56\u7565\uff08\u5982\u5254\u9664\u5b95\u673aIP\uff09\u3002</li> </ul> </li> <li>\u57df\u540d\u7ed3\u6784\uff1a\u5c42\u6b21\u5316\u6811\u5f62\u7ed3\u6784\uff0c\u6839 -&gt; \u9876\u7ea7\u57df\u540d (TLD) -&gt; \u4e8c\u7ea7\u57df\u540d -&gt; \u4e09\u7ea7\u57df\u540d\u7b49\u3002</li> <li>\u57df\u540d\u670d\u52a1\u5668\u7c7b\u578b\uff1a<ol> <li>\u6839\u57df\u540d\u670d\u52a1\u5668\uff1a\u5168\u7403\u4e92\u8054\u7f51\u4e2d\u67a2\uff0c\u638c\u63e1\u5168\u90e8\u9876\u7ea7\u57df\u540d\u540d\u79f0\u4e0eIP\u6620\u5c04\u3002</li> <li>\u9876\u7ea7\u57df\u540d\u670d\u52a1\u5668\uff1a\u7ba1\u7406\u9876\u7ea7\u57df\u540d\u4e0b\u7684\u4e8c\u7ea7\u57df\u540d\u89e3\u6790\uff0c\u5bfb\u627e\u4e8c\u7ea7\u57df\u540d\u670d\u52a1\u5668IP\u3002</li> <li>\u6743\u5a01\u57df\u540d\u670d\u52a1\u5668\uff1a\u5bf9\u7279\u5b9a\u57df\u540d\u8fdb\u884c\u89e3\u6790\uff0c\u6700\u7ec8\u51b3\u5b9a\u57df\u540d\u89e3\u6790\u5230\u54ea\u4e2aIP\uff08DNS\u6838\u5fc3\uff09\u3002</li> <li>\u672c\u5730\u57df\u540d\u670d\u52a1\u5668 (\u672c\u5730DNS)\uff1a\u4e0d\u5c5e\u5c42\u7ea7\u7ed3\u6784\uff0c\u4f46\u5bf9DNS\u91cd\u8981\uff08\u7f13\u5b58\uff09\uff0c\u7531\u7f51\u7edc\u8fd0\u8425\u5546\u63d0\u4f9b\uff0c\u4e3b\u673a\u67e5\u8be2\u65f6\u9996\u5148\u67e5\u8be2\u3002</li> </ol> </li> <li>\u57df\u540d\u89e3\u6790\u8fc7\u7a0b (\u9012\u5f52\u67e5\u8be2)\uff1a<ol> <li>\u5ba2\u6237\u7aef\u67e5\u8be2\u672c\u5730\u7f13\u5b58\uff08\u6d4f\u89c8\u5668\u7f13\u5b58\u3001Hosts\u6587\u4ef6\uff09\u3002</li> <li>\u65e0\u5219\u5411\u672c\u5730\u57df\u540d\u670d\u52a1\u5668\u53d1\u8d77\u8bf7\u6c42\u3002</li> <li>\u672c\u5730\u57df\u540d\u670d\u52a1\u5668\u5411\u6839\u57df\u540d\u670d\u52a1\u5668\u8bf7\u6c42\u3002</li> <li>\u6839\u8fd4\u56de\u9876\u7ea7\u57df\u540d\u670d\u52a1\u5668\u5730\u5740\u3002</li> <li>\u672c\u5730\u57df\u540d\u670d\u52a1\u5668\u5411\u9876\u7ea7\u57df\u540d\u670d\u52a1\u5668\u8bf7\u6c42\u3002</li> <li>\u9876\u7ea7\u8fd4\u56de\u6743\u5a01\u57df\u540d\u670d\u52a1\u5668\u5730\u5740\uff08\u6216\u76f4\u63a5\u8fd4\u56deIP\uff09\u3002</li> <li>\u672c\u5730\u57df\u540d\u670d\u52a1\u5668\u5411\u6743\u5a01\u57df\u540d\u670d\u52a1\u5668\u8bf7\u6c42\u3002</li> <li>\u6743\u5a01\u8fd4\u56de\u6700\u7ec8IP\uff0c\u672c\u5730\u57df\u540d\u670d\u52a1\u5668\u7f13\u5b58\u5e76\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u3002</li> </ol> </li> <li>DNS\u89e3\u6790\u8bb0\u5f55\u683c\u5f0f\uff1aDomain (\u57df\u540d), TTL (\u751f\u5b58\u5468\u671f), Class (\u534f\u8bae\u7c7b\u578b\uff0cIN-\u56e0\u7279\u7f51), Type (\u8bb0\u5f55\u7c7b\u578b\uff0cA-IPv4, AAAA-IPv6), Rdata (\u8bb0\u5f55\u6570\u636e)\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84/#http-dns","title":"HTTP DNS","text":"<ul> <li>DNS\u5b58\u5728\u7684\u95ee\u9898\uff1a<ul> <li>\u8bbf\u95ee\u5ef6\u8fdf\u9ad8\uff1a\u9012\u5f52\u67e5\u8be2\u8017\u65f6\u3002</li> <li>\u8c03\u5ea6\u7cbe\u51c6\u6027\u5dee\uff1a\u672c\u5730\u57df\u540d\u670d\u52a1\u5668 IP \u4e0d\u51c6\u786e\u5b9a\u4f4d\u5ba2\u6237\u7aef\u5730\u7406\u4f4d\u7f6e\uff0c\u53ef\u80fd\u8fd4\u56de\u975e\u6700\u4f18\u8282\u70b9\u3002</li> <li>\u57df\u540d\u8f6c\u53d1\uff1a\u8fd0\u8425\u5546\u4e3a\u8282\u7ea6\u8d44\u6e90\u8f6c\u8bf7\u6c42\u5230\u5176\u4ed6\u8fd0\u8425\u5546DNS\uff0c\u5bfc\u81f4IP\u4e0d\u7b26\uff0c\u8bbf\u95ee\u6162\u3002</li> <li>DNS\u52ab\u6301\uff1a\u653b\u51fb\u65b9\u5f0f\uff0c\u89e3\u6790\u5230\u9519\u8bef\u6216\u6076\u610fIP (\u8fd0\u8425\u5546\u52ab\u6301\u3001\u9ed1\u5ba2\u7be1\u6539Hosts)\u3002</li> </ul> </li> <li>HTTP DNS\u539f\u7406\uff1a<ol> <li>\u5ba2\u6237\u7aef\u6307\u5b9aHTTP DNS\u670d\u52a1\u5668IP\uff08\u56fa\u5b9aIP\uff09\uff0c\u4f7f\u7528HTTP\u8c03\u7528\u57df\u540d\u89e3\u6790\u63a5\u53e3\uff0c\u4f20\u5165\u57df\u540d\u548c\u5ba2\u6237\u7aefIP\u3002</li> <li>HTTP DNS\u670d\u52a1\u5668\u5411\u6743\u5a01DNS\u670d\u52a1\u5668\u53d1\u8d77\u89e3\u6790\u8bf7\u6c42\uff0c\u8fd4\u56de\u6700\u4f18IP\u3002</li> <li>\u5ba2\u6237\u7aef\u83b7\u53d6IP\u540e\uff0c\u76f4\u63a5\u5411\u6b64IP\u53d1\u9001\u4e1a\u52a1\u8bf7\u6c42\u3002</li> </ol> </li> <li>HTTP DNS\u89e3\u51b3\u7684\u95ee\u9898\uff1a<ul> <li>\u964d\u4f4e\u57df\u540d\u89e3\u6790\u5ef6\u8fdf\uff1a\u76f4\u63a5\u8bbf\u95ee\uff0c\u7f29\u77ed\u89e3\u6790\u94fe\u8def\u3002</li> <li>\u9632\u6b62\u57df\u540d\u52ab\u6301\uff1a\u7ed5\u8fc7\u8fd0\u8425\u5546\u672c\u5730DNS\u3002</li> <li>\u8c03\u5ea6\u7cbe\u51c6\u6027\u66f4\u9ad8\uff1a\u83b7\u53d6\u771f\u5b9e\u5ba2\u6237\u7aefIP\uff0c\u57fa\u4e8e\u7cbe\u786e\u4f4d\u7f6e/\u8fd0\u8425\u5546\u4fe1\u606f\u89e3\u6790\u5230\u66f4\u8fd1/\u6700\u4f18IP\u3002</li> <li>\u5feb\u901f\u751f\u6548\uff1a\u4e0d\u53d7\u4f20\u7edfDNS\u591a\u7ea7\u7f13\u5b58\u5f71\u54cd\uff0c\u66f4\u65b0\u66f4\u5feb\u8986\u76d6\u5168\u91cf\u5ba2\u6237\u7aef\u3002</li> </ul> </li> <li>HTTP DNS\u5b9e\u8df5\uff1a<ul> <li>\u5bb9\u707e\u7b56\u7565\uff08\u91cd\u8981\uff09\uff1a<ol> <li>\u5148\u5c1d\u8bd5HTTP DNS\u3002</li> <li>\u5931\u8d25\u5219\u964d\u7ea7\u5230\u672c\u5730DNS\u3002</li> <li>\u518d\u5931\u8d25\u5219\u4f7f\u7528\u9884\u7559\u7684\u57df\u540d\u515c\u5e95IP\u5730\u5740\u3002</li> </ol> </li> <li>\u5b89\u5168\u7b56\u7565\uff1a\u4f7f\u7528HTTPS\u3002</li> <li>IP\u5730\u5740\u9009\u53d6\u7b56\u7565\uff1aHTTP DNS\u4e0b\u53d1\u591a\u4e2a\u6700\u4f18IP\uff0c\u5ba2\u6237\u7aef\u4f9d\u6b21\u6821\u9a8c\u8fde\u901a\u6027\u3002</li> <li>\u6279\u91cf\u62c9\u53d6\u7b56\u7565\uff1a\u51b7\u542f\u52a8/\u7f51\u7edc\u5207\u6362\u65f6\u6279\u91cf\u62c9\u53d6\u6620\u5c04\u6570\u636e\u5e76\u7f13\u5b58\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84/#_2","title":"\u63a5\u5165\u5c42\u7684\u6280\u672f\u6f14\u8fdb","text":"<ul> <li>\u65e9\u671f\u67b6\u6784\u95ee\u9898\uff1a\u4e1a\u52a1HTTP\u670d\u52a1\u5668\u76f4\u63a5\u7ed1\u5b9a\u516c\u7f51IP\u3002<ul> <li>\u53ef\u7528\u6027\u4f4e\uff1aDNS\u65e0\u6cd5\u9ad8\u6548\u611f\u77e5\u5b9e\u4f8b\u5b95\u673a\u3002</li> <li>\u53ef\u6269\u5c55\u6027\u5dee\uff1a\u6269\u5bb9\u9700\u989d\u5916\u914d\u7f6eDNS\uff0c\u751f\u6548\u6162\u3002</li> <li>\u5b89\u5168\u98ce\u9669\u9ad8\uff1a\u4e1a\u52a1IP\u66b4\u9732\u516c\u7f51\u3002</li> </ul> </li> <li>\u89e3\u51b3\u65b9\u6848\uff1a\u5f15\u5165\u4e2d\u95f4\u5c42 (Nginx)\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84/#nginx","title":"Nginx","text":"<ul> <li>\u4ee3\u7406\u5206\u7c7b\uff1a<ul> <li>\u6b63\u5411\u4ee3\u7406\uff1a\u4ee3\u7406\u5ba2\u6237\u7aef\uff08\u5982VPN\uff09\uff0c\u5ba2\u6237\u7aef\u77e5\u9053\u81ea\u5df1\u8bbf\u95ee\u7684\u662f\u4ee3\u7406\u3002</li> <li>\u53cd\u5411\u4ee3\u7406\uff1a\u4ee3\u7406\u670d\u52a1\u5668\uff08\u5982Nginx\uff09\uff0c\u5ba2\u6237\u7aef\u4e0d\u77e5\u9053\u8bbf\u95ee\u7684\u662f\u4ee3\u7406\uff0c\u5bf9\u5916\u8868\u73b0\u4e3a\u76ee\u6807\u670d\u52a1\u5668\u3002</li> </ul> </li> <li>Nginx\u4f5c\u4e3a\u53cd\u5411\u4ee3\u7406\uff1a<ul> <li>\u5f3a\u5927\u7684\u57fa\u4e8e\u57df\u540d\u548cHTTP URL\u7684\u8def\u7531\u8f6c\u53d1\u529f\u80fd\u3002</li> <li>\u901a\u8fc7<code>nginx.conf</code>\u914d\u7f6e<code>worker_processes</code> (\u5de5\u4f5c\u8fdb\u7a0b\u6570), <code>worker_connections</code> (\u8fde\u63a5\u6570), <code>http</code>\u5757 (\u5305\u542b<code>server</code>\u548c<code>upstream</code>)\u3002</li> <li><code>server</code>\u5757\uff1a<code>listen</code> (\u76d1\u542c\u7aef\u53e3), <code>server_name</code> (\u865a\u62df\u4e3b\u673a\u540d), <code>location</code> (URL\u8def\u5f84\u5904\u7406\u89c4\u5219), <code>proxy_pass</code> (\u53cd\u5411\u4ee3\u7406\u76ee\u6807)\u3002</li> <li><code>upstream</code>\u5757\uff1a\u5b9a\u4e49\u670d\u52a1\u6c60\uff0c\u5305\u542b<code>server</code>\u5b9e\u4f8b\u5730\u5740\u3002</li> </ul> </li> <li>Nginx\u8d1f\u8f7d\u5747\u8861\u7b56\u7565\uff1a<ul> <li>\u8f6e\u8be2 (\u9ed8\u8ba4)\uff1a\u6309\u65f6\u95f4\u987a\u5e8f\u5206\u53d1\uff0c\u6545\u969c\u81ea\u52a8\u5254\u9664\u3002</li> <li>\u52a0\u6743\u8f6e\u8be2\uff1a\u6309\u6743\u91cd\u5206\u914d\u8bf7\u6c42\uff0c\u6743\u91cd\u9ad8\u66f4\u5bb9\u6613\u88ab\u8bbf\u95ee\u3002</li> <li>ip_hash\uff1a\u6839\u636e\u5ba2\u6237\u7aefIP\u54c8\u5e0c\uff0c\u786e\u4fdd\u540c\u4e00IP\u8bf7\u6c42\u8bbf\u95ee\u540c\u4e00\u5b9e\u4f8b (\u4e0d\u4fdd\u8bc1\u8d1f\u8f7d\u5747\u8861)\u3002</li> <li>least_conn\uff1a\u8f6c\u53d1\u7ed9\u8fde\u63a5\u6570\u6700\u5c11\u7684\u670d\u52a1\u5668 (\u9002\u7528\u4e8e\u8bf7\u6c42\u54cd\u5e94\u65f6\u95f4\u957f\uff0c\u5b9e\u73b0\u66f4\u597d\u8d1f\u8f7d\u5747\u8861)\u3002</li> <li>url_hash (\u7b2c\u4e09\u65b9)\uff1a\u5bf9URL\u54c8\u5e0c\uff0c\u63d0\u9ad8\u76f8\u540c\u8bf7\u6c42\u7f13\u5b58\u547d\u4e2d\u7387\u3002</li> <li>fair (\u7b2c\u4e09\u65b9)\uff1a\u6839\u636e\u54cd\u5e94\u65f6\u95f4\u3001\u5931\u8d25\u6570\u3001\u8bf7\u6c42\u91cf\u7efc\u5408\u9009\u62e9\u6700\u7a7a\u95f2\u670d\u52a1\u5668\u3002</li> </ul> </li> <li>Nginx\u4f5c\u4e3a\u4e03\u5c42\u8d1f\u8f7d\u5747\u8861\u5668\uff1a\u57fa\u4e8eHTTP\u534f\u8bae\uff08OSI\u7b2c\u4e03\u5c42\uff09\u3002</li> <li>Nginx\u5b9e\u65f6\u611f\u77e5\u4e1a\u52a1\u670d\u52a1\u5730\u5740\u53d8\u66f4\uff1a<ul> <li>\u95ee\u9898\uff1a\u4e1a\u52a1\u9891\u7e41\u8fed\u4ee3\u6269\u5bb9\u5bfc\u81f4<code>upstream</code>\u914d\u7f6e\u9891\u7e41\u53d8\u66f4\u3002</li> <li>\u89e3\u51b3\u65b9\u6848\uff1a<ul> <li><code>ngx_lua</code>\u6a21\u5757\uff1a\u5d4c\u5165Lua\u811a\u672c\u3002</li> <li><code>ngx_http_dyups_module</code>\u6a21\u5757\uff1aNginx\u65e0\u9700\u91cd\u542f\u70ed\u66f4\u65b0<code>upstream</code>\u914d\u7f6e\u3002</li> <li>\u6d41\u7a0b\uff1a\u5b9a\u671f\u4ece\u670d\u52a1\u6ce8\u518c\u4e2d\u5fc3\u83b7\u53d6\u6700\u65b0\u5730\u5740\u5217\u8868 -&gt; \u751f\u6210\u6700\u65b0<code>upstream</code>\u914d\u7f6e -&gt; \u901a\u8fc7<code>ngx_http_dyups_module</code>\u66f4\u65b0\u3002</li> </ul> </li> </ul> </li> <li>Nginx\u4f18\u52bf\uff1a<ul> <li>DNS\u6307\u5411Nginx\uff0c\u4e1a\u52a1\u670d\u52a1\u5668IP\u5207\u6362\u65e0\u9700\u914d\u7f6eDNS\u3002</li> <li>\u5b9e\u73b0\u5ba2\u6237\u7aef\u4e0e\u4e1a\u52a1\u670d\u52a1\u5668\u95f4\u7684\u8d1f\u8f7d\u5747\u8861\u3002</li> <li>\u5bf9\u5916\u53ea\u66b4\u9732\u4e00\u4e2a\u516c\u7f51IP\uff0c\u8282\u7ea6IP\u8d44\u6e90\u3002</li> <li>\u4fdd\u62a4\u4e1a\u52a1\u670d\u52a1\u5668\uff0c\u589e\u5f3a\u5b89\u5168\u6027\u3002</li> <li>\u589e\u5f3a\u7cfb\u7edf\u53ef\u6269\u5c55\u6027\uff0c\u51c6\u5b9e\u65f6\u751f\u6548\u3002</li> <li>\u63d0\u9ad8\u4e1a\u52a1\u670d\u52a1\u5668\u53ef\u7528\u6027\uff08\u5b9e\u4f8b\u6545\u969c\u81ea\u52a8\u8fc1\u79fb\uff09\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84/#lvs-linux-virtual-server","title":"LVS (Linux Virtual Server)","text":"<ul> <li>\u5b9a\u4e49\uff1aLinux\u865a\u62df\u670d\u52a1\u5668\u96c6\u7fa4\u7cfb\u7edf\uff0cLinux\u5185\u6838\u4e00\u90e8\u5206\uff0c\u8fd0\u884c\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u5c42\u9762\u3002</li> <li>LVS vs. Nginx\uff1a<ul> <li>Nginx\uff1aOSI\u4e03\u5c42\uff08\u5e94\u7528\u5c42\uff09\uff0c\u5f02\u6b65\u8f6c\u53d1\uff0c\u5f3a\u8c03\u201c\u4ee3\u7406\u201d\uff0c\u652f\u6301\u5931\u8d25\u8f6c\u79fb\uff0c\u529f\u80fd\u5f3a\u5927\u3002</li> <li>LVS\uff1aOSI\u56db\u5c42\uff08\u7f51\u7edc\u5c42\uff09\uff0c\u540c\u6b65\u8f6c\u53d1\uff0c\u5f3a\u8c03\u201c\u8f6c\u53d1\u201d\uff0c\u6027\u80fd\u66f4\u9ad8\uff08\u514d\u53bb\u5e94\u7528\u5c42\u89e3\u6790\uff09\u3002</li> </ul> </li> <li>\u5e38\u7528\u540d\u8bcd\uff1a<ul> <li>DS (Director Server)\uff1a\u56db\u5c42\u8d1f\u8f7d\u5747\u8861\u5668\u8282\u70b9 (LVS\u670d\u52a1\u5668)\u3002</li> <li>RS (Real Server)\uff1aDS\u8bf7\u6c42\u8f6c\u53d1\u76ee\u7684\u5730 (\u771f\u5b9e\u5de5\u4f5c\u670d\u52a1\u5668)\u3002</li> <li>VIP (Virtual Server IP)\uff1a\u5ba2\u6237\u7aef\u8bf7\u6c42\u76ee\u7684IP (DS\u7684\u516c\u7f51IP)\u3002</li> <li>DIP (Director Server IP)\uff1aDS\u4e0eRS\u901a\u4fe1IP (DS\u7684\u5185\u7f51IP)\u3002</li> <li>RIP (Real Server IP)\uff1a\u540e\u7aef\u670d\u52a1\u5668IP\u3002</li> <li>CIP (Client IP)\uff1a\u5ba2\u6237\u7aefIP\u3002</li> </ul> </li> <li>LVS\u8f6c\u53d1\u6a21\u5f0f\uff1a<ol> <li>NAT\u6a21\u5f0f (Network Address Translation)\uff1a<ul> <li>\u539f\u7406\uff1a\u4fee\u6539\u8bf7\u6c42\u62a5\u6587\u7684\u76ee\u6807IP/\u7aef\u53e3\u3002</li> <li>\u7279\u70b9\uff1a\u8bf7\u6c42/\u54cd\u5e94\u5747\u7ecf\u8fc7DS\u91cd\u5199\uff0cDS\u662fRS\u7f51\u5173\u3002</li> <li>\u6761\u4ef6\uff1aDS\u9700\u4e24\u5757\u7f51\u5361\uff0cDS\u4e0eRS\u540c\u5c40\u57df\u7f51\uff0cDS\u4e3a\u7f51\u5173\u3002</li> <li>\u7f3a\u70b9\uff1a\u54cd\u5e94\u6570\u636e\u5927\uff0cDS\u6613\u6210\u6027\u80fd\u74f6\u9888\u3002</li> </ul> </li> <li>FULLNAT\u6a21\u5f0f (Full NAT)\uff1a<ul> <li>\u539f\u7406\uff1a\u5728NAT\u57fa\u7840\u4e0a\u518d\u6b21\u8fdb\u884c\u6e90IP\u5730\u5740\u8f6c\u6362\uff08\u5c06CIP\u6539\u4e3aDIP\uff09\u3002</li> <li>\u7279\u70b9\uff1a\u4e0d\u8981\u6c42DS\u4e0eRS\u540c\u5c40\u57df\u7f51\u6216DS\u4e3a\u7f51\u5173\u3002</li> <li>\u7f3a\u70b9\uff1a\u8bf7\u6c42\u5230\u8fbeRS\u540e\u4e22\u5931\u5ba2\u6237\u7aefIP\u5730\u5740\u3002</li> <li>\u63a8\u8350\u6a21\u5f0f\uff1a\u7f51\u7edc\u73af\u5883\u9002\u5e94\u6027\u5f3a\u3002</li> </ul> </li> <li>TUN\u6a21\u5f0f (IP\u96a7\u9053\u6a21\u5f0f)\uff1a<ul> <li>\u539f\u7406\uff1aDS\u5c06\u8bf7\u6c42\u62a5\u6587\u5c01\u88c5\u5230\u65b0\u6570\u636e\u5305\uff0c\u76ee\u7684IP\u4e3aRS\u7684RIP\uff0c\u901a\u8fc7IP\u96a7\u9053\u53d1\u9001\u3002RS\u89e3\u5bc6\u539f\u6570\u636e\u5305\uff0c\u76f4\u63a5\u54cd\u5e94\u5ba2\u6237\u7aef\u3002</li> <li>\u7279\u70b9\uff1aDIP/RIP\u4e0d\u4e00\u5b9a\u540c\u7f51\u7edc\uff0cRS/DS\u7f51\u7edc\u9700\u652f\u6301IP\u96a7\u9053\u3002RS\u9700\u914d\u7f6eVIP\u7ed1\u5b9a\u5230lo\u7f51\u5361\u3002</li> <li>\u4f18\u70b9\uff1aDS\u53ea\u8f6c\u53d1\u8bf7\u6c42\uff0cRS\u76f4\u63a5\u54cd\u5e94\uff0c\u6027\u80fd\u9ad8\u4e8eNAT\u3002</li> </ul> </li> <li>DR\u6a21\u5f0f (Direct Routing)\uff1a<ul> <li>\u539f\u7406\uff1aDS\u6539\u5199\u8bf7\u6c42\u62a5\u6587\u7684MAC\u5730\u5740\u5c06\u8bf7\u6c42\u8f6c\u53d1\u5230RS\uff0cRS\u76f4\u63a5\u901a\u8fc7\u7f51\u5173\u8fd4\u56de\u54cd\u5e94\u7ed9\u5ba2\u6237\u7aef\u3002</li> <li>\u7279\u70b9\uff1aDS/RS\u9700\u540c\u7269\u7406\u7f51\u7edc\u3002RS\u9700\u914d\u7f6eVIP\u7ed1\u5b9a\u5230lo\u7f51\u5361\u3002</li> <li>\u4f18\u70b9\uff1a\u6027\u80fd\u6700\u597d\uff08\u4e0d\u6d89\u53caIP\u96a7\u9053\u52a0\u5bc6/\u89e3\u5bc6\uff09\u3002</li> </ul> </li> </ol> </li> <li>\u6a21\u5f0f\u4f18\u52a3\u52bf\u603b\u7ed3\uff1a<ul> <li>NAT\uff1aRS\u65e0\u9700VIP\uff0cDS\u4f5c\u7f51\u5173\uff0c\u6027\u80fd\u4e00\u822c\u3002</li> <li>FULLNAT\uff1aRS\u65e0\u9700VIP\uff0c\u7f51\u7edc\u8981\u6c42\u4f4e\uff0c\u4e22\u5931\u5ba2\u6237\u7aefIP\uff0c\u6027\u80fd\u4e00\u822c\u3002</li> <li>TUN\uff1a\u6027\u80fd\u597d\uff0c\u670d\u52a1\u5668\u9700\u652f\u6301IP\u96a7\u9053\uff0cRS\u9700\u914d\u7f6eVIP\u3002</li> <li>DR\uff1a\u6027\u80fd\u597d\uff0cDS/RS\u540c\u7269\u7406\u7f51\u7edc\uff0cRS\u9700\u914d\u7f6eVIP\u3002</li> </ul> </li> <li>\u9009\u62e9\uff1a\u5f3a\u7f51\u7edc\u9002\u5e94\u6027\u9009FULLNAT\uff0c\u9ad8\u6027\u80fd\u9009DR\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84/#lvsnginx","title":"LVS+Nginx\u63a5\u5165\u5c42\u67b6\u6784","text":"<ul> <li>\u7ec4\u5408\u4f18\u52bf\uff1a<ul> <li>LVS\u6027\u80fd\u9ad8\uff0c\u4fbf\u4e8eNginx\u96c6\u7fa4\u5316\uff0c\u63d0\u9ad8Nginx\u53ef\u6269\u5c55\u6027 (LVS\u4f5c\u4e3aNginx\u7684\u56db\u5c42\u8d1f\u8f7d\u5747\u8861)\u3002</li> <li>Nginx\u529f\u80fd\u5f3a\u5927\uff0c\u4f5c\u4e3a\u4e1a\u52a1HTTP\u670d\u52a1\u5668\u7684\u4e03\u5c42\u8d1f\u8f7d\u5747\u8861\u5668\uff0c\u63d0\u9ad8\u4e1a\u52a1\u670d\u52a1\u9ad8\u53ef\u7528/\u53ef\u6269\u5c55\u6027\u3002</li> </ul> </li> <li>\u5355\u70b9\u95ee\u9898\uff1aLVS\u662f\u5355\u70b9\u6545\u969c\u3002</li> <li>LVS\u9ad8\u53ef\u7528\u65b9\u6848\uff1aKeepalived + VIP (\u4e3b\u4ece\u70ed\u5907)\u3002<ul> <li>Keepalived\uff1a\u4e3b\u8282\u70b9A\u548c\u4ece\u8282\u70b9B\u3002\u4e3b\u8282\u70b9\u901a\u8fc7ARP\u544a\u77e5VIP\u5bf9\u5e94\u7684MAC\u4e3aMAC-A\u3002</li> <li>\u6545\u969c\u5207\u6362\uff1a\u4ece\u8282\u70b9B\u76d1\u542c\u5230\u4e3b\u8282\u70b9A\u5b95\u673a\u540e\uff0c\u4ee3\u66ff\u4e3b\u8282\u70b9A\u56de\u590dARP\uff0c\u544a\u77e5VIP\u5bf9\u5e94\u7684MAC\u4e3aMAC-B\uff0c\u6d41\u91cf\u8f6c\u5411B\u3002</li> </ul> </li> <li>LVS\u6027\u80fd\u74f6\u9888\uff1a\u5355\u53f0LVS\u6709\u4e0a\u9650\u3002</li> <li>LVS\u6c34\u5e73\u6269\u5c55\uff1a\u591a\u53f0LVS\u5bf9\u5916\u63d0\u4f9b\u670d\u52a1\uff0c\u914d\u7f6eN\u4e2aVIP\uff0c\u5ba2\u6237\u7aef\u4f9d\u8d56DNS\u8f6e\u8be2\u51b3\u5b9a\u8bbf\u95ee\u54ea\u53f0LVS\u3002</li> <li>\u6700\u7ec8\u5b8c\u5907\u67b6\u6784\u7279\u70b9\uff1a<ul> <li>DNS\u8f6e\u8be2\u6269\u5c55LVS\u6027\u80fd\u3002</li> <li>Keepalived\u4fdd\u8bc1LVS\u9ad8\u53ef\u7528\u3002</li> <li>LVS\u6269\u5c55Nginx\u6027\u80fd\u3002</li> <li>Nginx\u4f5c\u4e3a\u4e03\u5c42\u8d1f\u8f7d\u5747\u8861\u5668\uff0c\u63d0\u9ad8\u4e1a\u52a1HTTP\u670d\u52a1\u7684\u9ad8\u53ef\u7528/\u53ef\u6269\u5c55\u6027\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84/#_3","title":"\u670d\u52a1\u53d1\u73b0","text":"<ul> <li>\u5b9a\u4e49\uff1a\u4e3a\u6bcf\u4e2a\u670d\u52a1\u63d0\u4f9b\u53ef\u4ee5\u81ea\u52a8\u53d1\u73b0\u4e0b\u6e38\u670d\u52a1\u5730\u5740\u5217\u8868\u7684\u80fd\u529b\u3002</li> <li>\u670d\u52a1\u6ce8\u518c\u4e2d\u5fc3\uff1a\u7ba1\u7406\u6bcf\u4e2a\u670d\u52a1\u7684\u5730\u5740\u5217\u8868 (\u6ce8\u518c) \u548c\u5c06\u67d0\u670d\u52a1\u7684\u5730\u5740\u544a\u77e5\u8c03\u7528\u8005 (\u53d1\u73b0)\u3002</li> <li>\u6ce8\u518c\u4e0e\u53d1\u73b0\u6d41\u7a0b\uff1a<ol> <li>\u670d\u52a1\u5b9e\u4f8b\u542f\u52a8\u540e\uff0c\u5c06\u5730\u5740\u4fe1\u606f\u6ce8\u518c\u5230\u670d\u52a1\u6ce8\u518c\u4e2d\u5fc3\u3002</li> <li>\u8c03\u7528\u8005\u5411\u670d\u52a1\u6ce8\u518c\u4e2d\u5fc3\u67e5\u8be2\u670d\u52a1\u5730\u5740\u3002</li> <li>\u670d\u52a1\u6ce8\u518c\u4e2d\u5fc3\u8fd4\u56de\u5730\u5740\u5217\u8868\u3002</li> <li>\u8c03\u7528\u8005\u5411\u4efb\u610f\u5b9e\u4f8b\u53d1\u8d77\u8c03\u7528\u3002</li> </ol> </li> <li>\u901a\u4fe1\u65b9\u5f0f\uff1a\u4e3b\u52a8\u67e5\u8be2 \u6216 \u8ba2\u9605\u63a8\u9001 (\u670d\u52a1\u6ce8\u518c\u4e2d\u5fc3\u4e3b\u52a8\u63a8\u9001\u6700\u65b0\u5730\u5740\u5217\u8868)\u3002</li> <li>\u4e1a\u754c\u7ec4\u4ef6\uff1aSpring Cloud Eureka, CNCF CoreDNS\u3002</li> <li>\u53ef\u7528\u5730\u5740\u7ba1\u7406\uff1a<ul> <li>\u670d\u52a1\u5b9e\u4f8b\u542f\u52a8\u6ce8\u518c\uff0c\u9000\u51fa\u6ce8\u9500\u3002</li> <li>\u63a2\u6d3b\u80fd\u529b\uff08\u5173\u952e\uff09\uff1a<ul> <li>\u4e3b\u52a8\u63a2\u6d3b\uff1a\u670d\u52a1\u6ce8\u518c\u4e2d\u5fc3\u5468\u671f\u6027\u63a2\u6d4b\uff08\u6548\u7387\u4f4e\uff0c\u4e0d\u9002\u5408\u5927\u89c4\u6a21\uff09\u3002</li> <li>\u5fc3\u8df3\u63a2\u6d3b (\u63a8\u8350)\uff1a\u670d\u52a1\u5b9e\u4f8b\u5b9a\u671f\u53d1\u9001\u5fc3\u8df3\u5305\uff0c\u670d\u52a1\u6ce8\u518c\u4e2d\u5fc3\u66f4\u65b0\u6700\u8fd1\u5fc3\u8df3\u65f6\u95f4\uff0c\u8d85\u65f6\u5219\u8ba4\u4e3a\u4e0d\u53ef\u7528\u5e76\u6458\u9664\u3002</li> </ul> </li> <li>\u6458\u9664\u4fdd\u62a4\u7b56\u7565\uff1a\u82e5\u5df2\u6458\u9664\u5730\u5740\u6570\u8d85\u9608\u503c\uff08\u598230%\uff09\uff0c\u505c\u6b62\u6458\u9664\u5e76\u62a5\u8b66\uff0c\u9632\u6b62\u8fc7\u5ea6\u6458\u9664\u5bfc\u81f4\u670d\u52a1\u4e0d\u53ef\u7528\u3002</li> </ul> </li> <li>\u5730\u5740\u53d8\u66f4\u63a8\u9001\uff1a<ul> <li>\u63a8\u9001\u98ce\u66b4\u95ee\u9898\uff1a\u5927\u89c4\u6a21\u63a8\u9001\u4f1a\u5360\u7528\u5927\u91cf\u7f51\u7edc\u5e26\u5bbd\u3002</li> <li>\u89e3\u51b3\u65b9\u6848\uff1a<ul> <li>\u63a8\u9001\u589e\u91cf\u6570\u636e\u800c\u975e\u5168\u91cf\u3002</li> <li>\u670d\u52a1\u6ce8\u518c\u4e2d\u5fc3\u90e8\u7f72\u5927\u91cf\u5b9e\u4f8b\uff0c\u5206\u644a\u63a8\u9001\u538b\u529b\u3002</li> <li>\u63a8\u62c9\u7ed3\u5408\uff1a\u5c11\u91cf\u8282\u70b9\u63a8\u9001\uff0c\u5176\u4ed6\u8282\u70b9\u5468\u671f\u6027\u62c9\u53d6\u3002</li> </ul> </li> </ul> </li> <li>\u670d\u52a1\u53d1\u73b0\u7684\u4ef7\u503c\uff1a\u8c03\u7528\u8005\u65e0\u9700\u5173\u5fc3\u88ab\u8c03\u7528\u8005\u5730\u5740\uff0c\u670d\u52a1\u53ef\u5f39\u6027\u4f38\u7f29\uff0c\u771f\u6b63\u4e3a\u5fae\u670d\u52a1\u5e26\u6765\u5f39\u6027\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84/#rpc-remote-procedure-call","title":"RPC\u670d\u52a1 (Remote Procedure Call)","text":"<ul> <li>\u5b9a\u4f4d\uff1a<ul> <li>HTTP\u670d\u52a1\uff1a\u670d\u52a1\u4e8e\u540e\u53f0\u5916\u90e8\uff0c\u4e0e\u7528\u6237\u8bf7\u6c42\u4ea4\u4e92\uff08\u6821\u9a8c\u3001\u6253\u5305\u54cd\u5e94\uff09\uff0c\u66f4\u50cf\u4e1a\u52a1\u670d\u52a1\u5c42\u7684\u201c\u7f51\u5173\u201d\u3002</li> <li>RPC\u670d\u52a1\uff1a\u670d\u52a1\u4e8e\u540e\u53f0\u5185\u90e8\uff0c\u5b9e\u73b0\u6838\u5fc3\u4e1a\u52a1\u903b\u8f91\uff0c\u5f3a\u8c03\u201c\u5fae\u670d\u52a1\u201d\u3002</li> </ul> </li> <li>RPC\u76ee\u6807\uff1a\u5c4f\u853d\u7f51\u7edc\u7f16\u7a0b\u7ec6\u8282\uff0c\u50cf\u8c03\u7528\u672c\u5730\u65b9\u6cd5\u4e00\u6837\u8c03\u7528\u8fdc\u7a0b\u65b9\u6cd5\u3002</li> <li>RPC\u901a\u4fe1\u6d41\u7a0b\uff1a<ol> <li>\u5e8f\u5217\u5316\uff1a\u65b9\u6cd5\u8f93\u5165\u53c2\u6570\u5bf9\u8c61\u8f6c\u5316\u4e3a\u4e8c\u8fdb\u5236\u6570\u636e\u3002</li> <li>\u7f16\u7801\uff1a\u4e8c\u8fdb\u5236\u6570\u636e\u7f16\u7801\u4e3a\u7ea6\u5b9a\u534f\u8bae\u683c\u5f0f\u7684\u6570\u636e\u5305\u3002</li> <li>\u7f51\u7edc\u53d1\u9001\u3002</li> <li>\u89e3\u7801\uff1a\u88ab\u8c03\u7528\u65b9\u5c06\u6570\u636e\u5305\u89e3\u7801\u3002</li> <li>\u53cd\u5e8f\u5217\u5316\uff1a\u5f97\u5230\u65b9\u6cd5\u540d\u548c\u8f93\u5165\u53c2\u6570\u3002</li> <li>\u6267\u884c\u65b9\u6cd5\u3002</li> <li>\u7ed3\u679c\u8fd4\u56de\uff1a\u540c\u6837\u6d41\u7a0b\u8fd4\u56de\u7ed9\u8c03\u7528\u65b9\u3002</li> </ol> </li> <li>RPC\u6846\u67b6\uff1agRPC, Thrift\u7b49\uff0c\u53ef\u5229\u7528\u534f\u8bae\u5b9a\u4e49\u6587\u4ef6\u751f\u6210\u811a\u624b\u67b6\u4ee3\u7801\u3002</li> <li>RPC\u4e0eHTTP\u5173\u7cfb\uff1aRPC\u662f\u4e00\u79cd\u8bbe\u8ba1\uff0c\u4e0eHTTP\u4e0d\u662f\u5bf9\u7acb\u6982\u5ff5\uff0cRPC\u5e95\u5c42\u7f51\u7edc\u901a\u4fe1\u53ef\u4f7f\u7528TCP\u6216HTTP\u5b9e\u73b0\u3002</li> <li>HTTP\u670d\u52a1\u8c03\u7528RPC\u670d\u52a1\uff1aHTTP\u670d\u52a1\u901a\u8fc7\u670d\u52a1\u53d1\u73b0\u83b7\u53d6RPC\u670d\u52a1\u5730\u5740\uff0c\u518d\u901a\u8fc7RPC\u534f\u8bae\u8fdb\u884c\u901a\u4fe1\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84/#mysql","title":"\u5b58\u50a8\u5c42\u6280\u672f\uff1aMySQL\u4f18\u52bf","text":"<ul> <li>\u5173\u7cfb\u578b\u6570\u636e\u5e93\uff1a\u91c7\u7528\u5173\u7cfb\u6a21\u578b\u7ec4\u7ec7\u6570\u636e\uff0c\u4ee5\u884c\u548c\u5217\u5f62\u5f0f\u5b58\u50a8\u6570\u636e\uff08\u4e8c\u7ef4\u8868\uff09\uff0c\u4f7f\u7528SQL\u64cd\u4f5c\u6570\u636e\u3002<ul> <li>\u4e3b\u952e\uff1a\u552f\u4e00\u6807\u8bc6\u884c\u8bb0\u5f55\u7684\u5c5e\u6027\u7ec4\u3002</li> </ul> </li> <li>MySQL\u4f18\u52bf\uff1a<ul> <li>\u6613\u7528\u3001\u529f\u80fd\u5f3a\u5927\uff08\u4e8b\u52a1\u3001\u89e6\u53d1\u5668\u3001\u5b58\u50a8\u8fc7\u7a0b\uff09\uff0c\u7ba1\u7406\u5de5\u5177\u591a\u3002</li> <li>\u652f\u6301\u5343\u4e07\u7ea7\u6570\u636e\u8bb0\u5f55\u7684\u5927\u578b\u6570\u636e\u5e93\u3002</li> <li>GPL\u5f00\u6e90\u534f\u8bae\uff0c\u53ef\u81ea\u7531\u5b9a\u5236\u3002</li> <li>InnoDB\u4e8b\u52a1\u6027\u5b58\u50a8\u5f15\u64ce\u7b26\u5408ACID\u6a21\u578b\uff0c\u4fdd\u8bc1\u5b8c\u6574\u53ef\u9760\u5b58\u50a8\u3002</li> </ul> </li> <li>\u9ad8\u53ef\u7528\u67b6\u67841\uff1a\u4e3b\u4ece\u6a21\u5f0f<ul> <li>\u7ec4\u6210\uff1a\u4e00\u53f0Master\uff08\u5904\u7406\u5199\u8bf7\u6c42\uff09\uff0c\u82e5\u5e72Slave\uff08\u4ece\u5e93\uff09\u3002</li> <li>\u6570\u636e\u4e00\u81f4\u6027\uff1aMaster\u4e0eSlave\u901a\u8fc7\u4e3b\u4ece\u590d\u5236\u6280\u672f\u4fdd\u6301\u3002</li> <li>\u9ad8\u53ef\u7528\uff1aMaster\u6545\u969c\u65f6\uff0cSlave\u63d0\u5347\u4e3aMaster\u3002</li> <li>\u4e3b\u4ece\u590d\u5236\u539f\u7406\uff1a<ol> <li>Master\u6570\u636e\u53d8\u66f4\u5199\u5165binlog (\u4e8c\u8fdb\u5236\u65e5\u5fd7\u6587\u4ef6)\u3002</li> <li>Slave\u542f\u52a8I/O\u7ebf\u7a0b\u4e0eMaster\u5efa\u7acb\u8fde\u63a5\uff0c\u8bfb\u53d6binlog\u3002</li> <li>I/O\u7ebf\u7a0b\u5c06\u65e5\u5fd7\u4fdd\u5b58\u5230relay log (\u4e2d\u7ee7\u65e5\u5fd7\u6587\u4ef6)\u3002</li> <li>Slave\u542f\u52a8SQL\u7ebf\u7a0b\u4ecerelay log\u83b7\u53d6\u65e5\u5fd7\uff0c\u672c\u5730\u91cd\u65b0\u6267\u884cSQL\u56de\u653e\u6570\u636e\u3002</li> </ol> </li> <li>\u5f02\u6b65\u590d\u5236\uff1aMaster\u63d0\u4ea4\u4e8b\u52a1\u4e0d\u7b49\u5f85Slave\u786e\u8ba4\uff0c\u53ef\u80fd\u5bfc\u81f4\u6570\u636e\u4e22\u5931\u3002</li> <li>\u534a\u540c\u6b65\u590d\u5236 (MySQL 5.5+)\uff1aMaster\u63d0\u4ea4\u4e8b\u52a1\u524d\u7b49\u5f85\u81f3\u5c11\u4e00\u4e2aSlave\u786e\u8ba4\u63a5\u6536binlog (\u5199\u5165relay log)\uff0c\u51cf\u5c11\u6570\u636e\u4e22\u5931\u98ce\u9669\uff0c\u4f46\u5f71\u54cd\u5199\u6027\u80fd\u3002</li> <li>\u590d\u5236\u98ce\u66b4\uff1a\u8fc7\u591aSlave\u76f4\u63a5\u590d\u5236Master\u5bfc\u81f4\u538b\u529b\u500d\u589e\uff0c\u53ef\u91c7\u7528\u7ea7\u8054\u590d\u5236 (Slave\u5411Slave\u590d\u5236)\u3002</li> </ul> </li> <li>\u9ad8\u53ef\u7528\u67b6\u67842\uff1aMHA (Master High Availability)<ul> <li>\u76ee\u6807\uff1a10-30s\u5185\u5b8c\u6210MySQL\u4e3b\u4ece\u96c6\u7fa4\u81ea\u52a8\u6545\u969c\u68c0\u6d4b\u548c\u5207\u6362\uff0c\u6700\u5927\u7a0b\u5ea6\u4fdd\u8bc1\u6570\u636e\u4e00\u81f4\u6027\u3002</li> <li>\u7ec4\u6210\uff1a<ul> <li>MHA Manager (\u7ba1\u7406\u8282\u70b9)\uff1a\u51b3\u7b56\u5c42\uff0c\u8d1f\u8d23\u6545\u969c\u68c0\u6d4b\u3001\u5207\u6362\u3002</li> <li>MHA Node (\u6570\u636e\u8282\u70b9)\uff1a\u90e8\u7f72\u5728\u6bcf\u53f0MySQL\u670d\u52a1\u5668\u4e0a\uff0c\u4fee\u590d\u4e3b\u4ece\u6570\u636e\u5dee\u5f02\u3002</li> </ul> </li> <li>\u6545\u969c\u8f6c\u79fb\u6d41\u7a0b\uff1a<ol> <li>MHA Manager\u5468\u671f\u63a2\u6d4bMaster\u5fc3\u8df3\uff0c\u5931\u8054\u5219\u8ba4\u4e3a\u5b95\u673a\u3002</li> <li>MHA Manager\u5224\u65ad\u54ea\u4e2aSlave\u7684binlog\u6700\u63a5\u8fd1Master\u3002</li> <li>MHA Node\u5c1d\u8bd5SSH\u8bbf\u95eeMaster\uff0c\u82e5\u53ef\u8fbe\u5219\u83b7\u53d6binlog\uff0c\u5bf9\u6bd4Slave\u6570\u636e\u5e76\u8865\u9f50\u5dee\u5f02\uff1b\u82e5\u4e0d\u53ef\u8fbe\u5219\u5bf9\u6bd4Slave\u95f4relay log\u5dee\u5f02\u5e76\u8865\u9f50\u3002</li> <li>MHA Manager\u6784\u5efa\u65b0\u4e3b\u4ece\u5173\u7cfb\uff0c\u5907\u9009Slave\u63d0\u5347\u4e3aMaster\u3002</li> </ol> </li> <li>\u4f18\u52bf\uff1a\u4e0e\u534a\u540c\u6b65\u590d\u5236\u7ed3\u5408\u53ef\u5927\u5e45\u964d\u4f4e\u6570\u636e\u4e22\u5931\u98ce\u9669\u3002</li> </ul> </li> <li>\u9ad8\u53ef\u7528\u67b6\u67843\uff1aMMM (Multi-Master Replication Manager for MySQL)<ul> <li>\u76ee\u6807\uff1aMySQL\u53cc\u4e3b\u6545\u969c\u5207\u6362\u548c\u7ba1\u7406\u3002</li> <li>\u7ec4\u6210\uff1aMaster 1 (\u5199\u8bf7\u6c42)\uff0cMaster 2 (\u5907\u7528\uff0c\u4e0eMaster 1\u4e92\u590d\u5236\uff0c\u4e00\u822c\u534a\u540c\u6b65)\uff0c\u82e5\u5e72Slave (\u5f02\u6b65\u590d\u5236Master 1)\uff0cmmm-monitor (\u68c0\u6d4b\u3001\u51b3\u7b56)\uff0cmmm-agent (\u8282\u70b9\u4ee3\u7406)\uff0cwrite vip (\u5bf9\u5916\u5199IP\uff0c\u7ed1\u5b9a\u5176\u4e2d\u4e00\u4e2aMaster)\uff0cread vip (\u5bf9\u5916\u8bfbIP\uff0c\u7ed1\u5b9aSlave)\u3002</li> <li>\u6545\u969c\u8f6c\u79fb\u6d41\u7a0b\uff1aagent/monitor\u68c0\u6d4bMaster 1\u5b95\u673a -&gt; monitor\u8981\u6c42Master 1\u79fb\u9664write vip -&gt; monitor\u8981\u6c42Master 2\u7ed1\u5b9awrite vip\u6210\u4e3aMaster -&gt; monitor\u8981\u6c42Slave\u5411Master 2\u590d\u5236\u6570\u636e\u3002</li> <li>\u7f3a\u70b9\uff1a\u8f83\u53e4\u8001\uff0c\u4e0d\u652f\u6301MySQL GTID\uff0c\u793e\u533a\u4e0d\u6d3b\u8dc3\uff0c\u5904\u4e8e\u65e0\u4eba\u7ef4\u62a4\u72b6\u6001\u3002</li> </ul> </li> <li>\u9ad8\u53ef\u7528\u67b6\u67844\uff1aMGR (MySQL Group Replication)<ul> <li>\u7248\u672c\uff1aMySQL 5.7.17+\u3002</li> <li>\u7279\u6027\uff1a<ul> <li>\u4e00\u81f4\u6027\u9ad8\uff1a\u57fa\u4e8e\u5206\u5e03\u5f0f\u5171\u8bc6\u7b97\u6cd5Paxos\uff0c\u4fdd\u8bc1\u591a\u8282\u70b9\u6570\u636e\u4e00\u81f4\u6027\u3002</li> <li>\u5bb9\u9519\u6027\u9ad8\uff1a\u53ea\u8981\u4e0d\u8d85\u8fc7\u4e00\u534a\u8282\u70b9\u5b95\u673a\uff0c\u5373\u53ef\u5bf9\u5916\u670d\u52a1\u3002</li> <li>\u7075\u6d3b\u6027\u5f3a\uff1a\u652f\u6301\u5355\u4e3b\u6a21\u5f0f\uff08\u81ea\u52a8\u9009\u4e3b\uff09\u548c\u591a\u4e3b\u6a21\u5f0f\uff08\u6bcf\u4e2a\u8282\u70b9\u53ef\u5904\u7406\u5199\u8bf7\u6c42\uff09\u3002</li> </ul> </li> <li>\u7ec4\u6210\uff1a\u81f3\u5c113\u4e2aMySQL\u8282\u70b9\u7ec4\u6210\u590d\u5236\u7ec4\u3002\u4e8b\u52a1\u63d0\u4ea4\u9700\u8d85\u8fc7\u4e00\u534a\u8282\u70b9\u51b3\u8bae\u901a\u8fc7\u3002</li> <li>\u591a\u4e3b\u6a21\u5f0f\uff1a\u5199\u8bf7\u6c42\u9ad8\u5e76\u53d1\u573a\u666f\u6613\u4ea7\u751f\u4e8b\u52a1\u51b2\u7a81\uff0c\u5bfc\u81f4\u5927\u91cf\u56de\u6eda\u3002\u5b98\u65b9\u63a8\u8350\u5355\u4e3b\u6a21\u5f0f\u3002</li> <li>\u5355\u4e3b\u6a21\u5f0f\uff1aMGR\u81ea\u52a8\u9009Master\uff0c Master\u6545\u969c\u65f6\u81ea\u52a8\u6839\u636e\u6743\u91cd/ID\u9009\u4e3b\u3002</li> <li>\u4f18\u52bf\uff1a\u5f3a\u4e00\u81f4\u6027\uff08\u6570\u636e\u4e0d\u4e22\u5931\uff09\uff0c\u9ad8\u5bb9\u9519\u6027\u3002</li> <li>\u7f3a\u70b9\uff1a\u6bcf\u4e2a\u5199\u8bf7\u6c42\u6d89\u53ca\u4e0e\u590d\u5236\u7ec4\u5185\u591a\u6570\u8282\u70b9\u901a\u4fe1\uff0c\u5199\u6027\u80fd\u4e0d\u53ca\u5f02\u6b65/\u534a\u540c\u6b65\u590d\u5236\u3002\u9002\u5408\u9ad8\u4e00\u81f4\u6027\u8981\u6c42\u3001\u5199\u8bf7\u6c42\u91cf\u4e0d\u5927\u7684\u573a\u666f\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84/#redis","title":"\u5b58\u50a8\u5c42\u6280\u672f\uff1aRedis","text":"<ul> <li>Redis\u7279\u6027\uff1a<ul> <li>\u57fa\u4e8e\u5185\u5b58\uff0c\u6027\u80fd\u9ad8\u3002</li> <li>\u652f\u6301\u4e30\u5bcc\u6570\u636e\u7c7b\u578b\uff08String, List, Hash, Set, ZSet\uff09\u3002</li> <li>\u652f\u6301\u5206\u5e03\u5f0f\uff08\u4e3b\u4ece\u3001\u54e8\u5175\u3001\u96c6\u7fa4\uff09\uff0c\u53ef\u65e0\u9650\u6269\u5c55\u3002</li> <li>\u5355\u7ebf\u7a0b\u4e8b\u4ef6\u9a71\u52a8\uff0c\u6570\u636e\u64cd\u4f5c\u539f\u5b50\u6027\u3002</li> </ul> </li> <li>\u5e94\u7528\u573a\u666f\uff1a\u7f13\u5b58\u7cfb\u7edf\u3001\u8ba1\u6570\u5668\u3001\u9650\u6d41\u3001\u6392\u884c\u699c\u3001\u793e\u4ea4\u7f51\u7edc\u7b49\u3002</li> <li>\u9ad8\u53ef\u7528\u67b6\u67841\uff1a\u4e3b\u4ece\u6a21\u5f0f<ul> <li>\u7ec4\u6210\uff1a1 Master + \u82e5\u5e72 Slave\u3002</li> <li>\u590d\u5236\u6d41\u7a0b\uff1a<ol> <li>Slave\u8fde\u63a5Master\uff0c\u53d1\u9001PSYNC\u547d\u4ee4\u3002</li> <li>Master\u6267\u884cBGSAVE\u751f\u6210RDB\u5feb\u7167\uff0c\u5e76\u521b\u5efa\u7f13\u51b2\u533a\u8bb0\u5f55\u6570\u636e\u53d8\u66f4\u547d\u4ee4\u3002</li> <li>Master\u53d1\u9001RDB\u5feb\u7167\u7ed9Slave\u3002</li> <li>Slave\u52a0\u8f7dRDB\u5230\u5185\u5b58\uff0c\u63a5\u6536Master\u6570\u636e\u53d8\u66f4\u547d\u4ee4\u3002</li> <li>Master\u53d1\u9001\u7f13\u51b2\u533a\u4e2d\u8bb0\u5f55\u7684\u53d8\u66f4\u547d\u4ee4\u3002</li> <li>Slave\u6267\u884c\u547d\u4ee4\uff0c\u4fdd\u6301\u6570\u636e\u4e00\u81f4\u3002</li> </ol> </li> <li>\u95ee\u9898\uff1aMaster\u5411\u8fc7\u591aSlave\u590d\u5236\u6570\u636e\u4f1a\u5bfc\u81f4\u201c\u590d\u5236\u98ce\u66b4\u201d\u3002</li> </ul> </li> <li>\u9ad8\u53ef\u7528\u67b6\u67842\uff1a\u54e8\u5175\u6a21\u5f0f (Sentinel)<ul> <li>\u76ee\u6807\uff1aMaster\u5b95\u673a\u540e\u81ea\u52a8\u7ade\u9009\u65b0Master\uff0c\u5b9e\u73b0\u81ea\u52a8\u4e3b\u4ece\u5207\u6362\u3002</li> <li>\u7ec4\u6210\uff1a\u4e3b\u4ece\u6a21\u5f0f\u57fa\u7840 + \u82e5\u5e72Sentinel\u670d\u52a1\u5668\u3002</li> <li>Sentinel\u89d2\u8272\uff1a\u76d1\u63a7Master/Slave\u5fc3\u8df3\u3002\u5f53\u8d85\u8fc7N\u4e2aSentinel\u8282\u70b9\u8ba4\u4e3aMaster\u5b95\u673a\uff0c\u5219\u534f\u5546\u9009\u4e3eSlave\u4e3a\u65b0Master\u3002</li> <li>\u5ba2\u6237\u7aef\u8bbf\u95ee\uff1a\u5148\u8bbf\u95eeSentinel\u96c6\u7fa4\u83b7\u53d6Master\u5730\u5740\uff0cMaster\u6545\u969c\u65f6\u4eceSentinel\u83b7\u53d6\u65b0Master\u5730\u5740\u3002</li> <li>\u4f18\u52bf\uff1a\u65e0\u9700\u4eba\u5de5\u5e72\u9884\u4e3b\u4ece\u5207\u6362\uff0c\u5ba2\u6237\u7aef\u81ea\u52a8\u83b7\u53d6\u65b0Master\u5730\u5740\u3002</li> </ul> </li> <li>\u9ad8\u53ef\u7528\u67b6\u67843\uff1a\u96c6\u7fa4\u6a21\u5f0f (Redis Cluster)<ul> <li>\u76ee\u6807\uff1a\u5206\u5e03\u5f0f\u5b58\u50a8\uff0c\u89e3\u51b3\u5355\u4e2aMaster\u5185\u5b58/QPS\u9650\u5236\u3002</li> <li>\u7ec4\u6210\uff1a\u591a\u4e2aRedis\u8282\u70b9\uff08Master + \u82e5\u5e72 Slave\u7ec4\u6210\u8282\u70b9\u7ec4\uff0c\u4ee3\u8868\u4e00\u4e2a\u6570\u636e\u5206\u7247\uff09\u3002</li> <li>\u8981\u6c42\uff1a\u81f3\u5c113\u4e2aMaster\uff0c\u6bcf\u4e2aMaster\u81f3\u5c111\u4e2aSlave\u3002\u8282\u70b9\u95f4\u53ef\u76f8\u4e92\u901a\u4fe1\u3002</li> <li>\u6570\u636e\u5206\u7247\uff1a\u57fa\u4e8e\u54c8\u5e0c\u69fd (Hash Slot)\uff0c\u517116384\u4e2a\u69fd\u4f4d\uff0cMaster\u74dc\u5206\u3002<ul> <li>\u8ba1\u7b97\u516c\u5f0f\uff1a<code>slot = CRC16(Key) mod 16384</code>\u3002</li> </ul> </li> <li>\u5ba2\u6237\u7aef\u8bbf\u95ee\u6d41\u7a0b\uff1a<ol> <li>\u5ba2\u6237\u7aef\u8fde\u63a5\u4efb\u4e00\u8282\u70b9\uff0c\u83b7\u53d6\u69fd\u4f4d\u4e0eMaster\u6620\u5c04\u5173\u7cfb\u5e76\u7f13\u5b58\u3002</li> <li>\u8bfb/\u5199\u6570\u636e\u65f6\uff0c\u6839\u636eKey\u8ba1\u7b97\u69fd\u4f4d\u3002</li> <li>\u6839\u636e\u69fd\u4f4d\u5728\u672c\u5730\u7f13\u5b58\u5b9a\u4f4dMaster\u5730\u5740\uff0c\u53d1\u9001\u8bf7\u6c42\u3002</li> </ol> </li> <li>Gossip\u534f\u8bae\uff1a\u7528\u4e8e\u96c6\u7fa4\u5143\u4fe1\u606f\uff08\u8282\u70b9\u52a0\u5165\u3001\u6269\u7f29\u5bb9\u3001\u6545\u969c\u8f6c\u79fb\uff09\u7684\u7075\u6d3b\u81ea\u52a8\u53d8\u66f4\uff0c\u6700\u7ec8\u4e00\u81f4\u6027\u534f\u8bae\u3002<ul> <li>\u6d88\u606f\u7c7b\u578b\uff1ameet, ping, pong, fail\u3002</li> <li>\u8282\u70b9\u6545\u969c\u8f6c\u79fb\uff1a<ul> <li>\u4e3b\u89c2\u4e0b\u7ebf\uff1a\u8282\u70b9A\u8ba4\u4e3a\u8282\u70b9B\u4e0b\u7ebf\u3002</li> <li>\u5ba2\u89c2\u4e0b\u7ebf\uff1a\u96c6\u7fa4\u4e2d\u8d85\u8fc7\u4e00\u534a\u8282\u70b9\u8ba4\u4e3aB\u4e3b\u89c2\u4e0b\u7ebf\u3002</li> <li>B\u5ba2\u89c2\u4e0b\u7ebf\u540e\uff0c\u5176\u4ece\u8282\u70b9\u63a5\u7ba1\u69fd\u4f4d\uff0c\u63d0\u5347\u4e3aMaster\u3002</li> </ul> </li> </ul> </li> <li>\u4f18\u52bf\uff1a\u53bb\u4e2d\u5fc3\u5316\u67b6\u6784\uff0c\u69fd\u4f4d\u7ba1\u7406\u4fbf\u6377\uff0c\u53ef\u6269\u5c55\u6027\u5f3a\uff0c\u81ea\u52a8\u6545\u969c\u53d1\u73b0/\u6062\u590d\uff0cRedis\u5b98\u65b9\u51fa\u54c1\u3002</li> <li>\u7f3a\u70b9\uff1a\u96c6\u7fa4\u8282\u70b9\u6570\u91cf\u591a\u65f6\uff08\u4e0a\u5343\u4e2a\uff09\uff0cGossip\u534f\u8bae\u4f1a\u9020\u6210\u5927\u91cf\u7f51\u7edc\u901a\u4fe1\uff0c\u5f62\u6210\u201cGossip\u98ce\u66b4\u201d\uff0c\u4e25\u91cd\u5360\u7528\u7f51\u7edc\u5e26\u5bbd\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84/#gossip","title":"\u4e2d\u5fc3\u5316\u96c6\u7fa4\u67b6\u6784 (\u89e3\u51b3Gossip\u98ce\u66b4)","text":"<ul> <li>\u601d\u8def\uff1a\u820d\u5f03\u53bb\u4e2d\u5fc3\u5316\uff0c\u62e5\u62b1\u4e2d\u5fc3\u5316\uff0c\u4f7f\u7528\u4e2d\u95f4\u4ee3\u7406\u7ef4\u62a4\u96c6\u7fa4\u8282\u70b9\u5143\u4fe1\u606f\u3002</li> <li>Twemproxy (Twitter\u5f00\u6e90)\uff1a<ul> <li>\u539f\u7406\uff1a\u5ba2\u6237\u7aef\u8bf7\u6c42 -&gt; Twemproxy -&gt; Redis\u8282\u70b9\u3002Twemproxy\u6839\u636e\u8def\u7531\u89c4\u5219\u8f6c\u53d1\u3002</li> <li>\u4f18\u52bf\uff1a\u5ba2\u6237\u7aef\u900f\u660e\uff0c\u51cf\u5c11\u8fde\u63a5\u6570\uff0cTwemproxy\u96c6\u4e2d\u8def\u7531\u3002</li> <li>\u4e0d\u8db3\uff1a\u65e0\u53cb\u597d\u7ba1\u7406\u540e\u53f0\uff0c\u4e0d\u652f\u6301\u5e73\u6ed1\u6269\u7f29\u5bb9\uff08\u4e3b\u8981\u75db\u70b9\uff09\u3002</li> </ul> </li> <li>Codis (\u8c4c\u8c46\u835a\u5f00\u6e90)\uff1a<ul> <li>\u6570\u636e\u5212\u5206\uff1aN\u4e2a\u69fd\u4f4d\uff08\u9ed8\u8ba41024\uff09\uff0c<code>slot = CRC32(Key) mod N</code>\u3002</li> <li>\u6838\u5fc3\u7ec4\u4ef6\uff1a<ul> <li>Codis Server\uff1a\u4e8c\u6b21\u5f00\u53d1Redis\u670d\u52a1\u5668\uff0c\u652f\u6301\u6570\u636e\u8fc1\u79fb\u3002</li> <li>Codis Proxy\uff1a\u4e2d\u95f4\u4ee3\u7406\uff0c\u63a5\u6536/\u8f6c\u53d1\u5ba2\u6237\u7aef\u8bf7\u6c42\u3002</li> <li>ZooKeeper\u96c6\u7fa4\uff1a\u4fdd\u5b58Redis\u96c6\u7fa4\u5143\u4fe1\u606f\uff08\u69fd\u4f4d\u3001\u8282\u70b9\u5730\u5740\u3001Proxy\u5730\u5740\uff09\uff0c\u63d0\u4f9b\u670d\u52a1\u53d1\u73b0\u3002</li> <li>Codis Dashboard/Codis Fe\uff1a\u96c6\u7fa4\u8fd0\u7ef4\u7ba1\u7406\u5de5\u5177\uff08\u6269\u7f29\u5bb9\u3001\u69fd\u4f4d\u8fc1\u79fb\u3001Web\u64cd\u4f5c\u9875\u9762\uff09\u3002</li> </ul> </li> <li>\u67b6\u6784\uff1a\u6bcf\u4e2a\u6570\u636e\u5206\u7247\u5b9a\u4e49\u4e3aRedis Server Group (Master + \u82e5\u5e72 Slave)\u3002</li> <li>\u5ba2\u6237\u7aef\u8bbf\u95ee\u6d41\u7a0b\uff1a<ol> <li>\u5ba2\u6237\u7aef\u4eceZooKeeper\u83b7\u53d6Codis Proxy\u5217\u8868\uff0c\u9009\u62e9\u8fde\u63a5\u3002</li> <li>\u5ba2\u6237\u7aef\u5411Codis Proxy\u53d1\u9001\u8bf7\u6c42\u3002</li> <li>Codis Proxy\u6839\u636eKey\u8ba1\u7b97\u69fd\u4f4d\uff0c\u901a\u8fc7ZooKeeper\u5b9a\u4f4d\u8d1f\u8d23\u69fd\u4f4d\u7684Redis Server Group\u3002</li> <li>Codis Proxy\u8f6c\u53d1\u8bf7\u6c42\u5230Redis\u8282\u70b9\u3002</li> <li>Redis\u8282\u70b9\u5904\u7406\uff0c\u7ed3\u679c\u8fd4\u56de\u7ed9Codis Proxy\u3002</li> <li>Codis Proxy\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u3002</li> </ol> </li> <li>\u5e73\u6ed1\u6269\u7f29\u5bb9 (\u69fd\u4f4d\u8fc1\u79fb)\uff1aA\u8282\u70b9\u5c06\u69fd\u4f4dS\u5173\u8054\u6570\u636e\u590d\u5236\u5230B\uff0c\u671f\u95f4A\u7ee7\u7eed\u5bf9\u5916\u670d\u52a1\u3002\u82e5\u8bf7\u6c42\u6570\u636eD\u5c5e\u4e8eS\uff0c\u4e14\u6b63\u5728\u8fc1\u79fb\uff0c\u5219A\u5f3a\u5236D\u8fc1\u79fb\u5230B\u518d\u8f6c\u53d1\u8bf7\u6c42\u5230B\u3002</li> <li>\u6545\u969c\u5b95\u673a\uff1a\u65b0\u7248\u672cCodis\u5efa\u8bae\u6bcf\u4e2aRedis Server Group\u5f15\u5165Sentinel\u8282\u70b9\u5904\u7406\u3002</li> <li>\u63a8\u8350\uff1aRedis\u96c6\u7fa4\u8282\u70b9\u8f83\u591a\u65f6\uff08\u4e0a\u5343\uff09\uff0c\u63a8\u8350\u4f7f\u7528Codis\u7c7b\u4e2d\u5fc3\u5316\u67b6\u6784\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84/#lsm-tree","title":"\u5b58\u50a8\u5c42\u6280\u672f\uff1aLSM Tree","text":"<ul> <li>\u7279\u6027\uff1a\u5bf9\u9ad8\u5e76\u53d1\u5199\u53cb\u597d\uff0c\u517c\u987e\u67e5\u8be2\u6548\u7387\u3002NoSQL\u6570\u636e\u5e93\uff08\u5982BigTable, HBase, Cassandra, TiDB\uff09\u6838\u5fc3\u6570\u636e\u7ed3\u6784\u3002</li> <li>\u539f\u7406\uff1a\u57fa\u4e8e\u201c\u78c1\u76d8/\u5185\u5b58\u987a\u5e8f\u8bfb/\u5199\u6027\u80fd\u8fdc\u9ad8\u4e8e\u968f\u673a\u8bfb/\u5199\u6027\u80fd\u201d\u7ed3\u8bba\u3002</li> <li>\u7ec4\u6210\u90e8\u5206\uff1a<ol> <li>MemTable (\u5185\u5b58\u4e2d)\uff1a\u4fdd\u5b58\u6700\u65b0\u66f4\u65b0\u6570\u636e\uff0c\u6309Key\u5b57\u5178\u5e8f\u6709\u5e8f\u7ec4\u7ec7 (\u7ea2\u9ed1\u6811/\u8df3\u8dc3\u8868)\u3002<ul> <li>\u5199\u8bf7\u6c42\u76f4\u63a5\u5728MemTable\u5904\u7406\uff1a\u65b0\u589e\u3001\u4fee\u6539\u3001\u5220\u9664\uff08\u6807\u8bb0\u4e3atombstone\uff09\u3002</li> <li>\u9884\u5199\u65e5\u5fd7 (WAL)\uff1a\u6570\u636e\u4fee\u6539\u547d\u4ee4\u63d0\u4ea4MemTable\u524d\u5148\u8ffd\u52a0\u8bb0\u5f55\u5230\u78c1\u76d8WAL\u6587\u4ef6\uff0c\u4fdd\u8bc1\u53ef\u9760\u6027\u3002</li> </ul> </li> <li>Immutable MemTable (\u53ea\u8bfb\u5185\u5b58)\uff1aMemTable\u8fbe\u5230\u4e00\u5b9a\u5927\u5c0f\u540e\u8f6c\u4e3a\u53ea\u8bfb\uff0c\u540e\u53f0\u7ebf\u7a0b\u5c06\u5176\u6301\u4e45\u5316\u4e3aSSTable\u3002</li> <li>SSTable (Sorted String Table, \u78c1\u76d8\u6587\u4ef6)\uff1a\u6301\u4e45\u5316\u7684\u3001\u6709\u5e8f\u4e14\u4e0d\u53ef\u53d8\u7684\u952e\u503c\u5bf9\u5b58\u50a8\u7ed3\u6784\u3002<ul> <li>Key-Value\u8fde\u7eed\u5b58\u50a8\uff0c\u6587\u4ef6\u5c3e\u90e8\u5b58\u50a8\u7a00\u758f\u7d22\u5f15\uff08\u63d0\u9ad8\u67e5\u627e\u901f\u5ea6\uff09\u3002</li> <li>\u5408\u5e76\u64cd\u4f5c (Compaction)\uff1a\u5468\u671f\u6027\u5bf9SSTable\u8fdb\u884c\u5408\u5e76\uff0c\u6e05\u9664\u5197\u4f59\u8bb0\u5f55\u3002<ul> <li>\u4f7f\u7528Leveled Compaction Strategy (LCS)\uff1aSSTable\u5206Level\u5c42\u7ea7\uff0cLevel N\u6587\u4ef6\u5408\u5e76\u4e0b\u6c89\u5230Level N+1\u3002</li> <li>LCS\u4fdd\u8bc1\uff1a\u6240\u6709Level SSTable\u5927\u5c0f\u4e00\u81f4\uff08\u5982160MB\uff09\uff0c\u6bcf\u4e2aLevel\u9650\u5236\u6587\u4ef6\u603b\u5927\u5c0f\uff0c\u5355\u4e2a/\u540cLevel\u5185SSTable\u4e4b\u95f4\u6570\u636e\u6709\u5e8f\u4e14\u65e0Key\u91cd\u53e0\u3002</li> </ul> </li> </ul> </li> </ol> </li> <li>\u8bfb/\u5199\u6570\u636e\u6d41\u7a0b\uff1a<ul> <li>\u5199\u6d41\u7a0b\uff1aWAL -&gt; MemTable -&gt; (\u6ee1) Immutable MemTable -&gt; SSTable (Level 0) -&gt; (\u6ee1) \u5408\u5e76\u4e0b\u6c89\u5230Level 1 -&gt; ... -&gt; Level N+1\u3002</li> <li>\u8bfb\u6d41\u7a0b\uff1a\u6309\u6570\u636e\u65b0\u65e7\u7a0b\u5ea6\uff0cMemTable -&gt; Immutable MemTable -&gt; Level 0 SSTable (\u6700\u65b0) -&gt; Level 1 SSTable -&gt; ... -&gt; Level N SSTable\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84/#nosql","title":"\u5b58\u50a8\u5c42\u6280\u672f\uff1aNoSQL\u6570\u636e\u5e93","text":"<ol> <li>\u6587\u6863\u6570\u636e\u5e93 (MongoDB, CouchDB)\uff1a<ul> <li>\u7279\u70b9\uff1a\u91c7\u7528JSON\u683c\u5f0f\u5b58\u50a8\u6570\u636e\uff0c\u89e3\u51b3\u5173\u7cfb\u578b\u6570\u636e\u5e93Schema\u6269\u5c55\u4e0d\u4fbf\u95ee\u9898\u3002</li> <li>\u9002\u7528\u573a\u666f\uff1a\u6570\u636e\u91cf\u5927/\u589e\u957f\u5feb\uff0c\u5b57\u6bb5\u5b9a\u4e49\u4e0d\u660e\u786e/\u53d8\u5316\u5feb\uff08\u5982\u5546\u54c1\u53c2\u6570\uff09\u3002</li> <li>\u4e0d\u9002\u7528\u573a\u666f\uff1a\u9700\u4e8b\u52a1\uff08\u65e0\u6cd5\u4fdd\u8bc1\u591a\u6587\u6863\u539f\u5b50\u6027\uff09\uff0c\u9700\u590d\u6742\u67e5\u8be2\uff08\u5982join\uff09\u3002</li> </ul> </li> <li>\u5217\u5f0f\u6570\u636e\u5e93 (BigTable, HBase)\uff1a<ul> <li>\u7279\u70b9\uff1a\u6309\u5217\u5b58\u50a8\u6570\u636e\uff0c\u800c\u975e\u884c\u5f0f\u3002</li> <li>\u4f18\u52bf\uff1a\u7edf\u8ba1\u67e5\u8be2\u6548\u7387\u9ad8\uff08\u53ea\u8bfb\u53d6\u5173\u6ce8\u5217\uff09\uff0c\u5b58\u50a8\u7a7a\u95f4\u5229\u7528\u7387\u9ad8\uff08\u5b57\u5178\u8868\u538b\u7f29\uff09\u3002</li> <li>\u9002\u7528\u573a\u666f\uff1a\u6d77\u91cf\u6570\u636e\u63d2\u5165\u3001\u6781\u5c11\u4fee\u6539\uff08\u5982\u7528\u6237\u884c\u4e3a\u6536\u96c6\uff09\uff0c\u6570\u636e\u5206\u6790\uff08\u79bb\u7ebf\u7edf\u8ba1\uff09\u3002</li> <li>\u4e0d\u9002\u7528\u573a\u666f\uff1a\u9ad8\u9891\u5220\u9664/\u4fee\u6539\uff0c\u4e0d\u9002\u5408\u5728\u7ebf\u7528\u6237\uff0c\u9700\u4e8b\u52a1\u3002</li> </ul> </li> <li>\u5168\u6587\u641c\u7d22\u6570\u636e\u5e93 (Elasticsearch)\uff1a<ul> <li>\u95ee\u9898\uff1a\u5173\u7cfb\u578b\u6570\u636e\u5e93\u6a21\u7cca\u67e5\u8be2\u6548\u7387\u4f4e\uff08LIKE\u8bed\u53e5\u5168\u91cf\u626b\u63cf\uff09\u3002</li> <li>\u539f\u7406\uff1a\u5efa\u7acb\u5355\u8bcd\u5230\u6587\u6863\u7684\u7d22\u5f15\u5173\u7cfb\u4f5c\u4e3a\u201c\u5012\u6392\u7d22\u5f15\u201d\u3002</li> <li>\u4f18\u52bf\uff1a\u9ad8\u6548\u5173\u952e\u8bcd\u641c\u7d22\uff0c\u6d77\u91cf\u6570\u636e\u590d\u6742\u67e5\u8be2\uff0c\u6570\u636e\u7edf\u8ba1/\u805a\u5408\u3002</li> <li>\u4e0d\u9002\u7528\u573a\u666f\uff1a\u9ad8\u9891\u66f4\u65b0\u6570\u636e\uff08\u5b9e\u9645\u662f\u5220\u9664\u65e7\u6570\u636e+\u521b\u5efa\u65b0\u6570\u636e\uff09\uff0c\u9700\u4e8b\u52a1\u3002</li> </ul> </li> <li>\u56fe\u6570\u636e\u5e93 (Neo4j, Titan)\uff1a<ul> <li>\u7279\u70b9\uff1a\u4ee5\u201c\u56fe\u201d\u8fd9\u79cd\u6570\u636e\u7ed3\u6784\u5b58\u50a8\u6570\u636e\uff08\u8282\u70b9-\u5b9e\u4f53\uff0c\u5173\u7cfb-\u8282\u70b9\u95f4\u5173\u8054\uff09\u3002</li> <li>\u4f18\u52bf\uff1a\u76f4\u89c2\u6570\u636e\u6a21\u578b\uff0c\u6613\u67e5\u8be2\u8282\u70b9\u95f4\u5173\u7cfb\uff0c\u89e3\u51b3\u5173\u7cfb\u578b\u6570\u636e\u5e93\u4e0d\u64c5\u957f\u5904\u7406\u5b9e\u4f53\u5173\u7cfb\u95ee\u9898\u3002</li> <li>\u9002\u7528\u573a\u666f\uff1a\u5f3a\u8c03\u5173\u7cfb\u3001\u9700\u590d\u6742\u5173\u7cfb\u67e5\u8be2/\u5206\u6790\u7684\u4e1a\u52a1\uff08\u5982\u793e\u4ea4\u7f51\u7edc\u3001\u77e5\u8bc6\u56fe\u8c31\uff09\u3002</li> </ul> </li> <li>NewSQL\u6570\u636e\u5e93 (Google Spanner, TiDB, CockroachDB)\uff1a<ul> <li>\u5b9a\u4f4d\uff1a\u7ed3\u5408\u5173\u7cfb\u578b\u6570\u636e\u5e93\u548cNoSQL\u4e24\u8005\u4f18\u70b9\u3002</li> <li>\u5e95\u5c42\uff1a\u4f7f\u7528\u5206\u5e03\u5f0f\u952e\u503c\u5b58\u50a8\u7cfb\u7edf\uff08LSM Tree\u6a21\u578b\uff09\u3002</li> <li>\u9769\u65b0\uff1a\u653e\u5f03NoSQL\u4e3b\u4ece\u590d\u5236\uff0c\u4ee5\u66f4\u5c0f\u7c92\u5ea6\u6570\u636e\u5206\u7247\u4f5c\u4e3a\u9ad8\u53ef\u7528\u5355\u4f4d\uff0c\u901a\u8fc7Paxos/Raft\u7b49\u5206\u5e03\u5f0f\u5171\u8bc6\u7b97\u6cd5\u590d\u5236\u6570\u636e\uff0c\u91c7\u7528\u5206\u5e03\u5f0f\u4e8b\u52a1\u3002</li> <li>\u4f18\u52bf\uff1a\u4fdd\u7559NoSQL\u53ef\u6269\u5c55\u6027\uff0c\u63d0\u4f9b\u5173\u7cfb\u578b\u6570\u636e\u5e93\u4e8b\u52a1\u80fd\u529b\u3002</li> <li>\u73b0\u72b6\uff1a\u6570\u636e\u5e93\u9886\u57df\u540e\u8d77\u4e4b\u79c0\uff0c\u4f46\u4ecd\u662f\u5c0f\u4f17\u4ea7\u54c1\uff0c\u9700\u66f4\u591a\u8003\u9a8c\u3002</li> </ul> </li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84/#_4","title":"\u6d88\u606f\u4e2d\u95f4\u4ef6\u6280\u672f","text":"<ul> <li>\u5b9a\u4e49\uff1a\u751f\u4ea7\u8005\u521b\u5efa\u6d88\u606f\u6295\u9012\u5230\u961f\u5217\uff0c\u6d88\u8d39\u8005\u4ece\u961f\u5217\u8bfb\u53d6\u6d88\u606f\uff0c\u5b8c\u6210\u901a\u4fe1\u3002</li> <li>\u901a\u4fe1\u6a21\u5f0f\u4f18\u70b9\uff1a<ul> <li>\u751f\u4ea7\u8005\u5355\u65b9\u9762\u5b8c\u6210\u6d88\u606f\u901a\u4fe1\uff0c\u65e0\u9700\u7b49\u5f85\u6d88\u8d39\u8005\u3002</li> <li>\u6d88\u8d39\u8005\u6839\u636e\u81ea\u8eab\u80fd\u529b\u62c9\u53d6\u65b0\u6d88\u606f\uff0c\u7075\u6d3b\u3002</li> </ul> </li> <li>\u6838\u5fc3\u7528\u9014\uff1a<ol> <li>\u5f02\u6b65\u5316\uff1a\u5c06\u975e\u6838\u5fc3\u4e1a\u52a1\u903b\u8f91\u5f02\u6b65\u5904\u7406\uff0c\u5927\u5e45\u964d\u4f4e\u7528\u6237\u8bf7\u6c42\u54cd\u5e94\u65f6\u95f4\u3002</li> <li>\u6d41\u91cf\u524a\u5cf0\uff1a\u6d88\u8d39\u8005\u6839\u636e\u81ea\u8eab\u5904\u7406\u80fd\u529b\u7075\u6d3b\u8bfb\u53d6\u6d88\u606f\uff0c\u5e73\u6ed1\u9ad8\u5e76\u53d1\u6d41\u91cf\uff0c\u63d0\u9ad8\u670d\u52a1\u7a33\u5b9a\u6027\u3002</li> <li>\u89e3\u8026\uff1a\u670d\u52a1\u95f4\u901a\u8fc7\u6d88\u606f\u961f\u5217\u901a\u4fe1\uff0c\u6d88\u9664\u76f4\u63a5\u4f9d\u8d56\uff0c\u5229\u4e8e\u804c\u8d23\u5206\u79bb\uff0c\u51cf\u5c11\u4e8b\u6545\u3002</li> </ol> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84/#kafka","title":"Kafka","text":"<ul> <li>\u5b9a\u4e49\uff1a\u5206\u5e03\u5f0f\u3001\u9ad8\u6027\u80fd\u3001\u9ad8\u53ef\u6269\u5c55\u6027\u7684\u6d88\u606f\u961f\u5217\u7cfb\u7edf\uff0c\u4e3b\u8981\u7528\u4e8e\u65e5\u5fd7\u6536\u96c6\u548c\u6d88\u606f\u4e2d\u95f4\u4ef6\u3002</li> <li>\u6574\u4f53\u67b6\u6784\u7ec4\u4ef6\uff1a<ol> <li>Producer (\u751f\u4ea7\u8005)\uff1a\u751f\u4ea7\u6d88\u606f\u3002</li> <li>Consumer (\u6d88\u8d39\u8005)\uff1a\u6d88\u8d39\u6d88\u606f\u3002</li> <li>Topic (\u4e3b\u9898)\uff1a\u6d88\u606f\u7c7b\u578b\u3002</li> <li>Partition (\u5206\u533a)\uff1aTopic\u6d88\u606f\u5206\u5e03\u5f0f\u5b58\u50a8\u5728\u591a\u4e2aPartition\u4e2d\uff0c\u5b9e\u73b0\u8d1f\u8f7d\u5747\u8861\u3002\u6bcf\u4e2aPartition\u6d88\u606f\u6709\u5e8f\uff0c\u4e0d\u540cPartition\u95f4\u6d88\u606f\u65e0\u5e8f\u3002\u7531Broker\u7ba1\u7406\u3002</li> <li>Broker\uff1aKafka\u6838\u5fc3\uff0c\u63a5\u6536/\u5b58\u50a8\u6d88\u606f\u5230Partition\uff0c\u5904\u7406\u6d88\u8d39\u8005\u6d88\u8d39\u903b\u8f91\u3002\u591a\u4e2aBroker\u7ec4\u6210Kafka\u96c6\u7fa4\u3002</li> <li>Consumer Group (\u6d88\u8d39\u8005\u7ec4)\uff1a\u591a\u4e2a\u6d88\u8d39\u8005\u5b9e\u4f8b\u7ec4\u6210\uff0c\u4e00\u4e2aTopic\u5bf9\u5e94\u4e00\u4e2a\u6216\u591a\u4e2aConsumer Group\u3002<ul> <li>\u89c4\u5b9a\uff1a\u4e00\u4e2aPartition\u6d88\u606f\u53ea\u80fd\u88abConsumer Group\u4e2d\u4e00\u4e2a\u6d88\u8d39\u8005\u5b9e\u4f8b\u6d88\u8d39\u3002</li> </ul> </li> <li>ZooKeeper (Kafka 0.9+)\uff1a\u8d1f\u8d23Kafka\u96c6\u7fa4\u5143\u4fe1\u606f\u7ba1\u7406\u3002<ul> <li>Broker\u6ce8\u518c\u3001Topic\u5143\u4fe1\u606f\u7ba1\u7406 (Partition\u4e0eBroker\u5173\u8054)\u3002</li> <li>\u751f\u4ea7\u8005\u8d1f\u8f7d\u5747\u8861 (\u6d88\u606f\u5199\u5165Partition)\u3002</li> <li>\u6d88\u8d39\u8005\u8d1f\u8f7d\u5747\u8861 (\u8bb0\u5f55\u201c\u54ea\u4e2a\u6d88\u8d39\u8005\u5b9e\u4f8b\u6d88\u8d39\u54ea\u4e2aPartition\u201d\uff0c\u5b95\u673a\u540eRebalance)\u3002</li> <li>\u6d88\u8d39\u8fdb\u5ea6Offset\u8bb0\u5f55 (Kafka 0.9+\u7248\u672c\u5df2\u6539\u4e3aBroker\u672c\u5730\u78c1\u76d8\u4fdd\u5b58\uff0c\u63d0\u5347\u5199\u6027\u80fd)\u3002</li> </ul> </li> </ol> </li> <li>\u751f\u4ea7\u8005\u53d1\u9001\u6d88\u606f\u6d41\u7a0b\uff1a<ul> <li>\u6307\u5b9aPartition\u5219\u76f4\u63a5\u4f7f\u7528\u3002</li> <li>\u672a\u6307\u5b9a\u4f46\u6709Key\u5219\u5bf9Key\u54c8\u5e0c\u9009Partition\u3002</li> <li>\u65e2\u672a\u6307\u5b9aPartition\u4e5f\u672a\u6307\u5b9aKey\u5219\u8f6e\u8be2\u9009\u62e9Partition\u3002</li> <li>\u53d1\u9001\u5230\u9009\u5b9a\u7684Partition\u5bf9\u5e94Broker\uff0cBroker\u987a\u5e8f\u5199\u5165\u78c1\u76d8\u3002</li> </ul> </li> <li>\u6d88\u8d39\u8005\u6d88\u8d39\u6d88\u606f\uff1a<ul> <li>\u4ee5Consumer Group\u65b9\u5f0f\u5de5\u4f5c\u3002</li> <li>\u4e00\u4e2aConsumer Group\u53ef\u6d88\u8d39\u591a\u4e2aTopic\uff0c\u4e00\u4e2aTopic\u4e5f\u53ef\u88ab\u591a\u4e2aConsumer Group\u6d88\u8d39\u3002</li> <li>\u62c9\u53d6(pull)\u6a21\u5f0f\uff1a\u6d88\u8d39\u8005\u4e3b\u52a8\u63a7\u5236\u6d88\u8d39\u901f\u5ea6\uff0c\u5b9e\u73b0\u524a\u5cf0\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84/#kafka_1","title":"Kafka\u7684\u9ad8\u53ef\u7528","text":"<ul> <li>Partition\u591a\u526f\u672c\uff1a\u6bcf\u4e2aPartition\u67091\u4e2aLeader\u548c\u82e5\u5e72Follower\u3002<ul> <li>Leader\u5904\u7406\u751f\u4ea7\u8005\u5199\u5165\u548c\u6d88\u8d39\u8005\u8bfb\u53d6\u3002</li> <li>Follower\u5468\u671f\u6027\u5411Leader\u8bf7\u6c42\u6d88\u606f\u590d\u5236\uff0c\u4f5c\u4e3aLeader\u6570\u636e\u5907\u4efd\u3002</li> <li>\u526f\u672c\u5b58\u50a8\u5728\u4e0d\u540cBroker\u4e0a\uff0c\u9632\u6b62Broker\u5b95\u673a\u5bfc\u81f4Partition\u4e0d\u53ef\u7528\u3002</li> </ul> </li> <li>ISR (In-Sync Replica) \u673a\u5236\uff1aLeader\u7ef4\u62a4\u4e0e\u81ea\u5df1\u6570\u636e\u4e00\u81f4\u7684Follower\u5217\u8868\u3002<ul> <li>Follower\u957f\u65f6\u95f4\u672a\u590d\u5236\u6216\u6570\u636e\u843d\u540e\u8fc7\u591a\uff0c\u5219\u4eceISR\u79fb\u9664\u3002</li> <li>\u53ea\u6709ISR\u4e2d\u6240\u6709Follower\u90fd\u786e\u8ba4\u6536\u5230\u6d88\u606f\uff0cLeader\u624d\u8ba4\u4e3a\u6d88\u606f\u5199\u5165\u6210\u529f\u3002</li> <li>\u7279\u70b9\uff1a\u540c\u6b65\u590d\u5236\u548c\u5f02\u6b65\u590d\u5236\u7684\u6298\u4e2d\uff0c\u907f\u514dFollower\u5b95\u673a\u5bf9\u6027\u80fd/\u53ef\u7528\u6027\u5f71\u54cd\uff0c\u4fdd\u8bc1\u591a\u526f\u672c\u6570\u636e\u4e00\u81f4\u6027\u3002</li> </ul> </li> <li>\u6545\u969c\u6062\u590d\uff1a<ul> <li>Controller\u89d2\u8272\uff1aKafka\u96c6\u7fa4\u4e2d\u9009\u4e3e\u4e00\u4e2aController\uff08\u501f\u52a9ZooKeeper\u5206\u5e03\u5f0f\u9501\uff09\uff0c\u8d1f\u8d23Partition Leader\u9009\u4e3e\u548c\u526f\u672c\u91cd\u5206\u914d\u3002</li> <li>\u6545\u969c\u6062\u590d\u6d41\u7a0b\uff1a<ol> <li>Broker\u6545\u969c\uff0c\u4e0eZooKeeper\u65ad\u8fde\u3002</li> <li>ZooKeeper\u901a\u77e5Controller\u3002</li> <li>Controller\u67e5\u8be2\u53d7\u5f71\u54cd\u7684Partition (Leader\u7531\u6545\u969cBroker\u8d1f\u8d23)\u3002</li> <li>Controller\u4ece\u6bcf\u4e2aPartition Leader ISR\u4e2d\u9009\u62e9\u4e00\u4e2aFollower\u63d0\u5347\u4e3aLeader\u3002</li> <li>Controller\u901a\u77e5\u76f8\u5173Broker\u3002</li> <li>\u88ab\u9009\u4e3e\u7684Follower\u53d8\u4e3aLeader\uff0c\u5176\u4ed6Follower\u8f6c\u800c\u5411\u65b0Leader\u590d\u5236\u6570\u636e\u3002</li> </ol> </li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84/#_5","title":"\u591a\u673a\u623f\uff1a\u4e3b\u5907\u673a\u623f","text":"<ul> <li>\u95ee\u9898\uff1a\u5355\u673a\u623f\u662f\u5355\u70b9\u6545\u969c\uff08\u4eba\u4e3a\u7834\u574f\u3001\u81ea\u7136\u707e\u5bb3\u3001\u65ad\u7535\u3001\u706b\u707e\u7b49\uff09\u3002</li> <li>\u65b9\u6848\uff1a\u5728\u4e3b\u673a\u623f\u6240\u5728\u57ce\u5e02\u5efa\u8bbe\u4e00\u4e2a\u5907\u673a\u623f\uff0c\u5b8c\u5168\u590d\u5236\u4e3b\u673a\u623f\u67b6\u6784\u3002<ul> <li>\u6b63\u5e38\u60c5\u51b5\uff1a\u4ec5\u4e3b\u673a\u623f\u5de5\u4f5c\u3002</li> <li>\u5b58\u50a8\u5c42\uff1a\u5907\u673a\u623f\u6570\u636e\u5e93\u4f5c\u4e3a\u4e3b\u673a\u623f\u4ece\u5e93\uff0c\u901a\u8fc7\u4e13\u7ebf\u8fdb\u884c\u6570\u636e\u590d\u5236\u3002</li> </ul> </li> <li>\u6545\u969c\u5207\u6362\uff1a\u4e3b\u673a\u623f\u6545\u969c\u65f6\uff0c\u5907\u673a\u623f\uff1a<ul> <li>\u5b58\u50a8\u5c42\u4ece\u5e93\u63d0\u5347\u4e3a\u4e3b\u5e93\u3002</li> <li>\u4fee\u6539DNS\u89e3\u6790\u5730\u5740\u6307\u5411\u5907\u673a\u623f\u3002</li> </ul> </li> <li>\u201c\u540c\u57ce\u707e\u5907\u201d\u7279\u70b9\uff1a<ul> <li>\u4f18\u70b9\uff1a\u67b6\u6784\u642d\u5efa\u7b80\u5355\u3002</li> <li>\u7f3a\u70b9\uff1a<ul> <li>\u8d44\u6e90\u6d6a\u8d39\uff1a\u5907\u673a\u623f\u5927\u90e8\u5206\u65f6\u95f4\u7a7a\u95f2\u3002</li> <li>\u53ef\u7528\u6027\u5b58\u7591\uff1a\u5907\u673a\u623f\u65e0\u5b9e\u6218\u7ecf\u9a8c\uff0c\u5173\u952e\u65f6\u523b\u53ef\u80fd\u6389\u94fe\u5b50\u3002</li> </ul> </li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84/#_6","title":"\u591a\u673a\u623f\uff1a\u540c\u57ce\u53cc\u6d3b","text":"<ul> <li>\u52a8\u673a\uff1a\u89e3\u51b3\u4e3b\u5907\u673a\u623f\u8d44\u6e90\u6d6a\u8d39\u548c\u53ef\u7528\u6027\u5b58\u7591\u95ee\u9898\u3002</li> <li>\u6539\u9020\uff1a\u5c06\u4e24\u4e2a\u673a\u623f\u7684\u63a5\u5165\u5c42IP\u5730\u5740\u90fd\u914d\u7f6e\u5230DNS\uff0c\u5b9e\u73b0\u201c\u53cc\u6d3b\u201d\uff0c\u4e24\u4e2a\u673a\u623f\u90fd\u80fd\u5904\u7406\u90e8\u5206\u7528\u6237\u8bf7\u6c42\u3002</li> <li>\u5b58\u50a8\u5c42\u6539\u9020\uff1a<ul> <li>\u4e00\u4e2a\u673a\u623f\u4f5c\u4e3a\u4e3b\u5e93\u673a\u623f\uff08\u5982A\u673a\u623f\uff09\u3002</li> <li>\u53e6\u4e00\u4e2a\u673a\u623f\uff08\u5982B\u673a\u623f\uff09\u7684\u6240\u6709\u5199\u6570\u636e\u8bf7\u6c42\u8de8\u673a\u623f\u8bbf\u95eeA\u673a\u623f\u5bf9\u5e94\u7684\u4e3b\u5e93\u3002</li> <li>\u8bfb\u6570\u636e\u8bf7\u6c42\u4f9d\u8d56\u5404\u5b58\u50a8\u7cfb\u7edf\u81ea\u5e26\u7684\u4e3b\u4ece\u590d\u5236\u529f\u80fd\uff0c\u5728\u672c\u5730\u5904\u7406\u3002</li> <li>\u4f18\u70b9\uff1a\u5199\u8bf7\u6c42\u5ef6\u8fdf\u589e\u5927\u4f46\u53ef\u63a5\u53d7\uff08\u540c\u57ce\u8ddd\u79bb\u8fd1\uff0c\u4e13\u7ebf\u5ef6\u8fdf5ms\u5de6\u53f3\uff09\uff0c\u5199\u8bf7\u6c42\u5360\u6bd4\u8f83\u4f4e\u3002\u53ef\u5c06\u201c\u540c\u57ce\u53cc\u6d3b\u201d\u89c6\u4e3a\u5355\u673a\u623f\u4f7f\u7528\u3002</li> </ul> </li> <li>\u7075\u6d3b\u5b9e\u65bd\uff1a<ul> <li>\u201c\u540c\u57ce\u201d\u4e0d\u5c40\u9650\u884c\u653f\u533a\u57df\uff1a\u5f3a\u8c03\u7269\u7406\u8ddd\u79bb\u8fd1\uff0c\u4ee5\u7f13\u89e3\u8de8\u673a\u623f\u8bbf\u95ee\u5ef6\u8fdf\uff0c\u540c\u65f6\u907f\u514d\u7269\u7406\u8ddd\u79bb\u8fc7\u8fd1\u5bfc\u81f4\u5355\u70b9\u5931\u6548\u3002</li> <li>\u201c\u540c\u57ce\u53cc\u6d3b\u201d\u53ef\u6269\u5c55\u4e3a\u201c\u540c\u57ce\u591a\u6d3b\u201d\uff1a\u53ef\u90e8\u7f72\u66f4\u591a\u673a\u623f\uff0c\u4f46\u5b58\u50a8\u5c42\u9700\u9009\u51fa\u552f\u4e00\u4e3b\u5e93\u673a\u623f\u3002</li> </ul> </li> <li>\u5206\u6d41\u4e0e\u6545\u969c\u5207\u6d41\uff1a<ul> <li>\u5206\u6d41\u7b56\u7565\uff1a\u6839\u636e\u7528\u6237ID/DeviceID\u54c8\u5e0c\u6620\u5c04\u5230\u4e0d\u540c\u673a\u623f\u3002\u63a8\u8350DeviceID\uff08\u672a\u767b\u5f55\u7528\u6237\uff09\u3002</li> <li>\u5206\u6d41\u73af\u8282\uff1a<ul> <li>DNS\u5206\u6d41 (\u7c97\u7cd9)\uff1a\u89e3\u6790\u7ed3\u679c\u4e0d\u786e\u5b9a\uff0c\u540c\u4e00\u7528\u6237\u53ef\u80fd\u8def\u7531\u5230\u4e0d\u540c\u673a\u623f\uff0c\u7b56\u7565\u53d8\u66f4\u751f\u6548\u6162\u3002</li> <li>\u5ba2\u6237\u7aef\u5206\u6d41 (\u63a8\u8350)\uff1a<ul> <li>\u5206\u6d41\u914d\u7f6e\u5e73\u53f0\uff1a\u90e8\u7f72\u5728\u5404\u673a\u623f\uff0c\u5de5\u7a0b\u5e08\u914d\u7f6e\u57df\u540d\u5206\u6d41\u6bd4\u4f8b (\u5982<code>sharding</code>, <code>idc</code>\u5305\u542b<code>lower</code>/<code>upper</code>\u8303\u56f4\u548c<code>domain</code>\u4e13\u7528\u57df\u540d)\u3002</li> <li>\u5ba2\u6237\u7aef\u6d41\u7a0b\uff1a\u53d1\u8d77\u8bf7\u6c42\u65f6\u82e5\u6709\u5206\u6d41\u914d\u7f6e\uff0c\u5219DeviceID\u54c8\u5e0c\u53d6\u6a21\uff0c\u6839\u636e\u8303\u56f4\u9009\u62e9\u4e13\u7528\u57df\u540d\u53d1\u9001\u8bf7\u6c42\u3002</li> <li>\u51c6\u5b9e\u65f6\u751f\u6548\uff1aNginx\u54cd\u5e94Header\u5e26\u6700\u65b0\u5206\u6d41\u914d\u7f6e\u7248\u672c\u53f7\uff0c\u5ba2\u6237\u7aef\u82e5\u53d1\u73b0\u672c\u5730\u7248\u672c\u65e7\uff0c\u5219\u4e3b\u52a8\u62c9\u53d6\u6700\u65b0\u914d\u7f6e\u3002</li> <li>\u5ba2\u6237\u7aef\u4e3b\u52a8\u5bb9\u707e\uff1a\u8fde\u7eedN\u6b21\u8bbf\u95eeA\u673a\u623f\u5931\u8d25 -&gt; \u731c\u6d4bA\u4e0d\u53ef\u7528 -&gt; \u5c1d\u8bd5\u62c9\u53d6A\u673a\u623f\u914d\u7f6e (\u82e5\u5931\u8d25) -&gt; \u8f6c\u800c\u5411B\u673a\u623f\u62c9\u53d6\u914d\u7f6e -&gt; \u5e94\u7528\u6700\u65b0\u914d\u7f6e\u5207\u6d41\u5230B\u673a\u623f\u3002</li> </ul> </li> <li>HTTP DNS\u6216\u5176\u4ed6\u63a5\u5165\u5c42\u7ec4\u4ef6\uff1a\u4e5f\u53ef\u652f\u6301\u5206\u6d41\u3002</li> </ul> </li> <li>\u5207\u6d41\u64cd\u4f5c\uff1a\u82e5\u6545\u969c\u673a\u623f\u662f\u4e3b\u5e93\uff0c\u9700\u5c06\u5907\u673a\u623f\u5b58\u50a8\u5c42\u6570\u636e\u5e93\u63d0\u5347\u4e3a\u4e3b\u5e93\u3002</li> </ul> </li> <li>\u4e24\u5730\u4e09\u4e2d\u5fc3\uff1a<ul> <li>\u5728\u201c\u540c\u57ce\u53cc\u6d3b\u201d\u57fa\u7840\u4e0a\u589e\u52a0\u4e00\u4e2a\u5f02\u5730\u5907\u673a\u623f\uff08\u8ddd\u79bb\u8f83\u8fdc\uff09\u3002</li> <li>\u5907\u673a\u623f\u53ea\u505a\u6570\u636e\u5907\u4efd\uff0c\u4e0d\u5bf9\u5916\u63d0\u4f9b\u670d\u52a1\u3002</li> <li>\u7b14\u8005\u770b\u6cd5\uff1a\u6295\u5165\u4ea7\u51fa\u6bd4\u4f4e\uff0c\u591a\u6570\u573a\u666f\u4e0b\u201c\u540c\u57ce\u53cc\u6d3b\u201d\u8db3\u591f\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84/#_7","title":"\u591a\u673a\u623f\uff1a\u5f02\u5730\u591a\u6d3b","text":"<ul> <li>\u9002\u7528\u573a\u666f\uff1a\u670d\u52a1\u4e8e\u5168\u7403\u7528\u6237\u7684\u4e16\u754c\u7ea7\u5e94\u7528\uff08\u5982Facebook, Instagram\uff09\u3002</li> <li>\u201c\u540c\u57ce\u53cc\u6d3b\u201d\u5bf9\u5168\u7403\u5e94\u7528\u7684\u95ee\u9898\uff1a<ul> <li>\u7528\u6237\u8bbf\u95ee\u5ef6\u8fdf\uff1a\u8de8\u56fd\u8bbf\u95ee\u7269\u7406\u8ddd\u79bb\u8fdc\uff0c\u5ef6\u8fdf\u9ad8\u3002</li> <li>\u6570\u636e\u5408\u89c4\u95ee\u9898\uff1a\u5404\u56fd\u8981\u6c42\u672c\u56fd\u7528\u6237\u6570\u636e\u72ec\u7acb\u5b58\u50a8\u3002</li> <li>\u707e\u96be\u95ee\u9898\uff1a\u90e8\u7f72\u56fd\u6218\u4e89\u3001\u66b4\u4e71\u3001\u81ea\u7136\u707e\u5bb3\u53ef\u80fd\u5bfc\u81f4\u5168\u7403\u5e94\u7528\u4e0d\u53ef\u7528\u3002</li> </ul> </li> <li>\u201c\u5f02\u5730\u591a\u6d3b\u201d\u67b6\u6784\u8981\u70b9\uff1a<ol> <li>\u6bcf\u4e2a\u673a\u623f\u90fd\u5728\u672c\u673a\u623f\u5185\u5904\u7406\u5199\u6570\u636e\u8bf7\u6c42\uff1a\u7531\u4e8e\u5f02\u5730\u673a\u623f\u95f4\u7f51\u7edc\u5ef6\u8fdf\u5de8\u5927\uff0c\u65e0\u6cd5\u8de8\u673a\u623f\u5199\u4e3b\u5e93\u3002\u6bcf\u4e2a\u673a\u623f\u72ec\u7acb\u90e8\u7f72\u5404\u5b58\u50a8\u5c42\u4e3b\u5e93\uff0c\u5b58\u50a8\u5c42\u95f4\u65e0\u4e3b\u4ece\u5173\u7cfb\u3002</li> <li>\u6570\u636e\u4e92\u901a\uff1a\u6bcf\u4e2a\u673a\u623f\u5c06\u672c\u673a\u623f\u5199\u5165\u7684\u6570\u636e\u590d\u5236\u5230\u5176\u4ed6\u673a\u623f\uff0c\u5b9e\u73b0\u5168\u7403\u6570\u636e\u53ef\u89c1\u3002<ul> <li>\u901a\u8fc7DRC (Data Replicate Center) \u5de5\u5177\u5b9e\u73b0\u5b58\u50a8\u7cfb\u7edf\u95f4\u7684\u53cc\u5411\u6570\u636e\u590d\u5236 (\u4e3b\u4e3b\u590d\u5236)\u3002</li> <li>\u4e1a\u754c\u9879\u76ee\uff1a\u963f\u91cc\u5df4\u5df4 (Otter, RedisShake, MongoShake), \u643a\u7a0b (XPipe)\u3002</li> </ul> </li> </ol> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84/#mysql-drc","title":"MySQL DRC\u7684\u539f\u7406","text":"<ul> <li>DRC\u5de5\u5177\u7ed3\u6784\uff1a<ul> <li>Sync-out\uff1a\u4f2a\u4ece\uff0c\u6a21\u62dfMySQL\u4ece\u5e93\uff0c\u4ece\u672c\u5730\u4e3b\u5e93\u83b7\u53d6binlog\u6570\u636e\u53d8\u66f4\u8bb0\u5f55\uff0c\u5b9e\u65f6\u4f20\u8f93\u5230\u8fdc\u7aefSync-in\u3002</li> <li>Sync-in\uff1a\u626e\u6f14\u6570\u636e\u5e93\u5ba2\u6237\u7aef\uff0c\u6536\u5230\u8fdc\u7aef\u6570\u636e\u540e\u8fd8\u539fSQL\u8bed\u53e5\u5e76\u5728\u672c\u673a\u623f\u4e3b\u5e93\u6267\u884c\u3002</li> </ul> </li> <li>\u65ad\u70b9\u7eed\u4f20\u4e0e\u6570\u636e\u9632\u91cd\uff1a<ul> <li>\u4f7f\u7528GTID (Global Transaction Identifier)\uff1aMySQL\u5bf9\u6bcf\u4e2a\u5df2\u63d0\u4ea4\u4e8b\u52a1\u7684\u5168\u5c40\u552f\u4e00\u7f16\u53f7\u3002</li> <li>Sync-out\u8bb0\u5f55\u6700\u65b0\u4f20\u8f93\u6210\u529f\u7684GTID\uff0c\u6545\u969c\u6062\u590d\u540e\u4eceGTID\u4f4d\u7f6e\u7ee7\u7eed\u4f20\u8f93\u3002</li> <li>Sync-in\u4fdd\u5b58\u5df2\u5199\u5165\u6570\u636eGTID\u96c6\u5408\uff0c\u6536\u5230\u6570\u636e\u524d\u68c0\u67e5\u662f\u5426\u5df2\u5b58\u5728\uff0c\u5b9e\u73b0\u6570\u636e\u9632\u91cd\u3002</li> </ul> </li> <li>\u9632\u6b62\u6570\u636e\u56de\u73af\uff1a<ul> <li>\u5728\u4e3b\u5e93\u521b\u5efa\u8f85\u52a9\u8868\uff0c\u8bb0\u5f55\u6765\u81ea\u5176\u4ed6\u673a\u623f\u7684\u6570\u636e\u53d8\u66f4\u4e8b\u52a1\u3002</li> <li>Sync-in\u5199\u5165\u6570\u636e\u65f6\uff0c\u540c\u65f6\u5728\u8f85\u52a9\u8868\u63d2\u5165\u8bb0\u5f55\u3002</li> <li>Sync-out\u89e3\u6790binlog\uff0c\u82e5\u53d1\u73b0\u4e8b\u52a1\u6709\u5199\u8f85\u52a9\u8868\uff0c\u5219\u8bf4\u660e\u6765\u81ea\u5176\u4ed6\u673a\u623f\uff0c\u4e0d\u4f20\u8f93\u6b64\u6570\u636e\u3002</li> </ul> </li> <li>\u6570\u636e\u51b2\u7a81\uff1a<ul> <li>\u96be\u4ee5\u89e3\u51b3\uff1a\u5728\u4e0d\u540c\u673a\u623f\u51e0\u4e4e\u540c\u65f6\u4fee\u6539\u540c\u4e00\u6570\u636e\u3002</li> <li>LWW (Last Write Wins) \u7b56\u7565\uff1a\u6700\u540e\u5199\u5165\u8005\u80dc\u5229\uff08\u57fa\u4e8e\u4fee\u6539\u65f6\u95f4\u6233\uff09\uff0c\u4f46\u4e0d\u540c\u673a\u623f\u65f6\u95f4\u6233\u53ef\u80fd\u4e0d\u4e00\u81f4\uff0c\u4e0d\u51c6\u786e\u3002</li> <li>\u907f\u514d\u51b2\u7a81\uff1a<ul> <li>\u4e1a\u52a1\u903b\u8f91\u4e0d\u4f9d\u8d56\u6570\u636e\u5e93\u81ea\u589e\u4e3b\u952e\uff0c\u91c7\u7528\u5206\u5e03\u5f0f\u552f\u4e00ID\u3002</li> <li>\u673a\u623f\u5206\u6d41\u5c3d\u91cf\u4fdd\u8bc1\u4e0d\u540c\u7528\u6237\u88ab\u5206\u6d41\u5230\u4e0d\u540c\u673a\u623f\uff0c\u907f\u514d\u540c\u4e00\u7528\u6237\u6570\u636e\u5728\u591a\u673a\u623f\u540c\u65f6\u4fee\u6539\u3002</li> </ul> </li> </ul> </li> <li>\u603b\u7ed3\uff1aMySQL DRC\u6280\u672f\u6838\u5fc3\u8981\u70b9\u5305\u62ec\u4f2a\u4ece\u3001\u65ad\u70b9\u7eed\u4f20\u3001\u6570\u636e\u9632\u91cd\u3001\u9632\u6b62\u6570\u636e\u56de\u73af\u548c\u6570\u636e\u51b2\u7a81\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84/#redis-drc","title":"Redis DRC\u7684\u539f\u7406","text":"<ul> <li>\u4f2a\u4ece\uff1aSync-out\u6a21\u62dfRedis\u4ece\u5e93\uff0c\u5411Redis\u4e3b\u5e93\u590d\u5236\u5199\u547d\u4ee4\uff0c\u6682\u5b58\u5230\u672c\u5730\u3002</li> <li>\u65ad\u70b9\u7eed\u4f20\u548c\u6570\u636e\u9632\u91cd\uff1a<ul> <li>Redis\u65e0GTID\uff0c\u9700\u81ea\u5b9a\u4e49\u9012\u589e\u552f\u4e00ID\u7ed1\u5b9a\u5230\u6bcf\u4e2a\u5199\u547d\u4ee4\u3002</li> <li>Sync-out\u4fdd\u5b58\u5df2\u4f20\u8f93\u5199\u547d\u4ee4ID\uff0c\u6062\u590d\u540e\u7ee7\u7eed\u4f20\u8f93\u3002</li> <li>Sync-in\u4fdd\u5b58\u6700\u8fd1\u6210\u529f\u5199\u5165\u7684\u5199\u547d\u4ee4ID\uff0c\u82e5\u6536\u5230ID\u5c0f\u4e8e\u7b49\u4e8e\u6b64ID\u5219\u4e22\u5f03\u3002</li> </ul> </li> <li>\u9632\u6b62\u6570\u636e\u56de\u73af\uff1a<ul> <li>\u601d\u8def1 (\u4e0d\u63a8\u8350)\uff1a\u6539\u9020Redis\u5199\u547d\u4ee4\u683c\u5f0f\u643a\u5e26\u673a\u623f\u4fe1\u606f\uff08\u7ef4\u62a4\u6210\u672c\u9ad8\uff09\u3002</li> <li>\u601d\u8def2 (\u63a8\u8350)\uff1aRedis\u4e3b\u5e93\u8bc6\u522b\u5ba2\u6237\u7aef\u89d2\u8272\u3002\u589e\u52a0<code>REDIS_SYNC_IN</code>\u6807\u5fd7\uff0c\u82e5\u5199\u547d\u4ee4\u6765\u81eaSync-in\uff0c\u5219\u4e0d\u590d\u5236\u7ed9Sync-out\u3002</li> </ul> </li> <li>\u6570\u636e\u51b2\u7a81\uff1a<ul> <li>\u6bd4MySQL\u66f4\u590d\u6742\uff0cRedis\u547d\u4ee4\u4e30\u5bcc\uff0c\u96be\u5b9e\u73b0\u7edf\u4e00\u9632\u51b2\u7a81\u6570\u636e\u7ed3\u6784\u3002</li> <li>\u540c\u6837\u5efa\u8bae\u5c3d\u91cf\u907f\u514d\u6570\u636e\u51b2\u7a81\uff0c\u901a\u8fc7\u7528\u6237\u5206\u533a\u7b49\u65b9\u5f0f\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84/#_8","title":"\u5206\u6d41\u7b56\u7565","text":"<ul> <li>\u5168\u7403\u5e94\u7528\u5206\u6d41\u8981\u6c42\uff1a\u5fc5\u987b\u8003\u8651\u7528\u6237\u5730\u7406\u4f4d\u7f6e\u3002</li> <li>DNS\u5730\u57df\u89e3\u6790\uff1a\u4e3a\u4e0d\u540c\u56fd\u5bb6\u7528\u6237\u914d\u7f6e\u4e0d\u540c\u673a\u623f\u63a5\u5165\u5c42IP\uff0c\u591a\u6570\u7528\u6237\u53ef\u76f4\u8fbe\u76ee\u6807\u673a\u623f\u3002</li> <li>DNS\u5206\u6d41\u7f3a\u70b9\uff1a\u7528\u6237\u7f51\u7edc\u73af\u5883\uff08VPN, \u975e\u672c\u56fdSIM\u5361, \u51fa\u56fd\u65c5\u884c\uff09\u53ef\u80fd\u5e72\u6270\u89e3\u6790\u7ed3\u679c\u3002</li> <li>\u56fa\u5b9a\u7528\u6237\u6240\u5728\u56fd\u65b9\u6848 (\u63a8\u8350)\uff1a\u7528\u6237\u6ce8\u518c\u56fd\u7b56\u7565\u3002<ul> <li>\u65b0\u7528\u6237\u6ce8\u518c\u65f6\u5ba2\u6237\u7aef\u643a\u5e26\u56fd\u5bb6\u4fe1\u606f\u4f5c\u4e3a\u6ce8\u518c\u56fd\uff0c\u540e\u53f0\u4fdd\u5b58\u3002</li> <li>\u7528\u6237\u767b\u5f55\u65f6\uff0c\u6839\u636e\u6ce8\u518c\u56fd\u6620\u5c04\u5230\u9884\u914d\u7f6e\u7684\u673a\u623f\uff0c\u5373\u4f7f\u51fa\u56fd/\u4f7f\u7528VPN\u4e5f\u56fa\u5b9a\u8bbf\u95ee\u6b64\u673a\u623f\u3002</li> <li>\u4f18\u5316\uff1a\u76d1\u63a7\u7528\u6237\u8bbf\u95ee\u8bf7\u6c42\u56fd\u5bb6\u7ef4\u5ea6\uff0c\u82e5\u8fde\u7eed\u8f83\u957f\u65f6\u95f4\u4e0e\u6ce8\u518c\u56fd\u4e0d\u540c\uff0c\u53ef\u4fee\u6539\u6ce8\u518c\u56fd\uff0c\u63d0\u5347\u4f53\u9a8c\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84/#_9","title":"\u6570\u636e\u590d\u5236\u94fe\u8def","text":"<ul> <li>\u5168\u7f51\u72b6\u7ed3\u6784\uff1a\u6bcf\u4e2a\u673a\u623f\u90fd\u4e0e\u6240\u6709\u5176\u4ed6\u673a\u623f\u5efa\u7acb\u53cc\u5411\u6570\u636e\u590d\u5236\u94fe\u8def\u3002<ul> <li>\u94fe\u8def\u6570\uff1a<code>C(N,2) * 2</code>\u3002N\u4e2a\u673a\u623f\u65f6\u94fe\u8def\u6570\u6fc0\u589e\uff08\u59826\u4e2a\u673a\u623f15\u6761\u94fe\u8def\uff09\uff0c\u7ef4\u62a4\u6210\u672c\u9ad8\u3002</li> </ul> </li> <li>\u661f\u72b6\u7ed3\u6784 (\u63a8\u8350)\uff1a\u7ea6\u5b9a\u4e00\u4e2a\u673a\u623f\u4e3a\u4e2d\u5fc3\u673a\u623f\u3002<ul> <li>\u5176\u4ed6\u673a\u623f\u4e3b\u5e93\u6570\u636e\u4ec5\u590d\u5236\u5230\u4e2d\u5fc3\u673a\u623f\u3002</li> <li>\u4e2d\u5fc3\u673a\u623f\u518d\u5c06\u6570\u636e\u590d\u5236\u5230\u6240\u6709\u5176\u4ed6\u673a\u623f\u3002</li> <li>\u4f18\u52bf\uff1a\u663e\u8457\u964d\u4f4e\u94fe\u8def\u6570\uff08N-1 * 2\uff09\uff0c\u964d\u4f4e\u67b6\u6784\u590d\u6742\u5ea6\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F/","title":"\u9ad8\u5e76\u53d1\u7cfb\u7edf","text":""},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F/#_1","title":"\u9ad8\u5e76\u53d1\u67b6\u6784\u8bbe\u8ba1\u8981\u70b9","text":""},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F/#_2","title":"\u8861\u91cf\u6307\u6807","text":"<ol> <li>\u9ad8\u6027\u80fd:\u4ee3\u8868\u7cfb\u7edf\u5e76\u884c\u5904\u7406\u80fd\u529b\uff0c\u5173\u4e4e\u786c\u4ef6\u8d44\u6e90\u8282\u7ea6\u548c\u7528\u6237\u4f53\u9a8c\u3002<ul> <li>\u5e73\u5747\u54cd\u5e94\u65f6\u95f4: \u6613\u53d7\u6781\u7aef\u503c\u5f71\u54cd\uff0c\u4e0d\u63a8\u8350\u4f5c\u4e3a\u5355\u4e00\u6307\u6807\u3002</li> <li>\u54cd\u5e94\u65f6\u95f4PCTn\u7edf\u8ba1\u65b9\u5f0f: PCTn\u8868\u793a\u8bf7\u6c42\u54cd\u5e94\u65f6\u95f4\u6309\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\u540e\u7684\u7b2cn\u5206\u4f4d\u54cd\u5e94\u65f6\u95f4\u3002<ul> <li>PCT50=1ms: 50%\u8bf7\u6c42\u57281ms\u5185\u54cd\u5e94\u3002</li> <li>PCT99=800ms: 99%\u8bf7\u6c42\u5728800ms\u5185\u54cd\u5e94\u3002</li> <li>PCT999=1.2s: 99.9%\u8bf7\u6c42\u57281.2s\u5185\u54cd\u5e94\u3002</li> <li>\u7ecf\u9a8c\u63a8\u8350: \u5e73\u5747\u54cd\u5e94\u65f6\u95f4 &lt; 200ms\uff0c\u4e14 PCT99 &lt; 1s\u3002</li> </ul> </li> </ul> </li> <li>\u9ad8\u53ef\u7528\u6027\u6307\u6807:\u7cfb\u7edf\u957f\u671f\u7a33\u5b9a\u3001\u6b63\u5e38\u5bf9\u5916\u63d0\u4f9b\u670d\u52a1\uff0c\u907f\u514d\u6545\u969c\u3001\u5b95\u673a\u3001\u5d29\u6e83\u3002<ul> <li>\u53ef\u7528\u6027 = \u7cfb\u7edf\u6b63\u5e38\u8fd0\u884c\u65f6\u95f4 / \u7cfb\u7edf\u603b\u8fd0\u884c\u65f6\u95f4\u3002</li> <li>\u4f7f\u7528\u201cN\u4e2a9\u201d\u63cf\u8ff0\uff0c\u4f8b\u5982\uff1a<ul> <li>99% (2\u4e2a9): \u4e00\u5e74\u5185\u6545\u969c3.65\u5929\uff0c\u4e00\u65e5\u5185\u6545\u969c14.4\u5206\u949f\u3002</li> <li>99.9% (3\u4e2a9): \u4e00\u5e74\u5185\u6545\u969c8\u5c0f\u65f6\uff0c\u4e00\u65e5\u5185\u6545\u969c1.44\u5206\u949f\u3002</li> <li>\u8981\u6c42: \u81f3\u5c113\u4e2a9\u62164\u4e2a9\uff0c\u5b9e\u9645\u76d1\u63a7\u5e38\u53d699.95%\u3002</li> </ul> </li> </ul> </li> <li>\u53ef\u6269\u5c55\u6027\u6307\u6807:\u7cfb\u7edf\u80fd\u901a\u8fc7\u6c34\u5e73\u6269\u5bb9\u5e94\u5bf9\u8bf7\u6c42\u91cf\u589e\u957f\u548c\u7a81\u53d1\u6d41\u91cf\u3002<ul> <li>\u53ef\u6269\u5c55\u6027 = \u541e\u5410\u91cf\u63d0\u5347\u6bd4\u4f8b / \u96c6\u7fa4\u8282\u70b9\u589e\u52a0\u6bd4\u4f8b\u3002</li> <li>\u7ecf\u9a8c\u63a8\u8350: 70% ~ 80% \u53ef\u6269\u5c55\u6027\u3002</li> </ul> </li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F/#_3","title":"\u9ad8\u5e76\u53d1\u573a\u666f\u5206\u7c7b","text":"<ul> <li>\u9ad8\u5e76\u53d1\u8bf7\u6c42\u53ef\u5f52\u7c7b\u4e3a\u9ad8\u5e76\u53d1\u8bfb\u548c\u9ad8\u5e76\u53d1\u5199\uff0c\u56e0\u4e3a\u4e24\u79cd\u573a\u666f\u901a\u5e38\u6709\u4e0d\u540c\u7684\u89e3\u51b3\u65b9\u6848\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F/#_4","title":"\u6570\u636e\u5e93\u8bfb/\u5199\u5206\u79bb","text":"<p>\u9002\u7528\u4e8e\u8bfb\u591a\u5199\u5c11\u7684\u5e94\u7528\uff0c\u5c06\u6570\u636e\u5e93\u8bf7\u6c42\u5206\u4e3a\u8bfb\u548c\u5199\uff0c\u5206\u522b\u7531\u4e0d\u540c\u7684\u6570\u636e\u5e93\u5904\u7406\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F/#_5","title":"\u8bfb/\u5199\u5206\u79bb\u67b6\u6784","text":"<ul> <li>\u901a\u5e38\u4f7f\u7528\u6570\u636e\u5e93\u4e3b\u4ece\u590d\u5236\u6280\u672f\u5b9e\u73b0\uff0cMaster\u4f5c\u4e3a\u5199\u5e93\uff0cSlave\u4f5c\u4e3a\u8bfb\u5e93\uff0c\u4e00\u4e2aMaster\u53ef\u8fde\u63a5\u591a\u4e2aSlave\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F/#_6","title":"\u8bfb/\u5199\u8bf7\u6c42\u8def\u7531\u65b9\u5f0f","text":"<ol> <li>\u57fa\u4e8e\u6570\u636e\u5e93Proxy\u4ee3\u7406\u7684\u65b9\u5f0f:<ul> <li>\u5728\u4e1a\u52a1\u670d\u52a1\u548c\u6570\u636e\u5e93\u670d\u52a1\u5668\u4e4b\u95f4\u589e\u52a0Proxy\u4ee3\u7406\u8282\u70b9\uff0cProxy\u6839\u636eSQL\u8bed\u53e5\uff08\u5982insert/delete/update\u8f6cMaster\uff0cselect\u8f6cSlave\uff09\u8fdb\u884c\u8def\u7531\u3002</li> <li>\u5f00\u6e90\u9879\u76ee\uff1aMySQL-Proxy, MyCat (\u4e2d\u5fc3\u5316\u4ee3\u7406), MySQL-Router (\u672c\u5730\u4ee3\u7406)\u3002</li> </ul> </li> <li>\u57fa\u4e8e\u5e94\u7528\u5185\u5d4c\u7684\u65b9\u5f0f:<ul> <li>\u5728\u4e1a\u52a1\u670d\u52a1\u8fdb\u7a0b\u5185\u8fdb\u884c\u8bf7\u6c42\u8bfb/\u5199\u5206\u79bb\u3002</li> <li>\u5f00\u6e90\u9879\u76ee\uff1agorm, shardingjdbc\u3002</li> </ul> </li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F/#_7","title":"\u4e3b\u4ece\u5ef6\u8fdf\u4e0e\u89e3\u51b3\u65b9\u6848","text":"<ul> <li>\u95ee\u9898: \u6570\u636e\u5e93\u4e3b\u4ece\u590d\u5236\u5b58\u5728\u6570\u636e\u590d\u5236\u5ef6\u8fdf\uff08\u4e3b\u4ece\u5ef6\u8fdf\uff09\uff0c\u5bfc\u81f4Slave\u6570\u636e\u4e0d\u4e00\u81f4\u3002</li> <li>\u89e3\u51b3\u65b9\u6848:<ol> <li>\u540c\u6b65\u6570\u636e\u590d\u5236: Master\u7b49\u5f85\u6240\u6709Slave\u6536\u5230\u6570\u636e\u540e\u624d\u8fd4\u56de\u6210\u529f\u3002<ul> <li>\u4f18\u70b9\uff1a\u4fdd\u8bc1\u6570\u636e\u5f3a\u4e00\u81f4\u6027\u3002</li> <li>\u7f3a\u70b9\uff1a\u5199\u8bf7\u6c42\u5ef6\u8fdf\u5927\u5927\u589e\u52a0\uff0c\u6570\u636e\u5e93\u541e\u5410\u91cf\u4e0b\u964d\uff0c\u4ec5\u9002\u7528\u4e8e\u4f4e\u5e76\u53d1\u573a\u666f\u3002</li> </ul> </li> <li>\u5f3a\u5236\u8bfb\u4e3b: \u5bf9\u4e8e\u5bf9\u4e3b\u4ece\u5ef6\u8fdf\u5bb9\u5fcd\u6027\u4f4e\u7684\u4e1a\u52a1\u573a\u666f\uff0c\u5f3a\u5236\u5c06\u8bfb\u8bf7\u6c42\u8def\u7531\u5230Master\u3002</li> <li>\u4f1a\u8bdd\u5206\u79bb: \u67d0\u4f1a\u8bdd\u6267\u884c\u5199\u64cd\u4f5c\u540e\uff0c\u5728\u6781\u77ed\u65f6\u95f4\u5185\u5176\u8bfb\u8bf7\u6c42\u5f3a\u5236\u8def\u7531\u5230Master\uff0c\u4fdd\u8bc1\u201c\u8bfb\u5df1\u4e4b\u6240\u5199\u201d\u3002</li> </ol> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F/#_8","title":"\u672c\u5730\u7f13\u5b58","text":"<p>\u4e1a\u52a1\u670d\u52a1\u8fdb\u7a0b\u5c06\u83b7\u53d6\u5230\u7684\u6570\u636e\u7f13\u5b58\u5230\u672c\u5730\u5185\u5b58\u4e2d\uff0c\u5c06\u7f51\u7edc\u8bf7\u6c42\u8f6c\u5316\u4e3a\u9ad8\u6548\u5185\u5b58\u5b58\u53d6\uff0c\u63d0\u9ad8\u6570\u636e\u8bfb\u53d6\u6548\u7387\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F/#_9","title":"\u57fa\u672c\u7684\u7f13\u5b58\u6dd8\u6c70\u7b56\u7565","text":"<ul> <li>FIFO (First In First Out): \u4f18\u5148\u6dd8\u6c70\u6700\u65e9\u8fdb\u5165\u7f13\u5b58\u7684\u6570\u636e\u3002\u547d\u4e2d\u7387\u4f4e\uff0c\u5f88\u5c11\u4f7f\u7528\u3002</li> <li>LFU (Least Frequently Used): \u4f18\u5148\u6dd8\u6c70\u6700\u4e0d\u5e38\u7528\u7684\u6570\u636e\u3002\u901a\u8fc7\u8bbf\u95ee\u8ba1\u6570\u5b9e\u73b0\uff0c\u9002\u5408\u70ed\u70b9\u6570\u636e\uff0c\u4f46\u65e9\u671f\u9ad8\u9891\u6570\u636e\u53ef\u80fd\u957f\u671f\u5360\u7528\u3002</li> <li>LRU (Least Recent Used): \u4f18\u5148\u6dd8\u6c70\u6700\u8fd1\u6700\u5c11\u4f7f\u7528\u7684\u6570\u636e\u3002\u57fa\u4e8e\u53cc\u5411\u94fe\u8868\u548c\u54c8\u5e0c\u8868\u5b9e\u73b0\uff0c\u80fd\u63d0\u9ad8\u77ed\u671f\u70ed\u70b9\u6570\u636e\u7684\u547d\u4e2d\u7387\uff0c\u4f46\u5076\u53d1\u6027\u8bbf\u95ee\u51b7\u6570\u636e\u6216\u6279\u91cf\u8bbf\u95ee\u53ef\u80fd\u5bfc\u81f4\u70ed\u70b9\u6570\u636e\u88ab\u6dd8\u6c70\u3002</li> <li>W-TinyLFU: \u7ed3\u5408LFU\u548cLRU\u4f18\u70b9\u7684\u66f4\u590d\u6742\u7b56\u7565\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F/#w-tinylfu","title":"W-TinyLFU \u7b56\u7565","text":"<ul> <li>\u7ed3\u5408\u4e86LFU\u548cLRU\u7684\u4f18\u70b9\uff0c\u517c\u5177\u9ad8\u7f13\u5b58\u547d\u4e2d\u7387\u548c\u4f4e\u5185\u5b58\u5360\u7528\uff0c\u88abRedis\u548cCaffeine Cache\u4f7f\u7528\u3002</li> <li>\u5185\u5b58\u7a7a\u95f4\u5e03\u5c40:<ol> <li>Window LRU\u6bb5 (1%\u603b\u7f13\u5b58\u7a7a\u95f4): \u4f7f\u7528LRU\u7b56\u7565\u7f13\u5b58\u6570\u636e\u3002</li> <li>Segment LRU\u6bb5 (SLRU): \u5212\u5206\u4e3a <code>protected</code> \u6bb5 (80%) \u548c <code>probation</code> \u6bb5 (20%)\u3002<ul> <li><code>probation</code> \u6bb5\u5b58\u50a8\u6700\u8fd1\u88ab\u8bbf\u95ee1\u6b21\u7684\u7f13\u5b58\u6570\u636e\u3002</li> <li><code>protected</code> \u6bb5\u5b58\u50a8\u6700\u8fd1\u88ab\u8bbf\u95ee\u81f3\u5c112\u6b21\u7684\u7f13\u5b58\u6570\u636e\u3002</li> </ul> </li> </ol> </li> <li>\u5de5\u4f5c\u6d41\u7a0b:<ol> <li>\u9996\u6b21\u8bbf\u95ee\u6570\u636eX\u7f13\u5b58\u5230Window LRU\u3002</li> <li>Window LRU\u6ee1\u65f6\uff0cLRU\u6dd8\u6c70\u6570\u636e\u79fb\u5165probation\u6bb5\u3002</li> <li>\u6570\u636eX\u518d\u6b21\u88ab\u8bbf\u95ee\u65f6\uff0c\u79fb\u5165protected\u6bb5\u3002</li> <li>protected\u6bb5\u6ee1\u65f6\uff0cLRU\u6dd8\u6c70\u6570\u636eX\u79fb\u5165probation\u6bb5\u3002</li> <li>probation\u6bb5\u6ee1\u65f6\uff0c\u6dd8\u6c70\u6570\u636eV\uff0c\u4e0e\u6570\u636eX\u6bd4\u8f83\u8bbf\u95ee\u9891\u7387\uff0c\u9ad8\u8005\u7559\u4e0b\u3002</li> </ol> </li> <li>Count-Min Sketch\u8fd1\u4f3c\u7b97\u6cd5: \u7528\u4e8e\u4fdd\u5b58\u6bcf\u6761\u7f13\u5b58\u6570\u636e\u7684\u8bbf\u95ee\u9891\u7387\u3002<ul> <li>\u539f\u7406: \u9009\u5b9aM\u4e2a\u54c8\u5e0c\u51fd\u6570\uff0c\u5206\u914d\u4e00\u4e2aN\u884cM\u5217\u7684\u4e8c\u7ef4\u6570\u7ec4\u3002\u6570\u636e\u8bbf\u95ee\u65f6\uff0cM\u4e2a\u54c8\u5e0c\u503c\u53d6\u6a21\uff0c\u5bf9\u5e94M\u4e2a\u4f4d\u7f6e\u503c\u52a01\u3002\u67e5\u8be2\u65f6\u53d6M\u4e2a\u4f4d\u7f6e\u4e2d\u7684\u6700\u5c0f\u503c\u3002</li> <li>\u4f18\u5316: \u6bcf\u4e2a\u4f4d\u7f6e4bit\u8868\u793a\uff0c\u4e0a\u965015\u6b21\u3002\u91c7\u7528\u57fa\u4e8e\u6ed1\u52a8\u7a97\u53e3\u7684\u65f6\u95f4\u8870\u51cf\u8bbe\u8ba1\u673a\u5236\uff0c\u5b9a\u65f6\u5c06\u8bbf\u95ee\u9891\u7387\u9664\u4ee52\uff0c\u89e3\u51b3\u5927\u91cf\u6570\u636e\u5747\u8fbe\u523015\u6b21\u9891\u7387\u7684\u95ee\u9898\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F/#singleflight","title":"\u7f13\u5b58\u51fb\u7a7f\u4e0eSingleFlight","text":"<ul> <li>\u7f13\u5b58\u51fb\u7a7f: \u7f13\u5b58\u4e2d\u4e00\u6761\u70ed\u95e8\u6570\u636e\u5728\u7f13\u5b58\u5931\u6548\u7684\u77ac\u95f4\uff0c\u5927\u91cf\u5e76\u53d1\u8bf7\u6c42\u76f4\u63a5\u8bbf\u95ee\u6570\u636e\u5e93\uff0c\u5bfc\u81f4\u6570\u636e\u5e93\u88ab\u51fb\u57ae\u3002</li> <li>SingleFlight: Golang\u8bed\u8a00\u6269\u5c55\u5305\u63d0\u4f9b\u7684\u540c\u6b65\u539f\u8bed\uff0c\u7528\u4e8e\u89e3\u51b3\u7f13\u5b58\u51fb\u7a7f\u95ee\u9898\u3002<ul> <li>\u539f\u7406: \u5c06\u5bf9\u540c\u4e00\u6761\u6570\u636e\u7684\u5e76\u53d1\u8bf7\u6c42\u8fdb\u884c\u5408\u5e76\uff0c\u53ea\u5141\u8bb8\u4e00\u4e2a\u8bf7\u6c42\u8bbf\u95ee\u6570\u636e\u5e93\uff0c\u5e76\u5c06\u83b7\u53d6\u5230\u7684\u6570\u636e\u7ed3\u679c\u4e0e\u5176\u4ed6\u8bf7\u6c42\u5171\u4eab\u3002</li> <li>\u6838\u5fc3\u673a\u5236: \u4f7f\u7528 <code>sync.WaitGroup</code>\u3002\u7b2c\u4e00\u4e2a\u8bf7\u6c42\u8c03\u7528 <code>wg.Add(1)</code> \u5e76\u6267\u884c\u6570\u636e\u8bbf\u95ee\uff1b\u5176\u4ed6\u5e76\u53d1\u8bf7\u6c42\u8c03\u7528 <code>wg.Wait()</code> \u963b\u585e\u7b49\u5f85\u3002\u6570\u636e\u8bbf\u95ee\u5b8c\u6210\u540e\uff0c\u8c03\u7528 <code>wg.Done()</code> \u5c06 <code>WaitGroup</code> \u8ba1\u6570\u5f52\u96f6\uff0c\u5524\u9192\u5176\u4ed6\u8bf7\u6c42\uff0c\u5171\u4eab\u7ed3\u679c\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F/#_10","title":"\u5206\u5e03\u5f0f\u7f13\u5b58","text":"<p>\u9488\u5bf9\u672c\u5730\u7f13\u5b58\u65e0\u6cd5\u5171\u4eab\u3001\u7f16\u7a0b\u8bed\u8a00\u9650\u5236\u3001\u53ef\u6269\u5c55\u6027\u5dee\u3001\u5185\u5b58\u6613\u5931\u6027\u7b49\u95ee\u9898\uff0c\u5f15\u5165\u5206\u5e03\u5f0f\u7f13\u5b58\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F/#_11","title":"\u5206\u5e03\u5f0f\u7f13\u5b58\u9009\u578b","text":"<ul> <li>Memcached vs Redis: Redis\u66f4\u6d41\u884c\u3002<ul> <li>\u6570\u636e\u7c7b\u578b\u4e30\u5bcc: Redis\u652f\u6301\u5b57\u7b26\u4e32\u3001\u5217\u8868\u3001\u96c6\u5408\u3001\u54c8\u5e0c\u3001\u6709\u5e8f\u96c6\u5408\u7b49\u3002Memcached\u53ea\u652f\u6301\u5b57\u7b26\u4e32\u3002</li> <li>\u6570\u636e\u53ef\u6301\u4e45\u5316: Redis\u652f\u6301RDB\u548cAOF\u673a\u5236\u3002Memcached\u65e0\u3002</li> <li>\u9ad8\u53ef\u7528\u6027: Redis\u652f\u6301\u4e3b\u4ece\u590d\u5236\uff0c\u6545\u969c\u540e\u53ef\u901a\u8fc7\u4e3b\u4ece\u5207\u6362\u4fdd\u8bc1\u670d\u52a1\u4e0d\u95f4\u65ad\u3002</li> <li>\u5206\u5e03\u5f0f\u80fd\u529b: Memcached\u9700\u5ba2\u6237\u7aef\u5b9e\u73b0\u4e00\u81f4\u6027\u54c8\u5e0c\u3002Redis\u6709\u5b98\u65b9\u7684Redis Cluster\uff0c\u4e1a\u754c\u4e5f\u6709Codis\u3001Twemproxy\u7b49\u65b9\u6848\u3002</li> </ul> </li> <li>\u7ed3\u8bba: Redis\u56e0\u6570\u636e\u7c7b\u578b\u4e30\u5bcc\u3001\u6301\u4e45\u5316\u3001\u9ad8\u53ef\u7528\u3001\u9ad8\u6269\u5c55\u6027\u6210\u4e3a\u9996\u9009\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F/#redis","title":"\u5982\u4f55\u4f7f\u7528Redis\u7f13\u5b58","text":"<ol> <li>\u5c1d\u8bd5\u4eceRedis\u7f13\u5b58\u67e5\u627e\u6570\u636e\u3002\u547d\u4e2d\u5219\u8fd4\u56de\u3002</li> <li>\u672a\u547d\u4e2d\u5219\u4ece\u6570\u636e\u5e93\u8bfb\u53d6\u6570\u636e\u3002</li> <li>\u5c06\u6570\u636e\u4fdd\u5b58\u5230Redis\u7f13\u5b58\uff0c\u5e76\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\u3002</li> <li>\u4e0b\u6b21\u8bf7\u6c42\u547d\u4e2d\u7f13\u5b58\u3002</li> <li>\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\u7684\u597d\u5904:<ul> <li>\u907f\u514d\u6570\u636e\u5806\u79ef\u9020\u6210\u8d44\u6e90\u6d6a\u8d39\uff0c\u81ea\u52a8\u5220\u9664\u4e0d\u518d\u8bbf\u95ee\u7684\u6570\u636e\u3002</li> <li>\u5f53\u6570\u636e\u5e93\u4e0eRedis\u7f13\u5b58\u51fa\u73b0\u6570\u636e\u4e0d\u4e00\u81f4\u65f6\uff0c\u8fc7\u671f\u65f6\u95f4\u4f5c\u4e3a\u515c\u5e95\u624b\u6bb5\uff0c\u4fdd\u8bc1\u6700\u7ec8\u4e00\u81f4\u6027\u3002</li> </ul> </li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F/#_12","title":"\u7f13\u5b58\u7a7f\u900f","text":"<ul> <li>\u95ee\u9898: \u7528\u6237\u8bf7\u6c42\u8bbf\u95ee\u4e00\u6761\u6570\u636e\u5e93\u4e2d\u4e0d\u5b58\u5728\u7684\u975e\u6cd5\u6570\u636e\uff0cRedis\u7f13\u5b58\u5f62\u540c\u865a\u8bbe\uff0c\u8bf7\u6c42\u76f4\u63a5\u7a7f\u900f\u5230\u6570\u636e\u5e93\uff0c\u53ef\u80fd\u5bfc\u81f4\u6570\u636e\u5e93\u5d29\u6e83\u3002</li> <li>\u521d\u6b65\u65b9\u6848: \u5728Redis\u7f13\u5b58\u4e2d\u4fdd\u5b58\u7a7a\u503c\uff0c\u62e6\u622a\u540e\u7eed\u8bf7\u6c42\u3002<ul> <li>\u7f3a\u70b9: \u5927\u91cf\u7a7a\u503c\u53ef\u80fd\u5360\u636e\u5185\u5b58\uff0c\u964d\u4f4e\u547d\u4e2d\u7387\u3002</li> </ul> </li> <li>\u4f18\u5316\u65b9\u6848: \u4f7f\u7528\u5e03\u9686\u8fc7\u6ee4\u5668 (Bloom Filter)\u3002<ul> <li>\u539f\u7406: \u7531\u56fa\u5b9a\u957f\u5ea6m\u7684\u4e8c\u8fdb\u5236\u5411\u91cf\u548cK\u4e2a\u54c8\u5e0c\u51fd\u6570\u7ec4\u6210\u3002\u6570\u636e\u52a0\u5165\u65f6\uff0cK\u4e2a\u54c8\u5e0c\u503c\u53d6\u6a21\uff0c\u5bf9\u5e94\u4f4d\u8bbe\u4e3a1\u3002\u67e5\u8be2\u65f6\uff0c\u82e5K\u4e2a\u4f4d\u7f6e\u6709\u4efb\u610f\u4e00\u4e2a\u4e3a0\uff0c\u5219\u6570\u636e\u4e00\u5b9a\u4e0d\u5b58\u5728\uff1b\u82e5\u90fd\u4e3a1\uff0c\u5219\u6570\u636e\u53ef\u80fd\u5b58\u5728\uff08\u5b58\u5728\u8bef\u5224\u7387\uff09\u3002</li> <li>\u5e94\u7528: \u5c06\u6570\u636e\u5e93\u6240\u6709\u6570\u636e\u52a0\u5165\u5e03\u9686\u8fc7\u6ee4\u5668\u3002\u8bf7\u6c42\u672a\u547d\u4e2dRedis\u65f6\uff0c\u5148\u67e5\u5e03\u9686\u8fc7\u6ee4\u5668\u3002\u82e5\u8ba4\u4e3a\u4e0d\u5b58\u5728\uff0c\u5219\u4e0d\u518d\u8bbf\u95ee\u6570\u636e\u5e93\u3002\u82e5\u8ba4\u4e3a\u53ef\u80fd\u5b58\u5728\uff0c\u5219\u7ee7\u7eed\u8bbf\u95ee\u6570\u636e\u5e93\u3002\u5373\u4f7f\u6709\u8bef\u5224\uff0c\u4e5f\u80fd\u5927\u5927\u51cf\u5c11\u5bf9\u6570\u636e\u5e93\u7684\u65e0\u6548\u8bbf\u95ee\uff0c\u4e14\u7a7a\u503c\u7f13\u5b58\u91cf\u6781\u5c11\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F/#_13","title":"\u7f13\u5b58\u96ea\u5d29","text":"<ul> <li>\u95ee\u9898: Redis\u7f13\u5b58\u4e2d\u5927\u91cf\u6570\u636e\u5728\u540c\u4e00\u65f6\u95f4\u8fc7\u671f\uff0c\u6216Redis\u670d\u52a1\u5b95\u673a\uff0c\u5bfc\u81f4\u8bf7\u6c42\u5168\u90e8\u6d8c\u5411\u6570\u636e\u5e93\u3002</li> <li>\u89e3\u51b3\u65b9\u6848:<ul> <li>\u8fc7\u671f\u65f6\u95f4\u968f\u673a\u5206\u5e03: \u907f\u514d\u5927\u91cf\u6570\u636e\u6709\u76f8\u540c\u8fc7\u671f\u65f6\u95f4\u3002</li> <li>\u9ad8\u53ef\u7528Redis\u96c6\u7fa4: \u964d\u4f4eRedis\u670d\u52a1\u5b95\u673a\u6982\u7387\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F/#_14","title":"\u7f13\u5b58\u66f4\u65b0","text":"<ul> <li>\u8ba8\u8bba\u56db\u79cd\u7f13\u5b58\u4e0e\u6570\u636e\u5e93\u6570\u636e\u66f4\u65b0\u7b56\u7565\uff0c\u76ee\u6807\u662f\u4fdd\u8bc1\u6570\u636e\u4e00\u81f4\u6027\u3002</li> <li>\u65b9\u68481: \u5148\u4fee\u6539\u7f13\u5b58\uff0c\u518d\u66f4\u65b0\u6570\u636e\u5e93<ul> <li>\u95ee\u9898: \u5e76\u53d1\u5199\u8bf7\u6c42\u53ef\u80fd\u5bfc\u81f4\u7f13\u5b58\u4e0e\u6570\u636e\u5e93\u6570\u636e\u4e0d\u4e00\u81f4\uff08\u5982A\u5148\u6539\u7f13\u5b58\uff0cB\u540e\u6539\u7f13\u5b58\uff0cB\u5148\u66f4\u65b0DB\uff0cA\u540e\u66f4\u65b0DB\uff0c\u6700\u7ec8\u7f13\u5b58\u662fB\u7684\u503c\uff0cDB\u662fA\u7684\u503c\uff09\u3002\u4e0d\u652f\u6301\u4e8b\u52a1\u56de\u6eda\uff0c\u4e0d\u53ef\u53d6\u3002</li> </ul> </li> <li>\u65b9\u68482: \u5148\u66f4\u65b0\u6570\u636e\u5e93\uff0c\u518d\u4fee\u6539\u7f13\u5b58<ul> <li>\u95ee\u9898: \u5e76\u53d1\u5199\u8bf7\u6c42\u53ef\u80fd\u5bfc\u81f4\u7f13\u5b58\u4e0e\u6570\u636e\u5e93\u6570\u636e\u4e0d\u4e00\u81f4\uff08\u4e0e\u65b9\u68481\u7c7b\u4f3c\uff0c\u53ea\u662f\u987a\u5e8f\u76f8\u53cd\uff09\u3002\u4e0d\u53ef\u53d6\u3002</li> </ul> </li> <li>\u65b9\u68483: \u5148\u5220\u9664\u7f13\u5b58\uff0c\u518d\u66f4\u65b0\u6570\u636e\u5e93<ul> <li>\u95ee\u9898: \u5e76\u53d1\u8bfb/\u5199\u8bf7\u6c42\u53ef\u80fd\u5bfc\u81f4\u6570\u636e\u4e0d\u4e00\u81f4\u3002<ul> <li>\u5199\u8bf7\u6c42A\u5220\u9664\u7f13\u5b58\uff0c\u8bfb\u8bf7\u6c42B\u672a\u547d\u4e2d\uff0cB\u4eceDB\u8bfb\u53d6\u65e7\u6570\u636ea\u5e76\u5199\u5165\u7f13\u5b58\uff0cA\u66f4\u65b0DB\u4e3ab\u3002\u6b64\u65f6\u7f13\u5b58\u4e3aa\uff0cDB\u4e3ab\u3002</li> </ul> </li> </ul> </li> <li>\u65b9\u68484: \u5148\u66f4\u65b0\u6570\u636e\u5e93\uff0c\u518d\u5220\u9664\u7f13\u5b58 (\u63a8\u8350)<ul> <li>\u4f18\u70b9: \u5f88\u597d\u5730\u89e3\u51b3\u4e86\u5e76\u53d1\u5199\u548c\u5e76\u53d1\u8bfb/\u5199\u573a\u666f\u4e0b\u7684\u6570\u636e\u4e0d\u4e00\u81f4\u95ee\u9898\u3002\u6700\u540e\u4e00\u4e2a\u64cd\u4f5c\u603b\u662f\u5220\u9664\u7f13\u5b58\uff0c\u4fdd\u8bc1\u540e\u7eed\u8bfb\u8bf7\u6c42\u4ece\u6570\u636e\u5e93\u83b7\u53d6\u6700\u65b0\u503c\u3002</li> <li>\u5220\u9664\u7f13\u5b58\u5931\u8d25\u5904\u7406:<ul> <li>\u7b80\u5355\u91cd\u8bd5\u5220\u9664\u7f13\u5b58\u3002</li> <li>\u4f7f\u7528\u6d88\u606f\u961f\u5217\u76d1\u542c\u6570\u636e\u5e93binlog\uff0c\u5f02\u6b65\u5220\u9664\u7f13\u5b58\uff0c\u5229\u7528\u6d88\u606f\u961f\u5217\u91cd\u8bd5\u673a\u5236\u3002</li> <li>\u63a8\u8350: \u5931\u8d25\u65f6\u4ec5\u6267\u884c\u4e00\u6b21\u5f02\u6b65\u91cd\u8bd5\uff0c\u5982\u679c\u4ecd\u5931\u8d25\u5219\u4e0d\u518d\u5904\u7406\uff0c\u56e0\u4e3a\u6982\u7387\u6781\u4f4e\uff0c\u4e14\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\u673a\u5236\u53ef\u4f5c\u4e3a\u515c\u5e95\u3002</li> </ul> </li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F/#cqrs","title":"\u9ad8\u5e76\u53d1\u8bfb\u573a\u666f\u603b\u7ed3\uff1aCQRS","text":"<p>CQRS (Command Query Responsibility Segregation, \u547d\u4ee4\u67e5\u8be2\u804c\u8d23\u5206\u79bb) \u6a21\u5f0f\u5c06\u6570\u636e\u7684\u8bfb\u53d6\u64cd\u4f5c\u4e0e\u66f4\u65b0\u64cd\u4f5c\u5206\u79bb\uff0c\u5176\u672c\u8d28\u662f\u8bfb/\u5199\u5206\u79bb\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F/#cqrs_1","title":"CQRS\u7684\u7b80\u8981\u67b6\u6784\u4e0e\u5b9e\u73b0","text":"<ol> <li>\u5ba2\u6237\u7aef\u53d1\u8d77 <code>command</code> (\u5199\u8bf7\u6c42) \u4ea4\u7ed9\u5199\u6570\u636e\u5b58\u50a8\u5904\u7406\u3002</li> <li>\u5199\u6570\u636e\u5b58\u50a8\u5b8c\u6210\u6570\u636e\u53d8\u66f4\u540e\uff0c\u5c06\u6570\u636e\u53d8\u66f4\u6d88\u606f\u53d1\u9001\u5230\u6d88\u606f\u961f\u5217\u3002</li> <li>\u8bfb\u6570\u636e\u5b58\u50a8\u76d1\u542c\u6d88\u606f\u961f\u5217\uff0c\u6536\u5230\u6570\u636e\u53d8\u66f4\u6d88\u606f\u540e\u5c06\u6570\u636e\u5199\u5165\u81ea\u8eab\u3002</li> <li>\u5ba2\u6237\u7aef\u53d1\u8d77 <code>query</code> (\u8bfb\u8bf7\u6c42) \u4ea4\u7ed9\u8bfb\u6570\u636e\u5b58\u50a8\u5904\u7406\u3002</li> <li>\u8bfb\u6570\u636e\u5b58\u50a8\u8fd4\u56de\u6570\u636e\u3002</li> <li>\u7ec4\u4ef6:<ul> <li>\u5199\u6570\u636e\u5b58\u50a8: \u9002\u5408\u9ad8\u5e76\u53d1\u5199\u5165\u7684\u5b58\u50a8\u7cfb\u7edf\u3002</li> <li>\u8bfb\u6570\u636e\u5b58\u50a8: \u9002\u5408\u9ad8\u5e76\u53d1\u8bfb\u53d6\u7684\u5b58\u50a8\u7cfb\u7edf\u3002</li> <li>\u6570\u636e\u4f20\u8f93\u901a\u9053: \u8db3\u591f\u5065\u58ee\uff0c\u4fdd\u8bc1\u6570\u636e\u4e0d\u4e22\u5931\uff08\u5982\u6d88\u606f\u961f\u5217\u3001\u5b9a\u65f6\u4efb\u52a1\uff09\u3002</li> </ul> </li> <li>\u6848\u4f8b:<ul> <li>\u6570\u636e\u5e93\u8bfb/\u5199\u5206\u79bb: \u5199\u6570\u636e\u5b58\u50a8\u662fMaster\uff0c\u8bfb\u6570\u636e\u5b58\u50a8\u662fSlave\uff0c\u6d88\u606f\u961f\u5217\u662f\u6570\u636e\u5e93\u4e3b\u4ece\u590d\u5236\u3002</li> <li>\u5206\u5e03\u5f0f\u7f13\u5b58: \u5199\u6570\u636e\u5b58\u50a8\u662f\u6570\u636e\u5e93\uff0c\u8bfb\u6570\u636e\u5b58\u50a8\u662fRedis\u7f13\u5b58\uff0c\u6d88\u606f\u961f\u5217\u662f\u6d88\u606f\u4e2d\u95f4\u4ef6\u76d1\u542c\u6570\u636e\u5e93binlog\u3002</li> </ul> </li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F/#_15","title":"\u66f4\u591a\u7684\u4f7f\u7528\u573a\u666f","text":"<ol> <li>\u641c\u7d22\u573a\u666f:<ul> <li>\u6570\u636e\u5e93 (\u5199\u6570\u636e\u5b58\u50a8) \u8d1f\u8d23\u8d26\u53f7\u4fe1\u606f\u7ba1\u7406\u3002</li> <li>Elasticsearch (\u8bfb\u6570\u636e\u5b58\u50a8) \u8d1f\u8d23\u641c\u7d22\u7528\u6237\u6635\u79f0\u3002</li> <li>\u6d88\u606f\u4e2d\u95f4\u4ef6\u76d1\u542c\u6570\u636e\u5e93binlog\uff0c\u5c06\u6635\u79f0\u66f4\u6539\u540c\u6b65\u5230Elasticsearch\u3002</li> </ul> </li> <li>\u591a\u8868\u5173\u8054\u67e5\u8be2\u573a\u666f:<ul> <li>\u5c06\u590d\u6742\u7684\u4e1a\u52a1\u6570\u636e\u8fdb\u884c\u805a\u5408\u8ba1\u7b97\uff0c\u7ed3\u679c\u5b58\u50a8\u5230\u5305\u542b\u5168\u90e8\u5173\u8054\u5b57\u6bb5\u7684\u5bbd\u8868\u4e2d (\u8bfb\u6570\u636e\u5b58\u50a8)\u3002</li> <li>\u67e5\u8be2\u65f6\u76f4\u63a5\u8bfb\u53d6\u5bbd\u8868\uff0c\u907f\u514d\u6602\u8d35\u7684SQL join\u3002</li> <li>Worker\u670d\u52a1\u4f7f\u7528\u6d88\u606f\u4e2d\u95f4\u4ef6\u76d1\u542c\u6570\u636e\u5e93binlog\u6216\u5b9a\u65f6\u4efb\u52a1\uff0c\u6267\u884c\u6570\u636e\u805a\u5408\u8ba1\u7b97\u5e76\u5199\u5165\u5bbd\u8868\u3002</li> </ul> </li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F/#cqrs_2","title":"CQRS\u67b6\u6784\u7684\u7279\u70b9","text":"<ul> <li>\u5199\u6570\u636e\u5b58\u50a8\u548c\u8bfb\u6570\u636e\u5b58\u50a8\u901a\u5e38\u9009\u7528\u4e0d\u540c\u7684\u5b58\u50a8\u6a21\u578b\u548c\u5b58\u50a8\u9009\u578b\uff0c\u4ee5\u4f18\u5316\u5404\u81ea\u7684\u8bfb\u5199\u6027\u80fd\u3002</li> <li>\u8bfb\u6570\u636e\u6709\u5ef6\u8fdf\uff0c\u5199\u6570\u636e\u5b58\u50a8\u548c\u8bfb\u6570\u636e\u5b58\u50a8\u4ec5\u4fdd\u8bc1\u6700\u7ec8\u4e00\u81f4\u6027\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F/#_16","title":"\u6570\u636e\u5206\u7247\u4e4b\u6570\u636e\u5e93\u5206\u5e93\u5206\u8868","text":"<p>\u6570\u636e\u5206\u7247\u662f\u5c06\u5f85\u5904\u7406\u7684\u6570\u636e\u6216\u8bf7\u6c42\u5206\u6210\u591a\u4efd\u5e76\u884c\u5904\u7406\uff0c\u662f\u5e94\u5bf9\u9ad8\u5e76\u53d1\u5199\u8bf7\u6c42\u7684\u5e38\u7528\u65b9\u6848\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F/#_17","title":"\u5206\u5e93\u548c\u5206\u8868","text":"<ul> <li>\u5206\u5e93: \u5c06\u6570\u636e\u5e93\u62c6\u5206\u4e3a\u591a\u4e2a\u5c0f\u6570\u636e\u5e93\uff0c\u5206\u6563\u5b58\u50a8\u6570\u636e\u3002\u89e3\u51b3\u5e76\u53d1\u91cf\u5927\u95ee\u9898\u3002</li> <li>\u5206\u8868: \u5c06\u5355\u4e2a\u6570\u636e\u8868\u62c6\u5206\u4e3a\u591a\u4e2a\u7ed3\u6784\u5b8c\u5168\u4e00\u81f4\u7684\u8868\uff0c\u5206\u6563\u5b58\u50a8\u6570\u636e\u3002\u89e3\u51b3\u6570\u636e\u91cf\u5927\u95ee\u9898 (\u5982\u5355\u8868\u8d852000\u4e07\u884c)\u3002</li> <li>\u62c6\u5206\u7ef4\u5ea6: \u5782\u76f4\u62c6\u5206 (\u57fa\u4e8e\u4e1a\u52a1), \u6c34\u5e73\u62c6\u5206 (\u57fa\u4e8e\u6570\u636e)\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F/#_18","title":"\u5782\u76f4\u62c6\u5206","text":"<ol> <li>\u5782\u76f4\u5206\u5e93:<ul> <li>\u539f\u5219: \u6309\u7167\u4e1a\u52a1\u5f52\u5c5e\u5c06\u6570\u636e\u8868\u5206\u7c7b\uff0c\u4e0d\u540c\u4e1a\u52a1\u8868\u62c6\u5206\u5230\u4e0d\u540c\u6570\u636e\u5e93\u3002\u6838\u5fc3\u662f\u201c\u4e13\u5e93\u4e13\u7528\u201d\u3002</li> <li>\u4f18\u70b9: \u5b9e\u73b0\u4e0d\u540c\u4e1a\u52a1\u6570\u636e\u89e3\u8026\uff0c\u56e2\u961f\u804c\u8d23\u5355\u4e00\uff1b\u4e0d\u540c\u4e1a\u52a1\u4f7f\u7528\u4e0d\u540c\u670d\u52a1\u5668\uff0c\u63d0\u9ad8\u6570\u636e\u5e93\u5e76\u53d1\u5904\u7406\u80fd\u529b\u3002</li> </ul> </li> <li>\u5782\u76f4\u5206\u8868:<ul> <li>\u539f\u5219: \u5c06\u4e00\u4e2a\u6570\u636e\u8868\u6309\u7167\u5b57\u6bb5\u5206\u6210\u591a\u4e2a\u8868\uff0c\u6bcf\u4e2a\u8868\u5b58\u50a8\u4e00\u90e8\u5206\u5b57\u6bb5\uff08\u5982\u6309\u8bbf\u95ee\u9891\u7387\u3001\u5b57\u6bb5\u503c\u5927\u5c0f\uff09\u3002</li> <li>\u4f18\u70b9: \u9694\u79bb\u6838\u5fc3\u6570\u636e\u548c\u975e\u6838\u5fc3\u6570\u636e\uff0c\u63d0\u9ad8\u67e5\u8be2\u547d\u4e2d\u7387\uff0c\u51cf\u5c11\u78c1\u76d8I/O\u3002</li> <li>\u9650\u5236: \u4ec5\u9002\u5408\u6570\u636e\u91cf\u4e0d\u5927\u4f46\u5b57\u6bb5\u591a\u7684\u573a\u666f\uff0c\u672a\u6d88\u9664\u5355\u8868\u6570\u636e\u91cf\u8fc7\u5927\u95ee\u9898\u3002</li> </ul> </li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F/#_19","title":"\u6c34\u5e73\u62c6\u5206","text":"<ol> <li>\u6c34\u5e73\u5206\u5e93:<ul> <li>\u539f\u5219: \u5c06\u540c\u4e00\u4e2a\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u6309\u7167\u67d0\u79cd\u89c4\u5219\u62c6\u5206\u5230\u591a\u4e2a\u6570\u636e\u5e93\uff0c\u8fd9\u4e9b\u6570\u636e\u5e93\u53ef\u90e8\u7f72\u5728\u4e0d\u540c\u670d\u52a1\u5668\u4e0a\uff0c\u4e14\u7ed3\u6784\u4e00\u81f4\u3002</li> <li>\u4f18\u70b9: \u5145\u5206\u5229\u7528\u591a\u670d\u52a1\u5668\u8d44\u6e90\uff0c\u63d0\u9ad8\u6570\u636e\u5e93\u5e76\u53d1\u5904\u7406\u80fd\u529b\uff1b\u6709\u6548\u63a7\u5236\u6bcf\u4e2a\u6570\u636e\u5e93\u5185\u5355\u8868\u6570\u636e\u91cf\u3002</li> </ul> </li> <li>\u6c34\u5e73\u5206\u8868:<ul> <li>\u539f\u5219: \u5728\u540c\u4e00\u4e2a\u6570\u636e\u5e93\u5185\uff0c\u5c06\u4e00\u4e2a\u6570\u636e\u8868\u4e2d\u7684\u6570\u636e\u6309\u7167\u67d0\u79cd\u89c4\u5219\u62c6\u5206\u5230\u591a\u4e2a\u8868\uff0c\u4e14\u7ed3\u6784\u4e00\u81f4\u3002</li> <li>\u4f18\u70b9: \u89e3\u51b3\u4e86\u5355\u8868\u6570\u636e\u91cf\u8fc7\u5927\u7684\u95ee\u9898\u3002</li> <li>\u9650\u5236: \u62c6\u5206\u540e\u7684\u8868\u4ecd\u5728\u540c\u4e00\u6570\u636e\u5e93\uff0c\u7ade\u4e89\u670d\u52a1\u5668\u8d44\u6e90\u3002</li> </ul> </li> <li>\u6c34\u5e73\u5206\u5e93\u5206\u8868: \u7ed3\u5408\u6c34\u5e73\u5206\u5e93\u548c\u6c34\u5e73\u5206\u8868\uff0c\u8fbe\u5230\u5206\u5e03\u5f0f\u6548\u679c\u3002</li> <li>\u9009\u62e9\u4f9d\u636e:<ul> <li>\u9ad8\u5e76\u53d1\u4f46\u6570\u636e\u91cf\u5c0f -&gt; \u53ea\u9009\u62e9\u6c34\u5e73\u5206\u5e93\u3002</li> <li>\u4f4e\u5e76\u53d1\u4f46\u6570\u636e\u91cf\u5927 -&gt; \u53ea\u9009\u62e9\u6c34\u5e73\u5206\u8868\u3002</li> <li>\u9ad8\u5e76\u53d1\u4e14\u6570\u636e\u91cf\u5927 -&gt; \u9009\u62e9\u6c34\u5e73\u5206\u5e93\u5206\u8868\u3002</li> </ul> </li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F/#_20","title":"\u6c34\u5e73\u62c6\u5206\u89c4\u5219 (\u6570\u636e\u8def\u7531\u7b97\u6cd5)","text":"<ul> <li>\u76ee\u6807: \u4fdd\u8bc1\u6bcf\u4e2a\u5206\u533a\u6570\u636e\u91cf\u548c\u8bfb/\u5199\u8bf7\u6c42\u91cf\u5747\u7b49\uff0c\u907f\u514d\u6570\u636e\u504f\u659c\u548c\u6570\u636e\u70ed\u70b9\u3002</li> <li>\u8303\u56f4\u5206\u533a\u6cd5:<ul> <li>\u4f9d\u636e: \u53ef\u6392\u5e8f\u5b57\u6bb5\u503c\u533a\u95f4 (\u5982ID\u3001\u521b\u5efa\u65f6\u95f4)\u3002</li> <li>\u4f18\u70b9: \u65b9\u4fbf\u5206\u533a\u67e5\u8be2\uff0c\u6269\u5bb9\u53cb\u597d\u3002</li> <li>\u7f3a\u70b9: \u6613\u53d7\u5206\u533a\u5b57\u6bb5\u5c5e\u6027\u5f71\u54cd\u5bfc\u81f4\u6570\u636e\u504f\u659c (\u5982\u7528\u6237\u6635\u79f0\u968f\u673a\u6027)\uff0c\u6216\u6570\u636e\u70ed\u70b9 (\u5982\u65f6\u95f4\u5c5e\u6027)\u3002</li> </ul> </li> <li>\u54c8\u5e0c\u5206\u533a\u6cd5:<ul> <li>\u4f9d\u636e: \u6570\u636e\u5b57\u6bb5\u54c8\u5e0c\u503c\u4e0e\u6570\u636e\u5206\u533a\u6570\u76eeN\u53d6\u6a21\u3002</li> <li>\u4f18\u70b9: \u5b9e\u73b0\u7b80\u5355\uff0c\u65e0\u89c6\u6570\u636e\u5b57\u6bb5\u5c5e\u6027\uff0c\u80fd\u4f7f\u6570\u636e\u91cf\u5747\u5300\u5206\u5e03\uff0c\u907f\u514d\u6570\u636e\u504f\u659c\u548c\u70ed\u70b9\u3002</li> <li>\u7f3a\u70b9: \u6269\u5bb9\u4e0d\u7075\u6d3b\uff0cN\u53d8\u5316\u9700\u91cd\u65b0\u5206\u533a\u3002</li> <li>\u6539\u8fdb: \u4e0e\u8303\u56f4\u5206\u533a\u6cd5\u7ed3\u5408\uff0c\u5bf9\u54c8\u5e0c\u503c\u8fdb\u884c\u8303\u56f4\u5206\u533a\u3002</li> </ul> </li> <li>\u4e00\u81f4\u6027\u54c8\u5e0c\u5206\u533a\u6cd5:<ul> <li>\u6838\u5fc3: \u54c8\u5e0c\u73af\u3002\u6570\u636e\u5206\u533a\u548c\u6570\u636e\u952e\u54c8\u5e0c\u540e\u6620\u5c04\u5230\u73af\u4e0a\uff0c\u6570\u636e\u987a\u65f6\u9488\u67e5\u627e\u7b2c\u4e00\u4e2a\u5206\u533a\u5b58\u50a8\u3002</li> <li>\u4f18\u70b9: \u589e\u51cf\u6570\u636e\u5206\u533a\u65f6\uff0c\u53ea\u6709\u9006\u65f6\u9488\u76f8\u90bb\u6570\u636e\u9700\u91cd\u65b0\u5206\u533a\uff0c\u5f71\u54cd\u8303\u56f4\u5c0f\u3002</li> <li>\u7f3a\u70b9: \u6570\u636e\u5206\u533a\u5c11\u65f6\uff0c\u5206\u5e03\u53ef\u80fd\u96c6\u4e2d\uff0c\u9020\u6210\u6570\u636e\u504f\u659c\u3002</li> <li>\u89e3\u51b3\u65b9\u6848: \u865a\u62df\u8282\u70b9\u673a\u5236\u3002\u4e3a\u6bcf\u4e2a\u6570\u636e\u5206\u533a\u8ba1\u7b97\u591a\u4e2a\u54c8\u5e0c\u503c\uff08\u865a\u62df\u8282\u70b9\uff09\uff0c\u4f7f\u5176\u5728\u54c8\u5e0c\u73af\u4e0a\u5206\u5e03\u66f4\u5747\u5300\uff0c\u51cf\u5c11\u6570\u636e\u504f\u659c\u3002</li> </ul> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F/#_21","title":"\u6269\u5bb9\u65b9\u6848","text":"<ul> <li>\u4ece\u5e93\u5347\u7ea7\u6cd5 (\u7ffb\u500d\u6269\u5bb9\u6cd5):<ol> <li>\u4e3a\u9700\u6269\u5bb9\u7684\u5206\u5e93\u589e\u52a0Slave\u8282\u70b9\uff0c\u8fdb\u884c\u4e3b\u4ece\u590d\u5236\u3002</li> <li>\u4e3b\u4ece\u590d\u5236\u5b8c\u6210\u540e\uff0c\u4e34\u65f6\u5c01\u7981Master\u5199\u8bf7\u6c42\uff0c\u68c0\u67e5\u6570\u636e\u4e00\u81f4\u6027\u540e\u65ad\u5f00\u4e3b\u4ece\u3002</li> <li>\u4fee\u6539\u539fMaster\u7684\u6570\u636e\u8303\u56f4\u4e3a\u539f\u6570\u636e\u8303\u56f4\u7684\u524d\u4e00\u534a\u3002</li> <li>\u5c06\u539fSlave\u63d0\u5347\u4e3aMaster\uff0c\u5e76\u8bbe\u7f6e\u6570\u636e\u8303\u56f4\u4e3a\u539f\u6570\u636e\u8303\u56f4\u7684\u540e\u4e00\u534a\u3002</li> <li>\u786e\u8ba4\u4e1a\u52a1\u611f\u77e5\u53d8\u66f4\u540e\uff0c\u89e3\u5c01\u5199\u8bf7\u6c42\u3002</li> <li>\u542f\u52a8\u79bb\u7ebf\u4efb\u52a1\uff0c\u5220\u9664\u5197\u4f59\u6570\u636e\u3002</li> </ol> </li> <li>\u5bf9\u6574\u4e2a\u6570\u636e\u5e93\u6269\u5bb9\u65f6\uff0c\u6bcf\u4e2a\u5206\u5e93\u90fd\u6267\u884c\u4e0a\u8ff0\u4ece\u5e93\u5347\u7ea7\u64cd\u4f5c\uff0c\u5206\u5e93\u6570\u91cf\u7ffb\u500d\u3002</li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F/#_22","title":"\u5176\u4ed6\u6570\u636e\u5206\u7247\u5f62\u5f0f","text":"<ol> <li>Kafka \u591a Partition: Topic\u5185\u90e8\u62c6\u5206\u4e3a\u591a\u4e2aPartition\uff0c\u5e76\u884c\u5199\u5165\u6d88\u606f\uff0c\u63d0\u9ad8\u541e\u5410\u91cf\u3002</li> <li>\u79d2\u6740\u7cfb\u7edf\u5206\u5e03\u5f0f\u9501: \u5c06\u4ea7\u54c1\u5e93\u5b58\u62c6\u5206\u4e3aN\u4efd\uff0c\u6bcf\u4efd\u5e93\u5b58\u4f7f\u7528\u5355\u72ec\u7684\u5206\u5e03\u5f0f\u9501\u4fdd\u62a4\uff0c\u79d2\u6740\u8bf7\u6c42\u6839\u636e\u7528\u6237ID\u53d6\u6a21\u7ade\u4e89\u5bf9\u5e94\u5e93\u5b58\u548c\u9501\uff0c\u5b9e\u73b0\u5e76\u884c\u52a0\u9501\u3002</li> <li>ConcurrentHashMap: \u5185\u90e8\u6570\u636e\u62c6\u5206\u5230\u591a\u4e2a\u69fd\uff0c\u4e3a\u6bcf\u4e2a\u69fd\u72ec\u7acb\u52a0\u9501\uff0c\u652f\u6301\u5e76\u53d1\u8bfb/\u5199\uff0c\u51cf\u5c11\u7ebf\u7a0b\u7ade\u4e89\u3002</li> </ol>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F/#_23","title":"\u5f02\u6b65\u5199\u4e0e\u5199\u805a\u5408","text":"<p>\u901a\u8fc7\u4e1a\u52a1\u548c\u6570\u636e\u7279\u70b9\u6765\u5e94\u5bf9\u9ad8\u5e76\u53d1\u5199\u573a\u666f\uff0c\u4f5c\u4e3a\u6570\u636e\u5206\u7247\u7684\u8865\u5145\u3002</p>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F/#_24","title":"\u5f02\u6b65\u5199","text":"<ul> <li>\u6982\u5ff5: \u5c06\u5199\u8bf7\u6c42\u4ea4\u4e92\u6d41\u7a0b\u4ece\u201c\u540c\u6b65\u7b49\u5f85\u7ed3\u679c\u201d\u8f6c\u53d8\u4e3a\u201c\u63d0\u4ea4\u8bf7\u6c42\u540e\u5f02\u6b65\u67e5\u8be2\u7ed3\u679c\u201d\u7684\u4e24\u9636\u6bb5\u4ea4\u4e92\u3002</li> <li>\u7279\u70b9:<ul> <li>\u5c06\u7528\u6237\u5199\u8bf7\u6c42\u5feb\u901f\u6682\u5b58\u5230\u6570\u636e\u6c60\uff0c\u7acb\u5373\u54cd\u5e94\u7528\u6237\u63d0\u4ea4\u6210\u529f\u3002</li> <li>\u540e\u53f0\u4efb\u52a1\u4ece\u6570\u636e\u6c60\u8bfb\u53d6\u8bf7\u6c42\u5e76\u771f\u6b63\u6267\u884c\u5199\u64cd\u4f5c\u3002</li> <li>\u5199\u64cd\u4f5c\u7ed3\u679c\u4f9d\u9760\u7528\u6237\u4e3b\u52a8\u67e5\u8be2\uff0c\u6216\u5b8c\u6210\u540e\u4e3b\u52a8\u901a\u77e5\u3002</li> </ul> </li> <li>\u9002\u7528\u573a\u666f: \u5199\u8bf7\u6c42\u91cf\u5927\u4f46\u88ab\u8bf7\u6c42\u65b9\u7cfb\u7edf\u541e\u5410\u91cf\u8ddf\u4e0d\u4e0a\uff0c\u5199\u8bf7\u6c42\u5148\u6392\u961f\u3002</li> <li>\u5e94\u7528\u6848\u4f8b:<ol> <li>\u8de8\u516c\u7f51\u8c03\u7528: \u7535\u5546\u652f\u4ed8\u63a5\u5165\u7b2c\u4e09\u65b9\u652f\u4ed8\u5e73\u53f0\u3002\u4f7f\u7528\u6d88\u606f\u4e2d\u95f4\u4ef6\u5bf9\u652f\u4ed8\u8bf7\u6c42\u6392\u961f\uff0c\u6d88\u606f\u6d88\u8d39\u8005\u9010\u4e2a\u8de8\u516c\u7f51\u8c03\u7528\u652f\u4ed8\u63a5\u53e3\uff0c\u907f\u514d\u963b\u585e\u3002</li> <li>\u79d2\u6740\u7cfb\u7edf\u5f02\u6b65\u5316: \u7528\u6237\u62a2\u8d2d\u8bf7\u6c42\u63d0\u4ea4\u5230\u6d88\u606f\u4e2d\u95f4\u4ef6\uff0c\u7acb\u5373\u54cd\u5e94\u201c\u62a2\u8d2d\u4e2d\u201d\uff1b\u6d88\u606f\u6d88\u8d39\u8005\u6309\u6570\u636e\u5e93\u5904\u7406\u80fd\u529b\u6d88\u8d39\u8bf7\u6c42\uff0c\u6263\u51cf\u5e93\u5b58\u548c\u5199\u5165\u8ba2\u5355\uff1b\u7ed3\u679c\u4fdd\u5b58Redis\uff0c\u7528\u6237\u5237\u65b0\u8ba2\u5355\u9875\u67e5\u8be2\u3002</li> </ol> </li> </ul>"},{"location":"%E7%AC%94%E8%AE%B0/%E9%AB%98%E5%B9%B6%E5%8F%91/%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F/#_25","title":"\u5199\u805a\u5408","text":"<ul> <li>\u6982\u5ff5: \u5c06\u82e5\u5e72\u5199\u8bf7\u6c42\u805a\u5408\u6210\u4e00\u4e2a\u5199\u8bf7\u6c42\uff0c\u51cf\u5c11\u5199\u8bf7\u6c42\u91cf\u3002</li> <li>\u5e94\u7528\u6848\u4f8b:<ol> <li>Kafka Producer \u6279\u91cf\u751f\u4ea7: RecordAccumulator\u5c06\u76f8\u540cTopic\u3001\u76f8\u540cPartition\u7684\u6d88\u606f\u805a\u5408\u4e3aMicro-Batch\uff0c\u4e00\u6b21\u6027\u53d1\u9001\u5230Kafka\u96c6\u7fa4\uff0c\u63d0\u9ad8\u541e\u5410\u91cf\u3002</li> <li>AliSQL\u70ed\u70b9\u6570\u636e\u4f18\u5316: \u5bf9\u540c\u4e00\u884c\u7684\u591a\u4e2a\u66f4\u65b0\u64cd\u4f5c\u805a\u5408\u4e3a\u4e00\u4e2a\u6279\u6b21\u66f4\u65b0\u64cd\u4f5c\uff0c\u6d88\u9664\u884c\u9501\u7ade\u4e89\uff0c\u63d0\u9ad8\u70ed\u70b9\u6570\u636e\u66f4\u65b0\u6548\u7387\u3002</li> </ol> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/agent/agent%E4%BB%8B%E7%BB%8D/","title":"Agent\u4ecb\u7ecd","text":"<p>\u4e00\u4e2aAI Agent\u662f\u4e00\u4e2a\u8ba1\u7b97\u5b9e\u4f53\uff0c\u5b83\u901a\u8fc7\u4f20\u611f\u5668\u611f\u77e5\u73af\u5883\uff0c\u901a\u8fc7\u51b3\u7b56\u6a21\u5757\u8fdb\u884c\u601d\u8003\u548c\u89c4\u5212\uff0c\u5e76\u6700\u7ec8\u901a\u8fc7\u6267\u884c\u5668\uff08actuators\uff09\u91c7\u53d6\u884c\u52a8\u4ee5\u5b9e\u73b0\u9884\u8bbe\u76ee\u6807\u3002 \u8fd9\u79cd\u201c\u611f\u77e5-\u89c4\u5212-\u884c\u52a8\u201d\u7684\u5faa\u73af\u662f\u5176\u6838\u5fc3\u5de5\u4f5c\u539f\u7406\u3002</p> <p>\u4e0e\u4f20\u7edfAI\u7cfb\u7edf\u548c\u5355\u7eaf\u7684LLM\u76f8\u6bd4\uff0cAI Agent\u7684\u5173\u952e\u533a\u522b\u5728\u4e8e\u5176\u81ea\u4e3b\u6027\u3002 \u4f20\u7edfAI\u901a\u5e38\u5728\u9884\u5b9a\u4e49\u89c4\u5219\u4e0b\u5de5\u4f5c\uff0c\u800cLLM\u5219\u4f9d\u8d56\u4e8e\u7528\u6237\u6e05\u6670\u7684\u63d0\u793a\uff08prompt\uff09\u6765\u751f\u6210\u56de\u5e94\u3002 AI Agent\u5219\u4ec5\u9700\u4e00\u4e2a\u9ad8\u7ea7\u76ee\u6807\uff0c\u4fbf\u80fd\u81ea\u4e3b\u5730\u5c06\u76ee\u6807\u5206\u89e3\u4e3a\u4e00\u7cfb\u5217\u5b50\u4efb\u52a1\uff0c\u8fdb\u884c\u72ec\u7acb\u601d\u8003\u3001\u8c03\u7528\u5de5\u5177\u3001\u5e76\u6839\u636e\u73af\u5883\u53cd\u9988\u8fdb\u884c\u8c03\u6574\uff0c\u76f4\u81f3\u76ee\u6807\u5b8c\u6210\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/agent/agent%E4%BB%8B%E7%BB%8D/#_1","title":"\u6838\u5fc3\u6280\u672f\u67b6\u6784\uff1a\u5927\u8111\u3001\u89c4\u5212\u3001\u8bb0\u5fc6\u4e0e\u5de5\u5177","text":"<p>\u4e00\u4e2a\u57fa\u4e8e\u5927\u578b\u8bed\u8a00\u6a21\u578b\u7684AI Agent\u7cfb\u7edf\uff0c\u5176\u6838\u5fc3\u67b6\u6784\u901a\u5e38\u7531\u56db\u5927\u5173\u952e\u7ec4\u4ef6\u6784\u6210\uff1a</p> <p>1. \u5927\u8111\uff08Brain\uff09\uff1a\u5927\u578b\u8bed\u8a00\u6a21\u578b\uff08LLM\uff09</p> <p>LLM\u662fAI Agent\u7684\u8ba4\u77e5\u6838\u5fc3\uff0c\u626e\u6f14\u7740\u201c\u5927\u8111\u201d\u7684\u89d2\u8272\u3002 \u5b83\u4e3aAgent\u63d0\u4f9b\u4e86\u5f3a\u5927\u7684\u81ea\u7136\u8bed\u8a00\u7406\u89e3\u3001\u77e5\u8bc6\u63a8\u7406\u3001\u548c\u751f\u6210\u80fd\u529b\u3002 Agent\u5185\u90e8\u7684\u6240\u6709\u51b3\u7b56\u3001\u89c4\u5212\u548c\u53cd\u601d\u8fc7\u7a0b\uff0c\u90fd\u7531LLM\u9a71\u52a8\u3002</p> <p>2. \u89c4\u5212\uff08Planning\uff09\uff1a\u8ba9\u601d\u8003\u66f4\u5177\u6df1\u5ea6\u4e0e\u7b56\u7565</p> <p>\u89c4\u5212\u80fd\u529b\u662fAgent\u5b9e\u73b0\u590d\u6742\u4efb\u52a1\u7684\u5173\u952e\u3002 \u5b83\u5c06\u5b8f\u5927\u76ee\u6807\u5206\u89e3\u4e3a\u4e00\u7cfb\u5217\u53ef\u6267\u884c\u7684\u6b65\u9aa4\uff0c\u5e76\u80fd\u5728\u6267\u884c\u8fc7\u7a0b\u4e2d\u8fdb\u884c\u53cd\u601d\u548c\u8c03\u6574\u3002 \u5f53\u524d\u4e3b\u6d41\u7684\u89c4\u5212\u6280\u672f\u5305\u62ec\uff1a</p> <ul> <li>\u601d\u7ef4\u94fe\uff08Chain-of-Thought, CoT\uff09: \u901a\u8fc7\u5728\u63d0\u793a\u4e2d\u52a0\u5165\u4e2d\u95f4\u63a8\u7406\u6b65\u9aa4\uff0c\u5f15\u5bfcLLM\u6a21\u4eff\u4eba\u7c7b\u201c\u4e00\u6b65\u4e00\u6b65\u60f3\u201d\u7684\u903b\u8f91\uff0c\u5c06\u590d\u6742\u4efb\u52a1\u5206\u89e3\u4e3a\u66f4\u5c0f\u3001\u66f4\u7b80\u5355\u7684\u6b65\u9aa4\uff0c\u4ece\u800c\u63d0\u9ad8\u5728\u590d\u6742\u63a8\u7406\u4efb\u52a1\u4e0a\u7684\u8868\u73b0\u3002</li> <li>ReAct (Reason and Act): \u8be5\u6846\u67b6\u5c06\u63a8\u7406\uff08Reason\uff09\u548c\u884c\u52a8\uff08Act\uff09\u4ea4\u9519\u8fdb\u884c\u3002 Agent\u4e0d\u4ec5\u4f1a\u601d\u8003\u201c\u6211\u5e94\u8be5\u505a\u4ec0\u4e48\uff08Thought\uff09\u201d\uff0c\u8fd8\u4f1a\u6267\u884c\u76f8\u5e94\u7684\u201c\u884c\u52a8\uff08Action\uff09\u201d\uff0c\u5e76\u89c2\u5bdf\u7ed3\u679c\uff08Observation\uff09\u3002\u8fd9\u79cd\u201c\u601d\u8003-\u884c\u52a8-\u89c2\u5bdf\u201d\u7684\u5faa\u73af\uff0c\u4f7f\u5f97Agent\u80fd\u591f\u4e0e\u5916\u90e8\u73af\u5883\u548c\u5de5\u5177\u8fdb\u884c\u52a8\u6001\u4ea4\u4e92\uff0c\u5e76\u6839\u636e\u53cd\u9988\u6765\u8c03\u6574\u540e\u7eed\u8ba1\u5212\u3002</li> <li>\u601d\u7ef4\u6811\uff08Tree of Thoughts, ToT\uff09: \u4f5c\u4e3aCoT\u7684\u5ef6\u4f38\uff0cToT\u5141\u8bb8Agent\u5728\u4efb\u52a1\u7684\u6bcf\u4e00\u6b65\u63a2\u7d22\u591a\u79cd\u63a8\u7406\u53ef\u80fd\u6027\uff0c\u5f62\u6210\u4e00\u4e2a\u6811\u72b6\u7ed3\u6784\u3002 \u5b83\u4f1a\u8bc4\u4f30\u4e0d\u540c\u8def\u5f84\u7684\u8fdb\u5c55\uff0c\u5e76\u8fdb\u884c\u524d\u77bb\u548c\u56de\u6eaf\uff0c\u4ece\u800c\u5728\u9700\u8981\u590d\u6742\u89c4\u5212\u548c\u63a2\u7d22\u7684\u95ee\u9898\u4e0a\u8868\u73b0\u66f4\u4f18\u3002</li> </ul> <p>3. \u8bb0\u5fc6\uff08Memory\uff09\uff1a\u8d4b\u4e88Agent\u5b66\u4e60\u4e0e\u8fdb\u5316\u7684\u80fd\u529b</p> <p>\u4e3a\u4e86\u6267\u884c\u957f\u671f\u548c\u590d\u6742\u7684\u4efb\u52a1\uff0cAgent\u5fc5\u987b\u5177\u5907\u8bb0\u5fc6\u80fd\u529b\uff0c\u4ee5\u4fdd\u7559\u548c\u56de\u6eaf\u4fe1\u606f\u3002\u8bb0\u5fc6\u673a\u5236\u901a\u5e38\u5206\u4e3a\u4e24\u7c7b\uff1a</p> <ul> <li>\u77ed\u671f\u8bb0\u5fc6\uff08Short-Term Memory\uff09: \u4e3b\u8981\u901a\u8fc7\u6a21\u578b\u7684\u4e0a\u4e0b\u6587\u7a97\u53e3\uff08Context Window\uff09\u5b9e\u73b0\u3002Agent\u53ef\u4ee5\u5728\u4e00\u6b21\u4ea4\u4e92\u4e2d\u201c\u8bb0\u4f4f\u201d\u6700\u8fd1\u7684\u5bf9\u8bdd\u548c\u884c\u52a8\uff0c\u8fd9\u662f\u8fdb\u884c\u4e0a\u4e0b\u6587\u5b66\u4e60\u7684\u57fa\u7840\u3002 \u7136\u800c\uff0c\u5176\u5bb9\u91cf\u53d7\u9650\u4e8e\u6a21\u578b\u7684\u4e0a\u4e0b\u6587\u957f\u5ea6\u3002</li> <li>\u957f\u671f\u8bb0\u5fc6\uff08Long-Term Memory\uff09: \u4e3a\u4e86\u7a81\u7834\u4e0a\u4e0b\u6587\u7a97\u53e3\u7684\u9650\u5236\uff0cAgent\u5229\u7528\u5916\u90e8\u5b58\u50a8\u6765\u5b9e\u73b0\u957f\u671f\u8bb0\u5fc6\u3002 \u6700\u5e38\u89c1\u7684\u6280\u672f\u662f\u68c0\u7d22\u589e\u5f3a\u751f\u6210\uff08Retrieval Augmented Generation, RAG\uff09\u3002 \u901a\u8fc7\u5c06\u6d77\u91cf\u4fe1\u606f\u5b58\u50a8\u5728\u5411\u91cf\u6570\u636e\u5e93\uff08Vector Database\uff09\u4e2d\uff0cAgent\u53ef\u4ee5\u5728\u9700\u8981\u65f6\u5feb\u901f\u68c0\u7d22\u76f8\u5173\u77e5\u8bc6\uff0c\u4e3a\u51b3\u7b56\u63d0\u4f9b\u4f9d\u636e\uff0c\u8fd9\u6709\u6548\u5f25\u8865\u4e86LLM\u77e5\u8bc6\u66f4\u65b0\u4e0d\u53ca\u65f6\u548c\u201c\u5e7b\u89c9\u201d\u7b49\u95ee\u9898</li> </ul> <p>4. \u5de5\u5177\u4f7f\u7528\uff08Tool Use\uff09\uff1a\u6253\u7834\u865a\u62df\u4e0e\u73b0\u5b9e\u7684\u8fb9\u754c</p> <p>\u5de5\u5177\u4f7f\u7528\u662fAI Agent\u533a\u522b\u4e8e\u5355\u7eafLLM\u7684\u53e6\u4e00\u4e2a\u663e\u8457\u7279\u5f81\uff0c\u5b83\u8d4b\u4e88\u4e86Agent\u4e0e\u5916\u90e8\u4e16\u754c\u4ea4\u4e92\u5e76\u6267\u884c\u5177\u4f53\u4efb\u52a1\u7684\u80fd\u529b\u3002 \u901a\u8fc7\u8c03\u7528API\u6216\u5916\u90e8\u51fd\u6570\uff08Function Calling\uff09\uff0cAgent\u53ef\u4ee5\uff1a *   \u83b7\u53d6\u5b9e\u65f6\u4fe1\u606f\uff08\u5982\u901a\u8fc7\u641c\u7d22\u5f15\u64ceAPI\uff09\u3002 *   \u6267\u884c\u4ee3\u7801\uff08\u5982\u8fd0\u884cPython\u811a\u672c\u8fdb\u884c\u6570\u636e\u5206\u6790\uff09\u3002 *   \u4e0e\u4e13\u6709\u7cfb\u7edf\u4ea4\u4e92\uff08\u5982\u8fde\u63a5\u4f01\u4e1a\u5185\u90e8\u6570\u636e\u5e93\u6216CRM\u7cfb\u7edf\uff09\u3002</p> <p>\u51fd\u6570\u8c03\u7528\uff08Function Calling\uff09 \u662f\u5b9e\u73b0\u5de5\u5177\u4f7f\u7528\u7684\u6838\u5fc3\u673a\u5236\u3002\u5f00\u53d1\u8005\u53ef\u4ee5\u5411LLM\u63cf\u8ff0\u4e00\u7cfb\u5217\u53ef\u7528\u51fd\u6570\u53ca\u5176\u53c2\u6570\uff0c\u5f53\u7528\u6237\u63d0\u51fa\u8bf7\u6c42\u65f6\uff0c\u6a21\u578b\u80fd\u667a\u80fd\u5730\u5224\u65ad\u662f\u5426\u9700\u8981\u4ee5\u53ca\u5982\u4f55\u8c03\u7528\u8fd9\u4e9b\u51fd\u6570\uff0c\u5e76\u4ee5\u7ed3\u6784\u5316\u6570\u636e\uff08\u5982JSON\uff09\u7684\u5f62\u5f0f\u8fd4\u56de\u8c03\u7528\u6307\u4ee4\uff0c\u4ece\u800c\u5b9e\u73b0\u4e0e\u5916\u90e8\u5de5\u5177\u7684\u65e0\u7f1d\u5bf9\u63a5\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/agent/agent%E4%BB%8B%E7%BB%8D/#vs","title":"\u67b6\u6784\u6a21\u5f0f\uff1a\u5355\u667a\u80fd\u4f53 vs. \u591a\u667a\u80fd\u4f53","text":"<p>\u6839\u636e\u4efb\u52a1\u7684\u590d\u6742\u6027\uff0cAI Agent\u53ef\u4ee5\u91c7\u7528\u4e0d\u540c\u7684\u67b6\u6784\u6a21\u5f0f\uff1a</p> <ul> <li>\u5355\u667a\u80fd\u4f53\uff08Single-Agent\uff09: \u7531\u4e00\u4e2aLLM\u9a71\u52a8\uff0c\u72ec\u7acb\u5b8c\u6210\u6240\u6709\u63a8\u7406\u3001\u89c4\u5212\u548c\u6267\u884c\u3002\u8fd9\u79cd\u67b6\u6784\u9002\u7528\u4e8e\u76ee\u6807\u660e\u786e\u3001\u65e0\u9700\u534f\u4f5c\u7684\u76f4\u63a5\u4efb\u52a1\u3002</li> <li>\u591a\u667a\u80fd\u4f53\uff08Multi-Agent\uff09: \u6d89\u53ca\u4e24\u4e2a\u6216\u591a\u4e2aAgent\u534f\u540c\u5de5\u4f5c\u3002 \u6bcf\u4e2aAgent\u53ef\u4ee5\u88ab\u8d4b\u4e88\u7279\u5b9a\u7684\u89d2\u8272\u548c\u80fd\u529b\uff08\u5982\u201c\u89c4\u5212\u5e08\u201d\u3001\u201c\u7814\u7a76\u5458\u201d\u3001\u201c\u4ee3\u7801\u6267\u884c\u8005\u201d\uff09\uff0c\u5b83\u4eec\u901a\u8fc7\u534f\u4f5c\u6765\u89e3\u51b3\u66f4\u590d\u6742\u548c\u52a8\u6001\u7684\u95ee\u9898\u3002 \u8fd9\u79cd\u6a21\u5f0f\u63d0\u5347\u4e86\u89e3\u51b3\u65b9\u6848\u7684\u8d28\u91cf\u548c\u7cfb\u7edf\u7684\u53ef\u6269\u5c55\u6027\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/agent/rag%E5%90%91%E9%87%8F%E5%8C%96%E6%98%AF%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0%E7%9A%84/","title":"Rag\u5411\u91cf\u5316\u662f\u600e\u4e48\u5b9e\u73b0\u7684","text":""},{"location":"%E9%9D%A2%E7%BB%8F/agent/rag%E5%90%91%E9%87%8F%E5%8C%96%E6%98%AF%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0%E7%9A%84/#embedding","title":"\u6838\u5fc3\u5b9e\u73b0\u539f\u7406\uff1aEmbedding\u6a21\u578b","text":"<p>\u5411\u91cf\u5316\u7684\u5b9e\u73b0\uff0c\u5b8c\u5168\u4f9d\u8d56\u4e8e\u4e00\u4e2a\u9884\u8bad\u7ec3\u597d\u7684\u6df1\u5ea6\u5b66\u4e60\u6a21\u578b\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3aEmbedding\u6a21\u578b\u3002</p> <p>\u8fd9\u4e9b\u6a21\u578b\u901a\u5e38\u662f\u57fa\u4e8eTransformer\u67b6\u6784\u6784\u5efa\u7684\uff0c\u6bd4\u5982BERT\u3001RoBERTa\uff0c\u4ee5\u53ca\u73b0\u5728\u66f4\u6d41\u884c\u7684\u4e13\u95e8\u4e3a\u6587\u672c\u5d4c\u5165\u4f18\u5316\u7684\u6a21\u578b\uff0c\u5982Sentence-BERT\u3001all-MiniLM\u3001BGE (BAAI General Embedding) \u7b49\u3002</p> <p>\u4e00\u4e2aEmbedding\u6a21\u578b\u7684\u5185\u90e8\u5de5\u4f5c\u539f\u7406\u53ef\u4ee5\u7b80\u5316\u4e3a\u4ee5\u4e0b\u51e0\u4e2a\u6b65\u9aa4\uff1a</p> <ol> <li> <p>\u6587\u672c\u9884\u5904\u7406\u4e0e\u5206\u8bcd (Tokenization)\uff1a</p> <ul> <li>\u9996\u5148\uff0c\u8f93\u5165\u7684\u6587\u672c\u6bb5\u843d\uff08Chunk\uff09\u4f1a\u88ab\u8fdb\u884c\u4e00\u4e9b\u9884\u5904\u7406\uff0c\u5982\u8f6c\u4e3a\u5c0f\u5199\u3001\u53bb\u9664\u7279\u6b8a\u7b26\u53f7\u7b49\u3002</li> <li>\u7136\u540e\uff0c\u901a\u8fc7\u4e00\u4e2a\u5206\u8bcd\u5668\uff08Tokenizer\uff09\uff0c\u5c06\u6587\u672c\u5207\u5206\u6210\u4e00\u4e2a\u4e2a\u7684\u8bcd\u5143\uff08Token\uff09\u3002\u8fd9\u4e9b\u8bcd\u5143\u53ef\u4ee5\u662f\u5355\u8bcd\u3001\u5b50\u8bcd\uff08subword\uff09\u751a\u81f3\u662f\u5b57\u7b26\u3002\u4f8b\u5982\uff0c\u201cunbelievable\u201d\u53ef\u80fd\u4f1a\u88ab\u5207\u5206\u6210\u201cun\u201d\u3001\u201cbeliev\u201d\u548c\u201cable\u201d\u3002</li> </ul> </li> <li> <p>\u8f93\u5165\u8868\u793a (Input Representation)\uff1a</p> <ul> <li>\u6bcf\u4e2a\u8bcd\u5143\u4f1a\u88ab\u6620\u5c04\u5230\u4e00\u4e2a\u56fa\u5b9a\u7ef4\u5ea6\u7684\u5411\u91cf\uff0c\u8fd9\u79f0\u4e3a\u8bcd\u5d4c\u5165\uff08Word Embedding\uff09\u3002</li> <li>\u9664\u4e86\u8bcd\u5d4c\u5165\uff0c\u6a21\u578b\u8fd8\u4f1a\u52a0\u5165\u4f4d\u7f6e\u5d4c\u5165\uff08Positional Embedding\uff09\u6765\u8868\u793a\u6bcf\u4e2a\u8bcd\u5143\u5728\u53e5\u5b50\u4e2d\u7684\u4f4d\u7f6e\u4fe1\u606f\uff0c\u4ee5\u53ca\u6bb5\u843d\u5d4c\u5165\uff08Segment Embedding\uff09\u6765\u533a\u5206\u4e0d\u540c\u7684\u53e5\u5b50\u3002</li> <li>\u8fd9\u4e9b\u5d4c\u5165\u5411\u91cf\u76f8\u52a0\uff0c\u6784\u6210\u4e86\u6a21\u578b\u6700\u7ec8\u7684\u8f93\u5165\u8868\u793a\u3002</li> </ul> </li> <li> <p>\u7f16\u7801\u5668\u5904\u7406 (Encoder)\uff1a</p> <ul> <li>\u5c06\u51c6\u5907\u597d\u7684\u8f93\u5165\u8868\u793a\uff0c\u5582\u7ed9\u4e00\u4e2a\u6df1\u5ea6\u795e\u7ecf\u7f51\u7edc\u7f16\u7801\u5668\uff08\u901a\u5e38\u662f\u591a\u5c42\u7684Transformer Block\uff09\u3002</li> <li>\u5728\u7f16\u7801\u5668\u5185\u90e8\uff0c\u901a\u8fc7\u81ea\u6ce8\u610f\u529b\u673a\u5236\uff08Self-Attention\uff09\uff0c\u6a21\u578b\u80fd\u591f\u6355\u6349\u5230\u6587\u672c\u4e2d\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u7684\u590d\u6742\u4f9d\u8d56\u5173\u7cfb\u548c\u4e0a\u4e0b\u6587\u4fe1\u606f\u3002\u6bcf\u4e2a\u8bcd\u5143\u7684\u8868\u793a\u4f1a\u4e0d\u65ad\u5730\u4e0e\u5176\u4ed6\u8bcd\u5143\u7684\u8868\u793a\u8fdb\u884c\u4ea4\u4e92\u548c\u878d\u5408\u3002</li> </ul> </li> <li> <p>\u6c60\u5316\u64cd\u4f5c (Pooling)\uff1a</p> <ul> <li>\u7f16\u7801\u5668\u4f1a\u4e3a\u8f93\u5165\u5e8f\u5217\u4e2d\u7684\u6bcf\u4e00\u4e2a\u8bcd\u5143\u90fd\u751f\u6210\u4e00\u4e2a\u4e0a\u4e0b\u6587\u76f8\u5173\u7684\u5411\u91cf\u8868\u793a\u3002\u4f46\u6211\u4eec\u9700\u8981\u7684\u662f\u4e00\u4e2a\u80fd\u591f\u4ee3\u8868\u6574\u4e2a\u6587\u672c\u6bb5\u843d\u7684\u3001\u56fa\u5b9a\u5927\u5c0f\u7684\u5411\u91cf\u3002</li> <li>\u6c60\u5316\u64cd\u4f5c\u5c31\u662f\u7528\u6765\u5b9e\u73b0\u8fd9\u4e2a\u76ee\u7684\u7684\u3002\u6700\u5e38\u7528\u7684\u65b9\u6cd5\u662f\u5e73\u5747\u6c60\u5316\uff08Mean Pooling\uff09\uff0c\u5373\u5c06\u6240\u6709\u8f93\u51fa\u8bcd\u5143\u5411\u91cf\u7684\u5bf9\u5e94\u7ef4\u5ea6\u53d6\u5e73\u5747\u503c\uff0c\u5f97\u5230\u4e00\u4e2a\u6700\u7ec8\u7684\u53e5\u5411\u91cf\uff08Sentence Embedding\uff09\u3002</li> <li>\u53e6\u4e00\u79cd\u65b9\u6cd5\u662f\u53d6<code>[CLS]</code>\u8fd9\u4e2a\u7279\u6b8a\u8bcd\u5143\u7684\u8f93\u51fa\u5411\u91cf\u4f5c\u4e3a\u6574\u4e2a\u53e5\u5b50\u7684\u8868\u793a\u3002</li> </ul> </li> <li> <p>\u8f93\u51fa\u5411\u91cf\uff1a</p> <ul> <li>\u7ecf\u8fc7\u6c60\u5316\u64cd\u4f5c\u540e\uff0c\u6211\u4eec\u5c31\u5f97\u5230\u4e86\u4e00\u4e2a\u56fa\u5b9a\u7ef4\u5ea6\u7684\u3001\u80fd\u591f\u6355\u6349\u8f93\u5165\u6587\u672c\u6bb5\u843d\u4e30\u5bcc\u8bed\u4e49\u4fe1\u606f\u7684\u5411\u91cf\u3002\u8fd9\u4e2a\u5411\u91cf\uff0c\u5c31\u662f\u6211\u4eec\u5411\u91cf\u5316\u7684\u6700\u7ec8\u7ed3\u679c\u3002\u8fd9\u4e2a\u5411\u91cf\u7684\u7ef4\u5ea6\u901a\u5e38\u662f\u51e0\u767e\u5230\u4e0a\u5343\uff0c\u6bd4\u5982384\u3001768\u30011024\u7b49\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/agent/rag%E5%90%91%E9%87%8F%E5%8C%96%E6%98%AF%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0%E7%9A%84/#rag","title":"\u5728RAG\u4e2d\u7684\u5177\u4f53\u5e94\u7528\u6d41\u7a0b","text":"<p>\u5728RAG\u7cfb\u7edf\u4e2d\uff0c\u5411\u91cf\u5316\u7684\u5b9e\u73b0\u6d41\u7a0b\u901a\u5e38\u5982\u4e0b\uff1a</p> <ol> <li> <p>\u9009\u62e9Embedding\u6a21\u578b\uff1a     \u9996\u5148\uff0c\u6211\u4eec\u9700\u8981\u6839\u636e\u4e1a\u52a1\u9700\u6c42\uff08\u8bed\u8a00\u3001\u9886\u57df\u3001\u6027\u80fd\u8981\u6c42\uff09\u9009\u62e9\u4e00\u4e2a\u5408\u9002\u7684Embedding\u6a21\u578b\u3002\u73b0\u5728\u6709\u5f88\u591a\u5f00\u6e90\u7684\u6a21\u578b\u53ef\u4f9b\u9009\u62e9\uff0c\u6bd4\u5982Hugging Face\u4e0a\u7684<code>sentence-transformers/all-MiniLM-L6-v2</code>\uff08\u901a\u7528\uff0c\u901f\u5ea6\u5feb\uff09\u6216<code>BAAI/bge-large-zh</code>\uff08\u4e2d\u6587\u6548\u679c\u597d\uff09\u3002</p> </li> <li> <p>\u5bf9\u6587\u6863\u5e93\u8fdb\u884c\u79bb\u7ebf\u5411\u91cf\u5316\uff08Indexing\uff09\uff1a</p> <ul> <li>\u6211\u4eec\u5c06\u4e4b\u524d\u5206\u597d\u6bb5\u7684\u6bcf\u4e00\u4e2a\u6587\u672c\u5757\uff08Chunk\uff09\u4f5c\u4e3a\u8f93\u5165\uff0c\u6279\u91cf\u5730\u9001\u5165Embedding\u6a21\u578b\u3002</li> <li>\u6a21\u578b\u4e3a\u6bcf\u4e00\u4e2aChunk\u751f\u6210\u4e00\u4e2a\u5411\u91cf\u3002</li> <li>\u6211\u4eec\u5c06\u6bcf\u4e00\u4e2aChunk\u7684\u539f\u6587\u3001\u5b83\u7684\u5411\u91cf\uff0c\u4ee5\u53ca\u4e00\u4e9b\u5143\u6570\u636e\uff08\u5982\u6765\u6e90\u6587\u4ef6\u540d\u3001\u6bb5\u843dID\u7b49\uff09\uff0c\u4e00\u8d77\u5b58\u50a8\u5230\u4e00\u4e2a\u4e13\u95e8\u7684\u6570\u636e\u5e93\u4e2d\u3002\u8fd9\u4e2a\u6570\u636e\u5e93\u5c31\u662f\u5411\u91cf\u6570\u636e\u5e93\uff08Vector Database\uff09\uff0c\u5982FAISS, Milvus, Pinecone, ChromaDB\u7b49\u3002</li> <li>\u5411\u91cf\u6570\u636e\u5e93\u4f1a\u5bf9\u8fd9\u4e9b\u5411\u91cf\u6784\u5efa\u9ad8\u6548\u7684\u7d22\u5f15\uff08\u5982IVF-PQ\u3001HNSW\u7b49\uff09\uff0c\u4ee5\u652f\u6301\u540e\u7eed\u7684\u5feb\u901f\u8fd1\u4f3c\u6700\u8fd1\u90bb\u641c\u7d22\u3002</li> </ul> </li> <li> <p>\u5bf9\u7528\u6237\u67e5\u8be2\u8fdb\u884c\u5728\u7ebf\u5411\u91cf\u5316\uff08Querying\uff09\uff1a</p> <ul> <li>\u5f53\u7528\u6237\u53d1\u8d77\u4e00\u4e2a\u67e5\u8be2\u65f6\uff0c\u6211\u4eec\u4f7f\u7528\u540c\u4e00\u4e2aEmbedding\u6a21\u578b\uff0c\u5bf9\u7528\u6237\u7684\u67e5\u8be2\u8bed\u53e5\u8fdb\u884c\u5b9e\u65f6\u5730\u5411\u91cf\u5316\uff0c\u5f97\u5230\u4e00\u4e2a\u67e5\u8be2\u5411\u91cf\uff08Query Vector\uff09\u3002</li> <li>\u4f7f\u7528\u540c\u4e00\u4e2a\u6a21\u578b\u81f3\u5173\u91cd\u8981\uff0c\u8fd9\u4fdd\u8bc1\u4e86\u6587\u6863\u5411\u91cf\u548c\u67e5\u8be2\u5411\u91cf\u662f\u5728\u540c\u4e00\u4e2a\u8bed\u4e49\u7a7a\u95f4\u4e2d\uff0c\u5b83\u4eec\u7684\u76f8\u4f3c\u5ea6\u8ba1\u7b97\u624d\u6709\u610f\u4e49\u3002</li> </ul> </li> <li> <p>\u5411\u91cf\u68c0\u7d22\uff1a</p> <ul> <li>\u6211\u4eec\u62ff\u7740\u8fd9\u4e2a\u67e5\u8be2\u5411\u91cf\uff0c\u53bb\u5411\u91cf\u6570\u636e\u5e93\u4e2d\u8fdb\u884c\u641c\u7d22\u3002</li> <li>\u5411\u91cf\u6570\u636e\u5e93\u4f1a\u9ad8\u6548\u5730\u8ba1\u7b97\u67e5\u8be2\u5411\u91cf\u4e0e\u6570\u636e\u5e93\u4e2d\u6240\u6709\u6587\u6863\u5411\u91cf\u7684\u76f8\u4f3c\u5ea6\uff08\u901a\u5e38\u662f\u4f59\u5f26\u76f8\u4f3c\u5ea6\uff09\uff0c\u5e76\u8fd4\u56de\u4e0e\u67e5\u8be2\u5411\u91cf\u6700\u76f8\u4f3c\u7684Top-K\u4e2a\u6587\u6863\u5757\u3002</li> </ul> </li> </ol> <p>\u8fd9\u4e2a\u8fc7\u7a0b\uff0c\u5c31\u662fRAG\u4e2d\u201c\u68c0\u7d22\uff08Retrieval\uff09\u201d\u73af\u8282\u7684\u6838\u5fc3\u3002\u901a\u8fc7\u5411\u91cf\u5316\uff0c\u6211\u4eec\u5c06\u8bed\u4e49\u7406\u89e3\u7684\u95ee\u9898\uff0c\u5de7\u5999\u5730\u8f6c\u6362\u6210\u4e86\u4e00\u4e2a\u5728\u9ad8\u7ef4\u7a7a\u95f4\u4e2d\u5bfb\u627e\u6700\u8fd1\u90bb\u7684\u51e0\u4f55\u95ee\u9898\uff0c\u4ece\u800c\u5b9e\u73b0\u4e86\u9ad8\u6548\u3001\u7cbe\u51c6\u7684\u8bed\u4e49\u68c0\u7d22\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/AQS%E4%BB%8B%E7%BB%8D/","title":"AQS\u4ecb\u7ecd","text":"<p>AQS\u4e3a\u5b9e\u73b0\u4f9d\u8d56\u4e8e\u5148\u8fdb\u5148\u51fa\uff08FIFO\uff09\u7b49\u5f85\u961f\u5217\u7684\u963b\u585e\u9501\u548c\u76f8\u5173\u7684\u540c\u6b65\u5668\uff08\u5982\u4fe1\u53f7\u91cf\u3001\u4e8b\u4ef6\u7b49\uff09\u63d0\u4f9b\u4e86\u4e00\u4e2a\u57fa\u7840\u6846\u67b6\u3002 \u50cfReentrantLock\u3001Semaphore\u3001CountDownLatch\u7b49\u5e76\u53d1\u5de5\u5177\uff0c\u90fd\u662f\u57fa\u4e8eAQS\u6765\u6784\u5efa\u7684\u3002 AQS\u7684\u8bbe\u8ba1\u76ee\u6807\u662f\u7b80\u5316\u548c\u9ad8\u6548\u5730\u6784\u5efa\u9501\u548c\u540c\u6b65\u5668\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/AQS%E4%BB%8B%E7%BB%8D/#aqs","title":"AQS\u7684\u6838\u5fc3\u601d\u60f3","text":"<p>AQS\u7684\u6838\u5fc3\u601d\u60f3\u5728\u4e8e\uff0c\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u8bf7\u6c42\u5171\u4eab\u8d44\u6e90\u65f6\uff1a *   \u5982\u679c\u8d44\u6e90\u7a7a\u95f2\uff1a\u5219\u5c06\u8be5\u7ebf\u7a0b\u8bbe\u7f6e\u4e3a\u6709\u6548\u7684\u5de5\u4f5c\u7ebf\u7a0b\uff0c\u5e76\u5c06\u5171\u4eab\u8d44\u6e90\u7f6e\u4e3a\u9501\u5b9a\u72b6\u6001\u3002 *   \u5982\u679c\u8d44\u6e90\u5df2\u88ab\u5360\u7528\uff1a\u90a3\u4e48\u5c31\u9700\u8981\u4e00\u5957\u673a\u5236\u6765\u7ba1\u7406\u540e\u7eed\u7684\u8bf7\u6c42\u7ebf\u7a0b\u3002AQS\u91c7\u7528\u7684\u662f\u4e00\u4e2aCLH\u961f\u5217\u9501\u7684\u53d8\u4f53\u6765\u5b9e\u73b0\uff0c\u5c06\u6682\u65f6\u65e0\u6cd5\u83b7\u53d6\u5230\u9501\u7684\u7ebf\u7a0b\u52a0\u5165\u5230\u4e00\u4e2aFIFO\u961f\u5217\u4e2d\u8fdb\u884c\u7b49\u5f85\u3002 \u5f53\u9501\u88ab\u91ca\u653e\u65f6\uff0c\u518d\u4ece\u961f\u5217\u4e2d\u5524\u9192\u4e00\u4e2a\u7ebf\u7a0b\u6765\u83b7\u53d6\u9501\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/AQS%E4%BB%8B%E7%BB%8D/#aqs_1","title":"AQS\u7684\u5b9e\u73b0\u539f\u7406","text":"<p>AQS\u7684\u5b9e\u73b0\u4e3b\u8981\u56f4\u7ed5\u7740\u4ee5\u4e0b\u51e0\u4e2a\u6838\u5fc3\u7ec4\u4ef6\u548c\u673a\u5236\u5c55\u5f00\uff1a</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/AQS%E4%BB%8B%E7%BB%8D/#1-state","title":"1. \u540c\u6b65\u72b6\u6001 (state)","text":"<p>AQS\u5185\u90e8\u7ef4\u62a4\u4e86\u4e00\u4e2a<code>volatile</code>\u7684\u6574\u578b\u53d8\u91cf<code>state</code>\uff0c\u7528\u6765\u8868\u793a\u540c\u6b65\u72b6\u6001\u3002 *   <code>state</code>\u4e3a0\u65f6\uff0c\u901a\u5e38\u8868\u793a\u8d44\u6e90\u672a\u88ab\u9501\u5b9a\u3002 *   <code>state</code>\u5927\u4e8e0\u65f6\uff0c\u8868\u793a\u8d44\u6e90\u5df2\u88ab\u9501\u5b9a\u3002\u5bf9\u4e8e\u53ef\u91cd\u5165\u9501\u6765\u8bf4\uff0c\u8fd9\u4e2a\u503c\u8fd8\u53ef\u4ee5\u8868\u793a\u9501\u88ab\u540c\u4e00\u4e2a\u7ebf\u7a0b\u91cd\u5165\u7684\u6b21\u6570\u3002</p> <p>AQS\u63d0\u4f9b\u4e86\u4e09\u4e2a\u6838\u5fc3\u65b9\u6cd5\u6765\u539f\u5b50\u6027\u5730\u64cd\u4f5c<code>state</code>\u7684\u503c\uff0c\u8fd9\u4e09\u4e2a\u65b9\u6cd5\u5185\u90e8\u5229\u7528\u4e86CAS\uff08Compare-And-Swap\uff09\u64cd\u4f5c\u6765\u4fdd\u8bc1\u7ebf\u7a0b\u5b89\u5168\uff1a *   <code>getState()</code>: \u83b7\u53d6\u5f53\u524d\u540c\u6b65\u72b6\u6001\u7684\u503c\u3002 *   <code>setState(int newState)</code>: \u8bbe\u7f6e\u540c\u6b65\u72b6\u6001\u7684\u503c\u3002 *   <code>compareAndSetState(int expect, int update)</code>: \u5982\u679c\u5f53\u524d<code>state</code>\u7684\u503c\u7b49\u4e8e<code>expect</code>\uff0c\u5219\u539f\u5b50\u6027\u5730\u5c06\u5176\u66f4\u65b0\u4e3a<code>update</code>\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/AQS%E4%BB%8B%E7%BB%8D/#2-clh-craig-landin-and-hagersten-lock","title":"2. CLH\u961f\u5217 (Craig, Landin, and Hagersten Lock)","text":"<p>AQS\u5185\u90e8\u5b9e\u73b0\u4e86\u4e00\u4e2aCLH\u961f\u5217\u7684\u53d8\u4f53\uff0c\u8fd9\u662f\u4e00\u4e2a\u865a\u62df\u7684\u53cc\u5411\u961f\u5217\uff0c\u7528\u4e8e\u5b58\u653e\u7b49\u5f85\u83b7\u53d6\u9501\u7684\u7ebf\u7a0b\u3002 \u6bcf\u4e2a\u8bf7\u6c42\u5171\u4eab\u8d44\u6e90\u7684\u7ebf\u7a0b\u90fd\u4f1a\u88ab\u5c01\u88c5\u6210\u961f\u5217\u4e2d\u7684\u4e00\u4e2a\u8282\u70b9\uff08Node\uff09\u3002</p> <ul> <li>\u8282\u70b9 (Node)\uff1a\u6bcf\u4e2aNode\u8282\u70b9\u5305\u542b\u4e86\u7ebf\u7a0b\u672c\u8eab\u3001\u524d\u9a71\u8282\u70b9\uff08prev\uff09\u3001\u540e\u7ee7\u8282\u70b9\uff08next\uff09\u4ee5\u53ca\u7b49\u5f85\u72b6\u6001\uff08waitStatus\uff09\u7b49\u4fe1\u606f\u3002\u901a\u8fc7<code>prev</code>\u548c<code>next</code>\u6307\u9488\uff0c\u8282\u70b9\u4e4b\u95f4\u6784\u6210\u4e86\u4e00\u4e2a\u53cc\u5411\u94fe\u8868\u3002</li> <li>\u5165\u961f\u4e0e\u51fa\u961f\uff1a\u5f53\u7ebf\u7a0b\u83b7\u53d6\u9501\u5931\u8d25\u540e\uff0c\u4f1a\u88ab\u5c01\u88c5\u6210\u4e00\u4e2aNode\u8282\u70b9\u5e76\u52a0\u5165\u5230\u961f\u5217\u7684\u5c3e\u90e8\u3002\u5f53\u6301\u6709\u9501\u7684\u7ebf\u7a0b\u91ca\u653e\u9501\u65f6\uff0c\u4f1a\u5524\u9192\u961f\u5217\u5934\u90e8\u7684\u4e0b\u4e00\u4e2a\u8282\u70b9\u6240\u5bf9\u5e94\u7684\u7ebf\u7a0b\u3002</li> </ul> <p>AQS\u5bf9\u4f20\u7edf\u7684CLH\u81ea\u65cb\u9501\u8fdb\u884c\u4e86\u4f18\u5316\uff0c\u5f15\u5165\u4e86\u963b\u585e\u548c\u5524\u9192\u673a\u5236\u3002\u5f53\u7ebf\u7a0b\u83b7\u53d6\u9501\u5931\u8d25\u540e\uff0c\u4f1a\u5148\u77ed\u6682\u81ea\u65cb\u5c1d\u8bd5\uff0c\u5982\u679c\u4ecd\u7136\u5931\u8d25\uff0c\u5219\u4f1a\u88ab\u6302\u8d77\uff08park\uff09\uff0c\u8fdb\u5165\u963b\u585e\u72b6\u6001\uff0c\u4ece\u800c\u51cf\u5c11\u4e0d\u5fc5\u8981\u7684CPU\u8d44\u6e90\u6d88\u8017\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/AQS%E4%BB%8B%E7%BB%8D/#3","title":"3. \u4e24\u79cd\u8d44\u6e90\u5171\u4eab\u6a21\u5f0f","text":"<p>AQS\u5b9a\u4e49\u4e86\u4e24\u79cd\u4e0d\u540c\u7684\u8d44\u6e90\u5171\u4eab\u65b9\u5f0f\uff0c\u4ee5\u6ee1\u8db3\u4e0d\u540c\u573a\u666f\u4e0b\u7684\u5e76\u53d1\u9700\u6c42\uff1a</p> <ul> <li>\u72ec\u5360\u6a21\u5f0f (Exclusive)\uff1a\u5728\u4efb\u4f55\u65f6\u523b\uff0c\u53ea\u5141\u8bb8\u4e00\u4e2a\u7ebf\u7a0b\u6301\u6709\u9501\uff0c\u4f8b\u5982<code>ReentrantLock</code>\u3002</li> <li>\u5171\u4eab\u6a21\u5f0f (Share)\uff1a\u5141\u8bb8\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u83b7\u53d6\u9501\uff0c\u4f8b\u5982<code>Semaphore</code>\u548c<code>CountDownLatch</code>\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/AQS%E4%BB%8B%E7%BB%8D/#4","title":"4. \u6a21\u677f\u65b9\u6cd5\u8bbe\u8ba1\u6a21\u5f0f","text":"<p>AQS\u7684\u8bbe\u8ba1\u91c7\u7528\u4e86\u6a21\u677f\u65b9\u6cd5\u6a21\u5f0f\u3002 \u5b83\u5c06\u901a\u7528\u7684\u7ebf\u7a0b\u6392\u961f\u3001\u963b\u585e\u3001\u5524\u9192\u7b49\u903b\u8f91\u5c01\u88c5\u5728\u81ea\u8eab\u5185\u90e8\uff0c\u800c\u5c06\u4e0e\u5177\u4f53\u9501\u5b9e\u73b0\u76f8\u5173\u7684\u903b\u8f91\uff08\u5373\u5982\u4f55\u83b7\u53d6\u548c\u91ca\u653e\u540c\u6b65\u72b6\u6001<code>state</code>\uff09\u5f00\u653e\u7ed9\u5b50\u7c7b\u53bb\u5b9e\u73b0\u3002</p> <p>\u5f00\u53d1\u8005\u5982\u679c\u9700\u8981\u81ea\u5b9a\u4e49\u540c\u6b65\u5668\uff0c\u53ea\u9700\u7ee7\u627fAQS\u5e76\u91cd\u5199\u4ee5\u4e0b\u51e0\u4e2a<code>protected</code>\u65b9\u6cd5\u5373\u53ef\uff1a</p> <ul> <li><code>tryAcquire(int arg)</code>\uff1a\u72ec\u5360\u6a21\u5f0f\u4e0b\u5c1d\u8bd5\u83b7\u53d6\u8d44\u6e90\u3002</li> <li><code>tryRelease(int arg)</code>\uff1a\u72ec\u5360\u6a21\u5f0f\u4e0b\u5c1d\u8bd5\u91ca\u653e\u8d44\u6e90\u3002</li> <li><code>tryAcquireShared(int arg)</code>\uff1a\u5171\u4eab\u6a21\u5f0f\u4e0b\u5c1d\u8bd5\u83b7\u53d6\u8d44\u6e90\u3002</li> <li><code>tryReleaseShared(int arg)</code>\uff1a\u5171\u4eab\u6a21\u5f0f\u4e0b\u5c1d\u8bd5\u91ca\u653e\u8d44\u6e90\u3002</li> <li><code>isHeldExclusively()</code>\uff1a\u5224\u65ad\u5f53\u524d\u7ebf\u7a0b\u662f\u5426\u6301\u6709\u72ec\u5360\u9501\u3002</li> </ul> <p>\u4ee5<code>ReentrantLock</code>\u4e3a\u4f8b\uff0c\u5b83\u7684<code>lock</code>\u548c<code>unlock</code>\u65b9\u6cd5\u5185\u90e8\u90fd\u805a\u5408\u4e86\u4e00\u4e2a\u7ee7\u627f\u81eaAQS\u7684<code>Sync</code>\u5b50\u7c7b\uff08\u5206\u4e3a\u516c\u5e73\u9501<code>FairSync</code>\u548c\u975e\u516c\u5e73\u9501<code>NonfairSync</code>\uff09\u3002 \u5f53\u8c03\u7528<code>lock()</code>\u65b9\u6cd5\u65f6\uff0c\u5b9e\u9645\u4e0a\u662f\u8c03\u7528\u4e86AQS\u7684<code>acquire()</code>\u65b9\u6cd5\uff0c<code>acquire()</code>\u4f1a\u518d\u56de\u8c03\u5b50\u7c7b\u91cd\u5199\u7684<code>tryAcquire()</code>\u65b9\u6cd5\u6765\u771f\u6b63\u6267\u884c\u83b7\u53d6\u9501\u7684\u903b\u8f91\u3002 \u5982\u679c\u83b7\u53d6\u5931\u8d25\uff0cAQS\u6846\u67b6\u5c31\u4f1a\u63a5\u7ba1\u540e\u7eed\u7684\u5165\u961f\u548c\u7ebf\u7a0b\u6302\u8d77\u7b49\u64cd\u4f5c\u3002 \u540c\u6837\uff0c<code>unlock()</code>\u65b9\u6cd5\u4f1a\u8c03\u7528AQS\u7684<code>release()</code>\u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u5219\u4f1a\u56de\u8c03\u5b50\u7c7b\u7684<code>tryRelease()</code>\u6765\u91ca\u653e\u9501\uff0c\u5e76\u7531AQS\u5b8c\u6210\u540e\u7eed\u7684\u5524\u9192\u64cd\u4f5c\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/CAS%E5%92%8Csynchronized%E4%BB%8B%E7%BB%8D%EF%BC%8C%E4%B8%A4%E8%80%85%E5%AD%98%E5%9C%A8%E4%BB%80%E4%B9%88%E4%B8%8D%E5%90%8C/","title":"CAS\u548csynchronized\u4ecb\u7ecd\uff0c\u4e24\u8005\u5b58\u5728\u4ec0\u4e48\u4e0d\u540c","text":""},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/CAS%E5%92%8Csynchronized%E4%BB%8B%E7%BB%8D%EF%BC%8C%E4%B8%A4%E8%80%85%E5%AD%98%E5%9C%A8%E4%BB%80%E4%B9%88%E4%B8%8D%E5%90%8C/#cascompare-and-swap","title":"CAS\uff08Compare-and-Swap\uff09\u7684\u5b9e\u73b0\u601d\u8def","text":"<p>CAS\u662f\u4e00\u79cd\u975e\u963b\u585e\uff08non-blocking\uff09\u7684\u4e50\u89c2\u5e76\u53d1\u7b56\u7565\u3002\u5b83\u57fa\u4e8e\u786c\u4ef6\u5c42\u9762\u7684\u539f\u5b50\u6307\u4ee4\uff0c\u65e8\u5728\u5728\u4e0d\u963b\u585e\u7ebf\u7a0b\u7684\u60c5\u51b5\u4e0b\u5b9e\u73b0\u6570\u636e\u66f4\u65b0\u7684\u539f\u5b50\u6027\u3002</p> <ol> <li> <p>\u6838\u5fc3\u601d\u60f3\uff1aCAS\u64cd\u4f5c\u5305\u542b\u4e09\u4e2a\u57fa\u672c\u53c2\u6570\uff1a</p> <ul> <li>\u5185\u5b58\u4f4d\u7f6e\uff08V\uff09\uff1a\u8981\u64cd\u4f5c\u7684\u53d8\u91cf\u5728\u5185\u5b58\u4e2d\u7684\u5730\u5740\u3002</li> <li>\u9884\u671f\u539f\u503c\uff08A\uff09\uff1a\u8ba4\u4e3aV\u5f53\u524d\u5e94\u8be5\u5177\u6709\u7684\u503c\u3002</li> <li>\u65b0\u503c\uff08B\uff09\uff1a\u5982\u679cV\u7b49\u4e8eA\uff0c\u5219\u8981\u66f4\u65b0\u4e3a\u7684\u65b0\u503c\u3002 CAS\u7684\u903b\u8f91\u662f\uff1a\u5982\u679c\u5185\u5b58\u4f4d\u7f6eV\u7684\u503c\u4e0e\u9884\u671f\u539f\u503cA\u76f8\u7b49\uff0c\u90a3\u4e48\u5c31\u5c06V\u7684\u503c\u66f4\u65b0\u4e3a\u65b0\u503cB\uff1b\u5426\u5219\uff0c\u4e0d\u8fdb\u884c\u4efb\u4f55\u64cd\u4f5c\u3002\u8fd9\u4e2a\u201c\u6bd4\u8f83\u5e76\u4ea4\u6362\u201d\u7684\u6574\u4e2a\u8fc7\u7a0b\u662f\u7531\u786c\u4ef6\u4fdd\u8bc1\u539f\u5b50\u6027\u7684\u3002</li> </ul> </li> <li> <p>\u786c\u4ef6\u652f\u6301\uff1aJava\u4e2d\u7684CAS\u64cd\u4f5c\u4f9d\u8d56\u4e8e\u73b0\u4ee3\u5904\u7406\u5668\u63d0\u4f9b\u7684\u5e95\u5c42\u786c\u4ef6\u6307\u4ee4\u3002\u4f8b\u5982\uff0c\u5728Intel x86\u67b6\u6784\u4e0a\uff0c\u8fd9\u5bf9\u5e94\u4e8e<code>CMPXCHG</code>\uff08Compare Exchange\uff09\u6307\u4ee4\uff1b\u5728ARM\u67b6\u6784\u4e0a\uff0c\u5219\u662f<code>LDREX</code>/<code>STREX</code>\uff08Load-Exclusive / Store-Exclusive\uff09\u6307\u4ee4\u5bf9\u3002\u8fd9\u4e9b\u6307\u4ee4\u80fd\u591f\u786e\u4fdd\u5728\u591a\u5904\u7406\u5668\u73af\u5883\u4e0b\uff0c\u6bd4\u8f83\u548c\u4ea4\u6362\u64cd\u4f5c\u7684\u539f\u5b50\u6027\uff0c\u5373\u4e0d\u4f1a\u88ab\u5176\u4ed6\u7ebf\u7a0b\u6216\u4e2d\u65ad\u6253\u65ad\u3002</p> </li> <li> <p>Java\u4e2d\u7684\u5b9e\u73b0\uff1a</p> <ul> <li><code>sun.misc.Unsafe</code> \u7c7b\uff1aJava\u901a\u8fc7\u5185\u90e8\u7684<code>sun.misc.Unsafe</code>\u7c7b\u6765\u76f4\u63a5\u8bbf\u95ee\u548c\u64cd\u4f5c\u5185\u5b58\uff0c\u5e76\u8c03\u7528\u5e95\u5c42\u7684CAS\u6307\u4ee4\u3002\u8fd9\u4e2a\u7c7b\u63d0\u4f9b\u4e86\u5982<code>compareAndSwapInt</code>\u3001<code>compareAndSwapLong</code>\u7b49\u65b9\u6cd5\u3002<code>Unsafe</code>\u7c7b\u901a\u5e38\u4e0d\u5efa\u8bae\u76f4\u63a5\u5728\u4e1a\u52a1\u4ee3\u7801\u4e2d\u4f7f\u7528\uff0c\u56e0\u4e3a\u5b83\u53ef\u80fd\u7834\u574fJVM\u7684\u5b89\u5168\u6027\u3002</li> <li><code>java.util.concurrent.atomic</code> \u5305\uff1a\u4e3a\u4e86\u65b9\u4fbf\u5f00\u53d1\u8005\uff0cJava\u5728<code>java.util.concurrent.atomic</code>\u5305\u4e2d\u63d0\u4f9b\u4e86<code>AtomicInteger</code>\u3001<code>AtomicLong</code>\u3001<code>AtomicReference</code>\u7b49\u539f\u5b50\u7c7b\u3002\u8fd9\u4e9b\u7c7b\u5185\u90e8\u5c01\u88c5\u4e86<code>Unsafe</code>\u7c7b\u7684CAS\u64cd\u4f5c\uff0c\u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217\u7ebf\u7a0b\u5b89\u5168\u7684\u539f\u5b50\u64cd\u4f5c\u65b9\u6cd5\uff08\u5982<code>incrementAndGet()</code>\u3001<code>compareAndSet()</code>\uff09\uff0c\u4f7f\u5f97\u5f00\u53d1\u8005\u65e0\u9700\u5173\u6ce8\u5e95\u5c42\u7ec6\u8282\u3002</li> <li>\u81ea\u65cb\uff08Spin-locking\uff09\uff1a\u5f53CAS\u64cd\u4f5c\u5931\u8d25\u65f6\uff08\u5373V\u4e0d\u7b49\u4e8eA\uff09\uff0c\u610f\u5473\u7740\u53d8\u91cf\u5df2\u88ab\u5176\u4ed6\u7ebf\u7a0b\u4fee\u6539\u3002CAS\u5e76\u4e0d\u4f1a\u963b\u585e\u5f53\u524d\u7ebf\u7a0b\uff0c\u800c\u662f\u8ba9\u7ebf\u7a0b\u8fdb\u884c\u201c\u81ea\u65cb\u201d\uff0c\u5373\u5728\u4e00\u4e2a\u5faa\u73af\u4e2d\u53cd\u590d\u5c1d\u8bd5\u6267\u884cCAS\u64cd\u4f5c\uff0c\u76f4\u5230\u6210\u529f\u4e3a\u6b62\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u5b8c\u5168\u5728\u7528\u6237\u6001\u5b8c\u6210\uff0c\u907f\u514d\u4e86\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362\u7684\u5f00\u9500\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/CAS%E5%92%8Csynchronized%E4%BB%8B%E7%BB%8D%EF%BC%8C%E4%B8%A4%E8%80%85%E5%AD%98%E5%9C%A8%E4%BB%80%E4%B9%88%E4%B8%8D%E5%90%8C/#synchronized","title":"<code>synchronized</code> \u7684\u5b9e\u73b0\u601d\u8def","text":"<p><code>synchronized</code>\u662fJava\u8bed\u8a00\u5c42\u9762\u7684\u5173\u952e\u5b57\uff0c\u5b83\u63d0\u4f9b\u4e86\u4e00\u79cd\u963b\u585e\uff08blocking\uff09\u7684\u60b2\u89c2\u5e76\u53d1\u7b56\u7565\u3002<code>synchronized</code>\u901a\u8fc7\u5bf9\u8c61\u76d1\u89c6\u5668\uff08Object Monitor\uff09\u6765\u5b9e\u73b0\u7ebf\u7a0b\u540c\u6b65\uff0c\u786e\u4fdd\u540c\u4e00\u65f6\u95f4\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u80fd\u591f\u6267\u884c\u7279\u5b9a\u7684\u4ee3\u7801\u5757\u6216\u65b9\u6cd5\u3002</p> <ol> <li> <p>\u5bf9\u8c61\u76d1\u89c6\u5668\uff08Monitor\uff09\uff1aJava\u4e2d\u7684\u6bcf\u4e2a\u5bf9\u8c61\u90fd\u53ef\u4ee5\u4f5c\u4e3a\u9501\u3002\u5f53<code>synchronized</code>\u4fee\u9970\u4e00\u4e2a\u65b9\u6cd5\u6216\u4ee3\u7801\u5757\u65f6\uff0c\u5b83\u4f1a\u5173\u8054\u5230\u4e00\u4e2a\u5bf9\u8c61\u7684\u76d1\u89c6\u5668\u3002\u8fd9\u4e2a\u76d1\u89c6\u5668\u5728JVM\u7684C++\u5b9e\u73b0\u4e2d\u5bf9\u5e94\u4e8e<code>ObjectMonitor</code>\u3002</p> </li> <li> <p>\u9501\u7684\u83b7\u53d6\u4e0e\u91ca\u653e\uff1a</p> <ul> <li>\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u8fdb\u5165<code>synchronized</code>\u4fee\u9970\u7684\u4ee3\u7801\u5757\u6216\u65b9\u6cd5\u65f6\uff0c\u5b83\u4f1a\u5c1d\u8bd5\u83b7\u53d6\u5173\u8054\u5bf9\u8c61\u7684\u76d1\u89c6\u5668\u9501\u3002</li> <li>\u5982\u679c\u9501\u53ef\u7528\uff0c\u7ebf\u7a0b\u5c31\u83b7\u53d6\u9501\u5e76\u8fdb\u5165\u4e34\u754c\u533a\u6267\u884c\u4ee3\u7801\u3002\u5176\u4ed6\u8bd5\u56fe\u83b7\u53d6\u540c\u4e00\u9501\u7684\u7ebf\u7a0b\u5c06\u88ab\u963b\u585e\uff08\u6682\u505c\u6267\u884c\uff09\uff0c\u5e76\u88ab\u653e\u5165\u7b49\u5f85\u961f\u5217\uff0c\u76f4\u5230\u6301\u6709\u9501\u7684\u7ebf\u7a0b\u91ca\u653e\u9501\u3002</li> <li>\u9501\u5728<code>synchronized</code>\u4ee3\u7801\u5757\u6216\u65b9\u6cd5\u6267\u884c\u5b8c\u6bd5\uff08\u6b63\u5e38\u9000\u51fa\u6216\u629b\u51fa\u5f02\u5e38\uff09\u540e\u81ea\u52a8\u91ca\u653e\u3002</li> </ul> </li> <li> <p>JVM\u9501\u4f18\u5316\uff08Lock Escalation\uff09\uff1a\u4e3a\u4e86\u63d0\u9ad8<code>synchronized</code>\u7684\u6027\u80fd\uff0cJVM\u5bf9\u5176\u8fdb\u884c\u4e86\u5927\u91cf\u7684\u4f18\u5316\uff0c\u6839\u636e\u7ade\u4e89\u7a0b\u5ea6\uff0c\u9501\u4f1a\u7ecf\u5386\u4ece\u4f4e\u5230\u9ad8\u7684\u5347\u7ea7\u8fc7\u7a0b\uff1a</p> <ul> <li>\u504f\u5411\u9501\uff08Biased Locking\uff09\uff1a\u5728\u51e0\u4e4e\u6ca1\u6709\u7ade\u4e89\u7684\u60c5\u51b5\u4e0b\uff0c\u9501\u4f1a\u504f\u5411\u4e8e\u7b2c\u4e00\u4e2a\u83b7\u53d6\u5b83\u7684\u7ebf\u7a0b\u3002\u8be5\u7ebf\u7a0b\u518d\u6b21\u8fdb\u5165\u540c\u6b65\u5757\u65f6\uff0c\u65e0\u9700\u4efb\u4f55\u540c\u6b65\u64cd\u4f5c\uff0c\u53ea\u9700\u68c0\u67e5Mark Word\u4e2d\u7684\u504f\u5411ID\u5373\u53ef\uff0c\u5b8c\u5168\u5728\u7528\u6237\u6001\u5b8c\u6210\u3002</li> <li>\u8f7b\u91cf\u7ea7\u9501\uff08Lightweight Locking\uff09\uff1a\u5f53\u6709\u591a\u4e2a\u7ebf\u7a0b\u4ea4\u66ff\u8bbf\u95ee\u540c\u4e00\u628a\u9501\uff0c\u4f46\u4e0d\u5b58\u5728\u771f\u6b63\u7684\u5e76\u53d1\u7ade\u4e89\u65f6\uff0c\u504f\u5411\u9501\u4f1a\u5347\u7ea7\u4e3a\u8f7b\u91cf\u7ea7\u9501\u3002\u7ebf\u7a0b\u4f1a\u5728\u81ea\u5df1\u7684\u6808\u5e27\u4e2d\u5efa\u7acb\u9501\u8bb0\u5f55\uff08Lock Record\uff09\uff0c\u5e76\u901a\u8fc7CAS\u64cd\u4f5c\u5c1d\u8bd5\u5c06\u5bf9\u8c61\u7684Mark Word\u66f4\u65b0\u4e3a\u6307\u5411\u8be5\u9501\u8bb0\u5f55\u7684\u6307\u9488\u3002\u5982\u679cCAS\u6210\u529f\uff0c\u5219\u83b7\u5f97\u8f7b\u91cf\u7ea7\u9501\uff1b\u5982\u679c\u5931\u8d25\uff0c\u7ebf\u7a0b\u4f1a\u8fdb\u884c\u77ed\u65f6\u95f4\u7684\u81ea\u65cb\uff0c\u5c1d\u8bd5\u518d\u6b21\u83b7\u53d6\u9501\u3002\u8fd9\u4e2a\u9636\u6bb5\u4e5f\u4e3b\u8981\u5728\u7528\u6237\u6001\u901a\u8fc7CAS\u548c\u81ea\u65cb\u5b8c\u6210\u3002</li> <li>\u91cd\u91cf\u7ea7\u9501\uff08Heavyweight Locking\uff09\uff1a\u5f53\u7ade\u4e89\u6fc0\u70c8\uff0c\u8f7b\u91cf\u7ea7\u9501\u7684\u81ea\u65cb\u591a\u6b21\u540e\u4ecd\u65e0\u6cd5\u83b7\u53d6\u9501\u65f6\uff0c\u9501\u4f1a\u5347\u7ea7\u4e3a\u91cd\u91cf\u7ea7\u9501\u3002\u6b64\u65f6\uff0c<code>synchronized</code>\u7684\u5b9e\u73b0\u4f1a\u4f9d\u8d56\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u7684\u4e92\u65a5\u91cf\uff08Mutex\uff09\u3002\u672a\u83b7\u53d6\u5230\u9501\u7684\u7ebf\u7a0b\u4f1a\u88ab\u64cd\u4f5c\u7cfb\u7edf\u6302\u8d77\uff08\u963b\u585e\uff09\uff0c\u5e76\u4ece\u8fd0\u884c\u72b6\u6001\u5207\u6362\u5230\u7b49\u5f85\u72b6\u6001\u3002\u7ebf\u7a0b\u7684\u6302\u8d77\u548c\u5524\u9192\u6d89\u53ca\u5230\u7528\u6237\u6001\u5230\u5185\u6838\u6001\u7684\u5207\u6362\uff0c\u8fd9\u662f\u5f00\u9500\u8f83\u5927\u7684\u64cd\u4f5c\u3002</li> </ul> </li> <li> <p>\u5185\u5b58\u53ef\u89c1\u6027\uff1a<code>synchronized</code>\u9664\u4e86\u4fdd\u8bc1\u539f\u5b50\u6027\u5916\uff0c\u8fd8\u4fdd\u8bc1\u4e86\u5185\u5b58\u53ef\u89c1\u6027\u3002\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u91ca\u653e<code>synchronized</code>\u9501\u65f6\uff0c\u5b83\u6240\u505a\u7684\u6240\u6709\u4fee\u6539\u90fd\u4f1a\u88ab\u5237\u65b0\u5230\u4e3b\u5185\u5b58\u4e2d\uff1b\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u83b7\u53d6<code>synchronized</code>\u9501\u65f6\uff0c\u5b83\u4f1a\u4ece\u4e3b\u5185\u5b58\u4e2d\u8bfb\u53d6\u5171\u4eab\u53d8\u91cf\u7684\u6700\u65b0\u503c\u3002\u8fd9\u7b26\u5408Java\u5185\u5b58\u6a21\u578b\u7684\u201chappens-before\u201d\u539f\u5219\u3002</p> </li> </ol> \u7279\u6027 CAS (Compare-and-Swap) <code>synchronized</code> \u5e76\u53d1\u7b56\u7565 \u4e50\u89c2\u5e76\u53d1\uff1a\u5047\u8bbe\u4e0d\u4f1a\u53d1\u751f\u51b2\u7a81\uff0c\u5c1d\u8bd5\u66f4\u65b0\uff0c\u5931\u8d25\u5219\u91cd\u8bd5\uff08\u975e\u963b\u585e\uff09\u3002 \u60b2\u89c2\u5e76\u53d1\uff1a\u5047\u8bbe\u4f1a\u53d1\u751f\u51b2\u7a81\uff0c\u5148\u83b7\u53d6\u9501\uff0c\u72ec\u5360\u8bbf\u95ee\uff08\u963b\u585e\uff09\u3002 \u5b9e\u73b0\u673a\u5236 \u57fa\u4e8e\u786c\u4ef6\u539f\u5b50\u6307\u4ee4\uff0c\u901a\u8fc7<code>Unsafe</code>\u7c7b\u548c<code>Atomic</code>\u7c7b\u5b9e\u73b0\u3002 \u57fa\u4e8e\u5bf9\u8c61\u76d1\u89c6\u5668\uff08Monitor\uff09\uff0cJVM\u5c42\u9762\u5b9e\u73b0\uff0c\u4f9d\u8d56\u64cd\u4f5c\u7cfb\u7edf\u4e92\u65a5\u91cf\uff08\u91cd\u91cf\u7ea7\u9501\uff09\u3002 \u963b\u585e\u6027\u8d28 \u975e\u963b\u585e\uff1a\u64cd\u4f5c\u5931\u8d25\u65f6\u7ebf\u7a0b\u81ea\u65cb\u91cd\u8bd5\uff0c\u4e0d\u4f1a\u88ab\u6302\u8d77\u3002 \u963b\u585e\uff1a\u7ade\u4e89\u5931\u8d25\u7684\u7ebf\u7a0b\u4f1a\u88ab\u6302\u8d77\uff08\u91cd\u91cf\u7ea7\u9501\uff09\uff0c\u8fdb\u5165\u7b49\u5f85\u72b6\u6001\u3002 \u7528\u6237\u6001/\u5185\u6838\u6001 \u4e3b\u8981\u5728\u7528\u6237\u6001\u5b8c\u6210\uff0c\u6781\u5c11\u6d89\u53ca\u5185\u6838\u6001\u5207\u6362\u3002 \u4f4e\u7ade\u4e89\u65f6\uff08\u504f\u5411/\u8f7b\u91cf\u7ea7\u9501\uff09\u5728\u7528\u6237\u6001\u5b8c\u6210\uff1b\u9ad8\u7ade\u4e89\u65f6\uff08\u91cd\u91cf\u7ea7\u9501\uff09\u6d89\u53ca\u9891\u7e41\u7684\u7528\u6237\u6001\u4e0e\u5185\u6838\u6001\u5207\u6362\u3002 \u9501\u7c92\u5ea6 \u901a\u5e38\u7528\u4e8e\u5bf9\u5355\u4e2a\u5171\u4eab\u53d8\u91cf\u7684\u539f\u5b50\u64cd\u4f5c\uff0c\u7c92\u5ea6\u8f83\u7ec6\u3002 \u53ef\u4ee5\u4fdd\u62a4\u4e00\u4e2a\u4ee3\u7801\u5757\u3001\u65b9\u6cd5\u6216\u6574\u4e2a\u5bf9\u8c61\uff0c\u7c92\u5ea6\u8f83\u7c97\u3002 \u9002\u7528\u573a\u666f \u9002\u7528\u4e8e\u5bf9\u5355\u4e2a\u5171\u4eab\u53d8\u91cf\u8fdb\u884c\u9ad8\u6548\u539f\u5b50\u66f4\u65b0\uff0c\u662f\u5b9e\u73b0\u65e0\u9501\u6570\u636e\u7ed3\u6784\u7684\u57fa\u7840\u3002 \u9002\u7528\u4e8e\u4fdd\u62a4\u66f4\u5927\u8303\u56f4\u7684\u4e34\u754c\u533a\uff0c\u6216\u6d89\u53ca\u590d\u6742\u903b\u8f91\u7684\u540c\u6b65\u3002 \u201c\u6b7b\u5faa\u73af\u201d\u98ce\u9669 \u9ad8\u7ade\u4e89\u65f6\u53ef\u80fd\u5bfc\u81f4\u957f\u65f6\u95f4\u81ea\u65cb\uff08CPU\u7a7a\u8f6c\uff09\uff0c\u6d6a\u8d39CPU\u8d44\u6e90\u3002 \u7ade\u4e89\u5931\u8d25\u7684\u7ebf\u7a0b\u4f1a\u88ab\u6302\u8d77\uff0c\u4e0d\u4f1a\u7a7a\u8f6c\uff0c\u4f46\u5b58\u5728\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362\u5f00\u9500\u3002 \u516c\u5e73\u6027 \u901a\u5e38\u662f\u975e\u516c\u5e73\u7684\uff0c\u81ea\u65cb\u7684\u7ebf\u7a0b\u53ef\u80fd\u7acb\u5373\u6210\u529f\u3002 \u9ed8\u8ba4\u662f\u975e\u516c\u5e73\u7684\uff0c\u4f46\u53ef\u4ee5\u901a\u8fc7<code>ReentrantLock</code>\u5b9e\u73b0\u516c\u5e73\u9501\u3002 \u53ef\u89c1\u6027 CAS\u6307\u4ee4\u901a\u5e38\u5305\u542b\u5185\u5b58\u5c4f\u969c\uff0c\u4fdd\u8bc1\u5185\u5b58\u53ef\u89c1\u6027\u3002 \u9501\u7684\u83b7\u53d6\u548c\u91ca\u653e\u9690\u5f0f\u5730\u4fdd\u8bc1\u5185\u5b58\u53ef\u89c1\u6027\u3002"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/CAS%E5%92%8Csynchronized%E4%BB%8B%E7%BB%8D%EF%BC%8C%E4%B8%A4%E8%80%85%E5%AD%98%E5%9C%A8%E4%BB%80%E4%B9%88%E4%B8%8D%E5%90%8C/#_1","title":"\u6027\u80fd\u4e0a\u7684\u5dee\u522b","text":"<p>CAS\u548c<code>synchronized</code>\u7684\u6027\u80fd\u5dee\u5f02\u662f\u4e00\u4e2a\u5173\u952e\u70b9\uff0c\u5b83\u9ad8\u5ea6\u4f9d\u8d56\u4e8e\u5177\u4f53\u7684\u5e94\u7528\u573a\u666f\u3001\u7ade\u4e89\u7a0b\u5ea6\u4ee5\u53caJVM\u7684\u4f18\u5316\u6c34\u5e73\u3002\u7406\u89e3\u5176\u6027\u80fd\u5dee\u5f02\uff0c\u7279\u522b\u662f\u4e0e\u7528\u6237\u6001\u548c\u5185\u6838\u6001\u7684\u5173\u8054\uff0c\u81f3\u5173\u91cd\u8981\u3002</p> <ol> <li> <p>\u7528\u6237\u6001\u4e0e\u5185\u6838\u6001\u7684\u5f00\u9500</p> <ul> <li>\u7528\u6237\u6001\uff1a\u5e94\u7528\u7a0b\u5e8f\u8fd0\u884c\u7684\u73af\u5883\uff0c\u6743\u9650\u53d7\u9650\u3002</li> <li>\u5185\u6838\u6001\uff1a\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u8fd0\u884c\u7684\u73af\u5883\uff0c\u62e5\u6709\u6700\u9ad8\u6743\u9650\uff0c\u53ef\u4ee5\u8bbf\u95ee\u6240\u6709\u786c\u4ef6\u8d44\u6e90\u3002</li> <li>\u4e0a\u4e0b\u6587\u5207\u6362\uff08Context Switch\uff09\uff1a\u5f53\u64cd\u4f5c\u7cfb\u7edf\u5c06CPU\u4ece\u4e00\u4e2a\u8fdb\u7a0b/\u7ebf\u7a0b\u5207\u6362\u5230\u53e6\u4e00\u4e2a\u8fdb\u7a0b/\u7ebf\u7a0b\u65f6\uff0c\u9700\u8981\u4fdd\u5b58\u5f53\u524d\u8fdb\u7a0b/\u7ebf\u7a0b\u7684\u72b6\u6001\uff0c\u7136\u540e\u52a0\u8f7d\u4e0b\u4e00\u4e2a\u8fdb\u7a0b/\u7ebf\u7a0b\u7684\u72b6\u6001\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u662f\u6602\u8d35\u7684\uff0c\u5c24\u5176\u662f\u7528\u6237\u6001\u4e0e\u5185\u6838\u6001\u4e4b\u95f4\u7684\u5207\u6362\uff0c\u56e0\u4e3a\u8fd9\u6d89\u53ca\u5230\u7279\u6743\u6307\u4ee4\u7684\u6267\u884c\u3001\u5bc4\u5b58\u5668\u4fdd\u5b58/\u6062\u590d\u3001\u5730\u5740\u7a7a\u95f4\u5207\u6362\u7b49\u3002</li> </ul> </li> <li> <p>\u4f4e\u7ade\u4e89\uff08Low Contention\uff09\u60c5\u51b5\u4e0b\u7684\u6027\u80fd</p> <ul> <li>CAS\u66f4\u4f18\uff1a\u5728\u4f4e\u7ade\u4e89\u751a\u81f3\u65e0\u7ade\u4e89\u7684\u573a\u666f\u4e0b\uff0cCAS\u7684\u6027\u80fd\u901a\u5e38\u4f18\u4e8e<code>synchronized</code>\u3002CAS\u64cd\u4f5c\u4ec5\u4ec5\u662f\u6267\u884c\u4e00\u4e2a\u7b80\u5355\u7684\u786c\u4ef6\u539f\u5b50\u6307\u4ee4\uff0c\u5b83\u5b8c\u5168\u5728\u7528\u6237\u6001\u5b8c\u6210\uff0c\u4e0d\u4f1a\u5bfc\u81f4\u7ebf\u7a0b\u963b\u585e\u548c\u4e0a\u4e0b\u6587\u5207\u6362\u7684\u5f00\u9500\u3002</li> <li><code>synchronized</code>\u7684\u4f18\u5316\u6548\u679c\uff1aJVM\u5bf9<code>synchronized</code>\u7684\u4f18\u5316\uff08\u504f\u5411\u9501\u548c\u8f7b\u91cf\u7ea7\u9501\uff09\u4f7f\u5f97\u5176\u5728\u4f4e\u7ade\u4e89\u65f6\u5f00\u9500\u4e5f\u53d8\u5f97\u975e\u5e38\u5c0f\u3002<ul> <li>\u504f\u5411\u9501\uff1a\u65e0\u9700\u4efb\u4f55CAS\uff0c\u4ec5\u68c0\u67e5\u5bf9\u8c61\u5934\uff0c\u5f00\u9500\u51e0\u4e4e\u4e3a\u96f6\uff0c\u5b8c\u5168\u5728\u7528\u6237\u6001\u3002</li> <li>\u8f7b\u91cf\u7ea7\u9501\uff1a\u867d\u7136\u4f7f\u7528\u4e86CAS\u64cd\u4f5c\uff0c\u4f46\u540c\u6837\u5728\u7528\u6237\u6001\u8fdb\u884c\uff0c\u5e76\u4e14\u5728\u6210\u529f\u83b7\u53d6\u9501\u540e\uff0c\u540e\u7eed\u64cd\u4f5c\u4e5f\u907f\u514d\u4e86\u66f4\u6602\u8d35\u7684\u540c\u6b65\u539f\u8bed\u3002\u7ebf\u7a0b\u53ef\u80fd\u8fdb\u884c\u77ed\u65f6\u95f4\u81ea\u65cb\uff0c\u4f46\u5982\u679c\u5f88\u5feb\u83b7\u53d6\u5230\u9501\uff0c\u5219\u5f00\u9500\u5f88\u5c0f\u3002</li> </ul> </li> <li>\u603b\u7ed3\uff1a\u5728\u4f4e\u7ade\u4e89\u65f6\uff0cCAS\u901a\u5e38\u8868\u73b0\u51fa\u66f4\u597d\u7684\u6027\u80fd\uff0c\u56e0\u4e3a\u5b83\u5b8c\u5168\u907f\u514d\u4e86\u4f20\u7edf\u9501\u673a\u5236\u7684\u5f00\u9500\u3002\u800c<code>synchronized</code>\u7ecf\u8fc7JVM\u4f18\u5316\u540e\uff0c\u5728\u4f4e\u7ade\u4e89\u65f6\u6027\u80fd\u4e5f\u76f8\u5f53\u63a5\u8fd1\uff0c\u751a\u81f3\u53ef\u4ee5\u5ffd\u7565\u4e0d\u8ba1\u5dee\u5f02\u3002\u4e24\u8005\u90fd\u5728\u7528\u6237\u6001\u9ad8\u6548\u5b8c\u6210\u3002</li> </ul> </li> <li> <p>\u9ad8\u7ade\u4e89\uff08High Contention\uff09\u60c5\u51b5\u4e0b\u7684\u6027\u80fd</p> <ul> <li>CAS\u7684\u52a3\u52bf\uff08\u81ea\u65cb\u5f00\u9500\u4e0eCPU\u7a7a\u8f6c\uff09\uff1a\u5728\u9ad8\u7ade\u4e89\u73af\u5883\u4e0b\uff0cCAS\u64cd\u4f5c\u53ef\u80fd\u4f1a\u53cd\u590d\u5931\u8d25\u5e76\u8fdb\u884c\u81ea\u65cb\u91cd\u8bd5\u3002<ul> <li>\u6bcf\u6b21CAS\u5931\u8d25\uff0c\u7ebf\u7a0b\u90fd\u4f1a\u518d\u6b21\u5c1d\u8bd5\uff0c\u8fd9\u4e2a\u201c\u5fd9\u7b49\u201d\u8fc7\u7a0b\u4f1a\u6301\u7eed\u6d88\u8017CPU\u8d44\u6e90\uff0c\u4f46\u7ebf\u7a0b\u5374\u6ca1\u6709\u5b9e\u9645\u8fdb\u5c55\uff0c\u5bfc\u81f4CPU\u7a7a\u8f6c\u3002</li> <li>\u5982\u679c\u4e34\u754c\u533a\u4ee3\u7801\u6267\u884c\u65f6\u95f4\u8f83\u957f\uff0c\u6216\u8005\u7ade\u4e89\u975e\u5e38\u6fc0\u70c8\uff0cCAS\u7684\u81ea\u65cb\u5f00\u9500\u53ef\u80fd\u8fdc\u5927\u4e8e\u7ebf\u7a0b\u963b\u585e\u548c\u5524\u9192\u7684\u5f00\u9500\uff0c\u4ece\u800c\u5bfc\u81f4\u6574\u4f53\u6027\u80fd\u4e0b\u964d\uff0c\u751a\u81f3\u6bd4<code>synchronized</code>\u66f4\u5dee\u3002CPU\u8d44\u6e90\u7684\u6d6a\u8d39\u4f1a\u62d6\u6162\u6574\u4e2a\u7cfb\u7edf\u7684\u541e\u5410\u91cf\u3002</li> <li>\u8fd9\u4e2a\u81ea\u65cb\u8fc7\u7a0b\u867d\u7136\u5728\u7528\u6237\u6001\u5b8c\u6210\uff0c\u907f\u514d\u4e86\u4e0a\u4e0b\u6587\u5207\u6362\uff0c\u4f46\u65e0\u6548\u7684CPU\u65f6\u95f4\u6d88\u8017\u53cd\u800c\u6210\u4e86\u74f6\u9888\u3002</li> </ul> </li> <li><code>synchronized</code>\u7684\u4f18\u52bf\uff08\u7ebf\u7a0b\u6302\u8d77\u4e0e\u8d44\u6e90\u8ba9\u6e21\uff09\uff1a\u5728\u9ad8\u7ade\u4e89\u73af\u5883\u4e0b\uff0c<code>synchronized</code>\u7684\u9501\u4f1a\u5347\u7ea7\u4e3a\u91cd\u91cf\u7ea7\u9501\u3002<ul> <li>\u6b64\u65f6\uff0c\u672a\u83b7\u53d6\u5230\u9501\u7684\u7ebf\u7a0b\u4f1a\u88ab\u64cd\u4f5c\u7cfb\u7edf\u6302\u8d77\uff08\u963b\u585e\uff09\uff0c\u4e0d\u518d\u6d88\u8017CPU\u8d44\u6e90\u8fdb\u884c\u81ea\u65cb\u3002CPU\u4f1a\u4ece\u7528\u6237\u6001\u5207\u6362\u5230\u5185\u6838\u6001\uff0c\u7531\u64cd\u4f5c\u7cfb\u7edf\u8d1f\u8d23\u5c06\u7ebf\u7a0b\u653e\u5165\u7b49\u5f85\u961f\u5217\u3002</li> <li>\u5f53\u6301\u6709\u9501\u7684\u7ebf\u7a0b\u91ca\u653e\u9501\u65f6\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u518d\u6b21\u4ece\u5185\u6838\u6001\u5524\u9192\u7b49\u5f85\u961f\u5217\u4e2d\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u7ebf\u7a0b\uff0c\u8fd9\u540c\u6837\u6d89\u53ca\u5230\u7528\u6237\u6001\u548c\u5185\u6838\u6001\u7684\u5207\u6362\u3002</li> <li>\u867d\u7136\u7528\u6237\u6001\u5230\u5185\u6838\u6001\u7684\u5207\u6362\u4ee5\u53ca\u7ebf\u7a0b\u7684\u6302\u8d77\u548c\u5524\u9192\u662f\u6602\u8d35\u7684\u64cd\u4f5c\uff08\u4e0a\u4e0b\u6587\u5207\u6362\uff09\uff0c\u4f46\u5b83\u4f1a\u5c06CPU\u65f6\u95f4\u7247\u8ba9\u7ed9\u5176\u4ed6\u6709\u7528\u7684\u4efb\u52a1\uff0c\u800c\u4e0d\u662f\u8fdb\u884c\u65e0\u8c13\u7684\u81ea\u65cb\u3002\u56e0\u6b64\uff0c\u5728\u9ad8\u7ade\u4e89\u4e14\u4e34\u754c\u533a\u8f83\u957f\u7684\u60c5\u51b5\u4e0b\uff0c<code>synchronized</code>\u901a\u8fc7\u963b\u585e\u7ebf\u7a0b\u6765\u907f\u514dCPU\u7a7a\u8f6c\uff0c\u53ef\u80fd\u8868\u73b0\u51fa\u66f4\u597d\u7684\u541e\u5410\u91cf\u548c\u8d44\u6e90\u5229\u7528\u7387\u3002</li> </ul> </li> </ul> </li> <li> <p>\u5176\u4ed6\u6027\u80fd\u8003\u91cf</p> <ul> <li>\u7f13\u5b58\u4e00\u81f4\u6027\uff08Cache Coherency\uff09\uff1a\u65e0\u8bba\u662fCAS\u8fd8\u662f<code>synchronized</code>\uff0c\u90fd\u9700\u8981\u4fdd\u8bc1\u591a\u6838CPU\u7f13\u5b58\u4e4b\u95f4\u7684\u6570\u636e\u4e00\u81f4\u6027\u3002\u9891\u7e41\u7684\u8de8\u6838\u6570\u636e\u5171\u4eab\u548c\u4fee\u6539\u4f1a\u5bfc\u81f4\u7f13\u5b58\u7ebf\uff08cache line\uff09\u5931\u6548\uff0c\u5f15\u53d1\u7f13\u5b58\u4e00\u81f4\u6027\u534f\u8bae\uff08MESI\u7b49\uff09\u7684\u5f00\u9500\uff0c\u8fd9\u4e5f\u4f1a\u5f71\u54cd\u6027\u80fd\u3002</li> <li>\u5b9e\u73b0\u590d\u6742\u5ea6\uff1a\u4ece\u5de5\u7a0b\u5b9e\u8df5\u89d2\u5ea6\uff0c\u5bf9\u4e8e\u590d\u6742\u7684\u5e76\u53d1\u903b\u8f91\uff0c\u4f7f\u7528<code>synchronized</code>\u6216<code>java.util.concurrent.locks.Lock</code>\u7b49\u663e\u5f0f\u9501\u901a\u5e38\u66f4\u5bb9\u6613\u7406\u89e3\u548c\u8bc1\u660e\u5176\u6b63\u786e\u6027\u3002\u65e0\u9501\u7b97\u6cd5\uff08lock-free algorithms\uff09\u867d\u7136\u5728\u7406\u8bba\u4e0a\u6027\u80fd\u6f5c\u529b\u5927\uff0c\u4f46\u57fa\u4e8eCAS\u5b9e\u73b0\u8d77\u6765\u975e\u5e38\u590d\u6742\uff0c\u5bb9\u6613\u51fa\u9519\uff0c\u4e14\u8c03\u8bd5\u56f0\u96be\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/CLH%E9%98%9F%E5%88%97%E9%94%81%E4%BB%8B%E7%BB%8D/","title":"CLH\u961f\u5217\u9501\u4ecb\u7ecd","text":"<p>CLH\u9501\u662f\u4e00\u79cd\u57fa\u4e8e\u903b\u8f91\u961f\u5217\u7684\u3001\u516c\u5e73\u7684\u81ea\u65cb\u9501\u3002\u5b83\u7684\u540d\u5b57\u6765\u6e90\u4e8e\u5176\u4e09\u4f4d\u53d1\u660e\u8005\uff1aCraig\u3001Landin\u548cHagersten\u3002</p> <p>\u5b83\u7684\u6838\u5fc3\u601d\u60f3\u975e\u5e38\u5de7\u5999\uff1a\u5f53\u591a\u4e2a\u7ebf\u7a0b\u7ade\u4e89\u4e00\u4e2a\u9501\u65f6\uff0c\u5b83\u4eec\u4f1a\u5728\u4e00\u4e2a\u9690\u5f0f\u7684\u94fe\u8868\u961f\u5217\u4e2d\u6392\u961f\u3002\u6bcf\u4e2a\u7ebf\u7a0b\u4e0d-\u518d\u662f\u53bb\u4e89\u62a2\u4e00\u4e2a\u5168\u5c40\u7684\u9501\u6807\u8bb0\uff0c\u800c\u662f\u5404\u81ea\u5728\u81ea\u5df1\u7684\u8282\u70b9\u4e0a\u201c\u81ea\u65cb\u201d\uff08\u5faa\u73af\u68c0\u67e5\uff09\uff0c\u5e76\u53ea\u5173\u6ce8\u5176\u524d\u4e00\u4e2a\u8282\u70b9\u7684\u72b6\u6001\u3002 \u8fd9\u79cd\u8bbe\u8ba1\u5927\u5927\u51cf\u5c11\u4e86\u9501\u7ade\u4e89\u65f6\u7684\u7cfb\u7edf\u5f00\u9500\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/CLH%E9%98%9F%E5%88%97%E9%94%81%E4%BB%8B%E7%BB%8D/#_1","title":"\u6838\u5fc3\u7ec4\u4ef6\u4e0e\u7ed3\u6784","text":"<p>CLH\u9501\u7684\u5b9e\u73b0\u4e3b\u8981\u4f9d\u8d56\u4e8e\u4e24\u4e2a\u6838\u5fc3\u7ec4\u4ef6\uff1a</p> <ol> <li>\u5c3e\u6307\u9488 (tail)\uff1a\u4e00\u4e2a\u5168\u5c40\u7684\u3001\u539f\u5b50\u66f4\u65b0\u7684\u6307\u9488\uff0c\u5b83\u6c38\u8fdc\u6307\u5411\u961f\u5217\u4e2d\u7684\u6700\u540e\u4e00\u4e2a\u8282\u70b9\uff08\u5373\u6700\u65b0\u52a0\u5165\u7684\u7b49\u5f85\u7ebf\u7a0b\uff09\u3002\u8fd9\u662f\u6240\u6709\u5e0c\u671b\u83b7\u53d6\u9501\u7684\u7ebf\u7a0b\u8fdb\u5165\u961f\u5217\u7684\u552f\u4e00\u5165\u53e3\u3002</li> <li>\u8282\u70b9 (Node)\uff1a\u6bcf\u4e2a\u5e0c\u671b\u83b7\u53d6\u9501\u7684\u7ebf\u7a0b\u90fd\u4f1a\u521b\u5efa\u4e00\u4e2a\u81ea\u5df1\u7684\u8282\u70b9\u3002\u8fd9\u4e2a\u8282\u70b9\u81f3\u5c11\u5305\u542b\u4e00\u4e2a\u72b6\u6001\u5b57\u6bb5\uff0c\u901a\u5e38\u662f\u4e00\u4e2a\u5e03\u5c14\u7c7b\u578b\u7684 <code>locked</code> \u6807\u5fd7\u3002\u8fd9\u4e2a\u6807\u5fd7\u7684\u542b\u4e49\u662f\uff1a\u201c\u6211\uff08\u5f53\u524d\u8282\u70b9\uff09\u662f\u5426\u9700\u8981\u9501\u5b9a\u72b6\u6001\uff1f\u201d\u6216\u8005\u201c\u6211\u7684\u524d\u9a71\u8282\u70b9\u662f\u5426\u5df2\u7ecf\u91ca\u653e\u4e86\u9501\uff1f\u201d\u3002</li> </ol> <p>\u8fd9\u4e2a\u961f\u5217\u662f\u4e00\u4e2a\u9690\u5f0f\u94fe\u8868\uff0c\u56e0\u4e3a\u8282\u70b9\u4e4b\u95f4\u6ca1\u6709\u663e\u5f0f\u7684<code>next</code>\u6307\u9488\uff0c\u540e\u7ee7\u5173\u7cfb\u662f\u901a\u8fc7\u6bcf\u4e2a\u8282\u70b9\u6301\u6709\u5176\u524d\u9a71\u8282\u70b9\u7684\u5f15\u7528\u6765\u786e\u5b9a\u7684\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/CLH%E9%98%9F%E5%88%97%E9%94%81%E4%BB%8B%E7%BB%8D/#_2","title":"\u5de5\u4f5c\u539f\u7406","text":"<p>\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u201c\u83b7\u53d6\u9501\u201d\u548c\u201c\u91ca\u653e\u9501\u201d\u4e24\u4e2a\u8fc7\u7a0b\u6765\u7406\u89e3\u5176\u5de5\u4f5c\u673a\u5236\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/CLH%E9%98%9F%E5%88%97%E9%94%81%E4%BB%8B%E7%BB%8D/#1-acquire-lock","title":"1. \u83b7\u53d6\u9501 (Acquire Lock)","text":"<p>\u5047\u8bbe\u73b0\u5728\u7ebf\u7a0bA\u6301\u6709\u9501\uff0c\u7ebf\u7a0bB\u6b63\u5728\u7b49\u5f85\u3002\u6b64\u65f6\uff0c\u961f\u5217\u7684<code>tail</code>\u6307\u9488\u6307\u5411\u7ebf\u7a0bB\u7684\u8282\u70b9\u3002\u73b0\u5728\u7ebf\u7a0bC\u4e5f\u60f3\u83b7\u53d6\u9501\u3002</p> <ol> <li>\u521b\u5efa\u8282\u70b9\uff1a\u7ebf\u7a0bC\u521b\u5efa\u81ea\u5df1\u7684\u8282\u70b9 <code>Node_C</code>\uff0c\u5e76\u5c06\u5176\u5185\u90e8\u7684 <code>locked</code> \u72b6\u6001\u8bbe\u7f6e\u4e3a <code>true</code>\u3002\u8fd9\u4e2a<code>true</code>\u7684\u542b\u4e49\u662f\u201c\u6211\u9700\u8981\u9501\uff0c\u4f46\u6211\u8fd8\u6ca1\u62ff\u5230\u201d\u3002</li> <li>\u5165\u961f\uff1a\u7ebf\u7a0bC\u901a\u8fc7\u4e00\u4e2a\u539f\u5b50\u64cd\u4f5c\uff08\u5982<code>getAndSet</code>\uff09\u6765\u66f4\u65b0\u5168\u5c40\u7684<code>tail</code>\u6307\u9488\u3002\u8fd9\u4e2a\u64cd\u4f5c\u4f1a\u505a\u4e24\u4ef6\u4e8b\uff1a<ul> <li>\u83b7\u53d6\u524d\u9a71\uff1a\u7ebf\u7a0bC\u5f97\u5230<code>tail</code>\u6307\u9488\u4e4b\u524d\u7684\u503c\uff0c\u4e5f\u5c31\u662f<code>Node_B</code>\u3002\u73b0\u5728\uff0c<code>Node_B</code>\u5c31\u6210\u4e86<code>Node_C</code>\u7684\u524d\u9a71\u8282\u70b9\u3002</li> <li>\u6210\u4e3a\u961f\u5c3e\uff1a\u5c06\u5168\u5c40\u7684<code>tail</code>\u6307\u9488\u8bbe\u7f6e\u4e3a\u6307\u5411\u81ea\u5df1\u7684<code>Node_C</code>\u3002</li> </ul> </li> <li>\u81ea\u65cb\u7b49\u5f85\uff1a\u7ebf\u7a0bC\u5f00\u59cb\u5728\u4e00\u4e2a\u5faa\u73af\u4e2d\u68c0\u67e5\u5176\u524d\u9a71\u8282\u70b9\uff08<code>Node_B</code>\uff09\u7684<code>locked</code>\u72b6\u6001\u3002\u53ea\u8981<code>Node_B.locked</code>\u4e3a<code>true</code>\uff0c\u7ebf\u7a0bC\u5c31\u6301\u7eed\u81ea\u65cb\uff08\u539f\u5730\u7b49\u5f85\uff09\uff0c\u6d88\u8017CPU\u3002</li> </ol> <p>\u8fd9\u4e2a\u8fc7\u7a0b\u5c31\u50cf\u6392\u961f\u4e70\u7968\uff1a\u4f60\uff08\u7ebf\u7a0bC\uff09\u8d70\u5230\u961f\u5c3e\uff0c\u770b\u7740\u4f60\u524d\u9762\u90a3\u4e2a\u4eba\uff08\u7ebf\u7a0bB\uff09\uff0c\u53ea\u8981\u4ed6\u8fd8\u6ca1\u529e\u5b8c\uff0c\u4f60\u5c31\u4e00\u76f4\u7b49\u7740\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/CLH%E9%98%9F%E5%88%97%E9%94%81%E4%BB%8B%E7%BB%8D/#2-release-lock","title":"2. \u91ca\u653e\u9501 (Release Lock)","text":"<p>\u5f53\u4e00\u4e2a\u7ebf\u7a0b\uff08\u6bd4\u5982\u7ebf\u7a0bB\uff09\u5b8c\u6210\u4e86\u5b83\u7684\u4e34\u754c\u533a\u4ee3\u7801\uff0c\u9700\u8981\u91ca\u653e\u9501\u65f6\uff0c\u8fc7\u7a0b\u975e\u5e38\u7b80\u5355\uff1a</p> <ol> <li>\u66f4\u65b0\u81ea\u8eab\u72b6\u6001\uff1a\u7ebf\u7a0bB\u5c06\u81ea\u5df1\u7684\u8282\u70b9 <code>Node_B</code> \u7684 <code>locked</code> \u72b6\u6001\u8bbe\u7f6e\u4e3a <code>false</code>\u3002</li> <li>\u5524\u9192\u540e\u7ee7\uff1a\u8fd9\u4e2a\u72b6\u6001\u6539\u53d8\u4f1a\u88ab\u6b63\u5728\u81ea\u65cb\u7b49\u5f85\u7684\u7ebf\u7a0bC\u89c2\u5bdf\u5230\u3002\u7ebf\u7a0bC\u7684\u81ea\u65cb\u5faa\u73af\u68c0\u6d4b\u5230<code>Node_B.locked</code>\u53d8\u4e3a<code>false</code>\uff0c\u5faa\u73af\u7acb\u5373\u7ec8\u6b62\u3002</li> <li>\u83b7\u53d6\u6210\u529f\uff1a\u7ebf\u7a0bC\u6210\u529f\u83b7\u53d6\u5230\u9501\uff0c\u53ef\u4ee5\u8fdb\u5165\u4e34\u754c\u533a\u6267\u884c\u4ee3\u7801\u4e86\u3002</li> </ol> <p>\u8fd9\u4e2a\u8fc7\u7a0b\u5c31\u50cf\u529e\u5b8c\u4e1a\u52a1\u7684\u4eba\uff08\u7ebf\u7a0bB\uff09\u62cd\u4e86\u62cd\u540e\u9762\u4eba\uff08\u7ebf\u7a0bC\uff09\u7684\u80a9\u8180\u8bf4\u201c\u5230\u4f60\u4e86\u201d\uff0c\u7136\u540e\u81ea\u5df1\u5c31\u79bb\u5f00\u4e86\u3002\u88ab\u91ca\u653e\u7684\u8282\u70b9<code>Node_B</code>\u53ef\u4ee5\u88ab\u5783\u573e\u56de\u6536\uff0c\u6216\u8005\u5728\u67d0\u4e9b\u5b9e\u73b0\u4e2d\u88ab<code>Node_C</code>\u590d\u7528\uff0c\u4ee5\u51cf\u5c11\u5185\u5b58\u5206\u914d\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/CLH%E9%98%9F%E5%88%97%E9%94%81%E4%BB%8B%E7%BB%8D/#clh","title":"CLH\u9501\u7684\u4f18\u7f3a\u70b9","text":"<p>\u4f18\u70b9:</p> <ul> <li>\u516c\u5e73\u6027\uff1a\u4e25\u683c\u9075\u5faa\u5148\u6765\u540e\u5230\uff08FIFO\uff09\u7684\u539f\u5219\uff0c\u7b49\u5f85\u7684\u7ebf\u7a0b\u4e0d\u4f1a\u88ab\u201c\u63d2\u961f\u201d\uff0c\u907f\u514d\u4e86\u7ebf\u7a0b\u9965\u997f\u95ee\u9898\u3002</li> <li>\u9ad8\u6027\u80fd\uff1a\u7b49\u5f85\u7684\u7ebf\u7a0b\u5728\u4e0d\u540c\u7684\u5185\u5b58\u5730\u5740\uff08\u5404\u81ea\u524d\u9a71\u8282\u70b9\u7684<code>locked</code>\u5b57\u6bb5\uff09\u4e0a\u81ea\u65cb\uff0c\u800c\u4e0d\u662f\u5728\u540c\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u4e0a\u4e89\u62a2\u3002 \u8fd9\u5728\u591a\u5904\u7406\u5668\u548c\u7f13\u5b58\u4e00\u81f4\u6027\uff08cache-coherent\uff09\u67b6\u6784\u4e0b\uff0c\u6781\u5927\u5730\u51cf\u5c11\u4e86\u7f13\u5b58\u540c\u6b65\u7684\u5f00\u9500\u548c\u603b\u7ebf\u6d41\u91cf\u3002</li> <li>\u5b9e\u73b0\u7b80\u5355\uff1a\u76f8\u5bf9\u4e8e\u5176\u4ed6\u4e00\u4e9b\u590d\u6742\u7684\u9501\uff0cCLH\u7684\u903b\u8f91\u6bd4\u8f83\u6e05\u6670\u3002</li> <li>\u7a7a\u95f4\u590d\u6742\u5ea6\u4f4e\uff1a\u6bcf\u4e2a\u9501\u548c\u7ebf\u7a0b\u53ea\u9700\u8981\u5c11\u91cf\u989d\u5916\u7684\u56fa\u5b9a\u7a7a\u95f4\u3002</li> </ul> <p>\u7f3a\u70b9:</p> <ul> <li>\u4ecd\u7136\u662f\u81ea\u65cb\u9501\uff1a\u5982\u679c\u9501\u88ab\u5360\u7528\u7684\u65f6\u95f4\u5f88\u957f\uff0c\u90a3\u4e48\u7b49\u5f85\u7684\u7ebf\u7a0b\u4f1a\u6301\u7eed\u6d88\u8017CPU\u8d44\u6e90\uff0c\u8fd9\u5728\u67d0\u4e9b\u573a\u666f\u4e0b\u662f\u4e0d\u53ef\u63a5\u53d7\u7684\u3002</li> <li>\u5728NUMA\u67b6\u6784\u4e0b\u6027\u80fd\u4e0d\u4f73\uff1aNUMA\uff08\u975e\u7edf\u4e00\u5185\u5b58\u8bbf\u95ee\uff09\u67b6\u6784\u4e0b\uff0c\u5904\u7406\u5668\u8bbf\u95ee\u672c\u5730\u5185\u5b58\u548c\u8fdc\u7a0b\u5185\u5b58\u7684\u901f\u5ea6\u5dee\u5f02\u5f88\u5927\u3002\u5982\u679c\u4e00\u4e2a\u7ebf\u7a0b\u81ea\u65cb\u7b49\u5f85\u7684\u524d\u9a71\u8282\u70b9\u4f4d\u4e8e\u4e00\u4e2a\u7269\u7406\u8ddd\u79bb\u5f88\u8fdc\u7684\u5185\u5b58\u6a21\u5757\u4e0a\uff0c\u90a3\u4e48\u6bcf\u6b21\u5faa\u73af\u68c0\u67e5\u7684\u5ef6\u8fdf\u90fd\u4f1a\u5f88\u9ad8\uff0c\u5bfc\u81f4\u6027\u80fd\u4e0b\u964d\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/CLH%E9%98%9F%E5%88%97%E9%94%81%E4%BB%8B%E7%BB%8D/#java-aqs","title":"\u4e0eJava AQS\u7684\u5173\u7cfb","text":"<p>Java\u5e76\u53d1\u5305\u4e2d\u7684<code>AbstractQueuedSynchronizer</code> (AQS) \u6b63\u662f\u57fa\u4e8eCLH\u961f\u5217\u9501\u7684\u4e00\u4e2a\u53d8\u4f53\u5b9e\u73b0\u7684\u3002AQS\u5bf9\u539f\u59cbCLH\u9501\u505a\u4e86\u5173\u952e\u6027\u7684\u4f18\u5316\u548c\u6539\u9020\uff1a</p> <ul> <li>\u4ece\u81ea\u65cb\u5230\u963b\u585e\uff1aAQS\u89e3\u51b3\u4e86CLH\u9501\u6700\u5927\u7684\u7f3a\u70b9\u3002\u5b83\u4e0d\u4f1a\u8ba9\u7ebf\u7a0b\u65e0\u9650\u5730\u81ea\u65cb\uff0c\u800c\u662f\u5728\u77ed\u6682\u81ea\u65cb\u5931\u8d25\u540e\uff0c\u5229\u7528<code>LockSupport.park()</code>\u5c06\u7ebf\u7a0b\u6302\u8d77\uff0c\u8fdb\u5165\u963b\u585e\u72b6\u6001\uff0c\u4ece\u800c\u91ca\u653eCPU\u8d44\u6e90\u3002</li> <li>\u663e\u5f0f\u53cc\u5411\u94fe\u8868\uff1aAQS\u4f7f\u7528\u4e86\u4e00\u4e2a\u663e\u5f0f\u7684\u53cc\u5411\u94fe\u8868\u7ed3\u6784\uff0c\u6bcf\u4e2a\u8282\u70b9\u90fd\u6709<code>prev</code>\u548c<code>next</code>\u6307\u9488\u3002\u8fd9\u4f7f\u5f97\u5904\u7406\u7ebf\u7a0b\u53d6\u6d88\u548c\u8d85\u65f6\u7b49\u590d\u6742\u573a\u666f\u53d8\u5f97\u66f4\u5bb9\u6613\u3002</li> <li>\u590d\u6742\u7684\u72b6\u6001\uff1aAQS\u7684\u8282\u70b9\u62e5\u6709\u66f4\u590d\u6742\u7684<code>waitStatus</code>\u5b57\u6bb5\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8fd9\u4f7f\u5f97\u8282\u70b9\u4e4b\u95f4\u53ef\u4ee5\u8fdb\u884c\u66f4\u4e30\u5bcc\u7684\u901a\u4fe1\u548c\u534f\u4f5c\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/Synchronized%E5%BA%95%E5%B1%82%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/","title":"Synchronized\u5e95\u5c42\u662f\u5982\u4f55\u5b9e\u73b0\u7684","text":""},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/Synchronized%E5%BA%95%E5%B1%82%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/#1-synchronized","title":"1. Synchronized\u5728\u5b57\u8282\u7801\u5c42\u9762\u7684\u5b9e\u73b0","text":"<p><code>synchronized</code> \u5728Java\u4e2d\u6709\u4e24\u79cd\u4f7f\u7528\u5f62\u5f0f\uff0c\u5b83\u4eec\u7684\u5b57\u8282\u7801\u5b9e\u73b0\u662f\u4e0d\u540c\u7684\u3002</p> <p>\u5f62\u5f0f\u4e00\uff1a\u540c\u6b65\u65b9\u6cd5</p> <p>\u5f53\u6211\u4eec\u5c06 <code>synchronized</code> \u7528\u4e8e\u4fee\u9970\u4e00\u4e2a\u65b9\u6cd5\u65f6\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>public synchronized void testMethod() {\n    // \u65b9\u6cd5\u4f53\n}\n</code></pre> <p>\u7f16\u8bd1\u6210\u5b57\u8282\u7801\u540e\uff0c\u6211\u4eec\u67e5\u770b\u65b9\u6cd5\u7684\u8bbf\u95ee\u6807\u5fd7\uff08access flags\uff09\uff0c\u4f1a\u53d1\u73b0\u591a\u4e86\u4e00\u4e2a <code>ACC_SYNCHRONIZED</code> \u6807\u5fd7\u3002</p> <p>\u5f53JVM\u5728\u6267\u884c\u65b9\u6cd5\u65f6\uff0c\u5982\u679c\u68c0\u6d4b\u5230\u65b9\u6cd5\u4e0a\u6709\u8fd9\u4e2a <code>ACC_SYNCHRONIZED</code> \u6807\u5fd7\uff0c\u5b83\u4f1a\u9996\u5148\u5c1d\u8bd5\u83b7\u53d6\u8be5\u65b9\u6cd5\u6240\u5c5e\u5bf9\u8c61\u7684\u76d1\u89c6\u5668\u9501\uff08Monitor\uff09\u3002</p> <ul> <li> <p>\u5982\u679c\u662f\u5b9e\u4f8b\u65b9\u6cd5\uff0c\u5b83\u4f1a\u83b7\u53d6 <code>this</code> \u5bf9\u8c61\u7684\u9501\u3002</p> </li> <li> <p>\u5982\u679c\u662f\u9759\u6001\u65b9\u6cd5\uff0c\u5b83\u4f1a\u83b7\u53d6\u8be5\u65b9\u6cd5\u6240\u5c5e\u7c7b\u7684 Class \u5bf9\u8c61\u7684\u9501\u3002</p> <p>\u53ea\u6709\u6210\u529f\u83b7\u53d6\u9501\u4e4b\u540e\uff0c\u7ebf\u7a0b\u624d\u80fd\u6267\u884c\u65b9\u6cd5\u4f53\u3002\u65b9\u6cd5\u6267\u884c\u5b8c\u6bd5\uff08\u65e0\u8bba\u662f\u6b63\u5e38\u8fd4\u56de\u8fd8\u662f\u629b\u51fa\u5f02\u5e38\uff09\uff0cJVM\u4f1a\u81ea\u52a8\u91ca\u653e\u8fd9\u4e2a\u9501\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u662f\u7531JVM\u9690\u5f0f\u5b8c\u6210\u7684\u3002</p> </li> </ul> <p>\u5f62\u5f0f\u4e8c\uff1a\u540c\u6b65\u4ee3\u7801\u5757</p> <p>\u5f53\u6211\u4eec\u5c06 <code>synchronized</code> \u7528\u4e8e\u4e00\u4e2a\u4ee3\u7801\u5757\u65f6\uff1a</p> <pre><code>public void testMethod() {\n    synchronized (lockObject) {\n        // \u540c\u6b65\u4ee3\u7801\u5757\n    }\n}\n</code></pre> <p>\u7f16\u8bd1\u6210\u5b57\u8282\u7801\u540e\uff0c\u5b83\u4e0d\u518d\u662f\u901a\u8fc7\u65b9\u6cd5\u6807\u5fd7\u4f4d\u6765\u5b9e\u73b0\uff0c\u800c\u662f\u7531\u4e24\u6761\u7279\u5b9a\u7684\u5b57\u8282\u7801\u6307\u4ee4\u6765\u5b8c\u6210\uff1a<code>monitorenter</code> \u548c <code>monitorexit</code>\u3002</p> <p>\u7f16\u8bd1\u5668\u4f1a\u5728\u540c\u6b65\u4ee3\u7801\u5757\u7684\u5f00\u59cb\u4f4d\u7f6e\u63d2\u5165\u4e00\u4e2a <code>monitorenter</code> \u6307\u4ee4\uff0c\u5728\u540c\u6b65\u4ee3\u7801\u5757\u7684\u7ed3\u675f\u4f4d\u7f6e\u63d2\u5165\u4e00\u4e2a <code>monitorexit</code> \u6307\u4ee4\u3002</p> <ul> <li> <p><code>monitorenter</code>\uff1a\u5f53\u7ebf\u7a0b\u6267\u884c\u5230\u8fd9\u6761\u6307\u4ee4\u65f6\uff0c\u4f1a\u5c1d\u8bd5\u83b7\u53d6 <code>lockObject</code> \u6240\u5f15\u7528\u7684\u5bf9\u8c61\u7684\u76d1\u89c6\u5668\u9501\u3002</p> </li> <li> <p><code>monitorexit</code>\uff1a\u5f53\u7ebf\u7a0b\u6267\u884c\u5b8c\u540c\u6b65\u4ee3\u7801\u5757\uff0c\u6267\u884c\u5230\u8fd9\u6761\u6307\u4ee4\u65f6\uff0c\u4f1a\u91ca\u653e\u6301\u6709\u7684\u76d1\u89c6\u5668\u9501\u3002</p> </li> </ul> <p>\u4e00\u4e2a\u91cd\u8981\u7684\u7ec6\u8282\u662f\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u5373\u4f7f\u5728\u540c\u6b65\u4ee3\u7801\u5757\u4e2d\u53d1\u751f\u5f02\u5e38\uff0c\u9501\u4e5f\u4e00\u5b9a\u80fd\u88ab\u91ca\u653e\uff0c\u7f16\u8bd1\u5668\u5b9e\u9645\u4e0a\u4f1a\u751f\u6210\u4e24\u4e2a <code>monitorexit</code> \u6307\u4ee4\u3002\u4e00\u4e2a\u5728\u6b63\u5e38\u7ed3\u675f\u8def\u5f84\u7684\u672b\u5c3e\uff0c\u53e6\u4e00\u4e2a\u5728\u5f02\u5e38\u5904\u7406\u8def\u5f84\u7684\u672b\u5c3e\uff08\u7c7b\u4f3c\u4e8e<code>finally</code>\u5757\u7684\u903b\u8f91\uff09\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/Synchronized%E5%BA%95%E5%B1%82%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/#2javamonitor","title":"2.\u9501\u7684\u672c\u8d28\uff1aJava\u5bf9\u8c61\u5934\u4e0eMonitor","text":"<p>\u65e0\u8bba\u662f <code>ACC_SYNCHRONIZED</code> \u6807\u5fd7\u8fd8\u662f <code>monitorenter/exit</code> \u6307\u4ee4\uff0c\u5b83\u4eec\u64cd\u4f5c\u7684\u201c\u9501\u201d\u5230\u5e95\u662f\u4ec0\u4e48\u5462\uff1f\u8fd9\u4e2a\u9501\u7684\u5b9e\u4f53\uff0c\u4e0eJava\u7684\u5bf9\u8c61\u5934\uff08Object Header\uff09\u548cMonitor\u673a\u5236\u5bc6\u5207\u76f8\u5173\u3002</p> <ul> <li> <p>Java\u5bf9\u8c61\u5934\uff1a\u5728HotSpot\u865a\u62df\u673a\u4e2d\uff0c\u6bcf\u4e2aJava\u5bf9\u8c61\u90fd\u6709\u4e00\u4e2a\u5bf9\u8c61\u5934\u3002\u5bf9\u8c61\u5934\u91cc\u5305\u542b\u4e00\u90e8\u5206\u53eb\u505a\u201cMark Word\u201d\u7684\u533a\u57df\u3002\u8fd9\u4e2aMark Word\u975e\u5e38\u5173\u952e\uff0c\u5b83\u5728\u4e0d\u540c\u7684\u9501\u72b6\u6001\u4e0b\uff0c\u5b58\u50a8\u7684\u5185\u5bb9\u662f\u4e0d\u540c\u7684\uff0c\u6bd4\u5982\u5bf9\u8c61\u7684\u54c8\u5e0c\u7801\u3001GC\u5206\u4ee3\u5e74\u9f84\uff0c\u4ee5\u53ca\u6700\u91cd\u8981\u7684\uff0c\u9501\u72b6\u6001\u4fe1\u606f\u3002</p> </li> <li> <p>Monitor\uff08\u76d1\u89c6\u5668\u9501\uff09\uff1a\u6bcf\u4e2aJava\u5bf9\u8c61\u90fd\u53ef\u4ee5\u552f\u4e00\u5730\u5173\u8054\u4e00\u4e2aMonitor\u3002\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u60f3\u8981\u83b7\u53d6\u8fd9\u4e2a\u5bf9\u8c61\u7684\u9501\u65f6\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u60f3\u8981\u83b7\u53d6\u8fd9\u4e2a\u5bf9\u8c61\u5173\u8054\u7684Monitor\u7684\u6240\u6709\u6743\u3002Monitor\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u4e2a\u540c\u6b65\u5de5\u5177\uff0c\u5b83\u5185\u90e8\u5305\u542b\u4e86\u7b49\u5f85\u961f\u5217\u3001\u6301\u6709\u7ebf\u7a0b\u7b49\u4fe1\u606f\u3002\u5728\u65e9\u671f\u7684JDK\u7248\u672c\u4e2d\uff0cMonitor\u662f\u76f4\u63a5\u4f9d\u8d56\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u5e95\u5c42\u7684\u4e92\u65a5\u91cf\uff08Mutex\uff09\u5b9e\u73b0\u7684\uff0c\u8fd9\u79cd\u9501\u88ab\u79f0\u4e3a\u201c\u91cd\u91cf\u7ea7\u9501\u201d\uff0c\u56e0\u4e3a\u5b83\u6d89\u53ca\u5230\u7528\u6237\u6001\u548c\u5185\u6838\u6001\u7684\u5207\u6362\uff0c\u5f00\u9500\u5f88\u5927\u3002</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/Synchronized%E5%BA%95%E5%B1%82%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/#3","title":"3. \u9501\u4f18\u5316\uff1a\u9501\u7684\u5347\u7ea7\u8fc7\u7a0b","text":"<p>\u4e3a\u4e86\u89e3\u51b3\u91cd\u91cf\u7ea7\u9501\u7684\u6027\u80fd\u95ee\u9898\uff0c\u4eceJDK 1.6\u5f00\u59cb\uff0cJVM\u5bf9<code>synchronized</code>\u5f15\u5165\u4e86\u4e00\u7cfb\u5217\u4f18\u5316\uff0c\u6838\u5fc3\u601d\u60f3\u5c31\u662f\u201c\u9501\u5347\u7ea7\u201d\u3002\u5373\u9501\u4e0d\u4f1a\u4e00\u5f00\u59cb\u5c31\u662f\u91cd\u91cf\u7ea7\u7684\uff0c\u800c\u662f\u4f1a\u6839\u636e\u7ade\u4e89\u60c5\u51b5\uff0c\u4ece\u4f4e\u5230\u9ad8\u8fdb\u884c\u5347\u7ea7\uff0c\u4ee5\u9002\u5e94\u4e0d\u540c\u7684\u5e76\u53d1\u573a\u666f\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/synchnize%E9%94%81%E5%92%8Cretrentlock%E9%94%81%E5%8C%BA%E5%88%AB/","title":"Synchnize\u9501\u548cretrentlock\u9501\u533a\u522b","text":""},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/synchnize%E9%94%81%E5%92%8Cretrentlock%E9%94%81%E5%8C%BA%E5%88%AB/#_1","title":"\u672c\u8d28","text":"<ol> <li> <p>\u6765\u6e90\u4e0d\u540c\uff1a</p> <ul> <li> <p><code>synchronized</code> \u662f Java \u8bed\u8a00\u7684\u4e00\u4e2a\u5173\u952e\u5b57\uff0c\u662f\u5185\u7f6e\u7684\u8bed\u8a00\u7279\u6027\u3002\u5b83\u7684\u5b9e\u73b0\u662f\u57fa\u4e8e JVM \u5c42\u9762\u7684\uff0c\u5177\u4f53\u6765\u8bf4\u662f\u4f9d\u8d56\u4e8e\u5bf9\u8c61\u5934\u7684 Mark Word \u548c\u64cd\u4f5c\u7cfb\u7edf\u7684 Monitor\uff08\u76d1\u89c6\u5668\u9501\uff09\u6765\u5b9e\u73b0\u7684\u3002</p> </li> <li> <p><code>ReentrantLock</code> \u662f\u4e00\u4e2a\u7eaf Java \u5b9e\u73b0\u7684 API \u7c7b\uff0c\u5b83\u4f4d\u4e8e <code>java.util.concurrent.locks</code> \u5305\u4e0b\uff0c\u5b9e\u73b0\u4e86 <code>Lock</code> \u63a5\u53e3\u3002\u5b83\u7684\u5b9e\u73b0\u4f9d\u8d56\u4e8e JUC (Java Util Concurrent) \u5305\u4e2d\u7684\u6838\u5fc3\u5de5\u5177\uff0c\u7279\u522b\u662f AQS (AbstractQueuedSynchronizer)\u3002</p> </li> </ul> </li> <li> <p>\u4f7f\u7528\u65b9\u5f0f\u4e0d\u540c\uff1a</p> <ul> <li> <p><code>synchronized</code> \u7684\u4f7f\u7528\u975e\u5e38\u7b80\u6d01\uff0c\u662f\u9690\u5f0f\u7684\u3002\u5b83\u901a\u8fc7\u4ee3\u7801\u5757\u6216\u65b9\u6cd5\u4fee\u9970\u7b26\u6765\u4f7f\u7528\uff0cJVM \u4f1a\u81ea\u52a8\u8d1f\u8d23\u9501\u7684\u83b7\u53d6\u548c\u91ca\u653e\u3002\u5373\u4f7f\u4ee3\u7801\u5757\u4e2d\u53d1\u751f\u5f02\u5e38\uff0cJVM \u4e5f\u80fd\u4fdd\u8bc1\u9501\u88ab\u6b63\u786e\u91ca\u653e\uff0c\u4e0d\u6613\u51fa\u9519\u3002</p> </li> <li> <p><code>ReentrantLock</code> \u7684\u4f7f\u7528\u5219\u9700\u8981\u663e\u5f0f\u5730\u624b\u52a8\u64cd\u4f5c\u3002\u5fc5\u987b\u5728\u4ee3\u7801\u4e2d\u8c03\u7528 <code>lock()</code> \u65b9\u6cd5\u6765\u83b7\u53d6\u9501\uff0c\u5e76\u4e14\u5fc5\u987b\u5728 <code>finally</code> \u8bed\u53e5\u5757\u4e2d\u8c03\u7528 <code>unlock()</code> \u65b9\u6cd5\u6765\u91ca\u653e\u9501\u3002\u8fd9\u6837\u505a\u662f\u4e3a\u4e86\u786e\u4fdd\u5373\u4f7f\u5728\u4e1a\u52a1\u903b\u8f91\u4e2d\u51fa\u73b0\u5f02\u5e38\uff0c\u9501\u4e5f\u4e00\u5b9a\u80fd\u88ab\u91ca\u653e\uff0c\u5426\u5219\u53ef\u80fd\u5bfc\u81f4\u6b7b\u9501\u3002\u8fd9\u79cd\u65b9\u5f0f\u76f8\u5bf9\u7e41\u7410\uff0c\u4e5f\u589e\u52a0\u4e86\u5fd8\u8bb0\u91ca\u653e\u9501\u7684\u98ce\u9669\u3002</p> </li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/synchnize%E9%94%81%E5%92%8Cretrentlock%E9%94%81%E5%8C%BA%E5%88%AB/#_2","title":"\u529f\u80fd\u548c\u7279\u6027\u7684\u5dee\u5f02","text":"<p>\u8fd9\u662f\u4e24\u8005\u6700\u6838\u5fc3\u7684\u533a\u522b\uff0c<code>ReentrantLock</code> \u63d0\u4f9b\u4e86 <code>synchronized</code> \u6240\u4e0d\u5177\u5907\u7684\u8bb8\u591a\u9ad8\u7ea7\u529f\u80fd\u3002</p> <ol> <li> <p>\u53ef\u4e2d\u65ad\u7684\u7b49\u5f85\uff1a</p> <ul> <li> <p><code>synchronized</code> \u7684\u7b49\u5f85\u662f\u4e0d\u53ef\u4e2d\u65ad\u7684\u3002\u5982\u679c\u4e00\u4e2a\u7ebf\u7a0b\u5728\u7b49\u5f85\u83b7\u53d6\u4e00\u4e2a\u88ab\u5176\u4ed6\u7ebf\u7a0b\u6301\u6709\u7684 <code>synchronized</code> \u9501\uff0c\u90a3\u4e48\u5b83\u4f1a\u4e00\u76f4\u963b\u585e\u4e0b\u53bb\uff0c\u9664\u975e\u5b83\u83b7\u53d6\u5230\u9501\uff0c\u5426\u5219\u65e0\u6cd5\u88ab\u4e2d\u65ad\u3002</p> </li> <li> <p><code>ReentrantLock</code> \u63d0\u4f9b\u4e86 <code>lockInterruptibly()</code> \u65b9\u6cd5\uff0c\u5141\u8bb8\u7b49\u5f85\u9501\u7684\u7ebf\u7a0b\u54cd\u5e94\u4e2d\u65ad\u3002\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u6b63\u5728\u7b49\u5f85\u9501\u65f6\uff0c\u5982\u679c\u5176\u4ed6\u7ebf\u7a0b\u8c03\u7528\u4e86\u8be5\u7b49\u5f85\u7ebf\u7a0b\u7684 <code>interrupt()</code> \u65b9\u6cd5\uff0c\u90a3\u4e48\u8be5\u7ebf\u7a0b\u4f1a\u653e\u5f03\u7b49\u5f85\u5e76\u629b\u51fa <code>InterruptedException</code> \u5f02\u5e38\uff0c\u8fd9\u4e3a\u5904\u7406\u6b7b\u9501\u7b49\u95ee\u9898\u63d0\u4f9b\u4e86\u53ef\u80fd\u3002</p> </li> </ul> </li> <li> <p>\u53ef\u9650\u65f6\u7684\u7b49\u5f85\uff1a</p> <ul> <li> <p><code>synchronized</code> \u6ca1\u6709\u63d0\u4f9b\u5c1d\u8bd5\u83b7\u53d6\u9501\u7684\u673a\u5236\uff0c\u53ea\u80fd\u4e00\u76f4\u6b7b\u7b49\u3002</p> </li> <li> <p><code>ReentrantLock</code> \u63d0\u4f9b\u4e86 <code>tryLock()</code> \u65b9\u6cd5\u3002<code>tryLock()</code> \u4f1a\u5c1d\u8bd5\u7acb\u5373\u83b7\u53d6\u9501\uff0c\u5982\u679c\u6210\u529f\u5219\u8fd4\u56de <code>true</code>\uff0c\u5931\u8d25\u5219\u7acb\u5373\u8fd4\u56de <code>false</code>\uff0c\u4e0d\u4f1a\u963b\u585e\u3002\u5b83\u8fd8\u6709\u4e00\u4e2a\u91cd\u8f7d\u7248\u672c <code>tryLock(long timeout, TimeUnit unit)</code>\uff0c\u5141\u8bb8\u7ebf\u7a0b\u5728\u6307\u5b9a\u7684\u65f6\u95f4\u5185\u5c1d\u8bd5\u83b7\u53d6\u9501\uff0c\u8d85\u65f6\u540e\u5982\u679c\u4ecd\u672a\u83b7\u53d6\u5230\uff0c\u5219\u8fd4\u56de <code>false</code>\u3002\u8fd9\u4e2a\u7279\u6027\u5728\u9700\u8981\u907f\u514d\u7ebf\u7a0b\u65e0\u9650\u671f\u7b49\u5f85\u7684\u573a\u666f\u4e2d\u975e\u5e38\u6709\u7528\u3002</p> </li> </ul> </li> <li> <p>\u516c\u5e73\u6027\u9009\u62e9\uff1a</p> <ul> <li> <p><code>synchronized</code> \u662f\u4e00\u79cd\u975e\u516c\u5e73\u9501\u3002\u5f53\u9501\u88ab\u91ca\u653e\u65f6\uff0c\u4efb\u4f55\u7b49\u5f85\u7684\u7ebf\u7a0b\u90fd\u6709\u673a\u4f1a\u83b7\u53d6\u9501\uff0cJVM \u4e3a\u4e86\u4f18\u5316\u541e\u5410\u91cf\uff0c\u53ef\u80fd\u4f1a\u8ba9\u521a\u6765\u7684\u7ebf\u7a0b\u201c\u63d2\u961f\u201d\uff0c\u800c\u4e0d\u662f\u4e25\u683c\u6309\u7167\u5148\u6765\u540e\u5230\u7684\u987a\u5e8f\u3002</p> </li> <li> <p><code>ReentrantLock</code> \u63d0\u4f9b\u4e86\u516c\u5e73\u6027\u7684\u9009\u62e9\u3002\u901a\u8fc7\u5176\u6784\u9020\u51fd\u6570 <code>public ReentrantLock(boolean fair)</code>\uff0c\u53ef\u4ee5\u521b\u5efa\u516c\u5e73\u9501\u6216\u975e\u516c\u5e73\u9501\uff08\u9ed8\u8ba4\u4e3a\u975e\u516c\u5e73\uff09\u3002\u516c\u5e73\u9501\u4f1a\u6309\u7167\u7ebf\u7a0b\u8bf7\u6c42\u9501\u7684\u65f6\u95f4\u987a\u5e8f\u6765\u5206\u914d\u9501\uff0c\u4f46\u901a\u5e38\u4f1a\u5e26\u6765\u989d\u5916\u7684\u6027\u80fd\u5f00\u9500\uff0c\u964d\u4f4e\u541e\u5410\u91cf\u3002\u975e\u516c\u5e73\u9501\u5219\u6027\u80fd\u66f4\u597d\u3002</p> </li> </ul> </li> <li> <p>\u7ed1\u5b9a\u591a\u4e2a\u6761\u4ef6\uff08Condition\uff09\uff1a</p> <ul> <li> <p><code>synchronized</code> \u914d\u5408\u7684\u7ebf\u7a0b\u901a\u4fe1\u65b9\u5f0f\u662f <code>wait()</code>\u3001<code>notify()</code> \u548c <code>notifyAll()</code>\u3002\u5b83\u4eec\u90fd\u4f5c\u7528\u4e8e\u9501\u5bf9\u8c61\u7684\u540c\u4e00\u4e2a\u76d1\u89c6\u5668\uff0c\u8fd9\u610f\u5473\u7740\u6240\u6709\u5728\u8be5\u9501\u4e0a\u7b49\u5f85\u7684\u7ebf\u7a0b\u90fd\u5728\u540c\u4e00\u4e2a\u7b49\u5f85\u961f\u5217\u4e2d\u3002<code>notify()</code> \u53ea\u80fd\u968f\u673a\u5524\u9192\u4e00\u4e2a\u7b49\u5f85\u7ebf\u7a0b\uff0c\u800c <code>notifyAll()</code> \u4f1a\u5524\u9192\u6240\u6709\u7b49\u5f85\u7ebf\u7a0b\uff0c\u4f46\u540e\u8005\u6548\u7387\u4e0d\u9ad8\uff0c\u4e14\u53ef\u80fd\u5bfc\u81f4\u201c\u60ca\u7fa4\u6548\u5e94\u201d\u3002</p> </li> <li> <p><code>ReentrantLock</code> \u901a\u8fc7 <code>newCondition()</code> \u65b9\u6cd5\u53ef\u4ee5\u83b7\u53d6\u4e00\u4e2a <code>Condition</code> \u5bf9\u8c61\u3002\u4e00\u4e2a <code>ReentrantLock</code> \u53ef\u4ee5\u5173\u8054\u591a\u4e2a <code>Condition</code> \u5bf9\u8c61\u3002\u8fd9\u5141\u8bb8\u6211\u4eec\u5b9e\u73b0\u66f4\u7cbe\u7ec6\u7684\u7ebf\u7a0b\u901a\u4fe1\uff0c\u6bd4\u5982\u5728\u4e00\u4e2a\u751f\u4ea7\u8005-\u6d88\u8d39\u8005\u6a21\u578b\u4e2d\uff0c\u53ef\u4ee5\u4e3a\u201c\u751f\u4ea7\u8005\u961f\u5217\u672a\u6ee1\u201d\u548c\u201c\u6d88\u8d39\u8005\u961f\u5217\u4e0d\u7a7a\u201d\u521b\u5efa\u4e24\u4e2a\u4e0d\u540c\u7684 <code>Condition</code>\uff0c\u4ece\u800c\u53ef\u4ee5\u505a\u5230\u5b9a\u5411\u901a\u77e5\uff0c\u53ea\u5524\u9192\u7279\u5b9a\u7c7b\u578b\u7684\u7ebf\u7a0b\uff0c\u5927\u5927\u63d0\u9ad8\u4e86\u8c03\u5ea6\u7684\u7075\u6d3b\u6027\u548c\u6548\u7387\u3002</p> </li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/synchnize%E9%94%81%E5%92%8Cretrentlock%E9%94%81%E5%8C%BA%E5%88%AB/#_3","title":"\u6027\u80fd\u5dee\u5f02","text":"<p>\u5728\u65e9\u671f\u7684 JDK \u7248\u672c\uff08\u5982 JDK 1.5\uff09\uff0c<code>ReentrantLock</code> \u7684\u6027\u80fd\u901a\u5e38\u4f18\u4e8e <code>synchronized</code>\u3002\u4f46\u662f\uff0c\u4ece JDK 1.6 \u5f00\u59cb\uff0cJVM \u56e2\u961f\u5bf9 <code>synchronized</code> \u8fdb\u884c\u4e86\u5927\u91cf\u7684\u4f18\u5316\uff0c\u5f15\u5165\u4e86\u504f\u5411\u9501\u3001\u8f7b\u91cf\u7ea7\u9501\u3001\u81ea\u65cb\u9501\u4ee5\u53ca\u9501\u6d88\u9664\u7b49\u6280\u672f\uff0c\u4f7f\u5176\u6027\u80fd\u5f97\u5230\u4e86\u6781\u5927\u7684\u63d0\u5347\u3002</p> <p>\u76ee\u524d\uff0c\u5728\u9501\u7ade\u4e89\u4e0d\u6fc0\u70c8\u7684\u60c5\u51b5\u4e0b\uff0c\u4e24\u8005\u7684\u6027\u80fd\u5dee\u8ddd\u5df2\u7ecf\u975e\u5e38\u5c0f\u3002<code>synchronized</code> \u7531\u4e8e\u5176\u5185\u7f6e\u7684\u4f18\u5316\uff0c\u5728\u67d0\u4e9b\u573a\u666f\u4e0b\u751a\u81f3\u53ef\u80fd\u8868\u73b0\u5f97\u66f4\u597d\u3002\u56e0\u6b64\uff0c\u5728\u73b0\u4ee3 Java \u5f00\u53d1\u4e2d\uff0c\u6027\u80fd\u4e0d\u5e94\u518d\u662f\u9009\u62e9\u5b83\u4eec\u7684\u9996\u8981\u51b3\u5b9a\u56e0\u7d20\uff0c\u800c\u5e94\u66f4\u591a\u5730\u5173\u6ce8\u529f\u80fd\u9700\u6c42\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/volatile%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8/","title":"Volatile\u6709\u4ec0\u4e48\u7528","text":"<p><code>volatile</code>\u5173\u952e\u5b57\u4e3b\u8981\u6709\u4e24\u5927\u6838\u5fc3\u4f5c\u7528\uff1a</p> <ol> <li>\u4fdd\u8bc1\u53ef\u89c1\u6027\uff08Visibility\uff09</li> <li>\u7981\u6b62\u6307\u4ee4\u91cd\u6392\u5e8f\uff08Ordering\uff09</li> </ol> <p>\u4f46\u9700\u8981\u7279\u522b\u5f3a\u8c03\u7684\u662f\uff0c<code>volatile</code>\u4e0d\u4fdd\u8bc1\u539f\u5b50\u6027\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/volatile%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8/#_1","title":"\u4fdd\u8bc1\u53ef\u89c1\u6027","text":"<p>\u8fd9\u662f<code>volatile</code>\u6700\u6838\u5fc3\u3001\u6700\u76f4\u63a5\u7684\u4f5c\u7528\u3002</p> <ul> <li> <p>\u662f\u4ec0\u4e48\u610f\u601d\uff1f     \u53ef\u89c1\u6027\u6307\u7684\u662f\uff0c\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u4fee\u6539\u4e86\u88ab<code>volatile</code>\u4fee\u9970\u7684\u5171\u4eab\u53d8\u91cf\u7684\u503c\u65f6\uff0c\u8fd9\u4e2a\u4fee\u6539\u80fd\u591f\u7acb\u5373\u88ab\u5176\u4ed6\u6240\u6709\u7ebf\u7a0b\u201c\u770b\u5230\u201d\u3002</p> </li> <li> <p>\u5982\u4f55\u5b9e\u73b0\u7684\uff1f     \u5f53\u4e00\u4e2a\u7ebf\u7a0b\u5bf9<code>volatile</code>\u53d8\u91cf\u8fdb\u884c\u5199\u64cd\u4f5c\u65f6\uff0cJMM\uff08Java\u5185\u5b58\u6a21\u578b\uff09\u4f1a\u5f3a\u5236\u5b83\u505a\u4e24\u4ef6\u4e8b\uff1a</p> <ol> <li>\u7acb\u5373\u5c06\u5f53\u524d\u7ebf\u7a0b\u5de5\u4f5c\u5185\u5b58\u4e2d\u8be5\u53d8\u91cf\u7684\u6700\u65b0\u503c\uff0c\u5237\u65b0\u5230\u4e3b\u5185\u5b58\u4e2d\u3002</li> <li>\u8fd9\u4e2a\u5199\u64cd\u4f5c\u4f1a\u5bfc\u81f4\u5176\u4ed6\u7ebf\u7a0b\u5de5\u4f5c\u5185\u5b58\u4e2d\uff0c\u7f13\u5b58\u7684\u8be5\u53d8\u91cf\u7684\u65e7\u503c\u5931\u6548\u3002 \u5f53\u5176\u4ed6\u7ebf\u7a0b\u9700\u8981\u8bfb\u53d6\u8fd9\u4e2a<code>volatile</code>\u53d8\u91cf\u65f6\uff0c\u5b83\u4f1a\u53d1\u73b0\u81ea\u5df1\u5de5\u4f5c\u5185\u5b58\u4e2d\u7684\u503c\u5df2\u7ecf\u5931\u6548\u4e86\uff0c\u4e8e\u662f\u5c31\u5fc5\u987b\u53bb\u4e3b\u5185\u5b58\u4e2d\u91cd\u65b0\u8bfb\u53d6\u6700\u65b0\u7684\u503c\u3002\u901a\u8fc7\u8fd9\u6837\u4e00\u201c\u5199\u201d\u4e00\u201c\u8bfb\u201d\u7684\u5f3a\u5236\u540c\u6b65\uff0c\u5c31\u4fdd\u8bc1\u4e86\u53d8\u91cf\u7684\u53ef\u89c1\u6027\u3002</li> </ol> </li> <li> <p>\u5e94\u7528\u573a\u666f\uff1a     \u4e00\u4e2a\u975e\u5e38\u7ecf\u5178\u7684\u573a\u666f\u5c31\u662f\u4f7f\u7528\u4e00\u4e2a<code>volatile</code>\u5e03\u5c14\u6807\u5fd7\u6765\u4f18\u96c5\u5730\u505c\u6b62\u7ebf\u7a0b\u3002     ```java     public class Worker extends Thread {         private volatile boolean running = true;</p> <pre><code>public void shutdown() {\n    running = false;\n}\n\n@Override\npublic void run() {\n    while (running) {\n        // ... do some work\n    }\n    System.out.println(\"Thread stopped.\");\n}\n</code></pre> <p>}</p> <p>// \u5728\u4e3b\u7ebf\u7a0b\u4e2d Worker worker = new Worker(); worker.start(); // ... \u4e00\u6bb5\u65f6\u95f4\u540e worker.shutdown(); // \u4e3b\u7ebf\u7a0b\u7684\u4fee\u6539\uff0c\u80fd\u88abworker\u7ebf\u7a0b\u7acb\u5373\u770b\u5230 <code>`` \u5982\u679c\u6ca1\u6709</code>volatile<code>\uff0c</code>worker<code>\u7ebf\u7a0b\u5f88\u53ef\u80fd\u56e0\u4e3a\u7f13\u5b58\u4e86</code>running = true`\u800c\u9677\u5165\u6b7b\u5faa\u73af\uff0c\u65e0\u6cd5\u505c\u6b62\u3002</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/volatile%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8/#_2","title":"\u7981\u6b62\u6307\u4ee4\u91cd\u6392\u5e8f","text":"<ul> <li> <p>\u662f\u4ec0\u4e48\u610f\u601d\uff1f     \u4e3a\u4e86\u63d0\u9ad8\u6027\u80fd\uff0c\u7f16\u8bd1\u5668\u548c\u5904\u7406\u5668\u53ef\u80fd\u4f1a\u5bf9\u4ee3\u7801\u8fdb\u884c\u6307\u4ee4\u91cd\u6392\u5e8f\u3002<code>volatile</code>\u5173\u952e\u5b57\u53ef\u4ee5\u4f5c\u4e3a\u4e00\u4e2a\u201c\u5185\u5b58\u5c4f\u969c\u201d\uff08Memory Barrier\uff09\uff0c\u963b\u6b62\u5b83\u524d\u540e\u7684\u6307\u4ee4\u88ab\u91cd\u6392\u5e8f\uff0c\u4ece\u800c\u4fdd\u8bc1\u4ee3\u7801\u7684\u6267\u884c\u987a\u5e8f\u3002</p> </li> <li> <p>\u5982\u4f55\u5b9e\u73b0\u7684\uff1f     JMM\u4f1a\u5bf9<code>volatile</code>\u53d8\u91cf\u7684\u8bfb\u5199\u64cd\u4f5c\uff0c\u63d2\u5165\u7279\u5b9a\u7684\u5185\u5b58\u5c4f\u969c\u6307\u4ee4\uff1a</p> <ul> <li>\u5728\u6bcf\u4e2a<code>volatile</code>\u5199\u64cd\u4f5c\u7684\u524d\u9762\uff0c\u63d2\u5165\u4e00\u4e2aStoreStore\u5c4f\u969c\uff0c\u4fdd\u8bc1\u4e4b\u524d\u7684\u666e\u901a\u5199\u64cd\u4f5c\u90fd\u5df2\u5b8c\u6210\u3002</li> <li>\u5728\u6bcf\u4e2a<code>volatile</code>\u5199\u64cd\u4f5c\u7684\u540e\u9762\uff0c\u63d2\u5165\u4e00\u4e2aStoreLoad\u5c4f\u969c\uff0c\u9632\u6b62\u5b83\u4e0e\u540e\u9762\u7684\u8bfb\u64cd\u4f5c\u91cd\u6392\u5e8f\u3002</li> <li>\u5728\u6bcf\u4e2a<code>volatile</code>\u8bfb\u64cd\u4f5c\u7684\u540e\u9762\uff0c\u63d2\u5165\u4e00\u4e2aLoadLoad\u548cLoadStore\u5c4f\u969c\uff0c\u4fdd\u8bc1\u540e\u7eed\u7684\u8bfb\u5199\u64cd\u4f5c\u4e0d\u4f1a\u88ab\u91cd\u6392\u5230\u5b83\u524d\u9762\u3002</li> </ul> </li> <li> <p>\u5e94\u7528\u573a\u666f\uff1a     \u6700\u7ecf\u5178\u7684\u5e94\u7528\u5c31\u662f\u89e3\u51b3\u53cc\u91cd\u68c0\u67e5\u9501\u5b9a\uff08Double-Checked Locking, DCL\uff09\u5355\u4f8b\u6a21\u5f0f\u7684\u6709\u5e8f\u6027\u95ee\u9898\u3002     ```java     public class Singleton {         private static volatile Singleton instance; // \u5173\u952e\u5728\u4e8evolatile</p> <pre><code>private Singleton() {}\n\npublic static Singleton getInstance() {\n    if (instance == null) { // \u7b2c\u4e00\u6b21\u68c0\u67e5\n        synchronized (Singleton.class) {\n            if (instance == null) { // \u7b2c\u4e8c\u6b21\u68c0\u67e5\n                instance = new Singleton(); // \u95ee\u9898\u5c31\u51fa\u5728\u8fd9\u91cc\n            }\n        }\n    }\n    return instance;\n}\n</code></pre> <p>} <code>``</code>instance = new Singleton()<code>\u8fd9\u4e2a\u64cd\u4f5c\u4e0d\u662f\u539f\u5b50\u7684\uff0c\u5b83\u53ef\u80fd\u88ab\u91cd\u6392\u5e8f\u4e3a\uff1a 1.  \u5206\u914d\u5185\u5b58\u3002 2.  \u5c06</code>instance<code>\u5f15\u7528\u6307\u5411\u5185\u5b58\u3002 3.  \u521d\u59cb\u5316\u5bf9\u8c61\u3002 \u5982\u679c\u6ca1\u6709</code>volatile<code>\uff0c\u7ebf\u7a0bA\u6267\u884c\u5230\u7b2c2\u6b65\u65f6\uff0c</code>instance<code>\u5df2\u7ecf\u4e0d\u4e3anull\uff0c\u6b64\u65f6\u7ebf\u7a0bB\u8fdb\u6765\u5224\u65ad\uff0c\u4f1a\u76f4\u63a5\u8fd4\u56de\u4e00\u4e2a\u5c1a\u672a\u521d\u59cb\u5316\u7684\u201c\u534a\u6210\u54c1\u201d\u5bf9\u8c61\u3002 \u800c</code>volatile`\u5173\u952e\u5b57\u901a\u8fc7\u7981\u6b62\u6307\u4ee4\u91cd\u6392\u5e8f\uff0c\u786e\u4fdd\u4e86\u64cd\u4f5c\u5fc5\u987b\u6309\u71671-2-3\uff08\u62161-3-2\u7684\u6b63\u786e\u987a\u5e8f\uff09\u6267\u884c\uff0c\u4ece\u800c\u907f\u514d\u4e86\u8fd9\u4e2a\u95ee\u9898\u3002</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/volatile%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8/#volatile","title":"volatile\u4e3a\u4ec0\u4e48\u4e0d\u4fdd\u8bc1\u539f\u5b50\u6027\uff1f","text":"<p>\u6211\u4eec\u6765\u770b<code>count++</code>\u8fd9\u4e2a\u64cd\u4f5c\uff0c\u5b83\u81f3\u5c11\u5305\u542b\u201c\u8bfb-\u6539-\u5199\u201d\u4e09\u4e2a\u6b65\u9aa4\u3002<code>volatile</code>\u53ea\u80fd\u4fdd\u8bc1\u5728\u201c\u8bfb\u201d\u7684\u65f6\u5019\uff0c\u80fd\u8bfb\u5230\u6700\u65b0\u7684\u503c\uff1b\u5728\u201c\u5199\u201d\u7684\u65f6\u5019\uff0c\u80fd\u628a\u65b0\u503c\u7acb\u5373\u5237\u56de\u4e3b\u5185\u5b58\u3002\u4f46\u5b83\u65e0\u6cd5\u4fdd\u8bc1\u201c\u8bfb-\u6539-\u5199\u201d\u8fd9\u6574\u4e2a\u8fc7\u7a0b\u4e0d\u88ab\u5176\u4ed6\u7ebf\u7a0b\u6253\u65ad\u3002</p> <p>\u5f53\u7ebf\u7a0bA\u8bfb\u53d6\u4e86<code>volatile</code>\u7684<code>count</code>\u503c\uff08\u6bd4\u598210\uff09\u4e4b\u540e\uff0c\u5728\u5b83\u8ba1\u7b97<code>10+1</code>\u5e76\u51c6\u5907\u5199\u56de\u4e4b\u524d\uff0c\u7ebf\u7a0bB\u53ef\u80fd\u5df2\u7ecf\u62a2\u5148\u4e00\u6b65\uff0c\u4e5f\u8bfb\u53d6\u4e86<code>count=10</code>\uff0c\u5e76\u5b8c\u6210\u4e86\u52a01\u5199\u56de\u7684\u64cd\u4f5c\uff0c\u6b64\u65f6\u4e3b\u5185\u5b58\u7684<code>count</code>\u5df2\u7ecf\u662f<code>11</code>\u4e86\u3002\u7136\u540e\u7ebf\u7a0bA\u518d\u5c06\u5b83\u8ba1\u7b97\u51fa\u7684<code>11</code>\u5199\u56de\uff0c\u6700\u7ec8\u7ed3\u679c\u662f<code>11</code>\u800c\u4e0d\u662f\u671f\u671b\u7684<code>12</code>\u3002</p> <p>\u6240\u4ee5\uff0c\u5bf9\u4e8e\u590d\u5408\u64cd\u4f5c\uff0c\u5982\u679c\u9700\u8981\u4fdd\u8bc1\u539f\u5b50\u6027\uff0c\u6211\u4eec\u4ecd\u7136\u9700\u8981\u4f7f\u7528<code>synchronized</code>\u6216\u8005<code>java.util.concurrent.atomic</code>\u5305\u4e0b\u7684\u539f\u5b50\u7c7b\uff08\u5982<code>AtomicInteger</code>\uff09\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/wait%E5%92%8Csleep%E7%9A%84%E5%8C%BA%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88/","title":"Wait\u548csleep\u7684\u533a\u522b\u662f\u4ec0\u4e48","text":"<p><code>wait()</code> \u548c <code>sleep()</code> \u662fJava\u591a\u7ebf\u7a0b\u4e2d\u4e24\u4e2a\u975e\u5e38\u91cd\u8981\u4e14\u5bb9\u6613\u6df7\u6dc6\u7684\u65b9\u6cd5\u3002\u5b83\u4eec\u90fd\u80fd\u8ba9\u5f53\u524d\u7ebf\u7a0b\u6682\u505c\u6267\u884c\uff0c\u4f46\u5176\u8bbe\u8ba1\u76ee\u7684\u3001\u5de5\u4f5c\u673a\u5236\u548c\u5bf9\u9501\u7684\u5904\u7406\u65b9\u5f0f\u5b8c\u5168\u4e0d\u540c\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/wait%E5%92%8Csleep%E7%9A%84%E5%8C%BA%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88/#_1","title":"\u6240\u5c5e\u7684\u7c7b\u4e0d\u540c","text":"<ul> <li><code>wait()</code>: \u8fd9\u662f <code>java.lang.Object</code> \u7c7b\u7684\u65b9\u6cd5\u3002\u8fd9\u610f\u5473\u7740Java\u4e2d\u7684\u4efb\u4f55\u5bf9\u8c61\u90fd\u53ef\u4ee5\u8c03\u7528 <code>wait()</code> \u65b9\u6cd5\uff08\u4ee5\u53ca <code>notify()</code> \u548c <code>notifyAll()</code>\uff09\u3002</li> <li><code>sleep()</code>: \u8fd9\u662f <code>java.lang.Thread</code> \u7c7b\u7684\u9759\u6001\u65b9\u6cd5\u3002\u8c03\u7528\u65f6\u901a\u5e38\u5199\u4f5c <code>Thread.sleep()</code>\uff0c\u5b83\u4f5c\u7528\u4e8e\u5f53\u524d\u6b63\u5728\u6267\u884c\u7684\u7ebf\u7a0b\uff0c\u800c\u4e0d\u662f\u6307\u5b9a\u7684\u67d0\u4e2a\u7ebf\u7a0b\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/wait%E5%92%8Csleep%E7%9A%84%E5%8C%BA%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88/#_2","title":"\u5bf9\u9501\uff08\u76d1\u89c6\u5668\u9501\uff09\u7684\u5904\u7406\u65b9\u5f0f\u4e0d\u540c","text":"<p>\u8fd9\u662f\u4e24\u8005\u4e4b\u95f4\u6700\u672c\u8d28\u3001\u6700\u91cd\u8981\u7684\u533a\u522b\u3002</p> <ul> <li> <p><code>wait()</code> \u4f1a\u91ca\u653e\u9501:</p> <ul> <li>\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u8c03\u7528\u67d0\u4e2a\u5bf9\u8c61\u7684 <code>wait()</code> \u65b9\u6cd5\u65f6\uff0c\u5b83\u4f1a\u7acb\u5373\u91ca\u653e\u5b83\u6240\u6301\u6709\u7684\u8be5\u5bf9\u8c61\u7684\u76d1\u89c6\u5668\u9501\uff08\u5373<code>synchronized</code>\u9501\uff09\u3002</li> <li>\u91ca\u653e\u9501\u540e\uff0c\u5176\u4ed6\u7b49\u5f85\u8be5\u9501\u7684\u7ebf\u7a0b\u5c31\u6709\u673a\u4f1a\u83b7\u5f97\u9501\u5e76\u8fdb\u5165 <code>synchronized</code> \u4ee3\u7801\u5757\u3002</li> <li>\u8fd9\u4f7f\u5f97 <code>wait()</code> \u6210\u4e3a\u5b9e\u73b0\u7ebf\u7a0b\u95f4\u9ad8\u6548\u534f\u4f5c\u548c\u901a\u4fe1\u7684\u5173\u952e\u3002\u4e00\u4e2a\u7ebf\u7a0b\u53ef\u4ee5\u7b49\u5f85\u67d0\u4e2a\u6761\u4ef6\u6210\u7acb\uff0c\u800c\u5728\u5b83\u7b49\u5f85\u671f\u95f4\uff0c\u5176\u4ed6\u7ebf\u7a0b\u53ef\u4ee5\u8fdb\u5165\u5e76\u4fee\u6539\u8fd9\u4e2a\u6761\u4ef6\u3002</li> </ul> </li> <li> <p><code>sleep()</code> \u4e0d\u4f1a\u91ca\u653e\u9501:</p> <ul> <li>\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u8c03\u7528 <code>Thread.sleep()</code> \u65f6\uff0c\u5b83\u4ec5\u4ec5\u662f\u8ba9\u51fa\u4e86CPU\u7684\u6267\u884c\u65f6\u95f4\u7247\uff0c\u8fdb\u5165\u4f11\u7720\u72b6\u6001\u3002</li> <li>\u5982\u679c\u8fd9\u4e2a\u7ebf\u7a0b\u5728\u4f11\u7720\u524d\u6301\u6709\u4e86\u4efb\u4f55\u76d1\u89c6\u5668\u9501\uff0c\u5b83\u5728\u6574\u4e2a\u4f11\u7720\u671f\u95f4\u4f1a\u4e00\u76f4\u6301\u6709\u8fd9\u4e9b\u9501\uff0c\u4e0d\u4f1a\u91ca\u653e\u3002</li> <li>\u8fd9\u610f\u5473\u7740\uff0c\u5982\u679c <code>sleep()</code> \u662f\u5728\u4e00\u4e2a <code>synchronized</code> \u4ee3\u7801\u5757\u4e2d\u88ab\u8c03\u7528\u7684\uff0c\u90a3\u4e48\u5176\u4ed6\u7ebf\u7a0b\u5728\u8fd9\u6bb5\u4f11\u7720\u65f6\u95f4\u5185\u5c06\u65e0\u6cd5\u8fdb\u5165\u8be5\u4ee3\u7801\u5757\uff0c\u56e0\u4e3a\u5b83\u4eec\u65e0\u6cd5\u83b7\u53d6\u9501\u3002\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6027\u80fd\u95ee\u9898\u751a\u81f3\u6b7b\u9501\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/wait%E5%92%8Csleep%E7%9A%84%E5%8C%BA%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88/#_3","title":"\u4e3b\u8981\u7528\u9014\u548c\u8bbe\u8ba1\u76ee\u7684\u4e0d\u540c","text":"<ul> <li> <p><code>wait()</code> \u7528\u4e8e\u7ebf\u7a0b\u95f4\u7684\u901a\u4fe1/\u534f\u4f5c (Inter-thread communication):</p> <ul> <li>\u5b83\u7684\u8bbe\u8ba1\u573a\u666f\u662f\uff1a\u4e00\u4e2a\u7ebf\u7a0b\u9700\u8981\u7b49\u5f85\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u5b8c\u6210\u67d0\u4e2a\u64cd\u4f5c\u6216\u6ee1\u8db3\u67d0\u4e2a\u6761\u4ef6\u540e\u624d\u80fd\u7ee7\u7eed\u6267\u884c\u3002\u4f8b\u5982\uff0c\u5728\u7ecf\u5178\u7684\u201c\u751f\u4ea7\u8005-\u6d88\u8d39\u8005\u201d\u6a21\u578b\u4e2d\uff0c\u5f53\u961f\u5217\u4e3a\u7a7a\u65f6\uff0c\u6d88\u8d39\u8005\u7ebf\u7a0b\u4f1a\u8c03\u7528 <code>wait()</code> \u7b49\u5f85\uff0c\u76f4\u5230\u751f\u4ea7\u8005\u7ebf\u7a0b\u653e\u5165\u5546\u54c1\u5e76\u8c03\u7528 <code>notify()</code> \u5c06\u5176\u5524\u9192\u3002</li> </ul> </li> <li> <p><code>sleep()</code> \u7528\u4e8e\u6682\u505c\u5f53\u524d\u7ebf\u7a0b (Pausing execution):</p> <ul> <li>\u5b83\u7684\u8bbe\u8ba1\u573a\u666f\u5f88\u7b80\u5355\uff1a\u5c31\u662f\u60f3\u8ba9\u5f53\u524d\u7ebf\u7a0b\u6682\u505c\u6267\u884c\u4e00\u6bb5\u65f6\u95f4\u3002\u4f8b\u5982\uff0c\u4f60\u53ef\u80fd\u60f3\u5728\u4e00\u4e2a\u5faa\u73af\u4e2d\u51cf\u6162\u6267\u884c\u901f\u5ea6\uff0c\u6216\u8005\u6a21\u62df\u4e00\u4e2a\u8017\u65f6\u64cd\u4f5c\uff0c\u6216\u8005\u7b49\u5f85\u67d0\u4e2a\u5916\u90e8\u8d44\u6e90\u51c6\u5907\u5c31\u7eea\u3002\u5b83\u4e0d\u6d89\u53ca\u7ebf\u7a0b\u95f4\u7684\u76f4\u63a5\u901a\u4fe1\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/wait%E5%92%8Csleep%E7%9A%84%E5%8C%BA%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88/#_4","title":"\u5524\u9192\u65b9\u5f0f\u4e0d\u540c","text":"<ul> <li><code>wait()</code>: \u7ebf\u7a0b\u8c03\u7528 <code>wait()</code> \u540e\u4f1a\u8fdb\u5165\u5bf9\u8c61\u7684\u7b49\u5f85\u96c6\uff08Wait Set\uff09\uff0c\u5b83\u65e0\u6cd5\u81ea\u5df1\u9192\u6765\u3002\u5fc5\u987b\u4f9d\u8d56\u4e8e\u5176\u4ed6\u7ebf\u7a0b\u5bf9\u540c\u4e00\u4e2a\u5bf9\u8c61\u8c03\u7528 <code>notify()</code> \u6216 <code>notifyAll()</code> \u65b9\u6cd5\u6765\u5c06\u5176\u5524\u9192\u3002\u88ab\u5524\u9192\u540e\uff0c\u8be5\u7ebf\u7a0b\u5e76\u4e0d\u4f1a\u7acb\u5373\u6267\u884c\uff0c\u800c\u662f\u4f1a\u8fdb\u5165\u5165\u53e3\u96c6\uff08Entry Set\uff09\u91cd\u65b0\u7ade\u4e89\u9501\uff0c\u53ea\u6709\u5f53\u5b83\u518d\u6b21\u83b7\u5f97\u9501\u4e4b\u540e\uff0c\u624d\u80fd\u4ece <code>wait()</code> \u7684\u8c03\u7528\u5904\u7ee7\u7eed\u6267\u884c\u3002</li> <li><code>sleep()</code>: \u7ebf\u7a0b\u4e3b\u8981\u901a\u8fc7\u4e24\u79cd\u65b9\u5f0f\u6062\u590d\u6267\u884c\uff1a<ol> <li>\u7761\u7720\u65f6\u95f4\u7ed3\u675f: \u5f53\u6307\u5b9a\u7684\u65f6\u95f4\uff08\u6beb\u79d2\uff09\u8fc7\u53bb\u540e\uff0c\u7ebf\u7a0b\u4f1a\u81ea\u52a8\u53d8\u4e3a\u5c31\u7eea\uff08Runnable\uff09\u72b6\u6001\uff0c\u7b49\u5f85CPU\u8c03\u5ea6\u3002</li> <li>\u88ab\u4e2d\u65ad: \u5176\u4ed6\u7ebf\u7a0b\u53ef\u4ee5\u8c03\u7528\u8be5\u4f11\u7720\u7ebf\u7a0b\u7684 <code>interrupt()</code> \u65b9\u6cd5\uff0c\u8fd9\u4f1a\u8ba9 <code>sleep()</code> \u629b\u51fa <code>InterruptedException</code>\uff0c\u4ece\u800c\u63d0\u524d\u7ed3\u675f\u4f11\u7720\u3002</li> </ol> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/wait%E5%92%8Csleep%E7%9A%84%E5%8C%BA%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88/#_5","title":"\u4f7f\u7528\u524d\u63d0\u6761\u4ef6\u4e0d\u540c","text":"<ul> <li><code>wait()</code>: \u5fc5\u987b\u5728 <code>synchronized</code> \u4ee3\u7801\u5757\u6216 <code>synchronized</code> \u65b9\u6cd5\u4e2d\u8c03\u7528\u3002\u8fd9\u662f\u56e0\u4e3a\u8c03\u7528 <code>wait()</code> \u7684\u524d\u63d0\u662f\u7ebf\u7a0b\u5fc5\u987b\u6301\u6709\u8be5\u5bf9\u8c61\u7684\u76d1\u89c6\u5668\u9501\u3002\u5982\u679c\u5728\u6ca1\u6709\u9501\u7684\u60c5\u51b5\u4e0b\u8c03\u7528\uff0cJVM\u65e0\u6cd5\u77e5\u9053\u4f60\u8981\u7b49\u5f85\u7684\u662f\u54ea\u4e2a\u9501\uff0c\u4e5f\u65e0\u6cd5\u8fdb\u884c\u540e\u7eed\u7684\u9501\u91ca\u653e\u548c\u91cd\u5165\u64cd\u4f5c\uff0c\u56e0\u6b64\u4f1a\u629b\u51fa <code>IllegalMonitorStateException</code>\u3002</li> <li><code>sleep()</code>: \u53ef\u4ee5\u5728\u4ee3\u7801\u7684\u4efb\u4f55\u5730\u65b9\u8c03\u7528\uff0c\u6ca1\u6709\u7279\u6b8a\u9650\u5236\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/wait%E5%92%8Csleep%E7%9A%84%E5%8C%BA%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88/#_6","title":"\u4ee3\u7801\u793a\u4f8b\u5bf9\u6bd4","text":"<p>\u4f7f\u7528 <code>sleep()</code>\uff08\u4e0d\u91ca\u653e\u9501\uff09</p> <pre><code>public class SleepExample {\n    private static final Object LOCK = new Object();\n\n    public static void main(String[] args) {\n        new Thread(() -&gt; {\n            synchronized (LOCK) {\n                System.out.println(\"Thread A got the lock.\");\n                try {\n                    System.out.println(\"Thread A is sleeping for 2 seconds.\");\n                    Thread.sleep(2000); // \u6301\u6709\u9501\u5e76\u4f11\u7720\n                    System.out.println(\"Thread A woke up.\");\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n            }\n        }).start();\n\n        // \u7a0d\u5fae\u7b49\u5f85\uff0c\u786e\u4fdd\u7ebf\u7a0bA\u5148\u542f\u52a8\u5e76\u83b7\u5f97\u9501\n        try { Thread.sleep(100); } catch (InterruptedException e) {}\n\n        new Thread(() -&gt; {\n            synchronized (LOCK) {\n                // \u8fd9\u6bb5\u4ee3\u7801\u5fc5\u987b\u7b49\u5f85\u7ebf\u7a0bA\u4f11\u7720\u7ed3\u675f\u5e76\u91ca\u653e\u9501\u540e\u624d\u80fd\u6267\u884c\n                System.out.println(\"Thread B got the lock.\");\n            }\n        }).start();\n    }\n}\n// \u8f93\u51fa:\n// Thread A got the lock.\n// Thread A is sleeping for 2 seconds.\n// (\u7b49\u5f85\u7ea62\u79d2)\n// Thread A woke up.\n// Thread B got the lock.\n</code></pre> <p>\u5206\u6790: \u7ebf\u7a0bB\u5728\u7ebf\u7a0bA\u4f11\u7720\u76842\u79d2\u5185\u5b8c\u5168\u88ab\u963b\u585e\uff0c\u56e0\u4e3a\u5b83\u65e0\u6cd5\u83b7\u5f97<code>LOCK</code>\u5bf9\u8c61\u9501\u3002</p> <p>\u4f7f\u7528 <code>wait()</code>\uff08\u91ca\u653e\u9501\uff09</p> <pre><code>public class WaitExample {\n    private static final Object LOCK = new Object();\n\n    public static void main(String[] args) {\n        new Thread(() -&gt; {\n            synchronized (LOCK) {\n                System.out.println(\"Thread A got the lock.\");\n                try {\n                    System.out.println(\"Thread A is waiting.\");\n                    LOCK.wait(); // \u91ca\u653e\u9501\u5e76\u8fdb\u5165\u7b49\u5f85\n                    System.out.println(\"Thread A has been notified and got the lock again.\");\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n            }\n        }).start();\n\n        // \u7a0d\u5fae\u7b49\u5f85\uff0c\u786e\u4fdd\u7ebf\u7a0bA\u5148\u542f\u52a8\u5e76\u8fdb\u5165wait\u72b6\u6001\n        try { Thread.sleep(100); } catch (InterruptedException e) {}\n\n        new Thread(() -&gt; {\n            synchronized (LOCK) {\n                System.out.println(\"Thread B got the lock because Thread A released it.\");\n                LOCK.notify(); // \u5524\u9192\u6b63\u5728\u7b49\u5f85LOCK\u5bf9\u8c61\u7684\u7ebf\u7a0b\n                System.out.println(\"Thread B notified Thread A.\");\n                // \u7ebf\u7a0bB\u5c06\u5728\u8fd9\u91cc\u6267\u884c\u5b8c\u540c\u6b65\u5757\u540e\u624d\u771f\u6b63\u91ca\u653e\u9501\n            }\n        }).start();\n    }\n}\n// \u8f93\u51fa:\n// Thread A got the lock.\n// Thread A is waiting.\n// Thread B got the lock because Thread A released it.\n// Thread B notified Thread A.\n// Thread A has been notified and got the lock again.\n</code></pre> <p>\u5206\u6790: \u7ebf\u7a0bA\u8c03\u7528<code>wait()</code>\u540e\u7acb\u5373\u91ca\u653e\u4e86\u9501\uff0c\u6240\u4ee5\u7ebf\u7a0bB\u80fd\u591f\u9a6c\u4e0a\u83b7\u5f97\u9501\u5e76\u6267\u884c\u3002\u7ebf\u7a0bB\u8c03\u7528<code>notify()</code>\u540e\uff0c\u7ebf\u7a0bA\u88ab\u5524\u9192\uff0c\u5e76\u5728\u7ebf\u7a0bB\u91ca\u653e\u9501\u4e4b\u540e\u91cd\u65b0\u83b7\u5f97\u9501\u5e76\u7ee7\u7eed\u6267\u884c\u3002</p> \u7279\u6027 <code>Object.wait()</code> <code>Thread.sleep()</code> \u6240\u5c5e\u7684\u7c7b <code>java.lang.Object</code> <code>java.lang.Thread</code> \u5bf9\u9501\u7684\u5904\u7406 \u4f1a\u91ca\u653e\u6301\u6709\u7684\u76d1\u89c6\u5668\u9501 \u4e0d\u4f1a\u91ca\u653e\u4efb\u4f55\u9501 \u4e3b\u8981\u7528\u9014 \u7ebf\u7a0b\u95f4\u7684\u534f\u4f5c\u4e0e\u901a\u4fe1 \u6682\u505c\u5f53\u524d\u7ebf\u7a0b\u7684\u6267\u884c\uff0c\u901a\u5e38\u7528\u4e8e\u63a7\u5236\u6267\u884c\u8282\u594f \u5524\u9192\u65b9\u5f0f \u9700\u7531\u5176\u4ed6\u7ebf\u7a0b\u8c03\u7528<code>notify()</code>\u6216<code>notifyAll()</code>\u6765\u5524\u9192 1. \u7761\u7720\u65f6\u95f4\u5230\u671f\u540e\u81ea\u52a8\u5524\u91922. \u88ab\u5176\u4ed6\u7ebf\u7a0b\u8c03\u7528<code>interrupt()</code>\u4e2d\u65ad \u4f7f\u7528\u524d\u63d0 \u5fc5\u987b\u5728 <code>synchronized</code> \u4ee3\u7801\u5757\u6216\u65b9\u6cd5\u4e2d\u8c03\u7528 \u53ef\u4ee5\u5728\u4efb\u4f55\u5730\u65b9\u8c03\u7528 \u629b\u51fa\u5f02\u5e38 \u629b\u51fa <code>InterruptedException</code> \u629b\u51fa <code>InterruptedException</code>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8B%E7%9A%84%E6%96%B9%E5%BC%8F%E6%9C%89%E5%87%A0%E7%A7%8D/","title":"\u521b\u5efa\u7ebf\u7a0b\u7684\u65b9\u5f0f\u6709\u51e0\u79cd","text":""},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8B%E7%9A%84%E6%96%B9%E5%BC%8F%E6%9C%89%E5%87%A0%E7%A7%8D/#thread","title":"\u7ee7\u627f <code>Thread</code> \u7c7b","text":"<p>\u8fd9\u662f\u6700\u76f4\u63a5\u7684\u4e00\u79cd\u65b9\u5f0f\uff0c\u901a\u8fc7\u521b\u5efa\u4e00\u4e2a\u7ee7\u627f\u81ea <code>Thread</code> \u7c7b\u7684\u5b50\u7c7b\uff0c\u5e76\u91cd\u5199\u5176 <code>run()</code> \u65b9\u6cd5\u6765\u5b9a\u4e49\u7ebf\u7a0b\u9700\u8981\u6267\u884c\u7684\u4efb\u52a1\u3002</p> <p>\u5b9e\u73b0\u6b65\u9aa4: 1.  \u5b9a\u4e49\u4e00\u4e2a\u7c7b\u7ee7\u627f <code>Thread</code> \u7c7b\u3002 2.  \u91cd\u5199 <code>run()</code> \u65b9\u6cd5\uff0c\u5c06\u7ebf\u7a0b\u8981\u6267\u884c\u7684\u903b\u8f91\u4ee3\u7801\u653e\u5165\u5176\u4e2d\u3002 3.  \u521b\u5efa\u8be5\u5b50\u7c7b\u7684\u5b9e\u4f8b\uff0c\u5373\u521b\u5efa\u4e86\u7ebf\u7a0b\u5bf9\u8c61\u3002 4.  \u8c03\u7528\u7ebf\u7a0b\u5bf9\u8c61\u7684 <code>start()</code> \u65b9\u6cd5\u6765\u542f\u52a8\u7ebf\u7a0b\u3002</p> <p>\u793a\u4f8b:</p> <pre><code>class MyThread extends Thread {\n    @Override\n    public void run() {\n        System.out.println(\"\u901a\u8fc7\u7ee7\u627fThread\u7c7b\u521b\u5efa\u7ebf\u7a0b...\");\n    }\n}\n\n// \u542f\u52a8\u7ebf\u7a0b\nMyThread t = new MyThread();\nt.start();\n</code></pre>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8B%E7%9A%84%E6%96%B9%E5%BC%8F%E6%9C%89%E5%87%A0%E7%A7%8D/#runnable","title":"\u5b9e\u73b0 <code>Runnable</code> \u63a5\u53e3","text":"<p>\u8fd9\u79cd\u65b9\u5f0f\u4e0b\uff0c\u7ebf\u7a0b\u7684\u6267\u884c\u4efb\u52a1\uff08<code>Runnable</code>\uff09\u4e0e\u7ebf\u7a0b\u7684\u521b\u5efa\u548c\u7ba1\u7406\uff08<code>Thread</code>\uff09\u662f\u5206\u79bb\u7684\u3002</p> <p>\u5b9e\u73b0\u6b65\u9aa4: 1.  \u5b9a\u4e49\u4e00\u4e2a\u7c7b\u5b9e\u73b0 <code>Runnable</code> \u63a5\u53e3\u3002 2.  \u5b9e\u73b0 <code>run()</code> \u65b9\u6cd5\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u662f\u7ebf\u7a0b\u7684\u6267\u884c\u4f53\u3002 3.  \u521b\u5efa <code>Runnable</code> \u5b9e\u73b0\u7c7b\u7684\u5b9e\u4f8b\u3002 4.  \u5c06\u8be5\u5b9e\u4f8b\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9 <code>Thread</code> \u7c7b\u7684\u6784\u9020\u51fd\u6570\u6765\u521b\u5efa\u7ebf\u7a0b\u5bf9\u8c61\u3002 5.  \u8c03\u7528 <code>Thread</code> \u5bf9\u8c61\u7684 <code>start()</code> \u65b9\u6cd5\u3002</p> <p>\u793a\u4f8b:</p> <pre><code>class MyRunnable implements Runnable {\n    @Override\n    public void run() {\n        System.out.println(\"\u901a\u8fc7\u5b9e\u73b0Runnable\u63a5\u53e3\u521b\u5efa\u7ebf\u7a0b...\");\n    }\n}\n\n// \u542f\u52a8\u7ebf\u7a0b\nMyRunnable myRunnable = new MyRunnable();\nThread t = new Thread(myRunnable);\nt.start();\n</code></pre>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8B%E7%9A%84%E6%96%B9%E5%BC%8F%E6%9C%89%E5%87%A0%E7%A7%8D/#callable-futuretask","title":"\u5b9e\u73b0 <code>Callable</code> \u63a5\u53e3\uff08\u914d\u5408 <code>FutureTask</code> \u6216\u7ebf\u7a0b\u6c60\uff09","text":"<p>\u4eceJava 1.5\u5f00\u59cb\u5f15\u5165\uff0c\u8fd9\u79cd\u65b9\u5f0f\u662f\u5bf9 <code>Runnable</code> \u7684\u4e00\u4e2a\u91cd\u8981\u8865\u5145\uff0c\u4e3b\u8981\u7528\u4e8e\u9700\u8981\u83b7\u53d6\u7ebf\u7a0b\u6267\u884c\u7ed3\u679c\u6216\u5904\u7406\u7ebf\u7a0b\u629b\u51fa\u5f02\u5e38\u7684\u573a\u666f\u3002</p> <p>\u5b9e\u73b0\u6b65\u9aa4: 1.  \u521b\u5efa\u4e00\u4e2a\u7c7b\u5b9e\u73b0 <code>Callable&lt;V&gt;</code> \u63a5\u53e3\uff0c\u5176\u4e2d <code>V</code> \u662f\u8fd4\u56de\u503c\u7684\u7c7b\u578b\u3002 2.  \u5b9e\u73b0 <code>call()</code> \u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u6709\u8fd4\u56de\u503c\uff0c\u5e76\u4e14\u53ef\u4ee5\u629b\u51fa\u5f02\u5e38\u3002 3.  \u4f7f\u7528 <code>FutureTask</code> \u7c7b\u6765\u5305\u88c5 <code>Callable</code> \u5bf9\u8c61\u3002 4.  \u5c06 <code>FutureTask</code> \u5bf9\u8c61\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9 <code>Thread</code> \u6784\u9020\u51fd\u6570\u5e76\u542f\u52a8\u7ebf\u7a0b\u3002 5.  \u901a\u8fc7 <code>FutureTask</code> \u5bf9\u8c61\u7684 <code>get()</code> \u65b9\u6cd5\u83b7\u53d6\u7ebf\u7a0b\u6267\u884c\u7684\u8fd4\u56de\u503c\uff08\u8be5\u65b9\u6cd5\u4f1a\u963b\u585e\uff0c\u76f4\u5230\u4efb\u52a1\u5b8c\u6210\uff09\u3002</p> <p>\u793a\u4f8b:</p> <pre><code>import java.util.concurrent.Callable;\nimport java.util.concurrent.FutureTask;\n\nclass MyCallable implements Callable&lt;String&gt; {\n    @Override\n    public String call() throws Exception {\n        Thread.sleep(1000);\n        return \"\u7ebf\u7a0b\u6267\u884c\u5b8c\u6210\";\n    }\n}\n\n// \u542f\u52a8\u7ebf\u7a0b\u5e76\u83b7\u53d6\u7ed3\u679c\nMyCallable myCallable = new MyCallable();\nFutureTask&lt;String&gt; futureTask = new FutureTask&lt;&gt;(myCallable);\nThread t = new Thread(futureTask);\nt.start();\n\n// \u83b7\u53d6\u8fd4\u56de\u503c\nString result = futureTask.get(); // \u963b\u585e\u7b49\u5f85\nSystem.out.println(result);\n</code></pre>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8B%E7%9A%84%E6%96%B9%E5%BC%8F%E6%9C%89%E5%87%A0%E7%A7%8D/#_1","title":"\u4f7f\u7528\u7ebf\u7a0b\u6c60","text":"<p>\u5728\u5b9e\u9645\u5f00\u53d1\u4e2d\uff0c\u9891\u7e41\u5730\u521b\u5efa\u548c\u9500\u6bc1\u7ebf\u7a0b\u4f1a\u5e26\u6765\u5f88\u5927\u7684\u6027\u80fd\u5f00\u9500\u3002\u56e0\u6b64\uff0c\u66f4\u63a8\u8350\u4f7f\u7528\u7ebf\u7a0b\u6c60\u6765\u7ba1\u7406\u7ebf\u7a0b\u3002\u7ebf\u7a0b\u6c60\u53ef\u4ee5\u590d\u7528\u5df2\u521b\u5efa\u7684\u7ebf\u7a0b\uff0c\u63a7\u5236\u5e76\u53d1\u7ebf\u7a0b\u7684\u6570\u91cf\u3002</p> <p>\u5b9e\u73b0\u6b65\u9aa4: 1.  \u4f7f\u7528 <code>Executors</code> \u5de5\u5382\u7c7b\u521b\u5efa\u6240\u9700\u7c7b\u578b\u7684\u7ebf\u7a0b\u6c60\uff08\u5982 <code>newFixedThreadPool</code>, <code>newCachedThreadPool</code> \u7b49\uff09\u3002 2.  \u521b\u5efa\u5b9e\u73b0\u4e86 <code>Runnable</code> \u6216 <code>Callable</code> \u63a5\u53e3\u7684\u4efb\u52a1\u3002 3.  \u901a\u8fc7\u7ebf\u7a0b\u6c60\u7684 <code>submit()</code> \u6216 <code>execute()</code> \u65b9\u6cd5\u63d0\u4ea4\u4efb\u52a1\u3002 4.  \u5f53\u4e0d\u518d\u9700\u8981\u7ebf\u7a0b\u6c60\u65f6\uff0c\u8c03\u7528 <code>shutdown()</code> \u65b9\u6cd5\u5173\u95ed\u3002</p> <p>\u793a\u4f8b:</p> <pre><code>import java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\n\n// ... MyRunnable class from above ...\n\n// \u521b\u5efa\u7ebf\u7a0b\u6c60\u5e76\u63d0\u4ea4\u4efb\u52a1\nExecutorService executorService = Executors.newFixedThreadPool(5);\nexecutorService.execute(new MyRunnable());\nexecutorService.shutdown();\n</code></pre>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/%E7%BA%BF%E7%A8%8B%E6%B1%A0%E6%A0%B8%E5%BF%83%E5%8F%82%E6%95%B0%E6%9C%89%E4%BB%80%E4%B9%88%EF%BC%8C%E6%8B%92%E7%BB%9D%E7%AD%96%E7%95%A5%E6%9C%89%E4%BB%80%E4%B9%88/","title":"\u7ebf\u7a0b\u6c60\u6838\u5fc3\u53c2\u6570\u6709\u4ec0\u4e48\uff0c\u62d2\u7edd\u7b56\u7565\u6709\u4ec0\u4e48","text":""},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/%E7%BA%BF%E7%A8%8B%E6%B1%A0%E6%A0%B8%E5%BF%83%E5%8F%82%E6%95%B0%E6%9C%89%E4%BB%80%E4%B9%88%EF%BC%8C%E6%8B%92%E7%BB%9D%E7%AD%96%E7%95%A5%E6%9C%89%E4%BB%80%E4%B9%88/#_1","title":"\u6838\u5fc3\u53c2\u6570","text":"<p>\u5728Java\u7684<code>ThreadPoolExecutor</code>\u7c7b\u4e2d\uff0c\u5b9a\u4e49\u4e86\u7ebf\u7a0b\u6c60\u7684\u4e03\u4e2a\u6838\u5fc3\u53c2\u6570\u3002</p> <ol> <li> <p>corePoolSize (\u6838\u5fc3\u7ebf\u7a0b\u6570)\uff1a\u7ebf\u7a0b\u6c60\u4e2d\u957f\u671f\u5b58\u6d3b\u7684\u7ebf\u7a0b\u6570\u91cf\u3002\u5373\u4f7f\u8fd9\u4e9b\u7ebf\u7a0b\u5904\u4e8e\u7a7a\u95f2\u72b6\u6001\uff0c\u5b83\u4eec\u4e5f\u4e0d\u4f1a\u88ab\u56de\u6536\uff08\u9664\u975e\u8bbe\u7f6e\u4e86<code>allowCoreThreadTimeout</code>\uff09\u3002\u5f53\u65b0\u4efb\u52a1\u63d0\u4ea4\u65f6\uff0c\u5982\u679c\u5f53\u524d\u8fd0\u884c\u7684\u7ebf\u7a0b\u6570\u5c11\u4e8e<code>corePoolSize</code>\uff0c\u7ebf\u7a0b\u6c60\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7ebf\u7a0b\u6765\u5904\u7406\u4efb\u52a1\u3002</p> </li> <li> <p>maximumPoolSize (\u6700\u5927\u7ebf\u7a0b\u6570)\uff1a\u7ebf\u7a0b\u6c60\u80fd\u591f\u5bb9\u7eb3\u7684\u6700\u5927\u7ebf\u7a0b\u6570\u91cf\u3002\u5f53\u5de5\u4f5c\u961f\u5217\u5df2\u6ee1\uff0c\u5e76\u4e14\u5f53\u524d\u8fd0\u884c\u7684\u7ebf\u7a0b\u6570\u5c0f\u4e8e<code>maximumPoolSize</code>\u65f6\uff0c\u7ebf\u7a0b\u6c60\u4f1a\u521b\u5efa\u65b0\u7684\u975e\u6838\u5fc3\u7ebf\u7a0b\u6765\u5904\u7406\u4efb\u52a1\u3002</p> </li> <li> <p>keepAliveTime (\u7a7a\u95f2\u7ebf\u7a0b\u5b58\u6d3b\u65f6\u95f4)\uff1a\u975e\u6838\u5fc3\u7ebf\u7a0b\u7684\u7a7a\u95f2\u5b58\u6d3b\u65f6\u95f4\u3002\u5f53\u7ebf\u7a0b\u6c60\u4e2d\u7684\u7ebf\u7a0b\u6570\u91cf\u8d85\u8fc7<code>corePoolSize</code>\u65f6\uff0c\u5982\u679c\u4e00\u4e2a\u975e\u6838\u5fc3\u7ebf\u7a0b\u7684\u7a7a\u95f2\u65f6\u95f4\u8d85\u8fc7\u4e86<code>keepAliveTime</code>\uff0c\u5b83\u5c06\u88ab\u7ec8\u6b62\u548c\u56de\u6536\uff0c\u4ee5\u91ca\u653e\u8d44\u6e90\u3002</p> </li> <li> <p>unit (\u65f6\u95f4\u5355\u4f4d)\uff1a\u7528\u4e8e\u6307\u5b9a<code>keepAliveTime</code>\u7684\u65f6\u95f4\u5355\u4f4d\uff0c\u4f8b\u5982\u79d2\u3001\u6beb\u79d2\u7b49\u3002</p> </li> <li> <p>workQueue (\u5de5\u4f5c\u961f\u5217)\uff1a\u7528\u4e8e\u5b58\u653e\u7b49\u5f85\u6267\u884c\u7684\u4efb\u52a1\u7684\u963b\u585e\u961f\u5217\u3002\u5f53\u6838\u5fc3\u7ebf\u7a0b\u90fd\u5728\u5fd9\u788c\u65f6\uff0c\u65b0\u63d0\u4ea4\u7684\u4efb\u52a1\u4f1a\u88ab\u653e\u5165\u8fd9\u4e2a\u961f\u5217\u4e2d\u6392\u961f\u3002\u5e38\u7528\u7684\u961f\u5217\u7c7b\u578b\u5305\u62ec<code>ArrayBlockingQueue</code>\u3001<code>LinkedBlockingQueue</code>\u548c<code>SynchronousQueue</code>\u7b49\u3002</p> </li> <li> <p>threadFactory (\u7ebf\u7a0b\u5de5\u5382)\uff1a\u7528\u4e8e\u521b\u5efa\u65b0\u7ebf\u7a0b\u7684\u5de5\u5382\u3002\u901a\u8fc7\u81ea\u5b9a\u4e49\u7ebf\u7a0b\u5de5\u5382\uff0c\u53ef\u4ee5\u4e3a\u7ebf\u7a0b\u8bbe\u7f6e\u6709\u610f\u4e49\u7684\u540d\u79f0\u3001\u6307\u5b9a\u4e3a\u5b88\u62a4\u7ebf\u7a0b\u6216\u8bbe\u7f6e\u7ebf\u7a0b\u4f18\u5148\u7ea7\u7b49\u3002</p> </li> <li> <p>rejectedExecutionHandler (\u62d2\u7edd\u7b56\u7565)\uff1a\u5f53\u7ebf\u7a0b\u6c60\u548c\u5de5\u4f5c\u961f\u5217\u90fd\u5df2\u6ee1\uff0c\u65e0\u6cd5\u5904\u7406\u65b0\u63d0\u4ea4\u7684\u4efb\u52a1\u65f6\u6240\u91c7\u53d6\u7684\u7b56\u7565\u3002</p> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/%E7%BA%BF%E7%A8%8B%E6%B1%A0%E6%A0%B8%E5%BF%83%E5%8F%82%E6%95%B0%E6%9C%89%E4%BB%80%E4%B9%88%EF%BC%8C%E6%8B%92%E7%BB%9D%E7%AD%96%E7%95%A5%E6%9C%89%E4%BB%80%E4%B9%88/#_2","title":"\u62d2\u7edd\u7b56\u7565","text":"<p>\u5f53\u7ebf\u7a0b\u6c60\u65e0\u6cd5\u63a5\u53d7\u65b0\u4efb\u52a1\u65f6\uff0c\u4f1a\u89e6\u53d1\u62d2\u7edd\u7b56\u7565\u3002\u8fd9\u901a\u5e38\u53d1\u751f\u5728\u4e24\u79cd\u60c5\u51b5\u4e0b\uff1a\u7ebf\u7a0b\u6c60\u88ab\u5173\u95ed\u540e\u518d\u6b21\u63d0\u4ea4\u4efb\u52a1\uff0c\u6216\u8005\u7ebf\u7a0b\u6c60\u7684\u5de5\u4f5c\u8d1f\u8377\u5df2\u8fbe\u5230\u9971\u548c\u72b6\u6001\u3002 <code>ThreadPoolExecutor</code> \u63d0\u4f9b\u4e86\u56db\u79cd\u5185\u7f6e\u7684\u62d2\u7edd\u7b56\u7565\uff1a</p> <ol> <li> <p>AbortPolicy (\u9ed8\u8ba4\u7b56\u7565)\uff1a\u8fd9\u662f\u9ed8\u8ba4\u7684\u62d2\u7edd\u7b56\u7565\u3002\u5f53\u4efb\u52a1\u88ab\u62d2\u7edd\u65f6\uff0c\u4f1a\u76f4\u63a5\u629b\u51fa<code>RejectedExecutionException</code>\u5f02\u5e38\uff0c\u4ece\u800c\u4e2d\u65ad\u8c03\u7528\u8005\u7684\u6267\u884c\u3002 \u8fd9\u79cd\u7b56\u7565\u80fd\u591f\u660e\u786e\u5730\u8ba9\u8c03\u7528\u65b9\u77e5\u9053\u4efb\u52a1\u63d0\u4ea4\u5931\u8d25\u3002</p> </li> <li> <p>CallerRunsPolicy (\u8c03\u7528\u8005\u8fd0\u884c\u7b56\u7565)\uff1a\u8be5\u7b56\u7565\u4e0d\u4f1a\u629b\u5f03\u4efb\u52a1\uff0c\u4e5f\u4e0d\u4f1a\u629b\u51fa\u5f02\u5e38\uff0c\u800c\u662f\u5c06\u4efb\u52a1\u56de\u9000\u7ed9\u8c03\u7528\u8005\u7ebf\u7a0b\u6765\u6267\u884c\u3002 \u8fd9\u6837\u505a\u53ef\u4ee5\u964d\u4f4e\u65b0\u4efb\u52a1\u7684\u63d0\u4ea4\u901f\u5ea6\uff0c\u56e0\u4e3a\u63d0\u4ea4\u4efb\u52a1\u7684\u7ebf\u7a0b\u81ea\u8eab\u9700\u8981\u6267\u884c\u4efb\u52a1\uff0c\u4ece\u800c\u4e3a\u7ebf\u7a0b\u6c60\u4e89\u53d6\u5904\u7406\u5df2\u6709\u4efb\u52a1\u7684\u65f6\u95f4\u3002</p> </li> <li> <p>DiscardPolicy (\u4e22\u5f03\u7b56\u7565)\uff1a\u5f53\u65b0\u4efb\u52a1\u65e0\u6cd5\u88ab\u7ebf\u7a0b\u6c60\u63a5\u6536\u65f6\uff0c\u8be5\u7b56\u7565\u4f1a\u9ed8\u9ed8\u5730\u4e22\u5f03\u8fd9\u4e2a\u4efb\u52a1\uff0c\u4e0d\u505a\u4efb\u4f55\u5904\u7406\uff0c\u4e5f\u4e0d\u4f1a\u629b\u51fa\u4efb\u4f55\u5f02\u5e38\u3002 \u5728\u4efb\u52a1\u4e0d\u91cd\u8981\u4e14\u53ef\u4ee5\u88ab\u4e22\u5f03\u7684\u573a\u666f\u4e0b\u53ef\u4ee5\u4f7f\u7528\u6b64\u7b56\u7565\u3002</p> </li> <li> <p>DiscardOldestPolicy (\u4e22\u5f03\u6700\u65e7\u4efb\u52a1\u7b56\u7565)\uff1a\u6b64\u7b56\u7565\u4f1a\u4e22\u5f03\u5de5\u4f5c\u961f\u5217\u4e2d\u7b49\u5f85\u65f6\u95f4\u6700\u957f\u7684\u4efb\u52a1\uff08\u5373\u961f\u5934\u7684\u4efb\u52a1\uff09\uff0c\u7136\u540e\u5c1d\u8bd5\u5c06\u65b0\u63d0\u4ea4\u7684\u4efb\u52a1\u91cd\u65b0\u52a0\u5165\u961f\u5217\u3002 \u8fd9\u79cd\u7b56\u7565\u9002\u7528\u4e8e\u90a3\u4e9b\u5e0c\u671b\u4f18\u5148\u5904\u7406\u6700\u65b0\u4efb\u52a1\u7684\u573a\u666f\u3002</p> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JUC/%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E4%BB%8B%E7%BB%8D/","title":"\u7ebf\u7a0b\u7684\u751f\u547d\u5468\u671f\u4ecb\u7ecd","text":"<ol> <li> <p>\u65b0\u5efa\u72b6\u6001 (New)     \u5f53\u4f7f\u7528 <code>new</code> \u5173\u952e\u5b57\u521b\u5efa\u4e00\u4e2a\u7ebf\u7a0b\u5bf9\u8c61\u540e\uff0c\u4f46\u8fd8\u672a\u8c03\u7528\u5176 <code>start()</code> \u65b9\u6cd5\u65f6\uff0c\u8be5\u7ebf\u7a0b\u5c31\u5904\u4e8e\u65b0\u5efa\u72b6\u6001\u3002 \u6b64\u65f6\uff0c\u5b83\u4ec5\u4ec5\u662f\u4e00\u4e2aJava\u5bf9\u8c61\uff0c\u64cd\u4f5c\u7cfb\u7edf\u8fd8\u6ca1\u6709\u4e3a\u5176\u5206\u914d\u4efb\u4f55\u8d44\u6e90\uff0c\u56e0\u6b64\u5b83\u8fd8\u4e0d\u662f\u4e00\u4e2a\u6d3b\u52a8\u7684\u7ebf\u7a0b\u3002</p> </li> <li> <p>\u53ef\u8fd0\u884c\u72b6\u6001 (Runnable)     \u4e00\u65e6\u7ebf\u7a0b\u5bf9\u8c61\u7684 <code>start()</code> \u65b9\u6cd5\u88ab\u8c03\u7528\uff0c\u7ebf\u7a0b\u5c31\u8fdb\u5165\u4e86\u53ef\u8fd0\u884c\u72b6\u6001\u3002 \u5904\u4e8e\u8fd9\u4e2a\u72b6\u6001\u7684\u7ebf\u7a0b\u5df2\u7ecf\u5177\u5907\u4e86\u8fd0\u884c\u7684\u6761\u4ef6\uff0c\u4f4d\u4e8e\u7ebf\u7a0b\u961f\u5217\u4e2d\uff0c\u7b49\u5f85\u64cd\u4f5c\u7cfb\u7edf\u7684\u7ebf\u7a0b\u8c03\u5ea6\u5668\u5206\u914dCPU\u65f6\u95f4\u7247\u3002 \"\u53ef\u8fd0\u884c\"\u72b6\u6001\u5b9e\u9645\u4e0a\u5305\u542b\u4e86\u5c31\u7eea\u548c\u8fd0\u884c\u4e24\u79cd\u5b50\u72b6\u6001\u3002\u5c31\u7eea\u72b6\u6001\u8868\u793a\u7ebf\u7a0b\u6709\u8d44\u683c\u8fd0\u884c\uff0c\u4f46CPU\u6b63\u5728\u6267\u884c\u5176\u4ed6\u7ebf\u7a0b\uff1b\u8fd0\u884c\u72b6\u6001\u8868\u793a\u7ebf\u7a0b\u5df2\u7ecf\u83b7\u5f97\u4e86CPU\u65f6\u95f4\uff0c\u6b63\u5728\u6267\u884c\u5176 <code>run()</code> \u65b9\u6cd5\u4e2d\u7684\u4ee3\u7801\u3002</p> </li> <li> <p>\u963b\u585e\u72b6\u6001 (Blocked)     \u5f53\u4e00\u4e2a\u7ebf\u7a0b\u8bd5\u56fe\u83b7\u53d6\u4e00\u4e2a\u5bf9\u8c61\u7684\u76d1\u89c6\u5668\u9501\uff08\u4f8b\u5982\uff0c\u8fdb\u5165\u4e00\u4e2a <code>synchronized</code> \u4fee\u9970\u7684\u540c\u6b65\u4ee3\u7801\u5757\u6216\u65b9\u6cd5\uff09\uff0c\u800c\u8be5\u9501\u6b64\u65f6\u88ab\u5176\u4ed6\u7ebf\u7a0b\u6240\u6301\u6709\u65f6\uff0c\u8be5\u7ebf\u7a0b\u5c31\u4f1a\u8fdb\u5165\u963b\u585e\u72b6\u6001\u3002 \u5904\u4e8e\u963b\u585e\u72b6\u6001\u7684\u7ebf\u7a0b\u4f1a\u6682\u65f6\u505c\u6b62\u6d3b\u52a8\uff0c\u5e76\u4e14\u4e0d\u4f1a\u5360\u7528CPU\u8d44\u6e90\uff0c\u76f4\u5230\u5b83\u6210\u529f\u83b7\u53d6\u5230\u9501\uff0c\u624d\u4f1a\u8f6c\u6362\u56de\u53ef\u8fd0\u884c\u72b6\u6001\u3002</p> </li> <li> <p>\u7b49\u5f85\u72b6\u6001 (Waiting)     \u5904\u4e8e\u7b49\u5f85\u72b6\u6001\u7684\u7ebf\u7a0b\u9700\u8981\u7b49\u5f85\u5176\u4ed6\u7ebf\u7a0b\u6267\u884c\u7279\u5b9a\u7684\u64cd\u4f5c\u6765\u5524\u9192\u5b83\u3002 \u7ebf\u7a0b\u8fdb\u5165\u6b64\u72b6\u6001\u901a\u5e38\u662f\u7531\u4e8e\u8c03\u7528\u4e86\u4ee5\u4e0b\u65b9\u6cd5\u4e4b\u4e00\uff1a</p> <ul> <li><code>Object.wait()</code> (\u65e0\u8d85\u65f6\u8bbe\u7f6e)</li> <li><code>Thread.join()</code> (\u65e0\u8d85\u65f6\u8bbe\u7f6e)</li> <li><code>LockSupport.park()</code> \u8fdb\u5165\u7b49\u5f85\u72b6\u6001\u7684\u7ebf\u7a0b\u4f1a\u91ca\u653eCPU\u8d44\u6e90\uff0c\u5e76\u4e14\u53ea\u6709\u5728\u88ab\u5176\u4ed6\u7ebf\u7a0b\u663e\u5f0f\u5730\u5524\u9192\uff08\u4f8b\u5982\u901a\u8fc7\u8c03\u7528 <code>notify()</code> \u6216 <code>notifyAll()</code>\uff09\u540e\uff0c\u624d\u80fd\u91cd\u65b0\u56de\u5230\u53ef\u8fd0\u884c\u72b6\u6001\u3002</li> </ul> </li> <li> <p>\u8ba1\u65f6\u7b49\u5f85\u72b6\u6001 (Timed Waiting)     \u8fd9\u4e2a\u72b6\u6001\u4e0e\u7b49\u5f85\u72b6\u6001\u7c7b\u4f3c\uff0c\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\u5b83\u6709\u4e00\u4e2a\u6307\u5b9a\u7684\u7b49\u5f85\u65f6\u95f4\u3002 \u7ebf\u7a0b\u5728\u7b49\u5f85\u4e00\u6bb5\u65f6\u95f4\u540e\u4f1a\u81ea\u52a8\u5524\u9192\uff0c\u8fd4\u56de\u5230\u53ef\u8fd0\u884c\u72b6\u6001\u3002 \u4ee5\u4e0b\u65b9\u6cd5\u4f1a\u4f7f\u7ebf\u7a0b\u8fdb\u5165\u8ba1\u65f6\u7b49\u5f85\u72b6\u6001\uff1a</p> <ul> <li><code>Thread.sleep(long millis)</code></li> <li><code>Object.wait(long timeout)</code></li> <li><code>Thread.join(long millis)</code></li> <li><code>LockSupport.parkNanos(long nanos)</code></li> <li><code>LockSupport.parkUntil(long deadline)</code></li> </ul> </li> <li> <p>\u7ec8\u6b62\u72b6\u6001 (Terminated)     \u7ebf\u7a0b\u7684\u751f\u547d\u5468\u671f\u6700\u7ec8\u4f1a\u8d70\u5411\u7ec8\u6b62\u3002 \u5f53\u7ebf\u7a0b\u7684 <code>run()</code> \u65b9\u6cd5\u6267\u884c\u5b8c\u6bd5\uff0c\u6216\u8005\u56e0\u672a\u6355\u83b7\u7684\u5f02\u5e38\u800c\u9000\u51fa\u65f6\uff0c\u7ebf\u7a0b\u5c31\u8fdb\u5165\u4e86\u7ec8\u6b62\u72b6\u6001\u3002 \u4e00\u65e6\u8fdb\u5165\u7ec8\u6b62\u72b6\u6001\uff0c\u7ebf\u7a0b\u5c31\u7ed3\u675f\u4e86\u5176\u751f\u547d\u5468\u671f\uff0c\u4e0d\u80fd\u518d\u88ab\u91cd\u65b0\u542f\u52a8\u6216\u8f6c\u6362\u5230\u4efb\u4f55\u5176\u4ed6\u72b6\u6001\u3002 \u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u76f4\u63a5\u8c03\u7528\u7ebf\u7a0b\u7684 <code>stop()</code> \u65b9\u6cd5\u4e5f\u53ef\u4ee5\u5f3a\u5236\u7ec8\u6b62\u7ebf\u7a0b\uff0c\u4f46\u8fd9\u79cd\u65b9\u6cd5\u7531\u4e8e\u53ef\u80fd\u5bfc\u81f4\u8d44\u6e90\u65e0\u6cd5\u6b63\u5e38\u91ca\u653e\u7b49\u95ee\u9898\uff0c\u901a\u5e38\u4e0d\u88ab\u63a8\u8350\u4f7f\u7528\u3002</p> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/G1%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8%E7%9B%B8%E6%AF%94%E4%BA%8ECMS%E6%9C%89%E5%93%AA%E4%BA%9B%E5%85%B3%E9%94%AE%E4%BC%98%E5%8A%BF%EF%BC%9F%E5%AE%83%E7%9A%84Region%E5%88%92%E5%88%86%E5%92%8CRSet%E8%AE%BE%E8%AE%A1%E8%B5%B7%E5%88%B0%E4%BA%86%E4%BB%80%E4%B9%88%E4%BD%9C%E7%94%A8%EF%BC%9F/","title":"G1\u5783\u573e\u6536\u96c6\u5668\u76f8\u6bd4\u4e8eCMS\u6709\u54ea\u4e9b\u5173\u952e\u4f18\u52bf\uff1f\u5b83\u7684Region\u5212\u5206\u548cRSet\u8bbe\u8ba1\u8d77\u5230\u4e86\u4ec0\u4e48\u4f5c\u7528\uff1f","text":"<p>G1\uff08Garbage-First\uff09\u5783\u573e\u6536\u96c6\u5668\u662fHotSpot JVM\u4e2d\u4e00\u4e2a\u91cd\u8981\u7684\u5e76\u53d1\u3001\u5e76\u884c\u3001\u589e\u91cf\u3001\u5206\u4ee3\u3001\u6574\u7406\uff08compacting\uff09\u6536\u96c6\u5668\uff0c\u5b83\u8bbe\u8ba1\u7684\u76ee\u6807\u662f\u53d6\u4ee3CMS\uff08Concurrent Mark-Sweep\uff09\u6536\u96c6\u5668\uff0c\u63d0\u4f9b\u66f4\u597d\u7684\u53ef\u9884\u6d4b\u7684\u6682\u505c\u65f6\u95f4\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/G1%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8%E7%9B%B8%E6%AF%94%E4%BA%8ECMS%E6%9C%89%E5%93%AA%E4%BA%9B%E5%85%B3%E9%94%AE%E4%BC%98%E5%8A%BF%EF%BC%9F%E5%AE%83%E7%9A%84Region%E5%88%92%E5%88%86%E5%92%8CRSet%E8%AE%BE%E8%AE%A1%E8%B5%B7%E5%88%B0%E4%BA%86%E4%BB%80%E4%B9%88%E4%BD%9C%E7%94%A8%EF%BC%9F/#g1cms","title":"G1\u76f8\u6bd4\u4e8eCMS\u7684\u5173\u952e\u4f18\u52bf","text":"<ol> <li> <p>\u53ef\u9884\u6d4b\u7684\u505c\u987f\u65f6\u95f4\u76ee\u6807 (Pause Time Goal)\uff1a</p> <ul> <li>G1\u6700\u5927\u7684\u4f18\u52bf\u5728\u4e8e\u5b83\u5141\u8bb8\u7528\u6237\u6307\u5b9a\u4e00\u4e2a\u8f6f\u5b9e\u65f6\uff08Soft Real-Time\uff09\u7684\u505c\u987f\u65f6\u95f4\u76ee\u6807\uff08\u901a\u8fc7<code>\u2013XX:MaxGCPauseMillis</code>\u53c2\u6570\uff09\uff0c\u4f8b\u5982200\u6beb\u79d2\u3002G1\u4f1a\u5c3d\u91cf\u5728\u7528\u6237\u8bbe\u5b9a\u7684\u505c\u987f\u65f6\u95f4\u5185\u5b8c\u6210\u5783\u573e\u56de\u6536\u5de5\u4f5c\u3002</li> <li>CMS\u867d\u7136\u4e5f\u6709\u5e76\u53d1\u9636\u6bb5\uff0c\u4f46\u5728\u67d0\u4e9b\u9636\u6bb5\uff08\u5982\u521d\u59cb\u6807\u8bb0\u3001\u91cd\u65b0\u6807\u8bb0\uff09\u4ecd\u4f1a\u53d1\u751fSTW\uff08Stop-The-World\uff09\uff0c\u4e14\u8fd9\u4e9b\u505c\u987f\u65f6\u95f4\u6709\u65f6\u96be\u4ee5\u9884\u6d4b\uff0c\u53ef\u80fd\u56e0\u4e3a\u8001\u5e74\u4ee3\u788e\u7247\u5316\u6216\u5e76\u53d1\u6a21\u5f0f\u5931\u8d25\uff08Concurrent Mode Failure\uff09\u800c\u5bfc\u81f4\u957f\u65f6\u95f4\u505c\u987f\u3002</li> </ul> </li> <li> <p>\u907f\u514d\u5185\u5b58\u788e\u7247\u95ee\u9898\uff1a</p> <ul> <li>CMS\u662f\u4e00\u4e2a\u201c\u6807\u8bb0-\u6e05\u9664\u201d\u7b97\u6cd5\u7684\u6536\u96c6\u5668\uff0c\u5728\u56de\u6536\u5b8c\u6210\u540e\u4e0d\u8fdb\u884c\u5185\u5b58\u6574\u7406\uff0c\u5bb9\u6613\u4ea7\u751f\u5927\u91cf\u7684\u5185\u5b58\u788e\u7247\u3002\u5f53\u9700\u8981\u5206\u914d\u5927\u5bf9\u8c61\u65f6\uff0c\u5982\u679c\u6ca1\u6709\u8fde\u7eed\u7684\u8db3\u591f\u5927\u7684\u7a7a\u95f4\uff0c\u5c31\u4f1a\u63d0\u524d\u89e6\u53d1Full GC\uff0c\u5bfc\u81f4\u957f\u65f6\u95f4\u505c\u987f\u3002</li> <li>G1\u662f\u4e00\u4e2a\u201c\u6807\u8bb0-\u6574\u7406\u201d\u7b97\u6cd5\u7684\u6536\u96c6\u5668\u3002\u5728\u6267\u884cYoung GC\u548cMixed GC\u65f6\uff0c\u5b83\u4f1a\u901a\u8fc7\u5c06\u5b58\u6d3b\u5bf9\u8c61\u4ece\u4e00\u4e2aRegion\u62f7\u8d1d\u5230\u53e6\u4e00\u4e2a\u7a7a\u7684Region\u6765\u5b9e\u73b0\u201c\u6574\u7406\u201d\uff0c\u4ece\u800c\u6709\u6548\u5730\u907f\u514d\u4e86\u5185\u5b58\u788e\u7247\u95ee\u9898\uff0c\u8fd9\u5bf9\u4e8e\u957f\u65f6\u95f4\u8fd0\u884c\u7684\u5e94\u7528\u7a0b\u5e8f\u5c24\u4e3a\u91cd\u8981\u3002</li> </ul> </li> <li> <p>\u66f4\u9ad8\u6548\u7684\u5806\u7a7a\u95f4\u5229\u7528\uff1a</p> <ul> <li>CMS\u4e3b\u8981\u5173\u6ce8\u8001\u5e74\u4ee3\u7684\u56de\u6536\uff0c\u5e76\u4e14\u5728\u5e76\u53d1\u6807\u8bb0\u9636\u6bb5\u9700\u8981\u9884\u7559\u4e00\u90e8\u5206\u7a7a\u95f4\u4f9b\u5e94\u7528\u7a0b\u5e8f\u7ee7\u7eed\u8fd0\u884c\u3002</li> <li>G1\u53ef\u4ee5\u540c\u65f6\u7ba1\u7406\u5e74\u8f7b\u4ee3\u548c\u8001\u5e74\u4ee3\uff0c\u5e76\u5728Mixed GC\u9636\u6bb5\u9009\u62e9\u6027\u5730\u56de\u6536\u90e8\u5206\u8001\u5e74\u4ee3Region\uff0c\u4f18\u5148\u56de\u6536\u5783\u573e\u6700\u591a\u7684Region\uff08\u8fd9\u4e5f\u662f\u201cGarbage First\u201d\u7684\u7531\u6765\uff09\uff0c\u4ece\u800c\u66f4\u6709\u6548\u5730\u5229\u7528\u5806\u7a7a\u95f4\u3002</li> </ul> </li> <li> <p>\u5904\u7406\u5927\u5bf9\u8c61 (Humongous Objects)\uff1a</p> <ul> <li>G1\u4e13\u95e8\u8bbe\u8ba1\u4e86\u201cHumongous Region\u201d\u6765\u5b58\u653e\u5927\u4e8e Region \u5927\u5c0f\u4e00\u534a\u7684\u5de8\u578b\u5bf9\u8c61\uff0c\u5e76\u4e14\u80fd\u591f\u66f4\u597d\u5730\u5904\u7406\u8fd9\u4e9b\u5de8\u578b\u5bf9\u8c61\u7684\u5206\u914d\u548c\u56de\u6536\uff0c\u907f\u514d\u5b83\u4eec\u88ab\u63d0\u524d\u63d0\u5347\u5230\u8001\u5e74\u4ee3\uff0c\u51cf\u5c11\u4e86\u5185\u5b58\u788e\u7247\u3002</li> <li>CMS\u5904\u7406\u5de8\u578b\u5bf9\u8c61\u65f6\u53ef\u80fd\u4f1a\u9047\u5230\u6311\u6218\uff0c\u4f8b\u5982\u5206\u914d\u5931\u8d25\u6216\u5bfc\u81f4\u8fc7\u591a\u7684Full GC\u3002</li> </ul> </li> <li> <p>\u5e76\u53d1\u548c\u5e76\u884c\u6027\uff1a</p> <ul> <li>\u4e24\u8005\u90fd\u6709\u5e76\u53d1\uff08\u4e0e\u5e94\u7528\u7ebf\u7a0b\u5e76\u884c\uff09\u548c\u5e76\u884c\uff08\u591a\u4e2aGC\u7ebf\u7a0b\u5e76\u884c\uff09\u9636\u6bb5\u3002</li> <li>G1\u7684\u5e76\u53d1\u6807\u8bb0\u9636\u6bb5\u4e0eCMS\u7c7b\u4f3c\uff0c\u4f46G1\u7684\u201c\u62f7\u8d1d-\u6574\u7406\u201d\u8fc7\u7a0b\u53ef\u4ee5\u5728\u591a\u6838CPU\u4e0a\u5e76\u884c\u6267\u884c\uff0c\u63d0\u9ad8\u4e86\u6548\u7387\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/G1%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8%E7%9B%B8%E6%AF%94%E4%BA%8ECMS%E6%9C%89%E5%93%AA%E4%BA%9B%E5%85%B3%E9%94%AE%E4%BC%98%E5%8A%BF%EF%BC%9F%E5%AE%83%E7%9A%84Region%E5%88%92%E5%88%86%E5%92%8CRSet%E8%AE%BE%E8%AE%A1%E8%B5%B7%E5%88%B0%E4%BA%86%E4%BB%80%E4%B9%88%E4%BD%9C%E7%94%A8%EF%BC%9F/#g1regionrset","title":"G1\u7684Region\u5212\u5206\u548cRSet\u8bbe\u8ba1\u7684\u4f5c\u7528","text":"<p>G1\u7684\u6838\u5fc3\u521b\u65b0\u5728\u4e8e\u5176\u72ec\u7279\u7684\u5806\u5185\u5b58\u5e03\u5c40\u2014\u2014Region\u5212\u5206\uff0c\u4ee5\u53ca\u4e3a\u4e86\u652f\u6301\u8fd9\u79cd\u5212\u5206\u800c\u5f15\u5165\u7684RSet\uff08Remembered Set\uff09\u8bbe\u8ba1\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/G1%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8%E7%9B%B8%E6%AF%94%E4%BA%8ECMS%E6%9C%89%E5%93%AA%E4%BA%9B%E5%85%B3%E9%94%AE%E4%BC%98%E5%8A%BF%EF%BC%9F%E5%AE%83%E7%9A%84Region%E5%88%92%E5%88%86%E5%92%8CRSet%E8%AE%BE%E8%AE%A1%E8%B5%B7%E5%88%B0%E4%BA%86%E4%BB%80%E4%B9%88%E4%BD%9C%E7%94%A8%EF%BC%9F/#region","title":"Region\u5212\u5206\u7684\u4f5c\u7528\uff1a","text":"<p>G1\u5c06\u6574\u4e2aJava\u5806\u5185\u5b58\u5212\u5206\u4e3a\u591a\u4e2a\u5927\u5c0f\u76f8\u7b49\u7684\u72ec\u7acb\u533a\u57df\uff08Region\uff09\uff0c\u6bcf\u4e2aRegion\u7684\u5927\u5c0f\u5728JVM\u542f\u52a8\u65f6\u786e\u5b9a\uff08\u901a\u5e38\u4e3a1MB\u523032MB\uff0c\u4e14\u662f2\u7684\u5e42\uff09\u3002\u8fd9\u4e9bRegion\u5728\u903b\u8f91\u4e0a\u53ef\u4ee5\u627f\u62c5\u4e0d\u540c\u7684\u89d2\u8272\uff1a</p> <ul> <li>\u7075\u6d3b\u7684\u5206\u4ee3\u7ba1\u7406\uff1a G1\u4e0d\u518d\u6709\u56fa\u5b9a\u5927\u5c0f\u7684\u5e74\u8f7b\u4ee3\u548c\u8001\u5e74\u4ee3\uff0c\u800c\u662f\u7531\u4e00\u7ec4Region\u52a8\u6001\u5730\u7ec4\u6210\u5e74\u8f7b\u4ee3\uff08Eden\u548cSurvivor\uff09\u548c\u8001\u5e74\u4ee3\u3002\u5e74\u8f7b\u4ee3\u7684\u5927\u5c0f\u4f1a\u6839\u636eG1\u7684GC\u60c5\u51b5\u52a8\u6001\u8c03\u6574\u3002</li> <li>\u589e\u91cf\u5f0fGC\uff08Incremental GC\uff09\uff1a \u8fd9\u662fRegion\u5212\u5206\u5e26\u6765\u7684\u6700\u91cd\u8981\u4f18\u52bf\u3002G1\u7684GC\u4e0d\u518d\u662f\u5bf9\u6574\u4e2a\u5806\u8fdb\u884c\u56de\u6536\uff0c\u800c\u662f\u9009\u62e9\u6027\u5730\u5bf9\u90e8\u5206Region\u8fdb\u884c\u56de\u6536\u3002\u5728\u4e00\u6b21GC\u6682\u505c\u4e2d\uff0cG1\u4f1a\u6839\u636e\u8bbe\u7f6e\u7684\u505c\u987f\u65f6\u95f4\u76ee\u6807\uff0c\u9009\u62e9\u56de\u6536\u4ef7\u503c\u6700\u9ad8\uff08\u5373\u5783\u573e\u6700\u591a\uff09\u7684Region\u8fdb\u884c\u6536\u96c6\u3002\u8fd9\u79cd\u201c\u5206\u800c\u6cbb\u4e4b\u201d\u7684\u7b56\u7565\u4f7f\u5f97\u6bcf\u6b21GC\u7684\u505c\u987f\u65f6\u95f4\u66f4\u77ed\u3001\u66f4\u53ef\u63a7\u3002</li> <li>\u5c40\u90e8\u6027\u539f\u7406\uff1a \u5c06\u5bf9\u8c61\u5206\u914d\u5230\u72ec\u7acb\u7684Region\u4e2d\uff0c\u6709\u52a9\u4e8e\u63d0\u9ad8\u7f13\u5b58\u7684\u5c40\u90e8\u6027\u3002</li> <li>\u7a7a\u95f4\u6574\u5408 (Compaction)\uff1a \u5f53\u4e00\u4e2aRegion\u88ab\u56de\u6536\u65f6\uff0cG1\u4f1a\u5c06\u5176\u4e2d\u5b58\u6d3b\u7684\u5bf9\u8c61\u590d\u5236\u5230\u53e6\u5916\u4e00\u4e2a\u6216\u591a\u4e2a\u7a7a\u95f2Region\u4e2d\uff0c\u4ece\u800c\u6709\u6548\u5730\u5b9e\u73b0\u4e86\u5185\u5b58\u6574\u7406\uff0c\u907f\u514d\u4e86\u788e\u7247\u95ee\u9898\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/G1%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8%E7%9B%B8%E6%AF%94%E4%BA%8ECMS%E6%9C%89%E5%93%AA%E4%BA%9B%E5%85%B3%E9%94%AE%E4%BC%98%E5%8A%BF%EF%BC%9F%E5%AE%83%E7%9A%84Region%E5%88%92%E5%88%86%E5%92%8CRSet%E8%AE%BE%E8%AE%A1%E8%B5%B7%E5%88%B0%E4%BA%86%E4%BB%80%E4%B9%88%E4%BD%9C%E7%94%A8%EF%BC%9F/#rsetremembered-set","title":"RSet\uff08Remembered Set\uff09\u8bbe\u8ba1\u7684\u4f5c\u7528\uff1a","text":"<p>\u7531\u4e8eG1\u662f\u589e\u91cf\u5f0f\u6536\u96c6\uff0c\u5b83\u5728GC\u67d0\u4e2aRegion\u65f6\uff0c\u4e0d\u80fd\u626b\u63cf\u6574\u4e2a\u5806\u6765\u67e5\u627e\u6307\u5411\u8be5Region\u4e2d\u5bf9\u8c61\u7684\u5f15\u7528\u3002RSet\u5c31\u662f\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u800c\u8bbe\u8ba1\u7684\u3002</p> <ul> <li>RSet\u7684\u5b9a\u4e49\uff1a \u6bcf\u4e2aRegion\u90fd\u7ef4\u62a4\u4e00\u4e2aRSet\u3002\u4e00\u4e2aRegion\u7684RSet\u8bb0\u5f55\u4e86\u4ece\u5806\u4e2d\u5176\u4ed6Region\u6307\u5411\u8be5Region\u7684\u6240\u6709\u5f15\u7528\u3002\u7b80\u5355\u6765\u8bf4\uff0cRSet\u662f\u7528\u6765\u8bb0\u5f55\u201c\u5916\u90e8\u6307\u5411\u5185\u90e8\u201d\u7684\u6307\u9488\u3002</li> <li>\u5982\u4f55\u7ef4\u62a4RSet\uff1a G1\u901a\u8fc7\u201c\u5199\u5c4f\u969c\u201d\uff08Write Barrier\uff09\u6280\u672f\u6765\u7ef4\u62a4RSet\u3002\u5f53\u5e94\u7528\u7a0b\u5e8f\u4fee\u6539\u4e86\u4e00\u4e2a\u5f15\u7528\uff0c\u4f8b\u5982<code>objectA.field = objectB</code>\u65f6\uff0c\u5199\u5c4f\u969c\u4f1a\u88ab\u89e6\u53d1\u3002\u5982\u679c<code>objectA</code>\u548c<code>objectB</code>\u4f4d\u4e8e\u4e0d\u540c\u7684Region\uff0c\u5e76\u4e14\u8fd9\u4e2a\u5f15\u7528\u662f\u4ece<code>objectA</code>\u7684Region\u6307\u5411<code>objectB</code>\u7684Region\uff0c\u90a3\u4e48\u5c31\u4f1a\u5728<code>objectB</code>\u7684RSet\u4e2d\u8bb0\u5f55\u8fd9\u4e2a\u5f15\u7528\u4fe1\u606f\u3002</li> <li>RSet\u5728GC\u4e2d\u7684\u4f5c\u7528\uff1a<ul> <li>\u7cbe\u786e\u7684\u8de8\u4ee3\u5f15\u7528\u626b\u63cf\uff1a \u5f53G1\u8fdb\u884c\u5783\u573e\u56de\u6536\u65f6\uff0c\u5b83\u53ea\u9700\u8981\u626b\u63cf\u88ab\u6536\u96c6Region\u5185\u90e8\u7684\u5f15\u7528\uff0c\u4ee5\u53ca\u8be5Region\u7684RSet\u4e2d\u6240\u8bb0\u5f55\u7684\u6765\u81ea\u5176\u4ed6Region\u7684\u5f15\u7528\u3002\u8fd9\u6837\uff0cGC\u7ebf\u7a0b\u5c31\u4e0d\u9700\u8981\u626b\u63cf\u6574\u4e2a\u5806\u6765\u627e\u5230\u6240\u6709\u6839\u5bf9\u8c61\uff0c\u5927\u5927\u7f29\u5c0f\u4e86\u626b\u63cf\u8303\u56f4\uff0c\u63d0\u9ad8\u4e86GC\u6548\u7387\u3002</li> <li>\u652f\u6301\u5e76\u53d1\u6807\u8bb0\uff1a RSet\u7684\u7ef4\u62a4\u662f\u5e76\u53d1\u8fdb\u884c\u7684\uff0c\u5b83\u5141\u8bb8G1\u5728\u5e94\u7528\u7ebf\u7a0b\u8fd0\u884c\u7684\u540c\u65f6\uff0c\u6536\u96c6\u5668\u7ebf\u7a0b\u80fd\u591f\u72ec\u7acb\u5730\u8fdb\u884c\u6807\u8bb0\u548c\u56de\u6536\uff0c\u800c\u4e0d\u9700\u8981\u957f\u65f6\u95f4\u7684STW\u3002</li> <li>\u5b9e\u73b0\u589e\u91cf\u5f0f\u6536\u96c6\u7684\u5173\u952e\uff1a RSet\u4f7f\u5f97G1\u53ef\u4ee5\u72ec\u7acb\u5730\u6536\u96c6\u90e8\u5206Region\uff0c\u800c\u65e0\u9700\u8003\u8651\u6574\u4e2a\u5806\u7684\u8fde\u901a\u6027\uff0c\u8fd9\u662f\u5b9e\u73b0G1\u201c\u589e\u91cf\u5f0f\u201d\u548c\u201c\u53ef\u9884\u6d4b\u505c\u987f\u201d\u76ee\u6807\u7684\u5173\u952e\u57fa\u7840\u3002</li> </ul> </li> </ul> <p>\u603b\u7ed3\u6765\u8bf4\uff0cG1\u901a\u8fc7Region\u5212\u5206\u5b9e\u73b0\u4e86\u5806\u7684\u903b\u8f91\u5206\u5757\uff0c\u652f\u6301\u589e\u91cf\u5f0f\u56de\u6536\u548c\u5185\u5b58\u6574\u7406\uff1b\u800cRSet\u8bbe\u8ba1\u5219\u89e3\u51b3\u4e86\u589e\u91cf\u5f0f\u56de\u6536\u4e2d\u8de8Region\u5f15\u7528\u7684\u8ffd\u8e2a\u95ee\u9898\uff0c\u4f7f\u5f97G1\u80fd\u591f\u5728\u4e0d\u626b\u63cf\u6574\u4e2a\u5806\u7684\u60c5\u51b5\u4e0b\uff0c\u9ad8\u6548\u3001\u51c6\u786e\u5730\u6536\u96c6\u6307\u5b9aRegion\u7684\u5783\u573e\uff0c\u4ece\u800c\u63d0\u4f9b\u4e86\u6bd4CMS\u66f4\u4f18\u8d8a\u7684\u53ef\u9884\u6d4b\u505c\u987f\u65f6\u95f4\u548c\u66f4\u4f4e\u7684\u5185\u5b58\u788e\u7247\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%20gc%20roots%E6%9C%89%E4%BB%80%E4%B9%88/","title":"JVM gc roots\u6709\u4ec0\u4e48","text":"<p>\u5728Java\u865a\u62df\u673a\uff08JVM\uff09\u4e2d\uff0cGC Roots\uff08\u5783\u573e\u56de\u6536\u6839\uff09\u662f\u5783\u573e\u6536\u96c6\u5668\uff08Garbage Collector\uff09\u7528\u6765\u5224\u65ad\u4e00\u4e2a\u5bf9\u8c61\u662f\u5426\u5b58\u6d3b\u7684\u8d77\u59cb\u70b9\u96c6\u5408\u3002</p> <p>JVM\u7684\u5783\u573e\u56de\u6536\u91c7\u7528\u7684\u662f\u201c\u53ef\u8fbe\u6027\u5206\u6790\u201d\uff08Reachability Analysis\uff09\u7b97\u6cd5\u3002\u8fd9\u4e2a\u7b97\u6cd5\u7684\u57fa\u672c\u601d\u8def\u662f\uff1a\u4ece\u4e00\u7cfb\u5217\u88ab\u79f0\u4e3a\u201cGC Roots\u201d\u7684\u6839\u5bf9\u8c61\u5f00\u59cb\uff0c\u5411\u4e0b\u641c\u7d22\uff0c\u6240\u6709\u80fd\u591f\u4eceGC Roots\u76f4\u63a5\u6216\u95f4\u63a5\u8bbf\u95ee\u5230\u7684\u5bf9\u8c61\u90fd\u88ab\u8ba4\u4e3a\u662f\u201c\u5b58\u6d3b\u201d\u7684\uff0c\u53cd\u4e4b\uff0c\u5982\u679c\u4e00\u4e2a\u5bf9\u8c61\u4e0d\u80fd\u4ece\u4efb\u4f55\u4e00\u4e2aGC Root\u5230\u8fbe\uff0c\u90a3\u4e48\u5b83\u5c31\u88ab\u5224\u5b9a\u4e3a\u201c\u5783\u573e\u201d\uff0c\u53ef\u4ee5\u88ab\u56de\u6536\u3002</p> <p>\u4f60\u53ef\u4ee5\u628a\u6574\u4e2aJVM\u5185\u5b58\u4e2d\u7684\u5bf9\u8c61\u60f3\u8c61\u6210\u4e00\u4e2a\u5de8\u5927\u7684\u5173\u7cfb\u7f51\u7edc\u3002GC Roots\u5c31\u662f\u8fd9\u4e2a\u7f51\u7edc\u4e2d\u51e0\u4e2a\u201c\u6c38\u8fdc\u4e0d\u4f1a\u88ab\u62d4\u6389\u201d\u7684\u521d\u59cb\u8282\u70b9\u3002\u5783\u573e\u56de\u6536\u7684\u8fc7\u7a0b\uff0c\u5c31\u662f\u4ece\u8fd9\u4e9b\u521d\u59cb\u8282\u70b9\u51fa\u53d1\uff0c\u6cbf\u7740\u5f15\u7528\u94fe\uff08\u5c31\u50cf\u7f51\u7edc\u4e2d\u7684\u8fde\u63a5\u7ebf\uff09\uff0c\u628a\u6240\u6709\u80fd\u6478\u5230\u7684\u8282\u70b9\u90fd\u6807\u8bb0\u4e3a\u201c\u5b58\u6d3b\u201d\u3002\u90a3\u4e9b\u6700\u7ec8\u6ca1\u6709\u88ab\u6807\u8bb0\u5230\u7684\uff0c\u5c31\u662f\u4e0e\u521d\u59cb\u8282\u70b9\u201c\u5931\u8054\u201d\u7684\uff0c\u4e5f\u5c31\u662f\u53ef\u4ee5\u88ab\u6e05\u7406\u7684\u5783\u573e\u3002</p> <p>\u90a3\u4e48\uff0c\u5177\u4f53\u4f5c\u4e3aGC Roots\u7684\u5bf9\u8c61\u4e3b\u8981\u5305\u62ec\u4ee5\u4e0b\u51e0\u79cd\uff1a</p> <ol> <li> <p>\u865a\u62df\u673a\u6808\uff08\u6808\u5e27\u4e2d\u7684\u672c\u5730\u53d8\u91cf\u8868\uff09\u4e2d\u5f15\u7528\u7684\u5bf9\u8c61</p> <ul> <li>\u89e3\u91ca\uff1a\u5f53\u524d\u6b63\u5728\u6267\u884c\u7684\u65b9\u6cd5\u4e2d\u7684\u6240\u6709\u672c\u5730\u53d8\u91cf\u3002\u5f53\u4e00\u4e2a\u65b9\u6cd5\u88ab\u8c03\u7528\u65f6\uff0c\u5b83\u4f1a\u521b\u5efa\u4e00\u4e2a\u6808\u5e27\uff0c\u6808\u5e27\u4e2d\u5305\u542b\u4e86\u65b9\u6cd5\u7684\u53c2\u6570\u3001\u5c40\u90e8\u53d8\u91cf\u7b49\u3002\u5982\u679c\u4e00\u4e2a\u5c40\u90e8\u53d8\u91cf\u5f15\u7528\u4e86\u4e00\u4e2a\u5806\u4e2d\u7684\u5bf9\u8c61\uff0c\u90a3\u4e48\u8fd9\u4e2a\u5bf9\u8c61\u5c31\u662f\u5b58\u6d3b\u7684\uff0c\u4e0d\u80fd\u88ab\u56de\u6536\u3002</li> </ul> </li> <li> <p>\u65b9\u6cd5\u533a\u4e2d\u7c7b\u9759\u6001\u5c5e\u6027\u5f15\u7528\u7684\u5bf9\u8c61</p> <ul> <li>\u89e3\u91ca\uff1a\u7531\u7c7b\u7684\u9759\u6001\u5b57\u6bb5\uff08static variables\uff09\u5f15\u7528\u7684\u5bf9\u8c61\u3002\u8fd9\u4e9b\u53d8\u91cf\u5c5e\u4e8e\u7c7b\u672c\u8eab\uff0c\u800c\u4e0d\u662f\u7c7b\u7684\u67d0\u4e2a\u5b9e\u4f8b\uff0c\u5b83\u4eec\u7684\u751f\u547d\u5468\u671f\u4e0e\u7c7b\u52a0\u8f7d\u7684\u751f\u547d\u5468\u671f\u76f8\u540c\u3002\u53ea\u8981\u7c7b\u6ca1\u6709\u88ab\u5378\u8f7d\uff0c\u8fd9\u4e9b\u9759\u6001\u53d8\u91cf\u5f15\u7528\u7684\u5bf9\u8c61\u5c31\u4f1a\u4e00\u76f4\u5b58\u6d3b\u3002</li> </ul> </li> <li> <p>\u65b9\u6cd5\u533a\u4e2d\u5e38\u91cf\u5f15\u7528\u7684\u5bf9\u8c61</p> <ul> <li>\u89e3\u91ca\uff1a\u4f8b\u5982\uff0c\u5b57\u7b26\u4e32\u5e38\u91cf\u6c60\uff08String Table\uff09\u91cc\u7684\u5f15\u7528\u3002\u5982\u679c\u4e00\u4e2a\u5b57\u7b26\u4e32\u5e38\u91cf\u88ab\u5f15\u7528\uff0c\u90a3\u4e48\u5b83\u80cc\u540e\u7684String\u5bf9\u8c61\u4e5f\u662f\u5b58\u6d3b\u7684\u3002</li> </ul> </li> <li> <p>\u672c\u5730\u65b9\u6cd5\u6808\u4e2dJNI\uff08\u5373\u901a\u5e38\u6240\u8bf4\u7684Native\u65b9\u6cd5\uff09\u5f15\u7528\u7684\u5bf9\u8c61</p> <ul> <li>\u89e3\u91ca\uff1a\u5f53Java\u4ee3\u7801\u901a\u8fc7JNI\uff08Java Native Interface\uff09\u8c03\u7528\u672c\u5730\u4ee3\u7801\uff08\u5982C\u6216C++\u4ee3\u7801\uff09\u65f6\uff0c\u672c\u5730\u4ee3\u7801\u53ef\u80fd\u4f1a\u521b\u5efa\u6216\u6301\u6709\u5bf9Java\u5bf9\u8c61\u7684\u5f15\u7528\u3002\u4e3a\u4e86\u4fdd\u8bc1\u672c\u5730\u4ee3\u7801\u7684\u6b63\u5e38\u5de5\u4f5c\uff0c\u8fd9\u4e9b\u88abJNI\u5f15\u7528\u7684Java\u5bf9\u8c61\u4e5f\u5fc5\u987b\u88ab\u89c6\u4e3a\u5b58\u6d3b\u5bf9\u8c61\uff0c\u4e0d\u80fd\u88ab\u56de\u6536\u3002</li> </ul> </li> <li> <p>Java\u865a\u62df\u673a\u5185\u90e8\u7684\u5f15\u7528</p> <ul> <li>\u89e3\u91ca\uff1a\u8fd9\u4e9b\u662fJVM\u81ea\u8eab\u8fd0\u884c\u6240\u5fc5\u9700\u7684\u5bf9\u8c61\uff0c\u6bd4\u5982\u4e00\u4e9b\u6838\u5fc3\u7684\u7c7b\u52a0\u8f7d\u5668\u3001\u7cfb\u7edf\u7c7b\u3001\u5f02\u5e38\u5bf9\u8c61\u7b49\u3002\u5b83\u4eec\u662fJVM\u6b63\u5e38\u5de5\u4f5c\u7684\u57fa\u7840\uff0c\u663e\u7136\u4e0d\u80fd\u88ab\u56de\u6536\u3002</li> </ul> </li> <li> <p>\u88ab\u540c\u6b65\u9501\uff08synchronized\u5173\u952e\u5b57\uff09\u6301\u6709\u7684\u5bf9\u8c61</p> <ul> <li>\u89e3\u91ca\uff1a\u5728\u540c\u6b65\u4ee3\u7801\u5757\u4e2d\uff0c\u88ab\u7528\u4f5c\u9501\u7684\u5bf9\u8c61\uff08\u5373<code>synchronized(obj)</code>\u4e2d\u7684<code>obj</code>\uff09\u5728\u9501\u88ab\u6301\u6709\u7684\u671f\u95f4\u662f\u4e0d\u80fd\u88ab\u56de\u6536\u7684\uff0c\u5426\u5219\u53ef\u80fd\u5bfc\u81f4\u591a\u7ebf\u7a0b\u540c\u6b65\u95ee\u9898\u3002</li> </ul> </li> <li> <p>\u53cd\u6620Java\u865a\u62df\u673a\u5185\u90e8\u60c5\u51b5\u7684JMXBean\u3001JVMTI\u4e2d\u6ce8\u518c\u7684\u56de\u8c03\u3001\u672c\u5730\u4ee3\u7801\u7f13\u5b58\u7b49\u3002</p> <ul> <li>\u89e3\u91ca\uff1a\u8fd9\u662f\u4e00\u4e9b\u66f4\u504f\u5411\u5e95\u5c42\u7684\u3001\u7528\u4e8eJVM\u76d1\u63a7\u548c\u8c03\u8bd5\u7684\u5185\u90e8\u5bf9\u8c61\uff0c\u5b83\u4eec\u4e5f\u9700\u8981\u4f5c\u4e3aGC Roots\u6765\u4fdd\u8bc1\u81ea\u8eab\u7684\u5b58\u6d3b\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E4%B8%AD%E5%86%85%E5%AD%98%E6%98%AF%E5%A6%82%E4%BD%95%E5%88%86%E9%85%8D%E7%9A%84/","title":"JVM\u4e2d\u5185\u5b58\u662f\u5982\u4f55\u5206\u914d\u7684","text":"<p>JVM\u5728\u6267\u884cJava\u7a0b\u5e8f\u65f6\uff0c\u4f1a\u628a\u5b83\u7ba1\u7406\u7684\u5185\u5b58\u5212\u5206\u4e3a\u82e5\u5e72\u4e2a\u4e0d\u540c\u7684\u6570\u636e\u533a\u57df\u3002\u8fd9\u4e9b\u533a\u57df\u53ef\u4ee5\u5206\u4e3a\u4e24\u5927\u7c7b\uff1a\u7ebf\u7a0b\u5171\u4eab\u533a\u57df\u548c\u7ebf\u7a0b\u79c1\u6709\u533a\u57df\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E4%B8%AD%E5%86%85%E5%AD%98%E6%98%AF%E5%A6%82%E4%BD%95%E5%88%86%E9%85%8D%E7%9A%84/#_1","title":"\u7ebf\u7a0b\u5171\u4eab\u533a\u57df (\u6240\u6709\u7ebf\u7a0b\u5171\u4eab)","text":"<ol> <li> <p>Java\u5806 (Java Heap):     \u8fd9\u662fJVM\u7ba1\u7406\u7684\u5185\u5b58\u4e2d\u6700\u5927\u7684\u4e00\u5757\uff0c\u4e5f\u662f\u6211\u4eec\u6700\u5173\u5fc3\u7684\u533a\u57df\u3002\u5b83\u7684\u552f\u4e00\u76ee\u7684\u5c31\u662f\u5b58\u653e\u5bf9\u8c61\u5b9e\u4f8b\u548c\u6570\u7ec4\u3002\u51e0\u4e4e\u6240\u6709\u7684\u5bf9\u8c61\u5b9e\u4f8b\u90fd\u5728\u8fd9\u91cc\u5206\u914d\u5185\u5b58\u3002Java\u5806\u662f\u5783\u573e\u6536\u96c6\u5668\uff08GC\uff09\u7ba1\u7406\u7684\u4e3b\u8981\u533a\u57df\u3002</p> </li> <li> <p>\u65b9\u6cd5\u533a (Method Area):     \u5b83\u7528\u4e8e\u5b58\u50a8\u5df2\u88ab\u865a\u62df\u673a\u52a0\u8f7d\u7684\u7c7b\u4fe1\u606f\u3001\u5e38\u91cf\u3001\u9759\u6001\u53d8\u91cf\u3001\u5373\u65f6\u7f16\u8bd1\u5668\uff08JIT\uff09\u7f16\u8bd1\u540e\u7684\u4ee3\u7801\u7b49\u6570\u636e\u3002\u5728JDK 1.8\u53ca\u4ee5\u540e\uff0c\u65b9\u6cd5\u533a\u7684\u5b9e\u73b0\u4ece\u6c38\u4e45\u4ee3\uff08PermGen\uff09\u53d8\u4e3a\u4e86\u5143\u7a7a\u95f4\uff08Metaspace\uff09\uff0c\u5143\u7a7a\u95f4\u4f7f\u7528\u7684\u662f\u672c\u5730\u5185\u5b58\uff0c\u800c\u4e0d\u662fJVM\u5806\u5185\u5b58\u3002</p> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E4%B8%AD%E5%86%85%E5%AD%98%E6%98%AF%E5%A6%82%E4%BD%95%E5%88%86%E9%85%8D%E7%9A%84/#_2","title":"\u7ebf\u7a0b\u79c1\u6709\u533a\u57df (\u6bcf\u4e2a\u7ebf\u7a0b\u72ec\u6709\u4e00\u4efd)","text":"<ol> <li> <p>\u865a\u62df\u673a\u6808 (JVM Stack):     \u6bcf\u4e2a\u7ebf\u7a0b\u5728\u521b\u5efa\u65f6\u90fd\u4f1a\u521b\u5efa\u4e00\u4e2a\u865a\u62df\u673a\u6808\u3002\u6bcf\u5f53\u4e00\u4e2a\u65b9\u6cd5\u88ab\u8c03\u7528\uff0c\u5c31\u4f1a\u521b\u5efa\u4e00\u4e2a\u201c\u6808\u5e27\u201d\uff08Stack Frame\uff09\u5e76\u538b\u5165\u6808\u4e2d\uff0c\u7528\u4e8e\u5b58\u50a8\u5c40\u90e8\u53d8\u91cf\u8868\u3001\u64cd\u4f5c\u6570\u6808\u3001\u52a8\u6001\u94fe\u63a5\u3001\u65b9\u6cd5\u51fa\u53e3\u7b49\u4fe1\u606f\u3002\u65b9\u6cd5\u8c03\u7528\u7ed3\u675f\uff0c\u6808\u5e27\u5c31\u51fa\u6808\u3002</p> </li> <li> <p>\u672c\u5730\u65b9\u6cd5\u6808 (Native Method Stack):     \u4e0e\u865a\u62df\u673a\u6808\u7c7b\u4f3c\uff0c\u4f46\u5b83\u662f\u4e3a\u865a\u62df\u673a\u4f7f\u7528\u5230\u7684\u672c\u5730\uff08Native\uff09\u65b9\u6cd5\u670d\u52a1\u7684\u3002</p> </li> <li> <p>\u7a0b\u5e8f\u8ba1\u6570\u5668 (PC Register):     \u4e00\u5757\u8f83\u5c0f\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u53ef\u4ee5\u770b\u4f5c\u662f\u5f53\u524d\u7ebf\u7a0b\u6240\u6267\u884c\u7684\u5b57\u8282\u7801\u7684\u884c\u53f7\u6307\u793a\u5668\u3002\u5b83\u662f\u552f\u4e00\u4e00\u4e2a\u5728Java\u865a\u62df\u673a\u89c4\u8303\u4e2d\u6ca1\u6709\u89c4\u5b9a\u4efb\u4f55<code>OutOfMemoryError</code>\u60c5\u51b5\u7684\u533a\u57df\u3002</p> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E4%B8%AD%E5%86%85%E5%AD%98%E6%98%AF%E5%A6%82%E4%BD%95%E5%88%86%E9%85%8D%E7%9A%84/#java","title":"\u6838\u5fc3\uff1aJava\u5806\u4e2d\u7684\u5185\u5b58\u5206\u914d","text":"<p>\u73b0\u5728\u6211\u4eec\u6765\u805a\u7126\u4e8e\u5bf9\u8c61\u5185\u5b58\u5206\u914d\u7684\u6838\u5fc3\u533a\u57df\u2014\u2014Java\u5806\u3002\u73b0\u4ee3\u4e3b\u6d41\u7684JVM\uff08\u5982HotSpot\uff09\u90fd\u91c7\u7528\u5206\u4ee3\u6536\u96c6\u7b97\u6cd5\uff0c\u56e0\u6b64\u5806\u5185\u5b58\u7684\u5206\u914d\u662f\u57fa\u4e8e\u8fd9\u4e2a\u7406\u8bba\u6765\u8fdb\u884c\u7684\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E4%B8%AD%E5%86%85%E5%AD%98%E6%98%AF%E5%A6%82%E4%BD%95%E5%88%86%E9%85%8D%E7%9A%84/#_3","title":"\u5206\u4ee3\u7b56\u7565","text":"<p>Java\u5806\u88ab\u5212\u5206\u4e3a\u4e24\u4e2a\u4e3b\u8981\u90e8\u5206\uff1a</p> <ul> <li>\u65b0\u751f\u4ee3 (Young Generation)</li> <li>\u8001\u5e74\u4ee3 (Old Generation)</li> </ul> <p>\u65b0\u751f\u4ee3\u53c8\u88ab\u7ec6\u5206\u4e3a\uff1a *   \u4e00\u4e2a\u4f0a\u7538\u56ed\u533a (Eden Space) *   \u4e24\u4e2a\u5e78\u5b58\u8005\u533a (Survivor Space)\uff0c\u901a\u5e38\u79f0\u4e3aS0\u548cS1\u3002</p> <p>\u8fd9\u79cd\u5212\u5206\u57fa\u4e8e\u4e00\u4e2a\u91cd\u8981\u7684\u89c2\u5bdf\uff1a\u7edd\u5927\u591a\u6570Java\u5bf9\u8c61\u90fd\u662f\u201c\u671d\u751f\u5915\u6b7b\u201d\u7684\uff0c\u751f\u547d\u5468\u671f\u5f88\u77ed\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E4%B8%AD%E5%86%85%E5%AD%98%E6%98%AF%E5%A6%82%E4%BD%95%E5%88%86%E9%85%8D%E7%9A%84/#_4","title":"\u5bf9\u8c61\u7684\u5206\u914d\u4e0e\u664b\u5347\u6d41\u7a0b","text":"<p>\u4e00\u4e2a\u5bf9\u8c61\u7684\u5185\u5b58\u5206\u914d\u901a\u5e38\u4f1a\u7ecf\u5386\u4ee5\u4e0b\u65c5\u7a0b\uff1a</p> <ol> <li> <p>\u8bde\u751f\u4e8e\u4f0a\u7538\u56ed (Eden)     \u7edd\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u65b0\u521b\u5efa\u7684\u5bf9\u8c61\u4f1a\u88ab\u9996\u5148\u5206\u914d\u5728\u65b0\u751f\u4ee3\u7684Eden\u533a\u3002\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u9ad8\u9891\u7684\u64cd\u4f5c\u3002</p> </li> <li> <p>\u4f0a\u7538\u56ed\u6ee1\uff0c\u89e6\u53d1Minor GC     \u5f53Eden\u533a\u6ca1\u6709\u8db3\u591f\u7a7a\u95f4\u8fdb\u884c\u4e0b\u4e00\u6b21\u5206\u914d\u65f6\uff0c\u865a\u62df\u673a\u4f1a\u89e6\u53d1\u4e00\u6b21\u65b0\u751f\u4ee3\u7684\u5783\u573e\u6536\u96c6\uff0c\u5373Minor GC\u3002</p> <ul> <li>\u5728GC\u671f\u95f4\uff0cEden\u533a\u4e2d\u8fd8\u5b58\u6d3b\u7740\u7684\u5bf9\u8c61\uff0c\u4f1a\u88ab\u590d\u5236\u5230\u5176\u4e2d\u4e00\u4e2a\u7a7a\u7684\u5e78\u5b58\u8005\u533a\uff08\u6bd4\u5982S0\uff09\u3002</li> <li>\u540c\u65f6\uff0c\u5bf9\u8c61\u7684\u201c\u5206\u4ee3\u5e74\u9f84\u201d\u4f1a\u52a01\u3002</li> <li>GC\u5b8c\u6210\u540e\uff0cEden\u533a\u88ab\u6e05\u7a7a\u3002</li> </ul> </li> <li> <p>\u5728\u5e78\u5b58\u8005\u533a\u4e4b\u95f4\u201c\u5012\u817e\u201d     \u5f53Eden\u533a\u518d\u6b21\u88ab\u586b\u6ee1\uff0c\u53c8\u4e00\u6b21\u89e6\u53d1Minor GC\u65f6\uff1a</p> <ul> <li>GC\u4f1a\u626b\u63cfEden\u533a\u548c\u5f53\u524d\u6b63\u5728\u4f7f\u7528\u7684\u5e78\u5b58\u8005\u533a\uff08\u6bd4\u5982S0\uff09\u3002</li> <li>\u5c06\u6240\u6709\u5b58\u6d3b\u7684\u5bf9\u8c61\uff0c\u590d\u5236\u5230\u53e6\u4e00\u4e2a\u7a7a\u7684\u5e78\u5b58\u8005\u533a\uff08S1\uff09\u3002</li> <li>\u8fd9\u4e9b\u88ab\u590d\u5236\u7684\u5bf9\u8c61\u7684\u5e74\u9f84\u518d\u6b21\u52a01\u3002</li> <li>GC\u5b8c\u6210\u540e\uff0cEden\u533a\u548cS0\u533a\u90fd\u88ab\u6e05\u7a7a\u3002 \u6b64\u540e\uff0cS0\u548cS1\u7684\u89d2\u8272\u4f1a\u4e92\u6362\uff0c\u5982\u6b64\u5faa\u73af\u5f80\u590d\u3002</li> </ul> </li> <li> <p>\u664b\u5347\u5230\u8001\u5e74\u4ee3 (Promotion)     \u4e00\u4e2a\u5bf9\u8c61\u4e0d\u4f1a\u6c38\u8fdc\u5728\u65b0\u751f\u4ee3\u505c\u7559\u3002\u5f53\u5b83\u7684\u5206\u4ee3\u5e74\u9f84\u8fbe\u5230\u4e00\u4e2a\u9608\u503c\uff08\u9ed8\u8ba4\u662f15\uff09\u65f6\uff0c\u5b83\u5c31\u4f1a\u5728\u4e0b\u4e00\u6b21Minor GC\u65f6\u88ab\u201c\u664b\u5347\u201d\u5230\u8001\u5e74\u4ee3\u3002</p> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E4%B8%AD%E5%86%85%E5%AD%98%E6%98%AF%E5%A6%82%E4%BD%95%E5%88%86%E9%85%8D%E7%9A%84/#_5","title":"\u7279\u6b8a\u60c5\u51b5","text":"<ul> <li>\u5927\u5bf9\u8c61\u76f4\u63a5\u8fdb\u5165\u8001\u5e74\u4ee3\uff1a\u5982\u679c\u4e00\u4e2a\u5bf9\u8c61\u975e\u5e38\u5927\uff08\u6bd4\u5982\u4e00\u4e2a\u5de8\u5927\u7684\u6570\u7ec4\uff09\uff0c\u9700\u8981\u5927\u91cf\u8fde\u7eed\u7684\u5185\u5b58\u7a7a\u95f4\uff0cJVM\u4f1a\u9009\u62e9\u8ba9\u5b83\u76f4\u63a5\u5728\u8001\u5e74\u4ee3\u5206\u914d\u3002\u8fd9\u6837\u505a\u662f\u4e3a\u4e86\u907f\u514d\u8fd9\u4e2a\u5927\u5bf9\u8c61\u5728\u65b0\u751f\u4ee3\u7684Eden\u533a\u548c\u4e24\u4e2aSurvivor\u533a\u4e4b\u95f4\u8fdb\u884c\u5927\u91cf\u7684\u590d\u5236\uff0c\u8fd9\u4f1a\u5e26\u6765\u5f88\u9ad8\u7684\u6027\u80fd\u5f00\u9500\u3002</li> <li>\u5206\u914d\u5e76\u53d1\u5904\u7406 - TLAB\uff1a\u4e3a\u4e86\u63d0\u9ad8\u5bf9\u8c61\u5206\u914d\u7684\u6548\u7387\uff0c\u7279\u522b\u662f\u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e0b\uff0cJVM\u4f7f\u7528\u4e86TLAB\uff08Thread Local Allocation Buffer\uff09\u6280\u672f\u3002\u5373\u4e3a\u6bcf\u4e2a\u7ebf\u7a0b\u5728Eden\u533a\u9884\u7559\u4e00\u5c0f\u5757\u79c1\u6709\u7f13\u51b2\u533a\u57df\u3002\u7ebf\u7a0b\u521b\u5efa\u65b0\u5bf9\u8c61\u65f6\uff0c\u9996\u5148\u5728\u81ea\u5df1\u7684TLAB\u4e2d\u5206\u914d\uff0c\u907f\u514d\u4e86\u591a\u7ebf\u7a0b\u7ade\u4e89\u5806\u5185\u5b58\u65f6\u9700\u8981\u52a0\u9501\u7684\u5f00\u9500\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E4%B8%AD%E5%86%85%E5%AD%98%E6%98%AF%E5%A6%82%E4%BD%95%E5%88%86%E9%85%8D%E7%9A%84/#_6","title":"\u6808\u4e2d\u7684\u5185\u5b58\u5206\u914d","text":"<p>\u4e0e\u5806\u4e0d\u540c\uff0c\u6808\u7684\u5185\u5b58\u5206\u914d\u662f\u9ad8\u5ea6\u786e\u5b9a\u7684\u3002\u5f53\u4e00\u4e2a\u65b9\u6cd5\u88ab\u8c03\u7528\u65f6\uff0c\u4e00\u4e2a\u6808\u5e27\u88ab\u521b\u5efa\u5e76\u538b\u5165\u6808\uff1b\u5f53\u65b9\u6cd5\u8fd4\u56de\u65f6\uff0c\u6808\u5e27\u88ab\u5f39\u51fa\u5e76\u9500\u6bc1\u3002\u6808\u5e27\u4e2d\u7528\u4e8e\u5b58\u653e\u5c40\u90e8\u53d8\u91cf\u7684\u7a7a\u95f4\uff0c\u5728\u7f16\u8bd1\u671f\u95f4\u5c31\u5df2\u7ecf\u786e\u5b9a\u5927\u5c0f\u3002\u8fd9\u79cd\u5206\u914d\u548c\u56de\u6536\u901f\u5ea6\u975e\u5e38\u5feb\uff0c\u4e0d\u6d89\u53ca\u590d\u6742\u7684GC\u8fc7\u7a0b\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E4%B8%AD%E9%94%81%E5%8D%87%E7%BA%A7%E7%9A%84%E6%B5%81%E7%A8%8B%E6%98%AF%E4%BB%80%E4%B9%88/","title":"JVM\u4e2d\u9501\u5347\u7ea7\u7684\u6d41\u7a0b\u662f\u4ec0\u4e48","text":""},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E4%B8%AD%E9%94%81%E5%8D%87%E7%BA%A7%E7%9A%84%E6%B5%81%E7%A8%8B%E6%98%AF%E4%BB%80%E4%B9%88/#no-lock","title":"\u7b2c\u4e00\u9636\u6bb5\uff1a\u65e0\u9501\u72b6\u6001 (No Lock)","text":"<p>\u4e00\u4e2aJava\u5bf9\u8c61\u521a\u88ab\u521b\u5efa\u65f6\uff0c\u5b83\u4e0d\u5305\u542b\u4efb\u4f55\u9501\u4fe1\u606f\uff0c\u5176\u5bf9\u8c61\u5934\u4e2d\u7684\u9501\u6807\u5fd7\u4f4d\u662f<code>01</code>\uff0c\u79f0\u4e4b\u4e3a\u65e0\u9501\u72b6\u6001\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E4%B8%AD%E9%94%81%E5%8D%87%E7%BA%A7%E7%9A%84%E6%B5%81%E7%A8%8B%E6%98%AF%E4%BB%80%E4%B9%88/#biased-lock","title":"\u7b2c\u4e8c\u9636\u6bb5\uff1a\u504f\u5411\u9501 (Biased Lock)","text":""},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E4%B8%AD%E9%94%81%E5%8D%87%E7%BA%A7%E7%9A%84%E6%B5%81%E7%A8%8B%E6%98%AF%E4%BB%80%E4%B9%88/#1","title":"1. \u5347\u7ea7\u65f6\u673a","text":"<p>\u5f53\u7b2c\u4e00\u4e2a\u7ebf\u7a0b\u5c1d\u8bd5\u83b7\u53d6\u8fd9\u4e2a\u5bf9\u8c61\u7684\u9501\u65f6\uff0cJVM\u5e76\u4e0d\u4f1a\u76f4\u63a5\u4e0a\u91cd\u91cf\u7ea7\u9501\uff0c\u800c\u662f\u4f1a\u5148\u5c06\u9501\u201c\u504f\u5411\u201d\u7ed9\u8fd9\u4e2a\u7ebf\u7a0b\u3002\u8fd9\u662f\u57fa\u4e8e\u4e00\u4e2a\u7ecf\u9a8c\u5047\u8bbe\uff1a\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u9501\u4e0d\u4ec5\u4e0d\u5b58\u5728\u591a\u7ebf\u7a0b\u7ade\u4e89\uff0c\u800c\u4e14\u603b\u662f\u7531\u540c\u4e00\u4e2a\u7ebf\u7a0b\u591a\u6b21\u83b7\u5f97\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E4%B8%AD%E9%94%81%E5%8D%87%E7%BA%A7%E7%9A%84%E6%B5%81%E7%A8%8B%E6%98%AF%E4%BB%80%E4%B9%88/#2","title":"2. \u5de5\u4f5c\u539f\u7406","text":"<ul> <li> <p>\u52a0\u9501\u8fc7\u7a0b\uff1a\u7ebf\u7a0b\u9996\u6b21\u83b7\u53d6\u9501\u65f6\uff0cJVM\u4f1a\u901a\u8fc7CAS\uff08Compare-And-Swap\uff09\u64cd\u4f5c\uff0c\u5c1d\u8bd5\u5c06\u8be5\u7ebf\u7a0b\u7684ID\u8bb0\u5f55\u5728\u5bf9\u8c61\u5934\uff08Mark Word\uff09\u4e2d\uff0c\u540c\u65f6\u5c06\u9501\u6807\u5fd7\u4f4d\u66f4\u65b0\uff0c\u72b6\u6001\u4f4d\u53d8\u4e3a\u504f\u5411\u9501\u72b6\u6001\u3002</p> </li> <li> <p>\u540e\u7eed\u8bbf\u95ee\uff1a\u5f53\u8fd9\u4e2a\u6301\u6709\u504f\u5411\u9501\u7684\u7ebf\u7a0b\u518d\u6b21\u8bf7\u6c42\u540c\u4e00\u4e2a\u9501\u65f6\uff0c\u5b83\u53ea\u9700\u8981\u68c0\u67e5\u5bf9\u8c61\u5934\u4e2d\u8bb0\u5f55\u7684\u7ebf\u7a0bID\u662f\u5426\u662f\u81ea\u5df1\u3002\u5982\u679c\u662f\uff0c\u5b83\u5c31\u53ef\u4ee5\u76f4\u63a5\u8fdb\u5165\u540c\u6b65\u4ee3\u7801\u5757\uff0c\u65e0\u9700\u4efb\u4f55\u989d\u5916\u7684\u540c\u6b65\u64cd\u4f5c\uff0c\u8fdeCAS\u90fd\u4e0d\u9700\u8981\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u7684\u5f00\u9500\u6781\u4f4e\u3002</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E4%B8%AD%E9%94%81%E5%8D%87%E7%BA%A7%E7%9A%84%E6%B5%81%E7%A8%8B%E6%98%AF%E4%BB%80%E4%B9%88/#3","title":"3. \u9501\u7684\u64a4\u9500\u4e0e\u5347\u7ea7","text":"<p>\u504f\u5411\u9501\u53ea\u6709\u5728\u51fa\u73b0\u5176\u4ed6\u7ebf\u7a0b\u5c1d\u8bd5\u7ade\u4e89\u65f6\u624d\u4f1a\u88ab\u64a4\u9500\u3002</p> <ul> <li> <p>\u5f53\u53e6\u4e00\u4e2a\u7ebf\u7a0b\uff08\u7ebf\u7a0bB\uff09\u5c1d\u8bd5\u83b7\u53d6\u8fd9\u4e2a\u5df2\u88ab\u7ebf\u7a0bA\u6301\u6709\u7684\u504f\u5411\u9501\u65f6\uff0c\u504f\u5411\u9501\u7684\u201c\u504f\u5411\u201d\u6a21\u5f0f\u5c31\u7ed3\u675f\u4e86\u3002</p> </li> <li> <p>JVM\u4f1a\u68c0\u67e5\u539f\u6301\u6709\u504f\u5411\u9501\u7684\u7ebf\u7a0bA\u662f\u5426\u4ecd\u7136\u5b58\u6d3b\u5e76\u4e14\u8fd8\u5728\u540c\u6b65\u4ee3\u7801\u5757\u4e2d\u3002</p> <ul> <li> <p>\u5982\u679c\u7ebf\u7a0bA\u5df2\u4e0d\u5728\u540c\u6b65\u5757\u5185\uff1a\u90a3\u4e48\u5f88\u7b80\u5355\uff0c\u76f4\u63a5\u5c06\u5bf9\u8c61\u5934\u8bbe\u7f6e\u56de\u65e0\u9501\u72b6\u6001\u6216\u504f\u5411\u7ed9\u65b0\u7684\u7ebf\u7a0bB\u3002</p> </li> <li> <p>\u5982\u679c\u7ebf\u7a0bA\u8fd8\u5728\u540c\u6b65\u5757\u5185\uff1a\u8bf4\u660e\u4ea7\u751f\u4e86\u771f\u6b63\u7684\u7ade\u4e89\u3002\u8fd9\u65f6JVM\u4f1a\u6682\u505c\u7ebf\u7a0bA\uff0c\u5c06\u9501\u5347\u7ea7\u4e3a\u8f7b\u91cf\u7ea7\u9501\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u88ab\u79f0\u4e3a\u504f\u5411\u9501\u7684\u64a4\u9500\uff08Revocation\uff09\uff0c\u5b83\u9700\u8981\u7b49\u5f85\u4e00\u4e2a\u5168\u5c40\u5b89\u5168\u70b9\uff08Global Safepoint\uff09\uff0c\u8fd9\u4e2a\u64cd\u4f5c\u7684\u5f00\u9500\u76f8\u5bf9\u8f83\u5927\u3002</p> </li> </ul> </li> </ul> <p>\u6ce8\u610f\uff1a\u4eceJDK 15\u5f00\u59cb\uff0c\u504f\u5411\u9501\u88ab\u9ed8\u8ba4\u7981\u7528\uff0c\u5e76\u4e14\u9884\u8ba1\u5728\u672a\u6765\u7684\u7248\u672c\u4e2d\u88ab\u79fb\u9664\u3002\u8fd9\u662f\u56e0\u4e3a\u73b0\u4ee3\u5e94\u7528\u4e2d\uff0c\u591a\u7ebf\u7a0b\u7ade\u4e89\u7684\u573a\u666f\u8d8a\u6765\u8d8a\u666e\u904d\uff0c\u7ef4\u62a4\u504f\u5411\u9501\u7684\u6210\u672c\u6709\u65f6\u4f1a\u8d85\u8fc7\u5176\u5e26\u6765\u7684\u6536\u76ca\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E4%B8%AD%E9%94%81%E5%8D%87%E7%BA%A7%E7%9A%84%E6%B5%81%E7%A8%8B%E6%98%AF%E4%BB%80%E4%B9%88/#lightweight-lock","title":"\u7b2c\u4e09\u9636\u6bb5\uff1a\u8f7b\u91cf\u7ea7\u9501 (Lightweight Lock)","text":""},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E4%B8%AD%E9%94%81%E5%8D%87%E7%BA%A7%E7%9A%84%E6%B5%81%E7%A8%8B%E6%98%AF%E4%BB%80%E4%B9%88/#1_1","title":"1. \u5347\u7ea7\u65f6\u673a","text":"<p>\u5f53\u504f\u5411\u9501\u88ab\u64a4\u9500\uff0c\u6216\u8005\u4e24\u4e2a\u7ebf\u7a0b\u5728\u51e0\u4e4e\u540c\u4e00\u65f6\u95f4\uff08\u4f46\u6ca1\u6709\u5b8c\u5168\u91cd\u53e0\uff09\u5c1d\u8bd5\u83b7\u53d6\u540c\u4e00\u4e2a\u9501\u65f6\uff0c\u9501\u4f1a\u5347\u7ea7\u4e3a\u8f7b\u91cf\u7ea7\u9501\u3002\u5b83\u7684\u8bbe\u8ba1\u76ee\u6807\u662f\u5728\u6ca1\u6709\u5b9e\u9645\u591a\u7ebf\u7a0b\u201c\u540c\u65f6\u201d\u7ade\u4e89\u7684\u60c5\u51b5\u4e0b\uff0c\u901a\u8fc7\u81ea\u65cb\uff08Spinning\uff09\u6765\u907f\u514d\u7ebf\u7a0b\u963b\u585e\u548c\u5524\u9192\u5e26\u6765\u7684\u7cfb\u7edf\u8c03\u7528\u5f00\u9500\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E4%B8%AD%E9%94%81%E5%8D%87%E7%BA%A7%E7%9A%84%E6%B5%81%E7%A8%8B%E6%98%AF%E4%BB%80%E4%B9%88/#2_1","title":"2. \u5de5\u4f5c\u539f\u7406","text":"<ul> <li> <p>\u52a0\u9501\u8fc7\u7a0b\uff1a</p> <ol> <li> <p>\u7ebf\u7a0b\u5728\u81ea\u5df1\u7684\u6808\u5e27\uff08Stack Frame\uff09\u4e2d\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a\u201c\u9501\u8bb0\u5f55\u201d\uff08Lock Record\uff09\u7684\u7a7a\u95f4\u3002</p> </li> <li> <p>JVM\u4f7f\u7528CAS\u64cd\u4f5c\uff0c\u5c1d\u8bd5\u5c06\u5bf9\u8c61\u5934\u7684\u5185\u5bb9\u62f7\u8d1d\u5230\u8fd9\u4e2a\u9501\u8bb0\u5f55\u4e2d\uff0c\u5e76\u5c06\u5bf9\u8c61\u5934\u66f4\u65b0\u4e3a\u4e00\u4e2a\u6307\u5411\u8be5\u9501\u8bb0\u5f55\u7684\u6307\u9488\u3002</p> </li> <li> <p>\u5982\u679cCAS\u6210\u529f\uff0c\u8be5\u7ebf\u7a0b\u5c31\u83b7\u5f97\u4e86\u8f7b\u91cf\u7ea7\u9501\uff0c\u9501\u6807\u5fd7\u4f4d\u53d8\u4e3a<code>00</code>\u3002</p> </li> </ol> </li> <li> <p>\u89e3\u9501\u8fc7\u7a0b\uff1a</p> <ol> <li> <p>\u7ebf\u7a0b\u4f7f\u7528CAS\u64cd\u4f5c\uff0c\u5c1d\u8bd5\u5c06\u4e4b\u524d\u4fdd\u5b58\u5728\u9501\u8bb0\u5f55\u4e2d\u7684\u5bf9\u8c61\u5934\u5185\u5bb9\u518d\u5199\u56de\u5230\u5bf9\u8c61\u5934\u3002</p> </li> <li> <p>\u5982\u679c\u6210\u529f\uff0c\u8868\u793a\u6ca1\u6709\u5176\u4ed6\u7ebf\u7a0b\u7ade\u4e89\uff0c\u89e3\u9501\u5b8c\u6210\u3002</p> </li> <li> <p>\u5982\u679c\u5931\u8d25\uff0c\u8bf4\u660e\u5728\u6301\u6709\u9501\u671f\u95f4\uff0c\u6709\u5176\u4ed6\u7ebf\u7a0b\u5c1d\u8bd5\u83b7\u53d6\u8be5\u9501\uff0c\u5bfc\u81f4\u9501\u5df2\u7ecf\u81a8\u80c0\u6210\u4e86\u91cd\u91cf\u7ea7\u9501\u3002\u6b64\u65f6\uff0c\u7ebf\u7a0b\u4f1a\u8fdb\u5165\u91cd\u91cf\u7ea7\u9501\u7684\u89e3\u9501\u6d41\u7a0b\uff0c\u53bb\u5524\u9192\u6b63\u5728\u7b49\u5f85\u7684\u7ebf\u7a0b\u3002</p> </li> </ol> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E4%B8%AD%E9%94%81%E5%8D%87%E7%BA%A7%E7%9A%84%E6%B5%81%E7%A8%8B%E6%98%AF%E4%BB%80%E4%B9%88/#3_1","title":"3. \u81ea\u65cb\u4e0e\u5347\u7ea7","text":"<p>\u5982\u679c\u7ebf\u7a0b\u83b7\u53d6\u8f7b\u91cf\u7ea7\u9501\u7684CAS\u64cd\u4f5c\u5931\u8d25\uff0cJVM\u4e0d\u4f1a\u7acb\u5373\u5c06\u7ebf\u7a0b\u6302\u8d77\u3002\u5b83\u4f1a\u8ba4\u4e3a\u5176\u4ed6\u7ebf\u7a0b\u5f88\u5feb\u5c31\u4f1a\u91ca\u653e\u9501\uff0c\u56e0\u6b64\u4f1a\u8ba9\u5f53\u524d\u7ebf\u7a0b\u8fdb\u884c\u201c\u81ea\u65cb\u201d\uff0c\u5373\u6267\u884c\u4e00\u4e2a\u7a7a\u5faa\u73af\uff0c\u7a0d\u7b49\u7247\u523b\u518d\u5c1d\u8bd5\u83b7\u53d6\u3002\u8fd9\u907f\u514d\u4e86\u7ebf\u7a0b\u8fdb\u5165\u5185\u6838\u6001\u7684\u963b\u585e\u64cd\u4f5c\u3002</p> <ul> <li> <p>\u81ea\u9002\u5e94\u81ea\u65cb\uff1aJVM\u4f1a\u6839\u636e\u4e0a\u4e00\u6b21\u81ea\u65cb\u7684\u6210\u529f\u7387\u548c\u9501\u6301\u6709\u8005\u7684\u72b6\u6001\u6765\u51b3\u5b9a\u81ea\u65cb\u7684\u6b21\u6570\uff0c\u800c\u4e0d\u662f\u56fa\u5b9a\u6b21\u6570\u3002</p> </li> <li> <p>\u9501\u81a8\u80c0\uff1a\u5982\u679c\u81ea\u65cb\u4e00\u5b9a\u6b21\u6570\u540e\uff08\u6216\u8005\u6709\u5176\u4ed6\u7ebf\u7a0b\u4e5f\u5728\u81ea\u65cb\u7b49\u5f85\u540c\u4e00\u4e2a\u9501\uff09\uff0c\u4ecd\u7136\u6ca1\u6709\u83b7\u53d6\u5230\u9501\uff0c\u8bf4\u660e\u7ade\u4e89\u6bd4\u8f83\u6fc0\u70c8\u3002\u6b64\u65f6\uff0c\u8f7b\u91cf\u7ea7\u9501\u5c31\u4f1a\u81a8\u80c0\uff08Inflate\uff09\u4e3a\u91cd\u91cf\u7ea7\u9501\u3002</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E4%B8%AD%E9%94%81%E5%8D%87%E7%BA%A7%E7%9A%84%E6%B5%81%E7%A8%8B%E6%98%AF%E4%BB%80%E4%B9%88/#heavyweight-lock","title":"\u7b2c\u56db\u9636\u6bb5\uff1a\u91cd\u91cf\u7ea7\u9501 (Heavyweight Lock)","text":""},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E4%B8%AD%E9%94%81%E5%8D%87%E7%BA%A7%E7%9A%84%E6%B5%81%E7%A8%8B%E6%98%AF%E4%BB%80%E4%B9%88/#1_2","title":"1. \u5347\u7ea7\u65f6\u673a","text":"<p>\u5f53\u591a\u4e2a\u7ebf\u7a0b\u6fc0\u70c8\u7ade\u4e89\u540c\u4e00\u4e2a\u9501\uff0c\u81ea\u65cb\u4e5f\u65e0\u6cd5\u89e3\u51b3\u95ee\u9898\u65f6\uff0c\u9501\u5c31\u4f1a\u5347\u7ea7\u4e3a\u91cd\u91cf\u7ea7\u9501\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E4%B8%AD%E9%94%81%E5%8D%87%E7%BA%A7%E7%9A%84%E6%B5%81%E7%A8%8B%E6%98%AF%E4%BB%80%E4%B9%88/#2_2","title":"2. \u5de5\u4f5c\u539f\u7406","text":"<ul> <li> <p>\u5b9e\u73b0\uff1a\u91cd\u91cf\u7ea7\u9501\u662f<code>Synchronized</code>\u6700\u539f\u59cb\u7684\u5b9e\u73b0\u65b9\u5f0f\uff0c\u5b83\u4f9d\u8d56\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u7684\u4e92\u65a5\u91cf\uff08Mutex Lock\uff09\u6765\u5b9e\u73b0\u3002\u5bf9\u8c61\u5934\u4e2d\u7684\u9501\u6807\u5fd7\u4f4d\u4f1a\u53d8\u4e3a<code>10</code>\uff0c\u5e76\u4e14\u6307\u9488\u4f1a\u6307\u5411\u4e00\u4e2amonitor\u5bf9\u8c61\u3002</p> </li> <li> <p>\u963b\u585e\u4e0e\u5524\u9192\uff1a\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u5c1d\u8bd5\u83b7\u53d6\u91cd\u91cf\u7ea7\u9501\u5931\u8d25\u540e\uff0c\u5b83\u4e0d\u4f1a\u518d\u81ea\u65cb\uff0c\u800c\u662f\u4f1a\u88ab\u76f4\u63a5\u653e\u5165\u8be5\u9501\u7684\u7b49\u5f85\u961f\u5217\u4e2d\uff0c\u5e76\u8fdb\u5165\u963b\u585e\uff08Blocked\uff09\u72b6\u6001\u3002\u6b64\u65f6\uff0c\u7ebf\u7a0b\u4f1a\u4ece\u7528\u6237\u6001\u5207\u6362\u5230\u5185\u6838\u6001\uff0cCPU\u88ab\u91ca\u653e\u7ed9\u5176\u4ed6\u7ebf\u7a0b\u3002</p> </li> <li> <p>\u91ca\u653e\uff1a\u5f53\u6301\u6709\u9501\u7684\u7ebf\u7a0b\u91ca\u653e\u9501\u65f6\uff0c\u5b83\u4f1a\u5524\u9192\u7b49\u5f85\u961f\u5217\u4e2d\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u7ebf\u7a0b\uff0c\u88ab\u5524\u9192\u7684\u7ebf\u7a0b\u4f1a\u91cd\u65b0\u53c2\u4e0e\u9501\u7684\u7ade\u4e89\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u6d89\u53ca\u7528\u6237\u6001\u548c\u5185\u6838\u6001\u4e4b\u95f4\u7684\u5207\u6362\uff0c\u5f00\u9500\u662f\u6700\u5927\u7684\u3002</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%B1%BB%E5%9E%8B%E6%9C%89%E4%BB%80%E4%B9%88/","title":"JVM\u5783\u573e\u56de\u6536\u7c7b\u578b\u6709\u4ec0\u4e48","text":""},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%B1%BB%E5%9E%8B%E6%9C%89%E4%BB%80%E4%B9%88/#jvm","title":"JVM\u5783\u573e\u56de\u6536\u7684\u5206\u7c7b","text":"<p>Java\u865a\u62df\u673a\uff08JVM\uff09\u7684\u5783\u573e\u56de\u6536\uff08Garbage Collection, GC\uff09\u662f\u5176\u81ea\u52a8\u5185\u5b58\u7ba1\u7406\u7684\u6838\u5fc3\u529f\u80fd\u3002\u6839\u636e\u4e0d\u540c\u7684\u5212\u5206\u6807\u51c6\uff0cJVM\u7684\u5783\u573e\u56de\u6536\u53ef\u4ee5\u5206\u4e3a\u51e0\u79cd\u4e0d\u540c\u7684\u7c7b\u578b\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%B1%BB%E5%9E%8B%E6%9C%89%E4%BB%80%E4%B9%88/#1","title":"1. \u6309\u56de\u6536\u533a\u57df\u5212\u5206","text":"<p>\u6839\u636e\u5783\u573e\u56de\u6536\u5668\u4f5c\u7528\u7684\u5185\u5b58\u533a\u57df\uff0cGC\u53ef\u4ee5\u4e3b\u8981\u5206\u4e3a\u4ee5\u4e0b\u51e0\u79cd\u7c7b\u578b\uff1a</p> <ul> <li> <p>\u90e8\u5206\u6536\u96c6 (Partial GC)\uff1a\u6307\u4e0d\u662f\u5b8c\u6574\u6536\u96c6\u6574\u4e2aJava\u5806\u7684\u5783\u573e\u56de\u6536\u3002</p> <ul> <li>\u65b0\u751f\u4ee3\u6536\u96c6 (Minor GC / Young GC)\uff1a\u53ea\u9488\u5bf9\u65b0\u751f\u4ee3\uff08Eden\u533a\u548c\u4e24\u4e2aSurvivor\u533a\uff09\u8fdb\u884c\u7684\u5783\u573e\u56de\u6536\u3002\u5f53\u65b0\u751f\u4ee3\u7684Eden\u533a\u6ee1\u65f6\uff0c\u4f1a\u89e6\u53d1Minor GC\u3002\u7531\u4e8e\u65b0\u751f\u4ee3\u4e2d\u7684\u5bf9\u8c61\u5927\u591a\u751f\u547d\u5468\u671f\u5f88\u77ed\uff0c\u56e0\u6b64Minor GC\u975e\u5e38\u9891\u7e41\uff0c\u56de\u6536\u901f\u5ea6\u4e5f\u8f83\u5feb\u3002</li> <li>\u8001\u5e74\u4ee3\u6536\u96c6 (Major GC / Old GC)\uff1a\u53ea\u9488\u5bf9\u8001\u5e74\u4ee3\u7684\u5783\u573e\u56de\u6536\u3002\u76ee\u524d\u53ea\u6709CMS\u6536\u96c6\u5668\u4f1a\u6709\u5355\u72ec\u6536\u96c6\u8001\u5e74\u4ee3\u7684\u884c\u4e3a\u3002 \u5f88\u591a\u65f6\u5019Major GC\u4f1a\u7531Minor GC\u89e6\u53d1\u3002</li> <li>\u6df7\u5408\u6536\u96c6 (Mixed GC)\uff1a\u6536\u96c6\u6574\u4e2a\u65b0\u751f\u4ee3\u4ee5\u53ca\u90e8\u5206\u8001\u5e74\u4ee3\u7684\u5783\u573e\u56de\u6536\uff0c\u8fd9\u5728G1\u6536\u96c6\u4e2d\u662f\u4e00\u79cd\u72ec\u7279\u7684\u884c\u4e3a\u3002</li> </ul> </li> <li> <p>\u6574\u5806\u6536\u96c6 (Full GC)\uff1a\u6536\u96c6\u6574\u4e2aJava\u5806\uff08\u5305\u62ec\u65b0\u751f\u4ee3\u548c\u8001\u5e74\u4ee3\uff09\u548c\u65b9\u6cd5\u533a\u7684\u5783\u573e\u56de\u6536\u3002 \u5f53\u8001\u5e74\u4ee3\u7a7a\u95f4\u4e0d\u8db3\u3001\u65b9\u6cd5\u533a\u7a7a\u95f4\u4e0d\u8db3\u6216\u5f00\u53d1\u8005\u663e\u5f0f\u8c03\u7528<code>System.gc()</code>\u65f6\uff0c\u90fd\u53ef\u80fd\u89e6\u53d1Full GC\u3002Full GC\u7684\u901f\u5ea6\u901a\u5e38\u6bd4Minor GC\u6162\u5f88\u591a\uff0c\u56e0\u4e3a\u5b83\u9700\u8981\u5904\u7406\u66f4\u591a\u7684\u5bf9\u8c61\u548c\u66f4\u5927\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u5e76\u4e14\u5e38\u5e38\u4f1a\u5bfc\u81f4\u8f83\u957f\u65f6\u95f4\u7684\u201cStop-The-World\u201d\uff08STW\uff09\uff0c\u5373\u7a0b\u5e8f\u6267\u884c\u4f1a\u6682\u505c\u3002</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%B1%BB%E5%9E%8B%E6%9C%89%E4%BB%80%E4%B9%88/#2","title":"2. \u6309\u5783\u573e\u6536\u96c6\u5668\u5b9e\u73b0\u5212\u5206","text":"<p>\u968f\u7740JVM\u6280\u672f\u7684\u53d1\u5c55\uff0c\u51fa\u73b0\u4e86\u591a\u79cd\u5177\u4f53\u7684\u5783\u573e\u6536\u96c6\u5668\u5b9e\u73b0\uff0c\u5b83\u4eec\u5728\u5355\u7ebf\u7a0b/\u591a\u7ebf\u7a0b\u3001\u5e76\u53d1/\u5e76\u884c\u4ee5\u53ca\u9488\u5bf9\u7684\u5185\u5b58\u533a\u57df\u4e0a\u6709\u6240\u4e0d\u540c\u3002\u4e3b\u8981\u7684\u5783\u573e\u6536\u96c6\u5668\u5305\u62ec\uff1a</p> <p>\u65b0\u751f\u4ee3\u6536\u96c6\u5668\uff1a *   Serial \u6536\u96c6\u5668\uff1a\u4e00\u4e2a\u5355\u7ebf\u7a0b\u7684\u6536\u96c6\u5668\uff0c\u8fdb\u884c\u5783\u573e\u56de\u6536\u65f6\uff0c\u5fc5\u987b\u6682\u505c\u6240\u6709\u5176\u4ed6\u5de5\u4f5c\u7ebf\u7a0b\uff08Stop-The-World\uff09\u3002\u5b83\u662f\u6700\u57fa\u672c\u7684\u3001\u53d1\u5c55\u5386\u53f2\u6700\u60a0\u4e45\u7684\u6536\u96c6\u5668\u3002 *   ParNew \u6536\u96c6\u5668\uff1aSerial\u6536\u96c6\u5668\u7684\u591a\u7ebf\u7a0b\u7248\u672c\uff0c\u9664\u4e86\u4f7f\u7528\u591a\u6761\u7ebf\u7a0b\u8fdb\u884c\u5783\u573e\u6536\u96c6\u5916\uff0c\u5176\u4f59\u884c\u4e3a\u4e0eSerial\u6536\u96c6\u5668\u5b8c\u5168\u4e00\u6837\u3002\u5b83\u662f\u8bb8\u591a\u8fd0\u884c\u5728Server\u6a21\u5f0f\u4e0b\u7684\u865a\u62df\u673a\u7684\u9996\u9009\u65b0\u751f\u4ee3\u6536\u96c6\u5668\uff0c\u56e0\u4e3a\u5b83\u53ef\u4ee5\u4e0eCMS\u6536\u96c6\u5668\u914d\u5408\u5de5\u4f5c\u3002 *   Parallel Scavenge \u6536\u96c6\u5668\uff1a\u4e00\u4e2a\u65b0\u751f\u4ee3\u7684\u591a\u7ebf\u7a0b\u6536\u96c6\u5668\uff0c\u5176\u76ee\u6807\u662f\u8fbe\u5230\u4e00\u4e2a\u53ef\u63a7\u5236\u7684\u541e\u5410\u91cf\uff08\u5373CPU\u7528\u4e8e\u8fd0\u884c\u7528\u6237\u4ee3\u7801\u7684\u65f6\u95f4\u4e0eCPU\u603b\u6d88\u8017\u65f6\u95f4\u7684\u6bd4\u503c\uff09\u3002</p> <p>\u8001\u5e74\u4ee3\u6536\u96c6\u5668\uff1a *   Serial Old \u6536\u96c6\u5668\uff1aSerial\u6536\u96c6\u5668\u7684\u8001\u5e74\u4ee3\u7248\u672c\uff0c\u540c\u6837\u662f\u5355\u7ebf\u7a0b\u7684\uff0c\u4f7f\u7528\u201c\u6807\u8bb0-\u6574\u7406\u201d\u7b97\u6cd5\u3002 *   Parallel Old \u6536\u96c6\u5668\uff1aParallel Scavenge\u6536\u96c6\u5668\u7684\u8001\u5e74\u4ee3\u7248\u672c\uff0c\u4f7f\u7528\u591a\u7ebf\u7a0b\u548c\u201c\u6807\u8bb0-\u6574\u7406\u201d\u7b97\u6cd5\u3002 *   CMS (Concurrent Mark Sweep) \u6536\u96c6\u5668\uff1a\u4e00\u79cd\u4ee5\u83b7\u53d6\u6700\u77ed\u56de\u6536\u505c\u987f\u65f6\u95f4\u4e3a\u76ee\u6807\u7684\u6536\u96c6\u5668\u3002\u5b83\u5728\u5de5\u4f5c\u65f6\uff0c\u5927\u90e8\u5206\u65f6\u95f4\u5783\u573e\u6536\u96c6\u7ebf\u7a0b\u53ef\u4ee5\u4e0e\u7528\u6237\u7ebf\u7a0b\u5e76\u53d1\u6267\u884c\u3002\u5b83\u57fa\u4e8e\u201c\u6807\u8bb0-\u6e05\u9664\u201d\u7b97\u6cd5\u5b9e\u73b0\u3002</p> <p>\u6574\u5806\u6536\u96c6\u5668\uff1a *   G1 (Garbage-First) \u6536\u96c6\u5668\uff1a\u4e00\u6b3e\u9762\u5411\u670d\u52a1\u7aef\u5e94\u7528\u7684\u5783\u573e\u6536\u96c6\u5668\uff0c\u5b83\u5c06\u6574\u4e2aJava\u5806\u5212\u5206\u4e3a\u591a\u4e2a\u5927\u5c0f\u76f8\u7b49\u7684\u72ec\u7acb\u533a\u57df\uff08Region\uff09\uff0c\u5e76\u8ddf\u8e2a\u8fd9\u4e9b\u533a\u57df\u91cc\u9762\u7684\u5783\u573e\u5806\u79ef\u7a0b\u5ea6\uff0c\u5728\u540e\u53f0\u7ef4\u62a4\u4e00\u4e2a\u4f18\u5148\u5217\u8868\uff0c\u6bcf\u6b21\u6839\u636e\u5141\u8bb8\u7684\u6536\u96c6\u65f6\u95f4\uff0c\u4f18\u5148\u56de\u6536\u4ef7\u503c\u6700\u5927\u7684\u533a\u57df\u3002 *   ZGC (Z Garbage Collector)\uff1a\u4e00\u6b3e\u5728JDK 11\u4e2d\u5f15\u5165\u7684\u3001\u4ee5\u4f4e\u5ef6\u8fdf\u4e3a\u76ee\u6807\u7684\u5783\u573e\u6536\u96c6\u5668\u3002\u5b83\u7684\u8bbe\u8ba1\u76ee\u6807\u662f\u505c\u987f\u65f6\u95f4\u4e0d\u8d85\u8fc710\u6beb\u79d2\uff0c\u5e76\u4e14\u505c\u987f\u65f6\u95f4\u4e0d\u4f1a\u968f\u7740\u5806\u7684\u5927\u5c0f\u6216\u5b58\u6d3b\u5bf9\u8c61\u6570\u91cf\u7684\u589e\u52a0\u800c\u589e\u52a0\u3002</p> <p>\u8fd9\u4e9b\u6536\u96c6\u5668\u901a\u5e38\u9700\u8981\u914d\u5bf9\u4f7f\u7528\uff08\u65b0\u751f\u4ee3\u6536\u96c6\u5668 + \u8001\u5e74\u4ee3\u6536\u96c6\u5668\uff09\uff0c\u4f8b\u5982<code>ParNew + CMS</code>\u6216<code>Parallel Scavenge + Parallel Old</code>\u7684\u7ec4\u5408\u3002 \u800cG1\u548cZGC\u7b49\u73b0\u4ee3\u6536\u96c6\u5668\u5219\u7edf\u4e00\u7ba1\u7406\u6574\u4e2a\u5806\u7684\u56de\u6536\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E7%94%B1%E4%BB%80%E4%B9%88%E7%BB%84%E6%88%90/","title":"JVM\u7531\u4ec0\u4e48\u7ec4\u6210","text":"<p>Java\u865a\u62df\u673a\uff08JVM\uff09\u662fJava\u5e73\u53f0\u7684\u6838\u5fc3\uff0c\u5b83\u4f7f\u5f97Java\u7a0b\u5e8f\u80fd\u591f\u5b9e\u73b0\u201c\u4e00\u6b21\u7f16\u5199\uff0c\u5230\u5904\u8fd0\u884c\u201d\u7684\u8de8\u5e73\u53f0\u7279\u6027\u3002 JVM\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u865a\u62df\u7684\u8ba1\u7b97\u673a\uff0c\u62e5\u6709\u81ea\u5df1\u7684\u6307\u4ee4\u96c6\u548c\u5185\u5b58\u7ba1\u7406\u673a\u5236\u3002 \u5f53\u4e00\u4e2aJava\u7a0b\u5e8f\u8fd0\u884c\u65f6\uff0c\u5b83\u5b9e\u9645\u4e0a\u662f\u5728\u4e00\u4e2aJVM\u5b9e\u4f8b\u4e2d\u6267\u884c\u7684\u3002</p> <p>JVM\u4e3b\u8981\u7531\u4ee5\u4e0b\u51e0\u4e2a\u6838\u5fc3\u90e8\u5206\u7ec4\u6210\uff1a</p> <ul> <li>\u7c7b\u52a0\u8f7d\u5668\uff08Class Loader\uff09</li> <li>\u8fd0\u884c\u65f6\u6570\u636e\u533a\uff08Runtime Data Area\uff09</li> <li>\u6267\u884c\u5f15\u64ce\uff08Execution Engine\uff09</li> <li>\u672c\u5730\u65b9\u6cd5\u63a5\u53e3\uff08Native Interface\uff09</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E7%94%B1%E4%BB%80%E4%B9%88%E7%BB%84%E6%88%90/#class-loader","title":"\u7c7b\u52a0\u8f7d\u5668\uff08Class Loader\uff09","text":"<p>\u7c7b\u52a0\u8f7d\u5668\u7684\u4e3b\u8981\u804c\u8d23\u662f\u6839\u636e\u7c7b\u7684\u5168\u9650\u5b9a\u540d\u67e5\u627e\u5e76\u52a0\u8f7d\u7c7b\u7684\u5b57\u8282\u7801\u6587\u4ef6\uff08.class\u6587\u4ef6\uff09\uff0c\u7136\u540e\u5728\u5185\u5b58\u4e2d\u521b\u5efa\u4e00\u4e2a\u5bf9\u5e94\u7684<code>java.lang.Class</code>\u5bf9\u8c61\u3002</p> <p>\u7c7b\u52a0\u8f7d\u8fc7\u7a0b\u4e3b\u8981\u5305\u62ec\u4e09\u4e2a\u9636\u6bb5\uff1a *   \u52a0\u8f7d\uff08Loading\uff09: \u67e5\u627e\u5e76\u5bfc\u5165.class\u6587\u4ef6\u3002 *   \u94fe\u63a5\uff08Linking\uff09:     *   \u9a8c\u8bc1\uff08Verification\uff09: \u786e\u4fdd\u88ab\u52a0\u8f7d\u7684\u7c7b\u7b26\u5408JVM\u89c4\u8303\uff0c\u6ca1\u6709\u5b89\u5168\u95ee\u9898\u3002     *   \u51c6\u5907\uff08Preparation\uff09: \u4e3a\u7c7b\u7684\u9759\u6001\u53d8\u91cf\u5206\u914d\u5185\u5b58\uff0c\u5e76\u8bbe\u7f6e\u9ed8\u8ba4\u521d\u59cb\u503c\u3002     *   \u89e3\u6790\uff08Resolution\uff09: \u5c06\u7b26\u53f7\u5f15\u7528\u66ff\u6362\u4e3a\u76f4\u63a5\u5f15\u7528\u3002 *   \u521d\u59cb\u5316\uff08Initialization\uff09: \u6267\u884c\u7c7b\u7684\u6784\u9020\u5668<code>&lt;clinit&gt;()</code>\u65b9\u6cd5\uff0c\u5bf9\u9759\u6001\u53d8\u91cf\u8fdb\u884c\u521d\u59cb\u5316\u3002</p> <p>JVM\u4e2d\u7684\u7c7b\u52a0\u8f7d\u5668\u901a\u5e38\u91c7\u7528\u53cc\u4eb2\u59d4\u6d3e\u6a21\u578b\uff0c\u4e3b\u8981\u5305\u542b\u4ee5\u4e0b\u51e0\u79cd\uff1a *   \u542f\u52a8\u7c7b\u52a0\u8f7d\u5668\uff08Bootstrap Class Loader\uff09: \u8d1f\u8d23\u52a0\u8f7dJava\u6838\u5fc3\u5e93\uff08\u5982<code>JAVA_HOME/lib</code>\u76ee\u5f55\u4e0b\u7684\u7c7b\uff09\uff0c\u7531C++\u5b9e\u73b0\u3002 *   \u6269\u5c55\u7c7b\u52a0\u8f7d\u5668\uff08Extension Class Loader\uff09: \u8d1f\u8d23\u52a0\u8f7d\u6269\u5c55\u76ee\u5f55\uff08\u5982<code>JAVA_HOME/jre/lib/ext</code>\uff09\u4e2d\u7684\u7c7b\u5e93\u3002 *   \u5e94\u7528\u7a0b\u5e8f\u7c7b\u52a0\u8f7d\u5668\uff08Application Class Loader\uff09: \u4e5f\u79f0\u4e3a\u7cfb\u7edf\u7c7b\u52a0\u8f7d\u5668\uff0c\u8d1f\u8d23\u52a0\u8f7d\u7528\u6237\u7c7b\u8def\u5f84\uff08Classpath\uff09\u4e0a\u7684\u7c7b\u3002 *   \u7528\u6237\u81ea\u5b9a\u4e49\u7c7b\u52a0\u8f7d\u5668\uff08User-Defined Class Loader\uff09: \u5141\u8bb8\u5f00\u53d1\u8005\u6839\u636e\u9700\u6c42\u81ea\u5b9a\u4e49\u7c7b\u7684\u52a0\u8f7d\u65b9\u5f0f\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E7%94%B1%E4%BB%80%E4%B9%88%E7%BB%84%E6%88%90/#runtime-data-area","title":"\u8fd0\u884c\u65f6\u6570\u636e\u533a\uff08Runtime Data Area\uff09","text":"<p>\u8fd0\u884c\u65f6\u6570\u636e\u533a\u662fJVM\u5728\u6267\u884cJava\u7a0b\u5e8f\u65f6\u7528\u6765\u5b58\u50a8\u6570\u636e\u7684\u5185\u5b58\u533a\u57df\uff0c\u5b83\u5206\u4e3a\u591a\u4e2a\u90e8\u5206\uff0c\u6709\u4e9b\u662f\u7ebf\u7a0b\u5171\u4eab\u7684\uff0c\u6709\u4e9b\u662f\u7ebf\u7a0b\u79c1\u6709\u7684\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E7%94%B1%E4%BB%80%E4%B9%88%E7%BB%84%E6%88%90/#_1","title":"\u7ebf\u7a0b\u5171\u4eab\u7684\u533a\u57df\uff1a","text":"<ul> <li>\u65b9\u6cd5\u533a\uff08Method Area\uff09: \u7528\u4e8e\u5b58\u50a8\u5df2\u88ab\u865a\u62df\u673a\u52a0\u8f7d\u7684\u7c7b\u4fe1\u606f\u3001\u5e38\u91cf\u3001\u9759\u6001\u53d8\u91cf\u3001\u5373\u65f6\u7f16\u8bd1\u5668\u7f16\u8bd1\u540e\u7684\u4ee3\u7801\u7b49\u6570\u636e\u3002 \u5728Java 8\u53ca\u4e4b\u540e\u7248\u672c\u4e2d\uff0c\u65b9\u6cd5\u533a\u7684\u5b9e\u73b0\u65b9\u5f0f\u53d8\u4e3a\u4e86\u5143\u7a7a\u95f4\uff08Metaspace\uff09\uff0c\u5b83\u4f7f\u7528\u7684\u662f\u672c\u5730\u5185\u5b58\u800c\u4e0d\u662fJVM\u5806\u5185\u5b58\u3002</li> <li>\u5806\uff08Heap\uff09: \u662fJVM\u6240\u7ba1\u7406\u7684\u5185\u5b58\u4e2d\u6700\u5927\u7684\u4e00\u5757\uff0c\u51e0\u4e4e\u6240\u6709\u7684\u5bf9\u8c61\u5b9e\u4f8b\u548c\u6570\u7ec4\u90fd\u5728\u8fd9\u91cc\u5206\u914d\u5185\u5b58\u3002 \u5806\u662f\u5783\u573e\u6536\u96c6\u5668\uff08Garbage Collector\uff09\u7ba1\u7406\u7684\u4e3b\u8981\u533a\u57df\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E7%94%B1%E4%BB%80%E4%B9%88%E7%BB%84%E6%88%90/#_2","title":"\u7ebf\u7a0b\u79c1\u6709\u7684\u533a\u57df\uff1a","text":"<ul> <li>Java\u865a\u62df\u673a\u6808\uff08Java Virtual Machine Stack\uff09: \u6bcf\u4e2a\u7ebf\u7a0b\u5728\u521b\u5efa\u65f6\u90fd\u4f1a\u521b\u5efa\u4e00\u4e2a\u865a\u62df\u673a\u6808\u3002 \u6bcf\u5f53\u4e00\u4e2a\u65b9\u6cd5\u88ab\u8c03\u7528\u65f6\uff0cJVM\u4f1a\u4e3a\u5176\u521b\u5efa\u4e00\u4e2a\u6808\u5e27\uff08Stack Frame\uff09\u5e76\u538b\u5165\u6808\u4e2d\uff0c\u65b9\u6cd5\u6267\u884c\u5b8c\u6bd5\u540e\uff0c\u6808\u5e27\u51fa\u6808\u3002 \u6808\u5e27\u4e2d\u5b58\u50a8\u4e86\u5c40\u90e8\u53d8\u91cf\u8868\u3001\u64cd\u4f5c\u6570\u6808\u3001\u52a8\u6001\u94fe\u63a5\u548c\u65b9\u6cd5\u51fa\u53e3\u7b49\u4fe1\u606f\u3002</li> <li>\u672c\u5730\u65b9\u6cd5\u6808\uff08Native Method Stack\uff09: \u4e0e\u865a\u62df\u673a\u6808\u7c7b\u4f3c\uff0c\u4f46\u5b83\u670d\u52a1\u4e8e\u672c\u5730\uff08Native\uff09\u65b9\u6cd5\uff0c\u5373\u7531C\u3001C++\u7b49\u975eJava\u8bed\u8a00\u7f16\u5199\u7684\u65b9\u6cd5\u3002</li> <li>\u7a0b\u5e8f\u8ba1\u6570\u5668\uff08Program Counter Register\uff09: \u662f\u4e00\u5757\u8f83\u5c0f\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u53ef\u4ee5\u770b\u4f5c\u662f\u5f53\u524d\u7ebf\u7a0b\u6240\u6267\u884c\u7684\u5b57\u8282\u7801\u7684\u884c\u53f7\u6307\u793a\u5668\u3002 \u5b83\u662f\u552f\u4e00\u4e00\u4e2a\u5728Java\u865a\u62df\u673a\u89c4\u8303\u4e2d\u6ca1\u6709\u89c4\u5b9a\u4efb\u4f55<code>OutOfMemoryError</code>\u60c5\u51b5\u7684\u533a\u57df\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E7%94%B1%E4%BB%80%E4%B9%88%E7%BB%84%E6%88%90/#execution-engine","title":"\u6267\u884c\u5f15\u64ce\uff08Execution Engine\uff09","text":"<p>\u6267\u884c\u5f15\u64ce\u8d1f\u8d23\u6267\u884c\u5305\u542b\u5728\u5df2\u52a0\u8f7d\u7c7b\u4e2d\u7684\u6307\u4ee4\u3002 \u5b83\u8bfb\u53d6\u5b57\u8282\u7801\uff0c\u5e76\u9010\u6761\u89e3\u91ca\u6216\u7f16\u8bd1\u6267\u884c\u3002</p> <p>\u6267\u884c\u5f15\u64ce\u4e3b\u8981\u5305\u542b\u4ee5\u4e0b\u90e8\u5206\uff1a *   \u89e3\u91ca\u5668\uff08Interpreter\uff09: \u9010\u6761\u8bfb\u53d6\u5b57\u8282\u7801\u6307\u4ee4\uff0c\u5e76\u89e3\u91ca\u6267\u884c\u3002 *   \u5373\u65f6\u7f16\u8bd1\u5668\uff08Just-In-Time, JIT Compiler\uff09: \u4e3a\u4e86\u63d0\u9ad8\u6027\u80fd\uff0cJIT\u7f16\u8bd1\u5668\u4f1a\u5728\u8fd0\u884c\u65f6\u5c06\u9891\u7e41\u6267\u884c\u7684\u201c\u70ed\u70b9\u4ee3\u7801\u201d\u7f16\u8bd1\u6210\u4e0e\u672c\u5730\u5e73\u53f0\u76f8\u5173\u7684\u673a\u5668\u7801\uff0c\u5e76\u8fdb\u884c\u7f13\u5b58\u3002 HotSpot\u865a\u62df\u673a\u9ed8\u8ba4\u91c7\u7528\u6df7\u5408\u6a21\u5f0f\uff0c\u7ed3\u5408\u4e86\u89e3\u91ca\u6267\u884c\u548c\u5373\u65f6\u7f16\u8bd1\u7684\u4f18\u70b9\u3002 *   \u5783\u573e\u6536\u96c6\u5668\uff08Garbage Collector, GC\uff09: \u5783\u573e\u6536\u96c6\u5668\u662fJVM\u5185\u5b58\u7ba1\u7406\u7684\u6838\u5fc3\u529f\u80fd\uff0c\u8d1f\u8d23\u81ea\u52a8\u56de\u6536\u5806\u5185\u5b58\u4e2d\u4e0d\u518d\u88ab\u5f15\u7528\u7684\u5bf9\u8c61\uff0c\u4ee5\u91ca\u653e\u5185\u5b58\u7a7a\u95f4\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E7%94%B1%E4%BB%80%E4%B9%88%E7%BB%84%E6%88%90/#native-interface","title":"\u672c\u5730\u65b9\u6cd5\u63a5\u53e3\uff08Native Interface\uff09","text":"<p>\u672c\u5730\u65b9\u6cd5\u63a5\u53e3\uff08Java Native Interface, JNI\uff09\u662f\u4e00\u4e2a\u7f16\u7a0b\u6846\u67b6\uff0c\u5b83\u5141\u8bb8Java\u4ee3\u7801\u4e0e\u5176\u4ed6\u8bed\u8a00\uff08\u5982C\u548cC++\uff09\u7f16\u5199\u7684\u4ee3\u7801\u8fdb\u884c\u4ea4\u4e92\u3002 \u5f53Java\u7a0b\u5e8f\u9700\u8981\u8c03\u7528\u672c\u5730\u65b9\u6cd5\u5e93\u65f6\uff0c\u5c31\u4f1a\u901a\u8fc7JNI\u6765\u5b9e\u73b0\u3002 \u8fd9\u4e3aJava\u7a0b\u5e8f\u63d0\u4f9b\u4e86\u4e0e\u5e95\u5c42\u64cd\u4f5c\u7cfb\u7edf\u548c\u786c\u4ef6\u4ea4\u4e92\u7684\u80fd\u529b\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E7%9A%84%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/","title":"JVM\u7684\u5783\u573e\u56de\u6536\u673a\u5236","text":""},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E7%9A%84%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/#gc","title":"GC\u7684\u6838\u5fc3\u76ee\u6807\uff1a\u81ea\u52a8\u5316\u5185\u5b58\u7ba1\u7406","text":"<p>GC\u7684\u6838\u5fc3\u76ee\u6807\u5c31\u662f\u81ea\u52a8\u5730\u8bc6\u522b\u5e76\u56de\u6536\u90a3\u4e9b\u4e0d\u518d\u88ab\u7a0b\u5e8f\u4f7f\u7528\u7684\u5185\u5b58\uff0c\u4ece\u800c\uff1a 1.  \u89e3\u653e\u5f00\u53d1\u8005\uff1a\u8ba9\u6211\u4eec\u4e0d\u7528\u50cfC/C++\u7a0b\u5e8f\u5458\u90a3\u6837\u624b\u52a8<code>malloc</code>\u548c<code>free</code>\u5185\u5b58\uff0c\u6781\u5927\u5730\u964d\u4f4e\u4e86\u5185\u5b58\u6cc4\u9732\u548c\u91ce\u6307\u9488\u7b49\u95ee\u9898\u7684\u98ce\u9669\u3002 2.  \u4fdd\u8bc1\u7cfb\u7edf\u7a33\u5b9a\uff1a\u901a\u8fc7\u81ea\u52a8\u5316\u7684\u5185\u5b58\u56de\u6536\uff0c\u9632\u6b62\u56e0\u5185\u5b58\u8017\u5c3d\u800c\u5bfc\u81f4\u7684\u7a0b\u5e8f\u5d29\u6e83\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E7%9A%84%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/#_1","title":"\u5982\u4f55\u5224\u65ad\u5bf9\u8c61\u662f\u201c\u5783\u573e\u201d\uff1f","text":"<p>JVM\u5224\u65ad\u4e00\u4e2a\u5bf9\u8c61\u662f\u5426\u53ef\u4ee5\u88ab\u56de\u6536\uff0c\u4e3b\u8981\u91c7\u7528\u7684\u662f\u53ef\u8fbe\u6027\u5206\u6790\u7b97\u6cd5\uff08Reachability Analysis\uff09\u3002</p> <ol> <li> <p>\u57fa\u672c\u601d\u60f3\uff1a\u8fd9\u4e2a\u7b97\u6cd5\u5c06\u4e00\u7cfb\u5217\u88ab\u79f0\u4e3a\u201cGC Roots\u201d\u7684\u7279\u6b8a\u5bf9\u8c61\u4f5c\u4e3a\u8d77\u70b9\uff0c\u4ece\u8fd9\u4e9b\u8282\u70b9\u5f00\u59cb\u5411\u4e0b\u641c\u7d22\uff0c\u6240\u6709\u80fd\u591f\u88ab\u641c\u7d22\u5230\u7684\u5bf9\u8c61\u90fd\u88ab\u8ba4\u4e3a\u662f\u201c\u5b58\u6d3b\u201d\u7684\uff0c\u53cd\u4e4b\uff0c\u4efb\u4f55\u4eceGC Roots\u4e0d\u53ef\u8fbe\u7684\u5bf9\u8c61\uff0c\u5c31\u88ab\u5224\u5b9a\u4e3a\u201c\u5783\u573e\u201d\u3002</p> </li> <li> <p>\u54ea\u4e9b\u662fGC Roots\uff1f</p> <ul> <li>\u865a\u62df\u673a\u6808\uff08\u6808\u5e27\u4e2d\u7684\u672c\u5730\u53d8\u91cf\u8868\uff09\u4e2d\u5f15\u7528\u7684\u5bf9\u8c61\uff1a\u6bd4\u5982\u65b9\u6cd5\u5185\u90e8\u7684\u5c40\u90e8\u53d8\u91cf\u3002</li> <li>\u65b9\u6cd5\u533a\u4e2d\u7c7b\u9759\u6001\u5c5e\u6027\u5f15\u7528\u7684\u5bf9\u8c61\uff1a\u6bd4\u5982\u7c7b\u7684\u9759\u6001\u53d8\u91cf\u3002</li> <li>\u65b9\u6cd5\u533a\u4e2d\u5e38\u91cf\u5f15\u7528\u7684\u5bf9\u8c61\uff1a\u6bd4\u5982\u5b57\u7b26\u4e32\u5e38\u91cf\u6c60\u91cc\u7684\u5f15\u7528\u3002</li> <li>\u672c\u5730\u65b9\u6cd5\u6808\u4e2dJNI\uff08\u5373Native\u65b9\u6cd5\uff09\u5f15\u7528\u7684\u5bf9\u8c61\u3002</li> <li>\u88ab\u540c\u6b65\u9501\uff08<code>synchronized</code>\uff09\u6301\u6709\u7684\u5bf9\u8c61\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E7%9A%84%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/#_2","title":"\u6838\u5fc3\u7684\u5783\u573e\u56de\u6536\u7b97\u6cd5","text":"<p>\u627e\u5230\u4e86\u5783\u573e\u4e4b\u540e\uff0c\u5c31\u9700\u8981\u7528\u5177\u4f53\u7684\u7b97\u6cd5\u6765\u56de\u6536\u3002\u4e3b\u8981\u6709\u4e09\u79cd\u7ecf\u5178\u7b97\u6cd5\uff0c\u5b83\u4eec\u5404\u6709\u4f18\u52a3\uff0c\u662f\u540e\u7eed\u5404\u79cd\u590d\u6742\u56de\u6536\u5668\u7684\u57fa\u7840\u3002</p> <ol> <li> <p>\u6807\u8bb0-\u6e05\u9664\u7b97\u6cd5\uff08Mark-Sweep\uff09</p> <ul> <li>\u8fc7\u7a0b\uff1a\u5206\u4e3a\u201c\u6807\u8bb0\u201d\u548c\u201c\u6e05\u9664\u201d\u4e24\u4e2a\u9636\u6bb5\u3002\u9996\u5148\u6807\u8bb0\u51fa\u6240\u6709\u9700\u8981\u56de\u6536\u7684\u5bf9\u8c61\uff0c\u7136\u540e\u7edf\u4e00\u56de\u6536\u6240\u6709\u88ab\u6807\u8bb0\u7684\u5bf9\u8c61\u3002</li> <li>\u4f18\u70b9\uff1a\u5b9e\u73b0\u7b80\u5355\u3002</li> <li>\u7f3a\u70b9\uff1a\u4f1a\u4ea7\u751f\u5927\u91cf\u7684\u5185\u5b58\u788e\u7247\u3002\u4e0d\u8fde\u7eed\u7684\u5185\u5b58\u7a7a\u95f4\u4f1a\u5bfc\u81f4\u540e\u7eed\u5206\u914d\u5927\u5bf9\u8c61\u65f6\uff0c\u867d\u7136\u603b\u7a7a\u95f4\u8db3\u591f\uff0c\u4f46\u627e\u4e0d\u5230\u4e00\u5757\u8fde\u7eed\u7684\u5185\u5b58\u800c\u89e6\u53d1\u53c8\u4e00\u6b21GC\u3002</li> </ul> </li> <li> <p>\u6807\u8bb0-\u590d\u5236\u7b97\u6cd5\uff08Mark-Copy\uff09</p> <ul> <li>\u8fc7\u7a0b\uff1a\u5c06\u53ef\u7528\u5185\u5b58\u6309\u5bb9\u91cf\u5212\u5206\u4e3a\u5927\u5c0f\u76f8\u7b49\u7684\u4e24\u5757\uff0c\u6bcf\u6b21\u53ea\u4f7f\u7528\u5176\u4e2d\u7684\u4e00\u5757\u3002\u5f53\u8fd9\u4e00\u5757\u7684\u5185\u5b58\u7528\u5b8c\u4e86\uff0c\u5c31\u5c06\u8fd8\u5b58\u6d3b\u7740\u7684\u5bf9\u8c61\u590d\u5236\u5230\u53e6\u5916\u4e00\u5757\u4e0a\u9762\uff0c\u7136\u540e\u518d\u628a\u5df2\u4f7f\u7528\u8fc7\u7684\u5185\u5b58\u7a7a\u95f4\u4e00\u6b21\u6e05\u7406\u6389\u3002</li> <li>\u4f18\u70b9\uff1a\u5b9e\u73b0\u7b80\u5355\uff0c\u4e0d\u4f1a\u4ea7\u751f\u5185\u5b58\u788e\u7247\uff0c\u8fd0\u884c\u9ad8\u6548\u3002</li> <li>\u7f3a\u70b9\uff1a\u4ee3\u4ef7\u662f\u727a\u7272\u4e86\u4e00\u534a\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u7a7a\u95f4\u5229\u7528\u7387\u4f4e\u3002</li> </ul> </li> <li> <p>\u6807\u8bb0-\u6574\u7406\u7b97\u6cd5\uff08Mark-Compact\uff09</p> <ul> <li>\u8fc7\u7a0b\uff1a\u6807\u8bb0\u8fc7\u7a0b\u4ecd\u7136\u4e0e\u201c\u6807\u8bb0-\u6e05\u9664\u201d\u4e00\u6837\uff0c\u4f46\u540e\u7eed\u6b65\u9aa4\u4e0d\u662f\u76f4\u63a5\u5bf9\u53ef\u56de\u6536\u5bf9\u8c61\u8fdb\u884c\u6e05\u7406\uff0c\u800c\u662f\u8ba9\u6240\u6709\u5b58\u6d3b\u7684\u5bf9\u8c61\u90fd\u5411\u5185\u5b58\u7a7a\u95f4\u4e00\u7aef\u79fb\u52a8\uff0c\u7136\u540e\u76f4\u63a5\u6e05\u7406\u6389\u7aef\u8fb9\u754c\u4ee5\u5916\u7684\u5185\u5b58\u3002</li> <li>\u4f18\u70b9\uff1a\u4e0d\u4f1a\u4ea7\u751f\u5185\u5b58\u788e\u7247\uff0c\u4e5f\u4e0d\u9700\u8981\u727a\u7272\u4e00\u534a\u7684\u5185\u5b58\u7a7a\u95f4\u3002</li> <li>\u7f3a\u70b9\uff1a\u56e0\u4e3a\u6d89\u53ca\u5230\u5bf9\u8c61\u7684\u79fb\u52a8\uff0c\u6240\u4ee5\u6548\u7387\u76f8\u5bf9\u8f83\u4f4e\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E7%9A%84%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/#_3","title":"\u5206\u4ee3\u6536\u96c6\u7406\u8bba\u4e0e\u5185\u5b58\u5e03\u5c40","text":"<p>\u4e3a\u4e86\u5c06\u4e0d\u540c\u7b97\u6cd5\u7684\u4f18\u52bf\u7ed3\u5408\u8d77\u6765\uff0c\u73b0\u4ee3JVM\u90fd\u91c7\u7528\u4e86\u5206\u4ee3\u6536\u96c6\uff08Generational Collection\uff09\u7684\u7406\u8bba\u3002\u8fd9\u4e2a\u7406\u8bba\u57fa\u4e8e\u4e24\u4e2a\u5047\u8bf4\uff1a 1.  \u7edd\u5927\u591a\u6570\u5bf9\u8c61\u90fd\u662f\u201c\u671d\u751f\u5915\u6b7b\u201d\u7684\u3002 2.  \u71ac\u8fc7\u8d8a\u591a\u6b21\u5783\u573e\u56de\u6536\u8fc7\u7a0b\u7684\u5bf9\u8c61\u5c31\u8d8a\u96be\u4ee5\u6d88\u4ea1\u3002</p> <p>\u57fa\u4e8e\u6b64\uff0cJVM\u7684\u5806\u5185\u5b58\u88ab\u5212\u5206\u4e3a\u4e24\u4e2a\u4e3b\u8981\u533a\u57df\uff1a</p> <ul> <li> <p>\u65b0\u751f\u4ee3\uff08Young Generation\uff09\uff1a</p> <ul> <li>\u7279\u70b9\uff1a\u5b58\u653e\u751f\u547d\u5468\u671f\u77ed\u7684\u5bf9\u8c61\u3002\u7edd\u5927\u591a\u6570\u5bf9\u8c61\u90fd\u5728\u8fd9\u91cc\u521b\u5efa\uff0c\u4e5f\u5728\u8fd9\u91cc\u6d88\u4ea1\u3002</li> <li>\u5185\u90e8\u7ed3\u6784\uff1a\u5206\u4e3a\u4e00\u4e2a\u4f0a\u7538\u56ed\u533a\uff08Eden Space\uff09\u548c\u4e24\u4e2a\u5e78\u5b58\u8005\u533a\uff08Survivor Space S0, S1\uff09\u3002</li> <li>\u56de\u6536\u7b97\u6cd5\uff1a\u65b0\u751f\u4ee3GC\uff08\u79f0\u4e3aMinor GC\uff09\u975e\u5e38\u9891\u7e41\uff0c\u7531\u4e8e\u5b58\u6d3b\u5bf9\u8c61\u5c11\uff0c\u6240\u4ee5\u91c7\u7528\u6807\u8bb0-\u590d\u5236\u7b97\u6cd5\u3002\u65b0\u5bf9\u8c61\u5728Eden\u533a\u5206\u914d\uff0c\u5f53Eden\u533a\u6ee1\u65f6\u89e6\u53d1Minor GC\uff0c\u5b58\u6d3b\u7684\u5bf9\u8c61\u4f1a\u88ab\u590d\u5236\u5230\u5176\u4e2d\u4e00\u4e2aSurvivor\u533a\uff08\u6bd4\u5982S0\uff09\uff0c\u540c\u65f6\u5bf9\u8c61\u7684\u201c\u5e74\u9f84\u201d\u52a01\u3002\u4e0b\u6b21GC\u65f6\uff0cEden\u548cS0\u4e2d\u7684\u5b58\u6d3b\u5bf9\u8c61\u4f1a\u4e00\u8d77\u88ab\u590d\u5236\u5230S1\u533a\u3002\u5982\u6b64\u53cd\u590d\uff0c\u5f53\u4e00\u4e2a\u5bf9\u8c61\u7684\u5e74\u9f84\u8fbe\u5230\u4e00\u5b9a\u9608\u503c\uff08\u9ed8\u8ba415\uff09\uff0c\u5b83\u5c31\u4f1a\u88ab\u201c\u664b\u5347\u201d\u5230\u8001\u5e74\u4ee3\u3002</li> </ul> </li> <li> <p>\u8001\u5e74\u4ee3\uff08Old Generation\uff09\uff1a</p> <ul> <li>\u7279\u70b9\uff1a\u5b58\u653e\u751f\u547d\u5468\u671f\u957f\u7684\u5bf9\u8c61\uff0c\u6216\u8005\u4e00\u4e9b\u65e0\u6cd5\u5728\u65b0\u751f\u4ee3\u5206\u914d\u7684\u5927\u5bf9\u8c61\u3002</li> <li>\u56de\u6536\u7b97\u6cd5\uff1a\u8001\u5e74\u4ee3GC\uff08\u79f0\u4e3aMajor GC\u6216Full GC\uff09\u7684\u9891\u7387\u8f83\u4f4e\u3002\u7531\u4e8e\u5b58\u6d3b\u5bf9\u8c61\u591a\uff0c\u4e0d\u9002\u5408\u590d\u5236\u7b97\u6cd5\uff0c\u6240\u4ee5\u901a\u5e38\u91c7\u7528\u6807\u8bb0-\u6e05\u9664\u6216\u6807\u8bb0-\u6574\u7406\u7b97\u6cd5\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E7%9A%84%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/#_4","title":"\u4e3b\u8981\u7684\u5783\u573e\u56de\u6536\u5668","text":"<p>JVM\u63d0\u4f9b\u4e86\u591a\u79cd\u5783\u573e\u56de\u6536\u5668\uff0c\u5b83\u4eec\u662f\u4e0a\u8ff0\u7b97\u6cd5\u7684\u5177\u4f53\u5b9e\u73b0\uff0c\u53ef\u4ee5\u6839\u636e\u5e94\u7528\u573a\u666f\u8fdb\u884c\u9009\u62e9\u548c\u7ec4\u5408\u3002</p> <ol> <li>Serial/Serial Old\uff1a\u5355\u7ebf\u7a0b\u56de\u6536\u5668\uff0c\u7b80\u5355\u9ad8\u6548\uff0c\u4f46\u4f1a\u4ea7\u751f\u8f83\u957f\u7684\u201cStop-The-World\u201d\uff08STW\uff0c\u5373\u6682\u505c\u6240\u6709\u7528\u6237\u7ebf\u7a0b\uff09\uff0c\u9002\u7528\u4e8e\u5ba2\u6237\u7aef\u6a21\u5f0f\u3002</li> <li>Parallel Scavenge/Parallel Old\uff1a\u591a\u7ebf\u7a0b\u7248\u672c\u7684Serial\uff0c\u5173\u6ce8\u541e\u5410\u91cf\uff08\u7528\u6237\u4ee3\u7801\u8fd0\u884c\u65f6\u95f4 / (\u7528\u6237\u4ee3\u7801\u8fd0\u884c\u65f6\u95f4 + GC\u65f6\u95f4)\uff09\uff0c\u662fJDK 8\u7684\u9ed8\u8ba4\u56de\u6536\u5668\u3002</li> <li>CMS (Concurrent Mark Sweep)\uff1a\u7b2c\u4e00\u4e2a\u4ee5\u83b7\u53d6\u6700\u77ed\u56de\u6536\u505c\u987f\u65f6\u95f4\u4e3a\u76ee\u6807\u7684\u56de\u6536\u5668\uff0c\u5173\u6ce8\u4f4e\u5ef6\u8fdf\u3002\u5b83\u5728\u6807\u8bb0\u548c\u6e05\u9664\u9636\u6bb5\u5927\u90e8\u5206\u5de5\u4f5c\u53ef\u4ee5\u548c\u7528\u6237\u7ebf\u7a0b\u5e76\u53d1\u6267\u884c\uff0c\u4f46\u57fa\u4e8e\u6807\u8bb0-\u6e05\u9664\uff0c\u4f1a\u4ea7\u751f\u5185\u5b58\u788e\u7247\u3002</li> <li>G1 (Garbage-First)\uff1aJDK 9\u53ca\u4ee5\u540e\u7684\u9ed8\u8ba4\u56de\u6536\u5668\uff0c\u662f\u4e00\u4e2a\u91cc\u7a0b\u7891\u5f0f\u7684\u5b58\u5728\u3002\u5b83\u5c06\u5806\u5212\u5206\u4e3a\u591a\u4e2a\u72ec\u7acb\u7684\u533a\u57df\uff08Region\uff09\uff0c\u5e76\u8ddf\u8e2a\u6bcf\u4e2aRegion\u91cc\u5783\u573e\u7684\u4ef7\u503c\uff0c\u5728\u6709\u9650\u7684\u65f6\u95f4\u5185\u4f18\u5148\u56de\u6536\u4ef7\u503c\u6700\u5927\u7684Region\u3002\u5b83\u5728\u5b8f\u89c2\u4e0a\u662f\u6807\u8bb0-\u6574\u7406\uff0c\u5c40\u90e8\u770b\u662f\u6807\u8bb0-\u590d\u5236\uff0c\u80fd\u5f88\u597d\u5730\u5e73\u8861\u541e\u5410\u91cf\u548c\u4f4e\u5ef6\u8fdf\u3002</li> <li>ZGC / Shenandoah\uff1a\u6700\u65b0\u7684\u8d85\u4f4e\u5ef6\u8fdf\u56de\u6536\u5668\uff0c\u8ffd\u6c42\u5728\u4efb\u4f55\u5806\u5927\u5c0f\u4e0b\u90fd\u80fd\u5c06STW\u65f6\u95f4\u63a7\u5236\u5728\u51e0\u6beb\u79d2\u4ee5\u5185\uff0c\u51e0\u4e4e\u5168\u7a0b\u5e76\u53d1\uff0c\u662f\u672a\u6765\u53d1\u5c55\u7684\u65b9\u5411\u3002</li> </ol> <p>\u603b\u7ed3\u6765\u8bf4\uff0cJVM\u7684GC\u673a\u5236\u662f\u4e00\u4e2a\u7cbe\u5bc6\u4e14\u81ea\u9002\u5e94\u7684\u7cfb\u7edf\u3002\u5b83\u901a\u8fc7\u53ef\u8fbe\u6027\u5206\u6790\u627e\u5230\u5783\u573e\uff0c\u7136\u540e\u57fa\u4e8e\u5206\u4ee3\u7406\u8bba\uff0c\u5728\u4e0d\u540c\u533a\u57df\u91c7\u7528\u6700\u5408\u9002\u7684\u56de\u6536\u7b97\u6cd5\uff08\u5982\u65b0\u751f\u4ee3\u7528\u590d\u5236\uff0c\u8001\u5e74\u4ee3\u7528\u6807\u8bb0-\u6574\u7406\uff09\uff0c\u5e76\u901a\u8fc7\u5177\u4f53\u7684\u56de\u6536\u5668\uff08\u5982G1\uff09\u6765\u6267\u884c\uff0c\u6700\u7ec8\u76ee\u6807\u662f\u5728\u541eTP\u91cf\u548c\u5ef6\u8fdf\u4e4b\u95f4\u627e\u5230\u6700\u4f73\u5e73\u8861\u70b9\uff0c\u5b9e\u73b0\u9ad8\u6548\u7684\u81ea\u52a8\u5316\u5185\u5b58\u7ba1\u7406\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E7%9B%91%E8%A7%86%E5%99%A8%E9%94%81%E6%98%AF%E4%BB%80%E4%B9%88/","title":"JVM\u76d1\u89c6\u5668\u9501\u662f\u4ec0\u4e48","text":"<p>JVM\u76d1\u89c6\u5668\u9501\u662fJava\u865a\u62df\u673a\u5185\u90e8\u7528\u6765\u5b9e\u73b0\u7ebf\u7a0b\u540c\u6b65\u7684\u4e00\u79cd\u673a\u5236\u3002\u5b83\u662f<code>synchronized</code>\u5173\u952e\u5b57\u80cc\u540e\u7684\u6838\u5fc3\u6280\u672f\uff0c\u786e\u4fdd\u5728\u540c\u4e00\u65f6\u523b\uff0c\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u53ef\u4ee5\u6267\u884c\u88ab<code>synchronized</code>\u4fee\u9970\u7684\u4ee3\u7801\u5757\u6216\u65b9\u6cd5\uff0c\u4ece\u800c\u4fdd\u8bc1\u4e86\u7ebf\u7a0b\u5b89\u5168\u3002</p> <p>\u4f60\u53ef\u4ee5\u628a\u76d1\u89c6\u5668\u60f3\u8c61\u6210\u4e00\u4e2a\u4e0e\u6bcf\u4e2aJava\u5bf9\u8c61\u5173\u8054\u7684\u201c\u7279\u6b8a\u623f\u95f4\u201d\u3002\u8fd9\u4e2a\u623f\u95f4\u6709\u4e00\u4e2a\u552f\u4e00\u7684\u9501\uff0c\u5e76\u4e14\u6709\u7279\u5b9a\u7684\u89c4\u5219\u6765\u7ba1\u7406\u60f3\u8981\u8fdb\u5165\u7684\u7ebf\u7a0b\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E7%9B%91%E8%A7%86%E5%99%A8%E9%94%81%E6%98%AF%E4%BB%80%E4%B9%88/#_1","title":"\u76d1\u89c6\u5668\u9501\u7684\u6838\u5fc3\u7ec4\u6210\u90e8\u5206","text":"<p>\u6bcf\u4e2aJava\u5bf9\u8c61\u5728JVM\u5c42\u9762\u90fd\u4e0e\u4e00\u4e2a\u76d1\u89c6\u5668\uff08Monitor\uff09\u76f8\u5173\u8054\u3002\u8fd9\u4e2a\u76d1\u89c6\u5668\u4e3b\u8981\u7531\u4ee5\u4e0b\u4e09\u4e2a\u90e8\u5206\u7ec4\u6210\uff1a</p> <ol> <li>\u4e00\u4e2a\u7279\u6b8a\u7684\u6240\u6709\u8005\uff08Owner\uff09\u5b57\u6bb5: \u8fd9\u4e2a\u5b57\u6bb5\u7528\u4e8e\u8bb0\u5f55\u5f53\u524d\u54ea\u4e2a\u7ebf\u7a0b\u6301\u6709\u4e86\u8be5\u76d1\u89c6\u5668\u9501\u3002\u5728\u4efb\u610f\u65f6\u523b\uff0c\u8fd9\u4e2a\u5b57\u6bb5\u6700\u591a\u53ea\u80fd\u6307\u5411\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u6216\u8005\u4e3a<code>null</code>\uff08\u8868\u793a\u9501\u672a\u88ab\u4efb\u4f55\u7ebf\u7a0b\u6301\u6709\uff09\u3002</li> <li>\u4e00\u4e2a\u5165\u53e3\u96c6\uff08Entry Set\uff09: \u8fd9\u662f\u4e00\u4e2a\u7b49\u5f85\u961f\u5217\uff0c\u7528\u4e8e\u5b58\u653e\u6240\u6709\u5c1d\u8bd5\u83b7\u53d6\u4f46\u5c1a\u672a\u83b7\u5f97\u8be5\u76d1\u89c6\u5668\u9501\u7684\u963b\u585e\u7ebf\u7a0b\u3002\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u8bd5\u56fe\u8fdb\u5165\u4e00\u4e2a\u5df2\u88ab\u5360\u7528\u7684<code>synchronized</code>\u4ee3\u7801\u5757\u65f6\uff0c\u5b83\u5c31\u4f1a\u88ab\u653e\u5165\u8fd9\u4e2a\u5165\u53e3\u96c6\u4e2d\u7b49\u5f85\u3002</li> <li>\u4e00\u4e2a\u7b49\u5f85\u96c6\uff08Wait Set\uff09: \u8fd9\u662f\u53e6\u4e00\u4e2a\u7b49\u5f85\u961f\u5217\uff0c\u7528\u4e8e\u5b58\u653e\u8c03\u7528\u4e86\u8be5\u5bf9\u8c61<code>wait()</code>\u65b9\u6cd5\u7684\u7ebf\u7a0b\u3002\u8fd9\u4e9b\u7ebf\u7a0b\u662f\u4e3b\u52a8\u91ca\u653e\u4e86\u76d1\u89c6\u5668\u9501\u5e76\u8fdb\u5165\u7b49\u5f85\u72b6\u6001\uff0c\u7b49\u5f85\u88ab\u5176\u4ed6\u7ebf\u7a0b\u901a\u8fc7<code>notify()</code>\u6216<code>notifyAll()</code>\u5524\u9192\u3002</li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E7%9B%91%E8%A7%86%E5%99%A8%E9%94%81%E6%98%AF%E4%BB%80%E4%B9%88/#_2","title":"\u76d1\u89c6\u5668\u9501\u7684\u5de5\u4f5c\u6d41\u7a0b","text":"<p>\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u9047\u5230<code>synchronized</code>\u5173\u952e\u5b57\u65f6\uff0c\u5176\u5de5\u4f5c\u6d41\u7a0b\u5982\u4e0b\uff1a</p> <ol> <li> <p>\u5c1d\u8bd5\u83b7\u53d6\u9501:</p> <ul> <li>\u7ebf\u7a0b\u4f1a\u5c1d\u8bd5\u83b7\u53d6\u4e0e\u8be5\u5bf9\u8c61\u5173\u8054\u7684\u76d1\u89c6\u5668\u9501\u3002</li> <li>\u5b83\u4f1a\u68c0\u67e5\u76d1\u89c6\u5668\u7684<code>Owner</code>\u5b57\u6bb5\u662f\u5426\u4e3a<code>null</code>\u3002</li> <li>\u5982\u679c\u4e3a<code>null</code>\uff0c\u8868\u793a\u9501\u662f\u7a7a\u95f2\u7684\uff0c\u8be5\u7ebf\u7a0b\u5c06\u6210\u529f\u83b7\u53d6\u9501\uff0c\u5e76\u5c06\u76d1\u89c6\u5668\u7684<code>Owner</code>\u5b57\u6bb5\u8bbe\u7f6e\u4e3a\u81ea\u5df1\u3002\u7136\u540e\uff0c\u5b83\u53ef\u4ee5\u8fdb\u5165<code>synchronized</code>\u4ee3\u7801\u5757\u6267\u884c\u3002</li> </ul> </li> <li> <p>\u83b7\u53d6\u9501\u5931\u8d25\uff08\u9501\u5df2\u88ab\u5360\u7528\uff09:</p> <ul> <li>\u5982\u679c\u7ebf\u7a0b\u53d1\u73b0\u76d1\u89c6\u5668\u7684<code>Owner</code>\u5b57\u6bb5\u6307\u5411\u7684\u662f\u53e6\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u8868\u793a\u9501\u5df2\u88ab\u5360\u7528\u3002</li> <li>\u6b64\u65f6\uff0c\u8be5\u7ebf\u7a0b\u7684\u6267\u884c\u4f1a\u53d7\u963b\uff0c\u5b83\u5c06\u88ab\u653e\u5165\u8be5\u76d1\u89c6\u5668\u7684\u5165\u53e3\u96c6\uff08Entry Set\uff09\u4e2d\uff0c\u5e76\u8fdb\u5165\u963b\u585e\u72b6\u6001\uff08BLOCKED\uff09\u3002</li> </ul> </li> <li> <p>\u91ca\u653e\u9501:</p> <ul> <li>\u5f53\u6301\u6709\u9501\u7684\u7ebf\u7a0b\u6267\u884c\u5b8c\u6bd5<code>synchronized</code>\u4ee3\u7801\u5757\u6216\u65b9\u6cd5\u540e\uff08\u65e0\u8bba\u662f\u6b63\u5e38\u9000\u51fa\u8fd8\u662f\u56e0\u5f02\u5e38\u9000\u51fa\uff09\uff0c\u5b83\u4f1a\u81ea\u52a8\u91ca\u653e\u8fd9\u4e2a\u76d1\u89c6\u5668\u9501\u3002</li> <li>\u91ca\u653e\u9501\u7684\u64cd\u4f5c\u5305\u62ec\u5c06\u76d1\u89c6\u5668\u7684<code>Owner</code>\u5b57\u6bb5\u91cd\u65b0\u8bbe\u7f6e\u4e3a<code>null</code>\u3002</li> </ul> </li> <li> <p>\u5524\u9192\u7b49\u5f85\u7684\u7ebf\u7a0b:</p> <ul> <li>\u9501\u88ab\u91ca\u653e\u540e\uff0cJVM\u4f1a\u4ece\u8be5\u76d1\u89c6\u5668\u7684\u5165\u53e3\u96c6\uff08Entry Set\uff09\u4e2d\u5524\u9192\u4e00\u4e2a\u6216\u591a\u4e2a\u7b49\u5f85\u7684\u7ebf\u7a0b\uff08\u5177\u4f53\u5524\u9192\u54ea\u4e2a\u7ebf\u7a0b\u662f\u4e0d\u786e\u5b9a\u7684\uff0c\u53d6\u51b3\u4e8eJVM\u7684\u8c03\u5ea6\u7b56\u7565\uff09\u3002</li> <li>\u88ab\u5524\u9192\u7684\u7ebf\u7a0b\u4f1a\u518d\u6b21\u5c1d\u8bd5\u83b7\u53d6\u9501\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u4f1a\u4ea7\u751f\u7ade\u4e89\uff0c\u6700\u7ec8\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u80fd\u6210\u529f\u83b7\u53d6\u9501\u5e76\u7ee7\u7eed\u6267\u884c\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E7%9B%91%E8%A7%86%E5%99%A8%E9%94%81%E6%98%AF%E4%BB%80%E4%B9%88/#wait-notify-notifyall","title":"\u76d1\u89c6\u5668\u9501\u4e0e <code>wait()</code> / <code>notify()</code> / <code>notifyAll()</code> \u7684\u4ea4\u4e92","text":"<p>\u76d1\u89c6\u5668\u9501\u4e0d\u4ec5\u5b9e\u73b0\u4e86\u4e92\u65a5\uff08Mutual Exclusion\uff09\uff0c\u8fd8\u652f\u6301\u7ebf\u7a0b\u95f4\u7684\u534f\u4f5c\uff0c\u8fd9\u5c31\u8981\u4f9d\u9760<code>wait()</code>\u3001<code>notify()</code>\u548c<code>notifyAll()</code>\u8fd9\u4e09\u4e2a\u65b9\u6cd5\u3002</p> <ul> <li> <p><code>wait()</code>:</p> <ol> <li>\u4e00\u4e2a\u7ebf\u7a0b\u5fc5\u987b\u9996\u5148\u6301\u6709\u5bf9\u8c61\u7684\u76d1\u89c6\u5668\u9501\uff0c\u624d\u80fd\u8c03\u7528\u8be5\u5bf9\u8c61\u7684<code>wait()</code>\u65b9\u6cd5\u3002</li> <li>\u8c03\u7528<code>wait()</code>\u540e\uff0c\u8be5\u7ebf\u7a0b\u4f1a\u7acb\u5373\u91ca\u653e\u5b83\u6301\u6709\u7684\u76d1\u89c6\u5668\u9501\u3002</li> <li>\u7136\u540e\uff0c\u8be5\u7ebf\u7a0b\u4f1a\u88ab\u653e\u5165\u8be5\u76d1\u89c6\u5668\u7684\u7b49\u5f85\u96c6\uff08Wait Set\uff09\u4e2d\uff0c\u5e76\u8fdb\u5165\u7b49\u5f85\u72b6\u6001\uff08WAITING \u6216 TIMED_WAITING\uff09\u3002</li> <li>\u5b83\u4f1a\u4e00\u76f4\u5728\u6b64\u7b49\u5f85\uff0c\u76f4\u5230\u88ab\u5176\u4ed6\u7ebf\u7a0b\u5524\u9192\u3002</li> </ol> </li> <li> <p><code>notify()</code> / <code>notifyAll()</code>:</p> <ol> <li>\u4e00\u4e2a\u7ebf\u7a0b\u4e5f\u5fc5\u987b\u9996\u5148\u6301\u6709\u5bf9\u8c61\u7684\u76d1\u89c6\u5668\u9501\uff0c\u624d\u80fd\u8c03\u7528\u8be5\u5bf9\u8c61\u7684<code>notify()</code>\u6216<code>notifyAll()</code>\u65b9\u6cd5\u3002</li> <li><code>notify()</code>\u4f1a\u4ece\u7b49\u5f85\u96c6\uff08Wait Set\uff09\u4e2d\u968f\u673a\u9009\u62e9\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u5e76\u5c06\u5176\u5524\u9192\u3002\u88ab\u5524\u9192\u7684\u7ebf\u7a0b\u4f1a\u88ab\u79fb\u52a8\u5230\u5165\u53e3\u96c6\uff08Entry Set\uff09\u4e2d\uff0c\u51c6\u5907\u91cd\u65b0\u7ade\u4e89\u9501\u3002</li> <li><code>notifyAll()</code>\u5219\u4f1a\u5524\u9192\u7b49\u5f85\u96c6\uff08Wait Set\uff09\u4e2d\u6240\u6709\u7684\u7ebf\u7a0b\uff0c\u5e76\u5c06\u5b83\u4eec\u5168\u90e8\u79fb\u52a8\u5230\u5165\u53e3\u96c6\uff08Entry Set\uff09\u4e2d\uff0c\u8ba9\u5b83\u4eec\u4e00\u8d77\u53bb\u7ade\u4e89\u9501\u3002</li> <li>\u975e\u5e38\u91cd\u8981\u7684\u4e00\u70b9\uff1a\u8c03\u7528<code>notify()</code>\u6216<code>notifyAll()</code>\u7684\u7ebf\u7a0b\u5e76\u4e0d\u4f1a\u7acb\u5373\u91ca\u653e\u9501\u3002\u5b83\u5fc5\u987b\u7b49\u5230\u81ea\u5df1\u6267\u884c\u5b8c<code>synchronized</code>\u4ee3\u7801\u5757\u540e\uff0c\u624d\u4f1a\u91ca\u653e\u9501\u3002\u8fd9\u65f6\uff0c\u90a3\u4e9b\u88ab\u5524\u9192\u5e76\u79fb\u52a8\u5230\u5165\u53e3\u96c6\u7684\u7ebf\u7a0b\u624d\u6709\u673a\u4f1a\u53bb\u83b7\u53d6\u9501\u3002</li> </ol> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E8%B0%83%E4%BC%98%E6%80%9D%E8%B7%AF/","title":"JVM\u8c03\u4f18\u601d\u8def","text":"<p>JVM\uff08Java\u865a\u62df\u673a\uff09\u8c03\u4f18\u662f\u4e00\u9879\u590d\u6742\u800c\u7cfb\u7edf\u7684\u4efb\u52a1\uff0c\u65e8\u5728\u901a\u8fc7\u8c03\u6574JVM\u7684\u5404\u9879\u53c2\u6570\u6765\u4f18\u5316Java\u5e94\u7528\u7a0b\u5e8f\u7684\u8fd0\u884c\u6548\u7387\u3001\u63d0\u9ad8\u541e\u5410\u91cf\u3001\u964d\u4f4e\u5ef6\u8fdf\u5e76\u51cf\u5c11\u5185\u5b58\u5360\u7528\u3002 JVM\u7684\u81ea\u52a8\u8c03\u6574\u529f\u80fd\u5728\u591a\u6570\u60c5\u51b5\u4e0b\u5df2\u8868\u73b0\u51fa\u8272\uff0c\u57fa\u672c\u521d\u59cb\u53c2\u6570\u53ef\u786e\u4fdd\u5e38\u89c1\u5e94\u7528\u7a0b\u5e8f\u7a33\u5b9a\u8fd0\u884c\uff0c\u4f46\u5bf9\u4e8e\u6027\u80fd\u8981\u6c42\u9ad8\u7684\u5e94\u7528\uff0c\u8fdb\u884c\u7cbe\u7ec6\u8c03\u4f18\u662f\u5fc5\u8981\u7684\u624b\u6bb5\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E8%B0%83%E4%BC%98%E6%80%9D%E8%B7%AF/#jvm","title":"JVM\u8c03\u4f18\u76ee\u6807","text":"<p>\u5728\u8fdb\u884cJVM\u8c03\u4f18\u4e4b\u524d\uff0c\u9996\u5148\u9700\u8981\u660e\u786e\u8c03\u4f18\u76ee\u6807\u3002\u901a\u5e38\uff0c\u6027\u80fd\u4f18\u5316\u662f\u4e00\u4e2a\u201c\u4e0d\u53ef\u80fd\u4e09\u89d2\u201d\uff1a\u541e\u5410\u91cf\uff08Throughput\uff09\u3001\u5ef6\u8fdf\uff08Latency\uff09\u548c\u5185\u5b58\u5360\u7528\uff08Footprint\uff09\u3002\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u53ea\u80fd\u9009\u62e9\u5176\u4e2d\u4e24\u4e2a\u8fdb\u884c\u4f18\u5316\uff0c\u65e0\u6cd5\u4e09\u8005\u517c\u5f97\u3002</p> <ul> <li>\u541e\u5410\u91cf\uff08Throughput\uff09\uff1a\u6307JVM\u5728\u5355\u4f4d\u65f6\u95f4\u5185\u5904\u7406\u7684\u4e8b\u52a1\u6570\u91cf\uff0c\u5373\u5e94\u7528\u7a0b\u5e8f\u6267\u884c\u65f6\u95f4\u4e0e\u5783\u573e\u56de\u6536\u65f6\u95f4\u4e4b\u6bd4\u3002</li> <li>\u5ef6\u8fdf\uff08Latency\uff09\uff1a\u6307\u5783\u573e\u56de\u6536\u4e8b\u4ef6\u6240\u9700\u7684\u505c\u987f\u65f6\u95f4\uff0c\u901a\u5e38\u8ffd\u6c42\u4f4e\u505c\u987f\u548c\u4f4eGC\u9891\u7387\u3002</li> <li>\u5185\u5b58\u5360\u7528\uff08Footprint\uff09\uff1a\u6307\u5783\u573e\u56de\u6536\u5668\u5e73\u7a33\u8fd0\u884c\u6240\u9700\u7684\u5185\u5b58\u91cf\u3002</li> </ul> <p>\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u9700\u8981\u6839\u636e\u4e1a\u52a1\u573a\u666f\u6743\u8861\u53d6\u820d\u3002\u4f8b\u5982\uff0c\u5bf9\u5b9e\u65f6\u6027\u8981\u6c42\u9ad8\u7684\u5e94\u7528\uff08\u5982\u4ea4\u6613\u7cfb\u7edf\uff09\u53ef\u80fd\u66f4\u4fa7\u91cd\u4f4e\u5ef6\u8fdf\uff0c\u800c\u5bf9\u6279\u5904\u7406\u4efb\u52a1\u53ef\u80fd\u66f4\u4fa7\u91cd\u9ad8\u541e\u5410\u91cf\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E8%B0%83%E4%BC%98%E6%80%9D%E8%B7%AF/#jvm_1","title":"JVM\u8c03\u4f18\u6b65\u9aa4","text":"<p>JVM\u8c03\u4f18\u662f\u4e00\u4e2a\u6301\u7eed\u914d\u7f6e\u4f18\u5316\u548c\u591a\u6b21\u8fed\u4ee3\u7684\u8fc7\u7a0b\uff0c\u901a\u5e38\u9075\u5faa\u4ee5\u4e0b\u7cfb\u7edf\u6027\u6b65\u9aa4\uff1a</p> <ol> <li>\u5206\u6790\u7cfb\u7edf\u8fd0\u884c\u60c5\u51b5\uff0c\u786e\u5b9a\u74f6\u9888\uff1a\u901a\u8fc7GC\u65e5\u5fd7\u548cdump\u6587\u4ef6\u5206\u6790\uff0c\u5224\u65ad\u662f\u5426\u9700\u8981\u4f18\u5316\uff0c\u786e\u5b9a\u5185\u5b58\u6ea2\u51fa\uff08OOM\uff09\u3001CPU\u98d9\u9ad8\u3001GC\u9891\u7e41\u3001GC\u505c\u987f\u65f6\u95f4\u8fc7\u957f\uff08\u8d85\u8fc71\u79d2\uff09\u7b49\u95ee\u9898\u70b9\u3002</li> <li>\u786e\u5b9aJVM\u8c03\u4f18\u91cf\u5316\u76ee\u6807\uff1a\u4f8b\u5982\uff0c\u5806\u5185\u5b58\u4f7f\u7528\u7387\u5c0f\u4e8e70%\uff0c\u8001\u5e74\u4ee3\u5185\u5b58\u4f7f\u7528\u7387\u5c0f\u4e8e70%\uff0c\u5e73\u5747GC\u505c\u987f\u65f6\u95f4\u5c0f\u4e8e1\u79d2\uff0cFull GC\u6b21\u6570\u4e3a0\u6216\u5e73\u5747\u505c\u987f\u95f4\u9694\u5927\u4e8e24\u5c0f\u65f6\u7b49\u3002</li> <li>\u786e\u5b9aJVM\u8c03\u4f18\u53c2\u6570\uff1a\u6839\u636e\u5386\u53f2JVM\u53c2\u6570\u548c\u5206\u6790\u7ed3\u679c\u8fdb\u884c\u8c03\u6574\u3002</li> <li>\u5bf9\u6bd4\u89c2\u5bdf\u8c03\u4f18\u524d\u540e\u7684\u5dee\u5f02\uff1a\u6301\u7eed\u76d1\u63a7\uff0c\u8bc4\u4f30\u4f18\u5316\u6548\u679c\u3002</li> <li>\u4e0d\u65ad\u5206\u6790\u548c\u8c03\u6574\uff1a\u8fed\u4ee3\u8fdb\u884c\uff0c\u76f4\u5230\u627e\u5230\u5408\u9002\u7684JVM\u53c2\u6570\u914d\u7f6e\u3002</li> <li>\u5c06\u53c2\u6570\u5e94\u7528\u5230\u6240\u6709\u670d\u52a1\u5668\u5e76\u8fdb\u884c\u540e\u7eed\u8ddf\u8e2a\u3002</li> </ol> <p>\u6ce8\u610f\uff1aJVM\u8c03\u4f18\u901a\u5e38\u662fJava\u6027\u80fd\u4f18\u5316\u7684\u6700\u540e\u624b\u6bb5\uff0c\u5e94\u4f18\u5148\u8003\u8651\u4ee3\u7801\u903b\u8f91\u3001\u8bbe\u8ba1\u65b9\u6848\u548c\u4e2d\u95f4\u4ef6\u74f6\u9888\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E8%B0%83%E4%BC%98%E6%80%9D%E8%B7%AF/#jvm_2","title":"JVM\u8c03\u4f18\u6838\u5fc3\u65b9\u9762","text":"<p>JVM\u8c03\u4f18\u4e3b\u8981\u6d89\u53ca\u4ee5\u4e0b\u51e0\u4e2a\u5173\u952e\u9886\u57df\uff1a</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E8%B0%83%E4%BC%98%E6%80%9D%E8%B7%AF/#1","title":"1. \u5185\u5b58\u7ba1\u7406\u8c03\u4f18","text":"<p>JVM\u5185\u5b58\u4e3b\u8981\u5206\u4e3a\u5806\u5185\u5b58\uff08Heap\uff09\u3001\u975e\u5806\u5185\u5b58\uff08Non-Heap\uff0c\u5982\u5143\u7a7a\u95f4Metaspace\uff09\u3001\u865a\u62df\u673a\u6808\uff08VM Stack\uff09\u548c\u672c\u5730\u65b9\u6cd5\u6808\uff08Native Method Stack\uff09\u7b49\u533a\u57df\u3002\u5806\u5185\u5b58\u662fGC\u7684\u4e3b\u8981\u533a\u57df\uff0c\u5206\u4e3a\u5e74\u8f7b\u4ee3\uff08Young Generation\uff09\u548c\u8001\u5e74\u4ee3\uff08Old Generation\uff09\u3002</p> <ul> <li>\u5806\u5185\u5b58\uff08Heap\uff09\uff1a<ul> <li>\u521d\u59cb\u5806\u5927\u5c0f\u4e0e\u6700\u5927\u5806\u5927\u5c0f\uff1a<ul> <li><code>-Xms&lt;size&gt;</code>\uff1a\u8bbe\u7f6eJVM\u521d\u59cb\u5806\u5927\u5c0f\u3002</li> <li><code>-Xmx&lt;size&gt;</code>\uff1a\u8bbe\u7f6eJVM\u6700\u5927\u53ef\u7528\u5185\u5b58\u3002</li> <li>\u901a\u5e38\u5efa\u8bae\u5c06<code>-Xms</code>\u548c<code>-Xmx</code>\u8bbe\u7f6e\u4e3a\u76f8\u540c\u503c\uff0c\u4ee5\u907f\u514dJVM\u5728\u5783\u573e\u56de\u6536\u540e\u91cd\u65b0\u5206\u914d\u5185\u5b58\u5e26\u6765\u7684\u6027\u80fd\u635f\u8017\u548cCPU\u5f00\u9500\u3002</li> </ul> </li> <li>\u5e74\u8f7b\u4ee3\u5927\u5c0f\uff1a<ul> <li><code>-Xmn&lt;size&gt;</code>\uff1a\u8bbe\u7f6e\u5e74\u8f7b\u4ee3\u5927\u5c0f\u3002</li> <li><code>-XX:NewRatio=N</code>\uff1a\u8bbe\u7f6e\u5e74\u8f7b\u4ee3\u4e0e\u8001\u5e74\u4ee3\u7684\u6bd4\u4f8b\uff0c\u4f8b\u5982<code>NewRatio=2</code>\u8868\u793a\u5e74\u8f7b\u4ee3\u53601/3\uff0c\u8001\u5e74\u4ee3\u53602/3\u3002</li> <li>\u5e74\u8f7b\u4ee3\uff08Young Generation\uff09\u901a\u5e38\u5305\u542b\u4e00\u4e2aEden\u533a\u548c\u4e24\u4e2aSurvivor\u533a\uff08S0\u548cS1\uff09\u3002\u5bf9\u8c61\u5728Eden\u533a\u521b\u5efa\uff0c\u7ecf\u8fc7\u591a\u6b21Minor GC\u4ecd\u5b58\u6d3b\u7684\u5bf9\u8c61\u4f1a\u88ab\u590d\u5236\u5230Survivor\u533a\uff0c\u8fbe\u5230\u4e00\u5b9a\u5e74\u9f84\u9608\u503c\u540e\u664b\u5347\u5230\u8001\u5e74\u4ee3\u3002\u5408\u7406\u5206\u914dEden\u533a\u548cSurvivor\u533a\u7684\u5927\u5c0f\uff0c\u5c3d\u91cf\u8ba9\u5bf9\u8c61\u5728\u5e74\u8f7b\u4ee3\u88ab\u56de\u6536\uff0c\u51cf\u5c11\u5bf9\u8c61\u8fc7\u65e9\u8fdb\u5165\u8001\u5e74\u4ee3\u662f\u8c03\u4f18\u7684\u5173\u952e\u3002</li> </ul> </li> <li>\u5bf9\u8c61\u664b\u5347\u8001\u5e74\u4ee3\u9608\u503c\uff1a<ul> <li><code>-XX:MaxTenuringThreshold=N</code>\uff1a\u8bbe\u7f6e\u5bf9\u8c61\u5728\u5e74\u8f7b\u4ee3\u4e2d\u7ecf\u5386Minor GC\u7684\u6b21\u6570\uff0c\u8fbe\u5230\u8be5\u9608\u503c\u540e\u664b\u5347\u8001\u5e74\u4ee3\uff0c\u9ed8\u8ba4\u503c\u4e3a15\uff08ParNew\u548cSerial\u6536\u96c6\u5668\uff09\u3002</li> <li>\u52a8\u6001\u5bf9\u8c61\u5e74\u9f84\u5224\u65ad\u673a\u5236\u4e5f\u53ef\u80fd\u5bfc\u81f4\u5bf9\u8c61\u664b\u5347\uff0c\u5f53Survivor\u533a\u4e2d\u4e00\u6279\u5bf9\u8c61\u603b\u5927\u5c0f\u8d85\u8fc7Survivor\u7a7a\u95f4\u7684\u4e00\u534a\u65f6\uff0c\u5e74\u9f84\u5927\u4e8e\u6216\u7b49\u4e8e\u8fd9\u6279\u5bf9\u8c61\u4e2d\u6700\u5927\u5e74\u9f84\u7684\u5bf9\u8c61\u5c31\u4f1a\u76f4\u63a5\u8fdb\u5165\u8001\u5e74\u4ee3\u3002</li> </ul> </li> </ul> </li> <li>\u975e\u5806\u5185\u5b58\uff08Non-Heap\uff09\uff1a<ul> <li>\u5143\u7a7a\u95f4\uff08Metaspace\uff09\uff1a\u5728JDK 8\u53ca\u4ee5\u540e\u7248\u672c\u4e2d\u53d6\u4ee3\u4e86\u6c38\u4e45\u4ee3\uff08PermGen\uff09\uff0c\u7528\u4e8e\u5b58\u50a8\u7c7b\u7684\u5143\u6570\u636e\u4fe1\u606f\uff0c\u5982\u7c7b\u7684\u7ed3\u6784\u3001\u65b9\u6cd5\u6570\u636e\u7b49\uff0c\u4f7f\u7528\u7684\u662f\u672c\u5730\u5185\u5b58\u3002</li> <li><code>-XX:MetaspaceSize</code>\uff1a\u8bbe\u7f6e\u5143\u7a7a\u95f4\u521d\u59cb\u5927\u5c0f\u3002</li> <li><code>-XX:MaxMetaspaceSize</code>\uff1a\u8bbe\u7f6e\u5143\u7a7a\u95f4\u6700\u5927\u5927\u5c0f\uff0c\u4e0d\u914d\u7f6e\u5219\u53ef\u80fd\u65e0\u9650\u5236\u5360\u7528\u7269\u7406\u5185\u5b58\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E8%B0%83%E4%BC%98%E6%80%9D%E8%B7%AF/#2-gc","title":"2. \u5783\u573e\u56de\u6536\uff08GC\uff09\u4f18\u5316","text":"<p>\u5783\u573e\u56de\u6536\u662fJava\u81ea\u52a8\u7ba1\u7406\u5185\u5b58\u7684\u673a\u5236\u3002\u4e0d\u5408\u7406\u7684GC\u914d\u7f6e\u53ef\u80fd\u5bfc\u81f4\u5e94\u7528\u7a0b\u5e8f\u6027\u80fd\u4e0b\u964d\uff0c\u5982\u957f\u65f6\u95f4\u505c\u987f\uff08Stop-The-World, STW\uff09\u3002</p> <ul> <li>\u9009\u62e9\u5408\u9002\u7684\u5783\u573e\u56de\u6536\u5668\uff1a<ul> <li>Serial\u6536\u96c6\u5668\uff1a\u5355\u7ebf\u7a0b\uff0c\u9002\u7528\u4e8e\u5355\u6838\u6216\u5ba2\u6237\u7aef\u5e94\u7528\u3002</li> <li>ParNew\u6536\u96c6\u5668\uff1aSerial\u7684\u591a\u7ebf\u7a0b\u7248\u672c\uff0c\u5e38\u4e0eCMS\u642d\u914d\u4f7f\u7528\u3002</li> <li>Parallel Scavenge\u6536\u96c6\u5668\uff1a\u541e\u5410\u91cf\u4f18\u5148\uff0c\u81ea\u9002\u5e94\u8c03\u8282\u7b56\u7565\u3002</li> <li>CMS\uff08Concurrent Mark Sweep\uff09\u6536\u96c6\u5668\uff1a\u4f4e\u5ef6\u8fdf\uff0c\u5e76\u53d1\u6807\u8bb0\u548c\u6e05\u7406\uff0c\u51cf\u5c11STW\u65f6\u95f4\uff0c\u9002\u7528\u4e8e\u5bf9\u54cd\u5e94\u65f6\u95f4\u8981\u6c42\u9ad8\u7684\u5e94\u7528\u3002\u4f46\u53ef\u80fd\u4ea7\u751f\u5185\u5b58\u788e\u7247\uff0c\u5728\u8001\u5e74\u4ee3\u5145\u6ee1\u540e\u53ef\u80fd\u9000\u5316\u4e3aSerial Old\u6536\u96c6\u5668\u3002<ul> <li><code>-XX:CMSInitiatingOccupancyFraction=N</code>\uff1a\u8bbe\u7f6eCMS\u56de\u6536\u5668\u89e6\u53d1GC\u7684\u8001\u5e74\u4ee3\u4f7f\u7528\u9608\u503c\u767e\u5206\u6bd4\uff0c\u8fc7\u4f4e\u4f1a\u589e\u52a0GC\u9891\u7387\uff0c\u8fc7\u9ad8\u53ef\u80fd\u5bfc\u81f4\u5e76\u53d1\u6a21\u5f0f\u5931\u8d25\u3002</li> <li><code>-XX:+UseCMSCompactAtFullCollection</code>\uff1a\u5728Full GC\u540e\u8fdb\u884c\u5185\u5b58\u788e\u7247\u6574\u7406\uff0c\u4f46\u4f1a\u5ef6\u957fGC\u65f6\u95f4\u3002</li> </ul> </li> <li>G1\uff08Garbage-First\uff09\u6536\u96c6\u5668\uff1aJDK 7\u5f15\u5165\uff0cJDK 9\u9ed8\u8ba4GC\u7b97\u6cd5\uff0c\u76ee\u6807\u662f\u53d6\u4ee3CMS\u3002\u5177\u5907\u5206\u533a\u6982\u5ff5\uff0c\u53ef\u9884\u6d4b\u505c\u987f\u65f6\u95f4\uff0c\u5728\u4f4e\u5ef6\u8fdf\u548c\u9ad8\u541e\u5410\u4e4b\u95f4\u5bfb\u627e\u5e73\u8861\uff0c\u9002\u7528\u4e8e\u5927\u5806\u5185\u5b58\uff08\u6570\u5341GB\u6216\u66f4\u5927\uff09\u3002<ul> <li><code>-XX:+UseG1GC</code>\uff1a\u542f\u7528G1\u6536\u96c6\u5668\u3002</li> <li><code>-XX:MaxGCPauseMillis=N</code>\uff1a\u8bbe\u7f6eGC\u6700\u5927\u505c\u987f\u65f6\u95f4\u7684\u76ee\u6807\uff0cG1\u4f1a\u5c1d\u8bd5\u8fbe\u5230\u6b64\u76ee\u6807\u3002</li> </ul> </li> <li>ZGC\u548cShenandoah\u6536\u96c6\u5668\uff1aJDK 11\u548cJDK 12\u5f15\u5165\u7684\u4f4e\u5ef6\u8fdf\u6536\u96c6\u5668\uff0c\u51e0\u4e4e\u4e0d\u6682\u505c\u7528\u6237\u7ebf\u7a0b\uff0c\u9002\u7528\u4e8e\u5bf9\u5ef6\u8fdf\u8981\u6c42\u6781\u9ad8\u7684\u5e94\u7528\u573a\u666f\u3002</li> </ul> </li> <li>GC\u65e5\u5fd7\u5206\u6790\uff1a<ul> <li><code>-XX:+PrintGCDetails</code>\uff1a\u8f93\u51fa\u8be6\u7ec6GC\u65e5\u5fd7\u3002</li> <li><code>-XX:+PrintGCDateStamps</code>\uff1aGC\u65e5\u5fd7\u6253\u5370\u65e5\u671f\u65f6\u95f4\u6233\u3002</li> <li><code>-XX:+PrintGCTimeStamps</code>\uff1aGC\u65e5\u5fd7\u6253\u5370\u65f6\u95f4\u6233\u3002</li> <li>\u901a\u8fc7\u5206\u6790GC\u65e5\u5fd7\uff08\u4f7f\u7528GCEasy\u7b49\u5de5\u5177\u53ef\u89c6\u5316\uff09\u53ef\u4ee5\u4e86\u89e3GC\u7684\u9891\u7387\u3001\u505c\u987f\u65f6\u95f4\u3001\u5806\u4f7f\u7528\u60c5\u51b5\uff0c\u4ece\u800c\u6307\u5bfc\u8c03\u4f18\u3002</li> </ul> </li> <li>\u51cf\u5c11Full GC\u9891\u7387\uff1aFull GC\u4f1a\u6682\u505c\u6240\u6709\u5e94\u7528\u7ebf\u7a0b\uff0c\u5bf9\u6027\u80fd\u5f71\u54cd\u5927\u3002\u5e94\u5c3d\u91cf\u907f\u514d\u5bf9\u8c61\u9891\u7e41\u8fdb\u5165\u8001\u5e74\u4ee3\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E8%B0%83%E4%BC%98%E6%80%9D%E8%B7%AF/#3-jitjust-in-time","title":"3. JIT\uff08Just-In-Time\uff09\u7f16\u8bd1\u5668\u4f18\u5316","text":"<p>JIT\u7f16\u8bd1\u5668\u5728\u8fd0\u884c\u65f6\u5c06\u70ed\u70b9\uff08\u9891\u7e41\u6267\u884c\uff09\u7684Java\u5b57\u8282\u7801\u52a8\u6001\u7f16\u8bd1\u6210\u672c\u5730\u673a\u5668\u7801\uff0c\u4ee5\u63d0\u9ad8\u6267\u884c\u6548\u7387\u3002</p> <ul> <li>\u70ed\u70b9\u4ee3\u7801\u8bc6\u522b\uff1aJVM\u901a\u8fc7\u76d1\u63a7\u7a0b\u5e8f\u7684\u6267\u884c\u60c5\u51b5\u6765\u53d1\u73b0\u70ed\u70b9\u4ee3\u7801\u3002</li> <li>\u7f16\u8bd1\u9608\u503c\uff1a<ul> <li><code>-XX:CompileThreshold</code>\uff1a\u8bbe\u7f6e\u65b9\u6cd5\u88ab\u8c03\u7528\u6b21\u6570\u7684\u9608\u503c\uff0c\u8fbe\u5230\u6b64\u9608\u503c\u540eJIT\u4f1a\u4ecb\u5165\u7f16\u8bd1\u3002</li> </ul> </li> <li>\u4f18\u5316\u6280\u672f\uff1aJIT\u7f16\u8bd1\u5668\u4f1a\u8fdb\u884c\u591a\u79cd\u4f18\u5316\uff0c\u5982\u65b9\u6cd5\u5185\u8054\uff08Inlining\uff09\u3001\u516c\u5171\u5b50\u8868\u8fbe\u5f0f\u6d88\u9664\u3001\u9003\u9038\u5206\u6790\uff08Escape Analysis\uff09\u3001\u6808\u4e0a\u5206\u914d\uff08Stack Allocation\uff09\u3001\u6807\u91cf\u66ff\u6362\uff08Scalar Replacement\uff09\u3001\u9501\u6d88\u9664\uff08Lock Elimination\uff09\u7b49\uff0c\u8fd9\u4e9b\u6280\u672f\u80fd\u51cf\u5c11\u5185\u5b58\u5206\u914d\u3001\u964d\u4f4e\u540c\u6b65\u5f00\u9500\uff0c\u4ece\u800c\u63d0\u5347\u6027\u80fd\u3002</li> <li>JIT\u7f16\u8bd1\u7ebf\u7a0b\uff1a\u53ef\u4ee5\u901a\u8fc7<code>-XcompilationThreads</code>\u8c03\u6574JIT\u7f16\u8bd1\u7ebf\u7a0b\u6570\uff0c\u4ee5\u52a0\u5feb\u542f\u52a8\u901f\u5ea6\uff0c\u4f46\u9700\u8003\u8651CPU\u6838\u5fc3\u6570\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E8%B0%83%E4%BC%98%E6%80%9D%E8%B7%AF/#4","title":"4. \u7ebf\u7a0b\u7ba1\u7406\u8c03\u4f18","text":"<p>\u9ad8\u6548\u7684\u7ebf\u7a0b\u7ba1\u7406\u5bf9\u4e8e\u6700\u5927\u5316\u5e76\u53d1\u548c\u541e\u5410\u91cf\u81f3\u5173\u91cd\u8981\u3002</p> <ul> <li>\u7ebf\u7a0b\u6c60\u4f18\u5316\uff1a<ul> <li>\u6838\u5fc3\u7ebf\u7a0b\u6570\u4e0e\u6700\u5927\u7ebf\u7a0b\u6570\uff1a\u6839\u636eCPU\u5bc6\u96c6\u578b\u6216I/O\u5bc6\u96c6\u578b\u4efb\u52a1\u8c03\u6574\u3002CPU\u5bc6\u96c6\u578b\u4efb\u52a1\u901a\u5e38\u8bbe\u7f6e\u4e3aCPU\u6838\u5fc3\u6570\u6216\u6838\u5fc3\u6570+1\uff1bI/O\u5bc6\u96c6\u578b\u4efb\u52a1\u53ef\u9002\u5f53\u8c03\u5927\u3002</li> <li>\u4efb\u52a1\u961f\u5217\uff1a\u9009\u62e9\u5408\u9002\u7684\u4efb\u52a1\u961f\u5217\uff08\u5982\u6709\u9650\u963b\u585e\u961f\u5217<code>ArrayBlockingQueue</code>\u6216\u65e0\u9650\u963b\u585e\u961f\u5217<code>LinkedBlockingQueue</code>\uff09\u3002</li> </ul> </li> <li>\u6808\u5185\u5b58\u5927\u5c0f\uff1a<ul> <li><code>-Xss&lt;size&gt;</code>\uff1a\u8bbe\u7f6e\u6bcf\u4e2a\u7ebf\u7a0b\u7684\u6808\u5185\u5b58\u5927\u5c0f\uff0c\u9ed8\u8ba4\u503c\u901a\u5e38\u4e3a1MB\u3002\u8fc7\u5c0f\u53ef\u80fd\u5bfc\u81f4StackOverflowError\uff0c\u8fc7\u5927\u5219\u4f1a\u51cf\u5c11\u53ef\u521b\u5efa\u7684\u7ebf\u7a0b\u6570\uff0c\u589e\u52a0\u5185\u5b58\u6d88\u8017\u3002\u6839\u636e\u5e94\u7528\u7ebf\u7a0b\u6240\u9700\u5185\u5b58\u5927\u5c0f\u8fdb\u884c\u8c03\u6574\uff0c\u7ecf\u9a8c\u503c\u901a\u5e38\u5728128k\u5230256k\u4e4b\u95f4\u3002</li> </ul> </li> <li>\u907f\u514d\u7ebf\u7a0b\u8fc7\u591a\uff1a\u8fc7\u591a\u7684\u7ebf\u7a0b\u4f1a\u5bfc\u81f4\u9891\u7e41\u7684\u4e0a\u4e0b\u6587\u5207\u6362\uff0c\u589e\u52a0CPU\u5f00\u9500\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E8%B0%83%E4%BC%98%E6%80%9D%E8%B7%AF/#jvm_3","title":"JVM\u8c03\u4f18\u5de5\u5177","text":"<p>\u5728\u8c03\u4f18\u8fc7\u7a0b\u4e2d\uff0c\u9700\u8981\u501f\u52a9\u5404\u79cd\u5de5\u5177\u8fdb\u884c\u76d1\u63a7\u3001\u5206\u6790\u548c\u8bca\u65ad\u3002</p> <ul> <li>JDK\u81ea\u5e26\u547d\u4ee4\u884c\u5de5\u5177\uff1a<ul> <li><code>jps</code>\uff1a\u67e5\u770b\u6b63\u5728\u8fd0\u884c\u7684Java\u8fdb\u7a0bID\u3002</li> <li><code>jstat</code>\uff1a\u76d1\u63a7JVM\u7edf\u8ba1\u4fe1\u606f\uff0c\u5982GC\u60c5\u51b5\u3001\u5806\u5185\u5b58\u4f7f\u7528\u7387\u7b49\u3002</li> <li><code>jinfo</code>\uff1a\u5b9e\u65f6\u67e5\u770b\u548c\u4fee\u6539JVM\u914d\u7f6e\u53c2\u6570\u3002</li> <li><code>jmap</code>\uff1a\u751f\u6210\u5806\u5185\u5b58\u8f6c\u50a8\u5feb\u7167\uff08heapdump\u6587\u4ef6\uff09\u548c\u67e5\u770b\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\u3002</li> <li><code>jstack</code>\uff1a\u6253\u5370JVM\u4e2d\u7ebf\u7a0b\u5feb\u7167\uff0c\u7528\u4e8e\u5206\u6790\u7ebf\u7a0b\u6b7b\u9501\u3001\u7b49\u5f85\u3001\u963b\u585e\u7b49\u95ee\u9898\u3002</li> <li><code>jcmd</code>\uff1a\u591a\u529f\u80fd\u8bca\u65ad\u547d\u4ee4\uff0c\u53ef\u4ee5\u66ff\u4ee3\u4e0a\u8ff0\u4e00\u4e9b\u5de5\u5177\u7684\u529f\u80fd\u3002</li> </ul> </li> <li>\u53ef\u89c6\u5316\u76d1\u63a7\u548c\u5206\u6790\u5de5\u5177\uff1a<ul> <li>JConsole\uff1aJDK\u81ea\u5e26\u7684JMX\u56fe\u5f62\u5316\u76d1\u63a7\u5de5\u5177\uff0c\u53ef\u7528\u4e8e\u67e5\u770b\u5e94\u7528\u7a0b\u5e8f\u7684\u8fd0\u884c\u6982\u51b5\u3001\u5185\u5b58\u3001\u7ebf\u7a0b\u3001\u7c7b\u3001VM\u6982\u62ec\u7b49\u4fe1\u606f\u3002</li> <li>VisualVM\uff1aJDK\u81ea\u5e26\u7684\u53ef\u89c6\u5316\u76d1\u63a7\u5de5\u5177\uff0c\u80fd\u76d1\u63a7CPU\u3001\u5185\u5b58\u3001\u7ebf\u7a0b\u3001\u7c7b\u7b49\u4fe1\u606f\uff0c\u5e76\u53ef\u5206\u6790\u5185\u5b58\u8f6c\u50a8\u5feb\u7167\u3002</li> <li>Eclipse Memory Analyzer Tool (MAT)\uff1a\u4e13\u4e1a\u7684\u5185\u5b58\u5206\u6790\u5de5\u5177\uff0c\u7528\u4e8e\u5206\u6790\u5806\u8f6c\u50a8\u6587\u4ef6\uff0c\u67e5\u627e\u5185\u5b58\u6cc4\u6f0f\u3002</li> <li>GCEasy\uff1a\u5728\u7ebfGC\u65e5\u5fd7\u5206\u6790\u5de5\u5177\uff0c\u80fd\u5c06GC\u65e5\u5fd7\u8f6c\u6362\u4e3a\u53ef\u89c6\u5316\u7684\u62a5\u544a\u3002</li> <li>Arthas\uff1a\u963f\u91cc\u5df4\u5df4\u5f00\u6e90\u7684Java\u8bca\u65ad\u5de5\u5177\uff0c\u529f\u80fd\u5f3a\u5927\uff0c\u652f\u6301\u5728\u7ebf\u6392\u67e5\u95ee\u9898\u3002</li> <li>JProfiler/YourKit\uff1a\u5546\u4e1a\u7ea7Java Profiler\uff0c\u529f\u80fd\u66f4\u5f3a\u5927\uff0c\u5206\u6790\u66f4\u7ec6\u81f4\u3002</li> </ul> </li> <li>\u7cfb\u7edf\u76d1\u63a7\u5de5\u5177\uff1a<ul> <li>Prometheus + Grafana\uff1a\u5e38\u7528\u4e8e\u76d1\u63a7\u670d\u52a1\u5668\u7684GC\u9891\u7387\u3001CPU\u8d1f\u8f7d\u3001\u5185\u5b58\u4f7f\u7528\u3001\u54cd\u5e94\u65f6\u95f4\u7b49\u6307\u6807\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/JVM%E8%B0%83%E4%BC%98%E6%80%9D%E8%B7%AF/#_1","title":"\u603b\u7ed3","text":"<p>JVM\u8c03\u4f18\u662f\u4e00\u4e2a\u8fed\u4ee3\u3001\u8bd5\u9519\u548c\u4e0d\u65ad\u4f18\u5316\u7684\u8fc7\u7a0b\u3002\u5728\u8fdb\u884c\u8c03\u4f18\u65f6\uff0c\u52a1\u5fc5\u7ed3\u5408\u5177\u4f53\u7684\u4e1a\u52a1\u573a\u666f\u548c\u5e94\u7528\u7a0b\u5e8f\u7279\u6027\uff0c\u5207\u52ff\u76f2\u76ee\u8c03\u6574\u53c2\u6570\u3002\u7406\u89e3JVM\u7684\u5de5\u4f5c\u539f\u7406\u3001\u5185\u5b58\u6a21\u578b\u548c\u5783\u573e\u56de\u6536\u673a\u5236\u662f\u6210\u529f\u8c03\u4f18\u7684\u57fa\u7840\u3002\u901a\u8fc7\u7cfb\u7edf\u6027\u7684\u5206\u6790\u3001\u76d1\u63a7\u548c\u8c03\u6574\uff0c\u53ef\u4ee5\u663e\u8457\u63d0\u5347Java\u5e94\u7528\u7a0b\u5e8f\u7684\u6027\u80fd\u548c\u7a33\u5b9a\u6027\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E4%BB%8B%E7%BB%8D/","title":"Java\u5185\u5b58\u6a21\u578b\u4ecb\u7ecd","text":"<p>JMM\u7684\u6838\u5fc3\u76ee\u6807\u662f\u5b9a\u4e49\u7a0b\u5e8f\u4e2d\u5404\u4e2a\u53d8\u91cf\u7684\u8bbf\u95ee\u89c4\u5219\uff0c\u7279\u522b\u662f\u89e3\u51b3\u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e0b\uff0c\u7531\u4e8eCPU\u9ad8\u901f\u7f13\u5b58\u3001\u7f16\u8bd1\u5668\u4f18\u5316\u548c\u6307\u4ee4\u91cd\u6392\u5e8f\u7b49\u5e95\u5c42\u673a\u5236\uff0c\u6240\u5bfc\u81f4\u7684\u53ef\u89c1\u6027\u548c\u6709\u5e8f\u6027\u95ee\u9898\u3002</p> <p>\u7b80\u5355\u6765\u8bf4\uff0c\u5982\u679c\u6ca1\u6709JMM\uff0cJava\u7a0b\u5e8f\u5728\u591a\u6838\u5904\u7406\u5668\u4e0a\u8fd0\u884c\u65f6\uff0c\u4e00\u4e2a\u7ebf\u7a0b\u5bf9\u5171\u4eab\u53d8\u91cf\u7684\u4fee\u6539\uff0c\u5bf9\u4e8e\u5176\u4ed6\u7ebf\u7a0b\u6765\u8bf4\u53ef\u80fd\u662f\u4e0d\u53ef\u89c1\u7684\uff0c\u6216\u8005\u6267\u884c\u987a\u5e8f\u662f\u6df7\u4e71\u7684\uff0c\u4ece\u800c\u5bfc\u81f4\u5404\u79cd\u5e76\u53d1\u9519\u8bef\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E4%BB%8B%E7%BB%8D/#jmm","title":"JMM\u7684\u6838\u5fc3\u62bd\u8c61\uff1a\u4e3b\u5185\u5b58\u4e0e\u5de5\u4f5c\u5185\u5b58","text":"<p>\u4e3a\u4e86\u5b9a\u4e49\u8fd9\u5957\u89c4\u5219\uff0cJMM\u63d0\u51fa\u4e86\u4e00\u4e2a\u62bd\u8c61\u7684\u6a21\u578b\uff0c\u5c06\u5185\u5b58\u5212\u5206\u4e3a\u4e24\u4e2a\u903b\u8f91\u90e8\u5206\uff1a</p> <ol> <li> <p>\u4e3b\u5185\u5b58 (Main Memory)\uff1a     \u8fd9\u662f\u4e00\u4e2a\u6240\u6709\u7ebf\u7a0b\u5171\u4eab\u7684\u533a\u57df\uff0c\u53ef\u4ee5\u8fd1\u4f3c\u5730\u5bf9\u5e94\u4e8e\u7269\u7406\u5185\u5b58\u4e2d\u7684Java\u5806\u3002     Java\u4e2d\u6240\u6709\u7684\u5b9e\u4f8b\u53d8\u91cf\u3001\u9759\u6001\u53d8\u91cf\u90fd\u5b58\u50a8\u5728\u4e3b\u5185\u5b58\u4e2d\u3002</p> </li> <li> <p>\u5de5\u4f5c\u5185\u5b58 (Working Memory)\uff1a     \u8fd9\u662f\u6bcf\u4e2a\u7ebf\u7a0b\u79c1\u6709\u7684\u533a\u57df\uff0c\u53ef\u4ee5\u8fd1\u4f3c\u5730\u5bf9\u5e94\u4e8eCPU\u7684\u9ad8\u901f\u7f13\u5b58\u6216\u5bc4\u5b58\u5668\u3002     \u7ebf\u7a0b\u5bf9\u53d8\u91cf\u7684\u6240\u6709\u64cd\u4f5c\uff08\u8bfb\u53d6\u3001\u8d4b\u503c\u7b49\uff09\u90fd\u5fc5\u987b\u5728\u81ea\u5df1\u7684\u5de5\u4f5c\u5185\u5b58\u4e2d\u8fdb\u884c\uff0c\u800c\u4e0d\u80fd\u76f4\u63a5\u8bfb\u5199\u4e3b\u5185\u5b58\u3002     \u4e0d\u540c\u7ebf\u7a0b\u4e4b\u95f4\u4e5f\u65e0\u6cd5\u76f4\u63a5\u8bbf\u95ee\u5bf9\u65b9\u7684\u5de5\u4f5c\u5185\u5b58\uff0c\u7ebf\u7a0b\u95f4\u7684\u901a\u4fe1\u5fc5\u987b\u901a\u8fc7\u4e3b\u5185\u5b58\u6765\u5b8c\u6210\u3002</p> </li> </ol> <p>\u4e00\u4e2a\u7ebf\u7a0b\u4fee\u6539\u5171\u4eab\u53d8\u91cf\u7684\u5b8c\u6574\u6d41\u7a0b\u5982\u4e0b\uff1a 1.  Read: \u4ece\u4e3b\u5185\u5b58\u4e2d\u8bfb\u53d6\u53d8\u91cf\u7684\u503c\u3002 2.  Load: \u5c06\u8bfb\u53d6\u5230\u7684\u503c\u52a0\u8f7d\u5230\u5de5\u4f5c\u5185\u5b58\u7684\u53d8\u91cf\u526f\u672c\u4e2d\u3002 3.  Use: \u7ebf\u7a0b\u5728\u5de5\u4f5c\u5185\u5b58\u4e2d\u4f7f\u7528\u8fd9\u4e2a\u53d8\u91cf\u526f\u672c\u3002 4.  Assign: \u5c06\u8ba1\u7b97\u540e\u7684\u65b0\u503c\u8d4b\u7ed9\u5de5\u4f5c\u5185\u5b58\u4e2d\u7684\u53d8\u91cf\u526f\u672c\u3002 5.  Store: \u5c06\u5de5\u4f5c\u5185\u5b58\u4e2d\u53d8\u91cf\u526f\u672c\u7684\u65b0\u503c\uff0c\u5b58\u50a8\u5230\u4e3b\u5185\u5b58\u4e2d\u3002 6.  Write: \u5c06\u5b58\u50a8\u5230\u4e3b\u5185\u5b58\u7684\u503c\uff0c\u66f4\u65b0\u5230\u4e3b\u5185\u5b58\u7684\u53d8\u91cf\u4e2d\u3002</p> <p>JMM\u6b63\u662f\u901a\u8fc7\u5b9a\u4e49\u8fd9\u4e00\u7cfb\u5217\u64cd\u4f5c\u7684\u539f\u5b50\u6027\u3001\u53ef\u89c1\u6027\u548c\u6709\u5e8f\u6027\u89c4\u5219\uff0c\u6765\u4fdd\u8bc1\u5e76\u53d1\u7684\u6b63\u786e\u6027\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E4%BB%8B%E7%BB%8D/#jmm_1","title":"JMM\u63d0\u4f9b\u7684\u5e76\u53d1\u4fdd\u8bc1\u4e0e\u5de5\u5177","text":"<p>JMM\u4e3a\u6211\u4eec\u5f00\u53d1\u8005\u63d0\u4f9b\u4e86\u51e0\u4e2a\u5173\u952e\u7684\u201c\u6b66\u5668\u201d\uff0c\u6765\u786e\u4fdd\u6211\u4eec\u7f16\u5199\u7684\u5e76\u53d1\u7a0b\u5e8f\u80fd\u591f\u6b63\u786e\u5730\u5904\u7406\u53ef\u89c1\u6027\u548c\u6709\u5e8f\u6027\u95ee\u9898\u3002\u8fd9\u4e9b\u4fdd\u8bc1\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3aHappens-Before\u539f\u5219\u3002</p> <p>Happens-Before\u539f\u5219\u662fJMM\u7684\u6838\u5fc3\uff0c\u5b83\u5b9a\u4e49\u4e86\u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e2d\uff0c\u4e24\u4e2a\u64cd\u4f5c\u4e4b\u95f4\u5b58\u5728\u7684\u504f\u5e8f\u5173\u7cfb\u3002\u5982\u679c\u64cd\u4f5cA happens-before \u64cd\u4f5cB\uff0c\u90a3\u4e48A\u64cd\u4f5c\u7684\u7ed3\u679c\u5bf9B\u64cd\u4f5c\u662f\u53ef\u89c1\u7684\uff0c\u5e76\u4e14A\u64cd\u4f5c\u7684\u6267\u884c\u987a\u5e8f\u5728B\u64cd\u4f5c\u4e4b\u524d\u3002</p> <p>JMM\u63d0\u4f9b\u4e86\u4ee5\u4e0b\u51e0\u79cd\u65b9\u5f0f\u6765\u5efa\u7acbHappens-Before\u5173\u7cfb\uff1a</p> <ol> <li> <p>\u7a0b\u5e8f\u6b21\u5e8f\u89c4\u5219 (Program Order Rule)\uff1a     \u5728\u4e00\u4e2a\u7ebf\u7a0b\u5185\uff0c\u6309\u7167\u4ee3\u7801\u7684\u5148\u540e\u987a\u5e8f\uff0c\u524d\u9762\u7684\u64cd\u4f5chappens-before\u540e\u9762\u7684\u64cd\u4f5c\u3002\u8fd9\u662f\u5355\u7ebf\u7a0b\u5185\u6709\u5e8f\u6027\u7684\u57fa\u672c\u4fdd\u8bc1\u3002</p> </li> <li> <p>\u7ba1\u7a0b\u9501\u5b9a\u89c4\u5219 (Monitor Lock Rule)\uff1a     \u4e00\u4e2aunlock\u64cd\u4f5c happens-before \u540e\u7eed\u5bf9\u540c\u4e00\u4e2a\u9501\u7684lock\u64cd\u4f5c\u3002\u8fd9\u5c31\u662fsynchronized\u5173\u952e\u5b57\u7684\u9b54\u529b\u6240\u5728\u3002\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u91ca\u653e\u9501\u65f6\uff0c\u5b83\u4f1a\u5f3a\u5236\u5c06\u81ea\u5df1\u5de5\u4f5c\u5185\u5b58\u4e2d\u7684\u4fee\u6539\u5237\u65b0\u5230\u4e3b\u5185\u5b58\uff1b\u5f53\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u83b7\u53d6\u9501\u65f6\uff0c\u5b83\u4f1a\u6e05\u7a7a\u81ea\u5df1\u7684\u5de5\u4f5c\u5185\u5b58\uff0c\u5f3a\u5236\u4ece\u4e3b\u5185\u5b58\u52a0\u8f7d\u6700\u65b0\u7684\u503c\u3002\u8fd9\u540c\u65f6\u4fdd\u8bc1\u4e86\u539f\u5b50\u6027\u548c\u53ef\u89c1\u6027\u3002</p> </li> <li> <p>volatile\u53d8\u91cf\u89c4\u5219 (Volatile Variable Rule)\uff1a     \u5bf9\u4e00\u4e2avolatile\u53d8\u91cf\u7684\u5199\u64cd\u4f5c happens-before \u540e\u7eed\u5bf9\u8fd9\u4e2a\u53d8\u91cf\u7684\u8bfb\u64cd\u4f5c\u3002volatile\u901a\u8fc7\u5185\u5b58\u5c4f\u969c\uff0c\u5b9e\u73b0\u4e86\u4e24\u70b9\uff1a     \u4fdd\u8bc1\u53ef\u89c1\u6027\uff1a\u5199\u64cd\u4f5c\u4f1a\u7acb\u5373\u5c06\u65b0\u503c\u5237\u65b0\u5230\u4e3b\u5185\u5b58\uff0c\u5e76\u4f7f\u5176\u4ed6\u7ebf\u7a0b\u7684\u7f13\u5b58\u5931\u6548\u3002     \u7981\u6b62\u6307\u4ee4\u91cd\u6392\u5e8f\uff1a\u4fdd\u8bc1\u4e86\u4ee3\u7801\u7684\u6709\u5e8f\u6027\u3002</p> </li> <li> <p>\u7ebf\u7a0b\u542f\u52a8\u89c4\u5219 (Thread Start Rule)\uff1a     Thread\u5bf9\u8c61\u7684start()\u65b9\u6cd5 happens-before \u6b64\u7ebf\u7a0b\u7684\u4efb\u4f55\u4e00\u4e2a\u52a8\u4f5c\u3002</p> </li> <li> <p>\u7ebf\u7a0b\u7ec8\u6b62\u89c4\u5219 (Thread Termination Rule)\uff1a     \u7ebf\u7a0b\u4e2d\u7684\u6240\u6709\u64cd\u4f5c\u90fd happens-before \u5bf9\u6b64\u7ebf\u7a0b\u7684\u7ec8\u6b62\u68c0\u6d4b\uff08\u5982thread.join()\u6216thread.isAlive()\u7684\u8fd4\u56de\uff09\u3002</p> </li> <li> <p>\u7ebf\u7a0b\u4e2d\u65ad\u89c4\u5219 (Thread Interruption Rule)\uff1a     \u5bf9\u7ebf\u7a0binterrupt()\u65b9\u6cd5\u7684\u8c03\u7528 happens-before \u88ab\u4e2d\u65ad\u7ebf\u7a0b\u7684\u4ee3\u7801\u68c0\u6d4b\u5230\u4e2d\u65ad\u4e8b\u4ef6\u7684\u53d1\u751f\u3002</p> </li> <li> <p>\u4f20\u9012\u6027 (Transitivity)\uff1a     \u5982\u679cA happens-before B\uff0c\u4e14B happens-before C\uff0c\u90a3\u4e48A happens-before C\u3002</p> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E4%BB%8B%E7%BB%8D/#_1","title":"\u603b\u7ed3","text":"<p>\u603b\u800c\u8a00\u4e4b\uff0cJMM\uff08Java\u5185\u5b58\u6a21\u578b\uff09\u5e76\u4e0d\u662f\u4e00\u4e2a\u7269\u7406\u5b58\u5728\uff0c\u800c\u662f\u4e00\u5957\u6df1\u523b\u5f71\u54cd\u6211\u4eec\u5982\u4f55\u7f16\u5199\u5e76\u53d1\u7a0b\u5e8f\u7684\u89c4\u5219\u96c6\u3002 *   \u5b83\u901a\u8fc7\u4e3b\u5185\u5b58\u548c\u5de5\u4f5c\u5185\u5b58\u7684\u62bd\u8c61\uff0c\u89e3\u91ca\u4e86\u591a\u7ebf\u7a0b\u5e76\u53d1\u95ee\u9898\u7684\u6839\u6e90\u3002 *   \u5b83\u901a\u8fc7Happens-Before\u539f\u5219\uff0c\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u6e05\u6670\u7684\u3001\u8de8\u5e73\u53f0\u7684\u5185\u5b58\u53ef\u89c1\u6027\u4fdd\u8bc1\u3002 *   \u5b83\u6700\u7ec8\u901a\u8fc7\u50cfsynchronized\u3001volatile\u8fd9\u4e9b\u5173\u952e\u5b57\uff0c\u8ba9\u6211\u4eec\u5f00\u53d1\u8005\u80fd\u591f\u5728\u9700\u8981\u7684\u65f6\u5019\uff0c\u7cbe\u786e\u5730\u63a7\u5236\u7ebf\u7a0b\u95f4\u7684\u540c\u6b65\uff0c\u5199\u51fa\u6b63\u786e\u3001\u53ef\u9760\u7684\u5e76\u53d1\u7a0b\u5e8f\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/gc%E7%B1%BB%E5%9E%8B/","title":"Gc\u7c7b\u578b","text":"<p>\u5728Java\u865a\u62df\u673a\uff08JVM\uff09\u4e2d\uff0c\u5806\u5185\u5b58\u88ab\u5212\u5206\u4e3a\u4e0d\u540c\u7684\u533a\u57df\uff0c\u4ee5\u4fbf\u66f4\u6709\u6548\u5730\u7ba1\u7406\u5bf9\u8c61\u751f\u547d\u5468\u671f\u3002\u6700\u5e38\u89c1\u7684\u5206\u4ee3\u5783\u573e\u56de\u6536\u7b56\u7565\u5c06\u5806\u5206\u4e3a\u65b0\u751f\u4ee3\uff08Young Generation\uff09\u548c\u8001\u5e74\u4ee3\uff08Old Generation\uff09\u3002</p> <ul> <li>\u65b0\u751f\u4ee3\uff08Young Generation\uff09: \u8fd9\u662f\u5927\u591a\u6570\u65b0\u5bf9\u8c61\u88ab\u521b\u5efa\u7684\u5730\u65b9\u3002\u65b0\u751f\u4ee3\u5185\u90e8\u53c8\u5206\u4e3a\u4e00\u4e2a\u4f0a\u7538\u56ed\u533a\uff08Eden Space\uff09\u548c\u4e24\u4e2a\u5e78\u5b58\u533a\uff08Survivor Spaces, \u901a\u5e38\u79f0\u4e3aS0\u548cS1\uff09\u3002</li> <li>\u8001\u5e74\u4ee3\uff08Old Generation / Tenured Generation\uff09: \u7528\u4e8e\u5b58\u653e\u751f\u547d\u5468\u671f\u8f83\u957f\u7684\u5bf9\u8c61\uff0c\u8fd9\u4e9b\u5bf9\u8c61\u5728\u591a\u6b21\u65b0\u751f\u4ee3\u5783\u573e\u56de\u6536\u540e\u4ecd\u7136\u5b58\u6d3b\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/gc%E7%B1%BB%E5%9E%8B/#1-minor-gc-gc","title":"1. Minor GC (\u5e74\u8f7b\u4ee3GC)","text":"<p>Minor GC\u662f\u53d1\u751f\u5728\u65b0\u751f\u4ee3\u7684\u5783\u573e\u56de\u6536\u3002</p> <ul> <li>\u89e6\u53d1\u65f6\u673a: \u5f53\u4f0a\u7538\u56ed\u533a\u88ab\u5360\u6ee1\uff0c\u65b0\u7684\u5bf9\u8c61\u65e0\u6cd5\u5206\u914d\u7a7a\u95f4\u65f6\uff0c\u5c31\u4f1a\u89e6\u53d1Minor GC\u3002</li> <li>\u5de5\u4f5c\u6d41\u7a0b:<ol> <li>\u6807\u8bb0\u4f0a\u7538\u56ed\u533a\u548c\u5176\u4e2d\u4e00\u4e2a\u5e78\u5b58\u533a\uff08\u5047\u8bbe\u4e3aS0\uff09\u4e2d\u6240\u6709\u5b58\u6d3b\u7684\u5bf9\u8c61\u3002</li> <li>\u5c06\u8fd9\u4e9b\u5b58\u6d3b\u7684\u5bf9\u8c61\u590d\u5236\u5230\u53e6\u4e00\u4e2a\u7a7a\u7684\u5e78\u5b58\u533a\uff08S1\uff09\u3002</li> <li>\u6e05\u7a7a\u4f0a\u7538\u56ed\u533a\u548cS0\u533a\u3002</li> <li>\u5bf9\u8c61\u7684\u5e74\u9f84\u4f1a\u589e\u52a0\uff0c\u5f53\u5bf9\u8c61\u7684\u5e74\u9f84\u8fbe\u5230\u4e00\u5b9a\u9608\u503c\u540e\uff0c\u5b83\u5c06\u88ab\u63d0\u5347\u5230\u8001\u5e74\u4ee3\u3002</li> </ol> </li> <li>\u7279\u70b9: Minor GC\u975e\u5e38\u9891\u7e41\uff0c\u6267\u884c\u901f\u5ea6\u5feb\uff0c\u5e76\u4e14\u901a\u5e38\u4f1a\u5f15\u53d1\u201cStop-the-World\u201d\u6682\u505c\uff0c\u5373\u6682\u505c\u6240\u6709\u5e94\u7528\u7ebf\u7a0b\u3002\u4f46\u7531\u4e8e\u65b0\u751f\u4ee3\u901a\u5e38\u8f83\u5c0f\u4e14\u5927\u90e8\u5206\u5bf9\u8c61\u751f\u547d\u5468\u671f\u5f88\u77ed\uff0c\u6240\u4ee5\u8fd9\u4e2a\u6682\u505c\u65f6\u95f4\u975e\u5e38\u77ed\u6682\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/gc%E7%B1%BB%E5%9E%8B/#2-major-gc-gc","title":"2. Major GC (\u8001\u5e74\u4ee3GC)","text":"<p>Major GC\u662f\u9488\u5bf9\u8001\u5e74\u4ee3\u7684\u5783\u573e\u56de\u6536\u3002</p> <ul> <li>\u89e6\u53d1\u65f6\u673a: \u5f53\u8001\u5e74\u4ee3\u7a7a\u95f4\u4e0d\u8db3\u65f6\uff0c\u4f1a\u89e6\u53d1Major GC\u3002\u5f88\u591a\u65f6\u5019\uff0cMajor GC\u662f\u7531Minor GC\u89e6\u53d1\u7684\uff0c\u4f8b\u5982\u5728Minor GC\u540e\uff0c\u5b58\u6d3b\u7684\u5bf9\u8c61\u9700\u8981\u664b\u5347\u5230\u8001\u5e74\u4ee3\uff0c\u800c\u8001\u5e74\u4ee3\u7a7a\u95f4\u4e0d\u8db3\u4ee5\u5bb9\u7eb3\u5b83\u4eec\u3002</li> <li>\u5de5\u4f5c\u6d41\u7a0b: Major GC\u901a\u5e38\u4f1a\u68c0\u67e5\u8001\u5e74\u4ee3\u4e2d\u6240\u6709\u5bf9\u8c61\uff0c\u5e76\u56de\u6536\u4e0d\u518d\u4f7f\u7528\u7684\u5bf9\u8c61\u3002</li> <li>\u7279\u70b9: Major GC\u7684\u6267\u884c\u9891\u7387\u8fdc\u4f4e\u4e8eMinor GC\u3002\u7531\u4e8e\u8001\u5e74\u4ee3\u5b58\u653e\u7684\u5bf9\u8c61\u66f4\u591a\u4e14\u66f4\u590d\u6742\uff0cMajor GC\u7684\u6267\u884c\u65f6\u95f4\u901a\u5e38\u6bd4Minor GC\u957f\u5f97\u591a\uff0c\u5e76\u4e14\u4e5f\u4f1a\u5bfc\u81f4\u201cStop-the-World\u201d\uff0c\u53ef\u80fd\u5bf9\u5e94\u7528\u54cd\u5e94\u9020\u6210\u66f4\u660e\u663e\u7684\u5f71\u54cd\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/gc%E7%B1%BB%E5%9E%8B/#3-full-gc-gc","title":"3. Full GC (\u5b8c\u5168GC)","text":"<p>Full GC\u662f\u5bf9\u6574\u4e2aJava\u5806\u8fdb\u884c\u5783\u573e\u56de\u6536\uff0c\u5305\u62ec\u65b0\u751f\u4ee3\u548c\u8001\u5e74\u4ee3\uff0c\u6709\u65f6\u4e5f\u53ef\u80fd\u5305\u62ec\u5143\u7a7a\u95f4\uff08Metaspace\uff09\u3002</p> <ul> <li>\u89e6\u53d1\u65f6\u673a:<ul> <li>\u5f53\u8001\u5e74\u4ee3\u7a7a\u95f4\u4e0d\u8db3\u65f6\u3002</li> <li>\u5f53\u5143\u7a7a\u95f4\uff08\u5728Java 8\u4e4b\u524d\u662f\u6c38\u4e45\u4ee3\uff09\u7a7a\u95f4\u4e0d\u8db3\u65f6\u3002</li> <li>\u5f53\u5f00\u53d1\u8005\u663e\u5f0f\u8c03\u7528<code>System.gc()</code>\u65f6\uff08\u867d\u7136\u4e0d\u63a8\u8350\u8fd9\u6837\u505a\uff0c\u56e0\u4e3aJVM\u6709\u81ea\u5df1\u7684\u5224\u65ad\u673a\u5236\uff09\u3002</li> </ul> </li> <li>\u5de5\u4f5c\u6d41\u7a0b: Full GC\u4f1a\u6e05\u7406\u6574\u4e2a\u5806\u5185\u5b58\uff0c\u56de\u6536\u6240\u6709\u4e0d\u518d\u5b58\u6d3b\u7684\u5bf9\u8c61\u3002</li> <li>\u7279\u70b9: Full GC\u662f\u5f00\u9500\u6700\u5927\u7684\u4e00\u79cd\u5783\u573e\u56de\u6536\uff0c\u56e0\u4e3a\u5b83\u9700\u8981\u5904\u7406\u6574\u4e2a\u5806\uff0c\u5bfc\u81f4\u7684\u5e94\u7528\u6682\u505c\u65f6\u95f4\u6700\u957f\uff0c\u5e94\u8be5\u5c3d\u91cf\u907f\u514d\u9891\u7e41\u53d1\u751f\u3002</li> </ul> <p>\u91cd\u8981\u8bf4\u660e: \u5bf9\u4e8eMajor GC\u548cFull GC\u7684\u5b9a\u4e49\uff0c\u6709\u65f6\u4f1a\u5b58\u5728\u4e00\u4e9b\u6df7\u6dc6\u3002\u5728\u5f88\u591a\u60c5\u51b5\u4e0b\uff0c\u4eba\u4eec\u4f1a\u5c06\u53d1\u751f\u5728\u8001\u5e74\u4ee3\u7684GC\u79f0\u4e3aMajor GC\uff0c\u800c\u5c06\u6e05\u7406\u6574\u4e2a\u5806\u7684GC\u79f0\u4e3aFull GC\u3002 \u6709\u65f6\uff0cFull GC\u88ab\u89c6\u4e3aMajor GC\u7684\u4e00\u79cd\uff0c\u6216\u8005\u8bf4JVM\u65e5\u5fd7\u4e2d\u62a5\u544a\u7684Full GC\u5b9e\u9645\u4e0a\u662f\u5bf9\u8001\u5e74\u4ee3\u7684\u56de\u6536\u3002 \u5173\u952e\u5728\u4e8e\u7406\u89e3\u5b83\u4eec\u6240\u4f5c\u7528\u7684\u5185\u5b58\u533a\u57df\u548c\u5e26\u6765\u7684\u6027\u80fd\u5f71\u54cd\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/gc%E7%B1%BB%E5%9E%8B/#_1","title":"\u5176\u4ed6\u7c7b\u578b\u7684\u5783\u573e\u56de\u6536\u5668","text":"<p>\u9664\u4e86\u4e0a\u8ff0GC\u6d3b\u52a8\u7c7b\u578b\uff0cJVM\u8fd8\u63d0\u4f9b\u4e86\u591a\u79cd\u5783\u573e\u56de\u6536\u5668\u7684\u5177\u4f53\u5b9e\u73b0\uff0c\u5b83\u4eec\u91c7\u7528\u4e0d\u540c\u7684\u7b97\u6cd5\u548c\u7b56\u7565\u6765\u5e73\u8861\u541e\u5410\u91cf\u548c\u6682\u505c\u65f6\u95f4\u3002</p> <ol> <li> <p>Serial GC (\u4e32\u884cGC):</p> <ul> <li>\u8fd9\u662f\u6700\u7b80\u5355\u7684\u5783\u573e\u56de\u6536\u5668\uff0c\u4f7f\u7528\u5355\u4e2a\u7ebf\u7a0b\u6267\u884c\u6240\u6709GC\u4efb\u52a1\u3002</li> <li>\u5f53\u8fdb\u884c\u5783\u573e\u56de\u6536\u65f6\uff0c\u5b83\u4f1a\u6682\u505c\u6240\u6709\u5e94\u7528\u7ebf\u7a0b\uff08Stop-the-World\uff09\u3002</li> <li>\u9002\u7528\u4e8e\u5185\u5b58\u8f83\u5c0f\u3001CPU\u6838\u5fc3\u6570\u8f83\u5c11\u7684\u5355\u5904\u7406\u5668\u73af\u5883\uff0c\u6216\u8005\u5bf9\u6682\u505c\u65f6\u95f4\u4e0d\u654f\u611f\u7684\u5c0f\u578b\u5e94\u7528\u3002</li> <li>\u53ef\u4ee5\u901a\u8fc7 <code>-XX:+UseSerialGC</code> \u542f\u7528\u3002</li> </ul> </li> <li> <p>Parallel GC (\u5e76\u884cGC):</p> <ul> <li>\u4e5f\u79f0\u4e3a\u201c\u541e\u5410\u91cf\u6536\u96c6\u5668\u201d\uff0c\u662fJava 8\u7684\u9ed8\u8ba4\u5783\u573e\u56de\u6536\u5668\u3002</li> <li>\u5b83\u4f7f\u7528\u591a\u4e2a\u7ebf\u7a0b\u5e76\u884c\u5730\u6267\u884c\u65b0\u751f\u4ee3\u5783\u573e\u56de\u6536\uff0c\u4ece\u800c\u51cf\u5c11GC\u65f6\u95f4\u3002</li> <li>\u8001\u5e74\u4ee3\u7684GC\u5728\u65e9\u671f\u7248\u672c\u4e2d\u662f\u5355\u7ebf\u7a0b\u7684\uff0c\u4f46\u540e\u7eed\u4e5f\u53ef\u4ee5\u914d\u7f6e\u4e3a\u591a\u7ebf\u7a0b\u3002</li> <li>\u5b83\u7684\u76ee\u6807\u662f\u6700\u5927\u5316\u5e94\u7528\u7684\u541e\u5410\u91cf\uff0c\u9002\u5408\u4e8e\u540e\u53f0\u8ba1\u7b97\u7b49\u5bf9\u9ad8\u541e\u5410\u91cf\u6709\u8981\u6c42\u4f46\u80fd\u5bb9\u5fcd\u4e00\u5b9a\u6682\u505c\u65f6\u95f4\u7684\u573a\u666f\u3002</li> <li>\u53ef\u4ee5\u901a\u8fc7 <code>-XX:+UseParallelGC</code> \u542f\u7528\u3002</li> </ul> </li> <li> <p>Concurrent Mark Sweep (CMS) GC (\u5e76\u53d1\u6807\u8bb0\u6e05\u9664GC):</p> <ul> <li>\u8be5\u56de\u6536\u5668\u7684\u4e3b\u8981\u76ee\u6807\u662f\u6700\u5c0f\u5316\u5e94\u7528\u7684\u6682\u505c\u65f6\u95f4\u3002</li> <li>\u5b83\u5728\u5783\u573e\u56de\u6536\u7684\u5927\u90e8\u5206\u9636\u6bb5\uff08\u5982\u6807\u8bb0\u548c\u6e05\u9664\uff09\u90fd\u5141\u8bb8\u5e94\u7528\u7ebf\u7a0b\u5e76\u53d1\u6267\u884c\u3002</li> <li>\u53ea\u5728\u521d\u59cb\u6807\u8bb0\u548c\u91cd\u65b0\u6807\u8bb0\u8fd9\u4e24\u4e2a\u77ed\u6682\u9636\u6bb5\u9700\u8981\u201cStop-the-World\u201d\u3002</li> <li>\u9002\u7528\u4e8e\u5bf9\u54cd\u5e94\u65f6\u95f4\u6709\u8f83\u9ad8\u8981\u6c42\u7684\u4e2d\u5230\u5927\u578b\u5e94\u7528\u3002\u4e0d\u8fc7\uff0c\u5b83\u5728JDK 9\u4e2d\u88ab\u6807\u8bb0\u4e3a\u5e9f\u5f03\u3002</li> </ul> </li> <li> <p>G1 GC (Garbage-First GC):</p> <ul> <li>\u4e3a\u66ff\u4ee3CMS\u800c\u751f\uff0c\u9002\u7528\u4e8e\u591a\u5904\u7406\u5668\u548c\u5927\u5185\u5b58\u7684\u670d\u52a1\u5668\u3002</li> <li>\u5b83\u5c06\u5806\u5212\u5206\u4e3a\u591a\u4e2a\u5927\u5c0f\u76f8\u7b49\u7684\u533a\u57df\uff08Region\uff09\uff0c\u5e76\u4f18\u5148\u56de\u6536\u5783\u573e\u6700\u591a\u7684\u533a\u57df\uff0c\u8fd9\u4e5f\u662f\u5176\u540d\u79f0\u201cGarbage-First\u201d\u7684\u7531\u6765\u3002</li> <li>G1\u662f\u4e00\u4e2a\u5e76\u53d1\u3001\u5e76\u884c\u7684\u56de\u6536\u5668\uff0c\u5e76\u4e14\u5305\u542b\u4e86\u589e\u91cf\u538b\u7f29\uff0c\u53ef\u4ee5\u6709\u6548\u907f\u514d\u5185\u5b58\u788e\u7247\u95ee\u9898\u3002</li> <li>\u65e8\u5728\u5b9e\u73b0\u53ef\u9884\u6d4b\u7684\u4f4e\u6682\u505c\u65f6\u95f4\u3002</li> </ul> </li> <li> <p>ZGC (Z Garbage Collector):</p> <ul> <li>\u4eceJava 11\u5f00\u59cb\u5f15\u5165\uff0c\u4f5c\u4e3a\u4e00\u79cd\u53ef\u6269\u5c55\u7684\u4f4e\u5ef6\u8fdf\u5783\u573e\u56de\u6536\u5668\u3002</li> <li>\u5b83\u7684\u8bbe\u8ba1\u76ee\u6807\u662f\u5c06GC\u6682\u505c\u65f6\u95f4\u63a7\u5236\u572810\u6beb\u79d2\u4ee5\u5185\uff0c\u65e0\u8bba\u5806\u5927\u5c0f\u5982\u4f55\u3002</li> <li>\u901a\u8fc7\u4f7f\u7528\u6709\u8272\u6307\u9488\u548c\u52a0\u8f7d\u5c4f\u969c\u7b49\u6280\u672f\uff0c\u5b9e\u73b0\u4e86\u51e0\u4e4e\u6240\u6709\u5de5\u4f5c\u90fd\u5e76\u53d1\u6267\u884c\uff0c\u6781\u5927\u5730\u51cf\u5c11\u4e86\u201cStop-the-World\u201d\u7684\u65f6\u95f4\u3002</li> <li>\u975e\u5e38\u9002\u5408\u9700\u8981\u6781\u4f4e\u5ef6\u8fdf\u548c\u4f7f\u7528\u5927\u5806\u5185\u5b58\u7684\u5e94\u7528\u3002</li> </ul> </li> <li> <p>Shenandoah GC:</p> <ul> <li>\u5728JDK 12\u4e2d\u5f15\u5165\uff0c\u4e0eZGC\u7c7b\u4f3c\uff0c\u4e5f\u662f\u4e00\u79cd\u4ee5\u964d\u4f4eGC\u6682\u505c\u65f6\u95f4\u4e3a\u4e3b\u8981\u76ee\u6807\u7684\u5e76\u53d1\u5783\u573e\u56de\u6536\u5668\u3002</li> <li>\u5b83\u901a\u8fc7\u4e0e\u5e94\u7528\u7ebf\u7a0b\u5e76\u53d1\u6267\u884c\u5927\u90e8\u5206GC\u5de5\u4f5c\uff08\u5305\u62ec\u5bf9\u8c61\u6574\u7406\uff09\uff0c\u6765\u663e\u8457\u51cf\u5c11\u6682\u505c\u65f6\u95f4\u3002</li> </ul> </li> <li> <p>Epsilon GC:</p> <ul> <li>\u8fd9\u662f\u4e00\u4e2a\u201c\u65e0\u64cd\u4f5c\u201d\uff08no-op\uff09\u7684\u5783\u573e\u56de\u6536\u5668\uff0c\u53ea\u8fdb\u884c\u5185\u5b58\u5206\u914d\uff0c\u4f46\u4e0d\u56de\u6536\u4efb\u4f55\u5185\u5b58\u3002</li> <li>\u5b83\u4e3b\u8981\u7528\u4e8e\u6027\u80fd\u6d4b\u8bd5\u548c\u5206\u6790\uff0c\u4ee5\u8861\u91cf\u5e94\u7528\u5728\u6ca1\u6709GC\u5e72\u6270\u4e0b\u7684\u6027\u80fd\u57fa\u7ebf\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/javac%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B/","title":"Javac\u7f16\u8bd1\u8fc7\u7a0b","text":""},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/javac%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B/#javac","title":"<code>javac</code> \u7684\u4f5c\u7528","text":"<p><code>javac</code> \u7f16\u8bd1\u5668\u8d1f\u8d23\u5c06\u5305\u542b Java \u6e90\u4ee3\u7801\u7684 <code>.java</code> \u6587\u4ef6\u8f6c\u6362\u6210\u5e73\u53f0\u65e0\u5173\u7684\u5b57\u8282\u7801\u6587\u4ef6\u3002\u8fd9\u4e9b\u5b57\u8282\u7801\u6587\u4ef6\u53ef\u4ee5\u88ab\u4efb\u4f55\u5b89\u88c5\u4e86 Java \u865a\u62df\u673a\uff08JVM\uff09\u7684\u8bbe\u5907\u6267\u884c\uff0c\u5b9e\u73b0\u4e86 Java \u201c\u4e00\u6b21\u7f16\u5199\uff0c\u5230\u5904\u8fd0\u884c\u201d (Write Once, Run Anywhere - WORA) \u7684\u7279\u6027\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/javac%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B/#javac_1","title":"<code>javac</code> \u7f16\u8bd1\u8fc7\u7a0b\u7684\u9636\u6bb5","text":"<p><code>javac</code> \u7684\u7f16\u8bd1\u8fc7\u7a0b\u901a\u5e38\u53ef\u4ee5\u5206\u89e3\u4e3a\u4ee5\u4e0b\u51e0\u4e2a\u4e3b\u8981\u9636\u6bb5\uff1a</p> <ol> <li> <p>\u8bcd\u6cd5\u5206\u6790 (Lexical Analysis / Scanning)</p> <ul> <li>\u4f5c\u7528: \u8fd9\u662f\u7f16\u8bd1\u5668\u7684\u7b2c\u4e00\u6b65\u3002\u5b83\u5c06\u6e90\u4ee3\u7801\u5b57\u7b26\u6d41\u5206\u89e3\u6210\u4e00\u7cfb\u5217\u6709\u610f\u4e49\u7684\u201c\u8bcd\u6cd5\u5355\u5143\u201d (Tokens)\u3002</li> <li>\u539f\u7406: \u7f16\u8bd1\u5668\u4f1a\u8bfb\u53d6 <code>.java</code> \u6587\u4ef6\u4e2d\u7684\u5b57\u7b26\uff0c\u5e76\u6839\u636e Java \u8bed\u8a00\u7684\u8bcd\u6cd5\u89c4\u5219\uff08\u5982\u5173\u952e\u5b57\u3001\u6807\u8bc6\u7b26\u3001\u8fd0\u7b97\u7b26\u3001\u5206\u9694\u7b26\u3001\u5b57\u9762\u91cf\u7b49\uff09\u5c06\u5176\u8bc6\u522b\u4e3a\u4e0d\u540c\u7684 Token\u3002\u4f8b\u5982\uff0c<code>int age = 10;</code> \u4f1a\u88ab\u5206\u89e3\u4e3a <code>int</code> (\u5173\u952e\u5b57), <code>age</code> (\u6807\u8bc6\u7b26), <code>=</code> (\u8fd0\u7b97\u7b26), <code>10</code> (\u5b57\u9762\u91cf), <code>;</code> (\u5206\u9694\u7b26) \u7b49 Token\u3002</li> <li>\u8f93\u51fa: \u4e00\u4e2a Token \u5e8f\u5217\u3002</li> </ul> </li> <li> <p>\u8bed\u6cd5\u5206\u6790 (Syntactic Analysis / Parsing)</p> <ul> <li>\u4f5c\u7528: \u5728\u8bcd\u6cd5\u5206\u6790\u7684\u57fa\u7840\u4e0a\uff0c\u8bed\u6cd5\u5206\u6790\u5668\u4f1a\u6839\u636e Java \u8bed\u8a00\u7684\u8bed\u6cd5\u89c4\u5219\uff0c\u5c06 Token \u5e8f\u5217\u7ec4\u7ec7\u6210\u4e00\u4e2a\u6811\u72b6\u7ed3\u6784\uff0c\u79f0\u4e3a\u201c\u62bd\u8c61\u8bed\u6cd5\u6811\u201d (Abstract Syntax Tree - AST)\u3002</li> <li>\u539f\u7406: AST \u662f\u6e90\u4ee3\u7801\u7684\u62bd\u8c61\u8868\u793a\uff0c\u5b83\u79fb\u9664\u4e86\u6e90\u4ee3\u7801\u4e2d\u4e00\u4e9b\u4e0d\u5fc5\u8981\u7684\u7ec6\u8282\uff08\u5982\u62ec\u53f7\u3001\u5206\u53f7\u7b49\uff09\uff0c\u4f46\u4fdd\u7559\u4e86\u4ee3\u7801\u7684\u7ed3\u6784\u548c\u8bed\u4e49\u4fe1\u606f\u3002\u4f8b\u5982\uff0c<code>int age = 10;</code> \u5728 AST \u4e2d\u53ef\u80fd\u4f1a\u8868\u793a\u4e3a\u4e00\u4e2a\u53d8\u91cf\u58f0\u660e\u8282\u70b9\uff0c\u5305\u542b\u53d8\u91cf\u7c7b\u578b\u3001\u540d\u79f0\u548c\u521d\u59cb\u5316\u8868\u8fbe\u5f0f\u3002</li> <li>\u8f93\u51fa: \u4e00\u4e2a\u62bd\u8c61\u8bed\u6cd5\u6811 (AST)\u3002\u5982\u679c\u8bed\u6cd5\u4e0d\u7b26\u5408 Java \u89c4\u8303\uff0c\u6b64\u9636\u6bb5\u4f1a\u62a5\u544a\u8bed\u6cd5\u9519\u8bef\u3002</li> </ul> </li> <li> <p>\u8bed\u4e49\u5206\u6790 (Semantic Analysis)</p> <ul> <li>\u4f5c\u7528: \u68c0\u67e5 AST\uff0c\u786e\u4fdd\u4ee3\u7801\u7b26\u5408 Java \u8bed\u8a00\u7684\u8bed\u4e49\u89c4\u5219\u3002\u8fd9\u5305\u62ec\u7c7b\u578b\u68c0\u67e5\u3001\u53d8\u91cf\u4f5c\u7528\u57df\u68c0\u67e5\u3001\u8bbf\u95ee\u6743\u9650\u68c0\u67e5\u3001\u65b9\u6cd5\u7b7e\u540d\u5339\u914d\u7b49\u3002</li> <li>\u539f\u7406:<ul> <li>\u7c7b\u578b\u68c0\u67e5: \u786e\u4fdd\u64cd\u4f5c\u6570\u7c7b\u578b\u5339\u914d\uff0c\u4f8b\u5982\u4e0d\u80fd\u5c06\u5b57\u7b26\u4e32\u76f4\u63a5\u8d4b\u503c\u7ed9\u6574\u578b\u53d8\u91cf\uff08\u9664\u975e\u6709\u9690\u5f0f\u6216\u663e\u5f0f\u8f6c\u6362\uff09\u3002</li> <li>\u4f5c\u7528\u57df\u68c0\u67e5: \u786e\u4fdd\u53d8\u91cf\u5728\u4f7f\u7528\u524d\u5df2\u58f0\u660e\uff0c\u5e76\u4e14\u5728\u5176\u6709\u6548\u4f5c\u7528\u57df\u5185\u3002</li> <li>\u63a7\u5236\u6d41\u5206\u6790: \u68c0\u67e5\u662f\u5426\u6709\u4e0d\u53ef\u8fbe\u4ee3\u7801\uff0c\u6216\u8005\u65b9\u6cd5\u662f\u5426\u7f3a\u5c11\u8fd4\u56de\u503c\u3002</li> <li>\u9519\u8bef\u62a5\u544a: \u5982\u679c\u53d1\u73b0\u8bed\u4e49\u9519\u8bef\uff08\u4f8b\u5982\u5c1d\u8bd5\u8c03\u7528\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684\u65b9\u6cd5\uff0c\u6216\u8005\u7c7b\u578b\u4e0d\u5339\u914d\uff09\uff0c<code>javac</code> \u4f1a\u62a5\u544a\u76f8\u5e94\u7684\u9519\u8bef\u3002</li> </ul> </li> <li>\u8f93\u51fa: \u4e00\u4e2a\u7ecf\u8fc7\u8bed\u4e49\u68c0\u67e5\u5e76\u53ef\u80fd\u88ab\u4fee\u9970\u8fc7\u7684 AST\u3002</li> </ul> </li> <li> <p>\u6ce8\u89e3\u5904\u7406 (Annotation Processing)</p> <ul> <li>\u4f5c\u7528: \u5982\u679c\u6e90\u4ee3\u7801\u4e2d\u4f7f\u7528\u4e86\u81ea\u5b9a\u4e49\u6ce8\u89e3\uff0c\u5e76\u4e14\u5b58\u5728\u76f8\u5e94\u7684\u6ce8\u89e3\u5904\u7406\u5668\uff08Annotation Processor\uff09\uff0c<code>javac</code> \u4f1a\u5728\u6b64\u9636\u6bb5\u8c03\u7528\u8fd9\u4e9b\u5904\u7406\u5668\u3002</li> <li>\u539f\u7406: \u6ce8\u89e3\u5904\u7406\u5668\u53ef\u4ee5\u8bfb\u53d6\u3001\u4fee\u6539\u6216\u751f\u6210\u65b0\u7684 Java \u6e90\u4ee3\u7801\u6587\u4ef6\u3002\u4f8b\u5982\uff0c\u4e00\u4e9b Lombok \u6ce8\u89e3\u4f1a\u5728\u7f16\u8bd1\u65f6\u751f\u6210 getter/setter \u65b9\u6cd5\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u53ef\u80fd\u4f1a\u89e6\u53d1\u65b0\u4e00\u8f6e\u7684\u7f16\u8bd1\u5faa\u73af\uff0c\u5982\u679c\u751f\u6210\u4e86\u65b0\u7684 <code>.java</code> \u6587\u4ef6\uff0c<code>javac</code> \u4f1a\u4ece\u5934\u5f00\u59cb\u5904\u7406\u8fd9\u4e9b\u65b0\u6587\u4ef6\u3002</li> <li>\u8f93\u51fa: \u53ef\u80fd\u751f\u6210\u65b0\u7684 <code>.java</code> \u6587\u4ef6\uff0c\u7136\u540e\u518d\u6b21\u8fdb\u884c\u8bcd\u6cd5\u3001\u8bed\u6cd5\u3001\u8bed\u4e49\u5206\u6790\u3002</li> </ul> </li> <li> <p>\u5b57\u8282\u7801\u751f\u6210 (Bytecode Generation)</p> <ul> <li>\u4f5c\u7528: \u5c06\u7ecf\u8fc7\u8bed\u4e49\u5206\u6790\u7684 AST \u8f6c\u6362\u4e3a JVM \u80fd\u591f\u7406\u89e3\u548c\u6267\u884c\u7684\u5b57\u8282\u7801\u6307\u4ee4\u5e8f\u5217\u3002</li> <li>\u539f\u7406: <code>javac</code> \u4f1a\u904d\u5386 AST\uff0c\u4e3a\u6bcf\u4e2a\u8282\u70b9\u751f\u6210\u5bf9\u5e94\u7684 JVM \u5b57\u8282\u7801\u6307\u4ee4\u3002\u4f8b\u5982\uff0c\u7b97\u672f\u8868\u8fbe\u5f0f\u4f1a\u88ab\u8f6c\u6362\u4e3a <code>iadd</code>\u3001<code>isub</code> \u7b49\u6307\u4ee4\uff1b\u65b9\u6cd5\u8c03\u7528\u4f1a\u88ab\u8f6c\u6362\u4e3a <code>invokevirtual</code>\u3001<code>invokestatic</code> \u7b49\u6307\u4ee4\u3002</li> <li>\u4f18\u5316: \u5728\u5b57\u8282\u7801\u751f\u6210\u4e4b\u524d\u6216\u671f\u95f4\uff0c<code>javac</code> \u53ef\u80fd\u4f1a\u8fdb\u884c\u4e00\u4e9b\u7b80\u5355\u7684\u5c40\u90e8\u4f18\u5316\uff0c\u4f8b\u5982\u5e38\u91cf\u6298\u53e0\uff08<code>int x = 1 + 2;</code> \u4f1a\u76f4\u63a5\u7f16\u8bd1\u4e3a <code>int x = 3;</code>\uff09\uff0c\u4f46\u4e0d\u6d89\u53ca\u590d\u6742\u7684\u5168\u5c40\u4f18\u5316\u3002</li> <li>\u8f93\u51fa: <code>.class</code> \u6587\u4ef6\u7684\u4e8c\u8fdb\u5236\u5185\u5bb9\uff0c\u5305\u542b\u5b57\u8282\u7801\u6307\u4ee4\u3001\u7b26\u53f7\u8868\u3001\u5e38\u91cf\u6c60\u3001\u5143\u6570\u636e\u7b49\u4fe1\u606f\u3002</li> </ul> </li> <li> <p>\u5199\u5165 <code>.class</code> \u6587\u4ef6</p> <ul> <li>\u4f5c\u7528: \u5c06\u751f\u6210\u7684\u5b57\u8282\u7801\u5199\u5165\u5230\u78c1\u76d8\u4e0a\u7684 <code>.class</code> \u6587\u4ef6\u4e2d\u3002</li> <li>\u539f\u7406: \u6bcf\u4e2a\u516c\u5171\u7c7b\uff08\u6216\u975e\u79c1\u6709\u9876\u7ea7\u7c7b\uff09\u901a\u5e38\u5bf9\u5e94\u4e00\u4e2a\u72ec\u7acb\u7684 <code>.class</code> \u6587\u4ef6\uff0c\u6587\u4ef6\u540d\u4e3a\u7c7b\u540d\u52a0\u4e0a <code>.class</code> \u540e\u7f00\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/java%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA%E7%9A%84%E8%BF%87%E7%A8%8B%E4%BB%8B%E7%BB%8D/","title":"Java\u5bf9\u8c61\u521b\u5efa\u7684\u8fc7\u7a0b\u4ecb\u7ecd","text":""},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/java%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA%E7%9A%84%E8%BF%87%E7%A8%8B%E4%BB%8B%E7%BB%8D/#1","title":"1. \u7c7b\u52a0\u8f7d\u68c0\u67e5","text":"<p>\u5f53JVM\u9047\u5230\u4e00\u6761<code>new</code>\u6307\u4ee4\u65f6\uff0c\u5b83\u9996\u5148\u4f1a\u8fdb\u884c\u7c7b\u52a0\u8f7d\u68c0\u67e5\u3002</p> <ul> <li>\u68c0\u67e5\u8fc7\u7a0b\uff1aJVM\u4f1a\u62ff\u7740<code>new</code>\u6307\u4ee4\u540e\u9762\u7684\u7c7b\u540d\uff0c\u53bb\u8fd0\u884c\u65f6\u5e38\u91cf\u6c60\u4e2d\u67e5\u627e\uff0c\u770b\u662f\u5426\u80fd\u627e\u5230\u8fd9\u4e2a\u7c7b\u7684\u7b26\u53f7\u5f15\u7528\u3002</li> <li>\u5224\u65ad\u4e0e\u52a8\u4f5c\uff1a<ul> <li>\u5982\u679c\u627e\u4e0d\u5230\uff0c\u8bf4\u660e\u8fd9\u4e2a\u7c7b\u8fd8\u6ca1\u6709\u88ab\u52a0\u8f7d\u3002JVM\u5fc5\u987b\u7acb\u5373\u6267\u884c\u5b8c\u6574\u7684\u7c7b\u52a0\u8f7d\u8fc7\u7a0b\uff0c\u5305\u62ec\u52a0\u8f7d\u3001\u9a8c\u8bc1\u3001\u51c6\u5907\u3001\u89e3\u6790\u548c\u521d\u59cb\u5316\u8fd9\u51e0\u4e2a\u9636\u6bb5\u3002</li> <li>\u5982\u679c\u80fd\u627e\u5230\uff0c\u5e76\u4e14\u8fd9\u4e2a\u7c7b\u5df2\u7ecf\u88ab\u52a0\u8f7d\u3001\u89e3\u6790\u548c\u521d\u59cb\u5316\u8fc7\u4e86\uff0c\u90a3\u4e48\u5c31\u76f4\u63a5\u8fdb\u5165\u4e0b\u4e00\u6b65\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/java%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA%E7%9A%84%E8%BF%87%E7%A8%8B%E4%BB%8B%E7%BB%8D/#2","title":"2. \u5206\u914d\u5185\u5b58","text":"<p>\u7c7b\u52a0\u8f7d\u68c0\u67e5\u901a\u8fc7\u540e\uff0cJVM\u5c31\u8981\u5f00\u59cb\u5728Java\u5806\u4e2d\u4e3a\u8fd9\u4e2a\u65b0\u5bf9\u8c61\u5206\u914d\u5185\u5b58\u4e86\u3002\u5bf9\u8c61\u6240\u9700\u5185\u5b58\u7684\u5927\u5c0f\uff0c\u5728\u7c7b\u52a0\u8f7d\u5b8c\u6210\u540e\u5c31\u5df2\u7ecf\u5b8c\u5168\u786e\u5b9a\u4e86\u3002</p> <p>\u5206\u914d\u5185\u5b58\u7684\u65b9\u5f0f\u4e3b\u8981\u6709\u4e24\u79cd\uff0c\u5177\u4f53\u91c7\u7528\u54ea\u4e00\u79cd\u53d6\u51b3\u4e8eJava\u5806\u662f\u5426\u89c4\u6574\uff1a</p> <ul> <li> <p>\u6307\u9488\u78b0\u649e (Bump the Pointer)\uff1a</p> <ul> <li>\u9002\u7528\u573a\u666f\uff1a\u5982\u679cJava\u5806\u7684\u5185\u5b58\u662f\u7edd\u5bf9\u89c4\u6574\u7684\uff0c\u5373\u6240\u6709\u7528\u8fc7\u7684\u5185\u5b58\u90fd\u653e\u5728\u4e00\u8fb9\uff0c\u6240\u6709\u7a7a\u95f2\u7684\u5185\u5b58\u653e\u5728\u53e6\u4e00\u8fb9\uff0c\u4e2d\u95f4\u6709\u4e00\u4e2a\u660e\u786e\u7684\u5206\u754c\u70b9\u6307\u793a\u5668\u3002</li> <li>\u5206\u914d\u65b9\u5f0f\uff1a\u6b64\u65f6\uff0c\u5206\u914d\u5185\u5b58\u5c31\u975e\u5e38\u7b80\u5355\uff0c\u53ea\u9700\u8981\u628a\u90a3\u4e2a\u5206\u754c\u70b9\u6307\u9488\u5411\u7a7a\u95f2\u7a7a\u95f4\u90a3\u8fb9\u632a\u52a8\u4e00\u6bb5\u4e0e\u5bf9\u8c61\u5927\u5c0f\u76f8\u7b49\u7684\u8ddd\u79bb\u5373\u53ef\u3002</li> <li>\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\u7684\u5783\u573e\u6536\u96c6\u5668\uff1aSerial\u3001ParNew\u7b49\u5e26\u6709\u538b\u7f29\u6574\u7406\u8fc7\u7a0b\u7684\u6536\u96c6\u5668\u3002</li> </ul> </li> <li> <p>\u7a7a\u95f2\u5217\u8868 (Free List)\uff1a</p> <ul> <li>\u9002\u7528\u573a\u666f\uff1a\u5982\u679cJava\u5806\u7684\u5185\u5b58\u4e0d\u662f\u89c4\u6574\u7684\uff0c\u5df2\u4f7f\u7528\u7684\u5185\u5b58\u548c\u7a7a\u95f2\u7684\u5185\u5b58\u76f8\u4e92\u4ea4\u9519\u3002</li> <li>\u5206\u914d\u65b9\u5f0f\uff1a\u6b64\u65f6\uff0cJVM\u5fc5\u987b\u7ef4\u62a4\u4e00\u4e2a\u5217\u8868\uff0c\u8bb0\u5f55\u4e0a\u54ea\u4e9b\u5185\u5b58\u5757\u662f\u53ef\u7528\u7684\u3002\u5728\u5206\u914d\u65f6\uff0c\u5c31\u4ece\u5217\u8868\u4e2d\u627e\u5230\u4e00\u5757\u8db3\u591f\u5927\u7684\u7a7a\u95f4\u5212\u5206\u7ed9\u5bf9\u8c61\u5b9e\u4f8b\uff0c\u5e76\u66f4\u65b0\u5217\u8868\u4e0a\u7684\u8bb0\u5f55\u3002</li> <li>\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\u7684\u5783\u573e\u6536\u96c6\u5668\uff1aCMS\u8fd9\u79cd\u57fa\u4e8e\u6807\u8bb0-\u6e05\u9664\u7b97\u6cd5\u7684\u6536\u96c6\u5668\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/java%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA%E7%9A%84%E8%BF%87%E7%A8%8B%E4%BB%8B%E7%BB%8D/#_1","title":"\u5e76\u53d1\u5b89\u5168\u95ee\u9898","text":"<p>\u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e0b\uff0c\u591a\u4e2a\u7ebf\u7a0b\u53ef\u80fd\u540c\u65f6\u7533\u8bf7\u5185\u5b58\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u5185\u5b58\u5206\u914d\u7684\u539f\u5b50\u6027\uff0cJVM\u91c7\u7528\u4ee5\u4e0b\u4e24\u79cd\u65b9\u5f0f\u6765\u89e3\u51b3\u7ebf\u7a0b\u5b89\u5168\u95ee\u9898\uff1a *   CAS + \u5931\u8d25\u91cd\u8bd5\uff1aJVM\u91c7\u7528\u4e50\u89c2\u9501\u7684\u65b9\u5f0f\uff0c\u901a\u8fc7CAS\uff08Compare-And-Swap\uff09\u64cd\u4f5c\u6765\u4fdd\u8bc1\u66f4\u65b0\u6307\u9488\u7684\u539f\u5b50\u6027\u3002\u5982\u679c\u5931\u8d25\uff0c\u5c31\u4e0d\u65ad\u91cd\u8bd5\u3002 *   TLAB (Thread Local Allocation Buffer)\uff1a\u8fd9\u662f\u66f4\u5e38\u7528\u7684\u65b9\u6cd5\u3002JVM\u4f1a\u4e3a\u6bcf\u4e2a\u65b0\u521b\u5efa\u7684\u7ebf\u7a0b\uff0c\u5728\u5806\u7684Eden\u533a\u9884\u5148\u5206\u914d\u4e00\u5c0f\u5757\u79c1\u6709\u7684\u5185\u5b58\u533a\u57df\uff0c\u79f0\u4e3a\u672c\u5730\u7ebf\u7a0b\u5206\u914d\u7f13\u51b2\u3002\u5f53\u7ebf\u7a0b\u9700\u8981\u5206\u914d\u5185\u5b58\u65f6\uff0c\u9996\u5148\u5728\u81ea\u5df1\u7684TLAB\u4e2d\u8fdb\u884c\u5206\u914d\u3002\u53ea\u6709\u5f53TLAB\u7528\u5b8c\u5e76\u9700\u8981\u5206\u914d\u65b0\u7684TLAB\u65f6\uff0c\u624d\u9700\u8981\u52a0\u540c\u6b65\u9501\u3002\u8fd9\u6781\u5927\u5730\u63d0\u5347\u4e86\u5185\u5b58\u5206\u914d\u7684\u541e\u5410\u91cf\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/java%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA%E7%9A%84%E8%BF%87%E7%A8%8B%E4%BB%8B%E7%BB%8D/#3","title":"3. \u521d\u59cb\u5316\u96f6\u503c","text":"<p>\u5185\u5b58\u5206\u914d\u5b8c\u6210\u540e\uff0c\u865a\u62df\u673a\u5fc5\u987b\u5c06\u5206\u914d\u5230\u7684\u5185\u5b58\u7a7a\u95f4\uff08\u4e0d\u5305\u62ec\u5bf9\u8c61\u5934\uff09\u90fd\u521d\u59cb\u5316\u4e3a\u96f6\u503c\uff08\u6bd4\u5982<code>int</code>\u4e3a0, <code>boolean</code>\u4e3a<code>false</code>, \u5f15\u7528\u7c7b\u578b\u4e3a<code>null</code>\uff09\u3002</p> <p>\u8fd9\u4e00\u6b65\u64cd\u4f5c\u4fdd\u8bc1\u4e86\u5bf9\u8c61\u7684\u5b9e\u4f8b\u5b57\u6bb5\uff0c\u5373\u4f7f\u5728Java\u4ee3\u7801\u4e2d\u6ca1\u6709\u88ab\u663e\u5f0f\u5730\u8d4b\u521d\u59cb\u503c\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\uff0c\u7a0b\u5e8f\u4f1a\u8bbf\u95ee\u5230\u8fd9\u4e9b\u5b57\u6bb5\u5bf9\u5e94\u6570\u636e\u7c7b\u578b\u7684\u96f6\u503c\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/java%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA%E7%9A%84%E8%BF%87%E7%A8%8B%E4%BB%8B%E7%BB%8D/#4","title":"4. \u8bbe\u7f6e\u5bf9\u8c61\u5934","text":"<p>\u63a5\u4e0b\u6765\uff0cJVM\u8981\u5bf9\u5bf9\u8c61\u8fdb\u884c\u5fc5\u8981\u7684\u8bbe\u7f6e\uff0c\u8fd9\u4e9b\u4fe1\u606f\u90fd\u5b58\u50a8\u5728\u5bf9\u8c61\u7684\u5934\u90e8\uff08Object Header\uff09\u4e2d\u3002\u5bf9\u8c61\u5934\u5305\u542b\u4e86\u5173\u4e8e\u5bf9\u8c61\u81ea\u8eab\u7684\u8fd0\u884c\u65f6\u6570\u636e\uff0c\u6bd4\u5982\uff1a</p> <ul> <li>\u8fd9\u4e2a\u5bf9\u8c61\u662f\u54ea\u4e2a\u7c7b\u7684\u5b9e\u4f8b\u3002</li> <li>\u5bf9\u8c61\u7684\u54c8\u5e0c\u7801\u3002</li> <li>\u5bf9\u8c61\u7684GC\u5206\u4ee3\u5e74\u9f84\u3002</li> <li>\u9501\u72b6\u6001\u6807\u5fd7\u3002</li> <li>\u6307\u5411\u7c7b\u5143\u6570\u636e\u7684\u6307\u9488\uff08\u901a\u8fc7\u8fd9\u4e2a\u6307\u9488\uff0cJVM\u53ef\u4ee5\u786e\u5b9a\u8fd9\u4e2a\u5bf9\u8c61\u662f\u54ea\u4e2a\u7c7b\u7684\u5b9e\u4f8b\uff09\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/java%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA%E7%9A%84%E8%BF%87%E7%A8%8B%E4%BB%8B%E7%BB%8D/#5-init","title":"5. \u6267\u884cinit\u65b9\u6cd5","text":"<p>\u4eceJVM\u7684\u89c6\u89d2\u770b\uff0c\u5230\u4e0a\u4e00\u6b65\u4e3a\u6b62\uff0c\u4e00\u4e2a\u65b0\u5bf9\u8c61\u5df2\u7ecf\u4ea7\u751f\u4e86\u3002\u4f46\u4eceJava\u7a0b\u5e8f\u7684\u89c6\u89d2\u770b\uff0c\u5bf9\u8c61\u7684\u521b\u5efa\u624d\u521a\u521a\u5f00\u59cb\u3002\u63a5\u4e0b\u6765\uff0c\u4f1a\u6267\u884c\u5bf9\u8c61\u7684<code>&lt;init&gt;()</code>\u65b9\u6cd5\uff0c\u4e5f\u5c31\u662f\u6211\u4eec\u901a\u5e38\u6240\u8bf4\u7684\u6784\u9020\u65b9\u6cd5\u3002</p> <p>\u8fd9\u4e2a<code>&lt;init&gt;()</code>\u65b9\u6cd5\u662f\u4e00\u4e2a\u7531\u7f16\u8bd1\u5668\u751f\u6210\u7684\u65b9\u6cd5\uff0c\u5b83\u4f1a\u6309\u7167\u7a0b\u5e8f\u4ee3\u7801\u7684\u610f\u56fe\u5bf9\u5bf9\u8c61\u8fdb\u884c\u521d\u59cb\u5316\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u5305\u62ec\uff1a 1.  \u6210\u5458\u53d8\u91cf\u7684\u663e\u5f0f\u521d\u59cb\u5316\uff1a\u6267\u884c\u4f60\u5728\u7c7b\u4e2d\u4e3a\u6210\u5458\u53d8\u91cf\u5b9a\u4e49\u7684\u521d\u59cb\u503c\uff0c\u6bd4\u5982 <code>private int count = 10;</code>\u3002 2.  \u5b9e\u4f8b\u521d\u59cb\u5316\u5757\uff1a\u6267\u884c\u7c7b\u4e2d\u5b9a\u4e49\u7684\u5b9e\u4f8b\u521d\u59cb\u5316\u5757\uff08<code>{...}</code>\u4ee3\u7801\u5757\uff09\u3002 3.  \u6784\u9020\u65b9\u6cd5\u4f53\uff1a\u6700\u540e\uff0c\u6267\u884c\u6784\u9020\u65b9\u6cd5\u4e2d\u7684\u4ee3\u7801\u3002</p> <p>\u8fd9\u51e0\u4e2a\u6b65\u9aa4\u7684\u6267\u884c\u987a\u5e8f\u662f\u56fa\u5b9a\u7684\uff1a\u7236\u7c7b\u7684<code>&lt;init&gt;</code>\u65b9\u6cd5\u4f1a\u5148\u4e8e\u5b50\u7c7b\u7684<code>&lt;init&gt;</code>\u65b9\u6cd5\u6267\u884c\uff0c\u800c\u5728\u540c\u4e00\u4e2a\u7c7b\u7684<code>&lt;init&gt;</code>\u65b9\u6cd5\u5185\u90e8\uff0c\u6210\u5458\u53d8\u91cf\u521d\u59cb\u5316\u548c\u5b9e\u4f8b\u521d\u59cb\u5316\u5757\u7684\u6267\u884c\u987a\u5e8f\uff0c\u53d6\u51b3\u4e8e\u5b83\u4eec\u5728\u6e90\u4ee3\u7801\u4e2d\u7684\u4e66\u5199\u987a\u5e8f\uff0c\u5e76\u4e14\u5b83\u4eec\u90fd\u5728\u6784\u9020\u65b9\u6cd5\u4f53\u4e4b\u524d\u6267\u884c\u3002</p> <p>\u5f53<code>&lt;init&gt;()</code>\u65b9\u6cd5\u6267\u884c\u5b8c\u6bd5\u540e\uff0c\u4e00\u4e2a\u771f\u6b63\u53ef\u7528\u7684\u3001\u88ab\u5b8c\u6574\u521d\u59cb\u5316\u7684\u5bf9\u8c61\u624d\u7b97\u5b8c\u5168\u521b\u5efa\u51fa\u6765\u3002\u6b64\u65f6\uff0c\u6267\u884c<code>new</code>\u6307\u4ee4\u7684\u7ebf\u7a0b\u4f1a\u628a\u8fd9\u4e2a\u5bf9\u8c61\u7684\u5f15\u7528\u538b\u5165\u64cd\u4f5c\u6570\u6808\u9876\uff0c\u8d4b\u503c\u7ed9\u5bf9\u5e94\u7684\u53d8\u91cf\u3002</p> <p>\u603b\u7ed3\u4e00\u4e0b\uff0c\u4e00\u4e2aJava\u5bf9\u8c61\u7684\u8bde\u751f\uff0c\u662f\u4e00\u4e2a\u4eceJVM\u5e95\u5c42\u5230Java\u5e94\u7528\u5c42\uff0c\u4ece\u5206\u914d\u88f8\u5185\u5b58\u5230\u586b\u5145\u4e1a\u52a1\u6570\u636e\u7684\uff0c\u4e25\u8c28\u800c\u6709\u5e8f\u7684\u8fc7\u7a0b\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/jvm%E5%9E%83%E5%9C%BE%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%88%A4%E5%AE%9A%E6%A0%87%E5%87%86/","title":"Jvm\u5783\u573e\u5bf9\u8c61\u7684\u5224\u5b9a\u6807\u51c6","text":"<p>JVM \u5224\u5b9a\u5783\u573e\u5bf9\u8c61\u7684\u6807\u51c6\u4e3b\u8981\u57fa\u4e8e\u53ef\u8fbe\u6027\u5206\u6790\uff08Reachability Analysis\uff09\u7b97\u6cd5\uff0c\u800c\u4e0d\u662f\u7b80\u5355\u7684\u5f15\u7528\u8ba1\u6570\u3002\u8fd9\u4e00\u7b97\u6cd5\u7684\u6838\u5fc3\u601d\u60f3\u662f\uff0c\u4ece\u4e00\u7cfb\u5217\u88ab\u79f0\u4e3a\u201cGC Roots\u201d\uff08\u5783\u573e\u56de\u6536\u6839\u5bf9\u8c61\uff09\u7684\u8d77\u70b9\u51fa\u53d1\uff0c\u904d\u5386\u6240\u6709\u53ef\u8fbe\u7684\u5bf9\u8c61\u3002\u5982\u679c\u4e00\u4e2a\u5bf9\u8c61\u65e0\u6cd5\u901a\u8fc7\u4efb\u4f55\u5f15\u7528\u94fe\u4ece GC Roots \u8bbf\u95ee\u5230\uff0c\u90a3\u4e48\u5b83\u5c31\u88ab\u5224\u5b9a\u4e3a\u662f\u5783\u573e\u5bf9\u8c61\uff0c\u53ef\u4ee5\u88ab\u5783\u573e\u56de\u6536\u5668\u56de\u6536\u3002</p> <p>\u4ee5\u4e0b\u662f JVM \u5224\u5b9a\u5783\u573e\u5bf9\u8c61\u7684\u8be6\u7ec6\u6807\u51c6\uff1a</p> <ol> <li> <p>\u53ef\u8fbe\u6027\u5206\u6790\u7b97\u6cd5\uff08Reachability Analysis\uff09</p> <ul> <li>\u73b0\u4ee3 JVM \u666e\u904d\u91c7\u7528\u53ef\u8fbe\u6027\u5206\u6790\u6765\u5224\u65ad\u5bf9\u8c61\u662f\u5426\u5b58\u6d3b\u3002\u8be5\u7b97\u6cd5\u901a\u8fc7\u5c06\u5185\u5b58\u4e2d\u7684\u6240\u6709\u5bf9\u8c61\u770b\u4f5c\u4e00\u4e2a\u56fe\uff0c\u4ece GC Roots \u4f5c\u4e3a\u8d77\u59cb\u70b9\uff0c\u6cbf\u7740\u5f15\u7528\u94fe\u5411\u4e0b\u641c\u7d22\u3002\u6240\u6709\u80fd\u88ab\u641c\u7d22\u5230\u7684\u5bf9\u8c61\u90fd\u88ab\u8ba4\u4e3a\u662f\u201c\u53ef\u8fbe\u7684\u201d\uff08\u5373\u5b58\u6d3b\u5bf9\u8c61\uff09\uff0c\u800c\u90a3\u4e9b\u6ca1\u6709\u88ab\u641c\u7d22\u5230\u7684\u5bf9\u8c61\u5219\u88ab\u8ba4\u4e3a\u662f\u201c\u4e0d\u53ef\u8fbe\u7684\u201d\uff08\u5373\u5783\u573e\u5bf9\u8c61\uff09\u3002</li> <li>\u76f8\u8f83\u4e8e\u5f15\u7528\u8ba1\u6570\u6cd5\uff0c\u53ef\u8fbe\u6027\u5206\u6790\u7b97\u6cd5\u80fd\u591f\u6709\u6548\u89e3\u51b3\u5bf9\u8c61\u4e4b\u95f4\u5faa\u73af\u5f15\u7528\u5bfc\u81f4\u65e0\u6cd5\u56de\u6536\u7684\u95ee\u9898\u3002</li> </ul> </li> <li> <p>GC Roots\uff08\u5783\u573e\u56de\u6536\u6839\u5bf9\u8c61\uff09     GC Roots \u662f\u5783\u573e\u56de\u6536\u5668\u8fdb\u884c\u53ef\u8fbe\u6027\u5206\u6790\u7684\u8d77\u59cb\u70b9\u3002\u5b83\u4eec\u662f JVM \u4e2d\u4e00\u4e9b\u7279\u6b8a\u7684\u5f15\u7528\uff0c\u603b\u662f\u88ab\u8ba4\u4e3a\u662f\u201c\u6d3b\u8dc3\u7684\u201d\u6216\u201c\u53ef\u8fbe\u7684\u201d\uff0c\u56e0\u6b64\u5b83\u4eec\u4ee5\u53ca\u5b83\u4eec\u76f4\u63a5\u6216\u95f4\u63a5\u5f15\u7528\u7684\u5bf9\u8c61\u90fd\u4e0d\u4f1a\u88ab\u5783\u573e\u56de\u6536\u3002\u5e38\u89c1\u7684 GC Roots \u7c7b\u578b\u5305\u62ec\uff1a</p> <ul> <li>\u865a\u62df\u673a\u6808\uff08VM Stack\uff09\u4e2d\u5f15\u7528\u7684\u5bf9\u8c61\uff1a\u6bcf\u4e2a\u7ebf\u7a0b\u5728\u6267\u884c\u65b9\u6cd5\u65f6\u90fd\u6709\u4e00\u4e2a\u6808\u5e27\uff0c\u6808\u5e27\u4e2d\u7684\u5c40\u90e8\u53d8\u91cf\u8868\u3001\u65b9\u6cd5\u53c2\u6570\u3001\u8fd4\u56de\u503c\u7b49\u5982\u679c\u5f15\u7528\u4e86\u5806\u4e2d\u7684\u5bf9\u8c61\uff0c\u8fd9\u4e9b\u5f15\u7528\u5c31\u4f5c\u4e3a GC Root.</li> <li>\u672c\u5730\u65b9\u6cd5\u6808\uff08Native Method Stack\uff09\u4e2d JNI (Java Native Interface) \u5f15\u7528\u7684\u5bf9\u8c61\uff1a\u901a\u8fc7 JNI \u8c03\u7528\u672c\u5730\u65b9\u6cd5\u65f6\uff0c\u672c\u5730\u65b9\u6cd5\u6808\u4e2d\u53ef\u80fd\u4fdd\u5b58\u7740\u5bf9 Java \u5bf9\u8c61\u7684\u5f15\u7528.</li> <li>\u65b9\u6cd5\u533a\uff08Method Area\uff09\u4e2d\u7c7b\u9759\u6001\u5c5e\u6027\u5f15\u7528\u7684\u5bf9\u8c61\uff1a\u7c7b\u7684\u9759\u6001\u53d8\u91cf\u5c5e\u4e8e\u7c7b\u672c\u8eab\uff0c\u53ea\u8981\u7c7b\u88ab\u52a0\u8f7d\u4e14\u672a\u88ab\u5378\u8f7d\uff0c\u9759\u6001\u5b57\u6bb5\u5f15\u7528\u7684\u5bf9\u8c61\u5c31\u4fdd\u6301\u53ef\u8fbe.</li> <li>\u65b9\u6cd5\u533a\u4e2d\u5e38\u91cf\u5f15\u7528\u7684\u5bf9\u8c61\uff1a\u4f8b\u5982\u5b57\u7b26\u4e32\u5e38\u91cf\u6c60\u4e2d\u7684\u5f15\u7528.</li> <li>\u6240\u6709\u88ab\u540c\u6b65\u9501\uff08<code>synchronized</code> \u5173\u952e\u5b57\uff09\u6301\u6709\u7684\u5bf9\u8c61\uff1a\u6b63\u5728\u88ab\u7528\u4f5c\u540c\u6b65\u76d1\u89c6\u5668\u7684\u5bf9\u8c61.</li> <li>\u6d3b\u8dc3\u7ebf\u7a0b\uff08Active Threads\uff09\uff1a\u6b63\u5728\u8fd0\u884c\u7684\u7ebf\u7a0b\u5bf9\u8c61\u672c\u8eab\u53ca\u5176\u7ebf\u7a0b\u672c\u5730\u53d8\u91cf.</li> <li>\u7cfb\u7edf\u7c7b\u52a0\u8f7d\u5668\u52a0\u8f7d\u7684\u7c7b\uff1a\u5982 Java \u6807\u51c6\u5e93\u4e2d\u7684\u7c7b.</li> <li>JVM \u5185\u90e8\u7684\u4e00\u4e9b\u5bf9\u8c61\uff1a\u4e3a\u4e86 JVM \u81ea\u8eab\u7684\u76ee\u7684\u800c\u6301\u6709\u7684\u5bf9\u8c61\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e JVM \u7684\u5b9e\u73b0.</li> </ul> </li> <li> <p>\u6807\u8bb0-\u6e05\u9664\uff08Mark-and-Sweep\uff09\u8fc7\u7a0b     \u5783\u573e\u56de\u6536\u5668\u901a\u5e38\u91c7\u7528\u201c\u6807\u8bb0-\u6e05\u9664\u201d\u7b97\u6cd5\u6765\u56de\u6536\u5185\u5b58\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u5206\u4e3a\u4e24\u6b65\uff1a</p> <ul> <li>\u6807\u8bb0\u9636\u6bb5\uff08Mark Phase\uff09\uff1a\u5783\u573e\u56de\u6536\u5668\u4ece GC Roots \u5f00\u59cb\u904d\u5386\u6240\u6709\u53ef\u8fbe\u5bf9\u8c61\uff0c\u5e76\u5c06\u5176\u6807\u8bb0\u4e3a\u201c\u5b58\u6d3b\u201d.</li> <li>\u6e05\u9664\u9636\u6bb5\uff08Sweep Phase\uff09\uff1a\u904d\u5386\u6574\u4e2a\u5806\u5185\u5b58\uff0c\u56de\u6536\u6240\u6709\u672a\u88ab\u6807\u8bb0\u4e3a\u201c\u5b58\u6d3b\u201d\u7684\u5bf9\u8c61\uff0c\u91ca\u653e\u5176\u5360\u7528\u7684\u5185\u5b58\u7a7a\u95f4.</li> </ul> </li> <li> <p>\u5f15\u7528\u7c7b\u578b     Java \u4e2d\u5b9a\u4e49\u4e86\u56db\u79cd\u5f15\u7528\u5f3a\u5ea6\uff0c\u5b83\u4eec\u5bf9\u5bf9\u8c61\u7684\u5783\u573e\u56de\u6536\u884c\u4e3a\u6709\u4e0d\u540c\u5f71\u54cd:</p> <ul> <li>\u5f3a\u5f15\u7528\uff08Strong Reference\uff09\uff1a\u6700\u5e38\u89c1\u7684\u5f15\u7528\u7c7b\u578b\u3002\u53ea\u8981\u5b58\u5728\u5f3a\u5f15\u7528\uff0c\u5783\u573e\u56de\u6536\u5668\u6c38\u8fdc\u4e0d\u4f1a\u56de\u6536\u88ab\u5f15\u7528\u7684\u5bf9\u8c61\u3002\u5f53\u5185\u5b58\u4e0d\u8db3\u65f6\uff0cJVM \u5b81\u613f\u629b\u51fa <code>OutOfMemoryError</code> \u4e5f\u4e0d\u4f1a\u56de\u6536\u5177\u6709\u5f3a\u5f15\u7528\u7684\u5bf9\u8c61.</li> <li>\u8f6f\u5f15\u7528\uff08Soft Reference\uff09\uff1a\u7528\u4e8e\u63cf\u8ff0\u4e00\u4e9b\u8fd8\u6709\u7528\u4f46\u5e76\u975e\u5fc5\u9700\u7684\u5bf9\u8c61\u3002\u53ea\u88ab\u8f6f\u5f15\u7528\u5f15\u7528\u7684\u5bf9\u8c61\uff0c\u5728 JVM \u5185\u5b58\u4e0d\u8db3\u65f6\u4f1a\u88ab\u56de\u6536.</li> <li>\u5f31\u5f15\u7528\uff08Weak Reference\uff09\uff1a\u7528\u4e8e\u63cf\u8ff0\u975e\u5fc5\u9700\u5bf9\u8c61\u3002\u53ea\u88ab\u5f31\u5f15\u7528\u5f15\u7528\u7684\u5bf9\u8c61\uff0c\u5728\u5783\u573e\u56de\u6536\u5668\u626b\u63cf\u5230\u5b83\u65f6\uff0c\u65e0\u8bba\u5f53\u524d\u5185\u5b58\u662f\u5426\u5145\u8db3\uff0c\u90fd\u4f1a\u88ab\u56de\u6536.</li> <li>\u865a\u5f15\u7528\uff08Phantom Reference\uff09\uff1a\u662f\u6700\u5f31\u7684\u4e00\u79cd\u5f15\u7528\uff0c\u5b83\u7684\u5b58\u5728\u4e0d\u4f1a\u5bf9\u5bf9\u8c61\u7684\u751f\u547d\u5468\u671f\u6784\u6210\u4efb\u4f55\u5f71\u54cd\u3002\u4e3b\u8981\u7528\u4e8e\u8ddf\u8e2a\u5bf9\u8c61\u88ab\u5783\u573e\u56de\u6536\u7684\u72b6\u6001\uff0c\u914d\u5408\u5f15\u7528\u961f\u5217\u4f7f\u7528.</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%9C%BA%E5%88%B6%E6%98%AF%E4%BB%80%E4%B9%88/","title":"\u53cc\u4eb2\u59d4\u6d3e\u673a\u5236\u662f\u4ec0\u4e48","text":"<p>\u53cc\u4eb2\u59d4\u6d3e\u673a\u5236\uff08Parents Delegation Model\uff09\u662fJava\u865a\u62df\u673a\uff08JVM\uff09\u4e2d\u7c7b\u52a0\u8f7d\u5668\uff08Class Loader\uff09\u52a0\u8f7d\u7c7b\u65f6\u6240\u9075\u5faa\u7684\u4e00\u79cd\u5c42\u7ea7\u5316\u7684\u52a0\u8f7d\u7b56\u7565\u3002\u5b83\u89c4\u5b9a\u4e86\u7c7b\u52a0\u8f7d\u5668\u5728\u5c1d\u8bd5\u52a0\u8f7d\u4e00\u4e2a\u7c7b\u65f6\uff0c\u5e94\u8be5\u5982\u4f55\u534f\u4f5c\u548c\u5206\u914d\u4efb\u52a1\u3002\u8fd9\u4e2a\u673a\u5236\u5e76\u4e0d\u662f\u4e00\u4e2a\u5f3a\u5236\u6027\u7684\u7ea6\u675f\u6a21\u578b\uff0c\u800c\u662fJava\u8bbe\u8ba1\u8005\u63a8\u8350\u7684\u4e00\u79cd\u7c7b\u52a0\u8f7d\u5668\u5b9e\u73b0\u65b9\u5f0f\uff0c\u5e76\u88abJDK\u4e2d\u9ed8\u8ba4\u7684\u7c7b\u52a0\u8f7d\u5668\u6240\u9075\u5faa\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%9C%BA%E5%88%B6%E6%98%AF%E4%BB%80%E4%B9%88/#_1","title":"\u6838\u5fc3\u601d\u60f3\uff1a","text":"<p>\u5f53\u4e00\u4e2a\u7c7b\u52a0\u8f7d\u5668\u6536\u5230\u52a0\u8f7d\u4e00\u4e2a\u7c7b\u7684\u8bf7\u6c42\u65f6\uff0c\u5b83\u9996\u5148\u4e0d\u4f1a\u81ea\u5df1\u5c1d\u8bd5\u53bb\u52a0\u8f7d\u8fd9\u4e2a\u7c7b\uff0c\u800c\u662f\u4f1a\u628a\u8fd9\u4e2a\u8bf7\u6c42\u59d4\u6d3e\u7ed9\u5b83\u7684\u7236\u7c7b\u52a0\u8f7d\u5668\u53bb\u5b8c\u6210\u3002\u6bcf\u4e00\u5c42\u7684\u7c7b\u52a0\u8f7d\u5668\u90fd\u662f\u5982\u6b64\uff0c\u56e0\u6b64\u6240\u6709\u7684\u52a0\u8f7d\u8bf7\u6c42\u6700\u7ec8\u90fd\u5e94\u8be5\u4f20\u9001\u5230\u6700\u9876\u5c42\u7684\u542f\u52a8\u7c7b\u52a0\u8f7d\u5668\uff08Bootstrap Class Loader\uff09\u3002\u53ea\u6709\u5f53\u7236\u7c7b\u52a0\u8f7d\u5668\u5728\u5176\u641c\u7d22\u8303\u56f4\u5185\u65e0\u6cd5\u627e\u5230\u6240\u9700\u7684\u7c7b\uff0c\u5e76\u53cd\u9988\u65e0\u6cd5\u5b8c\u6210\u52a0\u8f7d\u8bf7\u6c42\u65f6\uff0c\u5b50\u7c7b\u52a0\u8f7d\u5668\u624d\u4f1a\u5c1d\u8bd5\u81ea\u5df1\u53bb\u52a0\u8f7d\u8fd9\u4e2a\u7c7b\u3002</p> <p>\u7c7b\u52a0\u8f7d\u5668\u7684\u5c42\u7ea7\u5173\u7cfb\uff08\u5178\u578b\u7684\uff09\uff1a</p> <ol> <li> <p>\u542f\u52a8\u7c7b\u52a0\u8f7d\u5668\uff08Bootstrap Class Loader\uff09\uff1a</p> <ul> <li>\u8fd9\u662f\u6700\u9876\u5c42\u7684\u52a0\u8f7d\u5668\uff0c\u7531C++\u5b9e\u73b0\uff0c\u662fJVM\u81ea\u8eab\u7684\u4e00\u90e8\u5206\u3002</li> <li>\u5b83\u6ca1\u6709\u201c\u7236\u52a0\u8f7d\u5668\u201d\uff08\u5728Java\u5c42\u9762\u770b\u6765\uff0c\u5176<code>getParent()</code>\u65b9\u6cd5\u8fd4\u56de<code>null</code>\uff09\u3002</li> <li>\u8d1f\u8d23\u52a0\u8f7dJava\u7684\u6838\u5fc3\u7c7b\u5e93\uff0c\u5982<code>JAVA_HOME/jre/lib/rt.jar</code>\u6216<code>resources.jar</code>\u4e2d\u7684\u7c7b\uff08Java 8\u53ca\u4ee5\u524d\uff09\uff0c\u6216\u8005Java 9\u53ca\u4ee5\u540e\u6a21\u5757\u5316\u7cfb\u7edf\u4e2d\u7684\u6838\u5fc3\u6a21\u5757\uff08\u5982<code>java.base</code>\uff09\u3002</li> </ul> </li> <li> <p>\u6269\u5c55\u7c7b\u52a0\u8f7d\u5668\uff08Extension Class Loader\uff09\uff1a</p> <ul> <li>\u7531<code>sun.misc.Launcher$ExtClassLoader</code>\u5b9e\u73b0\u3002</li> <li>\u5b83\u7684\u7236\u52a0\u8f7d\u5668\u662f\u542f\u52a8\u7c7b\u52a0\u8f7d\u5668\u3002</li> <li>\u8d1f\u8d23\u52a0\u8f7d<code>JAVA_HOME/jre/lib/ext</code>\u76ee\u5f55\u4e0b\u7684JAR\u5305\uff0c\u6216\u8005\u7531<code>java.ext.dirs</code>\u7cfb\u7edf\u5c5e\u6027\u6307\u5b9a\u7684\u8def\u5f84\u4e2d\u7684\u7c7b\u5e93\u3002</li> </ul> </li> <li> <p>\u5e94\u7528\u7a0b\u5e8f\u7c7b\u52a0\u8f7d\u5668\uff08Application Class Loader\uff0c\u4e5f\u79f0\u7cfb\u7edf\u7c7b\u52a0\u8f7d\u5668 System Class Loader\uff09\uff1a</p> <ul> <li>\u7531<code>sun.misc.Launcher$AppClassLoader</code>\u5b9e\u73b0\u3002</li> <li>\u5b83\u7684\u7236\u52a0\u8f7d\u5668\u662f\u6269\u5c55\u7c7b\u52a0\u8f7d\u5668\u3002</li> <li>\u8d1f\u8d23\u52a0\u8f7d\u7528\u6237\u7c7b\u8def\u5f84\uff08<code>CLASSPATH</code>\u73af\u5883\u53d8\u91cf\u3001<code>-cp</code> \u6216 <code>-classpath</code> \u547d\u4ee4\u884c\u53c2\u6570\u3001<code>java.class.path</code>\u7cfb\u7edf\u5c5e\u6027\uff09\u4e0a\u6307\u5b9a\u7684\u7c7b\u5e93\u3002\u5f00\u53d1\u8005\u7f16\u5199\u7684\u5927\u90e8\u5206Java\u7c7b\u90fd\u662f\u7531\u8fd9\u4e2a\u52a0\u8f7d\u5668\u52a0\u8f7d\u7684\u3002</li> </ul> </li> <li> <p>\u81ea\u5b9a\u4e49\u7c7b\u52a0\u8f7d\u5668\uff08Custom Class Loader\uff09\uff1a</p> <ul> <li>\u5f00\u53d1\u8005\u53ef\u4ee5\u7ee7\u627f<code>java.lang.ClassLoader</code>\u7c7b\u6765\u521b\u5efa\u81ea\u5df1\u7684\u7c7b\u52a0\u8f7d\u5668\uff0c\u4ee5\u5b9e\u73b0\u7279\u5b9a\u7684\u7c7b\u52a0\u8f7d\u9700\u6c42\uff08\u5982\u4ece\u7f51\u7edc\u52a0\u8f7d\u3001\u89e3\u5bc6\u540e\u52a0\u8f7d\u7b49\uff09\u3002</li> <li>\u81ea\u5b9a\u4e49\u7c7b\u52a0\u8f7d\u5668\u5728\u521b\u5efa\u65f6\uff0c\u901a\u5e38\u4f1a\u6307\u5b9a\u4e00\u4e2a\u7236\u7c7b\u52a0\u8f7d\u5668\uff08\u9ed8\u8ba4\u662f\u5e94\u7528\u7a0b\u5e8f\u7c7b\u52a0\u8f7d\u5668\uff09\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%9C%BA%E5%88%B6%E6%98%AF%E4%BB%80%E4%B9%88/#_2","title":"\u5de5\u4f5c\u6d41\u7a0b\uff1a","text":"<ol> <li>\u5f53\u4e00\u4e2a\u7c7b\u52a0\u8f7d\u5668\uff08\u6bd4\u5982\u5e94\u7528\u7a0b\u5e8f\u7c7b\u52a0\u8f7d\u5668\uff09\u63a5\u6536\u5230\u52a0\u8f7d\u7c7b<code>com.example.MyClass</code>\u7684\u8bf7\u6c42\u65f6\u3002</li> <li>\u5b83\u9996\u5148\u68c0\u67e5\u8fd9\u4e2a\u7c7b\u662f\u5426\u5df2\u7ecf\u88ab\u81ea\u5df1\u52a0\u8f7d\u8fc7\u4e86\u3002\u5982\u679c\u5df2\u52a0\u8f7d\uff0c\u76f4\u63a5\u8fd4\u56de\u7f13\u5b58\u7684<code>java.lang.Class</code>\u5bf9\u8c61\u3002</li> <li>\u5982\u679c\u672a\u52a0\u8f7d\uff0c\u5b83\u4e0d\u4f1a\u7acb\u5373\u81ea\u5df1\u53bb\u67e5\u627e\u548c\u52a0\u8f7d\uff0c\u800c\u662f\u5c06\u8fd9\u4e2a\u8bf7\u6c42\u59d4\u6d3e\u7ed9\u5b83\u7684\u7236\u7c7b\u52a0\u8f7d\u5668\uff08\u5373\u6269\u5c55\u7c7b\u52a0\u8f7d\u5668\uff09\u3002</li> <li>\u6269\u5c55\u7c7b\u52a0\u8f7d\u5668\u6536\u5230\u8bf7\u6c42\u540e\uff0c\u4e5f\u5148\u68c0\u67e5\u81ea\u5df1\u662f\u5426\u5df2\u52a0\u8f7d\u8fc7\u6b64\u7c7b\u3002\u5982\u679c\u672a\u52a0\u8f7d\uff0c\u5b83\u7ee7\u7eed\u5c06\u8bf7\u6c42\u59d4\u6d3e\u7ed9\u5b83\u7684\u7236\u7c7b\u52a0\u8f7d\u5668\uff08\u5373\u542f\u52a8\u7c7b\u52a0\u8f7d\u5668\uff09\u3002</li> <li>\u542f\u52a8\u7c7b\u52a0\u8f7d\u5668\u6536\u5230\u8bf7\u6c42\u540e\uff0c\u5c1d\u8bd5\u5728\u5176\u8d1f\u8d23\u7684\u8def\u5f84\uff08\u5982\u6838\u5fc3\u5e93\u8def\u5f84\uff09\u4e2d\u67e5\u627e\u5e76\u52a0\u8f7d<code>com.example.MyClass</code>\u3002<ul> <li>\u5982\u679c\u542f\u52a8\u7c7b\u52a0\u8f7d\u5668\u627e\u5230\u4e86\u5e76\u6210\u529f\u52a0\u8f7d\u4e86\u8be5\u7c7b\uff0c\u5b83\u4f1a\u5c06\u52a0\u8f7d\u7684<code>Class</code>\u5bf9\u8c61\u9010\u5c42\u8fd4\u56de\u7ed9\u53d1\u8d77\u8bf7\u6c42\u7684\u5b50\u52a0\u8f7d\u5668\uff0c\u6700\u7ec8\u8fd4\u56de\u7ed9\u5e94\u7528\u7a0b\u5e8f\u3002\u52a0\u8f7d\u8fc7\u7a0b\u7ed3\u675f\u3002</li> <li>\u5982\u679c\u542f\u52a8\u7c7b\u52a0\u8f7d\u5668\u5728\u5176\u641c\u7d22\u8def\u5f84\u4e0b\u6ca1\u6709\u627e\u5230\u8be5\u7c7b\uff0c\u5b83\u4f1a\u544a\u77e5\u5176\u5b50\u52a0\u8f7d\u5668\uff08\u6269\u5c55\u7c7b\u52a0\u8f7d\u5668\uff09\u81ea\u5df1\u65e0\u6cd5\u52a0\u8f7d\u3002</li> </ul> </li> <li>\u6269\u5c55\u7c7b\u52a0\u8f7d\u5668\u5728\u6536\u5230\u7236\u52a0\u8f7d\u5668\u65e0\u6cd5\u52a0\u8f7d\u7684\u901a\u77e5\u540e\uff0c\u624d\u4f1a\u5c1d\u8bd5\u81ea\u5df1\u5728\u5176\u8d1f\u8d23\u7684\u8def\u5f84\uff08\u5982<code>ext</code>\u76ee\u5f55\uff09\u4e2d\u67e5\u627e\u5e76\u52a0\u8f7d<code>com.example.MyClass</code>\u3002<ul> <li>\u5982\u679c\u6269\u5c55\u7c7b\u52a0\u8f7d\u5668\u627e\u5230\u4e86\u5e76\u6210\u529f\u52a0\u8f7d\uff0c\u7ed3\u679c\u9010\u5c42\u8fd4\u56de\u3002</li> <li>\u5982\u679c\u4e5f\u627e\u4e0d\u5230\uff0c\u5b83\u4f1a\u544a\u77e5\u5176\u5b50\u52a0\u8f7d\u5668\uff08\u5e94\u7528\u7a0b\u5e8f\u7c7b\u52a0\u8f7d\u5668\uff09\u81ea\u5df1\u65e0\u6cd5\u52a0\u8f7d\u3002</li> </ul> </li> <li>\u6700\u540e\uff0c\u5e94\u7528\u7a0b\u5e8f\u7c7b\u52a0\u8f7d\u5668\u5728\u6536\u5230\u7236\u52a0\u8f7d\u5668\uff08\u6269\u5c55\u7c7b\u52a0\u8f7d\u5668\uff09\u65e0\u6cd5\u52a0\u8f7d\u7684\u901a\u77e5\u540e\uff0c\u624d\u4f1a\u5c1d\u8bd5\u81ea\u5df1\u5728\u5176\u8d1f\u8d23\u7684\u8def\u5f84\uff08\u5982\u7528\u6237<code>CLASSPATH</code>\uff09\u4e2d\u67e5\u627e\u5e76\u52a0\u8f7d<code>com.example.MyClass</code>\u3002<ul> <li>\u5982\u679c\u5e94\u7528\u7a0b\u5e8f\u7c7b\u52a0\u8f7d\u5668\u627e\u5230\u4e86\u5e76\u6210\u529f\u52a0\u8f7d\uff0c\u52a0\u8f7d\u8fc7\u7a0b\u7ed3\u675f\u3002</li> <li>\u5982\u679c\u4ecd\u7136\u627e\u4e0d\u5230\uff0c\u5b83\u4f1a\u629b\u51fa<code>ClassNotFoundException</code>\u6216<code>NoClassDefFoundError</code>\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%9C%BA%E5%88%B6%E6%98%AF%E4%BB%80%E4%B9%88/#_3","title":"\u4f18\u70b9\uff1a","text":"<ol> <li> <p>\u907f\u514d\u7c7b\u7684\u91cd\u590d\u52a0\u8f7d\uff1a     \u7531\u4e8e\u52a0\u8f7d\u8bf7\u6c42\u4f1a\u5411\u4e0a\u59d4\u6d3e\uff0c\u5982\u679c\u4e00\u4e2a\u7c7b\u5df2\u7ecf\u88ab\u67d0\u4e2a\u7236\u52a0\u8f7d\u5668\u52a0\u8f7d\u8fc7\u4e86\uff0c\u90a3\u4e48\u8fd9\u4e2a\u7236\u52a0\u8f7d\u5668\u4f1a\u76f4\u63a5\u8fd4\u56de\u5df2\u52a0\u8f7d\u7684<code>Class</code>\u5bf9\u8c61\uff0c\u5b50\u52a0\u8f7d\u5668\u5c31\u4e0d\u4f1a\u518d\u6b21\u52a0\u8f7d\u3002\u8fd9\u4fdd\u8bc1\u4e86\u5728JVM\u4e2d\uff0c\u5bf9\u4e8e\u540c\u4e00\u4e2a\u5168\u9650\u5b9a\u540d\u7684\u7c7b\uff0c\u53ea\u5b58\u5728\u4e00\u4e2a\u7531\u7279\u5b9a\u7c7b\u52a0\u8f7d\u5668\u52a0\u8f7d\u7684<code>Class</code>\u5bf9\u8c61\u5b9e\u4f8b\uff0c\u786e\u4fdd\u4e86\u7c7b\u7684\u552f\u4e00\u6027\u3002</p> </li> <li> <p>\u4fdd\u8bc1Java\u6838\u5fc3\u5e93\u7684\u5b89\u5168\u6027\uff08\u6c99\u7bb1\u5b89\u5168\u673a\u5236\uff09\uff1a     \u6838\u5fc3\u7684Java API\u7c7b\uff08\u5982<code>java.lang.Object</code>, <code>java.lang.String</code>\u7b49\uff09\u603b\u662f\u7531\u6700\u9876\u5c42\u7684\u542f\u52a8\u7c7b\u52a0\u8f7d\u5668\u52a0\u8f7d\u3002\u8fd9\u610f\u5473\u7740\u7528\u6237\u65e0\u6cd5\u901a\u8fc7\u7f16\u5199\u4e00\u4e2a\u4e0e\u6838\u5fc3\u5e93\u540c\u540d\u7684\u6076\u610f\u7c7b\u6765\u66ff\u6362\u6389\u7cfb\u7edf\u7c7b\uff0c\u56e0\u4e3a\u65e0\u8bba\u54ea\u4e2a\u52a0\u8f7d\u5668\u6536\u5230\u52a0\u8f7d\u8fd9\u7c7b\u6838\u5fc3\u7c7b\u7684\u8bf7\u6c42\uff0c\u6700\u7ec8\u90fd\u4f1a\u59d4\u6d3e\u7ed9\u542f\u52a8\u7c7b\u52a0\u8f7d\u5668\u53bb\u52a0\u8f7d\u3002\u8fd9\u9632\u6b62\u4e86\u6838\u5fc3API\u88ab\u7be1\u6539\uff0c\u4fdd\u62a4\u4e86Java\u5e73\u53f0\u7684\u5b89\u5168\u3002</p> </li> <li> <p>\u6e05\u6670\u7684\u7c7b\u52a0\u8f7d\u5c42\u7ea7\u548c\u804c\u8d23\u5212\u5206\uff1a     \u4f7f\u5f97\u4e0d\u540c\u6765\u6e90\u7684\u7c7b\u7531\u4e0d\u540c\u5c42\u7ea7\u7684\u52a0\u8f7d\u5668\u8d1f\u8d23\uff0c\u7ed3\u6784\u6e05\u6670\u3002</p> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%AE%97%E6%B3%95%E4%BB%8B%E7%BB%8D/","title":"\u5783\u573e\u56de\u6536\u7b97\u6cd5\u4ecb\u7ecd","text":"<p>\u5783\u573e\u56de\u6536\u7b97\u6cd5\u662f\u5783\u573e\u56de\u6536\u5668\u7528\u6765\u8bc6\u522b\u548c\u56de\u6536\u4e0d\u518d\u4f7f\u7528\u7684\u5185\u5b58\uff08\u5373\u201c\u5783\u573e\u201d\uff09\u7684\u5177\u4f53\u7b56\u7565\u548c\u65b9\u6cd5\u3002\u8fd9\u4e9b\u7b97\u6cd5\u901a\u5e38\u5173\u6ce8\u4e24\u4e2a\u6838\u5fc3\u95ee\u9898\uff1a\u4e00\u662f\u5982\u4f55\u5224\u65ad\u54ea\u4e9b\u5bf9\u8c61\u662f\u5783\u573e\uff0c\u4e8c\u662f\u5982\u4f55\u6e05\u7406\u8fd9\u4e9b\u5783\u573e\u5bf9\u8c61\u6240\u5360\u7528\u7684\u5185\u5b58\u7a7a\u95f4\u3002</p> <ol> <li> <p>\u5f15\u7528\u8ba1\u6570\u6cd5\uff08Reference Counting\uff09\uff1a</p> <ul> <li>\u539f\u7406\uff1a\u4e3a\u6bcf\u4e2a\u5bf9\u8c61\u7ef4\u62a4\u4e00\u4e2a\u5f15\u7528\u8ba1\u6570\u5668\u3002\u5f53\u4e00\u4e2a\u5bf9\u8c61\u88ab\u5f15\u7528\u65f6\uff0c\u5176\u8ba1\u6570\u5668\u52a01\uff1b\u5f53\u5f15\u7528\u5931\u6548\uff08\u4f8b\u5982\uff0c\u5f15\u7528\u53d8\u91cf\u88ab\u8d4b\u4e3anull\uff0c\u6216\u8d85\u51fa\u4f5c\u7528\u57df\uff09\u65f6\uff0c\u5176\u8ba1\u6570\u5668\u51cf1\u3002\u5f53\u4e00\u4e2a\u5bf9\u8c61\u7684\u5f15\u7528\u8ba1\u6570\u5668\u53d8\u4e3a0\u65f6\uff0c\u8868\u793a\u8be5\u5bf9\u8c61\u4e0d\u518d\u88ab\u4efb\u4f55\u5730\u65b9\u5f15\u7528\uff0c\u53ef\u4ee5\u88ab\u56de\u6536\u3002</li> <li>\u4f18\u70b9\uff1a<ul> <li>\u5b9e\u73b0\u7b80\u5355\u3002</li> <li>\u5bf9\u8c61\u53ef\u88ab\u56de\u6536\u7684\u65f6\u673a\u6bd4\u8f83\u660e\u786e\uff0c\u4e00\u65e6\u8ba1\u6570\u5668\u4e3a0\u5c31\u53ef\u4ee5\u7acb\u5373\u56de\u6536\uff08\u6216\u8005\u52a0\u5165\u5f85\u56de\u6536\u5217\u8868\uff09\uff0c\u53ef\u4ee5\u51cf\u5c11\u7a0b\u5e8f\u5728\u5783\u573e\u56de\u6536\u65f6\u53ef\u80fd\u51fa\u73b0\u7684\u957f\u65f6\u95f4\u505c\u987f\u3002</li> </ul> </li> <li>\u7f3a\u70b9\uff1a<ul> <li>\u9700\u8981\u989d\u5916\u7684\u7a7a\u95f4\u5b58\u50a8\u8ba1\u6570\u5668\u3002</li> <li>\u8ba1\u6570\u5668\u7684\u589e\u51cf\u64cd\u4f5c\u4f1a\u5e26\u6765\u4e00\u5b9a\u7684\u5f00\u9500\u3002</li> <li>\u6700\u81f4\u547d\u7684\u7f3a\u70b9\u662f\u65e0\u6cd5\u5904\u7406\u5faa\u73af\u5f15\u7528\u95ee\u9898\u3002\u5982\u679c\u4e24\u4e2a\u6216\u591a\u4e2a\u5bf9\u8c61\u76f8\u4e92\u5f15\u7528\uff0c\u4f46\u6ca1\u6709\u5916\u90e8\u5f15\u7528\u6307\u5411\u5b83\u4eec\uff0c\u5b83\u4eec\u7684\u5f15\u7528\u8ba1\u6570\u5668\u6c38\u8fdc\u4e0d\u4f1a\u4e3a0\uff0c\u5373\u4f7f\u5b83\u4eec\u5b9e\u9645\u4e0a\u5df2\u7ecf\u6210\u4e3a\u5783\u573e\uff0c\u4e5f\u65e0\u6cd5\u88ab\u56de\u6536\uff0c\u4ece\u800c\u5bfc\u81f4\u5185\u5b58\u6cc4\u6f0f\u3002</li> </ul> </li> <li>\u5e94\u7528\uff1a\u867d\u7136\u4e3b\u6d41JVM\uff08\u5982HotSpot\uff09\u4e0d\u4f7f\u7528\u6b64\u7b97\u6cd5\u4f5c\u4e3a\u4e3b\u8981\u7684\u5783\u573e\u5224\u65ad\u624b\u6bb5\uff0c\u4f46\u67d0\u4e9b\u8bed\u8a00\uff08\u5982Python\u7684\u90e8\u5206\u5b9e\u73b0\uff09\u6216\u7279\u5b9a\u573a\u666f\u4e0b\u4ecd\u6709\u5e94\u7528\u3002</li> </ul> </li> <li> <p>\u6807\u8bb0-\u6e05\u9664\u7b97\u6cd5\uff08Mark-Sweep\uff09\uff1a</p> <ul> <li>\u8fd9\u662f\u57fa\u4e8e\u53ef\u8fbe\u6027\u5206\u6790\u7684\u5783\u573e\u56de\u6536\u7b97\u6cd5\u3002</li> <li>\u539f\u7406\uff1a\u5206\u4e3a\u4e24\u4e2a\u9636\u6bb5\uff1a     a.  \u6807\u8bb0\uff08Mark\uff09\u9636\u6bb5\uff1a\u4eceGC Roots\uff08\u5982\u865a\u62df\u673a\u6808\u4e2d\u7684\u5f15\u7528\u3001\u9759\u6001\u53d8\u91cf\u7b49\uff09\u5f00\u59cb\uff0c\u904d\u5386\u6240\u6709\u53ef\u8fbe\u5bf9\u8c61\uff0c\u5e76\u5bf9\u8fd9\u4e9b\u53ef\u8fbe\u5bf9\u8c61\u8fdb\u884c\u6807\u8bb0\uff08\u901a\u5e38\u662f\u5728\u5bf9\u8c61\u5934\u4e2d\u8bbe\u7f6e\u4e00\u4e2a\u6807\u8bb0\u4f4d\uff09\u3002     b.  \u6e05\u9664\uff08Sweep\uff09\u9636\u6bb5\uff1a\u904d\u5386\u6574\u4e2a\u5806\u5185\u5b58\uff0c\u56de\u6536\u6240\u6709\u672a\u88ab\u6807\u8bb0\u7684\u5bf9\u8c61\uff08\u5373\u4e0d\u53ef\u8fbe\u5bf9\u8c61\uff09\uff0c\u6e05\u9664\u5b83\u4eec\u6240\u5360\u7528\u7684\u5185\u5b58\u7a7a\u95f4\u3002</li> <li>\u4f18\u70b9\uff1a<ul> <li>\u89e3\u51b3\u4e86\u5faa\u73af\u5f15\u7528\u7684\u95ee\u9898\uff0c\u56e0\u4e3a\u5faa\u73af\u5f15\u7528\u7684\u5bf9\u8c61\u7ec4\u5982\u679c\u4eceGC Roots\u4e0d\u53ef\u8fbe\uff0c\u5b83\u4eec\u5c06\u4e0d\u4f1a\u88ab\u6807\u8bb0\u3002</li> <li>\u5b9e\u73b0\u76f8\u5bf9\u7b80\u5355\u3002</li> </ul> </li> <li>\u7f3a\u70b9\uff1a<ul> <li>\u6548\u7387\u95ee\u9898\uff1a\u6807\u8bb0\u548c\u6e05\u9664\u4e24\u4e2a\u8fc7\u7a0b\u7684\u6548\u7387\u90fd\u4e0d\u7b97\u9ad8\uff0c\u5c24\u5176\u662f\u5728\u5806\u4e2d\u5bf9\u8c61\u6570\u91cf\u5e9e\u5927\u65f6\u3002</li> <li>\u7a7a\u95f4\u788e\u7247\u95ee\u9898\uff1a\u6e05\u9664\u4e4b\u540e\u4f1a\u4ea7\u751f\u5927\u91cf\u4e0d\u8fde\u7eed\u7684\u5185\u5b58\u788e\u7247\u3002\u5982\u679c\u540e\u7eed\u9700\u8981\u5206\u914d\u8f83\u5927\u7684\u5bf9\u8c61\uff0c\u53ef\u80fd\u56e0\u4e3a\u627e\u4e0d\u5230\u8db3\u591f\u5927\u7684\u8fde\u7eed\u5185\u5b58\u7a7a\u95f4\u800c\u4e0d\u5f97\u4e0d\u63d0\u524d\u89e6\u53d1\u4e0b\u4e00\u6b21\u5783\u573e\u6536\u96c6\u3002</li> </ul> </li> </ul> </li> <li> <p>\u6807\u8bb0-\u590d\u5236\u7b97\u6cd5\uff08Mark-Copy\uff0c\u901a\u5e38\u7b80\u79f0\u590d\u5236\u7b97\u6cd5\uff09\uff1a</p> <ul> <li>\u539f\u7406\uff1a\u5c06\u53ef\u7528\u7684\u5185\u5b58\u7a7a\u95f4\u5212\u5206\u4e3a\u5927\u5c0f\u76f8\u7b49\u7684\u4e24\u5757\uff0c\u6bd4\u5982From\u7a7a\u95f4\u548cTo\u7a7a\u95f4\uff0c\u6bcf\u6b21\u53ea\u4f7f\u7528\u5176\u4e2d\u4e00\u5757\uff08\u6bd4\u5982From\u7a7a\u95f4\uff09\u3002\u5f53From\u7a7a\u95f4\u7528\u5b8c\u9700\u8981\u8fdb\u884c\u5783\u573e\u56de\u6536\u65f6\uff0c\u7b97\u6cd5\u4f1a\u904d\u5386From\u7a7a\u95f4\uff0c\u5c06\u6240\u6709\u5b58\u6d3b\u7684\u5bf9\u8c61\uff08\u901a\u8fc7\u53ef\u8fbe\u6027\u5206\u6790\u6807\u8bb0\u51fa\u6765\u7684\uff09\u590d\u5236\u5230To\u7a7a\u95f4\u4e2d\uff0c\u5e76\u4e14\u662f\u7d27\u51d1\u6392\u5217\u7684\u3002\u590d\u5236\u5b8c\u6210\u540e\uff0cFrom\u7a7a\u95f4\u4e2d\u7684\u6240\u6709\u5bf9\u8c61\uff08\u5305\u62ec\u539f\u6765\u7684\u5b58\u6d3b\u5bf9\u8c61\u548c\u5783\u573e\u5bf9\u8c61\uff09\u90fd\u53ef\u4ee5\u88ab\u89c6\u4e3a\u5783\u573e\uff0c\u76f4\u63a5\u4e00\u6b21\u6027\u6e05\u7a7aFrom\u7a7a\u95f4\u3002\u7136\u540e\uff0cFrom\u7a7a\u95f4\u548cTo\u7a7a\u95f4\u7684\u89d2\u8272\u4e92\u6362\uff0c\u4e0b\u4e00\u6b21\u5783\u573e\u56de\u6536\u65f6\uff0c\u4ece\u65b0\u7684From\u7a7a\u95f4\uff08\u539f\u6765\u7684To\u7a7a\u95f4\uff09\u590d\u5236\u5230\u65b0\u7684To\u7a7a\u95f4\uff08\u539f\u6765\u7684From\u7a7a\u95f4\uff09\u3002</li> <li>\u4f18\u70b9\uff1a<ul> <li>\u5b9e\u73b0\u7b80\u5355\uff0c\u8fd0\u884c\u9ad8\u6548\uff08\u7279\u522b\u662f\u5b58\u6d3b\u5bf9\u8c61\u8f83\u5c11\u65f6\uff0c\u590d\u5236\u5f00\u9500\u5c0f\uff09\u3002</li> <li>\u4e0d\u4f1a\u4ea7\u751f\u5185\u5b58\u788e\u7247\uff0c\u6bcf\u6b21\u56de\u6536\u540e\u90fd\u80fd\u5f97\u5230\u4e00\u5757\u8fde\u7eed\u7684\u53ef\u7528\u5185\u5b58\u7a7a\u95f4\u3002</li> </ul> </li> <li>\u7f3a\u70b9\uff1a<ul> <li>\u5185\u5b58\u5229\u7528\u7387\u4f4e\uff1a\u53ef\u7528\u5185\u5b58\u7f29\u5c0f\u4e3a\u5b9e\u9645\u603b\u5185\u5b58\u7684\u4e00\u534a\u3002</li> <li>\u5bf9\u4e8e\u5b58\u6d3b\u5bf9\u8c61\u8f83\u591a\u7684\u60c5\u51b5\uff0c\u590d\u5236\u64cd\u4f5c\u7684\u5f00\u9500\u4f1a\u6bd4\u8f83\u5927\uff0c\u5e76\u4e14\u9700\u8981\u79fb\u52a8\u5bf9\u8c61\uff0c\u4fee\u6539\u5f15\u7528\u3002</li> </ul> </li> <li>\u5e94\u7528\uff1a\u975e\u5e38\u9002\u5408\u65b0\u751f\u4ee3\uff08Young Generation\uff09\u7684\u5783\u573e\u56de\u6536\uff0c\u56e0\u4e3a\u65b0\u751f\u4ee3\u4e2d\u7684\u5bf9\u8c61\u5927\u591a\u201c\u671d\u751f\u5915\u6b7b\u201d\uff0c\u6bcf\u6b21GC\u65f6\u5b58\u6d3b\u5bf9\u8c61\u5f88\u5c11\u3002JVM\u4e2d\u7684\u65b0\u751f\u4ee3\u901a\u5e38\u91c7\u7528\u8fd9\u79cd\u7b97\u6cd5\u7684\u53d8\u79cd\uff08\u5982Appel\u5f0f\u56de\u6536\uff0c\u5c06\u65b0\u751f\u4ee3\u5206\u4e3a\u4e00\u4e2a\u8f83\u5927\u7684Eden\u533a\u548c\u4e24\u4e2a\u8f83\u5c0f\u7684Survivor\u533a\uff09\u3002</li> </ul> </li> <li> <p>\u6807\u8bb0-\u6574\u7406\u7b97\u6cd5\uff08Mark-Compact\uff09\uff1a</p> <ul> <li>\u539f\u7406\uff1a\u7ed3\u5408\u4e86\u6807\u8bb0-\u6e05\u9664\u548c\u590d\u5236\u7b97\u6cd5\u7684\u4f18\u70b9\u3002     a.  \u6807\u8bb0\uff08Mark\uff09\u9636\u6bb5\uff1a\u4e0e\u6807\u8bb0-\u6e05\u9664\u7b97\u6cd5\u4e00\u6837\uff0c\u4eceGC Roots\u5f00\u59cb\u6807\u8bb0\u6240\u6709\u5b58\u6d3b\u5bf9\u8c61\u3002     b.  \u6574\u7406\uff08Compact\uff09\u9636\u6bb5\uff1a\u4e0d\u662f\u76f4\u63a5\u6e05\u9664\u672a\u6807\u8bb0\u5bf9\u8c61\uff0c\u800c\u662f\u5c06\u6240\u6709\u5b58\u6d3b\u7684\u5bf9\u8c61\u5411\u5185\u5b58\u7a7a\u95f4\u7684\u4e00\u7aef\u79fb\u52a8\uff0c\u5e76\u6309\u987a\u5e8f\u7d27\u5bc6\u6392\u5217\u3002\u79fb\u52a8\u5b8c\u6210\u540e\uff0c\u76f4\u63a5\u6e05\u7406\u6389\u8fb9\u754c\u4ee5\u5916\u7684\u5185\u5b58\u533a\u57df\u3002</li> <li>\u4f18\u70b9\uff1a<ul> <li>\u89e3\u51b3\u4e86\u6807\u8bb0-\u6e05\u9664\u7b97\u6cd5\u7684\u5185\u5b58\u788e\u7247\u95ee\u9898\uff0c\u56de\u6536\u540e\u5185\u5b58\u662f\u89c4\u6574\u7684\u3002</li> <li>\u907f\u514d\u4e86\u590d\u5236\u7b97\u6cd5\u90a3\u6837\u727a\u7272\u4e00\u534a\u5185\u5b58\u7a7a\u95f4\u7684\u4ee3\u4ef7\u3002</li> </ul> </li> <li>\u7f3a\u70b9\uff1a<ul> <li>\u6548\u7387\u95ee\u9898\uff1a\u79fb\u52a8\u5bf9\u8c61\u662f\u4e00\u4e2a\u76f8\u5bf9\u8017\u65f6\u7684\u64cd\u4f5c\uff0c\u9700\u8981\u66f4\u65b0\u6240\u6709\u6307\u5411\u8fd9\u4e9b\u88ab\u79fb\u52a8\u5bf9\u8c61\u7684\u5f15\u7528\uff0c\u56e0\u6b64\u5176\u6267\u884c\u6548\u7387\u901a\u5e38\u4f4e\u4e8e\u590d\u5236\u7b97\u6cd5\uff08\u5c24\u5176\u662f\u5728\u5b58\u6d3b\u5bf9\u8c61\u8f83\u591a\u65f6\uff09\u3002</li> <li>\u505c\u987f\u65f6\u95f4\u53ef\u80fd\u8f83\u957f\uff1a\u56e0\u4e3a\u6d89\u53ca\u5230\u5bf9\u8c61\u7684\u79fb\u52a8\u548c\u5f15\u7528\u7684\u66f4\u65b0\u3002</li> </ul> </li> <li>\u5e94\u7528\uff1a\u901a\u5e38\u7528\u4e8e\u8001\u5e74\u4ee3\uff08Old Generation\uff09\u7684\u5783\u573e\u56de\u6536\uff0c\u56e0\u4e3a\u8001\u5e74\u4ee3\u4e2d\u7684\u5bf9\u8c61\u5b58\u6d3b\u7387\u8f83\u9ad8\uff0c\u4e0d\u9002\u5408\u4f7f\u7528\u590d\u5236\u7b97\u6cd5\uff0c\u800c\u6807\u8bb0-\u6574\u7406\u80fd\u6709\u6548\u5904\u7406\u5185\u5b58\u788e\u7247\u3002</li> </ul> </li> <li> <p>\u5206\u4ee3\u6536\u96c6\u7b97\u6cd5\uff08Generational Collection\uff09\uff1a</p> <ul> <li>\u8fd9\u5e76\u975e\u4e00\u79cd\u72ec\u7acb\u7684\u56de\u6536\u7b97\u6cd5\uff0c\u800c\u662f\u4e00\u79cd\u57fa\u4e8e\u5bf9\u8c61\u751f\u547d\u5468\u671f\u7279\u70b9\u7684\u5783\u573e\u56de\u6536\u7b56\u7565\u3002</li> <li>\u539f\u7406\uff1a\u6839\u636e\u5bf9\u8c61\u5b58\u6d3b\u65f6\u95f4\u7684\u4e0d\u540c\uff0c\u5c06Java\u5806\u5212\u5206\u4e3a\u4e0d\u540c\u7684\u533a\u57df\uff08\u4ee3\uff09\uff0c\u5982\u65b0\u751f\u4ee3\u548c\u8001\u5e74\u4ee3\u3002\u7136\u540e\u9488\u5bf9\u4e0d\u540c\u4ee3\u7684\u7279\u70b9\u9009\u7528\u6700\u9002\u5408\u7684\u5783\u573e\u56de\u6536\u7b97\u6cd5\u3002<ul> <li>\u65b0\u751f\u4ee3\uff1a\u5bf9\u8c61\u751f\u547d\u5468\u671f\u77ed\uff0c\u5927\u91cf\u5bf9\u8c61\u5728GC\u65f6\u88ab\u56de\u6536\u3002\u901a\u5e38\u91c7\u7528\u590d\u5236\u7b97\u6cd5\u3002</li> <li>\u8001\u5e74\u4ee3\uff1a\u5bf9\u8c61\u751f\u547d\u5468\u671f\u957f\uff0c\u5b58\u6d3b\u7387\u9ad8\u3002\u901a\u5e38\u91c7\u7528\u6807\u8bb0-\u6e05\u9664\u6216\u6807\u8bb0-\u6574\u7406\u7b97\u6cd5\u3002</li> </ul> </li> <li>\u8fd9\u79cd\u7b56\u7565\u53ef\u4ee5\u663e\u8457\u63d0\u9ad8\u5783\u573e\u56de\u6536\u7684\u6548\u7387\uff0c\u56e0\u4e3a\u5927\u90e8\u5206GC\u53ef\u4ee5\u96c6\u4e2d\u5728\u5bf9\u8c61\u53d8\u5316\u9891\u7e41\u7684\u65b0\u751f\u4ee3\uff0c\u800c\u4e0d\u9700\u8981\u6bcf\u6b21\u90fd\u626b\u63cf\u6574\u4e2a\u5806\u3002</li> </ul> </li> </ol> <p>\u8fd9\u4e9b\u57fa\u7840\u7b97\u6cd5\u662f\u6784\u5efa\u590d\u6742\u5783\u573e\u56de\u6536\u5668\u7684\u57fa\u77f3\u3002\u73b0\u4ee3JVM\u4e2d\u7684\u5783\u573e\u56de\u6536\u5668\uff08\u5982Serial, Parallel Scavenge, CMS, G1, ZGC, Shenandoah\u7b49\uff09\u5f80\u5f80\u662f\u8fd9\u4e9b\u57fa\u7840\u7b97\u6cd5\u7684\u7ec4\u5408\u3001\u4f18\u5316\u6216\u53d8\u79cd\uff0c\u5e76\u7ed3\u5408\u4e86\u5e76\u53d1\u3001\u5e76\u884c\u7b49\u6280\u672f\uff0c\u4ee5\u6ee1\u8db3\u4e0d\u540c\u5e94\u7528\u573a\u666f\u5bf9\u541e\u5410\u91cf\u3001\u505c\u987f\u65f6\u95f4\u7b49\u6027\u80fd\u6307\u6807\u7684\u9700\u6c42\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/%E5%B8%B8%E7%94%A8%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8%E4%BB%8B%E7%BB%8D/","title":"\u5e38\u7528\u5783\u573e\u56de\u6536\u5668\u4ecb\u7ecd","text":"<p>Java\u865a\u62df\u673a\uff08JVM\uff09\u63d0\u4f9b\u4e86\u591a\u79cd\u5783\u573e\u6536\u96c6\u5668\uff0c\u4ee5\u9002\u5e94\u4e0d\u540c\u7684\u5e94\u7528\u573a\u666f\u548c\u6027\u80fd\u9700\u6c42\u3002\u8fd9\u4e9b\u6536\u96c6\u5668\u5728\u5b9e\u73b0\u539f\u7406\u3001\u505c\u987f\u65f6\u95f4\u3001\u541e\u5410\u91cf\u548c\u5185\u5b58\u5360\u7528\u7b49\u65b9\u9762\u5404\u5177\u7279\u70b9\u3002</p> <p>\u4ee5\u4e0b\u662f\u60a8\u5217\u51fa\u7684\u51e0\u79cd\u5783\u573e\u6536\u96c6\u5668\u7684\u8be6\u7ec6\u4ecb\u7ecd\u53ca\u5176\u539f\u7406\uff1a</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/%E5%B8%B8%E7%94%A8%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8%E4%BB%8B%E7%BB%8D/#serial","title":"Serial\u6536\u96c6\u5668","text":"<ul> <li>\u539f\u7406\u4e0e\u7279\u70b9: Serial\u6536\u96c6\u5668\u662f\u6700\u57fa\u672c\u3001\u5386\u53f2\u6700\u60a0\u4e45\u7684\u5783\u573e\u6536\u96c6\u5668\u4e4b\u4e00\u3002\u5b83\u662f\u4e00\u4e2a\u5355\u7ebf\u7a0b\u7684\u6536\u96c6\u5668\uff0c\u5728\u8fdb\u884c\u5783\u573e\u56de\u6536\u65f6\uff0c\u5fc5\u987b\u6682\u505c\u6240\u6709\u5176\u4ed6\u7528\u6237\u7ebf\u7a0b\uff08\u201cStop-The-World\u201d - STW\uff09\uff0c\u76f4\u5230\u5783\u573e\u56de\u6536\u5b8c\u6210\u3002\u8fd9\u79cd\u673a\u5236\u7b80\u5355\u9ad8\u6548\uff0c\u6ca1\u6709\u7ebf\u7a0b\u5207\u6362\u7684\u5f00\u9500\uff0c\u56e0\u6b64\u5728\u5355CPU\u73af\u5883\u6216\u5c0f\u5185\u5b58\uff08\u51e0\u5341MB\u5230\u4e00\u4e24\u767eMB\uff09\u7684\u5ba2\u6237\u7aef\u5e94\u7528\u4e2d\u8868\u73b0\u826f\u597d.</li> <li>\u7b97\u6cd5: \u5728\u65b0\u751f\u4ee3\uff0cSerial\u6536\u96c6\u5668\u4f7f\u7528\u6807\u8bb0-\u590d\u5236\u7b97\u6cd5\uff1b\u5728\u8001\u5e74\u4ee3\uff0c\u5176\u5bf9\u5e94\u7684Serial Old\u6536\u96c6\u5668\u4f7f\u7528\u6807\u8bb0-\u6574\u7406\u7b97\u6cd5.</li> <li>\u9002\u7528\u573a\u666f: \u4e3b\u8981\u7528\u4e8e\u5355\u6838\u5904\u7406\u5668\u6216\u5ba2\u6237\u7aef\u5e94\u7528\uff0c\u5bf9\u5b9e\u65f6\u6027\u8981\u6c42\u4e0d\u9ad8\u7684\u573a\u666f.</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/%E5%B8%B8%E7%94%A8%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8%E4%BB%8B%E7%BB%8D/#parnew","title":"ParNew\u6536\u96c6\u5668","text":"<ul> <li>\u539f\u7406\u4e0e\u7279\u70b9: ParNew\u6536\u96c6\u5668\u53ef\u4ee5\u770b\u4f5c\u662fSerial\u6536\u96c6\u5668\u7684\u591a\u7ebf\u7a0b\u7248\u672c. \u9664\u4e86\u4f7f\u7528\u591a\u6761\u7ebf\u7a0b\u8fdb\u884c\u5783\u573e\u6536\u96c6\u5916\uff0c\u5176\u884c\u4e3a\uff08\u5305\u62ec\u6536\u96c6\u7b97\u6cd5\u3001Stop-The-World\u3001\u5bf9\u8c61\u5206\u914d\u89c4\u5219\u7b49\uff09\u4e0eSerial\u6536\u96c6\u5668\u57fa\u672c\u4e00\u81f4. \u5b83\u540c\u6837\u9700\u8981\u6682\u505c\u6240\u6709\u7528\u6237\u7ebf\u7a0b\u8fdb\u884c\u5783\u573e\u56de\u6536. \u5728\u591a\u6838\u5904\u7406\u5668\u73af\u5883\u4e0b\uff0cParNew\u901a\u5e38\u6bd4Serial\u6548\u7387\u66f4\u9ad8\uff0c\u4f46\u5728\u5355\u6838\u73af\u5883\u4e0b\uff0c\u7531\u4e8e\u7ebf\u7a0b\u5207\u6362\u5f00\u9500\uff0c\u6027\u80fd\u53ef\u80fd\u53cd\u800c\u66f4\u5dee.</li> <li>\u7b97\u6cd5: \u5728\u65b0\u751f\u4ee3\u4f7f\u7528\u6807\u8bb0-\u590d\u5236\u7b97\u6cd5.</li> <li>\u9002\u7528\u573a\u666f: \u4e3b\u8981\u7528\u4e8e\u65b0\u751f\u4ee3\u7684\u5783\u573e\u6536\u96c6\uff0c\u5e76\u4e14\u662f\u8bb8\u591a\u8fd0\u884c\u5728Server\u6a21\u5f0f\u4e0b\u7684\u865a\u62df\u673a\u4e2d\u9996\u9009\u7684\u65b0\u751f\u4ee3\u6536\u96c6\u5668\uff0c\u56e0\u4e3a\u5b83\u662f\u9664\u4e86Serial\u6536\u96c6\u5668\u5916\uff0c\u76ee\u524d\u552f\u4e00\u80fd\u4e0eCMS\u6536\u96c6\u5668\u914d\u5408\u5de5\u4f5c\u7684\u6536\u96c6\u5668.</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/%E5%B8%B8%E7%94%A8%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8%E4%BB%8B%E7%BB%8D/#parallel-scavenge","title":"Parallel Scavenge\u6536\u96c6\u5668","text":"<ul> <li>\u539f\u7406\u4e0e\u7279\u70b9: Parallel Scavenge\u6536\u96c6\u5668\u4e5f\u662f\u4e00\u4e2a\u7528\u4e8e\u65b0\u751f\u4ee3\u7684\u591a\u7ebf\u7a0b\u3001\u5e76\u884c\u6536\u96c6\u5668\uff0c\u540c\u6837\u91c7\u7528\u590d\u5236\u7b97\u6cd5. \u5b83\u4e0eParNew\u6700\u5927\u7684\u4e0d\u540c\u5728\u4e8e\u5176\u8bbe\u8ba1\u76ee\u6807\u662f\u541e\u5410\u91cf\u4f18\u5148. \u8fd9\u91cc\u7684\u541e\u5410\u91cf\u6307\u7684\u662fCPU\u7528\u4e8e\u8fd0\u884c\u7528\u6237\u4ee3\u7801\u7684\u65f6\u95f4\u4e0eCPU\u603b\u6d88\u8017\u65f6\u95f4\u7684\u6bd4\u503c\uff0c\u5373\u201c\u8fd0\u884c\u7528\u6237\u4ee3\u7801\u65f6\u95f4 / (\u8fd0\u884c\u7528\u6237\u4ee3\u7801\u65f6\u95f4 + \u5783\u573e\u6536\u96c6\u65f6\u95f4)\u201d.</li> <li>\u81ea\u9002\u5e94\u8c03\u8282\u7b56\u7565: \u8be5\u6536\u96c6\u5668\u63d0\u4f9b\u81ea\u9002\u5e94\u8c03\u8282\u7b56\u7565 (<code>-XX:+UseAdaptiveSizePolicy</code>)\uff0cJVM\u53ef\u4ee5\u6839\u636e\u5f53\u524d\u7cfb\u7edf\u7684\u8fd0\u884c\u60c5\u51b5\uff0c\u52a8\u6001\u8c03\u6574\u65b0\u751f\u4ee3\u5927\u5c0f\u3001Eden\u4e0eSurvivor\u533a\u7684\u6bd4\u4f8b\u3001\u664b\u5347\u8001\u5e74\u4ee3\u5bf9\u8c61\u5e74\u9f84\u7b49\u53c2\u6570\uff0c\u4ee5\u8fbe\u5230\u6700\u4f73\u7684\u541e\u5410\u91cf\u6216\u505c\u987f\u65f6\u95f4\u76ee\u6807.</li> <li>JVM\u53c2\u6570:<ul> <li><code>-XX:MaxGCPauseMillis=N</code>: \u8bbe\u7f6eGC\u6700\u5927\u505c\u987f\u65f6\u95f4\u7684\u76ee\u6807\uff0c\u6536\u96c6\u5668\u4f1a\u5c1d\u8bd5\u4fdd\u8bc1\u5185\u5b58\u56de\u6536\u82b1\u8d39\u7684\u65f6\u95f4\u4e0d\u8d85\u8fc7\u8bbe\u5b9a\u503c\u3002\u8fc7\u5c0f\u7684\u8bbe\u7f6e\u53ef\u80fd\u5bfc\u81f4\u65b0\u751f\u4ee3\u7a7a\u95f4\u53d8\u5c0f\uff0cGC\u9891\u7387\u589e\u52a0\uff0c\u53cd\u800c\u964d\u4f4e\u541e\u5410\u91cf.</li> <li><code>-XX:GCTimeRatio=N</code>: \u8bbe\u7f6e\u5783\u573e\u6536\u96c6\u65f6\u95f4\u5360\u603b\u65f6\u95f4\u7684\u6bd4\u7387\uff0c\u5373\u541e\u5410\u91cf\u7684\u5012\u6570.</li> </ul> </li> <li>\u9002\u7528\u573a\u666f: \u9002\u7528\u4e8e\u540e\u53f0\u8ba1\u7b97\uff0c\u4e0d\u9700\u8981\u592a\u591a\u4ea4\u4e92\u4efb\u52a1\uff0c\u5f3a\u8c03\u9ad8\u541e\u5410\u91cf\u7684\u5e94\u7528.</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/%E5%B8%B8%E7%94%A8%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8%E4%BB%8B%E7%BB%8D/#cms-concurrent-mark-sweep","title":"CMS (Concurrent Mark Sweep) \u6536\u96c6\u5668","text":"<ul> <li>\u539f\u7406\u4e0e\u7279\u70b9: CMS\u6536\u96c6\u5668\u662f\u4e00\u6b3e\u4ee5\u83b7\u53d6\u6700\u77ed\u56de\u6536\u505c\u987f\u65f6\u95f4\u4e3a\u76ee\u6807\u7684\u6536\u96c6\u5668\uff0c\u5b83\u7b2c\u4e00\u6b21\u5b9e\u73b0\u4e86\u8ba9\u5783\u573e\u6536\u96c6\u7ebf\u7a0b\u4e0e\u7528\u6237\u7ebf\u7a0b\u57fa\u672c\u4e0a\u540c\u65f6\u5de5\u4f5c\uff0c\u4ece\u800c\u964d\u4f4e\u4e86GC\u505c\u987f\u65f6\u95f4. \u5b83\u91c7\u7528\u6807\u8bb0-\u6e05\u9664\u7b97\u6cd5.</li> <li>\u5de5\u4f5c\u6d41\u7a0b: \u4e3b\u8981\u5206\u4e3a\u56db\u4e2a\u9636\u6bb5:<ol> <li>\u521d\u59cb\u6807\u8bb0 (Initial Mark): \u6807\u8bb0GC Roots\u76f4\u63a5\u5173\u8054\u5230\u7684\u5bf9\u8c61\uff0c\u9700\u8981STW\uff0c\u4f46\u8017\u65f6\u77ed.</li> <li>\u5e76\u53d1\u6807\u8bb0 (Concurrent Mark): \u4ece\u521d\u59cb\u6807\u8bb0\u7684\u5bf9\u8c61\u5f00\u59cb\uff0c\u904d\u5386\u6574\u4e2a\u5bf9\u8c61\u56fe\uff0c\u6807\u8bb0\u6240\u6709\u53ef\u8fbe\u5bf9\u8c61\u3002\u6b64\u9636\u6bb5\u4e0e\u7528\u6237\u7ebf\u7a0b\u5e76\u53d1\u6267\u884c\uff0c\u8017\u65f6\u8f83\u957f\u4f46\u65e0\u9700STW.</li> <li>\u91cd\u65b0\u6807\u8bb0 (Remark): \u4fee\u6b63\u5e76\u53d1\u6807\u8bb0\u671f\u95f4\u56e0\u7528\u6237\u7a0b\u5e8f\u7ee7\u7eed\u8fd0\u884c\u800c\u5bfc\u81f4\u6807\u8bb0\u4ea7\u751f\u53d8\u52a8\u7684\u90a3\u4e00\u90e8\u5206\u5bf9\u8c61\u7684\u6807\u8bb0\u8bb0\u5f55\uff0c\u9700\u8981STW\uff0c\u4f46\u8017\u65f6\u901a\u5e38\u6bd4\u521d\u59cb\u6807\u8bb0\u9636\u6bb5\u957f\uff0c\u4e0d\u8fc7\u4ecd\u8fdc\u4f4e\u4e8e\u5e76\u53d1\u6807\u8bb0.</li> <li>\u5e76\u53d1\u6e05\u7406 (Concurrent Sweep): \u6e05\u7406\u5df2\u6807\u8bb0\u4e3a\u4e0d\u53ef\u8fbe\u7684\u5bf9\u8c61\u3002\u6b64\u9636\u6bb5\u4e0e\u7528\u6237\u7ebf\u7a0b\u5e76\u53d1\u6267\u884c\uff0c\u4e0d\u9700STW.</li> </ol> </li> <li>\u7f3a\u70b9:<ul> <li>\u5185\u5b58\u788e\u7247: \u91c7\u7528\u201c\u6807\u8bb0-\u6e05\u9664\u201d\u7b97\u6cd5\uff0c\u5bb9\u6613\u4ea7\u751f\u5927\u91cf\u4e0d\u8fde\u7eed\u7684\u5185\u5b58\u788e\u7247. \u5f53\u788e\u7247\u8fc7\u591a\u5bfc\u81f4\u65e0\u6cd5\u4e3a\u5927\u5bf9\u8c61\u5206\u914d\u8fde\u7eed\u5185\u5b58\u65f6\uff0c\u53ef\u80fd\u89e6\u53d1\u4e00\u6b21Full GC\uff0c\u5bfc\u81f4\u957f\u65f6\u95f4\u7684STW\uff0c\u5e76\u53ef\u80fd\u9000\u5316\u4e3aSerial Old\u6536\u96c6\u5668\u4f5c\u4e3a\u540e\u5907\u65b9\u6848.</li> <li>\u6d6e\u52a8\u5783\u573e: \u5e76\u53d1\u6e05\u7406\u9636\u6bb5\u7528\u6237\u7ebf\u7a0b\u4ecd\u5728\u8fd0\u884c\uff0c\u53ef\u80fd\u4ea7\u751f\u65b0\u7684\u5783\u573e\uff08\u6d6e\u52a8\u5783\u573e\uff09\uff0c\u8fd9\u4e9b\u5783\u573e\u672c\u6b21\u65e0\u6cd5\u56de\u6536\uff0c\u53ea\u80fd\u7559\u5230\u4e0b\u4e00\u6b21GC.</li> <li>\u5bf9CPU\u8d44\u6e90\u654f\u611f: \u5e76\u53d1\u9636\u6bb5\u867d\u7136\u4e0d\u6682\u505c\u7528\u6237\u7ebf\u7a0b\uff0c\u4f46\u4f1a\u5360\u7528\u90e8\u5206CPU\u8d44\u6e90\uff0c\u53ef\u80fd\u5bfc\u81f4\u5e94\u7528\u7a0b\u5e8f\u6574\u4f53\u6027\u80fd\u4e0b\u964d.</li> </ul> </li> <li>JVM\u53c2\u6570:<ul> <li><code>-XX:CMSInitiatingOccupancyFraction=N</code>: \u8bbe\u7f6eCMS\u6536\u96c6\u5668\u89e6\u53d1GC\u7684\u8001\u5e74\u4ee3\u4f7f\u7528\u9608\u503c\u767e\u5206\u6bd4\u3002\u8fc7\u4f4e\u4f1a\u589e\u52a0GC\u9891\u7387\uff0c\u8fc7\u9ad8\u53ef\u80fd\u5bfc\u81f4\u5e76\u53d1\u6a21\u5f0f\u5931\u8d25\uff08Concurrent Mode Failure\uff09\uff0c\u8fdb\u800c\u89e6\u53d1Full GC.</li> <li><code>-XX:+UseCMSCompactAtFullCollection</code>: \u5728Full GC\u540e\u8fdb\u884c\u5185\u5b58\u788e\u7247\u6574\u7406\u3002\u867d\u7136\u53ef\u4ee5\u89e3\u51b3\u5185\u5b58\u788e\u7247\u95ee\u9898\uff0c\u4f46\u4f1a\u5ef6\u957fFull GC\u7684\u505c\u987f\u65f6\u95f4.</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/%E5%B8%B8%E7%94%A8%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8%E4%BB%8B%E7%BB%8D/#g1-garbage-first","title":"G1 (Garbage-First) \u6536\u96c6\u5668","text":"<ul> <li>\u539f\u7406\u4e0e\u7279\u70b9: G1\u6536\u96c6\u5668\u662fJDK 7\u5f15\u5165\uff0c\u5e76\u5728JDK 9\u6210\u4e3a\u9ed8\u8ba4\u7684\u5783\u573e\u6536\u96c6\u5668. \u5b83\u7684\u8bbe\u8ba1\u76ee\u6807\u662f\u53d6\u4ee3CMS\uff0c\u5728\u4f4e\u5ef6\u8fdf\u548c\u9ad8\u541e\u5410\u91cf\u4e4b\u95f4\u5bfb\u627e\u5e73\u8861. G1\u5f15\u5165\u4e86\u5206\u533a\uff08Region\uff09\u6982\u5ff5\uff0c\u5c06\u6574\u4e2aJava\u5806\u5212\u5206\u4e3a\u591a\u4e2a\u5927\u5c0f\u76f8\u7b49\u7684\u72ec\u7acbRegion\u5757. \u6bcf\u4e2aRegion\u53ef\u4ee5\u626e\u6f14\u65b0\u751f\u4ee3\u7684Eden\u3001Survivor\u6216\u8005\u8001\u5e74\u4ee3\u7a7a\u95f4.</li> <li>\u53ef\u9884\u6d4b\u505c\u987f\u65f6\u95f4: G1\u6700\u5927\u7684\u7279\u70b9\u662f\u53ef\u9884\u6d4b\u7684\u505c\u987f\u65f6\u95f4\u6a21\u578b. \u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u53c2\u6570\u8bbe\u5b9a\u671f\u671b\u7684GC\u505c\u987f\u65f6\u95f4\uff0cG1\u4f1a\u901a\u8fc7\u8bb0\u5f55\u6bcf\u4e2aRegion\u7684\u56de\u6536\u4ef7\u503c\uff08\u5305\u62ec\u56de\u6536\u540e\u7684\u7a7a\u95f4\u5927\u5c0f\u3001\u56de\u6536\u6240\u9700\u65f6\u95f4\u7b49\uff09\uff0c\u7ef4\u62a4\u4e00\u4e2a\u4f18\u5148\u7ea7\u5217\u8868\uff0c\u4f18\u5148\u56de\u6536\u5783\u573e\u6700\u591a\u3001\u56de\u6536\u6548\u7387\u6700\u9ad8\u7684Region.</li> <li>\u7b97\u6cd5: \u4ece\u6574\u4f53\u4e0a\u770b\uff0cG1\u57fa\u4e8e\u6807\u8bb0-\u6574\u7406\u7b97\u6cd5\u5b9e\u73b0\uff0c\u53ef\u4ee5\u907f\u514d\u5185\u5b58\u788e\u7247\uff1b\u4ece\u5c40\u90e8\uff08\u4e24\u4e2aRegion\u4e4b\u95f4\uff09\u4e0a\u770b\uff0c\u5219\u662f\u57fa\u4e8e\u6807\u8bb0-\u590d\u5236\u7b97\u6cd5\u5b9e\u73b0.</li> <li>\u5de8\u578b\u5bf9\u8c61 (Humongous Objects): \u5bf9\u4e8e\u8d85\u8fc7\u4e00\u4e2aRegion\u4e00\u534a\u5927\u5c0f\u7684\u5bf9\u8c61\uff0cG1\u4f1a\u5c06\u5176\u89c6\u4e3a\u5de8\u578b\u5bf9\u8c61\uff0c\u76f4\u63a5\u5206\u914d\u5230\u7279\u6b8a\u7684Humongous Region\u4e2d\uff0c\u8fd9\u4e9bRegion\u88ab\u89c6\u4e3a\u8001\u5e74\u4ee3\u7684\u4e00\u90e8\u5206.</li> <li>\u5783\u573e\u56de\u6536\u5468\u671f:<ul> <li>Young GC: \u4e3b\u8981\u6536\u96c6\u5e74\u8f7b\u4ee3Region\uff0c\u91c7\u7528\u6807\u8bb0-\u590d\u5236\u7b97\u6cd5.</li> <li>Mixed GC: \u5f53\u8001\u5e74\u4ee3\u5360\u7528\u7a7a\u95f4\u8d85\u8fc7\u9608\u503c\uff08<code>InitiatingHeapOccupancyPercent</code>\uff0c\u9ed8\u8ba445%\uff09\u65f6\uff0cG1\u4f1a\u542f\u52a8\u4e00\u6b21\u6df7\u5408\u56de\u6536\u5468\u671f. Mixed GC\u4f1a\u6536\u96c6\u6574\u4e2a\u5e74\u8f7b\u4ee3\u4ee5\u53ca\u90e8\u5206\u8001\u5e74\u4ee3Region.</li> <li>\u5e76\u53d1\u6807\u8bb0: G1\u7684\u5e76\u53d1\u6807\u8bb0\u8fc7\u7a0b\u4e0eCMS\u7c7b\u4f3c\uff0c\u5305\u62ec\u521d\u59cb\u6807\u8bb0\uff08STW\uff09\u3001\u6839\u533a\u57df\u626b\u63cf\u3001\u5e76\u53d1\u6807\u8bb0\u3001\u91cd\u65b0\u6807\u8bb0\uff08STW\uff09\u548c\u6e05\u7406\uff08STW\uff0c\u4f46\u6b64\u9636\u6bb5\u4e0d\u6e05\u7406\u5783\u573e\u5bf9\u8c61\uff09\u7b49\u9636\u6bb5. G1\u4f7f\u7528\u539f\u59cb\u5feb\u7167\uff08SATB\uff09\u6765\u89e3\u51b3\u5e76\u53d1\u6807\u8bb0\u65f6\u5bf9\u8c61\u5f15\u7528\u53d8\u5316\u7684\u95ee\u9898.</li> </ul> </li> <li>JVM\u53c2\u6570:<ul> <li><code>-XX:+UseG1GC</code>: \u542f\u7528G1\u6536\u96c6\u5668.</li> <li><code>-XX:MaxGCPauseMillis=N</code>: \u8bbe\u7f6eGC\u6700\u5927\u505c\u987f\u65f6\u95f4\u7684\u76ee\u6807\uff0cG1\u4f1a\u5c1d\u8bd5\u8fbe\u5230\u6b64\u76ee\u6807.</li> </ul> </li> <li>\u4f18\u70b9: \u89e3\u51b3\u4e86CMS\u7684\u5185\u5b58\u788e\u7247\u95ee\u9898\uff0c\u5e76\u63d0\u4f9b\u4e86\u53ef\u9884\u6d4b\u7684\u505c\u987f\u65f6\u95f4.</li> <li>\u7f3a\u70b9: \u76f8\u6bd4CMS\uff0cG1\u7684\u5185\u5b58\u5360\u7528\u548c\u8fd0\u884c\u65f6\u989d\u5916\u8d1f\u8f7d\u66f4\u9ad8\uff0c\u56e0\u4e3a\u6bcf\u4e2aRegion\u90fd\u9700\u8981\u7ef4\u62a4\u4e00\u4e2a\u8bb0\u5fc6\u96c6\uff08Remember Set\uff09\uff0c\u53ef\u80fd\u5360\u7528\u5806\u5bb9\u91cf\u768420%\u751a\u81f3\u66f4\u591a\u5185\u5b58.</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/%E5%B8%B8%E7%94%A8%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8%E4%BB%8B%E7%BB%8D/#zgc-z-garbage-collector","title":"ZGC (Z Garbage Collector)","text":"<ul> <li>\u539f\u7406\u4e0e\u7279\u70b9: ZGC\u662fJDK 11\u5f15\u5165\u7684\u4f4e\u5ef6\u8fdf\u5783\u573e\u6536\u96c6\u5668\uff0c\u76ee\u6807\u662f\u5b9e\u73b0\u6781\u4f4e\u7684\u505c\u987f\u65f6\u95f4\uff08\u901a\u5e38\u4e0d\u8d85\u8fc710\u6beb\u79d2\uff0c\u751a\u81f3\u53ef\u4ee5\u8fbe\u52301\u6beb\u79d2\u4ee5\u5185\uff09\uff0c\u4e14\u505c\u987f\u65f6\u95f4\u4e0d\u968f\u5806\u5927\u5c0f\uff08\u652f\u63018MB\u52304TB\uff0c\u672a\u6765\u53ef\u8fbe16TB\uff09\u6216\u6d3b\u8dc3\u5bf9\u8c61\u6570\u91cf\u7684\u589e\u52a0\u800c\u589e\u52a0. \u5b83\u51e0\u4e4e\u4e0d\u6682\u505c\u7528\u6237\u7ebf\u7a0b.</li> <li>\u6838\u5fc3\u6280\u672f:<ul> <li>\u67d3\u8272\u6307\u9488 (Colored Pointers): ZGC\u7684\u5173\u952e\u6280\u672f\u4e4b\u4e00\u3002\u5b83\u5c06\u5bf9\u8c61\u7684\u72b6\u6001\u4fe1\u606f\uff08\u5982\u662f\u5426\u88ab\u6807\u8bb0\u3001\u662f\u5426\u88ab\u91cd\u5b9a\u4f4d\uff09\u5b58\u50a8\u5728\u5bf9\u8c61\u6307\u9488\u7684\u9ad8\u4f4d\uff0c\u800c\u4e0d\u662f\u5bf9\u8c61\u5934\u4e2d. \u8fd9\u6837\uff0cGC\u7ebf\u7a0b\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u6307\u9488\u989c\u8272\u5224\u65ad\u5bf9\u8c61\u72b6\u6001\uff0c\u65e0\u9700\u989d\u5916\u5185\u5b58\u8bbf\u95ee. ZGC\u4e3a\u6bcf\u4e2a\u5bf9\u8c61\u521b\u5efa\u4e86\u4e09\u4e2a\u865a\u62df\u5185\u5b58\u5730\u5740\uff0c\u901a\u8fc7\u6307\u9488\u6307\u5411\u4e0d\u540c\u7684\u865a\u62df\u5185\u5b58\u5730\u5740\u6765\u8868\u793a\u4e0d\u540c\u7684\u67d3\u8272\u6807\u8bb0.</li> <li>\u8bfb\u5c4f\u969c (Load Barriers): ZGC\u7684\u53e6\u4e00\u4e2a\u5173\u952e\u6280\u672f\u3002\u6bcf\u6b21\u5e94\u7528\u7ebf\u7a0b\u52a0\u8f7d\u4e00\u4e2a\u5bf9\u8c61\u5f15\u7528\u65f6\uff0c\u90fd\u4f1a\u89e6\u53d1\u8bfb\u5c4f\u969c. \u8bfb\u5c4f\u969c\u4f1a\u68c0\u67e5\u6307\u9488\u7684\u989c\u8272\uff0c\u5982\u679c\u5bf9\u8c61\u5df2\u88ab\u79fb\u52a8\uff0c\u8bfb\u5c4f\u969c\u4f1a\u786e\u4fdd\u8fd4\u56de\u5bf9\u8c61\u7684\u65b0\u5730\u5740. \u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0cZGC\u80fd\u591f\u5728\u5e76\u53d1\u79fb\u52a8\u5bf9\u8c61\u65f6\u4fdd\u6301\u5185\u5b58\u8bbf\u95ee\u7684\u4e00\u81f4\u6027\uff0c\u51e0\u4e4e\u6d88\u9664\u4e86STW\u6682\u505c.</li> </ul> </li> <li>\u7b97\u6cd5: ZGC\u91c7\u7528\u6807\u8bb0-\u590d\u5236\u7b97\u6cd5\uff0c\u4f46\u5728\u6807\u8bb0\u3001\u8f6c\u79fb\u548c\u91cd\u5b9a\u4f4d\u9636\u6bb5\u51e0\u4e4e\u90fd\u662f\u5e76\u53d1\u6267\u884c\u7684.</li> <li>\u5de5\u4f5c\u6d41\u7a0b: ZGC\u53ea\u6709\u4e09\u4e2a\u9700\u8981STW\u7684\u9636\u6bb5\uff1a\u521d\u59cb\u6807\u8bb0\u3001\u518d\u6807\u8bb0\u548c\u521d\u59cb\u8f6c\u79fb. \u8fd9\u51e0\u4e2a\u9636\u6bb5\u7684\u5904\u7406\u65f6\u95f4\u90fd\u4e0eGC Roots\u7684\u6570\u91cf\u6210\u6b63\u6bd4\uff0c\u901a\u5e38\u8017\u65f6\u975e\u5e38\u77ed. \u5927\u90e8\u5206\u5de5\u4f5c\uff08\u5982\u5e76\u53d1\u6807\u8bb0\u3001\u5e76\u53d1\u8f6c\u79fb\u548c\u91cd\u5b9a\u4f4d\uff09\u90fd\u5728\u7528\u6237\u7ebf\u7a0b\u8fd0\u884c\u7684\u540c\u65f6\u8fdb\u884c.</li> <li>\u9002\u7528\u573a\u666f: \u5bf9\u5ef6\u8fdf\u8981\u6c42\u6781\u9ad8\uff0c\u5e76\u4e14\u53ef\u80fd\u62e5\u6709\u8d85\u5927\u5806\u5185\u5b58\uff08\u6570\u5341GB\u4e43\u81f3TB\u7ea7\u522b\uff09\u7684\u5e94\u7528\u573a\u666f.</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/%E5%B8%B8%E7%94%A8%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8%E4%BB%8B%E7%BB%8D/#shenandoah","title":"Shenandoah\u6536\u96c6\u5668","text":"<ul> <li>\u539f\u7406\u4e0e\u7279\u70b9: Shenandoah\u6536\u96c6\u5668\u662fRed Hat\u516c\u53f8\u5f00\u53d1\uff0c\u4e8eJDK 12\u4e2d\u5f15\u5165\u7684\u53e6\u4e00\u6b3e\u8d85\u4f4e\u5ef6\u8fdf\u5783\u573e\u6536\u96c6\u5668. \u5176\u8bbe\u8ba1\u76ee\u6807\u4e5f\u662f\u7ba1\u7406\u5927\u578b\u591a\u6838\u670d\u52a1\u5668\u4e0a\u7684\u8d85\u5927\u578b\u5806\u5185\u5b58\uff0c\u5e76\u5c06GC\u6682\u505c\u65f6\u95f4\u63a7\u5236\u572810\u6beb\u79d2\u7ea7\u522b\uff0c\u4e14\u4e0e\u5806\u5927\u5c0f\u65e0\u5173. Shenandoah\u7684GC\u7ebf\u7a0b\u53ef\u4ee5\u4e0e\u5e94\u7528\u7ebf\u7a0b\u5e76\u53d1\u6267\u884c\uff0c\u4ece\u800c\u6781\u5927\u5730\u51cf\u5c11\u505c\u987f\u65f6\u95f4.</li> <li>\u4e0eG1\u7684\u76f8\u4f3c\u4e4b\u5904: Shenandoah\u4e0eG1\u5728\u8bb8\u591a\u65b9\u9762\u76f8\u4f3c\uff0c\u4f8b\u5982\u90fd\u4f7f\u7528\u57fa\u4e8eRegion\u7684\u5806\u5185\u5b58\u5e03\u5c40\uff0c\u4e5f\u6709\u7528\u4e8e\u5b58\u653e\u5de8\u578b\u5bf9\u8c61\u7684Humongous Region\uff0c\u5e76\u4e14\u56de\u6536\u7b56\u7565\u4e0a\u4e5f\u662f\u4f18\u5148\u5904\u7406\u56de\u6536\u4ef7\u503c\u6700\u5927\u7684Region. \u5b83\u4eec\u751a\u81f3\u5171\u4eab\u4e86\u4e00\u90e8\u5206\u4ee3\u7801.</li> <li>\u5173\u952e\u6539\u8fdb:<ul> <li>\u652f\u6301\u5e76\u53d1\u7684\u6574\u7406\u7b97\u6cd5: Shenandoah\u6700\u91cd\u8981\u7684\u6539\u8fdb\u662f\u5b9e\u73b0\u4e86\u5e76\u53d1\u7684\u6574\u7406\uff08\u56de\u6536\uff09\u7b97\u6cd5. \u8fd9\u610f\u5473\u7740\u5728GC\u7ebf\u7a0b\u79fb\u52a8\u5bf9\u8c61\u7684\u540c\u65f6\uff0c\u7528\u6237\u7ebf\u7a0b\u4e5f\u80fd\u5e76\u53d1\u6267\u884c. G1\u7684\u56de\u6536\u9636\u6bb5\u53ef\u4ee5\u5e76\u884c\uff0c\u4f46\u4e0d\u80fd\u4e0e\u7528\u6237\u7ebf\u7a0b\u5e76\u53d1.</li> <li>\u8f6c\u53d1\u6307\u9488 (Brooks Pointers): \u4e3a\u4e86\u5b9e\u73b0\u5e76\u53d1\u6574\u7406\uff0cShenandoah\u4f7f\u7528\u4e86\u8f6c\u53d1\u6307\u9488\u548c\u8bfb\u5c4f\u969c. \u8f6c\u53d1\u6307\u9488\u7c7b\u4f3c\u4e8eJava\u7684\u53e5\u67c4\u5b9a\u4f4d\uff0c\u4f46\u5b83\u5206\u6563\u5b58\u653e\u5728\u6bcf\u4e2a\u5bf9\u8c61\u5934\u524d\u9762. \u5f53\u6536\u96c6\u5668\u7ebf\u7a0b\u590d\u5236\u5bf9\u8c61\u65f6\uff0c\u5b83\u4f1a\u66f4\u65b0\u65e7\u5bf9\u8c61\u5934\u7684\u8f6c\u53d1\u6307\u9488\u6307\u5411\u65b0\u526f\u672c\u7684\u5730\u5740.</li> <li>\u5f15\u7528\u8bfb\u5199\u5c4f\u969c: Shenandoah\u5c06\u8bfb\u5199\u5c4f\u969c\u4f18\u5316\u4e3a\u5f15\u7528\u8bfb\u5199\u5c4f\u969c\uff0c\u5373\u53ea\u5bf9\u5bf9\u8c61\u5f15\u7528\u7c7b\u578b\u7684\u6570\u636e\u4fee\u6539\u52a0\u5c4f\u969c\uff0c\u800c\u4e0d\u662f\u5bf9\u6240\u6709\u8bfb\u5199\u64cd\u4f5c\u90fd\u52a0\u5c4f\u969c\uff0c\u4ece\u800c\u51cf\u5c11\u4e86\u5c4f\u969c\u5e26\u6765\u7684\u6027\u80fd\u5f00\u9500.</li> <li>\u8fde\u63a5\u77e9\u9635 (Connection Matrix): Shenandoah\u6452\u5f03\u4e86G1\u4e2d\u8bb0\u5fc6\u96c6\uff0c\u6539\u7528\u8fde\u63a5\u77e9\u9635\u6765\u8bb0\u5f55\u8de8Region\u7684\u5f15\u7528\u5173\u7cfb\uff0c\u964d\u4f4e\u4e86\u8bb0\u5fc6\u96c6\u7ef4\u62a4\u7684\u5f00\u9500.</li> </ul> </li> <li>\u4e0d\u5206\u4ee3: Shenandoah\uff08\u76ee\u524d\uff09\u9ed8\u8ba4\u4e0d\u4f7f\u7528\u5206\u4ee3\u6536\u96c6\uff0c\u8fd9\u610f\u5473\u7740\u6ca1\u6709\u4e13\u95e8\u7684\u65b0\u751f\u4ee3Region\u6216\u8001\u5e74\u4ee3Region.</li> <li>\u9002\u7528\u573a\u666f: \u5bf9\u5ef6\u8fdf\u8981\u6c42\u6781\u9ad8\u7684\u5927\u5185\u5b58\u5e94\u7528\u573a\u666f.</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/%E7%B1%BB%E8%BD%BD%E5%85%A5%E8%BF%87%E7%A8%8B%E4%BB%8B%E7%BB%8D/","title":"\u7c7b\u8f7d\u5165\u8fc7\u7a0b\u4ecb\u7ecd","text":"<p>\u7c7b\u52a0\u8f7d\u8fc7\u7a0b\u662fJava\u865a\u62df\u673a\uff08JVM\uff09\u5c06\u7c7b\u7684<code>.class</code>\u6587\u4ef6\u4e2d\u7684\u4e8c\u8fdb\u5236\u6570\u636e\u8bfb\u5165\u5185\u5b58\uff0c\u5e76\u5c06\u5176\u8f6c\u6362\u4e3a<code>java.lang.Class</code>\u5bf9\u8c61\u7684\u8fc7\u7a0b\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u662fJava\u7a0b\u5e8f\u80fd\u591f\u8fd0\u884c\u7684\u57fa\u7840\uff0c\u56e0\u4e3a\u5b83\u4f7f\u5f97\u7a0b\u5e8f\u53ef\u4ee5\u8bbf\u95ee\u548c\u4f7f\u7528\u7c7b\u7684\u9759\u6001\u6210\u5458\u3001\u521b\u5efa\u7c7b\u7684\u5b9e\u4f8b\u4ee5\u53ca\u8c03\u7528\u7c7b\u7684\u65b9\u6cd5\u3002</p> <p>JVM\u7684\u7c7b\u52a0\u8f7d\u8fc7\u7a0b\u4e3b\u8981\u5305\u62ec\u4ee5\u4e0b\u4e94\u4e2a\u9636\u6bb5\uff0c\u901a\u5e38\u662f\u6309\u987a\u5e8f\u8fdb\u884c\u7684\uff0c\u4f46\u89e3\u6790\u9636\u6bb5\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u4e5f\u53ef\u80fd\u5728\u521d\u59cb\u5316\u4e4b\u540e\u518d\u53d1\u751f\uff08\u4e3a\u4e86\u652f\u6301Java\u8bed\u8a00\u7684\u52a8\u6001\u7ed1\u5b9a\uff09\uff1a</p> <ol> <li> <p>\u52a0\u8f7d\uff08Loading\uff09\uff1a</p> <ul> <li>\u76ee\u7684\uff1a\u67e5\u627e\u5e76\u52a0\u8f7d\u7c7b\u7684\u4e8c\u8fdb\u5236\u6570\u636e\uff08<code>.class</code>\u6587\u4ef6\uff09\u3002</li> <li>\u8fc7\u7a0b\uff1a     a.  \u901a\u8fc7\u4e00\u4e2a\u7c7b\u7684\u5168\u9650\u5b9a\u540d\uff08\u4f8b\u5982 <code>com.example.MyClass</code>\uff09\u83b7\u53d6\u5b9a\u4e49\u6b64\u7c7b\u7684\u4e8c\u8fdb\u5236\u5b57\u8282\u6d41\u3002\u8fd9\u4e2a\u5b57\u8282\u6d41\u53ef\u4ee5\u4ece\u591a\u79cd\u6765\u6e90\u83b7\u53d6\uff0c\u5982\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\uff08\u6700\u5e38\u89c1\uff09\u3001\u7f51\u7edc\uff08\u5982Applet\uff09\u3001JAR/ZIP\u7b49\u5f52\u6863\u6587\u4ef6\u3001\u8fd0\u884c\u65f6\u52a8\u6001\u751f\u6210\uff08\u5982\u52a8\u6001\u4ee3\u7406\u6280\u672f\uff09\u3001\u7531\u5176\u4ed6\u6587\u4ef6\u751f\u6210\uff08\u5982JSP\u6587\u4ef6\u7f16\u8bd1\u6210\u7684Servlet\u7c7b\uff09\u7b49\u3002\u8fd9\u4e2a\u4efb\u52a1\u7531\u7c7b\u52a0\u8f7d\u5668\uff08Class Loader\uff09\u5b8c\u6210\u3002     b.  \u5c06\u8fd9\u4e2a\u5b57\u8282\u6d41\u6240\u4ee3\u8868\u7684\u9759\u6001\u5b58\u50a8\u7ed3\u6784\u8f6c\u5316\u4e3a\u65b9\u6cd5\u533a\uff08\u6216\u5143\u7a7a\u95f4\uff09\u7684\u8fd0\u884c\u65f6\u6570\u636e\u7ed3\u6784\u3002     c.  \u5728Java\u5806\u4e2d\u751f\u6210\u4e00\u4e2a\u4ee3\u8868\u8fd9\u4e2a\u7c7b\u7684 <code>java.lang.Class</code> \u5bf9\u8c61\uff0c\u4f5c\u4e3a\u65b9\u6cd5\u533a\u8fd9\u4e2a\u7c7b\u7684\u5404\u79cd\u6570\u636e\u7684\u8bbf\u95ee\u5165\u53e3\u3002</li> <li>\u6ce8\u610f\uff1a\u52a0\u8f7d\u9636\u6bb5\u4e0e\u8fde\u63a5\u9636\u6bb5\u7684\u90e8\u5206\u5185\u5bb9\uff08\u5982\u9a8c\u8bc1\u5b57\u8282\u7801\u6587\u4ef6\u683c\u5f0f\uff09\u662f\u4ea4\u53c9\u8fdb\u884c\u7684\u3002</li> </ul> </li> <li> <p>\u8fde\u63a5\uff08Linking\uff09\uff1a     \u8fde\u63a5\u9636\u6bb5\u662f\u5c06\u5df2\u7ecf\u52a0\u8f7d\u7684\u7c7b\u7684\u4e8c\u8fdb\u5236\u6570\u636e\u5408\u5e76\u5230JVM\u7684\u8fd0\u884c\u65f6\u72b6\u6001\u4e2d\u3002\u5b83\u53c8\u5206\u4e3a\u4e09\u4e2a\u5b50\u9636\u6bb5\uff1a</p> <ul> <li>a. \u9a8c\u8bc1\uff08Verification\uff09\uff1a<ul> <li>\u76ee\u7684\uff1a\u786e\u4fdd\u88ab\u52a0\u8f7d\u7684\u7c7b\uff08<code>.class</code>\u6587\u4ef6\uff09\u7684\u5b57\u8282\u6d41\u4e2d\u5305\u542b\u7684\u4fe1\u606f\u7b26\u5408\u5f53\u524d\u865a\u62df\u673a\u7684\u8981\u6c42\uff0c\u5e76\u4e14\u4e0d\u4f1a\u5371\u5bb3\u865a\u62df\u673a\u81ea\u8eab\u7684\u5b89\u5168\u3002</li> <li>\u5185\u5bb9\uff1a\u5305\u62ec\u6587\u4ef6\u683c\u5f0f\u9a8c\u8bc1\uff08\u5982\u9b54\u6570\u3001\u4e3b\u6b21\u7248\u672c\u53f7\uff09\u3001\u5143\u6570\u636e\u9a8c\u8bc1\uff08\u5982\u662f\u5426\u6709\u7236\u7c7b\u3001\u662f\u5426\u7ee7\u627f\u4e86\u4e0d\u5141\u8bb8\u88ab\u7ee7\u627f\u7684\u7c7b\uff09\u3001\u5b57\u8282\u7801\u9a8c\u8bc1\uff08\u901a\u8fc7\u6570\u636e\u6d41\u548c\u63a7\u5236\u6d41\u5206\u6790\uff0c\u786e\u5b9a\u7a0b\u5e8f\u8bed\u4e49\u662f\u5408\u6cd5\u7684\u3001\u7b26\u5408\u903b\u8f91\u7684\uff09\u3001\u7b26\u53f7\u5f15\u7528\u9a8c\u8bc1\uff08\u786e\u4fdd\u7b26\u53f7\u5f15\u7528\u80fd\u8f6c\u6362\u4e3a\u76f4\u63a5\u5f15\u7528\uff09\u7b49\u3002</li> <li>\u8fd9\u662fJVM\u7c7b\u52a0\u8f7d\u673a\u5236\u4e2d\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u73af\u8282\uff0c\u5bf9\u9632\u6b62\u6076\u610f\u4ee3\u7801\u7834\u574f\u81f3\u5173\u91cd\u8981\u3002</li> </ul> </li> <li>b. \u51c6\u5907\uff08Preparation\uff09\uff1a<ul> <li>\u76ee\u7684\uff1a\u4e3a\u7c7b\u7684\u9759\u6001\u53d8\u91cf\uff08static fields\uff09\u5206\u914d\u5185\u5b58\uff0c\u5e76\u8bbe\u7f6e\u5176\u521d\u59cb\u503c\uff08\u96f6\u503c\uff09\u3002</li> <li>\u8fc7\u7a0b\uff1a\u5728\u8fd9\u4e2a\u9636\u6bb5\uff0cJVM\u4f1a\u5728\u65b9\u6cd5\u533a\uff08\u6216\u5143\u7a7a\u95f4\uff09\u4e2d\u4e3a\u7c7b\u7684\u9759\u6001\u53d8\u91cf\u5206\u914d\u5185\u5b58\uff0c\u5e76\u8d4b\u4e88\u8fd9\u4e9b\u53d8\u91cf\u4e00\u4e2a\u521d\u59cb\u7684\u9ed8\u8ba4\u503c\u3002\u4f8b\u5982\uff0c<code>int</code>\u7c7b\u578b\u7684\u9759\u6001\u53d8\u91cf\u4f1a\u88ab\u521d\u59cb\u5316\u4e3a0\uff0c<code>boolean</code>\u4e3a<code>false</code>\uff0c\u5f15\u7528\u7c7b\u578b\u4e3a<code>null</code>\u3002</li> <li>\u6ce8\u610f\uff1a\u8fd9\u91cc\u8bbe\u7f6e\u7684\u662f\u6570\u636e\u7c7b\u578b\u7684\u96f6\u503c\uff0c\u800c\u4e0d\u662f\u7a0b\u5e8f\u5458\u5728\u4ee3\u7801\u4e2d\u4e3a\u9759\u6001\u53d8\u91cf\u663e\u5f0f\u8d4b\u7684\u503c\u3002\u663e\u5f0f\u8d4b\u503c\u64cd\u4f5c\u662f\u5728\u540e\u7eed\u7684\u521d\u59cb\u5316\u9636\u6bb5\u7684<code>&lt;clinit&gt;()</code>\u65b9\u6cd5\u4e2d\u6267\u884c\u7684\u3002\u4f46\u662f\uff0c\u5982\u679c\u9759\u6001\u53d8\u91cf\u662f<code>final</code>\u7c7b\u578b\u7684\u5e38\u91cf\uff08<code>static final</code>\uff09\uff0c\u5e76\u4e14\u5176\u503c\u5728\u7f16\u8bd1\u65f6\u5c31\u80fd\u786e\u5b9a\uff08\u5373\u5e38\u91cf\u503c\uff09\uff0c\u90a3\u4e48\u5728\u51c6\u5907\u9636\u6bb5\u5c31\u4f1a\u88ab\u76f4\u63a5\u8d4b\u503c\u4e3a\u4ee3\u7801\u4e2d\u6307\u5b9a\u7684\u503c\uff08\u4f8b\u5982 <code>public static final int VALUE = 123;</code>\uff0cVALUE\u5728\u51c6\u5907\u9636\u6bb5\u5c31\u4e3a123\uff09\u3002</li> </ul> </li> <li>c. \u89e3\u6790\uff08Resolution\uff09\uff1a<ul> <li>\u76ee\u7684\uff1a\u5c06\u5e38\u91cf\u6c60\u4e2d\u7684\u7b26\u53f7\u5f15\u7528\uff08Symbolic References\uff09\u66ff\u6362\u4e3a\u76f4\u63a5\u5f15\u7528\uff08Direct References\uff09\u3002</li> <li>\u8fc7\u7a0b\uff1a\u7b26\u53f7\u5f15\u7528\u662f\u4e00\u79cd\u4ee5\u4e00\u7ec4\u7b26\u53f7\u6765\u63cf\u8ff0\u6240\u5f15\u7528\u7684\u76ee\u6807\u7684\uff0c\u5f15\u7528\u7684\u76ee\u6807\u5e76\u4e0d\u4e00\u5b9a\u5df2\u7ecf\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u3002\u76f4\u63a5\u5f15\u7528\u5219\u662f\u53ef\u4ee5\u76f4\u63a5\u6307\u5411\u76ee\u6807\u7684\u6307\u9488\u3001\u76f8\u5bf9\u504f\u79fb\u91cf\u6216\u8005\u662f\u4e00\u4e2a\u80fd\u95f4\u63a5\u5b9a\u4f4d\u5230\u76ee\u6807\u7684\u53e5\u67c4\u3002</li> <li>\u89e3\u6790\u52a8\u4f5c\u4e3b\u8981\u9488\u5bf9\u7c7b\u6216\u63a5\u53e3\u3001\u5b57\u6bb5\u3001\u7c7b\u65b9\u6cd5\u3001\u63a5\u53e3\u65b9\u6cd5\u3001\u65b9\u6cd5\u7c7b\u578b\u3001\u65b9\u6cd5\u53e5\u67c4\u548c\u8c03\u7528\u70b9\u9650\u5b9a\u7b26\u8fd97\u7c7b\u7b26\u53f7\u5f15\u7528\u8fdb\u884c\u3002</li> <li>\u89e3\u6790\u9636\u6bb5\u7684\u53d1\u751f\u65f6\u673a\u5e76\u4e0d\u56fa\u5b9a\uff0c\u5b83\u53ef\u80fd\u5728\u521d\u59cb\u5316\u4e4b\u524d\u5b8c\u6210\uff0c\u4e5f\u53ef\u80fd\u5728\u521d\u59cb\u5316\u4e4b\u540e\uff08\u4f8b\u5982\uff0c\u901a\u8fc7\u53cd\u5c04\u52a8\u6001\u52a0\u8f7d\u7c7b\u6216\u4f7f\u7528<code>invokedynamic</code>\u6307\u4ee4\u65f6\uff0c\u76f8\u5173\u7684\u7b26\u53f7\u5f15\u7528\u89e3\u6790\u4f1a\u63a8\u8fdf\u5230\u8fd0\u884c\u65f6\uff09\u3002</li> </ul> </li> </ul> </li> <li> <p>\u521d\u59cb\u5316\uff08Initialization\uff09\uff1a</p> <ul> <li>\u76ee\u7684\uff1a\u6267\u884c\u7c7b\u7684\u521d\u59cb\u5316\u4ee3\u7801\uff0c\u5373\u6267\u884c\u7c7b\u6784\u9020\u5668<code>&lt;clinit&gt;()</code>\u65b9\u6cd5\u3002</li> <li>\u8fc7\u7a0b\uff1a<code>&lt;clinit&gt;()</code>\u65b9\u6cd5\u662f\u7531\u7f16\u8bd1\u5668\u81ea\u52a8\u6536\u96c6\u7c7b\u4e2d\u6240\u6709\u7c7b\u53d8\u91cf\u7684\u8d4b\u503c\u52a8\u4f5c\u548c\u9759\u6001\u521d\u59cb\u5316\u5757\uff08<code>static {}</code>\u5757\uff09\u4e2d\u7684\u8bed\u53e5\u5408\u5e76\u4ea7\u751f\u7684\u3002\u7f16\u8bd1\u5668\u6536\u96c6\u7684\u987a\u5e8f\u662f\u7531\u8bed\u53e5\u5728\u6e90\u6587\u4ef6\u4e2d\u51fa\u73b0\u7684\u987a\u5e8f\u51b3\u5b9a\u7684\u3002</li> <li><code>&lt;clinit&gt;()</code>\u65b9\u6cd5\u4e0e\u7c7b\u7684\u6784\u9020\u51fd\u6570\uff08\u5373\u5b9e\u4f8b\u6784\u9020\u5668<code>&lt;init&gt;()</code>\u65b9\u6cd5\uff09\u4e0d\u540c\uff1a<ul> <li><code>&lt;clinit&gt;()</code>\u4e0d\u9700\u8981\u663e\u5f0f\u8c03\u7528\u7236\u7c7b\u7684<code>&lt;clinit&gt;()</code>\u65b9\u6cd5\uff0cJVM\u4f1a\u4fdd\u8bc1\u5728\u5b50\u7c7b\u7684<code>&lt;clinit&gt;()</code>\u65b9\u6cd5\u6267\u884c\u524d\uff0c\u7236\u7c7b\u7684<code>&lt;clinit&gt;()</code>\u65b9\u6cd5\u5df2\u7ecf\u6267\u884c\u5b8c\u6bd5\u3002\u56e0\u6b64\uff0c\u5728JVM\u4e2d\u7b2c\u4e00\u4e2a\u88ab\u6267\u884c\u7684<code>&lt;clinit&gt;()</code>\u65b9\u6cd5\u7684\u7c7b\u80af\u5b9a\u662f<code>java.lang.Object</code>\u3002</li> <li><code>&lt;clinit&gt;()</code>\u65b9\u6cd5\u5bf9\u4e8e\u7c7b\u6216\u63a5\u53e3\u6765\u8bf4\u5e76\u4e0d\u662f\u5fc5\u9700\u7684\uff0c\u5982\u679c\u4e00\u4e2a\u7c7b\u4e2d\u6ca1\u6709\u9759\u6001\u53d8\u91cf\u8d4b\u503c\u64cd\u4f5c\u6216\u8005\u9759\u6001\u521d\u59cb\u5316\u5757\uff0c\u90a3\u4e48\u7f16\u8bd1\u5668\u53ef\u4ee5\u4e0d\u4e3a\u8fd9\u4e2a\u7c7b\u751f\u6210<code>&lt;clinit&gt;()</code>\u65b9\u6cd5\u3002</li> <li>\u63a5\u53e3\u4e2d\u4e5f\u4f1a\u6709<code>&lt;clinit&gt;()</code>\u65b9\u6cd5\uff08\u5f53\u63a5\u53e3\u4e2d\u6709\u9ed8\u8ba4\u65b9\u6cd5\u6216\u9759\u6001\u6210\u5458\u65f6\uff09\uff0c\u4f46\u4e0e\u7c7b\u4e0d\u540c\u7684\u662f\uff0c\u6267\u884c\u63a5\u53e3\u7684<code>&lt;clinit&gt;()</code>\u65b9\u6cd5\u4e0d\u9700\u8981\u5148\u6267\u884c\u7236\u63a5\u53e3\u7684<code>&lt;clinit&gt;()</code>\u65b9\u6cd5\uff0c\u53ea\u6709\u5f53\u771f\u6b63\u4f7f\u7528\u5230\u7236\u63a5\u53e3\u7684\u65f6\u5019\uff08\u5982\u5f15\u7528\u63a5\u53e3\u4e2d\u5b9a\u4e49\u7684\u5e38\u91cf\uff09\u624d\u4f1a\u89e6\u53d1\u7236\u63a5\u53e3\u7684\u521d\u59cb\u5316\u3002</li> <li>JVM\u4f1a\u4fdd\u8bc1\u4e00\u4e2a\u7c7b\u7684<code>&lt;clinit&gt;()</code>\u65b9\u6cd5\u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e2d\u88ab\u6b63\u786e\u5730\u52a0\u9501\u3001\u540c\u6b65\u3002\u5982\u679c\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u53bb\u521d\u59cb\u5316\u4e00\u4e2a\u7c7b\uff0c\u90a3\u4e48\u53ea\u4f1a\u6709\u4e00\u4e2a\u7ebf\u7a0b\u53bb\u6267\u884c\u8fd9\u4e2a\u7c7b\u7684<code>&lt;clinit&gt;()</code>\u65b9\u6cd5\uff0c\u5176\u4ed6\u7ebf\u7a0b\u90fd\u9700\u8981\u963b\u585e\u7b49\u5f85\uff0c\u76f4\u5230\u6d3b\u52a8\u7ebf\u7a0b\u6267\u884c<code>&lt;clinit&gt;()</code>\u65b9\u6cd5\u5b8c\u6bd5\u3002\u5982\u679c\u4e00\u4e2a\u7c7b\u7684<code>&lt;clinit&gt;()</code>\u65b9\u6cd5\u4e2d\u6709\u8017\u65f6\u5f88\u957f\u7684\u64cd\u4f5c\uff0c\u5c31\u53ef\u80fd\u9020\u6210\u591a\u4e2a\u8fdb\u7a0b\u963b\u585e\u3002</li> </ul> </li> <li>\u89e6\u53d1\u521d\u59cb\u5316\u7684\u65f6\u673a\uff1aJVM\u89c4\u8303\u4e25\u683c\u89c4\u5b9a\u4e86\u6709\u4e14\u53ea\u6709\u516d\u79cd\u60c5\u51b5\u5fc5\u987b\u7acb\u5373\u5bf9\u7c7b\u8fdb\u884c\u201c\u521d\u59cb\u5316\u201d\uff08\u800c\u52a0\u8f7d\u3001\u9a8c\u8bc1\u3001\u51c6\u5907\u81ea\u7136\u9700\u8981\u5728\u6b64\u4e4b\u524d\u5f00\u59cb\uff09\uff1a<ol> <li>\u9047\u5230<code>new</code>\u3001<code>getstatic</code>\u3001<code>putstatic</code>\u6216<code>invokestatic</code>\u8fd94\u6761\u5b57\u8282\u7801\u6307\u4ee4\u65f6\uff0c\u5982\u679c\u7c7b\u6ca1\u6709\u8fdb\u884c\u8fc7\u521d\u59cb\u5316\uff0c\u5219\u9700\u8981\u5148\u89e6\u53d1\u5176\u521d\u59cb\u5316\u3002\u751f\u6210\u8fd94\u6761\u6307\u4ee4\u7684Java\u4ee3\u7801\u573a\u666f\u662f\uff1a\u4f7f\u7528<code>new</code>\u5173\u952e\u5b57\u5b9e\u4f8b\u5316\u5bf9\u8c61\u7684\u65f6\u5019\u3001\u8bfb\u53d6\u6216\u8bbe\u7f6e\u4e00\u4e2a\u7c7b\u7684\u9759\u6001\u5b57\u6bb5\uff08\u88ab<code>final</code>\u4fee\u9970\u3001\u5df2\u5728\u7f16\u8bd1\u671f\u628a\u7ed3\u679c\u653e\u5165\u5e38\u91cf\u6c60\u7684\u9759\u6001\u5b57\u6bb5\u9664\u5916\uff09\u7684\u65f6\u5019\u3001\u4ee5\u53ca\u8c03\u7528\u4e00\u4e2a\u7c7b\u7684\u9759\u6001\u65b9\u6cd5\u7684\u65f6\u5019\u3002</li> <li>\u4f7f\u7528<code>java.lang.reflect</code>\u5305\u7684\u65b9\u6cd5\u5bf9\u7c7b\u8fdb\u884c\u53cd\u5c04\u8c03\u7528\u7684\u65f6\u5019\uff0c\u5982\u679c\u7c7b\u6ca1\u6709\u8fdb\u884c\u8fc7\u521d\u59cb\u5316\uff0c\u5219\u9700\u8981\u5148\u89e6\u53d1\u5176\u521d\u59cb\u5316\u3002</li> <li>\u5f53\u521d\u59cb\u5316\u4e00\u4e2a\u7c7b\u7684\u65f6\u5019\uff0c\u5982\u679c\u53d1\u73b0\u5176\u7236\u7c7b\u8fd8\u6ca1\u6709\u8fdb\u884c\u8fc7\u521d\u59cb\u5316\uff0c\u5219\u9700\u8981\u5148\u89e6\u53d1\u5176\u7236\u7c7b\u7684\u521d\u59cb\u5316\u3002</li> <li>\u5f53\u865a\u62df\u673a\u542f\u52a8\u65f6\uff0c\u7528\u6237\u9700\u8981\u6307\u5b9a\u4e00\u4e2a\u8981\u6267\u884c\u7684\u4e3b\u7c7b\uff08\u5305\u542b<code>main()</code>\u65b9\u6cd5\u7684\u90a3\u4e2a\u7c7b\uff09\uff0c\u865a\u62df\u673a\u4f1a\u5148\u521d\u59cb\u5316\u8fd9\u4e2a\u4e3b\u7c7b\u3002</li> <li>\u5f53\u4f7f\u7528JDK 7\u7684\u52a8\u6001\u8bed\u8a00\u652f\u6301\u65f6\uff0c\u5982\u679c\u4e00\u4e2a<code>java.lang.invoke.MethodHandle</code>\u5b9e\u4f8b\u6700\u540e\u7684\u89e3\u6790\u7ed3\u679c<code>REF_getStatic</code>\u3001<code>REF_putStatic</code>\u3001<code>REF_invokeStatic</code>\u7684\u65b9\u6cd5\u53e5\u67c4\uff0c\u5e76\u4e14\u8fd9\u4e2a\u65b9\u6cd5\u53e5\u67c4\u6240\u5bf9\u5e94\u7684\u7c7b\u6ca1\u6709\u8fdb\u884c\u8fc7\u521d\u59cb\u5316\uff0c\u5219\u9700\u8981\u5148\u89e6\u53d1\u5176\u521d\u59cb\u5316\u3002</li> <li>\u5f53\u4e00\u4e2a\u63a5\u53e3\u4e2d\u5b9a\u4e49\u4e86JDK 8\u65b0\u52a0\u5165\u7684\u9ed8\u8ba4\u65b9\u6cd5\uff08\u88ab<code>default</code>\u5173\u952e\u5b57\u4fee\u9970\u7684\u63a5\u53e3\u65b9\u6cd5\uff09\u65f6\uff0c\u5982\u679c\u8fd9\u4e2a\u63a5\u53e3\u7684\u5b9e\u73b0\u7c7b\u53d1\u751f\u4e86\u521d\u59cb\u5316\uff0c\u90a3\u8be5\u63a5\u53e3\u8981\u5728\u5176\u4e4b\u524d\u88ab\u521d\u59cb\u5316\u3002</li> </ol> </li> </ul> </li> </ol> <p>\u8fd9\u4e94\u4e2a\u9636\u6bb5\u5171\u540c\u5b8c\u6210\u4e86\u5c06\u4e00\u4e2a<code>.class</code>\u6587\u4ef6\u4e2d\u7684\u4fe1\u606f\u52a0\u8f7d\u5230JVM\u5185\u5b58\u4e2d\uff0c\u5e76\u4f7f\u5176\u53ef\u4ee5\u88ab\u7a0b\u5e8f\u4f7f\u7528\u7684\u5168\u8fc7\u7a0b\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/%E7%BB%93%E5%90%88JVM%E7%9A%84%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84%E8%AE%B2%E8%A7%A3%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%BA%E4%BB%80%E4%B9%88%E5%8F%AF%E8%83%BD%E5%8F%91%E7%94%9F%E9%94%99%E8%AF%AF/","title":"\u7ed3\u5408JVM\u7684\u5185\u5b58\u7ed3\u6784\u8bb2\u89e3\u591a\u7ebf\u7a0b\u4e3a\u4ec0\u4e48\u53ef\u80fd\u53d1\u751f\u9519\u8bef","text":"<p>JVM\u7684\u5185\u5b58\u7ed3\u6784\uff1a *   \u7ebf\u7a0b\u5171\u4eab\u533a\u57df\uff1aJava\u5806\u3001\u65b9\u6cd5\u533a\u3002\u8fd9\u91cc\u5b58\u653e\u7740\u5bf9\u8c61\u5b9e\u4f8b\u548c\u9759\u6001\u53d8\u91cf\uff0c\u662f\u6240\u6709\u7ebf\u7a0b\u90fd\u80fd\u8bbf\u95ee\u7684\u5171\u4eab\u6570\u636e\u533a\uff0c\u4e5f\u662f\u5e76\u53d1\u95ee\u9898\u7684\u201c\u7b56\u6e90\u5730\u201d\u3002 *   \u7ebf\u7a0b\u79c1\u6709\u533a\u57df\uff1a\u865a\u62df\u673a\u6808\u3001\u672c\u5730\u65b9\u6cd5\u6808\u3001\u7a0b\u5e8f\u8ba1\u6570\u5668\u3002\u6bcf\u4e2a\u7ebf\u7a0b\u72ec\u6709\u4e00\u4efd\u3002</p> <p>\u95ee\u9898\u7684\u5173\u952e\u5728\u4e8eJava\u5185\u5b58\u6a21\u578b\uff08JMM\uff09\u7684\u89c4\u5b9a\uff1a\u7ebf\u7a0b\u5bf9\u5171\u4eab\u53d8\u91cf\u7684\u6240\u6709\u64cd\u4f5c\uff0c\u90fd\u5fc5\u987b\u5728\u81ea\u5df1\u7684\u5de5\u4f5c\u5185\u5b58\u4e2d\u8fdb\u884c\uff0c\u4e0d\u80fd\u76f4\u63a5\u8bfb\u5199\u4e3b\u5185\u5b58\u4e2d\u7684\u53d8\u91cf\u3002</p> <p>\u8fd9\u4e2a\u201c\u5de5\u4f5c\u5185\u5b58\u201d\u662f\u4e00\u4e2a\u62bd\u8c61\u6982\u5ff5\uff0c\u5b83\u6db5\u76d6\u4e86CPU\u7684\u9ad8\u901f\u7f13\u5b58\u3001\u5bc4\u5b58\u5668\u7b49\u3002\u4e00\u4e2a\u7ebf\u7a0b\u4fee\u6539\u5171\u4eab\u53d8\u91cf\u7684\u6d41\u7a0b\u662f\uff1a 1.  \u4ece\u4e3b\u5185\u5b58\uff08\u5806\uff09\u4e2d\u590d\u5236\u53d8\u91cf\u5230\u81ea\u5df1\u7684\u5de5\u4f5c\u5185\u5b58\u3002 2.  \u5728\u5de5\u4f5c\u5185\u5b58\u4e2d\u6267\u884c\u4fee\u6539\u64cd\u4f5c\u3002 3.  \u5c06\u4fee\u6539\u540e\u7684\u503c\u5199\u56de\u4e3b\u5185\u5b58\u3002</p> <p>\u6b63\u662f\u8fd9\u4e2a\u201c\u590d\u5236-\u4fee\u6539-\u5199\u56de\u201d\u7684\u8fc7\u7a0b\uff0c\u4ee5\u53caCPU\u548c\u7f16\u8bd1\u5668\u7684\u4f18\u5316\uff0c\u5bfc\u81f4\u4e86\u4ee5\u4e0b\u4e09\u5927\u95ee\u9898\uff1a</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/%E7%BB%93%E5%90%88JVM%E7%9A%84%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84%E8%AE%B2%E8%A7%A3%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%BA%E4%BB%80%E4%B9%88%E5%8F%AF%E8%83%BD%E5%8F%91%E7%94%9F%E9%94%99%E8%AF%AF/#atomicity","title":"\u95ee\u9898\u4e00\uff1a\u539f\u5b50\u6027\uff08Atomicity\uff09\u95ee\u9898","text":"<p>\u539f\u5b50\u6027\u6307\u7684\u662f\u4e00\u4e2a\u64cd\u4f5c\u6216\u591a\u4e2a\u64cd\u4f5c\uff0c\u8981\u4e48\u5168\u90e8\u6267\u884c\u5b8c\u6210\u5e76\u4e14\u6267\u884c\u7684\u8fc7\u7a0b\u4e0d\u88ab\u4efb\u4f55\u56e0\u7d20\u6253\u65ad\uff0c\u8981\u4e48\u5c31\u90fd\u4e0d\u6267\u884c\u3002</p> <ul> <li>\u4e3a\u4ec0\u4e48\u4f1a\u51fa\u9519\uff1f     \u5728Java\u4e2d\uff0c\u5f88\u591a\u6211\u4eec\u770b\u4f3c\u4e00\u6b65\u5b8c\u6210\u7684\u64cd\u4f5c\uff0c\u5728\u5e95\u5c42\u5176\u5b9e\u662f\u7531\u591a\u4e2aCPU\u6307\u4ee4\u6784\u6210\u7684\u3002\u4f8b\u5982 <code>count++</code> \u8fd9\u4e2a\u64cd\u4f5c\uff0c\u5b83\u81f3\u5c11\u5305\u542b\u4e09\u4e2a\u6b65\u9aa4\uff1a<ol> <li>\u4ece\u4e3b\u5185\u5b58\u8bfb\u53d6<code>count</code>\u7684\u503c\u3002</li> <li>\u5728\u5de5\u4f5c\u5185\u5b58\u4e2d\u5bf9<code>count</code>\u8fdb\u884c\u52a01\u64cd\u4f5c\u3002</li> <li>\u5c06\u65b0\u503c\u5199\u56de\u4e3b\u5185\u5b58\u3002 \u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e0b\uff0cCPU\u7684\u4e0a\u4e0b\u6587\u5207\u6362\u53ef\u80fd\u53d1\u751f\u5728\u8fd9\u4e09\u4e2a\u6b65\u9aa4\u7684\u4efb\u4f55\u4e00\u4e2a\u4e2d\u95f4\u3002\u6bd4\u5982\uff0c\u7ebf\u7a0bA\u8bfb\u53d6\u4e86<code>count=10</code>\uff0c\u8fd8\u6ca1\u6765\u5f97\u53ca\u5199\u56de\uff0cCPU\u5c31\u5207\u6362\u5230\u4e86\u7ebf\u7a0bB\u3002\u7ebf\u7a0bB\u4e5f\u8bfb\u53d6\u4e86<code>count=10</code>\uff0c\u6267\u884c\u4e86\u52a01\uff0c\u5e76\u5199\u56de\u4e86<code>11</code>\u3002\u7136\u540eCPU\u53c8\u5207\u56de\u7ebf\u7a0bA\uff0c\u5b83\u57fa\u4e8e\u81ea\u5df1\u5de5\u4f5c\u5185\u5b58\u4e2d\u7684\u65e7\u503c<code>10</code>\uff0c\u4e5f\u6267\u884c\u52a01\uff0c\u518d\u5199\u56de<code>11</code>\u3002\u4e24\u4e2a\u7ebf\u7a0b\u90fd\u6267\u884c\u4e86\u52a01\uff0c\u7ed3\u679c\u5374\u662f<code>11</code>\u800c\u4e0d\u662f<code>12</code>\uff0c\u8fd9\u5c31\u662f\u539f\u5b50\u6027\u88ab\u7834\u574f\u4e86\u3002</li> </ol> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/%E7%BB%93%E5%90%88JVM%E7%9A%84%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84%E8%AE%B2%E8%A7%A3%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%BA%E4%BB%80%E4%B9%88%E5%8F%AF%E8%83%BD%E5%8F%91%E7%94%9F%E9%94%99%E8%AF%AF/#visibility","title":"\u95ee\u9898\u4e8c\uff1a\u53ef\u89c1\u6027\uff08Visibility\uff09\u95ee\u9898","text":"<p>\u53ef\u89c1\u6027\u6307\u7684\u662f\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u4fee\u6539\u4e86\u5171\u4eab\u53d8\u91cf\u7684\u503c\uff0c\u65b0\u503c\u5bf9\u4e8e\u5176\u4ed6\u7ebf\u7a0b\u6765\u8bf4\u662f\u7acb\u5373\u53ef\u89c1\u7684\u3002</p> <ul> <li>\u4e3a\u4ec0\u4e48\u4f1a\u51fa\u9519\uff1f     \u8fd9\u6b63\u662f\u201c\u529e\u516c\u5ba4\u6bd4\u55bb\u201d\u6700\u76f4\u63a5\u7684\u4f53\u73b0\u3002<ol> <li>\u7ebf\u7a0bA\u4fee\u6539\u4e86\u5171\u4eab\u53d8\u91cf<code>flag</code>\u7684\u503c\uff0c\u4f46\u8fd9\u4e2a\u4fee\u6539\u53ef\u80fd\u53ea\u53d1\u751f\u5728\u5b83\u81ea\u5df1\u7684\u5de5\u4f5c\u5185\u5b58\uff08CPU\u7f13\u5b58\uff09\u4e2d\u3002</li> <li>\u7531\u4e8eCPU\u7f13\u5b58\u548c\u4e3b\u5185\u5b58\u7684\u540c\u6b65\u5b58\u5728\u5ef6\u8fdf\uff0c\u7ebf\u7a0bA\u53ef\u80fd\u8fdf\u8fdf\u6ca1\u6709\u5c06\u65b0\u503c\u5199\u56de\u4e3b\u5185\u5b58\u3002</li> <li>\u6b64\u65f6\uff0c\u7ebf\u7a0bB\u53bb\u8bfb\u53d6<code>flag</code>\u53d8\u91cf\uff0c\u5b83\u5f88\u53ef\u80fd\u4f1a\u4ece\u4e3b\u5185\u5b58\u4e2d\u8bfb\u53d6\u5230\u90a3\u4e2a\u65e7\u7684\u3001\u672a\u88ab\u4fee\u6539\u7684\u503c\uff0c\u5bfc\u81f4\u5b83\u65e0\u6cd5\u201c\u770b\u5230\u201d\u7ebf\u7a0bA\u7684\u4fee\u6539\u3002</li> </ol> </li> </ul> <p>\u4e00\u4e2a\u7ecf\u5178\u7684\u4f8b\u5b50\u662f\u4e00\u4e2a\u7ebf\u7a0b\u901a\u8fc7\u5faa\u73af\u68c0\u67e5\u4e00\u4e2a\u6807\u5fd7\u4f4d\u6765\u51b3\u5b9a\u662f\u5426\u9000\u51fa\uff1a</p> <pre><code>// \u7ebf\u7a0bA\nwhile (!stop) {\n    // do something\n}\n\n// \u7ebf\u7a0bB\nstop = true;\n</code></pre> <p>\u7ebf\u7a0bA\u53ef\u80fd\u56e0\u4e3a\u5c06<code>stop=false</code>\u7f13\u5b58\u4e86\u8d77\u6765\uff0c\u5bfc\u81f4\u6c38\u8fdc\u65e0\u6cd5\u770b\u5230\u7ebf\u7a0bB\u5bf9<code>stop</code>\u7684\u4fee\u6539\uff0c\u4ece\u800c\u9677\u5165\u6b7b\u5faa\u73af\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/%E7%BB%93%E5%90%88JVM%E7%9A%84%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84%E8%AE%B2%E8%A7%A3%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%BA%E4%BB%80%E4%B9%88%E5%8F%AF%E8%83%BD%E5%8F%91%E7%94%9F%E9%94%99%E8%AF%AF/#ordering","title":"\u95ee\u9898\u4e09\uff1a\u6709\u5e8f\u6027\uff08Ordering\uff09\u95ee\u9898","text":"<p>\u6709\u5e8f\u6027\u6307\u7684\u662f\u7a0b\u5e8f\u6267\u884c\u7684\u987a\u5e8f\uff0c\u5e94\u8be5\u6309\u7167\u4ee3\u7801\u7684\u5148\u540e\u987a\u5e8f\u6267\u884c\u3002</p> <ul> <li>\u4e3a\u4ec0\u4e48\u4f1a\u51fa\u9519\uff1f     \u4e3a\u4e86\u63d0\u9ad8\u6027\u80fd\uff0c\u7f16\u8bd1\u5668\u548c\u5904\u7406\u5668\u53ef\u80fd\u4f1a\u5bf9\u8f93\u5165\u7684\u4ee3\u7801\u8fdb\u884c\u6307\u4ee4\u91cd\u6392\u5e8f\uff08Instruction Reordering\uff09\u3002\u8fd9\u79cd\u91cd\u6392\u5e8f\u5728\u5355\u7ebf\u7a0b\u73af\u5883\u4e0b\uff0c\u80fd\u4fdd\u8bc1\u6700\u7ec8\u6267\u884c\u7ed3\u679c\u4e0e\u4ee3\u7801\u987a\u5e8f\u6267\u884c\u7684\u7ed3\u679c\u4e00\u81f4\uff08as-if-serial\u8bed\u4e49\uff09\u3002\u4f46\u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e0b\uff0c\u8fd9\u79cd\u201c\u81ea\u4f5c\u4e3b\u5f20\u201d\u7684\u4f18\u5316\u5c31\u53ef\u80fd\u5bfc\u81f4\u4e25\u91cd\u95ee\u9898\u3002</li> </ul> <p>\u6700\u7ecf\u5178\u7684\u4f8b\u5b50\u662f\u53cc\u91cd\u68c0\u67e5\u9501\u5b9a\uff08Double-Checked Locking\uff09\u5b9e\u73b0\u7684\u5355\u4f8b\u6a21\u5f0f\uff1a</p> <pre><code>instance = new Singleton(); // \u8fd9\u4e00\u884c\u4ee3\u7801\u4e0d\u662f\u539f\u5b50\u7684\n</code></pre> <p>\u5b83\u5728\u5e95\u5c42\u5927\u81f4\u53ef\u4ee5\u5206\u4e3a\u4e09\u6b65\uff1a 1.  \u5206\u914d\u5185\u5b58\u7a7a\u95f4\u3002 2.  \u521d\u59cb\u5316\u5bf9\u8c61\u3002 3.  \u5c06<code>instance</code>\u5f15\u7528\u6307\u5411\u5206\u914d\u7684\u5185\u5b58\u5730\u5740\u3002</p> <p>\u7f16\u8bd1\u5668\u53ef\u80fd\u4f1a\u5c06\u987a\u5e8f\u4f18\u5316\u4e3a1-3-2\u3002\u8fd9\u6837\uff0c\u7ebf\u7a0bA\u6267\u884c\u5230\u7b2c3\u6b65\u65f6\uff0c<code>instance</code>\u5df2\u7ecf\u4e0d\u4e3a<code>null</code>\u4e86\uff0c\u4f46\u5bf9\u8c61\u8fd8\u6ca1\u6709\u88ab\u521d\u59cb\u5316\u3002\u6b64\u65f6\u5982\u679c\u7ebf\u7a0bB\u8fdb\u6765\u5224\u65ad<code>instance != null</code>\uff0c\u5b83\u4f1a\u76f4\u63a5\u8fd4\u56de\u4e00\u4e2a\u5c1a\u672a\u521d\u59cb\u5316\u7684\u201c\u534a\u6210\u54c1\u201d\u5bf9\u8c61\uff0c\u540e\u7eed\u4f7f\u7528\u5c31\u4f1a\u629b\u51fa\u7a7a\u6307\u9488\u5f02\u5e38\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/%E7%BB%93%E5%90%88JVM%E7%9A%84%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84%E8%AE%B2%E8%A7%A3%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%BA%E4%BB%80%E4%B9%88%E5%8F%AF%E8%83%BD%E5%8F%91%E7%94%9F%E9%94%99%E8%AF%AF/#_1","title":"\u89e3\u51b3\u65b9\u6848","text":"<p>\u603b\u800c\u8a00\u4e4b\uff0c\u591a\u7ebf\u7a0b\u9519\u8bef\u7684\u6839\u6e90\uff0c\u5728\u4e8eJVM\u4e3a\u4e86\u6027\u80fd\u800c\u8bbe\u8ba1\u7684\u5185\u5b58\u6a21\u578b\uff08\u4e3b\u5185\u5b58\u4e0e\u5de5\u4f5c\u5185\u5b58\u7684\u5206\u79bb\uff09\uff0c\u4ee5\u53ca\u7f16\u8bd1\u5668\u548cCPU\u4e3a\u4e86\u6548\u7387\u800c\u8fdb\u884c\u7684\u6307\u4ee4\u91cd\u6392\u5e8f\u3002\u8fd9\u4e9b\u4f18\u5316\u5728\u5355\u7ebf\u7a0b\u65f6\u662f\u5b89\u5168\u7684\uff0c\u4f46\u5728\u591a\u7ebf\u7a0b\u5e76\u53d1\u8bbf\u95ee\u5171\u4eab\u6570\u636e\u65f6\uff0c\u5c31\u66b4\u9732\u51fa\u4e86\u539f\u5b50\u6027\u3001\u53ef\u89c1\u6027\u548c\u6709\u5e8f\u6027\u8fd9\u4e09\u5927\u95ee\u9898\u3002</p> <p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0cJava\u63d0\u4f9b\u4e86\u76f8\u5e94\u7684\u540c\u6b65\u673a\u5236\uff1a *   <code>synchronized</code>\u5173\u952e\u5b57\uff1a\u5b83\u662f\u4e00\u4e2a\u91cd\u91cf\u7ea7\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u53ef\u4ee5\u540c\u65f6\u4fdd\u8bc1\u539f\u5b50\u6027\u3001\u53ef\u89c1\u6027\u548c\u6709\u5e8f\u6027\u3002 *   <code>volatile</code>\u5173\u952e\u5b57\uff1a\u5b83\u662f\u4e00\u4e2a\u8f7b\u91cf\u7ea7\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u4e3b\u8981\u7528\u4e8e\u4fdd\u8bc1\u53ef\u89c1\u6027\u548c\u9632\u6b62\u6307\u4ee4\u91cd\u6392\u5e8f\uff0c\u4f46\u4e0d\u80fd\u4fdd\u8bc1\u539f\u5b50\u6027\u3002 *   <code>java.util.concurrent</code>\u5305\u4e0b\u7684\u5de5\u5177\u7c7b\uff08\u5982<code>Lock</code>\u3001<code>Atomic</code>\u7cfb\u5217\u7c7b\uff09\uff1a\u63d0\u4f9b\u4e86\u66f4\u7075\u6d3b\u3001\u66f4\u7ec6\u7c92\u5ea6\u7684\u5e76\u53d1\u63a7\u5236\u5de5\u5177\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/%E8%AE%BE%E7%BD%AE%E5%AF%B9%E8%B1%A1%E5%A4%B4%E8%BF%87%E7%A8%8B%E4%BB%8B%E7%BB%8D/","title":"\u8bbe\u7f6e\u5bf9\u8c61\u5934\u8fc7\u7a0b\u4ecb\u7ecd","text":"<p>\u5728JVM\u4e2d\uff0c\u5f53\u901a\u8fc7 <code>new</code> \u6307\u4ee4\u4e3a\u4e00\u4e2a\u5bf9\u8c61\u6210\u529f\u5206\u914d\u5185\u5b58\u5e76\u5b8c\u6210\u96f6\u503c\u521d\u59cb\u5316\u4e4b\u540e\uff0c\u63a5\u4e0b\u6765\u7684\u4e00\u4e2a\u91cd\u8981\u6b65\u9aa4\u5c31\u662f\u8bbe\u7f6e\u5bf9\u8c61\u5934\uff08Object Header\uff09\u3002\u5bf9\u8c61\u5934\u662f\u5b58\u653e\u5728\u5bf9\u8c61\u5b9e\u4f8b\u5185\u5b58\u533a\u57df\u8d77\u59cb\u4f4d\u7f6e\u7684\u4e00\u5757\u5143\u6570\u636e\uff0c\u5b83\u4e0d\u5305\u542b\u5bf9\u8c61\u7684\u5b9e\u4f8b\u6570\u636e\uff08\u5373\u5b57\u6bb5\u503c\uff09\uff0c\u800c\u662f\u5b58\u50a8\u4e86\u5bf9\u8c61\u81ea\u8eab\u7684\u4e00\u4e9b\u72b6\u6001\u4fe1\u606f\u548c\u6307\u5411\u5176\u7c7b\u578b\u4fe1\u606f\u7684\u6307\u9488\u3002</p> <p>\u5bf9\u8c61\u5934\u7684\u7ed3\u6784\u548c\u5185\u5bb9\u4f1a\u6839\u636eJVM\u7684\u5b9e\u73b0\u3001\u5bf9\u8c61\u7684\u7c7b\u578b\uff08\u662f\u5426\u4e3a\u6570\u7ec4\uff09\u3001\u4ee5\u53ca\u5bf9\u8c61\u6240\u5904\u7684\u72b6\u6001\uff08\u5982\u9501\u72b6\u6001\uff09\u800c\u6709\u6240\u4e0d\u540c\u3002\u4ee5HotSpot\u865a\u62df\u673a\u4e3a\u4f8b\uff0c\u5176\u5bf9\u8c61\u5934\u901a\u5e38\u5305\u542b\u4ee5\u4e0b\u4e24\u90e8\u5206\u6216\u4e09\u90e8\u5206\u4fe1\u606f\uff08\u53d6\u51b3\u4e8e\u662f\u5426\u4e3a\u6570\u7ec4\u5bf9\u8c61\uff09\uff1a</p> <ol> <li> <p>Mark Word\uff08\u6807\u8bb0\u5b57\uff09\uff1a</p> <ul> <li>\u8fd9\u90e8\u5206\u6570\u636e\u7528\u4e8e\u5b58\u50a8\u5bf9\u8c61\u81ea\u8eab\u7684\u8fd0\u884c\u65f6\u6570\u636e\uff0c\u5982\u54c8\u5e0c\u7801\uff08HashCode\uff09\u3001GC\u5206\u4ee3\u5e74\u9f84\uff08Generational GC Age\uff09\u3001\u9501\u72b6\u6001\u6807\u5fd7\u3001\u7ebf\u7a0b\u6301\u6709\u7684\u9501\uff08\u504f\u5411\u9501\u7684\u7ebf\u7a0bID\u3001\u8f7b\u91cf\u7ea7\u9501\u6307\u9488\uff09\u3001\u91cd\u91cf\u7ea7\u9501\u6307\u9488\uff08\u6307\u5411monitor\u5bf9\u8c61\u7684\u6307\u9488\uff09\u7b49\u3002</li> <li>Mark Word\u7684\u8bbe\u8ba1\u662f\u52a8\u6001\u7684\uff0c\u5b83\u4f1a\u6839\u636e\u5bf9\u8c61\u7684\u72b6\u6001\u590d\u7528\u81ea\u5df1\u7684\u5b58\u50a8\u7a7a\u95f4\u6765\u5b58\u50a8\u4e0d\u540c\u7684\u4fe1\u606f\u3002\u4f8b\u5982\uff1a<ul> <li>\u65e0\u9501\u72b6\u6001\uff1a\u5b58\u50a8\u5bf9\u8c61\u7684\u54c8\u5e0c\u7801\u3001GC\u5206\u4ee3\u5e74\u9f84\u3001\u662f\u5426\u504f\u5411\u9501\uff080\u62161\uff09\u7b49\u3002</li> <li>\u504f\u5411\u9501\u72b6\u6001\uff1a\u5b58\u50a8\u6301\u6709\u504f\u5411\u9501\u7684\u7ebf\u7a0bID\u3001Epoch\u3001GC\u5206\u4ee3\u5e74\u9f84\u3001\u504f\u5411\u9501\u6807\u5fd7\u4f4d\uff081\uff09\u3002</li> <li>\u8f7b\u91cf\u7ea7\u9501\u72b6\u6001\uff1a\u5b58\u50a8\u6307\u5411\u7ebf\u7a0b\u6808\u4e2d\u9501\u8bb0\u5f55\uff08Lock Record\uff09\u7684\u6307\u9488\u3001\u9501\u6807\u5fd7\u4f4d\uff0800\uff09\u3002</li> <li>\u91cd\u91cf\u7ea7\u9501\u72b6\u6001\uff1a\u5b58\u50a8\u6307\u5411\u4e92\u65a5\u91cf\uff08Monitor\uff09\u7684\u6307\u9488\u3001\u9501\u6807\u5fd7\u4f4d\uff0810\uff09\u3002</li> <li>GC\u6807\u8bb0\u72b6\u6001\uff1a\u5728GC\u671f\u95f4\uff0cMark Word\u4e5f\u53ef\u80fd\u88ab\u7528\u4e8e\u5b58\u50a8GC\u76f8\u5173\u4fe1\u606f\u3002</li> </ul> </li> <li>Mark Word\u7684\u4f4d\u6570\u572832\u4f4dJVM\u4e2d\u662f32\u4f4d\uff084\u5b57\u8282\uff09\uff0c\u572864\u4f4dJVM\u4e2d\u662f64\u4f4d\uff088\u5b57\u8282\uff09\u3002</li> </ul> </li> <li> <p>Klass Pointer\uff08\u7c7b\u578b\u6307\u9488\uff0c\u6216\u79f0\u5143\u6570\u636e\u6307\u9488\uff09\uff1a</p> <ul> <li>\u8fd9\u90e8\u5206\u6570\u636e\u662f\u4e00\u4e2a\u6307\u9488\uff0c\u6307\u5411\u8be5\u5bf9\u8c61\u6240\u5c5e\u7684\u7c7b\u5728\u65b9\u6cd5\u533a\uff08\u6216\u5143\u7a7a\u95f4\uff09\u4e2d\u7684\u5143\u6570\u636e\uff08<code>Klass</code>\u5bf9\u8c61\uff09\u3002\u865a\u62df\u673a\u901a\u8fc7\u8fd9\u4e2a\u6307\u9488\u6765\u786e\u5b9a\u8fd9\u4e2a\u5bf9\u8c61\u662f\u54ea\u4e2a\u7c7b\u7684\u5b9e\u4f8b\uff0c\u4ece\u800c\u80fd\u591f\u8bbf\u95ee\u5230\u7c7b\u7684\u5b57\u6bb5\u4fe1\u606f\u3001\u65b9\u6cd5\u4fe1\u606f\u3001\u7236\u7c7b\u4fe1\u606f\u7b49\u3002</li> <li>\u5982\u679c\u5f00\u542f\u4e86\u538b\u7f29\u7c7b\u6307\u9488\uff08Compressed Class Pointers\uff0c\u572864\u4f4dJVM\u4e2d\u901a\u5e38\u9ed8\u8ba4\u5f00\u542f\uff0c\u901a\u8fc7 <code>-XX:+UseCompressedClassPointers</code>\uff09\uff0c\u8fd9\u4e2a\u6307\u9488\u7684\u5927\u5c0f\u4f1a\u88ab\u538b\u7f29\u523032\u4f4d\uff084\u5b57\u8282\uff09\u3002\u5982\u679c\u672a\u5f00\u542f\u6216\u65e0\u6cd5\u538b\u7f29\uff0c\u5b83\u572864\u4f4dJVM\u4e2d\u662f64\u4f4d\uff088\u5b57\u8282\uff09\u3002</li> </ul> </li> <li> <p>Array Length\uff08\u6570\u7ec4\u957f\u5ea6\uff0c\u4ec5\u6570\u7ec4\u5bf9\u8c61\u5305\u542b\uff09\uff1a</p> <ul> <li>\u5982\u679c\u5f53\u524d\u521b\u5efa\u7684\u5bf9\u8c61\u662f\u4e00\u4e2a\u6570\u7ec4\u5bf9\u8c61\uff0c\u90a3\u4e48\u5bf9\u8c61\u5934\u4e2d\u8fd8\u5fc5\u987b\u6709\u4e00\u5757\u6570\u636e\u7528\u4e8e\u8bb0\u5f55\u6570\u7ec4\u7684\u957f\u5ea6\u3002</li> <li>\u8fd9\u90e8\u5206\u6570\u636e\u7684\u4f4d\u6570\u901a\u5e38\u662f32\u4f4d\uff084\u5b57\u8282\uff09\uff0c\u5373\u4f7f\u572864\u4f4dJVM\u4e2d\uff0c\u56e0\u4e3aJava\u6570\u7ec4\u7684\u6700\u5927\u957f\u5ea6\u53d7\u9650\u4e8e <code>int</code> \u7c7b\u578b\u7684\u6700\u5927\u503c\u3002</li> </ul> </li> </ol> <p>\u8bbe\u7f6e\u5bf9\u8c61\u5934\u7684\u8fc7\u7a0b\u5177\u4f53\u53d1\u751f\u5728\u5185\u5b58\u5206\u914d\u548c\u96f6\u503c\u521d\u59cb\u5316\u4e4b\u540e\uff0c\u6267\u884c<code>&lt;init&gt;</code>\u65b9\u6cd5\u4e4b\u524d\u3002JVM\u4f1a\u6839\u636e\u4ee5\u4e0b\u4fe1\u606f\u586b\u5145\u5bf9\u8c61\u5934\uff1a</p> <ul> <li> <p>\u5bf9\u4e8eMark Word\uff1a</p> <ul> <li>\u521d\u59cb\u72b6\u6001\u901a\u5e38\u662f\u65e0\u9501\u72b6\u6001\uff0c\u53ef\u80fd\u4f1a\u8bbe\u7f6e\u521d\u59cb\u7684GC\u5206\u4ee3\u5e74\u9f84\uff08\u901a\u5e38\u4e3a0\uff09\u3002</li> <li>\u54c8\u5e0c\u7801\u901a\u5e38\u662f\u5ef6\u8fdf\u8ba1\u7b97\u7684\uff0c\u5373\u5728\u5bf9\u8c61\u7b2c\u4e00\u6b21\u8c03\u7528 <code>hashCode()</code> \u65b9\u6cd5\u65f6\u624d\u8ba1\u7b97\u5e76\u5b58\u5165Mark Word\uff0c\u6216\u8005\u5728\u9700\u8981\u65f6\uff08\u5982\u5bf9\u8c61\u8981\u88ab\u653e\u5165\u54c8\u5e0c\u8868\uff09\u8ba1\u7b97\u3002</li> <li>\u9501\u76f8\u5173\u7684\u6807\u5fd7\u4f4d\u4f1a\u6839\u636e\u540e\u7eed\u7684\u540c\u6b65\u64cd\u4f5c\u52a8\u6001\u53d8\u5316\u3002</li> </ul> </li> <li> <p>\u5bf9\u4e8eKlass Pointer\uff1a</p> <ul> <li>JVM\u5728\u6267\u884c <code>new</code> \u6307\u4ee4\u65f6\uff0c\u5df2\u7ecf\u77e5\u9053\u4e86\u8981\u521b\u5efa\u7684\u662f\u54ea\u4e2a\u7c7b\u7684\u5bf9\u8c61\u3002\u5728\u7c7b\u52a0\u8f7d\u5b8c\u6210\u540e\uff0c\u8be5\u7c7b\u5728\u65b9\u6cd5\u533a/\u5143\u7a7a\u95f4\u7684 <code>Klass</code> \u5bf9\u8c61\u5730\u5740\u662f\u786e\u5b9a\u7684\u3002\u56e0\u6b64\uff0cJVM\u4f1a\u5c06\u8fd9\u4e2a\u5730\u5740\uff08\u6216\u538b\u7f29\u540e\u7684\u5730\u5740\uff09\u5199\u5165\u5bf9\u8c61\u5934\u7684Klass Pointer\u90e8\u5206\u3002</li> </ul> </li> <li> <p>\u5bf9\u4e8eArray Length\uff08\u5982\u679c\u662f\u6570\u7ec4\u5bf9\u8c61\uff09\uff1a</p> <ul> <li>\u5728\u521b\u5efa\u6570\u7ec4\u5bf9\u8c61\u65f6\uff08\u4f8b\u5982 <code>new int[10]</code>\uff09\uff0c\u6570\u7ec4\u7684\u957f\u5ea6\uff08\u8fd9\u91cc\u662f10\uff09\u662f\u5df2\u77e5\u7684\u3002JVM\u4f1a\u5c06\u8fd9\u4e2a\u957f\u5ea6\u503c\u5199\u5165\u5bf9\u8c61\u5934\u7684\u6570\u7ec4\u957f\u5ea6\u90e8\u5206\u3002</li> </ul> </li> </ul> <p>\u8fd9\u4e2a\u8bbe\u7f6e\u8fc7\u7a0b\u662f\u7531JVM\u81ea\u52a8\u5b8c\u6210\u7684\uff0c\u5bf9Java\u7a0b\u5e8f\u5458\u662f\u900f\u660e\u7684\u3002\u4e00\u65e6\u5bf9\u8c61\u5934\u8bbe\u7f6e\u5b8c\u6bd5\uff0c\u518d\u52a0\u4e0a\u540e\u7eed<code>&lt;init&gt;</code>\u65b9\u6cd5\u7684\u6267\u884c\uff08\u521d\u59cb\u5316\u5b9e\u4f8b\u5b57\u6bb5\uff09\uff0c\u4e00\u4e2a\u5b8c\u6574\u7684\u3001\u53ef\u7528\u7684\u5bf9\u8c61\u5c31\u521b\u5efa\u6210\u529f\u4e86\u3002</p> <p>\u603b\u7ed3\u4e00\u4e0b\u8bbe\u7f6e\u5bf9\u8c61\u5934\u7684\u8fc7\u7a0b\uff1a 1.  \u786e\u5b9a\u5bf9\u8c61\u5934\u7684\u7ed3\u6784\uff08\u662f\u5426\u4e3a\u6570\u7ec4\uff0c\u51b3\u5b9a\u662f\u5426\u6709\u6570\u7ec4\u957f\u5ea6\u90e8\u5206\uff09\u3002 2.  \u521d\u59cb\u5316Mark Word\uff1a\u8bbe\u7f6e\u521d\u59cb\u7684GC\u5206\u4ee3\u5e74\u9f84\u3001\u9501\u72b6\u6001\u6807\u5fd7\uff08\u901a\u5e38\u4e3a\u65e0\u9501\uff09\uff0c\u4e3a\u54c8\u5e0c\u7801\u9884\u7559\u7a7a\u95f4\u6216\u8bbe\u7f6e\u521d\u59cb\u503c\u3002 3.  \u8bbe\u7f6eKlass Pointer\uff1a\u5c06\u6307\u5411\u65b9\u6cd5\u533a/\u5143\u7a7a\u95f4\u4e2d\u5bf9\u5e94\u7c7b\u5143\u6570\u636e\u7684\u6307\u9488\u5199\u5165\u3002 4.  \uff08\u5982\u679c\u4e3a\u6570\u7ec4\u5bf9\u8c61\uff09\u8bbe\u7f6eArray Length\uff1a\u5c06\u6570\u7ec4\u7684\u957f\u5ea6\u503c\u5199\u5165\u3002</p> <p>\u8fd9\u4e2a\u8fc7\u7a0b\u786e\u4fdd\u4e86\u5bf9\u8c61\u5728\u521b\u5efa\u540e\u5c31\u62e5\u6709\u4e86\u5fc5\u8981\u7684\u8fd0\u884c\u65f6\u5143\u4fe1\u606f\uff0c\u4e3a\u540e\u7eed\u7684\u5783\u573e\u56de\u6536\u3001\u540c\u6b65\u64cd\u4f5c\u3001\u7c7b\u578b\u5224\u65ad\u7b49JVM\u884c\u4e3a\u63d0\u4f9b\u4e86\u57fa\u7840\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/%E8%AF%B7%E6%8F%8F%E8%BF%B0%E4%B8%80%E6%AC%A1%E4%BD%A0%E4%BD%BF%E7%94%A8%E8%BF%87%E7%9A%84JVM%E7%9B%91%E6%8E%A7%E5%92%8C%E8%AF%8A%E6%96%AD%E5%B7%A5%E5%85%B7%E5%88%86%E6%9E%90%E5%92%8C%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98%E7%9A%84%E8%BF%87%E7%A8%8B/","title":"\u8bf7\u63cf\u8ff0\u4e00\u6b21\u4f60\u4f7f\u7528\u8fc7\u7684JVM\u76d1\u63a7\u548c\u8bca\u65ad\u5de5\u5177\u5206\u6790\u548c\u89e3\u51b3\u95ee\u9898\u7684\u8fc7\u7a0b","text":""},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/%E8%AF%B7%E6%8F%8F%E8%BF%B0%E4%B8%80%E6%AC%A1%E4%BD%A0%E4%BD%BF%E7%94%A8%E8%BF%87%E7%9A%84JVM%E7%9B%91%E6%8E%A7%E5%92%8C%E8%AF%8A%E6%96%AD%E5%B7%A5%E5%85%B7%E5%88%86%E6%9E%90%E5%92%8C%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98%E7%9A%84%E8%BF%87%E7%A8%8B/#oom","title":"\u6a21\u62df\u573a\u666f\uff1a\u7ebf\u4e0a\u670d\u52a1\u5185\u5b58\u6301\u7eed\u4e0a\u6da8\uff0c\u6700\u7ec8\u5bfc\u81f4OOM","text":"<p>\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u4e2a\u57fa\u4e8eSpring Boot\u7684\u5fae\u670d\u52a1\uff0c\u63d0\u4f9b\u6570\u636e\u67e5\u8be2\u548c\u5904\u7406\u529f\u80fd\u3002\u6700\u8fd1\u89c2\u5bdf\u5230\uff0c\u8be5\u670d\u52a1\u5728\u8fd0\u884c\u4e00\u6bb5\u65f6\u95f4\u540e\uff0c\u5185\u5b58\u5360\u7528\u6301\u7eed\u4e0a\u5347\uff0c\u5373\u4f7f\u5728\u6d41\u91cf\u4f4e\u8c37\u671f\u4e5f\u65e0\u6cd5\u56de\u843d\uff0c\u6700\u7ec8\u4f1a\u629b\u51fa<code>java.lang.OutOfMemoryError: Java heap space</code>\u5e76\u5d29\u6e83\u3002</p> <p>\u76ee\u6807\uff1a \u5b9a\u4f4d\u5185\u5b58\u6cc4\u6f0f\u7684\u6839\u6e90\u5e76\u89e3\u51b3\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/%E8%AF%B7%E6%8F%8F%E8%BF%B0%E4%B8%80%E6%AC%A1%E4%BD%A0%E4%BD%BF%E7%94%A8%E8%BF%87%E7%9A%84JVM%E7%9B%91%E6%8E%A7%E5%92%8C%E8%AF%8A%E6%96%AD%E5%B7%A5%E5%85%B7%E5%88%86%E6%9E%90%E5%92%8C%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98%E7%9A%84%E8%BF%87%E7%A8%8B/#1","title":"1. \u521d\u59cb\u89c2\u5bdf\u4e0e\u521d\u6b65\u8bca\u65ad","text":"<ul> <li>\u75c7\u72b6\uff1a \u670d\u52a1\u542f\u52a8\u540e\uff0c\u901a\u8fc7\u670d\u52a1\u5668\u76d1\u63a7\u5de5\u5177\uff08\u5982Grafana+Prometheus\u6216top\u547d\u4ee4\uff09\u89c2\u5bdf\u5230Java\u8fdb\u7a0b\u7684\u5185\u5b58\uff08RSS\u6216RES\uff09\u6301\u7eed\u589e\u957f\u3002GC\u65e5\u5fd7\u663e\u793aFull GC\u9891\u7387\u589e\u52a0\uff0c\u4f46\u56de\u6536\u7684\u5185\u5b58\u91cf\u4e0d\u8db3\u4ee5\u6291\u5236\u6574\u4f53\u5185\u5b58\u7684\u4e0a\u6da8\u8d8b\u52bf\u3002</li> <li>\u63a8\u6d4b\uff1a \u5185\u5b58\u6cc4\u6f0f\uff0c\u53ef\u80fd\u662f\u7531\u4e8e\u67d0\u4e9b\u5bf9\u8c61\u88ab\u957f\u65f6\u95f4\u4e0d\u5f53\u5730\u6301\u6709\uff0c\u5bfc\u81f4\u5783\u573e\u56de\u6536\u5668\u65e0\u6cd5\u56de\u6536\u5b83\u4eec\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/%E8%AF%B7%E6%8F%8F%E8%BF%B0%E4%B8%80%E6%AC%A1%E4%BD%A0%E4%BD%BF%E7%94%A8%E8%BF%87%E7%9A%84JVM%E7%9B%91%E6%8E%A7%E5%92%8C%E8%AF%8A%E6%96%AD%E5%B7%A5%E5%85%B7%E5%88%86%E6%9E%90%E5%92%8C%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98%E7%9A%84%E8%BF%87%E7%A8%8B/#2-jstat-gc","title":"2. \u4f7f\u7528 <code>jstat</code> \u8fdb\u884cGC\u60c5\u51b5\u5206\u6790","text":"<p>\u9996\u5148\uff0c\u6211\u4eec\u9700\u8981\u786e\u8ba4\u5185\u5b58\u6cc4\u6f0f\u662f\u5426\u53d1\u751f\u5728Java\u5806\u4e2d\uff0c\u4ee5\u53caGC\u7684\u6548\u7387\u5982\u4f55\u3002</p> <ul> <li> <p>\u547d\u4ee4\uff1a <code>jstat -gcutil &lt;pid&gt; 1000</code> (\u6bcf\u79d2\u8f93\u51fa\u4e00\u6b21GC\u7edf\u8ba1\u4fe1\u606f)</p> </li> <li> <p>\u5206\u6790\uff1a</p> <ul> <li>\u89c2\u5bdf<code>E</code> (Eden), <code>S0</code> (Survivor Space 0), <code>S1</code> (Survivor Space 1) \u7684\u4f7f\u7528\u7387\u3002\u5728\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e9b\u5e74\u8f7b\u4ee3\u533a\u57df\u4f1a\u5feb\u901f\u88ab\u586b\u5145\u548c\u6e05\u7a7a\u3002</li> <li>\u91cd\u70b9\u5173\u6ce8<code>O</code> (Old Generation) \u7684\u4f7f\u7528\u7387\u3002<ul> <li>\u53d1\u73b0\uff1a <code>O</code> \u533a\u7684\u4f7f\u7528\u7387\u6301\u7eed\u7a33\u6b65\u4e0a\u5347\uff0c\u5e76\u4e14\u5728\u6bcf\u6b21<code>FGC</code>\uff08Full GC\uff09\u4e4b\u540e\uff0c<code>O</code> \u533a\u7684\u4f7f\u7528\u7387\u5e76\u6ca1\u6709\u663e\u8457\u4e0b\u964d\u5230\u8f83\u4f4e\u6c34\u5e73\uff0c\u53cd\u800c\u53ea\u662f\u5c0f\u5e45\u56de\u843d\u6216\u6839\u672c\u4e0d\u56de\u843d\uff0c\u7136\u540e\u53c8\u7ee7\u7eed\u4e0a\u5347\u3002</li> <li><code>FGC</code> (Full GC Count) \u548c <code>FGCT</code> (Full GC Time) \u6301\u7eed\u589e\u52a0\uff0c\u8868\u660e\u7cfb\u7edf\u5728\u9891\u7e41\u5730\u8fdb\u884c\u5168\u91cf\u5783\u573e\u56de\u6536\uff0c\u4f46\u6548\u679c\u4e0d\u4f73\u3002</li> </ul> </li> <li>\u7ed3\u8bba\uff1a <code>jstat</code> \u7684\u8f93\u51fa\u5f3a\u70c8\u8868\u660e\u65e7\u751f\u4ee3\u5b58\u5728\u5bf9\u8c61\u65e0\u6cd5\u88ab\u56de\u6536\u7684\u95ee\u9898\uff0c\u8bc1\u5b9e\u4e86\u5185\u5b58\u6cc4\u6f0f\u7684\u63a8\u6d4b\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/%E8%AF%B7%E6%8F%8F%E8%BF%B0%E4%B8%80%E6%AC%A1%E4%BD%A0%E4%BD%BF%E7%94%A8%E8%BF%87%E7%9A%84JVM%E7%9B%91%E6%8E%A7%E5%92%8C%E8%AF%8A%E6%96%AD%E5%B7%A5%E5%85%B7%E5%88%86%E6%9E%90%E5%92%8C%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98%E7%9A%84%E8%BF%87%E7%A8%8B/#3-jmap","title":"3. \u4f7f\u7528 <code>jmap</code> \u751f\u6210\u5806\u8f6c\u50a8\u6587\u4ef6","text":"<p>\u4e3a\u4e86\u6df1\u5165\u5206\u6790\u54ea\u4e9b\u5bf9\u8c61\u5360\u7528\u4e86\u5927\u91cf\u5185\u5b58\uff0c\u6211\u4eec\u9700\u8981\u83b7\u53d6\u4e00\u4efd\u5f53\u524dJVM\u8fdb\u7a0b\u7684\u5806\u8f6c\u50a8\u6587\u4ef6\uff08Heap Dump\uff09\u3002</p> <ul> <li> <p>\u547d\u4ee4\uff1a <code>jmap -dump:format=b,file=/tmp/heapdump.hprof &lt;pid&gt;</code></p> </li> <li> <p>\u8bf4\u660e\uff1a</p> <ul> <li><code>format=b</code>\uff1a\u6307\u5b9a\u8f93\u51fa\u4e3a\u4e8c\u8fdb\u5236\u683c\u5f0f\uff0c\u8fd9\u662f\u5927\u591a\u6570\u5806\u5206\u6790\u5de5\u5177\uff08\u5982VisualVM, MAT\uff09\u652f\u6301\u7684\u683c\u5f0f\u3002</li> <li><code>file=/tmp/heapdump.hprof</code>\uff1a\u6307\u5b9a\u5806\u8f6c\u50a8\u6587\u4ef6\u7684\u8f93\u51fa\u8def\u5f84\u548c\u540d\u79f0\u3002</li> <li>\u6ce8\u610f\uff1a \u751f\u6210\u5806\u8f6c\u50a8\u6587\u4ef6\u4f1a\u6682\u505cJVM\u4e00\u6bb5\u65f6\u95f4\uff08Stop-The-World\uff09\uff0c\u5bf9\u4e8e\u5927\u578b\u5806\u53ef\u80fd\u4f1a\u5bfc\u81f4\u670d\u52a1\u77ed\u6682\u4e0d\u53ef\u7528\uff0c\u56e0\u6b64\u901a\u5e38\u5728\u670d\u52a1\u8d1f\u8f7d\u8f83\u4f4e\u65f6\u6267\u884c\uff0c\u6216\u8005\u5728\u6d4b\u8bd5\u73af\u5883\u4e2d\u6a21\u62df\u3002\u5728\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u53ef\u4ee5\u914d\u7f6eJVM\u53c2\u6570\uff08\u5982<code>-XX:+HeapDumpOnOutOfMemoryError</code>\uff09\u5728OOM\u65f6\u81ea\u52a8\u751f\u6210\u5806\u8f6c\u50a8\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/%E8%AF%B7%E6%8F%8F%E8%BF%B0%E4%B8%80%E6%AC%A1%E4%BD%A0%E4%BD%BF%E7%94%A8%E8%BF%87%E7%9A%84JVM%E7%9B%91%E6%8E%A7%E5%92%8C%E8%AF%8A%E6%96%AD%E5%B7%A5%E5%85%B7%E5%88%86%E6%9E%90%E5%92%8C%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98%E7%9A%84%E8%BF%87%E7%A8%8B/#4-visualvm","title":"4. \u4f7f\u7528 VisualVM \u8fdb\u884c\u5806\u8f6c\u50a8\u6587\u4ef6\u5206\u6790","text":"<p>\u83b7\u53d6\u5230<code>heapdump.hprof</code>\u6587\u4ef6\u540e\uff0c\u6211\u4eec\u5c06\u5176\u4e0b\u8f7d\u5230\u672c\u5730\u5f00\u53d1\u673a\u5668\uff0c\u5e76\u4f7f\u7528VisualVM\uff08\u6216Eclipse Memory Analyzer Tool, MAT\uff09\u8fdb\u884c\u5206\u6790\u3002</p> <ul> <li>VisualVM \u64cd\u4f5c\u6b65\u9aa4\uff1a<ol> <li>\u6253\u5f00VisualVM\u3002</li> <li>\u9009\u62e9\u201c\u6587\u4ef6\u201d -&gt; \u201c\u8f7d\u5165...\u201d\uff0c\u9009\u62e9<code>/tmp/heapdump.hprof</code>\u6587\u4ef6\u3002</li> <li>\u52a0\u8f7d\u5b8c\u6210\u540e\uff0c\u8fdb\u5165\u201c\u5806Dump\u201d\u89c6\u56fe\u3002</li> <li>\u6982\u8ff0\uff1a \u9996\u5148\u67e5\u770b\u201c\u7c7b\u201d\u89c6\u56fe\uff0c\u6309\u201c\u5b9e\u4f8b\u6570\u201d\u6216\u201c\u603b\u5927\u5c0f\u201d\u964d\u5e8f\u6392\u5217\u3002<ul> <li>\u53d1\u73b0\uff1a \u89c2\u5bdf\u5230\u67d0\u4e2a\u81ea\u5b9a\u4e49\u7684<code>com.example.myapp.SessionCacheEntry</code>\u7c7b\uff08\u6216\u7c7b\u4f3c\u7684\u4e1a\u52a1\u5bf9\u8c61\uff09\u7684\u5b9e\u4f8b\u6570\u91cf\u5f02\u5e38\u5e9e\u5927\uff0c\u5e76\u4e14\u5360\u7528\u4e86\u5806\u4e2d\u7edd\u5927\u90e8\u5206\u7a7a\u95f4\u3002</li> <li>\u8fdb\u4e00\u6b65\u5206\u6790\uff1a \u9009\u4e2d\u8fd9\u4e2a\u5360\u7528\u5927\u91cf\u5185\u5b58\u7684\u7c7b\uff0c\u53f3\u952e\u70b9\u51fb\u201c\u5728\u652f\u914d\u6811\u4e2d\u663e\u793a\u6700\u9876\u5c42\u5bf9\u8c61\u201d\u3002</li> </ul> </li> <li>\u652f\u914d\u6811 (Dominator Tree) \u5206\u6790\uff1a<ul> <li>\u652f\u914d\u6811\u663e\u793a\u4e86\u54ea\u4e9b\u5bf9\u8c61\u76f4\u63a5\u6216\u95f4\u63a5\u201c\u652f\u914d\u201d\u7740\u5176\u4ed6\u5bf9\u8c61\uff0c\u5373\u5982\u679c\u67d0\u4e2a\u5bf9\u8c61\u88ab\u5783\u573e\u56de\u6536\uff0c\u5b83\u652f\u914d\u7684\u6240\u6709\u5bf9\u8c61\u4e5f\u4f1a\u88ab\u56de\u6536\u3002\u8fd9\u6709\u52a9\u4e8e\u627e\u5230\u5185\u5b58\u6cc4\u6f0f\u7684\u201c\u6839\u6e90\u201d\u3002</li> <li>\u53d1\u73b0\uff1a \u5728\u652f\u914d\u6811\u4e2d\uff0c\u8ffd\u8e2a\u5230<code>SessionCacheEntry</code>\u5b9e\u4f8b\u88ab\u4e00\u4e2a\u9759\u6001\u7684<code>java.util.concurrent.ConcurrentHashMap</code>\uff08\u6216\u8005<code>ArrayList</code>\u3001<code>HashSet</code>\u7b49\u96c6\u5408\u7c7b\u578b\uff09\u6240\u6301\u6709\uff0c\u4f8b\u5982 <code>com.example.myapp.SomeManager.sessionMap</code>\u3002\u8fd9\u4e2a<code>sessionMap</code>\u7684\u5f15\u7528\u8def\u5f84\u76f4\u8fbeGC Root\uff0c\u610f\u5473\u7740\u53ea\u8981<code>sessionMap</code>\u5b58\u5728\uff0c\u5b83\u91cc\u9762\u7684\u6240\u6709<code>SessionCacheEntry</code>\u90fd\u65e0\u6cd5\u88ab\u56de\u6536\u3002</li> <li>\u63a8\u6d4b\uff1a <code>sessionMap</code>\u662f\u4e00\u4e2a\u7f13\u5b58\u6216\u5bb9\u5668\uff0c\u7528\u4e8e\u5b58\u50a8\u7528\u6237\u4f1a\u8bdd\u4fe1\u606f\uff0c\u4f46\u5176\u4e2d\u7684\u65e7\u4f1a\u8bdd\u5e76\u6ca1\u6709\u88ab\u6b63\u786e\u5730\u79fb\u9664\u6216\u8fc7\u671f\u3002</li> </ul> </li> </ol> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/%E8%AF%B7%E6%8F%8F%E8%BF%B0%E4%B8%80%E6%AC%A1%E4%BD%A0%E4%BD%BF%E7%94%A8%E8%BF%87%E7%9A%84JVM%E7%9B%91%E6%8E%A7%E5%92%8C%E8%AF%8A%E6%96%AD%E5%B7%A5%E5%85%B7%E5%88%86%E6%9E%90%E5%92%8C%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98%E7%9A%84%E8%BF%87%E7%A8%8B/#5","title":"5. \u95ee\u9898\u5b9a\u4f4d\u4e0e\u89e3\u51b3\u65b9\u6848","text":"<ul> <li>\u95ee\u9898\u5b9a\u4f4d\uff1a \u6839\u636eVisualVM\u7684\u5206\u6790\uff0c\u6211\u4eec\u786e\u5b9a\u5185\u5b58\u6cc4\u6f0f\u7684\u6839\u6e90\u5728\u4e8e <code>com.example.myapp.SomeManager</code> \u7c7b\u4e2d\u7684 <code>sessionMap</code> \u9759\u6001\u6210\u5458\u53d8\u91cf\u3002\u8be5<code>HashMap</code>\u88ab\u7528\u6765\u7f13\u5b58\u7528\u6237\u4f1a\u8bdd\u4fe1\u606f\uff0c\u4f46\u7f3a\u4e4f\u6709\u6548\u7684\u8fc7\u671f\u6216\u6dd8\u6c70\u673a\u5236\uff0c\u5bfc\u81f4\u5df2\u5931\u6548\u6216\u957f\u65f6\u95f4\u4e0d\u6d3b\u8dc3\u7684\u4f1a\u8bdd\u5bf9\u8c61\u4e00\u76f4\u4fdd\u7559\u5728\u5185\u5b58\u4e2d\u3002</li> <li>\u89e3\u51b3\u65b9\u6848\uff1a<ol> <li>\u5f15\u5165\u7f13\u5b58\u6dd8\u6c70\u7b56\u7565\uff1a \u5c06\u666e\u901a\u7684<code>ConcurrentHashMap</code>\u66ff\u6362\u4e3a\u5177\u6709\u8fc7\u671f\u6dd8\u6c70\u529f\u80fd\u7684\u7f13\u5b58\u5b9e\u73b0\uff0c\u5982Guava Cache\u3001Caffeine\uff0c\u6216\u8005\u4f7f\u7528ScheduledExecutorService\u5b9a\u671f\u6e05\u7406\u8fc7\u671f\u7684\u4f1a\u8bdd\u3002</li> <li>\u5f31\u5f15\u7528/\u8f6f\u5f15\u7528\uff1a \u5982\u679c\u4e1a\u52a1\u573a\u666f\u5141\u8bb8\uff0c\u53ef\u4ee5\u8003\u8651\u4f7f\u7528<code>WeakHashMap</code>\u6216<code>SoftReference</code>\u6765\u6301\u6709\u7f13\u5b58\u5bf9\u8c61\uff0c\u8ba9JVM\u5728\u5185\u5b58\u4e0d\u8db3\u65f6\u4f18\u5148\u56de\u6536\u8fd9\u4e9b\u5bf9\u8c61\u3002\u4f46\u5728\u672c\u573a\u666f\u4e0b\uff0c\u901a\u5e38\u662f\u9700\u8981\u660e\u786e\u7684\u8fc7\u671f\u7b56\u7565\u3002</li> <li>\u751f\u547d\u5468\u671f\u7ba1\u7406\uff1a \u68c0\u67e5\u4e1a\u52a1\u903b\u8f91\uff0c\u786e\u4fdd\u4f1a\u8bdd\u5728\u7528\u6237\u767b\u51fa\u3001\u8d85\u65f6\u6216\u8fbe\u5230\u6700\u5927\u6d3b\u8dc3\u65f6\u95f4\u540e\uff0c\u80fd\u591f\u88ab\u53ca\u65f6\u4ece<code>sessionMap</code>\u4e2d\u79fb\u9664\u3002</li> </ol> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/JVM/%E8%AF%B7%E6%8F%8F%E8%BF%B0%E4%B8%80%E6%AC%A1%E4%BD%A0%E4%BD%BF%E7%94%A8%E8%BF%87%E7%9A%84JVM%E7%9B%91%E6%8E%A7%E5%92%8C%E8%AF%8A%E6%96%AD%E5%B7%A5%E5%85%B7%E5%88%86%E6%9E%90%E5%92%8C%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98%E7%9A%84%E8%BF%87%E7%A8%8B/#6","title":"6. \u9a8c\u8bc1\u4e0e\u76d1\u63a7","text":"<ul> <li>\u90e8\u7f72\uff1a \u5c06\u4fee\u590d\u540e\u7684\u4ee3\u7801\u90e8\u7f72\u5230\u6d4b\u8bd5\u73af\u5883\uff0c\u8fdb\u884c\u5145\u5206\u7684\u538b\u529b\u6d4b\u8bd5\u548c\u957f\u65f6\u95f4\u8fd0\u884c\u6d4b\u8bd5\u3002</li> <li>\u76d1\u63a7\uff1a \u5728\u6d4b\u8bd5\u548c\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u518d\u6b21\u4f7f\u7528<code>jstat -gcutil &lt;pid&gt; 1000</code>\u547d\u4ee4\u89c2\u5bdfGC\u60c5\u51b5\u3002<ul> <li>\u9884\u671f\u7ed3\u679c\uff1a <code>O</code> \u533a\u7684\u4f7f\u7528\u7387\u5e94\u8be5\u5728<code>FGC</code>\u4e4b\u540e\u80fd\u7a33\u5b9a\u56de\u843d\u5230\u8f83\u4f4e\u6c34\u5e73\uff0c\u5e76\u4e14\u968f\u7740\u65f6\u95f4\u63a8\u79fb\uff0c<code>O</code> \u533a\u7684\u6574\u4f53\u66f2\u7ebf\u5e94\u8be5\u8d8b\u4e8e\u5e73\u7a33\uff0c\u4e0d\u518d\u6301\u7eed\u589e\u957f\u3002<code>FGC</code>\u7684\u9891\u7387\u548c\u65f6\u95f4\u4e5f\u5e94\u663e\u8457\u4e0b\u964d\u3002</li> </ul> </li> <li>\u5176\u4ed6\u76d1\u63a7\uff1a \u7ee7\u7eed\u4f7f\u7528\u7cfb\u7edf\u76d1\u63a7\u5de5\u5177\u89c2\u5bdf\u8fdb\u7a0b\u5185\u5b58\u4f7f\u7528\uff0c\u786e\u8ba4\u5185\u5b58\u4e0d\u518d\u65e0\u9650\u5236\u589e\u957f\u3002</li> </ul> <p>\u901a\u8fc7\u4e0a\u8ff0\u6b65\u9aa4\uff0c\u7ed3\u5408<code>jstat</code>\u7684\u5b8f\u89c2GC\u5206\u6790\u3001<code>jmap</code>\u7684\u5806\u8f6c\u50a8\u80fd\u529b\u548cVisualVM\u7684\u5fae\u89c2\u5bf9\u8c61\u5206\u6790\uff0c\u53ef\u4ee5\u7cfb\u7edf\u6027\u5730\u5b9a\u4f4d\u5e76\u89e3\u51b3JVM\u5185\u5b58\u6cc4\u6f0f\u95ee\u9898\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/Bean%20%E6%98%AF%E6%80%8E%E4%B9%88%E5%8A%A0%E8%BD%BD%E5%92%8C%E4%BD%BF%E7%94%A8%E7%9A%84%EF%BC%8C%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3/","title":"Bean \u662f\u600e\u4e48\u52a0\u8f7d\u548c\u4f7f\u7528\u7684\uff0c\u5faa\u73af\u4f9d\u8d56\u600e\u4e48\u89e3\u51b3","text":""},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/Bean%20%E6%98%AF%E6%80%8E%E4%B9%88%E5%8A%A0%E8%BD%BD%E5%92%8C%E4%BD%BF%E7%94%A8%E7%9A%84%EF%BC%8C%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3/#beanbean","title":"Bean\u7684\u52a0\u8f7d\u4e0e\u4f7f\u7528\uff1aBean\u7684\u751f\u547d\u5468\u671f","text":"<p>Spring Bean\u7684\u751f\u547d\u5468\u671f\u63cf\u8ff0\u4e86\u4e00\u4e2aBean\u4ece\u4e00\u4e2a\u7b80\u5355\u7684Java\u7c7b\u5b9a\u4e49\uff0c\u5230\u6210\u4e3a\u4e00\u4e2a\u529f\u80fd\u5b8c\u5907\u3001\u53ef\u4f9b\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u7684\u5bf9\u8c61\u6240\u7ecf\u5386\u7684\u5168\u90e8\u8fc7\u7a0b\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u53ef\u4ee5\u6982\u62ec\u4e3a\u4ee5\u4e0b\u51e0\u4e2a\u5173\u952e\u9636\u6bb5\uff1a</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/Bean%20%E6%98%AF%E6%80%8E%E4%B9%88%E5%8A%A0%E8%BD%BD%E5%92%8C%E4%BD%BF%E7%94%A8%E7%9A%84%EF%BC%8C%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3/#1-bean-bean-definition","title":"1. Bean\u7684\u5b9a\u4e49 (Bean Definition)","text":"<p>\u8fd9\u4e2a\u9636\u6bb5\u662f\u5bb9\u5668\u7684\u201c\u51c6\u5907\u9636\u6bb5\u201d\u3002Spring\u5bb9\u5668\u542f\u52a8\u65f6\uff0c\u4f1a\u8bfb\u53d6\u5e94\u7528\u7a0b\u5e8f\u63d0\u4f9b\u7684\u914d\u7f6e\u5143\u6570\u636e\u3002\u8fd9\u4e9b\u5143\u6570\u636e\u53ef\u4ee5\u6765\u81ea\u4e8eXML\u914d\u7f6e\u6587\u4ef6\u3001Java\u6ce8\u89e3\uff08\u5982<code>@Component</code>, <code>@Service</code>, <code>@Repository</code>\uff09\u6216Java Config\uff08<code>@Configuration</code>\u7c7b\u4e2d\u7684<code>@Bean</code>\u65b9\u6cd5\uff09\u3002Spring\u4f1a\u89e3\u6790\u8fd9\u4e9b\u5143\u6570\u636e\uff0c\u4e3a\u6bcf\u4e2aBean\u521b\u5efa\u4e00\u4e2a\u5bf9\u5e94\u7684<code>BeanDefinition</code>\u5bf9\u8c61\u3002\u4f60\u53ef\u4ee5\u628a<code>BeanDefinition</code>\u770b\u4f5c\u662f\u521b\u5efaBean\u7684\u201c\u914d\u65b9\u201d\u6216\u201c\u84dd\u56fe\u201d\uff0c\u5b83\u5305\u542b\u4e86Bean\u7684\u7c7b\u540d\u3001\u4f5c\u7528\u57df\uff08singleton\u3001prototype\u7b49\uff09\u3001\u4f9d\u8d56\u5173\u7cfb\u3001\u521d\u59cb\u5316\u65b9\u6cd5\u7b49\u6240\u6709\u4fe1\u606f\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/Bean%20%E6%98%AF%E6%80%8E%E4%B9%88%E5%8A%A0%E8%BD%BD%E5%92%8C%E4%BD%BF%E7%94%A8%E7%9A%84%EF%BC%8C%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3/#2-bean-instantiation","title":"2. Bean\u7684\u5b9e\u4f8b\u5316 (Instantiation)","text":"<p>\u5f53\u5bb9\u5668\u51c6\u5907\u597d<code>BeanDefinition</code>\u540e\uff0c\u5728\u67d0\u4e2a\u65f6\u523b\uff08\u5bf9\u4e8e\u5355\u4f8bBean\u901a\u5e38\u662f\u5bb9\u5668\u542f\u52a8\u65f6\uff0c\u5bf9\u4e8e\u539f\u578bBean\u5219\u662f\u6bcf\u6b21\u8bf7\u6c42\u65f6\uff09\uff0cSpring\u4f1a\u6839\u636e<code>BeanDefinition</code>\u6765\u521b\u5efaBean\u7684\u5b9e\u4f8b\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u901a\u5e38\u662f\u901a\u8fc7Java\u7684\u53cd\u5c04\u673a\u5236\u8c03\u7528\u7c7b\u7684\u6784\u9020\u51fd\u6570\u6765\u5b8c\u6210\u7684\u3002\u6b64\u65f6\u5f97\u5230\u7684\u53ea\u662f\u4e00\u4e2a\u201c\u88f8\u9732\u201d\u7684\u5bf9\u8c61\uff0c\u5b83\u7684\u5c5e\u6027\u90fd\u8fd8\u662f\u9ed8\u8ba4\u503c\uff0c\u4f9d\u8d56\u4e5f\u5c1a\u672a\u6ce8\u5165\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/Bean%20%E6%98%AF%E6%80%8E%E4%B9%88%E5%8A%A0%E8%BD%BD%E5%92%8C%E4%BD%BF%E7%94%A8%E7%9A%84%EF%BC%8C%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3/#3-bean-population","title":"3. Bean\u7684\u5c5e\u6027\u586b\u5145 (Population)","text":"<p>\u5b9e\u4f8b\u5316\u5b8c\u6210\u540e\uff0cSpring\u4f1a\u68c0\u67e5<code>BeanDefinition</code>\u4e2d\u7684\u4f9d\u8d56\u4fe1\u606f\uff0c\u5e76\u5bf9Bean\u7684\u5c5e\u6027\u8fdb\u884c\u586b\u5145\u3002\u8fd9\u5c31\u662f\u6211\u4eec\u719f\u77e5\u7684\u201c\u4f9d\u8d56\u6ce8\u5165\u201d\uff08DI\uff09\u3002Spring\u4f1a\u6839\u636e<code>@Autowired</code>\u3001<code>@Resource</code>\u7b49\u6ce8\u89e3\uff0c\u6216\u8005XML\u914d\u7f6e\uff0c\u53bb\u5bb9\u5668\u4e2d\u67e5\u627e\u5e76\u6ce8\u5165\u8be5Bean\u6240\u4f9d\u8d56\u7684\u5176\u4ed6Bean\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/Bean%20%E6%98%AF%E6%80%8E%E4%B9%88%E5%8A%A0%E8%BD%BD%E5%92%8C%E4%BD%BF%E7%94%A8%E7%9A%84%EF%BC%8C%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3/#4-bean-initialization","title":"4. Bean\u7684\u521d\u59cb\u5316 (Initialization)","text":"<p>\u8fd9\u662fBean\u751f\u547d\u5468\u671f\u4e2d\u6700\u4e3a\u590d\u6742\u3001\u6269\u5c55\u70b9\u6700\u591a\u7684\u4e00\u4e2a\u9636\u6bb5\u3002\u5728\u5c5e\u6027\u586b\u5145\u5b8c\u6bd5\u540e\uff0cBean\u8fd8\u4e0d\u80fd\u7acb\u5373\u4f7f\u7528\uff0c\u9700\u8981\u7ecf\u8fc7\u4e00\u7cfb\u5217\u7684\u521d\u59cb\u5316\u64cd\u4f5c\uff0c\u4f7f\u5176\u8fbe\u5230\u53ef\u7528\u7684\u6700\u7ec8\u72b6\u6001\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u5927\u81f4\u5305\u542b\u4ee5\u4e0b\u6b65\u9aa4\uff1a</p> <ul> <li> <p>\u6267\u884cAware\u63a5\u53e3\uff1a\u5982\u679cBean\u5b9e\u73b0\u4e86\u5982<code>BeanNameAware</code>\u3001<code>BeanFactoryAware</code>\u3001<code>ApplicationContextAware</code>\u7b49\u63a5\u53e3\uff0cSpring\u4f1a\u8c03\u7528\u76f8\u5e94\u7684\u65b9\u6cd5\uff0c\u5c06Bean\u7684ID\u3001Bean\u5de5\u5382\u3001\u5e94\u7528\u4e0a\u4e0b\u6587\u7b49\u5bb9\u5668\u81ea\u8eab\u7684\u4fe1\u606f\u6ce8\u5165\u7ed9Bean\u3002</p> </li> <li> <p>BeanPostProcessor\u524d\u7f6e\u5904\u7406\uff1aSpring\u4f1a\u8c03\u7528\u6240\u6709\u5df2\u6ce8\u518c\u7684<code>BeanPostProcessor</code>\u7684<code>postProcessBeforeInitialization</code>\u65b9\u6cd5\u3002\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u6269\u5c55\u70b9\uff0c\u5141\u8bb8\u6211\u4eec\u5bf9Bean\u8fdb\u884c\u81ea\u5b9a\u4e49\u7684\u52a0\u5de5\u3002</p> </li> <li> <p>\u6267\u884c\u521d\u59cb\u5316\u65b9\u6cd5\uff1a\u5982\u679cBean\u5b9e\u73b0\u4e86<code>InitializingBean</code>\u63a5\u53e3\uff0cSpring\u4f1a\u8c03\u7528\u5176<code>afterPropertiesSet</code>\u65b9\u6cd5\u3002\u5982\u679cBean\u5b9a\u4e49\u4e86<code>init-method</code>\uff08\u6216\u4f7f\u7528<code>@PostConstruct</code>\u6ce8\u89e3\uff09\uff0c\u8be5\u65b9\u6cd5\u4e5f\u4f1a\u5728\u6b64\u65f6\u88ab\u8c03\u7528\u3002</p> </li> <li> <p>BeanPostProcessor\u540e\u7f6e\u5904\u7406\uff1a\u6700\u540e\uff0cSpring\u4f1a\u8c03\u7528\u6240\u6709<code>BeanPostProcessor</code>\u7684<code>postProcessAfterInitialization</code>\u65b9\u6cd5\u3002Spring\u7684AOP\u529f\u80fd\uff0c\u5373\u4e3aBean\u521b\u5efa\u4ee3\u7406\u5bf9\u8c61\uff0c\u901a\u5e38\u5c31\u662f\u5728\u8fd9\u4e2a\u6b65\u9aa4\u4e2d\u5b8c\u6210\u7684\u3002\u7ecf\u8fc7\u8fd9\u4e00\u6b65\u540e\u8fd4\u56de\u7684\u5bf9\u8c61\uff0c\u53ef\u80fd\u5df2\u7ecf\u4e0d\u662f\u539f\u59cb\u5b9e\u4f8b\uff0c\u800c\u662f\u88ab\u4ee3\u7406\u8fc7\u7684\u5bf9\u8c61\u4e86\u3002</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/Bean%20%E6%98%AF%E6%80%8E%E4%B9%88%E5%8A%A0%E8%BD%BD%E5%92%8C%E4%BD%BF%E7%94%A8%E7%9A%84%EF%BC%8C%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3/#5-bean-ready-for-use","title":"5. Bean\u7684\u5c31\u7eea\u4e0e\u4f7f\u7528 (Ready for Use)","text":"<p>\u7ecf\u8fc7\u5b8c\u6574\u7684\u521d\u59cb\u5316\u9636\u6bb5\u540e\uff0c\u8fd9\u4e2aBean\u5c31\u662f\u4e00\u4e2a\u529f\u80fd\u5b8c\u5907\u7684\u5bf9\u8c61\u4e86\u3002\u5b83\u88ab\u5b58\u653e\u5728Spring\u7684\u5355\u4f8b\u7f13\u5b58\u6c60\u4e2d\uff08\u5bf9\u4e8e\u5355\u4f8bBean\u800c\u8a00\uff09\uff0c\u968f\u65f6\u53ef\u4ee5\u88ab\u5e94\u7528\u7a0b\u5e8f\u7684\u5176\u4ed6\u90e8\u5206\u6ce8\u5165\u548c\u4f7f\u7528\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/Bean%20%E6%98%AF%E6%80%8E%E4%B9%88%E5%8A%A0%E8%BD%BD%E5%92%8C%E4%BD%BF%E7%94%A8%E7%9A%84%EF%BC%8C%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3/#6-bean-destruction","title":"6. Bean\u7684\u9500\u6bc1 (Destruction)","text":"<p>\u5f53Spring\u5bb9\u5668\u5173\u95ed\u65f6\uff0c\u5b83\u4f1a\u8d1f\u8d23\u9500\u6bc1\u5176\u7ba1\u7406\u7684\u6240\u6709\u5355\u4f8bBean\u3002\u9500\u6bc1\u8fc7\u7a0b\u540c\u6837\u63d0\u4f9b\u4e86\u56de\u8c03\u673a\u5236\uff1a</p> <ul> <li> <p>\u5982\u679cBean\u5b9e\u73b0\u4e86<code>DisposableBean</code>\u63a5\u53e3\uff0cSpring\u4f1a\u8c03\u7528\u5176<code>destroy</code>\u65b9\u6cd5\u3002</p> </li> <li> <p>\u5982\u679cBean\u5b9a\u4e49\u4e86<code>destroy-method</code>\uff08\u6216\u4f7f\u7528<code>@PreDestroy</code>\u6ce8\u89e3\uff09\uff0c\u8be5\u65b9\u6cd5\u4f1a\u88ab\u8c03\u7528\u3002</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/Bean%20%E6%98%AF%E6%80%8E%E4%B9%88%E5%8A%A0%E8%BD%BD%E5%92%8C%E4%BD%BF%E7%94%A8%E7%9A%84%EF%BC%8C%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3/#_1","title":"\u5faa\u73af\u4f9d\u8d56\u7684\u89e3\u51b3\u65b9\u6848","text":"<p>\u5faa\u73af\u4f9d\u8d56\u662f\u6307\u4e24\u4e2a\u6216\u591a\u4e2aBean\u4e92\u76f8\u6301\u6709\u5bf9\u65b9\u7684\u5f15\u7528\uff0c\u5f62\u6210\u4e86\u4e00\u4e2a\u95ed\u73af\uff0c\u6bd4\u5982A\u4f9d\u8d56B\uff0c\u540c\u65f6B\u53c8\u4f9d\u8d56A\u3002\u8fd9\u662f\u4e00\u4e2a\u5728\u5927\u578b\u9879\u76ee\u4e2d\u53ef\u80fd\u9047\u5230\u7684\u68d8\u624b\u95ee\u9898\u3002</p> <p>\u9996\u5148\uff0c\u9700\u8981\u660e\u786eSpring\u89e3\u51b3\u5faa\u73af\u4f9d\u8d56\u7684\u4e24\u4e2a\u524d\u63d0\u6761\u4ef6\uff1a</p> <ol> <li> <p>\u53ea\u9488\u5bf9\u5355\u4f8b\uff08Singleton\uff09\u4f5c\u7528\u57df\u7684Bean\u3002\u5bf9\u4e8e\u539f\u578b\uff08Prototype\uff09\u4f5c\u7528\u57df\u7684Bean\uff0cSpring\u65e0\u6cd5\u89e3\u51b3\uff0c\u4f1a\u76f4\u63a5\u629b\u51fa\u5f02\u5e38\u3002</p> </li> <li> <p>\u53ea\u9488\u5bf9\u5b57\u6bb5\u6ce8\u5165\u6216Setter\u65b9\u6cd5\u6ce8\u5165\u3002\u5bf9\u4e8e\u6784\u9020\u51fd\u6570\u6ce8\u5165\uff0cSpring\u4e5f\u65e0\u6cd5\u89e3\u51b3\uff0c\u540c\u6837\u4f1a\u629b\u51fa\u5f02\u5e38\uff0c\u56e0\u4e3a\u5bf9\u8c61\u7684\u521b\u5efa\u548c\u4f9d\u8d56\u7684\u6ce8\u5165\u8026\u5408\u5728\u4e86\u4e00\u8d77\uff0c\u65e0\u6cd5\u89e3\u5f00\u3002</p> </li> </ol> <p>Spring\u89e3\u51b3\u5faa\u73af\u4f9d\u8d56\u7684\u6838\u5fc3\uff0c\u5728\u4e8e\u5b83\u5185\u90e8\u7cbe\u5de7\u8bbe\u8ba1\u7684\u4e09\u7ea7\u7f13\u5b58\u673a\u5236\u3002</p> <ul> <li> <p>\u4e00\u7ea7\u7f13\u5b58 singletonObjects\uff1a</p> <p>\u4e5f\u53eb\u201c\u5355\u4f8b\u6c60\u201d\uff0c\u7528\u4e8e\u5b58\u653e\u5df2\u7ecf\u5b8c\u5168\u521d\u59cb\u5316\u597d\u7684Bean\u3002\u8fd9\u662f\u4e00\u4e2aMap\uff0c\u91cc\u9762\u7684Bean\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u3002 <li> <p>\u4e8c\u7ea7\u7f13\u5b58 earlySingletonObjects\uff1a</p> <p>\u7528\u4e8e\u5b58\u653e\u65e9\u671f\u66b4\u9732\u7684Bean\u3002\u8fd9\u4e9bBean\u5df2\u7ecf\u88ab\u5b9e\u4f8b\u5316\uff0c\u4f46\u5c1a\u672a\u5b8c\u6210\u5c5e\u6027\u586b\u5145\u548c\u521d\u59cb\u5316\u3002\u8fd9\u4e2a\u7f13\u5b58\u7684\u5b58\u5728\uff0c\u662f\u4e3a\u4e86\u6253\u7834\u5faa\u73af\u3002\u4e00\u65e6\u67d0\u4e2aBean\u88ab\u521b\u5efa\uff0c\u5b83\u7684\u4e00\u4e2a\u65e9\u671f\u5f15\u7528\u5c31\u4f1a\u88ab\u653e\u5165\u8fd9\u4e2a\u7f13\u5b58\uff0c\u5373\u4f7f\u5b83\u8fd8\u4e0d\u5b8c\u6574\u3002</p> </li> <li> <p>\u4e09\u7ea7\u7f13\u5b58 singletonFactories\uff1a</p> <p>\u8fd9\u662f\u4e00\u4e2a\u5de5\u5382\u7f13\u5b58\uff0c\u5b58\u653e\u7684\u662f\u7528\u4e8e\u521b\u5efa\u65e9\u671fBean\u7684ObjectFactory\u3002\u8fd9\u4e2aObjectFactory\u662f\u4e00\u4e2a\u51fd\u6570\u5f0f\u63a5\u53e3\uff0c\u5f53\u88ab\u8c03\u7528\u65f6\uff0c\u5b83\u4f1a\u8fd4\u56de\u4e00\u4e2aBean\u5bf9\u8c61\u3002\u4e09\u7ea7\u7f13\u5b58\u662f\u89e3\u51b3AOP\u4ee3\u7406\u4e0b\u5faa\u73af\u4f9d\u8d56\u7684\u5173\u952e\u3002\u5982\u679c\u4e00\u4e2aBean\u9700\u8981\u88abAOP\u4ee3\u7406\uff0c\u90a3\u4e48\u8fd9\u4e2a\u5de5\u5382\u8fd4\u56de\u7684\u5c31\u662f\u4ee3\u7406\u540e\u7684\u5bf9\u8c61\uff0c\u5426\u5219\u8fd4\u56de\u539f\u59cb\u5bf9\u8c61\u3002</p> </li>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/Bean%20%E6%98%AF%E6%80%8E%E4%B9%88%E5%8A%A0%E8%BD%BD%E5%92%8C%E4%BD%BF%E7%94%A8%E7%9A%84%EF%BC%8C%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3/#abba","title":"\u89e3\u51b3\u6d41\u7a0b\uff08\u4ee5A\u4f9d\u8d56B\uff0cB\u4f9d\u8d56A\u4e3a\u4f8b\uff09\uff1a","text":"<ol> <li> <p>\u521b\u5efaA\uff1a<code>getSingleton(\"A\")</code>\u88ab\u8c03\u7528\u3002\u9996\u5148\u68c0\u67e5\u4e00\u7ea7\u7f13\u5b58\uff0c\u6ca1\u6709\uff1b\u68c0\u67e5\u4e8c\u7ea7\u7f13\u5b58\uff0c\u6ca1\u6709\u3002</p> </li> <li> <p>\u5b9e\u4f8b\u5316A\uff1aSpring\u53d1\u73b0\u65e0\u6cd5\u4ece\u7f13\u5b58\u83b7\u53d6\uff0c\u4e8e\u662f\u5f00\u59cb\u521b\u5efaA\u3002\u5b83\u5148\u901a\u8fc7\u53cd\u5c04\u5b9e\u4f8b\u5316\u4e00\u4e2a\u201c\u88f8\u9732\u201d\u7684A\u5bf9\u8c61\u3002</p> </li> <li> <p>\u65e9\u671f\u66b4\u9732A\uff1a\u4e3a\u4e86\u89e3\u51b3\u53ef\u80fd\u7684\u5faa\u73af\u4f9d\u8d56\uff0cSpring\u5e76\u4e0d\u4f1a\u7acb\u5373\u53bb\u521d\u59cb\u5316A\uff0c\u800c\u662f\u5c06\u4e00\u4e2a\u80fd\u591f\u83b7\u53d6A\u5bf9\u8c61\uff08\u6216\u8005A\u7684\u4ee3\u7406\u5bf9\u8c61\uff09\u7684\u5de5\u5382\uff08<code>ObjectFactory</code>\uff09\u653e\u5165\u4e09\u7ea7\u7f13\u5b58<code>singletonFactories</code>\u4e2d\u3002</p> </li> <li> <p>\u586b\u5145A\u7684\u5c5e\u6027\uff1aSpring\u5f00\u59cb\u4e3aA\u6ce8\u5165\u5c5e\u6027\uff0c\u6b64\u65f6\u53d1\u73b0A\u4f9d\u8d56\u4e8eB\u3002\u4e8e\u662f\uff0cSpring\u4f1a\u53bb\u83b7\u53d6B\uff0c\u5373\u8c03\u7528<code>getSingleton(\"B\")</code>\u3002</p> </li> <li> <p>\u521b\u5efaB\uff1a\u83b7\u53d6B\u7684\u6d41\u7a0b\u548cA\u4e00\u6837\u3002\u68c0\u67e5\u4e00\u7ea7\u3001\u4e8c\u7ea7\u7f13\u5b58\uff0c\u90fd\u6ca1\u6709\u3002\u4e8e\u662fSpring\u5f00\u59cb\u521b\u5efaB\uff0c\u5b9e\u4f8b\u5316\u4e00\u4e2a\u201c\u88f8\u9732\u201d\u7684B\u5bf9\u8c61\uff0c\u5e76\u5c06\u5176\u5bf9\u5e94\u7684<code>ObjectFactory</code>\u4e5f\u653e\u5165\u4e09\u7ea7\u7f13\u5b58\u3002</p> </li> <li> <p>\u586b\u5145B\u7684\u5c5e\u6027\uff1aSpring\u4e3aB\u6ce8\u5165\u5c5e\u6027\uff0c\u6b64\u65f6\u53d1\u73b0B\u4f9d\u8d56\u4e8eA\u3002\u4e8e\u662f\uff0cSpring\u518d\u6b21\u53bb\u83b7\u53d6A\uff0c\u5373\u8c03\u7528<code>getSingleton(\"A\")</code>\u3002</p> </li> <li> <p>\u6253\u7834\u5faa\u73af\u7684\u5173\u952e\u70b9\uff1a</p> <ul> <li> <p>\u8fd9\u4e00\u6b21\u83b7\u53d6A\uff0cSpring\u5728\u4e00\u7ea7\u7f13\u5b58\u4e2d\u627e\u4e0d\u5230\uff08\u56e0\u4e3aA\u8fd8\u6ca1\u5b8c\u5168\u521d\u59cb\u5316\uff09\u3002</p> </li> <li> <p>\u5728\u4e8c\u7ea7\u7f13\u5b58\u4e2d\u4e5f\u627e\u4e0d\u5230\u3002</p> </li> <li> <p>\u4f46\u662f\uff0c\u5b83\u5728\u4e09\u7ea7\u7f13\u5b58\u4e2d\u627e\u5230\u4e86\u7528\u4e8e\u521b\u5efaA\u7684<code>ObjectFactory</code>\u3002</p> </li> <li> <p>Spring\u4f1a\u8c03\u7528\u8fd9\u4e2a\u5de5\u5382\u7684<code>getObject()</code>\u65b9\u6cd5\u3002\u6b64\u65f6\uff0c\u5982\u679cA\u9700\u8981AOP\u4ee3\u7406\uff0c\u8fd9\u4e2a\u5de5\u5382\u5c31\u4f1a\u8fd4\u56deA\u7684\u4ee3\u7406\u5bf9\u8c61\uff1b\u5982\u679c\u4e0d\u9700\u8981\uff0c\u5c31\u8fd4\u56de\u539f\u59cb\u7684A\u5bf9\u8c61\u3002</p> </li> <li> <p>\u7136\u540e\uff0c\u8fd9\u4e2a\u65e9\u671f\u66b4\u9732\u7684A\u5bf9\u8c61\u88ab\u653e\u5165\u4e8c\u7ea7\u7f13\u5b58<code>earlySingletonObjects</code>\u4e2d\uff0c\u5e76\u4ece\u4e09\u7ea7\u7f13\u5b58\u4e2d\u79fb\u9664\u5bf9\u5e94\u7684\u5de5\u5382\u3002</p> </li> <li> <p>\u8fd9\u4e2a\u65e9\u671f\u66b4\u9732\u7684A\u5bf9\u8c61\u88ab\u8fd4\u56de\uff0c\u5e76\u6210\u529f\u6ce8\u5165\u5230B\u7684\u5c5e\u6027\u4e2d\u3002</p> </li> </ul> </li> <li> <p>\u5b8c\u6210B\u7684\u521b\u5efa\uff1aB\u7684\u4f9d\u8d56\u88ab\u6210\u529f\u6ce8\u5165\uff0c\u63a5\u7740B\u5b8c\u6210\u540e\u7eed\u7684\u521d\u59cb\u5316\u8fc7\u7a0b\u3002\u521d\u59cb\u5316\u5b8c\u6210\u540e\uff0c\u5b8c\u6574\u7684B\u5bf9\u8c61\u88ab\u653e\u5165\u4e00\u7ea7\u7f13\u5b58<code>singletonObjects</code>\u4e2d\uff0c\u5e76\u4ece\u4e8c\u7ea7\u3001\u4e09\u7ea7\u7f13\u5b58\u4e2d\u79fb\u9664\u3002</p> </li> <li> <p>\u5b8c\u6210A\u7684\u521b\u5efa\uff1a\u73b0\u5728\uff0cB\u5bf9\u8c61\u5df2\u7ecf\u53ef\u4ee5\u88ab\u83b7\u53d6\u4e86\u3002Spring\u5c06\u8fd9\u4e2a\u5b8c\u6574\u7684B\u5bf9\u8c61\u6ce8\u5165\u5230\u4e4b\u524d\u7b49\u5f85\u7684A\u5bf9\u8c61\u4e2d\u3002A\u7684\u4f9d\u8d56\u4e5f\u5168\u90e8\u6ce8\u5165\u5b8c\u6bd5\uff0c\u63a5\u7740A\u5b8c\u6210\u540e\u7eed\u7684\u521d\u59cb\u5316\u8fc7\u7a0b\u3002\u6700\u7ec8\uff0c\u5b8c\u6574\u7684A\u5bf9\u8c61\u4e5f\u88ab\u653e\u5165\u4e00\u7ea7\u7f13\u5b58\u3002</p> </li> </ol> <p>\u81f3\u6b64\uff0cA\u548cB\u7684\u5faa\u73af\u4f9d\u8d56\u88ab\u6210\u529f\u89e3\u51b3\uff0c\u4e24\u8005\u90fd\u6210\u4e3a\u4e86\u529f\u80fd\u5b8c\u5907\u7684Bean\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u7684\u6838\u5fc3\u5c31\u662f\u901a\u8fc7\u4e8c\u7ea7\u548c\u4e09\u7ea7\u7f13\u5b58\uff0c\u63d0\u524d\u66b4\u9732\u4e86\u4e00\u4e2a\u201c\u534a\u6210\u54c1\u201d\u7684Bean\u5f15\u7528\uff0c\u4ece\u800c\u6253\u7834\u4e86\u5faa\u73af\u7b49\u5f85\u7684\u50f5\u5c40\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/Spring%20AOP%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/","title":"Spring AOP\u662f\u5982\u4f55\u5b9e\u73b0\u7684","text":""},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/Spring%20AOP%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/#_1","title":"\u52a8\u6001\u4ee3\u7406","text":"<p>Spring AOP\u7684\u5b9e\u73b0\u539f\u7406\u6838\u5fc3\u662f\u52a8\u6001\u4ee3\u7406 (Dynamic Proxy)\u3002 \u5f53\u6211\u4eec\u4e3a\u4e00\u4e2aSpring Bean\u914d\u7f6e\u5207\u9762\uff08Aspect\uff09\u65f6\uff0cSpring IoC\u5bb9\u5668\u5728\u521b\u5efa\u8fd9\u4e2aBean\u65f6\uff0c\u5e76\u4e0d\u4f1a\u8fd4\u56de\u539f\u59cb\u7684\u5bf9\u8c61\u5b9e\u4f8b\uff0c\u800c\u662f\u8fd4\u56de\u4e00\u4e2a\u8be5\u5bf9\u8c61\u7684\u4ee3\u7406\u5bf9\u8c61\u3002 \u540e\u7eed\u6240\u6709\u5bf9\u8be5Bean\u65b9\u6cd5\u7684\u8c03\u7528\uff0c\u5b9e\u9645\u4e0a\u90fd\u662f\u901a\u8fc7\u8fd9\u4e2a\u4ee3\u7406\u5bf9\u8c61\u6765\u5b8c\u6210\u7684\u3002\u4ee3\u7406\u5bf9\u8c61\u5728\u8c03\u7528\u539f\u59cb\u65b9\u6cd5\u7684\u524d\u540e\uff0c\u6709\u673a\u4f1a\u7ec7\u5165\uff08Weave\uff09\u6211\u4eec\u5728\u5207\u9762\u4e2d\u5b9a\u4e49\u7684\u989d\u5916\u903b\u8f91\uff08\u5373\u201c\u901a\u77e5\u201d\uff0cAdvice\uff09\uff0c\u4ece\u800c\u5b9e\u73b0\u4e86\u9762\u5411\u5207\u9762\u7684\u7f16\u7a0b\u3002</p> <p>Spring AOP\u4e3b\u8981\u91c7\u7528\u4e24\u79cd\u52a8\u6001\u4ee3\u7406\u6280\u672f\u6765\u5b9e\u73b0\uff1a</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/Spring%20AOP%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/#1-jdk","title":"1. JDK\u52a8\u6001\u4ee3\u7406","text":"<p>\u5b9e\u73b0\u539f\u7406 JDK\u52a8\u6001\u4ee3\u7406\u662fJava\u539f\u751f\u652f\u6301\u7684\u6280\u672f\uff0c\u5b83\u57fa\u4e8e\u63a5\u53e3\u548c\u53cd\u5c04\u673a\u5236\u3002 \u5f53Spring\u51b3\u5b9a\u4e3a\u4e00\u4e2a\u5bf9\u8c61\u521b\u5efaJDK\u52a8\u6001\u4ee3\u7406\u65f6\uff0c\u5b83\u4f1a\u901a\u8fc7<code>java.lang.reflect.Proxy</code>\u8fd9\u4e2a\u7c7b\uff0c\u52a8\u6001\u5730\u5728\u5185\u5b58\u4e2d\u751f\u6210\u4e00\u4e2a\u4ee3\u7406\u7c7b\u3002\u8fd9\u4e2a\u4ee3\u7406\u7c7b\u4f1a\u540c\u65f6\u5b9e\u73b0\u76ee\u6807\u5bf9\u8c61\u6240\u5b9e\u73b0\u7684\u6240\u6709\u63a5\u53e3\uff0c\u5e76\u4e14\u7ee7\u627f\u81ea<code>Proxy</code>\u7c7b\u3002 \u5f53\u6211\u4eec\u8c03\u7528\u4ee3\u7406\u5bf9\u8c61\u4e0a\u5c5e\u4e8e\u63a5\u53e3\u4e2d\u7684\u65b9\u6cd5\u65f6\uff0c\u8fd9\u4e2a\u8c03\u7528\u4f1a\u88ab\u5206\u6d3e\u5230\u6211\u4eec\u6240\u5b9e\u73b0\u7684<code>InvocationHandler</code>\u63a5\u53e3\u7684<code>invoke</code>\u65b9\u6cd5\u4e2d\u3002\u5728\u8fd9\u4e2a<code>invoke</code>\u65b9\u6cd5\u91cc\uff0cSpring\u5c31\u53ef\u4ee5\u5c06\u5207\u9762\u903b\u8f91\uff08\u5982<code>@Before</code>, <code>@After</code>\u7b49\u901a\u77e5\uff09\u7ec7\u5165\uff0c\u5e76\u5728\u9002\u5f53\u7684\u65f6\u5019\u901a\u8fc7\u53cd\u5c04\u8c03\u7528\u76ee\u6807\u5bf9\u8c61\u7684\u539f\u59cb\u65b9\u6cd5\u3002</p> <p>\u89e6\u53d1\u6761\u4ef6 \u8fd9\u662fSpring\u7684\u9ed8\u8ba4\u7b56\u7565\u3002\u5982\u679c\u4e00\u4e2a\u76ee\u6807Bean\u5b9e\u73b0\u4e86\u81f3\u5c11\u4e00\u4e2a\u63a5\u53e3\uff0cSpring AOP\u5c31\u4f1a\u9ed8\u8ba4\u4f7f\u7528JDK\u52a8\u6001\u4ee3\u7406\u3002</p> <p>\u4f18\u70b9 *   \u539f\u751f\u652f\u6301\uff1a\u4f5c\u4e3aJDK\u7684\u4e00\u90e8\u5206\uff0c\u4e0d\u9700\u8981\u5f15\u5165\u4efb\u4f55\u7b2c\u4e09\u65b9\u4f9d\u8d56\u3002 *   \u521b\u5efa\u901f\u5ea6\u5feb\uff1a\u901a\u8fc7\u53cd\u5c04\u751f\u6210\u4ee3\u7406\u7c7b\u7684\u901f\u5ea6\u901a\u5e38\u6bd4CGLib\u64cd\u4f5c\u5b57\u8282\u7801\u8981\u5feb\u3002</p> <p>\u7f3a\u70b9 *   \u5fc5\u987b\u57fa\u4e8e\u63a5\u53e3\uff1a\u76ee\u6807\u7c7b\u5fc5\u987b\u5b9e\u73b0\u63a5\u53e3\uff0c\u5426\u5219JDK\u52a8\u6001\u4ee3\u7406\u65e0\u6cd5\u5de5\u4f5c\u3002 *   \u53ea\u80fd\u4ee3\u7406\u63a5\u53e3\u65b9\u6cd5\uff1a\u53ea\u80fd\u4ee3\u7406\u63a5\u53e3\u4e2d\u58f0\u660e\u7684\u65b9\u6cd5\u3002\u5982\u679c\u4e00\u4e2a\u7c7b\u5b9e\u73b0\u4e86\u63a5\u53e3\uff0c\u4f46\u6211\u4eec\u5728\u5b83\u7684\u4e00\u4e2a\u975e\u63a5\u53e3\u65b9\u6cd5\u4e0a\u914d\u7f6e\u4e86\u5207\u9762\uff0c\u8fd9\u4e2a\u5207\u9762\u662f\u4e0d\u4f1a\u751f\u6548\u7684\u3002\u540c\u65f6\uff0c\u56e0\u4e3a\u4ee3\u7406\u5bf9\u8c61\u53ea\u66b4\u9732\u4e86\u63a5\u53e3\u7c7b\u578b\uff0c\u6211\u4eec\u4e5f\u65e0\u6cd5\u76f4\u63a5\u8c03\u7528\u5230\u76ee\u6807\u7c7b\u4e2d\u72ec\u6709\u7684\u65b9\u6cd5\u3002 *   \u6267\u884c\u6548\u7387\u8f83\u4f4e\uff1a\u6267\u884c\u4ee3\u7406\u65b9\u6cd5\u65f6\uff0c\u5e95\u5c42\u9700\u8981\u901a\u8fc7\u53cd\u5c04\u673a\u5236\u6765\u56de\u8c03\uff0c\u8fd9\u5728\u6027\u80fd\u4e0a\u76f8\u6bd4\u76f4\u63a5\u8c03\u7528\u8981\u6162\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/Spring%20AOP%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/#2-cglib","title":"2. CGLIB\u52a8\u6001\u4ee3\u7406","text":"<p>\u5b9e\u73b0\u539f\u7406 CGLIB (Code Generation Library) \u662f\u4e00\u4e2a\u5f3a\u5927\u7684\u3001\u9ad8\u6027\u80fd\u7684\u4ee3\u7801\u751f\u6210\u5e93\u3002\u5b83\u901a\u8fc7\u64cd\u4f5c\u5b57\u8282\u7801\u7684\u65b9\u5f0f\uff0c\u4e3a\u76ee\u6807\u7c7b\u521b\u5efa\u4e00\u4e2a\u5b50\u7c7b\u6765\u4f5c\u4e3a\u4ee3\u7406\u7c7b\u3002 \u5b83\u4f1a\u91cd\u5199\u76ee\u6807\u7c7b\u4e2d\u6240\u6709\u53ef\u4ee5\u88ab\u91cd\u5199\u7684\u65b9\u6cd5\uff08\u975e<code>final</code>\u3001\u975e<code>private</code>\u7684\u65b9\u6cd5\uff09\uff0c\u5e76\u5728\u91cd\u5199\u7684\u65b9\u6cd5\u4e2d\u7ec7\u5165\u5207\u9762\u903b\u8f91\uff0c\u4ece\u800c\u5b9e\u73b0AOP\u7684\u529f\u80fd\u3002\u56e0\u4e3a\u5b83\u662f\u901a\u8fc7\u751f\u6210\u5b50\u7c7b\u7684\u65b9\u5f0f\u5b9e\u73b0\uff0c\u6240\u4ee5\u4e0d\u8981\u6c42\u76ee\u6807\u7c7b\u5fc5\u987b\u5b9e\u73b0\u63a5\u53e3\u3002</p> <p>\u89e6\u53d1\u6761\u4ef6 \u5f53\u9700\u8981\u88ab\u4ee3\u7406\u7684Bean\u6ca1\u6709\u5b9e\u73b0\u4efb\u4f55\u63a5\u53e3\u65f6\uff0cSpring AOP\u4f1a\u81ea\u52a8\u5207\u6362\u5230CGLIB\u52a8\u6001\u4ee3\u7406\u3002 \u5f53\u7136\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u5f3a\u5236Spring\u5bf9\u6240\u6709Bean\u90fd\u4f7f\u7528CGLIB\u4ee3\u7406\u3002</p> <p>\u4f18\u70b9 *   \u4e0d\u4f9d\u8d56\u63a5\u53e3\uff1a\u56e0\u4e3a\u662f\u57fa\u4e8e\u7ee7\u627f\uff0c\u6240\u4ee5\u76ee\u6807\u7c7b\u65e0\u9700\u5b9e\u73b0\u63a5\u53e3\u3002 *   \u53ef\u4ee3\u7406\u8303\u56f4\u66f4\u5e7f\uff1a\u53ef\u4ee5\u4ee3\u7406\u76ee\u6807\u7c7b\u4e2d\u6240\u6709\u53ef\u88ab\u91cd\u5199\u7684\u65b9\u6cd5\uff0c\u4e0d\u4ec5\u9650\u4e8e\u63a5\u53e3\u65b9\u6cd5\u3002 *   \u6267\u884c\u6548\u7387\u9ad8\uff1a\u751f\u6210\u7684\u4ee3\u7406\u7c7b\u548c\u6211\u4eec\u81ea\u5df1\u5199\u7684\u666e\u901a\u7c7b\u5dee\u522b\u4e0d\u5927\uff0c\u65b9\u6cd5\u7684\u8c03\u7528\u662f\u76f4\u63a5\u7684\uff0c\u4e0d\u6d89\u53ca\u53cd\u5c04\uff0c\u56e0\u6b64\u6267\u884c\u6548\u7387\u9ad8\u4e8eJDK\u52a8\u6001\u4ee3\u7406\u3002</p> <p>\u7f3a\u70b9 *   \u65e0\u6cd5\u4ee3\u7406final\u7c7b\u6216\u65b9\u6cd5\uff1a\u7531\u4e8eCGLIB\u7684\u539f\u7406\u662f\u7ee7\u627f\uff0c\u6240\u4ee5\u65e0\u6cd5\u4ee3\u7406\u88ab<code>final</code>\u4fee\u9970\u7684\u7c7b\uff08\u65e0\u6cd5\u7ee7\u627f\uff09\u6216\u65b9\u6cd5\uff08\u65e0\u6cd5\u91cd\u5199\uff09\u3002 \u5bf9\u4e8e<code>private</code>\u65b9\u6cd5\uff0c\u540c\u6837\u56e0\u4e3a\u5b50\u7c7b\u65e0\u6cd5\u8bbf\u95ee\u548c\u91cd\u5199\uff0c\u6240\u4ee5\u4e5f\u65e0\u6cd5\u4ee3\u7406\u3002 *   \u521b\u5efa\u901f\u5ea6\u6162\uff1a\u901a\u8fc7\u64cd\u4f5c\u5b57\u8282\u7801\u6765\u751f\u6210\u4ee3\u7406\u7c7b\u7684\u8fc7\u7a0b\uff0c\u6bd4JDK\u7684\u53cd\u5c04\u65b9\u5f0f\u8981\u6162\u3002 \u4f46\u7531\u4e8e\u5728Spring\u4e2d\uff0c\u5927\u90e8\u5206Bean\u90fd\u662f\u5355\u4f8b\u7684\uff0c\u4ee3\u7406\u7c7b\u53ea\u9700\u521b\u5efa\u4e00\u6b21\uff0c\u6240\u4ee5\u8fd9\u4e2a\u7f3a\u70b9\u901a\u5e38\u53ef\u4ee5\u63a5\u53d7\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/Spring%20AOP%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/#_2","title":"\u4ee3\u7406\u673a\u5236\u7684\u4e00\u4e2a\u91cd\u8981\u63d0\u9192\uff1a\u81ea\u8c03\u7528\u95ee\u9898","text":"<p>\u7531\u4e8eSpring AOP\u662f\u57fa\u4e8e\u4ee3\u7406\u7684\uff0c\u56e0\u6b64\u6709\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u9650\u5236\u9700\u8981\u7406\u89e3\uff1a\u53ea\u6709\u901a\u8fc7\u4ee3\u7406\u5bf9\u8c61\u7684\u5916\u90e8\u65b9\u6cd5\u8c03\u7528\uff0c\u624d\u4f1a\u89e6\u53d1\u5207\u9762\u903b\u8f91\u3002</p> <p>\u601d\u8003\u4ee5\u4e0b\u573a\u666f\uff1a</p> <pre><code>public class MyService {\n    public void methodA() {\n        System.out.println(\"Executing method A\");\n        this.methodB(); // \u5185\u90e8\u8c03\u7528\n    }\n\n    public void methodB() {\n        System.out.println(\"Executing method B\");\n    }\n}\n</code></pre> <p>\u5047\u8bbe\u6211\u4eec\u4e3a<code>methodB</code>\u914d\u7f6e\u4e86\u4e00\u4e2a\u5207\u9762\u3002\u5f53\u5916\u90e8\u4ee3\u7801\u901a\u8fc7\u4ee3\u7406\u5bf9\u8c61\u8c03\u7528<code>myService.methodA()</code>\u65f6\uff0c<code>methodA</code>\u7684\u5207\u9762\uff08\u5982\u679c\u914d\u7f6e\u4e86\uff09\u4f1a\u751f\u6548\u3002\u4f46\u662f\uff0c\u5728<code>methodA</code>\u5185\u90e8\uff0c\u901a\u8fc7<code>this.methodB()</code>\u6765\u8c03\u7528<code>methodB</code>\u65f6\uff0c\u8fd9\u4e2a\u8c03\u7528\u662f\u76f4\u63a5\u53d1\u751f\u5728\u539f\u59cb\u5bf9\u8c61\u5185\u90e8\u7684\uff0c\u5b83\u7ed5\u8fc7\u4e86\u4ee3\u7406\u5bf9\u8c61\u3002\u56e0\u6b64\uff0c<code>methodB</code>\u4e0a\u914d\u7f6e\u7684\u5207\u9762\u4e0d\u4f1a\u88ab\u89e6\u53d1\u3002</p> <p>\u8fd9\u5c31\u662f\u6240\u8c13\u7684\u201c\u81ea\u8c03\u7528\u5931\u6548\u201d\u95ee\u9898\u3002\u8981\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u901a\u5e38\u9700\u8981\u91cd\u6784\u4ee3\u7801\uff0c\u6216\u8005\u901a\u8fc7<code>AopContext.currentProxy()</code>\u83b7\u53d6\u5f53\u524d\u4ee3\u7406\u5bf9\u8c61\u6765\u53d1\u8d77\u8c03\u7528\uff0c\u4f46\u540e\u8005\u4f1a\u4f7f\u4ee3\u7801\u4e0eSpring AOP\u6846\u67b6\u4ea7\u751f\u8026\u5408\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/Spring%20IoC%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%8C%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF%E6%98%AF%E4%BB%80%E4%B9%88/","title":"Spring IoC\u662f\u4ec0\u4e48\uff0c\u5e95\u5c42\u5b9e\u73b0\u601d\u8def\u662f\u4ec0\u4e48","text":"<p>IoC\u7684\u5168\u79f0\u662fInversion of Control\uff0c\u5373\u63a7\u5236\u53cd\u8f6c\u3002\u5b83\u662fSpring\u6846\u67b6\u6700\u6838\u5fc3\u7684\u8bbe\u8ba1\u601d\u60f3\uff0c\u4e5f\u662f\u6574\u4e2a\u6846\u67b6\u7684\u57fa\u77f3\u3002</p> <p>\u8981\u7406\u89e3\u63a7\u5236\u53cd\u8f6c\uff0c\u6211\u4eec\u5148\u8981\u770b\u4ec0\u4e48\u662f\u6b63\u5411\u63a7\u5236\u3002\u5728\u4f20\u7edf\u7684\u7a0b\u5e8f\u5f00\u53d1\u4e2d\uff0c\u4e00\u4e2a\u5bf9\u8c61\u5982\u679c\u9700\u8981\u4f9d\u8d56\u53e6\u4e00\u4e2a\u5bf9\u8c61\uff0c\u901a\u5e38\u4f1a\u7531\u81ea\u5df1\u6765\u521b\u5efa\u548c\u7ba1\u7406\u8fd9\u4e2a\u4f9d\u8d56\uff0c\u6bd4\u5982 <code>private MyService service = new MyServiceImpl();</code>\u3002\u8fd9\u91cc\u7684\u63a7\u5236\u6743\u638c\u63e1\u5728\u5bf9\u8c61\u81ea\u5df1\u624b\u4e2d\u3002</p> <p>\u800cIoC\u5219\u5c06\u8fd9\u4e2a\u63a7\u5236\u6743\u53cd\u8f6c\u4e86\u8fc7\u6765\u3002\u5bf9\u8c61\u4e0d\u518d\u4e3b\u52a8\u521b\u5efa\u548c\u7ba1\u7406\u5b83\u7684\u4f9d\u8d56\uff0c\u800c\u662f\u88ab\u52a8\u5730\u7b49\u5f85\u5916\u90e8\u73af\u5883\u6765\u5411\u5b83\u63d0\u4f9b\u3002\u8fd9\u4e2a\u5916\u90e8\u73af\u5883\uff0c\u5728Spring\u4e2d\u5c31\u662fIoC\u5bb9\u5668\u3002\u5bf9\u8c61\u53ea\u9700\u8981\u58f0\u660e\u81ea\u5df1\u9700\u8981\u54ea\u4e9b\u4f9d\u8d56\uff0cIoC\u5bb9\u5668\u5c31\u4f1a\u8d1f\u8d23\u521b\u5efa\u8fd9\u4e9b\u4f9d\u8d56\u7684\u5b9e\u4f8b\uff0c\u5e76\u5728\u5408\u9002\u7684\u65f6\u673a\u5c06\u5b83\u4eec\u6ce8\u5165\u5230\u5bf9\u8c61\u4e2d\u3002</p> <p>\u6240\u4ee5\uff0cIoC\u8fd8\u6709\u4e00\u4e2a\u66f4\u76f4\u89c2\u7684\u540d\u5b57\uff0c\u53eb\u505a\u4f9d\u8d56\u6ce8\u5165\uff08Dependency Injection, DI\uff09\u3002DI\u662f\u5b9e\u73b0IoC\u6700\u4e3b\u8981\u7684\u65b9\u5f0f\u3002</p> <p>IoC\u7684\u6838\u5fc3\u76ee\u7684\u662f\u4e3a\u4e86\u89e3\u8026\u3002\u901a\u8fc7\u5c06\u5bf9\u8c61\u7684\u521b\u5efa\u548c\u4f9d\u8d56\u5173\u7cfb\u7684\u7ba1\u7406\u4ea4\u7ed9\u5bb9\u5668\uff0c\u7ec4\u4ef6\u4e4b\u95f4\u4e0d\u518d\u6709\u786c\u7f16\u7801\u7684\u8054\u7cfb\uff0c\u4f7f\u5f97\u6574\u4e2a\u7cfb\u7edf\u66f4\u52a0\u6a21\u5757\u5316\uff0c\u4ee3\u7801\u4e5f\u66f4\u6613\u4e8e\u8fdb\u884c\u5355\u5143\u6d4b\u8bd5\u548c\u540e\u671f\u7684\u7ef4\u62a4\u4e0e\u5347\u7ea7\u3002</p> <p>Spring\u7684IoC\u529f\u80fd\u662f\u901a\u8fc7\u4e00\u4e2a\u5bb9\u5668\u6765\u5b9e\u73b0\u7684\u3002\u8fd9\u4e2a\u5bb9\u5668\u5728Spring\u4e2d\u4e3b\u8981\u7531\u4e24\u4e2a\u6838\u5fc3\u63a5\u53e3\u6765\u4ee3\u8868\uff1a</p> <ol> <li> <p>BeanFactory:</p> <ul> <li> <p>\u8fd9\u662f\u6700\u57fa\u7840\u3001\u6700\u5e95\u5c42\u7684IoC\u5bb9\u5668\uff0c\u63d0\u4f9b\u4e86IoC\u7684\u6838\u5fc3\u80fd\u529b\uff0c\u5373Bean\u7684\u5b9e\u4f8b\u5316\u3001\u4f9d\u8d56\u6ce8\u5165\u548c\u7ba1\u7406\u3002</p> </li> <li> <p>\u5b83\u91c7\u7528\u61d2\u52a0\u8f7d\uff08Lazy Loading\uff09\u7684\u7b56\u7565\uff0c\u53ea\u6709\u5f53\u5ba2\u6237\u7aef\u4ee3\u7801\u901a\u8fc7<code>getBean()</code>\u65b9\u6cd5\u8bf7\u6c42\u67d0\u4e2aBean\u65f6\uff0c\u5b83\u624d\u4f1a\u53bb\u521b\u5efa\u8fd9\u4e2aBean\u7684\u5b9e\u4f8b\u3002</p> </li> </ul> </li> <li> <p>ApplicationContext:</p> <ul> <li> <p>\u5b83\u662f<code>BeanFactory</code>\u7684\u5b50\u63a5\u53e3\uff0c\u4e5f\u662f\u6211\u4eec\u73b0\u5728\u5b9e\u9645\u5f00\u53d1\u4e2d\u51e0\u4e4e\u552f\u4e00\u4f7f\u7528\u7684IoC\u5bb9\u5668\u3002</p> </li> <li> <p>\u5b83\u5728<code>BeanFactory</code>\u7684\u57fa\u7840\u4e4b\u4e0a\uff0c\u63d0\u4f9b\u4e86\u66f4\u591a\u3001\u66f4\u5f3a\u5927\u7684\u4f01\u4e1a\u7ea7\u529f\u80fd\uff0c\u6bd4\u5982\uff1a</p> <ul> <li> <p>\u66f4\u65b9\u4fbf\u7684\u914d\u7f6e\u6587\u4ef6\u52a0\u8f7d\u65b9\u5f0f\u3002</p> </li> <li> <p>\u652f\u6301\u56fd\u9645\u5316\uff08i18n\uff09\u3002</p> </li> <li> <p>\u7edf\u4e00\u7684\u4e8b\u4ef6\u53d1\u5e03\u4e0e\u76d1\u542c\u673a\u5236\u3002</p> </li> <li> <p>AOP\uff08\u9762\u5411\u5207\u9762\u7f16\u7a0b\uff09\u7684\u96c6\u6210\u3002</p> </li> <li> <p>Web\u73af\u5883\u7684\u96c6\u6210\u7b49\u7b49\u3002</p> </li> </ul> </li> <li> <p>\u4e0e<code>BeanFactory</code>\u4e0d\u540c\uff0c<code>ApplicationContext</code>\u9ed8\u8ba4\u91c7\u7528\u997f\u6c49\u5f0f\u52a0\u8f7d\uff08Eager Loading\uff09\u7684\u7b56\u7565\u3002\u5b83\u4f1a\u5728\u5bb9\u5668\u542f\u52a8\u65f6\uff0c\u5c31\u5c06\u6240\u6709\u975e\u61d2\u52a0\u8f7d\u7684\u5355\u4f8b\uff08Singleton\uff09Bean\u5168\u90e8\u5b9e\u4f8b\u5316\u5e76\u521d\u59cb\u5316\u597d\u3002</p> </li> </ul> </li> </ol> <p>Spring IoC\u5bb9\u5668\u7684\u5b9e\u73b0\u601d\u8def\uff0c\u53ef\u4ee5\u6982\u62ec\u4e3a\u4e00\u5957\u975e\u5e38\u7cbe\u5bc6\u7684\u3001\u57fa\u4e8e\u53cd\u5c04\u548c\u5de5\u5382\u6a21\u5f0f\u7684Bean\u751f\u547d\u5468\u671f\u7ba1\u7406\u6d41\u7a0b\u3002\u8fd9\u4e2a\u6d41\u7a0b\u5927\u81f4\u53ef\u4ee5\u5206\u4e3a\u4ee5\u4e0b\u51e0\u4e2a\u5173\u952e\u6b65\u9aa4\uff1a</p> <p>\u6b65\u9aa4\u4e00\uff1a\u5bb9\u5668\u542f\u52a8\u4e0e\u914d\u7f6e\u5143\u4fe1\u606f\u52a0\u8f7d</p> <ol> <li> <p>\u7a0b\u5e8f\u542f\u52a8\uff0c\u9996\u5148\u4f1a\u521b\u5efa\u4e00\u4e2a<code>ApplicationContext</code>\u7684\u5b9e\u4f8b\uff08\u4f8b\u5982<code>AnnotationConfigApplicationContext</code>\uff09\u3002</p> </li> <li> <p>\u5728\u6784\u9020\u8fc7\u7a0b\u4e2d\uff0c\u5bb9\u5668\u4f1a\u8bfb\u53d6\u6307\u5b9a\u7684\u914d\u7f6e\u5143\u4fe1\u606f\u3002\u8fd9\u4e9b\u4fe1\u606f\u53ef\u4ee5\u6765\u81eaXML\u914d\u7f6e\u6587\u4ef6\u3001\u57fa\u4e8eJava\u7684\u914d\u7f6e\u7c7b\uff08<code>@Configuration</code>\u6ce8\u89e3\uff09\u6216\u8005\u901a\u8fc7\u7ec4\u4ef6\u626b\u63cf\uff08<code>@ComponentScan</code>\uff09\u6765\u53d1\u73b0\u3002</p> </li> </ol> <p>\u6b65\u9aa4\u4e8c\uff1aBean\u5b9a\u4e49\u7684\u89e3\u6790\u4e0e\u6ce8\u518c</p> <ol> <li> <p>\u5bb9\u5668\u4f1a\u542f\u52a8\u4e00\u4e2a\u626b\u63cf\u5668\u6765\u89e3\u6790\u52a0\u8f7d\u5230\u7684\u914d\u7f6e\u4fe1\u606f\u3002\u5b83\u4f1a\u626b\u63cf\u6307\u5b9a\u8def\u5f84\u4e0b\u7684\u6240\u6709\u7c7b\uff0c\u627e\u51fa\u88ab<code>@Component</code>\u3001<code>@Service</code>\u3001<code>@Repository</code>\u3001<code>@Controller</code>\u7b49\u6ce8\u89e3\u6807\u8bb0\u7684\u7c7b\u3002</p> </li> <li> <p>\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7c7b\uff0cSpring\u5e76\u4e0d\u4f1a\u7acb\u5373\u521b\u5efa\u5b83\u7684\u5b9e\u4f8b\uff0c\u800c\u662f\u4f1a\u5c06\u5176\u89e3\u6790\u6210\u4e00\u4e2a\u53eb\u505a<code>BeanDefinition</code>\u7684\u5bf9\u8c61\u3002</p> </li> <li> <p><code>BeanDefinition</code>\u53ef\u4ee5\u7406\u89e3\u4e3a\u662f\u521b\u5efaBean\u7684\u914d\u65b9\u6216\u84dd\u56fe\uff0c\u5b83\u5305\u542b\u4e86\u8fd9\u4e2aBean\u7684\u6240\u6709\u5143\u6570\u636e\uff0c\u6bd4\u5982\u7c7b\u7684\u5168\u9650\u5b9a\u540d\u3001\u4f5c\u7528\u57df\uff08Singleton/Prototype\uff09\u3001\u6784\u9020\u51fd\u6570\u53c2\u6570\u3001\u9700\u8981\u6ce8\u5165\u7684\u5c5e\u6027\u3001\u521d\u59cb\u5316\u65b9\u6cd5\u7b49\u7b49\u3002</p> </li> <li> <p>\u6240\u6709\u89e3\u6790\u51fa\u7684<code>BeanDefinition</code>\u5bf9\u8c61\uff0c\u90fd\u4f1a\u88ab\u6ce8\u518c\u5230\u4e00\u4e2a\u5185\u90e8\u7684\u3001\u7c7b\u578b\u4e3a<code>Map&lt;String, BeanDefinition&gt;</code>\u7684\u96c6\u5408\u4e2d\uff0c\u8fd9\u4e2a\u96c6\u5408\u901a\u5e38\u88ab\u79f0\u4e3a<code>beanDefinitionMap</code>\u3002</p> </li> </ol> <p>\u6b65\u9aa4\u4e09\uff1aBean\u7684\u5b9e\u4f8b\u5316\u4e0e\u521d\u59cb\u5316\uff08Bean\u7684\u751f\u547d\u5468\u671f\uff09</p> <p>\u8fd9\u662f\u6574\u4e2aIoC\u5b9e\u73b0\u6700\u6838\u5fc3\u7684\u90e8\u5206\u3002\u5728ApplicationContext\u4e2d\uff0c\u5bb9\u5668\u4f1a\u904d\u5386beanDefinitionMap\uff0c\u5f00\u59cb\u5b9e\u4f8b\u5316\u6240\u6709\u5355\u4f8bBean\u3002</p> <p>\u8fd9\u4e2a\u8fc7\u7a0b\u5927\u81f4\u5982\u4e0b\uff1a</p> <ol> <li> <p>\u5b9e\u4f8b\u5316 (Instantiation)\uff1a\u5bb9\u5668\u6839\u636e<code>BeanDefinition</code>\u4e2d\u7684\u7c7b\u4fe1\u606f\uff0c\u901a\u8fc7Java\u7684\u53cd\u5c04\u673a\u5236\uff08<code>Constructor.newInstance()</code>\uff09\u6765\u521b\u5efa\u4e00\u4e2aBean\u7684\u539f\u59cb\u5bf9\u8c61\u5b9e\u4f8b\u3002</p> </li> <li> <p>\u586b\u5145\u5c5e\u6027 (Populate Properties)\uff1a\u4e5f\u5c31\u662f\u4f9d\u8d56\u6ce8\u5165\u3002\u5bb9\u5668\u4f1a\u68c0\u67e5<code>BeanDefinition</code>\u4e2d\u5b9a\u4e49\u7684\u4f9d\u8d56\u5173\u7cfb\uff08\u6bd4\u5982\u5e26\u6709<code>@Autowired</code>\u6ce8\u89e3\u7684\u5b57\u6bb5\u6216\u65b9\u6cd5\uff09\uff0c\u7136\u540e\u4ece\u5bb9\u5668\u4e2d\u83b7\u53d6\u88ab\u4f9d\u8d56\u7684Bean\uff08\u5982\u679c\u88ab\u4f9d\u8d56\u7684Bean\u8fd8\u6ca1\u521b\u5efa\uff0c\u4f1a\u5148\u53bb\u521b\u5efa\u5b83\uff09\uff0c\u518d\u901a\u8fc7\u53cd\u5c04\u5c06\u4f9d\u8d56\u6ce8\u5165\u5230\u521a\u521a\u521b\u5efa\u7684Bean\u5b9e\u4f8b\u4e2d\u3002</p> </li> <li> <p>Aware\u63a5\u53e3\u56de\u8c03\uff1a\u5982\u679cBean\u5b9e\u73b0\u4e86\u5404\u79cd<code>Aware</code>\u63a5\u53e3\uff08\u5982<code>BeanNameAware</code>, <code>ApplicationContextAware</code>\uff09\uff0cSpring\u4f1a\u8c03\u7528\u8fd9\u4e9b\u63a5\u53e3\u7684\u65b9\u6cd5\uff0c\u5c06\u76f8\u5e94\u7684\u8d44\u6e90\uff08\u5982Bean\u7684\u540d\u5b57\u3001\u5bb9\u5668\u5b9e\u4f8b\u7b49\uff09\u4f20\u9012\u7ed9Bean\u3002</p> </li> <li> <p>BeanPostProcessor\u524d\u7f6e\u5904\u7406\uff1a\u5728Bean\u7684\u521d\u59cb\u5316\u65b9\u6cd5\u88ab\u8c03\u7528\u4e4b\u524d\uff0c\u5bb9\u5668\u4f1a\u8c03\u7528\u6240\u6709\u5df2\u6ce8\u518c\u7684<code>BeanPostProcessor</code>\u7684<code>postProcessBeforeInitialization</code>\u65b9\u6cd5\uff0c\u5141\u8bb8\u6211\u4eec\u5bf9Bean\u8fdb\u884c\u81ea\u5b9a\u4e49\u7684\u4fee\u6539\u3002</p> </li> <li> <p>\u521d\u59cb\u5316 (Initialization)\uff1a\u5bb9\u5668\u4f1a\u8c03\u7528Bean\u81ea\u8eab\u7684\u521d\u59cb\u5316\u903b\u8f91\u3002\u8fd9\u4e3b\u8981\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a\u4e00\u79cd\u662f\u6267\u884c<code>InitializingBean</code>\u63a5\u53e3\u7684<code>afterPropertiesSet</code>\u65b9\u6cd5\uff1b\u53e6\u4e00\u79cd\u662f\u6267\u884c\u5728<code>@Bean</code>\u6ce8\u89e3\u6216XML\u4e2d\u6307\u5b9a\u7684<code>init-method</code>\u3002</p> </li> <li> <p>BeanPostProcessor\u540e\u7f6e\u5904\u7406\uff1a\u5728Bean\u521d\u59cb\u5316\u5b8c\u6210\u4e4b\u540e\uff0c\u5bb9\u5668\u4f1a\u8c03\u7528\u6240\u6709<code>BeanPostProcessor</code>\u7684<code>postProcessAfterInitialization</code>\u65b9\u6cd5\u3002\u8fd9\u4e00\u6b65\u975e\u5e38\u5173\u952e\uff0cSpring\u7684AOP\u529f\u80fd\u5c31\u662f\u901a\u8fc7\u8fd9\u4e2a\u6b65\u9aa4\u5b9e\u73b0\u7684\u3002\u5982\u679c\u4e00\u4e2aBean\u9700\u8981\u88abAOP\u4ee3\u7406\uff0c\u90a3\u4e48\u8fd9\u4e2a\u540e\u7f6e\u5904\u7406\u5668\u5c31\u4f1a\u8fd4\u56de\u4e00\u4e2a\u8be5Bean\u7684\u4ee3\u7406\u5bf9\u8c61\uff0c\u800c\u4e0d\u662f\u539f\u59cb\u5bf9\u8c61\u3002</p> </li> <li> <p>\u6ce8\u518c\u5230\u5355\u4f8b\u6c60\uff1a\u7ecf\u8fc7\u4ee5\u4e0a\u6240\u6709\u6b65\u9aa4\u540e\uff0c\u4e00\u4e2a\u5b8c\u6574\u3001\u53ef\u7528\u7684Bean\u5c31\u8bde\u751f\u4e86\u3002\u5b83\uff08\u6216\u8005\u5b83\u7684\u4ee3\u7406\u5bf9\u8c61\uff09\u4f1a\u88ab\u653e\u5165\u5230\u4e00\u4e2a\u5355\u4f8b\u7f13\u5b58\u6c60\uff08<code>singletonObjects</code>\uff09\u4e2d\uff0c\u4ee5\u4f9b\u540e\u7eed\u7684\u6ce8\u5165\u6216\u7a0b\u5e8f\u8c03\u7528\u3002</p> </li> </ol> <p>\u901a\u8fc7\u8fd9\u6837\u4e00\u5957\u4e25\u8c28\u7684\u751f\u547d\u5468\u671f\u7ba1\u7406\u6d41\u7a0b\uff0cSpring IoC\u5bb9\u5668\u7cbe\u786e\u5730\u63a7\u5236\u4e86\u6240\u6709\u5bf9\u8c61\u7684\u521b\u5efa\u3001\u4f9d\u8d56\u5173\u7cfb\u7684\u6ce8\u5165\u4ee5\u53ca\u521d\u59cb\u5316\uff0c\u5b8c\u7f8e\u5730\u5b9e\u73b0\u4e86\u63a7\u5236\u53cd\u8f6c\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/Spring%20aop%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%8C%20%E6%9C%89%E5%93%AA%E4%BA%9B%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/","title":"Spring aop\u662f\u4ec0\u4e48\uff0c \u6709\u54ea\u4e9b\u5e94\u7528\u573a\u666f","text":""},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/Spring%20aop%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%8C%20%E6%9C%89%E5%93%AA%E4%BA%9B%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/#spring-aop","title":"\u4ec0\u4e48\u662fSpring AOP","text":"<p>Spring AOP (Aspect-Oriented Programming) \u5373\u9762\u5411\u5207\u9762\u7f16\u7a0b\uff0c\u662f\u4e00\u79cd\u7f16\u7a0b\u8303\u5f0f\uff0c\u65e8\u5728\u901a\u8fc7\u5206\u79bb\u6a2a\u5207\u5173\u6ce8\u70b9\u6765\u589e\u52a0\u7a0b\u5e8f\u7684\u6a21\u5757\u5316\u7a0b\u5ea6\u3002 \u6a2a\u5207\u5173\u6ce8\u70b9\u662f\u6307\u90a3\u4e9b\u5206\u6563\u5728\u5e94\u7528\u4e2d\u591a\u4e2a\u6a21\u5757\u7684\u529f\u80fd\uff0c\u4f8b\u5982\u65e5\u5fd7\u8bb0\u5f55\u3001\u4e8b\u52a1\u7ba1\u7406\u3001\u5b89\u5168\u63a7\u5236\u7b49\u3002 AOP\u901a\u8fc7\u5c06\u8fd9\u4e9b\u901a\u7528\u529f\u80fd\u4ece\u4e1a\u52a1\u903b\u8f91\u4ee3\u7801\u4e2d\u5206\u79bb\u51fa\u6765\uff0c\u4f7f\u5f97\u5f00\u53d1\u8005\u53ef\u4ee5\u4e13\u6ce8\u4e8e\u6838\u5fc3\u4e1a\u52a1\u903b\u8f91\uff0c\u4ece\u800c\u964d\u4f4e\u4ee3\u7801\u7684\u8026\u5408\u5ea6\uff0c\u63d0\u9ad8\u4ee3\u7801\u7684\u53ef\u7ef4\u62a4\u6027\u548c\u53ef\u91cd\u7528\u6027\u3002</p> <p>\u5728\u4f20\u7edf\u7684\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b (OOP) \u4e2d\uff0c\u6211\u4eec\u5c06\u7a0b\u5e8f\u5206\u89e3\u4e3a\u4e00\u4e2a\u4e2a\u7684\u5bf9\u8c61\uff0c\u800cAOP\u5219\u662f\u5bf9OOP\u7684\u8865\u5145\uff0c\u5b83\u5141\u8bb8\u6211\u4eec\u5c06\u6a2a\u5207\u5173\u6ce8\u70b9\u6a21\u5757\u5316\u4e3a\u201c\u5207\u9762 (Aspect)\u201d\u3002 Spring AOP\u662f\u57fa\u4e8e\u4ee3\u7406\u6a21\u5f0f\u5b9e\u73b0\u7684\uff0c\u5728\u8fd0\u884c\u65f6\u4e3a\u76ee\u6807\u5bf9\u8c61\u521b\u5efa\u4e00\u4e2a\u4ee3\u7406\u5bf9\u8c61\uff0c\u901a\u8fc7\u8fd9\u4e2a\u4ee3\u7406\u5bf9\u8c61\u6765\u62e6\u622a\u65b9\u6cd5\u7684\u8c03\u7528\uff0c\u5e76\u5728\u65b9\u6cd5\u7684\u6267\u884c\u524d\u540e\u7ec7\u5165\u76f8\u5e94\u7684\u589e\u5f3a\u5904\u7406 (Advice)\u3002</p> <p>AOP\u7684\u6838\u5fc3\u6982\u5ff5\u5305\u62ec\uff1a</p> <ul> <li>\u5207\u9762 (Aspect): \u5bf9\u6a2a\u5207\u5173\u6ce8\u70b9\u7684\u4e00\u79cd\u6a21\u5757\u5316\u5c01\u88c5\u3002 \u6bd4\u5982\uff0c\u4e00\u4e2a\u7528\u4e8e\u65e5\u5fd7\u8bb0\u5f55\u7684\u7c7b\u5c31\u662f\u4e00\u4e2a\u5207\u9762\u3002</li> <li>\u8fde\u63a5\u70b9 (Join Point): \u7a0b\u5e8f\u6267\u884c\u8fc7\u7a0b\u4e2d\u7684\u4e00\u4e2a\u7279\u5b9a\u70b9\uff0c\u6bd4\u5982\u65b9\u6cd5\u7684\u8c03\u7528\u6216\u5f02\u5e38\u7684\u629b\u51fa\u3002 \u5728Spring AOP\u4e2d\uff0c\u8fde\u63a5\u70b9\u901a\u5e38\u6307\u7684\u5c31\u662f\u65b9\u6cd5\u7684\u6267\u884c\u3002</li> <li>\u901a\u77e5 (Advice): \u5728\u5207\u9762\u7684\u7279\u5b9a\u8fde\u63a5\u70b9\u4e0a\u6267\u884c\u7684\u52a8\u4f5c\u3002 \u901a\u77e5\u7684\u7c7b\u578b\u5305\u62ec\u524d\u7f6e\u901a\u77e5 (Before)\u3001\u540e\u7f6e\u901a\u77e5 (After)\u3001\u73af\u7ed5\u901a\u77e5 (Around)\u3001\u8fd4\u56de\u540e\u901a\u77e5 (After-returning) \u548c\u5f02\u5e38\u540e\u901a\u77e5 (After-throwing)\u3002</li> <li>\u5207\u5165\u70b9 (Pointcut): \u7528\u4e8e\u5339\u914d\u8fde\u63a5\u70b9\u7684\u8868\u8fbe\u5f0f\uff0c\u5b83\u5b9a\u4e49\u4e86\u901a\u77e5\u5e94\u8be5\u4f5c\u7528\u4e8e\u54ea\u4e9b\u65b9\u6cd5\u7684\u8c03\u7528\u4e0a\u3002</li> <li>\u76ee\u6807\u5bf9\u8c61 (Target Object): \u88ab\u4e00\u4e2a\u6216\u591a\u4e2a\u5207\u9762\u6240\u901a\u77e5\u7684\u5bf9\u8c61\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/Spring%20aop%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%8C%20%E6%9C%89%E5%93%AA%E4%BA%9B%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/#spring-aop_1","title":"Spring AOP\u7684\u5e94\u7528\u573a\u666f","text":"<p>Spring AOP\u7684\u5e94\u7528\u975e\u5e38\u5e7f\u6cdb\uff0c\u4e3b\u8981\u7528\u4e8e\u5904\u7406\u90a3\u4e9b\u4e0e\u6838\u5fc3\u4e1a\u52a1\u903b\u8f91\u5173\u7cfb\u4e0d\u5927\uff0c\u4f46\u53c8\u666e\u904d\u5b58\u5728\u4e8e\u591a\u4e2a\u6a21\u5757\u4e2d\u7684\u901a\u7528\u529f\u80fd\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5178\u578b\u7684\u5e94\u7528\u573a\u666f\uff1a</p> <ul> <li>\u65e5\u5fd7\u8bb0\u5f55: \u8fd9\u662fAOP\u6700\u5e38\u89c1\u7684\u5e94\u7528\u4e4b\u4e00\u3002\u901a\u8fc7AOP\u53ef\u4ee5\u5728\u4e0d\u4fb5\u5165\u4e1a\u52a1\u4ee3\u7801\u7684\u60c5\u51b5\u4e0b\uff0c\u7edf\u4e00\u8bb0\u5f55\u65b9\u6cd5\u7684\u5165\u53c2\u3001\u8fd4\u56de\u503c\u3001\u6267\u884c\u65f6\u95f4\u4ee5\u53ca\u5f02\u5e38\u4fe1\u606f\uff0c\u4fbf\u4e8e\u95ee\u9898\u6392\u67e5\u548c\u7cfb\u7edf\u76d1\u63a7\u3002</li> <li>\u4e8b\u52a1\u7ba1\u7406: Spring\u7684\u58f0\u660e\u5f0f\u4e8b\u52a1\u7ba1\u7406\u662fAOP\u7684\u4e00\u4e2a\u91cd\u8981\u5e94\u7528\u3002 \u5f00\u53d1\u8005\u53ea\u9700\u901a\u8fc7\u6ce8\u89e3\uff08\u5982@Transactional\uff09\u58f0\u660e\u4e8b\u52a1\u7684\u8fb9\u754c\uff0cSpring AOP\u5c31\u4f1a\u81ea\u52a8\u5728\u65b9\u6cd5\u6267\u884c\u524d\u540e\u5f00\u542f\u3001\u63d0\u4ea4\u6216\u56de\u6eda\u4e8b\u52a1\uff0c\u6781\u5927\u5730\u7b80\u5316\u4e86\u4e8b\u52a1\u7ba1\u7406\u7684\u4ee3\u7801\u3002</li> <li>\u6743\u9650\u63a7\u5236: \u5728\u65b9\u6cd5\u6267\u884c\u524d\uff0c\u901a\u8fc7AOP\u53ef\u4ee5\u8fdb\u884c\u7edf\u4e00\u7684\u6743\u9650\u6821\u9a8c\uff0c\u5224\u65ad\u5f53\u524d\u7528\u6237\u662f\u5426\u5177\u6709\u6267\u884c\u8be5\u64cd\u4f5c\u7684\u6743\u9650\uff0c\u4ece\u800c\u5c06\u6743\u9650\u63a7\u5236\u903b\u8f91\u4e0e\u4e1a\u52a1\u903b\u8f91\u89e3\u8026\u3002</li> <li>\u6027\u80fd\u76d1\u63a7: \u5229\u7528AOP\u7684\u73af\u7ed5\u901a\u77e5\uff0c\u53ef\u4ee5\u65b9\u4fbf\u5730\u7edf\u8ba1\u65b9\u6cd5\u7684\u6267\u884c\u8017\u65f6\uff0c\u76d1\u63a7\u7cfb\u7edf\u6027\u80fd\uff0c\u53ca\u65f6\u53d1\u73b0\u6027\u80fd\u74f6\u9888\u3002</li> <li>\u7f13\u5b58\u7ba1\u7406: \u5728\u65b9\u6cd5\u6267\u884c\u524d\u68c0\u67e5\u7f13\u5b58\uff0c\u5982\u679c\u6570\u636e\u5df2\u5b58\u5728\uff0c\u5219\u76f4\u63a5\u8fd4\u56de\u7f13\u5b58\u7ed3\u679c\uff0c\u907f\u514d\u91cd\u590d\u67e5\u8be2\u6570\u636e\u5e93\u6216\u8fdb\u884c\u590d\u6742\u8ba1\u7b97\uff0c\u4ece\u800c\u63d0\u5347\u7cfb\u7edf\u6027\u80fd\u3002</li> <li>\u5f02\u5e38\u5904\u7406: \u901a\u8fc7AOP\u53ef\u4ee5\u5b9e\u73b0\u7edf\u4e00\u7684\u5f02\u5e38\u5904\u7406\u673a\u5236\u3002 \u5f53\u65b9\u6cd5\u629b\u51fa\u5f02\u5e38\u65f6\uff0c\u53ef\u4ee5\u8fdb\u884c\u7edf\u4e00\u7684\u65e5\u5fd7\u8bb0\u5f55\u3001\u544a\u8b66\u901a\u77e5\u6216\u8f6c\u6362\u4e3a\u7edf\u4e00\u7684\u5f02\u5e38\u7c7b\u578b\u8fd4\u56de\u7ed9\u8c03\u7528\u65b9\u3002</li> <li>\u63a5\u53e3\u5e42\u7b49\u6027\u5904\u7406: \u5728\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\uff0c\u4e3a\u4e86\u9632\u6b62\u91cd\u590d\u63d0\u4ea4\uff0c\u53ef\u4ee5\u901a\u8fc7AOP\u7ed3\u5408\u81ea\u5b9a\u4e49\u6ce8\u89e3\uff0c\u5728\u65b9\u6cd5\u6267\u884c\u524d\u8fdb\u884c\u8bf7\u6c42\u552f\u4e00\u6027\u6821\u9a8c\uff0c\u4fdd\u8bc1\u63a5\u53e3\u7684\u5e42\u7b49\u6027\u3002</li> <li>\u63a5\u53e3\u9650\u6d41: \u4e3a\u4e86\u4fdd\u62a4\u7cfb\u7edf\u4e0d\u88ab\u9ad8\u5e76\u53d1\u8bf7\u6c42\u51b2\u57ae\uff0c\u53ef\u4ee5\u5229\u7528AOP\u5728\u65b9\u6cd5\u6267\u884c\u524d\u5bf9\u8bf7\u6c42\u8fdb\u884c\u8ba1\u6570\u548c\u9891\u7387\u5224\u65ad\uff0c\u5b9e\u73b0\u63a5\u53e3\u9650\u6d41\u529f\u80fd\u3002</li> <li>\u52a8\u6001\u6570\u636e\u6e90\u5207\u6362: \u5728\u9700\u8981\u8fde\u63a5\u591a\u4e2a\u6570\u636e\u5e93\u7684\u573a\u666f\u4e0b\uff0c\u53ef\u4ee5\u901a\u8fc7AOP\u548c\u81ea\u5b9a\u4e49\u6ce8\u89e3\uff0c\u5728\u65b9\u6cd5\u6267\u884c\u524d\u52a8\u6001\u5730\u5207\u6362\u6570\u636e\u6e90\uff0c\u5b9e\u73b0\u5bf9\u4e1a\u52a1\u4ee3\u7801\u7684\u96f6\u4fb5\u5165\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/Spring%E7%9A%84%E4%B8%89%E7%BA%A7%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6%E6%98%AF%E4%BB%80%E4%B9%88/","title":"Spring\u7684\u4e09\u7ea7\u7f13\u5b58\u673a\u5236\u662f\u4ec0\u4e48","text":"<p>Spring\u7684\u4e09\u7ea7\u7f13\u5b58\u673a\u5236\uff0c\u662fSpring\u6846\u67b6\u4e3a\u4e86\u89e3\u51b3\u5728\u5355\u4f8b\uff08Singleton\uff09\u6a21\u5f0f\u4e0bBean\u4e4b\u95f4\u201c\u5faa\u73af\u4f9d\u8d56\u201d\u95ee\u9898\u800c\u8bbe\u8ba1\u7684\u4e00\u5957\u89e3\u51b3\u65b9\u6848\u3002</p> <p>\u5faa\u73af\u4f9d\u8d56\uff0c\u7b80\u5355\u6765\u8bf4\uff0c\u5c31\u662f\u4e24\u4e2a\u6216\u591a\u4e2aBean\u4e4b\u95f4\u76f8\u4e92\u6301\u6709\u5bf9\u65b9\u7684\u5f15\u7528\uff0c\u5f62\u6210\u4e86\u4e00\u4e2a\u95ed\u73af\u3002\u4f8b\u5982\uff0cA\u5bf9\u8c61\u4f9d\u8d56B\u5bf9\u8c61\uff0c\u540c\u65f6B\u5bf9\u8c61\u4e5f\u4f9d\u8d56A\u5bf9\u8c61\u3002\u5728\u6ca1\u6709\u7279\u6b8a\u5904\u7406\u7684\u60c5\u51b5\u4e0b\uff0cSpring\u5728\u521b\u5efaA\u5bf9\u8c61\u7684\u8fc7\u7a0b\u4e2d\u53d1\u73b0\u5b83\u9700\u8981B\u5bf9\u8c61\uff0c\u4e8e\u662f\u53bb\u521b\u5efaB\u5bf9\u8c61\uff1b\u5728\u521b\u5efaB\u5bf9\u8c61\u7684\u8fc7\u7a0b\u4e2d\u53c8\u53d1\u73b0\u5b83\u9700\u8981A\u5bf9\u8c61\uff0c\u6b64\u65f6A\u5bf9\u8c61\u8fd8\u5728\u521b\u5efa\u8fc7\u7a0b\u4e2d\uff0c\u5c1a\u672a\u5b8c\u6210\uff0c\u8fd9\u5c31\u9677\u5165\u4e86\u4e00\u4e2a\u6b7b\u5faa\u73af\uff0c\u5bfc\u81f4\u7a0b\u5e8f\u65e0\u6cd5\u6b63\u5e38\u542f\u52a8\u3002</p> <p>Spring\u7684\u4e09\u7ea7\u7f13\u5b58\u6b63\u662f\u4e3a\u4e86\u6253\u7834\u8fd9\u4e2a\u5faa\u73af\uff0c\u4f7f\u5f97\u5728\u7279\u5b9a\u6761\u4ef6\u4e0b\uff08\u5355\u4f8b\u3001\u5c5e\u6027\u6ce8\u5165\uff09\u7684\u5faa\u73af\u4f9d\u8d56\u95ee\u9898\u80fd\u591f\u88ab\u4f18\u96c5\u5730\u89e3\u51b3\u3002\u9700\u8981\u5f3a\u8c03\u7684\u662f\uff0c\u5b83\u65e0\u6cd5\u89e3\u51b3\u6784\u9020\u5668\u6ce8\u5165\u7684\u5faa\u73af\u4f9d\u8d56\uff0c\u4e5f\u65e0\u6cd5\u89e3\u51b3\u591a\u4f8b\uff08Prototype\uff09\u6a21\u5f0f\u4e0b\u7684\u5faa\u73af\u4f9d\u8d56\u3002</p> <p>\u4e09\u7ea7\u7f13\u5b58\u7684\u6784\u6210</p> <p>Spring\u7684\u4e09\u7ea7\u7f13\u5b58\u7531\u4e09\u4e2aMap\u5bf9\u8c61\u7ec4\u6210\uff0c\u5b83\u4eec\u5728<code>DefaultSingletonBeanRegistry</code>\u7c7b\u4e2d\u5b9a\u4e49\uff1a</p> <ol> <li> <p>\u7b2c\u4e00\u7ea7\u7f13\u5b58: <code>singletonObjects</code></p> <ul> <li> <p>\u7c7b\u578b: <code>Map&lt;String, Object&gt;</code></p> </li> <li> <p>\u4f5c\u7528: \u8fd9\u662f\u4e00\u4e2a\u5b8c\u6574\u7684\u5355\u4f8b\u6c60\uff0c\u7528\u4e8e\u5b58\u653e\u5df2\u7ecf\u7ecf\u5386\u4e86\u5b8c\u6574\u751f\u547d\u5468\u671f\u7684Bean\u5b9e\u4f8b\uff08\u5373\u5df2\u7ecf\u5b9e\u4f8b\u5316\u3001\u5c5e\u6027\u586b\u5145\u3001\u521d\u59cb\u5316\u90fd\u5df2\u5b8c\u6210\uff09\u3002\u6211\u4eec\u5e73\u65f6\u901a\u8fc7<code>getBean()</code>\u65b9\u6cd5\u83b7\u53d6\u5230\u7684\u5bf9\u8c61\uff0c\u7edd\u5927\u591a\u6570\u90fd\u662f\u4ece\u8fd9\u4e2a\u7f13\u5b58\u4e2d\u76f4\u63a5\u8fd4\u56de\u7684\u3002\u5b83\u4e5f\u88ab\u79f0\u4e3a\u201c\u5355\u4f8b\u6c60\u201d\u6216\u201c\u6210\u54c1\u7f13\u5b58\u201d\u3002</p> </li> </ul> </li> <li> <p>\u7b2c\u4e8c\u7ea7\u7f13\u5b58: <code>earlySingletonObjects</code></p> <ul> <li> <p>\u7c7b\u578b: <code>Map&lt;String, Object&gt;</code></p> </li> <li> <p>\u4f5c\u7528: \u7528\u4e8e\u5b58\u653e\u201c\u534a\u6210\u54c1\u201d\u7684Bean\u5b9e\u4f8b\u3002\u8fd9\u91cc\u7684\u201c\u534a\u6210\u54c1\u201d\u6307\u7684\u662f\u5df2\u7ecf\u5b8c\u6210\u4e86\u5b9e\u4f8b\u5316\uff08\u5373\u901a\u8fc7\u6784\u9020\u51fd\u6570\u521b\u5efa\u4e86\u5bf9\u8c61\uff09\uff0c\u4f46\u5c1a\u672a\u8fdb\u884c\u5c5e\u6027\u586b\u5145\u548c\u521d\u59cb\u5316\u7684Bean\u3002\u5c06\u8fd9\u4e2a\u9636\u6bb5\u7684\u5bf9\u8c61\u63d0\u524d\u66b4\u9732\u51fa\u6765\uff0c\u662f\u4e3a\u4e86\u89e3\u51b3\u5faa\u73af\u4f9d\u8d56\u3002\u5b83\u4e5f\u88ab\u79f0\u4e3a\u201c\u534a\u6210\u54c1\u7f13\u5b58\u201d\u3002</p> </li> </ul> </li> <li> <p>\u7b2c\u4e09\u7ea7\u7f13\u5b58: <code>singletonFactories</code></p> <ul> <li> <p>\u7c7b\u578b: <code>Map&lt;String, ObjectFactory&lt;?&gt;&gt;</code></p> </li> <li> <p>\u4f5c\u7528: \u8fd9\u662f\u4e00\u4e2a\u201c\u5355\u4f8b\u5de5\u5382\u201d\u7f13\u5b58\u3002\u5b83\u5b58\u653e\u7684\u4e0d\u662fBean\u7684\u5b9e\u4f8b\uff0c\u800c\u662f\u4e00\u4e2a\u80fd\u591f\u521b\u5efaBean\u5b9e\u4f8b\u7684\u5de5\u5382\u5bf9\u8c61\uff08<code>ObjectFactory</code>\uff09\u3002\u5f53\u4e00\u4e2aBean\u88ab\u521b\u5efa\u4e14\u652f\u6301\u5faa\u73af\u4f9d\u8d56\u65f6\uff0cSpring\u4f1a\u63d0\u524d\u751f\u6210\u4e00\u4e2a\u8be5Bean\u7684<code>ObjectFactory</code>\u5e76\u653e\u5165\u4e09\u7ea7\u7f13\u5b58\u3002\u8fd9\u4e2a\u5de5\u5382\u7684\u4e3b\u8981\u4f5c\u7528\u662f\uff0c\u5f53\u5176\u4ed6Bean\u9700\u8981\u4f9d\u8d56\u8fd9\u4e2a\u5c1a\u672a\u5b8c\u5168\u521b\u5efa\u7684Bean\u65f6\uff0c\u901a\u8fc7\u8c03\u7528\u8fd9\u4e2a\u5de5\u5382\u7684<code>getObject()</code>\u65b9\u6cd5\u6765\u83b7\u53d6\u4e00\u4e2a\u201c\u534a\u6210\u54c1\u201d\u7684Bean\u5b9e\u4f8b\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u662f\u83b7\u53d6\u65e9\u671f\u5f15\u7528\u7684\u5173\u952e\uff0c\u7279\u522b\u662f\u5f53Bean\u9700\u8981\u88abAOP\u4ee3\u7406\u65f6\uff0c\u5de5\u5382\u4f1a\u8fd4\u56de\u4ee3\u7406\u5bf9\u8c61\u800c\u4e0d\u662f\u539f\u59cb\u5bf9\u8c61\u3002</p> </li> </ul> </li> </ol> <p>\u4e09\u7ea7\u7f13\u5b58\u89e3\u51b3\u5faa\u73af\u4f9d\u8d56\u7684\u6d41\u7a0b</p> <p>\u6211\u4eec\u4ee5\u4e00\u4e2a\u6700\u7b80\u5355\u7684\u4f8b\u5b50\u6765\u8bf4\u660e\uff1aBean A\u4f9d\u8d56Bean B\uff0c\u540c\u65f6Bean B\u4e5f\u4f9d\u8d56Bean A\u3002</p> <ol> <li> <p>\u521b\u5efaA:</p> <ul> <li> <p><code>getBean(\"a\")</code>\u88ab\u8c03\u7528\uff0cSpring\u5f00\u59cb\u521b\u5efaBean A\u3002</p> </li> <li> <p>\u9996\u5148\u68c0\u67e5\u4e00\u7ea7\u7f13\u5b58<code>singletonObjects</code>\uff0c\u6ca1\u6709A\u3002\u68c0\u67e5\u4e8c\u7ea7\u7f13\u5b58<code>earlySingletonObjects</code>\uff0c\u4e5f\u6ca1\u6709A\u3002</p> </li> <li> <p>Spring\u51c6\u5907\u5b9e\u4f8b\u5316A\u3002\u5728\u5b9e\u4f8b\u5316\u4e4b\u524d\uff0c\u5b83\u4f1a\u8bb0\u5f55\"a\"\u6b63\u5728\u521b\u5efa\u4e2d\u3002</p> </li> <li> <p>A\u901a\u8fc7\u6784\u9020\u51fd\u6570\u88ab\u5b9e\u4f8b\u5316\uff0c\u6b64\u65f6\u5f97\u5230\u4e86\u4e00\u4e2aA\u7684\u539f\u59cb\u5bf9\u8c61\uff08\u4f46\u5c5e\u6027b\u8fd8\u662fnull\uff09\u3002</p> </li> <li> <p>\u5173\u952e\u4e00\u6b65\uff1aSpring\u5e76\u4e0d\u4f1a\u7acb\u5373\u53bb\u586b\u5145\u5c5e\u6027\uff0c\u800c\u662f\u4e3aA\u521b\u5efa\u4e00\u4e2a<code>ObjectFactory</code>\uff0c\u5e76\u5c06\u5176\u5b58\u5165\u4e09\u7ea7\u7f13\u5b58<code>singletonFactories</code>\u4e2d\u3002<code>singletonFactories.put(\"a\", () -&gt; getEarlyBeanReference(\"a\", mbd, A))</code>\u3002\u8fd9\u4e2a\u5de5\u5382\u7684<code>getObject</code>\u65b9\u6cd5\u5728\u88ab\u8c03\u7528\u65f6\uff0c\u53ef\u80fd\u4f1a\u8fd4\u56deA\u7684\u539f\u59cb\u5bf9\u8c61\uff0c\u6216\u8005\u5982\u679cA\u9700\u8981\u88ab\u4ee3\u7406\uff0c\u5219\u8fd4\u56deA\u7684\u4ee3\u7406\u5bf9\u8c61\u3002</p> </li> <li> <p>\u63a5\u7740\uff0cSpring\u5f00\u59cb\u4e3aA\u7684\u5b9e\u4f8b\u8fdb\u884c\u5c5e\u6027\u586b\u5145\u3002\u5b83\u53d1\u73b0A\u4f9d\u8d56\u4e8e\u5c5e\u6027b\u3002</p> </li> </ul> </li> <li> <p>\u521b\u5efaB:</p> <ul> <li> <p>Spring\u5c1d\u8bd5\u53bb\u83b7\u53d6Bean B\uff0c\u8c03\u7528<code>getBean(\"b\")</code>\u3002</p> </li> <li> <p>\u540c\u6837\uff0c\u68c0\u67e5\u4e00\u3001\u4e8c\u7ea7\u7f13\u5b58\uff0c\u90fd\u627e\u4e0d\u5230B\u3002</p> </li> <li> <p>B\u901a\u8fc7\u6784\u9020\u51fd\u6570\u88ab\u5b9e\u4f8b\u5316\uff0c\u5f97\u5230\u4e00\u4e2aB\u7684\u539f\u59cb\u5bf9\u8c61\uff08\u4f46\u5c5e\u6027a\u8fd8\u662fnull\uff09\u3002</p> </li> <li> <p>\u548cA\u4e00\u6837\uff0cSpring\u4e3aB\u4e5f\u521b\u5efa\u4e00\u4e2a<code>ObjectFactory</code>\u5e76\u653e\u5165\u4e09\u7ea7\u7f13\u5b58<code>singletonFactories</code>\u3002</p> </li> <li> <p>Spring\u5f00\u59cb\u4e3aB\u7684\u5b9e\u4f8b\u8fdb\u884c\u5c5e\u6027\u586b\u5145\uff0c\u53d1\u73b0B\u4f9d\u8d56\u4e8e\u5c5e\u6027a\u3002</p> </li> </ul> </li> <li> <p>\u89e3\u51b3\u4f9d\u8d56:</p> <ul> <li> <p>Spring\u5c1d\u8bd5\u83b7\u53d6Bean A\uff0c\u8c03\u7528<code>getBean(\"a\")</code>\u3002</p> </li> <li> <p>\u6b64\u65f6\uff0cSpring\u53d1\u73b0\"a\"\u6b63\u5728\u521b\u5efa\u4e2d\u3002</p> </li> <li> <p>\u5b83\u4f1a\u5148\u53bb\u4e00\u7ea7\u7f13\u5b58\u627e\uff0c\u6ca1\u6709\u3002</p> </li> <li> <p>\u7136\u540e\u53bb\u4e8c\u7ea7\u7f13\u5b58\u627e\uff0c\u4f9d\u7136\u6ca1\u6709\u3002</p> </li> <li> <p>\u6700\u540e\u53bb\u4e09\u7ea7\u7f13\u5b58<code>singletonFactories</code>\u67e5\u627e\u3002\u6210\u529f\u627e\u5230\u4e86\u521b\u5efaA\u7684<code>ObjectFactory</code>\u3002</p> </li> <li> <p>Spring\u8c03\u7528\u8fd9\u4e2a\u5de5\u5382\u7684<code>getObject()</code>\u65b9\u6cd5\u3002\u8fd9\u4e2a\u65b9\u6cd5\u4f1a\u6267\u884c\uff0c\u53ef\u80fd\u8fd4\u56deA\u7684\u539f\u59cb\u5bf9\u8c61\uff0c\u6216\u8005\u5982\u679c\u9700\u8981AOP\uff0c\u5219\u8fd4\u56deA\u7684\u4ee3\u7406\u5bf9\u8c61\u3002\u6211\u4eec\u79f0\u8fd9\u4e2a\u8fd4\u56de\u7684\u5bf9\u8c61\u4e3aA\u7684\u201c\u65e9\u671f\u5f15\u7528\u201d\u6216\u201c\u534a\u6210\u54c1\u201d\u3002</p> </li> <li> <p>\u83b7\u53d6\u5230A\u7684\u65e9\u671f\u5f15\u7528\u540e\uff0cSpring\u4f1a\u505a\u4e24\u4ef6\u4e8b\uff1a</p> <ul> <li> <p>\u5c06\u8fd9\u4e2a\u65e9\u671f\u5f15\u7528\u653e\u5165\u4e8c\u7ea7\u7f13\u5b58<code>earlySingletonObjects</code>\u4e2d\u3002</p> </li> <li> <p>\u4ece\u4e09\u7ea7\u7f13\u5b58<code>singletonFactories</code>\u4e2d\u79fb\u9664A\u7684\u5de5\u5382\u3002</p> </li> </ul> </li> <li> <p>\u73b0\u5728\uff0cB\u7684\u5c5e\u6027a\u6210\u529f\u88ab\u6ce8\u5165\u4e86A\u7684\u65e9\u671f\u5f15\u7528\u3002</p> </li> <li> <p>B\u7684\u540e\u7eed\u751f\u547d\u5468\u671f\uff08\u521d\u59cb\u5316\u7b49\uff09\u7ee7\u7eed\u8fdb\u884c\uff0c\u76f4\u5230\u5b8c\u6210\u3002</p> </li> <li> <p>B\u4f5c\u4e3a\u4e00\u4e2a\u5b8c\u6574\u7684Bean\uff0c\u88ab\u653e\u5165\u4e00\u7ea7\u7f13\u5b58<code>singletonObjects</code>\u4e2d\u3002</p> </li> </ul> </li> <li> <p>\u5b8c\u6210A\u7684\u521b\u5efa:</p> <ul> <li> <p>Spring\u56de\u5230\u521b\u5efaA\u7684\u6d41\u7a0b\uff0c\u6b64\u65f6\u5df2\u7ecf\u6210\u529f\u83b7\u53d6\u5230\u4e86B\u7684\u5b9e\u4f8b\u3002</p> </li> <li> <p>A\u7684\u5c5e\u6027b\u88ab\u6210\u529f\u6ce8\u5165\u4e86B\u7684\u5b9e\u4f8b\u3002</p> </li> <li> <p>A\u7684\u540e\u7eed\u751f\u547d\u5468\u671f\u7ee7\u7eed\u8fdb\u884c\uff0c\u76f4\u5230\u5b8c\u6210\u3002</p> </li> <li> <p>A\u4f5c\u4e3a\u4e00\u4e2a\u5b8c\u6574\u7684Bean\uff0c\u88ab\u653e\u5165\u4e00\u7ea7\u7f13\u5b58<code>singletonObjects</code>\u4e2d\u3002\u540c\u65f6\uff0c\u5982\u679c\u4e8c\u7ea7\u7f13\u5b58\u4e2d\u6709A\uff0c\u4f1a\u88ab\u6e05\u9664\u3002</p> </li> </ul> </li> </ol> <p>\u81f3\u6b64\uff0cA\u548cB\u7684\u5faa\u73af\u4f9d\u8d56\u88ab\u6210\u529f\u89e3\u51b3\uff0c\u4e24\u8005\u90fd\u6210\u4e3a\u4e86\u529f\u80fd\u5b8c\u6574\u7684Bean\uff0c\u5e76\u88ab\u5b58\u653e\u5728\u4e00\u7ea7\u7f13\u5b58\u4e2d\u3002</p> <p>\u603b\u7ed3\u4e00\u4e0b\uff0c\u4e09\u7ea7\u7f13\u5b58\u7684\u6838\u5fc3\u601d\u60f3\u662f\u201c\u63d0\u524d\u66b4\u9732\u201d\u3002\u5f53\u4e00\u4e2a\u5355\u4f8bBean\u88ab\u521b\u5efa\u4f46\u8fd8\u672a\u5b8c\u6210\u521d\u59cb\u5316\u65f6\uff0c\u5c31\u63d0\u524d\u901a\u8fc7\u4e00\u4e2a<code>ObjectFactory</code>\u5c06\u5b83\u66b4\u9732\u51fa\u53bb\uff0c\u8fd9\u6837\u5176\u4ed6\u4f9d\u8d56\u5b83\u7684Bean\u5c31\u80fd\u63d0\u524d\u62ff\u5230\u5b83\u7684\u5f15\u7528\uff08\u53ef\u80fd\u662f\u539f\u59cb\u5bf9\u8c61\u6216\u4ee3\u7406\u5bf9\u8c61\uff09\uff0c\u4ece\u800c\u6253\u7834\u5faa\u73af\u7b49\u5f85\u7684\u50f5\u5c40\u3002</p> <p>\u5173\u4e8e\u8fd9\u4e2a\u673a\u5236\uff0c\u6211\u8fd8\u53ef\u4ee5\u505a\u4e00\u4e9b\u5ef6\u4f38\u601d\u8003\uff1a</p> <ol> <li> <p>\u4e3a\u4ec0\u4e48\u5fc5\u987b\u662f\u4e09\u7ea7\u7f13\u5b58\uff0c\u4e8c\u7ea7\u7f13\u5b58\u53ef\u4ee5\u5417\uff1f</p> <p>\u8fd9\u662f\u4e00\u4e2a\u7ecf\u5178\u95ee\u9898\u3002\u5982\u679c\u4ec5\u4ec5\u662f\u4e3a\u4e86\u89e3\u51b3\u5faa\u73af\u4f9d\u8d56\uff0c\u4e8c\u7ea7\u7f13\u5b58\uff08\u5b58\u653e\u534a\u6210\u54c1\u5bf9\u8c61\uff09\u786e\u5b9e\u591f\u4e86\u3002\u4f46Spring\u7684\u8bbe\u8ba1\u9700\u8981\u8003\u8651AOP\u3002\u5982\u679c\u4e00\u4e2a\u5bf9\u8c61\u9700\u8981\u88ab\u4ee3\u7406\uff0c\u90a3\u4e48\u6ce8\u5165\u7ed9\u5176\u4ed6\u5bf9\u8c61\u7684\u5e94\u8be5\u662f\u5b83\u7684\u4ee3\u7406\u5bf9\u8c61\uff0c\u800c\u4e0d\u662f\u539f\u59cb\u5bf9\u8c61\u3002\u5982\u679c\u53ea\u7528\u4e8c\u7ea7\u7f13\u5b58\uff0cBean\u5728\u5b9e\u4f8b\u5316\u540e\u5c31\u76f4\u63a5\u653e\u5165\u4e8c\u7ea7\u7f13\u5b58\uff0c\u6b64\u65f6\u653e\u5165\u7684\u662f\u539f\u59cb\u5bf9\u8c61\u3002\u5f53\u540e\u7eedAOP\u751f\u6548\u65f6\uff0c\u521b\u5efa\u4e86\u4ee3\u7406\u5bf9\u8c61\uff0c\u4f46\u4e4b\u524d\u88ab\u5176\u4ed6Bean\u4f9d\u8d56\u6ce8\u5165\u7684\u90a3\u4e2a\u539f\u59cb\u5bf9\u8c61\u5df2\u7ecf\u65e0\u6cd5\u88ab\u66ff\u6362\u4e86\uff0c\u8fd9\u5c31\u4f1a\u5bfc\u81f4\u95ee\u9898\u3002</p> <p>\u4e09\u7ea7\u7f13\u5b58\u901a\u8fc7ObjectFactory\u5ef6\u8fdf\u4e86\u8fd9\u4e00\u8fc7\u7a0b\u3002\u53ea\u6709\u5f53\u8fd9\u4e2aBean\u771f\u7684\u88ab\u5176\u4ed6Bean\u4f9d\u8d56\u65f6\uff0c\u624d\u4f1a\u901a\u8fc7ObjectFactory.getObject()\u53bb\u83b7\u53d6\u3002\u800c\u8fd9\u4e2a\u65b9\u6cd5\u5185\u90e8\u5c01\u88c5\u4e86AOP\u7684\u903b\u8f91\uff0c\u53ef\u4ee5\u5224\u65ad\u662f\u5426\u9700\u8981\u751f\u6210\u4ee3\u7406\u5bf9\u8c61\u3002\u8fd9\u6837\u5c31\u4fdd\u8bc1\u4e86\u6ce8\u5165\u7ed9\u5176\u4ed6Bean\u7684\u5f15\u7528\u4e00\u5b9a\u662f\u6700\u7ec8\u6b63\u786e\u7684\u5f15\u7528\uff08\u4ee3\u7406\u5bf9\u8c61\u6216\u539f\u59cb\u5bf9\u8c61\uff09\uff0c\u800c\u4e0d\u662f\u4e00\u4e2a\u201c\u9519\u8bef\u201d\u7684\u539f\u59cb\u5bf9\u8c61\u3002\u6240\u4ee5\u8bf4\uff0c\u7b2c\u4e09\u7ea7\u7f13\u5b58\uff08singletonFactories\uff09\u662f\u786e\u4fdd\u5728\u5faa\u73af\u4f9d\u8d56\u573a\u666f\u4e0bAOP\u80fd\u591f\u6b63\u786e\u5e94\u7528\u7684\u5173\u952e\u3002</p> </li> <li> <p>\u6784\u9020\u5668\u6ce8\u5165\u4e3a\u4ec0\u4e48\u65e0\u6cd5\u89e3\u51b3\uff1f</p> <p>\u56e0\u4e3a\u6784\u9020\u5668\u6ce8\u5165\u8981\u6c42\u5728\u5bf9\u8c61\u5b9e\u4f8b\u5316\u9636\u6bb5\u5c31\u5fc5\u987b\u63d0\u4f9b\u6240\u6709\u4f9d\u8d56\u7684\u53c2\u6570\u3002\u5f53A\u7684\u6784\u9020\u5668\u9700\u8981B\uff0cSpring\u53bb\u521b\u5efaB\uff0c\u800cB\u7684\u6784\u9020\u5668\u53c8\u9700\u8981A\u65f6\uff0cA\u7684\u5bf9\u8c61\u5b9e\u4f8b\u672c\u8eab\u90fd\u65e0\u6cd5\u901a\u8fc7new\u5173\u952e\u5b57\u521b\u5efa\u51fa\u6765\uff0c\u66f4\u8c08\u4e0d\u4e0a\u540e\u7eed\u7684\u7f13\u5b58\u548c\u66b4\u9732\u4e86\u3002\u8fd9\u662f\u4e00\u4e2a\u201c\u5148\u6709\u9e21\u8fd8\u662f\u5148\u6709\u86cb\u201d\u7684\u95ee\u9898\uff0cSpring\u65e0\u6cd5\u89e3\u51b3\u3002</p> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/Spring%E7%9A%84%E4%BA%8B%E5%8A%A1%E4%BB%80%E4%B9%88%E6%83%85%E5%86%B5%E4%B8%8B%E4%BC%9A%E5%A4%B1%E6%95%88%EF%BC%9F/","title":"Spring\u7684\u4e8b\u52a1\u4ec0\u4e48\u60c5\u51b5\u4e0b\u4f1a\u5931\u6548\uff1f","text":"<p>Spring\u7684\u58f0\u660e\u5f0f\u4e8b\u52a1\uff08<code>@Transactional</code>\uff09\u662f\u57fa\u4e8eAOP\uff08\u9762\u5411\u5207\u9762\u7f16\u7a0b\uff09\u5b9e\u73b0\u7684\uff0c\u5b83\u901a\u8fc7\u52a8\u6001\u4ee3\u7406\u6280\u672f\u5728\u76ee\u6807\u65b9\u6cd5\u7684\u6267\u884c\u524d\u540e\u52a8\u6001\u5730\u7ec7\u5165\u4e8b\u52a1\u5904\u7406\u7684\u903b\u8f91\uff08\u5982\u5f00\u542f\u4e8b\u52a1\u3001\u63d0\u4ea4\u6216\u56de\u6eda\uff09\u3002\u56e0\u6b64\uff0c\u6240\u6709\u5bfc\u81f4AOP\u4ee3\u7406\u5931\u6548\u6216\u8005\u7ed5\u8fc7\u4ee3\u7406\u7684\u573a\u666f\uff0c\u90fd\u4f1a\u5bfc\u81f4\u4e8b\u52a1\u5931\u6548\u3002</p> <p>\u4e0b\u9762\u6211\u5c06\u5177\u4f53\u5206\u6790\u51e0\u79cd\u5e38\u89c1\u7684\u4e8b\u52a1\u5931\u6548\u573a\u666f\uff1a</p> <p>\u4e00\u3001\u65b9\u6cd5\u7684\u8bbf\u95ee\u6743\u9650\u548c\u4fee\u9970\u7b26\u95ee\u9898</p> <p>\u8fd9\u662f\u6700\u57fa\u7840\u4e5f\u6700\u5bb9\u6613\u88ab\u5ffd\u7565\u7684\u4e00\u70b9\u3002</p> <ol> <li> <p>\u65b9\u6cd5\u4e0d\u662fpublic\u7684\uff1a</p> <p>Spring\u7684AOP\u4ee3\u7406\uff0c\u65e0\u8bba\u662f\u57fa\u4e8eJDK\u52a8\u6001\u4ee3\u7406\u8fd8\u662fCGLIB\uff0c\u9ed8\u8ba4\u90fd\u53ea\u4f1a\u62e6\u622apublic\u65b9\u6cd5\u7684\u8c03\u7528\u3002\u5982\u679c@Transactional\u6ce8\u89e3\u7528\u5728protected\u3001private\u6216\u5305\u53ef\u89c1\u6027\uff08default\uff09\u7684\u65b9\u6cd5\u4e0a\uff0c\u4e8b\u52a1\u662f\u4e0d\u4f1a\u751f\u6548\u7684\u3002\u8fd9\u662f\u56e0\u4e3a\u4ee3\u7406\u5bf9\u8c61\u5728\u5916\u90e8\u8c03\u7528\u65f6\u65e0\u6cd5\u76f4\u63a5\u8bbf\u95ee\u8fd9\u4e9b\u975epublic\u65b9\u6cd5\uff0c\u4e5f\u5c31\u65e0\u6cd5\u5e94\u7528\u4e8b\u52a1\u589e\u5f3a\u3002</p> </li> <li> <p>\u65b9\u6cd5\u88abfinal\u4fee\u9970\uff1a</p> <p>\u88abfinal\u4fee\u9970\u7684\u65b9\u6cd5\u65e0\u6cd5\u88ab\u5b50\u7c7b\u91cd\u5199\u3002\u5bf9\u4e8e\u4f7f\u7528CGLIB\u751f\u6210\u4ee3\u7406\u7684\u7c7b\u6765\u8bf4\uff0c\u5b83\u9700\u8981\u901a\u8fc7\u7ee7\u627f\u76ee\u6807\u7c7b\u5e76\u91cd\u5199\u5176\u65b9\u6cd5\u6765\u5b9e\u73b0\u4ee3\u7406\u3002\u5982\u679c\u65b9\u6cd5\u662ffinal\u7684\uff0cCGLIB\u5c31\u65e0\u6cd5\u91cd\u5199\u5b83\uff0c\u81ea\u7136\u4e5f\u5c31\u65e0\u6cd5\u52a0\u5165\u4e8b\u52a1\u903b\u8f91\u3002</p> </li> <li> <p>\u65b9\u6cd5\u662fstatic\u7684\uff1a</p> <p>@Transactional\u6ce8\u89e3\u662f\u4f5c\u7528\u4e8e\u5bf9\u8c61\u5b9e\u4f8b\u7684\uff0c\u800cstatic\u65b9\u6cd5\u5c5e\u4e8e\u7c7b\uff0c\u4e0d\u5c5e\u4e8e\u4efb\u4f55\u5b9e\u4f8b\u3002AOP\u4ee3\u7406\u662f\u4f5c\u7528\u4e8e\u5b9e\u4f8b\u7ea7\u522b\u7684\uff0c\u5b83\u65e0\u6cd5\u4ee3\u7406\u4e00\u4e2a\u9759\u6001\u65b9\u6cd5\u3002\u56e0\u6b64\uff0c\u9759\u6001\u65b9\u6cd5\u4e0a\u7684@Transactional\u6ce8\u89e3\u662f\u65e0\u6548\u7684\u3002</p> </li> </ol> <p>\u4e8c\u3001\u65b9\u6cd5\u8c03\u7528\u65b9\u5f0f\u95ee\u9898\uff08\u7ed5\u8fc7\u4e86\u4ee3\u7406\uff09</p> <p>\u8fd9\u662f\u6700\u5e38\u89c1\u4e5f\u6700\u9690\u853d\u7684\u4e00\u7c7b\u5931\u6548\u573a\u666f\u3002</p> <ol> <li> <p>\u540c\u4e00\u4e2a\u7c7b\u4e2d\u7684\u65b9\u6cd5\u5185\u90e8\u8c03\u7528\uff1a</p> <p>\u5047\u8bbe\u5728\u540c\u4e00\u4e2a\u7c7b\u4e2d\u6709methodA\u548cmethodB\uff0cmethodA\u6ca1\u6709\u4e8b\u52a1\uff0c\u800cmethodB\u6709@Transactional\u6ce8\u89e3\u3002\u5982\u679c\u5728methodA\u4e2d\u76f4\u63a5\u901a\u8fc7this.methodB()\u7684\u65b9\u5f0f\u6765\u8c03\u7528methodB\uff0c\u90a3\u4e48methodB\u7684\u4e8b\u52a1\u4f1a\u5931\u6548\u3002</p> <p>\u539f\u56e0\u662f\uff0cthis\u5f15\u7528\u6307\u5411\u7684\u662f\u539f\u59cb\u7684\u76ee\u6807\u5bf9\u8c61\uff0c\u800c\u4e0d\u662fSpring\u751f\u6210\u7684\u4ee3\u7406\u5bf9\u8c61\u3002\u8fd9\u4e2a\u8c03\u7528\u662f\u5bf9\u8c61\u5185\u90e8\u7684\u76f4\u63a5\u8c03\u7528\uff0c\u5b8c\u5168\u6ca1\u6709\u7ecf\u8fc7AOP\u4ee3\u7406\uff0cSpring\u4e5f\u5c31\u6ca1\u6709\u673a\u4f1a\u4ecb\u5165\u5e76\u5f00\u542f\u4e8b\u52a1\u3002</p> <p>\u89e3\u51b3\u65b9\u6848\u901a\u5e38\u6709\u4e09\u79cd\uff1a</p> <ul> <li> <p>\u5c06<code>methodB</code>\u79fb\u5230\u53e6\u4e00\u4e2aBean\u4e2d\uff0c\u901a\u8fc7\u4f9d\u8d56\u6ce8\u5165\u7684\u65b9\u5f0f\u8c03\u7528\u3002</p> </li> <li> <p>\u5728\u8be5\u7c7b\u4e2d\u6ce8\u5165\u81ea\u8eab\u7684\u4ee3\u7406\u5bf9\u8c61\uff0c\u901a\u8fc7\u4ee3\u7406\u5bf9\u8c61\u6765\u8c03\u7528<code>methodB</code>\u3002</p> </li> <li> <p>\u4f7f\u7528<code>AopContext.currentProxy()</code>\u83b7\u53d6\u5f53\u524d\u4ee3\u7406\u5bf9\u8c61\uff0c\u518d\u7528\u5b83\u6765\u8c03\u7528<code>methodB</code>\u3002</p> </li> </ul> </li> </ol> <p>\u4e09\u3001\u5f02\u5e38\u5904\u7406\u95ee\u9898</p> <p>\u4e8b\u52a1\u7684\u56de\u6eda\u662f\u57fa\u4e8e\u5f02\u5e38\u7684\uff0c\u5982\u679c\u5f02\u5e38\u5904\u7406\u4e0d\u5f53\uff0c\u4f1a\u5bfc\u81f4\u4e8b\u52a1\u65e0\u6cd5\u6309\u9884\u671f\u56de\u6eda\u3002</p> <ol> <li> <p>\u5f02\u5e38\u88abtry-catch\u6355\u83b7\u4e14\u6ca1\u6709\u91cd\u65b0\u629b\u51fa\uff1a</p> <p>\u5982\u679c\u5728\u5e26\u6709@Transactional\u6ce8\u89e3\u7684\u65b9\u6cd5\u5185\u90e8\uff0c\u4f7f\u7528try-catch\u6355\u83b7\u4e86\u53ef\u80fd\u5bfc\u81f4\u56de\u6eda\u7684\u5f02\u5e38\uff0c\u4f46catch\u5757\u4e2d\u6ca1\u6709\u5c06\u5f02\u5e38\u91cd\u65b0\u629b\u51fa\uff0c\u90a3\u4e48Spring\u7684\u4e8b\u52a1AOP\u5207\u9762\u5c31\u65e0\u6cd5\u611f\u77e5\u5230\u5f02\u5e38\u7684\u53d1\u751f\u3002\u5728\u5b83\u770b\u6765\uff0c\u65b9\u6cd5\u662f\u6b63\u5e38\u6267\u884c\u5b8c\u6210\u7684\uff0c\u56e0\u6b64\u5b83\u4f1a\u63d0\u4ea4\u4e8b\u52a1\u800c\u4e0d\u662f\u56de\u6eda\u3002</p> </li> <li> <p>\u629b\u51fa\u7684\u5f02\u5e38\u7c7b\u578b\u4e0d\u6b63\u786e\uff1a</p> <p>Spring\u7684\u58f0\u660e\u5f0f\u4e8b\u52a1\u9ed8\u8ba4\u53ea\u5bf9RuntimeException\uff08\u8fd0\u884c\u65f6\u5f02\u5e38\uff09\u548cError\uff08\u9519\u8bef\uff09\u8fdb\u884c\u56de\u6eda\u3002\u5bf9\u4e8e\u53d7\u68c0\u5f02\u5e38\uff08Checked Exception\uff0c\u5373Exception\u7684\u5b50\u7c7b\u4f46\u975eRuntimeException\u7684\u5b50\u7c7b\uff09\uff0c\u5b83\u9ed8\u8ba4\u662f\u4e0d\u4f1a\u56de\u6eda\u7684\u3002</p> <p>\u5982\u679c\u4f60\u7684\u4e1a\u52a1\u903b\u8f91\u4e2d\u629b\u51fa\u7684\u662f\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684\u53d7\u68c0\u5f02\u5e38\uff0c\u4f46\u53c8\u5e0c\u671b\u4e8b\u52a1\u56de\u6eda\uff0c\u5c31\u5fc5\u987b\u5728@Transactional\u6ce8\u89e3\u4e2d\u660e\u786e\u6307\u5b9arollbackFor\u5c5e\u6027\uff0c\u4f8b\u5982 @Transactional(rollbackFor = Exception.class)\u3002</p> </li> </ol> <p>\u56db\u3001\u6570\u636e\u5e93\u548c\u4e8b\u52a1\u4f20\u64ad\u884c\u4e3a\u95ee\u9898</p> <ol> <li> <p>\u6570\u636e\u5e93\u5f15\u64ce\u4e0d\u652f\u6301\u4e8b\u52a1\uff1a</p> <p>\u8fd9\u662f\u4e00\u4e2a\u5e95\u5c42\u539f\u56e0\u3002\u5982\u679c\u4f60\u7684MySQL\u6570\u636e\u5e93\u8868\u7684\u5b58\u50a8\u5f15\u64ce\u662fMyISAM\uff0c\u800c\u4e0d\u662fInnoDB\uff0c\u90a3\u4e48\u4e8b\u52a1\u662f\u4e0d\u4f1a\u751f\u6548\u7684\u3002\u56e0\u4e3aMyISAM\u5f15\u64ce\u672c\u8eab\u5c31\u4e0d\u652f\u6301\u4e8b\u52a1\u3002\u5728\u6392\u67e5\u95ee\u9898\u65f6\uff0c\u8fd9\u4e5f\u662f\u9700\u8981\u68c0\u67e5\u7684\u4e00\u70b9\u3002</p> </li> <li> <p>\u4e8b\u52a1\u7684\u4f20\u64ad\u884c\u4e3a\uff08Propagation\uff09\u914d\u7f6e\u4e0d\u5f53\uff1a</p> <p>@Transactional\u6ce8\u89e3\u6709\u4e00\u4e2apropagation\u5c5e\u6027\uff0c\u7528\u6765\u5b9a\u4e49\u4e8b\u52a1\u7684\u4f20\u64ad\u884c\u4e3a\u3002\u5982\u679c\u914d\u7f6e\u4e0d\u5f53\uff0c\u4e5f\u53ef\u80fd\u5bfc\u81f4\u4e8b\u52a1\u201c\u770b\u8d77\u6765\u201d\u5931\u6548\u4e86\u3002</p> <p>\u4f8b\u5982\uff0c\u4e00\u4e2a\u65b9\u6cd5A\u8c03\u7528\u4e86\u53e6\u4e00\u4e2a\u65b9\u6cd5B\uff0c\u5982\u679cB\u7684\u4f20\u64ad\u884c\u4e3a\u8bbe\u7f6e\u4e3aPropagation.NOT_SUPPORTED\uff08\u4ee5\u975e\u4e8b\u52a1\u65b9\u5f0f\u8fd0\u884c\uff0c\u5982\u679c\u5f53\u524d\u5b58\u5728\u4e8b\u52a1\uff0c\u5219\u628a\u5f53\u524d\u4e8b\u52a1\u6302\u8d77\uff09\uff0c\u90a3\u4e48\u5373\u4f7fA\u5728\u4e00\u4e2a\u4e8b\u52a1\u4e2d\uff0cB\u7684\u6570\u636e\u5e93\u64cd\u4f5c\u4e5f\u4e0d\u4f1a\u88ab\u7eb3\u5165A\u7684\u4e8b\u52a1\u7ba1\u7406\u3002\u540c\u7406\uff0cPropagation.NEVER\uff08\u4ee5\u975e\u4e8b\u52a1\u65b9\u5f0f\u8fd0\u884c\uff0c\u5982\u679c\u5f53\u524d\u5b58\u5728\u4e8b\u52a1\uff0c\u5219\u629b\u51fa\u5f02\u5e38\uff09\u4e5f\u4f1a\u963b\u6b62\u4e8b\u52a1\u7684\u6267\u884c\u3002</p> </li> </ol> <p>\u603b\u7ed3\u6765\u8bf4\uff0c\u6392\u67e5Spring\u4e8b\u52a1\u5931\u6548\u7684\u95ee\u9898\uff0c\u6211\u901a\u5e38\u4f1a\u9075\u5faa\u4e00\u4e2a\u601d\u8def\uff1a\u9996\u5148\u786e\u8ba4\u5e95\u5c42\uff08\u6570\u636e\u5e93\u5f15\u64ce\uff09\u662f\u5426\u652f\u6301\uff0c\u7136\u540e\u68c0\u67e5\u4ee3\u7801\u5c42\u9762\uff0c\u4ece\u65b9\u6cd5\u7684\u7b7e\u540d\uff08<code>public</code>, \u975e<code>final</code>, \u975e<code>static</code>\uff09\u5230\u65b9\u6cd5\u7684\u8c03\u7528\u65b9\u5f0f\uff08\u662f\u5426\u5185\u90e8\u8c03\u7528\uff09\uff0c\u518d\u5230\u5f02\u5e38\u5904\u7406\u903b\u8f91\uff08\u662f\u5426\u6355\u83b7\u3001\u5f02\u5e38\u7c7b\u578b\u662f\u5426\u6b63\u786e\uff09\uff0c\u6700\u540e\u518d\u770b\u4e8b\u52a1\u7684\u4f20\u64ad\u914d\u7f6e\u662f\u5426\u7b26\u5408\u9884\u671f\u3002\u7406\u89e3AOP\u4ee3\u7406\u662f\u5b9a\u4f4d\u8fd9\u7c7b\u95ee\u9898\u7684\u6838\u5fc3\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/bean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E4%BB%8B%E7%BB%8D/","title":"Bean\u7684\u751f\u547d\u5468\u671f\u4ecb\u7ecd","text":"<p>\u4e00\u4e2aBean\u7684\u5b8c\u6574\u751f\u547d\u5468\u671f\uff0c\u5927\u81f4\u53ef\u4ee5\u5206\u4e3a\u56db\u4e2a\u4e3b\u8981\u9636\u6bb5\uff1a</p> <ol> <li> <p>\u5b9e\u4f8b\u5316 (Instantiation)\uff1aSpring\u5bb9\u5668\u6839\u636eBean\u7684\u5b9a\u4e49\uff08BeanDefinition\uff09\u521b\u5efa\u51faBean\u7684Java\u5bf9\u8c61\u5b9e\u4f8b\u3002</p> </li> <li> <p>\u5c5e\u6027\u586b\u5145 (Population)\uff1aSpring\u5bb9\u5668\u4e3aBean\u5b9e\u4f8b\u7684\u5c5e\u6027\u6ce8\u5165\u503c\uff0c\u5373\u6211\u4eec\u5e38\u8bf4\u7684\u4f9d\u8d56\u6ce8\u5165\uff08DI\uff09\u3002</p> </li> <li> <p>\u521d\u59cb\u5316 (Initialization)\uff1a\u6267\u884c\u4e00\u7cfb\u5217\u7684\u56de\u8c03\u548c\u5904\u7406\uff0c\u4f7fBean\u8fbe\u5230\u4e00\u4e2a\u5b8c\u5168\u53ef\u7528\u7684\u72b6\u6001\u3002</p> </li> <li> <p>\u9500\u6bc1 (Destruction)\uff1a\u5728\u5bb9\u5668\u5173\u95ed\u6216Bean\u88ab\u9500\u6bc1\u65f6\uff0c\u6267\u884c\u6e05\u7406\u5de5\u4f5c\u3002</p> </li> </ol> <p>1.\u5b9e\u4f8b\u5316\u9636\u6bb5</p> <ul> <li> <p>\u89e6\u53d1\uff1a\u5bb9\u5668\u542f\u52a8\u540e\uff0c\u4f1a\u89e3\u6790\u914d\u7f6e\u5143\u4fe1\u606f\uff0c\u4e3a\u6bcf\u4e2aBean\u751f\u6210\u4e00\u4e2aBeanDefinition\u3002\u7136\u540e\uff0c\u5bb9\u5668\u4f1a\u6839\u636eBeanDefinition\u6765\u521b\u5efaBean\u3002</p> </li> <li> <p>\u6838\u5fc3\u64cd\u4f5c\uff1aSpring\u901a\u8fc7\u53cd\u5c04\u8c03\u7528Bean\u7684\u6784\u9020\u51fd\u6570\uff0c\u6765\u521b\u5efa\u4e00\u4e2a\u539f\u59cb\u7684\u3001\u672a\u7ecf\u4efb\u4f55\u914d\u7f6e\u7684Java\u5bf9\u8c61\u5b9e\u4f8b\u3002\u6b64\u65f6\uff0c\u5bf9\u8c61\u5df2\u7ecf\u5206\u914d\u4e86\u5185\u5b58\u7a7a\u95f4\uff0c\u4f46\u5176\u5185\u90e8\u7684\u5c5e\u6027\u90fd\u8fd8\u662f\u9ed8\u8ba4\u503c\u3002</p> </li> </ul> <p>2.\u5c5e\u6027\u586b\u5145\u9636\u6bb5</p> <ul> <li>\u6838\u5fc3\u64cd\u4f5c\uff1aSpring\u68c0\u67e5BeanDefinition\u4e2d\u7684\u5c5e\u6027\u4fe1\u606f\uff0c\u901a\u8fc7\u4f9d\u8d56\u6ce8\u5165\uff08DI\uff09\u4e3aBean\u7684\u6210\u5458\u53d8\u91cf\u8d4b\u503c\u3002\u8fd9\u901a\u5e38\u662f\u901a\u8fc7<code>@Autowired</code>\u3001<code>@Resource</code>\u7b49\u6ce8\u89e3\uff0c\u5229\u7528\u53cd\u5c04\u6765\u5b8c\u6210\u7684\u3002\u6b64\u65f6\uff0cBean\u7684\u4f9d\u8d56\u5bf9\u8c61\u5df2\u7ecf\u88ab\u6ce8\u5165\u8fdb\u6765\u3002</li> </ul> <p>3.\u521d\u59cb\u5316\u9636\u6bb5</p> <p>\u8fd9\u662fBean\u751f\u547d\u5468\u671f\u4e2d\u6700\u4e3a\u590d\u6742\uff0c\u4e5f\u662f\u6269\u5c55\u70b9\u6700\u591a\u7684\u4e00\u4e2a\u9636\u6bb5\u3002\u5728\u5b9e\u4f8b\u5316\u548c\u5c5e\u6027\u586b\u5145\u5b8c\u6210\u4e4b\u540e\uff0cBean\u4f1a\u7ecf\u5386\u4e00\u7cfb\u5217\u7684\u521d\u59cb\u5316\u56de\u8c03\u3002</p> <ul> <li> <p>3.1 Aware\u63a5\u53e3\u56de\u8c03</p> <ul> <li>\u5982\u679cBean\u5b9e\u73b0\u4e86\u7279\u5b9a\u7684<code>Aware</code>\u63a5\u53e3\uff0cSpring\u4f1a\u8c03\u7528\u8fd9\u4e9b\u63a5\u53e3\u7684\u65b9\u6cd5\uff0c\u5c06\u76f8\u5e94\u7684\u8d44\u6e90\u6ce8\u5165\u7ed9Bean\u3002\u8fd9\u662f\u4e00\u4e2a\u8ba9Bean\u80fd\u611f\u77e5\u5230\u81ea\u8eab\u5728\u5bb9\u5668\u4e2d\u73af\u5883\u7684\u65b9\u5f0f\u3002</li> </ul> </li> <li> <p>3.2 BeanPostProcessor\u524d\u7f6e\u5904\u7406</p> <ul> <li> <p>\u6269\u5c55\u70b9\uff1a<code>BeanPostProcessor</code>\u63a5\u53e3\u7684<code>postProcessBeforeInitialization</code>\u65b9\u6cd5\u3002</p> </li> <li> <p>\u64cd\u4f5c\uff1a\u5728\u6267\u884c\u4efb\u4f55\u521d\u59cb\u5316\u56de\u8c03\uff08\u5982<code>@PostConstruct</code>\u6216<code>afterPropertiesSet</code>\uff09\u4e4b\u524d\uff0cSpring\u4f1a\u8c03\u7528\u6240\u6709\u5df2\u6ce8\u518c\u7684<code>BeanPostProcessor</code>\u7684\u8fd9\u4e2a\u65b9\u6cd5\u3002\u8fd9\u7ed9\u4e86\u6211\u4eec\u5728Bean\u6b63\u5f0f\u521d\u59cb\u5316\u524d\uff0c\u5bf9Bean\u5b9e\u4f8b\u8fdb\u884c\u4fee\u6539\u6216\u5305\u88c5\u7684\u673a\u4f1a\u3002</p> </li> </ul> </li> <li> <p>3.3 \u521d\u59cb\u5316\u65b9\u6cd5\u6267\u884c</p> <ul> <li> <p>Spring\u4f1a\u68c0\u67e5\u5e76\u6267\u884cBean\u5b9a\u4e49\u7684\u521d\u59cb\u5316\u65b9\u6cd5\uff0c\u8ba9Bean\u6267\u884c\u81ea\u5b9a\u4e49\u7684\u542f\u52a8\u903b\u8f91\u3002</p> </li> <li> <p>\u6269\u5c55\u70b91\uff1a<code>@PostConstruct</code>\u6ce8\u89e3\u3002\u5982\u679cBean\u7684\u65b9\u6cd5\u88ab\u8fd9\u4e2aJSR-250\u89c4\u8303\u7684\u6ce8\u89e3\u6807\u8bb0\uff0c\u8be5\u65b9\u6cd5\u4f1a\u88ab\u8c03\u7528\u3002</p> </li> <li> <p>\u6269\u5c55\u70b92\uff1a<code>InitializingBean</code>\u63a5\u53e3\u3002\u5982\u679cBean\u5b9e\u73b0\u4e86\u8fd9\u4e2a\u63a5\u53e3\uff0c\u5176<code>afterPropertiesSet</code>\u65b9\u6cd5\u4f1a\u88ab\u8c03\u7528\u3002</p> </li> <li> <p>\u6269\u5c55\u70b93\uff1a\u81ea\u5b9a\u4e49<code>init-method</code>\u3002\u53ef\u4ee5\u5728<code>@Bean</code>\u6ce8\u89e3\u6216XML\u914d\u7f6e\u4e2d\u6307\u5b9a\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684\u521d\u59cb\u5316\u65b9\u6cd5\u3002</p> </li> <li> <p>\u6267\u884c\u987a\u5e8f\uff1a<code>@PostConstruct</code>\u6ce8\u89e3\u7684\u65b9\u6cd5 -&gt; <code>afterPropertiesSet</code>\u65b9\u6cd5 -&gt; <code>init-method</code>\u6307\u5b9a\u7684\u65b9\u6cd5\u3002</p> </li> </ul> </li> <li> <p>3.4 BeanPostProcessor\u540e\u7f6e\u5904\u7406</p> <ul> <li> <p>\u6269\u5c55\u70b9\uff1a<code>BeanPostProcessor</code>\u63a5\u53e3\u7684<code>postProcessAfterInitialization</code>\u65b9\u6cd5\u3002</p> </li> <li> <p>\u64cd\u4f5c\uff1a\u5728Bean\u7684\u6240\u6709\u521d\u59cb\u5316\u903b\u8f91\u6267\u884c\u5b8c\u6bd5\u540e\uff0cSpring\u4f1a\u8c03\u7528\u6240\u6709<code>BeanPostProcessor</code>\u7684\u8fd9\u4e2a\u65b9\u6cd5\u3002</p> </li> <li> <p>\u6838\u5fc3\u5e94\u7528\uff1a\u8fd9\u662fSpring AOP\u5b9e\u73b0\u7684\u5173\u952e\u6240\u5728\u3002\u5982\u679c\u4e00\u4e2aBean\u9700\u8981\u88abAOP\u4ee3\u7406\uff0c\u90a3\u4e48\u5c31\u662f\u5728\u8fd9\u4e2a\u6b65\u9aa4\u4e2d\uff0cSpring\u4f1a\u8fd4\u56de\u4e00\u4e2a\u8be5Bean\u7684\u4ee3\u7406\u5bf9\u8c61\uff0c\u6765\u66ff\u6362\u6389\u539f\u59cb\u7684Bean\u5b9e\u4f8b\u3002\u6240\u4ee5\uff0c\u6211\u4eec\u6700\u7ec8\u4ece\u5bb9\u5668\u4e2d\u83b7\u53d6\u5230\u7684Bean\uff0c\u53ef\u80fd\u662f\u4e00\u4e2a\u4ee3\u7406\u5bf9\u8c61\u3002</p> </li> </ul> </li> </ul> <p>Bean\u51c6\u5907\u5c31\u7eea</p> <p>\u7ecf\u8fc7\u4ee5\u4e0a\u6240\u6709\u6b65\u9aa4\uff0c\u4e00\u4e2a\u5b8c\u6574\u3001\u53ef\u7528\u3001\u53ef\u80fd\u5df2\u88ab\u4ee3\u7406\u7684Bean\u5c31\u521b\u5efa\u5b8c\u6210\u4e86\u3002\u5b83\u4f1a\u88ab\u653e\u5165Spring\u7684\u5355\u4f8b\u7f13\u5b58\u6c60\uff08singletonObjects\uff09\u4e2d\uff0c\u7b49\u5f85\u88ab\u5176\u4ed6Bean\u6ce8\u5165\u6216\u88ab\u5e94\u7528\u7a0b\u5e8f\u8c03\u7528\u3002</p> <ol> <li>\u9500\u6bc1\u9636\u6bb5</li> </ol> <p>\u5f53Spring\u5bb9\u5668\u5173\u95ed\uff0c\u6216\u8005\u4e00\u4e2aBean\u4e0d\u518d\u9700\u8981\u65f6\uff0c\u4f1a\u89e6\u53d1\u9500\u6bc1\u6d41\u7a0b\u3002</p> <ul> <li> <p>\u89e6\u53d1\uff1a\u5bb9\u5668\u8c03\u7528<code>close()</code>\u65b9\u6cd5\u3002</p> </li> <li> <p>\u6838\u5fc3\u64cd\u4f5c\uff1aSpring\u4f1a\u68c0\u67e5\u5e76\u6267\u884cBean\u5b9a\u4e49\u7684\u9500\u6bc1\u65b9\u6cd5\uff0c\u8ba9Bean\u6709\u673a\u4f1a\u91ca\u653e\u8d44\u6e90\u3002</p> <ul> <li> <p>\u6269\u5c55\u70b91\uff1a<code>@PreDestroy</code>\u6ce8\u89e3\u3002\u5982\u679cBean\u7684\u65b9\u6cd5\u88ab\u8fd9\u4e2aJSR-250\u89c4\u8303\u7684\u6ce8\u89e3\u6807\u8bb0\uff0c\u8be5\u65b9\u6cd5\u4f1a\u5728\u9500\u6bc1\u524d\u88ab\u8c03\u7528\u3002</p> </li> <li> <p>\u6269\u5c55\u70b92\uff1a<code>DisposableBean</code>\u63a5\u53e3\u3002\u5982\u679cBean\u5b9e\u73b0\u4e86\u8fd9\u4e2a\u63a5\u53e3\uff0c\u5176<code>destroy</code>\u65b9\u6cd5\u4f1a\u88ab\u8c03\u7528\u3002</p> </li> <li> <p>\u6269\u5c55\u70b93\uff1a\u81ea\u5b9a\u4e49<code>destroy-method</code>\u3002\u53ef\u4ee5\u5728<code>@Bean</code>\u6ce8\u89e3\u6216XML\u914d\u7f6e\u4e2d\u6307\u5b9a\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684\u9500\u6bc1\u65b9\u6cd5\u3002</p> </li> <li> <p>\u6267\u884c\u987a\u5e8f\uff1a<code>@PreDestroy</code>\u6ce8\u89e3\u7684\u65b9\u6cd5 -&gt; <code>destroy</code>\u65b9\u6cd5 -&gt; <code>destroy-method</code>\u6307\u5b9a\u7684\u65b9\u6cd5\u3002</p> </li> </ul> </li> </ul> <p>Spring Bean\u7684\u751f\u547d\u5468\u671f\u662f\u4e00\u4e2a\u88ab\u7cbe\u5fc3\u8bbe\u8ba1\u7684\u3001\u5145\u6ee1\u6269\u5c55\u70b9\u7684\u6d41\u7a0b\u3002\u5b83\u4ece\u5b9e\u4f8b\u5316\u5f00\u59cb\uff0c\u7ecf\u8fc7\u5c5e\u6027\u586b\u5145\uff0c\u518d\u5230\u4e00\u7cfb\u5217\u590d\u6742\u7684\u521d\u59cb\u5316\u56de\u8c03\uff08\u5305\u62ecAware\u63a5\u53e3\u3001BeanPostProcessor\u524d\u540e\u5904\u7406\u3001\u4ee5\u53ca\u591a\u79cd\u521d\u59cb\u5316\u65b9\u6cd5\uff09\uff0c\u6700\u7ec8\u6210\u4e3a\u4e00\u4e2a\u53ef\u7528\u7684Bean\u3002\u5728\u5bb9\u5668\u5173\u95ed\u65f6\uff0c\u53c8\u4f1a\u901a\u8fc7\u4e00\u7cfb\u5217\u9500\u6bc1\u56de\u8c03\u6765\u5b8c\u6210\u6e05\u7406\u5de5\u4f5c\u3002\u7406\u89e3\u8fd9\u4e2a\u751f\u547d\u5468\u671f\uff0c\u4e0d\u4ec5\u80fd\u5e2e\u52a9\u6211\u4eec\u66f4\u597d\u5730\u4f7f\u7528Spring\uff0c\u4e5f\u4e3a\u6211\u4eec\u7406\u89e3Spring AOP\u3001\u4e8b\u52a1\u7b49\u9ad8\u7ea7\u529f\u80fd\u7684\u5b9e\u73b0\u539f\u7406\u6253\u4e0b\u4e86\u575a\u5b9e\u7684\u57fa\u7840\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/springboot%E5%81%9A%E5%87%BA%E4%BA%86%E5%93%AA%E4%BA%9B%E4%BC%98%E5%8C%96/","title":"Springboot\u505a\u51fa\u4e86\u54ea\u4e9b\u4f18\u5316","text":""},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/springboot%E5%81%9A%E5%87%BA%E4%BA%86%E5%93%AA%E4%BA%9B%E4%BC%98%E5%8C%96/#_1","title":"\u6838\u5fc3\u4f18\u5316\uff1a\u7b80\u5316\u5f00\u53d1\u4e0e\u914d\u7f6e","text":"<ol> <li> <p>\u81ea\u52a8\u914d\u7f6e (Auto-Configuration)     Spring Boot \u6700\u6838\u5fc3\u7684\u4f18\u5316\u4e4b\u4e00\u662f\u81ea\u52a8\u914d\u7f6e\u3002\u5b83\u9075\u5faa\u201c\u7ea6\u5b9a\u4f18\u4e8e\u914d\u7f6e\u201d\u7684\u539f\u5219\uff0c\u80fd\u591f\u6839\u636e\u9879\u76ee\u4e2d\u5b58\u5728\u7684\u4f9d\u8d56\u81ea\u52a8\u914d\u7f6e\u5e94\u7528\u7a0b\u5e8f\u3002 \u4f8b\u5982\uff0c\u5982\u679c\u7c7b\u8def\u5f84\u4e0b\u6709<code>spring-webmvc</code>\u7684\u4f9d\u8d56\uff0cSpring Boot \u4f1a\u81ea\u52a8\u914d\u7f6e\u4e00\u4e2a\u5d4c\u5165\u5f0f\u7684 Tomcat \u670d\u52a1\u5668\u548c Spring MVC \u73af\u5883\u3002 \u8fd9\u4e00\u673a\u5236\u662f\u901a\u8fc7\u626b\u63cf\u7c7b\u8def\u5f84\u4e0b\u7684<code>META-INF/spring.factories</code>\u6587\u4ef6\u6765\u5b9e\u73b0\u7684\uff0c\u8be5\u6587\u4ef6\u5305\u542b\u4e86\u81ea\u52a8\u914d\u7f6e\u7c7b\u7684\u5217\u8868\u3002 \u81ea\u52a8\u914d\u7f6e\u7c7b\u4f7f\u7528 <code>@Conditional</code> \u6ce8\u89e3\uff0c\u8fd9\u610f\u5473\u7740\u53ea\u6709\u5728\u6ee1\u8db3\u7279\u5b9a\u6761\u4ef6\u65f6\uff08\u4f8b\u5982\uff0c\u7c7b\u8def\u5f84\u4e2d\u5b58\u5728\u67d0\u4e2a\u7c7b\uff09\uff0c\u76f8\u5e94\u7684\u914d\u7f6e\u624d\u4f1a\u751f\u6548\u3002 \u8fd9\u4f7f\u5f97\u5f00\u53d1\u8005\u65e0\u9700\u624b\u52a8\u7f16\u5199\u5927\u91cf\u7684XML\u6216Java\u914d\u7f6e\uff0c\u4ece\u800c\u5927\u5927\u7b80\u5316\u4e86\u521d\u59cb\u8bbe\u7f6e\u3002</p> </li> <li> <p>\u8d77\u6b65\u4f9d\u8d56 (Starter POMs)     \u4e3a\u4e86\u8fdb\u4e00\u6b65\u7b80\u5316\u4f9d\u8d56\u7ba1\u7406\uff0cSpring Boot \u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217\u7684\u201c\u8d77\u6b65\u4f9d\u8d56\u201d\uff08Starter POMs\uff09\u3002 \u8fd9\u4e9b\u662f\u53ef\u4ee5\u88ab\u6dfb\u52a0\u5230\u9879\u76ee\u4e2d\u7684\u4fbf\u6377\u4f9d\u8d56\u63cf\u8ff0\u7b26\u96c6\u5408\u3002 \u5f00\u53d1\u8005\u53ea\u9700\u8981\u5728\u9879\u76ee\u4e2d\u5f15\u5165\u4e00\u4e2a\u50cf<code>spring-boot-starter-web</code>\u8fd9\u6837\u7684\u4f9d\u8d56\uff0c\u5b83\u5c31\u4f1a\u81ea\u52a8\u5730\u5c06\u6240\u6709\u76f8\u5173\u7684\u4f9d\u8d56\uff08\u5982 Spring MVC, Tomcat, Jackson \u7b49\uff09\u90fd\u5305\u542b\u8fdb\u6765\u3002 \u8fd9\u6837\u505a\u7684\u597d\u5904\u662f\u907f\u514d\u4e86\u624b\u52a8\u6dfb\u52a0\u548c\u7ba1\u7406\u5927\u91cf\u5355\u4e2a\u4f9d\u8d56\u9879\u7684\u9ebb\u70e6\uff0c\u4e5f\u89e3\u51b3\u4e86\u7248\u672c\u51b2\u7a81\u7684\u95ee\u9898\u3002</p> </li> <li> <p>\u5185\u5d4c\u670d\u52a1\u5668     Spring Boot \u5141\u8bb8\u5c06\u5e94\u7528\u7a0b\u5e8f\u4e0e\u5185\u5d4c\u7684 HTTP \u670d\u52a1\u5668\uff08\u5982 Tomcat, Jetty \u6216 Undertow\uff09\u4e00\u540c\u6253\u5305\u6210\u4e00\u4e2a\u53ef\u6267\u884c\u7684 JAR \u6587\u4ef6\u3002 \u8fd9\u610f\u5473\u7740\u5f00\u53d1\u8005\u4e0d\u518d\u9700\u8981\u5c06\u5e94\u7528\u7a0b\u5e8f\u6253\u5305\u6210 WAR \u6587\u4ef6\u5e76\u90e8\u7f72\u5230\u5916\u90e8\u7684\u5e94\u7528\u670d\u52a1\u5668\u4e0a\u3002 \u901a\u8fc7\u7b80\u5355\u7684 <code>java -jar</code> \u547d\u4ee4\u5c31\u53ef\u4ee5\u76f4\u63a5\u8fd0\u884c\u5e94\u7528\uff0c\u6781\u5927\u5730\u7b80\u5316\u4e86\u5f00\u53d1\u3001\u6d4b\u8bd5\u548c\u90e8\u7f72\u6d41\u7a0b\u3002</p> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/springboot%E5%81%9A%E5%87%BA%E4%BA%86%E5%93%AA%E4%BA%9B%E4%BC%98%E5%8C%96/#_2","title":"\u9762\u5411\u751f\u4ea7\u73af\u5883\u7684\u4f18\u5316","text":"<ol> <li>Spring Boot Actuator     Spring Boot Actuator \u662f\u4e00\u4e2a\u91cd\u8981\u7684\u5b50\u9879\u76ee\uff0c\u5b83\u4e3a\u5e94\u7528\u7a0b\u5e8f\u63d0\u4f9b\u4e86\u751f\u4ea7\u7ea7\u522b\u7684\u76d1\u63a7\u548c\u7ba1\u7406\u529f\u80fd\u3002 \u901a\u8fc7\u4e00\u7cfb\u5217\u5185\u7f6e\u7684\u7aef\u70b9\uff08endpoints\uff09\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u8f7b\u677e\u5730\u76d1\u63a7\u5e94\u7528\u7684\u5065\u5eb7\u72b6\u51b5\u3001\u67e5\u770b\u6027\u80fd\u6307\u6807\u3001\u5ba1\u8ba1\u4fe1\u606f\u3001\u7ba1\u7406\u65e5\u5fd7\u7ea7\u522b\u7b49\u3002 \u4f8b\u5982\uff0c<code>/actuator/health</code> \u7aef\u70b9\u53ef\u4ee5\u663e\u793a\u5e94\u7528\u7684\u5065\u5eb7\u72b6\u6001\uff0c\u800c <code>/actuator/metrics</code> \u5219\u63d0\u4f9b\u4e86\u5173\u4e8e\u5185\u5b58\u3001\u7ebf\u7a0b\u3001\u5783\u573e\u56de\u6536\u7b49\u8be6\u7ec6\u7684\u5ea6\u91cf\u6307\u6807\u3002 \u8fd9\u4f7f\u5f97\u5e94\u7528\u7684\u8fd0\u7ef4\u548c\u76d1\u63a7\u53d8\u5f97\u975e\u5e38\u65b9\u4fbf\u3002</li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/springboot%E5%81%9A%E5%87%BA%E4%BA%86%E5%93%AA%E4%BA%9B%E4%BC%98%E5%8C%96/#_3","title":"\u6027\u80fd\u65b9\u9762\u7684\u4f18\u5316","text":"<p>\u867d\u7136 Spring Boot \u7684\u4e3b\u8981\u4f18\u52bf\u5728\u4e8e\u5f00\u53d1\u6548\u7387\uff0c\u4f46\u5b83\u4e5f\u4e3a\u6027\u80fd\u4f18\u5316\u63d0\u4f9b\u4e86\u652f\u6301\u548c\u5b9e\u8df5\u65b9\u5411\uff1a</p> <ul> <li>JVM \u53c2\u6570\u8c03\u4f18: \u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u5408\u9002\u7684 JVM \u53c2\u6570\u6765\u4f18\u5316 Spring Boot \u5e94\u7528\u7684\u542f\u52a8\u548c\u8fd0\u884c\u6027\u80fd\uff0c\u4f8b\u5982\u8c03\u6574\u5806\u5927\u5c0f\u3002</li> <li>Bean \u7684\u61d2\u52a0\u8f7d: \u5bf9\u4e8e\u4e00\u4e9b\u91cd\u91cf\u7ea7\u7684\u670d\u52a1\u6216\u7ec4\u4ef6\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>@Lazy</code> \u6ce8\u89e3\u8fdb\u884c\u61d2\u52a0\u8f7d\uff0c\u5373\u5728\u9996\u6b21\u4f7f\u7528\u65f6\u624d\u8fdb\u884c\u521d\u59cb\u5316\uff0c\u4ece\u800c\u52a0\u5feb\u5e94\u7528\u7684\u542f\u52a8\u901f\u5ea6\u3002</li> <li>\u5f02\u6b65\u5904\u7406: \u5bf9\u4e8e\u8017\u65f6\u8f83\u957f\u7684\u64cd\u4f5c\uff0c\u53ef\u4ee5\u4f7f\u7528 Spring \u7684\u5f02\u6b65\u5904\u7406\u673a\u5236\u6765\u63d0\u9ad8\u5e94\u7528\u7684\u54cd\u5e94\u80fd\u529b\u3002</li> <li>\u54cd\u5e94\u538b\u7f29: \u901a\u8fc7\u542f\u7528 Gzip \u7b49\u538b\u7f29\u65b9\u5f0f\u53ef\u4ee5\u51cf\u5c11\u7f51\u7edc\u4f20\u8f93\u7684\u6570\u636e\u91cf\uff0c\u63d0\u5347 HTTP \u6027\u80fd\u3002</li> <li>\u4f7f\u7528\u7f13\u5b58: \u901a\u8fc7\u96c6\u6210\u7f13\u5b58\u6280\u672f\u53ef\u4ee5\u663e\u8457\u63d0\u5347\u5e94\u7528\u7684\u8fd0\u884c\u6548\u7387\u3002</li> <li>\u5173\u95ed\u975e\u5fc5\u8981\u529f\u80fd: \u4f8b\u5982\uff0c\u5728\u4e0d\u9700\u8981 JMX\uff08Java Management Extensions\uff09\u76d1\u63a7\u65f6\u53ef\u4ee5\u5c06\u5176\u5173\u95ed\uff0c\u4ee5\u51cf\u5c11\u8d44\u6e90\u6d88\u8017\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/springboot%E5%AE%B9%E5%99%A8%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B/","title":"Springboot\u5bb9\u5668\u542f\u52a8\u8fc7\u7a0b","text":"<p>Spring Boot \u5e94\u7528\u7a0b\u5e8f\u7684\u542f\u52a8\u8fc7\u7a0b\u662f\u4e00\u4e2a\u7cbe\u5fc3\u8bbe\u8ba1\u7684\u6d41\u7a0b\uff0c\u5b83\u81ea\u52a8\u5316\u4e86\u4f20\u7edf Spring \u5e94\u7528\u4e2d\u7e41\u7410\u7684\u914d\u7f6e\u548c\u542f\u52a8\u6b65\u9aa4\u3002\u6574\u4e2a\u8fc7\u7a0b\u7684\u6838\u5fc3\u56f4\u7ed5 <code>SpringApplication.run()</code> \u65b9\u6cd5\u5c55\u5f00\uff0c\u8be5\u65b9\u6cd5\u5f15\u5bfc\u4e86 Spring \u5e94\u7528\u4e0a\u4e0b\u6587\uff08IoC \u5bb9\u5668\uff09\u7684\u521b\u5efa\u3001\u914d\u7f6e\u548c\u542f\u52a8\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/springboot%E5%AE%B9%E5%99%A8%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B/#1-springapplicationrun","title":"1. \u542f\u52a8\u5165\u53e3\uff1a<code>SpringApplication.run()</code>","text":"<p>\u6bcf\u4e2a Spring Boot \u9879\u76ee\u90fd\u6709\u4e00\u4e2a\u4e3b\u542f\u52a8\u7c7b\uff0c\u5176\u4e2d\u5305\u542b\u4e00\u4e2a <code>main</code> \u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u901a\u5e38\u53ea\u6709\u4e00\u884c\u4ee3\u7801\uff1a<code>SpringApplication.run(MyApplication.class, args);</code>\u3002 \u8fd9\u884c\u4ee3\u7801\u662f\u6574\u4e2a\u542f\u52a8\u6d41\u7a0b\u7684\u8d77\u70b9\u3002</p> <p><code>SpringApplication.run()</code> \u9759\u6001\u65b9\u6cd5\u7684\u6267\u884c\u4e3b\u8981\u5206\u4e3a\u4e24\u4e2a\u9636\u6bb5\uff1a *   \u521b\u5efa <code>SpringApplication</code> \u5b9e\u4f8b\uff1a\u9996\u5148\u4f1a\u521b\u5efa\u4e00\u4e2a <code>SpringApplication</code> \u7c7b\u7684\u5bf9\u8c61\u3002 *   \u8c03\u7528\u5b9e\u4f8b\u7684 <code>run()</code> \u65b9\u6cd5\uff1a\u7136\u540e\u5229\u7528\u521b\u5efa\u7684\u5b9e\u4f8b\u6765\u8c03\u7528\u5176 <code>run()</code> \u65b9\u6cd5\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/springboot%E5%AE%B9%E5%99%A8%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B/#2-springapplication","title":"2. <code>SpringApplication</code> \u5bf9\u8c61\u7684\u521d\u59cb\u5316","text":"<p>\u5728 <code>SpringApplication</code> \u7684\u6784\u9020\u51fd\u6570\u4e2d\uff0c\u4f1a\u6267\u884c\u4e00\u7cfb\u5217\u521d\u59cb\u5316\u64cd\u4f5c\uff1a *   \u63a8\u65ad\u5e94\u7528\u7c7b\u578b\uff1aSpring Boot \u4f1a\u68c0\u67e5\u7c7b\u8def\u5f84\u4e0b\u7684\u7279\u5b9a\u7c7b\u6765\u5224\u65ad\u5e94\u7528\u7684\u7c7b\u578b\u3002\u4f8b\u5982\uff0c\u5982\u679c\u7c7b\u8def\u5f84\u4e0b\u5b58\u5728 <code>spring-webmvc</code>\uff0c\u5b83\u4f1a\u63a8\u65ad\u8fd9\u662f\u4e00\u4e2a\u57fa\u4e8e Servlet \u7684 Web \u5e94\u7528\u3002 *   \u52a0\u8f7d\u521d\u59cb\u5316\u5668\u548c\u76d1\u542c\u5668\uff1a\u5b83\u4f1a\u4ece <code>META-INF/spring.factories</code> \u6587\u4ef6\u4e2d\u52a0\u8f7d <code>ApplicationContextInitializer</code> \u548c <code>ApplicationListener</code> \u7684\u5b9e\u73b0\u7c7b\u3002\u8fd9\u4e9b\u7c7b\u7528\u4e8e\u5728 Spring \u5bb9\u5668\u7684\u4e0d\u540c\u751f\u547d\u5468\u671f\u9636\u6bb5\u6267\u884c\u81ea\u5b9a\u4e49\u903b\u8f91\u3002 *   \u8bbe\u7f6e\u4e3b\u914d\u7f6e\u7c7b\uff1a\u786e\u5b9a\u5305\u542b <code>main</code> \u65b9\u6cd5\u7684\u4e3b\u542f\u52a8\u7c7b\uff0c\u4ee5\u4fbf\u540e\u7eed\u8fdb\u884c\u7ec4\u4ef6\u626b\u63cf\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/springboot%E5%AE%B9%E5%99%A8%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B/#3-run","title":"3. \u6267\u884c <code>run</code> \u65b9\u6cd5\uff1a\u6838\u5fc3\u542f\u52a8\u6d41\u7a0b","text":"<p><code>SpringApplication</code> \u5b9e\u4f8b\u7684 <code>run</code> \u65b9\u6cd5\u662f\u6574\u4e2a\u542f\u52a8\u8fc7\u7a0b\u7684\u6838\u5fc3\uff0c\u5b83\u8d1f\u8d23\u521b\u5efa\u548c\u914d\u7f6e Spring \u5bb9\u5668\u3002 \u8fd9\u4e2a\u8fc7\u7a0b\u53ef\u4ee5\u6982\u62ec\u4e3a\u4ee5\u4e0b\u51e0\u4e2a\u5173\u952e\u6b65\u9aa4\uff1a</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/springboot%E5%AE%B9%E5%99%A8%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B/#environment","title":"\u51c6\u5907\u73af\u5883 (Environment)","text":"<p>Spring Boot \u4f1a\u521b\u5efa\u4e00\u4e2a <code>Environment</code> \u5bf9\u8c61\uff0c\u7528\u4e8e\u7ba1\u7406\u5e94\u7528\u7684\u914d\u7f6e\u5c5e\u6027\u3002 \u5b83\u4f1a\u52a0\u8f7d\u5404\u79cd\u6765\u6e90\u7684\u914d\u7f6e\uff0c\u5305\u62ec\uff1a *   <code>application.properties</code> \u6216 <code>application.yml</code> \u6587\u4ef6\u3002 *   \u547d\u4ee4\u884c\u53c2\u6570\u3002 *   \u7cfb\u7edf\u5c5e\u6027\u548c\u73af\u5883\u53d8\u91cf\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/springboot%E5%AE%B9%E5%99%A8%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B/#applicationcontext","title":"\u521b\u5efa\u5e94\u7528\u4e0a\u4e0b\u6587 (ApplicationContext)","text":"<p>\u6839\u636e\u4e4b\u524d\u63a8\u65ad\u7684\u5e94\u7528\u7c7b\u578b\uff0cSpring Boot \u4f1a\u521b\u5efa\u76f8\u5e94\u7c7b\u578b\u7684 <code>ApplicationContext</code>\uff08\u5373 IoC \u5bb9\u5668\uff09\u3002 *   \u5bf9\u4e8e\u975e Web \u5e94\u7528\uff0c\u901a\u5e38\u521b\u5efa <code>AnnotationConfigApplicationContext</code>\u3002 *   \u5bf9\u4e8e\u57fa\u4e8e Servlet \u7684 Web \u5e94\u7528\uff0c\u4f1a\u521b\u5efa <code>AnnotationConfigServletWebServerApplicationContext</code>\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/springboot%E5%AE%B9%E5%99%A8%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B/#_1","title":"\u51c6\u5907\u548c\u5237\u65b0\u4e0a\u4e0b\u6587","text":"<p>\u5728\u5bb9\u5668\u5237\u65b0\u4e4b\u524d\uff0c\u4f1a\u6267\u884c\u4e00\u4e9b\u51c6\u5907\u5de5\u4f5c\uff0c\u4f8b\u5982\u5c06\u521d\u59cb\u5316\u5668\u5e94\u7528\u4e8e\u4e0a\u4e0b\u6587\uff0c\u5e76\u53d1\u5e03\u5e94\u7528\u542f\u52a8\u65e9\u671f\u7684\u4e8b\u4ef6\u3002</p> <p>\u968f\u540e\uff0c\u6700\u5173\u952e\u7684\u4e00\u6b65\u662f\u8c03\u7528 <code>ApplicationContext</code> \u7684 <code>refresh()</code> \u65b9\u6cd5\u3002 \u8fd9\u4e2a\u65b9\u6cd5\u89e6\u53d1\u4e86 Spring \u5bb9\u5668\u7684\u6574\u4e2a\u751f\u547d\u5468\u671f\uff0c\u5305\u62ec\uff1a</p> <ul> <li>Bean \u7684\u52a0\u8f7d\u548c\u5b9e\u4f8b\u5316\uff1aSpring \u5bb9\u5668\u4f1a\u626b\u63cf\u4e3b\u914d\u7f6e\u7c7b\u6240\u5728\u7684\u5305\u53ca\u5176\u5b50\u5305\uff0c\u67e5\u627e\u5e76\u6ce8\u518c\u6240\u6709\u88ab <code>@Component</code>\u3001<code>@Service</code>\u3001<code>@Repository</code>\u3001<code>@Controller</code> \u7b49\u6ce8\u89e3\u6807\u8bb0\u7684\u7c7b\u4f5c\u4e3a Bean\u3002</li> <li>\u81ea\u52a8\u914d\u7f6e (Auto-configuration)\uff1a\u8fd9\u662f Spring Boot \u7684\u6838\u5fc3\u7279\u6027\u4e4b\u4e00\u3002<ul> <li>\u542f\u52a8\u81ea\u52a8\u914d\u7f6e\u7684\u8d77\u70b9\u662f <code>@SpringBootApplication</code> \u6ce8\u89e3\uff0c\u5b83\u5305\u542b\u4e86 <code>@EnableAutoConfiguration</code>\u3002</li> <li><code>@EnableAutoConfiguration</code> \u901a\u8fc7 <code>@Import(AutoConfigurationImportSelector.class)</code> \u6765\u52a0\u8f7d\u81ea\u52a8\u914d\u7f6e\u7c7b\u3002</li> <li><code>AutoConfigurationImportSelector</code> \u4f1a\u626b\u63cf\u6240\u6709 jar \u5305\u4e2d <code>META-INF/spring.factories</code> \u6587\u4ef6\uff0c\u83b7\u53d6 <code>org.springframework.boot.autoconfigure.EnableAutoConfiguration</code> \u952e\u4e0b\u7684\u6240\u6709\u81ea\u52a8\u914d\u7f6e\u7c7b\u3002</li> <li>\u6bcf\u4e2a\u81ea\u52a8\u914d\u7f6e\u7c7b\u901a\u5e38\u90fd\u5e26\u6709\u4e00\u7cfb\u5217\u7684 <code>@Conditional</code> \u6ce8\u89e3\uff0cSpring Boot \u4f1a\u6839\u636e\u5f53\u524d\u73af\u5883\uff08\u4f8b\u5982\uff0c\u7c7b\u8def\u5f84\u4e0a\u662f\u5426\u5b58\u5728\u67d0\u4e2a\u7279\u5b9a\u7684\u7c7b\u3001\u67d0\u4e2a\u5c5e\u6027\u662f\u5426\u88ab\u8bbe\u7f6e\u7b49\uff09\u6765\u51b3\u5b9a\u662f\u5426\u8981\u5e94\u7528\u8fd9\u4e2a\u914d\u7f6e\uff0c\u4ece\u800c\u5b9e\u73b0\u6309\u9700\u52a0\u8f7d\u3002 \u4f8b\u5982\uff0c\u5f53\u4f60\u5728\u9879\u76ee\u4e2d\u52a0\u5165\u4e86 <code>spring-boot-starter-web</code> \u4f9d\u8d56\u65f6\uff0cSpring Boot \u4f1a\u81ea\u52a8\u914d\u7f6e Tomcat\u3001DispatcherServlet \u7b49 Web \u5f00\u53d1\u6240\u9700\u7684 Bean\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/springboot%E5%AE%B9%E5%99%A8%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B/#web","title":"\u542f\u52a8\u5185\u5d4c Web \u670d\u52a1\u5668","text":"<p>\u5982\u679c\u5e94\u7528\u662f\u4e00\u4e2a Web \u5e94\u7528\uff0c\u5728\u5bb9\u5668\u5237\u65b0\u8fc7\u7a0b\u4e2d\uff0c\u4f1a\u521b\u5efa\u5e76\u542f\u52a8\u5185\u5d4c\u7684 Web \u670d\u52a1\u5668\uff08\u9ed8\u8ba4\u4e3a Tomcat\uff09\u3002 *   Spring Boot \u901a\u8fc7 <code>ServletWebServerApplicationContext</code> \u6765\u5904\u7406\u5185\u5d4c Web \u670d\u52a1\u5668\u7684\u542f\u52a8\u3002 *   \u5b83\u4f1a\u6839\u636e\u7c7b\u8def\u5f84\u4e0a\u7684\u4f9d\u8d56\u6765\u51b3\u5b9a\u4f7f\u7528\u54ea\u79cd\u670d\u52a1\u5668\uff08Tomcat\u3001Jetty \u6216 Undertow\uff09\u3002 *   \u670d\u52a1\u5668\u542f\u52a8\u540e\uff0c\u4f1a\u5f00\u59cb\u76d1\u542c\u6307\u5b9a\u7684\u7aef\u53e3\uff08\u9ed8\u8ba4\u4e3a 8080\uff09\uff0c\u51c6\u5907\u63a5\u6536\u5ba2\u6237\u7aef\u8bf7\u6c42\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/springboot%E5%AE%B9%E5%99%A8%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B/#4","title":"4. \u542f\u52a8\u5b8c\u6210","text":"<p>\u5728\u5bb9\u5668\u5237\u65b0\u548c Web \u670d\u52a1\u5668\u542f\u52a8\u4e4b\u540e\uff0c<code>run</code> \u65b9\u6cd5\u4f1a\u6267\u884c\u4e00\u4e9b\u6536\u5c3e\u5de5\u4f5c\uff0c\u4f8b\u5982\u8c03\u7528 <code>ApplicationRunner</code> \u548c <code>CommandLineRunner</code> \u63a5\u53e3\u7684\u5b9e\u73b0\uff0c\u5141\u8bb8\u7528\u6237\u5728\u5e94\u7528\u542f\u52a8\u540e\u6267\u884c\u4e00\u4e9b\u81ea\u5b9a\u4e49\u7684\u521d\u59cb\u5316\u4ee3\u7801\u3002\u81f3\u6b64\uff0cSpring Boot \u5bb9\u5668\u7684\u542f\u52a8\u8fc7\u7a0b\u5c31\u5168\u90e8\u5b8c\u6210\u4e86\u3002</p> <p>\u603b\u7ed3\u6765\u8bf4\uff0cSpring Boot \u7684\u542f\u52a8\u6d41\u7a0b\u662f\u4e00\u4e2a\u9ad8\u5ea6\u81ea\u52a8\u5316\u548c\u53ef\u6269\u5c55\u7684\u8fc7\u7a0b\uff0c\u5b83\u901a\u8fc7\u7ea6\u5b9a\u5927\u4e8e\u914d\u7f6e\u7684\u601d\u60f3\uff0c\u5229\u7528\u81ea\u52a8\u914d\u7f6e\u548c\u5185\u5d4c Web \u670d\u52a1\u5668\u7b49\u7279\u6027\uff0c\u6781\u5927\u5730\u7b80\u5316\u4e86 Spring \u5e94\u7528\u7684\u5f00\u53d1\u3001\u914d\u7f6e\u548c\u90e8\u7f72\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/spring%E4%B8%AD%E4%BA%8B%E5%8A%A1%E6%98%AF%E5%A6%82%E4%BD%95%E4%BC%A0%E6%92%AD%E7%9A%84%EF%BC%8C%E4%BA%8B%E5%8A%A1%E5%87%BA%E9%94%99%E6%97%B6%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%9B%9E%E6%BB%9A/","title":"Spring\u4e2d\u4e8b\u52a1\u662f\u5982\u4f55\u4f20\u64ad\u7684\uff0c\u4e8b\u52a1\u51fa\u9519\u65f6\u5982\u4f55\u5b9e\u73b0\u56de\u6eda","text":"<p>\u4e00\u3001\u4e8b\u52a1\u7684\u4f20\u64ad\u673a\u5236 (Transaction Propagation)</p> <p>\u4e8b\u52a1\u7684\u4f20\u64ad\u673a\u5236\uff0c\u5b9a\u4e49\u7684\u662f\u5f53\u4e00\u4e2a\u5e26\u6709\u4e8b\u52a1\u7684\u65b9\u6cd5\u88ab\u53e6\u4e00\u4e2a\u65b9\u6cd5\u8c03\u7528\u65f6\uff0c\u4e8b\u52a1\u5e94\u8be5\u5982\u4f55\u8868\u73b0\u3002\u6bd4\u5982\uff0c\u4e00\u4e2a\u5df2\u7ecf\u5904\u4e8e\u4e8b\u52a1\u4e2d\u7684\u65b9\u6cd5A\uff0c\u8c03\u7528\u4e86\u53e6\u4e00\u4e2a\u4e5f\u914d\u7f6e\u4e86\u4e8b\u52a1\u7684\u65b9\u6cd5B\uff0c\u90a3\u4e48\u65b9\u6cd5B\u662f\u5e94\u8be5\u52a0\u5165\u65b9\u6cd5A\u7684\u73b0\u6709\u4e8b\u52a1\uff0c\u8fd8\u662f\u5f00\u542f\u4e00\u4e2a\u81ea\u5df1\u7684\u65b0\u4e8b\u52a1\uff1f\u8fd9\u5c31\u662f\u4f20\u64ad\u673a\u5236\u8981\u89e3\u51b3\u7684\u95ee\u9898\u3002</p> <p>Spring\u901a\u8fc7<code>@Transactional</code>\u6ce8\u89e3\u7684<code>propagation</code>\u5c5e\u6027\u6765\u63a7\u5236\uff0c\u5b83\u6709\u4ee5\u4e0b\u51e0\u79cd\u6838\u5fc3\u7684\u4f20\u64ad\u884c\u4e3a\uff1a</p> <ol> <li> <p>REQUIRED (\u9ed8\u8ba4\u503c)</p> <p>\u8fd9\u662f\u6700\u5e38\u7528\u7684\u4f20\u64ad\u884c\u4e3a\u3002\u5982\u679c\u5f53\u524d\u5df2\u7ecf\u5b58\u5728\u4e00\u4e2a\u4e8b\u52a1\uff0c\u90a3\u4e48\u8be5\u65b9\u6cd5\u5c31\u4f1a\u52a0\u5165\u5230\u8fd9\u4e2a\u4e8b\u52a1\u4e2d\u6267\u884c\uff1b\u5982\u679c\u5f53\u524d\u6ca1\u6709\u4e8b\u52a1\uff0c\u5219\u4f1a\u4e3a\u81ea\u5df1\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u4e8b\u52a1\u3002\u8fd9\u786e\u4fdd\u4e86\u65b9\u6cd5\u603b\u662f\u5728\u4e00\u4e2a\u4e8b\u52a1\u5185\u6267\u884c\u3002</p> </li> <li> <p>REQUIRES_NEW</p> <p>\u8fd9\u4e2a\u884c\u4e3a\u8868\u793a\uff0c\u65e0\u8bba\u5f53\u524d\u662f\u5426\u5b58\u5728\u4e8b\u52a1\uff0c\u8be5\u65b9\u6cd5\u90fd\u4f1a\u4e3a\u81ea\u5df1\u521b\u5efa\u4e00\u4e2a\u5168\u65b0\u7684\u3001\u72ec\u7acb\u7684\u4e8b\u52a1\u3002\u5982\u679c\u5916\u90e8\u5df2\u7ecf\u5b58\u5728\u4e8b\u52a1\uff0c\u90a3\u4e48\u5916\u90e8\u4e8b\u52a1\u4f1a\u88ab\u6302\u8d77\uff0c\u76f4\u5230\u8fd9\u4e2a\u65b0\u4e8b\u52a1\u6267\u884c\u5b8c\u6210\u3002\u8fd9\u4e2a\u65b0\u4e8b\u52a1\u6709\u81ea\u5df1\u72ec\u7acb\u7684\u63d0\u4ea4\u548c\u56de\u6eda\uff0c\u4e0d\u53d7\u5916\u90e8\u4e8b\u52a1\u7684\u5f71\u54cd\u3002\u5b83\u5e38\u7528\u4e8e\u4e00\u4e9b\u9700\u8981\u72ec\u7acb\u63d0\u4ea4\u7684\u6838\u5fc3\u65e5\u5fd7\u8bb0\u5f55\u3001\u6d88\u606f\u53d1\u9001\u7b49\u573a\u666f\uff0c\u786e\u4fdd\u5373\u4f7f\u5916\u90e8\u4e3b\u4e1a\u52a1\u56de\u6eda\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u4e5f\u80fd\u6210\u529f\u3002</p> </li> <li> <p>NESTED</p> <p>\u5982\u679c\u5f53\u524d\u5b58\u5728\u4e00\u4e2a\u4e8b\u52a1\uff0c\u90a3\u4e48\u8be5\u65b9\u6cd5\u4f1a\u5f00\u542f\u4e00\u4e2a\u201c\u5d4c\u5957\u4e8b\u52a1\u201d\u3002\u8fd9\u4e2a\u5d4c\u5957\u4e8b\u52a1\u4f9d\u8d56\u4e8e\u5916\u90e8\u4e8b\u52a1\uff0c\u4f46\u5b83\u5185\u90e8\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u4fdd\u5b58\u70b9\uff08Savepoint\uff09\u6765\u5b9e\u73b0\u5c40\u90e8\u56de\u6eda\uff0c\u800c\u4e0d\u4f1a\u5f71\u54cd\u5230\u5916\u90e8\u4e8b\u52a1\u3002\u5982\u679c\u5f53\u524d\u6ca1\u6709\u4e8b\u52a1\uff0c\u5b83\u7684\u884c\u4e3a\u5c31\u548cREQUIRED\u4e00\u6837\uff0c\u521b\u5efa\u4e00\u4e2a\u65b0\u4e8b\u52a1\u3002\u5b83\u4e0eREQUIRES_NEW\u7684\u4e3b\u8981\u533a\u522b\u5728\u4e8e\uff0cNESTED\u7684\u63d0\u4ea4\u4f9d\u8d56\u4e8e\u5916\u90e8\u4e8b\u52a1\u7684\u6700\u7ec8\u63d0\u4ea4\uff0c\u800cREQUIRES_NEW\u662f\u5b8c\u5168\u72ec\u7acb\u7684\u3002</p> </li> <li> <p>SUPPORTS</p> <p>\u5982\u679c\u5f53\u524d\u5b58\u5728\u4e8b\u52a1\uff0c\u5219\u52a0\u5165\u8be5\u4e8b\u52a1\uff1b\u5982\u679c\u5f53\u524d\u6ca1\u6709\u4e8b\u52a1\uff0c\u5219\u4ee5\u975e\u4e8b\u52a1\u7684\u65b9\u5f0f\u7ee7\u7eed\u6267\u884c\u3002\u5b83\u8868\u793a\u201c\u652f\u6301\u201d\u4e8b\u52a1\uff0c\u4f46\u4e0d\u662f\u5f3a\u5236\u6027\u7684\u3002</p> </li> <li> <p>NOT_SUPPORTED</p> <p>\u4ee5\u975e\u4e8b\u52a1\u65b9\u5f0f\u6267\u884c\u64cd\u4f5c\u3002\u5982\u679c\u5f53\u524d\u5b58\u5728\u4e8b\u52a1\uff0c\u5219\u628a\u5f53\u524d\u4e8b\u52a1\u6302\u8d77\u3002</p> </li> <li> <p>MANDATORY</p> <p>\u5f3a\u5236\u8981\u6c42\u5f53\u524d\u5fc5\u987b\u5b58\u5728\u4e00\u4e2a\u4e8b\u52a1\uff0c\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u5219\u629b\u51fa\u5f02\u5e38\u3002</p> </li> <li> <p>NEVER</p> <p>\u5f3a\u5236\u8981\u6c42\u5f53\u524d\u4e0d\u80fd\u5b58\u5728\u4e8b\u52a1\uff0c\u5982\u679c\u5b58\u5728\uff0c\u5219\u629b\u51fa\u5f02\u5e38\u3002</p> </li> </ol> <p>\u4e8c\u3001\u4e8b\u52a1\u51fa\u9519\u65f6\u7684\u56de\u6eda\u5b9e\u73b0</p> <p>Spring\u4e8b\u52a1\u7684\u56de\u6eda\u662f\u57fa\u4e8eAOP\u548c\u5f02\u5e38\u673a\u5236\u5b9e\u73b0\u7684\u3002\u5f53\u4e00\u4e2a\u88ab<code>@Transactional</code>\u6ce8\u89e3\u7684\u65b9\u6cd5\u88ab\u8c03\u7528\u65f6\uff0c\u5b9e\u9645\u6267\u884c\u7684\u662fSpring\u901a\u8fc7\u52a8\u6001\u4ee3\u7406\u751f\u6210\u7684\u4ee3\u7406\u5bf9\u8c61\u3002</p> <p>\u56de\u6eda\u7684\u6d41\u7a0b\u5927\u81f4\u5982\u4e0b\uff1a</p> <ol> <li> <p>\u5f00\u542f\u4e8b\u52a1\uff1a\u5728\u76ee\u6807\u65b9\u6cd5\u6267\u884c\u4e4b\u524d\uff0cSpring\u7684\u4e8b\u52a1\u62e6\u622a\u5668\uff08<code>TransactionInterceptor</code>\uff09\u4f1a\u4ecb\u5165\uff0c\u6839\u636e<code>@Transactional</code>\u7684\u914d\u7f6e\uff0c\u901a\u8fc7\u4e8b\u52a1\u7ba1\u7406\u5668\uff08<code>PlatformTransactionManager</code>\uff09\u5f00\u542f\u4e00\u4e2a\u6570\u636e\u5e93\u4e8b\u52a1\uff08\u4f8b\u5982\uff0c\u6267\u884c<code>conn.setAutoCommit(false)</code>\uff09\u3002</p> </li> <li> <p>\u6267\u884c\u4e1a\u52a1\u903b\u8f91\uff1a\u63a5\u7740\uff0c\u4ee3\u7406\u5bf9\u8c61\u4f1a\u8c03\u7528\u6211\u4eec\u81ea\u5df1\u7f16\u5199\u7684\u539f\u59cb\u7684\u4e1a\u52a1\u65b9\u6cd5\u3002</p> </li> <li> <p>\u5f02\u5e38\u6355\u83b7\u4e0e\u5904\u7406\uff1a</p> <ul> <li> <p>\u5982\u679c\u4e1a\u52a1\u65b9\u6cd5\u987a\u5229\u6267\u884c\u5b8c\u6bd5\uff0c\u6ca1\u6709\u629b\u51fa\u4efb\u4f55\u5f02\u5e38\uff0c\u90a3\u4e48\u4e8b\u52a1\u62e6\u622a\u5668\u4f1a\u5728\u65b9\u6cd5\u6267\u884c\u540e\uff0c\u901a\u8fc7\u4e8b\u52a1\u7ba1\u7406\u5668\u63d0\u4ea4\u4e8b\u52a1\uff08\u6267\u884c<code>conn.commit()</code>\uff09\u3002</p> </li> <li> <p>\u5982\u679c\u4e1a\u52a1\u65b9\u6cd5\u5728\u6267\u884c\u8fc7\u7a0b\u4e2d\u629b\u51fa\u4e86\u5f02\u5e38\uff0c\u8fd9\u4e2a\u5f02\u5e38\u4f1a\u88ab\u629b\u51fa\u5230\u65b9\u6cd5\u5916\u90e8\uff0c\u6700\u7ec8\u88ab\u4e8b\u52a1\u62e6\u622a\u5668\u6355\u83b7\u3002</p> </li> </ul> </li> <li> <p>\u51b3\u5b9a\u662f\u5426\u56de\u6eda\uff1a\u8fd9\u662f\u5173\u952e\u7684\u4e00\u6b65\u3002\u4e8b\u52a1\u62e6\u622a\u5668\u6355\u83b7\u5230\u5f02\u5e38\u540e\uff0c\u5e76\u4e0d\u4f1a\u7acb\u5373\u56de\u6eda\uff0c\u800c\u662f\u4f1a\u68c0\u67e5\u8fd9\u4e2a\u5f02\u5e38\u7684\u7c7b\u578b\uff0c\u5e76\u6839\u636e<code>@Transactional</code>\u6ce8\u89e3\u7684\u914d\u7f6e\u6765\u51b3\u5b9a\u662f\u5426\u8981\u6267\u884c\u56de\u6eda\u64cd\u4f5c\u3002</p> <ul> <li> <p>\u9ed8\u8ba4\u89c4\u5219\uff1aSpring\u7684\u9ed8\u8ba4\u7b56\u7565\u662f\uff0c\u5f53\u6355\u83b7\u5230\u7684\u5f02\u5e38\u662f<code>RuntimeException</code>\uff08\u8fd0\u884c\u65f6\u5f02\u5e38\uff09\u6216<code>Error</code>\u65f6\uff0c\u5b83\u5c31\u4f1a\u6807\u8bb0\u5f53\u524d\u4e8b\u52a1\u4e3a\u201c\u4ec5\u56de\u6eda\u201d\uff08rollback-only\uff09\uff0c\u5e76\u6700\u7ec8\u6267\u884c\u56de\u6eda\u64cd\u4f5c\uff08\u6267\u884c<code>conn.rollback()</code>\uff09\u3002</p> </li> <li> <p>\u5bf9\u4e8e\u53d7\u68c0\u5f02\u5e38\uff08Checked Exception\uff0c\u5373\u975e<code>RuntimeException</code>\u7684<code>Exception</code>\u5b50\u7c7b\uff09\uff0cSpring\u9ed8\u8ba4\u662f\u4e0d\u4f1a\u89e6\u53d1\u56de\u6eda\u7684\u3002\u8fd9\u4e5f\u662f\u4e00\u4e2a\u5e38\u89c1\u7684\u5751\uff0c\u6bd4\u5982\u5728\u65b9\u6cd5\u91cc\u629b\u51fa\u4e86<code>IOException</code>\u6216\u81ea\u5b9a\u4e49\u7684<code>BusinessException</code>\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4e8b\u52a1\u4e0d\u4f1a\u56de\u6eda\u3002</p> </li> </ul> </li> <li> <p>\u81ea\u5b9a\u4e49\u56de\u6eda\u89c4\u5219\uff1a\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7<code>@Transactional</code>\u6ce8\u89e3\u7684<code>rollbackFor</code>\u548c<code>noRollbackFor</code>\u5c5e\u6027\u6765\u8986\u76d6\u9ed8\u8ba4\u89c4\u5219\u3002</p> <ul> <li> <p><code>rollbackFor</code>\uff1a\u6307\u5b9a\u4e00\u4e2a\u6216\u591a\u4e2a\u5f02\u5e38\u7c7b\uff0c\u5f53\u65b9\u6cd5\u629b\u51fa\u8fd9\u4e9b\u7c7b\u578b\u7684\u5f02\u5e38\u65f6\uff0c\u5373\u4f7f\u5b83\u4eec\u662f\u53d7\u68c0\u5f02\u5e38\uff0c\u4e8b\u52a1\u4e5f\u4f1a\u56de\u6eda\u3002\u4f8b\u5982\uff1a<code>@Transactional(rollbackFor = Exception.class)</code>\u8868\u793a\u4efb\u4f55\u5f02\u5e38\u90fd\u4f1a\u5bfc\u81f4\u56de\u6eda\u3002</p> </li> <li> <p><code>noRollbackFor</code>\uff1a\u6307\u5b9a\u4e00\u4e2a\u6216\u591a\u4e2a\u5f02\u5e38\u7c7b\uff0c\u5f53\u65b9\u6cd5\u629b\u51fa\u8fd9\u4e9b\u7c7b\u578b\u7684\u5f02\u5e38\u65f6\uff0c\u5373\u4f7f\u5b83\u4eec\u662f\u8fd0\u884c\u65f6\u5f02\u5e38\uff0c\u4e8b\u52a1\u4e5f\u4e0d\u4f1a\u56de\u6eda\u3002</p> </li> </ul> </li> </ol> <p>\u603b\u7ed3\u6765\u8bf4\uff0cSpring\u4e8b\u52a1\u7684\u4f20\u64ad\u673a\u5236\u51b3\u5b9a\u4e86\u4e8b\u52a1\u7684\u8fb9\u754c\u548c\u4e0a\u4e0b\u6587\uff0c\u800c\u5b83\u7684\u56de\u6eda\u5219\u662f\u4e00\u4e2a\u7531AOP\u4ee3\u7406\u6355\u83b7\u5f02\u5e38\uff0c\u5e76\u6839\u636e\u9884\u8bbe\u89c4\u5219\uff08\u9ed8\u8ba4\u6216\u81ea\u5b9a\u4e49\uff09\u6765\u51b3\u5b9a\u662f\u5426\u5411\u6570\u636e\u5e93\u53d1\u51fa<code>rollback</code>\u6307\u4ee4\u7684\u8fc7\u7a0b\u3002\u7406\u89e3\u8fd9\u4e24\u70b9\u5bf9\u4e8e\u7f16\u5199\u5065\u58ee\u7684\u3001\u4e8b\u52a1\u6b63\u786e\u7684\u4ee3\u7801\u81f3\u5173\u91cd\u8981\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/spring%E4%B8%AD%E6%9C%89%E5%93%AA%E4%BA%9B%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%E6%96%B9%E5%BC%8F/","title":"Spring\u4e2d\u6709\u54ea\u4e9b\u4f9d\u8d56\u6ce8\u5165\u65b9\u5f0f","text":"<p>\u4f9d\u8d56\u6ce8\u5165\u7684\u6838\u5fc3\u601d\u60f3\u662f\u4e00\u4e2a\u7ec4\u4ef6\uff08\u6bd4\u5982\u4e00\u4e2aService\u7c7b\uff09\u4e0d\u518d\u7531\u81ea\u5df1\u53bb\u521b\u5efa\u548c\u7ba1\u7406\u5b83\u6240\u4f9d\u8d56\u7684\u53e6\u4e00\u4e2a\u7ec4\u4ef6\uff08\u6bd4\u5982\u4e00\u4e2aRepository\u7c7b\uff09\uff0c\u800c\u662f\u5c06\u88ab\u4f9d\u8d56\u7684\u7ec4\u4ef6\u7684\u63a7\u5236\u6743\u4ea4\u7ed9\u5916\u90e8\u5bb9\u5668\uff08\u5373Spring IoC\u5bb9\u5668\uff09\u3002\u7ec4\u4ef6\u53ea\u9700\u8981\u58f0\u660e\u5b83\u9700\u8981\u4ec0\u4e48\uff0c\u5bb9\u5668\u5c31\u4f1a\u5728\u8fd0\u884c\u65f6\u5c06\u5bf9\u5e94\u7684\u5b9e\u4f8b\u6ce8\u5165\u7ed9\u5b83\u3002\u8fd9\u6837\u505a\u7684\u597d\u5904\u662f\u6781\u5927\u5730\u964d\u4f4e\u4e86\u7ec4\u4ef6\u4e4b\u95f4\u7684\u8026\u5408\u5ea6\uff0c\u4f7f\u5f97\u4ee3\u7801\u66f4\u6613\u4e8e\u6d4b\u8bd5\u548c\u7ef4\u62a4\u3002</p> <p>Spring\u4e3b\u8981\u63d0\u4f9b\u4e86\u4ee5\u4e0b\u4e09\u79cd\u4f9d\u8d56\u6ce8\u5165\u7684\u65b9\u5f0f\uff1a</p> <p>1.\u6784\u9020\u51fd\u6570\u6ce8\u5165 (Constructor Injection)</p> <p>\u8fd9\u662fSpring\u56e2\u961f\u76ee\u524d\u6700\u63a8\u8350\u7684\u6ce8\u5165\u65b9\u5f0f\u3002</p> <ul> <li> <p>\u5b9e\u73b0\u65b9\u5f0f\uff1a</p> <p>\u5728\u7c7b\u7684\u6784\u9020\u51fd\u6570\u4e2d\u58f0\u660e\u9700\u8981\u4f9d\u8d56\u7684\u7ec4\u4ef6\u4f5c\u4e3a\u53c2\u6570\u3002Spring\u5bb9\u5668\u5728\u521b\u5efa\u8fd9\u4e2a\u7c7b\u7684Bean\u5b9e\u4f8b\u65f6\uff0c\u4f1a\u81ea\u52a8\u67e5\u627e\u5e76\u4f20\u5165\u76f8\u5e94\u7684\u4f9d\u8d56Bean\u3002</p> </li> </ul> <pre><code>@Service\npublic class MyService {\n\n    private final UserRepository userRepository;\n\n    // \u5982\u679c\u53ea\u6709\u4e00\u4e2a\u6784\u9020\u51fd\u6570\uff0c@Autowired\u6ce8\u89e3\u53ef\u4ee5\u7701\u7565\n    public MyService(UserRepository userRepository) {\n        this.userRepository = userRepository;\n    }\n\n    // ... \u4e1a\u52a1\u65b9\u6cd5\n}\n</code></pre> <ul> <li> <p>\u4f18\u70b9\uff1a</p> <ol> <li> <p>\u4fdd\u8bc1\u4f9d\u8d56\u4e0d\u53ef\u53d8\uff1a\u53ef\u4ee5\u5c06\u4f9d\u8d56\u5b57\u6bb5\u58f0\u660e\u4e3a final\uff0c\u786e\u4fdd\u4e00\u65e6\u6ce8\u5165\u5c31\u4e0d\u4f1a\u88ab\u4fee\u6539\uff0c\u589e\u5f3a\u4e86\u7a0b\u5e8f\u7684\u7a33\u5b9a\u6027\u548c\u7ebf\u7a0b\u5b89\u5168\u3002</p> </li> <li> <p>\u4fdd\u8bc1\u5bf9\u8c61\u5b8c\u6574\u6027\uff1a\u4f9d\u8d56\u5728\u5bf9\u8c61\u6784\u9020\u65f6\u5fc5\u987b\u88ab\u63d0\u4f9b\uff0c\u8fd9\u610f\u5473\u7740\u5bf9\u8c61\u5728\u521b\u5efa\u540e\u4e00\u5b9a\u662f\u5904\u4e8e\u4e00\u4e2a\u5b8c\u6574\u3001\u53ef\u7528\u7684\u72b6\u6001\uff0c\u4e0d\u4f1a\u51fa\u73b0\u4f9d\u8d56\u4e3anull\u7684\u60c5\u51b5\u3002</p> </li> <li> <p>\u6e05\u6670\u5730\u66b4\u9732\u4f9d\u8d56\u5173\u7cfb\uff1a\u7c7b\u7684\u6240\u6709\u5fc5\u8981\u4f9d\u8d56\u90fd\u5728\u6784\u9020\u51fd\u6570\u4e2d\u4e00\u76ee\u4e86\u7136\u3002\u5982\u679c\u6784\u9020\u51fd\u6570\u53c2\u6570\u8fc7\u591a\uff0c\u4e5f\u63d0\u9192\u6211\u4eec\u8fd9\u4e2a\u7c7b\u53ef\u80fd\u8fdd\u53cd\u4e86\u5355\u4e00\u804c\u8d23\u539f\u5219\uff0c\u9700\u8981\u91cd\u6784\u3002</p> </li> </ol> </li> <li> <p>\u7f3a\u70b9\uff1a</p> <ol> <li> <p>\u4e0d\u652f\u6301\u5faa\u73af\u4f9d\u8d56\uff1a\u5982\u679c\u7c7bA\u7684\u6784\u9020\u51fd\u6570\u9700\u8981B\uff0c\u540c\u65f6\u7c7bB\u7684\u6784\u9020\u51fd\u6570\u4e5f\u9700\u8981A\uff0cSpring\u65e0\u6cd5\u89e3\u51b3\u8fd9\u79cd\u6784\u9020\u5668\u5faa\u73af\u4f9d\u8d56\uff0c\u4f1a\u629b\u51fa\u5f02\u5e38\u3002\u4f46\u8fd9\u901a\u5e38\u88ab\u8ba4\u4e3a\u662f\u4e00\u4e2a\u4f18\u70b9\uff0c\u56e0\u4e3a\u5b83\u80fd\u5e2e\u52a9\u6211\u4eec\u53ca\u65e9\u53d1\u73b0\u8bbe\u8ba1\u4e0a\u7684\u95ee\u9898\u3002</p> </li> <li> <p>\u4ee3\u7801\u53ef\u80fd\u7a0d\u663e\u5197\u957f\u3002</p> </li> </ol> </li> </ul> <p>2.Setter\u65b9\u6cd5\u6ce8\u5165 (Setter Injection)</p> <ul> <li> <p>\u5b9e\u73b0\u65b9\u5f0f\uff1a</p> <p>\u5728\u7c7b\u4e2d\u4e3a\u9700\u8981\u6ce8\u5165\u7684\u4f9d\u8d56\u63d0\u4f9b\u4e00\u4e2a\u516c\u5f00\u7684setter\u65b9\u6cd5\uff0c\u5e76\u901a\u5e38\u5728\u8be5\u65b9\u6cd5\u4e0a\u6807\u6ce8@Autowired\u3002Spring\u5bb9\u5668\u4f1a\u5148\u8c03\u7528\u7c7b\u7684\u65e0\u53c2\u6784\u9020\u51fd\u6570\u521b\u5efa\u5b9e\u4f8b\uff0c\u7136\u540e\u518d\u8c03\u7528setter\u65b9\u6cd5\u6765\u6ce8\u5165\u4f9d\u8d56\u3002</p> </li> </ul> <pre><code>@Service\npublic class MyService {\n\n    private UserRepository userRepository;\n\n    @Autowired\n    public void setUserRepository(UserRepository userRepository) {\n        this.userRepository = userRepository;\n    }\n\n    // ... \u4e1a\u52a1\u65b9\u6cd5\n}\n</code></pre> <ul> <li> <p>\u4f18\u70b9\uff1a</p> <ol> <li> <p>\u9002\u7528\u4e8e\u53ef\u9009\u4f9d\u8d56\uff1a\u5bf9\u4e8e\u975e\u5fc5\u9700\u7684\u4f9d\u8d56\uff0c\u53ef\u4ee5\u4f7f\u7528setter\u6ce8\u5165\uff0c\u5373\u4f7f\u6ca1\u6709\u63d0\u4f9b\u8fd9\u4e2a\u4f9d\u8d56\uff0c\u5bf9\u8c61\u672c\u8eab\u4e5f\u80fd\u88ab\u521b\u5efa\u3002</p> </li> <li> <p>\u53ef\u4ee5\u89e3\u51b3\u5faa\u73af\u4f9d\u8d56\uff1aSpring\u53ef\u4ee5\u901a\u8fc7\u5148\u5b9e\u4f8b\u5316Bean\uff08\u6b64\u65f6\u4f9d\u8d56\u4e3anull\uff09\uff0c\u7136\u540e\u518d\u901a\u8fc7setter\u65b9\u6cd5\u76f8\u4e92\u6ce8\u5165\uff0c\u4ece\u800c\u89e3\u51b3\u5faa\u73af\u4f9d\u8d56\u95ee\u9898\u3002</p> </li> </ol> </li> <li> <p>\u7f3a\u70b9\uff1a</p> <ol> <li> <p>\u65e0\u6cd5\u4fdd\u8bc1\u5bf9\u8c61\u5b8c\u6574\u6027\uff1a\u5bf9\u8c61\u5728\u88ab\u521b\u5efa\u540e\uff0c\u5176\u4f9d\u8d56\u53ef\u80fd\u4ecd\u662fnull\uff0c\u53ea\u6709\u5728setter\u65b9\u6cd5\u88ab\u8c03\u7528\u540e\u624d\u5b8c\u6574\u3002</p> </li> <li> <p>\u4f9d\u8d56\u53ef\u53d8\uff1asetter\u65b9\u6cd5\u53ef\u4ee5\u88ab\u591a\u6b21\u8c03\u7528\uff0c\u5bfc\u81f4\u5bf9\u8c61\u7684\u4f9d\u8d56\u5728\u8fd0\u884c\u65f6\u88ab\u6539\u53d8\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5f15\u5165\u4e0d\u786e\u5b9a\u6027\u3002</p> </li> </ol> </li> </ul> <p>3.\u5b57\u6bb5\u6ce8\u5165 (Field Injection)</p> <p>\u8fd9\u662f\u8fc7\u53bb\u975e\u5e38\u6d41\u884c\uff0c\u4f46\u73b0\u5728\u5df2\u4e0d\u88ab\u63a8\u8350\u7684\u6ce8\u5165\u65b9\u5f0f\u3002</p> <ul> <li> <p>\u5b9e\u73b0\u65b9\u5f0f\uff1a</p> <p>\u76f4\u63a5\u5728\u7c7b\u7684\u6210\u5458\u5b57\u6bb5\u4e0a\u4f7f\u7528@Autowired\u6ce8\u89e3\u3002</p> </li> </ul> <pre><code>@Service\npublic class MyService {\n\n    @Autowired\n    private UserRepository userRepository;\n\n    // ... \u4e1a\u52a1\u65b9\u6cd5\n}\n</code></pre> <ul> <li> <p>\u4f18\u70b9\uff1a</p> <ol> <li>\u4ee3\u7801\u6700\u7b80\u6d01\uff1a\u5199\u6cd5\u975e\u5e38\u7b80\u5355\uff0c\u7701\u53bb\u4e86\u6784\u9020\u51fd\u6570\u6216setter\u65b9\u6cd5\u7684\u4ee3\u7801\u3002</li> </ol> </li> <li> <p>\u7f3a\u70b9\uff1a</p> <ol> <li> <p>\u4e0eIoC\u5bb9\u5668\u5f3a\u8026\u5408\uff1a\u88ab\u6ce8\u5165\u7684\u5b57\u6bb5\u901a\u5e38\u662f\u79c1\u6709\u7684\uff0c\u8fd9\u610f\u5473\u7740\u5982\u679c\u4e0d\u901a\u8fc7Spring\u5bb9\u5668\uff0c\u5c31\u65e0\u6cd5\u65b9\u4fbf\u5730\u521b\u5efa\u8fd9\u4e2a\u7c7b\u7684\u5b9e\u4f8b\u5e76\u4e3a\u5176\u8bbe\u7f6e\u4f9d\u8d56\uff08\u5c24\u5176\u662f\u5728\u5355\u5143\u6d4b\u8bd5\u4e2d\uff09\uff0c\u5fc5\u987b\u501f\u52a9\u53cd\u5c04\u3002</p> </li> <li> <p>\u9690\u85cf\u4f9d\u8d56\u5173\u7cfb\uff1a\u7c7b\u7684\u4f9d\u8d56\u5173\u7cfb\u88ab\u9690\u85cf\u5728\u5b9e\u73b0\u7ec6\u8282\u4e2d\uff0c\u4ece\u7c7b\u7684\u516c\u5f00\u5951\u7ea6\uff08\u6784\u9020\u51fd\u6570\u548c\u65b9\u6cd5\uff09\u4e0a\u770b\u4e0d\u51fa\u5b83\u9700\u8981\u54ea\u4e9b\u4f9d\u8d56\u3002</p> </li> <li> <p>\u65e0\u6cd5\u4fdd\u8bc1\u4f9d\u8d56\u4e0d\u53ef\u53d8\uff1a\u4e0d\u80fd\u5c06\u5b57\u6bb5\u58f0\u660e\u4e3a final\u3002</p> </li> <li> <p>\u5bb9\u6613\u63a9\u76d6\u8bbe\u8ba1\u95ee\u9898\uff1a\u5b83\u540c\u6837\u53ef\u4ee5\u89e3\u51b3\u5faa\u73af\u4f9d\u8d56\uff0c\u4f46\u8fd9\u5f80\u5f80\u4f1a\u63a9\u76d6\u4ee3\u7801\u4e2d\u5b58\u5728\u7684\u574f\u5473\u9053\u3002</p> </li> </ol> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/spring%E4%BA%8B%E5%8A%A1%EF%BC%8Ca%E8%B0%83%E7%94%A8b%EF%BC%8Cb%E8%B0%83%E7%94%A8c%EF%BC%8C%E6%80%BB%E5%85%B1%E6%9C%89%E5%87%A0%E4%B8%AA%E4%BA%8B%E5%8A%A1/","title":"Spring\u4e8b\u52a1\uff0ca\u8c03\u7528b\uff0cb\u8c03\u7528c\uff0c\u603b\u5171\u6709\u51e0\u4e2a\u4e8b\u52a1","text":"<p>\u5728Spring\u4e8b\u52a1\u4e2d\uff0c\u5f53\u65b9\u6cd5a\u8c03\u7528b\uff0cb\u518d\u8c03\u7528c\u65f6\uff0c\u603b\u5171\u6709\u51e0\u4e2a\u4e8b\u52a1\u5e76\u4e0d\u662f\u4e00\u4e2a\u56fa\u5b9a\u7684\u6570\u5b57\uff0c\u800c\u662f\u53d6\u51b3\u4e8e\u6bcf\u4e2a\u65b9\u6cd5\u4e0a@Transactional\u6ce8\u89e3\u7684\u4e8b\u52a1\u4f20\u64ad\u673a\u5236\uff08Transaction Propagation\uff09\u914d\u7f6e\u3002</p> <p>\u4e8b\u52a1\u4f20\u64ad\u673a\u5236\u5b9a\u4e49\u4e86\u5f53\u4e00\u4e2a\u4e8b\u52a1\u65b9\u6cd5\u88ab\u53e6\u4e00\u4e2a\u4e8b\u52a1\u65b9\u6cd5\u8c03\u7528\u65f6\uff0c\u4e8b\u52a1\u5e94\u8be5\u5982\u4f55\u4f20\u64ad\u3002 \u4ee5\u4e0b\u662f\u51e0\u79cd\u5e38\u89c1\u7684\u573a\u666f\uff1a</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/spring%E4%BA%8B%E5%8A%A1%EF%BC%8Ca%E8%B0%83%E7%94%A8b%EF%BC%8Cb%E8%B0%83%E7%94%A8c%EF%BC%8C%E6%80%BB%E5%85%B1%E6%9C%89%E5%87%A0%E4%B8%AA%E4%BA%8B%E5%8A%A1/#_1","title":"\u573a\u666f\u4e00\uff1a\u5168\u90e8\u4f7f\u7528\u9ed8\u8ba4\u914d\u7f6e (\u6700\u5e38\u89c1)","text":"<p>\u5982\u679c\u65b9\u6cd5a\u3001b\u3001c\u90fd\u4f7f\u7528\u4e86@Transactional\u6ce8\u89e3\uff0c\u5e76\u4e14\u6ca1\u6709\u6307\u5b9a\u4f20\u64ad\u673a\u5236\uff0c\u90a3\u4e48\u5b83\u4eec\u90fd\u5c06\u4f7f\u7528\u9ed8\u8ba4\u7684<code>Propagation.REQUIRED</code>\u3002</p> <ul> <li><code>Propagation.REQUIRED</code>: \u5982\u679c\u5f53\u524d\u5b58\u5728\u4e8b\u52a1\uff0c\u5219\u52a0\u5165\u8be5\u4e8b\u52a1\uff1b\u5982\u679c\u5f53\u524d\u6ca1\u6709\u4e8b\u52a1\uff0c\u5219\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u4e8b\u52a1\u3002</li> </ul> <p>\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff1a 1.  \u5916\u90e8\u8c03\u7528\u65b9\u6cd5a\u65f6\uff0cSpring\u4f1a\u68c0\u67e5\u5f53\u524d\u662f\u5426\u5b58\u5728\u4e8b\u52a1\u3002\u5047\u8bbe\u6ca1\u6709\uff0c\u5c31\u4f1a\u4e3aa\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u4e8b\u52a1\u3002 2.  \u65b9\u6cd5a\u5728\u6267\u884c\u8fc7\u7a0b\u4e2d\u8c03\u7528\u65b9\u6cd5b\u3002Spring\u68c0\u67e5\u5230b\u7684\u4f20\u64ad\u673a\u5236\u662f<code>REQUIRED</code>\uff0c\u5e76\u4e14\u5f53\u524d\u5df2\u7ecf\u5b58\u5728\u4e00\u4e2a\u7531a\u521b\u5efa\u7684\u4e8b\u52a1\uff0c\u6240\u4ee5b\u4f1a\u52a0\u5165\u5230a\u7684\u4e8b\u52a1\u4e2d\u3002 3.  \u65b9\u6cd5b\u5728\u6267\u884c\u8fc7\u7a0b\u4e2d\u8c03\u7528\u65b9\u6cd5c\u3002\u540c\u6837\uff0cc\u4e5f\u4f1a\u52a0\u5165\u5230a\u7684\u4e8b\u52a1\u4e2d\u3002</p> <p>\u7ed3\u8bba\uff1a\u5728\u8fd9\u79cd\u6700\u5e38\u89c1\u7684\u60c5\u51b5\u4e0b\uff0c\u6574\u4e2a\u8c03\u7528\u94fe\u4e2d\u53ea\u6709\u4e00\u4e2a\u4e8b\u52a1\u3002\u5982\u679c\u4efb\u4f55\u4e00\u4e2a\u65b9\u6cd5\uff08a\u3001b\u6216c\uff09\u629b\u51fa\u5f02\u5e38\uff0c\u6574\u4e2a\u4e8b\u52a1\u5c06\u56de\u6eda\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/spring%E4%BA%8B%E5%8A%A1%EF%BC%8Ca%E8%B0%83%E7%94%A8b%EF%BC%8Cb%E8%B0%83%E7%94%A8c%EF%BC%8C%E6%80%BB%E5%85%B1%E6%9C%89%E5%87%A0%E4%B8%AA%E4%BA%8B%E5%8A%A1/#_2","title":"\u573a\u666f\u4e8c\uff1a\u521b\u5efa\u65b0\u4e8b\u52a1","text":"<p>\u5982\u679c\u67d0\u4e2a\u65b9\u6cd5\u7684\u4f20\u64ad\u673a\u5236\u88ab\u8bbe\u7f6e\u4e3a<code>Propagation.REQUIRES_NEW</code>\uff0c\u60c5\u51b5\u5c31\u4f1a\u4e0d\u540c\u3002</p> <ul> <li><code>Propagation.REQUIRES_NEW</code>: \u6bcf\u6b21\u90fd\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u4e8b\u52a1\u3002\u5982\u679c\u5f53\u524d\u5df2\u7ecf\u5b58\u5728\u4e00\u4e2a\u4e8b\u52a1\uff0c\u90a3\u4e48\u4f1a\u628a\u5f53\u524d\u4e8b\u52a1\u6302\u8d77\u3002</li> </ul> <p>\u8ba9\u6211\u4eec\u770b\u4e00\u4e2a\u4f8b\u5b50\uff1a *   \u65b9\u6cd5a: <code>@Transactional(propagation = Propagation.REQUIRED)</code> *   \u65b9\u6cd5b: <code>@Transactional(propagation = Propagation.REQUIRES_NEW)</code> *   \u65b9\u6cd5c: <code>@Transactional(propagation = Propagation.REQUIRED)</code></p> <p>\u6267\u884c\u6d41\u7a0b\u5982\u4e0b\uff1a 1.  \u5916\u90e8\u8c03\u7528a\uff0ca\u521b\u5efa\u4e86\u4e00\u4e2a\u4e8b\u52a1\uff08\u6211\u4eec\u79f0\u4e4b\u4e3a\u4e8b\u52a1A\uff09\u3002 2.  a\u8c03\u7528b\u3002\u7531\u4e8eb\u7684\u4f20\u64ad\u673a\u5236\u662f<code>REQUIRES_NEW</code>\uff0cSpring\u4f1a\u6302\u8d77\u4e8b\u52a1A\uff0c\u5e76\u4e3ab\u521b\u5efa\u4e00\u4e2a\u5168\u65b0\u7684\u4e8b\u52a1\uff08\u6211\u4eec\u79f0\u4e4b\u4e3a\u4e8b\u52a1B\uff09\u3002 3.  b\u8c03\u7528c\u3002\u7531\u4e8ec\u7684\u4f20\u64ad\u673a\u5236\u662f<code>REQUIRED</code>\uff0c\u5b83\u4f1a\u52a0\u5165\u5f53\u524d\u6b63\u5728\u6267\u884c\u7684\u4e8b\u52a1\uff0c\u4e5f\u5c31\u662f\u4e8b\u52a1B\u3002 4.  c\u6267\u884c\u5b8c\u6bd5\uff0c\u7136\u540eb\u6267\u884c\u5b8c\u6bd5\u3002\u4e8b\u52a1B\u4f1a\u9996\u5148\u63d0\u4ea4\u3002 5.  \u4e4b\u540e\uff0c\u6302\u8d77\u7684\u4e8b\u52a1A\u4f1a\u6062\u590d\uff0c\u7ee7\u7eed\u6267\u884ca\u65b9\u6cd5\u4e2d\u5269\u4f59\u7684\u903b\u8f91\uff0c\u6700\u540e\u4e8b\u52a1A\u63d0\u4ea4\u3002</p> <p>\u7ed3\u8bba\uff1a\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u603b\u5171\u4f1a\u521b\u5efa\u4e24\u4e2a\u4e8b\u52a1\uff08\u4e8b\u52a1A\u548c\u4e8b\u52a1B\uff09\u3002\u4e8b\u52a1B\u7684\u6210\u529f\u6216\u5931\u8d25\u4e0d\u4f1a\u5f71\u54cd\u4e8b\u52a1A\uff08\u9664\u975eb\u65b9\u6cd5\u5c06\u5f02\u5e38\u7ee7\u7eed\u5411\u4e0a\u629b\u51fa\u7ed9\u4e86a\uff09\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/spring%E4%BA%8B%E5%8A%A1%EF%BC%8Ca%E8%B0%83%E7%94%A8b%EF%BC%8Cb%E8%B0%83%E7%94%A8c%EF%BC%8C%E6%80%BB%E5%85%B1%E6%9C%89%E5%87%A0%E4%B8%AA%E4%BA%8B%E5%8A%A1/#_3","title":"\u573a\u666f\u4e09\uff1a\u6bcf\u4e2a\u65b9\u6cd5\u90fd\u521b\u5efa\u65b0\u4e8b\u52a1","text":"<p>\u5982\u679ca\u3001b\u3001c\u7684\u4f20\u64ad\u673a\u5236\u90fd\u914d\u7f6e\u4e3a<code>Propagation.REQUIRES_NEW</code>\uff0c\u90a3\u4e48\uff1a 1.  a\u8c03\u7528\u65f6\uff0c\u521b\u5efa\u4e8b\u52a1A\u3002 2.  a\u8c03\u7528b\u65f6\uff0c\u6302\u8d77\u4e8b\u52a1A\uff0c\u521b\u5efa\u65b0\u7684\u4e8b\u52a1B\u3002 3.  b\u8c03\u7528c\u65f6\uff0c\u6302\u8d77\u4e8b\u52a1B\uff0c\u521b\u5efa\u65b0\u7684\u4e8b\u52a1C\u3002</p> <p>\u7ed3\u8bba\uff1a\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u603b\u5171\u4f1a\u521b\u5efa\u4e09\u4e2a\u72ec\u7acb\u7684\u4e8b\u52a1\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/spring%E4%BA%8B%E5%8A%A1%EF%BC%8Ca%E8%B0%83%E7%94%A8b%EF%BC%8Cb%E8%B0%83%E7%94%A8c%EF%BC%8C%E6%80%BB%E5%85%B1%E6%9C%89%E5%87%A0%E4%B8%AA%E4%BA%8B%E5%8A%A1/#_4","title":"\u5176\u4ed6\u4f20\u64ad\u673a\u5236","text":"<p>\u9664\u4e86<code>REQUIRED</code>\u548c<code>REQUIRES_NEW</code>\uff0cSpring\u8fd8\u63d0\u4f9b\u4e86\u5176\u4ed6\u51e0\u79cd\u4f20\u64ad\u673a\u5236\uff0c\u5982\uff1a *   <code>NESTED</code>: \u5982\u679c\u5f53\u524d\u5b58\u5728\u4e8b\u52a1\uff0c\u5219\u5728\u5d4c\u5957\u4e8b\u52a1\u5185\u6267\u884c\u3002\u5d4c\u5957\u4e8b\u52a1\u662f\u5916\u90e8\u4e8b\u52a1\u7684\u4e00\u90e8\u5206\uff0c\u4f46\u53ef\u4ee5\u72ec\u7acb\u4e8e\u5916\u90e8\u4e8b\u52a1\u8fdb\u884c\u56de\u6eda\u3002 *   <code>SUPPORTS</code>: \u5982\u679c\u5f53\u524d\u5b58\u5728\u4e8b\u52a1\uff0c\u5219\u52a0\u5165\u8be5\u4e8b\u52a1\uff1b\u5982\u679c\u5f53\u524d\u6ca1\u6709\u4e8b\u52a1\uff0c\u5219\u4ee5\u975e\u4e8b\u52a1\u7684\u65b9\u5f0f\u7ee7\u7eed\u8fd0\u884c\u3002 *   <code>NOT_SUPPORTED</code>: \u4ee5\u975e\u4e8b\u52a1\u65b9\u5f0f\u6267\u884c\u64cd\u4f5c\u3002\u5982\u679c\u5f53\u524d\u5b58\u5728\u4e8b\u52a1\uff0c\u5219\u628a\u5b83\u6302\u8d77\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/spring%E4%BA%8B%E5%8A%A1%EF%BC%8Ca%E8%B0%83%E7%94%A8b%EF%BC%8Cb%E8%B0%83%E7%94%A8c%EF%BC%8C%E6%80%BB%E5%85%B1%E6%9C%89%E5%87%A0%E4%B8%AA%E4%BA%8B%E5%8A%A1/#_5","title":"\u91cd\u8981\u63d0\u9192\uff1a\u540c\u7c7b\u4e2d\u7684\u65b9\u6cd5\u8c03\u7528","text":"<p>\u4e00\u4e2a\u5e38\u89c1\u7684\u9677\u9631\u662f\uff0c\u5982\u679c\u65b9\u6cd5a\u3001b\u3001c\u5728\u540c\u4e00\u4e2a\u7c7b\u4e2d\uff0c\u5e76\u4e14\u65b9\u6cd5a\u6ca1\u6709\u88ab@Transactional\u6ce8\u89e3\uff0c\u90a3\u4e48\u76f4\u63a5\u901a\u8fc7<code>this</code>\u5173\u952e\u5b57\u4ecea\u8c03\u7528b\u548cc\uff0c\u5373\u4f7fb\u548cc\u6709@Transactional\u6ce8\u89e3\uff0c\u4e8b\u52a1\u4e5f\u4e0d\u4f1a\u751f\u6548\u3002\u8fd9\u662f\u56e0\u4e3aSpring\u7684\u4e8b\u52a1\u7ba1\u7406\u662f\u57fa\u4e8e\u4ee3\u7406\u5b9e\u73b0\u7684\uff0c\u5185\u90e8\u65b9\u6cd5\u8c03\u7528\u4f1a\u7ed5\u8fc7\u4ee3\u7406\uff0c\u4ece\u800c\u5bfc\u81f4\u4e8b\u52a1\u6ce8\u89e3\u5931\u6548\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/spring%E5%90%AF%E5%8A%A8%E9%98%B6%E6%AE%B5%E4%BC%9A%E5%8F%91%E7%94%9F%E4%BB%80%E4%B9%88/","title":"Spring\u542f\u52a8\u9636\u6bb5\u4f1a\u53d1\u751f\u4ec0\u4e48","text":""},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/spring%E5%90%AF%E5%8A%A8%E9%98%B6%E6%AE%B5%E4%BC%9A%E5%8F%91%E7%94%9F%E4%BB%80%E4%B9%88/#1-springapplicationrun","title":"1. \u542f\u52a8\u5165\u53e3\uff1a<code>SpringApplication.run()</code>","text":"<p>\u4e00\u5207\u59cb\u4e8e\u5e94\u7528\u7a0b\u5e8f\u4e3b\u7c7b\u4e2d\u7684 <code>main</code> \u65b9\u6cd5\uff0c\u5176\u4e2d\u8c03\u7528\u4e86 <code>SpringApplication.run()</code>\u3002 \u8fd9\u4e2a\u9759\u6001\u65b9\u6cd5\u662f\u6574\u4e2a Spring Boot \u5e94\u7528\u7a0b\u5e8f\u7684\u5165\u53e3\u70b9\uff0c\u5b83\u8d1f\u8d23\u5f15\u5bfc\u6574\u4e2a\u542f\u52a8\u8fc7\u7a0b\u3002 \u5728\u8fd9\u4e2a\u9636\u6bb5\uff0cSpring Boot \u4f1a\uff1a</p> <ul> <li>\u521b\u5efa\u4e00\u4e2a <code>SpringApplication</code> \u5b9e\u4f8b: \u8fd9\u4e2a\u5b9e\u4f8b\u7528\u4e8e\u914d\u7f6e\u548c\u542f\u52a8\u5e94\u7528\u7a0b\u5e8f\u3002</li> <li>\u63a8\u65ad\u5e94\u7528\u7a0b\u5e8f\u7c7b\u578b: Spring Boot \u4f1a\u6839\u636e\u7c7b\u8def\u5f84\u4e0b\u7684\u4f9d\u8d56\u6765\u5224\u65ad\u5e94\u7528\u7a0b\u5e8f\u7684\u7c7b\u578b\uff0c\u4f8b\u5982\uff0c\u5982\u679c\u5b58\u5728 <code>spring-boot-starter-web</code>\uff0c\u5219\u4f1a\u521b\u5efa\u9002\u7528\u4e8e Web \u5e94\u7528\u7a0b\u5e8f\u7684\u4e0a\u4e0b\u6587\u3002</li> <li>\u52a0\u8f7d <code>ApplicationContextInitializer</code> \u548c <code>ApplicationListener</code>: \u4ece <code>META-INF/spring.factories</code> \u6587\u4ef6\u4e2d\u52a0\u8f7d\u5e76\u6ce8\u518c\u521d\u59cb\u5668\u548c\u76d1\u542c\u5668\uff0c\u7528\u4e8e\u5728\u542f\u52a8\u8fc7\u7a0b\u7684\u4e0d\u540c\u9636\u6bb5\u8fdb\u884c\u56de\u8c03\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/spring%E5%90%AF%E5%8A%A8%E9%98%B6%E6%AE%B5%E4%BC%9A%E5%8F%91%E7%94%9F%E4%BB%80%E4%B9%88/#2-applicationcontext","title":"2. \u521b\u5efa\u548c\u51c6\u5907 <code>ApplicationContext</code>","text":"<p><code>ApplicationContext</code> \u662f Spring \u6846\u67b6\u7684\u6838\u5fc3\uff0c\u5b83\u662f\u4e00\u4e2a\u63a7\u5236\u53cd\u8f6c (IoC) \u5bb9\u5668\uff0c\u8d1f\u8d23\u7ba1\u7406\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u6240\u6709\u5bf9\u8c61\uff08\u79f0\u4e3a Bean\uff09\u3002 Spring Boot \u5728\u542f\u52a8\u8fc7\u7a0b\u4e2d\u4f1a\u521b\u5efa\u4e00\u4e2a <code>ApplicationContext</code> \u5b9e\u4f8b\u3002</p> <ul> <li>\u521b\u5efa\u5e94\u7528\u4e0a\u4e0b\u6587: \u6839\u636e\u5e94\u7528\u7a0b\u5e8f\u7684\u7c7b\u578b\uff08Web\u3001\u54cd\u5e94\u5f0f\u6216\u975e Web\uff09\uff0cSpring Boot \u4f1a\u521b\u5efa\u4e0d\u540c\u7c7b\u578b\u7684 <code>ApplicationContext</code>\u3002</li> <li>\u73af\u5883\u51c6\u5907: Spring Boot \u4f1a\u51c6\u5907\u5e94\u7528\u7a0b\u5e8f\u7684\u73af\u5883\uff0c\u5305\u62ec\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6\uff08\u5982 <code>application.properties</code> \u6216 <code>application.yml</code>\uff09\u3001\u7cfb\u7edf\u5c5e\u6027\u548c\u73af\u5883\u53d8\u91cf\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/spring%E5%90%AF%E5%8A%A8%E9%98%B6%E6%AE%B5%E4%BC%9A%E5%8F%91%E7%94%9F%E4%BB%80%E4%B9%88/#3-bean","title":"3. \u81ea\u52a8\u914d\u7f6e\u4e0e Bean \u7684\u5b9a\u4e49","text":"<p>Spring Boot \u7684\u4e00\u4e2a\u6838\u5fc3\u7279\u6027\u662f\u81ea\u52a8\u914d\u7f6e\u3002 \u5728\u8fd9\u4e2a\u9636\u6bb5\uff0cSpring Boot \u4f1a\uff1a</p> <ul> <li>\u626b\u63cf\u7c7b\u8def\u5f84: \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cSpring Boot \u4f1a\u626b\u63cf\u4e3b\u5e94\u7528\u7a0b\u5e8f\u7c7b\u6240\u5728\u5305\u53ca\u5176\u5b50\u5305\u4e0b\u7684\u7ec4\u4ef6\uff08\u7528 <code>@Component</code>, <code>@Service</code>, <code>@Repository</code>, <code>@Controller</code> \u7b49\u6ce8\u89e3\u7684\u7c7b\uff09\u3002</li> <li>\u89e6\u53d1\u81ea\u52a8\u914d\u7f6e: \u57fa\u4e8e\u7c7b\u8def\u5f84\u4e2d\u7684\u4f9d\u8d56\uff0cSpring Boot \u4f1a\u81ea\u52a8\u914d\u7f6e\u5404\u79cd\u7ec4\u4ef6\u3002 \u4f8b\u5982\uff0c\u5982\u679c\u7c7b\u8def\u5f84\u4e0b\u6709 <code>spring-boot-starter-data-jpa</code>\uff0c\u5b83\u4f1a\u81ea\u52a8\u914d\u7f6e\u6570\u636e\u6e90\u548c JPA \u76f8\u5173\u7684 Bean\u3002 \u8fd9\u662f\u901a\u8fc7 <code>@EnableAutoConfiguration</code> \u6ce8\u89e3\u5b9e\u73b0\u7684\uff0c\u5b83\u4f1a\u8bc4\u4f30\u5404\u79cd\u81ea\u52a8\u914d\u7f6e\u7c7b\uff0c\u5e76\u5e94\u7528\u6ee1\u8db3 <code>@Conditional</code> \u6ce8\u89e3\u6761\u4ef6\u7684\u914d\u7f6e\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/spring%E5%90%AF%E5%8A%A8%E9%98%B6%E6%AE%B5%E4%BC%9A%E5%8F%91%E7%94%9F%E4%BB%80%E4%B9%88/#4-bean","title":"4. Bean \u7684\u751f\u547d\u5468\u671f\uff1a\u5b9e\u4f8b\u5316\u3001\u4f9d\u8d56\u6ce8\u5165\u548c\u521d\u59cb\u5316","text":"<p>\u5728 <code>ApplicationContext</code> \u5237\u65b0\u4e4b\u540e\uff0cSpring IoC \u5bb9\u5668\u5f00\u59cb\u7ba1\u7406 Bean \u7684\u751f\u547d\u5468\u671f\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u5305\u62ec\uff1a</p> <ul> <li>\u5b9e\u4f8b\u5316 Bean: Spring \u5bb9\u5668\u6839\u636e\u626b\u63cf\u5230\u7684\u7c7b\u5b9a\u4e49\u521b\u5efa Bean \u7684\u5b9e\u4f8b\u3002</li> <li>\u4f9d\u8d56\u6ce8\u5165: Spring \u5bb9\u5668\u4f1a\u81ea\u52a8\u5c06 Bean \u6240\u4f9d\u8d56\u7684\u5176\u4ed6 Bean \u6ce8\u5165\u8fdb\u6765\u3002</li> <li>\u521d\u59cb\u5316: \u6267\u884c Bean \u7684\u521d\u59cb\u5316\u65b9\u6cd5\uff0c\u4f8b\u5982\u8c03\u7528 <code>@PostConstruct</code> \u6ce8\u89e3\u7684\u65b9\u6cd5\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/spring%E5%90%AF%E5%8A%A8%E9%98%B6%E6%AE%B5%E4%BC%9A%E5%8F%91%E7%94%9F%E4%BB%80%E4%B9%88/#5-web-web","title":"5. \u542f\u52a8\u5185\u5d4c\u7684 Web \u670d\u52a1\u5668\uff08\u9488\u5bf9 Web \u5e94\u7528\uff09","text":"<p>\u5bf9\u4e8e Web \u5e94\u7528\u7a0b\u5e8f\uff0cSpring Boot \u4f1a\u542f\u52a8\u4e00\u4e2a\u5185\u5d4c\u7684 Web \u670d\u52a1\u5668\uff0c\u4f8b\u5982 Tomcat\u3001Jetty \u6216 Undertow\u3002 \u8fd9\u4e2a\u9636\u6bb5\u8fd8\u5305\u62ec\u914d\u7f6e\u548c\u542f\u52a8 <code>DispatcherServlet</code>\uff0c\u5b83\u662f Spring MVC \u6846\u67b6\u7684\u6838\u5fc3\uff0c\u8d1f\u8d23\u5904\u7406\u6240\u6709\u4f20\u5165\u7684 HTTP \u8bf7\u6c42\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/spring%E5%90%AF%E5%8A%A8%E9%98%B6%E6%AE%B5%E4%BC%9A%E5%8F%91%E7%94%9F%E4%BB%80%E4%B9%88/#6-commandlinerunner-applicationrunner","title":"6. \u8fd0\u884c <code>CommandLineRunner</code> \u548c <code>ApplicationRunner</code>","text":"<p>\u5728\u5e94\u7528\u7a0b\u5e8f\u4e0a\u4e0b\u6587\u5b8c\u5168\u521d\u59cb\u5316\u5e76\u4e14\u5185\u5d4c\u670d\u52a1\u5668\u542f\u52a8\u4e4b\u540e\uff0cSpring Boot \u4f1a\u6267\u884c\u6240\u6709\u5b9e\u73b0\u4e86 <code>CommandLineRunner</code> \u6216 <code>ApplicationRunner</code> \u63a5\u53e3\u7684 Bean\u3002 \u8fd9\u4e3a\u5f00\u53d1\u8005\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5728\u5e94\u7528\u7a0b\u5e8f\u542f\u52a8\u5b8c\u6210\u524d\u6267\u884c\u81ea\u5b9a\u4e49\u903b\u8f91\u7684\u673a\u4f1a\uff0c\u4f8b\u5982\u9884\u52a0\u8f7d\u6570\u636e\u6216\u6267\u884c\u4e00\u6b21\u6027\u4efb\u52a1\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/spring%E5%90%AF%E5%8A%A8%E9%98%B6%E6%AE%B5%E4%BC%9A%E5%8F%91%E7%94%9F%E4%BB%80%E4%B9%88/#7","title":"7. \u5e94\u7528\u7a0b\u5e8f\u5c31\u7eea","text":"<p>\u81f3\u6b64\uff0cSpring Boot \u5e94\u7528\u7a0b\u5e8f\u5df2\u7ecf\u5b8c\u5168\u542f\u52a8\u5e76\u51c6\u5907\u597d\u63a5\u6536\u8bf7\u6c42\u3002 Spring Boot \u4f1a\u53d1\u5e03\u4e00\u4e2a <code>ApplicationReadyEvent</code> \u4e8b\u4ef6\uff0c\u8868\u793a\u5e94\u7528\u7a0b\u5e8f\u5df2\u6210\u529f\u542f\u52a8\u3002</p> <p>\u6574\u4e2a\u542f\u52a8\u8fc7\u7a0b\u4e2d\uff0cSpring Boot \u4f1a\u53d1\u5e03\u4e00\u7cfb\u5217\u7684\u4e8b\u4ef6\uff0c\u5141\u8bb8\u5f00\u53d1\u8005\u901a\u8fc7 <code>ApplicationListener</code> \u63a5\u53e3\u5728\u4e0d\u540c\u7684\u751f\u547d\u5468\u671f\u9636\u6bb5\u63d2\u5165\u81ea\u5b9a\u4e49\u903b\u8f91\u3002 \u8fd9\u4e9b\u4e8b\u4ef6\u5305\u62ec <code>ContextRefreshedEvent</code>\u3001<code>ContextStartedEvent</code>\u3001<code>ContextClosedEvent</code> \u7b49\u3002</p> <p>\u603b\u800c\u8a00\u4e4b\uff0cSpring Boot \u7684\u542f\u52a8\u9636\u6bb5\u662f\u4e00\u4e2a\u9ad8\u5ea6\u81ea\u52a8\u5316\u548c\u53ef\u6269\u5c55\u7684\u8fc7\u7a0b\uff0c\u5b83\u901a\u8fc7\u81ea\u52a8\u914d\u7f6e\u3001\u5185\u5d4c\u670d\u52a1\u5668\u548c\u4e8b\u4ef6\u9a71\u52a8\u7684\u751f\u547d\u5468\u671f\u7ba1\u7406\uff0c\u6781\u5927\u5730\u7b80\u5316\u4e86 Java \u5e94\u7528\u7a0b\u5e8f\u7684\u5f00\u53d1\u548c\u90e8\u7f72\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/%E4%BB%80%E4%B9%88%E6%83%85%E5%86%B5%E4%B8%8B%40Trancational%E6%B3%A8%E8%A7%A3%E4%BC%9A%E5%A4%B1%E6%95%88/","title":"\u4ec0\u4e48\u60c5\u51b5\u4e0b@Trancational\u6ce8\u89e3\u4f1a\u5931\u6548","text":"<p><code>@Transactional</code> \u6ce8\u89e3\u5931\u6548\u662f\u4e00\u4e2a\u5728\u5b9e\u9645\u5f00\u53d1\u4e2d\u975e\u5e38\u5e38\u89c1\u3001\u4e5f\u6781\u6613\u51fa\u9519\u7684\u95ee\u9898\u3002\u51e0\u4e4e\u6240\u6709\u5931\u6548\u7684\u573a\u666f\uff0c\u5176\u6839\u672c\u539f\u56e0\u90fd\u53ef\u4ee5\u5f52\u7ed3\u4e3a\u4e00\u70b9\uff1a\u8c03\u7528<code>@Transactional</code>\u6ce8\u89e3\u6807\u6ce8\u7684\u65b9\u6cd5\u65f6\uff0c\u6ca1\u6709\u7ecf\u8fc7Spring\u751f\u6210\u7684\u4ee3\u7406\u5bf9\u8c61\uff0c\u800c\u662f\u76f4\u63a5\u901a\u8fc7\u539f\u59cb\u5bf9\u8c61\u8c03\u7528\u7684\u3002</p> <p><code>@Transactional</code>\u662f\u57fa\u4e8eSpring AOP\u5b9e\u73b0\u7684\uff0c\u800cAOP\u7684\u5b9e\u73b0\u53c8\u662f\u57fa\u4e8e\u52a8\u6001\u4ee3\u7406\u3002Spring\u5728\u8fd0\u884c\u65f6\u4f1a\u4e3a\u6807\u6ce8\u4e86<code>@Transactional</code>\u7684Bean\u751f\u6210\u4e00\u4e2a\u4ee3\u7406\u5bf9\u8c61\u3002\u5f53\u5916\u90e8\u8c03\u7528\u8fd9\u4e2aBean\u7684public\u65b9\u6cd5\u65f6\uff0c\u5b9e\u9645\u4e0a\u662f\u8c03\u7528\u4e86\u4ee3\u7406\u5bf9\u8c61\u7684\u65b9\u6cd5\uff0c\u4ee3\u7406\u5bf9\u8c61\u4f1a\u5728\u8c03\u7528\u771f\u5b9e\u65b9\u6cd5\u524d\u540e\u5f00\u542f\u3001\u63d0\u4ea4\u6216\u56de\u6eda\u4e8b\u52a1\u3002\u5982\u679c\u8c03\u7528\u94fe\u7ed5\u8fc7\u4e86\u8fd9\u4e2a\u4ee3\u7406\u5bf9\u8c61\uff0c\u90a3\u4e48\u4e8b\u52a1\u81ea\u7136\u5c31\u4e0d\u4f1a\u751f\u6548\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/%E4%BB%80%E4%B9%88%E6%83%85%E5%86%B5%E4%B8%8B%40Trancational%E6%B3%A8%E8%A7%A3%E4%BC%9A%E5%A4%B1%E6%95%88/#1-public","title":"1. \u6ce8\u89e3\u7528\u5728\u975epublic\u65b9\u6cd5\u4e0a","text":"<p>\u8fd9\u662f\u6700\u5e38\u89c1\u7684\u4e00\u79cd\u9519\u8bef\u3002Spring\u7684AOP\u4ee3\u7406\u53ea\u4f1a\u62e6\u622apublic\u65b9\u6cd5\u7684\u8c03\u7528\u3002\u5982\u679c\u4f60\u5c06<code>@Transactional</code>\u6ce8\u89e3\u7528\u5728<code>protected</code>\u3001<code>private</code>\u6216\u5305\u7ea7\u79c1\u6709\u7684\u65b9\u6cd5\u4e0a\uff0cSpring\u4e0d\u4f1a\u4e3a\u8fd9\u4e9b\u65b9\u6cd5\u5e94\u7528\u4e8b\u52a1\u5207\u9762\uff0c\u4e8b\u52a1\u4e5f\u5c31\u4e0d\u4f1a\u751f\u6548\u3002</p> <p>\u539f\u56e0\uff1a\u5728Spring AOP\u7684\u8bbe\u8ba1\u4e2d\uff0c\u65e0\u8bba\u662fJDK\u52a8\u6001\u4ee3\u7406\u8fd8\u662fCGLIB\u4ee3\u7406\uff0c\u5176\u62e6\u622a\u903b\u8f91\u90fd\u662f\u56f4\u7ed5\u516c\u5171\u65b9\u6cd5\u5c55\u5f00\u7684\uff0c\u8fd9\u662f\u4e3a\u4e86\u907f\u514d\u8fdd\u53cdJava\u8bed\u8a00\u7684\u8bbf\u95ee\u63a7\u5236\u89c4\u5219\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/%E4%BB%80%E4%B9%88%E6%83%85%E5%86%B5%E4%B8%8B%40Trancational%E6%B3%A8%E8%A7%A3%E4%BC%9A%E5%A4%B1%E6%95%88/#2","title":"2. \u7c7b\u5185\u90e8\u65b9\u6cd5\u8c03\u7528\uff08\u81ea\u8c03\u7528\u95ee\u9898\uff09","text":"<p>\u8fd9\u662f\u6700\u5178\u578b\u4e5f\u662f\u6700\u9690\u853d\u7684\u4e00\u79cd\u5931\u6548\u573a\u666f\u3002\u5f53\u4e00\u4e2a\u7c7b\u4e2d\u7684\u975e\u4e8b\u52a1\u65b9\u6cd5A\uff0c\u8c03\u7528\u4e86\u540c\u4e00\u4e2a\u7c7b\u4e2d\u88ab<code>@Transactional</code>\u6ce8\u89e3\u7684\u4e8b\u52a1\u65b9\u6cd5B\u65f6\uff0c\u65b9\u6cd5B\u7684\u4e8b\u52a1\u4f1a\u5931\u6548\u3002</p> <p>Java</p> <pre><code>@Service\npublic class UserServiceImpl implements UserService {\n\n    public void methodA() {\n        // ... some logic ...\n        this.methodB(); // \u8fd9\u91cc\u7684\u4e8b\u52a1\u4f1a\u5931\u6548\n    }\n\n    @Transactional\n    public void methodB() {\n        // ... transactional logic ...\n    }\n}\n</code></pre> <p>\u539f\u56e0\uff1a\u8fd9\u91cc\u7684\u8c03\u7528\u662f\u901a\u8fc7<code>this</code>\u5f15\u7528\u8fdb\u884c\u7684\u3002<code>this</code>\u6307\u5411\u7684\u662f\u771f\u5b9e\u7684\u3001\u672a\u88ab\u4ee3\u7406\u7684\u539f\u59cb\u5bf9\u8c61\uff0c\u800c\u4e0d\u662fSpring\u751f\u6210\u7684\u4ee3\u7406\u5bf9\u8c61\u3002\u56e0\u6b64\uff0c\u8fd9\u4e2a\u8c03\u7528\u76f4\u63a5\u53d1\u751f\u5728\u539f\u59cb\u5bf9\u8c61\u5185\u90e8\uff0c\u5b8c\u5168\u7ed5\u8fc7\u4e86AOP\u4ee3\u7406\u7684\u62e6\u622a\uff0c\u4e8b\u52a1\u5207\u9762\u81ea\u7136\u4e5f\u5c31\u65e0\u6cd5\u7ec7\u5165\u3002</p> <p>\u5982\u4f55\u89e3\u51b3\u81ea\u8c03\u7528\u95ee\u9898\uff1f</p> <ul> <li> <p>\u5c06\u4e8b\u52a1\u65b9\u6cd5B\u79fb\u5230\u53e6\u4e00\u4e2a\u72ec\u7acb\u7684Service\u4e2d\uff0c\u7136\u540e\u5728\u65b9\u6cd5A\u4e2d\u6ce8\u5165\u5e76\u8c03\u7528\u8fd9\u4e2a\u65b0\u7684Service\u3002\u8fd9\u662f\u6700\u63a8\u8350\u3001\u6700\u7b26\u5408\u8bbe\u8ba1\u539f\u5219\u7684\u505a\u6cd5\u3002</p> </li> <li> <p>\u5728\u8be5\u7c7b\u4e2d\u6ce8\u5165\u81ea\u8eab\u3002\u901a\u8fc7<code>@Autowired</code>\u6ce8\u5165\u4e00\u4e2a\u4ee3\u7406\u5bf9\u8c61\uff0c\u7136\u540e\u901a\u8fc7\u4ee3\u7406\u5bf9\u8c61\u6765\u8c03\u7528\u65b9\u6cd5B\u3002</p> </li> <li> <p>\u4f7f\u7528<code>AopContext.currentProxy()</code>\u83b7\u53d6\u5f53\u524d\u7684\u4ee3\u7406\u5bf9\u8c61\uff0c\u7136\u540e\u7528\u5b83\u6765\u8c03\u7528\u65b9\u6cd5B\u3002</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/%E4%BB%80%E4%B9%88%E6%83%85%E5%86%B5%E4%B8%8B%40Trancational%E6%B3%A8%E8%A7%A3%E4%BC%9A%E5%A4%B1%E6%95%88/#3-try-catch","title":"3. \u5f02\u5e38\u88ab<code>try-catch</code>\u6355\u83b7\u4e14\u6ca1\u6709\u624b\u52a8\u629b\u51fa","text":"<p>\u5982\u679c\u4e8b\u52a1\u65b9\u6cd5\u5185\u90e8\u53d1\u751f\u4e86\u5f02\u5e38\uff0c\u4f46\u8fd9\u4e2a\u5f02\u5e38\u88ab<code>try-catch</code>\u5757\u5b8c\u5168\u6355\u83b7\u4e86\uff0c\u6ca1\u6709\u518d\u5411\u4e0a\u629b\u51fa\uff0c\u90a3\u4e48Spring\u7684\u4e8b\u52a1\u7ba1\u7406\u5668\u5c31\u65e0\u6cd5\u611f\u77e5\u5230\u5f02\u5e38\u7684\u53d1\u751f\uff0c\u4e5f\u5c31\u4e0d\u4f1a\u89e6\u53d1\u56de\u6eda\u3002</p> <p>Java</p> <pre><code>@Transactional\npublic void methodC() {\n    try {\n        // ... database operations that throw an exception ...\n    } catch (Exception e) {\n        // \u5f02\u5e38\u88ab\u201c\u5403\u6389\u201d\u4e86\uff0c\u6ca1\u6709\u7ee7\u7eed\u629b\u51fa\n        // \u4e8b\u52a1\u4e0d\u4f1a\u56de\u6eda\n    }\n}\n</code></pre> <p>\u89e3\u51b3\u65b9\u6cd5\uff1a\u5728<code>catch</code>\u5757\u4e2d\u624b\u52a8\u629b\u51fa\u4e00\u4e2a\u8fd0\u884c\u65f6\u5f02\u5e38\uff0c\u6216\u8005\u901a\u8fc7<code>TransactionAspectSupport.currentTransactionStatus().setRollbackOnly();</code>\u6765\u624b\u52a8\u6807\u8bb0\u4e8b\u52a1\u9700\u8981\u56de\u6eda\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/%E4%BB%80%E4%B9%88%E6%83%85%E5%86%B5%E4%B8%8B%40Trancational%E6%B3%A8%E8%A7%A3%E4%BC%9A%E5%A4%B1%E6%95%88/#4","title":"4. \u9ed8\u8ba4\u7684\u56de\u6eda\u89c4\u5219\u4e0d\u5339\u914d","text":"<p>Spring\u7684\u58f0\u660e\u5f0f\u4e8b\u52a1\u9ed8\u8ba4\u53ea\u5bf9<code>RuntimeException</code>\uff08\u8fd0\u884c\u65f6\u5f02\u5e38\uff09\u548c<code>Error</code>\u8fdb\u884c\u56de\u6eda\u3002\u5982\u679c\u4f60\u7684\u65b9\u6cd5\u629b\u51fa\u7684\u662f\u4e00\u4e2a\u53d7\u68c0\u5f02\u5e38\uff08Checked Exception\uff0c\u5982<code>IOException</code>\uff09\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4e8b\u52a1\u662f\u4e0d\u4f1a\u56de\u6eda\u7684\u3002</p> <p>\u539f\u56e0\uff1a\u8fd9\u662fSpring\u56e2\u961f\u57fa\u4e8e\u4e00\u4e2a\u666e\u904d\u7684\u89c2\u70b9\u505a\u7684\u8bbe\u8ba1\uff1a\u53d7\u68c0\u5f02\u5e38\u901a\u5e38\u662f\u4e1a\u52a1\u903b\u8f91\u4e2d\u53ef\u9884\u671f\u7684\u3001\u53ef\u5904\u7406\u7684\u5f02\u5e38\uff0c\u4e0d\u4e00\u5b9a\u9700\u8981\u56de\u6eda\u4e8b\u52a1\u3002</p> <p>\u89e3\u51b3\u65b9\u6cd5\uff1a\u5728@Transactional\u6ce8\u89e3\u4e2d\u4f7f\u7528rollbackFor\u5c5e\u6027\u6765\u660e\u786e\u6307\u5b9a\u9700\u8981\u56de\u6eda\u7684\u5f02\u5e38\u7c7b\u578b\u3002</p> <p>@Transactional(rollbackFor = Exception.class)</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/%E4%BB%80%E4%B9%88%E6%83%85%E5%86%B5%E4%B8%8B%40Trancational%E6%B3%A8%E8%A7%A3%E4%BC%9A%E5%A4%B1%E6%95%88/#5-finalstatic","title":"5. \u76ee\u6807\u7c7b\u6216\u65b9\u6cd5\u662f<code>final</code>\u6216<code>static</code>\u7684","text":"<ul> <li> <p>\u5982\u679c\u4e00\u4e2a\u7c7b\u88ab\u58f0\u660e\u4e3a<code>final</code>\uff0cCGLIB\u4ee3\u7406\u5c06\u65e0\u6cd5\u4e3a\u5176\u521b\u5efa\u5b50\u7c7b\uff0c\u5982\u679c\u8be5\u7c7b\u53c8\u6ca1\u6709\u5b9e\u73b0\u63a5\u53e3\uff0c\u90a3\u4e48AOP\u4ee3\u7406\u5c06\u65e0\u6cd5\u521b\u5efa\uff0c\u4e8b\u52a1\u5931\u6548\u3002</p> </li> <li> <p>\u5982\u679c\u4e00\u4e2a\u65b9\u6cd5\u88ab\u58f0\u660e\u4e3a<code>final</code>\u6216<code>static</code>\uff0cCGLIB\u540c\u6837\u65e0\u6cd5\u91cd\u5199\u5b83\uff0c\u4ee3\u7406\u903b\u8f91\u4e5f\u5c31\u65e0\u6cd5\u7ec7\u5165\u3002\u9759\u6001\u65b9\u6cd5\u5c5e\u4e8e\u7c7b\u800c\u4e0d\u662f\u5bf9\u8c61\uff0c\u4e5f\u65e0\u6cd5\u88abAOP\u4ee3\u7406\u3002</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/%E4%BB%80%E4%B9%88%E6%83%85%E5%86%B5%E4%B8%8B%40Trancational%E6%B3%A8%E8%A7%A3%E4%BC%9A%E5%A4%B1%E6%95%88/#6","title":"6. \u6570\u636e\u5e93\u5f15\u64ce\u4e0d\u652f\u6301\u4e8b\u52a1","text":"<p>\u8fd9\u662f\u4e00\u4e2a\u73af\u5883\u5c42\u9762\u7684\u95ee\u9898\uff0c\u4f46\u975e\u5e38\u5173\u952e\u3002\u5982\u679c\u4f60\u7684\u6570\u636e\u5e93\u8868\u4f7f\u7528\u7684\u662f\u4e0d\u652f\u6301\u4e8b\u52a1\u7684\u5b58\u50a8\u5f15\u64ce\uff0c\u6bd4\u5982MySQL\u7684MyISAM\u5f15\u64ce\uff0c\u90a3\u4e48\u65e0\u8bbaSpring\u5c42\u9762\u5982\u4f55\u914d\u7f6e\uff0c\u6570\u636e\u5e93\u672c\u8eab\u90fd\u4e0d\u4f1a\u6267\u884c\u4e8b\u52a1\u64cd\u4f5c\u3002</p> <p>\u89e3\u51b3\u65b9\u6cd5\uff1a\u786e\u4fdd\u6240\u6709\u9700\u8981\u4e8b\u52a1\u7684\u8868\u90fd\u4f7f\u7528\u652f\u6301\u4e8b\u52a1\u7684\u5b58\u50a8\u5f15\u64ce\uff0c\u5982InnoDB\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/spring/%E4%BB%80%E4%B9%88%E6%83%85%E5%86%B5%E4%B8%8B%40Trancational%E6%B3%A8%E8%A7%A3%E4%BC%9A%E5%A4%B1%E6%95%88/#7-spring","title":"7. Spring\u76f8\u5173\u914d\u7f6e\u95ee\u9898","text":"<ul> <li> <p>Bean\u6ca1\u6709\u88abSpring\u5bb9\u5668\u7ba1\u7406\uff1a\u5982\u679c\u4f60\u7684Service\u7c7b\u6ca1\u6709\u88ab<code>@Service</code>\u3001<code>@Component</code>\u7b49\u6ce8\u89e3\u6807\u8bb0\uff0c\u6216\u8005\u6ca1\u6709\u88abXML\u914d\u7f6e\u58f0\u660e\u4e3aBean\uff0cSpring\u5bb9\u5668\u4e2d\u6839\u672c\u5c31\u6ca1\u6709\u8fd9\u4e2a\u5bf9\u8c61\uff0c\u81ea\u7136\u4e5f\u8c08\u4e0d\u4e0a\u4e3a\u5b83\u521b\u5efa\u4ee3\u7406\u3002</p> </li> <li> <p>\u6ca1\u6709\u5f00\u542f\u4e8b\u52a1\u7ba1\u7406\uff1a\u5728\u975eSpring Boot\u7684\u4f20\u7edfSpring\u9879\u76ee\u4e2d\uff0c\u9700\u8981\u901a\u8fc7<code>@EnableTransactionManagement</code>\u6ce8\u89e3\u6765\u663e\u5f0f\u5730\u5f00\u542f\u58f0\u660e\u5f0f\u4e8b\u52a1\u652f\u6301\u3002Spring Boot\u901a\u5e38\u4f1a\u81ea\u52a8\u914d\u7f6e\u597d\u3002</p> </li> <li> <p>AOP\u76f8\u5173\u4f9d\u8d56\u7f3a\u5931\u6216\u914d\u7f6e\u9519\u8bef\u3002</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/%E5%9F%BA%E7%A1%80/HashMap%E5%92%8CConcurrentHashMap%E4%BB%8B%E7%BB%8D/","title":"HashMap\u548cConcurrentHashMap\u4ecb\u7ecd","text":"<p>HashMap \u662f Java \u96c6\u5408\u6846\u67b6\u4e2d\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5b83\u57fa\u4e8e\u54c8\u5e0c\u8868\u5b9e\u73b0\uff0c\u7528\u4e8e\u5b58\u50a8\u952e\u503c\u5bf9\uff08Key-Value\uff09\u3002\u5b83\u5141\u8bb8\u4f7f\u7528 null \u4f5c\u4e3a\u952e\uff08\u6700\u591a\u4e00\u4e2a\uff09\u548c\u503c\uff08\u53ef\u4ee5\u591a\u4e2a\uff09\u3002HashMap \u7684\u4e3b\u8981\u7279\u70b9\u662f\u80fd\u591f\u4ee5\u63a5\u8fd1 O(1) \u7684\u5e73\u5747\u65f6\u95f4\u590d\u6742\u5ea6\u8fdb\u884c\u63d2\u5165\u3001\u5220\u9664\u548c\u67e5\u627e\u64cd\u4f5c\u3002\u4f46\u662f\uff0cHashMap \u662f\u975e\u7ebf\u7a0b\u5b89\u5168\u7684\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/%E5%9F%BA%E7%A1%80/HashMap%E5%92%8CConcurrentHashMap%E4%BB%8B%E7%BB%8D/#hashmap","title":"HashMap \u5e95\u5c42\u5b9e\u73b0","text":"<p>HashMap \u7684\u5e95\u5c42\u6570\u636e\u7ed3\u6784\u5728\u4e0d\u540c\u7684 Java \u7248\u672c\u4e2d\u6709\u6240\u6f14\u8fdb\uff0c\u4f46\u6838\u5fc3\u601d\u60f3\u662f\u201c\u6570\u7ec4 + \u94fe\u8868/\u7ea2\u9ed1\u6811\u201d\u3002</p> <ul> <li> <p>JDK 1.7 \u53ca\u4e4b\u524d\uff1a\u6570\u7ec4 + \u94fe\u8868</p> <ol> <li> <p>\u57fa\u672c\u7ed3\u6784\uff1a\u5185\u90e8\u7ef4\u62a4\u4e00\u4e2a <code>Entry</code> \u7c7b\u578b\u7684\u6570\u7ec4\uff08<code>table</code>\uff09\u3002\u6bcf\u4e2a <code>Entry</code> \u5bf9\u8c61\u5305\u542b\u56db\u4e2a\u90e8\u5206\uff1a<code>key</code>\u3001<code>value</code>\u3001<code>hash</code> \u503c\u4ee5\u53ca\u4e00\u4e2a\u6307\u5411\u4e0b\u4e00\u4e2a <code>Entry</code> \u7684 <code>next</code> \u6307\u9488\u3002</p> </li> <li> <p>put (\u5b58\u5165) \u8fc7\u7a0b\uff1a</p> <ul> <li> <p>\u5f53\u4e00\u4e2a\u952e\u503c\u5bf9 <code>(key, value)</code> \u88ab\u5b58\u5165\u65f6\uff0c\u9996\u5148\u8ba1\u7b97 <code>key</code> \u7684 <code>hashCode()</code>\u3002</p> </li> <li> <p>\u901a\u8fc7\u4e00\u4e2a\u6270\u52a8\u51fd\u6570\u5bf9 <code>hashCode</code> \u8fdb\u884c\u518d\u5904\u7406\uff0c\u4ee5\u51cf\u5c11\u54c8\u5e0c\u51b2\u7a81\u3002</p> </li> <li> <p>\u5c06\u5904\u7406\u540e\u7684\u54c8\u5e0c\u503c\u4e0e\u6570\u7ec4\u957f\u5ea6\u51cf\u4e00\u8fdb\u884c\u6309\u4f4d\u4e0e\u8fd0\u7b97 (<code>hash &amp; (length - 1)</code>)\uff0c\u5f97\u5230\u8be5\u952e\u503c\u5bf9\u5e94\u5728\u6570\u7ec4\u4e2d\u7684\u7d22\u5f15\u4f4d\u7f6e\uff08<code>index</code>\uff09\u3002</p> </li> <li> <p>\u5982\u679c\u8be5\u4f4d\u7f6e\uff08<code>bucket</code>\uff09\u4e0a\u6ca1\u6709\u5143\u7d20\uff0c\u5219\u76f4\u63a5\u521b\u5efa\u4e00\u4e2a\u65b0\u7684 <code>Entry</code> \u8282\u70b9\u5b58\u5165\u3002</p> </li> <li> <p>\u5982\u679c\u8be5\u4f4d\u7f6e\u5df2\u7ecf\u6709\u5143\u7d20\uff08\u5373\u53d1\u751f\u54c8\u5e0c\u51b2\u7a81\uff09\uff0c\u5219\u904d\u5386\u8be5\u4f4d\u7f6e\u4e0a\u7684\u94fe\u8868\uff1a</p> <ul> <li> <p>\u5982\u679c\u627e\u5230\u4e00\u4e2a\u8282\u70b9\u7684 <code>key</code> \u4e0e\u8981\u5b58\u5165\u7684 <code>key</code> \u76f8\u540c\uff08\u901a\u8fc7 <code>hashCode</code> \u548c <code>equals()</code> \u5224\u65ad\uff09\uff0c\u5219\u7528\u65b0\u7684 <code>value</code> \u8986\u76d6\u65e7\u7684 <code>value</code>\u3002</p> </li> <li> <p>\u5982\u679c\u904d\u5386\u5b8c\u94fe\u8868\u90fd\u6ca1\u6709\u627e\u5230\u76f8\u540c\u7684 <code>key</code>\uff0c\u5219\u521b\u5efa\u4e00\u4e2a\u65b0\u7684 <code>Entry</code> \u8282\u70b9\uff0c\u5e76\u91c7\u7528\u201c\u5934\u63d2\u6cd5\u201d\u5c06\u5176\u63d2\u5165\u5230\u94fe\u8868\u7684\u5934\u90e8\u3002</p> </li> </ul> </li> </ul> </li> <li> <p>\u6269\u5bb9 (resize)\uff1a</p> <ul> <li> <p>\u5f53 HashMap \u4e2d\u5b58\u50a8\u7684\u5143\u7d20\u6570\u91cf\u8d85\u8fc7 <code>\u5bb9\u91cf * \u52a0\u8f7d\u56e0\u5b50</code> (\u9ed8\u8ba4\u4e3a <code>16 * 0.75 = 12</code>) \u65f6\uff0c\u4f1a\u89e6\u53d1\u6269\u5bb9\u3002</p> </li> <li> <p>\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u3001\u5bb9\u91cf\u662f\u539f\u6765\u4e24\u500d\u7684\u6570\u7ec4\u3002</p> </li> <li> <p>\u7136\u540e\u904d\u5386\u65e7\u6570\u7ec4\u4e2d\u7684\u6240\u6709 <code>Entry</code>\uff0c\u91cd\u65b0\u8ba1\u7b97\u5b83\u4eec\u5728\u65b0\u6570\u7ec4\u4e2d\u7684\u7d22\u5f15\u4f4d\u7f6e\uff0c\u5e76\u5c06\u5176\u8fc1\u79fb\u8fc7\u53bb\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u88ab\u79f0\u4e3a <code>rehash</code>\u3002</p> </li> </ul> </li> </ol> </li> <li> <p>JDK 1.8 \u53ca\u4e4b\u540e\uff1a\u6570\u7ec4 + \u94fe\u8868 + \u7ea2\u9ed1\u6811</p> <ol> <li> <p>\u7ed3\u6784\u4f18\u5316\uff1a\u4e3a\u4e86\u89e3\u51b3\u54c8\u5e0c\u51b2\u7a81\u4e25\u91cd\u65f6\uff0c\u94fe\u8868\u8fc7\u957f\u5bfc\u81f4\u67e5\u8be2\u6027\u80fd\u4e0b\u964d\u5230 O(n) \u7684\u95ee\u9898\uff0cJDK 1.8 \u5f15\u5165\u4e86\u7ea2\u9ed1\u6811\u3002</p> </li> <li> <p>put \u8fc7\u7a0b\u53d8\u5316\uff1a</p> <ul> <li> <p>\u57fa\u672c\u6d41\u7a0b\u4e0e JDK 1.7 \u7c7b\u4f3c\uff0c\u4f46\u5f53\u540c\u4e00\u4e2a\u7d22\u5f15\u4f4d\u7f6e\u7684\u94fe\u8868\u957f\u5ea6\u8fbe\u5230\u4e00\u4e2a\u9608\u503c\uff08\u9ed8\u8ba4\u4e3a 8\uff09\u65f6\uff0c\u5e76\u4e14\u6570\u7ec4\u7684\u603b\u5bb9\u91cf\u5927\u4e8e\u7b49\u4e8e 64\uff0c\u8fd9\u6761\u94fe\u8868\u5c31\u4f1a\u88ab\u8f6c\u6362\u6210\u7ea2\u9ed1\u6811\u3002</p> </li> <li> <p>\u7ea2\u9ed1\u6811\u662f\u4e00\u79cd\u81ea\u5e73\u8861\u7684\u4e8c\u53c9\u67e5\u627e\u6811\uff0c\u5176\u67e5\u8be2\u3001\u63d2\u5165\u3001\u5220\u9664\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u7a33\u5b9a\u5728 O(log n)\uff0c\u6781\u5927\u5730\u63d0\u9ad8\u4e86\u5728\u54c8\u5e0c\u51b2\u7a81\u4e25\u91cd\u60c5\u51b5\u4e0b\u7684\u6027\u80fd\u3002</p> </li> <li> <p>\u5982\u679c\u540e\u7eed\u64cd\u4f5c\u5bfc\u81f4\u7ea2\u9ed1\u6811\u7684\u8282\u70b9\u6570\u51cf\u5c11\u5230\u4e00\u5b9a\u9608\u503c\uff08\u9ed8\u8ba4\u4e3a 6\uff09\uff0c\u5b83\u4f1a\u9000\u5316\u56de\u94fe\u8868\u3002</p> </li> </ul> </li> <li> <p>\u63d2\u5165\u65b9\u5f0f\uff1aJDK 1.8 \u5c06\u5934\u63d2\u6cd5\u6539\u4e3a\u4e86\u5c3e\u63d2\u6cd5\uff0c\u8fd9\u4e3b\u8981\u662f\u4e3a\u4e86\u907f\u514d\u5728\u591a\u7ebf\u7a0b\u6269\u5bb9\u65f6\u4ea7\u751f\u5faa\u73af\u94fe\u8868\u7684\u95ee\u9898\u3002</p> </li> </ol> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/%E5%9F%BA%E7%A1%80/HashMap%E5%92%8CConcurrentHashMap%E4%BB%8B%E7%BB%8D/#hashmap_1","title":"HashMap \u7684\u7ebf\u7a0b\u4e0d\u5b89\u5168\u95ee\u9898","text":"<p>HashMap \u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e0b\u4f7f\u7528\u65f6\uff0c\u4f1a\u51fa\u73b0\u4ee5\u4e0b\u4e3b\u8981\u95ee\u9898\uff1a</p> <ol> <li> <p>\u6570\u636e\u8986\u76d6\uff1a\u5982\u679c\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u5bf9\u540c\u4e00\u4e2a\u7d22\u5f15\u4f4d\u7f6e\u8fdb\u884c <code>put</code> \u64cd\u4f5c\uff0c\u6ca1\u6709\u9501\u673a\u5236\u4fdd\u62a4\uff0c\u540e\u4e00\u4e2a\u7ebf\u7a0b\u7684\u5199\u5165\u53ef\u80fd\u4f1a\u8986\u76d6\u524d\u4e00\u4e2a\u7ebf\u7a0b\u7684\u5199\u5165\uff0c\u5bfc\u81f4\u6570\u636e\u4e22\u5931\u3002</p> </li> <li> <p>JDK 1.7 \u4e2d\u7684\u6b7b\u5faa\u73af\uff08\u6700\u8457\u540d\u7684\u95ee\u9898\uff09\uff1a</p> <ul> <li> <p>\u95ee\u9898\u6839\u6e90\uff1a\u6269\u5bb9 (<code>resize</code>) \u8fc7\u7a0b\u4e2d\u7684 <code>rehash</code> \u64cd\u4f5c + \u5934\u63d2\u6cd5\u3002</p> </li> <li> <p>\u53d1\u751f\u8fc7\u7a0b\uff1a\u5047\u8bbe\u6709\u4e24\u4e2a\u7ebf\u7a0b\uff08T1 \u548c T2\uff09\u540c\u65f6\u68c0\u6d4b\u5230\u9700\u8981\u6269\u5bb9\u5e76\u90fd\u6267\u884c\u4e86 <code>resize</code> \u64cd\u4f5c\u3002</p> </li> <li> <p>T1 \u5728\u6267\u884c\u8fc1\u79fb\u65f6\uff0c\u53ef\u80fd\u4f1a\u56e0\u4e3a\u65f6\u95f4\u7247\u7528\u5b8c\u800c\u6302\u8d77\u3002\u5b83\u5df2\u7ecf\u5904\u7406\u4e86\u94fe\u8868\u4e2d\u7684\u4e00\u90e8\u5206\u8282\u70b9\u3002</p> </li> <li> <p>T2 \u6b64\u65f6\u5f00\u59cb\u6267\u884c <code>resize</code>\uff0c\u5b83\u4f1a\u5b8c\u6210\u6574\u4e2a\u8fc1\u79fb\u8fc7\u7a0b\u3002</p> </li> <li> <p>\u5f53 T1 \u91cd\u65b0\u83b7\u5f97 CPU \u65f6\u95f4\u7247\u540e\uff0c\u5b83\u4f1a\u7ee7\u7eed\u4ece\u5b83\u4e0a\u6b21\u6302\u8d77\u7684\u5730\u65b9\u5f00\u59cb\u8fc1\u79fb\u3002\u7531\u4e8e T2 \u5df2\u7ecf\u6539\u53d8\u4e86\u94fe\u8868\u7684\u7ed3\u6784\uff0cT1 \u4f7f\u7528\u65e7\u7684\u6307\u9488\u5173\u7cfb\u7ee7\u7eed\u8fc1\u79fb\uff0c\u4f1a\u5bfc\u81f4\u94fe\u8868\u4e2d\u7684\u67d0\u4e9b\u8282\u70b9\u5f62\u6210\u4e00\u4e2a\u73af\u5f62\u7ed3\u6784\u3002</p> </li> <li> <p>\u6b64\u540e\uff0c\u5f53\u4efb\u4f55\u7ebf\u7a0b\uff08\u5305\u62ec T1\uff09\u5c1d\u8bd5 <code>get</code> \u4e00\u4e2a\u4f4d\u4e8e\u8fd9\u4e2a\u73af\u5f62\u94fe\u8868\u4e2d\u7684 key \u65f6\uff0c\u5c31\u4f1a\u9677\u5165\u65e0\u9650\u5faa\u73af\uff0c\u5bfc\u81f4 CPU \u4f7f\u7528\u7387 100%\u3002</p> </li> </ul> </li> <li> <p>JDK 1.8 \u4e2d\u7684\u6570\u636e\u4e22\u5931\uff1a</p> <ul> <li> <p>\u867d\u7136 JDK 1.8 \u6539\u7528\u5c3e\u63d2\u6cd5\u89e3\u51b3\u4e86\u6269\u5bb9\u65f6\u7684\u6b7b\u5faa\u73af\u95ee\u9898\uff0c\u4f46\u4ecd\u7136\u5b58\u5728\u5176\u4ed6\u7ebf\u7a0b\u4e0d\u5b89\u5168\u95ee\u9898\u3002</p> </li> <li> <p>\u4f8b\u5982\uff0c\u5728 <code>put</code> \u64cd\u4f5c\u4e2d\uff0c<code>if (tab[i] == null)</code> \u8fd9\u4e2a\u5224\u65ad\u548c\u771f\u6b63\u5199\u5165 <code>tab[i] = newNode(...)</code> \u8fd9\u4e24\u6b65\u64cd\u4f5c\u4e0d\u662f\u539f\u5b50\u7684\u3002</p> </li> <li> <p>\u573a\u666f\uff1a\u7ebf\u7a0b A \u548c\u7ebf\u7a0b B \u540c\u65f6\u5411\u4e00\u4e2a\u4e3a null \u7684\u6876\uff08bucket\uff09\u4e2d <code>put</code> \u5143\u7d20\u3002</p> </li> <li> <p>\u7ebf\u7a0b A \u5224\u65ad <code>tab[i]</code> \u4e3a null\uff0c\u7136\u540e\u6302\u8d77\u3002</p> </li> <li> <p>\u7ebf\u7a0b B \u5224\u65ad <code>tab[i]</code> \u4e3a null\uff0c\u6210\u529f\u63d2\u5165\u4e00\u4e2a\u65b0\u8282\u70b9\u3002</p> </li> <li> <p>\u7ebf\u7a0b A \u6062\u590d\u6267\u884c\uff0c\u5b83\u4f9d\u7136\u8ba4\u4e3a <code>tab[i]</code> \u662f null\uff0c\u4e8e\u662f\u4e5f\u63d2\u5165\u4e00\u4e2a\u65b0\u8282\u70b9\uff0c\u8fd9\u6837\u5c31\u4f1a\u8986\u76d6\u6389\u7ebf\u7a0b B \u63d2\u5165\u7684\u8282\u70b9\uff0c\u5bfc\u81f4\u6570\u636e\u4e22\u5931\u3002</p> </li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/java/%E5%9F%BA%E7%A1%80/HashMap%E5%92%8CConcurrentHashMap%E4%BB%8B%E7%BB%8D/#concurrenthashmap","title":"ConcurrentHashMap","text":"<p>ConcurrentHashMap \u662f <code>java.util.concurrent</code> \u5305\u4e0b\u7684\u4e00\u4e2a\u7c7b\uff0c\u662f HashMap \u7684\u7ebf\u7a0b\u5b89\u5168\u7248\u672c\u3002\u5b83\u63d0\u4f9b\u4e86\u6bd4 <code>Hashtable</code> \u548c <code>Collections.synchronizedMap()</code> \u66f4\u9ad8\u7684\u5e76\u53d1\u6027\u80fd\u3002\u5b83\u5141\u8bb8\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u8bfb\u5199\u96c6\u5408\uff0c\u800c\u4e0d\u4f1a\u5bfc\u81f4\u6570\u636e\u4e0d\u4e00\u81f4\u6216\u629b\u51fa\u5f02\u5e38\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/%E5%9F%BA%E7%A1%80/HashMap%E5%92%8CConcurrentHashMap%E4%BB%8B%E7%BB%8D/#_1","title":"\u7ebf\u7a0b\u5b89\u5168\u7684\u5b9e\u73b0\u539f\u7406","text":"<p>ConcurrentHashMap \u7684\u7ebf\u7a0b\u5b89\u5168\u5b9e\u73b0\u4e5f\u7ecf\u5386\u4e86\u91cd\u8981\u7684\u7248\u672c\u8fed\u4ee3\u3002</p> <ul> <li> <p>JDK 1.7\uff1a\u5206\u6bb5\u9501 (Segment Locking)</p> <ol> <li> <p>\u57fa\u672c\u7ed3\u6784\uff1aConcurrentHashMap \u5185\u90e8\u7531\u4e00\u4e2a <code>Segment</code> \u6570\u7ec4\u548c\u4e00\u4e2a <code>HashEntry</code> \u6570\u7ec4\u7ec4\u6210\u3002<code>Segment</code> \u672c\u8eab\u7ee7\u627f\u81ea <code>ReentrantLock</code>\uff0c\u53ef\u4ee5\u770b\u4f5c\u662f\u4e00\u4e2a\u5c0f\u7684\u3001\u7ebf\u7a0b\u5b89\u5168\u7684 HashMap\u3002</p> </li> <li> <p>\u5206\u6bb5\u601d\u60f3\uff1a\u6574\u4e2a ConcurrentHashMap \u88ab\u5206\u6210\u591a\u4e2a <code>Segment</code>\uff08\u9ed8\u8ba4 16 \u4e2a\uff09\u3002\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u9700\u8981\u5bf9\u67d0\u4e2a\u6570\u636e\u8fdb\u884c\u64cd\u4f5c\u65f6\uff0c\u5b83\u4e0d\u662f\u9501\u5b9a\u6574\u4e2a Map\uff0c\u800c\u662f\u5148\u5b9a\u4f4d\u5230\u6570\u636e\u6240\u5728\u7684 <code>Segment</code>\uff0c\u7136\u540e\u53ea\u9501\u5b9a\u90a3\u4e00\u4e2a <code>Segment</code>\u3002</p> </li> <li> <p>\u5982\u4f55\u5de5\u4f5c\uff1a</p> <ul> <li> <p>put \u64cd\u4f5c\uff1a\u5148\u901a\u8fc7\u54c8\u5e0c\u503c\u5b9a\u4f4d\u5230\u5177\u4f53\u7684 <code>Segment</code>\uff0c\u7136\u540e\u5bf9\u8be5 <code>Segment</code> \u52a0\u9501\u3002\u52a0\u9501\u6210\u529f\u540e\uff0c\u518d\u6267\u884c\u4e0e HashMap \u7c7b\u4f3c\u7684 <code>put</code> \u64cd\u4f5c\u3002\u7531\u4e8e\u9501\u53ea\u4f5c\u7528\u4e8e\u5355\u4e2a <code>Segment</code>\uff0c\u5176\u4ed6\u7ebf\u7a0b\u53ef\u4ee5\u540c\u65f6\u8bbf\u95ee\u5e76\u4fee\u6539\u5176\u4ed6 <code>Segment</code> \u4e2d\u7684\u6570\u636e\uff0c\u4ece\u800c\u5b9e\u73b0\u4e86\u5e76\u53d1\u3002<code>Segment</code> \u7684\u6570\u91cf\u88ab\u79f0\u4e3a\u201c\u5e76\u53d1\u5ea6\u201d\u3002</p> </li> <li> <p>get \u64cd\u4f5c\uff1a<code>get</code> \u64cd\u4f5c\u5927\u90e8\u5206\u65f6\u5019\u662f\u4e0d\u9700\u8981\u52a0\u9501\u7684\u3002<code>HashEntry</code> \u4e2d\u7684 <code>value</code> \u548c <code>next</code> \u6307\u9488\u90fd\u4f7f\u7528 <code>volatile</code> \u5173\u952e\u5b57\u4fee\u9970\uff0c\u8fd9\u4fdd\u8bc1\u4e86\u5185\u5b58\u53ef\u89c1\u6027\u3002\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u4fee\u6539\u4e86\u67d0\u4e2a <code>value</code> \u540e\uff0c\u5176\u4ed6\u7ebf\u7a0b\u80fd\u591f\u7acb\u5373\u770b\u5230\u8fd9\u4e2a\u4fee\u6539\uff0c\u4ece\u800c\u53ef\u4ee5\u5b89\u5168\u5730\u8bfb\u53d6\u3002\u53ea\u6709\u5728\u8bfb\u53d6\u5230\u7684\u503c\u4e3a null \u65f6\uff0c\u624d\u4f1a\u5c1d\u8bd5\u52a0\u9501\u6765\u4fdd\u8bc1\u83b7\u53d6\u5230\u6700\u65b0\u7684\u503c\u3002</p> </li> <li> <p>size \u64cd\u4f5c\uff1a\u8ba1\u7b97 <code>size</code> \u65f6\uff0c\u4f1a\u5148\u5c1d\u8bd5\u4e0d\u52a0\u9501\u5730\u7d2f\u52a0\u4e24\u6b21\u6240\u6709 <code>Segment</code> \u7684 <code>count</code> \u503c\u3002\u5982\u679c\u4e24\u6b21\u7ed3\u679c\u4e00\u81f4\uff0c\u5c31\u76f4\u63a5\u8fd4\u56de\u3002\u5982\u679c\u4e0d\u4e00\u81f4\uff0c\u5219\u4f1a\u4f9d\u6b21\u9501\u4f4f\u6240\u6709\u7684 <code>Segment</code> \u6765\u8fdb\u884c\u7cbe\u786e\u8ba1\u7b97\u3002</p> </li> </ul> </li> <li> <p>\u4f18\u70b9\uff1a\u901a\u8fc7\u5c06\u9501\u7684\u7c92\u5ea6\u4ece\u6574\u4e2a Map \u7f29\u5c0f\u5230\u4e00\u4e2a <code>Segment</code>\uff0c\u5927\u5927\u63d0\u9ad8\u4e86\u5e76\u53d1\u8bbf\u95ee\u7684\u6548\u7387\u3002</p> </li> <li> <p>\u7f3a\u70b9\uff1a\u5206\u6bb5\u9501\u7684\u5b9e\u73b0\u76f8\u5bf9\u590d\u6742\uff0c\u4e14\u5728\u67d0\u4e9b\u573a\u666f\u4e0b\uff08\u4f8b\u5982 <code>size()</code> \u64cd\u4f5c\uff09\u7684\u5f00\u9500\u8f83\u5927\u3002</p> </li> </ol> </li> <li> <p>JDK 1.8 \u53ca\u4e4b\u540e\uff1aCAS + synchronized</p> <ol> <li> <p>\u57fa\u672c\u7ed3\u6784\uff1a\u6452\u5f03\u4e86 <code>Segment</code> \u7684\u8bbe\u8ba1\uff0c\u56de\u5f52\u5230\u4e0e JDK 1.8 \u4e2d HashMap \u7c7b\u4f3c\u7684\u201c\u6570\u7ec4 + \u94fe\u8868 + \u7ea2\u9ed1\u6811\u201d\u7684\u7ed3\u6784\u3002</p> </li> <li> <p>\u9501\u7c92\u5ea6\u66f4\u7ec6\uff1a\u9501\u7684\u7c92\u5ea6\u8fdb\u4e00\u6b65\u964d\u4f4e\uff0c\u4ece\u9501\u5b9a\u4e00\u4e2a <code>Segment</code> \u7f29\u5c0f\u5230\u53ea\u9501\u5b9a\u6570\u7ec4\u4e2d\u67d0\u4e2a\u5177\u4f53\u7684\u7d22\u5f15\u4f4d\u7f6e\uff08<code>bucket</code>\uff09\u3002</p> </li> <li> <p>\u5b9e\u73b0\u65b9\u5f0f\uff1a</p> <ul> <li> <p>CAS (Compare-And-Swap)\uff1a\u5728\u5f88\u591a\u5173\u952e\u64cd\u4f5c\u4e2d\uff0c\u90fd\u4f7f\u7528\u4e86 CAS \u8fd9\u79cd\u65e0\u9501\u7b97\u6cd5\u3002\u4f8b\u5982\uff0c\u5728\u5411\u4e00\u4e2a\u4e3a null \u7684 <code>bucket</code> \u4e2d\u6dfb\u52a0\u7b2c\u4e00\u4e2a\u8282\u70b9\u65f6\uff0c\u4f1a\u4f7f\u7528 CAS \u64cd\u4f5c\u6765\u5c1d\u8bd5\u5199\u5165\u3002\u5982\u679c CAS \u6210\u529f\uff0c\u8bf4\u660e\u6ca1\u6709\u7ade\u4e89\uff0c\u64cd\u4f5c\u5b8c\u6210\u3002\u5982\u679c\u5931\u8d25\uff0c\u8bf4\u660e\u6709\u5176\u4ed6\u7ebf\u7a0b\u5df2\u7ecf\u5360\u7528\u4e86\u8be5\u4f4d\u7f6e\uff0c\u5219\u4f1a\u8fdb\u5165\u4e0b\u4e00\u6b65\u7684\u540c\u6b65\u903b\u8f91\u3002</p> </li> <li> <p>synchronized\uff1a\u5f53 CAS \u64cd\u4f5c\u5931\u8d25\uff0c\u6216\u8005\u9700\u8981\u4fee\u6539\u7684 <code>bucket</code> \u4e2d\u5df2\u7ecf\u5b58\u5728\u8282\u70b9\uff08\u94fe\u8868\u6216\u7ea2\u9ed1\u6811\u7684\u5934\u8282\u70b9\uff09\u65f6\uff0c\u5c31\u4f1a\u4f7f\u7528 <code>synchronized</code> \u5173\u952e\u5b57\u9501\u4f4f\u8fd9\u4e2a\u5934\u8282\u70b9\u3002</p> </li> <li> <p>put \u64cd\u4f5c\u6d41\u7a0b\uff1a</p> <ol> <li> <p>\u8ba1\u7b97\u54c8\u5e0c\u503c\uff0c\u5b9a\u4f4d\u5230\u6570\u7ec4\u7684\u7d22\u5f15\u4f4d\u7f6e\u3002</p> </li> <li> <p>\u5982\u679c\u8be5\u4f4d\u7f6e\u4e3a null\uff0c\u4f7f\u7528 CAS \u5c1d\u8bd5\u63d2\u5165\u65b0\u8282\u70b9\u3002\u6210\u529f\u5219\u8fd4\u56de\u3002</p> </li> <li> <p>\u5982\u679c\u8be5\u4f4d\u7f6e\u4e0d\u4e3a null\uff0c\u5219\u4f7f\u7528 <code>synchronized</code> \u9501\u4f4f\u8be5\u4f4d\u7f6e\u7684\u5934\u8282\u70b9\u3002</p> </li> <li> <p>\u5728\u540c\u6b65\u5757\u5185\uff0c\u904d\u5386\u94fe\u8868\u6216\u7ea2\u9ed1\u6811\uff0c\u5224\u65ad\u662f\u66f4\u65b0 <code>value</code> \u8fd8\u662f\u5728\u672b\u5c3e\u6dfb\u52a0\u65b0\u8282\u70b9\u3002</p> </li> <li> <p>\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u5176\u4ed6\u7ebf\u7a0b\u5982\u679c\u4e5f\u60f3\u64cd\u4f5c\u540c\u4e00\u4e2a <code>bucket</code>\uff0c\u5c31\u4f1a\u56e0\u4e3a\u83b7\u53d6\u4e0d\u5230 <code>synchronized</code> \u9501\u800c\u963b\u585e\u3002\u4f46\u5982\u679c\u5b83\u4eec\u64cd\u4f5c\u7684\u662f\u4e0d\u540c\u7684 <code>bucket</code>\uff0c\u5219\u5b8c\u5168\u4e0d\u53d7\u5f71\u54cd\uff0c\u53ef\u4ee5\u5e76\u53d1\u6267\u884c\u3002</p> </li> </ol> </li> </ul> </li> <li> <p>\u4f18\u70b9\uff1a</p> <ul> <li> <p>\u9501\u7c92\u5ea6\u66f4\u5c0f\uff1a\u53ea\u5728\u53d1\u751f\u54c8\u5e0c\u51b2\u7a81\u65f6\u624d\u52a0\u9501\uff0c\u5e76\u4e14\u9501\u5b9a\u7684\u53ea\u662f\u5355\u4e2a <code>bucket</code> \u7684\u5934\u8282\u70b9\uff0c\u5e76\u53d1\u6027\u80fd\u66f4\u9ad8\u3002</p> </li> <li> <p>\u5b9e\u73b0\u66f4\u7b80\u6d01\uff1a\u76f8\u6bd4\u5206\u6bb5\u9501\uff0c\u5b9e\u73b0\u903b\u8f91\u66f4\u6e05\u6670\u3002</p> </li> <li> <p>\u66f4\u597d\u7684\u6027\u80fd\uff1a\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u5c24\u5176\u662f\u5728\u9ad8\u5e76\u53d1\u573a\u666f\u4e0b\uff0c\u6027\u80fd\u4f18\u4e8e JDK 1.7 \u7684\u7248\u672c\u3002</p> </li> </ul> </li> </ol> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/%E5%9F%BA%E7%A1%80/Java%E5%B8%B8%E7%94%A8%E7%9A%84%E9%9B%86%E5%90%88%E6%9C%89%E5%93%AA%E4%BA%9B/","title":"Java\u5e38\u7528\u7684\u96c6\u5408\u6709\u54ea\u4e9b","text":"<p>Java\u5e38\u7528\u7684\u96c6\u5408\u4e3b\u8981\u5206\u4e3a\u4e24\u5927\u4f53\u7cfb\uff1a<code>Collection</code> \u548c <code>Map</code> \u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/%E5%9F%BA%E7%A1%80/Java%E5%B8%B8%E7%94%A8%E7%9A%84%E9%9B%86%E5%90%88%E6%9C%89%E5%93%AA%E4%BA%9B/#1-collection","title":"1. Collection","text":"<p><code>Collection</code> \u63a5\u53e3\u662f\u6240\u6709\u5355\u5217\u96c6\u5408\u7684\u9876\u5c42\u7236\u63a5\u53e3\uff0c\u5b83\u5b9a\u4e49\u4e86\u5355\u5217\u96c6\u5408\u901a\u7528\u7684\u64cd\u4f5c\u65b9\u6cd5\uff0c\u5982 <code>add</code>, <code>remove</code>, <code>contains</code>, <code>size</code> \u7b49\u3002\u5b83\u7684\u4e0b\u9762\u53c8\u6d3e\u751f\u51fa\u4e09\u4e2a\u6838\u5fc3\u7684\u5b50\u63a5\u53e3\uff1a<code>List</code>, <code>Set</code>, \u548c <code>Queue</code>\u3002</p> <p><code>List</code> \u63a5\u53e3\u7684\u7279\u70b9\u662f\uff1a\u5143\u7d20\u6709\u5e8f\uff0c\u4e14\u53ef\u4ee5\u91cd\u590d\u3002\u5b83\u901a\u8fc7\u7d22\u5f15\u6765\u8bbf\u95ee\u548c\u64cd\u4f5c\u5143\u7d20\u3002</p> <p>\u5e38\u7528\u7684\u5b9e\u73b0\u7c7b\u6709\uff1a</p> <ol> <li> <p>ArrayList:</p> <ul> <li> <p>\u5e95\u5c42\u6570\u636e\u7ed3\u6784\uff1a\u52a8\u6001\u6570\u7ec4\uff08<code>Object[]</code>\uff09\u3002</p> </li> <li> <p>\u7279\u70b9\uff1a\u67e5\u8be2\u548c\u4fee\u6539\uff08\u901a\u8fc7\u7d22\u5f15 <code>get</code>/<code>set</code>\uff09\u901f\u5ea6\u975e\u5e38\u5feb\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u662fO(1)\u3002\u4f46\u662f\uff0c\u5728\u6570\u7ec4\u4e2d\u95f4\u6216\u5f00\u5934\u8fdb\u884c\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u8f83\u6162\uff0c\u56e0\u4e3a\u9700\u8981\u79fb\u52a8\u540e\u7eed\u6240\u6709\u5143\u7d20\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u662fO(n)\u3002</p> </li> <li> <p>\u9002\u7528\u573a\u666f\uff1a\u9002\u5408\u8bfb\u591a\u5199\u5c11\u7684\u573a\u666f\uff0c\u7279\u522b\u662f\u9700\u8981\u9891\u7e41\u8fdb\u884c\u968f\u673a\u8bbf\u95ee\u7684\u573a\u666f\u3002\u5b83\u662f\u6700\u5e38\u7528\u7684List\u5b9e\u73b0\u3002</p> </li> <li> <p>\u7ebf\u7a0b\u5b89\u5168\u6027\uff1a\u975e\u7ebf\u7a0b\u5b89\u5168\u3002</p> </li> </ul> </li> <li> <p>LinkedList:</p> <ul> <li> <p>\u5e95\u5c42\u6570\u636e\u7ed3\u6784\uff1a\u53cc\u5411\u94fe\u8868\u3002</p> </li> <li> <p>\u7279\u70b9\uff1a\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u975e\u5e38\u5feb\uff0c\u5c24\u5176\u662f\u5728\u5217\u8868\u7684\u5934\u5c3e\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u662fO(1)\u3002\u4f46\u662f\u67e5\u8be2\u548c\u4fee\u6539\uff08\u901a\u8fc7\u7d22\u5f15\uff09\u901f\u5ea6\u8f83\u6162\uff0c\u9700\u8981\u4ece\u5934\u6216\u5c3e\u5f00\u59cb\u904d\u5386\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u662fO(n)\u3002</p> </li> <li> <p>\u9002\u7528\u573a\u666f\uff1a\u9002\u5408\u5199\u591a\u8bfb\u5c11\u7684\u573a\u666f\uff0c\u7279\u522b\u662f\u9700\u8981\u9891\u7e41\u8fdb\u884c\u5934\u5c3e\u589e\u5220\u7684\u573a\u666f\u3002\u5b83\u4e5f\u5b9e\u73b0\u4e86<code>Deque</code>\u63a5\u53e3\uff0c\u53ef\u4ee5\u4f5c\u4e3a\u6808\u6216\u961f\u5217\u4f7f\u7528\u3002</p> </li> <li> <p>\u7ebf\u7a0b\u5b89\u5168\u6027\uff1a\u975e\u7ebf\u7a0b\u5b89\u5168\u3002</p> </li> </ul> </li> <li> <p>Vector:</p> <ul> <li> <p>\u5e95\u5c42\u6570\u636e\u7ed3\u6784\uff1a\u4e0e<code>ArrayList</code>\u7c7b\u4f3c\uff0c\u4e5f\u662f\u52a8\u6001\u6570\u7ec4\u3002</p> </li> <li> <p>\u7279\u70b9\uff1a\u5b83\u662f<code>ArrayList</code>\u7684\u7ebf\u7a0b\u5b89\u5168\u7248\u672c\uff0c\u5176\u6240\u6709\u516c\u5f00\u65b9\u6cd5\u90fd\u7531<code>synchronized</code>\u4fee\u9970\uff0c\u6027\u80fd\u5f00\u9500\u8f83\u5927\u3002</p> </li> <li> <p>\u9002\u7528\u573a\u666f\uff1a\u5982\u4eca\u5df2\u5f88\u5c11\u4f7f\u7528\uff0c\u901a\u5e38\u4f1a\u88ab<code>Collections.synchronizedList()</code>\u6216\u8005<code>java.util.concurrent</code>\u5305\u4e0b\u7684\u5e76\u53d1\u96c6\u5408\u66ff\u4ee3\u3002</p> </li> </ul> </li> </ol> <p><code>Set</code> \u63a5\u53e3\u7684\u7279\u70b9\u662f\uff1a\u5143\u7d20\u65e0\u5e8f\uff08\u901a\u5e38\u60c5\u51b5\u4e0b\uff09\uff0c\u4e14\u4e0d\u5141\u8bb8\u91cd\u590d\u3002\u5b83\u4e3b\u8981\u7528\u4e8e\u53bb\u91cd\u548c\u5224\u65ad\u67d0\u4e2a\u5143\u7d20\u662f\u5426\u5b58\u5728\u3002</p> <p>\u5e38\u7528\u7684\u5b9e\u73b0\u7c7b\u6709\uff1a</p> <ol> <li> <p>HashSet:</p> <ul> <li> <p>\u5e95\u5c42\u6570\u636e\u7ed3\u6784\uff1a\u57fa\u4e8e<code>HashMap</code>\u5b9e\u73b0\u3002\u5b83\u53ea\u4f7f\u7528<code>HashMap</code>\u7684\u952e\uff08Key\uff09\u6765\u5b58\u50a8\u5143\u7d20\uff0c\u503c\uff08Value\uff09\u90e8\u5206\u5219\u662f\u4e00\u4e2a\u56fa\u5b9a\u7684\u865a\u62df\u5bf9\u8c61\u3002</p> </li> <li> <p>\u7279\u70b9\uff1a\u5b58\u53d6\u901f\u5ea6\u5feb\uff0c\u4e0d\u4fdd\u8bc1\u5143\u7d20\u7684\u5b58\u50a8\u987a\u5e8f\u3002\u5224\u65ad\u5143\u7d20\u662f\u5426\u5b58\u5728\u975e\u5e38\u9ad8\u6548\u3002</p> </li> <li> <p>\u7ebf\u7a0b\u5b89\u5168\u6027\uff1a\u975e\u7ebf\u7a0b\u5b89\u5168\u3002</p> </li> </ul> </li> <li> <p>LinkedHashSet:</p> <ul> <li> <p>\u5e95\u5c42\u6570\u636e\u7ed3\u6784\uff1a\u57fa\u4e8e<code>LinkedHashMap</code>\u5b9e\u73b0\u3002</p> </li> <li> <p>\u7279\u70b9\uff1a\u5b83\u5728<code>HashSet</code>\u7684\u57fa\u7840\u4e0a\uff0c\u989d\u5916\u7ef4\u62a4\u4e86\u4e00\u4e2a\u94fe\u8868\u6765\u8bb0\u5f55\u5143\u7d20\u7684\u63d2\u5165\u987a\u5e8f\u3002\u56e0\u6b64\uff0c\u904d\u5386<code>LinkedHashSet</code>\u65f6\uff0c\u5143\u7d20\u4f1a\u6309\u7167\u63d2\u5165\u7684\u987a\u5e8f\u8f93\u51fa\u3002</p> </li> <li> <p>\u7ebf\u7a0b\u5b89\u5168\u6027\uff1a\u975e\u7ebf\u7a0b\u5b89\u5168\u3002</p> </li> </ul> </li> <li> <p>TreeSet:</p> <ul> <li> <p>\u5e95\u5c42\u6570\u636e\u7ed3\u6784\uff1a\u7ea2\u9ed1\u6811\uff08\u57fa\u4e8e<code>TreeMap</code>\u5b9e\u73b0\uff09\u3002</p> </li> <li> <p>\u7279\u70b9\uff1a\u5143\u7d20\u4f1a\u81ea\u52a8\u6392\u5e8f\u3002\u5b58\u5165<code>TreeSet</code>\u7684\u5143\u7d20\u5fc5\u987b\u5b9e\u73b0<code>Comparable</code>\u63a5\u53e3\uff0c\u6216\u8005\u5728\u521b\u5efa<code>TreeSet</code>\u65f6\u4f20\u5165\u4e00\u4e2a<code>Comparator</code>\u6bd4\u8f83\u5668\u3002</p> </li> <li> <p>\u9002\u7528\u573a\u666f\uff1a\u9700\u8981\u4e00\u4e2a\u80fd\u81ea\u52a8\u6392\u5e8f\u7684\u3001\u4e14\u4e0d\u5141\u8bb8\u91cd\u590d\u7684\u96c6\u5408\u3002</p> </li> <li> <p>\u7ebf\u7a0b\u5b89\u5168\u6027\uff1a\u975e\u7ebf\u7a0b\u5b89\u5168\u3002</p> </li> </ul> </li> </ol> <p><code>Queue</code> \u63a5\u53e3\u6a21\u62df\u4e86\u961f\u5217\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5373\u5148\u8fdb\u5148\u51fa\uff08FIFO\uff09\u3002</p> <p>\u5e38\u7528\u7684\u5b9e\u73b0\u7c7b\u6709\uff1a</p> <ol> <li> <p>LinkedList: \u5982\u524d\u6240\u8ff0\uff0c\u5b83\u5b9e\u73b0\u4e86<code>Deque</code>\uff08\u53cc\u7aef\u961f\u5217\uff09\u63a5\u53e3\uff0c\u56e0\u6b64\u53ef\u4ee5\u4f5c\u4e3a\u6807\u51c6\u7684\u961f\u5217\u4f7f\u7528\u3002</p> </li> <li> <p>PriorityQueue:</p> <ul> <li> <p>\u5e95\u5c42\u6570\u636e\u7ed3\u6784\uff1a\u4e8c\u53c9\u5806\u3002</p> </li> <li> <p>\u7279\u70b9\uff1a\u5b83\u4e0d\u662f\u4e00\u4e2a\u6807\u51c6\u7684\u5148\u8fdb\u5148\u51fa\u961f\u5217\uff0c\u800c\u662f\u4e00\u4e2a\u4f18\u5148\u961f\u5217\u3002\u5143\u7d20\u51fa\u961f\u7684\u987a\u5e8f\u662f\u6839\u636e\u5176\u81ea\u7136\u987a\u5e8f\u6216\u8005\u6784\u9020\u65f6\u4f20\u5165\u7684\u6bd4\u8f83\u5668\u51b3\u5b9a\u7684\uff0c\u6bcf\u6b21\u51fa\u961f\u7684\u90fd\u662f\u4f18\u5148\u7ea7\u6700\u9ad8\u7684\u5143\u7d20\u3002</p> </li> <li> <p>\u7ebf\u7a0b\u5b89\u5168\u6027\uff1a\u975e\u7ebf\u7a0b\u5b89\u5168\u3002</p> </li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/java/%E5%9F%BA%E7%A1%80/Java%E5%B8%B8%E7%94%A8%E7%9A%84%E9%9B%86%E5%90%88%E6%9C%89%E5%93%AA%E4%BA%9B/#2-map","title":"2. Map","text":"<p><code>Map</code> \u63a5\u53e3\u7528\u4e8e\u5b58\u50a8\u952e\u503c\u5bf9\uff08Key-Value\uff09\uff0c\u5b83\u7684\u952e\u662f\u552f\u4e00\u7684\uff0c\u6bcf\u4e2a\u952e\u90fd\u6620\u5c04\u5230\u4e00\u4e2a\u503c\u3002\u5b83\u4e0d\u7ee7\u627f\u81ea<code>Collection</code>\u63a5\u53e3\uff0c\u662f\u81ea\u6210\u4e00\u4f53\u7684\u4f53\u7cfb\u3002</p> <p>\u5e38\u7528\u7684\u5b9e\u73b0\u7c7b\u6709\uff1a</p> <ol> <li> <p>HashMap:</p> <ul> <li> <p>\u5e95\u5c42\u6570\u636e\u7ed3\u6784\uff1a\u6570\u7ec4 + \u94fe\u8868 / \u7ea2\u9ed1\u6811\u3002</p> </li> <li> <p>\u7279\u70b9\uff1a\u6700\u5e38\u7528\u7684Map\u5b9e\u73b0\uff0c\u5b58\u53d6\u901f\u5ea6\u5feb\uff0c\u4f46\u4e0d\u4fdd\u8bc1\u952e\u503c\u5bf9\u7684\u987a\u5e8f\u3002\u952e\u548c\u503c\u90fd\u5141\u8bb8\u4e3a<code>null</code>\u3002</p> </li> <li> <p>\u7ebf\u7a0b\u5b89\u5168\u6027\uff1a\u975e\u7ebf\u7a0b\u5b89\u5168\u3002</p> </li> </ul> </li> <li> <p>LinkedHashMap:</p> <ul> <li> <p>\u5e95\u5c42\u6570\u636e\u7ed3\u6784\uff1a\u5728<code>HashMap</code>\u7684\u57fa\u7840\u4e0a\uff0c\u589e\u52a0\u4e86\u4e00\u4e2a\u53cc\u5411\u94fe\u8868\u6765\u7ef4\u62a4\u63d2\u5165\u987a\u5e8f\u6216\u8bbf\u95ee\u987a\u5e8f\u3002</p> </li> <li> <p>\u7279\u70b9\uff1a\u904d\u5386\u65f6\u53ef\u4ee5\u6309\u7167\u63d2\u5165\u987a\u5e8f\u8f93\u51fa\u952e\u503c\u5bf9\u3002</p> </li> <li> <p>\u9002\u7528\u573a\u666f\uff1a\u9700\u8981\u4fdd\u6301\u63d2\u5165\u987a\u5e8f\u7684Map\uff0c\u6216\u5b9e\u73b0LRU\u7f13\u5b58\u7b49\u3002</p> </li> <li> <p>\u7ebf\u7a0b\u5b89\u5168\u6027\uff1a\u975e\u7ebf\u7a0b\u5b89\u5168\u3002</p> </li> </ul> </li> <li> <p>TreeMap:</p> <ul> <li> <p>\u5e95\u5c42\u6570\u636e\u7ed3\u6784\uff1a\u7ea2\u9ed1\u6811\u3002</p> </li> <li> <p>\u7279\u70b9\uff1a\u952e\u4f1a\u81ea\u52a8\u6392\u5e8f\u3002\u952e\u5fc5\u987b\u5b9e\u73b0<code>Comparable</code>\u63a5\u53e3\u6216\u5728\u6784\u9020\u65f6\u4f20\u5165<code>Comparator</code>\u3002</p> </li> <li> <p>\u9002\u7528\u573a\u666f\uff1a\u9700\u8981\u5bf9\u952e\u8fdb\u884c\u6392\u5e8f\u7684Map\u3002</p> </li> <li> <p>\u7ebf\u7a0b\u5b89\u5168\u6027\uff1a\u975e\u7ebf\u7a0b\u5b89\u5168\u3002</p> </li> </ul> </li> <li> <p>Hashtable:</p> <ul> <li> <p>\u5e95\u5c42\u6570\u636e\u7ed3\u6784\uff1a\u6570\u7ec4 + \u94fe\u8868\u3002</p> </li> <li> <p>\u7279\u70b9\uff1a<code>HashMap</code>\u7684\u53e4\u8001\u7ebf\u7a0b\u5b89\u5168\u7248\u672c\uff0c\u65b9\u6cd5\u7531<code>synchronized</code>\u4fee\u9970\u3002\u5b83\u4e0d\u5141\u8bb8\u952e\u6216\u503c\u4e3a<code>null</code>\u3002</p> </li> <li> <p>\u9002\u7528\u573a\u666f\uff1a\u4e0e<code>Vector</code>\u4e00\u6837\uff0c\u57fa\u672c\u5df2\u88ab\u6dd8\u6c70\uff0c\u901a\u5e38\u7531<code>ConcurrentHashMap</code>\u66ff\u4ee3\u3002</p> </li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/java/%E5%9F%BA%E7%A1%80/Java%E5%B8%B8%E7%94%A8%E7%9A%84%E9%9B%86%E5%90%88%E6%9C%89%E5%93%AA%E4%BA%9B/#3","title":"3. \u5e76\u53d1\u96c6\u5408","text":"<p>\u9664\u4e86\u4e0a\u8ff0\u96c6\u5408\uff0c<code>java.util.concurrent</code>\u5305\u4e0b\u8fd8\u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217\u4e3a\u5e76\u53d1\u73af\u5883\u8bbe\u8ba1\u7684\u9ad8\u6027\u80fd\u96c6\u5408\uff0c\u662f\u591a\u7ebf\u7a0b\u7f16\u7a0b\u65f6\u7684\u9996\u9009\u3002</p> <ul> <li> <p><code>ConcurrentHashMap</code>: \u7ebf\u7a0b\u5b89\u5168\u7684<code>HashMap</code>\uff0c\u901a\u8fc7\u5206\u6bb5\u9501\uff08Java 7\uff09\u6216CAS\u52a0<code>synchronized</code>\uff08Java 8\uff09\u7b49\u6280\u672f\u5b9e\u73b0\u9ad8\u6548\u5e76\u53d1\uff0c\u6027\u80fd\u8fdc\u8d85<code>Hashtable</code>\u3002</p> </li> <li> <p><code>CopyOnWriteArrayList</code>: \u7ebf\u7a0b\u5b89\u5168\u7684<code>ArrayList</code>\uff0c\u8bfb\u64cd\u4f5c\u4e0d\u52a0\u9501\uff0c\u5199\u64cd\u4f5c\u65f6\u4f1a\u590d\u5236\u6574\u4e2a\u5e95\u5c42\u6570\u7ec4\u3002\u9002\u5408\u8bfb\u591a\u5199\u6781\u5c11\u7684\u573a\u666f\u3002</p> </li> <li> <p><code>CopyOnWriteArraySet</code>: \u57fa\u4e8e<code>CopyOnWriteArrayList</code>\u5b9e\u73b0\u7684\u7ebf\u7a0b\u5b89\u5168Set\u3002</p> </li> <li> <p><code>BlockingQueue</code>\u63a5\u53e3\u53ca\u5176\u5b9e\u73b0\uff08\u5982<code>ArrayBlockingQueue</code>, <code>LinkedBlockingQueue</code>\uff09\uff1a\u7528\u4e8e\u751f\u4ea7\u8005-\u6d88\u8d39\u8005\u6a21\u578b\u7684\u963b\u585e\u961f\u5217\u3002</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/%E5%9F%BA%E7%A1%80/%E4%BB%80%E4%B9%88%E6%98%AF%E5%8F%8D%E5%B0%84/","title":"\u4ec0\u4e48\u662f\u53cd\u5c04","text":"<p>Java \u53cd\u5c04\uff08Reflection\uff09\u662f Java \u8bed\u8a00\u4e00\u4e2a\u5f3a\u5927\u4e14\u91cd\u8981\u7684\u7279\u6027\uff0c\u5b83\u5141\u8bb8\u7a0b\u5e8f\u5728\u8fd0\u884c\u65f6\u8fdb\u884c\u81ea\u6211\u68c0\u67e5\u548c\u5bf9\u5185\u90e8\u6210\u5458\u8fdb\u884c\u64cd\u4f5c\u3002 \u5177\u4f53\u6765\u8bf4\uff0c\u901a\u8fc7\u53cd\u5c04\u673a\u5236\uff0c\u7a0b\u5e8f\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u5730\u52a0\u8f7d\u7c7b\u3001\u83b7\u53d6\u7c7b\u7684\u8be6\u7ec6\u4fe1\u606f\uff08\u5305\u62ec\u5c5e\u6027\u3001\u65b9\u6cd5\u3001\u6784\u9020\u51fd\u6570\u7b49\uff09\uff0c\u5e76\u80fd\u5728\u8fd0\u884c\u65f6\u521b\u5efa\u5bf9\u8c61\u3001\u8c03\u7528\u65b9\u6cd5\u4ee5\u53ca\u8bbf\u95ee\u548c\u4fee\u6539\u5c5e\u6027\uff0c\u5373\u4f7f\u8fd9\u4e9b\u6210\u5458\u662f\u79c1\u6709\u7684\u3002 \u8fd9\u79cd\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u83b7\u53d6\u4fe1\u606f\u548c\u8c03\u7528\u5bf9\u8c61\u65b9\u6cd5\u7684\u80fd\u529b\uff0c\u88ab\u79f0\u4e3a Java \u8bed\u8a00\u7684\u53cd\u5c04\u673a\u5236\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/%E5%9F%BA%E7%A1%80/%E4%BB%80%E4%B9%88%E6%98%AF%E5%8F%8D%E5%B0%84/#_1","title":"\u53cd\u5c04\u7684\u6838\u5fc3\u7ec4\u4ef6","text":"<p>Java \u53cd\u5c04\u673a\u5236\u4e3b\u8981\u901a\u8fc7 <code>java.lang.reflect</code> \u5305\u4e0b\u7684\u4e00\u4e9b\u6838\u5fc3\u7c7b\u6765\u5b9e\u73b0\uff0c\u5176\u4e2d\u6700\u5173\u952e\u7684\u662f <code>Class</code> \u7c7b\u3001<code>Constructor</code> \u7c7b\u3001<code>Method</code> \u7c7b\u548c <code>Field</code> \u7c7b\u3002</p> <ul> <li> <p>Class \u7c7b\uff1a \u8fd9\u662f\u53cd\u5c04\u7684\u57fa\u7840\u3002\u6bcf\u4e2a\u7c7b\u5728\u7f16\u8bd1\u540e\u751f\u6210\u7684 <code>.class</code> \u6587\u4ef6\uff0c\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\u88ab\u52a0\u8f7d\u5230 JVM \u4e2d\uff0c\u90fd\u4f1a\u521b\u5efa\u4e00\u4e2a\u5bf9\u5e94\u7684 <code>Class</code> \u5bf9\u8c61\u3002 \u8fd9\u4e2a <code>Class</code> \u5bf9\u8c61\u5305\u542b\u4e86\u8be5\u7c7b\u7684\u6240\u6709\u4fe1\u606f\uff0c\u662f\u53cd\u5c04\u64cd\u4f5c\u7684\u5165\u53e3\u3002     \u83b7\u53d6 <code>Class</code> \u5bf9\u8c61\u4e3b\u8981\u6709\u4e09\u79cd\u65b9\u5f0f\uff1a</p> <ol> <li>\u901a\u8fc7\u5bf9\u8c61\u5b9e\u4f8b\u8c03\u7528 <code>getClass()</code> \u65b9\u6cd5\uff1a<code>MyClass obj = new MyClass(); Class&lt;?&gt; clazz = obj.getClass();</code></li> <li>\u901a\u8fc7\u7c7b\u540d\u76f4\u63a5\u83b7\u53d6\uff1a<code>Class&lt;?&gt; clazz = MyClass.class;</code></li> <li>\u901a\u8fc7\u7c7b\u7684\u5168\u9650\u5b9a\u540d\u83b7\u53d6\uff08\u6700\u5e38\u7528\uff09\uff1a<code>Class&lt;?&gt; clazz = Class.forName(\"com.example.MyClass\");</code></li> </ol> </li> <li> <p>Constructor \u7c7b\uff1a \u4ee3\u8868\u7c7b\u7684\u6784\u9020\u65b9\u6cd5\u3002\u901a\u8fc7 <code>Class</code> \u5bf9\u8c61\uff0c\u53ef\u4ee5\u83b7\u53d6\u8be5\u7c7b\u7684\u6240\u6709\u6784\u9020\u65b9\u6cd5\uff0c\u5e76\u4f7f\u7528\u5b83\u4eec\u6765\u521b\u5efa\u65b0\u7684\u5bf9\u8c61\u5b9e\u4f8b\u3002 <code>Constructor</code> \u7c7b\u7684 <code>newInstance(Object... initargs)</code> \u65b9\u6cd5\u53ef\u4ee5\u7528\u6765\u8c03\u7528\u6784\u9020\u51fd\u6570\u521b\u5efa\u5bf9\u8c61\u3002</p> </li> <li> <p>Method \u7c7b\uff1a \u4ee3\u8868\u7c7b\u7684\u65b9\u6cd5\u3002\u901a\u8fc7 <code>Class</code> \u5bf9\u8c61\uff0c\u53ef\u4ee5\u83b7\u53d6\u8be5\u7c7b\u7684\u6240\u6709\u65b9\u6cd5\uff0c\u5305\u62ec\u516c\u5171\u7684\u3001\u79c1\u6709\u7684\u3001\u7ee7\u627f\u7684\u65b9\u6cd5\u7b49\u3002 \u83b7\u53d6 <code>Method</code> \u5bf9\u8c61\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>invoke(Object obj, Object... args)</code> \u65b9\u6cd5\u6765\u52a8\u6001\u5730\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\u3002</p> </li> <li> <p>Field \u7c7b\uff1a \u4ee3\u8868\u7c7b\u7684\u5c5e\u6027\uff08\u6210\u5458\u53d8\u91cf\uff09\u3002\u901a\u8fc7 <code>Class</code> \u5bf9\u8c61\uff0c\u53ef\u4ee5\u83b7\u53d6\u8be5\u7c7b\u7684\u6240\u6709\u5c5e\u6027\u3002 \u83b7\u53d6 <code>Field</code> \u5bf9\u8c61\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>get(Object obj)</code> \u548c <code>set(Object obj, Object value)</code> \u65b9\u6cd5\u6765\u8bfb\u53d6\u548c\u4fee\u6539\u5bf9\u5e94\u5bf9\u8c61\u7684\u5c5e\u6027\u503c\u3002</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/%E5%9F%BA%E7%A1%80/%E4%BB%80%E4%B9%88%E6%98%AF%E5%8F%8D%E5%B0%84/#_2","title":"\u53cd\u5c04\u7684\u5e94\u7528\u573a\u666f","text":"<p>\u53cd\u5c04\u673a\u5236\u7684\u52a8\u6001\u6027\u4f7f\u5176\u5728\u8bb8\u591a\u6846\u67b6\u548c\u9ad8\u7ea7\u7f16\u7a0b\u573a\u666f\u4e2d\u626e\u6f14\u7740\u81f3\u5173\u91cd\u8981\u7684\u89d2\u8272\uff1a</p> <ul> <li>\u6846\u67b6\u5f00\u53d1\uff1a \u7edd\u5927\u591a\u6570\u4e3b\u6d41\u6846\u67b6\uff0c\u5982 Spring\u3001MyBatis \u7b49\uff0c\u90fd\u5927\u91cf\u4f7f\u7528\u4e86\u53cd\u5c04\u6280\u672f\u3002 \u4f8b\u5982\uff0cSpring \u7684\u4f9d\u8d56\u6ce8\u5165\uff08DI\uff09\u5c31\u662f\u901a\u8fc7\u53cd\u5c04\u6765\u52a8\u6001\u521b\u5efa\u5bf9\u8c61\u5e76\u6ce8\u5165\u4f9d\u8d56\u7684\u3002</li> <li>\u52a8\u6001\u4ee3\u7406\uff1a JDK \u52a8\u6001\u4ee3\u7406\u7684\u5b9e\u73b0\u79bb\u4e0d\u5f00\u53cd\u5c04\u673a\u5236\uff0c\u5b83\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u5730\u521b\u5efa\u4e00\u4e2a\u4ee3\u7406\u7c7b\uff0c\u5e76\u8c03\u7528\u76ee\u6807\u5bf9\u8c61\u7684\u65b9\u6cd5\u3002</li> <li>\u6ce8\u89e3\u5904\u7406\uff1a \u7a0b\u5e8f\u53ef\u4ee5\u901a\u8fc7\u53cd\u5c04\u83b7\u53d6\u7c7b\u3001\u65b9\u6cd5\u6216\u5c5e\u6027\u4e0a\u7684\u6ce8\u89e3\u4fe1\u606f\uff0c\u5e76\u6839\u636e\u6ce8\u89e3\u5185\u5bb9\u6267\u884c\u76f8\u5e94\u7684\u903b\u8f91\uff0c\u8fd9\u5728\u5355\u5143\u6d4b\u8bd5\uff08\u5982 JUnit\uff09\u548c\u8bb8\u591a\u6846\u67b6\u4e2d\u975e\u5e38\u5e38\u89c1\u3002</li> <li>\u63d2\u4ef6\u5316\u548c\u52a8\u6001\u52a0\u8f7d\uff1a \u901a\u8fc7\u53cd\u5c04\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u52a0\u8f7d\u5e76\u6267\u884c\u914d\u7f6e\u6587\u4ef6\u4e2d\u6307\u5b9a\u7684\u7c7b\uff0c\u5b9e\u73b0\u7a0b\u5e8f\u7684\u63d2\u4ef6\u5316\u548c\u70ed\u62d4\u63d2\u529f\u80fd\u3002</li> <li>\u5bf9\u8c61\u5e8f\u5217\u5316\u4e0e\u53cd\u5e8f\u5217\u5316\uff1a \u5728\u5bf9\u8c61\u8fdb\u884c\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u64cd\u4f5c\u65f6\uff0c\u4e5f\u53ef\u80fd\u4f7f\u7528\u53cd\u5c04\u6765\u83b7\u53d6\u5bf9\u8c61\u7684\u6240\u6709\u5c5e\u6027\u548c\u65b9\u6cd5\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/%E5%9F%BA%E7%A1%80/%E4%BB%80%E4%B9%88%E6%98%AF%E5%8F%8D%E5%B0%84/#_3","title":"\u4f18\u7f3a\u70b9","text":"<p>\u5c3d\u7ba1\u53cd\u5c04\u529f\u80fd\u5f3a\u5927\uff0c\u4f46\u5728\u4f7f\u7528\u65f6\u4e5f\u9700\u8981\u6743\u8861\u5176\u4f18\u7f3a\u70b9\u3002</p> <p>\u4f18\u70b9\uff1a *   \u7075\u6d3b\u6027\u548c\u52a8\u6001\u6027\uff1a \u8fd9\u662f\u53cd\u5c04\u6700\u5927\u7684\u4f18\u70b9\u3002\u5b83\u5141\u8bb8\u7a0b\u5e8f\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u5730\u521b\u5efa\u548c\u64cd\u4f5c\u5bf9\u8c61\uff0c\u5927\u5927\u63d0\u9ad8\u4e86\u7a0b\u5e8f\u7684\u7075\u6d3b\u6027\u548c\u53ef\u6269\u5c55\u6027\u3002 *   \u63d0\u9ad8\u4ee3\u7801\u901a\u7528\u6027\uff1a \u901a\u8fc7\u53cd\u5c04\u53ef\u4ee5\u7f16\u5199\u51fa\u66f4\u901a\u7528\u7684\u4ee3\u7801\uff0c\u4f7f\u5176\u80fd\u591f\u9002\u5e94\u4e0d\u540c\u7684\u7c7b\u7ed3\u6784\u548c\u63a5\u53e3\uff0c\u4ece\u800c\u63d0\u9ad8\u4ee3\u7801\u7684\u590d\u7528\u7387\u3002 *   \u8fd0\u884c\u65f6\u4fe1\u606f\u83b7\u53d6\uff1a \u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u83b7\u53d6\u4efb\u610f\u4e00\u4e2a\u7c7b\u7684\u6240\u6709\u6210\u5458\u4fe1\u606f\uff0c\u5e76\u8fdb\u884c\u64cd\u4f5c\u3002</p> <p>\u7f3a\u70b9\uff1a *   \u6027\u80fd\u5f00\u9500\uff1a \u53cd\u5c04\u64cd\u4f5c\u901a\u5e38\u6bd4\u76f4\u63a5\u4ee3\u7801\u8c03\u7528\u8981\u6162\u3002 \u8fd9\u6d89\u53ca\u5230\u52a8\u6001\u7c7b\u578b\u89e3\u6790\uff0c\u4f7f\u5f97 JVM \u65e0\u6cd5\u8fdb\u884c\u6709\u6548\u7684\u4f18\u5316\u3002 \u6027\u80fd\u5f00\u9500\u4e3b\u8981\u6765\u6e90\u4e8e\u65b9\u6cd5\u67e5\u627e\u3001\u53c2\u6570\u7684\u5c01\u88c5\u548c\u89e3\u5c01\u3001\u6743\u9650\u68c0\u67e5\u7b49\u3002 *   \u4ee3\u7801\u53ef\u8bfb\u6027\u4e0b\u964d\uff1a \u8fc7\u5ea6\u4f7f\u7528\u53cd\u5c04\u4f1a\u4f7f\u4ee3\u7801\u903b\u8f91\u53d8\u5f97\u590d\u6742\uff0c\u7ed5\u8fc7\u4e86\u6e90\u4ee3\u7801\u7684\u76f4\u63a5\u8c03\u7528\uff0c\u964d\u4f4e\u4e86\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\u548c\u53ef\u7ef4\u62a4\u6027\u3002 *   \u5b89\u5168\u6027\u95ee\u9898\uff1a \u53cd\u5c04\u53ef\u4ee5\u7ed5\u8fc7\u8bbf\u95ee\u4fee\u9970\u7b26\u7684\u9650\u5236\uff08\u5982\u8c03\u7528\u79c1\u6709\u65b9\u6cd5\u3001\u4fee\u6539\u79c1\u6709\u5c5e\u6027\uff09\uff0c\u8fd9\u53ef\u80fd\u4f1a\u7834\u574f\u7c7b\u7684\u5c01\u88c5\u6027\u548c\u5b89\u5168\u6027\u3002 \u56e0\u6b64\u9700\u8981\u8c28\u614e\u4f7f\u7528\uff0c\u5c24\u5176\u662f\u5728\u5bf9\u5b89\u5168\u6027\u8981\u6c42\u9ad8\u7684\u7cfb\u7edf\u4e2d\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/%E5%9F%BA%E7%A1%80/%E4%BB%80%E4%B9%88%E6%98%AF%E6%B3%9B%E5%9E%8B/","title":"\u4ec0\u4e48\u662f\u6cdb\u578b","text":"<p>Java \u6cdb\u578b\uff08Generics\uff09\u662f\u81ea JDK 5.0 \u7248\u672c\u5f15\u5165\u7684\u4e00\u9879\u5173\u952e\u7279\u6027\uff0c\u5b83\u5c06\u53c2\u6570\u5316\u7c7b\u578b\u7684\u6982\u5ff5\u5f15\u5165\u5230 Java \u7f16\u7a0b\u4e2d\u3002\u6cdb\u578b\u7684\u672c\u8d28\u662f\u4e3a\u4e86\u521b\u5efa\u53ef\u64cd\u4f5c\u591a\u79cd\u6570\u636e\u7c7b\u578b\u7684\u7c7b\u3001\u63a5\u53e3\u548c\u65b9\u6cd5\uff0c\u540c\u65f6\u63d0\u4f9b\u7f16\u8bd1\u65f6\u671f\u7684\u7c7b\u578b\u5b89\u5168\u68c0\u67e5\u3002\u8fd9\u9879\u7279\u6027\u663e\u8457\u63d0\u5347\u4e86\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\u3001\u5065\u58ee\u6027\u548c\u590d\u7528\u6027\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/%E5%9F%BA%E7%A1%80/%E4%BB%80%E4%B9%88%E6%98%AF%E6%B3%9B%E5%9E%8B/#_1","title":"\u6838\u5fc3\u4f18\u52bf","text":"<p>\u5f15\u5165\u6cdb\u578b\u4e3b\u8981\u662f\u4e3a\u4e86\u89e3\u51b3\u4e24\u4e2a\u6838\u5fc3\u95ee\u9898\uff1a\u7c7b\u578b\u5b89\u5168\u548c\u4ee3\u7801\u91cd\u7528\u3002</p> <ul> <li>\u7c7b\u578b\u5b89\u5168\uff1a\u5728\u6cdb\u578b\u51fa\u73b0\u4e4b\u524d\uff0cJava \u7684\u96c6\u5408\u7c7b\uff08\u5982 <code>ArrayList</code>\uff09\u53ea\u80fd\u5b58\u50a8 <code>Object</code> \u7c7b\u578b\u7684\u5bf9\u8c61\u3002\u8fd9\u610f\u5473\u7740\u5728\u4ece\u96c6\u5408\u4e2d\u53d6\u51fa\u5bf9\u8c61\u65f6\uff0c\u5fc5\u987b\u8fdb\u884c\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362\uff0c\u8fd9\u4e0d\u4ec5\u7e41\u7410\uff0c\u800c\u4e14\u5bb9\u6613\u5728\u8fd0\u884c\u65f6\u5f15\u53d1 <code>ClassCastException</code> \u5f02\u5e38\u3002\u6cdb\u578b\u5728\u7f16\u8bd1\u65f6\u671f\u5c31\u5bf9\u7c7b\u578b\u8fdb\u884c\u68c0\u67e5\uff0c\u4ece\u800c\u907f\u514d\u4e86\u8fd9\u7c7b\u9519\u8bef\u7684\u53d1\u751f\u3002</li> <li>\u6d88\u9664\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362\uff1a\u901a\u8fc7\u5728\u58f0\u660e\u96c6\u5408\u65f6\u6307\u5b9a\u5176\u53ef\u5b58\u50a8\u7684\u5143\u7d20\u7c7b\u578b\uff0c\u53ef\u4ee5\u7701\u53bb\u5927\u91cf\u7684\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362\u4ee3\u7801\uff0c\u4f7f\u4ee3\u7801\u66f4\u52a0\u7b80\u6d01\u3001\u6e05\u6670\u3002</li> <li>\u4ee3\u7801\u590d\u7528\uff1a\u6cdb\u578b\u5141\u8bb8\u7a0b\u5e8f\u5458\u7f16\u5199\u901a\u7528\u7684\u7b97\u6cd5\u548c\u6570\u636e\u7ed3\u6784\uff0c\u8fd9\u4e9b\u4ee3\u7801\u53ef\u4ee5\u5b89\u5168\u5730\u5e94\u7528\u4e8e\u591a\u79cd\u4e0d\u540c\u7684\u6570\u636e\u7c7b\u578b\uff0c\u800c\u65e0\u9700\u4e3a\u6bcf\u79cd\u7c7b\u578b\u90fd\u7f16\u5199\u91cd\u590d\u7684\u903b\u8f91\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/%E5%9F%BA%E7%A1%80/%E4%BB%80%E4%B9%88%E6%98%AF%E6%B3%9B%E5%9E%8B/#_2","title":"\u57fa\u672c\u8bed\u6cd5","text":"<p>\u6cdb\u578b\u901a\u8fc7\u5c16\u62ec\u53f7 <code>&lt;&gt;</code> \u6765\u58f0\u660e\u7c7b\u578b\u53c2\u6570\uff0c\u8fd9\u4e9b\u53c2\u6570\u5728\u7c7b\u3001\u63a5\u53e3\u6216\u65b9\u6cd5\u88ab\u4f7f\u7528\u65f6\uff0c\u4f1a\u88ab\u5177\u4f53\u7684\u7c7b\u578b\u6240\u66ff\u4ee3\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/%E5%9F%BA%E7%A1%80/%E4%BB%80%E4%B9%88%E6%98%AF%E6%B3%9B%E5%9E%8B/#1","title":"1. \u6cdb\u578b\u7c7b","text":"<p>\u6cdb\u578b\u7c7b\u662f\u5728\u5b9e\u4f8b\u5316\u65f6\u63a5\u53d7\u7c7b\u578b\u53c2\u6570\u7684\u7c7b\u3002\u5176\u5b9a\u4e49\u8bed\u6cd5\u5982\u4e0b\uff1a</p> <pre><code>class Box&lt;T&gt; {\n    private T t;\n\n    public void set(T t) {\n        this.t = t;\n    }\n\n    public T get() {\n        return t;\n    }\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c<code>T</code> \u662f\u4e00\u4e2a\u7c7b\u578b\u53c2\u6570\uff0c\u53ef\u4ee5\u5728\u521b\u5efa <code>Box</code> \u5bf9\u8c61\u65f6\u6307\u5b9a\u4e3a\u4efb\u4f55\u7c7b\u7c7b\u578b\u3002</p> <pre><code>Box&lt;Integer&gt; integerBox = new Box&lt;&gt;();\nintegerBox.set(10); // \u6b63\u786e\n// integerBox.set(\"hello\"); // \u7f16\u8bd1\u65f6\u9519\u8bef\n\nBox&lt;String&gt; stringBox = new Box&lt;&gt;();\nstringBox.set(\"Hello World\"); // \u6b63\u786e\n</code></pre>"},{"location":"%E9%9D%A2%E7%BB%8F/java/%E5%9F%BA%E7%A1%80/%E4%BB%80%E4%B9%88%E6%98%AF%E6%B3%9B%E5%9E%8B/#2","title":"2. \u6cdb\u578b\u63a5\u53e3","text":"<p>\u4e0e\u6cdb\u578b\u7c7b\u7c7b\u4f3c\uff0c\u63a5\u53e3\u4e5f\u53ef\u4ee5\u901a\u8fc7\u6cdb\u578b\u6765\u5b9a\u4e49\u3002</p> <pre><code>interface Generator&lt;T&gt; {\n    T next();\n}\n</code></pre> <p>\u5b9e\u73b0\u8be5\u63a5\u53e3\u7684\u7c7b\uff0c\u53ef\u4ee5\u9009\u62e9\u6307\u5b9a\u5177\u4f53\u7684\u7c7b\u578b\uff0c\u4e5f\u53ef\u4ee5\u7ee7\u7eed\u4f7f\u7528\u6cdb\u578b\u3002</p> <pre><code>class RandomIntegerGenerator implements Generator&lt;Integer&gt; {\n    private Random rand = new Random();\n\n    @Override\n    public Integer next() {\n        return rand.nextInt(100);\n    }\n}\n</code></pre>"},{"location":"%E9%9D%A2%E7%BB%8F/java/%E5%9F%BA%E7%A1%80/%E4%BB%80%E4%B9%88%E6%98%AF%E6%B3%9B%E5%9E%8B/#3","title":"3. \u6cdb\u578b\u65b9\u6cd5","text":"<p>\u6cdb\u578b\u65b9\u6cd5\u662f\u5728\u8c03\u7528\u65f6\u624d\u6307\u660e\u5177\u4f53\u7c7b\u578b\u7684\u65b9\u6cd5\uff0c\u5b83\u53ef\u4ee5\u5728\u666e\u901a\u7c7b\u4e2d\u5b9a\u4e49\uff0c\u4e5f\u53ef\u4ee5\u5728\u6cdb\u578b\u7c7b\u4e2d\u5b9a\u4e49\u3002 \u6cdb\u578b\u65b9\u6cd5\u7684\u7c7b\u578b\u53c2\u6570\u58f0\u660e\u4f4d\u4e8e\u65b9\u6cd5\u4fee\u9970\u7b26\u548c\u8fd4\u56de\u7c7b\u578b\u4e4b\u95f4\u3002</p> <pre><code>public class Utils {\n    public static &lt;T&gt; void printArray(T[] inputArray) {\n        for (T element : inputArray) {\n            System.out.printf(\"%s \", element);\n        }\n        System.out.println();\n    }\n}\n</code></pre> <p>\u8c03\u7528\u6cdb\u578b\u65b9\u6cd5\u65f6\uff0c\u7f16\u8bd1\u5668\u901a\u5e38\u4f1a\u5229\u7528\u7c7b\u578b\u63a8\u65ad\u6765\u786e\u5b9a <code>T</code> \u7684\u5177\u4f53\u7c7b\u578b\u3002</p> <pre><code>Integer[] intArray = { 1, 2, 3, 4, 5 };\nString[] stringArray = { \"Hello\", \"World\" };\n\nUtils.printArray(intArray);\nUtils.printArray(stringArray);\n</code></pre> <p>\u6ce8\u610f\uff1a \u9759\u6001\u65b9\u6cd5\u5982\u679c\u8981\u4f7f\u7528\u6cdb\u578b\uff0c\u5fc5\u987b\u88ab\u5b9a\u4e49\u4e3a\u6cdb\u578b\u65b9\u6cd5\uff0c\u56e0\u4e3a\u5b83\u65e0\u6cd5\u8bbf\u95ee\u7c7b\u4e0a\u5b9a\u4e49\u7684\u6cdb\u578b\u7c7b\u578b\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/%E5%9F%BA%E7%A1%80/%E4%BB%80%E4%B9%88%E6%98%AF%E6%B3%9B%E5%9E%8B/#_3","title":"\u6cdb\u578b\u901a\u914d\u7b26","text":"<p>\u901a\u914d\u7b26 <code>?</code> \u662f Java \u6cdb\u578b\u4e2d\u4e00\u4e2a\u5f3a\u5927\u800c\u7075\u6d3b\u7684\u6982\u5ff5\uff0c\u7528\u4e8e\u8868\u793a\u672a\u77e5\u7684\u7c7b\u578b\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/%E5%9F%BA%E7%A1%80/%E4%BB%80%E4%B9%88%E6%98%AF%E6%B3%9B%E5%9E%8B/#1_1","title":"1. \u65e0\u754c\u901a\u914d\u7b26 <code>&lt;?&gt;</code>","text":"<p>\u65e0\u754c\u901a\u914d\u7b26 <code>&lt;?&gt;</code> \u8868\u793a\u53ef\u4ee5\u662f\u4efb\u4f55\u7c7b\u578b\uff0c\u5b83\u5728\u903b\u8f91\u4e0a\u662f\u6240\u6709 <code>List&lt;\u5177\u4f53\u7c7b\u578b&gt;</code> \u7684\u7236\u7c7b\u3002 \u5f53\u4e00\u4e2a\u65b9\u6cd5\u7684\u53c2\u6570\u7c7b\u578b\u662f <code>List&lt;?&gt;</code> \u65f6\uff0c\u4f60\u4e0d\u80fd\u5411\u8fd9\u4e2a\u5217\u8868\u4e2d\u6dfb\u52a0\u4efb\u4f55\u5143\u7d20\uff08<code>null</code> \u9664\u5916\uff09\uff0c\u56e0\u4e3a\u7f16\u8bd1\u5668\u65e0\u6cd5\u786e\u5b9a\u5143\u7d20\u7684\u5177\u4f53\u7c7b\u578b\u662f\u5426\u5339\u914d\u3002\u4f46\u662f\uff0c\u4f60\u53ef\u4ee5\u5b89\u5168\u5730\u8bfb\u53d6\u5143\u7d20\uff0c\u56e0\u4e3a\u4f60\u77e5\u9053\u5b83\u4eec\u90fd\u662f <code>Object</code> \u7c7b\u578b\u7684\u3002</p> <pre><code>public static void printList(List&lt;?&gt; list) {\n    for (Object elem : list) {\n        System.out.print(elem + \" \");\n    }\n    System.out.println();\n}\n</code></pre>"},{"location":"%E9%9D%A2%E7%BB%8F/java/%E5%9F%BA%E7%A1%80/%E4%BB%80%E4%B9%88%E6%98%AF%E6%B3%9B%E5%9E%8B/#2-extends-t","title":"2. \u4e0a\u754c\u901a\u914d\u7b26 <code>&lt;? extends T&gt;</code>","text":"<p>\u4e0a\u754c\u901a\u914d\u7b26 <code>&lt;? extends T&gt;</code> \u8868\u793a\u53c2\u6570\u5316\u7684\u7c7b\u578b\u5fc5\u987b\u662f <code>T</code> \u6216 <code>T</code> \u7684\u5b50\u7c7b\u3002 \u8fd9\u901a\u5e38\u7528\u4e8e\u5f53\u4f60\u9700\u8981\u4ece\u4e00\u4e2a\u6570\u636e\u7ed3\u6784\u4e2d\u8bfb\u53d6\u6570\u636e\uff08\u4f5c\u4e3a\u751f\u4ea7\u8005\uff09\u7684\u573a\u666f\u3002</p> <p>\u4f8b\u5982\uff0c\u4e00\u4e2a\u63a5\u53d7 <code>List&lt;? extends Number&gt;</code> \u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u5904\u7406 <code>List&lt;Integer&gt;</code>\u3001<code>List&lt;Double&gt;</code> \u7b49\uff0c\u56e0\u4e3a <code>Integer</code> \u548c <code>Double</code> \u90fd\u662f <code>Number</code> \u7684\u5b50\u7c7b\u3002\u4f60\u4e0d\u80fd\u5f80\u8fd9\u4e2a\u5217\u8868\u4e2d\u6dfb\u52a0\u5143\u7d20\uff08<code>null</code> \u9664\u5916\uff09\uff0c\u56e0\u4e3a\u7f16\u8bd1\u5668\u65e0\u6cd5\u786e\u5b9a\u5217\u8868\u7684\u786e\u5207\u7c7b\u578b\uff0c\u4f46\u4f60\u53ef\u4ee5\u5b89\u5168\u5730\u5c06\u5143\u7d20\u8bfb\u53d6\u4e3a <code>Number</code> \u7c7b\u578b\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/%E5%9F%BA%E7%A1%80/%E4%BB%80%E4%B9%88%E6%98%AF%E6%B3%9B%E5%9E%8B/#3-super-t","title":"3. \u4e0b\u754c\u901a\u914d\u7b26 <code>&lt;? super T&gt;</code>","text":"<p>\u4e0b\u754c\u901a\u914d\u7b26 <code>&lt;? super T&gt;</code> \u8868\u793a\u53c2\u6570\u5316\u7684\u7c7b\u578b\u5fc5\u987b\u662f <code>T</code> \u6216 <code>T</code> \u7684\u7236\u7c7b\u3002 \u8fd9\u901a\u5e38\u7528\u4e8e\u5f53\u4f60\u9700\u8981\u5411\u4e00\u4e2a\u6570\u636e\u7ed3\u6784\u4e2d\u5199\u5165\u6570\u636e\uff08\u4f5c\u4e3a\u6d88\u8d39\u8005\uff09\u7684\u573a\u666f\u3002</p> <p>\u4f8b\u5982\uff0c\u4e00\u4e2a\u63a5\u53d7 <code>List&lt;? super Integer&gt;</code> \u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u5904\u7406 <code>List&lt;Integer&gt;</code>\u3001<code>List&lt;Number&gt;</code> \u6216 <code>List&lt;Object&gt;</code>\u3002\u4f60\u53ef\u4ee5\u5b89\u5168\u5730\u5411\u8fd9\u4e2a\u5217\u8868\u4e2d\u6dfb\u52a0 <code>Integer</code> \u6216\u5176\u5b50\u7c7b\u578b\u7684\u5bf9\u8c61\uff0c\u56e0\u4e3a\u5b83\u4eec\u90fd\u53ef\u4ee5\u5411\u4e0a\u8f6c\u578b\u4e3a <code>T</code>\u3002\u4f46\u662f\uff0c\u5f53\u4f60\u4ece\u4e2d\u8bfb\u53d6\u6570\u636e\u65f6\uff0c\u53ea\u80fd\u4fdd\u8bc1\u5b83\u4eec\u662f <code>Object</code> \u7c7b\u578b\u7684\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/%E5%9F%BA%E7%A1%80/%E4%BB%80%E4%B9%88%E6%98%AF%E6%B3%9B%E5%9E%8B/#_4","title":"\u6838\u5fc3\u673a\u5236\uff1a\u7c7b\u578b\u64e6\u9664","text":"<p>Java \u6cdb\u578b\u662f\u901a\u8fc7\u4e00\u79cd\u88ab\u79f0\u4e3a\u201c\u7c7b\u578b\u64e6\u9664\u201d\uff08Type Erasure\uff09\u7684\u673a\u5236\u6765\u5b9e\u73b0\u7684\u3002 \u8fd9\u610f\u5473\u7740\u6cdb\u578b\u4fe1\u606f\u53ea\u5b58\u5728\u4e8e\u7f16\u8bd1\u9636\u6bb5\uff0c\u5728\u751f\u6210\u7684\u5b57\u8282\u7801\u4e2d\uff0c\u6240\u6709\u7684\u6cdb\u578b\u7c7b\u578b\u53c2\u6570\u90fd\u4f1a\u88ab\u66ff\u6362\u4e3a\u5176\u8fb9\u754c\u7c7b\u578b\uff08\u5bf9\u4e8e\u65e0\u754c\u7684\u7c7b\u578b\u53c2\u6570\uff0c\u5219\u66ff\u6362\u4e3a <code>Object</code>\uff09\u3002</p> <p>\u4f8b\u5982\uff0c<code>Box&lt;T&gt;</code> \u5728\u7f16\u8bd1\u540e\u4f1a\u53d8\u6210 <code>Box</code>\uff0c\u5176\u5185\u90e8\u7684 <code>T</code> \u7c7b\u578b\u4f1a\u88ab\u66ff\u6362\u4e3a <code>Object</code>\u3002\u7f16\u8bd1\u5668\u4f1a\u5728\u5fc5\u8981\u7684\u5730\u65b9\u81ea\u52a8\u63d2\u5165\u7c7b\u578b\u8f6c\u6362\u4ee3\u7801\uff0c\u4ee5\u4fdd\u8bc1\u7c7b\u578b\u5b89\u5168\u3002</p> <p>\u4e3a\u4ec0\u4e48\u9700\u8981\u7c7b\u578b\u64e6\u9664\uff1f</p> <p>\u7c7b\u578b\u64e6\u9664\u4e3b\u8981\u662f\u4e3a\u4e86\u5411\u540e\u517c\u5bb9\u3002\u5728 JDK 5.0 \u5f15\u5165\u6cdb\u578b\u65f6\uff0c\u9700\u8981\u786e\u4fdd\u65b0\u7684\u6cdb\u578b\u4ee3\u7801\u80fd\u591f\u4e0e\u65e7\u7684\u3001\u975e\u6cdb\u578b\u7684\u4ee3\u7801\u5e93\u517c\u5bb9\u3002</p> <p>\u7c7b\u578b\u64e6\u9664\u7684\u5f71\u54cd\uff1a</p> <ul> <li>\u65e0\u6cd5\u83b7\u53d6\u8fd0\u884c\u65f6\u6cdb\u578b\u7c7b\u578b\uff1a\u5728\u8fd0\u884c\u65f6\uff0c<code>ArrayList&lt;String&gt;</code> \u548c <code>ArrayList&lt;Integer&gt;</code> \u7684 <code>getClass()</code> \u65b9\u6cd5\u90fd\u5c06\u8fd4\u56de <code>ArrayList.class</code>\uff0c\u56e0\u4e3a\u6cdb\u578b\u4fe1\u606f\u5df2\u88ab\u64e6\u9664\u3002</li> <li>\u4e0d\u80fd\u521b\u5efa\u6cdb\u578b\u6570\u7ec4\uff1a\u4f60\u4e0d\u80fd\u76f4\u63a5\u521b\u5efa\u50cf <code>new T[]</code> \u8fd9\u6837\u7684\u6cdb\u578b\u6570\u7ec4\uff0c\u56e0\u4e3a\u6570\u7ec4\u7684\u7c7b\u578b\u5728\u8fd0\u884c\u65f6\u5fc5\u987b\u662f\u5177\u4f53\u7684\u3002</li> <li>\u4e0d\u80fd\u5b9e\u4f8b\u5316\u7c7b\u578b\u53c2\u6570\uff1a\u4e0d\u80fd\u521b\u5efa\u7c7b\u578b\u53c2\u6570\u7684\u5b9e\u4f8b\uff0c\u4f8b\u5982 <code>new T()</code>\u3002</li> <li>\u9759\u6001\u4e0a\u4e0b\u6587\u4e2d\u4e0d\u80fd\u4f7f\u7528\u7c7b\u7684\u7c7b\u578b\u53c2\u6570\uff1a\u9759\u6001\u53d8\u91cf\u6216\u65b9\u6cd5\u4e0d\u80fd\u5f15\u7528\u5176\u6240\u5728\u7c7b\u7684\u7c7b\u578b\u53c2\u6570\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/java/%E5%9F%BA%E7%A1%80/%E6%B7%B1%E6%8B%B7%E8%B4%9D%E5%92%8C%E6%B5%85%E6%8B%B7%E8%B4%9D%E5%8C%BA%E5%88%AB/","title":"\u6df1\u62f7\u8d1d\u548c\u6d45\u62f7\u8d1d\u533a\u522b","text":""},{"location":"%E9%9D%A2%E7%BB%8F/java/%E5%9F%BA%E7%A1%80/%E6%B7%B1%E6%8B%B7%E8%B4%9D%E5%92%8C%E6%B5%85%E6%8B%B7%E8%B4%9D%E5%8C%BA%E5%88%AB/#1-shallow-copy","title":"1. \u6d45\u62f7\u8d1d (Shallow Copy)","text":"<p>\u6d45\u62f7\u8d1d\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u5bf9\u8c61\uff0c\u7136\u540e\u5c06\u539f\u59cb\u5bf9\u8c61\u4e2d\u7684\u6240\u6709\u5b57\u6bb5\u7684\u503c\uff0c\u539f\u5c01\u4e0d\u52a8\u5730\u590d\u5236\u5230\u65b0\u5bf9\u8c61\u4e2d\u3002</p> <ul> <li> <p>\u5bf9\u4e8e\u57fa\u672c\u6570\u636e\u7c7b\u578b\uff08\u5982 int, double, boolean \u7b49\uff09\uff0c\u6d45\u62f7\u8d1d\u4f1a\u76f4\u63a5\u590d\u5236\u5b83\u4eec\u7684\u503c\u3002\u4fee\u6539\u65b0\u5bf9\u8c61\u7684\u57fa\u672c\u7c7b\u578b\u5b57\u6bb5\uff0c\u4e0d\u4f1a\u5f71\u54cd\u539f\u59cb\u5bf9\u8c61\u3002</p> </li> <li> <p>\u5bf9\u4e8e\u5f15\u7528\u6570\u636e\u7c7b\u578b\uff08\u5982 String, Array, \u6216\u8005\u5176\u4ed6\u81ea\u5b9a\u4e49\u7c7b\u7684\u5bf9\u8c61\uff09\uff0c\u6d45\u62f7\u8d1d\u53ea\u4f1a\u590d\u5236\u8fd9\u4e2a\u5f15\u7528\u7684\u5730\u5740\u503c\uff0c\u800c\u4e0d\u4f1a\u590d\u5236\u5f15\u7528\u6240\u6307\u5411\u7684\u90a3\u4e2a\u5b9e\u9645\u7684\u5bf9\u8c61\u3002</p> </li> </ul> <p>\u8fd9\u5c31\u5bfc\u81f4\u4e00\u4e2a\u5173\u952e\u7ed3\u679c\uff1a\u539f\u59cb\u5bf9\u8c61\u548c\u6d45\u62f7\u8d1d\u51fa\u7684\u65b0\u5bf9\u8c61\uff0c\u5176\u5185\u90e8\u7684\u5f15\u7528\u7c7b\u578b\u6210\u5458\u53d8\u91cf\uff0c\u6307\u5411\u7684\u662f\u5806\u5185\u5b58\u4e2d\u540c\u4e00\u4e2a\u5bf9\u8c61\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/java/%E5%9F%BA%E7%A1%80/%E6%B7%B1%E6%8B%B7%E8%B4%9D%E5%92%8C%E6%B5%85%E6%8B%B7%E8%B4%9D%E5%8C%BA%E5%88%AB/#2-deep-copy","title":"2. \u6df1\u62f7\u8d1d (Deep Copy)","text":"<p>\u6df1\u62f7\u8d1d\u4e3a\u4e86\u89e3\u51b3\u6d45\u62f7\u8d1d\u7684\u95ee\u9898\u800c\u4ea7\u751f\u3002\u5b83\u540c\u6837\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u5bf9\u8c61\uff0c\u4f46\u5728\u5904\u7406\u5f15\u7528\u7c7b\u578b\u6210\u5458\u53d8\u91cf\u65f6\uff0c\u5b83\u4e0d\u662f\u7b80\u5355\u5730\u590d\u5236\u5f15\u7528\u5730\u5740\uff0c\u800c\u662f\u4f1a\u9012\u5f52\u5730\u521b\u5efa\u6240\u6709\u5f15\u7528\u5bf9\u8c61\u7684\u65b0\u526f\u672c\u3002</p> <ul> <li> <p>\u5bf9\u4e8e\u57fa\u672c\u6570\u636e\u7c7b\u578b\uff0c\u6df1\u62f7\u8d1d\u548c\u6d45\u62f7\u8d1d\u7684\u884c\u4e3a\u662f\u4e00\u6837\u7684\uff0c\u90fd\u662f\u503c\u590d\u5236\u3002</p> </li> <li> <p>\u5bf9\u4e8e\u5f15\u7528\u6570\u636e\u7c7b\u578b\uff0c\u6df1\u62f7\u8d1d\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u3001\u4e0e\u539f\u59cb\u5bf9\u8c61\u5185\u5bb9\u76f8\u540c\u7684\u5bf9\u8c61\uff0c\u7136\u540e\u5c06\u65b0\u5bf9\u8c61\u7684\u5f15\u7528\u5730\u5740\u8d4b\u7ed9\u62f7\u8d1d\u51fa\u5bf9\u8c61\u7684\u6210\u5458\u53d8\u91cf\u3002</p> </li> </ul> <p>\u8fd9\u6837\u505a\u7684\u7ed3\u679c\u662f\uff1a\u539f\u59cb\u5bf9\u8c61\u548c\u6df1\u62f7\u8d1d\u51fa\u7684\u65b0\u5bf9\u8c61\uff0c\u5b83\u4eec\u5185\u90e8\u7684\u6240\u6709\u5f15\u7528\u7c7b\u578b\u6210\u5458\uff0c\u90fd\u6307\u5411\u4e86\u5404\u81ea\u72ec\u7acb\u7684\u3001\u4e92\u4e0d\u76f8\u5173\u7684\u5bf9\u8c61\u3002</p> \u7279\u6027 \u6d45\u62f7\u8d1d (Shallow Copy) \u6df1\u62f7\u8d1d (Deep Copy) \u57fa\u672c\u7c7b\u578b \u590d\u5236\u503c \u590d\u5236\u503c \u5f15\u7528\u7c7b\u578b \u590d\u5236\u5f15\u7528\u5730\u5740\uff08\u6307\u9488\uff09 \u9012\u5f52\u521b\u5efa\u5e76\u590d\u5236\u5bf9\u8c61\u5185\u5bb9 \u5bf9\u8c61\u5173\u7cfb \u539f\u59cb\u5bf9\u8c61\u548c\u62f7\u8d1d\u5bf9\u8c61\u5171\u4eab\u5f15\u7528\u7c7b\u578b\u7684\u6210\u5458\u5bf9\u8c61 \u539f\u59cb\u5bf9\u8c61\u548c\u62f7\u8d1d\u5bf9\u8c61\u7684\u6240\u6709\u6210\u5458\u90fd\u662f\u72ec\u7acb\u7684 \u9694\u79bb\u6027 \u5dee\uff0c\u4fee\u6539\u62f7\u8d1d\u5bf9\u8c61\u7684\u5f15\u7528\u6210\u5458\u4f1a\u5f71\u54cd\u539f\u59cb\u5bf9\u8c61 \u597d\uff0c\u5bf9\u8c61\u4e4b\u95f4\u5b8c\u5168\u72ec\u7acb\uff0c\u4e92\u4e0d\u5f71\u54cd"},{"location":"%E9%9D%A2%E7%BB%8F/java/%E5%9F%BA%E7%A1%80/%E6%B7%B1%E6%8B%B7%E8%B4%9D%E5%92%8C%E6%B5%85%E6%8B%B7%E8%B4%9D%E5%8C%BA%E5%88%AB/#_1","title":"\u5b9e\u73b0\u65b9\u5f0f","text":"<ol> <li> <p>\u5b9e\u73b0\u6d45\u62f7\u8d1d\uff1a</p> <ul> <li>\u6700\u5e38\u89c1\u7684\u65b9\u5f0f\u662f\u5b9e\u73b0 Cloneable \u63a5\u53e3\uff0c\u5e76\u91cd\u5199 Object \u7c7b\u7684 clone() \u65b9\u6cd5\u3002\u9ed8\u8ba4\u7684 Object.clone() \u5b9e\u73b0\u5c31\u662f\u4e00\u79cd\u6d45\u62f7\u8d1d\u3002</li> </ul> </li> <li> <p>\u5b9e\u73b0\u6df1\u62f7\u8d1d\uff1a</p> <ul> <li> <p>\u91cd\u5199clone()\u65b9\u6cd5\uff1a\u5728\u91cd\u5199 clone() \u65b9\u6cd5\u65f6\uff0c\u9664\u4e86\u8c03\u7528 super.clone() \u5f97\u5230\u4e00\u4e2a\u6d45\u62f7\u8d1d\u7684\u5bf9\u8c61\u5916\uff0c\u8fd8\u9700\u8981\u624b\u52a8\u5730\u4e3a\u6240\u6709\u5f15\u7528\u7c7b\u578b\u7684\u6210\u5458\u53d8\u91cf\u4e5f\u8c03\u7528\u5b83\u4eec\u7684 clone() \u65b9\u6cd5\uff0c\u8fdb\u884c\u9012\u5f52\u62f7\u8d1d\u3002\u8fd9\u8981\u6c42\u6240\u6709\u5f15\u7528\u7c7b\u578b\u4e5f\u90fd\u8981\u6b63\u786e\u5730\u5b9e\u73b0\u6df1\u62f7\u8d1d\u3002</p> </li> <li> <p>\u901a\u8fc7\u5e8f\u5217\u5316\uff1a\u8fd9\u662f\u4e00\u4e2a\u5de7\u5999\u4e14\u5e38\u7528\u7684\u65b9\u6cd5\u3002\u5c06\u539f\u59cb\u5bf9\u8c61\u901a\u8fc7\u5bf9\u8c61\u8f93\u51fa\u6d41\uff08ObjectOutputStream\uff09\u5199\u5165\u5230\u4e00\u4e2a\u5b57\u8282\u6570\u7ec4\u8f93\u51fa\u6d41\u4e2d\uff0c\u7136\u540e\u518d\u4ece\u8fd9\u4e2a\u5b57\u8282\u6570\u7ec4\u8f93\u51fa\u6d41\u4e2d\u901a\u8fc7\u5bf9\u8c61\u8f93\u5165\u6d41\uff08ObjectInputStream\uff09\u8bfb\u51fa\u4e00\u4e2a\u65b0\u7684\u5bf9\u8c61\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u4f1a\u521b\u5efa\u4e00\u4e2a\u5b8c\u6574\u7684\u5bf9\u8c61\u56fe\u7684\u526f\u672c\uff0c\u4ece\u800c\u5b9e\u73b0\u5f7b\u5e95\u7684\u6df1\u62f7\u8d1d\u3002\u6240\u6709\u6d89\u53ca\u7684\u5bf9\u8c61\u90fd\u9700\u8981\u5b9e\u73b0 Serializable \u63a5\u53e3\u3002\u8fd9\u79cd\u65b9\u6cd5\u4ee3\u7801\u7b80\u5355\uff0c\u4f46\u6027\u80fd\u5f00\u9500\u76f8\u5bf9\u8f83\u5927\u3002</p> </li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E4%B8%AD%E7%9A%84%E5%A4%A7Key%E4%B8%8E%E7%83%ADKey%E9%97%AE%E9%A2%98/","title":"Redis\u4e2d\u7684\u5927Key\u4e0e\u70edKey\u95ee\u9898","text":"<p>\u5728Redis\u8fd9\u4e2a\u9ad8\u6027\u80fd\u7684\u952e\u503c\u5b58\u50a8\u7cfb\u7edf\u4e2d\uff0c\u5927Key\uff08Big Key\uff09\u548c\u70edKey\uff08Hot Key\uff09\u662f\u4e24\u79cd\u5e38\u89c1\u7684\u6027\u80fd\u95ee\u9898\uff0c\u5b83\u4eec\u53ef\u80fd\u5bfc\u81f4\u670d\u52a1\u54cd\u5e94\u53d8\u6162\u3001\u5185\u5b58\u6ea2\u51fa\u751a\u81f3\u6574\u4e2a\u96c6\u7fa4\u4e0d\u53ef\u7528\u3002\u6df1\u5165\u7406\u89e3\u5176\u6210\u56e0\u5e76\u638c\u63e1\u6709\u6548\u7684\u5206\u6790\u4e0e\u89e3\u51b3\u65b9\u6cd5\uff0c\u5bf9\u4e8e\u4fdd\u969cRedis\u670d\u52a1\u7684\u7a33\u5b9a\u6027\u548c\u9ad8\u6548\u6027\u81f3\u5173\u91cd\u8981\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E4%B8%AD%E7%9A%84%E5%A4%A7Key%E4%B8%8E%E7%83%ADKey%E9%97%AE%E9%A2%98/#key-big-key-problem","title":"\u5927Key\u95ee\u9898 (Big Key Problem)","text":""},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E4%B8%AD%E7%9A%84%E5%A4%A7Key%E4%B8%8E%E7%83%ADKey%E9%97%AE%E9%A2%98/#1-key","title":"1. \u4ec0\u4e48\u662f\u5927Key\uff1f","text":"<p>\u5927Key\u95ee\u9898\u5e76\u975e\u6307Key\u672c\u8eab\u8fc7\u5927\uff0c\u800c\u662f\u6307\u4e0eKey\u5173\u8054\u7684Value\u6240\u5360\u7528\u7684\u5185\u5b58\u7a7a\u95f4\u8fc7\u5927\u3002 \u5bf9\u4e8e\u591a\u5927\u7684Key\u624d\u7b97\u201c\u5927\u201d\uff0c\u5e76\u6ca1\u6709\u4e00\u4e2a\u7edf\u4e00\u7684\u786c\u6027\u6807\u51c6\uff0c\u901a\u5e38\u6839\u636e\u4e1a\u52a1\u573a\u666f\u548c\u6027\u80fd\u8981\u6c42\u6765\u8bc4\u4f30\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u53ef\u4ee5\u53c2\u8003\u4ee5\u4e0b\u7ecf\u9a8c\u503c\uff1a</p> <ul> <li>String\u7c7b\u578b\uff1aValue\u7684\u5927\u5c0f\u8d85\u8fc71MB\u3002</li> <li>\u96c6\u5408\u7c7b\u578b\uff08List, Hash, Set, ZSet\uff09\uff1a\u6210\u5458\u6570\u91cf\u8d85\u8fc710,000\u4e2a\u3002</li> </ul> <p>\u5728\u4e00\u4e9b\u9ad8\u5e76\u53d1\u3001\u4f4e\u5ef6\u8fdf\u7684\u573a\u666f\u4e2d\uff0c\u5373\u4f7f\u53ea\u670910KB\u4e5f\u53ef\u80fd\u88ab\u89c6\u4e3a\u5927Key\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E4%B8%AD%E7%9A%84%E5%A4%A7Key%E4%B8%8E%E7%83%ADKey%E9%97%AE%E9%A2%98/#2-key","title":"2. \u5927Key\u5e26\u6765\u7684\u5371\u5bb3","text":"<p>\u5927Key\u4f1a\u5bf9Redis\u7684\u6027\u80fd\u548c\u7a33\u5b9a\u6027\u4ea7\u751f\u591a\u65b9\u9762\u7684\u8d1f\u9762\u5f71\u54cd\uff1a</p> <ul> <li>\u5185\u5b58\u5360\u7528\u8fc7\u9ad8\uff1a\u5927Key\u4f1a\u6d88\u8017\u5927\u91cf\u5185\u5b58\uff0c\u53ef\u80fd\u5bfc\u81f4\u5185\u5b58\u4e0d\u8db3\uff0c\u89e6\u53d1\u5185\u5b58\u6dd8\u6c70\u7b56\u7565\uff0c\u751a\u81f3\u5728\u6781\u7aef\u60c5\u51b5\u4e0b\u5bfc\u81f4Redis\u5b9e\u4f8b\u5d29\u6e83\u3002</li> <li>\u6027\u80fd\u4e0b\u964d\uff1a\u5bf9\u5927Key\u7684\u8bfb\u5199\u64cd\u4f5c\u4f1a\u6d88\u8017\u66f4\u591a\u7684CPU\u548c\u5185\u5b58\u8d44\u6e90\uff0c\u589e\u52a0\u5185\u5b58\u788e\u7247\uff0c\u4ece\u800c\u964d\u4f4eRedis\u7684\u6574\u4f53\u6027\u80fd\u3002</li> <li>\u963b\u585e\u5176\u4ed6\u64cd\u4f5c\uff1aRedis\u7684\u6838\u5fc3\u64cd\u4f5c\u662f\u5355\u7ebf\u7a0b\u7684\uff0c\u5bf9\u5927Key\u7684\u67d0\u4e9b\u64cd\u4f5c\uff08\u5982\u5220\u9664\uff09\u53ef\u80fd\u4f1a\u957f\u65f6\u95f4\u963b\u585e\u4e3b\u7ebf\u7a0b\uff0c\u5bfc\u81f4\u5176\u4ed6\u5ba2\u6237\u7aef\u8bf7\u6c42\u65e0\u6cd5\u5f97\u5230\u53ca\u65f6\u54cd\u5e94\u3002</li> <li>\u7f51\u7edc\u62e5\u585e\uff1a\u8bfb\u53d6\u4e00\u4e2a\u5927Key\u4f1a\u4ea7\u751f\u5927\u91cf\u7684\u7f51\u7edc\u6d41\u91cf\uff0c\u53ef\u80fd\u5360\u6ee1\u670d\u52a1\u5668\u6216\u5c40\u57df\u7f51\u7684\u5e26\u5bbd\uff0c\u5f71\u54cd\u5176\u4ed6\u670d\u52a1\u7684\u6b63\u5e38\u8fd0\u884c\u3002</li> <li>\u96c6\u7fa4\u8d1f\u8f7d\u4e0d\u5747\uff1a\u5728Redis\u96c6\u7fa4\u6a21\u5f0f\u4e0b\uff0c\u6570\u636e\u5206\u7247\u7684\u57fa\u672c\u5355\u4f4d\u662fKey\u3002\u4e00\u4e2a\u5927Key\u4f1a\u5bfc\u81f4\u6570\u636e\u548c\u8bbf\u95ee\u538b\u529b\u96c6\u4e2d\u5728\u67d0\u4e2a\u8282\u70b9\u4e0a\uff0c\u9020\u6210\u8d1f\u8f7d\u503e\u659c\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E4%B8%AD%E7%9A%84%E5%A4%A7Key%E4%B8%8E%E7%83%ADKey%E9%97%AE%E9%A2%98/#3-key","title":"3. \u5982\u4f55\u5206\u6790\u548c\u6392\u67e5\u5927Key\uff1f","text":"<p>\u53d1\u73b0\u6f5c\u5728\u7684\u5927Key\u662f\u89e3\u51b3\u95ee\u9898\u7684\u7b2c\u4e00\u6b65\uff0c\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u51e0\u79cd\u65b9\u5f0f\u8fdb\u884c\u6392\u67e5\uff1a</p> <ul> <li><code>redis-cli --bigkeys</code>\uff1aRedis\u81ea\u5e26\u7684<code>bigkeys</code>\u547d\u4ee4\u53ef\u4ee5\u626b\u63cf\u6574\u4e2a\u6570\u636e\u5e93\uff0c\u5e76\u7edf\u8ba1\u6bcf\u79cd\u6570\u636e\u7c7b\u578b\u4e2d\u6700\u5927\u7684Key\u3002\u8fd9\u4e2a\u547d\u4ee4\u5bf9\u4e8e\u5206\u6790String\u7c7b\u578b\u7684\u5927Key\u5f88\u6709\u7528\uff0c\u4f46\u5bf9\u4e8e\u96c6\u5408\u7c7b\u578b\uff0c\u5b83\u53ea\u7edf\u8ba1\u6210\u5458\u6570\u91cf\uff0c\u800c\u4e0d\u662f\u5b9e\u9645\u5185\u5b58\u5360\u7528\u3002</li> <li><code>MEMORY USAGE</code>\u547d\u4ee4\uff1a\u5bf9\u4e8eRedis 4.0\u53ca\u4ee5\u4e0a\u7248\u672c\uff0c\u53ef\u4ee5\u4f7f\u7528<code>MEMORY USAGE &lt;key&gt;</code>\u547d\u4ee4\u6765\u83b7\u53d6\u6307\u5b9aKey\u6240\u5360\u7528\u7684\u5185\u5b58\u5b57\u8282\u6570\u3002 \u901a\u8fc7\u904d\u5386\u6240\u6709Key\u5e76\u6267\u884c\u6b64\u547d\u4ee4\uff0c\u53ef\u4ee5\u627e\u51fa\u5185\u5b58\u5360\u7528\u8f83\u5927\u7684Key\u3002</li> <li><code>SCAN</code>\u547d\u4ee4\u7ed3\u5408<code>STRLEN</code>\u6216\u96c6\u5408\u7c7b\u578b\u7684<code>*LEN</code>\u547d\u4ee4\uff1a\u901a\u8fc7<code>SCAN</code>\u547d\u4ee4\u8fed\u4ee3\u6570\u636e\u5e93\u4e2d\u7684\u6240\u6709Key\uff0c\u7136\u540e\u6839\u636e\u4e0d\u540c\u7c7b\u578b\u4f7f\u7528\u5982<code>STRLEN</code>\u3001<code>LLEN</code>\u3001<code>HLEN</code>\u3001<code>SCARD</code>\u3001<code>ZCARD</code>\u7b49\u547d\u4ee4\u6765\u5224\u65ad\u5176\u5927\u5c0f\u6216\u6210\u5458\u6570\u91cf\u3002</li> <li>\u7b2c\u4e09\u65b9\u5de5\u5177\uff1a\u53ef\u4ee5\u5229\u7528\u5982<code>redis-rdb-tools</code>\u7b49\u5f00\u6e90\u5de5\u5177\u6765\u5206\u6790RDB\u5feb\u7167\u6587\u4ef6\uff0c\u4ece\u800c\u627e\u51fa\u5185\u5b58\u5360\u7528\u5927\u7684Key\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E4%B8%AD%E7%9A%84%E5%A4%A7Key%E4%B8%8E%E7%83%ADKey%E9%97%AE%E9%A2%98/#4-key","title":"4. \u5927Key\u95ee\u9898\u7684\u89e3\u51b3\u65b9\u6848","text":"<p>\u9488\u5bf9\u5df2\u7ecf\u53d1\u73b0\u7684\u5927Key\uff0c\u53ef\u4ee5\u91c7\u53d6\u4ee5\u4e0b\u7b56\u7565\u8fdb\u884c\u4f18\u5316\u548c\u89e3\u51b3\uff1a</p> <ul> <li>\u62c6\u5206\u5927Key\uff1a\u8fd9\u662f\u6700\u76f4\u63a5\u6709\u6548\u7684\u65b9\u6cd5\u3002\u5c06\u4e00\u4e2a\u5927\u7684\u96c6\u5408\u7c7b\u578bKey\u62c6\u5206\u6210\u591a\u4e2a\u5c0f\u7684Key\u3002\u4f8b\u5982\uff0c\u4e00\u4e2a\u5305\u542b100\u4e07\u7528\u6237\u7684\u54c8\u5e0c\u8868\u53ef\u4ee5\u6309\u7528\u6237ID\u7684\u8303\u56f4\u6216\u54c8\u5e0c\u503c\u62c6\u5206\u6210100\u4e2a\u5c0f\u7684\u54c8\u5e0c\u8868\uff0c\u6bcf\u4e2a\u5305\u542b1\u4e07\u7528\u6237\u3002\u8bfb\u53d6\u65f6\u53ef\u4ee5\u4f7f\u7528<code>MGET</code>\u6216<code>MHMGET</code>\u7b49\u6279\u91cf\u64cd\u4f5c\u6765\u83b7\u53d6\u6570\u636e\u3002</li> <li>\u6570\u636e\u538b\u7f29\uff1a\u5bf9\u4e8eString\u7c7b\u578b\u7684Value\uff0c\u5728\u5b58\u5165Redis\u524d\u53ef\u4ee5\u4f7f\u7528Gzip\u3001Snappy\u7b49\u538b\u7f29\u7b97\u6cd5\u8fdb\u884c\u538b\u7f29\uff0c\u8bfb\u53d6\u65f6\u518d\u89e3\u538b\u3002\u8fd9\u53ef\u4ee5\u663e\u8457\u51cf\u5c0f\u5185\u5b58\u5360\u7528\uff0c\u4f46\u4f1a\u589e\u52a0CPU\u7684\u8ba1\u7b97\u5f00\u9500\u3002</li> <li>\u9009\u62e9\u5408\u9002\u7684\u6570\u636e\u7ed3\u6784\uff1a\u6839\u636e\u4e1a\u52a1\u573a\u666f\u9009\u62e9\u66f4\u4f18\u7684\u6570\u636e\u7ed3\u6784\u3002\u4f8b\u5982\uff0c\u5982\u679c\u53ea\u9700\u8981\u5224\u65ad\u4e00\u4e2a\u5143\u7d20\u662f\u5426\u5b58\u5728\u4e8e\u4e00\u4e2a\u5927\u96c6\u5408\u4e2d\uff0c\u53ef\u4ee5\u8003\u8651\u4f7f\u7528\u5185\u5b58\u6548\u7387\u66f4\u9ad8\u7684\u5e03\u8c37\u9e1f\u8fc7\u6ee4\u5668\uff08Cuckoo Filter\uff09\u6216\u5e03\u9686\u8fc7\u6ee4\u5668\uff08Bloom Filter\uff09\u3002</li> <li>\u8bbe\u7f6e\u5408\u7406\u7684\u8fc7\u671f\u65f6\u95f4\uff1a\u4e3aKey\u8bbe\u7f6e\u6070\u5f53\u7684TTL\uff08Time-To-Live\uff09\uff0c\u786e\u4fdd\u4e0d\u518d\u4f7f\u7528\u7684\u6570\u636e\u80fd\u591f\u88ab\u81ea\u52a8\u6e05\u7406\uff0c\u907f\u514d\u6570\u636e\u65e0\u9650\u5236\u7d2f\u79ef\u6210\u5927Key\u3002</li> <li>\u5f02\u6b65\u5220\u9664\uff1a\u5bf9\u4e8e\u5df2\u7ecf\u5b58\u5728\u7684\u5927Key\uff0c\u4e0d\u8981\u76f4\u63a5\u4f7f\u7528<code>DEL</code>\u547d\u4ee4\u5220\u9664\uff0c\u56e0\u4e3a\u5b83\u4f1a\u963b\u585e\u4e3b\u7ebf\u7a0b\u3002\u5e94\u4f18\u5148\u4f7f\u7528Redis 4.0\u5f15\u5165\u7684<code>UNLINK</code>\u547d\u4ee4\uff0c\u8be5\u547d\u4ee4\u4f1a\u5728\u540e\u53f0\u5f02\u6b65\u5220\u9664Key\uff0c\u907f\u514d\u963b\u585e\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E4%B8%AD%E7%9A%84%E5%A4%A7Key%E4%B8%8E%E7%83%ADKey%E9%97%AE%E9%A2%98/#key-hot-key-problem","title":"\u70edKey\u95ee\u9898 (Hot Key Problem)","text":""},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E4%B8%AD%E7%9A%84%E5%A4%A7Key%E4%B8%8E%E7%83%ADKey%E9%97%AE%E9%A2%98/#1-key_1","title":"1. \u4ec0\u4e48\u662f\u70edKey\uff1f","text":"<p>\u70edKey\uff0c\u4e5f\u79f0\u4e3a\u70ed\u70b9Key\uff0c\u6307\u7684\u662f\u5728\u77ed\u65f6\u95f4\u5185\u88ab\u6781\u9ad8\u9891\u7387\u8bbf\u95ee\u7684Key\u3002 \u5f53\u5927\u91cf\u8bf7\u6c42\u96c6\u4e2d\u8bbf\u95ee\u67d0\u4e2a\u7279\u5b9a\u7684Key\u65f6\uff0c\u5c31\u4f1a\u4ea7\u751f\u70edKey\u95ee\u9898\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E4%B8%AD%E7%9A%84%E5%A4%A7Key%E4%B8%8E%E7%83%ADKey%E9%97%AE%E9%A2%98/#2-key_1","title":"2. \u70edKey\u5e26\u6765\u7684\u5371\u5bb3","text":"<p>\u70edKey\u95ee\u9898\u540c\u6837\u4f1a\u5bf9\u7cfb\u7edf\u9020\u6210\u4e25\u91cd\u5f71\u54cd\uff1a</p> <ul> <li>\u6d41\u91cf\u96c6\u4e2d\u548c\u5355\u70b9\u74f6\u9888\uff1a\u7531\u4e8e\u8bf7\u6c42\u90fd\u96c6\u4e2d\u5728\u5c11\u6570\u51e0\u4e2aKey\u4e0a\uff0c\u8fd9\u4e9bKey\u6240\u5728\u7684Redis\u8282\u70b9\u4f1a\u627f\u53d7\u5de8\u5927\u7684\u8bbf\u95ee\u538b\u529b\uff0c\u5176CPU\u3001\u5185\u5b58\u548c\u7f51\u7edc\u5e26\u5bbd\u7b49\u8d44\u6e90\u53ef\u80fd\u88ab\u8017\u5c3d\uff0c\u8fbe\u5230\u7269\u7406\u7f51\u5361\u4e0a\u9650\uff0c\u800c\u96c6\u7fa4\u4e2d\u7684\u5176\u4ed6\u8282\u70b9\u5374\u76f8\u5bf9\u7a7a\u95f2\u3002</li> <li>\u5f71\u54cd\u5176\u4ed6\u8bf7\u6c42\uff1a\u7531\u4e8eRedis\u662f\u5355\u7ebf\u7a0b\u5904\u7406\u8bf7\u6c42\u7684\uff0c\u5f53\u4e00\u4e2a\u70edKey\u7684\u8bf7\u6c42\u5904\u7406\u4e0d\u8fc7\u6765\u65f6\uff0c\u4f1a\u5f71\u54cd\u5230\u540c\u4e00\u4e2a\u5b9e\u4f8b\u4e0a\u5176\u4ed6Key\u7684\u6b63\u5e38\u8bbf\u95ee\u3002</li> <li>\u7f13\u5b58\u51fb\u7a7f\u548c\u96ea\u5d29\u98ce\u9669\uff1a\u5982\u679c\u70edKey\u5931\u6548\u6216\u88ab\u5220\u9664\uff0c\u5927\u91cf\u7684\u8bf7\u6c42\u4f1a\u77ac\u95f4\u7a7f\u900f\u7f13\u5b58\uff0c\u76f4\u63a5\u8bbf\u95ee\u540e\u7aef\u7684\u6570\u636e\u5e93\uff0c\u53ef\u80fd\u5bfc\u81f4\u6570\u636e\u5e93\u538b\u529b\u5267\u589e\u751a\u81f3\u5b95\u673a\uff0c\u5f15\u53d1\u7f13\u5b58\u96ea\u5d29\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E4%B8%AD%E7%9A%84%E5%A4%A7Key%E4%B8%8E%E7%83%ADKey%E9%97%AE%E9%A2%98/#3-key_1","title":"3. \u5982\u4f55\u5206\u6790\u548c\u6392\u67e5\u70edKey\uff1f","text":"<p>\u53ca\u65f6\u53d1\u73b0\u70edKey\u5bf9\u4e8e\u9884\u9632\u7cfb\u7edf\u6545\u969c\u81f3\u5173\u91cd\u8981\uff1a</p> <ul> <li>\u51ed\u501f\u4e1a\u52a1\u7ecf\u9a8c\u9884\u4f30\uff1a\u6839\u636e\u4e1a\u52a1\u7279\u6027\uff0c\u53ef\u4ee5\u63d0\u524d\u9884\u4f30\u54ea\u4e9bKey\u53ef\u80fd\u4f1a\u6210\u4e3a\u70edKey\uff0c\u4f8b\u5982\u79d2\u6740\u6d3b\u52a8\u4e2d\u7684\u5546\u54c1ID\u3001\u70ed\u95e8\u65b0\u95fb\u6216\u89c6\u9891\u7684ID\u7b49\u3002</li> <li>\u5ba2\u6237\u7aef\u6536\u96c6\uff1a\u5728\u5ba2\u6237\u7aef\u4ee3\u7801\u4e2d\u52a0\u5165\u7edf\u8ba1\u903b\u8f91\uff0c\u6536\u96c6\u5e76\u4e0a\u62a5Key\u7684\u8bbf\u95ee\u9891\u7387\u3002</li> <li>\u4ee3\u7406\u5c42\u5206\u6790\uff1a\u5982\u679c\u4f7f\u7528\u4e86\u5982Twemproxy\u6216\u81ea\u7814\u7684Redis\u4ee3\u7406\uff0c\u53ef\u4ee5\u5728\u4ee3\u7406\u5c42\u8fdb\u884c\u8bf7\u6c42\u7edf\u8ba1\u3002</li> <li>Redis\u81ea\u5e26\u547d\u4ee4\uff1a<ul> <li><code>MONITOR</code>\u547d\u4ee4\uff1a\u53ef\u4ee5\u5b9e\u65f6\u6355\u83b7Redis\u670d\u52a1\u5668\u63a5\u6536\u5230\u7684\u6240\u6709\u547d\u4ee4\u3002\u901a\u8fc7\u5206\u6790\u8f93\u51fa\uff0c\u53ef\u4ee5\u7edf\u8ba1\u51fa\u9ad8\u9891\u8bbf\u95ee\u7684Key\u3002\u4f46\u5728\u9ad8\u5e76\u53d1\u573a\u666f\u4e0b\uff0c<code>MONITOR</code>\u547d\u4ee4\u4f1a\u5e26\u6765\u6027\u80fd\u635f\u8017\u548c\u5185\u5b58\u6fc0\u589e\u7684\u98ce\u9669\u3002</li> <li><code>HOTKEYS</code>\u53c2\u6570 (Redis 4.0.3+)\uff1a\u6267\u884c<code>redis-cli --hotkeys</code>\u53ef\u4ee5\u53d1\u73b0\u70ed\u70b9Key\uff0c\u4f46\u5982\u679cKey\u6570\u91cf\u5e9e\u5927\uff0c\u6267\u884c\u8fc7\u7a0b\u53ef\u80fd\u4f1a\u6bd4\u8f83\u6162\u3002</li> </ul> </li> <li>\u6293\u5305\u5206\u6790\uff1a\u901a\u8fc7\u5728Redis\u670d\u52a1\u5668\u7aef\u6293\u53d6\u7f51\u7edc\u5305\u5e76\u6839\u636eRESP\u534f\u8bae\u8fdb\u884c\u5206\u6790\uff0c\u4e5f\u53ef\u4ee5\u7edf\u8ba1\u51fa\u70edKey\u3002\u8fd9\u79cd\u65b9\u6cd5\u867d\u7136\u7cbe\u786e\uff0c\u4f46\u5f00\u53d1\u548c\u7ef4\u62a4\u6210\u672c\u8f83\u9ad8\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E4%B8%AD%E7%9A%84%E5%A4%A7Key%E4%B8%8E%E7%83%ADKey%E9%97%AE%E9%A2%98/#4-key_1","title":"4. \u70edKey\u95ee\u9898\u7684\u89e3\u51b3\u65b9\u6848","text":"<p>\u89e3\u51b3\u70edKey\u95ee\u9898\u7684\u6838\u5fc3\u601d\u60f3\u662f\u5c06\u96c6\u4e2d\u7684\u8bbf\u95ee\u538b\u529b\u5206\u6563\u5f00\uff1a</p> <ul> <li>\u4f7f\u7528\u4e8c\u7ea7\u7f13\u5b58/\u672c\u5730\u7f13\u5b58\uff1a\u5728\u5e94\u7528\u670d\u52a1\u5668\u7aef\uff08\u5ba2\u6237\u7aef\uff09\u4f7f\u7528\u5185\u5b58\u7f13\u5b58\uff08\u5982Guava Cache, Caffeine, Ehcache\u6216\u7b80\u5355\u7684HashMap\uff09\u6765\u7f13\u5b58\u70edKey\u7684\u6570\u636e\u3002\u5927\u90e8\u5206\u8bf7\u6c42\u4f1a\u76f4\u63a5\u547d\u4e2d\u672c\u5730\u7f13\u5b58\uff0c\u4ece\u800c\u5927\u5927\u51cf\u8f7b\u5bf9Redis\u7684\u538b\u529b\u3002</li> <li>\u8bfb\u5199\u5206\u79bb\uff1a\u5982\u679cRedis\u90e8\u7f72\u4e86\u4e3b\u4ece\u6a21\u5f0f\uff0c\u53ef\u4ee5\u5c06\u8bfb\u8bf7\u6c42\u5206\u6563\u5230\u591a\u4e2a\u4ece\u8282\u70b9\u4e0a\uff0c\u5206\u62c5\u4e3b\u8282\u70b9\u7684\u8bfb\u53d6\u538b\u529b\u3002</li> <li>\u6570\u636e\u5206\u7247/Key\u7684\u590d\u5236\uff1a\u5c06\u4e00\u4e2a\u70edKey\u590d\u5236\u6210\u591a\u4e2a\u65b0\u7684Key\uff08\u4f8b\u5982\uff0c<code>hotkey:1</code>, <code>hotkey:2</code>, ..., <code>hotkey:N</code>\uff09\uff0c\u5e76\u5c06\u5b83\u4eec\u5206\u6563\u5b58\u50a8\u5728\u4e0d\u540c\u7684Redis\u5b9e\u4f8b\u4e0a\u3002\u5f53\u8bbf\u95ee\u8fd9\u4e2a\u70edKey\u65f6\uff0c\u5ba2\u6237\u7aef\u968f\u673a\u9009\u62e9\u4e00\u4e2a\u526f\u672c\u8fdb\u884c\u8bfb\u53d6\uff0c\u4ece\u800c\u5c06\u8bf7\u6c42\u538b\u529b\u5206\u6563\u5230\u591a\u4e2a\u8282\u70b9\u3002</li> <li>\u4f7f\u7528\u4ee3\u7406\u548c\u8d1f\u8f7d\u5747\u8861\uff1a\u901a\u8fc7\u5728\u5e94\u7528\u548cRedis\u4e4b\u95f4\u589e\u52a0\u4e00\u4e2a\u4ee3\u7406\u5c42\uff0c\u53ef\u4ee5\u5728\u4ee3\u7406\u5c42\u5b9e\u73b0\u66f4\u590d\u6742\u7684\u8d1f\u8f7d\u5747\u8861\u7b56\u7565\uff0c\u6216\u8005\u5bf9\u4e8e\u70edKey\u7684\u8bf7\u6c42\u8fdb\u884c\u7279\u6b8a\u5904\u7406\uff0c\u6bd4\u5982\u76f4\u63a5\u4ece\u4ee3\u7406\u7684\u672c\u5730\u7f13\u5b58\u8fd4\u56de\u3002</li> <li>\u9650\u6d41\u548c\u7194\u65ad\uff1a\u5728\u5e94\u7528\u5c42\u9488\u5bf9\u7279\u5b9a\u70edKey\u7684\u8bf7\u6c42\u8fdb\u884c\u9650\u6d41\uff0c\u5f53\u8bf7\u6c42\u8d85\u8fc7\u9608\u503c\u65f6\uff0c\u76f4\u63a5\u62d2\u7edd\u6216\u8fd4\u56de\u4e00\u4e2a\u515c\u5e95\u6570\u636e\uff0c\u907f\u514d\u6240\u6709\u8bf7\u6c42\u90fd\u6253\u5230Redis\u4e0a\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E4%B8%BA%E4%BB%80%E4%B9%88%E5%BF%AB/","title":"Redis\u4e3a\u4ec0\u4e48\u5feb","text":"<p>Redis \u4e4b\u6240\u4ee5\u62e5\u6709\u51fa\u8272\u7684\u6027\u80fd\uff0c\u5e7f\u53d7\u5f00\u53d1\u8005\u9752\u7750\uff0c\u5176\u901f\u5ea6\u5feb\u7684\u201c\u79d8\u8bc0\u201d\u5728\u4e8e\u5176\u72ec\u7279\u7684\u8bbe\u8ba1\u548c\u591a\u79cd\u6280\u672f\u7684\u7ed3\u5408\u3002\u4ee5\u4e0b\u5c06\u8be6\u7ec6\u9610\u8ff0\u5176\u9ad8\u6027\u80fd\u80cc\u540e\u7684\u51e0\u4e2a\u6838\u5fc3\u539f\u56e0\uff1a</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E4%B8%BA%E4%BB%80%E4%B9%88%E5%BF%AB/#1","title":"1. \u57fa\u4e8e\u5185\u5b58\u7684\u5b58\u50a8","text":"<p>Redis \u6700\u6839\u672c\u7684\u901f\u5ea6\u4f18\u52bf\u6765\u6e90\u4e8e\u5176\u5c06\u6240\u6709\u6570\u636e\u5b58\u50a8\u5728\u5185\u5b58\u4e2d\u3002 \u76f8\u6bd4\u4e8e\u4f20\u7edf\u7684\u78c1\u76d8\u6570\u636e\u5e93\uff0c\u5185\u5b58\u7684\u8bfb\u5199\u901f\u5ea6\u8981\u5feb\u4e0a\u51e0\u4e2a\u6570\u91cf\u7ea7\u3002</p> <ul> <li>\u6781\u4f4e\u7684\u5ef6\u8fdf\uff1a\u76f4\u63a5\u5728\u5185\u5b58\u4e2d\u8fdb\u884c\u6570\u636e\u64cd\u4f5c\uff0c\u907f\u514d\u4e86\u8017\u65f6\u7684\u78c1\u76d8 I/O\uff0c\u4f7f\u5f97 Redis \u80fd\u591f\u5b9e\u73b0\u5fae\u79d2\u7ea7\u7684\u54cd\u5e94\u5ef6\u8fdf\u3002</li> <li>\u7b80\u5355\u9ad8\u6548\u7684\u64cd\u4f5c\uff1a\u5185\u5b58\u4e2d\u7684\u6570\u636e\u7ed3\u6784\u53ef\u4ee5\u76f4\u63a5\u8fdb\u884c\u8ba1\u7b97\u548c\u4fee\u6539\uff0c\u64cd\u4f5c\u8def\u5f84\u77ed\uff0c\u6548\u7387\u9ad8\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E4%B8%BA%E4%BB%80%E4%B9%88%E5%BF%AB/#2","title":"2. \u5355\u7ebf\u7a0b\u6a21\u578b","text":"<p>\u5728\u6838\u5fc3\u7684\u7f51\u7edc\u8bf7\u6c42\u5904\u7406\u4e0a\uff0cRedis \u91c7\u7528\u4e86\u5355\u7ebf\u7a0b\u6a21\u578b\uff0c\u8fd9\u770b\u4f3c\u9650\u5236\uff0c\u5b9e\u5219\u662f\u5176\u9ad8\u6027\u80fd\u7684\u5173\u952e\u4e4b\u4e00\u3002</p> <ul> <li>\u907f\u514d\u4e0a\u4e0b\u6587\u5207\u6362\u5f00\u9500\uff1a\u591a\u7ebf\u7a0b\u5728\u6267\u884c\u65f6\u4f1a\u6d89\u53ca\u5230 CPU \u4e0a\u4e0b\u6587\u7684\u9891\u7e41\u5207\u6362\uff0c\u800c\u5355\u7ebf\u7a0b\u5219\u5b8c\u5168\u6ca1\u6709\u8fd9\u90e8\u5206\u5f00\u9500\uff0c\u80fd\u591f\u66f4\u4e13\u6ce8\u4e8e\u6570\u636e\u64cd\u4f5c\u3002</li> <li>\u65e0\u9501\u7ade\u4e89\uff1a\u5355\u7ebf\u7a0b\u6267\u884c\u907f\u514d\u4e86\u591a\u7ebf\u7a0b\u5e76\u53d1\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\u65f6\u53ef\u80fd\u51fa\u73b0\u7684\u9501\u7ade\u4e89\u95ee\u9898\u3002\u8fd9\u4f7f\u5f97 Redis \u7684\u5b9e\u73b0\u66f4\u4e3a\u7b80\u5355\uff0c\u5e76\u4e14\u6d88\u9664\u4e86\u56e0\u52a0\u9501\u3001\u91ca\u653e\u9501\u5e26\u6765\u7684\u6027\u80fd\u635f\u8017\u3002</li> <li>\u539f\u5b50\u6027\u64cd\u4f5c\uff1a\u6240\u6709\u547d\u4ee4\u5728\u5355\u4e2a\u7ebf\u7a0b\u4e2d\u6709\u5e8f\u6267\u884c\uff0c\u4fdd\u8bc1\u4e86\u64cd\u4f5c\u7684\u539f\u5b50\u6027\u3002</li> </ul> <p>\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u867d\u7136 Redis \u7684\u6838\u5fc3\u547d\u4ee4\u5904\u7406\u662f\u5355\u7ebf\u7a0b\u7684\uff0c\u4f46\u5728\u4e00\u4e9b\u8f83\u65b0\u7684\u7248\u672c\uff08\u5982 Redis 6.0 \u4ee5\u540e\uff09\u4e2d\uff0c\u5f15\u5165\u4e86\u591a\u7ebf\u7a0b\u6765\u5904\u7406\u7f51\u7edc I/O \u7b49\u90e8\u5206\uff0c\u4ee5\u8fdb\u4e00\u6b65\u63d0\u5347\u6027\u80fd\uff0c\u4f46\u547d\u4ee4\u7684\u6267\u884c\u4ecd\u7136\u4fdd\u6301\u5355\u7ebf\u7a0b\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E4%B8%BA%E4%BB%80%E4%B9%88%E5%BF%AB/#3-io","title":"3. I/O \u591a\u8def\u590d\u7528\u6280\u672f","text":"<p>\u4e3a\u4e86\u5728\u5355\u7ebf\u7a0b\u6a21\u578b\u4e0b\u9ad8\u6548\u5904\u7406\u5927\u91cf\u7684\u5e76\u53d1\u5ba2\u6237\u7aef\u8fde\u63a5\uff0cRedis \u91c7\u7528\u4e86 I/O \u591a\u8def\u590d\u7528\u6280\u672f\uff08\u5982 epoll\u3001kqueue \u7b49\uff09\u3002</p> <ul> <li>\u9ad8\u6548\u7684\u8fde\u63a5\u5904\u7406\uff1aI/O \u591a\u8def\u590d\u7528\u5141\u8bb8\u5355\u4e2a\u7ebf\u7a0b\u540c\u65f6\u76d1\u542c\u591a\u4e2a\u7f51\u7edc\u8fde\u63a5\uff08Socket\uff09\u7684\u4e8b\u4ef6\u3002</li> <li>\u975e\u963b\u585e I/O\uff1a\u5f53\u4e00\u4e2a\u7f51\u7edc\u8fde\u63a5\u6ca1\u6709\u6570\u636e\u51c6\u5907\u597d\u65f6\uff0c\u7ebf\u7a0b\u4e0d\u4f1a\u88ab\u963b\u585e\uff0c\u800c\u662f\u53ef\u4ee5\u7ee7\u7eed\u5904\u7406\u5176\u4ed6\u5df2\u5c31\u7eea\u7684\u8fde\u63a5\u8bf7\u6c42\uff0c\u4ece\u800c\u6781\u5927\u5730\u63d0\u9ad8\u4e86\u5e76\u53d1\u5904\u7406\u80fd\u529b\u548c\u7cfb\u7edf\u541e\u5410\u91cf\u3002</li> <li>\u4e8b\u4ef6\u9a71\u52a8\u6a21\u578b\uff1aRedis \u5c06\u6240\u6709\u7f51\u7edc\u8fde\u63a5\u7684\u8bfb\u5199\u3001\u5173\u95ed\u7b49\u64cd\u4f5c\u90fd\u8f6c\u6362\u4e3a\u4e8b\u4ef6\uff0c\u901a\u8fc7\u4e00\u4e2a\u4e8b\u4ef6\u5faa\u73af\u6765\u7edf\u4e00\u5904\u7406\uff0c\u907f\u514d\u4e86\u5728\u7f51\u7edc I/O \u4e0a\u7684\u65f6\u95f4\u6d6a\u8d39\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E4%B8%BA%E4%BB%80%E4%B9%88%E5%BF%AB/#4","title":"4. \u9ad8\u6548\u7684\u6570\u636e\u7ed3\u6784","text":"<p>Redis \u63d0\u4f9b\u4e86\u591a\u79cd\u7ecf\u8fc7\u7cbe\u5fc3\u8bbe\u8ba1\u548c\u4f18\u5316\u7684\u6570\u636e\u7ed3\u6784\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u4e1a\u52a1\u573a\u666f\u9009\u62e9\u6700\u5408\u9002\u7684\u7c7b\u578b\uff0c\u4ece\u800c\u95f4\u63a5\u63d0\u5347\u4e86\u64cd\u4f5c\u6548\u7387\u3002</p> <ul> <li>\u5b57\u7b26\u4e32 (String)\uff1a\u5185\u90e8\u5b9e\u73b0\u4e3a\u7b80\u5355\u52a8\u6001\u5b57\u7b26\u4e32\uff08SDS\uff09\uff0c\u76f8\u6bd4 C \u8bed\u8a00\u539f\u751f\u5b57\u7b26\u4e32\uff0c\u53ef\u4ee5\u9ad8\u6548\u5730\u8fdb\u884c\u8ffd\u52a0\u548c\u957f\u5ea6\u8ba1\u7b97\u7b49\u64cd\u4f5c\u3002</li> <li>\u54c8\u5e0c (Hash)\uff1a\u5185\u90e8\u901a\u8fc7\u54c8\u5e0c\u8868\u5b9e\u73b0\uff0c\u4f7f\u5176\u5bf9\u5b57\u6bb5\u7684\u8bfb\u5199\u64cd\u4f5c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(1)\u3002</li> <li>\u5217\u8868 (List)\uff1a\u5728\u65e9\u671f\u7248\u672c\u4e2d\u4f7f\u7528\u53cc\u5411\u94fe\u8868\u548c\u538b\u7f29\u5217\u8868\uff08ziplist\uff09\u5b9e\u73b0\uff0c\u540e\u7eed\u7248\u672c\u5f15\u5165\u4e86\u66f4\u9ad8\u6548\u7684 quicklist\u3002</li> <li>\u96c6\u5408 (Set)\uff1a\u57fa\u4e8e\u54c8\u5e0c\u8868\u5b9e\u73b0\uff0c\u4fdd\u8bc1\u4e86\u5143\u7d20\u7684\u552f\u4e00\u6027\uff0c\u5e76\u80fd\u5feb\u901f\u8fdb\u884c\u6dfb\u52a0\u3001\u5220\u9664\u548c\u67e5\u627e\u3002</li> <li>\u6709\u5e8f\u96c6\u5408 (Sorted Set)\uff1a\u7ed3\u5408\u4e86\u8df3\u8dc3\u8868\uff08skiplist\uff09\u548c\u54c8\u5e0c\u8868\uff0c\u65e2\u80fd\u4fdd\u8bc1\u5143\u7d20\u6709\u5e8f\uff0c\u53c8\u80fd\u9ad8\u6548\u5730\u8fdb\u884c\u6210\u5458\u67e5\u627e\u548c\u8303\u56f4\u67e5\u8be2\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E7%9A%84/","title":"Redis\u5982\u4f55\u5b9e\u73b0\u5206\u5e03\u5f0f\u9501\u7684","text":"<p>\u5728\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\uff0c\u5f53\u591a\u4e2a\u670d\u52a1\u5b9e\u4f8b\u9700\u8981\u4fee\u6539\u540c\u4e00\u4efd\u6570\u636e\u65f6\uff0c\u4f1a\u4ea7\u751f\u5e76\u53d1\u95ee\u9898\u3002\u4f20\u7edf\u7684\u672c\u5730\u9501\uff08\u5982 Java \u4e2d\u7684 <code>synchronized</code> \u6216 <code>Lock</code>\uff09\u53ea\u80fd\u5728\u5355\u4e00\u670d\u52a1\u5668\u8fdb\u7a0b\u5185\u751f\u6548\uff0c\u65e0\u6cd5\u8de8\u670d\u52a1\u5668\u5b9e\u4f8b\u8fdb\u884c\u534f\u8c03\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u9700\u8981\u5f15\u5165\u5206\u5e03\u5f0f\u9501\u6765\u786e\u4fdd\u5728\u4efb\u4f55\u65f6\u523b\uff0c\u53ea\u6709\u4e00\u4e2a\u5ba2\u6237\u7aef\u80fd\u591f\u64cd\u4f5c\u5171\u4eab\u8d44\u6e90\uff0c\u4ece\u800c\u4fdd\u8bc1\u6570\u636e\u7684\u4e00\u81f4\u6027\u3002</p> <p>Redis \u5b9e\u73b0\u5206\u5e03\u5f0f\u9501\u4e3b\u8981\u4f9d\u8d56\u5176 <code>SETNX</code> (SET if Not eXists) \u547d\u4ee4\u3002</p> <ul> <li>\u52a0\u9501\uff1a<code>SETNX key value</code>\u3002\u8fd9\u4e2a\u547d\u4ee4\u7684\u7279\u6027\u662f\uff0c\u53ea\u6709\u5f53 <code>key</code> \u4e0d\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u8bbe\u7f6e <code>key</code> \u7684\u503c\u4e3a <code>value</code> \u5e76\u8fd4\u56de\u6210\u529f\u3002\u5982\u679c <code>key</code> \u5df2\u5b58\u5728\uff0c\u5219\u547d\u4ee4\u5931\u8d25\u3002\u8fd9\u4e2a\u539f\u5b50\u6027\u7684\u201c\u68c0\u67e5\u5e76\u8bbe\u7f6e\u201d\u64cd\u4f5c\u662f\u5b9e\u73b0\u4e92\u65a5\u9501\u7684\u57fa\u7840\u3002</li> <li>\u89e3\u9501\uff1a<code>DEL key</code>\u3002\u5f53\u4e1a\u52a1\u903b\u8f91\u5904\u7406\u5b8c\u6bd5\u540e\uff0c\u901a\u8fc7\u5220\u9664\u5bf9\u5e94\u7684 <code>key</code> \u6765\u91ca\u653e\u9501\uff0c\u8ba9\u5176\u4ed6\u7b49\u5f85\u7684\u7ebf\u7a0b\u6709\u673a\u4f1a\u83b7\u53d6\u3002</li> <li>\u9501\u8d85\u65f6\uff1a<code>EXPIRE key timeout</code>\u3002\u4e3a\u4e86\u9632\u6b62\u6301\u6709\u9501\u7684\u5ba2\u6237\u7aef\u56e0\u5d29\u6e83\u6216\u7f51\u7edc\u95ee\u9898\u800c\u672a\u80fd\u91ca\u653e\u9501\uff0c\u5bfc\u81f4\u6b7b\u9501\uff0c\u9700\u8981\u4e3a\u9501\u8bbe\u7f6e\u4e00\u4e2a\u8d85\u65f6\u65f6\u95f4\u3002\u8fc7\u4e86\u8fd9\u4e2a\u65f6\u95f4\uff0c\u9501\u4f1a\u81ea\u52a8\u88ab Redis \u5220\u9664\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E7%9A%84/#_1","title":"\u5b9e\u73b0\u4e2d\u7684\u95ee\u9898\u4e0e\u6f14\u8fdb\u65b9\u6848","text":"<p>\u57fa\u7840\u7684 <code>SETNX</code> + <code>EXPIRE</code> + <code>DEL</code> \u7ec4\u5408\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\u4f1a\u9047\u5230\u591a\u4e2a\u95ee\u9898\uff0c\u6587\u7ae0\u8be6\u7ec6\u4ecb\u7ecd\u4e86\u8fd9\u4e9b\u95ee\u9898\u53ca\u5176\u89e3\u51b3\u65b9\u6848\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E7%9A%84/#1-setnx-expire","title":"1. SETNX \u548c EXPIRE \u7684\u975e\u539f\u5b50\u6027","text":"<p>\u95ee\u9898\u63cf\u8ff0\uff1a\u5982\u679c\u5728\u6267\u884c <code>SETNX</code> \u6210\u529f\u540e\uff0c\u5ba2\u6237\u7aef\u5728\u6267\u884c <code>EXPIRE</code> \u4e4b\u524d\u5d29\u6e83\uff0c\u90a3\u4e48\u8fd9\u4e2a\u9501\u5c06\u6ca1\u6709\u8bbe\u7f6e\u8d85\u65f6\u65f6\u95f4\uff0c\u53d8\u6210\u4e00\u4e2a\u6c38\u8fdc\u4e0d\u4f1a\u81ea\u52a8\u91ca\u653e\u7684\u201c\u6b7b\u9501\u201d\u3002</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a\u5c06\u52a0\u9501\u548c\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\u8fd9\u4e24\u4e2a\u64cd\u4f5c\u5408\u5e76\u6210\u4e00\u4e2a\u539f\u5b50\u64cd\u4f5c\u3002\u6587\u7ae0\u4e2d\u63d0\u5230\u4e86\u4e24\u79cd\u65b9\u5f0f\uff1a *   Lua \u811a\u672c\uff1a\u901a\u8fc7 <code>EVAL</code> \u547d\u4ee4\u6267\u884c\u4e00\u6bb5 Lua \u811a\u672c\uff0c\u5728\u811a\u672c\u5185\u4f9d\u6b21\u6267\u884c <code>setnx</code> \u548c <code>expire</code>\uff0c\u4fdd\u8bc1\u4e86\u4e24\u4e2a\u64cd\u4f5c\u7684\u539f\u5b50\u6027\u3002</p> <pre><code>if (redis.call('setnx', KEYS[1], ARGV[1]) &lt; 1)\nthen return 0;\nend;\nredis.call('expire', KEYS[1], tonumber(ARGV[2]));\nreturn 1;\n</code></pre> <ul> <li>SET \u547d\u4ee4\u7684\u6269\u5c55\u53c2\u6570\uff1a\u66f4\u9ad8\u7248\u672c\u7684 Redis \u4e3a <code>SET</code> \u547d\u4ee4\u63d0\u4f9b\u4e86\u6269\u5c55\u53c2\u6570\uff0c\u53ef\u4ee5\u76f4\u63a5\u5728\u8bbe\u7f6e key \u7684\u540c\u65f6\u6307\u5b9a\u8fc7\u671f\u65f6\u95f4\u5e76\u4e14\u4fdd\u8bc1\u4ec5\u5728 key \u4e0d\u5b58\u5728\u65f6\u8bbe\u7f6e\uff0c\u4ece\u800c\u539f\u5b50\u6027\u5730\u5b8c\u6210\u52a0\u9501\u64cd\u4f5c\u3002</li> </ul> <pre><code>SET key value NX EX 30\n</code></pre> <p>\u8fd9\u91cc\u7684 <code>NX</code> \u76f8\u5f53\u4e8e <code>SETNX</code>\uff0c<code>EX 30</code> \u8868\u793a\u8bbe\u7f6e 30 \u79d2\u7684\u8fc7\u671f\u65f6\u95f4\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E7%9A%84/#2","title":"2. \u9501\u88ab\u9519\u8bef\u89e3\u9664","text":"<p>\u95ee\u9898\u63cf\u8ff0\uff1a\u7ebf\u7a0b A \u83b7\u53d6\u4e86\u9501\uff0c\u8bbe\u7f6e\u4e86 30 \u79d2\u8d85\u65f6\u3002\u4f46\u7ebf\u7a0b A \u7684\u4e1a\u52a1\u6267\u884c\u4e86\u8d85\u8fc7 30 \u79d2\uff0c\u6b64\u65f6\u9501\u5df2\u81ea\u52a8\u8fc7\u671f\u91ca\u653e\u3002\u7ebf\u7a0b B \u8d81\u673a\u83b7\u53d6\u4e86\u8fd9\u628a\u9501\u3002\u968f\u540e\uff0c\u7ebf\u7a0b A \u6267\u884c\u5b8c\u6bd5\uff0c\u5b83\u6267\u884c <code>DEL</code> \u547d\u4ee4\uff0c\u9519\u8bef\u5730\u91ca\u653e\u4e86\u672c\u5e94\u7531\u7ebf\u7a0b B \u6301\u6709\u7684\u9501\u3002</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a\u5728\u52a0\u9501\u65f6\uff0c\u5c06 <code>value</code> \u8bbe\u7f6e\u4e3a\u4e00\u4e2a\u552f\u4e00\u7684\u6807\u8bc6\uff08\u5982 UUID\uff09\uff0c\u4ee3\u8868\u5f53\u524d\u52a0\u9501\u7684\u7ebf\u7a0b\u3002\u5728\u89e3\u9501\u65f6\uff0c\u5fc5\u987b\u5148\u9a8c\u8bc1 <code>key</code> \u5bf9\u5e94\u7684 <code>value</code> \u662f\u5426\u4e0e\u81ea\u5df1\u6301\u6709\u7684\u6807\u8bc6\u4e00\u81f4\uff0c\u53ea\u6709\u4e00\u81f4\u65f6\u624d\u80fd\u6267\u884c\u5220\u9664\u64cd\u4f5c\u3002\u8fd9\u4e2a\u201c\u68c0\u67e5\u5e76\u5220\u9664\u201d\u7684\u8fc7\u7a0b\u4e5f\u5fc5\u987b\u662f\u539f\u5b50\u7684\uff0c\u56e0\u6b64\u9700\u8981\u4f7f\u7528 Lua \u811a\u672c\u3002</p> <ul> <li>\u52a0\u9501\uff1a<code>SET key uuid NX EX 30</code></li> <li>\u89e3\u9501 (Lua \u811a\u672c)\uff1a</li> </ul> <pre><code>if (redis.call('get', KEYS[1]) == ARGV[1])\n    then return redis.call('del', KEYS[1])\nelse return 0\nend\n</code></pre>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E7%9A%84/#3","title":"3.\u56e0\u8d85\u65f6\u89e3\u9501\u5bfc\u81f4\u7684\u5e76\u53d1","text":"<p>\u95ee\u9898\u63cf\u8ff0\uff1a\u4e0e\u4e0a\u4e00\u4e2a\u95ee\u9898\u7c7b\u4f3c\uff0c\u7ebf\u7a0b A \u6301\u6709\u7684\u9501\u56e0\u6267\u884c\u65f6\u95f4\u8fc7\u957f\u800c\u81ea\u52a8\u8fc7\u671f\uff0c\u5bfc\u81f4\u7ebf\u7a0b B \u80fd\u591f\u83b7\u53d6\u5230\u9501\u3002\u6b64\u65f6\uff0c\u7ebf\u7a0b A \u7684\u4e1a\u52a1\u903b\u8f91\u8fd8\u672a\u6267\u884c\u5b8c\uff0c\u5c31\u9020\u6210\u4e86\u7ebf\u7a0b A \u548c\u7ebf\u7a0b B \u5e76\u53d1\u6267\u884c\uff0c\u7834\u574f\u4e86\u9501\u7684\u4e92\u65a5\u6027\u3002</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a 1.  \u8bbe\u7f6e\u8db3\u591f\u957f\u7684\u8fc7\u671f\u65f6\u95f4\uff1a\u8bc4\u4f30\u4e1a\u52a1\u6267\u884c\u6240\u9700\u7684\u6700\u957f\u65f6\u95f4\uff0c\u5e76\u8bbe\u7f6e\u4e00\u4e2a\u8fdc\u5927\u4e8e\u6b64\u65f6\u95f4\u7684\u8fc7\u671f\u65f6\u95f4\u3002\u4f46\u8fd9\u53ea\u662f\u4e00\u79cd\u7f13\u89e3\u624b\u6bb5\uff0c\u6cbb\u6807\u4e0d\u6cbb\u672c\u3002 2.  \u589e\u52a0\u5b88\u62a4\u7ebf\u7a0b\uff08Watchdog\uff09\uff1a\u4e3a\u83b7\u53d6\u9501\u7684\u7ebf\u7a0b\u542f\u52a8\u4e00\u4e2a\u5b88\u62a4\u7ebf\u7a0b\u3002\u5b88\u62a4\u7ebf\u7a0b\u4f1a\u5b9a\u671f\u68c0\u67e5\u4e3b\u7ebf\u7a0b\u662f\u5426\u8fd8\u6301\u6709\u9501\uff0c\u5e76\u5728\u9501\u5373\u5c06\u8fc7\u671f\u4f46\u4e1a\u52a1\u5c1a\u672a\u5b8c\u6210\u65f6\uff0c\u81ea\u52a8\u5ef6\u957f\u9501\u7684\u8fc7\u671f\u65f6\u95f4\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E7%9A%84/#4","title":"4. \u9501\u7684\u4e0d\u53ef\u91cd\u5165","text":"<p>\u95ee\u9898\u63cf\u8ff0\uff1a\u4e00\u4e2a\u7ebf\u7a0b\u5728\u5df2\u7ecf\u6301\u6709\u9501\u7684\u60c5\u51b5\u4e0b\uff0c\u518d\u6b21\u5c1d\u8bd5\u83b7\u53d6\u540c\u4e00\u4e2a\u9501\uff0c\u4f1a\u56e0\u4e3a\u9501\u5df2\u88ab\u81ea\u5df1\u6301\u6709\u800c\u5931\u8d25\u3002\u5982\u679c\u4e1a\u52a1\u903b\u8f91\u4e2d\u5b58\u5728\u9012\u5f52\u8c03\u7528\u6216\u65b9\u6cd5\u5d4c\u5957\uff0c\u5c31\u9700\u8981\u9501\u662f\u201c\u53ef\u91cd\u5165\u201d\u7684\u3002</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a\u8ba9\u9501\u80fd\u591f\u8bb0\u5f55\u6301\u6709\u8005\u548c\u52a0\u9501\u6b21\u6570\u3002 1.  \u672c\u5730\u8ba1\u6570\uff1a\u4f7f\u7528 <code>ThreadLocal</code> \u5728\u5f53\u524d\u7ebf\u7a0b\u5185\u8bb0\u5f55\u5bf9\u67d0\u4e2a <code>key</code> \u7684\u91cd\u5165\u6b21\u6570\u3002\u6bcf\u6b21\u52a0\u9501\u65f6\uff0c\u5148\u68c0\u67e5 <code>ThreadLocal</code> \u4e2d\u662f\u5426\u5df2\u6709\u8bb0\u5f55\u3002\u5982\u679c\u6709\uff0c\u5219\u6b21\u6570\u52a0\u4e00\uff1b\u5982\u679c\u6ca1\u6709\uff0c\u5219\u5411 Redis \u8bf7\u6c42\u65b0\u9501\u3002\u89e3\u9501\u65f6\u5219\u6b21\u6570\u51cf\u4e00\uff0c\u76f4\u5230\u8ba1\u6570\u4e3a 0 \u65f6\u624d\u771f\u6b63\u5411 Redis \u8bf7\u6c42\u5220\u9664 <code>key</code>\u3002 2.  Redis Hash \u7ed3\u6784\uff1a\u4f7f\u7528 Redis \u7684 Hash \u6570\u636e\u7ed3\u6784\u6765\u5b58\u50a8\u9501\u4fe1\u606f\u3002Hash \u7684 <code>key</code> \u662f\u9501\u540d\uff0c<code>field</code> \u662f\u7ebf\u7a0b\u7684\u552f\u4e00\u6807\u8bc6\uff0c<code>value</code> \u662f\u91cd\u5165\u7684\u6b21\u6570\u3002     *   \u52a0\u9501\uff1a\u68c0\u67e5 <code>key</code> \u662f\u5426\u5b58\u5728\u3002\u82e5\u4e0d\u5b58\u5728\uff0c\u5219 <code>HSET</code> \u521b\u5efa\u9501\uff0c\u5e76\u5c06\u91cd\u5165\u6b21\u6570\u8bbe\u4e3a 1\u3002\u82e5\u5b58\u5728\uff0c\u68c0\u67e5 <code>field</code> \u662f\u5426\u4e3a\u5f53\u524d\u7ebf\u7a0b\u6807\u8bc6\u3002\u5982\u679c\u662f\uff0c\u5219\u901a\u8fc7 <code>HINCRBY</code> \u5c06\u91cd\u5165\u6b21\u6570\u52a0\u4e00\uff0c\u5e76\u91cd\u7f6e\u8fc7\u671f\u65f6\u95f4\u3002     *   \u89e3\u9501\uff1a\u5c06\u91cd\u5165\u6b21\u6570\u51cf\u4e00\u3002\u5982\u679c\u51cf\u540e\u5927\u4e8e 0\uff0c\u5219\u53ea\u66f4\u65b0 Hash \u503c\uff1b\u5982\u679c\u51cf\u540e\u7b49\u4e8e 0\uff0c\u5219 <code>DEL</code> \u5220\u9664\u6574\u4e2a <code>key</code>\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E7%9A%84/#5","title":"5. \u65e0\u6cd5\u7b49\u5f85\u9501\u91ca\u653e","text":"<p>\u95ee\u9898\u63cf\u8ff0\uff1a\u4e0a\u8ff0\u7684\u52a0\u9501\u64cd\u4f5c\u90fd\u662f\u201c\u5c1d\u8bd5\u4e00\u6b21\u7acb\u5373\u8fd4\u56de\u201d\uff0c\u5982\u679c\u83b7\u53d6\u9501\u5931\u8d25\uff0c\u4e0d\u4f1a\u7b49\u5f85\u3002</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a 1.  \u5ba2\u6237\u7aef\u8f6e\u8be2\uff1a\u5f53\u83b7\u53d6\u9501\u5931\u8d25\u540e\uff0c\u7ebf\u7a0b\u4e0d\u7acb\u5373\u8fd4\u56de\uff0c\u800c\u662f\u7b49\u5f85\u4e00\u5c0f\u6bb5\u65f6\u95f4\u540e\u518d\u6b21\u5c1d\u8bd5\uff0c\u76f4\u5230\u6210\u529f\u83b7\u53d6\u6216\u8fbe\u5230\u6307\u5b9a\u7684\u8d85\u65f6\u65f6\u95f4\u3002\u8fd9\u79cd\u65b9\u5f0f\u4f1a\u6d88\u8017\u8f83\u591a CPU \u8d44\u6e90\u3002 2.  Redis \u53d1\u5e03/\u8ba2\u9605 (Pub/Sub)\uff1a\u83b7\u53d6\u9501\u5931\u8d25\u7684\u5ba2\u6237\u7aef\u8ba2\u9605\u4e00\u4e2a\u7279\u5b9a\u7684\u9891\u9053\u3002\u5f53\u6301\u6709\u9501\u7684\u5ba2\u6237\u7aef\u91ca\u653e\u9501\u65f6\uff0c\u5b83\u4f1a\u5411\u8be5\u9891\u9053\u53d1\u5e03\u4e00\u6761\u201c\u9501\u5df2\u91ca\u653e\u201d\u7684\u6d88\u606f\u3002\u6240\u6709\u8ba2\u9605\u8005\u6536\u5230\u6d88\u606f\u540e\uff0c\u518d\u6b21\u5c1d\u8bd5\u83b7\u53d6\u9501\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E7%9A%84/#_2","title":"\u96c6\u7fa4\u73af\u5883\u4e0b\u7684\u6311\u6218","text":"<p>\u5728 Redis \u96c6\u7fa4\uff08\u4e3b\u4ece\u3001\u54e8\u5175\u3001Cluster\uff09\u6a21\u5f0f\u4e0b\uff0c\u5206\u5e03\u5f0f\u9501\u4f1a\u9762\u4e34\u66f4\u4e25\u5cfb\u7684\u6311\u6218\u3002</p> <ol> <li>\u4e3b\u5907\u5207\u6362\uff1a\u5ba2\u6237\u7aef A \u5728 Master \u8282\u70b9\u6210\u529f\u52a0\u9501\uff0c\u4f46\u8fd9\u6761\u5199\u547d\u4ee4\u8fd8\u672a\u5f02\u6b65\u540c\u6b65\u5230 Slave \u8282\u70b9\u65f6\uff0cMaster \u8282\u70b9\u5b95\u673a\u3002\u54e8\u5175\u6216\u96c6\u7fa4\u673a\u5236\u5c06\u4e00\u4e2a Slave \u63d0\u5347\u4e3a\u65b0\u7684 Master\u3002\u6b64\u65f6\uff0c\u5ba2\u6237\u7aef B \u5411\u65b0\u7684 Master \u8bf7\u6c42\u52a0\u9501\uff0c\u7531\u4e8e\u65b0 Master \u4e0a\u6ca1\u6709\u9501\u7684\u6570\u636e\uff0cB \u4e5f\u80fd\u6210\u529f\u52a0\u9501\uff0c\u5bfc\u81f4\u4e24\u4e2a\u5ba2\u6237\u7aef\u540c\u65f6\u6301\u6709\u540c\u4e00\u628a\u9501\u3002</li> <li>\u96c6\u7fa4\u8111\u88c2\uff1a\u7531\u4e8e\u7f51\u7edc\u5206\u533a\uff0c\u539f Master \u4e0e\u5176\u4ed6\u8282\u70b9\u5931\u8054\uff0c\u4f46\u5b83\u4ecd\u5728\u72ec\u7acb\u8fd0\u884c\u3002\u54e8\u5175\u96c6\u7fa4\u5728\u53e6\u4e00\u4e2a\u7f51\u7edc\u5206\u533a\u4e2d\u9009\u4e3e\u51fa\u4e00\u4e2a\u65b0\u7684 Master\u3002\u8fd9\u5bfc\u81f4\u96c6\u7fa4\u4e2d\u540c\u65f6\u5b58\u5728\u4e24\u4e2a Master \u8282\u70b9\uff0c\u4e0d\u540c\u7684\u5ba2\u6237\u7aef\u8fde\u63a5\u5230\u4e0d\u540c\u7684 Master\uff0c\u90fd\u80fd\u6210\u529f\u83b7\u53d6\u540c\u4e00\u628a\u9501\u3002</li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E5%BC%82%E5%B8%B8%E6%8E%92%E6%9F%A5%E6%80%9D%E8%B7%AF/","title":"Redis\u5f02\u5e38\u6392\u67e5\u601d\u8def","text":""},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E5%BC%82%E5%B8%B8%E6%8E%92%E6%9F%A5%E6%80%9D%E8%B7%AF/#_1","title":"\u670d\u52a1\u6392\u969c\u7684\u901a\u7528\u65b9\u6cd5","text":"<p>\u5f53\u7ebf\u4e0a\u670d\u52a1\u51fa\u73b0\u5f02\u5e38\uff08\u5982\u6b64\u6587\u4e2d\u7684\u201c\u8bbf\u95ee\u8017\u65f6\u8f83\u957f\u201d\uff09\u65f6\uff0c\u5e94\u9075\u5faa\u4e00\u5957\u903b\u8f91\u6e05\u6670\u7684\u6392\u67e5\u6d41\u7a0b\u3002</p> <ol> <li> <p>\u660e\u786e\u95ee\u9898\u73b0\u8c61\uff1a</p> <ul> <li>\u8d77\u70b9\uff1a\u6536\u5230\u544a\u8b66\uff0c\u53d1\u73b0\u201c\u6570\u636e\u6574\u4f53\u5904\u7406\u65f6\u95f4\u53d8\u6162\u201d\u3002</li> <li>\u5b9a\u4f4d\uff1a\u901a\u8fc7\u76d1\u63a7\u7cfb\u7edf\u6216\u4e1a\u52a1\u6253\u70b9\uff0c\u5c06\u95ee\u9898\u8303\u56f4\u7f29\u5c0f\u5230\u5177\u4f53\u7684\u670d\u52a1\u6a21\u5757\u548c\u5904\u7406\u9636\u6bb5\u3002</li> </ul> </li> <li> <p>\u4e24\u5927\u6392\u67e5\u601d\u8def\uff1a\u670d\u52a1\u672c\u8eab vs. \u5916\u90e8\u56e0\u7d20\uff1a</p> <ul> <li> <p>\u601d\u8def\u4e00\uff1a\u6392\u67e5\u6a21\u5757\u672c\u8eab\u95ee\u9898\uff08\u7531\u5185\u800c\u5916\uff09</p> <ul> <li>\u6a2a\u5411\u770b\u57fa\u7840\u6307\u6807\uff1a\u68c0\u67e5\u670d\u52a1\u8fd0\u884c\u7684\u57fa\u7840\u8d44\u6e90\uff0c\u8fd9\u662f\u6700\u5feb\u3001\u6700\u76f4\u63a5\u7684\u5224\u65ad\u65b9\u5f0f\u3002<ul> <li>CPU\uff1a\u662f\u5426\u98d9\u5347\u6216\u5904\u4e8e\u9ad8\u4f4d\u3002</li> <li>\u5185\u5b58\uff1a\u662f\u5426\u5b58\u5728\u6cc4\u6f0f\u6216\u8fbe\u5230\u74f6\u9888\u3002</li> <li>\u78c1\u76d8I/O\uff1a\u8bfb\u5199\u662f\u5426\u5f02\u5e38\u7f13\u6162\u3002</li> <li>\u7f51\u7edcI/O\uff1a\u5e26\u5bbd\u662f\u5426\u88ab\u5360\u6ee1\u3002</li> </ul> </li> <li>\u7eb5\u5411\u770b\u4ee3\u7801\u53d8\u66f4\uff1a\u786e\u8ba4\u8fd1\u671f\u662f\u5426\u6709\u76f8\u5173\u53d1\u5e03\u6216\u4ee3\u7801\u6539\u52a8\uff0c\u8fd9\u5e38\u5e38\u662f\u95ee\u9898\u7684\u76f4\u63a5\u539f\u56e0\u3002</li> </ul> </li> <li> <p>\u601d\u8def\u4e8c\uff1a\u6392\u67e5\u5916\u90e8\u56e0\u7d20\uff08\u6570\u636e\u6216\u4f9d\u8d56\uff09</p> <ul> <li>\u6570\u636e\u91cf\u95ee\u9898\uff1a\u68c0\u67e5\u4e0a\u6e38\u8bf7\u6c42\u91cf\u6216\u5904\u7406\u7684\u6570\u636e\u91cf\u662f\u5426\u6fc0\u589e\uff08\u6587\u4e2d\u53d1\u73b0\u201c\u4e0a\u62a5\u91cf\u589e\u52a0\u4e865\u500d\u201d\uff09\u3002</li> <li>\u4f9d\u8d56\u670d\u52a1\u95ee\u9898\uff1a\u68c0\u67e5\u5f53\u524d\u6a21\u5757\u6240\u4f9d\u8d56\u7684\u4e0b\u6e38\u670d\u52a1\uff08\u5982\u6570\u636e\u5e93\u3001\u7f13\u5b58\u3001\u5176\u4ed6\u5fae\u670d\u52a1\uff09\u662f\u5426\u51fa\u73b0\u5f02\u5e38\u3002</li> </ul> </li> </ul> </li> <li> <p>\u4e34\u65f6\u5e94\u6025\u5904\u7406\uff08\u4e09\u677f\u65a7\uff09\uff1a     \u5728\u5b9a\u4f4d\u5230\u6839\u672c\u539f\u56e0\u4e4b\u524d\uff0c\u4e3a\u4e86\u5feb\u901f\u6062\u590d\u670d\u52a1\uff0c\u53ef\u4ee5\u5148\u91c7\u53d6\u4e34\u65f6\u63aa\u65bd\u3002</p> <ul> <li>\u6269\u5bb9\uff1a\u589e\u52a0\u670d\u52a1\u5b9e\u4f8b\uff0c\u5206\u644a\u538b\u529b\u3002</li> <li>\u9650\u6d41\uff1a\u9650\u5236\u8fdb\u5165\u7cfb\u7edf\u7684\u8bf7\u6c42\u91cf\uff0c\u4fdd\u62a4\u6838\u5fc3\u670d\u52a1\u3002</li> <li>\u670d\u52a1\u964d\u7ea7\uff1a\u6682\u65f6\u5173\u95ed\u975e\u6838\u5fc3\u529f\u80fd\uff0c\u4fdd\u8bc1\u4e3b\u6d41\u7a0b\u53ef\u7528\u3002</li> </ul> </li> <li> <p>\u6df1\u6316\u6839\u672c\u539f\u56e0\uff1a     \u4e34\u65f6\u89e3\u51b3\u95ee\u9898\u540e\uff0c\u5fc5\u987b\u6df1\u5165\u63a2\u7a76\u6839\u672c\u539f\u56e0\uff0c\u4ee5\u9632\u95ee\u9898\u518d\u6b21\u53d1\u751f\uff0c\u5e76\u5bfb\u6c42\u6027\u80fd\u4f18\u5316\u70b9\u3002</p> <ul> <li>\u7cbe\u7ec6\u5316\u5b9a\u4f4d\uff1a\u5229\u7528\u66f4\u7cbe\u786e\u7684\u5de5\u5177\u5b9a\u4f4d\u8017\u65f6\u70b9\u3002<ul> <li>\u4e1a\u52a1\u6253\u70b9\uff1a\u5728\u4ee3\u7801\u5173\u952e\u8def\u5f84\u589e\u52a0\u8017\u65f6\u65e5\u5fd7\u6216\u76d1\u63a7\u6307\u6807\uff0c\u786e\u5b9a\u95ee\u9898\u7684\u5927\u81f4\u4e1a\u52a1\u8303\u56f4\u3002</li> <li>\u6027\u80fd\u5206\u6790\u5de5\u5177 (Profiler)\uff1a\u4f7f\u7528\u5982 <code>pprof</code> (Go)\u3001<code>JProfiler</code> (Java) \u7b49\u5de5\u5177\uff0c\u53ef\u4ee5\u7cbe\u786e\u5230\u51fd\u6570\u7ea7\u522b\u7684CPU\u548c\u5185\u5b58\u6d88\u8017\uff0c\u627e\u5230\u6027\u80fd\u74f6\u9888\uff08\u6587\u4e2d\u901a\u8fc7 <code>pprof</code> \u53d1\u73b0Redis\u76f8\u5173\u547d\u4ee4\u8017\u65f6\u5360\u5927\u5934\uff09\u3002</li> </ul> </li> <li>\u95ee\u9898\u8f6c\u6362\uff1a\u5c06\u8868\u5c42\u95ee\u9898\uff08\u201c\u6570\u636e\u91cf\u7a81\u589e\u201d\uff09\u8f6c\u5316\u4e3a\u66f4\u6df1\u5c42\u6b21\u7684\u6280\u672f\u95ee\u9898\uff08\u201cRedis\u53ef\u7528\u6027\u95ee\u9898\u201d\uff09\uff0c\u4ece\u800c\u8fdb\u5165\u4e13\u9879\u6392\u67e5\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E5%BC%82%E5%B8%B8%E6%8E%92%E6%9F%A5%E6%80%9D%E8%B7%AF/#redis","title":"Redis\u670d\u52a1\u6392\u969c\u7684\u6838\u5fc3\u65b9\u6cd5","text":"<p>\u5f53\u95ee\u9898\u660e\u786e\u6307\u5411Redis\u540e\uff0c\u53ef\u4ee5\u4ece\u4e09\u4e2a\u7ef4\u5ea6\u8fdb\u884c\u7cfb\u7edf\u6027\u6392\u67e5\uff1aRedis\u670d\u52a1\u672c\u8eab -&gt; Redis\u6570\u636e\u5b58\u50a8 -&gt; Redis\u8bbf\u95ee\u65b9\u5f0f\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E5%BC%82%E5%B8%B8%E6%8E%92%E6%9F%A5%E6%80%9D%E8%B7%AF/#1-redis","title":"1. Redis\u670d\u52a1\u672c\u8eab\u7684\u95ee\u9898","text":"<p>\u8fd9\u4e2a\u7ef4\u5ea6\u5173\u6ce8Redis\u5b9e\u4f8b\u53ca\u5176\u8fd0\u884c\u73af\u5883\u3002</p> <ul> <li>\u7f51\u7edc\u5ef6\u8fdf\u786e\u8ba4\uff1a<ul> <li>\u4e1a\u52a1\u670d\u52a1\u5668\u5230Redis\u670d\u52a1\u5668\u7684\u7f51\u7edc\uff1a\u6392\u67e5\u662f\u5426\u5b58\u5728\u7f51\u7edc\u6296\u52a8\u3001\u4e22\u5305\u6216\u5e26\u5bbd\u74f6\u9888\u3002\u5728\u5185\u7f51\u73af\u5883\u4e2d\uff0c\u82e5\u6570\u636e\u91cf\u4e0b\u964d\u540e\u8017\u65f6\u51cf\u5c11\uff0c\u53ef\u521d\u6b65\u6392\u9664\u56fa\u5b9a\u7f51\u7edc\u95ee\u9898\u3002</li> <li>Redis\u81ea\u8eab\u54cd\u5e94\u5ef6\u8fdf\uff1a<ul> <li><code>redis-cli --intrinsic-latency &lt;duration&gt;</code>\uff1a\u5728Redis\u670d\u52a1\u5668\u4e0a\u76f4\u63a5\u8fd0\u884c\uff0c\u6d4b\u8bd5\u5176\u56fa\u6709\u7684\u3001\u6700\u4f4e\u7684\u54cd\u5e94\u5ef6\u8fdf\uff0c\u6392\u9664\u5916\u90e8\u5e72\u6270\u3002</li> <li><code>redis-cli --latency-history -i &lt;interval&gt;</code>\uff1a\u6301\u7eed\u76d1\u63a7\u4e00\u6bb5\u65f6\u95f4\u5185\u7684\u5ef6\u8fdf\u5206\u5e03\uff08\u6700\u5c0f\u3001\u6700\u5927\u3001\u5e73\u5747\u503c\uff09\uff0c\u89c2\u5bdf\u662f\u5426\u5b58\u5728\u5468\u671f\u6027\u6216\u77ac\u65f6\u7684\u5ef6\u8fdf\u9ad8\u5cf0\u3002</li> </ul> </li> </ul> </li> <li>\u541e\u5410\u91cf (OPS)\uff1a<ul> <li><code>INFO stats</code> \u547d\u4ee4\u4e2d\u7684 <code>instantaneous_ops_per_sec</code> \u6307\u6807\u53ef\u4ee5\u663e\u793aRedis\u5f53\u524d\u7684QPS\u3002</li> <li>\u5173\u952e\u5206\u6790\uff1a\u5c06OPS\u4e0eCPU\u4f7f\u7528\u7387\u7ed3\u5408\u5206\u6790\u3002\u5982\u679c CPU\u5360\u7528\u7387\u9ad8\u800cOPS\u5f88\u4f4e\uff0c\u8bf4\u660eRedis\u53ef\u80fd\u5728\u6267\u884c\u6548\u7387\u4f4e\u4e0b\u7684\u64cd\u4f5c\uff0c\u6216\u8005\u88ab\u67d0\u4e9b\u64cd\u4f5c\u963b\u585e\uff0c\u800c\u4e0d\u662f\u5728\u9ad8\u6548\u5730\u5904\u7406\u8bf7\u6c42\u3002</li> </ul> </li> <li>\u4e3b\u4ece\u540c\u6b65\u95ee\u9898 (\u591a\u5b9e\u4f8b)\uff1a<ul> <li><code>INFO replication</code> \u547d\u4ee4\u67e5\u770b\u4e3b\u4ece\u72b6\u6001\u3002</li> <li>\u5173\u6ce8 <code>master_link_status</code> (\u662f\u5426\u4e3aup)\u3001<code>master_last_io_seconds_ago</code> (\u8ddd\u79bb\u4e0a\u6b21\u4e0e\u4e3b\u8282\u70b9\u901a\u4fe1\u7684\u79d2\u6570\uff0c\u8fc7\u5927\u5219\u5f02\u5e38) \u7b49\u6307\u6807\uff0c\u6392\u67e5\u4e3b\u4ece\u5ef6\u8fdf\u6216\u65ad\u8fde\u95ee\u9898\u3002</li> </ul> </li> <li>\u6838\u5fc3\u8d44\u6e90\uff1aCPU\u3001\u5185\u5b58\u3001\u78c1\u76d8I/O\uff1a<ul> <li>CPU (<code>INFO cpu</code>)\uff1a<ul> <li><code>used_cpu_sys</code> \u548c <code>used_cpu_user</code>\uff1a\u5206\u522b\u4ee3\u8868\u5185\u6838\u6001\u548c\u7528\u6237\u6001\u7684CPU\u6d88\u8017\u3002\u5982\u679c\u6301\u7eed\u63a5\u8fd1100%\uff0c\u8bf4\u660eCPU\u6210\u4e3a\u74f6\u9888\u3002</li> <li>\u8865\u5145\uff1aRedis 6.0 \u4ee5\u540e\u5f15\u5165\u4e86I/O\u591a\u7ebf\u7a0b\uff0c\u53ef\u4ee5\u5c06\u7f51\u7edcI/O\u7684\u538b\u529b\u5206\u644a\u5230\u591a\u4e2a\u6838\u5fc3\u4e0a\uff0c\u4f46\u547d\u4ee4\u6267\u884c\u4f9d\u7136\u662f\u5355\u7ebf\u7a0b\u3002</li> </ul> </li> <li>\u5185\u5b58 (<code>INFO memory</code>)\uff1a<ul> <li><code>used_memory_rss</code>\uff1a\u64cd\u4f5c\u7cfb\u7edf\u5b9e\u9645\u5206\u914d\u7ed9Redis\u7684\u5185\u5b58\uff0c\u5982\u679c\u8fdc\u5927\u4e8e <code>used_memory</code>\uff0c\u8bf4\u660e\u5185\u5b58\u788e\u7247\u5316\u4e25\u91cd\u3002</li> <li><code>mem_fragmentation_ratio</code>\uff1a\u788e\u7247\u7387\uff08<code>used_memory_rss / used_memory</code>\uff09\u3002\u7406\u60f3\u503c\u7565\u5927\u4e8e1\u3002\u5927\u4e8e1.5\u8868\u793a\u788e\u7247\u8fc7\u591a\uff1b\u5c0f\u4e8e1\u5219\u8868\u793a\u64cd\u4f5c\u7cfb\u7edf\u7269\u7406\u5185\u5b58\u4e0d\u8db3\uff0c\u53ef\u80fd\u53d1\u751f\u4e86Swap\uff08\u5185\u5b58\u4ea4\u6362\uff09\uff0c\u4f1a\u5bfc\u81f4\u6027\u80fd\u6025\u5267\u4e0b\u964d\u3002</li> </ul> </li> <li>\u78c1\u76d8I/O (<code>INFO persistence</code>)\uff1a<ul> <li>\u6301\u4e45\u5316\uff1a\u5982\u679c\u5f00\u542f\u4e86RDB\u6216AOF\uff0c\u5173\u6ce8 <code>latest_fork_usec</code> (\u6700\u8fd1\u4e00\u6b21fork\u64cd\u4f5c\u7684\u8017\u65f6)\u3002fork\u64cd\u4f5c\u4f1a\u6d88\u8017CPU\u548c\u5185\u5b58\uff0c\u5982\u679c\u8017\u65f6\u8fc7\u957f\uff0c\u4f1a\u963b\u585e\u4e3b\u7ebf\u7a0b\u3002</li> <li>\u5185\u5b58\u4ea4\u6362 (Swap)\uff1a\u68c0\u67e5 <code>maxmemory</code> \u8bbe\u7f6e\u3002\u5982\u679c\u6ca1\u6709\u8bbe\u7f6e\uff0c\u5f53\u7269\u7406\u5185\u5b58\u4e0d\u8db3\u65f6\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u8fdb\u884cSwap\uff0c\u5c06\u90e8\u5206\u5185\u5b58\u6570\u636e\u6362\u5230\u78c1\u76d8\u4e0a\uff0c\u8fd9\u5bf9Redis\u662f\u81f4\u547d\u7684\u3002\u901a\u8fc7 <code>evicted_keys</code> \u67e5\u770b\u662f\u5426\u6709key\u88ab\u9a71\u9010\u3002</li> </ul> </li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E5%BC%82%E5%B8%B8%E6%8E%92%E6%9F%A5%E6%80%9D%E8%B7%AF/#2-redis","title":"2. Redis\u6570\u636e\u5b58\u50a8\u7684\u95ee\u9898","text":"<p>\u8fd9\u4e2a\u7ef4\u5ea6\u5173\u6ce8\u5b58\u50a8\u5728Redis\u4e2d\u7684\u6570\u636e\u672c\u8eab\u662f\u5426\u5b58\u5728\u95ee\u9898\u3002</p> <ul> <li>Key\u603b\u6570 (<code>INFO keyspace</code>)\uff1a<ul> <li>\u5b9e\u4f8b\u4e2d\u7684key\u6570\u91cf\u8fc7\u591a\uff08\u5982\u8d85\u8fc7\u5343\u4e07\uff09\u53ef\u80fd\u5bfc\u81f4\u8fc7\u671fkey\u56de\u6536\u4e0d\u53ca\u65f6\uff0c\u589e\u52a0\u7ba1\u7406\u8d1f\u62c5\u3002</li> </ul> </li> <li>\u5927Key (Bigkey)\uff1a<ul> <li>\u5371\u5bb3\uff1a\u64cd\u4f5c\uff08\u8bfb\u5199\u3001\u5220\u9664\uff09\u5927Key\u4f1a\u963b\u585eRedis\u4e3b\u7ebf\u7a0b\uff0c\u9020\u6210\u5185\u5b58\u5206\u914d\u4e0d\u5747\uff0c\u8fc7\u671f\u5220\u9664\u65f6\u4e5f\u53ef\u80fd\u5f15\u53d1\u963b\u585e\u3002</li> <li>\u6392\u67e5\uff1a<code>redis-cli --bigkeys</code> \u547d\u4ee4\u53ef\u4ee5\u626b\u63cf\u5e76\u627e\u51fa\u5b9e\u4f8b\u4e2d\u7684\u5927Key\u3002</li> <li>\u8865\u5145\u77e5\u8bc6\u70b9 - \u5185\u5b58\u5927\u9875 (Huge Pages)\uff1aLinux\u7684\u5185\u5b58\u5927\u9875\u673a\u5236\uff08\u59822MB\u4e00\u9875\uff09\u4e0e\u5199\u65f6\u590d\u5236\uff08COW\uff09\u673a\u5236\u7ed3\u5408\u65f6\uff0c\u5bf9\u5927Key\u7684\u5199\u64cd\u4f5c\u4f1a\u5bfc\u81f4\u66f4\u5927\u7684\u590d\u5236\u5f00\u9500\uff0c\u52a0\u5267\u963b\u585e\u3002</li> </ul> </li> <li>Key\u96c6\u4e2d\u8fc7\u671f\uff1a<ul> <li>\u73b0\u8c61\uff1a\u5927\u91cfkey\u5728\u540c\u4e00\u65f6\u95f4\u70b9\u96c6\u4e2d\u8fc7\u671f\uff0c\u4f1a\u5bfc\u81f4Redis\u82b1\u8d39\u5927\u91cfCPU\u5728\u5220\u9664\u64cd\u4f5c\u4e0a\uff0c\u5f15\u53d1\u5468\u671f\u6027\u7684\u6027\u80fd\u6296\u52a8\u3002</li> <li>\u6392\u67e5\uff1a\u68c0\u67e5\u4e1a\u52a1\u903b\u8f91\u4e2d\u662f\u5426\u6709\u53ef\u80fd\u5bfc\u81f4\u96c6\u4e2d\u8fc7\u671f\u7684\u573a\u666f\uff08\u5982\u7f13\u5b58\u9884\u70ed\u3001\u6279\u5904\u7406\u4efb\u52a1\uff09\uff0c\u5e76\u89c2\u5bdf\u76d1\u63a7\u662f\u5426\u6709\u5468\u671f\u6027\u5ef6\u8fdf\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E5%BC%82%E5%B8%B8%E6%8E%92%E6%9F%A5%E6%80%9D%E8%B7%AF/#3-redis","title":"3. \u8bbf\u95eeRedis\u7684\u95ee\u9898","text":"<p>\u8fd9\u4e2a\u7ef4\u5ea6\u5173\u6ce8\u5ba2\u6237\u7aef\u4e0eRedis\u7684\u4ea4\u4e92\u65b9\u5f0f\u3002</p> <ul> <li>\u5ba2\u6237\u7aef\u8fde\u63a5\u6570 (<code>INFO clients</code>)\uff1a<ul> <li><code>connected_clients</code>\uff1a\u68c0\u67e5\u8fde\u63a5\u6570\u662f\u5426\u8d85\u8fc7Redis\u914d\u7f6e\u7684 <code>maxclients</code> \u9650\u5236\u3002</li> <li><code>blocked_clients</code>\uff1a\u68c0\u67e5\u662f\u5426\u6709\u5ba2\u6237\u7aef\u56e0\u6267\u884c <code>BLPOP</code>, <code>BRPOP</code> \u7b49\u963b\u585e\u547d\u4ee4\u800c\u88ab\u6302\u8d77\u3002</li> </ul> </li> <li>\u6162\u547d\u4ee4 (Slow Command)\uff1a<ul> <li>\u6392\u67e5\uff1a<code>slowlog get &lt;N&gt;</code> \u547d\u4ee4\u53ef\u4ee5\u67e5\u770b\u6700\u8fd1N\u6761\u6267\u884c\u8017\u65f6\u8d85\u8fc7 <code>slowlog-log-slower-than</code> \u914d\u7f6e\u9608\u503c\u7684\u547d\u4ee4\u3002\u8fd9\u6709\u52a9\u4e8e\u76f4\u63a5\u5b9a\u4f4d\u662f\u54ea\u4e9b\u5177\u4f53\u547d\u4ee4\u5bfc\u81f4\u4e86\u5ef6\u8fdf\u3002</li> </ul> </li> <li>\u7f13\u5b58\u547d\u4e2d\u7387 (<code>INFO stats</code>)\uff1a<ul> <li><code>keyspace_hits</code> \u548c <code>keyspace_misses</code>\uff1a\u901a\u8fc7\u8fd9\u4e24\u4e2a\u503c\u53ef\u4ee5\u8ba1\u7b97\u7f13\u5b58\u547d\u4e2d\u7387\u3002\u547d\u4e2d\u7387\u8fc7\u4f4e\u610f\u5473\u7740\u5927\u91cf\u8bf7\u6c42\u7a7f\u900f\u5230\u540e\u7aef\u6570\u636e\u5e93\uff0c\u589e\u52a0\u4e86\u6574\u4f53\u94fe\u8def\u7684\u5ef6\u8fdf\u3002</li> </ul> </li> <li>\u70ed\u70b9Key (Hotkey)\uff1a<ul> <li>\u73b0\u8c61\uff1a\u67d0\u4e2a\u6216\u67d0\u51e0\u4e2akey\u88ab\u6781\u9ad8\u9891\u7387\u5730\u8bbf\u95ee\uff0c\u5bfc\u81f4\u5355\u7ebf\u7a0b\u7684Redis CPU\u538b\u529b\u5267\u589e\uff0c\u65e0\u6cd5\u5904\u7406\u5176\u4ed6\u8bf7\u6c42\u3002\u8fd9\u662f\u6587\u4e2d\u6848\u4f8b\u7684\u6700\u7ec8\u539f\u56e0\u3002</li> <li>\u6392\u67e5\uff1a<ul> <li>Redis 4.0.3+ \u7248\u672c\uff0c\u5728\u5185\u5b58\u6dd8\u6c70\u7b56\u7565\u4e3a <code>allkeys-lfu</code> \u6216 <code>volatile-lfu</code> \u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>redis-cli --hotkeys</code> \u547d\u4ee4\u67e5\u627e\u3002</li> <li>\u5982\u679c\u6ca1\u6709\u539f\u751f\u652f\u6301\uff0c\u53ef\u4ee5\u901a\u8fc7\u5ba2\u6237\u7aef\u6293\u5305\u3001\u81ea\u5b9a\u4e49\u7edf\u8ba1\u6216\u76d1\u63a7\u5de5\u5177\u6765\u53d1\u73b0\u3002</li> </ul> </li> <li>\u6839\u672c\u539f\u56e0\uff1a\u70ed\u70b9Key\u5bfc\u81f4\u7684\u7f51\u7edcI/O\u548c\u6570\u636e\u5904\u7406\u9ad8\u5ea6\u96c6\u4e2d\u5728\u5355\u7ebf\u7a0b\u4e0a\uff0c\u5373\u4f7fOPS\u4e0d\u9ad8\uff0cCPU\u4e5f\u4f1a\u56e0\u9891\u7e41\u7684\u6570\u636e\u62f7\u8d1d\u548c\u4e0a\u4e0b\u6587\u5207\u6362\u800c\u8017\u5c3d\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E5%BC%82%E5%B8%B8%E6%8E%92%E6%9F%A5%E6%80%9D%E8%B7%AF/#_2","title":"\u95ee\u9898\u590d\u73b0\u3001\u6d4b\u8bd5\u4e0e\u89e3\u51b3","text":"<ol> <li> <p>\u590d\u73b0\u4e0e\u9a8c\u8bc1\uff1a</p> <ul> <li>\u539f\u5219\uff1a\u4ece\u6700\u7b80\u5355\u7684Demo\u5f00\u59cb\uff0c\u9010\u6b65\u6a21\u62df\u7ebf\u4e0a\u73af\u5883\u3002</li> <li>\u65b9\u6cd5\uff1a<ul> <li>\u672c\u5730Demo\uff1a\u7f16\u5199\u7b80\u5355\u7684\u811a\u672c\uff08\u5982\u4f7f\u7528pipeline\uff09\u6765\u9a8c\u8bc1\u7406\u8bba\u731c\u60f3\u3002</li> <li>\u7ebf\u4e0a\u6a21\u62df\uff1a\u642d\u5efa\u7b80\u5316\u7684\u538b\u6d4b\u94fe\u8def\uff08\u6587\u4e2d\u901a\u8fc7\u6a21\u62dfKafka\u6d88\u8d39\uff09\uff0c\u4f7f\u7528\u7ebf\u4e0a\u771f\u5b9e\u6570\u636e\u8fdb\u884c\u538b\u6d4b\uff0c\u9010\u6b65\u8c03\u6574\u538b\u529b\uff08\u5e76\u53d1\u6570\u3001\u6570\u636e\u91cf\uff09\uff0c\u76f4\u5230\u590d\u73b0\u95ee\u9898\u73b0\u8c61\uff08CPU\u9ad8\u3001OPS\u4f4e\uff09\u3002</li> </ul> </li> </ul> </li> <li> <p>\u89e3\u51b3\u65b9\u6848\uff1a     \u6839\u636e\u5b9a\u4f4d\u5230\u7684\u6839\u672c\u539f\u56e0\uff08\u5982\u70ed\u70b9Key\uff09\uff0c\u9009\u62e9\u5408\u9002\u7684\u89e3\u51b3\u65b9\u6848\u3002</p> <ul> <li>\u8bfb\u5199\u5206\u79bb\uff1a\u5982\u679c\u662f\u591a\u5b9e\u4f8b\u96c6\u7fa4\uff0c\u5c06\u8bfb\u8bf7\u6c42\u5206\u6563\u5230\u4ece\u8282\u70b9\uff0c\u51cf\u8f7b\u4e3b\u8282\u70b9\u538b\u529b\u3002</li> <li>Pipeline\u6216Lua\u811a\u672c\uff1a\u5c06\u591a\u4e2a\u547d\u4ee4\u6253\u5305\u4e00\u6b21\u6027\u53d1\u9001\u7ed9Redis\uff0c\u5927\u5e45\u51cf\u5c11\u7f51\u7edcI/O\u6b21\u6570\uff0c\u964d\u4f4eCPU\u6d88\u8017\u3002</li> <li>\u589e\u52a0\u95f4\u63a5\u5c42\uff08\u672c\u5730\u7f13\u5b58\uff09\uff1a\u5728\u4e1a\u52a1\u670d\u52a1\u4fa7\u589e\u52a0\u4e00\u5c42\u672c\u5730\u7f13\u5b58\uff08\u5982Caffeine\u3001Guava Cache\uff09\uff0c\u5c06\u70ed\u70b9Key\u7684\u6570\u636e\u7f13\u5b58\u5728\u5e94\u7528\u5185\u5b58\u4e2d\uff0c\u76f4\u63a5\u62e6\u622a\u5927\u90e8\u5206\u8bf7\u6c42\uff0c\u907f\u514d\u8bbf\u95eeRedis\u3002\u8fd9\u662f\u6587\u4e2d\u6700\u7ec8\u91c7\u7528\u7684\u65b9\u6848\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF/","title":"Redis\u7684\u4f7f\u7528\u573a\u666f","text":"<ol> <li> <p>\u7f13\u5b58\uff08Caching\uff09\uff1a</p> <ul> <li>\u8fd9\u662fRedis\u6700\u7ecf\u5178\u4e5f\u6700\u666e\u904d\u7684\u5e94\u7528\u573a\u666f\u3002\u5c06\u70ed\u70b9\u6570\u636e\uff08\u5982\u6570\u636e\u5e93\u67e5\u8be2\u7ed3\u679c\u3001\u8ba1\u7b97\u7ed3\u679c\u3001\u6e32\u67d3\u540e\u7684\u9875\u9762\u7247\u6bb5\u3001API\u54cd\u5e94\u7b49\uff09\u5b58\u50a8\u5728Redis\u4e2d\uff0c\u540e\u7eed\u8bf7\u6c42\u53ef\u4ee5\u76f4\u63a5\u4ece\u5185\u5b58\u4e2d\u5feb\u901f\u83b7\u53d6\uff0c\u5927\u5927\u51cf\u8f7b\u540e\u7aef\u6570\u636e\u5e93\u7684\u538b\u529b\uff0c\u63d0\u9ad8\u5e94\u7528\u7684\u54cd\u5e94\u901f\u5ea6\u548c\u541e\u5410\u91cf\u3002</li> <li>\u53ef\u4ee5\u4f7f\u7528String\u7c7b\u578b\u5b58\u50a8\u5e8f\u5217\u5316\u7684\u5bf9\u8c61\u6216JSON\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528Hash\u7c7b\u578b\u5b58\u50a8\u5bf9\u8c61\u7684\u5b57\u6bb5\u3002</li> <li>\u901a\u8fc7\u8bbe\u7f6e\u5408\u7406\u7684\u8fc7\u671f\u65f6\u95f4\uff08TTL\uff09\u6765\u4fdd\u8bc1\u7f13\u5b58\u6570\u636e\u7684\u65f6\u6548\u6027\u3002</li> </ul> </li> <li> <p>\u4f1a\u8bdd\u5b58\u50a8\uff08Session Store\uff09\uff1a</p> <ul> <li>\u5728\u5206\u5e03\u5f0fWeb\u5e94\u7528\u4e2d\uff0c\u7528\u6237\u7684\u4f1a\u8bdd\u4fe1\u606f\uff08Session\uff09\u9700\u8981\u5728\u591a\u4e2a\u5e94\u7528\u670d\u52a1\u5668\u4e4b\u95f4\u5171\u4eab\u3002\u5c06Session\u5b58\u50a8\u5728Redis\u4e2d\uff0c\u53ef\u4ee5\u5b9e\u73b0\u65e0\u72b6\u6001\u7684\u5e94\u7528\u670d\u52a1\u5668\uff0c\u65b9\u4fbf\u6c34\u5e73\u6269\u5c55\uff0c\u5e76\u4e14\u8bfb\u5199\u901f\u5ea6\u5feb\u3002</li> <li>\u901a\u5e38\u4f7f\u7528String\u7c7b\u578b\u5b58\u50a8\u5e8f\u5217\u5316\u7684Session\u5bf9\u8c61\uff0c\u5e76\u4e3aSession\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\u3002</li> </ul> </li> <li> <p>\u8ba1\u6570\u5668\uff08Counters\uff09\uff1a</p> <ul> <li>\u5229\u7528Redis\u7684\u539f\u5b50\u81ea\u589e/\u81ea\u51cf\u64cd\u4f5c\uff08<code>INCR</code>, <code>DECR</code>, <code>INCRBY</code>, <code>DECRBY</code>\uff09\u53ef\u4ee5\u975e\u5e38\u65b9\u4fbf\u5730\u5b9e\u73b0\u5404\u79cd\u8ba1\u6570\u529f\u80fd\uff0c\u5982\u7f51\u7ad9\u9875\u9762\u6d4f\u89c8\u91cf\u3001\u6587\u7ae0\u70b9\u8d5e\u6570\u3001\u7528\u6237\u7b7e\u5230\u6b21\u6570\u3001API\u8c03\u7528\u9891\u7387\u9650\u5236\u7b49\u3002</li> <li>\u8fd9\u4e9b\u64cd\u4f5c\u662f\u539f\u5b50\u6027\u7684\uff0c\u5728\u9ad8\u5e76\u53d1\u4e0b\u4e5f\u80fd\u4fdd\u8bc1\u8ba1\u6570\u7684\u51c6\u786e\u6027\u3002</li> </ul> </li> <li> <p>\u6392\u884c\u699c\uff08Leaderboards\uff09\uff1a</p> <ul> <li>\u4f7f\u7528Sorted Set\uff08\u6709\u5e8f\u96c6\u5408\uff09\u6570\u636e\u7c7b\u578b\uff0c\u53ef\u4ee5\u5c06\u7528\u6237ID\u4f5c\u4e3a\u6210\u5458\uff08member\uff09\uff0c\u7528\u6237\u7684\u5206\u6570\uff08\u5982\u6e38\u620f\u5f97\u5206\u3001\u6d3b\u8dc3\u5ea6\uff09\u4f5c\u4e3a\u5206\u503c\uff08score\uff09\u3002</li> <li>\u53ef\u4ee5\u8f7b\u677e\u5b9e\u73b0\u83b7\u53d6Top N\u7528\u6237\u3001\u67e5\u8be2\u7528\u6237\u6392\u540d\u3001\u66f4\u65b0\u7528\u6237\u5206\u6570\u7b49\u529f\u80fd\uff0c\u4e14\u6027\u80fd\u5f88\u9ad8\u3002</li> </ul> </li> <li> <p>\u6d88\u606f\u961f\u5217/\u4efb\u52a1\u961f\u5217\uff08Message Queue / Task Queue\uff09\uff1a</p> <ul> <li>\u4f7f\u7528List\u6570\u636e\u7c7b\u578b\u7684\u963b\u585e\u64cd\u4f5c\uff08\u5982<code>LPUSH</code> + <code>BRPOP</code> \u6216 <code>RPUSH</code> + <code>BLPOP</code>\uff09\u53ef\u4ee5\u5b9e\u73b0\u7b80\u5355\u7684\u6d88\u606f\u961f\u5217\u6216\u4efb\u52a1\u961f\u5217\u3002\u751f\u4ea7\u8005\u5c06\u6d88\u606f/\u4efb\u52a1\u63a8\u5165\u5217\u8868\uff0c\u6d88\u8d39\u8005\u963b\u585e\u5f0f\u5730\u4ece\u5217\u8868\u4e2d\u62c9\u53d6\u3002</li> <li>Redis 5.0\u5f15\u5165\u7684Streams\u6570\u636e\u7c7b\u578b\u63d0\u4f9b\u4e86\u66f4\u5f3a\u5927\u3001\u66f4\u5b8c\u5584\u7684\u6d88\u606f\u961f\u5217\u529f\u80fd\uff0c\u652f\u6301\u6301\u4e45\u5316\u3001\u6d88\u8d39\u7ec4\u3001\u6d88\u606f\u786e\u8ba4\uff08ACK\uff09\u7b49\u7279\u6027\uff0c\u66f4\u9002\u5408\u6784\u5efa\u590d\u6742\u7684\u6d88\u606f\u7cfb\u7edf\u3002</li> </ul> </li> <li> <p>\u5206\u5e03\u5f0f\u9501\uff08Distributed Locks\uff09\uff1a</p> <ul> <li>\u5728\u5206\u5e03\u5f0f\u73af\u5883\u4e0b\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u5bf9\u5171\u4eab\u8d44\u6e90\u7684\u4e92\u65a5\u8bbf\u95ee\uff0c\u9700\u8981\u4f7f\u7528\u5206\u5e03\u5f0f\u9501\u3002Redis\u7684<code>SETNX</code>\uff08SET if Not eXists\uff09\u547d\u4ee4\u6216\u7ed3\u5408Lua\u811a\u672c\u53ef\u4ee5\u5b9e\u73b0\u7b80\u5355\u7684\u5206\u5e03\u5f0f\u9501\u3002</li> <li>\u66f4\u5b8c\u5584\u7684\u5206\u5e03\u5f0f\u9501\u5b9e\u73b0\uff08\u5982Redlock\u7b97\u6cd5\u6216\u57fa\u4e8e<code>SET key value EX seconds NX</code>\u7684\u5b9e\u73b0\uff09\u9700\u8981\u8003\u8651\u9501\u7684\u8d85\u65f6\u3001\u53ef\u91cd\u5165\u6027\u3001\u9632\u6b62\u8bef\u5220\u9501\u7b49\u95ee\u9898\u3002</li> </ul> </li> <li> <p>\u53d1\u5e03/\u8ba2\u9605\uff08Publish/Subscribe\uff09\uff1a</p> <ul> <li>Redis\u63d0\u4f9b\u4e86<code>PUBLISH</code>, <code>SUBSCRIBE</code>, <code>PSUBSCRIBE</code>\u7b49\u547d\u4ee4\uff0c\u652f\u6301\u53d1\u5e03/\u8ba2\u9605\u6d88\u606f\u6a21\u5f0f\u3002</li> <li>\u5ba2\u6237\u7aef\u53ef\u4ee5\u8ba2\u9605\u4e00\u4e2a\u6216\u591a\u4e2a\u9891\u9053\uff08Channel\uff09\uff0c\u5f53\u6709\u6d88\u606f\u53d1\u5e03\u5230\u8fd9\u4e9b\u9891\u9053\u65f6\uff0c\u6240\u6709\u8ba2\u9605\u8005\u90fd\u4f1a\u6536\u5230\u6d88\u606f\u3002</li> <li>\u9002\u7528\u4e8e\u5b9e\u73b0\u5b9e\u65f6\u6d88\u606f\u901a\u77e5\u3001\u4e8b\u4ef6\u5e7f\u64ad\u7b49\u573a\u666f\u3002\u4f46\u5b83\u4e0d\u662f\u6301\u4e45\u5316\u7684\u6d88\u606f\u7cfb\u7edf\uff0c\u5982\u679c\u8ba2\u9605\u8005\u4e0d\u5728\u7ebf\uff0c\u6d88\u606f\u4f1a\u4e22\u5931\u3002</li> </ul> </li> <li> <p>\u6700\u65b0\u5217\u8868/\u65f6\u95f4\u7ebf\uff08Latest Items / Timelines\uff09\uff1a</p> <ul> <li>\u4f7f\u7528List\u6570\u636e\u7c7b\u578b\uff0c\u901a\u8fc7<code>LPUSH</code>\u5c06\u65b0\u9879\u76ee\u6dfb\u52a0\u5230\u5217\u8868\u5934\u90e8\uff0c\u5e76\u4f7f\u7528<code>LTRIM</code>\u6765\u9650\u5236\u5217\u8868\u7684\u957f\u5ea6\uff0c\u53ef\u4ee5\u8f7b\u677e\u5b9e\u73b0\u201c\u6700\u65b0N\u6761\u8bb0\u5f55\u201d\u7684\u529f\u80fd\uff0c\u5982\u6700\u65b0\u8bc4\u8bba\u3001\u6700\u65b0\u6587\u7ae0\u3001\u7528\u6237\u64cd\u4f5c\u5386\u53f2\u7b49\u3002</li> <li>\u5bf9\u4e8e\u793e\u4ea4\u7f51\u7edc\u4e2d\u7684\u7528\u6237\u65f6\u95f4\u7ebf\uff08Feed\u6d41\uff09\uff0c\u53ef\u4ee5\u4f7f\u7528Sorted Set\uff0c\u5c06\u6d88\u606fID\u6216\u5185\u5bb9\u4f5c\u4e3a\u6210\u5458\uff0c\u65f6\u95f4\u6233\u4f5c\u4e3a\u5206\u6570\uff0c\u6309\u65f6\u95f4\u5012\u5e8f\u6392\u5217\u3002</li> </ul> </li> <li> <p>\u552f\u4e00\u6027\u68c0\u67e5/\u53bb\u91cd\uff08Uniqueness Check / Deduplication\uff09\uff1a</p> <ul> <li>\u4f7f\u7528Set\u6570\u636e\u7c7b\u578b\uff0c\u5176\u6210\u5458\u5177\u6709\u552f\u4e00\u6027\u3002\u53ef\u4ee5\u5c06\u9700\u8981\u68c0\u67e5\u552f\u4e00\u6027\u7684\u5143\u7d20\uff08\u5982\u7528\u6237ID\u3001IP\u5730\u5740\uff09\u6dfb\u52a0\u5230Set\u4e2d\uff0c\u901a\u8fc7<code>SADD</code>\u7684\u8fd4\u56de\u503c\uff081\u8868\u793a\u6dfb\u52a0\u6210\u529f\uff0c0\u8868\u793a\u5df2\u5b58\u5728\uff09\u6216<code>SISMEMBER</code>\u6765\u5224\u65ad\u5143\u7d20\u662f\u5426\u5df2\u5b58\u5728\u3002</li> <li>\u5bf9\u4e8e\u5927\u6570\u636e\u91cf\u7684\u53bb\u91cd\u4f30\u7b97\uff08\u5982\u7edf\u8ba1\u72ec\u7acb\u8bbf\u5ba2UV\uff09\uff0c\u53ef\u4ee5\u4f7f\u7528HyperLogLog\uff0c\u5b83\u80fd\u4ee5\u6781\u5c0f\u7684\u5185\u5b58\u5360\u7528\u4f30\u7b97\u96c6\u5408\u7684\u57fa\u6570\u3002</li> </ul> </li> <li> <p>\u5730\u7406\u7a7a\u95f4\u7d22\u5f15\uff08Geospatial Indexing\uff09\uff1a</p> <ul> <li>Redis\u63d0\u4f9b\u4e86Geo\u6570\u636e\u7c7b\u578b\u548c\u76f8\u5173\u547d\u4ee4\uff08\u5982<code>GEOADD</code>, <code>GEORADIUS</code>, <code>GEODIST</code>\uff09\uff0c\u53ef\u4ee5\u5b58\u50a8\u5730\u7406\u4f4d\u7f6e\u5750\u6807\uff08\u7ecf\u7eac\u5ea6\uff09\uff0c\u5e76\u652f\u6301\u6309\u534a\u5f84\u67e5\u8be2\u9644\u8fd1\u7684\u5730\u70b9\u3001\u8ba1\u7b97\u4e24\u70b9\u95f4\u8ddd\u79bb\u7b49\u3002</li> <li>\u9002\u7528\u4e8e\u5b9e\u73b0\u201c\u9644\u8fd1\u7684\u4eba\u201d\u3001\u201c\u9644\u8fd1\u7684\u5546\u5bb6\u201d\u7b49\u57fa\u4e8e\u4f4d\u7f6e\u7684\u670d\u52a1\uff08LBS\uff09\u3002</li> </ul> </li> <li> <p>\u9891\u7387\u9650\u5236/\u901f\u7387\u9650\u5236\uff08Rate Limiting\uff09\uff1a</p> <ul> <li>\u53ef\u4ee5\u4f7f\u7528Sorted Set\u6216\u8005\u7b80\u5355\u7684\u8ba1\u6570\u5668\u7ed3\u5408\u8fc7\u671f\u65f6\u95f4\u6765\u5b9e\u73b0API\u63a5\u53e3\u7684\u8bbf\u95ee\u9891\u7387\u9650\u5236\uff0c\u9632\u6b62\u6076\u610f\u8bf7\u6c42\u6216\u6ee5\u7528\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E7%9A%84%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%9C%89%E4%BB%80%E4%B9%88/","title":"Redis\u7684\u5e95\u5c42\u6570\u636e\u7ed3\u6784\u6709\u4ec0\u4e48","text":"<p>Redis\u5bf9\u5916\u66b4\u9732\u4e86\u4e94\u79cd\u57fa\u7840\u6570\u636e\u7c7b\u578b\uff1a\u5b57\u7b26\u4e32(string)\u3001\u5217\u8868(list)\u3001\u54c8\u5e0c(hash)\u3001\u96c6\u5408(set)\u548c\u6709\u5e8f\u96c6\u5408(zset)\u3002\u7136\u800c\uff0c\u8fd9\u4e9b\u53ea\u662fRedis\u5728\u903b\u8f91\u5c42\u9762\u7684\u5bf9\u8c61\u7c7b\u578b\u3002\u4e3a\u4e86\u5728\u6027\u80fd\u548c\u7a7a\u95f4\u6548\u7387\u4e4b\u95f4\u53d6\u5f97\u6700\u4f73\u5e73\u8861\uff0cRedis\u4f1a\u6839\u636e\u5177\u4f53\u573a\u666f\u4e3a\u540c\u4e00\u4e2a\u903b\u8f91\u5bf9\u8c61\u9009\u62e9\u4e0d\u540c\u7684\u5185\u90e8\u7f16\u7801\uff0c\u4e5f\u5c31\u662f\u5e95\u5c42\u6570\u636e\u7ed3\u6784\u6765\u5b9e\u73b0\u3002</p> <p>Redis\u7684\u6838\u5fc3\u5e95\u5c42\u6570\u636e\u7ed3\u6784\u4e3b\u8981\u6709\u4ee5\u4e0b\u516d\u79cd\uff1a</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E7%9A%84%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%9C%89%E4%BB%80%E4%B9%88/#1-sds-simple-dynamic-string","title":"1. \u7b80\u5355\u52a8\u6001\u5b57\u7b26\u4e32 (SDS - Simple Dynamic String)","text":"<p>Redis\u5e76\u6ca1\u6709\u76f4\u63a5\u4f7f\u7528C\u8bed\u8a00\u4f20\u7edf\u7684\u4ee5\u7a7a\u5b57\u7b26 <code>\\0</code> \u7ed3\u5c3e\u7684\u5b57\u7b26\u4e32\uff0c\u800c\u662f\u6784\u5efa\u4e86\u540d\u4e3aSDS\u7684\u62bd\u8c61\u7c7b\u578b\u3002\u8fd9\u4e3b\u8981\u662f\u4e3a\u4e86\u89e3\u51b3C\u5b57\u7b26\u4e32\u7684\u4e00\u4e9b\u56fa\u6709\u7f3a\u9677\u3002</p> <p>\u5b9e\u73b0\u65b9\u5f0f\uff1a</p> <p>SDS\u7684\u7ed3\u6784\u5305\u542b\u4e00\u4e2a\u5934\u90e8\uff08header\uff09\u548c\u4e00\u4e2a\u5b9e\u9645\u5b58\u50a8\u6570\u636e\u7684\u5b57\u7b26\u6570\u7ec4\u3002\u5728Redis 6.0\u4e2d\uff0c\u4e3a\u4e86\u8282\u7701\u5185\u5b58\uff0c\u5934\u90e8\u8bbe\u8ba1\u6709\u591a\u79cd\u7c7b\u578b\uff08<code>sdshdr8</code>, <code>sdshdr16</code>, <code>sdshdr32</code>, <code>sdshdr64</code>\uff09\uff0c\u6839\u636e\u5b57\u7b26\u4e32\u957f\u5ea6\u81ea\u52a8\u9009\u62e9\u6700\u5c0f\u7684\u5934\u90e8\u3002</p> <p>\u4e00\u4e2a\u5178\u578b\u7684SDS\u7ed3\u6784\u5982\u4e0b\uff1a</p> <pre><code>struct sdshdr {\n    // \u8bb0\u5f55\u5b57\u7b26\u4e32\u7684\u5b9e\u9645\u957f\u5ea6\n    unsigned int len;\n    // \u8bb0\u5f55\u5b57\u7b26\u6570\u7ec4\u7684\u603b\u5bb9\u91cf\uff08\u4e0d\u5305\u62ec\u5934\u548c\u672b\u5c3e\u7684\\0\uff09\n    unsigned int alloc;\n    // \u5b58\u50a8\u7c7b\u578b\u6807\u5fd7\n    unsigned char flags;\n    // \u5b9e\u9645\u5b58\u50a8\u5b57\u7b26\u4e32\u7684\u67d4\u6027\u6570\u7ec4\n    char buf[];\n};\n</code></pre> <p>\u6838\u5fc3\u4f18\u52bf\u4e0e\u5b9e\u73b0\u539f\u7406\uff1a</p> <ul> <li>\u5e38\u6570\u590d\u6742\u5ea6\u83b7\u53d6\u957f\u5ea6\uff1a\u7531\u4e8e\u5934\u90e8\u76f4\u63a5\u5b58\u50a8\u4e86\u957f\u5ea6 <code>len</code>\uff0c\u83b7\u53d6\u5b57\u7b26\u4e32\u957f\u5ea6\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(1)\uff0c\u907f\u514d\u4e86C\u8bed\u8a00 <code>strlen</code> \u9700\u8981\u904d\u5386\u6574\u4e2a\u5b57\u7b26\u4e32\u7684 O(n) \u64cd\u4f5c\u3002</li> <li>\u675c\u7edd\u7f13\u51b2\u533a\u6ea2\u51fa\uff1a\u5728\u5bf9SDS\u8fdb\u884c\u4fee\u6539\u65f6\uff0cAPI\u4f1a\u5148\u68c0\u67e5 <code>alloc</code> \u8bb0\u5f55\u7684\u5bb9\u91cf\u662f\u5426\u8db3\u591f\u3002\u5982\u679c\u4e0d\u8db3\uff0c\u4f1a\u81ea\u52a8\u8fdb\u884c\u6269\u5bb9\uff0c\u7136\u540e\u518d\u6267\u884c\u4fee\u6539\uff0c\u4ece\u800c\u907f\u514d\u4e86C\u8bed\u8a00\u4e2d <code>strcat</code> \u7b49\u51fd\u6570\u53ef\u80fd\u5bfc\u81f4\u7684\u7f13\u51b2\u533a\u6ea2\u51fa\u95ee\u9898\u3002</li> <li>\u51cf\u5c11\u5185\u5b58\u91cd\u5206\u914d\u6b21\u6570\uff1aSDS\u91c7\u7528\u4e86\u4e24\u79cd\u4f18\u5316\u7b56\u7565\uff1a<ul> <li>\u7a7a\u95f4\u9884\u5206\u914d\uff1a\u5f53\u5bf9SDS\u8fdb\u884c\u6269\u5bb9\u65f6\uff0c\u7a0b\u5e8f\u4e0d\u4ec5\u4f1a\u5206\u914d\u6240\u5fc5\u9700\u7684\u7a7a\u95f4\uff0c\u8fd8\u4f1a\u5206\u914d\u989d\u5916\u7684\u672a\u4f7f\u7528\u7a7a\u95f4\u3002\u5177\u4f53\u7b56\u7565\u662f\uff1a\u5982\u679c\u4fee\u6539\u540eSDS\u7684\u957f\u5ea6\u5c0f\u4e8e1MB\uff0c\u5219\u5206\u914d\u4e0e<code>len</code>\u76f8\u540c\u5927\u5c0f\u7684\u989d\u5916\u7a7a\u95f4\uff1b\u5982\u679c\u8d85\u8fc71MB\uff0c\u5219\u989d\u5916\u5206\u914d1MB\u3002\u8fd9\u5927\u5927\u51cf\u5c11\u4e86\u8fde\u7eed\u589e\u957f\u5b57\u7b26\u4e32\u65f6\u5185\u5b58\u91cd\u5206\u914d\u7684\u6b21\u6570\u3002</li> <li>\u60f0\u6027\u7a7a\u95f4\u91ca\u653e\uff1a\u5f53\u7f29\u77edSDS\u5b57\u7b26\u4e32\u65f6\uff0c\u591a\u51fa\u6765\u7684\u7a7a\u95f4\u5e76\u4e0d\u4f1a\u7acb\u5373\u88ab\u56de\u6536\uff0c\u800c\u662f\u901a\u8fc7\u66f4\u65b0 <code>len</code> \u7684\u503c\u6765\u8bb0\u5f55\uff0c\u7b49\u5f85\u672a\u6765\u4f7f\u7528\u3002</li> </ul> </li> <li>\u4e8c\u8fdb\u5236\u5b89\u5168\uff1aSDS\u901a\u8fc7 <code>len</code> \u5c5e\u6027\u6765\u5224\u65ad\u5b57\u7b26\u4e32\u662f\u5426\u7ed3\u675f\uff0c\u800c\u4e0d\u662f <code>\\0</code> \u5b57\u7b26\u3002\u56e0\u6b64\uff0c<code>buf</code> \u6570\u7ec4\u4e2d\u53ef\u4ee5\u5305\u542b\u4efb\u610f\u4e8c\u8fdb\u5236\u6570\u636e\uff08\u5305\u62ec <code>\\0</code>\uff09\uff0c\u4e0d\u4f1a\u51fa\u73b0\u6570\u636e\u88ab\u622a\u65ad\u7684\u95ee\u9898\u3002</li> <li>\u517c\u5bb9\u90e8\u5206C\u5b57\u7b26\u4e32\u51fd\u6570\uff1a\u5c3d\u7ba1\u662f\u4e8c\u8fdb\u5236\u5b89\u5168\u7684\uff0cSDS\u4f9d\u7136\u9075\u5faa\u60ef\u4f8b\u5728\u5b57\u7b26\u4e32\u672b\u5c3e\u8ffd\u52a0\u4e00\u4e2a <code>\\0</code> \u5b57\u7b26\uff0c\u8fd9\u4f7f\u5f97\u5b83\u53ef\u4ee5\u5b89\u5168\u5730\u91cd\u7528\u4e00\u90e8\u5206C\u8bed\u8a00 <code>&lt;string.h&gt;</code> \u5e93\u4e2d\u7684\u51fd\u6570\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E7%9A%84%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%9C%89%E4%BB%80%E4%B9%88/#2-ziplist","title":"2. \u538b\u7f29\u5217\u8868 (ZipList)","text":"<p>ZipList\u662f\u4e00\u79cd\u4e3a\u4e86\u6781\u81f4\u5730\u8282\u7701\u5185\u5b58\u800c\u8bbe\u8ba1\u7684\u7279\u6b8a\u7f16\u7801\u7684\u53cc\u5411\u94fe\u8868\u3002\u5b83\u53ef\u4ee5\u5b58\u50a8\u5b57\u7b26\u4e32\u6216\u6574\u6570\u3002</p> <p>\u5b9e\u73b0\u65b9\u5f0f\uff1a</p> <p>ZipList\u662f\u4e00\u5757\u8fde\u7eed\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u5176\u5185\u90e8\u7ed3\u6784\u7d27\u51d1\u3002</p> <ul> <li><code>zlbytes</code> (4\u5b57\u8282): \u8bb0\u5f55\u6574\u4e2aZipList\u5360\u7528\u7684\u603b\u5b57\u8282\u6570\u3002</li> <li><code>zltail</code> (4\u5b57\u8282): \u8bb0\u5f55\u5230\u6700\u540e\u4e00\u4e2a\u8282\u70b9\u7684\u504f\u79fb\u91cf\uff0c\u7528\u4e8e\u5feb\u901f\u5b9a\u4f4d\u8868\u5c3e\uff0c\u5b9e\u73b0O(1)\u590d\u6742\u5ea6\u7684pop\u64cd\u4f5c\u3002</li> <li><code>zllen</code> (2\u5b57\u8282): \u8bb0\u5f55\u8282\u70b9\uff08entry\uff09\u7684\u6570\u91cf\u3002\u5f53\u8282\u70b9\u6570\u8d85\u8fc765535\u65f6\uff0c\u9700\u8981\u904d\u5386\u624d\u80fd\u5f97\u5230\u771f\u5b9e\u6570\u91cf\u3002</li> <li><code>entry</code> (\u4e0d\u5b9a\u957f): \u5b58\u50a8\u6570\u636e\u8282\u70b9\u3002</li> <li><code>zlend</code> (1\u5b57\u8282): \u7279\u6b8a\u7684\u7ed3\u675f\u6807\u8bb0\uff0c\u503c\u4e3a <code>0xFF</code>\u3002</li> </ul> <p>Entry\u7ed3\u6784\u662fZipList\u8282\u7701\u5185\u5b58\u7684\u5173\u952e\uff1a</p> <p>\u6bcf\u4e2aEntry\u7531\u4e09\u90e8\u5206\u6784\u6210\uff1a<code>&lt;prevlen&gt;&lt;encoding&gt;&lt;entry-data&gt;</code></p> <ul> <li><code>prevlen</code>: \u8bb0\u5f55\u524d\u4e00\u4e2a\u8282\u70b9\u7684\u957f\u5ea6\u3002\u4e3a\u4e86\u8282\u7701\u7a7a\u95f4\uff0c\u5b83\u7684\u957f\u5ea6\u662f\u53ef\u53d8\u7684\uff1a\u5982\u679c\u524d\u4e00\u4e2a\u8282\u70b9\u957f\u5ea6\u5c0f\u4e8e254\u5b57\u8282\uff0c<code>prevlen</code> \u5c31\u75281\u4e2a\u5b57\u8282\u8868\u793a\uff1b\u5426\u5219\uff0c\u5b83\u4f1a\u75285\u4e2a\u5b57\u8282\u6765\u8868\u793a\u3002</li> <li><code>encoding</code>: \u8bb0\u5f55\u4e86 <code>entry-data</code> \u7684\u7c7b\u578b\u548c\u957f\u5ea6\u3002\u5b83\u7684\u7f16\u7801\u65b9\u5f0f\u975e\u5e38\u590d\u6742\uff0c\u4f1a\u6839\u636e\u5b58\u50a8\u7684\u662f\u6574\u6570\u8fd8\u662f\u5b57\u7b26\u4e32\uff0c\u4ee5\u53ca\u6570\u636e\u7684\u5927\u5c0f\uff0c\u91c7\u7528\u4e0d\u540c\u957f\u5ea6\u548c\u5185\u5bb9\u7684\u7f16\u7801\uff0c\u4ee5\u6c42\u4f7f\u7528\u6700\u5c11\u7684\u7a7a\u95f4\u6765\u8868\u793a\u6570\u636e\u3002</li> <li><code>entry-data</code>: \u5b9e\u9645\u5b58\u50a8\u7684\u6570\u636e\uff0c\u53ef\u4ee5\u662f\u6574\u6570\u6216\u5b57\u7b26\u4e32\u3002</li> </ul> <p>\u6838\u5fc3\u4f18\u52bf\u4e0e\u7f3a\u70b9\uff1a</p> <ul> <li>\u4f18\u70b9\uff1a\u901a\u8fc7\u53ef\u53d8\u957f\u5ea6\u7f16\u7801\uff0c\u6781\u5927\u5730\u51cf\u5c11\u4e86\u5197\u4f59\u7684\u5143\u6570\u636e\u7a7a\u95f4\uff0c\u975e\u5e38\u8282\u7701\u5185\u5b58\u3002</li> <li>\u7f3a\u70b9\uff1a<ul> <li>\u6bcf\u6b21\u5199\u5165\u64cd\u4f5c\uff08\u589e\u5220\uff09\u90fd\u9700\u8981\u5bf9\u6574\u5757\u5185\u5b58\u8fdb\u884c\u91cd\u5206\u914d\uff0c\u6027\u80fd\u5f00\u9500\u4e0eziplist\u957f\u5ea6\u6210\u6b63\u6bd4\u3002</li> <li>\u5b58\u5728\u8fde\u9501\u66f4\u65b0\u7684\u98ce\u9669\uff1a\u5982\u679c\u4e00\u4e2a\u8282\u70b9\u7684\u957f\u5ea6\u53d1\u751f\u53d8\u5316\uff08\u4f8b\u5982\u4ece\u5c0f\u4e8e254\u5b57\u8282\u53d8\u4e3a\u5927\u4e8e\u7b49\u4e8e254\u5b57\u8282\uff09\uff0c\u5176<code>prevlen</code>\u7684\u7f16\u7801\u9700\u8981\u4ece1\u5b57\u8282\u53d8\u4e3a5\u5b57\u8282\u3002\u8fd9\u53ef\u80fd\u5bfc\u81f4\u540e\u7eed\u8282\u70b9\u7684\u8d77\u59cb\u4f4d\u7f6e\u6539\u53d8\uff0c\u4ece\u800c\u50cf\u591a\u7c73\u8bfa\u9aa8\u724c\u4e00\u6837\uff0c\u5f15\u53d1\u540e\u7eed\u6240\u6709\u8282\u70b9\u7684<code>prevlen</code>\u90fd\u9700\u8981\u66f4\u65b0\uff0c\u8fd9\u662f\u4e00\u4e2aO(N)\u7ea7\u522b\u7684\u64cd\u4f5c\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E7%9A%84%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%9C%89%E4%BB%80%E4%B9%88/#3-quicklist","title":"3. \u5feb\u8868 (QuickList)","text":"<p>\u4e3a\u4e86\u5e73\u8861 <code>linkedlist</code> (\u53cc\u5411\u94fe\u8868) \u548c <code>ziplist</code> \u7684\u4f18\u7f3a\u70b9\uff0cRedis 3.2 \u7248\u672c\u4e4b\u540e\u5f15\u5165\u4e86QuickList\u4f5c\u4e3a\u5217\u8868\u5bf9\u8c61\u7684\u5e95\u5c42\u5b9e\u73b0\u3002</p> <p>\u5b9e\u73b0\u65b9\u5f0f\uff1a</p> <p>QuickList \u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u53cc\u5411\u94fe\u8868\uff0c\u4f46\u5b83\u7684\u6bcf\u4e2a\u8282\u70b9\uff08<code>quicklistNode</code>\uff09\u4e0d\u518d\u662f\u53ea\u5b58\u50a8\u4e00\u4e2a\u6570\u636e\uff0c\u800c\u662f\u5185\u5d4c\u4e86\u4e00\u4e2a <code>ziplist</code>\u3002</p> <ul> <li><code>quicklist</code> \u7ed3\u6784: \u5b8f\u89c2\u4e0a\u662f\u4e00\u4e2a\u53cc\u5411\u94fe\u8868\uff0c\u5305\u542b\u5934\u5c3e\u6307\u9488 (<code>head</code>, <code>tail</code>)\u3001\u8282\u70b9\u603b\u6570 (<code>len</code>) \u548c\u6240\u6709 <code>ziplist</code> \u4e2d\u5143\u7d20\u603b\u6570 (<code>count</code>) \u7b49\u4fe1\u606f\u3002</li> <li><code>quicklistNode</code> \u7ed3\u6784: \u4f5c\u4e3a\u94fe\u8868\u8282\u70b9\uff0c\u5b83\u5305\u542b\u6307\u5411\u524d\u540e\u8282\u70b9\u7684\u6307\u9488 (<code>prev</code>, <code>next</code>)\uff0c\u4ee5\u53ca\u4e00\u4e2a\u6307\u5411 <code>ziplist</code> \u7684\u6307\u9488 (<code>zl</code>)\u3002</li> <li>\u53ef\u914d\u7f6e\u7684\u538b\u7f29: <code>quicklist</code> \u8fd8\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u5bf9 <code>ziplist</code> \u8fdb\u884cLZF\u7b97\u6cd5\u538b\u7f29\uff0c\u4ee5\u8fdb\u4e00\u6b65\u8282\u7701\u7a7a\u95f4\u3002\u53ef\u4ee5\u8bbe\u7f6e\u94fe\u8868\u4e24\u7aef\u6709\u591a\u5c11\u4e2a\u8282\u70b9\u4e0d\u88ab\u538b\u7f29\uff0c\u4ee5\u52a0\u5feb\u4e24\u7aef\u6570\u636e\u7684\u8bbf\u95ee\u901f\u5ea6\u3002</li> </ul> <p>\u6838\u5fc3\u4f18\u52bf\uff1a</p> <p>QuickList\u662f\u7a7a\u95f4\u548c\u65f6\u95f4\u7684\u5b8c\u7f8e\u5e73\u8861\u3002\u5b83\u5c06\u5927\u7684\u5217\u8868\u5206\u5272\u6210\u5c0f\u7684 <code>ziplist</code>\uff0c\u907f\u514d\u4e86\u5355\u4e2a <code>ziplist</code> \u8fc7\u5927\u5bfc\u81f4\u7684\u6027\u80fd\u95ee\u9898\uff0c\u540c\u65f6\u4e5f\u6bd4\u666e\u901a\u7684\u94fe\u8868\uff08\u6bcf\u4e2a\u8282\u70b9\u90fd\u6709\u72ec\u7acb\u7684\u6307\u9488\uff09\u5927\u5927\u8282\u7701\u4e86\u5185\u5b58\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E7%9A%84%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%9C%89%E4%BB%80%E4%B9%88/#4-dict","title":"4. \u5b57\u5178/\u54c8\u5e0c\u8868 (Dict)","text":"<p>\u5b57\u5178\u662fRedis\u54c8\u5e0c\uff08hash\uff09\u7c7b\u578b\u548c\u6570\u636e\u5e93\u672c\u8eab\uff08\u5b58\u50a8\u6240\u6709\u952e\u503c\u5bf9\uff09\u7684\u5e95\u5c42\u5b9e\u73b0\u3002</p> <p>\u5b9e\u73b0\u65b9\u5f0f\uff1a</p> <p>Redis\u7684\u5b57\u5178\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u54c8\u5e0c\u8868\uff0c\u5176\u5b9e\u73b0\u6d89\u53ca\u51e0\u4e2a\u5173\u952e\u7ed3\u6784\uff1a</p> <ul> <li><code>dictEntry</code>: \u5b58\u50a8\u5355\u4e2a\u952e\u503c\u5bf9\u3002\u5305\u542b\u4e00\u4e2a\u6307\u5411\u952e\u7684\u6307\u9488 <code>*key</code>\uff0c\u4e00\u4e2a\u5b58\u50a8\u503c\u7684\u8054\u5408\u4f53 <code>v</code>\uff0c\u4ee5\u53ca\u4e00\u4e2a\u6307\u5411\u4e0b\u4e00\u4e2a\u8282\u70b9\u7684\u6307\u9488 <code>*next</code>\u3002</li> <li><code>dictht</code>: \u8fd9\u662f\u54c8\u5e0c\u8868\u7684\u5b9a\u4e49\uff0c\u5305\u542b\u4e00\u4e2a <code>dictEntry</code> \u6307\u9488\u6570\u7ec4 <code>table</code>\uff0c\u4ee5\u53ca <code>size</code>\u3001<code>sizemask</code> \u548c <code>used</code> (\u5df2\u7528\u8282\u70b9\u6570) \u7b49\u4fe1\u606f\u3002</li> <li><code>dict</code>: \u9876\u5c42\u7ed3\u6784\uff0c\u5305\u542b\u4e24\u4e2a <code>dictht</code> \u54c8\u5e0c\u8868\uff08<code>ht[0]</code> \u548c <code>ht[1]</code>\uff09\u548c\u4e00\u4e2a <code>rehashidx</code> \u53d8\u91cf\u3002</li> </ul> <p>\u6838\u5fc3\u673a\u5236\uff1a</p> <ul> <li>\u89e3\u51b3\u54c8\u5e0c\u51b2\u7a81\uff1a\u91c7\u7528\u94fe\u5730\u5740\u6cd5\u3002<code>dictEntry</code> \u4e2d\u7684 <code>*next</code> \u6307\u9488\u4f1a\u5c06\u54c8\u5e0c\u503c\u76f8\u540c\u7684\u591a\u4e2a\u952e\u503c\u5bf9\u94fe\u63a5\u6210\u4e00\u4e2a\u5355\u5411\u94fe\u8868\u3002</li> <li>\u6269\u5bb9\u4e0e\u6536\u7f29 (rehash)\uff1a\u5f53\u54c8\u5e0c\u8868\u9700\u8981\u6269\u5bb9\u6216\u7f29\u5bb9\u65f6\uff0cRedis\u4e0d\u4f1a\u4e00\u6b21\u6027\u5b8c\u6210\u6240\u6709\u952e\u7684\u8fc1\u79fb\u3002\u4e3a\u4e86\u907f\u514d\u670d\u52a1\u963b\u585e\uff0c\u5b83\u91c7\u7528\u4e86\u6e10\u8fdb\u5f0frehash\uff1a<ol> <li>\u4e3a\u5b57\u5178\u7684 <code>ht[1]</code> \u5206\u914d\u4e00\u4e2a\u65b0\u7684\u3001\u66f4\u5927\u7684\uff08\u6216\u66f4\u5c0f\u7684\uff09\u54c8\u5e0c\u8868\u7a7a\u95f4\u3002</li> <li><code>rehashidx</code> \u88ab\u8bbe\u7f6e\u4e3a0\uff0c\u8868\u793arehash\u5f00\u59cb\u3002</li> <li>\u5728\u6bcf\u6b21\u5bf9\u5b57\u5178\u8fdb\u884c\u589e\u3001\u5220\u3001\u67e5\u3001\u6539\u64cd\u4f5c\u65f6\uff0c\u9664\u4e86\u6267\u884c\u6307\u5b9a\u7684\u64cd\u4f5c\u5916\uff0c\u8fd8\u4f1a\u201c\u987a\u4fbf\u201d\u5c06 <code>ht[0]</code> \u4e2d <code>rehashidx</code> \u7d22\u5f15\u4f4d\u7f6e\u4e0a\u7684\u6240\u6709\u952e\u503c\u5bf9\u8fc1\u79fb\u5230 <code>ht[1]</code> \u4e2d\uff0c\u7136\u540e <code>rehashidx</code> \u52a0\u4e00\u3002</li> <li>\u8fd9\u4e2a\u8fc7\u7a0b\u4f1a\u6301\u7eed\u8fdb\u884c\uff0c\u76f4\u5230 <code>ht[0]</code> \u7684\u6240\u6709\u6570\u636e\u90fd\u8fc1\u79fb\u5b8c\u6210\uff0c\u6b64\u65f6 <code>ht[1]</code> \u4f1a\u53d6\u4ee3 <code>ht[0]</code>\uff0c\u6210\u4e3a\u65b0\u7684\u4e3b\u54c8\u5e0c\u8868\u3002</li> </ol> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E7%9A%84%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%9C%89%E4%BB%80%E4%B9%88/#5-intset","title":"5. \u6574\u6570\u96c6 (IntSet)","text":"<p>\u6574\u6570\u96c6\u662f\u96c6\u5408\uff08set\uff09\u7c7b\u578b\u5728\u7279\u5b9a\u60c5\u51b5\u4e0b\u7684\u5e95\u5c42\u5b9e\u73b0\u4e4b\u4e00\u3002\u5f53\u4e00\u4e2a\u96c6\u5408\u53ea\u5305\u542b\u6574\u6570\u503c\u5143\u7d20\uff0c\u5e76\u4e14\u5143\u7d20\u6570\u91cf\u4e0d\u591a\u65f6\uff0cRedis\u4f1a\u91c7\u7528IntSet\u3002</p> <p>\u5b9e\u73b0\u65b9\u5f0f\uff1a</p> <p>IntSet\u662f\u4e00\u5757\u8fde\u7eed\u7684\u5185\u5b58\u533a\u57df\uff0c\u5176\u7ed3\u6784\u5b9a\u4e49\u5982\u4e0b\uff1a</p> <pre><code>typedef struct intset {\n    // \u7f16\u7801\u65b9\u5f0f\uff0c\u51b3\u5b9a\u4e86contents\u6570\u7ec4\u4e2d\u6bcf\u4e2a\u5143\u7d20\u7684\u6574\u6570\u7c7b\u578b\n    uint32_t encoding;\n    // \u96c6\u5408\u4e2d\u5143\u7d20\u7684\u6570\u91cf\n    uint32_t length;\n    // \u5b58\u50a8\u5143\u7d20\u7684\u6709\u5e8f\u6570\u7ec4\n    int8_t contents[];\n} intset;\n</code></pre> <ul> <li><code>encoding</code>: \u53ef\u4ee5\u662f <code>INTSET_ENC_INT16</code>, <code>INTSET_ENC_INT32</code>, \u6216 <code>INTSET_ENC_INT64</code>\uff0c\u8868\u793a <code>contents</code> \u6570\u7ec4\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u662f16\u4f4d\u300132\u4f4d\u8fd8\u662f64\u4f4d\u7684\u6574\u6570\u3002</li> <li><code>contents</code>: \u662f\u4e00\u4e2a\u6709\u5e8f\u7684\u6574\u6570\u6570\u7ec4\uff0c\u4e0d\u5305\u542b\u91cd\u590d\u9879\u3002\u67e5\u627e\u64cd\u4f5c\u53ef\u4ee5\u901a\u8fc7\u4e8c\u5206\u67e5\u627e\u5b9e\u73b0\u3002</li> </ul> <p>\u6838\u5fc3\u673a\u5236\uff1a\u5347\u7ea7\uff08Upgrade\uff09</p> <p>\u5f53\u5411\u4e00\u4e2aIntSet\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u65b0\u5143\u7d20\uff0c\u800c\u8fd9\u4e2a\u65b0\u5143\u7d20\u7684\u7c7b\u578b\u6bd4\u5f53\u524d <code>encoding</code> \u6240\u8868\u793a\u7684\u7c7b\u578b\u8981\u5927\u65f6\uff08\u4f8b\u5982\uff0c\u5411\u4e00\u4e2a<code>INTSET_ENC_INT16</code>\u7684\u96c6\u5408\u4e2d\u6dfb\u52a0\u4e00\u4e2a32\u4f4d\u6574\u6570\uff09\uff0cIntSet\u4f1a\u8fdb\u884c\u5347\u7ea7\uff1a 1.  \u6839\u636e\u65b0\u7c7b\u578b\u6269\u5c55\u5e95\u5c42\u6570\u7ec4\u7684\u7a7a\u95f4\u3002 2.  \u5c06\u6570\u7ec4\u4e2d\u6240\u6709\u73b0\u6709\u5143\u7d20\u8f6c\u6362\u4e3a\u65b0\u7684\u3001\u66f4\u5927\u7684\u7c7b\u578b\u3002 3.  \u5c06\u65b0\u5143\u7d20\u6dfb\u52a0\u8fdb\u53bb\uff0c\u5e76\u4fdd\u6301\u6570\u7ec4\u7684\u6709\u5e8f\u6027\u3002 4.  \u66f4\u65b0 <code>encoding</code> \u548c <code>length</code> \u5c5e\u6027\u3002</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cIntSet\u53ea\u652f\u6301\u5347\u7ea7\uff0c\u4e0d\u652f\u6301\u964d\u7ea7\u3002\u5373\u4f7f\u79fb\u9664\u4e86\u5927\u7c7b\u578b\u7684\u6574\u6570\uff0c<code>encoding</code> \u4e5f\u4e0d\u4f1a\u53d8\u56de\u53bb\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E7%9A%84%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%9C%89%E4%BB%80%E4%B9%88/#6-zskiplist","title":"6. \u8df3\u8868 (ZSkipList)","text":"<p>\u8df3\u8868\u662f\u6709\u5e8f\u96c6\u5408\uff08zset\uff09\u7684\u5e95\u5c42\u5b9e\u73b0\u4e4b\u4e00\u3002\u5b83\u662f\u4e00\u79cd\u901a\u8fc7\u589e\u52a0\u591a\u7ea7\u7d22\u5f15\u6765\u63d0\u9ad8\u67e5\u8be2\u6548\u7387\u7684\u94fe\u8868\u7ed3\u6784\u3002</p> <p>\u5b9e\u73b0\u65b9\u5f0f\uff1a</p> <p>Redis\u7684\u8df3\u8868\u5b9e\u73b0\u5305\u542b\u4e24\u4e2a\u4e3b\u8981\u7ed3\u6784\uff1a</p> <ul> <li><code>zskiplistNode</code>: \u8df3\u8868\u8282\u70b9\u3002<ul> <li><code>ele</code>: \u5b58\u50a8\u7684\u6210\u5458\u5bf9\u8c61\uff08\u4e00\u4e2asds\uff09\u3002</li> <li><code>score</code>: \u6210\u5458\u7684\u5206\u6570\uff0c\u7528\u4e8e\u6392\u5e8f\u3002</li> <li><code>backward</code>: \u6307\u5411\u524d\u4e00\u4e2a\u8282\u70b9\u7684\u6307\u9488\uff0c\u4f7f\u5176\u6210\u4e3a\u53cc\u5411\u94fe\u8868\u3002</li> <li><code>level[]</code>: \u67d4\u6027\u6570\u7ec4\uff0c\u5305\u542b\u4e86\u8be5\u8282\u70b9\u5728\u4e0d\u540c\u5c42\u7ea7\u7684\u6307\u9488\u3002\u6bcf\u4e2a <code>level</code> \u7ed3\u6784\u5305\u542b\uff1a<ul> <li><code>forward</code>: \u6307\u5411\u540c\u4e00\u5c42\u7ea7\u4e0b\u4e00\u4e2a\u8282\u70b9\u7684\u6307\u9488\u3002</li> <li><code>span</code>: <code>forward</code> \u6307\u9488\u8de8\u8d8a\u4e86\u591a\u5c11\u4e2a\u8282\u70b9\u3002</li> </ul> </li> </ul> </li> <li><code>zskiplist</code>: \u8df3\u8868\u672c\u8eab\u3002\u5305\u542b\u5934\u5c3e\u8282\u70b9\u6307\u9488\u3001\u957f\u5ea6\u548c\u5f53\u524d\u6700\u5927\u5c42\u6570\u7b49\u4fe1\u606f\u3002</li> </ul> <p>\u6838\u5fc3\u4f18\u52bf\u4e0e\u9009\u62e9\u539f\u56e0\uff1a</p> <ul> <li>\u9ad8\u6548\u7684\u67e5\u627e\u3001\u63d2\u5165\u548c\u5220\u9664\uff1a\u8df3\u8868\u7684\u589e\u5220\u6539\u67e5\u64cd\u4f5c\u7684\u5e73\u5747\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(log N)\uff0c\u4e0e\u5e73\u8861\u6811\u76f8\u5f53\u3002</li> <li>\u8303\u56f4\u67e5\u8be2\u66f4\u7b80\u5355\uff1a\u5728\u6267\u884c\u8303\u56f4\u67e5\u8be2\uff08\u5982ZRAANGE\u547d\u4ee4\uff09\u65f6\uff0c\u8df3\u8868\u6bd4\u5e73\u8861\u6811\u7684\u5b9e\u73b0\u66f4\u7b80\u5355\u3002\u627e\u5230\u8303\u56f4\u8d77\u70b9\u540e\uff0c\u53ea\u9700\u5728\u5e95\u5c42\u94fe\u8868\u4e0a\u987a\u5e8f\u904d\u5386\u5373\u53ef\u3002</li> <li>\u5b9e\u73b0\u7b80\u5355\uff1a\u76f8\u5bf9\u4e8e\u7ea2\u9ed1\u6811\u7b49\u5e73\u8861\u6811\uff0c\u8df3\u8868\u7684\u4ee3\u7801\u5b9e\u73b0\u548c\u8c03\u8bd5\u66f4\u4e3a\u7b80\u5355\u6e05\u6670\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E7%9A%84%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%9C%89%E4%BB%80%E4%B9%88/#_1","title":"\u5404\u6570\u636e\u7c7b\u578b\u7f16\u7801","text":"<p>Redis\u8bbe\u8ba1\u4e86\u4e00\u5957\u201c\u667a\u80fd\u201d\u7684\u7f16\u7801\u8f6c\u6362\u673a\u5236\uff1a</p> <ul> <li> <p>\u521d\u59cb\u9636\u6bb5\uff1a\u5f53\u6570\u636e\u91cf\u8f83\u5c0f\u65f6\uff0c\u4f18\u5148\u4f7f\u7528\u7d27\u51d1\u3001\u8fde\u7eed\u5185\u5b58\u7684\u7ed3\u6784\uff08\u5982\u00a0ziplist,\u00a0intset\uff09\uff0c\u5b83\u4eec\u5185\u5b58\u5f00\u9500\u6781\u5c0f\u3002</p> </li> <li> <p>\u6210\u957f\u9636\u6bb5\uff1a\u5f53\u6570\u636e\u91cf\u589e\u957f\uff0c\u8d85\u8fc7\u9884\u8bbe\u7684\u9608\u503c\u65f6\uff0c\u7d27\u51d1\u7ed3\u6784\u7684\u6027\u80fd\u4f1a\u4e0b\u964d\uff08\u4f8b\u5982\uff0c\u5728ziplist\u4e2d\u67e5\u627e\u5143\u7d20\u9700\u8981\u904d\u5386\uff09\uff0c\u6b64\u65f6Redis\u4f1a\u81ea\u52a8\u5c06\u5176\u8f6c\u6362\u4e3a\u66f4\u6807\u51c6\u3001\u66f4\u9002\u5408\u5927\u89c4\u6a21\u6570\u636e\u7684\u7ed3\u6784\uff08\u5982\u00a0hashtable,\u00a0skiplist\uff09\u3002</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E7%9A%84%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%9C%89%E4%BB%80%E4%B9%88/#1-string","title":"1. String (\u5b57\u7b26\u4e32)","text":"<ul> <li> <p>int: \u8fd9\u662f\u6700\u4f18\u5316\u7684\u7f16\u7801\u3002\u5f53\u60a8\u5b58\u5165\u7684\u5b57\u7b26\u4e32\u53ef\u4ee5\u88ab\u89e3\u6790\u4e3a\u4e00\u4e2a64\u4f4d\u6709\u7b26\u53f7\u6574\u6570\u65f6\uff0cRedis\u4f1a\u76f4\u63a5\u5c06\u5176\u5b58\u50a8\u4e3a\u6574\u6570\u7c7b\u578b\uff0c\u800c\u4e0d\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u5bf9\u8c61\u3002\u8fd9\u6781\u5927\u5730\u8282\u7701\u4e86\u5185\u5b58\u3002</p> <ul> <li>\u89e6\u53d1\u6761\u4ef6:\u00a0SET mykey 12345</li> </ul> </li> <li> <p>embstr\u00a0(Embedded String): \u7528\u4e8e\u5b58\u50a8\u77ed\u5b57\u7b26\u4e32\u3002\u5b83\u7684\u7279\u70b9\u662f\u5c06Redis\u5bf9\u8c61\u5934\uff08redisObject\uff09\u548cSDS\u5b57\u7b26\u4e32\u4f53\uff08sdshdr\uff09\u5206\u914d\u5728\u4e00\u5757\u8fde\u7eed\u7684\u5185\u5b58\u4e2d\u3002\u8fd9\u6837\u505a\u7684\u597d\u5904\u662f\uff1a1) \u5185\u5b58\u5206\u914d/\u91ca\u653e\u53ea\u9700\u8981\u4e00\u6b21\u8c03\u7528\uff1b2) \u6570\u636e\u5728\u5185\u5b58\u4e2d\u662f\u8fde\u7eed\u7684\uff0c\u80fd\u66f4\u597d\u5730\u5229\u7528CPU\u7f13\u5b58\uff08\u7f13\u5b58\u5c40\u90e8\u6027\uff09\u3002</p> <ul> <li>\u89e6\u53d1\u6761\u4ef6: \u5b58\u50a8\u957f\u5ea6\u8f83\u77ed\u7684\u5b57\u7b26\u4e32\uff08\u4f8b\u5982\uff0c\u5728Redis 6.x\u4e2d\u957f\u5ea6\u5c0f\u4e8e\u7b49\u4e8e44\u5b57\u8282\uff09\u3002</li> </ul> </li> <li> <p>raw: \u7528\u4e8e\u5b58\u50a8\u957f\u5b57\u7b26\u4e32\u3002\u6b64\u65f6\uff0cRedis\u5bf9\u8c61\u5934\u548cSDS\u5b57\u7b26\u4e32\u4f53\u662f\u5206\u5f00\u5206\u914d\u5185\u5b58\u7684\u3002\u8fd9\u662f\u6700\u901a\u7528\u7684\u5b57\u7b26\u4e32\u7f16\u7801\u3002</p> <ul> <li>\u89e6\u53d1\u6761\u4ef6: \u5b57\u7b26\u4e32\u957f\u5ea6\u8d85\u8fc7\u00a0embstr\u00a0\u7684\u9608\u503c\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E7%9A%84%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%9C%89%E4%BB%80%E4%B9%88/#2-list","title":"2. List (\u5217\u8868)","text":"<ul> <li> <p>quicklist: \u8fd9\u662fRedis 3.2\u7248\u672c\u540e\u5217\u8868\u7684\u552f\u4e00\u7f16\u7801\u3002\u5b83\u662f\u4e00\u4e2a\u53cc\u5411\u94fe\u8868\uff0c\u4f46\u6bcf\u4e2a\u94fe\u8868\u8282\u70b9\uff08quicklistNode\uff09\u672c\u8eab\u53c8\u662f\u4e00\u4e2aziplist\u3002</p> <ul> <li>\u8bbe\u8ba1\u76ee\u7684: \u5b8c\u7f8e\u5730\u7ed3\u5408\u4e86ziplist\uff08\u7701\u5185\u5b58\uff09\u548clinkedlist\uff08\u63d2\u5165\u5220\u9664\u5feb\uff09\u7684\u4f18\u70b9\u3002\u5b83\u5c06\u4e00\u4e2a\u5927\u5217\u8868\u5207\u5206\u6210\u591a\u4e2a\u5c0f\u7684ziplist\uff0c\u907f\u514d\u4e86\u5355\u4e2aziplist\u8fc7\u5927\u65f6\u63d2\u5165/\u5220\u9664\u64cd\u4f5c\u53ef\u80fd\u5bfc\u81f4\u7684\u201c\u8fde\u9501\u66f4\u65b0\u201d\u6027\u80fd\u95ee\u9898\uff0c\u540c\u65f6\u4e5f\u6bd4\u4e3a\u6bcf\u4e2a\u5143\u7d20\u90fd\u521b\u5efa\u72ec\u7acb\u8282\u70b9\u7684linkedlist\u8282\u7701\u4e86\u5927\u91cf\u7684\u6307\u9488\u5185\u5b58\u5f00\u9500\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E7%9A%84%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%9C%89%E4%BB%80%E4%B9%88/#3-hash","title":"3. Hash (\u54c8\u5e0c)","text":"<ul> <li> <p>ziplist: \u5f53\u54c8\u5e0c\u7ed3\u6784\u4e2d\u5b58\u50a8\u7684\u952e\u503c\u5bf9\u6570\u91cf\u5f88\u5c11\uff0c\u5e76\u4e14\u6bcf\u4e2a\u952e\u548c\u503c\u7684\u957f\u5ea6\u90fd\u5f88\u77ed\u65f6\uff0cRedis\u4f1a\u4f7f\u7528ziplist\u6765\u5b58\u50a8\u3002\u5b83\u4f1a\u5c06\u952e\u548c\u503c\u4ea4\u9519\u5730\u5b58\u653e\u5728\u4e00\u4e2a\u8fde\u7eed\u7684\u5185\u5b58\u5757\u4e2d\uff08\u4f8b\u5982\uff1a[key1, value1, key2, value2, ...]\uff09\uff0c\u5185\u5b58\u5229\u7528\u7387\u6781\u9ad8\u3002</p> <ul> <li>\u8f6c\u6362\u6761\u4ef6: \u5f53\u952e\u503c\u5bf9\u6570\u91cf\u8d85\u8fc7\u00a0hash-max-ziplist-entries\u00a0\u6216\u4efb\u4e00\u952e/\u503c\u7684\u957f\u5ea6\u8d85\u8fc7\u00a0hash-max-ziplist-value\uff08\u8fd9\u4e24\u4e2a\u503c\u53ef\u5728redis.conf\u4e2d\u914d\u7f6e\uff09\u65f6\uff0c\u4f1a\u89e6\u53d1\u8f6c\u6362\u3002</li> </ul> </li> <li> <p>hashtable\u00a0(Dict): \u5f53\u54c8\u5e0c\u7ed3\u6784\u8d85\u8fc7\u4e0a\u8ff0\u9608\u503c\u540e\uff0cRedis\u4f1a\u5c06\u5176\u81ea\u52a8\u8f6c\u6362\u4e3a\u6807\u51c6\u7684\u54c8\u5e0c\u8868\uff08\u5b57\u5178\uff09\u7ed3\u6784\u3002\u867d\u7136\u5185\u5b58\u5f00\u9500\u53d8\u5927\uff0c\u4f46\u5b83\u80fd\u63d0\u4f9b\u5e73\u5747O(1)\u590d\u6742\u5ea6\u7684\u8bfb\u5199\u6027\u80fd\uff0c\u66f4\u9002\u5408\u5904\u7406\u5927\u91cf\u952e\u503c\u5bf9\u3002</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E7%9A%84%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%9C%89%E4%BB%80%E4%B9%88/#4-set","title":"4. Set (\u96c6\u5408)","text":"<ul> <li> <p>intset\u00a0(\u6574\u6570\u96c6\u5408): \u5f53\u96c6\u5408\u4e2d\u5b58\u50a8\u7684\u6240\u6709\u5143\u7d20\u90fd\u662f\u6574\u6570\uff0c\u5e76\u4e14\u5143\u7d20\u6570\u91cf\u4e0d\u591a\u65f6\uff0cRedis\u4f1a\u4f7f\u7528intset\u3002\u5b83\u662f\u4e00\u4e2a\u6709\u5e8f\u7684\u3001\u4e0d\u91cd\u590d\u7684\u6574\u6570\u6570\u7ec4\uff0c\u5185\u5b58\u975e\u5e38\u7d27\u51d1\uff0c\u5e76\u4e14\u53ef\u4ee5\u901a\u8fc7\u4e8c\u5206\u67e5\u627e\u5feb\u901f\u5b9a\u4f4d\u5143\u7d20\u3002</p> <ul> <li>\u8f6c\u6362\u6761\u4ef6: \u5f531) \u96c6\u5408\u4e2d\u88ab\u52a0\u5165\u4e86\u4e00\u4e2a\u975e\u6574\u6570\u5143\u7d20\uff0c\u62162) \u5143\u7d20\u6570\u91cf\u8d85\u8fc7\u4e86\u00a0set-max-intset-entries\u00a0\u914d\u7f6e\u7684\u9608\u503c\u65f6\uff0c\u4f1a\u89e6\u53d1\u8f6c\u6362\u3002</li> </ul> </li> <li> <p>hashtable\u00a0(Dict): \u8f6c\u6362\u540e\u7684\u96c6\u5408\u4f1a\u4f7f\u7528\u54c8\u5e0c\u8868\u6765\u5b58\u50a8\u3002\u96c6\u5408\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u4f5c\u4e3a\u54c8\u5e0c\u8868\u7684\u952e\uff08key\uff09\uff0c\u800c\u503c\uff08value\uff09\u5219\u7edf\u4e00\u4e3a\u4e00\u4e2aNULL\u6216\u4e00\u4e2a\u5360\u4f4d\u7b26\u3002</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E7%9A%84%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%9C%89%E4%BB%80%E4%B9%88/#5-zset","title":"5. ZSet (\u6709\u5e8f\u96c6\u5408)","text":"<ul> <li> <p>ziplist: \u4e0eHash\u7c7b\u4f3c\uff0c\u5f53\u6709\u5e8f\u96c6\u5408\u7684\u5143\u7d20\u6570\u91cf\u5f88\u5c11\uff0c\u5e76\u4e14\u6bcf\u4e2a\u6210\u5458\u548c\u5206\u6570\uff08score\uff09\u7684\u957f\u5ea6\u90fd\u5f88\u77ed\u65f6\uff0c\u4f1a\u4f7f\u7528ziplist\u3002\u6210\u5458\u548c\u5206\u6570\u4f1a\u6210\u5bf9\u5730\u5b58\u50a8\u5728\u8fde\u7eed\u5185\u5b58\u4e2d\uff0c\u5e76\u6309\u5206\u6570\u6392\u5e8f\u3002</p> <ul> <li>\u8f6c\u6362\u6761\u4ef6: \u5f53\u5143\u7d20\u6570\u91cf\u6216\u6210\u5458/\u5206\u6570\u957f\u5ea6\u8d85\u8fc7\u00a0zset-max-ziplist-entries\u00a0\u548c\u00a0zset-max-ziplist-value\u00a0\u914d\u7f6e\u7684\u9608\u503c\u65f6\uff0c\u89e6\u53d1\u8f6c\u6362\u3002</li> </ul> </li> <li> <p>skiplist\u00a0+\u00a0hashtable\u00a0(Dict): \u8fd9\u662fZSet\u6700\u7ecf\u5178\u3001\u6700\u5f3a\u5927\u7684\u7f16\u7801\u65b9\u5f0f\uff0c\u5b83\u540c\u65f6\u4f7f\u7528\u4e86\u4e24\u79cd\u6570\u636e\u7ed3\u6784\uff1a</p> <ul> <li> <p>skiplist\u00a0(\u8df3\u8868): \u6210\u5458\u548c\u5206\u6570\u88ab\u5b58\u50a8\u5728\u8df3\u8868\u4e2d\u3002\u8df3\u8868\u662f\u4e00\u79cd\u201c\u5e26\u6709\u591a\u7ea7\u7d22\u5f15\u7684\u94fe\u8868\u201d\uff0c\u5b83\u80fd\u4ee5O(log N)\u7684\u5e73\u5747\u65f6\u95f4\u590d\u6742\u5ea6\u5b9e\u73b0\u6210\u5458\u7684\u6392\u5e8f\u3001\u8303\u56f4\u67e5\u627e\uff08\u5982ZRANGE\uff09\u548c\u6392\u540d\uff08\u5982ZRANK\uff09\u3002</p> </li> <li> <p>hashtable\u00a0(\u5b57\u5178): \u5b57\u5178\u5219\u5efa\u7acb\u4e86\u4ece\u6210\u5458\uff08member\uff09\u5230\u5206\u6570\uff08score\uff09\u7684\u6620\u5c04\u3002\u8fd9\u4f7f\u5f97\u53ef\u4ee5\u901a\u8fc7\u6210\u5458\u540d\u4ee5O(1)\u7684\u590d\u6742\u5ea6\u76f4\u63a5\u83b7\u53d6\u5176\u5206\u6570\uff08\u5982ZSCORE\u547d\u4ee4\uff09\uff0c\u5f25\u8865\u4e86\u8df3\u8868\u53ea\u80fd\u6309\u5206\u6570\u67e5\u627e\u7684\u4e0d\u8db3\u3002</p> </li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%BB%8B%E7%BB%8D/","title":"Redis\u7684\u6570\u636e\u7c7b\u578b\u4ecb\u7ecd","text":""},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%BB%8B%E7%BB%8D/#_1","title":"\u57fa\u7840\u6570\u636e\u7c7b\u578b","text":""},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%BB%8B%E7%BB%8D/#1-string","title":"1. \u5b57\u7b26\u4e32 (String)","text":"<p>\u5b57\u7b26\u4e32\u662f Redis \u6700\u57fa\u672c\u7684\u6570\u636e\u7c7b\u578b\uff0c\u53ef\u4ee5\u5b58\u50a8\u4efb\u4f55\u5f62\u5f0f\u7684\u4e8c\u8fdb\u5236\u5b89\u5168\u6570\u636e\uff0c\u4f8b\u5982\u6587\u672c\u3001\u5e8f\u5217\u5316\u7684 JSON \u5bf9\u8c61\u6216\u56fe\u7247\uff0c\u6700\u5927\u5bb9\u91cf\u53ef\u8fbe 512MB\u3002</p> <p>\u5e95\u5c42\u5b9e\u73b0\uff1a Redis \u5e76\u6ca1\u6709\u76f4\u63a5\u4f7f\u7528 C \u8bed\u8a00\u4f20\u7edf\u7684\u5b57\u7b26\u4e32\u8868\u793a\uff08\u4ee5\u7a7a\u5b57\u7b26 <code>\\0</code> \u7ed3\u5c3e\u7684\u5b57\u7b26\u6570\u7ec4\uff09\uff0c\u800c\u662f\u81ea\u884c\u8bbe\u8ba1\u4e86\u4e00\u79cd\u540d\u4e3a\u7b80\u5355\u52a8\u6001\u5b57\u7b26\u4e32 (Simple Dynamic String, SDS) \u7684\u7ed3\u6784\u3002</p> <p>SDS \u7684\u4f18\u52bf\uff1a *   O(1) \u590d\u6742\u5ea6\u83b7\u53d6\u5b57\u7b26\u4e32\u957f\u5ea6\uff1aSDS \u7ed3\u6784\u4e2d\u76f4\u63a5\u8bb0\u5f55\u4e86\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff0c\u907f\u514d\u4e86 C \u5b57\u7b26\u4e32\u9700\u8981\u904d\u5386\u6574\u4e2a\u5b57\u7b26\u4e32\u624d\u80fd\u786e\u5b9a\u957f\u5ea6\u7684\u4f4e\u6548\u64cd\u4f5c\u3002 *   \u675c\u7edd\u7f13\u51b2\u533a\u6ea2\u51fa\uff1a\u5728\u5bf9\u5b57\u7b26\u4e32\u8fdb\u884c\u4fee\u6539\u65f6\uff0cSDS \u4f1a\u81ea\u52a8\u68c0\u67e5\u53ef\u7528\u7a7a\u95f4\u5e76\u6309\u9700\u6269\u5bb9\uff0c\u9632\u6b62\u4e86 C \u5b57\u7b26\u4e32\u5e38\u89c1\u7684\u7f13\u51b2\u533a\u6ea2\u51fa\u95ee\u9898\u3002 *   \u4e8c\u8fdb\u5236\u5b89\u5168\uff1aSDS \u53ef\u4ee5\u5b58\u50a8\u5305\u542b <code>\\0</code> \u5b57\u7b26\u7684\u6570\u636e\uff0c\u56e0\u4e3a\u5b83\u4e0d\u4f9d\u8d56 <code>\\0</code> \u6765\u5224\u65ad\u5b57\u7b26\u4e32\u7684\u7ed3\u5c3e\uff0c\u800c\u662f\u901a\u8fc7 <code>len</code> \u5c5e\u6027\u3002 *   \u7a7a\u95f4\u9884\u5206\u914d\u4e0e\u60f0\u6027\u7a7a\u95f4\u91ca\u653e\uff1a\u4e3a\u4e86\u4f18\u5316\u6027\u80fd\uff0cSDS \u5728\u6269\u5bb9\u65f6\u4f1a\u5206\u914d\u6bd4\u5b9e\u9645\u9700\u8981\u66f4\u591a\u7684\u7a7a\u95f4\uff08\u7a7a\u95f4\u9884\u5206\u914d\uff09\uff0c\u800c\u5728\u7f29\u77ed\u5b57\u7b26\u4e32\u65f6\u5e76\u4e0d\u4f1a\u7acb\u5373\u91ca\u653e\u591a\u4f59\u7684\u7a7a\u95f4\uff0c\u4ee5\u5907\u5c06\u6765\u4f7f\u7528\uff08\u60f0\u6027\u7a7a\u95f4\u91ca\u653e\uff09\u3002</p> <p>\u7f16\u7801\u65b9\u5f0f\uff1a \u4e3a\u4e86\u8282\u7ea6\u5185\u5b58\uff0cString \u7c7b\u578b\u4f1a\u6839\u636e\u5b58\u50a8\u5185\u5bb9\u7684\u4e0d\u540c\u9009\u62e9\u4e0d\u540c\u7684\u7f16\u7801\u65b9\u5f0f\uff1a *   int: \u5f53\u5b57\u7b26\u4e32\u53ef\u4ee5\u88ab\u89e3\u6790\u4e3a\u957f\u6574\u578b\u65f6\uff0c\u4f1a\u4f7f\u7528\u8be5\u7f16\u7801\uff0c\u76f4\u63a5\u5b58\u50a8\u6574\u6570\u503c\u3002 *   embstr: \u5f53\u5b57\u7b26\u4e32\u957f\u5ea6\u5c0f\u4e8e\u7b49\u4e8e 44 \u5b57\u8282\u65f6\uff0c\u91c7\u7528 <code>embstr</code> \u7f16\u7801\u3002<code>redisObject</code> \u7684\u5143\u4fe1\u606f\u548c SDS \u7ed3\u6784\u5728\u5185\u5b58\u4e2d\u662f\u8fde\u7eed\u5206\u914d\u7684\uff0c\u53ef\u4ee5\u66f4\u597d\u5730\u5229\u7528\u7f13\u5b58\u3002 *   raw: \u5f53\u5b57\u7b26\u4e32\u957f\u5ea6\u5927\u4e8e 44 \u5b57\u8282\u65f6\uff0c\u4f7f\u7528 <code>raw</code> \u7f16\u7801\u3002<code>redisObject</code> \u548c SDS \u7ed3\u6784\u5728\u5185\u5b58\u4e2d\u662f\u5206\u5f00\u5206\u914d\u7684\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%BB%8B%E7%BB%8D/#2-list","title":"2. \u5217\u8868 (List)","text":"<p>\u5217\u8868\u662f\u7b80\u5355\u7684\u5b57\u7b26\u4e32\u5217\u8868\uff0c\u6309\u7167\u63d2\u5165\u987a\u5e8f\u6392\u5e8f\u3002\u4f60\u53ef\u4ee5\u5728\u5217\u8868\u7684\u5934\u90e8\uff08\u5de6\u4fa7\uff09\u6216\u5c3e\u90e8\uff08\u53f3\u4fa7\uff09\u6dfb\u52a0\u5143\u7d20\u3002 \u5217\u8868\u975e\u5e38\u9002\u5408\u5b9e\u73b0\u6d88\u606f\u961f\u5217\u3001\u6808\u7b49\u6570\u636e\u7ed3\u6784\u3002</p> <p>\u5e95\u5c42\u5b9e\u73b0\uff1a List \u7c7b\u578b\u7684\u5e95\u5c42\u5b9e\u73b0\u5728 Redis \u7684\u4e0d\u540c\u7248\u672c\u4e2d\u6709\u6240\u6f14\u8fdb\uff1a *   Redis 3.2 \u4e4b\u524d: \u4f7f\u7528\u53cc\u5411\u94fe\u8868 (linkedlist) \u6216\u538b\u7f29\u5217\u8868 (ziplist)\u3002     *   \u5f53\u5217\u8868\u5143\u7d20\u8f83\u5c11\u4e14\u6bcf\u4e2a\u5143\u7d20\u90fd\u8f83\u5c0f\u65f6\uff0c\u4f7f\u7528 <code>ziplist</code> \u6765\u8282\u7701\u5185\u5b58\u3002     *   \u5f53\u6570\u636e\u91cf\u53d8\u5927\u65f6\uff0c\u5219\u8f6c\u6362\u4e3a <code>linkedlist</code>\u3002 *   Redis 3.2 \u53ca\u4e4b\u540e: \u5f15\u5165\u4e86 quicklist\u3002 <code>quicklist</code> \u662f <code>linkedlist</code> \u548c <code>ziplist</code> \u7684\u6df7\u5408\u4f53\uff0c\u5b83\u662f\u4e00\u4e2a\u7531 <code>ziplist</code> \u6784\u6210\u7684\u53cc\u5411\u94fe\u8868\u3002 \u8fd9\u79cd\u7ed3\u6784\u5728\u7a7a\u95f4\u6548\u7387\u548c\u64cd\u4f5c\u6027\u80fd\u4e4b\u95f4\u53d6\u5f97\u4e86\u5f88\u597d\u7684\u5e73\u8861\u3002 *   Redis 7.0 \u53ca\u4e4b\u540e: <code>ziplist</code> \u88ab\u529f\u80fd\u66f4\u4f18\u7684 listpack \u6240\u53d6\u4ee3\u3002<code>listpack</code> \u89e3\u51b3\u4e86 <code>ziplist</code> \u5b58\u5728\u7684\u8fde\u9501\u66f4\u65b0\u95ee\u9898\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%BB%8B%E7%BB%8D/#3-hash","title":"3. \u54c8\u5e0c (Hash)","text":"<p>\u54c8\u5e0c\u662f\u4e00\u4e2a\u952e\u503c\u5bf9 (field-value) \u96c6\u5408\uff0c\u975e\u5e38\u9002\u5408\u7528\u4e8e\u5b58\u50a8\u5bf9\u8c61\u3002</p> <p>\u5e95\u5c42\u5b9e\u73b0\uff1a Hash \u7c7b\u578b\u7684\u5e95\u5c42\u5b9e\u73b0\u4e5f\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a *   ziplist/listpack: \u5f53\u54c8\u5e0c\u5bf9\u8c61\u4e2d\u4fdd\u5b58\u7684\u952e\u503c\u5bf9\u6570\u91cf\u8f83\u5c11\uff0c\u5e76\u4e14\u6240\u6709\u952e\u548c\u503c\u7684\u5b57\u7b26\u4e32\u957f\u5ea6\u90fd\u5c0f\u4e8e\u7279\u5b9a\u9608\u503c\uff08\u9ed8\u8ba4\u4e3a 64 \u5b57\u8282\uff09\u65f6\uff0c\u4f1a\u4f7f\u7528 <code>ziplist</code>\uff087.0 \u7248\u672c\u540e\u4e3a <code>listpack</code>\uff09\u8fdb\u884c\u5b58\u50a8\uff0c\u4ee5\u8282\u7ea6\u5185\u5b58\u3002 *   \u54c8\u5e0c\u8868 (hashtable): \u5f53\u4e0d\u6ee1\u8db3\u4e0a\u8ff0\u6761\u4ef6\u65f6\uff0cRedis \u4f1a\u4f7f\u7528\u54c8\u5e0c\u8868\u6765\u5b58\u50a8\u3002Redis \u7684\u54c8\u5e0c\u8868\u5b9e\u73b0\u7c7b\u4f3c\u4e8e Java \u4e2d\u7684 HashMap\uff0c\u91c7\u7528\u6570\u7ec4\u52a0\u94fe\u8868\u7684\u5f62\u5f0f\uff0c\u901a\u8fc7\u201c\u62c9\u94fe\u6cd5\u201d\u89e3\u51b3\u54c8\u5e0c\u51b2\u7a81\u3002 \u4e3a\u4e86\u5728\u6269\u5bb9\u6216\u7f29\u5bb9\u65f6\u4fdd\u6301\u9ad8\u6548\uff0cRedis \u91c7\u7528\u4e86\u6e10\u8fdb\u5f0f rehash \u7684\u7b56\u7565\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%BB%8B%E7%BB%8D/#4-set","title":"4. \u96c6\u5408 (Set)","text":"<p>\u96c6\u5408\u662f\u5b57\u7b26\u4e32\u7c7b\u578b\u7684\u65e0\u5e8f\u96c6\u5408\uff0c\u96c6\u5408\u4e2d\u7684\u5143\u7d20\u662f\u552f\u4e00\u7684\u3002 \u5b83\u652f\u6301\u9ad8\u6548\u7684\u6210\u5458\u68c0\u67e5\u3001\u6dfb\u52a0\u3001\u5220\u9664\u64cd\u4f5c\uff0c\u4ee5\u53ca\u5e76\u96c6\u3001\u4ea4\u96c6\u3001\u5dee\u96c6\u7b49\u96c6\u5408\u8fd0\u7b97\u3002</p> <p>\u5e95\u5c42\u5b9e\u73b0\uff1a Set \u7c7b\u578b\u7684\u5e95\u5c42\u5b9e\u73b0\u540c\u6837\u6839\u636e\u60c5\u51b5\u9009\u62e9\u4e0d\u540c\u7684\u6570\u636e\u7ed3\u6784\uff1a *   \u6574\u6570\u96c6\u5408 (intset): \u5f53\u96c6\u5408\u4e2d\u7684\u6240\u6709\u5143\u7d20\u90fd\u662f\u6574\u6570\uff0c\u5e76\u4e14\u5143\u7d20\u6570\u91cf\u4e0d\u8d85\u8fc7\u4e00\u5b9a\u9608\u503c\uff08\u9ed8\u8ba4\u4e3a 512\uff09\u65f6\uff0c\u4f1a\u4f7f\u7528 <code>intset</code>\u3002<code>intset</code> \u662f\u4e00\u4e2a\u6709\u5e8f\u7684\u3001\u65e0\u91cd\u590d\u7684\u6574\u6570\u6570\u7ec4\u3002 *   \u54c8\u5e0c\u8868 (hashtable): \u5f53\u96c6\u5408\u4e2d\u7684\u5143\u7d20\u4e0d\u5168\u662f\u6574\u6570\uff0c\u6216\u8005\u5143\u7d20\u6570\u91cf\u8d85\u8fc7\u9608\u503c\u65f6\uff0c\u4f1a\u8f6c\u6362\u4e3a\u4f7f\u7528\u54c8\u5e0c\u8868\u5b58\u50a8\u3002 \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u54c8\u5e0c\u8868\u7684\u952e\u5b58\u50a8\u96c6\u5408\u7684\u5143\u7d20\uff0c\u800c\u503c\u5219\u7edf\u4e00\u8bbe\u7f6e\u4e3a <code>NULL</code>\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%BB%8B%E7%BB%8D/#5-sorted-set-zset","title":"5. \u6709\u5e8f\u96c6\u5408 (Sorted Set / ZSet)","text":"<p>\u6709\u5e8f\u96c6\u5408\u548c\u96c6\u5408\u4e00\u6837\uff0c\u4e5f\u662f\u5b57\u7b26\u4e32\u7684\u96c6\u5408\uff0c\u4e14\u4e0d\u5141\u8bb8\u91cd\u590d\u3002\u4e0d\u540c\u7684\u662f\uff0c\u6bcf\u4e2a\u5143\u7d20\u90fd\u4f1a\u5173\u8054\u4e00\u4e2a double \u7c7b\u578b\u7684\u5206\u6570 (score)\u3002Redis \u6b63\u662f\u901a\u8fc7\u5206\u6570\u6765\u4e3a\u96c6\u5408\u4e2d\u7684\u6210\u5458\u8fdb\u884c\u4ece\u5c0f\u5230\u5927\u7684\u6392\u5e8f\u3002 \u6709\u5e8f\u96c6\u5408\u975e\u5e38\u9002\u5408\u7528\u4e8e\u5b9e\u73b0\u6392\u884c\u699c\u7b49\u529f\u80fd\u3002</p> <p>\u5e95\u5c42\u5b9e\u73b0\uff1a *   ziplist/listpack: \u5f53\u6709\u5e8f\u96c6\u5408\u7684\u5143\u7d20\u6570\u91cf\u8f83\u5c11\uff0c\u4e14\u6bcf\u4e2a\u5143\u7d20\u7684\u957f\u5ea6\u90fd\u5c0f\u4e8e\u7279\u5b9a\u9608\u503c\u65f6\uff0c\u4f7f\u7528 <code>ziplist</code>\uff087.0 \u7248\u672c\u540e\u4e3a <code>listpack</code>\uff09\u3002\u5728 <code>ziplist</code> \u4e2d\uff0c\u6bcf\u4e2a\u96c6\u5408\u5143\u7d20\u7531\u4e24\u4e2a\u7d27\u90bb\u7684\u8282\u70b9\u8868\u793a\uff0c\u4e00\u4e2a\u5b58\u6210\u5458 (member)\uff0c\u4e00\u4e2a\u5b58\u5206\u6570 (score)\u3002 *   \u8df3\u8dc3\u8868 (skiplist) + \u54c8\u5e0c\u8868 (dict): \u5f53\u4e0d\u6ee1\u8db3\u4e0a\u8ff0\u6761\u4ef6\u65f6\uff0c\u6709\u5e8f\u96c6\u5408\u4f1a\u4f7f\u7528\u8df3\u8dc3\u8868\u548c\u54c8\u5e0c\u8868\u7684\u7ec4\u5408\u3002     *   \u8df3\u8dc3\u8868 (skiplist): \u7528\u4e8e\u6309\u5206\u6570\u8303\u56f4\u9ad8\u6548\u5730\u8fdb\u884c\u8303\u56f4\u67e5\u627e\u548c\u6392\u5e8f\u3002     *   \u54c8\u5e0c\u8868 (dict): \u7528\u4e8e\u4ee5 O(1) \u7684\u65f6\u95f4\u590d\u6742\u5ea6\u5feb\u901f\u67e5\u627e\u6307\u5b9a\u6210\u5458\u7684\u5206\u6570\u3002     \u8fd9\u79cd\u7ed3\u5408\u4f7f\u7528\u7a7a\u95f4\u6362\u65f6\u95f4\u7684\u65b9\u5f0f\uff0c\u4fdd\u8bc1\u4e86\u5355\u5143\u7d20\u67e5\u8be2\u548c\u8303\u56f4\u67e5\u8be2\u7684\u9ad8\u6548\u6027\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%BB%8B%E7%BB%8D/#_2","title":"\u7279\u6b8a\u6570\u636e\u7c7b\u578b","text":"<p>\u9664\u4e86\u57fa\u7840\u6570\u636e\u7c7b\u578b\uff0cRedis \u8fd8\u63d0\u4f9b\u4e86\u4e00\u4e9b\u9488\u5bf9\u7279\u6b8a\u573a\u666f\u7684\u5f3a\u5927\u6570\u636e\u7c7b\u578b\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%BB%8B%E7%BB%8D/#1-bitmap","title":"1. Bitmap (\u4f4d\u56fe)","text":"<p>Bitmap \u672c\u8eab\u5e76\u4e0d\u662f\u4e00\u4e2a\u72ec\u7acb\u7684\u6570\u636e\u7c7b\u578b\uff0c\u800c\u662f\u57fa\u4e8e String \u7c7b\u578b\u5b9e\u73b0\u7684\u4e00\u79cd\u7edf\u8ba1\u4e8c\u503c\u72b6\u6001\uff080 \u6216 1\uff09\u7684\u6570\u636e\u7c7b\u578b\u3002 Redis \u5c06\u5b57\u8282\u6570\u7ec4\u7684\u6bcf\u4e2a bit \u4f4d\u90fd\u5229\u7528\u8d77\u6765\uff0c\u975e\u5e38\u9002\u5408\u7528\u4e8e\u8bb0\u5f55\u5927\u91cf\u7684\u5e03\u5c14\u503c\u72b6\u6001\uff0c\u4f8b\u5982\u7528\u6237\u7b7e\u5230\u3001\u5728\u7ebf\u72b6\u6001\u7b49\uff0c\u80fd\u6781\u5927\u5730\u8282\u7701\u5185\u5b58\u7a7a\u95f4\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%BB%8B%E7%BB%8D/#2-hyperloglog","title":"2. HyperLogLog","text":"<p>HyperLogLog \u662f\u4e00\u79cd\u6982\u7387\u6570\u636e\u7ed3\u6784\uff0c\u7528\u4e8e\u5bf9\u96c6\u5408\u7684\u57fa\u6570\uff08\u4e0d\u91cd\u590d\u5143\u7d20\u7684\u6570\u91cf\uff09\u8fdb\u884c\u4f30\u7b97\u3002 \u5b83\u7684\u4f18\u70b9\u662f\uff0c\u5728\u8f93\u5165\u5143\u7d20\u7684\u6570\u91cf\u6216\u8005\u4f53\u79ef\u975e\u5e38\u5927\u7684\u65f6\u5019\uff0c\u8ba1\u7b97\u57fa\u6570\u6240\u9700\u7684\u7a7a\u95f4\u603b\u662f\u56fa\u5b9a\u7684\uff0c\u5e76\u4e14\u662f\u5f88\u5c0f\u7684\u3002 \u867d\u7136\u5b58\u5728\u4e00\u5b9a\u7684\u8bef\u5dee\u7387\uff08\u6807\u51c6\u8bef\u5dee\u4e3a 0.81%\uff09\uff0c\u4f46\u5bf9\u4e8e\u50cf\u7edf\u8ba1\u7f51\u7ad9 UV \u8fd9\u79cd\u4e0d\u9700\u8981\u7edd\u5bf9\u7cbe\u786e\u8ba1\u6570\u7684\u573a\u666f\u975e\u5e38\u9002\u7528\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%BB%8B%E7%BB%8D/#3-geospatial-geo","title":"3. Geospatial (GEO)","text":"<p>GEO \u662f Redis 3.2 \u7248\u672c\u65b0\u589e\u7684\u529f\u80fd\uff0c\u4e3b\u8981\u7528\u4e8e\u5b58\u50a8\u5730\u7406\u4f4d\u7f6e\u4fe1\u606f\uff0c\u5e76\u5bf9\u5b58\u50a8\u7684\u4fe1\u606f\u8fdb\u884c\u64cd\u4f5c\u3002 \u5b83\u7684\u5e95\u5c42\u662f\u57fa\u4e8e Sorted Set \u5b9e\u73b0\u7684\u3002 GEO \u7c7b\u578b\u4f7f\u7528 GeoHash \u7b97\u6cd5\u5c06\u4e8c\u7ef4\u7684\u7ecf\u7eac\u5ea6\u7f16\u7801\u6210\u4e00\u7ef4\u7684\u6574\u6570\uff08\u4f5c\u4e3a score\uff09\uff0c\u4ece\u800c\u53ef\u4ee5\u5229\u7528 Sorted Set \u7684\u8303\u56f4\u67e5\u8be2\u80fd\u529b\uff0c\u9ad8\u6548\u5730\u5b9e\u73b0\u201c\u9644\u8fd1\u7684\u4eba\u201d\u7b49\u5730\u7406\u4f4d\u7f6e\u76f8\u5173\u7684\u67e5\u8be2\u529f\u80fd\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E7%9A%84%E7%BA%BF%E7%A8%8B%E6%A8%A1%E5%9E%8B%E4%BB%8B%E7%BB%8D/","title":"Redis\u7684\u7ebf\u7a0b\u6a21\u578b\u4ecb\u7ecd","text":""},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E7%9A%84%E7%BA%BF%E7%A8%8B%E6%A8%A1%E5%9E%8B%E4%BB%8B%E7%BB%8D/#redis-60","title":"\u7ecf\u5178\u5355\u7ebf\u7a0b\u6a21\u578b\uff08Redis 6.0 \u4e4b\u524d\uff09","text":"<p>\u5728\u7248\u672c 6.0 \u4e4b\u524d\uff0cRedis \u7684\u6838\u5fc3\u7f51\u7edc\u6a21\u578b\u662f\u5355\u7ebf\u7a0b\u7684\u3002\u8fd9\u610f\u5473\u7740\u5904\u7406\u5ba2\u6237\u7aef\u7f51\u7edc\u8bf7\u6c42\u3001\u89e3\u6790\u547d\u4ee4\u3001\u6267\u884c\u547d\u4ee4\u548c\u5199\u56de\u54cd\u5e94\u8fd9\u6574\u4e2a\u8fc7\u7a0b\uff0c\u90fd\u7531\u4e00\u4e2a\u4e3b\u7ebf\u7a0b\u6765\u5b8c\u6210\u3002</p> <p>\u5de5\u4f5c\u539f\u7406\uff1aI/O \u591a\u8def\u590d\u7528</p> <p>\u8fd9\u4e2a\u5355\u7ebf\u7a0b\u6a21\u578b\u7684\u6838\u5fc3\u662f\u57fa\u4e8e I/O \u591a\u8def\u590d\u7528\u6280\u672f\uff08\u5982 epoll, kqueue, select\uff09\u3002\u5176\u5de5\u4f5c\u6d41\u7a0b\u53ef\u4ee5\u6982\u62ec\u4e3a\u4e00\u4e2a\u5355 Reactor \u6a21\u5f0f\uff1a *   \u4e8b\u4ef6\u5faa\u73af\uff08Event Loop\uff09\uff1a\u4e3b\u7ebf\u7a0b\u5728\u4e00\u4e2a\u4e8b\u4ef6\u5faa\u73af\u4e2d\u4e0d\u65ad\u5730\u7b49\u5f85\u4e8b\u4ef6\u53d1\u751f\u3002 *   \u4e8b\u4ef6\u5206\u53d1\u5668\uff1a\u5229\u7528 I/O \u591a\u8def\u590d\u7528 API (\u5982 <code>epoll_wait</code>) \u6765\u76d1\u542c\u591a\u4e2a\u5ba2\u6237\u7aef\u5957\u63a5\u5b57\uff08socket\uff09\u3002\u5f53\u67d0\u4e2a\u5957\u63a5\u5b57\u51c6\u5907\u597d\u8bfb\u6216\u5199\u65f6\uff0cAPI \u5c31\u4f1a\u8fd4\u56de\u3002 *   \u4e8b\u4ef6\u5904\u7406\u5668\uff1a\u4e3b\u7ebf\u7a0b\u6839\u636e\u4e8b\u4ef6\u7c7b\u578b\uff08\u65b0\u8fde\u63a5\u3001\u8bfb\u5c31\u7eea\u3001\u5199\u5c31\u7eea\uff09\uff0c\u8c03\u7528\u76f8\u5e94\u7684\u5904\u7406\u5668\u51fd\u6570\u6765\u6267\u884c\u64cd\u4f5c\u3002</p> <p>\u4e3a\u4ec0\u4e48\u9009\u62e9\u5355\u7ebf\u7a0b\uff1f</p> <p>Redis \u7684\u4f5c\u8005\u4e4b\u6240\u4ee5\u9009\u62e9\u5355\u7ebf\u7a0b\u6a21\u578b\uff0c\u4e3b\u8981\u57fa\u4e8e\u4ee5\u4e0b\u51e0\u70b9\u8003\u8651\uff1a *   CPU \u901a\u5e38\u4e0d\u662f\u74f6\u9888\uff1a\u5bf9\u4e8e Redis \u8fd9\u79cd\u5185\u5b58\u6570\u636e\u5e93\u6765\u8bf4\uff0c\u7edd\u5927\u591a\u6570\u64cd\u4f5c\u662f\u5185\u5b58\u4e2d\u7684\u6570\u636e\u8bfb\u5199\uff0c\u901f\u5ea6\u6781\u5feb\u3002\u6027\u80fd\u74f6\u9888\u901a\u5e38\u5728\u4e8e\u7f51\u7edc\u5ef6\u8fdf\u6216\u5185\u5b58\u5927\u5c0f\uff0c\u800c\u975e CPU \u8ba1\u7b97\u3002 *   \u907f\u514d\u591a\u7ebf\u7a0b\u5f00\u9500\uff1a     *   \u4e0a\u4e0b\u6587\u5207\u6362\uff1a\u591a\u7ebf\u7a0b\u9700\u8981\u9891\u7e41\u5730\u5728 CPU \u6838\u5fc3\u4e4b\u95f4\u8fdb\u884c\u4e0a\u4e0b\u6587\u5207\u6362\uff0c\u8fd9\u4f1a\u5e26\u6765\u6027\u80fd\u635f\u8017\u3002     *   \u9501\u673a\u5236\u5f00\u9500\uff1a\u5982\u679c\u91c7\u7528\u591a\u7ebf\u7a0b\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u6570\u636e\u7684\u4e00\u81f4\u6027\uff0c\u5fc5\u987b\u5f15\u5165\u9501\u7b49\u540c\u6b65\u673a\u5236\u3002\u8fd9\u4e0d\u4ec5\u4f1a\u589e\u52a0\u4ee3\u7801\u7684\u590d\u6742\u5ea6\uff0c\u8fd8\u4f1a\u5728\u9ad8\u5e76\u53d1\u573a\u666f\u4e0b\u56e0\u9501\u7ade\u4e89\u800c\u964d\u4f4e\u6027\u80fd\u3002 *   \u5b9e\u73b0\u7b80\u5355\uff0c\u6613\u4e8e\u7ef4\u62a4\uff1a\u5355\u7ebf\u7a0b\u6a21\u578b\u4f7f\u5f97\u4ee3\u7801\u903b\u8f91\u6e05\u6670\uff0c\u907f\u514d\u4e86\u5904\u7406\u590d\u6742\u7684\u5e76\u53d1\u95ee\u9898\uff0c\u66f4\u5bb9\u6613\u5f00\u53d1\u548c\u7ef4\u62a4\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E7%9A%84%E7%BA%BF%E7%A8%8B%E6%A8%A1%E5%9E%8B%E4%BB%8B%E7%BB%8D/#redis-40","title":"\u540e\u53f0\u7ebf\u7a0b\u7684\u5f15\u5165 (Redis 4.0)","text":"<p>\u4e25\u683c\u6765\u8bf4\uff0cRedis \u65e9\u5728 4.0 \u7248\u672c\u5c31\u5df2\u7ecf\u4e0d\u662f\u7eaf\u7cb9\u7684\u5355\u7ebf\u7a0b\u7a0b\u5e8f\u4e86\u3002\u4e3a\u4e86\u89e3\u51b3\u4e00\u4e9b\u8017\u65f6\u64cd\u4f5c\u963b\u585e\u4e3b\u7ebf\u7a0b\u7684\u95ee\u9898\uff0cRedis \u5f15\u5165\u4e86\u540e\u53f0\u7ebf\u7a0b\u6765\u5904\u7406\u5f02\u6b65\u4efb\u52a1\u3002</p> <p>\u6700\u5178\u578b\u7684\u4f8b\u5b50\u5c31\u662f\u5220\u9664\u5927\u952e\uff08big key\uff09\u7684\u64cd\u4f5c\u3002\u50cf <code>DEL</code> \u547d\u4ee4\u662f\u540c\u6b65\u963b\u585e\u7684\uff0c\u5982\u679c\u5220\u9664\u4e00\u4e2a\u5305\u542b\u6570\u767e\u4e07\u4e2a\u5143\u7d20\u7684 Hash \u6216 Set\uff0c\u4e3b\u7ebf\u7a0b\u4f1a\u88ab\u963b\u585e\u6570\u79d2\uff0c\u5bfc\u81f4\u6240\u6709\u5176\u4ed6\u5ba2\u6237\u7aef\u8bf7\u6c42\u88ab\u5ef6\u8fdf\u3002</p> <p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0cRedis 4.0 \u5f15\u5165\u4e86\u5f02\u6b65\u975e\u963b\u585e\u547d\u4ee4\uff1a *   <code>UNLINK</code>\uff1a<code>DEL</code> \u547d\u4ee4\u7684\u5f02\u6b65\u7248\u672c\u3002\u5f53\u6267\u884c <code>UNLINK</code> \u65f6\uff0c\u4e3b\u7ebf\u7a0b\u4ec5\u5c06\u952e\u4ece\u952e\u7a7a\u95f4\uff08keyspace\uff09\u4e2d\u79fb\u9664\uff0c\u8fd9\u4e2a\u64cd\u4f5c\u662f\u77ac\u65f6\u7684\u3002\u5b9e\u9645\u7684\u5185\u5b58\u56de\u6536\u5de5\u4f5c\u5219\u88ab\u4ea4\u7531\u4e00\u4e2a\u540e\u53f0\u7ebf\u7a0b\u5f02\u6b65\u5b8c\u6210\u3002 *   <code>FLUSHALL ASYNC</code> / <code>FLUSHDB ASYNC</code>\uff1a\u5f02\u6b65\u6e05\u7a7a\u6570\u636e\u5e93\u3002</p> <p>\u8fd9\u4e9b\u540e\u53f0\u7ebf\u7a0b\u7684\u5f15\u5165\uff0c\u6807\u5fd7\u7740 Redis \u5f00\u59cb\u5229\u7528\u591a\u7ebf\u7a0b\u6765\u4f18\u5316\u7279\u5b9a\u573a\u666f\uff0c\u4f46\u5176\u6838\u5fc3\u7684\u7f51\u7edc\u8bf7\u6c42\u5904\u7406\u90e8\u5206\u4f9d\u7136\u662f\u5355\u7ebf\u7a0b\u7684\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E7%9A%84%E7%BA%BF%E7%A8%8B%E6%A8%A1%E5%9E%8B%E4%BB%8B%E7%BB%8D/#io-redis-60","title":"I/O \u591a\u7ebf\u7a0b\u7f51\u7edc\u6a21\u578b (Redis 6.0)","text":"<p>\u968f\u7740\u786c\u4ef6\u53d1\u5c55\uff0c\u7f51\u7edc\u63a5\u53e3\u7684\u901f\u5ea6\u8d8a\u6765\u8d8a\u5feb\uff0cRedis \u7684\u7f51\u7edc I/O \u5904\u7406\u9010\u6e10\u6210\u4e3a\u65b0\u7684\u6027\u80fd\u74f6\u9888\u3002\u5355\u4e2a\u4e3b\u7ebf\u7a0b\u5728\u8bfb\u53d6\u548c\u89e3\u6790\u5927\u91cf\u5ba2\u6237\u7aef\u8bf7\u6c42\uff0c\u4ee5\u53ca\u5c06\u5927\u91cf\u54cd\u5e94\u6570\u636e\u5199\u56de\u5ba2\u6237\u7aef\u65f6\uff0c\u4f1a\u8017\u8d39\u5927\u91cf\u7684 CPU \u65f6\u95f4\uff0c\u9650\u5236\u4e86\u6574\u4f53\u7684 QPS\u3002</p> <p>\u56e0\u6b64\uff0cRedis \u5728 6.0 \u7248\u672c\u4e2d\u6b63\u5f0f\u5f15\u5165\u4e86 I/O \u591a\u7ebf\u7a0b\uff08I/O Threading\uff09\uff0c\u5c06\u7f51\u7edc\u6570\u636e\u7684\u8bfb\u5199\u4efb\u52a1\u4ece\u4e3b\u7ebf\u7a0b\u4e2d\u5265\u79bb\u51fa\u6765\u3002</p> <p>\u5de5\u4f5c\u539f\u7406\u4e0e\u8bbe\u8ba1</p> <p>Redis 6.0 \u7684\u591a\u7ebf\u7a0b\u6a21\u578b\u5e76\u975e\u6807\u51c6\u7684 Master-Worker \u6a21\u5f0f\uff08\u5982 Nginx\uff09\uff0c\u5b83\u6709\u81ea\u5df1\u72ec\u7279\u7684\u8bbe\u8ba1\uff1a</p> <ol> <li> <p>\u7ebf\u7a0b\u5206\u5de5\u660e\u786e\uff1a</p> <ul> <li>\u4e3b\u7ebf\u7a0b\uff08Main Thread\uff09\uff1a\u4ecd\u7136\u8d1f\u8d23\u63a5\u6536\u65b0\u8fde\u63a5\u3001\u89e3\u6790\u548c\u6267\u884c\u547d\u4ee4\u3001\u7ba1\u7406\u6570\u636e\u7b49\u6838\u5fc3\u5de5\u4f5c\u3002</li> <li>I/O \u7ebf\u7a0b\uff08I/O Threads\uff09\uff1a\u53ea\u8d1f\u8d23\u8bfb\u53d6\u7f51\u7edc\u8bf7\u6c42\u548c\u5c06\u54cd\u5e94\u6570\u636e\u5199\u56de\u7f51\u7edc\u3002\u5b83\u4eec\u4e0d\u6267\u884c\u4efb\u4f55\u547d\u4ee4\u3002</li> </ul> </li> <li> <p>\u6838\u5fc3\u6d41\u7a0b\uff1a</p> <ul> <li>\u63a5\u6536\u8fde\u63a5\uff1a\u4e3b\u7ebf\u7a0b\u7684\u4e8b\u4ef6\u5faa\u73af\u63a5\u6536\u65b0\u7684\u5ba2\u6237\u7aef\u8fde\u63a5\uff0c\u5e76\u521b\u5efa <code>client</code> \u5bf9\u8c61\u3002</li> <li>\u8bfb\u53d6\u4efb\u52a1\u5206\u53d1\uff1a\u5f53\u5ba2\u6237\u7aef\u53d1\u9001\u547d\u4ee4\u65f6\uff0c\u4e3b\u7ebf\u7a0b\u4e0d\u518d\u7acb\u5373\u8bfb\u53d6\u548c\u89e3\u6790\u3002\u800c\u662f\u5c06\u5f85\u8bfb\u53d6\u7684 <code>client</code> \u653e\u5165\u4e00\u4e2a\u5168\u5c40\u961f\u5217\u4e2d\u3002\u7136\u540e\uff0c\u4e3b\u7ebf\u7a0b\u901a\u8fc7\u8f6e\u8be2\uff08Round-Robin\uff09\u7b56\u7565\uff0c\u5c06\u8fd9\u4e9b <code>client</code> \u5206\u914d\u7ed9\u5404\u4e2a I/O \u7ebf\u7a0b\u548c\u4e3b\u7ebf\u7a0b\u81ea\u5df1\u3002</li> <li>I/O \u7ebf\u7a0b\u8bfb\u53d6\u548c\u89e3\u6790\uff1aI/O \u7ebf\u7a0b\u4ece\u81ea\u5df1\u7684\u4efb\u52a1\u961f\u5217\u4e2d\u53d6\u51fa <code>client</code>\uff0c\u8d1f\u8d23\u4ece socket \u8bfb\u53d6\u6570\u636e\uff0c\u5e76\u89e3\u6790\u51fa\u7b2c\u4e00\u6761\u547d\u4ee4\uff0c\u4f46\u4e0d\u6267\u884c\u3002</li> <li>\u4e3b\u7ebf\u7a0b\u6267\u884c\u547d\u4ee4\uff1a\u4e3b\u7ebf\u7a0b\u4f1a\u5fd9\u8f6e\u8be2\u7b49\u5f85\u6240\u6709 I/O \u7ebf\u7a0b\u5b8c\u6210\u8bfb\u53d6\u4efb\u52a1\u3002\u4e4b\u540e\uff0c\u4e3b\u7ebf\u7a0b\u4f1a\u904d\u5386\u6240\u6709\u5df2\u5b8c\u6210\u8bfb\u53d6\u7684 <code>client</code>\uff0c\u4f9d\u6b21\u6267\u884c\u5b83\u4eec\u7684\u547d\u4ee4\u3002</li> <li>\u5199\u5165\u4efb\u52a1\u5206\u53d1\uff1a\u547d\u4ee4\u6267\u884c\u5b8c\u6bd5\u540e\uff0c\u54cd\u5e94\u6570\u636e\u88ab\u653e\u5165 <code>client</code> \u7684\u5199\u51fa\u7f13\u51b2\u533a\u3002\u4e3b\u7ebf\u7a0b\u5c06\u9700\u8981\u5199\u56de\u54cd\u5e94\u7684 <code>client</code> \u653e\u5165\u53e6\u4e00\u4e2a\u5168\u5c40\u961f\u5217\uff0c\u5e76\u518d\u6b21\u901a\u8fc7\u8f6e\u8be2\u7b56\u7565\u5206\u914d\u7ed9\u6240\u6709 I/O \u7ebf\u7a0b\u548c\u4e3b\u7ebf\u7a0b\u81ea\u5df1\u3002</li> <li>I/O \u7ebf\u7a0b\u5199\u56de\u54cd\u5e94\uff1aI/O \u7ebf\u7a0b\u4ece\u5404\u81ea\u7684\u4efb\u52a1\u961f\u5217\u4e2d\u83b7\u53d6 <code>client</code>\uff0c\u5e76\u5c06\u5b83\u4eec\u7684\u5199\u51fa\u7f13\u51b2\u533a\u6570\u636e\u901a\u8fc7 socket \u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\u3002</li> <li>\u4e3b\u7ebf\u7a0b\u5584\u540e\uff1a\u4e3b\u7ebf\u7a0b\u540c\u6837\u4f1a\u5fd9\u8f6e\u8be2\u7b49\u5f85\u6240\u6709 I/O \u7ebf\u7a0b\u5b8c\u6210\u5199\u5165\u4efb\u52a1\uff0c\u5e76\u5904\u7406\u540e\u7eed\u5de5\u4f5c\uff08\u5982\u4e3a\u672a\u5199\u5b8c\u7684 <code>client</code> \u6ce8\u518c\u5904\u7406\u5668\uff09\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E7%9A%84%E8%BF%87%E6%9C%9F%E5%88%A0%E9%99%A4%E7%AD%96%E7%95%A5/","title":"Redis\u7684\u8fc7\u671f\u5220\u9664\u7b56\u7565","text":"<p>Redis \u4e3a\u4e86\u7ba1\u7406\u5185\u5b58\u5e76\u79fb\u9664\u4e0d\u518d\u9700\u8981\u7684\u6570\u636e\uff0c\u63d0\u4f9b\u4e86\u952e\uff08key\uff09\u7684\u8fc7\u671f\u65f6\u95f4\u8bbe\u7f6e\u529f\u80fd\u3002\u5f53\u4e00\u4e2a\u952e\u8fc7\u671f\u540e\uff0cRedis \u4f1a\u901a\u8fc7\u7279\u5b9a\u7684\u7b56\u7565\u5c06\u5176\u5220\u9664\u3002Redis \u4e3b\u8981\u7ed3\u5408\u4e86\u4e24\u79cd\u5220\u9664\u7b56\u7565\uff1a\u60f0\u6027\u5220\u9664\u548c\u5b9a\u671f\u5220\u9664\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E7%9A%84%E8%BF%87%E6%9C%9F%E5%88%A0%E9%99%A4%E7%AD%96%E7%95%A5/#1-lazy-deletion","title":"1. \u60f0\u6027\u5220\u9664 (Lazy Deletion)","text":"<p>\u60f0\u6027\u5220\u9664\u662f\u6307 Redis \u5728\u5ba2\u6237\u7aef\u8bbf\u95ee\u4e00\u4e2a\u952e\u65f6\uff0c\u4f1a\u5148\u68c0\u67e5\u8fd9\u4e2a\u952e\u662f\u5426\u5df2\u7ecf\u8fc7\u671f\u3002\u5982\u679c\u8fc7\u671f\uff0cRedis \u4f1a\u7acb\u5373\u5220\u9664\u8fd9\u4e2a\u952e\uff0c\u7136\u540e\u8fd4\u56de\u7a7a\u503c\uff1b\u5982\u679c\u6ca1\u8fc7\u671f\uff0c\u5219\u6b63\u5e38\u8fd4\u56de\u503c\u3002</p> <ul> <li>\u4f18\u70b9\uff1a\u8fd9\u79cd\u7b56\u7565\u5bf9 CPU \u975e\u5e38\u53cb\u597d\uff0c\u56e0\u4e3a\u5b83\u53ea\u5728\u5fc5\u8981\u65f6\u624d\u8fdb\u884c\u5220\u9664\u64cd\u4f5c\uff0c\u4e0d\u4f1a\u5728\u5220\u9664\u8fc7\u671f\u952e\u4e0a\u82b1\u8d39\u989d\u5916\u7684 CPU \u65f6\u95f4\u3002</li> <li>\u7f3a\u70b9\uff1a\u5bf9\u5185\u5b58\u4e0d\u53cb\u597d\u3002\u5982\u679c\u4e00\u4e2a\u952e\u8fc7\u671f\u540e\u4e00\u76f4\u6ca1\u6709\u88ab\u8bbf\u95ee\uff0c\u5b83\u5c31\u4f1a\u4e00\u76f4\u5360\u7528\u7740\u5185\u5b58\uff0c\u4e0d\u4f1a\u88ab\u91ca\u653e\uff0c\u8fd9\u5728\u67d0\u79cd\u7a0b\u5ea6\u4e0a\u53ef\u80fd\u5bfc\u81f4\u5185\u5b58\u6cc4\u6f0f\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E7%9A%84%E8%BF%87%E6%9C%9F%E5%88%A0%E9%99%A4%E7%AD%96%E7%95%A5/#2-periodic-deletion","title":"2. \u5b9a\u671f\u5220\u9664 (Periodic Deletion)","text":"<p>\u7531\u4e8e\u60f0\u6027\u5220\u9664\u7b56\u7565\u53ef\u80fd\u5bfc\u81f4\u5927\u91cf\u8fc7\u671f\u952e\u79ef\u538b\u5728\u5185\u5b58\u4e2d\uff0cRedis \u8fd8\u5f15\u5165\u4e86\u5b9a\u671f\u5220\u9664\u7b56\u7565\u4f5c\u4e3a\u8865\u5145\u3002</p> <p>Redis \u4f1a\u6bcf\u9694\u4e00\u6bb5\u65f6\u95f4\uff08\u9ed8\u8ba4\u662f\u6bcf\u79d2 10 \u6b21\uff09\uff0c\u4ece\u8bbe\u7f6e\u4e86\u8fc7\u671f\u65f6\u95f4\u7684\u952e\u4e2d\u968f\u673a\u62bd\u53d6\u4e00\u90e8\u5206\u8fdb\u884c\u68c0\u67e5\uff0c\u5e76\u5220\u9664\u5176\u4e2d\u5df2\u8fc7\u671f\u7684\u952e\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u7531 <code>activeExpireCycle</code> \u51fd\u6570\u5b9e\u73b0\u3002 \u8fd9\u662f\u4e00\u4e2a\u4e3b\u52a8\u7684\u5220\u9664\u8fc7\u7a0b\uff0c\u65e8\u5728\u6e05\u7406\u90a3\u4e9b\u53ef\u80fd\u6c38\u8fdc\u4e0d\u4f1a\u88ab\u518d\u6b21\u8bbf\u95ee\u7684\u8fc7\u671f\u952e\u3002</p> <ul> <li>\u4f18\u70b9\uff1a\u901a\u8fc7\u4e3b\u52a8\u6e05\u7406\uff0c\u53ef\u4ee5\u6709\u6548\u51cf\u5c11\u56e0\u8fc7\u671f\u952e\u5806\u79ef\u800c\u9020\u6210\u7684\u5185\u5b58\u6d6a\u8d39\u3002</li> <li>\u7f3a\u70b9\uff1a\u8fd9\u662f\u4e00\u4e2a\u6743\u8861\u7b56\u7565\u3002\u5982\u679c\u5220\u9664\u64cd\u4f5c\u8fc7\u4e8e\u9891\u7e41\u6216\u6267\u884c\u65f6\u95f4\u8fc7\u957f\uff0c\u4f1a\u5360\u7528\u8f83\u591a\u7684 CPU \u8d44\u6e90\uff0c\u5f71\u54cd\u670d\u52a1\u5668\u7684\u54cd\u5e94\u6027\u80fd\u3002\u56e0\u6b64\uff0cRedis \u7684\u5b9a\u671f\u5220\u9664\u662f\u968f\u673a\u4e14\u5206\u6279\u8fdb\u884c\u7684\uff0c\u4ee5\u63a7\u5236\u5176\u5bf9 CPU \u7684\u5f71\u54cd\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E7%9A%84%E8%BF%87%E6%9C%9F%E5%88%A0%E9%99%A4%E7%AD%96%E7%95%A5/#redis","title":"Redis \u91c7\u7528\u7684\u7ec4\u5408\u7b56\u7565","text":"<p>\u4e3a\u4e86\u5728 CPU \u6027\u80fd\u548c\u5185\u5b58\u4f7f\u7528\u4e4b\u95f4\u53d6\u5f97\u5e73\u8861\uff0cRedis \u5b9e\u9645\u4e0a\u662f\u60f0\u6027\u5220\u9664\u548c\u5b9a\u671f\u5220\u9664\u4e24\u79cd\u7b56\u7565\u7684\u7ed3\u5408\u3002</p> <ul> <li>\u901a\u8fc7\u5b9a\u671f\u5220\u9664\uff0cRedis \u4e3b\u52a8\u6e05\u7406\u8fc7\u671f\u7684\u952e\uff0c\u5728\u5f88\u5927\u7a0b\u5ea6\u4e0a\u56de\u6536\u4e86\u5185\u5b58\u3002</li> <li>\u901a\u8fc7\u60f0\u6027\u5220\u9664\uff0cRedis \u786e\u4fdd\u4e86\u5ba2\u6237\u7aef\u5728\u8bbf\u95ee\u6570\u636e\u65f6\u7edd\u5bf9\u4e0d\u4f1a\u83b7\u53d6\u5230\u5df2\u8fc7\u671f\u7684\u5185\u5bb9\u3002</li> </ul> <p>\u8fd9\u79cd\u7ec4\u5408\u7b56\u7565\u4f7f\u5f97 Redis \u80fd\u591f\u9ad8\u6548\u5730\u7ba1\u7406\u8fc7\u671f\u952e\uff0c\u65e2\u907f\u514d\u4e86\u5927\u91cf\u5185\u5b58\u7684\u6d6a\u8d39\uff0c\u53c8\u4e0d\u4f1a\u5bf9 CPU \u9020\u6210\u8fc7\u5927\u7684\u538b\u529b\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Redis%E7%9A%84%E8%BF%87%E6%9C%9F%E5%88%A0%E9%99%A4%E7%AD%96%E7%95%A5/#_1","title":"\u4e3b\u4ece\u590d\u5236\u4e2d\u7684\u8fc7\u671f\u5904\u7406","text":"<p>\u5728\u4e3b\u4ece\u590d\u5236\u7ed3\u6784\u4e2d\uff0c\u4ece\u8282\u70b9\u4e0d\u4f1a\u4e3b\u52a8\u5220\u9664\u8fc7\u671f\u952e\u3002\u5f53\u4e3b\u8282\u70b9\u4e0a\u7684\u4e00\u4e2a\u952e\u8fc7\u671f\u65f6\uff08\u65e0\u8bba\u662f\u901a\u8fc7\u60f0\u6027\u5220\u9664\u8fd8\u662f\u5b9a\u671f\u5220\u9664\u53d1\u73b0\u7684\uff09\uff0c\u4e3b\u8282\u70b9\u4f1a\u751f\u6210\u4e00\u6761 <code>DEL</code> \u547d\u4ee4\uff0c\u5e76\u5c06\u5176\u540c\u6b65\u7ed9\u6240\u6709\u7684\u4ece\u8282\u70b9\uff0c\u4ece\u8282\u70b9\u6267\u884c\u8fd9\u6761 <code>DEL</code> \u547d\u4ee4\u6765\u5220\u9664\u5bf9\u5e94\u7684\u8fc7\u671f\u952e\uff0c\u4ece\u800c\u4fdd\u8bc1\u4e3b\u4ece\u6570\u636e\u7684\u4e00\u81f4\u6027\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/Sorted%20Set%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%8C%E5%85%B6%E5%BA%95%E5%B1%82%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/","title":"Sorted Set\u662f\u4ec0\u4e48\uff0c\u5176\u5e95\u5c42\u662f\u5982\u4f55\u5b9e\u73b0\u7684","text":"<p>Redis\u7684Sorted Set\uff08\u6709\u5e8f\u96c6\u5408\uff09\uff0c\u901a\u5e38\u4e5f\u79f0\u4e3aZSet\uff0c\u662fRedis\u4e2d\u4e00\u79cd\u975e\u5e38\u91cd\u8981\u4e14\u529f\u80fd\u5f3a\u5927\u7684\u6570\u636e\u7c7b\u578b\u3002\u5b83\u4e0e\u666e\u901a\u7684Set\uff08\u96c6\u5408\uff09\u7c7b\u4f3c\uff0c\u90fd\u5b58\u50a8\u4e0d\u91cd\u590d\u7684\u5b57\u7b26\u4e32\u5143\u7d20\uff08\u6210\u5458\uff0cmember\uff09\uff0c\u4f46\u5176\u6838\u5fc3\u533a\u522b\u5728\u4e8e\uff0cSorted Set\u4e2d\u7684\u6bcf\u4e2a\u6210\u5458\u90fd\u4f1a\u5173\u8054\u4e00\u4e2adouble\u7c7b\u578b\u7684\u6d6e\u70b9\u6570\u5206\u6570\uff08score\uff09\u3002Redis\u6b63\u662f\u901a\u8fc7\u8fd9\u4e2a\u5206\u6570\u6765\u4e3a\u96c6\u5408\u4e2d\u7684\u6210\u5458\u8fdb\u884c\u6392\u5e8f\u7684\u3002</p> <p>Sorted Set\u7684\u4e3b\u8981\u7279\u6027\uff1a</p> <ol> <li> <p>\u6709\u5e8f\u6027\uff1a</p> <ul> <li>\u96c6\u5408\u4e2d\u7684\u6210\u5458\u662f\u6839\u636e\u5176\u5173\u8054\u7684\u5206\u6570\u8fdb\u884c\u5347\u5e8f\u6392\u5217\u7684\u3002\u8fd9\u610f\u5473\u7740\u4f60\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u83b7\u53d6\u5230\u6309\u5206\u6570\u6392\u5e8f\u7684\u6210\u5458\u5217\u8868\u3002</li> <li>\u5982\u679c\u591a\u4e2a\u6210\u5458\u62e5\u6709\u76f8\u540c\u7684\u5206\u6570\uff0c\u5219\u5b83\u4eec\u4f1a\u6309\u7167\u5b57\u5178\u5e8f\uff08lexicographical order\uff09\u8fdb\u884c\u6392\u5e8f\uff08\u5177\u4f53\u662f\u5b57\u8282\u5e8f\u6bd4\u8f83\uff09\u3002</li> </ul> </li> <li> <p>\u552f\u4e00\u6027\uff1a</p> <ul> <li>\u4e0e\u666e\u901aSet\u4e00\u6837\uff0cSorted Set\u4e2d\u7684\u6210\u5458\uff08member\uff09\u662f\u552f\u4e00\u7684\uff0c\u4e0d\u5141\u8bb8\u91cd\u590d\u3002\u5982\u679c\u5c1d\u8bd5\u6dfb\u52a0\u4e00\u4e2a\u5df2\u5b58\u5728\u7684\u6210\u5458\uff0c\u4f46\u5206\u6570\u4e0d\u540c\uff0c\u5219\u4f1a\u66f4\u65b0\u8be5\u6210\u5458\u7684\u5206\u6570\uff0c\u5e76\u91cd\u65b0\u8c03\u6574\u5176\u5728\u96c6\u5408\u4e2d\u7684\u4f4d\u7f6e\u3002</li> </ul> </li> <li> <p>\u6210\u5458\u4e0e\u5206\u6570\u7684\u5173\u8054\uff1a</p> <ul> <li>\u6bcf\u4e2a\u6210\u5458\u90fd\u552f\u4e00\u5bf9\u5e94\u4e00\u4e2a\u5206\u6570\u3002\u8fd9\u4e2a\u5206\u6570\u4f7f\u5f97Sorted Set\u4e0d\u4ec5\u4ec5\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u6709\u5e8f\u5217\u8868\uff0c\u66f4\u50cf\u662f\u4e00\u4e2a\u201c\u6392\u540d\u8868\u201d\u6216\u201c\u5e26\u6743\u91cd\u7684\u96c6\u5408\u201d\u3002</li> </ul> </li> </ol> <p>\u5e95\u5c42\u5b9e\u73b0\uff1a</p> <p>Redis Sorted Set\u7684\u5e95\u5c42\u5b9e\u73b0\u662f\u4e00\u4e2a\u975e\u5e38\u7cbe\u5de7\u7684\u8bbe\u8ba1\uff0c\u5b83\u4f1a\u6839\u636e\u5b58\u50a8\u5143\u7d20\u7684\u6570\u91cf\u548c\u5927\u5c0f\u52a8\u6001\u9009\u62e9\u4e0d\u540c\u7684\u7f16\u7801\u65b9\u5f0f\uff0c\u4ee5\u5728\u65f6\u95f4\u548c\u7a7a\u95f4\u6548\u7387\u4e0a\u8fbe\u5230\u5e73\u8861\u3002\u4e3b\u8981\u6709\u4e24\u79cd\u7f16\u7801\u65b9\u5f0f\uff1a</p> <ol> <li> <p>\u538b\u7f29\u5217\u8868\uff08Ziplist\uff09\uff1a</p> <ul> <li>\u5f53Sorted Set\u4e2d\u5305\u542b\u7684\u5143\u7d20\u6570\u91cf\u8f83\u5c11\uff0c\u5e76\u4e14\u6bcf\u4e2a\u5143\u7d20\uff08\u6210\u5458\u548c\u5206\u6570\uff09\u672c\u8eab\u4e5f\u8f83\u5c0f\uff08\u4f8b\u5982\uff0c\u6210\u5458\u662f\u77ed\u5b57\u7b26\u4e32\uff0c\u5206\u6570\u662f\u53ef\u4ee5\u7528\u6574\u6570\u8868\u793a\u7684\u5c0f\u6d6e\u70b9\u6570\uff09\u65f6\uff0cRedis\u4f1a\u91c7\u7528\u538b\u7f29\u5217\u8868\uff08ziplist\uff09\u4f5c\u4e3a\u5176\u5e95\u5c42\u5b9e\u73b0\u3002</li> <li>\u5728ziplist\u4e2d\uff0c\u6bcf\u4e2aSorted Set\u7684\u5143\u7d20\uff08\u6210\u5458\u548c\u5206\u6570\u5bf9\uff09\u4f1a\u4f5c\u4e3a\u4e00\u4e2aentry\u7d27\u51d1\u5730\u5b58\u50a8\u3002\u4e3a\u4e86\u4fdd\u6301\u6709\u5e8f\uff0c\u63d2\u5165\u65b0\u5143\u7d20\u65f6\uff0c\u4f1a\u627e\u5230\u5408\u9002\u7684\u4f4d\u7f6e\u63d2\u5165\uff0c\u8fd9\u53ef\u80fd\u6d89\u53ca\u79fb\u52a8\u540e\u7eed\u5143\u7d20\u3002</li> <li>\u6210\u5458\u548c\u5206\u6570\u662f\u8fde\u7eed\u5b58\u50a8\u7684\uff0c\u901a\u5e38\u662f\u6210\u5458\u5728\u524d\uff0c\u5206\u6570\u5728\u540e\u3002</li> <li>\u4f18\u70b9\uff1a\u5185\u5b58\u5360\u7528\u6781\u5c0f\uff0c\u975e\u5e38\u8282\u7701\u7a7a\u95f4\u3002</li> <li>\u7f3a\u70b9\uff1a\u5f53\u5143\u7d20\u6570\u91cf\u589e\u591a\u6216\u5355\u4e2a\u5143\u7d20\u53d8\u5927\u65f6\uff0c\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u7684\u6027\u80fd\u4f1a\u4e0b\u964d\uff0c\u56e0\u4e3a\u53ef\u80fd\u9700\u8981\u79fb\u52a8\u5927\u91cf\u6570\u636e\u6216\u89e6\u53d1\u8fde\u9501\u66f4\u65b0\u3002\u67e5\u627e\u64cd\u4f5c\u4e5f\u9700\u8981\u904d\u5386\u3002</li> </ul> </li> <li> <p>\u8df3\u8dc3\u8868\uff08Skip List\uff09\u548c\u5b57\u5178\uff08Dictionary/Hash Table\uff09\u7684\u7ec4\u5408\uff1a</p> <ul> <li>\u5f53Sorted Set\u4e2d\u7684\u5143\u7d20\u6570\u91cf\u8d85\u8fc7\u4e00\u5b9a\u9608\u503c\uff08\u7531<code>zset-max-ziplist-entries</code>\u914d\u7f6e\uff0c\u9ed8\u8ba4\u4e3a128\uff09\uff0c\u6216\u8005\u4efb\u4f55\u4e00\u4e2a\u6210\u5458\u7684\u957f\u5ea6\u8d85\u8fc7\u4e00\u5b9a\u9608\u503c\uff08\u7531<code>zset-max-ziplist-value</code>\u914d\u7f6e\uff0c\u9ed8\u8ba4\u4e3a64\u5b57\u8282\uff09\u65f6\uff0cRedis\u4f1a\u81ea\u52a8\u5c06\u5e95\u5c42\u7f16\u7801\u4eceziplist\u8f6c\u6362\u4e3a\u8df3\u8dc3\u8868\u548c\u5b57\u5178\u7684\u7ec4\u5408\u3002</li> <li> <p>\u8fd9\u79cd\u7ec4\u5408\u7ed3\u6784\u662fSorted Set\u66f4\u901a\u7528\u7684\u3001\u6027\u80fd\u66f4\u4f18\u7684\u5b9e\u73b0\u65b9\u5f0f\uff1a</p> <ul> <li>\u8df3\u8dc3\u8868\uff08Skip List\uff09\uff1a<ul> <li>\u4f5c\u7528\uff1a\u7528\u4e8e\u6309\u7167\u5206\u6570\u5bf9\u6210\u5458\u8fdb\u884c\u6392\u5e8f\u548c\u8303\u56f4\u67e5\u627e\u3002</li> <li>\u7ed3\u6784\uff1a\u8df3\u8dc3\u8868\u662f\u4e00\u79cd\u6709\u5e8f\u7684\u3001\u591a\u5c42\u94fe\u8868\u7ed3\u6784\u3002\u6bcf\u4e2a\u8282\u70b9\u5b58\u50a8\u4e86\u6210\u5458\uff08member\uff09\u548c\u5176\u5bf9\u5e94\u7684\u5206\u6570\uff08score\uff09\u3002\u8282\u70b9\u4e4b\u95f4\u901a\u8fc7\u591a\u7ea7\u6307\u9488\u8fde\u63a5\uff0c\u4f7f\u5f97\u67e5\u627e\u3001\u63d2\u5165\u3001\u5220\u9664\u7684\u5e73\u5747\u65f6\u95f4\u590d\u6742\u5ea6\u53ef\u4ee5\u8fbe\u5230O(log N)\u3002\u8df3\u8dc3\u8868\u4e2d\u7684\u8282\u70b9\u662f\u6309\u5206\u6570\u6392\u5e8f\u7684\uff0c\u5206\u6570\u76f8\u540c\u5219\u6309\u6210\u5458\u7684\u5b57\u5178\u5e8f\u6392\u5e8f\u3002</li> <li>\u6bcf\u4e2a\u8df3\u8dc3\u8868\u8282\u70b9\uff08<code>zskiplistNode</code>\uff09\u5305\u542b\uff1a<ul> <li>\u6210\u5458\uff08<code>ele</code>\uff09\uff1a\u4e00\u4e2a\u6307\u5411\u5b9e\u9645\u6210\u5458\u5b57\u7b26\u4e32\uff08SDS\uff09\u7684\u6307\u9488\u3002</li> <li>\u5206\u6570\uff08<code>score</code>\uff09\uff1adouble\u7c7b\u578b\u3002</li> <li>\u540e\u9000\u6307\u9488\uff08<code>backward</code>\uff09\uff1a\u6307\u5411\u524d\u4e00\u4e2a\u8282\u70b9\u7684\u6307\u9488\uff0c\u7528\u4e8e\u4ece\u8868\u5c3e\u5411\u524d\u904d\u5386\u3002</li> <li>\u5c42\u7ea7\u6570\u7ec4\uff08<code>level[]</code>\uff09\uff1a\u5305\u542b\u591a\u4e2a\u5c42\u7ea7\uff0c\u6bcf\u4e2a\u5c42\u7ea7\uff08<code>zskiplistLevel</code>\uff09\u5305\u542b\uff1a<ul> <li>\u524d\u8fdb\u6307\u9488\uff08<code>forward</code>\uff09\uff1a\u6307\u5411\u540c\u4e00\u5c42\u7ea7\u7684\u4e0b\u4e00\u4e2a\u8282\u70b9\u3002</li> <li>\u8de8\u5ea6\uff08<code>span</code>\uff09\uff1a\u8868\u793a\u8be5\u524d\u8fdb\u6307\u9488\u8de8\u8d8a\u4e86\u591a\u5c11\u4e2a\u8282\u70b9\u3002\u7528\u4e8e\u5feb\u901f\u8ba1\u7b97\u6392\u540d\u3002</li> </ul> </li> </ul> </li> </ul> </li> <li>\u5b57\u5178\uff08Dictionary/Hash Table\uff09\uff1a<ul> <li>\u4f5c\u7528\uff1a\u7528\u4e8e\u4ee5O(1)\u7684\u5e73\u5747\u65f6\u95f4\u590d\u6742\u5ea6\u5feb\u901f\u67e5\u627e\u6307\u5b9a\u6210\u5458\u7684\u5206\u6570\u3002</li> <li>\u7ed3\u6784\uff1a\u5b57\u5178\u7684\u952e\u662f\u6210\u5458\uff08member\uff0cSDS\u7c7b\u578b\uff09\uff0c\u503c\u662f\u8be5\u6210\u5458\u7684\u5206\u6570\uff08score\uff0cdouble\u7c7b\u578b\uff09\u3002</li> <li>\u8fd9\u6837\uff0c\u5f53\u9700\u8981\u66f4\u65b0\u67d0\u4e2a\u6210\u5458\u7684\u5206\u6570\uff0c\u6216\u8005\u67e5\u8be2\u67d0\u4e2a\u6210\u5458\u7684\u5206\u6570\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u5b57\u5178\u5feb\u901f\u5b9a\u4f4d\uff0c\u800c\u4e0d\u9700\u8981\u904d\u5386\u8df3\u8dc3\u8868\u3002</li> </ul> </li> </ul> </li> <li> <p>\u4e24\u8005\u5982\u4f55\u534f\u540c\u5de5\u4f5c\uff1a</p> <ul> <li>\u8df3\u8dc3\u8868\u548c\u5b57\u5178\u5171\u4eab\u6210\u5458\u7684\u5b57\u7b26\u4e32\u5bf9\u8c61\uff08SDS\uff09\uff0c\u4ee5\u8282\u7701\u5185\u5b58\u3002\u5373\uff0c\u8df3\u8dc3\u8868\u8282\u70b9\u4e2d\u7684\u6210\u5458\u6307\u9488\u548c\u5b57\u5178\u952e\u4e2d\u7684\u6210\u5458\u6307\u9488\u6307\u5411\u540c\u4e00\u4e2aSDS\u5bf9\u8c61\u3002</li> <li>\u5f53\u5bf9Sorted Set\u8fdb\u884c\u64cd\u4f5c\u65f6\uff08\u5982<code>ZADD</code>, <code>ZREM</code>, <code>ZSCORE</code>\u7b49\uff09\uff0cRedis\u4f1a\u540c\u65f6\u66f4\u65b0\u8df3\u8dc3\u8868\u548c\u5b57\u5178\uff0c\u4ee5\u4fdd\u6301\u4e24\u8005\u6570\u636e\u7684\u4e00\u81f4\u6027\u3002</li> <li>\u4f8b\u5982\uff0c\u6267\u884c<code>ZADD</code>\u6dfb\u52a0\u4e00\u4e2a\u65b0\u6210\u5458\u65f6\uff1a<ol> <li>\u5148\u5728\u5b57\u5178\u4e2d\u67e5\u627e\u8be5\u6210\u5458\u662f\u5426\u5b58\u5728\u3002</li> <li>\u5982\u679c\u4e0d\u5b58\u5728\u6216\u5206\u6570\u9700\u8981\u66f4\u65b0\uff0c\u5219\u5728\u5b57\u5178\u4e2d\u6dfb\u52a0/\u66f4\u65b0\u8be5\u6210\u5458\u53ca\u5176\u5206\u6570\u3002</li> <li>\u540c\u65f6\uff0c\u5728\u8df3\u8dc3\u8868\u4e2d\u63d2\u5165/\u66f4\u65b0\u5305\u542b\u8be5\u6210\u5458\u548c\u5206\u6570\u7684\u65b0\u8282\u70b9\uff08\u5982\u679c\u5206\u6570\u53d8\u5316\uff0c\u53ef\u80fd\u9700\u8981\u5148\u5220\u9664\u65e7\u8282\u70b9\u518d\u63d2\u5165\u65b0\u8282\u70b9\u4ee5\u7ef4\u6301\u987a\u5e8f\uff09\u3002</li> </ol> </li> <li>\u901a\u8fc7\u8fd9\u79cd\u7ec4\u5408\uff0cSorted Set\u65e2\u80fd\u9ad8\u6548\u5730\u8fdb\u884c\u6309\u6210\u5458\u67e5\u627e\uff08\u901a\u8fc7\u5b57\u5178\uff09\uff0c\u4e5f\u80fd\u9ad8\u6548\u5730\u8fdb\u884c\u6309\u5206\u6570\u6392\u5e8f\u3001\u8303\u56f4\u67e5\u627e\u548c\u6392\u540d\u67e5\u8be2\uff08\u901a\u8fc7\u8df3\u8dc3\u8868\uff09\u3002</li> </ul> </li> </ul> </li> </ol> <p>\u603b\u7ed3\u5e95\u5c42\u5b9e\u73b0\u7684\u5173\u952e\u70b9\uff1a *   Redis Sorted Set\u91c7\u7528\u52a8\u6001\u7f16\u7801\uff0c\u4f1a\u6839\u636e\u5143\u7d20\u6570\u91cf\u548c\u5927\u5c0f\u9009\u62e9\u4f7f\u7528ziplist\u6216\u8df3\u8dc3\u8868+\u5b57\u5178\u7684\u7ec4\u5408\u3002 *   Ziplist\u7f16\u7801\uff1a\u9002\u7528\u4e8e\u5c0f\u6570\u636e\u91cf\u3001\u5c0f\u5143\u7d20\u7684\u573a\u666f\uff0c\u6781\u81f4\u8282\u7701\u5185\u5b58\u3002 *   \u8df3\u8dc3\u8868+\u5b57\u5178\u7f16\u7801\uff1a\u9002\u7528\u4e8e\u5927\u6570\u636e\u91cf\u6216\u5927\u5143\u7d20\u7684\u573a\u666f\uff0c\u63d0\u4f9b\u4e86\u4f18\u79c0\u7684\u7efc\u5408\u6027\u80fd\u3002     *   \u5b57\u5178\u4fdd\u8bc1\u4e86\u6309\u6210\u5458\u540d\u67e5\u627e\u5206\u6570\u7684O(1)\u6548\u7387\u3002     *   \u8df3\u8dc3\u8868\u4fdd\u8bc1\u4e86\u6309\u5206\u6570\u6392\u5e8f\u4ee5\u53ca\u8303\u56f4\u67e5\u8be2\u3001\u6392\u540d\u67e5\u8be2\u7684O(log N)\u6548\u7387\u3002     *   \u4e24\u8005\u5171\u4eab\u6210\u5458\u6570\u636e\u4ee5\u8282\u7ea6\u5185\u5b58\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%20LFU%E7%AD%96%E7%95%A5%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/","title":"redis LFU\u7b56\u7565\u662f\u5982\u4f55\u5b9e\u73b0\u7684","text":"<p>Redis \u4ece 4.0 \u7248\u672c\u5f00\u59cb\u5f15\u5165 LFU \u6dd8\u6c70\u7b56\u7565\uff0c\u65e8\u5728\u89e3\u51b3 LRU (Least Recently Used, \u6700\u8fd1\u6700\u5c11\u4f7f\u7528) \u7b56\u7565\u65e0\u6cd5\u6709\u6548\u5904\u7406\u201c\u5076\u53d1\u6027\u6279\u91cf\u8bbf\u95ee\u201d\u573a\u666f\u7684\u7f3a\u9677\u3002LFU \u7684\u6838\u5fc3\u601d\u60f3\u662f\uff0c\u6dd8\u6c70\u8fd1\u671f\u6700\u4e0d\u5e38\u88ab\u8bbf\u95ee\u7684\u6570\u636e\uff0c\u5b83\u8ba4\u4e3a\u8fc7\u53bb\u4e00\u6bb5\u65f6\u95f4\u5185\u8bbf\u95ee\u9891\u7387\u9ad8\u7684\u6570\u636e\uff0c\u5728\u672a\u6765\u88ab\u8bbf\u95ee\u7684\u6982\u7387\u4e5f\u66f4\u9ad8\u3002</p> <p>\u4e3a\u4e86\u5728\u4e0d\u5f15\u5165\u989d\u5916\u6570\u636e\u7ed3\u6784\u3001\u8282\u7701\u5185\u5b58\u7684\u524d\u63d0\u4e0b\u5b9e\u73b0 LFU\uff0cRedis \u590d\u7528\u4e86\u6bcf\u4e2a\u5bf9\u8c61\u5934\uff08<code>redisObject</code>\uff09\u4e2d\u539f\u7528\u4e8e LRU \u7684 24-bit <code>lru</code> \u5b57\u6bb5\u3002\u5b83\u5de7\u5999\u5730\u5c06\u8fd9 24 \u4f4d\u62c6\u5206\u4e3a\u4e24\u90e8\u5206\uff0c\u4ee5\u540c\u65f6\u8bb0\u5f55\u8bbf\u95ee\u65f6\u95f4\u548c\u8bbf\u95ee\u9891\u7387\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%20LFU%E7%AD%96%E7%95%A5%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/#lru","title":"<code>lru</code> \u5b57\u6bb5\u7684\u518d\u5206\u914d","text":"<p>\u5728 LFU \u6a21\u5f0f\u4e0b\uff0c24 \u4f4d\u7684 <code>lru</code> \u5b57\u6bb5\u88ab\u5212\u5206\u4e3a\uff1a</p> <ul> <li>\u9ad8 16 \u4f4d\uff1aldt (Last Decrement Time)\uff0c\u7528\u4e8e\u8bb0\u5f55\u8ba1\u6570\u5668\u6700\u540e\u4e00\u6b21\u8870\u51cf\u7684\u65f6\u95f4\u3002</li> <li>\u4f4e 8 \u4f4d\uff1alogc (Logistic Counter)\uff0c\u7528\u4e8e\u8bb0\u5f55\u4e00\u4e2a\u57fa\u4e8e\u5bf9\u6570\u589e\u957f\u7684\u8bbf\u95ee\u9891\u7387\u8ba1\u6570\u5668\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%20LFU%E7%AD%96%E7%95%A5%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/#_1","title":"\u5173\u952e\u7ec4\u6210\u90e8\u5206","text":""},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%20LFU%E7%AD%96%E7%95%A5%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/#1-ldt-last-decrement-time-","title":"1. ldt (Last Decrement Time) - \u8bb0\u5f55\u65f6\u95f4","text":"<p><code>ldt</code> \u5360\u636e\u4e86\u9ad8 16 \u4f4d\uff0c\u5b83\u5b58\u50a8\u7684\u4e0d\u662f\u4e00\u4e2a\u6807\u51c6\u7684 Unix \u65f6\u95f4\u6233\uff0c\u800c\u662f Unix \u65f6\u95f4\u6233\uff08\u79d2\uff09\u9664\u4ee5 60 \u540e\u7684\u5206\u949f\u6570\uff0c\u518d\u5bf9 2^16 (65535) \u53d6\u6a21\u7684\u7ed3\u679c\u3002</p> <ul> <li>\u4e3a\u4ec0\u4e48\u662f\u5206\u949f\uff1f \u8fd9\u6837\u505a\u53ef\u4ee5\u5927\u5927\u5ef6\u957f 16 \u4f4d\u6240\u80fd\u8868\u793a\u7684\u65f6\u95f4\u8303\u56f4\u300216 \u4f4d\u7684\u6700\u5927\u503c\u4e3a 65535\uff0c\u5982\u679c\u4ee5\u5206\u949f\u4e3a\u5355\u4f4d\uff0c\u5927\u7ea6\u53ef\u4ee5\u8868\u793a 65535 \u5206\u949f\uff0c\u7ea6\u7b49\u4e8e 45.5 \u5929\u3002\u8fd9\u610f\u5473\u7740\u65f6\u95f4\u6233\u5927\u7ea6\u6bcf 45.5 \u5929\u4f1a\u53d1\u751f\u4e00\u6b21\u201c\u6298\u8fd4\u201d\uff08\u4ece 65535 \u56de\u5230 0\uff09\u3002</li> <li>\u65f6\u95f4\u5dee\u8ba1\u7b97\uff1a\u5f53\u9700\u8981\u8ba1\u7b97\u8ddd\u79bb\u4e0a\u6b21\u8870\u51cf\u8fc7\u53bb\u4e86\u591a\u4e45\u65f6\uff0cRedis \u4f1a\u7528\u5f53\u524d\u7684\u5206\u949f\u65f6\u95f4\u6233\u51cf\u53bb <code>ldt</code>\u3002\u4e3a\u4e86\u5904\u7406\u201c\u6298\u8fd4\u201d\u95ee\u9898\uff0c\u4ee3\u7801\u4f1a\u5224\u65ad\u5f53\u524d\u65f6\u95f4\u6233\u662f\u5426\u5c0f\u4e8e <code>ldt</code>\uff0c\u5982\u679c\u5c0f\u4e8e\uff0c\u5219\u8ba4\u4e3a\u53d1\u751f\u4e86\u4e00\u6b21\u6298\u8fd4\uff0c\u8ba1\u7b97\u65f6\u4f1a\u52a0\u4e0a 65535\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%20LFU%E7%AD%96%E7%95%A5%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/#2-logc-logistic-counter-","title":"2. logc (Logistic Counter) - \u8bb0\u5f55\u9891\u7387","text":"<p><code>logc</code> \u4f7f\u7528\u4f4e 8 \u4f4d\uff0c\u5176\u6700\u5927\u503c\u53ea\u80fd\u5230 255\u3002\u663e\u7136\uff0c\u5b83\u65e0\u6cd5\u76f4\u63a5\u8bb0\u5f55\u4e00\u4e2a key \u7684\u771f\u5b9e\u8bbf\u95ee\u603b\u6b21\u6570\u3002\u56e0\u6b64\uff0cRedis \u91c7\u7528\u4e86\u4e00\u79cd\u5de7\u5999\u7684\u5bf9\u6570\u589e\u957f\u65b9\u5f0f\u6765\u7ba1\u7406\u8fd9\u4e2a\u8ba1\u6570\u5668\u3002</p> <p>\u521d\u59cb\u503c \u6bcf\u4e2a\u65b0\u521b\u5efa\u7684 key\uff0c\u5176 <code>logc</code> \u521d\u59cb\u503c\u88ab\u8bbe\u7f6e\u4e3a <code>LFU_INIT_VAL</code>\uff08\u9ed8\u8ba4\u4e3a 5\uff09\u3002\u8fd9\u6837\u505a\u662f\u4e3a\u4e86\u8ba9\u65b0\u52a0\u5165\u7684\u6570\u636e\u6709\u4e00\u5b9a\u7684\u201c\u4fdd\u62a4\u671f\u201d\uff0c\u4e0d\u4f1a\u56e0\u4e3a\u521d\u59cb\u9891\u7387\u4e3a 0 \u800c\u7acb\u5373\u88ab\u6dd8\u6c70\u6c60\u4e2d\u7684\u8001\u6570\u636e\u66ff\u6362\u6389\uff0c\u8fd9\u7ed9\u4e88\u4e86\u65b0\u6570\u636e\u201c\u8868\u73b0\u201d\u7684\u673a\u4f1a\u3002</p> <p>\u8ba1\u6570\u5668\u589e\u957f (LFULogIncr) \u5f53\u4e00\u4e2a key \u88ab\u8bbf\u95ee\u65f6\uff0c\u5b83\u7684 <code>logc</code> \u8ba1\u6570\u5668\u5e76\u4e0d\u4f1a\u7b80\u5355\u5730\u52a0 1\uff0c\u800c\u662f\u6839\u636e\u4e00\u4e2a\u6982\u7387\u6a21\u578b\u6765\u51b3\u5b9a\u662f\u5426\u589e\u52a0\uff1a</p> <ol> <li>\u6700\u5927\u503c\u9650\u5236\uff1a\u5982\u679c\u8ba1\u6570\u5668\u5df2\u7ecf\u8fbe\u5230 255\uff0c\u5219\u4e0d\u518d\u589e\u52a0\u3002</li> <li>\u6982\u7387\u8ba1\u7b97\uff1a\u589e\u957f\u7684\u6982\u7387 <code>p</code> \u662f\u901a\u8fc7\u4e00\u4e2a\u516c\u5f0f\u8ba1\u7b97\u5f97\u51fa\u7684\uff1a<code>p = 1.0 / ( (counter - LFU_INIT_VAL) * lfu-log-factor + 1 )</code>\u3002</li> <li>\u968f\u673a\u51b3\u7b56\uff1a\u7cfb\u7edf\u4f1a\u751f\u6210\u4e00\u4e2a 0 \u5230 1 \u4e4b\u95f4\u7684\u968f\u673a\u6570 <code>r</code>\uff0c\u53ea\u6709\u5f53 <code>r &lt; p</code> \u65f6\uff0c\u8ba1\u6570\u5668\u624d\u4f1a\u52a0 1\u3002</li> </ol> <p>\u4ece\u8fd9\u4e2a\u516c\u5f0f\u53ef\u4ee5\u770b\u51fa\uff1a *   <code>counter</code> \u503c\u8d8a\u5c0f\uff0c<code>p</code> \u7684\u503c\u8d8a\u5927\uff0c\u8ba1\u6570\u5668\u589e\u957f\u7684\u6982\u7387\u5c31\u8d8a\u9ad8\u3002 *   <code>lfu-log-factor</code>\uff1a\u8fd9\u4e2a\u53ef\u914d\u7f6e\u7684\u201c\u5bf9\u6570\u56e0\u5b50\u201d\uff08\u9ed8\u8ba4\u4e3a 10\uff09\u8d77\u5230\u4e86\u5173\u952e\u7684\u8c03\u8282\u4f5c\u7528\u3002\u56e0\u5b50\u8d8a\u5927\uff0c<code>p</code> \u7684\u503c\u8d8a\u5c0f\uff0c\u8ba1\u6570\u5668\u589e\u957f\u5f97\u5c31\u8d8a\u6162\u3002\u8fd9\u610f\u5473\u7740\u4f60\u9700\u8981\u66f4\u591a\u6b21\u7684\u8bbf\u95ee\u624d\u80fd\u8ba9\u8ba1\u6570\u5668\u589e\u52a0\u3002</p> <p>\u8fd9\u79cd\u8bbe\u8ba1\u4f7f\u5f97 <code>logc</code> \u7684\u589e\u957f\u5448\u73b0\u51fa\u4e00\u79cd\u5bf9\u6570\u66f2\u7ebf\u7684\u5f62\u6001\uff1a\u5728\u8bbf\u95ee\u521d\u671f\uff0c\u8ba1\u6570\u5668\u589e\u957f\u8f83\u5feb\uff1b\u4f46\u968f\u7740\u8bbf\u95ee\u9891\u7387\u7684\u63d0\u9ad8\uff0c\u9700\u8981\u66f4\u591a\u7684\u8bbf\u95ee\u6b21\u6570\u624d\u80fd\u8ba9\u8ba1\u6570\u5668\u518d\u589e\u52a0 1\u3002\u8fd9\u6709\u6548\u5730\u5c06\u4e00\u4e2a\u53ef\u80fd\u65e0\u9650\u5927\u7684\u8bbf\u95ee\u6b21\u6570\u6620\u5c04\u5230\u4e86 0-255 \u8fd9\u4e2a\u6709\u9650\u7684\u533a\u95f4\u5185\u3002</p> <p>\u8ba1\u6570\u5668\u8870\u51cf (LFUDecrAndReturn) \u5982\u679c\u4e00\u4e2a key \u957f\u65f6\u95f4\u4e0d\u88ab\u8bbf\u95ee\uff0c\u5b83\u7684\u70ed\u5ea6\u5e94\u8be5\u968f\u65f6\u95f4\u4e0b\u964d\u3002<code>logc</code> \u7684\u8870\u51cf\u673a\u5236\u6b63\u662f\u4e3a\u6b64\u8bbe\u8ba1\u7684\uff1a</p> <ol> <li>\u8ba1\u7b97\u8870\u51cf\u5468\u671f\uff1a\u9996\u5148\uff0c\u901a\u8fc7 <code>ldt</code> \u8ba1\u7b97\u51fa\u8ddd\u79bb\u4e0a\u6b21\u8870\u51cf\u8fc7\u53bb\u4e86\u591a\u5c11\u5206\u949f (<code>elapsed_minutes</code>)\u3002</li> <li>\u8ba1\u7b97\u8870\u51cf\u503c\uff1a\u7136\u540e\u7528 <code>elapsed_minutes</code> \u9664\u4ee5\u53ef\u914d\u7f6e\u7684 <code>lfu-decay-time</code>\uff08\u8870\u51cf\u65f6\u95f4\uff0c\u5355\u4f4d\u5206\u949f\uff0c\u9ed8\u8ba4\u4e3a 1\uff09\uff0c\u5f97\u51fa\u9700\u8981\u8870\u51cf\u7684\u201c\u5468\u671f\u6570\u201d (<code>num_periods</code>)\u3002\u8fd9\u4e2a\u503c\u5c31\u662f <code>logc</code> \u9700\u8981\u51cf\u53bb\u7684\u6570\u503c\u3002</li> <li>\u6267\u884c\u8870\u51cf\uff1a\u5c06\u5f53\u524d\u7684 <code>logc</code> \u503c\u51cf\u53bb <code>num_periods</code>\u3002\u5982\u679c <code>num_periods</code> \u5927\u4e8e <code>logc</code>\uff0c\u5219 <code>logc</code> \u76f4\u63a5\u53d8\u4e3a 0\u3002</li> </ol> <p>\u8fd9\u4e2a\u673a\u5236\u610f\u5473\u7740\uff0c<code>lfu-decay-time</code> \u7684\u503c\u8d8a\u5927\uff0c\u8ba1\u6570\u5668\u8870\u51cf\u5f97\u8d8a\u6162\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a 0\uff0c\u5219\u8868\u793a\u4e0d\u8fdb\u884c\u8870\u51cf\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%20LFU%E7%AD%96%E7%95%A5%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/#3-eviction-pool","title":"3. \u6dd8\u6c70\u6c60 (Eviction Pool)","text":"<p>\u548c LRU \u4e00\u6837\uff0c\u5f53 Redis \u5185\u5b58\u8fbe\u5230 <code>maxmemory</code> \u9650\u5236\u9700\u8981\u8fdb\u884c\u6570\u636e\u6dd8\u6c70\u65f6\uff0c\u5b83\u5e76\u4e0d\u4f1a\u904d\u5386\u6240\u6709\u7684 key \u53bb\u5bfb\u627e\u6700\u4e0d\u9891\u7e41\u4f7f\u7528\u7684\u90a3\u4e00\u4e2a\uff08\u56e0\u4e3a\u6027\u80fd\u5f00\u9500\u592a\u5927\uff09\u3002</p> <p>\u53d6\u800c\u4ee3\u4e4b\u7684\u662f\uff0cRedis \u4f1a\u6839\u636e\u914d\u7f6e\u7684\u7b56\u7565\uff08\u5982 <code>allkeys-lfu</code> \u6216 <code>volatile-lfu</code>\uff09\u8fdb\u884c \u968f\u673a\u91c7\u6837\u3002\u5b83\u4f1a\u968f\u673a\u9009\u51fa\u82e5\u5e72\u4e2a key\uff08\u9ed8\u8ba4\u4e3a 5 \u4e2a\uff09\uff0c\u5c06\u5b83\u4eec\u653e\u5165\u4e00\u4e2a\u5927\u5c0f\u56fa\u5b9a\u7684\u201c\u6dd8\u6c70\u6c60\u201d\u4e2d\u3002\u6dd8\u6c70\u6c60\u4e2d\u7684 key \u4f1a\u6839\u636e\u5176\u201c\u70ed\u5ea6\u201d\uff08\u5373 <code>logc</code> \u7684\u503c\uff09\u8fdb\u884c\u6392\u5e8f\u3002</p> <p>\u6bcf\u6b21\u9700\u8981\u6dd8\u6c70\u6570\u636e\u65f6\uff0cRedis \u5c31\u4f1a\u4ece\u6dd8\u6c70\u6c60\u4e2d\u9009\u62e9 <code>logc</code> \u503c\u6700\u5c0f\u7684\u90a3\u4e2a key \u8fdb\u884c\u6dd8\u6c70\u3002\u540c\u65f6\uff0c\u65b0\u7684\u91c7\u6837\u5019\u9009 key \u4f1a\u4e0d\u65ad\u5730\u88ab\u653e\u5165\u6dd8\u6c70\u6c60\uff0c\u5e76\u6324\u51fa\u6c60\u4e2d\u70ed\u5ea6\u8f83\u9ad8\u7684 key\uff0c\u4ece\u800c\u7ef4\u6301\u6c60\u4e2d\u59cb\u7ec8\u4fdd\u7559\u7740\u5f53\u524d\u5df2\u91c7\u6837\u8303\u56f4\u5185\u6700\u201c\u51b7\u201d\u7684\u6570\u636e\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%20LRU%E7%AD%96%E7%95%A5%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/","title":"redis LRU\u7b56\u7565\u662f\u5982\u4f55\u5b9e\u73b0\u7684","text":"<p>Redis \u4e3a\u4e86\u5728\u6027\u80fd\u548c\u5185\u5b58\u4f7f\u7528\u4e4b\u95f4\u53d6\u5f97\u5e73\u8861\uff0c\u5e76\u6ca1\u6709\u5b9e\u73b0\u4f20\u7edf\u610f\u4e49\u4e0a\u7cbe\u786e\u7684 LRU\uff08Least Recently Used\uff0c\u6700\u8fd1\u6700\u5c11\u4f7f\u7528\uff09\u7b97\u6cd5\uff0c\u800c\u662f\u91c7\u7528\u4e86\u4e00\u79cd\u8fd1\u4f3c LRU \u7b97\u6cd5\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%20LRU%E7%AD%96%E7%95%A5%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/#lru","title":"\u4f20\u7edf LRU \u7b97\u6cd5\u539f\u7406","text":"<p>\u9996\u5148\uff0c\u7406\u89e3\u6807\u51c6\u7684 LRU \u7b97\u6cd5\u662f\u7406\u89e3 Redis \u5b9e\u73b0\u7684\u57fa\u7840\u3002\u6807\u51c6\u7684 LRU \u7b97\u6cd5\u901a\u5e38\u901a\u8fc7\u54c8\u5e0c\u8868 + \u53cc\u5411\u94fe\u8868\u5b9e\u73b0\uff1a</p> <ul> <li>\u54c8\u5e0c\u8868 (Hash Table): \u7528\u4e8e\u5b58\u50a8\u952e\u548c\u5bf9\u5e94\u94fe\u8868\u8282\u70b9\u7684\u6620\u5c04\uff0c\u786e\u4fdd\u53ef\u4ee5 O(1) \u590d\u6742\u5ea6\u5feb\u901f\u67e5\u627e\u5230\u6570\u636e\u3002</li> <li>\u53cc\u5411\u94fe\u8868 (Doubly Linked List): \u7528\u4e8e\u7ef4\u62a4\u6570\u636e\u7684\u8bbf\u95ee\u987a\u5e8f\u3002\u6240\u6709\u6570\u636e\u90fd\u5728\u8fd9\u4e2a\u94fe\u8868\u4e2d\uff0c\u94fe\u8868\u5934\u90e8\u662f\u6700\u8fd1\u8bbf\u95ee\u7684\u6570\u636e\uff0c\u5c3e\u90e8\u662f\u6700\u4e45\u672a\u8bbf\u95ee\u7684\u6570\u636e\u3002</li> </ul> <p>\u5de5\u4f5c\u6d41\u7a0b\u5982\u4e0b\uff1a 1.  \u6570\u636e\u8bbf\u95ee\uff1a \u5f53\u4e00\u4e2a\u6570\u636e\u88ab\u8bbf\u95ee\u65f6\uff0c\u901a\u8fc7\u54c8\u5e0c\u8868\u627e\u5230\u5176\u5728\u94fe\u8868\u4e2d\u7684\u4f4d\u7f6e\uff0c\u7136\u540e\u5c06\u5176\u79fb\u52a8\u5230\u94fe\u8868\u5934\u90e8\u3002 2.  \u6570\u636e\u65b0\u589e\uff1a \u65b0\u6570\u636e\u63d2\u5165\u65f6\uff0c\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u8282\u70b9\u5e76\u653e\u7f6e\u5728\u94fe\u8868\u5934\u90e8\u3002 3.  \u6570\u636e\u6dd8\u6c70\uff1a \u5f53\u7f13\u5b58\u7a7a\u95f4\u5df2\u6ee1\u9700\u8981\u6dd8\u6c70\u6570\u636e\u65f6\uff0c\u76f4\u63a5\u5c06\u94fe\u8868\u5c3e\u90e8\u7684\u8282\u70b9\u79fb\u9664\u3002</p> <p>\u8fd9\u79cd\u5b9e\u73b0\u7684\u4f18\u70b9\u662f\u7b97\u6cd5\u7cbe\u5ea6\u9ad8\uff0c\u603b\u80fd\u6dd8\u6c70\u6389\u6700\u4e45\u672a\u4f7f\u7528\u7684\u6570\u636e\u3002\u4f46\u7f3a\u70b9\u662f\u9700\u8981\u989d\u5916\u7684\u5185\u5b58\u7a7a\u95f4\u6765\u7ef4\u62a4\u53cc\u5411\u94fe\u8868\uff0c\u5e76\u4e14\u6bcf\u6b21\u6570\u636e\u8bbf\u95ee\u90fd\u9700\u8981\u79fb\u52a8\u94fe\u8868\u8282\u70b9\uff0c\u5728\u9ad8\u5e76\u53d1\u573a\u666f\u4e0b\u4f1a\u5e26\u6765\u6027\u80fd\u5f00\u9500\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%20LRU%E7%AD%96%E7%95%A5%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/#redis-lru","title":"Redis \u7684\u8fd1\u4f3c LRU \u7b97\u6cd5\u5b9e\u73b0","text":"<p>\u8003\u8651\u5230\u5185\u5b58\u5360\u7528\u548c\u6027\u80fd\u95ee\u9898\uff0cRedis \u7684\u4f5c\u8005\u8ba4\u4e3a\u4e25\u683c\u7684 LRU \u5b9e\u73b0\u8fc7\u4e8e\u590d\u6742\u548c\u8017\u8d39\u8d44\u6e90\u3002 \u56e0\u6b64\uff0cRedis \u91c7\u7528\u4e86\u727a\u7272\u4e00\u90e8\u5206\u51c6\u786e\u6027\u6765\u6362\u53d6\u66f4\u9ad8\u6548\u7387\u548c\u66f4\u5c11\u5185\u5b58\u5360\u7528\u7684\u8fd1\u4f3c LRU \u7b97\u6cd5\u3002</p> <p>\u5176\u6838\u5fc3\u5b9e\u73b0\u4f9d\u8d56\u4e8e\u4ee5\u4e0b\u4e24\u70b9\uff1a</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%20LRU%E7%AD%96%E7%95%A5%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/#a-redisobject","title":"a. \u5728 <code>redisObject</code> \u4e2d\u8bb0\u5f55\u8bbf\u95ee\u65f6\u95f4\u6233","text":"<p>Redis \u7684\u6bcf\u4e2a\u952e\u503c\u5bf9\u90fd\u662f\u4e00\u4e2a <code>redisObject</code> \u5bf9\u8c61\u3002\u5728\u8fd9\u4e2a\u5bf9\u8c61\u7ed3\u6784\u4e2d\uff0c\u6709\u4e00\u4e2a\u540d\u4e3a <code>lru</code> \u7684 24 \u4f4d\uff08bit\uff09\u5b57\u6bb5\u3002</p> <pre><code>typedef struct redisObject {\n    unsigned type:4;\n    unsigned encoding:4;\n    unsigned lru:24; // \u5728LRU\u6a21\u5f0f\u4e0b\uff0c\u8bb0\u5f55\u6700\u540e\u4e00\u6b21\u8bbf\u95ee\u7684\u65f6\u95f4\u6233\n    int refcount;\n    void *ptr;\n} robj;\n</code></pre> <ul> <li>\u5f53\u542f\u7528\u4e86 LRU \u76f8\u5173\u7684\u6dd8\u6c70\u7b56\u7565\u65f6\uff0c\u8fd9\u4e2a <code>lru</code> \u5b57\u6bb5\u4f1a\u5b58\u50a8\u4e00\u4e2a\u76f8\u5bf9\u4e8e\u5168\u5c40\u65f6\u949f <code>server.lruclock</code> \u7684\u65f6\u95f4\u6233\u3002</li> <li>\u6bcf\u6b21\u4e00\u4e2a\u952e\u88ab\u8bbf\u95ee\uff08\u8bfb\u53d6\u6216\u4fee\u6539\uff09\u65f6\uff0cRedis \u5c31\u4f1a\u66f4\u65b0\u8fd9\u4e2a\u952e\u5bf9\u5e94 <code>redisObject</code> \u7684 <code>lru</code> \u5b57\u6bb5\u4e3a\u5f53\u524d\u7684 <code>server.lruclock</code> \u503c\u3002</li> <li>\u7531\u4e8e <code>lru</code> \u5b57\u6bb5\u53ea\u6709 24 \u4f4d\uff0c\u6309\u79d2\u4e3a\u5355\u4f4d\u7684\u65f6\u95f4\u6233\u5927\u7ea6\u80fd\u5b58\u50a8 194 \u5929\uff0c\u8d85\u8fc7\u540e\u4f1a\u53d1\u751f\u56de\u7ed5\uff08wrap around\uff09\uff0c\u4f46\u8fd9\u5bf9\u4e8e\u7f13\u5b58\u573a\u666f\u6765\u8bf4\u901a\u5e38\u8db3\u591f\u4e86\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%20LRU%E7%AD%96%E7%95%A5%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/#b","title":"b. \u57fa\u4e8e\u968f\u673a\u91c7\u6837\u7684\u6dd8\u6c70\u673a\u5236","text":"<p>\u5f53 Redis \u7684\u5185\u5b58\u4f7f\u7528\u8fbe\u5230 <code>maxmemory</code> \u4e0a\u9650\u5e76\u9700\u8981\u89e6\u53d1\u6dd8\u6c70\u65f6\uff0c\u5b83\u5e76\u4e0d\u4f1a\u904d\u5386\u6240\u6709\u7684\u952e\u6765\u627e\u51fa\u90a3\u4e2a <code>lru</code> \u503c\u6700\u5c0f\uff08\u5373\u6700\u4e45\u672a\u8bbf\u95ee\uff09\u7684\u952e\u3002 \u8fd9\u6837\u505a\u4f1a\u975e\u5e38\u8017\u65f6\u3002</p> <p>\u53d6\u800c\u4ee3\u4e4b\u7684\u662f\uff0cRedis \u6267\u884c\u4ee5\u4e0b\u6b65\u9aa4\uff1a</p> <ol> <li>\u968f\u673a\u91c7\u6837\uff1a \u4ece\u6240\u6709\u7684\u952e\u4e2d\uff0c\u968f\u673a\u9009\u53d6 N \u4e2a\u952e\uff08\u8fd9\u4e2a N \u503c\u53ef\u4ee5\u901a\u8fc7 <code>maxmemory-samples</code> \u53c2\u6570\u914d\u7f6e\uff0c\u9ed8\u8ba4\u4e3a 5\uff09\u3002</li> <li>\u6bd4\u8f83\u6dd8\u6c70\uff1a \u6bd4\u8f83\u8fd9 N \u4e2a\u88ab\u91c7\u6837\u952e\u7684 <code>lru</code> \u65f6\u95f4\u6233\uff0c\u5c06\u5176\u4e2d\u65f6\u95f4\u6233\u6700\u5c0f\uff08\u4e5f\u5c31\u662f\u6700\u4e45\u6ca1\u6709\u88ab\u8bbf\u95ee\uff09\u7684\u90a3\u4e2a\u952e\u6dd8\u6c70\u51fa\u53bb\u3002</li> <li>\u5faa\u73af\u6267\u884c\uff1a \u8fd9\u4e2a\u6dd8\u6c70\u8fc7\u7a0b\u4f1a\u4e00\u76f4\u6267\u884c\uff0c\u76f4\u5230\u5185\u5b58\u4f7f\u7528\u964d\u5230 <code>maxmemory</code> \u9650\u5236\u4ee5\u4e0b\u3002</li> </ol> <p>Redis 3.0 \u53ca\u4ee5\u540e\u7684\u4f18\u5316\uff1a</p> <p>\u4e3a\u4e86\u63d0\u9ad8\u8fd1\u4f3c LRU \u7b97\u6cd5\u7684\u7cbe\u5ea6\uff0cRedis 3.0 \u5f15\u5165\u4e86\u4e00\u4e2a\u5019\u9009\u6c60 (eviction pool)\u3002</p> <ul> <li>\u8fd9\u4e2a\u5019\u9009\u6c60\u5927\u5c0f\u4e3a 16\uff0c\u7528\u4e8e\u5b58\u653e\u5f85\u6dd8\u6c70\u7684\u5019\u9009\u952e\u3002</li> <li>\u968f\u673a\u91c7\u6837\u51fa\u7684 N \u4e2a\u952e\u4f1a\u548c\u5019\u9009\u6c60\u4e2d\u7684\u952e\u8fdb\u884c\u6bd4\u8f83\u3002</li> <li>\u65b0\u91c7\u6837\u7684\u952e\u5982\u679c\u5176\u7a7a\u95f2\u65f6\u95f4\uff08<code>server.lruclock</code> - <code>key.lru</code>\uff09\u5927\u4e8e\u5019\u9009\u6c60\u4e2d\u7a7a\u95f2\u65f6\u95f4\u6700\u5c0f\u7684\u952e\uff0c\u5219\u4f1a\u8fdb\u5165\u5019\u9009\u6c60\uff0c\u5e76\u6324\u6389\u539f\u6765\u6c60\u4e2d\u7a7a\u95f2\u65f6\u95f4\u6700\u5c0f\u7684\u952e\u3002</li> <li>\u6700\u7ec8\u9700\u8981\u6dd8\u6c70\u65f6\uff0c\u4f1a\u4ece\u5019\u9009\u6c60\u4e2d\u9009\u62e9\u7a7a\u95f2\u65f6\u95f4\u6700\u957f\u7684\u952e\u8fdb\u884c\u6dd8\u6c70\u3002</li> </ul> <p>\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u91c7\u6837\u8fc7\u7a0b\u53ef\u4ee5\u9010\u6b65\u7b5b\u9009\u51fa\u66f4\u63a5\u8fd1\u5168\u5c40\u6700\u4e45\u672a\u88ab\u8bbf\u95ee\u7684\u952e\uff0c\u4f7f\u5f97\u7b97\u6cd5\u6548\u679c\u66f4\u903c\u8fd1\u771f\u5b9e\u7684 LRU\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%20LRU%E7%AD%96%E7%95%A5%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/#redis-lru_1","title":"Redis LRU \u7b56\u7565\u7684\u4f18\u7f3a\u70b9","text":"<p>\u4f18\u70b9\uff1a</p> <ul> <li>\u8282\u7701\u5185\u5b58\uff1a \u65e0\u9700\u50cf\u4f20\u7edf LRU \u90a3\u6837\u7ef4\u62a4\u4e00\u4e2a\u5e9e\u5927\u7684\u53cc\u5411\u94fe\u8868\uff0c\u6781\u5927\u5730\u8282\u7701\u4e86\u5185\u5b58\u7a7a\u95f4\u3002</li> <li>\u6027\u80fd\u9ad8\uff1a \u907f\u514d\u4e86\u6bcf\u6b21\u6570\u636e\u8bbf\u95ee\u65f6\u5bf9\u94fe\u8868\u7684\u590d\u6742\u64cd\u4f5c\uff0c\u53ea\u5728\u9700\u8981\u6dd8\u6c70\u65f6\u8fdb\u884c\u91c7\u6837\u548c\u6bd4\u8f83\uff0c\u6027\u80fd\u635f\u8017\u5c0f\u3002</li> <li>\u7cbe\u5ea6\u53ef\u8c03\uff1a \u901a\u8fc7\u8c03\u6574 <code>maxmemory-samples</code> \u53c2\u6570\uff0c\u53ef\u4ee5\u5728\u7b97\u6cd5\u7cbe\u5ea6\u548c\u6027\u80fd\u4e4b\u95f4\u8fdb\u884c\u6743\u8861\u3002\u91c7\u6837\u503c\u8d8a\u5927\uff0c\u7b97\u6cd5\u8d8a\u63a5\u8fd1\u771f\u5b9e LRU\uff0c\u4f46\u6027\u80fd\u6d88\u8017\u4e5f\u76f8\u5e94\u589e\u52a0\u3002</li> </ul> <p>\u7f3a\u70b9\uff1a</p> <ul> <li>\u975e\u4e25\u683c\u7cbe\u786e\uff1a \u7531\u4e8e\u662f\u8fd1\u4f3c\u5b9e\u73b0\uff0c\u65e0\u6cd5\u4fdd\u8bc1\u6bcf\u6b21\u90fd\u6dd8\u6c70\u6389\u5168\u5c40\u6700\u4e45\u672a\u88ab\u4f7f\u7528\u7684\u952e\uff0c\u53ef\u80fd\u4f1a\u8bef\u6dd8\u6c70\u4e00\u4e9b\u76f8\u5bf9\u8f83\u70ed\u7684\u6570\u636e\u3002</li> <li>\u7f13\u5b58\u6c61\u67d3\u95ee\u9898\uff1a LRU \u7b97\u6cd5\u7684\u4e00\u4e2a\u56fa\u6709\u7f3a\u9677\u662f\uff0c\u5982\u679c\u4e00\u4e2a\u5f88\u4e45\u672a\u88ab\u8bbf\u95ee\u7684\u6570\u636e\u88ab\u5076\u7136\u8bbf\u95ee\u4e86\u4e00\u6b21\uff0c\u5b83\u7684\u6392\u540d\u4f1a\u7acb\u523b\u63d0\u524d\uff0c\u5bfc\u81f4\u771f\u6b63\u9891\u7e41\u8bbf\u95ee\u7684\u70ed\u70b9\u6570\u636e\u53ef\u80fd\u56e0\u4e3a\u6700\u8fd1\u6ca1\u6709\u88ab\u8bbf\u95ee\u800c\u88ab\u6dd8\u6c70\u3002 \u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0cRedis 4.0 \u5f15\u5165\u4e86 LFU\uff08\u6700\u4e0d\u5e38\u7528\uff09\u7b56\u7565\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%E5%86%85%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5%E4%BB%8B%E7%BB%8D/","title":"Redis\u5185\u5b58\u6dd8\u6c70\u7b56\u7565\u4ecb\u7ecd","text":"<p>\u5f53 Redis \u7684\u5185\u5b58\u4f7f\u7528\u8fbe\u5230\u8bbe\u5b9a\u7684\u4e0a\u9650 (<code>maxmemory</code>) \u65f6\uff0c\u4f1a\u89e6\u53d1\u5185\u5b58\u6dd8\u6c70\u7b56\u7565\uff0c\u4ee5\u786e\u4fdd\u6709\u8db3\u591f\u7684\u7a7a\u95f4\u6765\u5904\u7406\u65b0\u7684\u5199\u5165\u8bf7\u6c42\u3002\u8fd9\u4e9b\u7b56\u7565\u51b3\u5b9a\u4e86\u5728\u5185\u5b58\u4e0d\u8db3\u65f6\u54ea\u4e9b\u952e\u5e94\u8be5\u88ab\u5220\u9664\u3002\u4ee5\u4e0b\u662f Redis \u5185\u5b58\u6dd8\u6c70\u7b56\u7565\u7684\u8be6\u7ec6\u4ecb\u7ecd\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%E5%86%85%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5%E4%BB%8B%E7%BB%8D/#_1","title":"\u5982\u4f55\u914d\u7f6e\u5185\u5b58\u6dd8\u6c70\u7b56\u7565","text":"<p>\u5728 Redis \u4e2d\uff0c\u901a\u8fc7\u4ee5\u4e0b\u4e24\u4e2a\u914d\u7f6e\u6307\u4ee4\u6765\u63a7\u5236\u5185\u5b58\u6dd8\u6c70\uff1a</p> <ul> <li><code>maxmemory &lt;bytes&gt;</code>: \u8bbe\u7f6e Redis \u53ef\u4ee5\u4f7f\u7528\u7684\u6700\u5927\u5185\u5b58\u3002\u5f53\u5185\u5b58\u4f7f\u7528\u8fbe\u5230\u8fd9\u4e2a\u9608\u503c\u65f6\uff0c\u5c31\u4f1a\u89e6\u53d1\u6dd8\u6c70\u7b56\u7565\u3002\u53ef\u4ee5\u5728 <code>redis.conf</code> \u6587\u4ef6\u4e2d\u8bbe\u7f6e\uff0c\u6216\u8005\u901a\u8fc7 <code>CONFIG SET</code> \u547d\u4ee4\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539\u3002</li> <li><code>maxmemory-policy &lt;policy&gt;</code>: \u8bbe\u7f6e\u5177\u4f53\u7684\u5185\u5b58\u6dd8\u6c70\u7b56\u7565\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%E5%86%85%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5%E4%BB%8B%E7%BB%8D/#_2","title":"\u516b\u79cd\u5185\u5b58\u6dd8\u6c70\u7b56\u7565","text":"<p>Redis \u63d0\u4f9b\u4e86\u516b\u79cd\u4e0d\u540c\u7684\u5185\u5b58\u6dd8\u6c70\u7b56\u7565\uff0c\u53ef\u4ee5\u5206\u4e3a\u4e24\u5927\u7c7b\uff1a\u9488\u5bf9\u6240\u6709\u952e\u548c\u4ec5\u9488\u5bf9\u8bbe\u7f6e\u4e86\u8fc7\u671f\u65f6\u95f4\u7684\u952e\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%E5%86%85%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5%E4%BB%8B%E7%BB%8D/#_3","title":"\u4e0d\u6dd8\u6c70\u7b56\u7565","text":"<ol> <li>noeviction:<ul> <li>\u63cf\u8ff0: \u8fd9\u662f Redis \u7684\u9ed8\u8ba4\u7b56\u7565\u3002\u5f53\u5185\u5b58\u4f7f\u7528\u8fbe\u5230 <code>maxmemory</code> \u4e0a\u9650\u65f6\uff0c\u4e0d\u4f1a\u5220\u9664\u4efb\u4f55\u6570\u636e\u3002\u76f8\u53cd\uff0c\u5bf9\u4e8e\u4f1a\u5bfc\u81f4\u5185\u5b58\u589e\u52a0\u7684\u5199\u5165\u547d\u4ee4\uff08\u5982 <code>SET</code>, <code>LPUSH</code> \u7b49\uff09\uff0cRedis \u4f1a\u8fd4\u56de\u9519\u8bef\u3002\u4f46\u8bfb\u547d\u4ee4\u4ecd\u7136\u53ef\u4ee5\u6b63\u5e38\u6267\u884c\u3002</li> <li>\u9002\u7528\u573a\u666f: \u5f53\u6bcf\u4e2a\u952e\u90fd\u975e\u5e38\u91cd\u8981\uff0c\u4e0d\u5141\u8bb8\u56e0\u4e3a\u5185\u5b58\u4e0d\u8db3\u800c\u88ab\u5220\u9664\u65f6\u3002\u9002\u7528\u4e8e\u5c06 Redis \u4f5c\u4e3a\u6301\u4e45\u5316\u5b58\u50a8\u800c\u975e\u7f13\u5b58\u7684\u573a\u666f\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%E5%86%85%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5%E4%BB%8B%E7%BB%8D/#allkeys","title":"\u9488\u5bf9\u6240\u6709\u952e (allkeys) \u7684\u6dd8\u6c70\u7b56\u7565","text":"<p>\u8fd9\u4e9b\u7b56\u7565\u4f1a\u4ece\u6240\u6709\u7684\u952e\u4e2d\uff08\u65e0\u8bba\u662f\u5426\u8bbe\u7f6e\u4e86\u8fc7\u671f\u65f6\u95f4\uff09\u9009\u53d6\u8981\u6dd8\u6c70\u7684\u6570\u636e\u3002</p> <ol> <li> <p>allkeys-lru:</p> <ul> <li>\u63cf\u8ff0: \u91c7\u7528\u8fd1\u4f3c LRU (Least Recently Used) \u7b97\u6cd5\uff0c\u4ece\u6240\u6709\u952e\u4e2d\u6dd8\u6c70\u6700\u8fd1\u6700\u5c11\u4f7f\u7528\u7684\u6570\u636e\u3002 Redis \u5e76\u975e\u5b9e\u73b0\u4e86\u4e00\u4e2a\u5b8c\u7f8e\u7684 LRU\uff0c\u800c\u662f\u901a\u8fc7\u5bf9\u5c11\u91cf\u952e\u8fdb\u884c\u91c7\u6837\uff0c\u5e76\u4ece\u4e2d\u9009\u62e9\u6700\u4e45\u672a\u88ab\u8bbf\u95ee\u7684\u952e\u8fdb\u884c\u6dd8\u6c70\u3002</li> <li>\u9002\u7528\u573a\u666f: \u5f53\u4f60\u9884\u671f\u6570\u636e\u96c6\u4e2d\u6709\u4e00\u90e8\u5206\u6570\u636e\u4f1a\u88ab\u9891\u7e41\u8bbf\u95ee\uff0c\u800c\u5176\u4ed6\u6570\u636e\u5219\u5f88\u5c11\u88ab\u8bbf\u95ee\u65f6\uff0c\u8fd9\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u9009\u62e9\uff08\u7b26\u5408\u5e15\u7d2f\u6258\u6cd5\u5219\uff09\u3002\u8fd9\u662f\u6700\u5e38\u7528\u7684\u7b56\u7565\u4e4b\u4e00\u3002</li> </ul> </li> <li> <p>allkeys-lfu:</p> <ul> <li>\u63cf\u8ff0: \u4ece Redis 4.0 \u5f00\u59cb\u5f15\u5165\uff0c\u91c7\u7528\u8fd1\u4f3c LFU (Least Frequently Used) \u7b97\u6cd5\uff0c\u4ece\u6240\u6709\u952e\u4e2d\u6dd8\u6c70\u8bbf\u95ee\u9891\u7387\u6700\u4f4e\u7684\u6570\u636e\u3002 LFU \u4f1a\u8ddf\u8e2a\u6bcf\u4e2a\u952e\u7684\u8bbf\u95ee\u9891\u7387\uff0c\u4f18\u5148\u6dd8\u6c70\u90a3\u4e9b\u5f88\u5c11\u88ab\u8bbf\u95ee\u7684\u952e\u3002 \u5982\u679c\u8bbf\u95ee\u9891\u7387\u76f8\u540c\uff0c\u5219\u4f1a\u6bd4\u8f83\u8bbf\u95ee\u65f6\u95f4\u7684\u8fdc\u8fd1\u3002</li> <li>\u9002\u7528\u573a\u666f: \u5982\u679c\u4f60\u7684\u5e94\u7528\u573a\u666f\u4e2d\uff0c\u67d0\u4e9b\u6570\u636e\u5728\u4e00\u6bb5\u65f6\u95f4\u5185\u4f1a\u88ab\u6301\u7eed\u9ad8\u9891\u8bbf\u95ee\uff0c\u800c LRU \u7b56\u7565\u53ef\u80fd\u4f1a\u56e0\u4e3a\u4e00\u4e9b\u5076\u7136\u7684\u8fd1\u671f\u8bbf\u95ee\u800c\u4fdd\u7559\u4e0d\u91cd\u8981\u7684\u6570\u636e\uff0c\u6b64\u65f6 LFU \u662f\u66f4\u597d\u7684\u9009\u62e9\u3002</li> </ul> </li> <li> <p>allkeys-random:</p> <ul> <li>\u63cf\u8ff0: \u4ece\u6240\u6709\u952e\u4e2d\u968f\u673a\u9009\u62e9\u4e00\u4e2a\u952e\u8fdb\u884c\u6dd8\u6c70\u3002</li> <li>\u9002\u7528\u573a\u666f: \u5f53\u6240\u6709\u952e\u7684\u8bbf\u95ee\u6a21\u5f0f\u6ca1\u6709\u660e\u663e\u7684\u70ed\u70b9\u533a\u5206\uff0c\u8bbf\u95ee\u6982\u7387\u5927\u81f4\u76f8\u540c\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u6b64\u7b56\u7565\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%E5%86%85%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5%E4%BB%8B%E7%BB%8D/#volatile","title":"\u4ec5\u9488\u5bf9\u8bbe\u7f6e\u4e86\u8fc7\u671f\u65f6\u95f4\u7684\u952e (volatile) \u7684\u6dd8\u6c70\u7b56\u7565","text":"<p>\u8fd9\u4e9b\u7b56\u7565\u53ea\u4f1a\u4ece\u8bbe\u7f6e\u4e86\u8fc7\u671f\u65f6\u95f4\uff08TTL\uff09\u7684\u952e\u4e2d\u8fdb\u884c\u6dd8\u6c70\u3002</p> <ol> <li> <p>volatile-lru:</p> <ul> <li>\u63cf\u8ff0: \u91c7\u7528\u8fd1\u4f3c LRU \u7b97\u6cd5\uff0c\u4ece\u8bbe\u7f6e\u4e86\u8fc7\u671f\u65f6\u95f4\u7684\u952e\u4e2d\u6dd8\u6c70\u6700\u8fd1\u6700\u5c11\u4f7f\u7528\u7684\u6570\u636e\u3002</li> <li>\u9002\u7528\u573a\u666f: \u5f53\u4f60\u5e0c\u671b\u4fdd\u7559\u90a3\u4e9b\u6ca1\u6709\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\u7684\u6301\u4e45\u5316\u6570\u636e\uff0c\u800c\u53ea\u5728\u9700\u8981\u65f6\u6dd8\u6c70\u90a3\u4e9b\u4f5c\u4e3a\u7f13\u5b58\u4e14\u8bbe\u7f6e\u4e86\u8fc7\u671f\u65f6\u95f4\u7684\u6570\u636e\u65f6\u4f7f\u7528\u3002</li> </ul> </li> <li> <p>volatile-lfu:</p> <ul> <li>\u63cf\u8ff0: \u4ece Redis 4.0 \u5f00\u59cb\u5f15\u5165\uff0c\u91c7\u7528\u8fd1\u4f3c LFU \u7b97\u6cd5\uff0c\u4ece\u8bbe\u7f6e\u4e86\u8fc7\u671f\u65f6\u95f4\u7684\u952e\u4e2d\u6dd8\u6c70\u8bbf\u95ee\u9891\u7387\u6700\u4f4e\u7684\u6570\u636e\u3002</li> <li>\u9002\u7528\u573a\u666f: \u4e0e <code>allkeys-lfu</code> \u7c7b\u4f3c\uff0c\u4f46\u6dd8\u6c70\u8303\u56f4\u4ec5\u9650\u4e8e\u8bbe\u7f6e\u4e86\u8fc7\u671f\u65f6\u95f4\u7684\u952e\u3002</li> </ul> </li> <li> <p>volatile-random:</p> <ul> <li>\u63cf\u8ff0: \u4ece\u8bbe\u7f6e\u4e86\u8fc7\u671f\u65f6\u95f4\u7684\u952e\u4e2d\u968f\u673a\u9009\u62e9\u4e00\u4e2a\u8fdb\u884c\u6dd8\u6c70\u3002</li> <li>\u9002\u7528\u573a\u666f: \u5f53\u8bbe\u7f6e\u4e86\u8fc7\u671f\u65f6\u95f4\u7684\u952e\u6ca1\u6709\u660e\u663e\u7684\u8bbf\u95ee\u4f18\u5148\u7ea7\u65f6\u4f7f\u7528\u3002</li> </ul> </li> <li> <p>volatile-ttl:</p> <ul> <li>\u63cf\u8ff0: \u4ece\u8bbe\u7f6e\u4e86\u8fc7\u671f\u65f6\u95f4\u7684\u952e\u4e2d\uff0c\u9009\u62e9\u5269\u4f59\u751f\u5b58\u65f6\u95f4\uff08TTL\uff09\u6700\u77ed\u7684\u952e\u8fdb\u884c\u6dd8\u6c70\u3002</li> <li>\u9002\u7528\u573a\u666f: \u5f53\u4f60\u53ef\u4ee5\u901a\u8fc7\u4e3a\u952e\u8bbe\u7f6e\u4e0d\u540c\u7684\u8fc7\u671f\u65f6\u95f4\u6765\u9884\u4f30\u5176\u91cd\u8981\u6027\u65f6\uff0c\u8fd9\u4e2a\u7b56\u7565\u975e\u5e38\u6709\u7528\u3002 \u5b83\u53ef\u4ee5\u5e2e\u52a9\u4f18\u5316\u6027\u80fd\uff0c\u4f18\u5148\u6dd8\u6c70\u5373\u5c06\u8fc7\u671f\u7684\u6570\u636e\uff0c\u4ece\u800c\u4fdd\u7559\u66f4\u591a\u6709\u6548\u6570\u636e\u3002</li> </ul> </li> </ol> <p>\u91cd\u8981\u63d0\u793a\uff1a\u5982\u679c\u4f7f\u7528 <code>volatile-*</code> \u7b56\u7565\uff0c\u4f46\u5f53\u524d\u5185\u5b58\u4e2d\u6ca1\u6709\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\u7684\u952e\uff0c\u90a3\u4e48\u5728\u5185\u5b58\u6ee1\u65f6\uff0c\u5176\u884c\u4e3a\u5c06\u548c <code>noeviction</code> \u7b56\u7565\u4e00\u6837\uff0c\u4e0d\u4f1a\u6dd8\u6c70\u4efb\u4f55\u6570\u636e\uff0c\u5e76\u5bf9\u5199\u64cd\u4f5c\u8fd4\u56de\u9519\u8bef\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%E5%86%85%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5%E4%BB%8B%E7%BB%8D/#_4","title":"\u5982\u4f55\u9009\u62e9\u5408\u9002\u7684\u6dd8\u6c70\u7b56\u7565","text":"<p>\u9009\u62e9\u54ea\u79cd\u6dd8\u6c70\u7b56\u7565\u53d6\u51b3\u4e8e\u4f60\u7684\u5e94\u7528\u573a\u666f\u548c\u6570\u636e\u8bbf\u95ee\u6a21\u5f0f\uff1a</p> <ul> <li>\u901a\u7528\u7f13\u5b58\u573a\u666f: \u5982\u679c\u4e0d\u786e\u5b9a\u4f7f\u7528\u54ea\u79cd\u7b56\u7565\uff0c<code>allkeys-lru</code> \u662f\u4e00\u4e2a\u5f88\u597d\u7684\u8d77\u70b9\uff0c\u56e0\u4e3a\u5b83\u5728\u5f88\u591a\u573a\u666f\u4e0b\u90fd\u8868\u73b0\u826f\u597d\u3002</li> <li>\u70ed\u70b9\u6570\u636e\u660e\u663e: \u5982\u679c\u4f60\u7684\u5e94\u7528\u6709\u660e\u663e\u7684\u70ed\u70b9\u6570\u636e\uff0c<code>allkeys-lru</code> \u6216 <code>allkeys-lfu</code> \u901a\u5e38\u662f\u6700\u4f73\u9009\u62e9\u3002LFU \u80fd\u66f4\u597d\u5730\u5904\u7406\u90a3\u4e9b\u5728\u4e00\u6bb5\u65f6\u95f4\u5185\u88ab\u96c6\u4e2d\u8bbf\u95ee\u7684\u6570\u636e\u3002</li> <li>\u8bbf\u95ee\u6a21\u5f0f\u5e73\u5747: \u5982\u679c\u6240\u6709\u6570\u636e\u7684\u8bbf\u95ee\u9891\u7387\u548c\u6982\u7387\u90fd\u5dee\u4e0d\u591a\uff0c<code>allkeys-random</code> \u662f\u4e00\u4e2a\u4e0d\u9519\u7684\u9009\u62e9\u3002</li> <li>\u4e34\u65f6\u7f13\u5b58\u4e0e\u6301\u4e45\u6570\u636e\u5171\u5b58: \u5982\u679c\u4f60\u7684 Redis \u4e2d\u540c\u65f6\u5b58\u50a8\u4e86\u9700\u8981\u6301\u4e45\u5316\u7684\u6570\u636e\u548c\u4e34\u65f6\u7f13\u5b58\u6570\u636e\uff0c\u5e94\u8be5\u4f7f\u7528 <code>volatile-*</code> \u7b56\u7565\uff0c\u5e76\u4e3a\u7f13\u5b58\u6570\u636e\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\u3002\u8fd9\u6837\u53ef\u4ee5\u786e\u4fdd\u6301\u4e45\u5316\u7684\u6570\u636e\u4e0d\u4f1a\u88ab\u6dd8\u6c70\u3002</li> <li>\u57fa\u4e8e\u8fc7\u671f\u65f6\u95f4\u7684\u4f18\u5148\u7ea7: \u5982\u679c\u4f60\u53ef\u4ee5\u901a\u8fc7\u8fc7\u671f\u65f6\u95f4\u7684\u8bbe\u7f6e\u6765\u63a7\u5236\u6570\u636e\u7684\u4f18\u5148\u7ea7\uff0c<code>volatile-ttl</code> \u662f\u4e00\u4e2a\u975e\u5e38\u6709\u6548\u7684\u7b56\u7565\u3002</li> </ul> \u7b56\u7565 \u63cf\u8ff0 noeviction \u9ed8\u8ba4\u7b56\u7565\uff0c\u5185\u5b58\u6ee1\u65f6\u5199\u5165\u62a5\u9519\uff0c\u4e0d\u5220\u9664\u4efb\u4f55\u6570\u636e\u3002 allkeys-lru \u4ece\u6240\u6709\u952e\u4e2d\u6dd8\u6c70\u6700\u4e45\u672a\u4f7f\u7528\u7684\u952e\u3002 allkeys-lfu \u4ece\u6240\u6709\u952e\u4e2d\u6dd8\u6c70\u4f7f\u7528\u9891\u7387\u6700\u4f4e\u7684\u952e\u3002 allkeys-random \u4ece\u6240\u6709\u952e\u4e2d\u968f\u673a\u6dd8\u6c70\u4e00\u4e2a\u952e\u3002 volatile-lru \u4ece\u8bbe\u7f6e\u4e86\u8fc7\u671f\u65f6\u95f4\u7684\u952e\u4e2d\u6dd8\u6c70\u6700\u4e45\u672a\u4f7f\u7528\u7684\u952e\u3002 volatile-lfu \u4ece\u8bbe\u7f6e\u4e86\u8fc7\u671f\u65f6\u95f4\u7684\u952e\u4e2d\u6dd8\u6c70\u4f7f\u7528\u9891\u7387\u6700\u4f4e\u7684\u952e\u3002 volatile-random \u4ece\u8bbe\u7f6e\u4e86\u8fc7\u671f\u65f6\u95f4\u7684\u952e\u4e2d\u968f\u673a\u6dd8\u6c70\u4e00\u4e2a\u952e\u3002 volatile-ttl \u4ece\u8bbe\u7f6e\u4e86\u8fc7\u671f\u65f6\u95f4\u7684\u952e\u4e2d\u6dd8\u6c70\u5269\u4f59\u751f\u5b58\u65f6\u95f4\u6700\u77ed\u7684\u952e\u3002"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96%E7%9A%84/","title":"Redis\u662f\u5982\u4f55\u5b9e\u73b0\u6570\u636e\u6301\u4e45\u5316\u7684","text":"<p>Redis\u4e3a\u4e86\u9632\u6b62\u56e0\u8fdb\u7a0b\u9000\u51fa\u6216\u670d\u52a1\u5668\u5b95\u673a\u5bfc\u81f4\u5185\u5b58\u4e2d\u7684\u6570\u636e\u4e22\u5931\uff0c\u63d0\u4f9b\u4e86\u591a\u79cd\u6301\u4e45\u5316\u673a\u5236\uff0c\u5c06\u6570\u636e\u5199\u5165\u786c\u76d8\u3002 \u4e3b\u8981\u7684\u6301\u4e45\u5316\u65b9\u5f0f\u6709RDB\uff08Redis Database\uff09\u3001AOF\uff08Append Only File\uff09\u4ee5\u53ca\u4e24\u8005\u7684\u6df7\u5408\u6301\u4e45\u5316\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96%E7%9A%84/#1-rdb-redis-database","title":"1. RDB (Redis Database) \u5feb\u7167","text":"<p>RDB\u662fRedis\u9ed8\u8ba4\u7684\u6301\u4e45\u5316\u65b9\u5f0f\uff0c\u5b83\u901a\u8fc7\u521b\u5efa\u5185\u5b58\u6570\u636e\u7684\u5feb\u7167\u6765\u5b9e\u73b0\u3002 RDB\u6587\u4ef6\u662f\u4e00\u4e2a\u7ecf\u8fc7\u538b\u7f29\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u8bb0\u5f55\u4e86\u67d0\u4e2a\u65f6\u95f4\u70b9\u4e0a\u7684\u6570\u636e\u96c6\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96%E7%9A%84/#_1","title":"\u5de5\u4f5c\u539f\u7406","text":"<p>RDB\u7684\u89e6\u53d1\u65b9\u5f0f\u5206\u4e3a\u624b\u52a8\u89e6\u53d1\u548c\u81ea\u52a8\u89e6\u53d1\u3002</p> <ul> <li> <p>\u624b\u52a8\u89e6\u53d1:</p> <ul> <li><code>SAVE</code>: \u8fd9\u4e2a\u547d\u4ee4\u4f1a\u963b\u585eRedis\u4e3b\u7ebf\u7a0b\uff0c\u76f4\u5230RDB\u6587\u4ef6\u521b\u5efa\u5b8c\u6bd5\u3002\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4e0d\u5efa\u8bae\u4f7f\u7528\uff0c\u56e0\u4e3a\u4f1a\u957f\u65f6\u95f4\u963b\u585e\u5ba2\u6237\u7aef\u8bf7\u6c42\u3002</li> <li><code>BGSAVE</code>: <code>BGSAVE</code>\u4f1a\u521b\u5efa\u4e00\u4e2a\u5b50\u8fdb\u7a0b\u6765\u8d1f\u8d23\u751f\u6210RDB\u6587\u4ef6\uff0c\u4e3b\u8fdb\u7a0b\u53ef\u4ee5\u7ee7\u7eed\u5904\u7406\u5ba2\u6237\u7aef\u8bf7\u6c42\uff0c\u963b\u585e\u53ea\u53d1\u751f\u5728fork\u5b50\u8fdb\u7a0b\u7684\u9636\u6bb5\uff0c\u901a\u5e38\u65f6\u95f4\u5f88\u77ed\u3002\u8fd9\u662f\u9ed8\u8ba4\u7684\u89e6\u53d1\u65b9\u5f0f\u3002</li> </ul> </li> <li> <p>\u81ea\u52a8\u89e6\u53d1:     \u5728<code>redis.conf</code>\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7<code>save</code>\u6307\u4ee4\u8bbe\u7f6e\u81ea\u52a8\u89e6\u53d1<code>BGSAVE</code>\u7684\u6761\u4ef6\u3002\u4f8b\u5982\uff1a</p> <ul> <li><code>save 900 1</code>: \u8868\u793a\u5728900\u79d2\u5185\uff0c\u5982\u679c\u81f3\u5c11\u67091\u4e2a\u952e\u53d1\u751f\u53d8\u5316\uff0c\u5219\u81ea\u52a8\u89e6\u53d1<code>BGSAVE</code>\u3002</li> <li><code>save 300 10</code>: \u8868\u793a\u5728300\u79d2\u5185\uff0c\u5982\u679c\u81f3\u5c11\u670910\u4e2a\u952e\u53d1\u751f\u53d8\u5316\uff0c\u5219\u81ea\u52a8\u89e6\u53d1<code>BGSAVE</code>\u3002</li> </ul> </li> </ul> <p><code>BGSAVE</code>\u547d\u4ee4\u6267\u884c\u65f6\uff0cRedis\u4e3b\u8fdb\u7a0b\u4f1a\u5229\u7528\u64cd\u4f5c\u7cfb\u7edf\u7684\u5199\u65f6\u590d\u5236\uff08Copy-on-Write\uff09\u673a\u5236\u3002 \u4e3b\u8fdb\u7a0bfork\u51fa\u4e00\u4e2a\u5b50\u8fdb\u7a0b\uff0c\u5b50\u8fdb\u7a0b\u5171\u4eab\u4e3b\u8fdb\u7a0b\u7684\u5185\u5b58\u6570\u636e\u3002\u5728\u5b50\u8fdb\u7a0b\u5199\u5165RDB\u6587\u4ef6\u671f\u95f4\uff0c\u5982\u679c\u4e3b\u8fdb\u7a0b\u9700\u8981\u4fee\u6539\u67d0\u5757\u6570\u636e\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u590d\u5236\u8fd9\u5757\u6570\u636e\u7684\u4e00\u4e2a\u526f\u672c\uff0c\u4e3b\u8fdb\u7a0b\u4fee\u6539\u526f\u672c\uff0c\u800c\u5b50\u8fdb\u7a0b\u7ee7\u7eed\u5c06\u539f\u59cb\u6570\u636e\u5199\u5165RDB\u6587\u4ef6\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96%E7%9A%84/#_2","title":"\u4f18\u70b9","text":"<ul> <li>\u6027\u80fd\u597d\uff0c\u6062\u590d\u5feb: RDB\u6587\u4ef6\u662f\u7d27\u51d1\u7684\u4e8c\u8fdb\u5236\u683c\u5f0f\uff0c\u4f53\u79ef\u5c0f\uff0c\u975e\u5e38\u9002\u5408\u5907\u4efd\u548c\u707e\u96be\u6062\u590d\u3002 Redis\u52a0\u8f7dRDB\u6587\u4ef6\u6765\u6062\u590d\u6570\u636e\u7684\u901f\u5ea6\u8fdc\u5feb\u4e8eAOF\u3002</li> <li>\u5bf9\u6027\u80fd\u5f71\u54cd\u5c0f: <code>BGSAVE</code>\u4f7f\u7528\u5b50\u8fdb\u7a0b\u8fdb\u884c\u6301\u4e45\u5316\uff0c\u5bf9\u4e3b\u8fdb\u7a0b\u670d\u52a1\u5f71\u54cd\u8f83\u5c0f\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96%E7%9A%84/#_3","title":"\u7f3a\u70b9","text":"<ul> <li>\u6570\u636e\u4e22\u5931\u98ce\u9669\u9ad8: RDB\u662f\u95f4\u9694\u6027\u5730\u8fdb\u884c\u5feb\u7167\uff0c\u5982\u679c\u5728\u4e24\u6b21\u5feb\u7167\u4e4b\u95f4\u670d\u52a1\u5668\u53d1\u751f\u6545\u969c\uff0c\u90a3\u4e48\u8fd9\u671f\u95f4\u7684\u6570\u636e\u5c06\u4f1a\u5168\u90e8\u4e22\u5931\u3002</li> <li>fork\u5b50\u8fdb\u7a0b\u5f00\u9500: \u5f53\u6570\u636e\u96c6\u5f88\u5927\u65f6\uff0cfork\u5b50\u8fdb\u7a0b\u53ef\u80fd\u4f1a\u6d88\u8017\u8f83\u591a\u65f6\u95f4\u548c\u5185\u5b58\uff0c\u751a\u81f3\u53ef\u80fd\u5bfc\u81f4\u670d\u52a1\u77ed\u6682\u505c\u987f\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96%E7%9A%84/#2-aof-append-only-file","title":"2. AOF (Append Only File) \u53ea\u8ffd\u52a0\u6587\u4ef6","text":"<p>AOF\u6301\u4e45\u5316\u8bb0\u5f55\u4e86\u670d\u52a1\u5668\u63a5\u6536\u5230\u7684\u6bcf\u4e00\u4e2a\u5199\u64cd\u4f5c\u547d\u4ee4\u3002 \u5f53Redis\u91cd\u542f\u65f6\uff0c\u4f1a\u91cd\u65b0\u6267\u884cAOF\u6587\u4ef6\u4e2d\u7684\u6240\u6709\u547d\u4ee4\u6765\u6062\u590d\u6570\u636e\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96%E7%9A%84/#_4","title":"\u5de5\u4f5c\u539f\u7406","text":"<p>AOF\u7684\u5b9e\u73b0\u8fc7\u7a0b\u53ef\u4ee5\u5206\u4e3a\u547d\u4ee4\u8ffd\u52a0\u3001\u6587\u4ef6\u5199\u5165\u548c\u6587\u4ef6\u540c\u6b65\u3002</p> <ol> <li>\u547d\u4ee4\u8ffd\u52a0 (Append): \u5f53AOF\u6301\u4e45\u5316\u529f\u80fd\u5f00\u542f\u540e\uff0c\u670d\u52a1\u5668\u5728\u6267\u884c\u5b8c\u4e00\u4e2a\u5199\u547d\u4ee4\u540e\uff0c\u4f1a\u4ee5\u534f\u8bae\u683c\u5f0f\u5c06\u88ab\u6267\u884c\u7684\u547d\u4ee4\u8ffd\u52a0\u5230AOF\u7f13\u51b2\u533a\u7684\u672b\u5c3e\u3002</li> <li>\u6587\u4ef6\u5199\u5165 (Write) \u548c\u540c\u6b65 (Sync): AOF\u7f13\u51b2\u533a\u7684\u6570\u636e\u4f1a\u6839\u636e<code>appendfsync</code>\u914d\u7f6e\u7b56\u7565\u5199\u5165\u5e76\u540c\u6b65\u5230AOF\u6587\u4ef6\u4e2d\u3002 \u8fd9\u4e2a\u7b56\u7565\u6709\u4e09\u79cd\u9009\u62e9\uff1a<ul> <li><code>always</code>: \u6bcf\u4e2a\u5199\u547d\u4ee4\u90fd\u7acb\u5373\u540c\u6b65\u5230\u78c1\u76d8\uff0c\u6700\u5b89\u5168\u4f46\u6027\u80fd\u6700\u4f4e\u3002</li> <li><code>everysec</code>: \u6bcf\u79d2\u540c\u6b65\u4e00\u6b21\uff0c\u8fd9\u662f\u9ed8\u8ba4\u7b56\u7565\uff0c\u5728\u6027\u80fd\u548c\u6570\u636e\u5b89\u5168\u6027\u4e4b\u95f4\u505a\u4e86\u5f88\u597d\u7684\u5e73\u8861\uff0c\u6700\u591a\u53ea\u4f1a\u4e22\u59311\u79d2\u7684\u6570\u636e\u3002</li> <li><code>no</code>: \u5b8c\u5168\u4f9d\u8d56\u64cd\u4f5c\u7cfb\u7edf\u6765\u540c\u6b65\uff0c\u901f\u5ea6\u6700\u5feb\uff0c\u4f46\u6570\u636e\u4e22\u5931\u98ce\u9669\u6700\u9ad8\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96%E7%9A%84/#aof","title":"AOF\u91cd\u5199","text":"<p>\u968f\u7740\u5199\u64cd\u4f5c\u7684\u4e0d\u65ad\u589e\u52a0\uff0cAOF\u6587\u4ef6\u4f1a\u53d8\u5f97\u8d8a\u6765\u8d8a\u5927\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0cRedis\u5f15\u5165\u4e86AOF\u91cd\u5199\u673a\u5236\u3002 AOF\u91cd\u5199\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684AOF\u6587\u4ef6\uff0c\u8fd9\u4e2a\u6587\u4ef6\u5305\u542b\u4e86\u6062\u590d\u5f53\u524d\u6570\u636e\u96c6\u6240\u9700\u7684\u6700\u5c11\u547d\u4ee4\u96c6\u5408\u3002\u4f8b\u5982\uff0c\u5bf9\u4e00\u4e2a\u8ba1\u6570\u5668\u6267\u884c\u4e86100\u6b21<code>INCR</code>\uff0c\u91cd\u5199\u540e\u7684AOF\u6587\u4ef6\u53ef\u80fd\u53ea\u4f1a\u6709\u4e00\u6761<code>SET</code>\u547d\u4ee4\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96%E7%9A%84/#_5","title":"\u4f18\u70b9","text":"<ul> <li>\u6570\u636e\u5b89\u5168\u6027\u9ad8: \u6839\u636e\u540c\u6b65\u7b56\u7565\uff0cAOF\u53ef\u4ee5\u63d0\u4f9b\u66f4\u9ad8\u7684\u6570\u636e\u5b89\u5168\u6027\uff0c\u6700\u591a\u4e22\u59311\u79d2\u7684\u6570\u636e\u3002</li> <li>\u6587\u4ef6\u53ef\u8bfb\u6027\u5f3a: AOF\u6587\u4ef6\u662f\u6587\u672c\u683c\u5f0f\uff0c\u53ef\u4ee5\u65b9\u4fbf\u5730\u67e5\u770b\u548c\u5904\u7406\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96%E7%9A%84/#_6","title":"\u7f3a\u70b9","text":"<ul> <li>\u6587\u4ef6\u4f53\u79ef\u5927: \u5bf9\u4e8e\u76f8\u540c\u7684\u6570 \u636e\u96c6\uff0cAOF\u6587\u4ef6\u901a\u5e38\u6bd4RDB\u6587\u4ef6\u5927\u3002</li> <li>\u6062\u590d\u901f\u5ea6\u6162: \u6570\u636e\u6062\u590d\u65f6\u9700\u8981\u91cd\u65b0\u6267\u884c\u6240\u6709\u5199\u547d\u4ee4\uff0c\u901f\u5ea6\u76f8\u5bf9RDB\u8f83\u6162\u3002</li> <li>\u5bf9\u6027\u80fd\u6709\u4e00\u5b9a\u5f71\u54cd: \u9891\u7e41\u7684\u78c1\u76d8\u540c\u6b65\u4f1a\u5bf9\u7cfb\u7edf\u6027\u80fd\u4ea7\u751f\u4e00\u5b9a\u7684\u5f71\u54cd\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96%E7%9A%84/#3","title":"3. \u6df7\u5408\u6301\u4e45\u5316","text":"<p>\u4eceRedis 4.0\u5f00\u59cb\uff0c\u5f15\u5165\u4e86\u6df7\u5408\u6301\u4e45\u5316\u673a\u5236\uff0c\u7ed3\u5408\u4e86RDB\u548cAOF\u7684\u4f18\u70b9\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96%E7%9A%84/#_7","title":"\u5de5\u4f5c\u539f\u7406","text":"<p>\u5f53\u5f00\u542f\u6df7\u5408\u6301\u4e45\u5316\u540e\uff08\u901a\u8fc7<code>aof-use-rdb-preamble yes</code>\u914d\u7f6e\uff09\uff0c\u5728\u8fdb\u884cAOF\u91cd\u5199\u65f6\uff0c\u5b50\u8fdb\u7a0b\u4f1a\u5c06\u5f53\u524d\u5185\u5b58\u4e2d\u7684\u6570\u636e\u4ee5RDB\u7684\u683c\u5f0f\u5199\u5165\u5230\u65b0\u7684AOF\u6587\u4ef6\u7684\u5f00\u5934\u90e8\u5206\uff0c\u7136\u540e\u5c06\u91cd\u5199\u671f\u95f4\u65b0\u589e\u7684\u5199\u547d\u4ee4\u4ee5AOF\u683c\u5f0f\u8ffd\u52a0\u5230\u6587\u4ef6\u672b\u5c3e\u3002</p> <p>\u8fd9\u6837\uff0c\u5728\u6570\u636e\u6062\u590d\u65f6\uff0cRedis\u4f1a\u5148\u52a0\u8f7dRDB\u90e8\u5206\u7684\u6570\u636e\uff0c\u7136\u540e\u63a5\u7740\u6267\u884cAOF\u90e8\u5206\u7684\u589e\u91cf\u547d\u4ee4\uff0c\u4ece\u800c\u5927\u5927\u63d0\u9ad8\u4e86\u6062\u590d\u901f\u5ea6\uff0c\u540c\u65f6\u53c8\u964d\u4f4e\u4e86\u6570\u636e\u4e22\u5931\u7684\u98ce\u9669\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96%E7%9A%84/#_8","title":"\u5982\u4f55\u9009\u62e9\uff1f","text":"<ul> <li>\u5982\u679c\u6570\u636e\u4e22\u5931\u4e00\u4e9b\u4e5f\u53ef\u4ee5\u63a5\u53d7\uff0c\u6216\u8005\u4e3b\u8981\u7528\u4f5c\u7f13\u5b58\uff0c\u53ef\u4ee5\u9009\u62e9\u53ea\u4f7f\u7528RDB\u3002</li> <li>\u5982\u679c\u9700\u8981\u9ad8\u6570\u636e\u5b89\u5168\u6027\uff0c\u5efa\u8bae\u540c\u65f6\u5f00\u542fRDB\u548cAOF\uff0c\u6216\u8005\u4f7f\u7528\u6df7\u5408\u6301\u4e45\u5316\u3002</li> <li>\u4e0d\u5efa\u8bae\u5355\u72ec\u4f7f\u7528AOF\uff0c\u56e0\u4e3aRDB\u66f4\u9002\u5408\u7528\u4e8e\u6570\u636e\u5907\u4efd\u3002</li> </ul> <p>\u5f53RDB\u548cAOF\u90fd\u5f00\u542f\u65f6\uff0cRedis\u5728\u91cd\u542f\u65f6\u4f1a\u4f18\u5148\u4f7f\u7528AOF\u6587\u4ef6\u6765\u6062\u590d\u6570\u636e\uff0c\u56e0\u4e3a\u5b83\u901a\u5e38\u80fd\u4fdd\u8bc1\u66f4\u5b8c\u6574\u7684\u6570\u636e\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%E7%9A%84rdb%E5%BF%AB%E7%85%A7%E8%AE%B0%E5%BD%95%E6%97%B6%E4%BC%9A%E5%A0%B5%E5%A1%9E%E5%90%97/","title":"Redis\u7684rdb\u5feb\u7167\u8bb0\u5f55\u65f6\u4f1a\u5835\u585e\u5417","text":"<p>Redis \u7684 RDB\uff08Redis Database\uff09\u5feb\u7167\u6301\u4e45\u5316\u673a\u5236\uff0c\u6839\u636e\u89e6\u53d1\u65b9\u5f0f\u7684\u4e0d\u540c\uff0c\u5176\u963b\u585e\u884c\u4e3a\u4e5f\u6709\u6240\u533a\u522b\u3002\u4e3b\u8981\u6709\u4e24\u79cd\u751f\u6210 RDB \u5feb\u7167\u7684\u65b9\u5f0f\uff1a<code>SAVE</code> \u547d\u4ee4\u548c <code>BGSAVE</code> \u547d\u4ee4\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%E7%9A%84rdb%E5%BF%AB%E7%85%A7%E8%AE%B0%E5%BD%95%E6%97%B6%E4%BC%9A%E5%A0%B5%E5%A1%9E%E5%90%97/#1-save","title":"1. <code>SAVE</code> \u547d\u4ee4 (\u963b\u585e)","text":"<p><code>SAVE</code> \u547d\u4ee4\u4f1a\u5b8c\u5168\u963b\u585e Redis \u670d\u52a1\u5668\u8fdb\u7a0b\u3002</p> <ul> <li>\u540c\u6b65\u6267\u884c\uff1a\u5f53\u6267\u884c <code>SAVE</code> \u547d\u4ee4\u65f6\uff0cRedis \u4e3b\u7ebf\u7a0b\u4f1a\u540c\u6b65\u5730\u5c06\u6240\u6709\u6570\u636e\u5199\u5165 RDB \u6587\u4ef6\u5230\u78c1\u76d8\u3002</li> <li>\u505c\u6b62\u670d\u52a1\uff1a\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0cRedis \u670d\u52a1\u5668\u65e0\u6cd5\u5904\u7406\u4efb\u4f55\u5176\u4ed6\u547d\u4ee4\u8bf7\u6c42\uff0c\u5305\u62ec\u6765\u81ea\u5ba2\u6237\u7aef\u7684\u8bfb\u5199\u8bf7\u6c42\u3002</li> <li>\u751f\u4ea7\u73af\u5883\u4e0d\u5efa\u8bae\u4f7f\u7528\uff1a\u7531\u4e8e <code>SAVE</code> \u547d\u4ee4\u4f1a\u957f\u65f6\u95f4\u963b\u585e Redis\uff0c\u7279\u522b\u662f\u5728\u6570\u636e\u91cf\u8f83\u5927\u65f6\uff0c\u4f1a\u5bfc\u81f4\u670d\u52a1\u957f\u65f6\u95f4\u4e0d\u53ef\u7528\uff0c\u56e0\u6b64\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u51e0\u4e4e\u4e0d\u4f7f\u7528 <code>SAVE</code> \u547d\u4ee4\uff0c\u751a\u81f3\u5df2\u7ecf\u57fa\u672c\u88ab\u5e9f\u5f03\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%E7%9A%84rdb%E5%BF%AB%E7%85%A7%E8%AE%B0%E5%BD%95%E6%97%B6%E4%BC%9A%E5%A0%B5%E5%A1%9E%E5%90%97/#2-bgsave-fork","title":"2. <code>BGSAVE</code> \u547d\u4ee4 (\u975e\u963b\u585e\uff0c\u4f46 <code>fork</code> \u9636\u6bb5\u6709\u77ed\u6682\u963b\u585e)","text":"<p><code>BGSAVE</code> (Background Save) \u547d\u4ee4\u662f Redis \u9ed8\u8ba4\u548c\u63a8\u8350\u7684 RDB \u5feb\u7167\u65b9\u5f0f\uff0c\u5b83\u65e8\u5728\u907f\u514d\u963b\u585e Redis \u4e3b\u7ebf\u7a0b\u3002</p> <ul> <li>\u521b\u5efa\u5b50\u8fdb\u7a0b\uff1a\u5f53\u6267\u884c <code>BGSAVE</code> \u547d\u4ee4\u65f6\uff0cRedis \u4e3b\u8fdb\u7a0b\u4f1a\u8c03\u7528 <code>fork()</code> \u7cfb\u7edf\u8c03\u7528\uff0c\u521b\u5efa\u4e00\u4e2a\u5b50\u8fdb\u7a0b\u3002\u8fd9\u4e2a\u5b50\u8fdb\u7a0b\u4e13\u95e8\u8d1f\u8d23\u5c06\u6570\u636e\u5199\u5165 RDB \u6587\u4ef6\uff0c\u800c\u7236\u8fdb\u7a0b\uff08Redis \u4e3b\u8fdb\u7a0b\uff09\u5219\u53ef\u4ee5\u7ee7\u7eed\u5904\u7406\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u3002</li> <li><code>fork()</code> \u9636\u6bb5\u7684\u77ed\u6682\u963b\u585e\uff1a\u867d\u7136 <code>BGSAVE</code> \u547d\u4ee4\u672c\u8eab\u662f\u540e\u53f0\u6267\u884c\u7684\uff0c\u4f46 <code>fork()</code> \u64cd\u4f5c\u4f1a\u77ed\u6682\u5730\u963b\u585e Redis \u4e3b\u8fdb\u7a0b\u3002<ul> <li><code>fork()</code> \u64cd\u4f5c\u4f1a\u590d\u5236\u7236\u8fdb\u7a0b\u7684\u9875\u8868\uff0c\u8fd9\u9700\u8981\u4e00\u5b9a\u7684\u65f6\u95f4\u548c\u5185\u5b58\u3002</li> <li>\u963b\u585e\u65f6\u95f4\u7684\u957f\u77ed\u4e0e Redis \u5b9e\u4f8b\u5360\u7528\u7684\u5185\u5b58\u5927\u5c0f\u6210\u6b63\u6bd4\u3002\u4f8b\u5982\uff0c\u6bcf 1GB \u5185\u5b58\u7684 <code>fork</code> \u64cd\u4f5c\u53ef\u80fd\u8017\u65f6\u7ea6 20 \u6beb\u79d2\u3002 \u5bf9\u4e8e\u5185\u5b58\u8f83\u5927\u7684\u5b9e\u4f8b\uff0c<code>fork</code> \u963b\u585e\u65f6\u95f4\u53ef\u80fd\u6bd4\u8f83\u660e\u663e\u3002 \u53ef\u4ee5\u901a\u8fc7 <code>INFO stats</code> \u547d\u4ee4\u67e5\u770b <code>latest_fork_usec</code> \u9009\u9879\u6765\u83b7\u53d6\u6700\u8fd1\u4e00\u6b21 <code>fork</code> \u64cd\u4f5c\u7684\u8017\u65f6\uff08\u5355\u4f4d\u662f\u5fae\u79d2\uff09\u3002</li> </ul> </li> <li>\u5199\u65f6\u590d\u5236 (Copy-on-Write, COW)\uff1a<code>fork()</code> \u521b\u5efa\u5b50\u8fdb\u7a0b\u540e\uff0c\u7236\u5b50\u8fdb\u7a0b\u4f1a\u5171\u4eab\u76f8\u540c\u7684\u5185\u5b58\u9875\u9762\u3002 \u53ea\u6709\u5f53\u7236\u8fdb\u7a0b\uff08\u4e3b Redis \u5b9e\u4f8b\uff09\u6216\u5b50\u8fdb\u7a0b\uff08RDB \u6301\u4e45\u5316\u8fdb\u7a0b\uff09\u4fee\u6539\u5171\u4eab\u5185\u5b58\u4e2d\u7684\u67d0\u4e2a\u9875\u9762\u65f6\uff0c\u64cd\u4f5c\u7cfb\u7edf\u624d\u4f1a\u590d\u5236\u8be5\u9875\u9762\uff0c\u4ece\u800c\u4f7f\u5f97\u7236\u5b50\u8fdb\u7a0b\u62e5\u6709\u5404\u81ea\u72ec\u7acb\u7684\u526f\u672c\u3002<ul> <li>\u8fd9\u610f\u5473\u7740\u5b50\u8fdb\u7a0b\u5728\u4fdd\u5b58 RDB \u6587\u4ef6\u671f\u95f4\uff0c\u7236\u8fdb\u7a0b\u53ef\u4ee5\u7ee7\u7eed\u63a5\u6536\u5e76\u5904\u7406\u5199\u547d\u4ee4\uff0c\u800c\u4e0d\u4f1a\u5f71\u54cd\u5b50\u8fdb\u7a0b\u6b63\u5728\u5feb\u7167\u7684\u6570\u636e\u4e00\u81f4\u6027\u3002</li> <li>COW \u673a\u5236\u6709\u6548\u5730\u51cf\u5c11\u4e86 <code>fork</code> \u671f\u95f4\u7684\u5185\u5b58\u5f00\u9500\uff0c\u907f\u514d\u4e86\u5b8c\u5168\u590d\u5236\u6574\u4e2a\u6570\u636e\u96c6\u3002</li> </ul> </li> <li>\u5185\u5b58\u5f00\u9500\uff1a\u5c3d\u7ba1\u6709 COW \u673a\u5236\uff0c\u4f46\u5728 <code>BGSAVE</code> \u671f\u95f4\uff0c\u7531\u4e8e\u4e3b\u8fdb\u7a0b\u7684\u5199\u64cd\u4f5c\u4f1a\u5bfc\u81f4\u9875\u9762\u590d\u5236\uff0cRedis \u7684\u5b9e\u9645\u5185\u5b58\u4f7f\u7528\u91cf\u53ef\u80fd\u4f1a\u6682\u65f6\u589e\u52a0\uff0c\u6700\u9ad8\u53ef\u80fd\u8fbe\u5230\u539f\u6709\u5185\u5b58\u7684 2 \u500d\uff08\u6781\u7aef\u60c5\u51b5\u4e0b\uff09\u3002 \u5982\u679c\u7cfb\u7edf\u53ef\u7528\u5185\u5b58\u4e0d\u8db3\uff0c<code>fork</code> \u64cd\u4f5c\u53ef\u80fd\u4f1a\u5931\u8d25\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%E9%9B%86%E7%BE%A4%E4%BB%8B%E7%BB%8D/","title":"Redis\u96c6\u7fa4\u4ecb\u7ecd","text":"<p>Redis \u96c6\u7fa4\u662f\u5e94\u5bf9\u9ad8\u5e76\u53d1\u3001\u6d77\u91cf\u6570\u636e\u5b58\u50a8\u548c\u9ad8\u53ef\u7528\u6027\u9700\u6c42\u7684\u6709\u6548\u89e3\u51b3\u65b9\u6848\u3002\u901a\u8fc7\u5c06\u591a\u4e2a Redis \u8282\u70b9\u7ec4\u5408\u5728\u4e00\u8d77\uff0c\u53ef\u4ee5\u6709\u6548\u5730\u5206\u6563\u8d1f\u8f7d\u3001\u6269\u5c55\u5b58\u50a8\u5bb9\u91cf\u5e76\u786e\u4fdd\u670d\u52a1\u7684\u8fde\u7eed\u6027\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%E9%9B%86%E7%BE%A4%E4%BB%8B%E7%BB%8D/#1-redis","title":"1. Redis \u96c6\u7fa4\u7b80\u4ecb","text":"<p>Redis \u96c6\u7fa4\u6280\u672f\u901a\u8fc7\u8fde\u63a5\u591a\u4e2a Redis \u8282\u70b9\uff0c\u5b9e\u73b0\u9ad8\u53ef\u7528\u6027\u3001\u6570\u636e\u5206\u7247\u548c\u8d1f\u8f7d\u5747\u8861\u3002 \u5b83\u5141\u8bb8 Redis \u5728\u4e0d\u540c\u7684\u8282\u70b9\u4e0a\u540c\u65f6\u63d0\u4f9b\u670d\u52a1\uff0c\u4ece\u800c\u63d0\u5347\u6574\u4f53\u6027\u80fd\u548c\u53ef\u9760\u6027\u3002 Redis \u7684\u96c6\u7fa4\u65b9\u6848\u4e3b\u8981\u6709\u4e09\u79cd\u6a21\u5f0f\uff1a\u4e3b\u4ece\u590d\u5236\u6a21\u5f0f (Master-Slave)\u3001\u54e8\u5175\u6a21\u5f0f (Sentinel) \u548c Cluster \u6a21\u5f0f\u3002</p> <p>Redis \u96c6\u7fa4\u7684\u4f5c\u7528\u548c\u4f18\u52bf\u4e3b\u8981\u4f53\u73b0\u5728\u4ee5\u4e0b\u51e0\u4e2a\u65b9\u9762\uff1a</p> <ul> <li>\u9ad8\u53ef\u7528\u6027\uff1a \u5f53\u67d0\u4e2a\u8282\u70b9\u53d1\u751f\u6545\u969c\u65f6\uff0c\u96c6\u7fa4\u80fd\u591f\u81ea\u52a8\u8fdb\u884c\u6545\u969c\u8f6c\u79fb\uff0c\u4fdd\u8bc1\u670d\u52a1\u7684\u6301\u7eed\u53ef\u7528\u3002</li> <li>\u8d1f\u8f7d\u5747\u8861\uff1a \u5c06\u5ba2\u6237\u7aef\u8bf7\u6c42\u5206\u53d1\u5230\u4e0d\u540c\u7684\u8282\u70b9\u4e0a\uff0c\u6709\u6548\u5206\u644a\u8282\u70b9\u538b\u529b\uff0c\u63d0\u9ad8\u7cfb\u7edf\u6574\u4f53\u6027\u80fd\u3002</li> <li>\u5bb9\u707e\u6062\u590d\uff1a \u901a\u8fc7\u4e3b\u4ece\u590d\u5236\u6216\u54e8\u5175\u6a21\u5f0f\uff0c\u5728\u4e3b\u8282\u70b9\u51fa\u73b0\u6545\u969c\u65f6\uff0c\u53ef\u4ee5\u5feb\u901f\u5207\u6362\u5230\u4ece\u8282\u70b9\uff0c\u5b9e\u73b0\u4e1a\u52a1\u7684\u65e0\u7f1d\u5207\u6362\u3002</li> <li>\u6570\u636e\u5206\u7247\uff1a \u5728 Cluster \u6a21\u5f0f\u4e0b\uff0c\u6570\u636e\u88ab\u5206\u6563\u5728\u4e0d\u540c\u7684\u8282\u70b9\u4e0a\uff0c\u7a81\u7834\u4e86\u5355\u8282\u70b9\u5185\u5b58\u9650\u5236\uff0c\u53ef\u4ee5\u5b9e\u73b0\u66f4\u5927\u89c4\u6a21\u7684\u6570\u636e\u5b58\u50a8\u3002</li> <li>\u6613\u4e8e\u6269\u5c55\uff1a \u53ef\u4ee5\u6839\u636e\u4e1a\u52a1\u9700\u6c42\u548c\u7cfb\u7edf\u8d1f\u8f7d\uff0c\u52a8\u6001\u5730\u6dfb\u52a0\u6216\u79fb\u9664\u8282\u70b9\uff0c\u5b9e\u73b0\u6c34\u5e73\u6269\u5c55\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%E9%9B%86%E7%BE%A4%E4%BB%8B%E7%BB%8D/#2-master-slave","title":"2. \u4e3b\u4ece\u590d\u5236\u6a21\u5f0f (Master-Slave)","text":"<p>\u4e3b\u4ece\u590d\u5236\u662f Redis \u6700\u57fa\u7840\u7684\u96c6\u7fa4\u6a21\u5f0f\uff0c\u901a\u8fc7\u5c06\u4e00\u4e2a\u4e3b\u8282\u70b9 (Master) \u7684\u6570\u636e\u590d\u5236\u5230\u4e00\u4e2a\u6216\u591a\u4e2a\u4ece\u8282\u70b9 (Slave) \u6765\u5b9e\u73b0\u6570\u636e\u7684\u5197\u4f59\u548c\u5907\u4efd\u3002</p> <ul> <li>\u5de5\u4f5c\u539f\u7406\uff1a \u4e3b\u8282\u70b9\u8d1f\u8d23\u5904\u7406\u5ba2\u6237\u7aef\u7684\u5199\u64cd\u4f5c\uff0c\u800c\u4ece\u8282\u70b9\u5219\u5b9e\u65f6\u540c\u6b65\u4e3b\u8282\u70b9\u7684\u6570\u636e\u3002\u5ba2\u6237\u7aef\u53ef\u4ee5\u4ece\u4ece\u8282\u70b9\u8bfb\u53d6\u6570\u636e\uff0c\u4ece\u800c\u5b9e\u73b0\u8bfb\u5199\u5206\u79bb\uff0c\u63d0\u9ad8\u7cfb\u7edf\u6027\u80fd\u3002</li> <li>\u4f18\u70b9\uff1a<ul> <li>\u914d\u7f6e\u7b80\u5355\uff0c\u5bb9\u6613\u5b9e\u73b0\u3002</li> <li>\u5b9e\u73b0\u6570\u636e\u5197\u4f59\uff0c\u63d0\u9ad8\u4e86\u6570\u636e\u7684\u53ef\u9760\u6027\u3002</li> <li>\u901a\u8fc7\u8bfb\u5199\u5206\u79bb\uff0c\u53ef\u4ee5\u63d0\u5347\u7cfb\u7edf\u6027\u80fd\u3002</li> </ul> </li> <li>\u7f3a\u70b9\uff1a<ul> <li>\u4e3b\u8282\u70b9\u6545\u969c\u65f6\uff0c\u9700\u8981\u624b\u52a8\u5c06\u4ece\u8282\u70b9\u5207\u6362\u4e3a\u4e3b\u8282\u70b9\uff0c\u6545\u969c\u6062\u590d\u65f6\u95f4\u8f83\u957f\u3002</li> <li>\u6240\u6709\u5199\u64cd\u4f5c\u90fd\u7531\u4e3b\u8282\u70b9\u627f\u62c5\uff0c\u53ef\u80fd\u6210\u4e3a\u6027\u80fd\u74f6\u9888\u3002</li> <li>\u65e0\u6cd5\u5b9e\u73b0\u6570\u636e\u5206\u7247\uff0c\u53d7\u5355\u8282\u70b9\u5185\u5b58\u9650\u5236\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%E9%9B%86%E7%BE%A4%E4%BB%8B%E7%BB%8D/#3-sentinel","title":"3. \u54e8\u5175\u6a21\u5f0f (Sentinel)","text":"<p>\u54e8\u5175\u6a21\u5f0f\u662f\u5728\u4e3b\u4ece\u590d\u5236\u7684\u57fa\u7840\u4e0a\u52a0\u5165\u4e86\u54e8\u5175\u8282\u70b9\uff0c\u4ee5\u5b9e\u73b0\u81ea\u52a8\u7684\u6545\u969c\u8f6c\u79fb\u3002</p> <ul> <li>\u5de5\u4f5c\u539f\u7406\uff1a \u54e8\u5175\u8282\u70b9\u662f\u4e00\u79cd\u7279\u6b8a\u7684 Redis \u8282\u70b9\uff0c\u5b83\u4f1a\u76d1\u63a7\u4e3b\u8282\u70b9\u548c\u4ece\u8282\u70b9\u7684\u8fd0\u884c\u72b6\u6001\u3002\u5f53\u4e3b\u8282\u70b9\u53d1\u751f\u6545\u969c\u65f6\uff0c\u54e8\u5175\u8282\u70b9\u4f1a\u81ea\u52a8\u4ece\u4ece\u8282\u70b9\u4e2d\u9009\u4e3e\u51fa\u4e00\u4e2a\u65b0\u7684\u4e3b\u8282\u70b9\uff0c\u5e76\u901a\u77e5\u5176\u4ed6\u4ece\u8282\u70b9\u548c\u5ba2\u6237\u7aef\uff0c\u5b9e\u73b0\u6545\u969c\u7684\u81ea\u52a8\u8f6c\u79fb\u3002</li> <li>\u4f18\u70b9\uff1a<ul> <li>\u81ea\u52a8\u8fdb\u884c\u6545\u969c\u8f6c\u79fb\uff0c\u63d0\u9ad8\u4e86\u7cfb\u7edf\u7684\u9ad8\u53ef\u7528\u6027\u3002</li> <li>\u5177\u5907\u4e3b\u4ece\u590d\u5236\u6a21\u5f0f\u7684\u6240\u6709\u4f18\u70b9\uff0c\u5982\u6570\u636e\u5197\u4f59\u548c\u8bfb\u5199\u5206\u79bb\u3002</li> </ul> </li> <li>\u7f3a\u70b9\uff1a<ul> <li>\u914d\u7f6e\u548c\u7ba1\u7406\u76f8\u5bf9\u590d\u6742\u3002</li> <li>\u4ecd\u7136\u65e0\u6cd5\u5b9e\u73b0\u6570\u636e\u5206\u7247\uff0c\u53d7\u5355\u8282\u70b9\u5185\u5b58\u9650\u5236\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%E9%9B%86%E7%BE%A4%E4%BB%8B%E7%BB%8D/#4-redis-cluster","title":"4. Redis Cluster \u6a21\u5f0f","text":"<p>Redis Cluster \u662f Redis \u5b98\u65b9\u63d0\u4f9b\u7684\u5206\u5e03\u5f0f\u89e3\u51b3\u65b9\u6848\uff0c\u4e8e Redis 3.0 \u7248\u672c\u6b63\u5f0f\u63a8\u51fa\u3002\u5b83\u901a\u8fc7\u6570\u636e\u5206\u7247\u548c\u5206\u5e03\u5f0f\u5b58\u50a8\uff0c\u5b9e\u73b0\u4e86\u771f\u6b63\u7684\u8d1f\u8f7d\u5747\u8861\u548c\u9ad8\u53ef\u7528\u6027\u3002</p> <ul> <li>\u5de5\u4f5c\u539f\u7406\uff1a Redis Cluster \u91c7\u7528\u65e0\u4e2d\u5fc3\u5316\u7684\u67b6\u6784\uff0c\u5c06\u6570\u636e\u5206\u6563\u5b58\u50a8\u5728\u591a\u4e2a\u8282\u70b9\u4e0a\u3002 \u5b83\u5f15\u5165\u4e86\u54c8\u5e0c\u69fd (hash slot) \u7684\u6982\u5ff5\uff0c\u5c06 16384 \u4e2a\u54c8\u5e0c\u69fd\u5206\u914d\u7ed9\u96c6\u7fa4\u4e2d\u7684\u4e0d\u540c\u8282\u70b9\u3002 \u5f53\u5ba2\u6237\u7aef\u53d1\u9001\u8bf7\u6c42\u65f6\uff0c\u96c6\u7fa4\u4f1a\u6839\u636e\u952e\u7684\u54c8\u5e0c\u503c\u5c06\u8bf7\u6c42\u8def\u7531\u5230\u5bf9\u5e94\u7684\u8282\u70b9\u3002</li> <li>\u4f18\u70b9\uff1a<ul> <li>\u6570\u636e\u5206\u7247\uff1a \u5b9e\u73b0\u4e86\u5927\u89c4\u6a21\u6570\u636e\u5b58\u50a8\uff0c\u7a81\u7834\u4e86\u5355\u673a\u5185\u5b58\u74f6\u9888\u3002</li> <li>\u9ad8\u53ef\u7528\u6027\uff1a \u91c7\u7528\u591a\u4e3b\u591a\u4ece\u7684\u67b6\u6784\uff0c\u5f53\u67d0\u4e2a\u4e3b\u8282\u70b9\u6545\u969c\u65f6\uff0c\u5176\u4ece\u8282\u70b9\u4f1a\u81ea\u52a8\u63d0\u5347\u4e3a\u65b0\u7684\u4e3b\u8282\u70b9\uff0c\u4fdd\u8bc1\u670d\u52a1\u7684\u8fde\u7eed\u6027\u3002</li> <li>\u8d1f\u8f7d\u5747\u8861\uff1a \u5c06\u6570\u636e\u548c\u8bf7\u6c42\u5206\u6563\u5230\u591a\u4e2a\u8282\u70b9\uff0c\u63d0\u9ad8\u4e86\u7cfb\u7edf\u7684\u6574\u4f53\u6027\u80fd\u3002</li> <li>\u53bb\u4e2d\u5fc3\u5316\uff1a \u6240\u6709\u8282\u70b9\u90fd\u53c2\u4e0e\u96c6\u7fa4\u72b6\u6001\u7684\u7ef4\u62a4\uff0c\u6ca1\u6709\u5355\u70b9\u6545\u969c\u7684\u98ce\u9669\u3002</li> </ul> </li> <li>\u7f3a\u70b9\uff1a<ul> <li>\u914d\u7f6e\u548c\u7ba1\u7406\u76f8\u5bf9\u590d\u6742\u3002</li> <li>\u4e00\u4e9b\u590d\u6742\u7684\u591a\u952e\u64cd\u4f5c\uff08\u5982\u96c6\u5408\u7684\u5e76\u96c6\u3001\u4ea4\u96c6\uff09\u53ef\u80fd\u4f1a\u53d7\u5230\u9650\u5236\uff0c\u56e0\u4e3a\u6d89\u53ca\u7684\u952e\u53ef\u80fd\u5206\u5e03\u5728\u4e0d\u540c\u7684\u69fd\u4f4d\u4e2d\u3002</li> <li>\u4e0d\u652f\u6301\u50cf\u5355\u673a\u7248 Redis \u90a3\u6837\u7684\u591a\u6570\u636e\u5e93\u529f\u80fd\uff0c\u53ea\u652f\u6301\u6570\u636e\u5e93 0\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/redis%E9%9B%86%E7%BE%A4%E4%BB%8B%E7%BB%8D/#5","title":"5. \u5176\u4ed6\u96c6\u7fa4\u65b9\u6848","text":"<p>\u5728 Redis Cluster \u6b63\u5f0f\u7248\u53d1\u5e03\u4e4b\u524d\uff0c\u4e3a\u4e86\u89e3\u51b3 Redis \u7684\u5b58\u50a8\u74f6\u9888\uff0c\u5404\u5927\u516c\u53f8\u4e5f\u63a8\u51fa\u4e86\u5404\u81ea\u7684 Redis \u96c6\u7fa4\u65b9\u6848\uff0c\u4e3b\u8981\u5206\u4e3a\u5ba2\u6237\u7aef\u5206\u7247\u548c\u4ee3\u7406\u5206\u7247\u4e24\u79cd\u3002</p> <ul> <li>\u5ba2\u6237\u7aef\u5206\u7247\uff1a \u5c06\u5206\u7247\u7684\u903b\u8f91\u5b9e\u73b0\u5728 Redis \u5ba2\u6237\u7aef\uff0c\u5ba2\u6237\u7aef\u6839\u636e\u9884\u5148\u5b9a\u4e49\u597d\u7684\u8def\u7531\u89c4\u5219\uff08\u901a\u5e38\u4f7f\u7528\u4e00\u81f4\u6027\u54c8\u5e0c\u7b97\u6cd5\uff09\uff0c\u5c06\u5bf9\u952e\u7684\u8bbf\u95ee\u8f6c\u53d1\u5230\u4e0d\u540c\u7684 Redis \u5b9e\u4f8b\u4e2d\u3002<ul> <li>\u4f18\u70b9\uff1a \u903b\u8f91\u53ef\u63a7\uff0c\u670d\u52a1\u7aef Redis \u5b9e\u4f8b\u5f7c\u6b64\u72ec\u7acb\uff0c\u6613\u4e8e\u7ebf\u6027\u6269\u5c55\u3002</li> <li>\u7f3a\u70b9\uff1a \u9700\u8981\u624b\u52a8\u8c03\u6574\u5206\u7247\u7a0b\u5e8f\uff0c\u8fd0\u7ef4\u6210\u672c\u9ad8\uff0c\u4e14\u5728\u4e0d\u540c\u7684\u5ba2\u6237\u7aef\u7a0b\u5e8f\u4e2d\u7ef4\u62a4\u76f8\u540c\u7684\u8def\u7531\u903b\u8f91\u6210\u672c\u5de8\u5927\u3002</li> </ul> </li> <li>\u4ee3\u7406\u5206\u7247\uff1a \u5f15\u5165\u4e00\u4e2a\u4e2d\u95f4\u4ee3\u7406\u5c42\uff0c\u5ba2\u6237\u7aef\u5c06\u8bf7\u6c42\u53d1\u9001\u5230\u4ee3\u7406\uff0c\u4ee3\u7406\u6839\u636e\u8def\u7531\u89c4\u5219\u5c06\u8bf7\u6c42\u8f6c\u53d1\u5230\u6b63\u786e\u7684 Redis \u5b9e\u4f8b\uff0c\u6700\u540e\u5c06\u7ed3\u679c\u6c47\u96c6\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u3002<ul> <li>Twemproxy\uff1a \u7531 Twitter \u5f00\u6e90\u7684 Redis \u4ee3\u7406\uff0c\u88ab\u5e7f\u6cdb\u4f7f\u7528\u4e14\u7a33\u5b9a\u6027\u9ad8\u3002\u4f46\u5176\u6700\u5927\u7684\u75db\u70b9\u5728\u4e8e\u65e0\u6cd5\u5e73\u6ed1\u5730\u8fdb\u884c\u6269\u5bb9\u548c\u7f29\u5bb9\u3002</li> <li>Codis\uff1a \u7531\u8c4c\u8c46\u835a\u81ea\u4e3b\u7814\u53d1\uff0c\u652f\u6301\u5e73\u6ed1\u5730\u589e\u52a0 Redis \u5b9e\u4f8b\u3002\u5b83\u91c7\u7528\u9884\u5206\u7247\u7684\u65b9\u5f0f\uff0c\u5c06\u6570\u636e\u5206\u4e3a 1024 \u4e2a slot\uff0c\u5e76\u901a\u8fc7\u7ba1\u7406\u5de5\u5177\u5b9e\u73b0\u6570\u636e\u7684\u8fc1\u79fb\u548c\u5747\u8861\u3002</li> </ul> </li> </ul> \u96c6\u7fa4\u6a21\u5f0f \u4f18\u70b9 \u7f3a\u70b9 \u9002\u7528\u573a\u666f \u4e3b\u4ece\u590d\u5236 \u914d\u7f6e\u7b80\u5355\u3001\u6570\u636e\u5197\u4f59\u3001\u8bfb\u5199\u5206\u79bb \u624b\u52a8\u6545\u969c\u8f6c\u79fb\u3001\u4e3b\u8282\u70b9\u5199\u74f6\u9888\u3001\u65e0\u6570\u636e\u5206\u7247 \u6570\u636e\u5907\u4efd\u3001\u8bfb\u5199\u5206\u79bb \u54e8\u5175\u6a21\u5f0f \u81ea\u52a8\u6545\u969c\u8f6c\u79fb\u3001\u9ad8\u53ef\u7528 \u914d\u7f6e\u8f83\u590d\u6742\u3001\u65e0\u6570\u636e\u5206\u7247 \u5bf9\u9ad8\u53ef\u7528\u6027\u8981\u6c42\u8f83\u9ad8\u7684\u573a\u666f Redis Cluster \u6570\u636e\u5206\u7247\u3001\u8d1f\u8f7d\u5747\u8861\u3001\u9ad8\u53ef\u7528 \u914d\u7f6e\u548c\u7ba1\u7406\u8f83\u590d\u6742\u3001\u90e8\u5206\u591a\u952e\u64cd\u4f5c\u53d7\u9650 \u5927\u89c4\u6a21\u6570\u636e\u5b58\u50a8\u3001\u9ad8\u6027\u80fd\u548c\u9ad8\u53ef\u7528\u6027\u8981\u6c42\u7684\u573a\u666f \u5ba2\u6237\u7aef/\u4ee3\u7406\u5206\u7247 \u7075\u6d3b\u53ef\u63a7/\u5bf9\u5ba2\u6237\u7aef\u900f\u660e \u8fd0\u7ef4\u6210\u672c\u9ad8/\u5b58\u5728\u6027\u80fd\u635f\u8017 \u5386\u53f2\u9057\u7559\u7cfb\u7edf\u6216\u5bf9\u7279\u5b9a\u573a\u666f\u6709\u5b9a\u5236\u5316\u9700\u6c42\u7684\u573a\u666f"},{"location":"%E9%9D%A2%E7%BB%8F/redis/%E4%B8%BA%E4%BB%80%E4%B9%88%20Redis%20%E8%BF%99%E4%B9%88%E5%BF%AB%EF%BC%9F/","title":"\u4e3a\u4ec0\u4e48 Redis \u8fd9\u4e48\u5feb\uff1f","text":"<p>1. \u5b8c\u5168\u57fa\u4e8e\u5185\u5b58\u7684\u64cd\u4f5c \u8fd9\u662f Redis \u9ad8\u6027\u80fd\u6700\u6839\u672c\u7684\u539f\u56e0\u3002\u6240\u6709\u6570\u636e\u90fd\u5b58\u50a8\u5728\u5185\u5b58\u4e2d\uff0c\u5185\u5b58\u7684\u8bfb\u5199\u901f\u5ea6\u6bd4\u78c1\u76d8\u5feb\u51e0\u4e2a\u6570\u91cf\u7ea7\u3002 \u8fd9\u4f7f\u5f97 Redis \u80fd\u591f\u4ee5\u5fae\u79d2\u7ea7\u7684\u5ef6\u8fdf\u5904\u7406\u8bf7\u6c42\u3002</p> <p>2. \u9ad8\u6548\u7684 I/O \u6a21\u578b \u5982\u4e0a\u6587\u6240\u8ff0\uff0c\u901a\u8fc7 I/O \u591a\u8def\u590d\u7528\u6280\u672f\uff0cRedis \u7528\u5355\u4e2a\u7ebf\u7a0b\u5c31\u80fd\u9ad8\u6548\u5904\u7406\u5927\u91cf\u5e76\u53d1\u8fde\u63a5\uff0c\u907f\u514d\u4e86\u56e0\u7b49\u5f85 I/O \u800c\u9020\u6210\u7684\u963b\u585e\u3002</p> <p>3. \u5355\u7ebf\u7a0b\u6a21\u578b\u7684\u4f18\u52bf \u867d\u7136 Redis 6.0 \u5f15\u5165\u4e86 I/O \u591a\u7ebf\u7a0b\uff0c\u4f46\u5176\u6838\u5fc3\u6570\u636e\u64cd\u4f5c\u4ecd\u7136\u662f\u5355\u7ebf\u7a0b\u7684\u3002\u8fd9\u5e26\u6765\u4e86\u4e24\u5927\u597d\u5904\uff1a *   \u65e0\u4e0a\u4e0b\u6587\u5207\u6362\u6210\u672c\uff1a\u907f\u514d\u4e86\u591a\u7ebf\u7a0b\u6a21\u578b\u4e2d\u9891\u7e41\u5207\u6362\u7ebf\u7a0b\u5e26\u6765\u7684\u6027\u80fd\u5f00\u9500\u3002 *   \u65e0\u9501\u7ade\u4e89\uff1a\u4e0d\u9700\u8981\u4e3a\u6570\u636e\u64cd\u4f5c\u52a0\u9501\uff0c\u7b80\u5316\u4e86\u5b9e\u73b0\u5e76\u63d0\u9ad8\u4e86\u6267\u884c\u6548\u7387\u3002</p> <p>4. \u7cbe\u5fc3\u8bbe\u8ba1\u7684\u6570\u636e\u7ed3\u6784 Redis \u63d0\u4f9b\u4e86\u591a\u79cd\u9ad8\u6548\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5e76\u4e14\u4f1a\u6839\u636e\u5b58\u50a8\u6570\u636e\u7684\u7279\u70b9\u9009\u62e9\u6700\u4f18\u7684\u5185\u90e8\u7f16\u7801\uff0c\u4ee5\u5728\u6548\u7387\u548c\u5185\u5b58\u4f7f\u7528\u4e4b\u95f4\u53d6\u5f97\u5e73\u8861\u3002 *   \u5b57\u7b26\u4e32 (String): \u4f7f\u7528\u79f0\u4e3a\u7b80\u5355\u52a8\u6001\u5b57\u7b26\u4e32 (SDS) \u7684\u7ed3\u6784\uff0c\u800c\u975e C \u8bed\u8a00\u539f\u751f\u5b57\u7b26\u4e32\uff0c\u53ef\u4ee5 O(1) \u590d\u6742\u5ea6\u83b7\u53d6\u5b57\u7b26\u4e32\u957f\u5ea6\uff0c\u5e76\u6709\u6548\u9632\u6b62\u7f13\u51b2\u533a\u6ea2\u51fa\u3002 *   \u54c8\u5e0c (Hash): \u5f53\u5143\u7d20\u8f83\u5c11\u65f6\u4f7f\u7528 <code>ziplist</code> (\u538b\u7f29\u5217\u8868)\uff0c\u5143\u7d20\u591a\u65f6\u4f7f\u7528 <code>hashtable</code> (\u54c8\u5e0c\u8868)\uff0c\u54c8\u5e0c\u8868\u7684\u63d2\u5165\u548c\u67e5\u627e\u64cd\u4f5c\u5e73\u5747\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(1)\u3002 *   \u5217\u8868 (List): \u65e9\u671f\u7248\u672c\u5728\u6570\u636e\u91cf\u5c11\u65f6\u4f7f\u7528 <code>ziplist</code>\uff0c\u540e\u6765\u5347\u7ea7\u4e3a <code>quicklist</code>\uff0c\u5b83\u662f <code>ziplist</code> \u548c <code>linkedlist</code> \u7684\u7ed3\u5408\uff0c\u5728\u7a7a\u95f4\u548c\u65f6\u95f4\u6548\u7387\u4e0a\u505a\u4e86\u5f88\u597d\u7684\u6743\u8861\u3002 *   \u96c6\u5408 (Set): \u5f53\u5143\u7d20\u90fd\u662f\u6574\u6570\u4e14\u6570\u91cf\u4e0d\u591a\u65f6\u4f7f\u7528 <code>intset</code>\uff0c\u5426\u5219\u4f7f\u7528 <code>hashtable</code>\u3002 *   \u6709\u5e8f\u96c6\u5408 (Sorted Set): \u540c\u65f6\u4f7f\u7528 <code>skiplist</code> (\u8df3\u8868) \u548c <code>hashtable</code>\u3002\u8df3\u8868\u4fdd\u8bc1\u4e86\u5143\u7d20\u6709\u5e8f\uff0c\u5e76\u4f7f\u5f97\u8303\u56f4\u67e5\u8be2\u548c\u8282\u70b9\u67e5\u627e\u7684\u5e73\u5747\u65f6\u95f4\u590d\u6742\u5ea6\u8fbe\u5230 O(logN)\uff1b\u54c8\u5e0c\u8868\u5219\u4fdd\u8bc1\u4e86 O(1) \u7684\u6210\u5458\u5206\u6570\u67e5\u627e\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81Redis%E4%B8%8EMySQL%E7%9A%84%E6%95%B0%E6%8D%AE%E4%B8%80%E8%87%B4%E6%80%A7/","title":"\u5982\u4f55\u4fdd\u8bc1Redis\u4e0eMySQL\u7684\u6570\u636e\u4e00\u81f4\u6027","text":""},{"location":"%E9%9D%A2%E7%BB%8F/redis/%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81Redis%E4%B8%8EMySQL%E7%9A%84%E6%95%B0%E6%8D%AE%E4%B8%80%E8%87%B4%E6%80%A7/#cache-aside","title":"\u65c1\u8def\u7f13\u5b58\uff08Cache-Aside\uff09\u7684\u6267\u884c\u7b56\u7565","text":"<p>\u65c1\u8def\u7f13\u5b58\uff08Cache-Aside\uff09\u662f\u76ee\u524d\u4e1a\u52a1\u7cfb\u7edf\u4e2d\u6700\u5e7f\u6cdb\u4f7f\u7528\u7684\u7f13\u5b58\u7b56\u7565\u3002\u5176\u6838\u5fc3\u601d\u60f3\u662f\uff0c\u5e94\u7528\u7a0b\u5e8f\u9700\u8981\u81ea\u884c\u7ef4\u62a4\u7f13\u5b58\u548c\u6570\u636e\u5e93\u7684\u64cd\u4f5c\uff0c\u7f13\u5b58\u7cfb\u7edf\u672c\u8eab\u4e0d\u53c2\u4e0e\u548c\u6570\u636e\u5e93\u7684\u534f\u540c\u3002</p> <p>\u5177\u4f53\u6267\u884c\u7b56\u7565\u5206\u4e3a\u8bfb\u53d6\u548c\u66f4\u65b0\u4e24\u4e2a\u64cd\u4f5c\uff1a</p> <p>1. \u8bfb\u53d6\u6570\u636e\u7b56\u7565\uff1a *   \u67e5\u8be2\u7f13\u5b58\uff1a \u5f53\u5e94\u7528\u7a0b\u5e8f\u9700\u8981\u8bfb\u53d6\u6570\u636e\u65f6\uff0c\u5b83\u9996\u5148\u4f1a\u53bb\u67e5\u8be2\u7f13\u5b58\u3002 *   \u7f13\u5b58\u547d\u4e2d\uff1a \u5982\u679c\u5728\u7f13\u5b58\u4e2d\u627e\u5230\u4e86\u6240\u9700\u7684\u6570\u636e\uff08\u5373\u201c\u7f13\u5b58\u547d\u4e2d\u201d\uff09\uff0c\u5219\u76f4\u63a5\u5c06\u6570\u636e\u8fd4\u56de\u7ed9\u5e94\u7528\u3002 *   \u7f13\u5b58\u672a\u547d\u4e2d\uff1a \u5982\u679c\u7f13\u5b58\u4e2d\u6ca1\u6709\u6570\u636e\uff08\u5373\u201c\u7f13\u5b58\u672a\u547d\u4e2d\u201d\uff09\uff0c\u5e94\u7528\u7a0b\u5e8f\u4f1a\u8f6c\u800c\u53bb\u67e5\u8be2\u6570\u636e\u5e93\u3002 *   \u66f4\u65b0\u7f13\u5b58\uff1a \u4ece\u6570\u636e\u5e93\u4e2d\u83b7\u53d6\u5230\u6570\u636e\u540e\uff0c\u5e94\u7528\u7a0b\u5e8f\u4f1a\u5c06\u8fd9\u4efd\u6570\u636e\u5199\u5165\u5230\u7f13\u5b58\u4e2d\uff0c\u4ee5\u4fbf\u4e0b\u4e00\u6b21\u76f8\u540c\u7684\u8bf7\u6c42\u80fd\u591f\u76f4\u63a5\u4ece\u7f13\u5b58\u4e2d\u83b7\u53d6\u3002 *   \u8fd4\u56de\u6570\u636e\uff1a \u5c06\u4ece\u6570\u636e\u5e93\u4e2d\u8bfb\u53d6\u7684\u6570\u636e\u8fd4\u56de\u7ed9\u5e94\u7528\u3002</p> <p>2. \u66f4\u65b0\u6570\u636e\u7b56\u7565\uff1a \u5f53\u9700\u8981\u66f4\u65b0\u6570\u636e\u65f6\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u6570\u636e\u7684\u4e00\u81f4\u6027\uff0c\u6700\u5e38\u7528\u7684\u65b9\u5f0f\u662f\uff1a *   \u5148\u66f4\u65b0\u6570\u636e\u5e93\uff1a \u5c06\u65b0\u7684\u6570\u636e\u5199\u5165\u5230\u6570\u636e\u5e93\u4e2d\u3002 *   \u518d\u5220\u9664\u7f13\u5b58\uff1a \u6210\u529f\u66f4\u65b0\u6570\u636e\u5e93\u540e\uff0c\u5c06\u7f13\u5b58\u4e2d\u5bf9\u5e94\u7684\u65e7\u6570\u636e\u5220\u9664\uff08\u4f7f\u5176\u5931\u6548\uff09\u3002</p> <p>\u4e3a\u4ec0\u4e48\u662f\u5220\u9664\u7f13\u5b58\u800c\u4e0d\u662f\u66f4\u65b0\u7f13\u5b58\uff1f \u6587\u7ae0\u4e2d\u63d0\u5230\uff0c\u91c7\u7528\u201c\u5220\u9664\u201d\u800c\u975e\u201c\u66f4\u65b0\u201d\u7f13\u5b58\u4e3b\u8981\u6709\u4e24\u4e2a\u4f18\u52bf\uff1a *   \u6027\u80fd\u4f18\u52bf\uff1a \u5982\u679c\u66f4\u65b0\u7f13\u5b58\u7684\u6210\u672c\u5f88\u9ad8\uff0c\u800c\u8be5\u7f13\u5b58\u7684\u8bbf\u95ee\u9891\u7387\u53c8\u4e0d\u9ad8\uff0c\u90a3\u4e48\u76f4\u63a5\u5220\u9664\u4f1a\u66f4\u9ad8\u6548\u3002\u7b49\u5230\u4e0b\u6b21\u9700\u8981\u8bbf\u95ee\u65f6\uff0c\u518d\u901a\u8fc7\u8bfb\u53d6\u64cd\u4f5c\u4ece\u6570\u636e\u5e93\u52a0\u8f7d\u65b0\u6570\u636e\u5230\u7f13\u5b58\u4e2d\uff0c\u907f\u514d\u4e86\u4e0d\u5fc5\u8981\u7684\u66f4\u65b0\u5f00\u9500\u3002 *   \u5b89\u5168\u4f18\u52bf\uff1a \u5728\u9ad8\u5e76\u53d1\u573a\u666f\u4e0b\uff0c\u5982\u679c\u91c7\u7528\u201c\u66f4\u65b0\u7f13\u5b58\u201d\u7684\u7b56\u7565\uff0c\u591a\u4e2a\u7ebf\u7a0b\u7684\u66f4\u65b0\u987a\u5e8f\u53ef\u80fd\u4f1a\u5bfc\u81f4\u7f13\u5b58\u4e2d\u5199\u5165\u810f\u6570\u636e\u3002\u800c\u201c\u5220\u9664\u7f13\u5b58\u201d\u80fd\u66f4\u7b80\u5355\u6709\u6548\u5730\u907f\u514d\u8fd9\u4e2a\u95ee\u9898\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81Redis%E4%B8%8EMySQL%E7%9A%84%E6%95%B0%E6%8D%AE%E4%B8%80%E8%87%B4%E6%80%A7/#_1","title":"\u5982\u4f55\u4fdd\u8bc1\u6570\u636e\u4e00\u81f4\u6027\uff1f","text":"<p>\u5148\u66f4\u65b0\u6570\u636e\u5e93\uff0c\u518d\u5220\u9664\u7f13\u5b58\u8fd9\u4e00\u7b56\u7565\u662f\u65c1\u8def\u7f13\u5b58\uff08Cache-Aside\uff09\u6a21\u5f0f\u4e2d\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u6570\u636e\u4e00\u81f4\u6027\u800c\u63a8\u8350\u7684\u5199\u5165\uff08\u66f4\u65b0/\u5220\u9664\uff09\u64cd\u4f5c\u6d41\u7a0b\u3002</p> <p>\u5f53\u9700\u8981\u66f4\u65b0\u6570\u636e\u65f6\uff0c\u6574\u4e2a\u64cd\u4f5c\u5206\u4e3a\u660e\u786e\u7684\u4e24\u6b65\uff1a 1. \u7b2c\u4e00\u6b65\uff1a\u66f4\u65b0\u6570\u636e\u5e93</p> <pre><code>- \u5e94\u7528\u7a0b\u5e8f\u63a5\u6536\u5230\u6570\u636e\u66f4\u65b0\u7684\u8bf7\u6c42\uff08\u4f8b\u5982\uff0c\u4fee\u6539\u7528\u6237\u4fe1\u606f\u3001\u66f4\u65b0\u5546\u54c1\u5e93\u5b58\u7b49\uff09\u3002\n\n- \u5b83\u4f1a\u76f4\u63a5\u5bf9\u6570\u636e\u5e93\u6267\u884cUPDATE\u6216DELETE\u7b49\u5199\u64cd\u4f5c\u3002\n</code></pre> <ol> <li> <p>\u7b2c\u4e8c\u6b65\uff1a\u5220\u9664\u7f13\u5b58</p> <ul> <li> <p>\u5728\u6570\u636e\u5e93\u6210\u529f\u5b8c\u6210\u66f4\u65b0\u64cd\u4f5c\u4e4b\u540e\uff0c\u5e94\u7528\u7a0b\u5e8f\u4f1a\u5411\u7f13\u5b58\u7cfb\u7edf\uff08\u5982 Redis\uff09\u53d1\u9001\u4e00\u4e2aDELETE\u547d\u4ee4\uff0c\u5c06\u4e0e\u8be5\u6570\u636e\u5bf9\u5e94\u7684\u7f13\u5b58\u9879\u5220\u9664\u3002</p> </li> <li> <p>\u5173\u952e\u70b9\uff1a\u8fd9\u91cc\u662f\u5220\u9664\u7f13\u5b58\uff0c\u800c\u4e0d\u662f\u66f4\u65b0\u7f13\u5b58\u3002</p> </li> </ul> </li> </ol> <p>\u5ef6\u8fdf\u53cc\u5220\u7b56\u7565 \u8be5\u7b56\u7565\u4e3b\u8981\u7528\u4e8e\u5e94\u5bf9\u201c\u5148\u5220\u9664\u7f13\u5b58\uff0c\u518d\u66f4\u65b0\u6570\u636e\u5e93\u201d\u573a\u666f\u4e0b\u53ef\u80fd\u51fa\u73b0\u7684\u6570\u636e\u4e0d\u4e00\u81f4\u95ee\u9898\u3002\u5728\u9ad8\u5e76\u53d1\u65f6\uff0c\u53ef\u80fd\u5b58\u5728\u4e00\u4e2a\u8bf7\u6c42\u5220\u9664\u4e86\u7f13\u5b58\uff0c\u4f46\u6570\u636e\u5e93\u8fd8\u672a\u66f4\u65b0\u5b8c\u6210\u65f6\uff0c\u53e6\u4e00\u4e2a\u8bfb\u8bf7\u6c42\u5c06\u6570\u636e\u5e93\u7684\u65e7\u503c\u53c8\u52a0\u8f7d\u5230\u4e86\u7f13\u5b58\u4e2d\uff0c\u968f\u540e\u6570\u636e\u5e93\u624d\u5b8c\u6210\u66f4\u65b0\uff0c\u5bfc\u81f4\u4e0d\u4e00\u81f4\u3002 \u5ef6\u8fdf\u53cc\u5220\u7684\u6b65\u9aa4\u5982\u4e0b\uff1a *   \u7b2c\u4e00\u6b21\u5220\u9664\uff1a \u5728\u66f4\u65b0\u6570\u636e\u5e93\u4e4b\u524d\uff0c\u5148\u5220\u9664\u4e00\u6b21\u7f13\u5b58\u3002 *   \u66f4\u65b0\u6570\u636e\u5e93\uff1a \u6267\u884c\u6570\u636e\u5e93\u7684\u66f4\u65b0\u64cd\u4f5c\u3002 *   \u5ef6\u8fdf\u540e\u7b2c\u4e8c\u6b21\u5220\u9664\uff1a \u5728\u6570\u636e\u5e93\u66f4\u65b0\u6210\u529f\u540e\uff0c\u7b49\u5f85\u4e00\u6bb5\u77ed\u6682\u7684\u65f6\u95f4\uff08\u5982\u51e0\u767e\u6beb\u79d2\uff09\uff0c\u518d\u6b21\u5220\u9664\u7f13\u5b58\u3002\u8fd9\u6b21\u5220\u9664\u662f\u4e3a\u4e86\u786e\u4fdd\u5728\u6570\u636e\u5e93\u66f4\u65b0\u671f\u95f4\u8fdb\u5165\u7684\u8bfb\u8bf7\u6c42\u6240\u52a0\u8f7d\u7684\u65e7\u7f13\u5b58\u6570\u636e\u80fd\u591f\u88ab\u6e05\u9664\u3002</p> <p>\u7f13\u5b58\u5220\u9664\u91cd\u8bd5\u4fdd\u969c\u673a\u5236 \u5373\u4f7f\u662f\u201c\u5148\u66f4\u65b0\u6570\u636e\u5e93\uff0c\u518d\u5220\u9664\u7f13\u5b58\u201d\u7684\u7b56\u7565\uff0c\u4e5f\u53ef\u80fd\u56e0\u4e3a\u7f51\u7edc\u95ee\u9898\u7b49\u539f\u56e0\u5bfc\u81f4\u7f13\u5b58\u5220\u9664\u5931\u8d25\u3002\u4e3a\u4e86\u786e\u4fdd\u7f13\u5b58\u6700\u7ec8\u80fd\u88ab\u6210\u529f\u5220\u9664\uff0c\u53ef\u4ee5\u5f15\u5165\u91cd\u8bd5\u673a\u5236\u3002 \u4e00\u79cd\u5e38\u89c1\u7684\u505a\u6cd5\u662f\uff1a *   \u5c06\u5220\u9664\u5931\u8d25\u7684\u7f13\u5b58\u952e\uff08key\uff09\u53d1\u9001\u5230\u6d88\u606f\u961f\u5217\uff08MQ\uff09\u4e2d\u3002 *   \u521b\u5efa\u4e00\u4e2a\u72ec\u7acb\u7684\u670d\u52a1\u6765\u6d88\u8d39\u8fd9\u4e2a\u961f\u5217\u3002 *   \u8be5\u670d\u52a1\u4f1a\u4e0d\u65ad\u5c1d\u8bd5\u91cd\u65b0\u5220\u9664\u7f13\u5b58\uff0c\u76f4\u5230\u6210\u529f\u4e3a\u6b62\u3002\u8fd9\u79cd\u5f02\u6b65\u5316\u7684\u65b9\u5f0f\u53ef\u4ee5\u4f5c\u4e3a\u4e00\u79cd\u515c\u5e95\u65b9\u6848\uff0c\u786e\u4fdd\u6570\u636e\u6700\u7ec8\u7684\u4e00\u81f4\u6027\u3002</p> <p>\u8ba2\u9605\u6570\u636e\u5e93\u53d8\u66f4\u65e5\u5fd7\uff08binlog\uff09 \u8fd9\u662f\u4e00\u79cd\u5c06\u7f13\u5b58\u540c\u6b65\u64cd\u4f5c\u4e0e\u4e1a\u52a1\u903b\u8f91\u89e3\u8026\u7684\u5f3a\u5927\u65b9\u6848\u3002 *   \u6570\u636e\u5e93\u8bb0\u5f55\u53d8\u66f4\uff1a \u6570\u636e\u5e93\uff08\u5982MySQL\uff09\u5728\u6267\u884c\u6570\u636e\u66f4\u65b0\u540e\uff0c\u4f1a\u5c06\u53d8\u66f4\u8bb0\u5f55\u5230\u5176\u4e8c\u8fdb\u5236\u65e5\u5fd7\uff08binlog\uff09\u4e2d\u3002 *   \u4e2d\u95f4\u4ef6\u8ba2\u9605\uff1a \u4f7f\u7528\u50cf<code>canal</code>\u8fd9\u6837\u7684\u5de5\u5177\u6765\u8ba2\u9605\u548c\u89e3\u6790\u6570\u636e\u5e93\u7684binlog\u3002 *   \u72ec\u7acb\u670d\u52a1\u5904\u7406\uff1a \u4e00\u4e2a\u72ec\u7acb\u7684\u6d88\u8d39\u8005\u670d\u52a1\u83b7\u53d6\u5230<code>canal</code>\u89e3\u6790\u51fa\u7684\u6570\u636e\u53d8\u66f4\u4fe1\u606f\uff08\u6bd4\u5982\u88ab\u4fee\u6539\u7684\u6570\u636e\u7684key\uff09\u3002 *   \u5220\u9664\u7f13\u5b58\uff1a \u8be5\u670d\u52a1\u6839\u636e\u83b7\u53d6\u5230\u7684key\uff0c\u53bb\u6267\u884c\u5220\u9664\u7f13\u5b58\u7684\u64cd\u4f5c\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/%E6%80%8E%E4%B9%88%E5%88%A4%E6%96%AD%20Redis%20%E6%9F%90%E4%B8%AA%E8%8A%82%E7%82%B9%E6%98%AF%E5%90%A6%E6%AD%A3%E5%B8%B8%E5%B7%A5%E4%BD%9C/","title":"\u600e\u4e48\u5224\u65ad Redis \u67d0\u4e2a\u8282\u70b9\u662f\u5426\u6b63\u5e38\u5de5\u4f5c","text":""},{"location":"%E9%9D%A2%E7%BB%8F/redis/%E6%80%8E%E4%B9%88%E5%88%A4%E6%96%AD%20Redis%20%E6%9F%90%E4%B8%AA%E8%8A%82%E7%82%B9%E6%98%AF%E5%90%A6%E6%AD%A3%E5%B8%B8%E5%B7%A5%E4%BD%9C/#1-ping","title":"1. \u4f7f\u7528 <code>PING</code> \u547d\u4ee4","text":"<p>\u8fd9\u662f\u6700\u7b80\u5355\u3001\u6700\u76f4\u63a5\u7684\u65b9\u6cd5\uff0c\u7528\u4e8e\u68c0\u67e5\u8282\u70b9\u662f\u5426\u5728\u7ebf\u4ee5\u53ca\u7f51\u7edc\u8fde\u63a5\u662f\u5426\u6b63\u5e38\u3002</p> <ul> <li>\u65b9\u6cd5\uff1a\u901a\u8fc7 <code>redis-cli</code> \u8fde\u63a5\u5230\u6307\u5b9a\u8282\u70b9\uff0c\u7136\u540e\u53d1\u9001 <code>PING</code> \u547d\u4ee4\u3002</li> <li>\u547d\u4ee4\uff1a     <code>bash     redis-cli -h &lt;\u8282\u70b9IP&gt; -p &lt;\u8282\u70b9\u7aef\u53e3&gt; PING</code></li> <li>\u9884\u671f\u54cd\u5e94\uff1a\u5982\u679c\u8282\u70b9\u6b63\u5e38\uff0c\u5b83\u5c06\u8fd4\u56de <code>PONG</code>\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/%E6%80%8E%E4%B9%88%E5%88%A4%E6%96%AD%20Redis%20%E6%9F%90%E4%B8%AA%E8%8A%82%E7%82%B9%E6%98%AF%E5%90%A6%E6%AD%A3%E5%B8%B8%E5%B7%A5%E4%BD%9C/#2","title":"2. \u67e5\u770b\u96c6\u7fa4\u8282\u70b9\u72b6\u6001","text":"<p>\u5982\u679c\u60a8\u4f7f\u7528\u7684\u662f Redis \u96c6\u7fa4\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>CLUSTER NODES</code> \u547d\u4ee4\u6765\u83b7\u53d6\u6240\u6709\u8282\u70b9\u7684\u8be6\u7ec6\u72b6\u6001\u3002</p> <ul> <li>\u65b9\u6cd5\uff1a\u8fde\u63a5\u5230\u96c6\u7fa4\u4e2d\u7684\u4efb\u610f\u4e00\u4e2a\u8282\u70b9\uff0c\u7136\u540e\u6267\u884c <code>CLUSTER NODES</code>\u3002</li> <li>\u547d\u4ee4\uff1a     <code>bash     redis-cli -h &lt;\u8282\u70b9IP&gt; -p &lt;\u8282\u70b9\u7aef\u53e3&gt; CLUSTER NODES</code></li> <li>\u9884\u671f\u8f93\u51fa\uff1a\u8be5\u547d\u4ee4\u4f1a\u5217\u51fa\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u8282\u70b9\u53ca\u5176\u72b6\u6001\u4fe1\u606f\uff0c\u5305\u62ec\u8282\u70b9ID\u3001IP\u5730\u5740\u3001\u7aef\u53e3\u3001\u89d2\u8272\uff08\u4e3b/\u4ece\uff09\u3001\u8fde\u63a5\u72b6\u6001\u7b49\u3002<ul> <li>\u6b63\u5e38\u72b6\u6001\uff1a\u6240\u6709\u8282\u70b9\u90fd\u5e94\u663e\u793a\u4e3a <code>connected</code> \u72b6\u6001\u3002</li> <li>\u5f02\u5e38\u72b6\u6001\uff1a\u5982\u679c\u67d0\u4e2a\u8282\u70b9\u7684\u72b6\u6001\u4e3a <code>disconnected</code> \u6216 <code>fail</code>\uff0c\u5219\u8868\u793a\u8be5\u8282\u70b9\u53ef\u80fd\u5b58\u5728\u95ee\u9898\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/%E6%80%8E%E4%B9%88%E5%88%A4%E6%96%AD%20Redis%20%E6%9F%90%E4%B8%AA%E8%8A%82%E7%82%B9%E6%98%AF%E5%90%A6%E6%AD%A3%E5%B8%B8%E5%B7%A5%E4%BD%9C/#3","title":"3. \u68c0\u67e5\u4e3b\u4ece\u540c\u6b65\u72b6\u6001","text":"<p>\u5bf9\u4e8e\u4e3b\u4ece\u7ed3\u6784\u7684 Redis \u90e8\u7f72\uff0c\u68c0\u67e5\u4e3b\u4ece\u540c\u6b65\u662f\u5426\u6b63\u5e38\u81f3\u5173\u91cd\u8981\u3002</p> <ul> <li>\u65b9\u6cd5\uff1a\u8fde\u63a5\u5230 Redis \u8282\u70b9\u5e76\u6267\u884c <code>INFO replication</code> \u547d\u4ee4\u3002</li> <li>\u547d\u4ee4\uff1a     <code>bash     redis-cli -h &lt;\u8282\u70b9IP&gt; -p &lt;\u8282\u70b9\u7aef\u53e3&gt; INFO replication</code></li> <li>\u9884\u671f\u8f93\u51fa\uff1a<ul> <li>\u4e3b\u8282\u70b9 (Master)\uff1a\u4f1a\u663e\u793a <code>role:master</code> \u4ee5\u53ca\u8fde\u63a5\u7684\u4ece\u8282\u70b9 (slave) \u7684\u4fe1\u606f\u3002</li> <li>\u4ece\u8282\u70b9 (Slave)\uff1a\u4f1a\u663e\u793a <code>role:slave</code>\uff0c\u5e76\u6307\u793a\u5176\u4e3b\u8282\u70b9\u7684 IP \u548c\u7aef\u53e3\uff0c\u4ee5\u53ca <code>master_link_status</code> \u662f\u5426\u4e3a <code>up</code>\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/%E6%80%8E%E4%B9%88%E5%88%A4%E6%96%AD%20Redis%20%E6%9F%90%E4%B8%AA%E8%8A%82%E7%82%B9%E6%98%AF%E5%90%A6%E6%AD%A3%E5%B8%B8%E5%B7%A5%E4%BD%9C/#4-redis","title":"4. \u76d1\u63a7 Redis \u65e5\u5fd7\u6587\u4ef6","text":"<p>Redis \u7684\u65e5\u5fd7\u6587\u4ef6\u8bb0\u5f55\u4e86\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u7684\u91cd\u8981\u4e8b\u4ef6\u548c\u9519\u8bef\u4fe1\u606f\uff0c\u662f\u6392\u67e5\u95ee\u9898\u7684\u91cd\u8981\u6765\u6e90\u3002</p> <ul> <li>\u65b9\u6cd5\uff1a\u67e5\u770b Redis \u8282\u70b9\u7684\u65e5\u5fd7\u6587\u4ef6\u3002</li> <li>\u65e5\u5fd7\u4f4d\u7f6e\uff1a\u901a\u5e38\u4f4d\u4e8e <code>/var/log/redis/</code> \u76ee\u5f55\u4e0b\uff0c\u6216\u5728 Redis \u914d\u7f6e\u6587\u4ef6 (<code>redis.conf</code>) \u4e2d\u6307\u5b9a\u7684\u8def\u5f84\u3002</li> <li>\u5173\u6ce8\u70b9\uff1a\u68c0\u67e5\u662f\u5426\u6709\u9519\u8bef\u4fe1\u606f\u3001\u8b66\u544a\u6216\u5f02\u5e38\u65e5\u5fd7\uff0c\u4f8b\u5982\u7f51\u7edc\u95ee\u9898\u3001\u5185\u5b58\u4e0d\u8db3\u7b49\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/%E6%80%8E%E4%B9%88%E5%88%A4%E6%96%AD%20Redis%20%E6%9F%90%E4%B8%AA%E8%8A%82%E7%82%B9%E6%98%AF%E5%90%A6%E6%AD%A3%E5%B8%B8%E5%B7%A5%E4%BD%9C/#5","title":"5. \u68c0\u67e5\u7aef\u53e3\u76d1\u542c\u72b6\u6001","text":"<p>\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u7684\u7f51\u7edc\u5de5\u5177\u6765\u786e\u8ba4 Redis \u8fdb\u7a0b\u662f\u5426\u5728\u6b63\u5e38\u76d1\u542c\u7aef\u53e3\u3002</p> <ul> <li>\u65b9\u6cd5\uff1a\u5728 Redis \u670d\u52a1\u5668\u4e0a\u4f7f\u7528 <code>netstat</code> \u6216 <code>ss</code> \u547d\u4ee4\u3002</li> <li>\u547d\u4ee4\u793a\u4f8b\uff1a     <code>bash     netstat -tuln | grep &lt;Redis\u7aef\u53e3&gt;</code></li> <li>\u9884\u671f\u8f93\u51fa\uff1a\u5982\u679c Redis \u6b63\u5e38\u8fd0\u884c\uff0c\u60a8\u5e94\u8be5\u80fd\u770b\u5230\u6307\u5b9a\u7aef\u53e3\u5904\u4e8e <code>LISTEN</code> \u72b6\u6001\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/%E6%8E%92%E6%9F%A5redis%E7%BA%BF%E4%B8%8A%E5%91%BD%E4%B8%AD%E7%8E%87%E6%9A%B4%E8%B7%8C%E7%9A%84%E9%97%AE%E9%A2%98/","title":"\u6392\u67e5redis\u7ebf\u4e0a\u547d\u4e2d\u7387\u66b4\u8dcc\u7684\u95ee\u9898","text":""},{"location":"%E9%9D%A2%E7%BB%8F/redis/%E6%8E%92%E6%9F%A5redis%E7%BA%BF%E4%B8%8A%E5%91%BD%E4%B8%AD%E7%8E%87%E6%9A%B4%E8%B7%8C%E7%9A%84%E9%97%AE%E9%A2%98/#_1","title":"\u7d27\u6025\u6392\u67e5\u4e0e\u5feb\u901f\u6062\u590d","text":"<p>\u8fd9\u4e2a\u9636\u6bb5\u7684\u76ee\u6807\u662f\u5feb\u901f\u5224\u65ad\u95ee\u9898\u7684\u4e25\u91cd\u7a0b\u5ea6\uff0c\u5e76\u5c1d\u8bd5\u7528\u6700\u7b80\u5355\u7684\u65b9\u5f0f\u6062\u590d\u670d\u52a1\u3002</p> <ol> <li> <p>\u786e\u8ba4\u95ee\u9898\u8303\u56f4</p> <ul> <li>\u5f71\u54cd\u9762\u6709\u591a\u5927\uff1f \u662f\u5355\u4e2a\u4e1a\u52a1\u3001\u5355\u4e2a Redis \u5b9e\u4f8b\uff0c\u8fd8\u662f\u6240\u6709\u4e1a\u52a1\u90fd\u53d7\u5f71\u54cd\uff1f</li> <li>\u95ee\u9898\u53d1\u751f\u65f6\u95f4\u70b9\uff1f \u662f\u5426\u4e0e\u67d0\u4e2a\u7248\u672c\u53d1\u5e03\u3001\u914d\u7f6e\u53d8\u66f4\u6216\u7ebf\u4e0a\u6d3b\u52a8\u6709\u5173\uff1f</li> </ul> </li> <li> <p>\u68c0\u67e5\u5e94\u7528\u5c42\u76d1\u63a7</p> <ul> <li>\u5e94\u7528\u65e5\u5fd7\uff1a \u67e5\u770b\u5e94\u7528\u670d\u52a1\u5668\u7684\u65e5\u5fd7\uff0c\u68c0\u67e5\u662f\u5426\u6709\u5927\u91cf\u7684 Redis \u8fde\u63a5\u8d85\u65f6\u3001\u8bfb\u53d6\u9519\u8bef\u6216\u5176\u5b83\u5f02\u5e38\u65e5\u5fd7\u3002</li> <li>\u63a5\u53e3\u54cd\u5e94\u65f6\u95f4 (RT)\uff1a \u89c2\u5bdf\u53d7\u5f71\u54cd\u4e1a\u52a1\u7684\u63a5\u53e3 RT \u662f\u5426\u663e\u8457\u589e\u52a0\uff0c\u6570\u636e\u5e93\u7684\u6162\u67e5\u8be2\u65e5\u5fd7\u662f\u5426\u589e\u591a\u3002</li> <li>\u6570\u636e\u5e93\u8d1f\u8f7d\uff1a \u68c0\u67e5\u6570\u636e\u5e93\u7684 CPU\u3001IOPS \u548c\u8fde\u63a5\u6570\u7b49\u6307\u6807\u662f\u5426\u98d9\u5347\u3002\u5982\u679c\u6570\u636e\u5e93\u538b\u529b\u5927\uff0c\u8bf4\u660e\u5927\u91cf\u7684\u8bf7\u6c42\u7a7f\u900f\u4e86\u7f13\u5b58\uff0c\u76f4\u63a5\u6253\u5230\u4e86\u6570\u636e\u5e93\u3002</li> </ul> </li> <li> <p>\u68c0\u67e5 Redis \u670d\u52a1\u672c\u8eab</p> <ul> <li>\u670d\u52a1\u662f\u5426\u53ef\u7528\uff1f \u6267\u884c <code>ping</code> \u547d\u4ee4\uff0c\u770b Redis \u662f\u5426\u6b63\u5e38\u54cd\u5e94\u3002</li> <li>\u57fa\u672c\u4fe1\u606f\u67e5\u770b\uff1a \u4f7f\u7528 <code>INFO</code> \u547d\u4ee4\u67e5\u770b Redis \u7684\u8fd0\u884c\u72b6\u6001\uff0c\u91cd\u70b9\u5173\u6ce8\u4ee5\u4e0b\u51e0\u4e2a\u90e8\u5206\uff1a<ul> <li><code>keyspace_hits</code> (\u547d\u4e2d\u6b21\u6570) \u548c <code>keyspace_misses</code> (\u672a\u547d\u4e2d\u6b21\u6570)\uff1a\u8ba1\u7b97\u547d\u4e2d\u7387 (<code>keyspace_hits</code> / (<code>keyspace_hits</code> + <code>keyspace_misses</code>))\uff0c\u786e\u8ba4\u547d\u4e2d\u7387\u786e\u5b9e\u66b4\u8dcc\u3002</li> <li><code>connected_clients</code> (\u5ba2\u6237\u7aef\u8fde\u63a5\u6570)\uff1a\u8fde\u63a5\u6570\u662f\u5426\u5f02\u5e38\u589e\u9ad8\u3002</li> <li><code>used_memory</code> (\u5df2\u7528\u5185\u5b58)\uff1a\u5185\u5b58\u4f7f\u7528\u662f\u5426\u8fbe\u5230 <code>maxmemory</code> \u4e0a\u9650\u3002\u5982\u679c\u8fbe\u5230\u4e0a\u9650\uff0c\u4f1a\u5bfc\u81f4\u6570\u636e\u88ab\u6dd8\u6c70\uff08Eviction\uff09\uff0c\u4ece\u800c\u964d\u4f4e\u547d\u4e2d\u7387\u3002</li> </ul> </li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/%E6%8E%92%E6%9F%A5redis%E7%BA%BF%E4%B8%8A%E5%91%BD%E4%B8%AD%E7%8E%87%E6%9A%B4%E8%B7%8C%E7%9A%84%E9%97%AE%E9%A2%98/#_2","title":"\u6df1\u5165\u5206\u6790\u539f\u56e0","text":"<p>\u5982\u679c\u7b2c\u4e00\u9636\u6bb5\u672a\u80fd\u89e3\u51b3\u95ee\u9898\uff0c\u6216\u8005\u9700\u8981\u627e\u5230\u6839\u672c\u539f\u56e0\uff0c\u5c31\u9700\u8981\u8fdb\u884c\u66f4\u6df1\u5165\u7684\u5206\u6790\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/%E6%8E%92%E6%9F%A5redis%E7%BA%BF%E4%B8%8A%E5%91%BD%E4%B8%AD%E7%8E%87%E6%9A%B4%E8%B7%8C%E7%9A%84%E9%97%AE%E9%A2%98/#1-cache-penetration","title":"1. \u7f13\u5b58\u7a7f\u900f (Cache Penetration)","text":"<p>\u73b0\u8c61\uff1a \u5927\u91cf\u8bf7\u6c42\u67e5\u8be2\u4e00\u4e2a\u7f13\u5b58\u548c\u6570\u636e\u5e93\u4e2d\u90fd\u4e0d\u5b58\u5728\u7684\u6570\u636e\u3002\u8fd9\u5bfc\u81f4\u6bcf\u6b21\u8bf7\u6c42\u90fd\u4f1a\u201c\u7a7f\u900f\u201d\u7f13\u5b58\uff0c\u76f4\u63a5\u67e5\u8be2\u6570\u636e\u5e93\uff0c\u7ed9\u6570\u636e\u5e93\u5e26\u6765\u5de8\u5927\u538b\u529b\u3002</p> <p>\u6392\u67e5\u601d\u8def\uff1a</p> <ul> <li>\u4e1a\u52a1\u65e5\u5fd7\u5206\u6790\uff1a \u5206\u6790\u5e94\u7528\u7684\u8bbf\u95ee\u65e5\u5fd7\uff0c\u627e\u51fa\u88ab\u9891\u7e41\u67e5\u8be2\u4f46\u8fd4\u56de\u4e3a\u7a7a\u7684\u8bf7\u6c42\u3002</li> <li>\u6293\u53d6 Redis \u547d\u4ee4\uff1a \u4f7f\u7528 <code>MONITOR</code> \u547d\u4ee4\uff08\u614e\u7528\uff0c\u4f1a\u5f71\u54cd\u6027\u80fd\uff09\u6216\u8005\u7b2c\u4e09\u65b9\u6293\u5305\u5de5\u5177\uff0c\u89c2\u5bdf\u7ebf\u4e0a\u5b9e\u9645\u6267\u884c\u7684\u67e5\u8be2\u547d\u4ee4\uff0c\u67e5\u770b\u662f\u5426\u5b58\u5728\u5927\u91cf\u67e5\u8be2\u4e0d\u5b58\u5728\u7684 key \u7684\u60c5\u51b5\u3002</li> <li>\u5e94\u7528\u4ee3\u7801\u5ba1\u67e5\uff1a \u68c0\u67e5\u4ee3\u7801\u903b\u8f91\uff0c\u770b\u662f\u5426\u5b58\u5728\u6076\u610f\u653b\u51fb\u6216\u5f02\u5e38\u903b\u8f91\uff0c\u5bfc\u81f4\u67e5\u8be2\u4e0d\u5b58\u5728\u7684\u6570\u636e\u3002</li> </ul> <p>\u89e3\u51b3\u65b9\u6848\uff1a</p> <ul> <li>\u7f13\u5b58\u7a7a\u5bf9\u8c61\uff1a \u5f53\u6570\u636e\u5e93\u67e5\u8be2\u7ed3\u679c\u4e3a\u7a7a\u65f6\uff0c\u4f9d\u7136\u5728 Redis \u4e2d\u7f13\u5b58\u4e00\u4e2a\u7279\u6b8a\u503c\uff08\u5982 <code>null</code> \u6216\u4e00\u4e2a\u7ea6\u5b9a\u7684\u5b57\u7b26\u4e32\uff09\uff0c\u5e76\u8bbe\u7f6e\u4e00\u4e2a\u8f83\u77ed\u7684\u8fc7\u671f\u65f6\u95f4\u3002</li> <li>\u5e03\u9686\u8fc7\u6ee4\u5668 (Bloom Filter)\uff1a \u5728\u5e94\u7528\u5c42\u548c\u7f13\u5b58\u5c42\u4e4b\u95f4\u589e\u52a0\u5e03\u9686\u8fc7\u6ee4\u5668\uff0c\u5bf9\u4e8e\u6240\u6709\u53ef\u80fd\u5b58\u5728\u7684\u6570\u636e\uff0c\u90fd\u5c06\u5176\u5b58\u5165\u5e03\u9686\u8fc7\u6ee4\u5668\u3002\u5f53\u4e00\u4e2a\u67e5\u8be2\u8bf7\u6c42\u8fc7\u6765\u65f6\uff0c\u5148\u5728\u5e03\u9686\u8fc7\u6ee4\u5668\u4e2d\u5224\u65ad\u8be5 key \u662f\u5426\u53ef\u80fd\u5b58\u5728\uff0c\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u5219\u76f4\u63a5\u8fd4\u56de\uff0c\u907f\u514d\u4e86\u540e\u7eed\u7684\u7f13\u5b58\u548c\u6570\u636e\u5e93\u67e5\u8be2\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/%E6%8E%92%E6%9F%A5redis%E7%BA%BF%E4%B8%8A%E5%91%BD%E4%B8%AD%E7%8E%87%E6%9A%B4%E8%B7%8C%E7%9A%84%E9%97%AE%E9%A2%98/#2-cache-avalanche","title":"2. \u7f13\u5b58\u96ea\u5d29 (Cache Avalanche)","text":"<p>\u73b0\u8c61\uff1a \u5728\u67d0\u4e2a\u65f6\u95f4\u70b9\uff0c\u5927\u91cf\u7684\u7f13\u5b58 key \u540c\u65f6\u5931\u6548\uff0c\u5bfc\u81f4\u6d77\u91cf\u8bf7\u6c42\u77ac\u95f4\u76f4\u63a5\u6d8c\u5411\u6570\u636e\u5e93\uff0c\u9020\u6210\u6570\u636e\u5e93\u5d29\u6e83\u3002</p> <p>\u6392\u67e5\u601d\u8def\uff1a</p> <ul> <li>\u68c0\u67e5\u4ee3\u7801\u903b\u8f91\uff1a \u68c0\u67e5\u4e1a\u52a1\u4ee3\u7801\u4e2d\u8bbe\u7f6e\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\u7684\u903b\u8f91\uff0c\u662f\u5426\u6709\u53ef\u80fd\u5bfc\u81f4\u5927\u91cf key \u5728\u540c\u4e00\u65f6\u95f4\u70b9\u96c6\u4e2d\u8fc7\u671f\u3002 \u4f8b\u5982\uff0c\u9879\u76ee\u542f\u52a8\u65f6\u6279\u91cf\u52a0\u8f7d\u6570\u636e\u5e76\u8bbe\u7f6e\u4e86\u76f8\u540c\u7684\u8fc7\u671f\u65f6\u95f4\u3002</li> <li>Redis \u76d1\u63a7\uff1a \u67e5\u770b Redis \u7684 <code>expired_keys</code> \u6307\u6807\u662f\u5426\u6709\u77ac\u65f6\u7a81\u589e\u3002</li> </ul> <p>\u89e3\u51b3\u65b9\u6848\uff1a</p> <ul> <li>\u8fc7\u671f\u65f6\u95f4\u52a0\u968f\u673a\u503c\uff1a \u5728\u8bbe\u7f6e key \u7684\u8fc7\u671f\u65f6\u95f4\u65f6\uff0c\u589e\u52a0\u4e00\u4e2a\u968f\u673a\u6570\uff08\u4f8b\u5982\uff0c\u8fc7\u671f\u65f6\u95f4 = \u57fa\u7840\u65f6\u95f4 + \u968f\u673a\u79d2\u6570\uff09\uff0c\u907f\u514d key \u5728\u540c\u4e00\u65f6\u523b\u96c6\u4e2d\u5931\u6548\u3002</li> <li>\u9ad8\u53ef\u7528\u67b6\u6784\uff1a \u642d\u5efa Redis \u96c6\u7fa4\uff0c\u4fdd\u8bc1 Redis \u670d\u52a1\u7684\u7a33\u5b9a\u6027\u3002</li> <li>\u670d\u52a1\u964d\u7ea7\u4e0e\u7194\u65ad\uff1a \u5728\u5e94\u7528\u5c42\u8bbe\u7f6e\u964d\u7ea7\u7b56\u7565\uff0c\u5f53\u6570\u636e\u5e93\u538b\u529b\u8fc7\u5927\u65f6\uff0c\u53ef\u4ee5\u6682\u65f6\u727a\u7272\u975e\u6838\u5fc3\u4e1a\u52a1\uff0c\u8fd4\u56de\u9884\u8bbe\u503c\u6216\u9519\u8bef\u4fe1\u606f\uff0c\u4fdd\u8bc1\u6838\u5fc3\u670d\u52a1\u7684\u53ef\u7528\u6027\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/%E6%8E%92%E6%9F%A5redis%E7%BA%BF%E4%B8%8A%E5%91%BD%E4%B8%AD%E7%8E%87%E6%9A%B4%E8%B7%8C%E7%9A%84%E9%97%AE%E9%A2%98/#3-cache-breakdown","title":"3. \u7f13\u5b58\u51fb\u7a7f (Cache Breakdown)","text":"<p>\u73b0\u8c61\uff1a \u67d0\u4e00\u4e2a\u70ed\u70b9 Key \u5728\u5931\u6548\u7684\u77ac\u95f4\uff0c\u6709\u5927\u91cf\u7684\u5e76\u53d1\u8bf7\u6c42\u8bbf\u95ee\u8fd9\u4e2a Key\uff0c\u8fd9\u4e9b\u8bf7\u6c42\u90fd\u4f1a\u7a7f\u900f\u7f13\u5b58\uff0c\u76f4\u63a5\u6253\u5230\u6570\u636e\u5e93\u4e0a\u3002</p> <p>\u6392\u67e5\u601d\u8def\uff1a</p> <ul> <li>\u70ed\u70b9 Key \u8bc6\u522b\uff1a \u901a\u8fc7\u4e1a\u52a1\u65e5\u5fd7\u3001\u76d1\u63a7\u6216 Redis \u7684 <code>hotkeys</code> \u529f\u80fd\uff08Redis 4.0+ \u63d0\u4f9b\uff09\u6765\u8bc6\u522b\u54ea\u4e9b Key \u662f\u70ed\u70b9\u3002</li> <li>\u5931\u6548\u65f6\u95f4\u70b9\u786e\u8ba4\uff1a \u786e\u8ba4\u95ee\u9898\u7684\u53d1\u751f\u65f6\u95f4\u70b9\u662f\u5426\u4e0e\u67d0\u4e2a\u70ed\u70b9 Key \u7684\u5931\u6548\u65f6\u95f4\u70b9\u543b\u5408\u3002</li> </ul> <p>\u89e3\u51b3\u65b9\u6848\uff1a</p> <ul> <li>\u8bbe\u7f6e\u6c38\u4e0d\u8fc7\u671f\uff1a \u5bf9\u4e8e\u4e00\u4e9b\u70ed\u70b9\u6570\u636e\uff0c\u53ef\u4ee5\u8003\u8651\u8bbe\u7f6e\u4e3a\u6c38\u4e0d\u8fc7\u671f\uff0c\u7531\u540e\u53f0\u670d\u52a1\u5f02\u6b65\u66f4\u65b0\u7f13\u5b58\u3002</li> <li>\u5206\u5e03\u5f0f\u9501\uff1a \u5728\u67e5\u8be2\u6570\u636e\u5e93\u4e4b\u524d\uff0c\u4f7f\u7528\u5206\u5e03\u5f0f\u9501\uff08\u5982 Redisson\u3001SetNX\uff09\u6765\u63a7\u5236\u5e76\u53d1\u3002\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u83b7\u53d6\u5230\u9501\u540e\uff0c\u5b83\u8d1f\u8d23\u53bb\u6570\u636e\u5e93\u67e5\u8be2\u6570\u636e\u5e76\u5199\u56de\u7f13\u5b58\uff0c\u5176\u4ed6\u7ebf\u7a0b\u5219\u7b49\u5f85\u6216\u76f4\u63a5\u8fd4\u56de\u65e7\u6570\u636e\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/%E6%8E%92%E6%9F%A5redis%E7%BA%BF%E4%B8%8A%E5%91%BD%E4%B8%AD%E7%8E%87%E6%9A%B4%E8%B7%8C%E7%9A%84%E9%97%AE%E9%A2%98/#4","title":"4. \u5185\u5b58\u8fbe\u5230\u4e0a\u9650\u4e0e\u6570\u636e\u6dd8\u6c70","text":"<p>\u73b0\u8c61\uff1a Redis \u7684 <code>used_memory</code> \u8fbe\u5230\u4e86 <code>maxmemory</code> \u7684\u9650\u5236\uff0c\u89e6\u53d1\u4e86\u5185\u5b58\u6dd8\u6c70\u7b56\u7565\uff0c\u5bfc\u81f4\u90e8\u5206\u6570\u636e\u88ab\u52a8\u5220\u9664\uff0c\u547d\u4e2d\u7387\u4e0b\u964d\u3002</p> <p>\u6392\u67e5\u601d\u8def\uff1a</p> <ul> <li>INFO \u547d\u4ee4\uff1a \u68c0\u67e5 <code>INFO memory</code> \u90e8\u5206\u7684 <code>used_memory</code> \u548c <code>maxmemory</code>\uff0c\u4ee5\u53ca <code>INFO stats</code> \u90e8\u5206\u7684 <code>evicted_keys</code> (\u88ab\u6dd8\u6c70\u7684 key \u6570\u91cf) \u662f\u5426\u5728\u6301\u7eed\u589e\u52a0\u3002</li> <li>\u68c0\u67e5\u6dd8\u6c70\u7b56\u7565\uff1a \u4f7f\u7528 <code>CONFIG GET maxmemory-policy</code> \u547d\u4ee4\u67e5\u770b\u5f53\u524d\u7684\u5185\u5b58\u6dd8\u6c70\u7b56\u7565\u662f\u5426\u5408\u7406\u3002\u5e38\u89c1\u7684\u7b56\u7565\u6709 <code>volatile-lru</code>, <code>allkeys-lru</code>, <code>volatile-ttl</code> \u7b49\u3002</li> </ul> <p>\u89e3\u51b3\u65b9\u6848\uff1a</p> <ul> <li>\u589e\u52a0\u5185\u5b58\uff1a \u5982\u679c\u4e1a\u52a1\u6570\u636e\u91cf\u786e\u5b9e\u5f88\u5927\uff0c\u6700\u76f4\u63a5\u7684\u65b9\u6cd5\u662f\u5347\u7ea7 Redis \u5b9e\u4f8b\u7684\u5185\u5b58\u3002</li> <li>\u4f18\u5316\u6dd8\u6c70\u7b56\u7565\uff1a \u6839\u636e\u4e1a\u52a1\u573a\u666f\u9009\u62e9\u66f4\u5408\u9002\u7684\u6dd8\u6c70\u7b56\u7565\u3002\u4f8b\u5982\uff0c\u5982\u679c\u6240\u6709 key \u90fd\u5f88\u91cd\u8981\uff0c\u53ef\u4ee5\u8003\u8651 <code>noeviction</code>\uff08\u4e0d\u6dd8\u6c70\uff0c\u5199\u64cd\u4f5c\u62a5\u9519\uff09\uff1b\u5982\u679c\u5e0c\u671b\u6dd8\u6c70\u6700\u8fd1\u6700\u5c11\u4f7f\u7528\u7684 key\uff0c\u5219 <code>allkeys-lru</code> \u662f\u4e0d\u9519\u7684\u9009\u62e9\u3002</li> <li>\u4f18\u5316\u6570\u636e\u7ed3\u6784\u4e0e\u5927 Key\uff1a \u68c0\u67e5\u662f\u5426\u5b58\u5728\u5927 Key\uff08\u4e00\u4e2a key \u5b58\u50a8\u4e86\u8fc7\u5927\u7684 value\uff09\uff0c\u5927 Key \u4e0d\u4ec5\u5360\u7528\u5927\u91cf\u5185\u5b58\uff0c\u800c\u4e14\u5728\u6dd8\u6c70\u548c\u8bbf\u95ee\u65f6\u4e5f\u53ef\u80fd\u9020\u6210\u6027\u80fd\u95ee\u9898\u3002\u53ef\u4ee5\u4f7f\u7528\u5de5\u5177\u8fdb\u884c\u626b\u63cf\u5206\u6790\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/%E6%8E%92%E6%9F%A5redis%E7%BA%BF%E4%B8%8A%E5%91%BD%E4%B8%AD%E7%8E%87%E6%9A%B4%E8%B7%8C%E7%9A%84%E9%97%AE%E9%A2%98/#_3","title":"\u9884\u9632\u4e0e\u76d1\u63a7","text":"<p>\u95ee\u9898\u89e3\u51b3\u540e\uff0c\u4e3a\u4e86\u9632\u6b62\u672a\u6765\u518d\u6b21\u53d1\u751f\uff0c\u9700\u8981\u5efa\u7acb\u5b8c\u5584\u7684\u76d1\u63a7\u548c\u9884\u8b66\u673a\u5236\u3002</p> <ol> <li> <p>\u5b8c\u5584\u76d1\u63a7\u4f53\u7cfb\uff1a</p> <ul> <li>\u547d\u4e2d\u7387\u76d1\u63a7\uff1a \u6301\u7eed\u76d1\u63a7 Redis \u7684\u7f13\u5b58\u547d\u4e2d\u7387\uff0c\u5e76\u8bbe\u7f6e\u544a\u8b66\u9608\u503c\u3002</li> <li>\u5185\u5b58\u4f7f\u7528\u7387\uff1a \u76d1\u63a7\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\uff0c\u5728\u63a5\u8fd1 <code>maxmemory</code> \u65f6\u63d0\u524d\u544a\u8b66\u3002</li> <li>\u8fde\u63a5\u6570\u4e0e\u6162\u67e5\u8be2\uff1a \u76d1\u63a7\u5ba2\u6237\u7aef\u8fde\u63a5\u6570\u548c Redis \u7684\u6162\u67e5\u8be2\u65e5\u5fd7\u3002</li> </ul> </li> <li> <p>\u89c4\u8303\u7f13\u5b58\u4f7f\u7528\uff1a</p> <ul> <li>\u8bc4\u4f30\u7f13\u5b58\u5bb9\u91cf\uff1a \u5728\u65b0\u4e1a\u52a1\u4e0a\u7ebf\u524d\uff0c\u8bc4\u4f30\u6240\u9700\u7f13\u5b58\u5bb9\u91cf\uff0c\u907f\u514d\u5185\u5b58\u4e0d\u8db3\u3002</li> <li>\u5236\u5b9a\u7f13\u5b58\u7b56\u7565\uff1a \u660e\u786e\u4e0d\u540c\u4e1a\u52a1\u6570\u636e\u7684\u7f13\u5b58\u8fc7\u671f\u7b56\u7565\uff0c\u907f\u514d\u7f13\u5b58\u96ea\u5d29\u3002</li> <li>\u4ee3\u7801\u5ba1\u67e5\uff1a \u5728\u4ee3\u7801\u8bc4\u5ba1\u73af\u8282\uff0c\u5173\u6ce8\u7f13\u5b58\u7684\u4f7f\u7528\u662f\u5426\u5408\u7406\uff0c\u662f\u5426\u5b58\u5728\u7f13\u5b58\u7a7f\u900f\u7b49\u98ce\u9669\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%E3%80%81%E7%BC%93%E5%AD%98%E5%87%BB%E7%A9%BF%E3%80%81%E7%BC%93%E5%AD%98%E9%9B%AA%E5%B4%A9/","title":"\u7f13\u5b58\u7a7f\u900f\u3001\u7f13\u5b58\u51fb\u7a7f\u3001\u7f13\u5b58\u96ea\u5d29","text":""},{"location":"%E9%9D%A2%E7%BB%8F/redis/%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%E3%80%81%E7%BC%93%E5%AD%98%E5%87%BB%E7%A9%BF%E3%80%81%E7%BC%93%E5%AD%98%E9%9B%AA%E5%B4%A9/#cache-penetration","title":"\u7f13\u5b58\u7a7f\u900f (Cache Penetration)","text":"<p>\u7f13\u5b58\u7a7f\u900f\u6307\u7684\u662f\u5ba2\u6237\u7aef\u8bf7\u6c42\u67e5\u8be2\u4e00\u4e2a\u5728\u7f13\u5b58\u548c\u6570\u636e\u5e93\u4e2d\u90fd\u7edd\u5bf9\u4e0d\u5b58\u5728\u7684\u6570\u636e\u3002\u7531\u4e8e\u7f13\u5b58\u4e2d\u6ca1\u6709\u547d\u4e2d\uff0c\u8bf7\u6c42\u4f1a\u76f4\u63a5\u5230\u8fbe\u6570\u636e\u5e93\uff0c\u800c\u6570\u636e\u5e93\u4e5f\u67e5\u4e0d\u5230\u8be5\u6570\u636e\uff0c\u56e0\u6b64\u4e0d\u4f1a\u5c06\u7ed3\u679c\u5199\u5165\u7f13\u5b58\u3002\u5f53\u6709\u5927\u91cf\u6b64\u7c7b\u8bf7\u6c42\uff08\u5c24\u5176\u662f\u6076\u610f\u7684\u653b\u51fb\u8bf7\u6c42\uff09\u53d1\u751f\u65f6\uff0c\u8fd9\u4e9b\u8bf7\u6c42\u4f1a\u5b8c\u5168\u7ed5\u8fc7\u7f13\u5b58\u7684\u4fdd\u62a4\uff0c\u76f4\u63a5\u5bf9\u6570\u636e\u5e93\u9020\u6210\u5de8\u5927\u538b\u529b\uff0c\u53ef\u80fd\u5bfc\u81f4\u6570\u636e\u5e93\u670d\u52a1\u54cd\u5e94\u7f13\u6162\u751a\u81f3\u5b95\u673a\u3002</p> <ul> <li>\u6838\u5fc3\u7279\u5f81\uff1a\u67e5\u8be2\u7684\u6570\u636e\u672c\u8eab\u5c31\u662f\u4e0d\u5b58\u5728\u7684\u3002</li> <li>\u4f8b\u5b50\uff1a\u9ed1\u5ba2\u4f7f\u7528\u5927\u91cf\u4e0d\u5b58\u5728\u7684\u7528\u6237ID\uff08\u4f8b\u5982\u8d1f\u6570ID\u6216\u8d85\u5927ID\uff09\u6765\u9891\u7e41\u8bf7\u6c42\u7528\u6237\u4fe1\u606f\u63a5\u53e3\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%E3%80%81%E7%BC%93%E5%AD%98%E5%87%BB%E7%A9%BF%E3%80%81%E7%BC%93%E5%AD%98%E9%9B%AA%E5%B4%A9/#_1","title":"\u89e3\u51b3\u65b9\u6848","text":"<ol> <li> <p>\u7f13\u5b58\u65e0\u6548\u952e (Cache Null Values)</p> <ul> <li>\u63aa\u65bd\uff1a\u5f53\u6570\u636e\u5e93\u67e5\u8be2\u786e\u8ba4\u67d0\u4e2akey\u4e0d\u5b58\u5728\u65f6\uff0c\u4ecd\u7136\u5728\u7f13\u5b58\u4e2d\u4e3a\u8fd9\u4e2akey\u5b58\u5165\u4e00\u4e2a\u7279\u6b8a\u7684\u503c\uff08\u6bd4\u5982<code>null</code>\u6216\u8005\u4e00\u4e2a\u7ea6\u5b9a\u7684\u5b57\u7b26\u4e32\uff09\uff0c\u5e76\u8bbe\u7f6e\u4e00\u4e2a\u8f83\u77ed\u7684\u8fc7\u671f\u65f6\u95f4\u3002</li> <li>\u539f\u7406\uff1a\u8fd9\u79cd\u65b9\u6cd5\u7684\u6838\u5fc3\u601d\u60f3\u662f\u5c06\u201c\u4e0d\u5b58\u5728\u201d\u8fd9\u4e2a\u72b6\u6001\u4e5f\u89c6\u4e3a\u4e00\u79cd\u6570\u636e\u5e76\u8fdb\u884c\u7f13\u5b58\u3002\u5f53\u540e\u7eed\u518d\u6b21\u6709\u5bf9\u540c\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684key\u7684\u8bf7\u6c42\u65f6\uff0c\u7f13\u5b58\u5c42\u53ef\u4ee5\u76f4\u63a5\u8fd4\u56de\u8fd9\u4e2a\u9884\u8bbe\u7684\u201c\u7a7a\u503c\u201d\uff0c\u4ece\u800c\u907f\u514d\u4e86\u8bf7\u6c42\u518d\u6b21\u7a7f\u900f\u5230\u6570\u636e\u5e93\u3002\u8bbe\u7f6e\u4e00\u4e2a\u8f83\u77ed\u7684\u8fc7\u671f\u65f6\u95f4\uff0c\u662f\u4e3a\u4e86\u9632\u6b62\u7f13\u5b58\u4e2d\u5b58\u50a8\u5927\u91cf\u65e0\u6548key\uff0c\u540c\u65f6\u4e5f\u80fd\u5728\u4e00\u5b9a\u65f6\u95f4\u5185\u6709\u6548\u62b5\u6321\u5bf9\u540c\u4e00\u4e2akey\u7684\u91cd\u590d\u653b\u51fb\u3002</li> </ul> </li> <li> <p>\u5e03\u9686\u8fc7\u6ee4\u5668 (Bloom Filter)</p> <ul> <li>\u63aa\u65bd\uff1a\u5728\u8bf7\u6c42\u8bbf\u95ee\u7f13\u5b58\u4e4b\u524d\uff0c\u8bbe\u7f6e\u4e00\u4e2a\u5e03\u9686\u8fc7\u6ee4\u5668\u3002\u7cfb\u7edf\u542f\u52a8\u65f6\uff0c\u5c06\u6240\u6709\u53ef\u80fd\u5b58\u5728\u7684\u6570\u636ekey\uff08\u4f8b\u5982\uff0c\u6570\u636e\u5e93\u4e2d\u6240\u6709\u7684\u5546\u54c1ID\uff09\u90fd\u52a0\u8f7d\u5230\u5e03\u9686\u8fc7\u6ee4\u5668\u4e2d\u3002\u5f53\u4e00\u4e2a\u8bf7\u6c42\u5230\u6765\u65f6\uff1a<ol> <li>\u5148\u53bb\u5e03\u9686\u8fc7\u6ee4\u5668\u68c0\u67e5\u8fd9\u4e2akey\u662f\u5426\u5b58\u5728\u3002</li> <li>\u5982\u679c\u5e03\u9686\u8fc7\u6ee4\u5668\u5224\u65adkey\u4e0d\u5b58\u5728\uff0c\u5219\u76f4\u63a5\u62d2\u7edd\u8be5\u8bf7\u6c42\uff0c\u8fd4\u56de\u7a7a\u503c\u3002</li> <li>\u5982\u679c\u5e03\u9686\u8fc7\u6ee4\u5668\u5224\u65adkey\u53ef\u80fd\u5b58\u5728\uff0c\u5219\u653e\u884c\u8bf7\u6c42\uff0c\u8ba9\u5b83\u7ee7\u7eed\u67e5\u8be2\u7f13\u5b58\u548c\u6570\u636e\u5e93\u3002</li> </ol> </li> <li>\u539f\u7406\uff1a\u5e03\u9686\u8fc7\u6ee4\u5668\u662f\u4e00\u79cd\u9ad8\u6548\u7684\u6982\u7387\u578b\u6570\u636e\u7ed3\u6784\uff0c\u7528\u4e8e\u5224\u65ad\u4e00\u4e2a\u5143\u7d20\u662f\u5426\u5728\u4e00\u4e2a\u96c6\u5408\u4e2d\u3002\u5b83\u7684\u539f\u7406\u662f\u4f7f\u7528\u4e00\u4e2a\u5f88\u957f\u7684\u4f4d\u6570\u7ec4\uff08bit array\uff09\u548c\u591a\u4e2a\u72ec\u7acb\u7684\u54c8\u5e0c\u51fd\u6570\u3002\u5f53\u6dfb\u52a0\u4e00\u4e2a\u5143\u7d20\u65f6\uff0c\u4f1a\u7528\u591a\u4e2a\u54c8\u5e0c\u51fd\u6570\u8ba1\u7b97\u51fa\u591a\u4e2a\u54c8\u5e0c\u503c\uff0c\u5e76\u5c06\u4f4d\u6570\u7ec4\u4e2d\u5bf9\u5e94\u4f4d\u7f6e\u7684bit\u7f6e\u4e3a1\u3002\u5f53\u67e5\u8be2\u4e00\u4e2a\u5143\u7d20\u65f6\uff0c\u540c\u6837\u8ba1\u7b97\u51fa\u591a\u4e2a\u54c8\u5e0c\u503c\uff0c\u5e76\u68c0\u67e5\u4f4d\u6570\u7ec4\u4e2d\u5bf9\u5e94\u4f4d\u7f6e\u662f\u5426\u5168\u90e8\u4e3a1\u3002<ul> <li>\u4f18\u70b9\uff1a\u7a7a\u95f4\u6548\u7387\u548c\u67e5\u8be2\u65f6\u95f4\u90fd\u8fdc\u8d85\u4e00\u822c\u7684\u6570\u636e\u7ed3\u6784\u3002</li> <li>\u7279\u70b9\uff1a\u5b83\u53ef\u4ee5100%\u786e\u5b9a\u4e00\u4e2a\u5143\u7d20\u7edd\u5bf9\u4e0d\u5728\u96c6\u5408\u4e2d\uff0c\u4f46\u53ea\u80fd\u6982\u7387\u6027\u5730\u5224\u65ad\u4e00\u4e2a\u5143\u7d20\u53ef\u80fd\u5728\u96c6\u5408\u4e2d\uff08\u56e0\u4e3a\u53ef\u80fd\u5b58\u5728\u54c8\u5e0c\u51b2\u7a81\uff0c\u5bfc\u81f4\u8bef\u5224\uff09\u3002\u901a\u8fc7\u5728\u5165\u53e3\u5904\u62e6\u622a\u6389\u7edd\u5927\u591a\u6570\u4e0d\u5b58\u5728\u7684key\uff0c\u5b83\u6781\u5927\u5730\u4fdd\u62a4\u4e86\u540e\u7aef\u7684\u7f13\u5b58\u548c\u6570\u636e\u5e93\u7cfb\u7edf\u3002</li> </ul> </li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%E3%80%81%E7%BC%93%E5%AD%98%E5%87%BB%E7%A9%BF%E3%80%81%E7%BC%93%E5%AD%98%E9%9B%AA%E5%B4%A9/#cache-breakdown","title":"\u7f13\u5b58\u51fb\u7a7f (Cache Breakdown)","text":"<p>\u7f13\u5b58\u51fb\u7a7f\u7279\u6307\u67d0\u4e00\u4e2a\u8bbf\u95ee\u6781\u5176\u9891\u7e41\u7684\u70ed\u70b9\u6570\u636e\uff08Hot Key\uff09\uff0c\u5728\u5b83\u7f13\u5b58\u8fc7\u671f\u7684\u77ac\u95f4\uff0c\u6709\u5927\u91cf\u7684\u5e76\u53d1\u8bf7\u6c42\u540c\u65f6\u6d8c\u5165\u3002\u7531\u4e8e\u6b64\u523b\u7f13\u5b58\u5df2\u5931\u6548\uff0c\u8fd9\u4e9b\u8bf7\u6c42\u4f1a\u540c\u65f6\u7a7f\u900f\u7f13\u5b58\uff0c\u76f4\u63a5\u6253\u5230\u540e\u7aef\u7684\u6570\u636e\u5e93\u4e0a\uff0c\u5bfc\u81f4\u6570\u636e\u5e93\u77ac\u95f4\u538b\u529b\u5267\u589e\uff0c\u53ef\u80fd\u5f15\u53d1\u6545\u969c\u3002</p> <ul> <li>\u6838\u5fc3\u7279\u5f81\uff1a\u5355\u4e2a\u70ed\u70b9\u6570\u636e\u5728\u67d0\u4e00\u77ac\u95f4\u8fc7\u671f\u5931\u6548\u3002</li> <li>\u4f8b\u5b50\uff1a\u5728\u79d2\u6740\u6d3b\u52a8\u4e2d\uff0c\u67d0\u4e2a\u70ed\u95e8\u5546\u54c1\u7684\u7f13\u5b58\u5728\u6d3b\u52a8\u8fdb\u884c\u4e2d\u7a81\u7136\u8fc7\u671f\uff0c\u6210\u5343\u4e0a\u4e07\u7684\u5237\u65b0\u8bf7\u6c42\u77ac\u95f4\u5168\u90e8\u6253\u5411\u4e86\u6570\u636e\u5e93\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%E3%80%81%E7%BC%93%E5%AD%98%E5%87%BB%E7%A9%BF%E3%80%81%E7%BC%93%E5%AD%98%E9%9B%AA%E5%B4%A9/#_2","title":"\u89e3\u51b3\u65b9\u6848","text":"<ol> <li> <p>\u4f7f\u7528\u4e92\u65a5\u9501\uff08Mutex Lock\uff09</p> <ul> <li>\u63aa\u65bd\uff1a\u5f53\u7f13\u5b58\u672a\u547d\u4e2d\u65f6\uff0c\u5e76\u4e0d\u662f\u8ba9\u6240\u6709\u7ebf\u7a0b\u90fd\u53bb\u67e5\u8be2\u6570\u636e\u5e93\u3002\u800c\u662f\u5148\u5c1d\u8bd5\u83b7\u53d6\u4e00\u4e2a\u4e92\u65a5\u9501\uff08\u4f8b\u5982\u57fa\u4e8eRedis\u7684SETNX\u5b9e\u73b0\u7684\u5206\u5e03\u5f0f\u9501\uff09\u3002<ul> <li>\u7b2c\u4e00\u4e2a\u83b7\u53d6\u5230\u9501\u7684\u7ebf\u7a0b\u8d1f\u8d23\u4ece\u6570\u636e\u5e93\u52a0\u8f7d\u6570\u636e\uff0c\u5e76\u5c06\u6570\u636e\u5199\u56de\u7f13\u5b58\uff0c\u6700\u540e\u91ca\u653e\u9501\u3002</li> <li>\u5176\u4ed6\u672a\u83b7\u53d6\u5230\u9501\u7684\u7ebf\u7a0b\u5219\u4e0d\u4f1a\u53bb\u8bbf\u95ee\u6570\u636e\u5e93\uff0c\u800c\u662f\u4f1a\u7b49\u5f85\u4e00\u5c0f\u6bb5\u65f6\u95f4\u540e\u91cd\u8bd5\u67e5\u8be2\u7f13\u5b58\u3002\u6b64\u65f6\uff0c\u7b2c\u4e00\u4e2a\u7ebf\u7a0b\u5f88\u53ef\u80fd\u5df2\u7ecf\u5c06\u6570\u636e\u5199\u5165\u7f13\u5b58\u4e86\u3002</li> </ul> </li> <li>\u539f\u7406\uff1a\u8be5\u65b9\u6848\u7684\u6838\u5fc3\u662f\u5c06\u5e76\u53d1\u7684\u6570\u636e\u5e93\u67e5\u8be2\u64cd\u4f5c\u4e32\u884c\u5316\u3002\u901a\u8fc7\u52a0\u9501\u673a\u5236\uff0c\u786e\u4fdd\u4e86\u5728\u7f13\u5b58\u5931\u6548\u7684\u77ac\u95f4\uff0c\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u80fd\u591f\u53bb\u6267\u884c\u6570\u636e\u5e93\u67e5\u8be2\u548c\u7f13\u5b58\u56de\u5199\u64cd\u4f5c\uff0c\u5176\u4ed6\u7ebf\u7a0b\u5219\u88ab\u963b\u585e\u6216\u5f15\u5bfc\u53bb\u91cd\u8bd5\uff0c\u4ece\u800c\u6709\u6548\u907f\u514d\u4e86\u5927\u91cf\u5e76\u53d1\u8bf7\u6c42\u540c\u65f6\u51b2\u51fb\u6570\u636e\u5e93\uff0c\u4fdd\u62a4\u4e86\u540e\u7aef\u7cfb\u7edf\u3002</li> </ul> </li> <li> <p>\u8bbe\u7f6e\u70ed\u70b9\u6570\u636e\u6c38\u4e0d\u8fc7\u671f</p> <ul> <li>\u63aa\u65bd\uff1a\u5bf9\u4e8e\u4e00\u4e9b\u6838\u5fc3\u7684\u70ed\u70b9\u6570\u636e\uff0c\u53ef\u4ee5\u76f4\u63a5\u5728\u7f13\u5b58\u4e2d\u8bbe\u7f6e\u4e3a\u201c\u6c38\u4e0d\u8fc7\u671f\u201d\uff0c\u6216\u8005\u5c06\u8fc7\u671f\u65f6\u95f4\u8bbe\u7f6e\u5f97\u975e\u5e38\u957f\u3002</li> <li>\u539f\u7406\uff1a\u8fd9\u79cd\u65b9\u6cd5\u4ece\u6839\u672c\u4e0a\u6d88\u9664\u4e86\u6570\u636e\u8fc7\u671f\u7684\u53ef\u80fd\u6027\uff0c\u56e0\u6b64\u4e5f\u5c31\u4e0d\u4f1a\u53d1\u751f\u56e0\u8fc7\u671f\u5f15\u53d1\u7684\u7f13\u5b58\u51fb\u7a7f\u95ee\u9898\u3002\u5bf9\u4e8e\u9700\u8981\u66f4\u65b0\u7684\u6570\u636e\uff0c\u53ef\u4ee5\u901a\u8fc7\u540e\u53f0\u4efb\u52a1\u3001\u6d88\u606f\u961f\u5217\u6216\u8fd0\u8425\u624b\u52a8\u89e6\u53d1\u7b49\u65b9\u5f0f\u6765\u4e3b\u52a8\u5237\u65b0\u7f13\u5b58\uff0c\u800c\u4e0d\u662f\u4f9d\u8d56\u4e8e\u88ab\u52a8\u7684\u8fc7\u671f\u6dd8\u6c70\u673a\u5236\u3002</li> </ul> </li> <li> <p>\u7f13\u5b58\u9884\u70ed\uff08Cache Preheating\uff09</p> <ul> <li>\u63aa\u65bd\uff1a\u5728\u53ef\u9884\u89c1\u7684\u6d41\u91cf\u9ad8\u5cf0\u5230\u6765\u4e4b\u524d\uff08\u4f8b\u5982\uff0c\u5927\u4fc3\u6d3b\u52a8\u5f00\u59cb\u524d\uff09\uff0c\u901a\u8fc7\u5b9a\u65f6\u4efb\u52a1\u6216\u624b\u52a8\u89e6\u53d1\u7684\u65b9\u5f0f\uff0c\u63d0\u524d\u5c06\u5373\u5c06\u6210\u4e3a\u70ed\u70b9\u7684\u6570\u636e\u52a0\u8f7d\u5230\u7f13\u5b58\u4e2d\uff0c\u5e76\u8bbe\u7f6e\u4e00\u4e2a\u5408\u7406\u7684\u8fc7\u671f\u65f6\u95f4\uff08\u4f8b\u5982\uff0c\u5c06\u8fc7\u671f\u65f6\u95f4\u8bbe\u7f6e\u4e3a\u6d3b\u52a8\u7ed3\u675f\u4e4b\u540e\uff09\u3002</li> <li>\u539f\u7406\uff1a\u8fd9\u662f\u4e00\u79cd\u4e3b\u52a8\u7684\u7f13\u5b58\u7ba1\u7406\u7b56\u7565\u3002\u5b83\u5c06\u586b\u5145\u7f13\u5b58\u6570\u636e\u7684\u64cd\u4f5c\u4ece\u9ad8\u5e76\u53d1\u7684\u7528\u6237\u8bf7\u6c42\u65f6\uff0c\u63d0\u524d\u5230\u4e86\u7cfb\u7edf\u76f8\u5bf9\u7a7a\u95f2\u7684\u9636\u6bb5\uff0c\u786e\u4fdd\u5728\u6d41\u91cf\u6d2a\u5cf0\u5230\u8fbe\u65f6\uff0c\u70ed\u70b9\u6570\u636e\u5df2\u7ecf\u5728\u7f13\u5b58\u4e2d\u51c6\u5907\u5c31\u7eea\uff0c\u907f\u514d\u4e86\u4e34\u65f6\u7684\u7f13\u5b58\u5931\u6548\u95ee\u9898\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%E3%80%81%E7%BC%93%E5%AD%98%E5%87%BB%E7%A9%BF%E3%80%81%E7%BC%93%E5%AD%98%E9%9B%AA%E5%B4%A9/#cache-avalanche","title":"\u7f13\u5b58\u96ea\u5d29 (Cache Avalanche)","text":"<p>\u7f13\u5b58\u96ea\u5d29\u6307\u7684\u662f\u5728\u67d0\u4e00\u4e2a\u65f6\u95f4\u6bb5\u5185\uff0c\u7f13\u5b58\u5927\u9762\u79ef\u3001\u96c6\u4e2d\u5730\u5931\u6548\uff0c\u6216\u8005\u7f13\u5b58\u670d\u52a1\u81ea\u8eab\u53d1\u751f\u6545\u969c\u5b95\u673a\u3002\u8fd9\u5bfc\u81f4\u6d77\u91cf\u7684\u8bf7\u6c42\u65e0\u6cd5\u88ab\u7f13\u5b58\u5904\u7406\uff0c\u4ece\u800c\u50cf\u96ea\u5d29\u4e00\u6837\u5168\u90e8\u6d8c\u5411\u6570\u636e\u5e93\uff0c\u9020\u6210\u6570\u636e\u5e93\u538b\u529b\u8fc7\u5927\u751a\u81f3\u5d29\u6e83\u3002</p> <ul> <li>\u6838\u5fc3\u7279\u5f81\uff1a\u5927\u91cf\u6570\u636e\u540c\u65f6\u8fc7\u671f \u6216 \u7f13\u5b58\u670d\u52a1\u4e0d\u53ef\u7528\u3002</li> <li>\u4f8b\u5b50\uff1a\u7cfb\u7edf\u542f\u52a8\u65f6\uff0c\u5c06\u4e00\u5927\u6279\u6570\u636e\u5728\u540c\u4e00\u65f6\u523b\u52a0\u8f7d\u8fdb\u7f13\u5b58\uff0c\u5e76\u8bbe\u7f6e\u4e86\u76f8\u540c\u7684\u8fc7\u671f\u65f6\u95f4\uff08\u4f8b\u59821\u5c0f\u65f6\uff09\u30021\u5c0f\u65f6\u540e\uff0c\u8fd9\u4e9b\u7f13\u5b58\u540c\u65f6\u5931\u6548\uff0c\u5bfc\u81f4\u6240\u6709\u76f8\u5173\u8bf7\u6c42\u5168\u90e8\u6253\u5411\u6570\u636e\u5e93\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%E3%80%81%E7%BC%93%E5%AD%98%E5%87%BB%E7%A9%BF%E3%80%81%E7%BC%93%E5%AD%98%E9%9B%AA%E5%B4%A9/#_3","title":"\u89e3\u51b3\u65b9\u6848","text":""},{"location":"%E9%9D%A2%E7%BB%8F/redis/%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%E3%80%81%E7%BC%93%E5%AD%98%E5%87%BB%E7%A9%BF%E3%80%81%E7%BC%93%E5%AD%98%E9%9B%AA%E5%B4%A9/#_4","title":"\u9488\u5bf9\u5927\u91cf\u6570\u636e\u96c6\u4e2d\u5931\u6548\u7684\u60c5\u51b5\uff1a","text":"<ol> <li>\u8bbe\u7f6e\u968f\u673a\u8fc7\u671f\u65f6\u95f4<ul> <li>\u63aa\u65bd\uff1a\u5728\u539f\u6709\u7684\u8fc7\u671f\u65f6\u95f4\u57fa\u7840\u4e0a\uff0c\u589e\u52a0\u4e00\u4e2a\u968f\u673a\u7684\u65f6\u95f4\u504f\u79fb\u91cf\u3002\u4f8b\u5982\uff0c\u539f\u672c\u7edf\u4e00\u8bbe\u7f6e\u4e3a1\u5c0f\u65f6\u8fc7\u671f\uff0c\u53ef\u4ee5\u6539\u4e3a <code>3600\u79d2 + random(0, 600)\u79d2</code>\u3002</li> <li>\u539f\u7406\uff1a\u8fd9\u79cd\u65b9\u6cd5\u7684\u6838\u5fc3\u662f\u5c06\u7f13\u5b58\u7684\u8fc7\u671f\u65f6\u95f4\u70b9\u6253\u6563\u3002\u901a\u8fc7\u5f15\u5165\u968f\u673a\u6027\uff0c\u53ef\u4ee5\u786e\u4fdd\u7f13\u5b58\u4e0d\u4f1a\u5728\u540c\u4e00\u65f6\u523b\u53d1\u751f\u5927\u89c4\u6a21\u7684\u96c6\u4e2d\u5931\u6548\uff0c\u800c\u662f\u4f1a\u5728\u4e00\u6bb5\u65f6\u95f4\u5185\u5206\u6279\u3001\u5747\u5300\u5730\u8fc7\u671f\u3002\u8fd9\u6837\uff0c\u843d\u5230\u6570\u636e\u5e93\u4e0a\u7684\u8bf7\u6c42\u538b\u529b\u5c31\u4f1a\u88ab\u5e73\u644a\u5f00\u6765\uff0c\u907f\u514d\u4e86\u77ac\u95f4\u7684\u538b\u529b\u5cf0\u503c\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/redis/%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%E3%80%81%E7%BC%93%E5%AD%98%E5%87%BB%E7%A9%BF%E3%80%81%E7%BC%93%E5%AD%98%E9%9B%AA%E5%B4%A9/#_5","title":"\u9488\u5bf9\u7f13\u5b58\u670d\u52a1\u4e0d\u53ef\u7528\u7684\u60c5\u51b5\uff1a","text":"<ol> <li> <p>\u6784\u5efa\u9ad8\u53ef\u7528\u7684\u7f13\u5b58\u96c6\u7fa4</p> <ul> <li>\u63aa\u65bd\uff1a\u91c7\u7528Redis\u7684\u4e3b\u4ece\u590d\u5236+\u54e8\u5175\uff08Sentinel\uff09\u6a21\u5f0f\uff0c\u6216\u8005Redis\u96c6\u7fa4\uff08Cluster\uff09\u6a21\u5f0f\u6765\u90e8\u7f72\u7f13\u5b58\u670d\u52a1\u3002</li> <li>\u539f\u7406\uff1a\u901a\u8fc7\u96c6\u7fa4\u5316\u6765\u907f\u514d\u5355\u70b9\u6545\u969c\u3002\u5f53\u96c6\u7fa4\u4e2d\u7684\u67d0\u4e2a\u8282\u70b9\uff08\u4f8b\u5982\u4e3b\u8282\u70b9\uff09\u5b95\u673a\u65f6\uff0c\u54e8\u5175\u6216\u96c6\u7fa4\u673a\u5236\u80fd\u591f\u81ea\u52a8\u8fdb\u884c\u6545\u969c\u8f6c\u79fb\uff08Failover\uff09\uff0c\u5c06\u4e00\u4e2a\u4ece\u8282\u70b9\u63d0\u5347\u4e3a\u65b0\u7684\u4e3b\u8282\u70b9\uff0c\u4ece\u800c\u4fdd\u8bc1\u7f13\u5b58\u670d\u52a1\u80fd\u591f\u6301\u7eed\u5bf9\u5916\u63d0\u4f9b\u670d\u52a1\uff0c\u907f\u514d\u4e86\u6574\u4e2a\u7f13\u5b58\u670d\u52a1\u7684\u762b\u75ea\u3002</li> </ul> </li> <li> <p>\u9650\u6d41\u4e0e\u964d\u7ea7</p> <ul> <li>\u63aa\u65bd\uff1a<ul> <li>\u9650\u6d41\uff1a\u5728\u7cfb\u7edf\u7684\u5165\u53e3\u5c42\uff08\u5982API\u7f51\u5173\uff09\u5bf9\u8bf7\u6c42\u8fdb\u884c\u9650\u5236\uff0c\u5f53\u68c0\u6d4b\u5230\u7f13\u5b58\u670d\u52a1\u5f02\u5e38\u65f6\uff0c\u53ea\u5141\u8bb8\u4e00\u5c0f\u90e8\u5206\u8bf7\u6c42\u80fd\u591f\u5230\u8fbe\u540e\u7aef\u6570\u636e\u5e93\u3002</li> <li>\u964d\u7ea7\uff1a\u5f53\u7f13\u5b58\u670d\u52a1\u4e0d\u53ef\u7528\u65f6\uff0c\u6682\u65f6\u5173\u95ed\u4e00\u4e9b\u975e\u6838\u5fc3\u529f\u80fd\u3002\u5bf9\u4e8e\u67d0\u4e9b\u8bf7\u6c42\uff0c\u53ef\u4ee5\u4e0d\u8bbf\u95ee\u6570\u636e\u5e93\uff0c\u800c\u662f\u76f4\u63a5\u8fd4\u56de\u4e00\u4e2a\u9884\u8bbe\u7684\u9ed8\u8ba4\u503c\u3001\u515c\u5e95\u6570\u636e\u6216\u53cb\u597d\u7684\u63d0\u793a\u9875\u9762\u3002</li> </ul> </li> <li>\u539f\u7406\uff1a\u8fd9\u662f\u4e00\u79cd\u727a\u7272\u90e8\u5206\u7528\u6237\u4f53\u9a8c\u6765\u6362\u53d6\u7cfb\u7edf\u6574\u4f53\u7a33\u5b9a\u7684\u201c\u4e22\u8f66\u4fdd\u5e05\u201d\u7b56\u7565\u3002\u901a\u8fc7\u4e3b\u52a8\u9650\u5236\u6d41\u91cf\u548c\u5173\u95ed\u6b21\u8981\u529f\u80fd\uff0c\u786e\u4fdd\u5728\u6781\u7aef\u60c5\u51b5\u4e0b\uff0c\u6838\u5fc3\u670d\u52a1\uff08\u5982\u767b\u5f55\u3001\u652f\u4ed8\uff09\u548c\u540e\u7aef\u6570\u636e\u5e93\u4e0d\u4f1a\u88ab\u5f7b\u5e95\u538b\u57ae\uff0c\u4fdd\u8bc1\u4e86\u7cfb\u7edf\u7684\u6838\u5fc3\u53ef\u7528\u6027\u3002</li> </ul> </li> <li> <p>\u591a\u7ea7\u7f13\u5b58</p> <ul> <li>\u63aa\u65bd\uff1a\u5728\u5e94\u7528\u4e2d\u5f15\u5165\u591a\u7ea7\u7f13\u5b58\u4f53\u7cfb\uff0c\u4f8b\u5982\uff0c\u4f7f\u7528\u8fdb\u7a0b\u5185\u7684\u672c\u5730\u7f13\u5b58\uff08\u5982Google Guava Cache\u3001Caffeine\uff09\u4f5c\u4e3a\u4e00\u7ea7\u7f13\u5b58\uff0c\u4f7f\u7528Redis\u7b49\u5206\u5e03\u5f0f\u7f13\u5b58\u4f5c\u4e3a\u4e8c\u7ea7\u7f13\u5b58\u3002</li> <li>\u539f\u7406\uff1a\u4e3a\u7cfb\u7edf\u63d0\u4f9b\u989d\u5916\u7684\u4fdd\u62a4\u5c42\u3002\u5f53\u4f5c\u4e3a\u4e8c\u7ea7\u7f13\u5b58\u7684Redis\u96c6\u7fa4\u53d1\u751f\u6545\u969c\u65f6\uff0c\u4e00\u7ea7\u672c\u5730\u7f13\u5b58\u4ecd\u7136\u53ef\u4ee5\u547d\u4e2d\u4e00\u90e8\u5206\u70ed\u70b9\u6570\u636e\uff0c\u62b5\u6321\u4f4f\u90e8\u5206\u6d41\u91cf\uff0c\u4e3a\u540e\u7aef\u6570\u636e\u5e93\u63d0\u4f9b\u4e00\u9053\u7f13\u51b2\uff0c\u51cf\u8f7b\u7f13\u5b58\u96ea\u5d29\u5e26\u6765\u7684\u76f4\u63a5\u51b2\u51fb\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/RabbitMQ%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E6%B6%88%E6%81%AF%E4%B8%8D%E4%B8%A2%E5%A4%B1/","title":"RabbitMQ\u5982\u4f55\u4fdd\u8bc1\u6d88\u606f\u4e0d\u4e22\u5931","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/RabbitMQ%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E6%B6%88%E6%81%AF%E4%B8%8D%E4%B8%A2%E5%A4%B1/#rabbitmq","title":"\u751f\u4ea7\u9636\u6bb5\uff1a\u786e\u4fdd\u6d88\u606f\u6210\u529f\u53d1\u9001\u5230 RabbitMQ","text":"<p>\u5728\u751f\u4ea7\u9636\u6bb5\uff0c\u6838\u5fc3\u662f\u786e\u4fdd\u751f\u4ea7\u8005\u53d1\u9001\u7684\u6d88\u606f\u80fd\u591f\u88ab RabbitMQ \u670d\u52a1\u7aef\u6210\u529f\u63a5\u6536\u5e76\u5904\u7406\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/RabbitMQ%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E6%B6%88%E6%81%AF%E4%B8%8D%E4%B8%A2%E5%A4%B1/#amqp-transactions","title":"\u65b9\u6848\u4e00\uff1aAMQP \u4e8b\u52a1\u673a\u5236 (Transactions)","text":"<p>\u751f\u4ea7\u8005\u53ef\u4ee5\u5c06\u4fe1\u9053\uff08Channel\uff09\u8bbe\u7f6e\u4e3a\u4e8b\u52a1\u6a21\u5f0f\u3002\u5728\u6b64\u6a21\u5f0f\u4e0b\uff0c\u751f\u4ea7\u8005\u53ef\u4ee5\u53d1\u5e03\u4e00\u6761\u6216\u591a\u6761\u6d88\u606f\uff0c\u7136\u540e\u63d0\u4ea4\u4e8b\u52a1\u3002\u53ea\u6709\u5f53\u4e8b\u52a1\u6210\u529f\u63d0\u4ea4\uff0c\u6d88\u606f\u624d\u4f1a\u88ab\u786e\u8ba4\u3002\u5982\u679c\u5728\u63d0\u4ea4\u8fc7\u7a0b\u4e2d\u53d1\u751f\u4efb\u4f55\u9519\u8bef\uff0c\u751f\u4ea7\u8005\u53ef\u4ee5\u56de\u6eda\u4e8b\u52a1\uff0c\u5c31\u50cf\u6240\u6709\u6d88\u606f\u90fd\u6ca1\u6709\u88ab\u53d1\u9001\u8fc7\u4e00\u6837\u3002</p> <ul> <li>\u4f18\u70b9\uff1a\u63d0\u4f9b\u4e86\u201c\u8981\u4e48\u5168\u90e8\u6210\u529f\uff0c\u8981\u4e48\u5168\u90e8\u5931\u8d25\u201d\u7684\u539f\u5b50\u6027\u4fdd\u8bc1\u3002</li> <li>\u7f3a\u70b9\uff1a\u4e8b\u52a1\u673a\u5236\u662f\u540c\u6b65\u7684\uff0c\u975e\u5e38\u8017\u8d39\u6027\u80fd\u3002\u5b83\u4f1a\u963b\u585e\u751f\u4ea7\u8005\uff0c\u76f4\u5230 RabbitMQ \u8fd4\u56de\u4e8b\u52a1\u63d0\u4ea4\u7684\u7ed3\u679c\uff0c\u8fd9\u4f7f\u5f97\u541e\u5410\u91cf\u5927\u5e45\u4e0b\u964d\uff0c\u6709\u65f6\u751a\u81f3\u4f1a\u964d\u4f4e 250 \u500d\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/RabbitMQ%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E6%B6%88%E6%81%AF%E4%B8%8D%E4%B8%A2%E5%A4%B1/#publisher-confirms","title":"\u65b9\u6848\u4e8c\uff1a\u53d1\u9001\u65b9\u786e\u8ba4\u673a\u5236 (Publisher Confirms)","text":"<p>\u7531\u4e8e\u4e8b\u52a1\u673a\u5236\u6027\u80fd\u5f00\u9500\u5de8\u5927\uff0cRabbitMQ \u5f15\u5165\u4e86\u66f4\u8f7b\u91cf\u7ea7\u7684\u53d1\u9001\u65b9\u786e\u8ba4\u673a\u5236\u3002 \u8fd9\u662f\u4e00\u79cd\u5f02\u6b65\u7684\u786e\u8ba4\u65b9\u5f0f\uff0c\u5f53\u751f\u4ea7\u8005\u5c06\u4fe1\u9053\u8bbe\u7f6e\u4e3a <code>confirm</code> \u6a21\u5f0f\u540e\uff0c\u6240\u6709\u5728\u8be5\u4fe1\u9053\u4e0a\u53d1\u5e03\u7684\u6d88\u606f\u90fd\u4f1a\u88ab\u5206\u914d\u4e00\u4e2a\u552f\u4e00\u7684 ID\u3002\u4e00\u65e6\u6d88\u606f\u88ab RabbitMQ \u6b63\u786e\u63a5\u6536\uff0c\u5b83\u5c31\u4f1a\u53d1\u9001\u4e00\u4e2a\u786e\u8ba4\uff08<code>ack</code>\uff09\u7ed9\u751f\u4ea7\u8005\u3002</p> <ul> <li>\u4f18\u70b9\uff1a\u5f02\u6b65\u673a\u5236\uff0c\u6027\u80fd\u5f00\u9500\u8fdc\u5c0f\u4e8e\u4e8b\u52a1\u3002\u786e\u8ba4\u4fe1\u606f\u53ef\u4ee5\u6279\u91cf\u53d1\u9001\uff0c\u4e5f\u53ef\u4ee5\u9010\u6761\u53d1\u9001\uff0c\u975e\u5e38\u7075\u6d3b\u3002 \u8fd9\u662f\u4e1a\u754c\u63a8\u8350\u7684\u3001\u7528\u4e8e\u4fdd\u8bc1\u751f\u4ea7\u8005\u6d88\u606f\u53ef\u9760\u6027\u7684\u9996\u9009\u65b9\u6848\u3002</li> <li>\u5982\u4f55\u5de5\u4f5c\uff1a<ul> <li>\u6301\u4e45\u5316\u6d88\u606f\uff1a\u5f53\u6d88\u606f\u88ab\u5199\u5165\u6240\u6709\u76ee\u6807\u961f\u5217\u7684\u78c1\u76d8\u540e\uff0cRabbitMQ \u4f1a\u53d1\u9001 <code>ack</code>\u3002</li> <li>\u975e\u6301\u4e45\u5316\u6d88\u606f\uff1a\u5f53\u6d88\u606f\u5230\u8fbe\u6240\u6709\u76ee\u6807\u961f\u5217\u540e\uff0c<code>ack</code> \u5c31\u4f1a\u88ab\u53d1\u9001\u3002</li> <li>\u5982\u679c RabbitMQ \u53d1\u751f\u5185\u90e8\u9519\u8bef\u5bfc\u81f4\u65e0\u6cd5\u5904\u7406\u6d88\u606f\uff0c\u5219\u4f1a\u53d1\u9001\u4e00\u4e2a <code>nack</code> (Negative Acknowledgement)\u3002\u751f\u4ea7\u8005\u6536\u5230 <code>nack</code> \u6216\u5728\u8d85\u65f6\u540e\u4ecd\u672a\u6536\u5230 <code>ack</code>\uff0c\u5c31\u53ef\u4ee5\u8fdb\u884c\u6d88\u606f\u7684\u91cd\u53d1\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/RabbitMQ%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E6%B6%88%E6%81%AF%E4%B8%8D%E4%B8%A2%E5%A4%B1/#rabbitmq_1","title":"\u5b58\u50a8\u9636\u6bb5\uff1a\u786e\u4fdd\u6d88\u606f\u5728 RabbitMQ \u670d\u52a1\u7aef\u4e0d\u4e22\u5931","text":"<p>\u5373\u4f7f\u6d88\u606f\u6210\u529f\u5230\u8fbe\u4e86 RabbitMQ\uff0c\u5982\u679c RabbitMQ \u670d\u52a1\u8282\u70b9\u5b95\u673a\u6216\u91cd\u542f\uff0c\u5185\u5b58\u4e2d\u7684\u6d88\u606f\u4e5f\u4f1a\u4e22\u5931\u3002\u6301\u4e45\u5316\u673a\u5236\u662f\u89e3\u51b3\u6b64\u95ee\u9898\u7684\u5173\u952e\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/RabbitMQ%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E6%B6%88%E6%81%AF%E4%B8%8D%E4%B8%A2%E5%A4%B1/#_1","title":"\u6301\u4e45\u5316\u4e09\u8981\u7d20","text":"<p>\u8981\u4f7f\u6d88\u606f\u5728 RabbitMQ \u91cd\u542f\u540e\u4f9d\u7136\u5b58\u5728\uff0c\u5fc5\u987b\u540c\u65f6\u6ee1\u8db3\u4ee5\u4e0b\u4e09\u4e2a\u6761\u4ef6\uff1a 1.  \u4ea4\u6362\u673a\uff08Exchange\uff09\u6301\u4e45\u5316\uff1a\u5728\u58f0\u660e\u4ea4\u6362\u673a\u65f6\uff0c\u5c06\u5176 <code>durable</code> \u5c5e\u6027\u8bbe\u7f6e\u4e3a <code>true</code>\u3002 2.  \u961f\u5217\uff08Queue\uff09\u6301\u4e45\u5316\uff1a\u5728\u58f0\u660e\u961f\u5217\u65f6\uff0c\u4e5f\u9700\u8981\u5c06\u5176 <code>durable</code> \u5c5e\u6027\u8bbe\u7f6e\u4e3a <code>true</code>\u3002 3.  \u6d88\u606f\uff08Message\uff09\u6301\u4e45\u5316\uff1a\u5728\u53d1\u9001\u6d88\u606f\u65f6\uff0c\u5c06\u5176\u6295\u9012\u6a21\u5f0f\uff08<code>delivery_mode</code>\uff09\u8bbe\u7f6e\u4e3a <code>2</code> (persistent)\u3002</p> <p>\u6ce8\u610f\uff1a\u8fd9\u4e09\u4e2a\u6761\u4ef6\u7f3a\u4e00\u4e0d\u53ef\u3002\u5982\u679c\u6d88\u606f\u662f\u6301\u4e45\u5316\u7684\uff0c\u4f46\u5b83\u88ab\u8def\u7531\u5230\u7684\u961f\u5217\u4e0d\u662f\u6301\u4e45\u5316\u7684\uff0c\u90a3\u4e48\u5728 Broker \u91cd\u542f\u540e\uff0c\u961f\u5217\u4f1a\u6d88\u5931\uff0c\u6d88\u606f\u4e5f\u4f1a\u968f\u4e4b\u4e22\u5931\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/RabbitMQ%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E6%B6%88%E6%81%AF%E4%B8%8D%E4%B8%A2%E5%A4%B1/#_2","title":"\u6d88\u8d39\u9636\u6bb5\uff1a\u786e\u4fdd\u6d88\u8d39\u8005\u6210\u529f\u5904\u7406\u6d88\u606f","text":"<p>\u6d88\u606f\u88ab\u6210\u529f\u63a8\u9001\u5230\u6d88\u8d39\u8005\u540e\uff0c\u5982\u679c\u6d88\u8d39\u8005\u5728\u5904\u7406\u8fc7\u7a0b\u4e2d\u53d1\u751f\u5f02\u5e38\uff08\u4f8b\u5982\u670d\u52a1\u5668\u5b95\u673a\u6216\u7a0b\u5e8f\u5d29\u6e83\uff09\uff0c\u8fd9\u6761\u6d88\u606f\u5c31\u6709\u53ef\u80fd\u4e22\u5931\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/RabbitMQ%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E6%B6%88%E6%81%AF%E4%B8%8D%E4%B8%A2%E5%A4%B1/#consumer-acknowledgements","title":"\u6d88\u8d39\u8005\u786e\u8ba4\u673a\u5236 (Consumer Acknowledgements)","text":"<p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0cRabbitMQ \u5141\u8bb8\u6d88\u8d39\u8005\u5728\u5904\u7406\u5b8c\u6d88\u606f\u540e\uff0c\u5411\u670d\u52a1\u7aef\u53d1\u9001\u4e00\u4e2a\u786e\u8ba4\u56de\u6267\uff08<code>ack</code>\uff09\u3002</p> <ul> <li>\u81ea\u52a8\u786e\u8ba4 (Automatic Acknowledgement)\uff1a\u5728\u8fd9\u79cd\u6a21\u5f0f\u4e0b\uff0cRabbitMQ \u5728\u53d1\u9001\u6d88\u606f\u540e\u4f1a\u7acb\u5373\u5c06\u5176\u6807\u8bb0\u4e3a\u5df2\u5220\u9664\u3002 \u5982\u679c\u6b64\u65f6\u6d88\u8d39\u8005\u5904\u7406\u5931\u8d25\u6216\u5728\u5904\u7406\u8fc7\u7a0b\u4e2d\u5b95\u673a\uff0c\u6d88\u606f\u5c31\u4f1a\u4e22\u5931\u3002\u56e0\u6b64\uff0c\u8fd9\u79cd\u6a21\u5f0f\u7684\u5b89\u5168\u6027\u8f83\u4f4e\u3002</li> <li>\u624b\u52a8\u786e\u8ba4 (Manual Acknowledgement)\uff1a\u8fd9\u662f\u4fdd\u8bc1\u6d88\u8d39\u53ef\u9760\u6027\u7684\u63a8\u8350\u65b9\u5f0f\u3002RabbitMQ \u5c06\u6d88\u606f\u53d1\u9001\u7ed9\u6d88\u8d39\u8005\u540e\uff0c\u4f1a\u7b49\u5f85\u6d88\u8d39\u8005\u7684<code>ack</code>\u3002\u5982\u679c\u6d88\u8d39\u8005\u6210\u529f\u5904\u7406\u4e86\u6d88\u606f\uff0c\u5c31\u53d1\u9001 <code>ack</code>\uff0cRabbitMQ \u624d\u4f1a\u5c06\u6d88\u606f\u5220\u9664\u3002\u5982\u679c\u6d88\u8d39\u8005\u7684\u8fde\u63a5\u65ad\u5f00\uff08\u6216\u5728\u8d85\u65f6\u65f6\u95f4\u5185\u672a<code>ack</code>\uff09\uff0cRabbitMQ \u4f1a\u8ba4\u4e3a\u6d88\u606f\u6ca1\u6709\u88ab\u6210\u529f\u5904\u7406\uff0c\u5e76\u4f1a\u5c06\u5176\u91cd\u65b0\u6295\u9012\u7ed9\u5176\u4ed6\u6d88\u8d39\u8005\uff08\u6216\u540c\u4e00\u4e2a\u6d88\u8d39\u8005\uff0c\u5982\u679c\u5b83\u6062\u590d\u4e86\uff09\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/RabbitMQ%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E6%B6%88%E6%81%AF%E4%B8%8D%E4%B8%A2%E5%A4%B1/#prefetch-count","title":"\u6d88\u8d39\u8005\u6d41\u91cf\u63a7\u5236 (Prefetch Count)","text":"<p>\u5728\u4f7f\u7528\u624b\u52a8\u786e\u8ba4\u65f6\uff0c\u4e3a\u4e86\u9632\u6b62 RabbitMQ \u5411\u4e00\u4e2a\u6d88\u8d39\u8005\u63a8\u9001\u8fc7\u591a\u5176\u6765\u4e0d\u53ca\u5904\u7406\u7684\u6d88\u606f\uff0c\u5bfc\u81f4\u8be5\u6d88\u8d39\u8005\u5185\u5b58\u8017\u5c3d\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>basic.qos</code> \u65b9\u6cd5\u8bbe\u7f6e\u9884\u53d6\u503c\uff08Prefetch Count\uff09\u3002 \u8fd9\u4e2a\u503c\u9650\u5236\u4e86\u4e00\u4e2a\u6d88\u8d39\u8005\u53ef\u4ee5\u540c\u65f6\u6301\u6709\u7684\u672a\u786e\u8ba4\u6d88\u606f\u7684\u6570\u91cf\u3002 \u5f53\u672a\u786e\u8ba4\u6d88\u606f\u8fbe\u5230\u8fd9\u4e2a\u6570\u91cf\u65f6\uff0cRabbitMQ \u5c06\u505c\u6b62\u5411\u8be5\u6d88\u8d39\u8005\u6295\u9012\u65b0\u6d88\u606f\uff0c\u76f4\u5230\u6709\u6d88\u606f\u88ab\u786e\u8ba4\u4e3a\u6b62\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/RabbitMQ%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E6%B6%88%E6%81%AF%E4%B8%8D%E4%B8%A2%E5%A4%B1/#rabbitmq_2","title":"\u9ad8\u53ef\u7528\u6027\uff1a\u786e\u4fdd RabbitMQ \u670d\u52a1\u672c\u8eab\u4e0d\u5b95\u673a","text":"<p>\u4ee5\u4e0a\u673a\u5236\u89e3\u51b3\u4e86\u5355\u4e2a\u73af\u8282\u7684\u53ef\u9760\u6027\u95ee\u9898\uff0c\u4f46\u5982\u679c RabbitMQ \u7684\u5355\u4e2a\u8282\u70b9\u53d1\u751f\u786c\u4ef6\u6545\u969c\u6216\u7f51\u7edc\u5206\u533a\uff0c\u6574\u4e2a\u670d\u52a1\u5c31\u4f1a\u53d8\u5f97\u4e0d\u53ef\u7528\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/RabbitMQ%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E6%B6%88%E6%81%AF%E4%B8%8D%E4%B8%A2%E5%A4%B1/#clustering","title":"\u96c6\u7fa4 (Clustering)","text":"<p>\u53ef\u4ee5\u5c06\u591a\u4e2a RabbitMQ \u8282\u70b9\u7ec4\u6210\u4e00\u4e2a\u96c6\u7fa4\u3002\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u8282\u70b9\u5171\u4eab\u4ea4\u6362\u673a\u3001\u961f\u5217\u3001\u7528\u6237\u7b49\u5143\u6570\u636e\u3002 \u4f46\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u961f\u5217\u53ca\u5176\u4e2d\u7684\u6d88\u606f\u5185\u5bb9\u53ea\u5b58\u50a8\u5728\u521b\u5efa\u8be5\u961f\u5217\u7684\u90a3\u4e2a\u8282\u70b9\u4e0a\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/RabbitMQ%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E6%B6%88%E6%81%AF%E4%B8%8D%E4%B8%A2%E5%A4%B1/#mirrored-queues-quorum","title":"\u955c\u50cf\u961f\u5217 (Mirrored Queues) / Quorum \u961f\u5217","text":"<p>\u4e3a\u4e86\u89e3\u51b3\u96c6\u7fa4\u4e2d\u961f\u5217\u5185\u5bb9\u5355\u70b9\u5b58\u50a8\u7684\u95ee\u9898\uff0c\u53ef\u4ee5\u914d\u7f6e\u9ad8\u53ef\u7528\u7b56\u7565\u3002 *   \u955c\u50cf\u961f\u5217\uff08\u5df2\u5f03\u7528\uff09: \u8fd9\u662f\u4f20\u7edf\u7684 HA \u65b9\u6848\uff0c\u4e00\u4e2a\u961f\u5217\u4f1a\u6709\u4e00\u4e2a\u4e3b\u8282\u70b9\uff08Leader\uff09\u548c\u591a\u4e2a\u4ece\u8282\u70b9\uff08Mirrors\uff09\u3002\u6240\u6709\u64cd\u4f5c\u9996\u5148\u5728\u4e3b\u8282\u70b9\u4e0a\u6267\u884c\uff0c\u7136\u540e\u5e7f\u64ad\u5230\u4ece\u8282\u70b9\u3002\u5982\u679c\u4e3b\u8282\u70b9\u5b95\u673a\uff0c\u4e00\u4e2a\u4ece\u8282\u70b9\u4f1a\u88ab\u63d0\u5347\u4e3a\u65b0\u7684\u4e3b\u8282\u70b9\u3002 *   Quorum \u961f\u5217: \u8fd9\u662f RabbitMQ 3.8 \u7248\u672c\u4ee5\u540e\u63a8\u8350\u7684\u3001\u7528\u4e8e\u66ff\u4ee3\u955c\u50cf\u961f\u5217\u7684\u65b0\u4e00\u4ee3\u9ad8\u53ef\u7528\u548c\u6570\u636e\u5b89\u5168\u65b9\u6848\u3002 \u5b83\u57fa\u4e8e Raft \u4e00\u81f4\u6027\u534f\u8bae\uff0c\u63d0\u4f9b\u4e86\u6bd4\u4f20\u7edf\u955c\u50cf\u961f\u5217\u66f4\u5f3a\u7684\u6570\u636e\u4e00\u81f4\u6027\u4fdd\u8bc1\u3002</p> <p>\u901a\u8fc7\u96c6\u7fa4\u548c\u961f\u5217\u590d\u5236\uff0c\u5373\u4f7f\u67d0\u4e2a RabbitMQ \u8282\u70b9\u5b8c\u5168\u5931\u6548\uff0c\u5176\u4ed6\u8282\u70b9\u4e0a\u4ecd\u7136\u6709\u6d88\u606f\u7684\u5b8c\u6574\u526f\u672c\uff0c\u670d\u52a1\u53ef\u4ee5\u7ee7\u7eed\u8fdb\u884c\uff0c\u4ece\u800c\u907f\u514d\u4e86\u5355\u70b9\u6545\u969c\u3002</p> \u73af\u8282 \u53ef\u80fd\u7684\u95ee\u9898 \u89e3\u51b3\u65b9\u6848 \u751f\u4ea7\u8005 -&gt; Broker \u7f51\u7edc\u6296\u52a8\u6216 Broker \u6545\u969c\u5bfc\u81f4\u6d88\u606f\u53d1\u9001\u5931\u8d25\u3002 \u4f7f\u7528 Publisher Confirms (\u53d1\u9001\u65b9\u786e\u8ba4) \u673a\u5236\uff0c\u5e76\u914d\u5408\u91cd\u8bd5\u903b\u8f91\u3002 Broker \u5185\u90e8\u5b58\u50a8 Broker \u8282\u70b9\u5b95\u673a\u6216\u91cd\u542f\u5bfc\u81f4\u5185\u5b58\u4e2d\u7684\u6d88\u606f\u4e22\u5931\u3002 1.  \u5c06 Exchange \u8bbe\u7f6e\u4e3a\u6301\u4e45\u5316\u3002  2.  \u5c06 Queue \u8bbe\u7f6e\u4e3a\u6301\u4e45\u5316\u3002  3.  \u5c06 Message \u7684\u6295\u9012\u6a21\u5f0f\u8bbe\u4e3a\u6301\u4e45\u5316\u3002 Broker -&gt; \u6d88\u8d39\u8005 \u6d88\u606f\u5df2\u6295\u9012\uff0c\u4f46\u6d88\u8d39\u8005\u5728\u5904\u7406\u5b8c\u6210\u524d\u5c31\u5b95\u673a\u3002 \u4f7f\u7528 \u624b\u52a8\u6d88\u606f\u786e\u8ba4 (Manual ACK) \u673a\u5236\uff0c\u5e76\u63a7\u5236 Prefetch \u6570\u91cf\u3002 Broker \u81ea\u8eab\u9ad8\u53ef\u7528 \u5355\u4e2a Broker \u8282\u70b9\u786c\u4ef6\u6545\u969c\u6216\u7f51\u7edc\u4e0d\u53ef\u8fbe\u3002 \u90e8\u7f72 RabbitMQ \u96c6\u7fa4\uff0c\u5e76\u5bf9\u5173\u952e\u961f\u5217\u4f7f\u7528 Quorum \u961f\u5217 \u6216 \u955c\u50cf\u961f\u5217 \u8fdb\u884c\u6570\u636e\u590d\u5236\u3002"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/RabbitMQ%E6%AD%BB%E4%BF%A1%E6%9C%BA%E5%88%B6%E4%BB%8B%E7%BB%8D/","title":"RabbitMQ\u6b7b\u4fe1\u673a\u5236\u4ecb\u7ecd","text":"<p>RabbitMQ \u7684\u6b7b\u4fe1\u4ea4\u6362\u673a\uff08Dead-Letter-Exchange\uff0c\u7b80\u79f0 DLX\uff09\u662f\u4e00\u79cd\u5f3a\u5927\u7684\u6d88\u606f\u5904\u7406\u673a\u5236\uff0c\u7528\u4e8e\u5904\u7406\u65e0\u6cd5\u88ab\u6b63\u5e38\u6d88\u8d39\u7684\u6d88\u606f\u3002\u5f53\u4e00\u6761\u6d88\u606f\u5728\u961f\u5217\u4e2d\u56e0\u4e3a\u7279\u5b9a\u539f\u56e0\u53d8\u6210\u201c\u6b7b\u4fe1\u201d\u540e\uff0c\u5b83\u4f1a\u88ab\u91cd\u65b0\u53d1\u5e03\u5230\u4e00\u4e2a\u6307\u5b9a\u7684\u4ea4\u6362\u673a\uff0c\u8fd9\u4e2a\u4ea4\u6362\u673a\u5c31\u662f\u6b7b\u4fe1\u4ea4\u6362\u673a\u3002\u7ed1\u5b9a\u5230\u8fd9\u4e2a\u4ea4\u6362\u673a\u7684\u961f\u5217\u5219\u88ab\u79f0\u4e3a\u6b7b\u4fe1\u961f\u5217\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/RabbitMQ%E6%AD%BB%E4%BF%A1%E6%9C%BA%E5%88%B6%E4%BB%8B%E7%BB%8D/#_1","title":"\u6838\u5fc3\u6982\u5ff5","text":"<ul> <li>\u6b7b\u4fe1\u4ea4\u6362\u673a (Dead-Letter Exchange)\uff1a\u4e00\u4e2a\u666e\u901a\u7684 RabbitMQ \u4ea4\u6362\u673a\uff0c\u53ef\u4ee5\u662f\u4efb\u4f55\u7c7b\u578b\uff08\u5982 Direct, Topic, Fanout\uff09\uff0c\u4e13\u95e8\u7528\u6765\u63a5\u6536\u6b7b\u4fe1\u6d88\u606f\u3002</li> <li>\u6b7b\u4fe1\u961f\u5217 (Dead-Letter Queue)\uff1a\u4e00\u4e2a\u666e\u901a\u7684 RabbitMQ \u961f\u5217\uff0c\u7528\u4e8e\u5b58\u50a8\u7531\u6b7b\u4fe1\u4ea4\u6362\u673a\u8def\u7531\u8fc7\u6765\u7684\u6b7b\u4fe1\u6d88\u606f\uff0c\u4ee5\u4fbf\u8fdb\u884c\u540e\u7eed\u7684\u5206\u6790\u548c\u5904\u7406\u3002</li> <li>\u6b7b\u4fe1\u6d88\u606f\uff1a\u5728\u6e90\u961f\u5217\u4e2d\u65e0\u6cd5\u88ab\u6210\u529f\u6d88\u8d39\uff0c\u5e76\u88ab\u8f6c\u53d1\u5230\u6b7b\u4fe1\u4ea4\u6362\u673a\u7684\u6d88\u606f\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/RabbitMQ%E6%AD%BB%E4%BF%A1%E6%9C%BA%E5%88%B6%E4%BB%8B%E7%BB%8D/#_2","title":"\u6d88\u606f\u6210\u4e3a\u6b7b\u4fe1\u7684\u5e38\u89c1\u539f\u56e0","text":"<p>\u4e00\u6761\u6d88\u606f\u5728\u4ee5\u4e0b\u51e0\u79cd\u60c5\u51b5\u4e0b\u4f1a\u53d8\u6210\u6b7b\u4fe1\uff1a</p> <ol> <li>\u6d88\u606f\u88ab\u6d88\u8d39\u8005\u62d2\u7edd\uff1a\u6d88\u8d39\u8005\u901a\u8fc7 <code>basic.reject</code> \u6216 <code>basic.nack</code> \u65b9\u6cd5\u62d2\u7edd\u6d88\u606f\uff0c\u5e76\u4e14\u5c06 <code>requeue</code> \u53c2\u6570\u8bbe\u7f6e\u4e3a <code>false</code>\u3002\u8fd9\u610f\u5473\u7740\u6d88\u606f\u4e0d\u4f1a\u88ab\u91cd\u65b0\u653e\u56de\u539f\u961f\u5217\u3002</li> <li>\u6d88\u606f\u8fc7\u671f (TTL)\uff1a\u6d88\u606f\u5728\u961f\u5217\u4e2d\u7684\u5b58\u7559\u65f6\u95f4\u8d85\u8fc7\u4e86\u9884\u8bbe\u7684\u8fc7\u671f\u65f6\u95f4\uff08Time-To-Live\uff09\u3002\u8fd9\u53ef\u4ee5\u5bf9\u6574\u4e2a\u961f\u5217\u8bbe\u7f6e\uff0c\u4e5f\u53ef\u4ee5\u5bf9\u5355\u6761\u6d88\u606f\u8bbe\u7f6e\u3002</li> <li>\u961f\u5217\u8fbe\u5230\u6700\u5927\u957f\u5ea6\uff1a\u5f53\u961f\u5217\u4e2d\u7684\u6d88\u606f\u6570\u91cf\u8fbe\u5230\u4e0a\u9650\u65f6\uff0c\u6700\u65e9\u8fdb\u5165\u961f\u5217\u7684\u6d88\u606f\u5982\u679c\u8fd8\u6ca1\u6709\u88ab\u6d88\u8d39\uff0c\u5c31\u4f1a\u6210\u4e3a\u6b7b\u4fe1\u3002</li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/RabbitMQ%E6%AD%BB%E4%BF%A1%E6%9C%BA%E5%88%B6%E4%BB%8B%E7%BB%8D/#_3","title":"\u6b7b\u4fe1\u673a\u5236\u7684\u5de5\u4f5c\u6d41\u7a0b","text":"<p>\u6b7b\u4fe1\u673a\u5236\u7684\u8def\u7531\u6d41\u7a0b\u5982\u4e0b\uff1a</p> <ol> <li>\u751f\u4ea7\u8005\u5c06\u6d88\u606f\u53d1\u9001\u5230\u4e00\u4e2a\u5e38\u89c4\u7684\u4ea4\u6362\u673a\u3002</li> <li>\u8be5\u4ea4\u6362\u673a\u6839\u636e\u8def\u7531\u89c4\u5219\u5c06\u6d88\u606f\u6295\u9012\u5230\u4e00\u4e2a\u6216\u591a\u4e2a\u6e90\u961f\u5217\u3002</li> <li>\u6e90\u961f\u5217\u5728\u58f0\u660e\u65f6\u914d\u7f6e\u4e86\u4e24\u4e2a\u5173\u952e\u53c2\u6570\uff1a<ul> <li><code>x-dead-letter-exchange</code>\uff1a\u6307\u5b9a\u8be5\u961f\u5217\u7684\u6b7b\u4fe1\u4ea4\u6362\u673a\u3002</li> <li><code>x-dead-letter-routing-key</code> (\u53ef\u9009)\uff1a\u6307\u5b9a\u6b7b\u4fe1\u6d88\u606f\u88ab\u53d1\u9001\u5230\u6b7b\u4fe1\u4ea4\u6362\u673a\u65f6\u4f7f\u7528\u7684\u65b0\u8def\u7531\u952e\u3002\u5982\u679c\u6ca1\u6709\u8bbe\u7f6e\uff0c\u5219\u9ed8\u8ba4\u4f7f\u7528\u6d88\u606f\u539f\u59cb\u7684\u8def\u7531\u952e\u3002</li> </ul> </li> <li>\u5f53\u6e90\u961f\u5217\u4e2d\u7684\u67d0\u6761\u6d88\u606f\u6ee1\u8db3\u4e86\u6210\u4e3a\u6b7b\u4fe1\u7684\u6761\u4ef6\u65f6\uff0cRabbitMQ \u4f1a\u81ea\u52a8\u5c06\u5176\u4ece\u6e90\u961f\u5217\u4e2d\u79fb\u9664\u3002</li> <li>RabbitMQ \u5c06\u8fd9\u6761\u6b7b\u4fe1\u6d88\u606f\u53d1\u5e03\u5230\u6307\u5b9a\u7684\u6b7b\u4fe1\u4ea4\u6362\u673a\u3002</li> <li>\u6b7b\u4fe1\u4ea4\u6362\u673a\u6839\u636e\u5176\u7c7b\u578b\u548c\u7ed1\u5b9a\u7684\u8def\u7531\u89c4\u5219\uff0c\u5c06\u6b7b\u4fe1\u6d88\u606f\u8def\u7531\u5230\u5bf9\u5e94\u7684\u6b7b\u4fe1\u961f\u5217\u4e2d\u3002</li> <li>\u6d88\u8d39\u8005\u53ef\u4ee5\u8ba2\u9605\u6b7b\u4fe1\u961f\u5217\uff0c\u5bf9\u8fd9\u4e9b\u65e0\u6cd5\u6b63\u5e38\u5904\u7406\u7684\u6d88\u606f\u8fdb\u884c\u4e13\u95e8\u7684\u903b\u8f91\u5904\u7406\uff0c\u4f8b\u5982\u8bb0\u5f55\u65e5\u5fd7\u3001\u53d1\u9001\u8b66\u62a5\u6216\u8fdb\u884c\u4eba\u5de5\u5e72\u9884\u3002</li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/RabbitMQ%E6%AD%BB%E4%BF%A1%E6%9C%BA%E5%88%B6%E4%BB%8B%E7%BB%8D/#_4","title":"\u4e3b\u8981\u5e94\u7528\u573a\u666f","text":"<p>\u6b7b\u4fe1\u673a\u5236\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\u975e\u5e38\u5e7f\u6cdb\uff0c\u4e3b\u8981\u4f53\u73b0\u5728\u4ee5\u4e0b\u51e0\u4e2a\u65b9\u9762\uff1a</p> <ul> <li>\u5904\u7406\u6d88\u8d39\u5931\u8d25\u7684\u6d88\u606f\uff1a\u5f53\u6d88\u8d39\u8005\u56e0\u4e3a\u7a0b\u5e8f bug\u3001\u4f9d\u8d56\u670d\u52a1\u5f02\u5e38\u7b49\u539f\u56e0\u65e0\u6cd5\u5904\u7406\u67d0\u4e9b\u6d88\u606f\u65f6\uff0c\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u201c\u6bd2\u4e38\u201d\u6d88\u606f\u8f6c\u79fb\u5230\u6b7b\u4fe1\u961f\u5217\uff0c\u907f\u514d\u5f71\u54cd\u6b63\u5e38\u6d88\u606f\u7684\u5904\u7406\uff0c\u540c\u65f6\u65b9\u4fbf\u540e\u7eed\u6392\u67e5\u95ee\u9898\u3002</li> <li>\u5b9e\u73b0\u5ef6\u8fdf\u961f\u5217/\u5b9a\u65f6\u4efb\u52a1\uff1a\u901a\u8fc7\u4e3a\u961f\u5217\u8bbe\u7f6e\u6d88\u606f\u7684\u5b58\u6d3b\u65f6\u95f4\uff08TTL\uff09\uff0c\u53ef\u4ee5\u5b9e\u73b0\u5ef6\u8fdf\u6d88\u606f\u7684\u6548\u679c\u3002\u6d88\u606f\u5728\u53d1\u5e03\u540e\u4e0d\u4f1a\u7acb\u5373\u88ab\u6d88\u8d39\uff0c\u800c\u662f\u5728\u6e90\u961f\u5217\u4e2d\u201c\u7b49\u5f85\u201d\u8fc7\u671f\u3002\u4e00\u65e6\u8fc7\u671f\uff0c\u6d88\u606f\u5c31\u4f1a\u53d8\u6210\u6b7b\u4fe1\u5e76\u88ab\u8def\u7531\u5230\u6b7b\u4fe1\u961f\u5217\uff0c\u6b64\u65f6\u6d88\u8d39\u8005\u518d\u53bb\u5904\u7406\uff0c\u4ece\u800c\u8fbe\u5230\u4e86\u5ef6\u8fdf\u6267\u884c\u7684\u76ee\u7684\u3002</li> <li>\u5f02\u5e38\u76d1\u63a7\u4e0e\u544a\u8b66\uff1a\u53ef\u4ee5\u4e13\u95e8\u8bbe\u7f6e\u4e00\u4e2a\u6d88\u8d39\u8005\u6765\u76d1\u63a7\u6b7b\u4fe1\u961f\u5217\u3002\u4e00\u65e6\u6709\u65b0\u7684\u6b7b\u4fe1\u6d88\u606f\u8fdb\u5165\uff0c\u5c31\u89e6\u53d1\u544a\u8b66\u673a\u5236\uff0c\u901a\u77e5\u5f00\u53d1\u6216\u8fd0\u7ef4\u4eba\u5458\u53ca\u65f6\u4ecb\u5165\u5904\u7406\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/RabbitMQ%E6%AD%BB%E4%BF%A1%E6%9C%BA%E5%88%B6%E4%BB%8B%E7%BB%8D/#_5","title":"\u914d\u7f6e\u65b9\u5f0f","text":"<p>\u914d\u7f6e\u6b7b\u4fe1\u673a\u5236\u7684\u6838\u5fc3\u5728\u4e8e\u58f0\u660e\u6e90\u961f\u5217\u65f6\u6307\u5b9a\u5176\u6b7b\u4fe1\u4ea4\u6362\u673a\u3002</p> <ol> <li>\u521b\u5efa\u4e00\u4e2a\u6b7b\u4fe1\u4ea4\u6362\u673a\uff08\u4f8b\u5982 <code>dlx_exchange</code>\uff09\u3002</li> <li>\u521b\u5efa\u4e00\u4e2a\u6b7b\u4fe1\u961f\u5217\uff08\u4f8b\u5982 <code>dead_letter_queue</code>\uff09\u3002</li> <li>\u5c06\u6b7b\u4fe1\u961f\u5217\u7ed1\u5b9a\u5230\u6b7b\u4fe1\u4ea4\u6362\u673a\u3002</li> <li>\u5728\u521b\u5efa\u6e90\u961f\u5217\uff08\u4f8b\u5982 <code>source_queue</code>\uff09\u65f6\uff0c\u901a\u8fc7\u53c2\u6570 <code>arguments</code> \u6307\u5b9a <code>x-dead-letter-exchange</code> \u4e3a <code>dlx_exchange</code> \u7684\u540d\u79f0\u3002</li> </ol> <p>\u901a\u8fc7\u4ee5\u4e0a\u6b65\u9aa4\uff0c\u5f53 <code>source_queue</code> \u4e2d\u7684\u6d88\u606f\u53d8\u6210\u6b7b\u4fe1\u540e\uff0c\u5c31\u4f1a\u88ab\u81ea\u52a8\u8def\u7531\u5230 <code>dlx_exchange</code>\uff0c\u5e76\u6700\u7ec8\u8fdb\u5165 <code>dead_letter_queue</code>\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879\uff1a *   \u4e3a\u961f\u5217\u6307\u5b9a\u7684\u6b7b\u4fe1\u4ea4\u6362\u673a\u5fc5\u987b\u4e0e\u8be5\u961f\u5217\u5728\u540c\u4e00\u4e2a Vhost \u5185\u3002 *   \u961f\u5217\u7684\u6b7b\u4fe1\u4ea4\u6362\u673a\u5c5e\u6027\u4e00\u65e6\u8bbe\u7f6e\uff0c\u901a\u5e38\u4e0d\u652f\u6301\u4fee\u6539\u3002\u5982\u9700\u66f4\u6539\uff0c\u9700\u8981\u5220\u9664\u539f\u961f\u5217\u540e\u91cd\u65b0\u521b\u5efa\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/RabbitMQ%E6%B6%88%E6%81%AF%E5%A0%86%E7%A7%AF%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86/","title":"RabbitMQ\u6d88\u606f\u5806\u79ef\u5982\u4f55\u5904\u7406","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/RabbitMQ%E6%B6%88%E6%81%AF%E5%A0%86%E7%A7%AF%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86/#_1","title":"\u9884\u9632","text":"<ol> <li> <p>\u751f\u4ea7\u8005\u7aef\uff1a\u6d41\u91cf\u63a7\u5236\u4e0e\u786e\u8ba4\u673a\u5236</p> <ul> <li>\u53d1\u5e03\u8005\u786e\u8ba4 (Publisher Confirms): \u751f\u4ea7\u8005\u53d1\u9001\u6d88\u606f\u540e\uff0c\u7b49\u5f85 RabbitMQ \u8fd4\u56de\u786e\u8ba4\uff08<code>ack</code> \u6216 <code>nack</code>\uff09\u3002\u53ea\u6709\u6536\u5230\u786e\u8ba4\u540e\uff0c\u751f\u4ea7\u8005\u624d\u7ee7\u7eed\u53d1\u9001\u4e0b\u4e00\u6279\u6d88\u606f\u6216\u6e05\u9664\u7f13\u5b58\u4e2d\u7684\u6d88\u606f\u3002\u8fd9\u53ef\u4ee5\u9632\u6b62\u751f\u4ea7\u8005\u53d1\u9001\u8fc7\u5feb\u7684\u6d88\u606f\uff0c\u7ed9 RabbitMQ \u9020\u6210\u8fc7\u5927\u538b\u529b\u3002</li> <li>\u8bbe\u7f6e <code>setReturnListener</code>: \u5f53\u6d88\u606f\u65e0\u6cd5\u8def\u7531\u5230\u4efb\u4f55\u961f\u5217\u65f6\uff0cRabbitMQ \u4f1a\u901a\u77e5\u751f\u4ea7\u8005\u3002\u8fd9\u53ef\u4ee5\u5e2e\u52a9\u751f\u4ea7\u8005\u53d1\u73b0\u914d\u7f6e\u9519\u8bef\u6216\u961f\u5217\u95ee\u9898\uff0c\u907f\u514d\u65e0\u6548\u6d88\u606f\u5806\u79ef\u3002</li> <li>\u751f\u4ea7\u8005\u9650\u6d41 (Rate Limiting): \u5728\u751f\u4ea7\u8005\u5e94\u7528\u5c42\u9762\u5b9e\u73b0\u9650\u6d41\uff0c\u6839\u636e\u4e0b\u6e38\u7cfb\u7edf\uff08\u6216 RabbitMQ\uff09\u7684\u5904\u7406\u80fd\u529b\u6765\u63a7\u5236\u6d88\u606f\u53d1\u9001\u901f\u7387\u3002</li> </ul> </li> <li> <p>\u6d88\u8d39\u8005\u7aef\uff1a\u63d0\u9ad8\u5904\u7406\u80fd\u529b\u4e0e\u6548\u7387</p> <ul> <li>\u589e\u52a0\u6d88\u8d39\u8005\u6570\u91cf: \u8fd9\u662f\u6700\u76f4\u63a5\u6709\u6548\u7684\u65b9\u6cd5\u3002\u5f53\u6d88\u606f\u5806\u79ef\u65f6\uff0c\u90e8\u7f72\u66f4\u591a\u7684\u6d88\u8d39\u8005\u5b9e\u4f8b\u6765\u5e76\u884c\u5904\u7406\u6d88\u606f\u3002</li> <li>\u4f18\u5316\u6d88\u8d39\u8005\u4ee3\u7801: \u786e\u4fdd\u6d88\u8d39\u8005\u5904\u7406\u6d88\u606f\u7684\u903b\u8f91\u5c3d\u53ef\u80fd\u9ad8\u6548\uff0c\u51cf\u5c11\u4e0d\u5fc5\u8981\u7684\u8ba1\u7b97\u548c I/O \u64cd\u4f5c\u3002</li> <li>\u5408\u7406\u8bbe\u7f6e <code>Prefetch Count</code> (QoS): \u8fd9\u662f RabbitMQ \u4e2d\u975e\u5e38\u91cd\u8981\u7684\u4e00\u4e2a\u914d\u7f6e\u3002\u5b83\u9650\u5236\u4e86\u6d88\u8d39\u8005\u5728\u672a\u786e\u8ba4\uff08unacknowledged\uff09\u72b6\u6001\u4e0b\u53ef\u4ee5\u4ece\u961f\u5217\u4e2d\u83b7\u53d6\u7684\u6d88\u606f\u6570\u91cf\u3002<ul> <li>\u4f4e Prefetch Count: \u6d88\u8d39\u8005\u6bcf\u6b21\u53ea\u62c9\u53d6\u5c11\u91cf\u6d88\u606f\uff08\u4f8b\u5982 1 \u6216 2\uff09\uff0c\u5904\u7406\u5b8c\u5e76\u786e\u8ba4\u540e\u624d\u62c9\u53d6\u4e0b\u4e00\u6279\u3002\u8fd9\u53ef\u4ee5\u9632\u6b62\u5355\u4e2a\u6d88\u8d39\u8005\u5904\u7406\u7f13\u6162\u65f6\u5360\u7528\u8fc7\u591a\u6d88\u606f\uff0c\u5bfc\u81f4\u5176\u4ed6\u5feb\u901f\u7684\u6d88\u8d39\u8005\u65e0\u6d88\u606f\u53ef\u5904\u7406\u3002\u4f46\u53ef\u80fd\u5bfc\u81f4\u7f51\u7edc\u5229\u7528\u7387\u964d\u4f4e\u3002</li> <li>\u9ad8 Prefetch Count: \u6d88\u8d39\u8005\u4e00\u6b21\u6027\u62c9\u53d6\u5927\u91cf\u6d88\u606f\u3002\u9002\u5408\u5904\u7406\u901f\u5ea6\u975e\u5e38\u5feb\u4e14\u7a33\u5b9a\u7684\u6d88\u8d39\u8005\uff0c\u53ef\u4ee5\u63d0\u9ad8\u541e\u5410\u91cf\u3002</li> <li>\u5efa\u8bae: \u6839\u636e\u5b9e\u9645\u4e1a\u52a1\u548c\u6d88\u8d39\u8005\u5904\u7406\u901f\u5ea6\u8fdb\u884c\u6d4b\u8bd5\u548c\u8c03\u6574\uff0c\u627e\u5230\u6700\u4f73\u5e73\u8861\u70b9\u3002</li> </ul> </li> <li>\u5f02\u6b65\u5904\u7406: \u5982\u679c\u6d88\u606f\u5904\u7406\u5305\u542b\u8017\u65f6\u7684 I/O \u64cd\u4f5c\uff08\u5982\u6570\u636e\u5e93\u5199\u5165\u3001\u5916\u90e8 API \u8c03\u7528\uff09\uff0c\u8003\u8651\u5728\u6d88\u8d39\u8005\u5185\u90e8\u4f7f\u7528\u7ebf\u7a0b\u6c60\u6216\u5176\u4ed6\u5f02\u6b65\u673a\u5236\u6765\u5e76\u884c\u5904\u7406\u591a\u4e2a\u6d88\u606f\uff0c\u800c\u4e0d\u662f\u540c\u6b65\u5904\u7406\u3002</li> <li>\u6d88\u606f\u786e\u8ba4\u673a\u5236 (Acknowledge Mode): \u786e\u4fdd\u6d88\u606f\u53ea\u6709\u5728\u771f\u6b63\u5904\u7406\u5b8c\u6210\u540e\u624d\u8fdb\u884c\u786e\u8ba4\uff08<code>ACK</code>\uff09\u3002\u4e0d\u8981\u5728\u6d88\u606f\u4e00\u6536\u5230\u5c31\u81ea\u52a8\u786e\u8ba4\uff08<code>auto_ack</code>\uff09\u3002\u5982\u679c\u5904\u7406\u5931\u8d25\uff0c\u5e94\u8be5\u62d2\u7edd\uff08<code>NACK</code> \u6216 <code>REJECT</code>\uff09\u6d88\u606f\uff0c\u5e76\u9009\u62e9\u662f\u5426\u91cd\u65b0\u5165\u961f\u3002</li> </ul> </li> <li> <p>RabbitMQ \u914d\u7f6e\uff1a\u961f\u5217\u5c5e\u6027</p> <ul> <li>\u8bbe\u7f6e\u6d88\u606f TTL (Time-To-Live):<ul> <li>\u961f\u5217 TTL (<code>x-expires</code>): \u6574\u4e2a\u961f\u5217\u7684\u751f\u547d\u5468\u671f\u3002\u4e00\u6bb5\u65f6\u95f4\u6ca1\u6709\u6d88\u8d39\u8005\u8fde\u63a5\u6216\u6ca1\u6709\u6d88\u606f\u53d1\u9001\uff0c\u961f\u5217\u4f1a\u81ea\u52a8\u5220\u9664\u3002</li> <li>\u6d88\u606f TTL (<code>x-message-ttl</code>): \u961f\u5217\u4e2d\u6d88\u606f\u7684\u5b58\u6d3b\u65f6\u95f4\u3002\u8d85\u8fc7\u6307\u5b9a\u65f6\u95f4\u4ecd\u672a\u88ab\u6d88\u8d39\u7684\u6d88\u606f\u4f1a\u81ea\u52a8\u6b7b\u4ea1\u5e76\u88ab\u4e22\u5f03\uff08\u6216\u53d1\u9001\u5230\u6b7b\u4fe1\u961f\u5217\uff09\u3002\u8fd9\u53ef\u4ee5\u9632\u6b62\u8fc7\u671f\u6d88\u606f\u65e0\u9650\u671f\u5806\u79ef\u3002</li> </ul> </li> <li>\u8bbe\u7f6e\u961f\u5217\u6700\u5927\u957f\u5ea6 (<code>x-max-length</code>):<ul> <li>\u57fa\u4e8e\u6d88\u606f\u6570\u91cf (<code>x-max-length</code>): \u9650\u5236\u961f\u5217\u4e2d\u6d88\u606f\u7684\u6700\u5927\u6570\u91cf\u3002\u5f53\u8fbe\u5230\u4e0a\u9650\u65f6\uff0c\u6700\u8001\u7684\u6d88\u606f\u4f1a\u88ab\u4e22\u5f03\uff08\u6216\u53d1\u9001\u5230\u6b7b\u4fe1\u961f\u5217\uff09\u3002</li> <li>\u57fa\u4e8e\u6d88\u606f\u5927\u5c0f (<code>x-max-length-bytes</code>): \u9650\u5236\u961f\u5217\u4e2d\u6d88\u606f\u7684\u603b\u5b57\u8282\u6570\u3002\u5f53\u8fbe\u5230\u4e0a\u9650\u65f6\uff0c\u6700\u8001\u7684\u6d88\u606f\u4f1a\u88ab\u4e22\u5f03\u3002</li> <li>\u8fd9\u4e24\u79cd\u8bbe\u7f6e\u53ef\u4ee5\u6709\u6548\u9632\u6b62\u961f\u5217\u65e0\u9650\u589e\u957f\uff0c\u4fdd\u62a4 RabbitMQ \u5b9e\u4f8b\u7684\u8d44\u6e90\u3002</li> </ul> </li> <li>\u6b7b\u4fe1\u961f\u5217 (Dead Letter Exchange/Queue - DLX/DLQ): \u5f53\u6d88\u606f\u6ee1\u8db3\u4ee5\u4e0b\u6761\u4ef6\u65f6\uff0c\u4f1a\u88ab\u53d1\u9001\u5230\u6b7b\u4fe1\u4ea4\u6362\u673a\uff1a<ul> <li>\u6d88\u606f\u88ab\u62d2\u7edd\uff08<code>basic.reject</code> \u6216 <code>basic.nack</code>\uff09\uff0c\u5e76\u4e14 <code>requeue</code> \u53c2\u6570\u8bbe\u7f6e\u4e3a <code>false</code>\u3002</li> <li>\u6d88\u606f\u7684 TTL \u8fc7\u671f\u3002</li> <li>\u961f\u5217\u8fbe\u5230 <code>x-max-length</code> \u9650\u5236\uff0c\u5bfc\u81f4\u6d88\u606f\u88ab\u4e22\u5f03\u3002 \u901a\u8fc7\u914d\u7f6e\u6b7b\u4fe1\u961f\u5217\uff0c\u53ef\u4ee5\u5c06\u5904\u7406\u5931\u8d25\u6216\u8fc7\u671f\u7684\u6d88\u606f\u9694\u79bb\uff0c\u8fdb\u884c\u540e\u7eed\u5206\u6790\u548c\u5904\u7406\uff0c\u907f\u514d\u8fd9\u4e9b\u201c\u6bd2\u4e38\u6d88\u606f\u201d\u6301\u7eed\u5360\u7528\u4e3b\u961f\u5217\u8d44\u6e90\u3002</li> </ul> </li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/RabbitMQ%E6%B6%88%E6%81%AF%E5%A0%86%E7%A7%AF%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86/#_2","title":"\u76d1\u63a7\u4e0e\u544a\u8b66","text":"<p>\u53ca\u65f6\u53d1\u73b0\u6d88\u606f\u5806\u79ef\u662f\u89e3\u51b3\u95ee\u9898\u7684\u7b2c\u4e00\u6b65\u3002</p> <ul> <li>RabbitMQ Management Plugin: \u6700\u76f4\u89c2\u7684\u5de5\u5177\u3002\u53ef\u4ee5\u67e5\u770b\u6bcf\u4e2a\u961f\u5217\u7684\u6d88\u606f\u6570\u91cf (<code>Ready</code> \u548c <code>Unacked</code>)\u3001\u6d88\u606f\u901f\u7387\u3001\u6d88\u8d39\u8005\u6570\u91cf\u7b49\u3002</li> <li>\u76d1\u63a7\u7cfb\u7edf\u96c6\u6210: \u5c06 RabbitMQ \u7684\u6307\u6807\uff08\u5982 <code>messages_ready</code>\u3001<code>messages_unacknowledged</code>\u3001<code>consumer_utilisation</code> \u7b49\uff09\u96c6\u6210\u5230 Prometheus\u3001Grafana\u3001Zabbix \u7b49\u76d1\u63a7\u7cfb\u7edf\u3002</li> <li>\u8bbe\u7f6e\u544a\u8b66\u89c4\u5219:<ul> <li>\u5f53\u67d0\u4e2a\u961f\u5217\u7684 <code>messages_ready</code> \u6570\u91cf\u6301\u7eed\u8d85\u8fc7\u9608\u503c\uff08\u4f8b\u5982 10000 \u6761\u6d88\u606f\u6301\u7eed 5 \u5206\u949f\uff09\u65f6\u89e6\u53d1\u544a\u8b66\u3002</li> <li>\u5f53 <code>messages_unacknowledged</code> \u6570\u91cf\u8fc7\u9ad8\u65f6\uff0c\u53ef\u80fd\u8868\u793a\u6d88\u8d39\u8005\u5904\u7406\u7f13\u6162\u6216\u5361\u6b7b\u3002</li> <li>\u5f53\u6d88\u8d39\u8005\u6570\u91cf\uff08<code>consumers</code>\uff09\u5f02\u5e38\u51cf\u5c11\u65f6\uff0c\u53ef\u80fd\u8868\u793a\u6d88\u8d39\u8005\u5b95\u673a\u3002</li> <li>\u5f53 <code>consumer_utilisation</code> \u6301\u7eed\u4f4e\u4e8e\u67d0\u4e2a\u503c\u65f6\uff0c\u53ef\u80fd\u8868\u793a\u6d88\u8d39\u8005\u672a\u5145\u5206\u5229\u7528\u3002</li> </ul> </li> <li>\u65e5\u5fd7\u5206\u6790: \u76d1\u63a7\u6d88\u8d39\u8005\u5e94\u7528\u7684\u65e5\u5fd7\uff0c\u67e5\u627e\u662f\u5426\u6709\u5927\u91cf\u9519\u8bef\u3001\u5904\u7406\u8d85\u65f6\u7b49\u5f02\u5e38\uff0c\u8fd9\u4e9b\u90fd\u53ef\u80fd\u662f\u5bfc\u81f4\u6d88\u606f\u5806\u79ef\u7684\u6839\u672c\u539f\u56e0\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/RabbitMQ%E6%B6%88%E6%81%AF%E5%A0%86%E7%A7%AF%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86/#_3","title":"\u89e3\u51b3\u63aa\u65bd","text":"<p>\u5f53\u6d88\u606f\u5806\u79ef\u5df2\u7ecf\u53d1\u751f\u65f6\uff0c\u9700\u8981\u91c7\u53d6\u7d27\u6025\u63aa\u65bd\u3002</p> <ol> <li>\u7d27\u6025\u6269\u5bb9\u6d88\u8d39\u8005: \u8fd9\u662f\u6700\u5e38\u89c1\u4e5f\u662f\u6700\u6709\u6548\u7684\u65b9\u6cd5\u3002\u6839\u636e\u76d1\u63a7\u6570\u636e\uff0c\u5feb\u901f\u589e\u52a0\u6d88\u8d39\u8005\u5b9e\u4f8b\u6570\u91cf\uff0c\u8ba9\u5b83\u4eec\u5e76\u884c\u6d88\u8d39\u79ef\u538b\u7684\u6d88\u606f\u3002\u5982\u679c\u662f\u5bb9\u5668\u5316\u90e8\u7f72\uff0c\u53ef\u4ee5\u5229\u7528\u81ea\u52a8\u6269\u5bb9\u673a\u5236\u3002</li> <li>\u6682\u505c\u751f\u4ea7\u8005: \u5982\u679c\u5806\u79ef\u975e\u5e38\u4e25\u91cd\uff0c\u53ef\u80fd\u9700\u8981\u4e34\u65f6\u505c\u6b62\u6216\u51cf\u7f13\u751f\u4ea7\u8005\u7684\u6d88\u606f\u53d1\u9001\u901f\u5ea6\uff0c\u76f4\u5230\u6d88\u8d39\u8005\u5904\u7406\u80fd\u529b\u8ddf\u4e0a\u3002</li> <li>\u8c03\u6574 <code>Prefetch Count</code>: \u4e34\u65f6\u8c03\u4f4e\u5904\u7406\u7f13\u6162\u7684\u6d88\u8d39\u8005\u7684 <code>prefetch count</code>\uff0c\u9632\u6b62\u5b83\u4e00\u6b21\u6027\u62c9\u53d6\u8fc7\u591a\u6d88\u606f\u5bfc\u81f4\u81ea\u5df1\u5d29\u6e83\uff0c\u6216\u9738\u5360\u6d88\u606f\u8ba9\u5176\u4ed6\u6d88\u8d39\u8005\u65e0\u6d88\u606f\u53ef\u62c9\u3002</li> <li>\u5229\u7528\u6b7b\u4fe1\u961f\u5217\u5206\u6790\u548c\u5904\u7406\u5f02\u5e38\u6d88\u606f: \u5982\u679c\u5806\u79ef\u662f\u7531\u4e8e\u67d0\u4e9b\u201c\u6bd2\u4e38\u6d88\u606f\u201d\u53cd\u590d\u91cd\u8bd5\u5bfc\u81f4\uff0c\u786e\u8ba4\u8fd9\u4e9b\u6d88\u606f\u5df2\u8fdb\u5165\u6b7b\u4fe1\u961f\u5217\uff0c\u5e76\u5728\u6b7b\u4fe1\u961f\u5217\u4e2d\u8fdb\u884c\u4eba\u5de5\u5e72\u9884\u6216\u7279\u6b8a\u5904\u7406\u3002</li> <li>\uff08\u8c28\u614e\u4f7f\u7528\uff09\u6e05\u7a7a\u961f\u5217: \u4f5c\u4e3a\u6700\u540e\u624b\u6bb5\uff0c\u5982\u679c\u5806\u79ef\u7684\u6d88\u606f\u5df2\u7ecf\u8fc7\u671f\uff0c\u6216\u8005\u56e0\u4e3a\u67d0\u79cd\u539f\u56e0\u65e0\u6cd5\u5904\u7406\u4e14\u5f71\u54cd\u7cfb\u7edf\u6b63\u5e38\u8fd0\u884c\uff0c\u53ef\u4ee5\u8003\u8651\u6e05\u7a7a\u6574\u4e2a\u961f\u5217\u3002\u8b66\u544a\uff1a\u6e05\u7a7a\u961f\u5217\u4f1a\u5bfc\u81f4\u6d88\u606f\u4e22\u5931\uff0c\u8bf7\u52a1\u5fc5\u8c28\u614e\u64cd\u4f5c\uff0c\u5e76\u786e\u8ba4\u8fd9\u4e9b\u6d88\u606f\u786e\u5b9e\u4e0d\u518d\u9700\u8981\u5904\u7406\u3002</li> <li>\uff08\u9ad8\u7ea7\uff09\u521b\u5efa\u4e34\u65f6\u961f\u5217\u5206\u6d41\uff1a \u5bf9\u4e8e\u6781\u7aef\u60c5\u51b5\uff0c\u53ef\u4ee5\u4e34\u65f6\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u961f\u5217\uff0c\u8ba9\u4e00\u90e8\u5206\u65b0\u7684\u751f\u4ea7\u8005\u5c06\u6d88\u606f\u53d1\u9001\u5230\u65b0\u961f\u5217\uff0c\u800c\u65e7\u961f\u5217\u5219\u7531\u589e\u52a0\u7684\u6d88\u8d39\u8005\u5168\u529b\u6d88\u5316\u3002\u5f85\u65e7\u961f\u5217\u6e05\u7a7a\u540e\uff0c\u518d\u5c06\u751f\u4ea7\u8005\u5207\u6362\u56de\u65e7\u961f\u5217\u6216\u7edf\u4e00\u4f7f\u7528\u65b0\u961f\u5217\u3002</li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/RabbitMQ%E7%9A%84%E6%8C%81%E4%B9%85%E5%8C%96%E6%9C%BA%E5%88%B6%E4%BB%8B%E7%BB%8D/","title":"RabbitMQ\u7684\u6301\u4e45\u5316\u673a\u5236\u4ecb\u7ecd","text":"<p>RabbitMQ \u901a\u8fc7\u5176\u6301\u4e45\u5316\u673a\u5236\u6765\u786e\u4fdd\u5728\u8282\u70b9\u5b95\u673a\u6216\u91cd\u542f\u7b49\u5f02\u5e38\u60c5\u51b5\u4e0b\u6d88\u606f\u4e0d\u4f1a\u4e22\u5931\uff0c\u4ece\u800c\u6781\u5927\u5730\u63d0\u9ad8\u4e86\u6d88\u606f\u4f20\u9012\u7684\u53ef\u9760\u6027\u3002 \u6301\u4e45\u5316\u5e76\u975e\u5355\u4e00\u8bbe\u7f6e\uff0c\u800c\u662f\u6d89\u53ca\u4ea4\u6362\u673a\uff08Exchange\uff09\u3001\u961f\u5217\uff08Queue\uff09\u548c\u6d88\u606f\uff08Message\uff09\u4e09\u4e2a\u5c42\u9762\u7684\u534f\u540c\u5de5\u4f5c\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/RabbitMQ%E7%9A%84%E6%8C%81%E4%B9%85%E5%8C%96%E6%9C%BA%E5%88%B6%E4%BB%8B%E7%BB%8D/#_1","title":"\u6301\u4e45\u5316\u7684\u6838\u5fc3\u8981\u7d20","text":"<p>\u8981\u5b9e\u73b0\u6d88\u606f\u7684\u771f\u6b63\u6301\u4e45\u5316\uff0c\u5fc5\u987b\u540c\u65f6\u6ee1\u8db3\u4ee5\u4e0b\u4e09\u4e2a\u6761\u4ef6\uff1a</p> <ol> <li> <p>\u4ea4\u6362\u673a\u6301\u4e45\u5316 (Exchange Durability)</p> <ul> <li>\u8bf4\u660e\uff1a\u5728\u58f0\u660e\u4ea4\u6362\u673a\u65f6\uff0c\u9700\u8981\u5c06\u5176 <code>durable</code> \u5c5e\u6027\u8bbe\u7f6e\u4e3a <code>true</code>\u3002 \u8fd9\u610f\u5473\u7740\u4ea4\u6362\u673a\u7684\u5143\u6570\u636e\uff08\u540d\u79f0\u3001\u7c7b\u578b\u3001\u7ed1\u5b9a\u7b49\uff09\u5c06\u88ab\u5b58\u50a8\u5728\u78c1\u76d8\u4e0a\u3002\u5982\u679c\u4ea4\u6362\u673a\u4e0d\u6301\u4e45\u5316\uff0c\u90a3\u4e48\u5f53 RabbitMQ \u670d\u52a1\u91cd\u542f\u540e\uff0c\u8be5\u4ea4\u6362\u673a\u4f1a\u88ab\u6e05\u9664\uff0c\u6240\u6709\u76f8\u5173\u7684\u7ed1\u5b9a\u5173\u7cfb\u4e5f\u4f1a\u4e22\u5931\u3002</li> <li>\u914d\u7f6e\uff1a\u5728\u58f0\u660e\u4ea4\u6362\u673a\u65f6\uff0c\u5c06 <code>durable</code> \u53c2\u6570\u8bbe\u4e3a <code>true</code>\u3002</li> </ul> </li> <li> <p>\u961f\u5217\u6301\u4e45\u5316 (Queue Durability)</p> <ul> <li>\u8bf4\u660e\uff1a\u4e0e\u4ea4\u6362\u673a\u7c7b\u4f3c\uff0c\u961f\u5217\u7684 <code>durable</code> \u5c5e\u6027\u4e5f\u5fc5\u987b\u8bbe\u7f6e\u4e3a <code>true</code>\u3002 \u6301\u4e45\u5316\u7684\u961f\u5217\u5176\u5143\u6570\u636e\u4f1a\u88ab\u4fdd\u5b58\u5728\u78c1\u76d8\u4e0a\uff0c\u786e\u4fdd\u670d\u52a1\u91cd\u542f\u540e\u961f\u5217\u4f9d\u7136\u5b58\u5728\u3002 \u5982\u679c\u5c06\u6301\u4e45\u5316\u7684\u6d88\u606f\u53d1\u9001\u5230\u975e\u6301\u4e45\u5316\u7684\u961f\u5217\uff0c\u5f53\u670d\u52a1\u91cd\u542f\u65f6\uff0c\u961f\u5217\u4f1a\u6d88\u5931\uff0c\u5176\u4e2d\u7684\u6d88\u606f\u4e5f\u4f1a\u968f\u4e4b\u4e22\u5931\u3002</li> <li>\u914d\u7f6e\uff1a\u5728\u58f0\u660e\u961f\u5217\u65f6\uff0c\u5c06 <code>durable</code> \u53c2\u6570\u8bbe\u4e3a <code>true</code>\u3002</li> </ul> </li> <li> <p>\u6d88\u606f\u6301\u4e45\u5316 (Message Persistence)</p> <ul> <li>\u8bf4\u660e\uff1a\u6d88\u606f\u7684\u6301\u4e45\u5316\u662f\u901a\u8fc7\u8bbe\u7f6e\u6d88\u606f\u5c5e\u6027 <code>delivery_mode</code> \u4e3a <code>2</code> (persistent) \u6765\u5b9e\u73b0\u7684\u3002 \u53ea\u6709\u88ab\u6807\u8bb0\u4e3a\u6301\u4e45\u5316\u7684\u6d88\u606f\uff0cRabbitMQ \u624d\u4f1a\u5c3d\u529b\u5c06\u5176\u5199\u5165\u78c1\u76d8\u3002 \u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u6d88\u606f\u9ed8\u8ba4\u4e3a\u975e\u6301\u4e45\u5316\uff08<code>delivery_mode = 1</code> \u6216 <code>null</code>\uff09\uff0c\u5728\u670d\u52a1\u91cd\u542f\u540e\u4f1a\u4e22\u5931\uff0c\u5373\u4f7f\u5b83\u4f4d\u4e8e\u4e00\u4e2a\u6301\u4e45\u5316\u961f\u5217\u4e2d\u3002</li> <li>\u914d\u7f6e\uff1a\u5728\u53d1\u9001\u6d88\u606f\u65f6\uff0c\u8bbe\u7f6e\u5176 <code>deliveryMode</code> \u5c5e\u6027\u4e3a <code>2</code>\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/RabbitMQ%E7%9A%84%E6%8C%81%E4%B9%85%E5%8C%96%E6%9C%BA%E5%88%B6%E4%BB%8B%E7%BB%8D/#_2","title":"\u6d88\u606f\u843d\u76d8\u65f6\u673a","text":"<p>RabbitMQ \u7684\u6d88\u606f\u5b58\u50a8\u673a\u5236\u5728\u903b\u8f91\u4e0a\u5206\u4e3a\u961f\u5217\u7d22\u5f15 (queue_index) \u548c\u6d88\u606f\u5b58\u50a8 (msg_store) \u4e24\u4e2a\u90e8\u5206\u3002 \u6d88\u606f\u4f55\u65f6\u88ab\u5199\u5165\u78c1\u76d8\uff0c\u53d6\u51b3\u4e8e\u5b83\u662f\u5426\u662f\u6301\u4e45\u5316\u6d88\u606f\uff1a</p> <ul> <li> <p>\u6301\u4e45\u5316\u6d88\u606f\uff1a\u5f53\u4e00\u6761\u6301\u4e45\u5316\u6d88\u606f\u5230\u8fbe\u961f\u5217\u540e\uff0c\u5b83\u4f1a\u7acb\u5373\u88ab\u5199\u5165\u78c1\u76d8\u3002 \u4e3a\u4e86\u63d0\u9ad8\u6027\u80fd\uff0c\u901a\u5e38\u4e5f\u4f1a\u5728\u5185\u5b58\u4e2d\u4fdd\u7559\u4e00\u4efd\u6d88\u606f\u7684\u5907\u4efd\u3002\u5f53\u5185\u5b58\u538b\u529b\u8f83\u5927\u65f6\uff0c\u5185\u5b58\u4e2d\u7684\u8fd9\u4efd\u5907\u4efd\u53ef\u80fd\u4f1a\u88ab\u6e05\u9664\uff0c\u4f46\u78c1\u76d8\u4e0a\u7684\u6570\u636e\u4f9d\u7136\u5b58\u5728\u3002</p> </li> <li> <p>\u975e\u6301\u4e45\u5316\u6d88\u606f\uff1a\u975e\u6301\u4e45\u5316\u6d88\u606f\u901a\u5e38\u53ea\u5b58\u50a8\u5728\u5185\u5b58\u4e2d\uff0c\u4ee5\u83b7\u5f97\u66f4\u9ad8\u7684\u6027\u80fd\u3002\u53ea\u6709\u5f53 RabbitMQ \u670d\u52a1\u9762\u4e34\u5185\u5b58\u538b\u529b\u65f6\uff0c\u624d\u4f1a\u5c06\u8fd9\u4e9b\u975e\u6301\u4e45\u5316\u6d88\u606f\u6362\u9875\uff08\u5199\u5165\uff09\u5230\u78c1\u76d8\u4e2d\uff0c\u4ee5\u91ca\u653e\u5185\u5b58\u7a7a\u95f4\u3002 \u8fd9\u79cd\u60c5\u51b5\u4e0b\u5199\u5165\u78c1\u76d8\u7684\u76ee\u7684\u662f\u4e34\u65f6\u5b58\u653e\uff0c\u670d\u52a1\u91cd\u542f\u540e\u8fd9\u4e9b\u6d88\u606f\u4f9d\u7136\u4f1a\u4e22\u5931\u3002</p> </li> </ul> <p>\u6b64\u5916\uff0cRabbitMQ \u7684\u5199\u5165\u64cd\u4f5c\u4e5f\u5b58\u5728\u4e00\u4e9b\u4f18\u5316\u673a\u5236\uff0c\u4f8b\u5982\uff1a *   \u7f13\u51b2\u533a\uff1a\u6570\u636e\u5728\u5199\u5165\u6587\u4ef6\u524d\uff0c\u4f1a\u5148\u8fdb\u5165\u4e00\u4e2a\u7f13\u51b2\u533a\u3002\u5f53\u7f13\u51b2\u533a\u6ee1\uff0c\u6216\u8005\u8fbe\u5230\u56fa\u5b9a\u7684\u5237\u76d8\u65f6\u95f4\u95f4\u9694\uff08\u4f8b\u5982 25ms\uff09\uff0c\u624d\u4f1a\u5c06\u6570\u636e\u5237\u5165\u78c1\u76d8\u3002 *   \u5c0f\u6d88\u606f\u4f18\u5316\uff1a\u5bf9\u4e8e\u5e8f\u5217\u5316\u540e\u4f53\u79ef\u5f88\u5c0f\u7684\u6d88\u606f\uff08\u9ed8\u8ba4\u5c0f\u4e8e 4096 \u5b57\u8282\uff09\uff0cRabbitMQ \u4f1a\u5c06\u5176\u76f4\u63a5\u5b58\u50a8\u5728\u961f\u5217\u7d22\u5f15\u6587\u4ef6\u4e2d\uff0c\u4ee5\u51cf\u5c11\u5199\u5165\u64cd\u4f5c\uff0c\u4f18\u5316\u6027\u80fd\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/RabbitMQ%E7%9A%84%E6%8C%81%E4%B9%85%E5%8C%96%E6%9C%BA%E5%88%B6%E4%BB%8B%E7%BB%8D/#_3","title":"\u6301\u4e45\u5316\u6570\u636e\u7684\u6e05\u9664\u673a\u5236","text":"<p>\u6301\u4e45\u5316\u5230\u78c1\u76d8\u7684\u6d88\u606f\u5e76\u4e0d\u4f1a\u6c38\u4e45\u4fdd\u7559\uff0c\u5b83\u4eec\u4f1a\u5728\u7279\u5b9a\u6761\u4ef6\u4e0b\u88ab\u6e05\u9664\uff1a</p> <ol> <li> <p>\u6d88\u8d39\u8005\u786e\u8ba4 (Acknowledgement, ACK)</p> <ul> <li>\u8fd9\u662f\u6700\u4e3b\u8981\u7684\u6e05\u9664\u65b9\u5f0f\u3002\u5f53\u6d88\u8d39\u8005\u6210\u529f\u5904\u7406\u4e00\u6761\u6d88\u606f\u540e\uff0c\u4f1a\u5411 RabbitMQ \u53d1\u9001\u4e00\u4e2a <code>ACK</code> \u786e\u8ba4\u3002\u4e00\u65e6 RabbitMQ \u6536\u5230\u8be5\u786e\u8ba4\uff0c\u5c31\u4f1a\u5c06\u8fd9\u6761\u6d88\u606f\u6807\u8bb0\u4e3a\u7b49\u5f85\u5220\u9664\u3002</li> </ul> </li> <li> <p>\u5783\u573e\u56de\u6536\u673a\u5236</p> <ul> <li>\u6d88\u606f\u88ab <code>ACK</code> \u540e\uff0cRabbitMQ \u53ea\u662f\u5728\u903b\u8f91\u4e0a\u5c06\u5176\u6807\u8bb0\u4e3a\u201c\u53ef\u5220\u9664\u201d\uff0c\u5e76\u4e0d\u4f1a\u7acb\u5373\u4ece\u78c1\u76d8\u6587\u4ef6\u4e2d\u62b9\u53bb\u3002 RabbitMQ \u5185\u90e8\u6709\u5783\u573e\u56de\u6536\u673a\u5236\uff0c\u5f53\u78c1\u76d8\u6587\u4ef6\u4e2d\u88ab\u6807\u8bb0\u4e3a\u201c\u5783\u573e\u6570\u636e\u201d\u7684\u6bd4\u4f8b\u8d85\u8fc7\u4e00\u5b9a\u9608\u503c\uff08\u9ed8\u8ba4\u4e3a 50%\uff09\u65f6\uff0c\u4f1a\u89e6\u53d1\u5408\u5e76\u64cd\u4f5c\uff0c\u5c06\u591a\u4e2a\u6587\u4ef6\u4e2d\u7684\u6709\u6548\u6570\u636e\u6574\u7406\u5230\u65b0\u6587\u4ef6\u4e2d\uff0c\u5e76\u5220\u9664\u65e7\u7684\u3001\u53ea\u5305\u542b\u5783\u573e\u6570\u636e\u7684\u6587\u4ef6\uff0c\u4ece\u800c\u91ca\u653e\u78c1\u76d8\u7a7a\u95f4\u3002</li> </ul> </li> <li> <p>\u5176\u4ed6\u6e05\u9664\u573a\u666f</p> <ul> <li>\u6d88\u606f\u8fc7\u671f (TTL)\uff1a\u53ef\u4ee5\u4e3a\u961f\u5217\u6216\u6d88\u606f\u8bbe\u7f6e\u5b58\u6d3b\u65f6\u95f4 (Time-To-Live)\u3002\u4e00\u65e6\u6d88\u606f\u8fc7\u671f\uff0c\u5b83\u5c31\u4f1a\u88ab\u89c6\u4e3a\u201c\u6b7b\u4ea1\u201d\uff0c\u5e76\u4ece\u961f\u5217\u4e2d\u79fb\u9664\u3002\u5982\u679c\u914d\u7f6e\u4e86\u6b7b\u4fe1\u4ea4\u6362\u673a\uff0c\u8fc7\u671f\u6d88\u606f\u4f1a\u88ab\u8def\u7531\u5230\u90a3\u91cc\u3002</li> <li>\u961f\u5217\u88ab\u5220\u9664\uff1a<ul> <li>\u81ea\u52a8\u5220\u9664 (Auto-delete)\uff1a\u5982\u679c\u961f\u5217\u88ab\u6807\u8bb0\u4e3a <code>auto-delete</code>\uff0c\u90a3\u4e48\u5f53\u6700\u540e\u4e00\u4e2a\u6d88\u8d39\u8005\u53d6\u6d88\u8ba2\u9605\u540e\uff0c\u8be5\u961f\u5217\u4f1a\u88ab\u81ea\u52a8\u5220\u9664\uff0c\u5176\u4e2d\u7684\u6240\u6709\u6d88\u606f\uff08\u65e0\u8bba\u662f\u5426\u6301\u4e45\u5316\uff09\u90fd\u4f1a\u88ab\u6e05\u9664\u3002</li> <li>\u6392\u4ed6\u961f\u5217 (Exclusive)\uff1a\u6392\u4ed6\u961f\u5217\u4ec5\u5bf9\u9996\u6b21\u58f0\u660e\u5b83\u7684\u8fde\u63a5\u53ef\u89c1\uff0c\u5e76\u5728\u8fde\u63a5\u5173\u95ed\u65f6\u81ea\u52a8\u5220\u9664\uff0c\u5176\u4e2d\u7684\u6d88\u606f\u4e5f\u4f1a\u4e00\u5e76\u88ab\u6e05\u9664\u3002</li> <li>\u624b\u52a8\u5220\u9664\uff1a\u901a\u8fc7\u7ba1\u7406\u5de5\u5177\u6216\u4ee3\u7801\u624b\u52a8\u5220\u9664\u4e00\u4e2a\u961f\u5217\u65f6\uff0c\u961f\u5217\u4e2d\u7684\u6240\u6709\u6d88\u606f\u90fd\u4f1a\u88ab\u6e05\u9664\u3002</li> </ul> </li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/RabbitMQ%E9%87%8D%E8%AF%95%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/","title":"RabbitMQ\u91cd\u8bd5\u662f\u5982\u4f55\u5b9e\u73b0\u7684","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/RabbitMQ%E9%87%8D%E8%AF%95%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/#_1","title":"\u5229\u7528\u6b7b\u4fe1\u4ea4\u6362\u673a\u548c\u6d88\u606f\u5b58\u6d3b\u65f6\u95f4","text":"<p>\u8fd9\u662f\u5b9e\u73b0\u5ef6\u8fdf\u91cd\u8bd5\u6700\u5e38\u7528\u548c\u6700\u7ecf\u5178\u7684\u65b9\u5f0f\u3002\u5176\u6838\u5fc3\u601d\u60f3\u662f\uff1a\u5f53\u6d88\u606f\u5904\u7406\u5931\u8d25\u540e\uff0c\u4e0d\u76f4\u63a5\u5c06\u5176\u653e\u56de\u539f\u961f\u5217\uff0c\u800c\u662f\u53d1\u9001\u5230\u4e00\u4e2a\u4e13\u95e8\u7528\u4e8e\u5ef6\u8fdf\u7684\u201c\u91cd\u8bd5\u961f\u5217\u201d\uff0c\u7ecf\u8fc7\u8bbe\u5b9a\u7684\u5ef6\u8fdf\u65f6\u95f4\u540e\uff0c\u518d\u91cd\u65b0\u8def\u7531\u56de\u539f\u961f\u5217\u8fdb\u884c\u6d88\u8d39\u3002</p> <p>\u5b9e\u73b0\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ol> <li>\u521b\u5efa\u4e1a\u52a1\u4ea4\u6362\u673a\u548c\u4e1a\u52a1\u961f\u5217\uff1a\u7528\u4e8e\u6b63\u5e38\u7684\u4e1a\u52a1\u6d88\u606f\u6295\u9012\u548c\u6d88\u8d39\u3002</li> <li>\u521b\u5efa\u6b7b\u4fe1\u4ea4\u6362\u673a (DLX)\uff1a\u4e00\u4e2a\u666e\u901a\u7684\u4ea4\u6362\u673a\uff0c\u4e13\u95e8\u7528\u6765\u63a5\u6536\u6b7b\u4fe1\u3002</li> <li>\u521b\u5efa\u91cd\u8bd5\u961f\u5217\uff1a<ul> <li>\u4e3a\u8fd9\u4e2a\u961f\u5217\u8bbe\u7f6e <code>x-message-ttl</code> \u53c2\u6570\uff0c\u5b9a\u4e49\u6d88\u606f\u5728\u6b64\u961f\u5217\u4e2d\u7684\u5b58\u6d3b\u65f6\u95f4\uff08\u5373\u5ef6\u8fdf\u65f6\u95f4\uff09\u3002</li> <li>\u4e3a\u8fd9\u4e2a\u961f\u5217\u8bbe\u7f6e <code>x-dead-letter-exchange</code> \u53c2\u6570\uff0c\u503c\u4e3a\u4e0a\u9762\u521b\u5efa\u7684\u6b7b\u4fe1\u4ea4\u6362\u673a\u3002</li> <li>\u4e3a\u8fd9\u4e2a\u961f\u5217\u8bbe\u7f6e <code>x-dead-letter-routing-key</code> \u53c2\u6570\uff0c\u503c\u4e3a\u4e1a\u52a1\u961f\u5217\u7684\u8def\u7531\u952e\u3002</li> </ul> </li> <li>\u7ed1\u5b9a\u961f\u5217\u548c\u4ea4\u6362\u673a\uff1a<ul> <li>\u5c06\u4e1a\u52a1\u961f\u5217\u7ed1\u5b9a\u5230\u4e1a\u52a1\u4ea4\u6362\u673a\u3002</li> <li>\u5c06\u91cd\u8bd5\u961f\u5217\u7ed1\u5b9a\u5230\u4e00\u4e2a\u4e13\u95e8\u7684\u91cd\u8bd5\u4ea4\u6362\u673a\uff08\u4e5f\u53ef\u4ee5\u76f4\u63a5\u7ed1\u5b9a\u5230\u4e1a\u52a1\u4ea4\u6362\u673a\uff0c\u4f46\u4f7f\u7528\u72ec\u7acb\u4ea4\u6362\u673a\u66f4\u6e05\u6670\uff09\u3002</li> <li>\u5c06\u4e1a\u52a1\u961f\u5217\u7ed1\u5b9a\u5230\u6b7b\u4fe1\u4ea4\u6362\u673a\uff08\u901a\u8fc7 <code>x-dead-letter-routing-key</code>\uff09\u3002</li> </ul> </li> </ol> <p>\u5de5\u4f5c\u6d41\u7a0b\uff1a</p> <ol> <li>\u751f\u4ea7\u8005\u5c06\u6d88\u606f\u53d1\u9001\u5230\u4e1a\u52a1\u4ea4\u6362\u673a\uff0c\u6d88\u606f\u88ab\u8def\u7531\u5230\u4e1a\u52a1\u961f\u5217\u3002</li> <li>\u6d88\u8d39\u8005\u4ece\u4e1a\u52a1\u961f\u5217\u83b7\u53d6\u6d88\u606f\uff0c\u5728\u5904\u7406\u8fc7\u7a0b\u4e2d\u53d1\u751f\u5f02\u5e38\u3002</li> <li>\u6d88\u8d39\u8005\u53d1\u9001\u4e00\u4e2a <code>nack</code>\uff08\u5426\u5b9a\u786e\u8ba4\uff09\u6216 <code>reject</code>\uff0c\u5e76\u5c06 <code>requeue</code> \u53c2\u6570\u8bbe\u7f6e\u4e3a <code>false</code>\uff0c\u8868\u793a\u4e0d\u518d\u91cd\u65b0\u5165\u961f\u3002</li> <li>\u7531\u4e8e <code>requeue</code> \u4e3a <code>false</code>\uff0c\u8be5\u6d88\u606f\u6210\u4e3a\u201c\u6b7b\u4fe1\u201d\uff0c\u88ab RabbitMQ \u81ea\u52a8\u8def\u7531\u5230\u4e3a\u4e1a\u52a1\u961f\u5217\u914d\u7f6e\u7684\u6b7b\u4fe1\u4ea4\u6362\u673a\u3002</li> <li>\u6b7b\u4fe1\u4ea4\u6362\u673a\u6839\u636e\u8def\u7531\u89c4\u5219\uff08\u901a\u5e38\u662f\u76f4\u63a5\uff09\u5c06\u6d88\u606f\u53d1\u9001\u5230\u91cd\u8bd5\u961f\u5217\u3002</li> <li>\u6d88\u606f\u5728\u91cd\u8bd5\u961f\u5217\u4e2d\u7b49\u5f85\uff0c\u76f4\u5230\u8fbe\u5230\u8bbe\u5b9a\u7684 TTL \u540e\u8fc7\u671f\u3002</li> <li>\u8fc7\u671f\u7684\u6d88\u606f\u518d\u6b21\u6210\u4e3a\u201c\u6b7b\u4fe1\u201d\uff0c\u88ab RabbitMQ \u81ea\u52a8\u8def\u7531\u5230\u4e3a\u91cd\u8bd5\u961f\u5217\u914d\u7f6e\u7684\u6b7b\u4fe1\u4ea4\u6362\u673a\uff08\u5728\u8fd9\u91cc\u5c31\u662f\u4e1a\u52a1\u4ea4\u6362\u673a\uff09\u3002</li> <li>\u4e1a\u52a1\u4ea4\u6362\u673a\u5c06\u6d88\u606f\u91cd\u65b0\u8def\u7531\u56de\u4e1a\u52a1\u961f\u5217\uff0c\u6d88\u8d39\u8005\u53ef\u4ee5\u518d\u6b21\u5c1d\u8bd5\u6d88\u8d39\u3002</li> </ol> <p>\u901a\u8fc7\u4e3a\u4e0d\u540c\u7684\u91cd\u8bd5\u6b21\u6570\u8bbe\u7f6e\u4e0d\u540c\u7684\u91cd\u8bd5\u961f\u5217\u548c\u4e0d\u540c\u7684 TTL\uff0c\u53ef\u4ee5\u5b9e\u73b0\u6307\u6570\u9000\u907f\u7684\u91cd\u8bd5\u7b56\u7565\uff0c\u5373\u6bcf\u6b21\u91cd\u8bd5\u7684\u95f4\u9694\u65f6\u95f4\u9010\u6e10\u53d8\u957f\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/RabbitMQ%E9%87%8D%E8%AF%95%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/#_2","title":"\u4f7f\u7528\u5ef6\u8fdf\u6d88\u606f\u63d2\u4ef6","text":"<p>\u8fd9\u662f\u4e00\u79cd\u66f4\u76f4\u63a5\u548c\u7075\u6d3b\u7684\u5ef6\u8fdf\u6d88\u606f\u5b9e\u73b0\u65b9\u5f0f\uff0c\u4ece\u800c\u7b80\u5316\u4e86\u91cd\u8bd5\u903b\u8f91\u3002\u8be5\u63d2\u4ef6\u5141\u8bb8\u5728\u53d1\u9001\u6d88\u606f\u65f6\u76f4\u63a5\u6307\u5b9a\u4e00\u4e2a\u5ef6\u8fdf\u65f6\u95f4\u3002</p> <p>\u5b9e\u73b0\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ol> <li>\u5b89\u88c5\u5e76\u542f\u7528 <code>rabbitmq_delayed_message_exchange</code> \u63d2\u4ef6\u3002</li> <li>\u521b\u5efa\u4e00\u4e2a\u7c7b\u578b\u4e3a <code>x-delayed-message</code> \u7684\u4ea4\u6362\u673a\u3002</li> <li>\u5c06\u4e1a\u52a1\u961f\u5217\u7ed1\u5b9a\u5230\u8fd9\u4e2a\u5ef6\u8fdf\u4ea4\u6362\u673a\u3002</li> </ol> <p>\u5de5\u4f5c\u6d41\u7a0b\uff1a</p> <ol> <li>\u6d88\u8d39\u8005\u5904\u7406\u6d88\u606f\u5931\u8d25\u540e\uff0c\u8ba1\u7b97\u4e0b\u4e00\u6b21\u91cd\u8bd5\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002</li> <li>\u6d88\u8d39\u8005\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u6d88\u606f\uff08\u6216\u4f7f\u7528\u539f\u6d88\u606f\uff09\uff0c\u5e76\u5728\u6d88\u606f\u7684 <code>headers</code> \u4e2d\u8bbe\u7f6e <code>x-delay</code> \u5c5e\u6027\uff0c\u503c\u4e3a\u5ef6\u8fdf\u7684\u6beb\u79d2\u6570\u3002</li> <li>\u5c06\u8fd9\u6761\u5e26\u6709\u5ef6\u8fdf\u5c5e\u6027\u7684\u6d88\u606f\u53d1\u9001\u5230\u5ef6\u8fdf\u4ea4\u6362\u673a\u3002</li> <li>\u5ef6\u8fdf\u4ea4\u6362\u673a\u5728\u6536\u5230\u6d88\u606f\u540e\u5e76\u4e0d\u4f1a\u7acb\u5373\u6295\u9012\uff0c\u800c\u662f\u4f1a\u7b49\u5f85 <code>x-delay</code> \u6307\u5b9a\u7684\u65f6\u95f4\u3002</li> <li>\u5ef6\u8fdf\u65f6\u95f4\u8fc7\u540e\uff0c\u4ea4\u6362\u673a\u518d\u5c06\u6d88\u606f\u8def\u7531\u5230\u7ed1\u5b9a\u7684\u4e1a\u52a1\u961f\u5217\u4e2d\uff0c\u4f9b\u6d88\u8d39\u8005\u91cd\u65b0\u6d88\u8d39\u3002</li> </ol> <p>\u8fd9\u79cd\u65b9\u5f0f\u907f\u514d\u4e86\u521b\u5efa\u591a\u4e2a\u91cd\u8bd5\u961f\u5217\u548c\u6b7b\u4fe1\u4ea4\u6362\u673a\u7684\u590d\u6742\u6027\uff0c\u4f7f\u5f97\u5ef6\u8fdf\u548c\u91cd\u8bd5\u903b\u8f91\u66f4\u52a0\u6e05\u6670\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/RabbitMQ%E9%87%8D%E8%AF%95%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/#_3","title":"\u5728\u6d88\u8d39\u8005\u7aef\u5b9e\u73b0\u91cd\u8bd5","text":"<p>\u4e00\u4e9b\u5ba2\u6237\u7aef\u5e93\uff08\u5982 Spring AMQP\uff09\u63d0\u4f9b\u4e86\u5185\u7f6e\u7684\u91cd\u8bd5\u652f\u6301\u3002 \u8fd9\u79cd\u65b9\u5f0f\u7684\u91cd\u8bd5\u662f\u5728\u6d88\u8d39\u8005\u5e94\u7528\u7a0b\u5e8f\u5185\u90e8\u5b8c\u6210\u7684\uff0c\u4e0d\u4f1a\u5c06\u6d88\u606f\u91cd\u65b0\u53d1\u9001\u56de RabbitMQ \u670d\u52a1\u5668\u3002</p> <p>\u4ee5 Spring AMQP \u4e3a\u4f8b\uff1a</p> <p>\u53ef\u4ee5\u5728\u6d88\u8d39\u8005\u76d1\u542c\u5668\u7684\u914d\u7f6e\u4e2d\u542f\u7528\u91cd\u8bd5\u529f\u80fd\uff0c\u5e76\u8bbe\u7f6e\u91cd\u8bd5\u6b21\u6570\u3001\u91cd\u8bd5\u95f4\u9694\u3001\u6307\u6570\u9000\u907f\u56e0\u5b50\u7b49\u7b56\u7565\u3002</p> <p>\u5de5\u4f5c\u6d41\u7a0b\uff1a</p> <ol> <li>\u6d88\u8d39\u8005\u6536\u5230\u6d88\u606f\u5e76\u5904\u7406\u65f6\u629b\u51fa\u5f02\u5e38\u3002</li> <li>Spring AMQP \u7684\u91cd\u8bd5\u62e6\u622a\u5668\u4f1a\u6355\u83b7\u8fd9\u4e2a\u5f02\u5e38\u3002</li> <li>\u62e6\u622a\u5668\u6839\u636e\u914d\u7f6e\u7684\u91cd\u8bd5\u7b56\u7565\uff08\u4f8b\u5982\uff0c\u6682\u505c\u5f53\u524d\u7ebf\u7a0b\u4e00\u5c0f\u6bb5\u65f6\u95f4\uff09\u5728\u672c\u5730\u8fdb\u884c\u91cd\u8bd5\uff0c\u5373\u91cd\u65b0\u8c03\u7528\u6d88\u8d39\u903b\u8f91\u3002</li> <li>\u5982\u679c\u91cd\u8bd5\u8fbe\u5230\u6700\u5927\u6b21\u6570\u540e\u4ecd\u7136\u5931\u8d25\uff0c\u53ef\u4ee5\u914d\u7f6e\u4e00\u4e2a <code>MessageRecoverer</code> \u6765\u5904\u7406\u6700\u7ec8\u5931\u8d25\u7684\u6d88\u606f\uff0c\u4f8b\u5982\u5c06\u5176\u53d1\u9001\u5230\u4e00\u4e2a\u4e13\u95e8\u7684\u9519\u8bef\u961f\u5217\u6216\u8bb0\u5f55\u5230\u6570\u636e\u5e93\u4e2d\u3002</li> </ol> <p>\u8fd9\u79cd\u65b9\u5f0f\u7684\u4f18\u70b9\u662f\u7b80\u5355\u76f4\u63a5\uff0c\u4f46\u7f3a\u70b9\u662f\u91cd\u8bd5\u671f\u95f4\u4f1a\u963b\u585e\u6d88\u8d39\u7ebf\u7a0b\u3002\u5982\u679c\u91cd\u8bd5\u95f4\u9694\u8f83\u957f\uff0c\u53ef\u80fd\u4f1a\u5f71\u54cd\u6d88\u8d39\u8005\u7684\u541e\u5410\u91cf\u3002</p> \u91cd\u8bd5\u65b9\u5f0f \u4f18\u70b9 \u7f3a\u70b9 \u9002\u7528\u573a\u666f \u6b7b\u4fe1\u4ea4\u6362\u673a + TTL \u670d\u52a1\u7aef\u5b9e\u73b0\uff0c\u4e0d\u4f9d\u8d56\u7279\u5b9a\u5ba2\u6237\u7aef\uff1b\u903b\u8f91\u89e3\u8026\uff0c\u53ef\u9760\u6027\u9ad8\uff1b\u53ef\u5b9e\u73b0\u590d\u6742\u7684\u91cd\u8bd5\u7b56\u7565\u3002 \u914d\u7f6e\u76f8\u5bf9\u590d\u6742\uff0c\u9700\u8981\u521b\u5efa\u989d\u5916\u7684\u961f\u5217\u548c\u4ea4\u6362\u673a\u3002 \u5927\u591a\u6570\u9700\u8981\u53ef\u9760\u5ef6\u8fdf\u91cd\u8bd5\u7684\u573a\u666f\uff0c\u662f\u4e8b\u5b9e\u4e0a\u7684\u6807\u51c6\u65b9\u6848\u3002 \u5ef6\u8fdf\u6d88\u606f\u63d2\u4ef6 \u914d\u7f6e\u7b80\u5355\uff0c\u4f7f\u7528\u65b9\u4fbf\uff1b\u5ef6\u8fdf\u903b\u8f91\u66f4\u76f4\u89c2\u3002 \u9700\u8981\u989d\u5916\u5b89\u88c5\u63d2\u4ef6\uff1b\u5728\u67d0\u4e9b\u65e7\u7248\u672c\u6216\u4e91\u670d\u52a1\u4e2d\u53ef\u80fd\u4e0d\u88ab\u652f\u6301\u3002 \u8ffd\u6c42\u5f00\u53d1\u6548\u7387\uff0c\u4e14\u73af\u5883\u652f\u6301\u63d2\u4ef6\u5b89\u88c5\u7684\u573a\u666f\u3002 \u5ba2\u6237\u7aef\u91cd\u8bd5 \u914d\u7f6e\u975e\u5e38\u7b80\u5355\uff0c\u65e0\u9700\u6539\u52a8 RabbitMQ \u67b6\u6784\uff1b\u9002\u7528\u4e8e\u5feb\u901f\u5931\u8d25\u7684\u573a\u666f\u3002 \u91cd\u8bd5\u4f1a\u963b\u585e\u6d88\u8d39\u7ebf\u7a0b\uff0c\u5f71\u54cd\u6027\u80fd\uff1b\u5e94\u7528\u91cd\u542f\u540e\u91cd\u8bd5\u72b6\u6001\u4f1a\u4e22\u5931\uff1b\u4e0e RabbitMQ \u89e3\u8026\u8f83\u5dee\u3002 \u77ac\u65f6\u6545\u969c\uff08\u5982\u7f51\u7edc\u6296\u52a8\uff09\u7684\u5feb\u901f\u91cd\u8bd5\u3002 <p>\u5728\u5b9e\u9645\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u901a\u5e38\u4f1a\u5c06\u670d\u52a1\u7aef\u91cd\u8bd5\uff08DLX+TTL \u6216\u5ef6\u8fdf\u63d2\u4ef6\uff09\u4e0e\u5ba2\u6237\u7aef\u7684\u6709\u9650\u6b21\u5feb\u901f\u91cd\u8bd5\u7ed3\u5408\u4f7f\u7528\uff0c\u4ee5\u5e94\u5bf9\u4e0d\u540c\u7c7b\u578b\u7684\u6545\u969c\uff0c\u4ece\u800c\u6784\u5efa\u4e00\u4e2a\u5065\u58ee\u3001\u53ef\u9760\u7684\u6d88\u606f\u5904\u7406\u7cfb\u7edf\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/rabbitmq/","title":"Rabbitmq","text":"<p>RabbitMQ\u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u3001\u5b9e\u73b0\u4e86\u9ad8\u7ea7\u6d88\u606f\u961f\u5217\u534f\u8bae\uff08AMQP, Advanced Message Queuing Protocol\uff09\u7684\u6d88\u606f\u4e2d\u95f4\u4ef6\uff08Message Broker\uff09\u3002\u5b83\u4f7f\u7528Erlang\u8bed\u8a00\u5f00\u53d1\uff0c\u8fd9\u95e8\u8bed\u8a00\u4ee5\u5176\u5728\u6784\u5efa\u9ad8\u5e76\u53d1\u3001\u9ad8\u53ef\u9760\u6027\u3001\u5206\u5e03\u5f0f\u7cfb\u7edf\u65b9\u9762\u7684\u4f18\u52bf\u800c\u95fb\u540d\uff0c\u56e0\u6b64RabbitMQ\u5929\u751f\u5c31\u5177\u5907\u4e86\u5f88\u597d\u7684\u7a33\u5b9a\u6027\u548c\u6027\u80fd\u3002</p> <p>\u7b80\u5355\u6765\u8bf4\uff0cRabbitMQ\u5c31\u50cf\u4e00\u4e2a\u73b0\u5b9e\u751f\u6d3b\u4e2d\u7684\u90ae\u5c40\u3002\u751f\u4ea7\u8005\uff08Producer\uff09\u5c06\u6d88\u606f\uff08\u4fe1\u4ef6\uff09\u53d1\u9001\u5230\u90ae\u5c40\uff0c\u90ae\u5c40\uff08RabbitMQ\uff09\u6839\u636e\u89c4\u5219\uff08\u8def\u7531\u89c4\u5219\uff09\u5c06\u4fe1\u4ef6\u6295\u9012\u5230\u4e0d\u540c\u7684\u90ae\u7bb1\uff08\u961f\u5217\uff09\uff0c\u6700\u7ec8\u7531\u6d88\u8d39\u8005\uff08Consumer\uff09\u4ece\u90ae\u7bb1\u4e2d\u53d6\u51fa\u5e76\u5904\u7406\u4fe1\u4ef6\u3002\u5b83\u7684\u6838\u5fc3\u4f5c\u7528\u662f\u5e94\u7528\u89e3\u8026\u3001\u5f02\u6b65\u5904\u7406\u548c\u6d41\u91cf\u524a\u5cf0\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/rabbitmq/#_1","title":"\u6838\u5fc3\u7ec4\u4ef6","text":"<ol> <li> <p>Producer (\u751f\u4ea7\u8005)\uff1a\u53d1\u9001\u6d88\u606f\u7684\u5e94\u7528\u7a0b\u5e8f\u3002</p> </li> <li> <p>Consumer (\u6d88\u8d39\u8005)\uff1a\u63a5\u6536\u5e76\u5904\u7406\u6d88\u606f\u7684\u5e94\u7528\u7a0b\u5e8f\u3002</p> </li> <li> <p>Broker: \u6307\u7684\u662fRabbitMQ\u670d\u52a1\u672c\u8eab\uff0c\u5b83\u63a5\u6536\u6765\u81ea\u751f\u4ea7\u8005\u7684\u6d88\u606f\uff0c\u5e76\u5c06\u5176\u8def\u7531\u7ed9\u6d88\u8d39\u8005\u3002</p> </li> <li> <p>Queue (\u961f\u5217)\uff1a\u4f4d\u4e8eRabbitMQ\u5185\u90e8\uff0c\u7528\u4e8e\u5b58\u50a8\u6d88\u606f\u7684\u7f13\u51b2\u533a\uff0c\u7c7b\u4f3c\u4e8e\u90ae\u7bb1\u3002\u6d88\u606f\u6700\u7ec8\u88ab\u6295\u9012\u5230\u8fd9\u91cc\uff0c\u7b49\u5f85\u6d88\u8d39\u8005\u6765\u83b7\u53d6\u3002\u961f\u5217\u53ef\u4ee5\u6709\u591a\u4e2a\u6d88\u8d39\u8005\uff0c\u6d88\u606f\u4f1a\u4ee5\u8f6e\u8be2\uff08Round-robin\uff09\u7684\u65b9\u5f0f\u5206\u53d1\u7ed9\u5b83\u4eec\u3002</p> </li> <li> <p>Exchange (\u4ea4\u6362\u673a)\uff1a\u8fd9\u662fRabbitMQ\u4e2d\u975e\u5e38\u91cd\u8981\u7684\u4e00\u4e2a\u6982\u5ff5\uff0c\u5b83\u63a5\u6536\u6765\u81ea\u751f\u4ea7\u8005\u7684\u6d88\u606f\uff0c\u5e76\u6839\u636e\u7279\u5b9a\u7684\u89c4\u5219\u5c06\u6d88\u606f\u8def\u7531\u5230\u4e00\u4e2a\u6216\u591a\u4e2a\u961f\u5217\u4e2d\u3002\u4ea4\u6362\u673a\u672c\u8eab\u4e0d\u5b58\u50a8\u6d88\u606f\uff0c\u5b83\u53ea\u662f\u4e00\u4e2a\u8def\u7531\u4e2d\u8f6c\u7ad9\u3002</p> </li> <li> <p>Binding (\u7ed1\u5b9a)\uff1a\u5b9a\u4e49\u4e86Exchange\u548cQueue\u4e4b\u95f4\u7684\u5173\u8054\u5173\u7cfb\u3002\u4e00\u4e2a\u7ed1\u5b9a\u5c31\u662f\u4e00\u6761\u89c4\u5219\uff0c\u5b83\u544a\u8bc9\u4ea4\u6362\u673a\u5982\u4f55\u5c06\u6d88\u606f\u8def\u7531\u5230\u6307\u5b9a\u7684\u961f\u5217\u3002\u7ed1\u5b9a\u901a\u5e38\u4f1a\u9644\u5e26\u4e00\u4e2aRouting Key\u3002</p> </li> </ol> <p>\u6807\u51c6\u5de5\u4f5c\u6d41\u7a0b\u5982\u4e0b\uff1a</p> <ol> <li> <p>\u751f\u4ea7\u8005\u5c06\u6d88\u606f\u53d1\u9001\u7ed9\u4e00\u4e2a\u6307\u5b9a\u7684Exchange\u3002\u53d1\u9001\u65f6\uff0c\u901a\u5e38\u4f1a\u9644\u5e26\u4e00\u4e2aRouting Key\u3002</p> </li> <li> <p>Exchange\u6536\u5230\u6d88\u606f\u540e\uff0c\u4f1a\u67e5\u627e\u6240\u6709\u4e0e\u81ea\u5df1\u7ed1\u5b9a\u7684Queue\u3002</p> </li> <li> <p>\u6839\u636eExchange\u7684\u7c7b\u578b\u548c\u6d88\u606f\u7684Routing Key\uff0c\u4e0e\u6bcf\u4e2aQueue\u7ed1\u5b9a\u7684Binding Key\u8fdb\u884c\u5339\u914d\u3002</p> </li> <li> <p>\u5982\u679c\u5339\u914d\u6210\u529f\uff0cExchange\u5c31\u4f1a\u5c06\u6d88\u606f\u7684\u4e00\u4efd\u62f7\u8d1d\u653e\u5165\u5bf9\u5e94\u7684Queue\u4e2d\u3002</p> </li> <li> <p>\u6d88\u8d39\u8005\u76d1\u542c\u67d0\u4e2aQueue\uff0c\u5f53Queue\u4e2d\u6709\u6d88\u606f\u65f6\uff0c\u5c31\u4f1a\u63a5\u6536\u5e76\u8fdb\u884c\u5904\u7406\u3002</p> </li> </ol> <p>Exchange\u7684\u56db\u79cd\u4e3b\u8981\u7c7b\u578b\uff1a</p> <ul> <li> <p>Direct Exchange (\u76f4\u8fde\u4ea4\u6362\u673a)\uff1a\u5b83\u4f1a\u628a\u6d88\u606f\u8def\u7531\u5230\u90a3\u4e9bBinding Key\u4e0eRouting Key\u5b8c\u5168\u5339\u914d\u7684\u961f\u5217\u4e2d\u3002\u8fd9\u662f\u6700\u7b80\u5355\u76f4\u63a5\u7684\u5339\u914d\u65b9\u5f0f\u3002</p> </li> <li> <p>Fanout Exchange (\u6247\u5f62\u4ea4\u6362\u673a)\uff1a\u5b83\u4f1a\u5ffd\u7565Routing Key\uff0c\u5c06\u63a5\u6536\u5230\u7684\u6240\u6709\u6d88\u606f\u5e7f\u64ad\u5230\u6240\u6709\u4e0e\u5176\u7ed1\u5b9a\u7684\u961f\u5217\u4e2d\u3002\u975e\u5e38\u9002\u5408\u505a\u201c\u53d1\u5e03/\u8ba2\u9605\u201d\u6a21\u5f0f\uff0c\u6bd4\u5982\u7cfb\u7edf\u901a\u77e5\u5e7f\u64ad\u3002</p> </li> <li> <p>Topic Exchange (\u4e3b\u9898\u4ea4\u6362\u673a)\uff1a\u8fd9\u662f\u6700\u7075\u6d3b\u7684\u4e00\u79cd\u3002\u5b83\u652f\u6301\u4f7f\u7528\u901a\u914d\u7b26\u6765\u5339\u914dRouting Key\u548cBinding Key\u3002<code>*</code> (\u661f\u53f7)\u53ef\u4ee5\u66ff\u4ee3\u4e00\u4e2a\u5355\u8bcd\uff0c<code>#</code> (\u4e95\u53f7)\u53ef\u4ee5\u66ff\u4ee3\u96f6\u4e2a\u6216\u591a\u4e2a\u5355\u8bcd\u3002\u4f8b\u5982\uff0c\u4e00\u4e2aRouting Key\u4e3a <code>log.error.database</code> \u7684\u6d88\u606f\uff0c\u53ef\u4ee5\u88ab <code>log.error.*</code> \u6216 <code>log.#</code> \u7684Binding Key\u5339\u914d\u5230\u3002</p> </li> <li> <p>Headers Exchange (\u5934\u4ea4\u6362\u673a)\uff1a\u4e0d\u4f9d\u8d56\u4e8eRouting Key\u8fdb\u884c\u5339\u914d\uff0c\u800c\u662f\u6839\u636e\u6d88\u606f\u5934\uff08Headers\uff09\u4e2d\u7684\u952e\u503c\u5bf9\u6765\u8fdb\u884c\u5339\u914d\u3002\u6027\u80fd\u4e0a\u76f8\u5bf9\u8f83\u5dee\uff0c\u4f7f\u7528\u573a\u666f\u4e0d\u591a\u3002</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/rabbitmq/#_2","title":"\u53ef\u9760\u6027\u4fdd\u969c","text":"<p>RabbitMQ\u4e0d\u4ec5\u4ec5\u662f\u7b80\u5355\u5730\u4f20\u9012\u6d88\u606f\uff0c\u5b83\u8fd8\u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217\u673a\u5236\u6765\u4fdd\u8bc1\u6d88\u606f\u5904\u7406\u7684\u53ef\u9760\u6027\u3002</p> <ol> <li> <p>\u6d88\u606f\u6301\u4e45\u5316\uff1a\u4e3a\u4e86\u9632\u6b62RabbitMQ\u670d\u52a1\u5668\u5b95\u673a\u5bfc\u81f4\u6d88\u606f\u4e22\u5931\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06Exchange\u3001Queue\u548c\u6d88\u606f\u672c\u8eab\u90fd\u8bbe\u7f6e\u4e3a\u6301\u4e45\u5316\uff08Durable\uff09\u3002\u8fd9\u6837\uff0c\u5373\u4f7f\u670d\u52a1\u91cd\u542f\uff0c\u76f8\u5173\u7684\u914d\u7f6e\u548c\u6d88\u606f\u4e5f\u80fd\u6062\u590d\u3002</p> </li> <li> <p>\u6d88\u8d39\u786e\u8ba4\u673a\u5236 (Acknowledgements, ack)\uff1a\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5f53RabbitMQ\u5c06\u6d88\u606f\u63a8\u9001\u7ed9\u6d88\u8d39\u8005\u540e\uff0c\u4f1a\u7acb\u5373\u5728\u961f\u5217\u4e2d\u5220\u9664\u8be5\u6d88\u606f\u3002\u4f46\u5982\u679c\u6b64\u65f6\u6d88\u8d39\u8005\u8fdb\u7a0b\u5f02\u5e38\u9000\u51fa\uff0c\u6d88\u606f\u5c31\u4f1a\u4e22\u5931\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u53ef\u4ee5\u5f00\u542f\u624b\u52a8ack\u6a21\u5f0f\u3002\u6d88\u8d39\u8005\u5728\u6210\u529f\u5904\u7406\u5b8c\u6d88\u606f\u540e\uff0c\u4f1a\u5411RabbitMQ\u53d1\u9001\u4e00\u4e2aack\u56de\u6267\uff0c\u6b64\u65f6RabbitMQ\u624d\u4f1a\u771f\u6b63\u5220\u9664\u6d88\u606f\u3002\u5982\u679c\u6d88\u8d39\u8005\u5728\u5904\u7406\u8fc7\u7a0b\u4e2d\u65ad\u5f00\u8fde\u63a5\uff08\u6216\u53d1\u9001nack\uff09\uff0cRabbitMQ\u4f1a\u8ba4\u4e3a\u6d88\u606f\u6ca1\u6709\u88ab\u6210\u529f\u5904\u7406\uff0c\u5e76\u5c06\u5176\u91cd\u65b0\u6295\u9012\u7ed9\u5176\u4ed6\u6d88\u8d39\u8005\u3002</p> </li> <li> <p>\u751f\u4ea7\u8005\u786e\u8ba4\u673a\u5236 (Publisher Confirms)\uff1a\u4e3a\u4e86\u4fdd\u8bc1\u6d88\u606f\u4ece\u751f\u4ea7\u8005\u53ef\u9760\u5730\u5230\u8fbeRabbitMQ\u670d\u52a1\u5668\uff0c\u53ef\u4ee5\u5f00\u542fPublisher Confirms\u6a21\u5f0f\u3002\u5f00\u542f\u540e\uff0c\u751f\u4ea7\u8005\u53d1\u9001\u7684\u6bcf\u6761\u6d88\u606f\u90fd\u4f1a\u88ab\u5206\u914d\u4e00\u4e2a\u552f\u4e00ID\uff0c\u5f53\u6d88\u606f\u88abRabbitMQ\u6210\u529f\u63a5\u6536\u540e\uff0cRabbitMQ\u4f1a\u56de\u8c03\u751f\u4ea7\u8005\u7684\u4e00\u4e2a\u63a5\u53e3\uff0c\u544a\u77e5\u6d88\u606f\u5df2\u6210\u529f\u9001\u8fbe\u3002\u5982\u679c\u6d88\u606f\u5728\u7f51\u7edc\u4e2d\u4e22\u5931\u6216RabbitMQ\u5185\u90e8\u51fa\u9519\uff0c\u751f\u4ea7\u8005\u5c31\u65e0\u6cd5\u6536\u5230\u786e\u8ba4\uff0c\u4ece\u800c\u53ef\u4ee5\u8fdb\u884c\u91cd\u53d1\u3002</p> </li> <li> <p>\u9ad8\u53ef\u7528\u6027\uff1a</p> <ul> <li> <p>\u96c6\u7fa4 (Clustering)\uff1a\u53ef\u4ee5\u5c06\u591a\u4e2aRabbitMQ\u8282\u70b9\u7ec4\u6210\u4e00\u4e2a\u96c6\u7fa4\uff0c\u6240\u6709\u8282\u70b9\u5171\u4eab\u5143\u6570\u636e\uff08\u961f\u5217\u3001\u4ea4\u6362\u673a\u3001\u7528\u6237\u7b49\u4fe1\u606f\uff09\u3002\u5ba2\u6237\u7aef\u53ef\u4ee5\u8fde\u63a5\u5230\u96c6\u7fa4\u4e2d\u7684\u4efb\u610f\u8282\u70b9\u3002\u4f46\u8fd9\u5e76\u4e0d\u80fd\u4fdd\u8bc1\u961f\u5217\u4e2d\u6d88\u606f\u7684\u9ad8\u53ef\u7528\uff0c\u56e0\u4e3a\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u961f\u5217\u53ca\u5176\u5185\u5bb9\u53ea\u5b58\u5728\u4e8e\u521b\u5efa\u5b83\u7684\u90a3\u4e2a\u8282\u70b9\u4e0a\u3002</p> </li> <li> <p>\u955c\u50cf\u961f\u5217 (Mirrored Queues)\uff1a\u4e3a\u4e86\u89e3\u51b3\u5355\u70b9\u6545\u969c\u95ee\u9898\uff0c\u53ef\u4ee5\u5728\u96c6\u7fa4\u7684\u57fa\u7840\u4e0a\u914d\u7f6e\u955c\u50cf\u961f\u5217\u3002\u4e00\u4e2a\u955c\u50cf\u961f\u5217\u4f1a\u6709\u4e00\u4e2a\u4e3b\u8282\u70b9\uff08Master\uff09\u548c\u82e5\u5e72\u4e2a\u4ece\u8282\u70b9\uff08Slave\uff09\u3002\u6240\u6709\u53d1\u9001\u5230\u4e3b\u8282\u70b9\u7684\u6d88\u606f\u90fd\u4f1a\u88ab\u81ea\u52a8\u590d\u5236\u5230\u6240\u6709\u4ece\u8282\u70b9\u3002\u5f53\u4e3b\u8282\u70b9\u5b95\u673a\u540e\uff0c\u6700\u8001\u7684\u4ece\u8282\u70b9\u4f1a\u81ea\u52a8\u63d0\u5347\u4e3a\u65b0\u7684\u4e3b\u8282\u70b9\uff0c\u4ece\u800c\u4fdd\u8bc1\u670d\u52a1\u7684\u8fde\u7eed\u6027\u548c\u6d88\u606f\u7684\u53ef\u7528\u6027\u3002</p> </li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/rabbitmq%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E9%99%90%E6%B5%81%E7%9A%84/","title":"Rabbitmq\u662f\u5982\u4f55\u5b9e\u73b0\u9650\u6d41\u7684","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/rabbitmq%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E9%99%90%E6%B5%81%E7%9A%84/#_1","title":"\u6d88\u8d39\u7aef\u9650\u6d41","text":"<p>\u6d88\u8d39\u7aef\u9650\u6d41\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u4fdd\u62a4\u6d88\u8d39\u8005\uff0c\u9632\u6b62\u5176\u88ab\u65e0\u6cd5\u5904\u7406\u7684\u5927\u91cf\u6d88\u606f\u6240\u538b\u57ae\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/rabbitmq%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E9%99%90%E6%B5%81%E7%9A%84/#qos-quality-of-service-prefetch-count","title":"\u6838\u5fc3\u673a\u5236\uff1aQoS (Quality of Service) \u4e0e Prefetch Count","text":"<p>\u8fd9\u662f RabbitMQ \u4e2d\u6700\u5e38\u7528\u3001\u4e5f\u662f\u6700\u6838\u5fc3\u7684\u6d88\u8d39\u8005\u9650\u6d41\u65b9\u5f0f\u3002 \u5b83\u901a\u8fc7\u8bbe\u7f6e\u4e00\u4e2a\u201c\u9884\u53d6\u503c\u201d\uff08Prefetch Count\uff09\u6765\u5de5\u4f5c\u3002</p> <ul> <li> <p>\u5de5\u4f5c\u539f\u7406\uff1a</p> <ol> <li>\u6d88\u8d39\u8005\u901a\u8fc7 <code>basic.qos(prefetch_count=N)</code> \u65b9\u6cd5\u544a\u77e5 RabbitMQ\uff0c\u5b83\u4e00\u6b21\u6700\u591a\u80fd\u63a5\u6536\u5e76\u5904\u7406 N \u6761\u5c1a\u672a\u53d1\u9001\u786e\u8ba4\u56de\u6267\uff08<code>ack</code>\uff09\u7684\u6d88\u606f\u3002</li> <li>RabbitMQ \u5728\u5411\u8be5\u6d88\u8d39\u8005\u6295\u9012\u6d88\u606f\u65f6\uff0c\u4f1a\u6301\u7eed\u8ffd\u8e2a\u5176\u672a\u786e\u8ba4\u7684\u6d88\u606f\u6570\u91cf\u3002</li> <li>\u4e00\u65e6\u672a\u786e\u8ba4\u7684\u6d88\u606f\u6570\u8fbe\u5230 N\uff0cRabbitMQ \u5c31\u4f1a\u505c\u6b62\u5411\u8be5\u6d88\u8d39\u8005\u6295\u9012\u65b0\u7684\u6d88\u606f\u3002</li> <li>\u53ea\u6709\u5f53\u6d88\u8d39\u8005\u5904\u7406\u5b8c\u4e00\u6761\u6216\u591a\u6761\u6d88\u606f\u5e76\u53d1\u9001 <code>ack</code> \u4e4b\u540e\uff0c\u672a\u786e\u8ba4\u6d88\u606f\u6570\u51cf\u5c11\uff0cRabbitMQ \u624d\u4f1a\u7ee7\u7eed\u6295\u9012\u65b0\u7684\u6d88\u606f\u3002</li> </ol> </li> <li> <p>\u4f18\u70b9\uff1a</p> <ul> <li>\u9632\u6b62\u6d88\u8d39\u8005\u8fc7\u8f7d\uff1a\u907f\u514d\u56e0\u6d88\u606f\u77ac\u95f4\u6d2a\u5cf0\u5bfc\u81f4\u6d88\u8d39\u8005\u5185\u5b58\u8017\u5c3d\u6216\u5d29\u6e83\u3002</li> <li>\u8d1f\u8f7d\u5747\u8861\uff1a\u5f53\u6709\u591a\u4e2a\u6d88\u8d39\u8005\u65f6\uff0c\u8bbe\u7f6e\u4e00\u4e2a\u5408\u7406\u7684 <code>prefetch_count</code>\uff08\u4f8b\u5982 <code>1</code>\uff09\u53ef\u4ee5\u786e\u4fdd\u6d88\u606f\u5728\u6d88\u8d39\u8005\u4e4b\u95f4\u88ab\u66f4\u5747\u5300\u5730\u5206\u914d\uff0c\u907f\u514d\u51fa\u73b0\u4e00\u4e2a\u6d88\u8d39\u8005\u5fd9\u788c\u800c\u5176\u4ed6\u6d88\u8d39\u8005\u7a7a\u95f2\u7684\u60c5\u51b5\u3002</li> </ul> </li> <li> <p>\u5982\u4f55\u9009\u62e9 Prefetch \u503c\uff1a</p> <ul> <li><code>prefetch_count = 1</code>: \u9002\u7528\u4e8e\u6d88\u606f\u5904\u7406\u65f6\u95f4\u8f83\u957f\u6216\u9700\u8981\u4fdd\u8bc1\u4efb\u52a1\u516c\u5e73\u5206\u914d\u7684\u573a\u666f\u3002\u8fd9\u80fd\u8fbe\u5230\u6700\u516c\u5e73\u7684\u8d1f\u8f7d\u5747\u8861\u6548\u679c\uff0c\u4f46\u7f51\u7edc\u5f00\u9500\u76f8\u5bf9\u8f83\u5927\u3002</li> <li>\u8f83\u5927\u7684 <code>prefetch_count</code>: \u9002\u7528\u4e8e\u6d88\u606f\u5904\u7406\u901f\u5ea6\u975e\u5e38\u5feb\u7684\u573a\u666f\u3002\u4e00\u6b21\u6027\u6279\u91cf\u83b7\u53d6\u591a\u6761\u6d88\u606f\u53ef\u4ee5\u51cf\u5c11\u7f51\u7edc\u901a\u4fe1\u7684\u5f00\u9500\uff0c\u4ece\u800c\u63d0\u5347\u6574\u4f53\u541e\u5410\u91cf\u3002 \u4f46\u503c\u8fc7\u9ad8\u53ef\u80fd\u4f1a\u5bfc\u81f4\u8d1f\u8f7d\u4e0d\u5747\u548c\u5185\u5b58\u538b\u529b\u3002</li> <li>\u9ed8\u8ba4\u503c: \u5982\u679c\u4e0d\u8bbe\u7f6e\uff0c\u9ed8\u8ba4\u662f\u65e0\u9650\u5236\u7684\uff0cRabbitMQ \u4f1a\u5c3d\u53ef\u80fd\u5feb\u5730\u5c06\u6240\u6709\u6d88\u606f\u63a8\u9001\u7ed9\u6d88\u8d39\u8005\uff0c\u8fd9\u5728\u5927\u591a\u6570\u751f\u4ea7\u73af\u5883\u4e2d\u662f\u5371\u9669\u7684\u3002 \uff08\u6ce8\u610f\uff1a\u4e00\u4e9b\u5ba2\u6237\u7aef\u5e93\u5982 Spring AMQP 2.x \u53ef\u80fd\u4f1a\u8bbe\u7f6e\u81ea\u5df1\u7684\u9ed8\u8ba4\u503c\uff0c\u4f8b\u5982 250\u3002\uff09</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/rabbitmq%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E9%99%90%E6%B5%81%E7%9A%84/#_2","title":"\u751f\u4ea7\u7aef\u9650\u6d41","text":"<p>\u5f53\u751f\u4ea7\u8005\u53d1\u9001\u6d88\u606f\u7684\u901f\u5ea6\u8fdc\u8d85\u6d88\u8d39\u8005\u5904\u7406\u901f\u5ea6\u65f6\uff0c\u4f1a\u5bfc\u81f4\u6d88\u606f\u5728\u961f\u5217\u4e2d\u5927\u91cf\u79ef\u538b\uff0c\u6700\u7ec8\u53ef\u80fd\u8017\u5c3d Broker \u7684\u5185\u5b58\u6216\u78c1\u76d8\u8d44\u6e90\u3002 \u751f\u4ea7\u7aef\u9650\u6d41\u5c31\u662f\u4e3a\u4e86\u5e94\u5bf9\u8fd9\u79cd\u60c5\u51b5\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/rabbitmq%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E9%99%90%E6%B5%81%E7%9A%84/#max-length","title":"\u673a\u5236\u4e00\uff1a\u961f\u5217\u957f\u5ea6\u9650\u5236 (Max Length)","text":"<p>\u53ef\u4ee5\u76f4\u63a5\u5728 Broker \u4e0a\u4e3a\u961f\u5217\u8bbe\u7f6e\u957f\u5ea6\u9650\u5236\uff0c\u4ece\u800c\u5bf9\u751f\u4ea7\u8005\u8fdb\u884c\u88ab\u52a8\u9650\u6d41\u3002</p> <ul> <li> <p>\u5de5\u4f5c\u539f\u7406\uff1a</p> <ul> <li>\u901a\u8fc7\u7b56\u7565\uff08Policy\uff09\u6216\u5728\u58f0\u660e\u961f\u5217\u65f6\u4f7f\u7528\u53c2\u6570 <code>x-max-length</code>\uff08\u6d88\u606f\u6570\u91cf\uff09\u6216 <code>x-max-length-bytes</code>\uff08\u6d88\u606f\u603b\u4f53\u79ef\uff09\u6765\u9650\u5236\u961f\u5217\u7684\u6700\u5927\u5bb9\u91cf\u3002</li> <li>\u5f53\u961f\u5217\u8fbe\u5230\u4e0a\u9650\u65f6\uff0cRabbitMQ \u4f1a\u6839\u636e\u9884\u8bbe\u7684\u6ea2\u51fa\u884c\u4e3a\uff08<code>x-overflow</code>\uff09\u6765\u5904\u7406\u65b0\u8fdb\u5165\u7684\u6d88\u606f\u3002<ul> <li><code>drop-head</code> (\u9ed8\u8ba4): \u4e22\u5f03\u961f\u5217\u5934\u90e8\u7684\u65e7\u6d88\u606f\u3002</li> <li><code>reject-publish</code>: \u62d2\u7edd\u751f\u4ea7\u8005\u53d1\u9001\u7684\u65b0\u6d88\u606f\u3002\u751f\u4ea7\u8005\u4f1a\u6536\u5230\u4e00\u4e2a <code>nack</code>\uff0c\u4ece\u800c\u5f97\u77e5\u6d88\u606f\u88ab\u62d2\u7edd\uff0c\u53ef\u4ee5\u5b9e\u73b0\u53cd\u538b\u3002</li> <li><code>reject-publish-dlx</code>: \u62d2\u7edd\u65b0\u6d88\u606f\uff0c\u5e76\u5c06\u5176\u8def\u7531\u5230\u6b7b\u4fe1\u4ea4\u6362\u673a\uff08\u5982\u679c\u914d\u7f6e\u4e86\uff09\u3002</li> </ul> </li> </ul> </li> <li> <p>\u4f18\u70b9\uff1a\u7b80\u5355\u76f4\u63a5\uff0c\u80fd\u6709\u6548\u9632\u6b62\u961f\u5217\u65e0\u9650\u589e\u957f\uff0c\u4fdd\u62a4 Broker \u7684\u7a33\u5b9a\u6027\u3002</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/rabbitmq%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E9%99%90%E6%B5%81%E7%9A%84/#broker-flow-control","title":"\u673a\u5236\u4e8c\uff1aBroker \u5185\u90e8\u7684\u6d41\u63a7\u673a\u5236 (Flow Control)","text":"<p>RabbitMQ \u5185\u7f6e\u4e86\u4e00\u5957\u81ea\u52a8\u7684\u3001\u57fa\u4e8e\u4fe1\u7528\u7684\u6d41\u63a7\u673a\u5236\uff0c\u7528\u4e8e\u4fdd\u62a4\u81ea\u8eab\u514d\u4e8e\u88ab\u8fc7\u5feb\u7684\u751f\u4ea7\u8005\u538b\u57ae\u3002</p> <ul> <li>\u5de5\u4f5c\u539f\u7406\uff1a<ul> <li>\u5f53 RabbitMQ \u8282\u70b9\u4fa6\u6d4b\u5230\u81ea\u8eab\u5373\u5c06\u8fc7\u8f7d\uff08\u4f8b\u5982\u5185\u5b58\u6216\u78c1\u76d8\u4f7f\u7528\u63a5\u8fd1\u201c\u6c34\u4f4d\u7ebf\u201d\uff09\u65f6\uff0c\u5b83\u4f1a\u81ea\u52a8\u201c\u963b\u585e\u201d\u53d1\u9001\u901f\u5ea6\u8fc7\u5feb\u7684\u751f\u4ea7\u8005\u8fde\u63a5\u3002</li> <li>\u4ece\u751f\u4ea7\u8005\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u5c31\u50cf\u662f\u7f51\u7edc\u5e26\u5bbd\u7a81\u7136\u964d\u4f4e\u4e86\uff0c\u53d1\u9001\u64cd\u4f5c\u4f1a\u53d8\u6162\u6216\u963b\u585e\u3002 \u5f53 Broker \u6062\u590d\u6b63\u5e38\u540e\uff0c\u8be5\u8fde\u63a5\u4f1a\u81ea\u52a8\u89e3\u9664\u963b\u585e\u3002</li> <li>\u8fd9\u662f\u4e00\u4e2a\u88ab\u52a8\u7684\u4fdd\u62a4\u673a\u5236\uff0c\u65e0\u9700\u624b\u52a8\u914d\u7f6e\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/rabbitmq%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E9%99%90%E6%B5%81%E7%9A%84/#_3","title":"\u673a\u5236\u4e09\uff1a\u5ba2\u6237\u7aef\u5b9e\u73b0\u9650\u6d41\u903b\u8f91","text":"<p>\u9664\u4e86 Broker \u7aef\u7684\u9650\u5236\uff0c\u4e5f\u53ef\u4ee5\u5728\u751f\u4ea7\u8005\u5e94\u7528\u5c42\u9762\u4e3b\u52a8\u8fdb\u884c\u9650\u6d41\u3002</p> <ul> <li>\u5229\u7528 Publisher Confirms\uff1a\u751f\u4ea7\u8005\u53ef\u4ee5\u8bbe\u7f6e\u4e00\u4e2a\u5728\u9014\uff08\u672a\u88ab Broker \u786e\u8ba4\uff09\u6d88\u606f\u6570\u91cf\u7684\u4e0a\u9650\u3002\u5728\u53d1\u9001\u6d88\u606f\u524d\u68c0\u67e5\u672a\u786e\u8ba4\u7684\u6d88\u606f\u6570\uff0c\u5982\u679c\u8d85\u8fc7\u9608\u503c\u5c31\u6682\u505c\u53d1\u9001\uff0c\u76f4\u5230\u6536\u5230 Broker \u7684\u786e\u8ba4\u56de\u6267\u3002</li> <li>\u5e94\u7528\u5c42\u9650\u6d41\u7b97\u6cd5\uff1a\u5728\u751f\u4ea7\u8005\u4ee3\u7801\u4e2d\u76f4\u63a5\u96c6\u6210\u4ee4\u724c\u6876\u3001\u6f0f\u6876\u7b49\u9650\u6d41\u7b97\u6cd5\uff0c\u4ece\u6e90\u5934\u63a7\u5236\u53d1\u9001\u901f\u7387\u3002</li> </ul> \u9650\u6d41\u65b9\u5f0f \u4f5c\u7528\u5bf9\u8c61 \u5b9e\u73b0\u673a\u5236 \u4e3b\u8981\u76ee\u7684 QoS (Prefetch Count) \u6d88\u8d39\u8005 <code>basic.qos</code> \u8bbe\u7f6e\u672a\u786e\u8ba4\u6d88\u606f\u6570\u4e0a\u9650 \u4fdd\u62a4\u6d88\u8d39\u8005\uff0c\u9632\u6b62\u5176\u8fc7\u8f7d\uff0c\u5b9e\u73b0\u6d88\u8d39\u7aef\u7684\u8d1f\u8f7d\u5747\u8861\u3002 \u961f\u5217\u957f\u5ea6\u9650\u5236 \u751f\u4ea7\u8005 (\u95f4\u63a5) \u8bbe\u7f6e <code>x-max-length</code> \u548c <code>x-overflow</code> \u7b56\u7565 \u4fdd\u62a4 Broker\uff0c\u9632\u6b62\u961f\u5217\u65e0\u9650\u79ef\u538b\uff0c\u8017\u5c3d\u7cfb\u7edf\u8d44\u6e90\u3002 Broker \u5185\u90e8\u6d41\u63a7 \u751f\u4ea7\u8005 Broker \u81ea\u52a8\u76d1\u6d4b\u8d44\u6e90\u5e76\u963b\u585e\u8fc7\u5feb\u7684\u8fde\u63a5 \u4fdd\u62a4 Broker \u7684\u81ea\u6211\u4fdd\u62a4\u673a\u5236\uff0c\u9632\u6b62\u56e0\u5185\u5b58/\u78c1\u76d8\u538b\u529b\u8fc7\u5927\u800c\u5d29\u6e83\u3002 \u5ba2\u6237\u7aef\u9650\u6d41 \u751f\u4ea7\u8005 \u5728\u5e94\u7528\u4ee3\u7801\u4e2d\u5b9e\u73b0\u9650\u6d41\u7b97\u6cd5\u6216\u5229\u7528 Publisher Confirms \u4e3b\u52a8\u63a7\u5236\u6d88\u606f\u53d1\u9001\u901f\u7387\uff0c\u5b9e\u73b0\u66f4\u7cbe\u7ec6\u5316\u7684\u6d41\u91cf\u63a7\u5236\u3002"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%BB%E6%B5%81%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E4%BB%8B%E7%BB%8D%EF%BC%8Crabbitmq%E7%9B%B8%E6%AF%94%E5%85%B6%E4%BD%99%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E6%9C%89%E4%BB%80%E4%B9%88%E4%BC%98%E5%8A%A3%E5%8A%BF/","title":"\u4e3b\u6d41\u6d88\u606f\u961f\u5217\u4ecb\u7ecd\uff0crabbitmq\u76f8\u6bd4\u5176\u4f59\u6d88\u606f\u961f\u5217\u6709\u4ec0\u4e48\u4f18\u52a3\u52bf","text":"<p>\u4e3b\u6d41\u6d88\u606f\u961f\u5217\u5206\u522b\u662f\uff1aRabbitMQ\uff0cKafka\u548cRocketMQ\u3002</p> <ul> <li> <p>RabbitMQ\uff1a\u662f\u4e00\u4e2a\u5386\u53f2\u60a0\u4e45\u3001\u975e\u5e38\u6210\u719f\u7684\u6d88\u606f\u4ee3\u7406\uff08Message Broker\uff09\u3002\u5b83\u7531Erlang\u8bed\u8a00\u5f00\u53d1\uff0c\u5b8c\u6574\u5730\u5b9e\u73b0\u4e86AMQP\uff08\u9ad8\u7ea7\u6d88\u606f\u961f\u5217\u534f\u8bae\uff09\uff0c\u4ee5\u53ef\u9760\u6027\u548c\u7075\u6d3b\u6027\u8457\u79f0\u3002</p> </li> <li> <p>Apache Kafka\uff1a\u5b83\u6700\u521d\u7531LinkedIn\u5f00\u53d1\uff0c\u73b0\u5728\u662fApache\u9876\u7ea7\u9879\u76ee\u3002\u5b83\u7684\u5b9a\u4f4d\u662f\u4e00\u4e2a\u5206\u5e03\u5f0f\u7684\u3001\u57fa\u4e8e\u53d1\u5e03\u8ba2\u9605\u6a21\u5f0f\u7684\u4e8b\u4ef6\u6d41\u5e73\u53f0\uff08Event Streaming Platform\uff09\u3002\u5b83\u7684\u8bbe\u8ba1\u6838\u5fc3\u662f\u5904\u7406\u6d77\u91cf\u7684\u5b9e\u65f6\u6570\u636e\u6d41\uff0c\u5f3a\u8c03\u9ad8\u541e\u5410\u91cf\u548c\u6570\u636e\u7684\u6301\u4e45\u5316\u5b58\u50a8\u3002</p> </li> <li> <p>Apache RocketMQ\uff1a\u7531\u963f\u91cc\u5df4\u5df4\u5f00\u6e90\uff0c\u540e\u6350\u8d60\u7ed9Apache\u57fa\u91d1\u4f1a\u3002\u5b83\u662f\u963f\u91cc\u6839\u636e\u81ea\u8eab\u5e9e\u5927\u7684\u7535\u5546\u548c\u91d1\u878d\u4e1a\u52a1\u573a\u666f\u6253\u78e8\u51fa\u7684\u4ea7\u54c1\uff0c\u8bbe\u8ba1\u4e0a\u501f\u9274\u4e86Kafka\u548cRabbitMQ\uff0c\u7279\u522b\u6ce8\u91cd\u4e1a\u52a1\u573a\u666f\u7684\u53ef\u9760\u6027\uff0c\u6bd4\u5982\u4e8b\u52a1\u6d88\u606f\u548c\u5ef6\u8fdf\u6d88\u606f\u3002</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%BB%E6%B5%81%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E4%BB%8B%E7%BB%8D%EF%BC%8Crabbitmq%E7%9B%B8%E6%AF%94%E5%85%B6%E4%BD%99%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E6%9C%89%E4%BB%80%E4%B9%88%E4%BC%98%E5%8A%A3%E5%8A%BF/#rabbitmq","title":"RabbitMQ\u7684\u4f18\u52bf","text":"<ol> <li> <p>\u6210\u719f\u7a33\u5b9a\uff0c\u529f\u80fd\u5168\u9762\uff1a\u4f5c\u4e3a\u4e00\u4e2a\u8001\u724c\u7684\u6d88\u606f\u961f\u5217\uff0cRabbitMQ\u793e\u533a\u5e9e\u5927\uff0c\u6587\u6863\u5b8c\u5584\uff0c\u751f\u6001\u975e\u5e38\u6210\u719f\u3002\u5b83\u4e0d\u4ec5\u4ec5\u662f\u4e00\u4e2a\u6d88\u606f\u961f\u5217\uff0c\u66f4\u662f\u4e00\u4e2a\u529f\u80fd\u4e30\u5bcc\u7684\u6d88\u606f\u4ee3\u7406\u3002</p> </li> <li> <p>\u7075\u6d3b\u5f3a\u5927\u7684\u8def\u7531\u80fd\u529b\uff1a\u8fd9\u662fRabbitMQ\u6700\u6838\u5fc3\u7684\u4f18\u52bf\u3002\u5b83\u57fa\u4e8eAMQP\u534f\u8bae\uff0c\u63d0\u4f9b\u4e86\u591a\u79cd\u4ea4\u6362\u673a\u7c7b\u578b\uff08Direct, Fanout, Topic, Headers\uff09\uff0c\u53ef\u4ee5\u7ec4\u5408\u51fa\u975e\u5e38\u590d\u6742\u7684\u8def\u7531\u903b\u8f91\uff0c\u6ee1\u8db3\u5404\u79cd\u7075\u6d3b\u7684\u4e1a\u52a1\u9700\u6c42\u3002\u4f8b\u5982\uff0c\u53ef\u4ee5\u8f7b\u677e\u5b9e\u73b0\u201c\u5c06\u7279\u5b9a\u7c7b\u578b\u7684\u6d88\u606f\u7cbe\u786e\u6295\u9012\u7ed9\u67d0\u4e9b\u6d88\u8d39\u8005\u201d\u6216\u201c\u5c06\u4e00\u6761\u6d88\u606f\u5e7f\u64ad\u7ed9\u6240\u6709\u5173\u5fc3\u5b83\u7684\u6d88\u8d39\u8005\u201d\u7b49\u573a\u666f\u3002</p> </li> <li> <p>\u9ad8\u53ef\u9760\u7684\u6d88\u606f\u6295\u9012\u4fdd\u969c\uff1aRabbitMQ\u63d0\u4f9b\u4e86\u975e\u5e38\u53ef\u9760\u7684\u6d88\u606f\u786e\u8ba4\u673a\u5236\u3002\u4ece\u751f\u4ea7\u8005\u7684Publisher Confirms\uff0c\u5230\u4ea4\u6362\u673a\u65e0\u6cd5\u8def\u7531\u65f6\u7684Publisher Returns\uff0c\u518d\u5230\u6d88\u8d39\u8005\u7684\u624b\u52a8ACK\u673a\u5236\uff0c\u5171\u540c\u4fdd\u8bc1\u4e86\u6d88\u606f\u4ece\u751f\u4ea7\u5230\u6d88\u8d39\u6574\u4e2a\u94fe\u8def\u7684\u201c\u81f3\u5c11\u4e00\u6b21\u201d\u6216\u201c\u81f3\u591a\u4e00\u6b21\u201d\u6295\u9012\uff0c\u53ef\u9760\u6027\u975e\u5e38\u9ad8\u3002</p> </li> <li> <p>\u8f7b\u91cf\u7ea7\u4e0e\u6613\u7528\u6027\uff1a\u76f8\u6bd4\u4e8eKafka\u7684\u91cd\u5ea6\u4f9d\u8d56\uff08\u9700\u8981Zookeeper\u6216\u5185\u7f6e\u7684KRaft\uff09\uff0cRabbitMQ\u7684\u90e8\u7f72\u548c\u8fd0\u7ef4\u76f8\u5bf9\u7b80\u5355\uff0c\u5bf9\u4e8e\u4e2d\u5c0f\u578b\u5e94\u7528\u6216\u5bf9\u541e\u5410\u91cf\u8981\u6c42\u4e0d\u662f\u6781\u7aef\u9ad8\u7684\u573a\u666f\uff0c\u5b83\u662f\u4e00\u4e2a\u975e\u5e38\u597d\u7684\u9009\u62e9\u3002</p> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%BB%E6%B5%81%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E4%BB%8B%E7%BB%8D%EF%BC%8Crabbitmq%E7%9B%B8%E6%AF%94%E5%85%B6%E4%BD%99%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E6%9C%89%E4%BB%80%E4%B9%88%E4%BC%98%E5%8A%A3%E5%8A%BF/#rabbitmq_1","title":"RabbitMQ\u7684\u52a3\u52bf","text":"<ol> <li> <p>\u6027\u80fd\u4e0e\u541e\u5410\u91cf\u74f6\u9888\uff1a\u8fd9\u662f\u5b83\u4e0eKafka\u76f8\u6bd4\u6700\u4e3b\u8981\u7684\u77ed\u677f\u3002\u7531\u4e8e\u5176broker-centric\uff08\u4ee5\u4ee3\u7406\u4e3a\u4e2d\u5fc3\uff09\u7684\u8bbe\u8ba1\uff0c\u6d88\u606f\u7684\u8def\u7531\u3001\u5206\u53d1\u7b49\u903b\u8f91\u90fd\u7531broker\u5904\u7406\uff0c\u8fd9\u4f7f\u5f97\u5b83\u5728\u5904\u7406\u5927\u89c4\u6a21\u3001\u9ad8\u5e76\u53d1\u7684\u5199\u5165\u548c\u6d88\u8d39\u65f6\uff0c\u5355\u673a\u541e\u5410\u91cf\u901a\u5e38\u5728\u4e07\u7ea7\u6216\u5341\u4e07\u7ea7\uff0c\u96be\u4ee5\u4e0eKafka\u7684\u767e\u4e07\u7ea7\u541e\u5410\u91cf\u5339\u654c\u3002</p> </li> <li> <p>\u8bed\u8a00\u4f9d\u8d56\uff1aRabbitMQ\u7531Erlang\u8bed\u8a00\u5f00\u53d1\u3002\u867d\u7136\u8fd9\u8d4b\u4e88\u4e86\u5b83\u5728\u9ad8\u5e76\u53d1\u548c\u7a33\u5b9a\u6027\u4e0a\u7684\u5929\u7136\u4f18\u52bf\uff08Erlang\u7684OTP\u5e73\u53f0\uff09\uff0c\u4f46\u5bf9\u4e8e\u5927\u591a\u6570\u4ee5Java/Go\u4e3a\u6280\u672f\u6808\u7684\u516c\u53f8\u6765\u8bf4\uff0c\u4e00\u65e6\u9700\u8981\u6df1\u5165\u5b9a\u5236\u6216\u6392\u67e5\u6df1\u5c42\u6b21\u95ee\u9898\uff0c\u4f1a\u9762\u4e34\u8f83\u9ad8\u7684\u8bed\u8a00\u95e8\u69db\u3002</p> </li> <li> <p>\u91cd\u91cf\u7ea7\u7684\u6d88\u606f\u6a21\u578b\uff1aRabbitMQ\u4f1a\u4e3a\u6bcf\u4e2a\u6d88\u8d39\u8005\u7ef4\u62a4\u72b6\u6001\uff0c\u5e76\u4e3b\u52a8\u63a8\u9001\uff08push\uff09\u6d88\u606f\u7ed9\u6d88\u8d39\u8005\u3002\u5f53\u6d88\u8d39\u8005\u6570\u91cf\u5de8\u5927\u65f6\uff0cbroker\u7684\u8d1f\u62c5\u4f1a\u5f88\u91cd\uff0c\u5f71\u54cd\u6269\u5c55\u6027\u3002</p> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%BB%E6%B5%81%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E4%BB%8B%E7%BB%8D%EF%BC%8Crabbitmq%E7%9B%B8%E6%AF%94%E5%85%B6%E4%BD%99%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E6%9C%89%E4%BB%80%E4%B9%88%E4%BC%98%E5%8A%A3%E5%8A%BF/#_1","title":"\u5bf9\u6bd4\u5206\u6790","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%BB%E6%B5%81%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E4%BB%8B%E7%BB%8D%EF%BC%8Crabbitmq%E7%9B%B8%E6%AF%94%E5%85%B6%E4%BD%99%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E6%9C%89%E4%BB%80%E4%B9%88%E4%BC%98%E5%8A%A3%E5%8A%BF/#rabbitmq-vs-kafka","title":"RabbitMQ vs. Kafka","text":"\u7279\u6027 RabbitMQ Kafka \u5b9a\u4f4d \u6d88\u606f\u4ee3\u7406\uff08Message Broker\uff09 \u4e8b\u4ef6\u6d41\u5e73\u53f0\uff08Event Streaming Platform\uff09 \u6838\u5fc3\u4f18\u52bf \u7075\u6d3b\u7684\u8def\u7531\u3001\u53ef\u9760\u7684\u6d88\u606f\u6295\u9012 \u6781\u9ad8\u7684\u541e\u5410\u91cf\u3001\u6570\u636e\u6301\u4e45\u5316\u4e0e\u56de\u6eaf \u6027\u80fd \u76f8\u5bf9\u8f83\u4f4e\uff0c\u4e07\u7ea7\u5230\u5341\u4e07\u7ea7QPS \u975e\u5e38\u9ad8\uff0c\u53ef\u8fbe\u767e\u4e07\u7ea7QPS \u6d88\u606f\u6a21\u578b Broker\u4e3b\u52a8\u63a8\u9001(push)\u6d88\u606f Consumer\u4e3b\u52a8\u62c9\u53d6(pull)\u6d88\u606f \u9002\u7528\u573a\u666f \u590d\u6742\u7684\u4e1a\u52a1\u89e3\u8026\u3001\u4f01\u4e1a\u7ea7\u5e94\u7528\u96c6\u6210\u3001\u9700\u8981\u53ef\u9760\u6d88\u606f\u5904\u7406\u7684\u573a\u666f\u3002 \u5927\u6570\u636e\u65e5\u5fd7\u91c7\u96c6\u3001\u5b9e\u65f6\u6570\u636e\u7ba1\u9053\u3001\u6d41\u5f0f\u8ba1\u7b97\u3001\u4e8b\u4ef6\u6eaf\u6e90\u7b49\u573a\u666f\u3002 <p>\u7b80\u5355\u6765\u8bf4\uff0c\u5982\u679c\u4f60\u7684\u4e1a\u52a1\u9700\u8981\u50cf\u201c\u90ae\u5c40\u201d\u4e00\u6837\uff0c\u7cbe\u786e\u3001\u53ef\u9760\u5730\u5c06\u4fe1\u4ef6\uff08\u6d88\u606f\uff09\u6295\u9012\u5230\u4e0d\u540c\u7684\u6536\u4ef6\u4eba\uff08\u6d88\u8d39\u8005\uff09\u624b\u4e2d\uff0c\u5904\u7406\u590d\u6742\u7684\u6295\u9012\u89c4\u5219\uff0c\u90a3\u4e48RabbitMQ\u662f\u66f4\u597d\u7684\u9009\u62e9\u3002\u5982\u679c\u4f60\u7684\u4e1a\u52a1\u662f\u5904\u7406\u50cf\u201c\u8f93\u6cb9\u7ba1\u9053\u201d\u4e00\u6837\u7684\u6d77\u91cf\u6570\u636e\u6d41\uff0c\u5f3a\u8c03\u7684\u662f\u4f20\u8f93\u6548\u7387\u548c\u5b58\u50a8\u80fd\u529b\uff0c\u90a3\u4e48Kafka\u66f4\u80dc\u4e00\u7b79\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%BB%E6%B5%81%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E4%BB%8B%E7%BB%8D%EF%BC%8Crabbitmq%E7%9B%B8%E6%AF%94%E5%85%B6%E4%BD%99%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E6%9C%89%E4%BB%80%E4%B9%88%E4%BC%98%E5%8A%A3%E5%8A%BF/#rabbitmq-vs-rocketmq","title":"RabbitMQ vs. RocketMQ","text":"\u7279\u6027 RabbitMQ RocketMQ \u8bbe\u8ba1\u54f2\u5b66 \u9075\u5faaAMQP\u6807\u51c6\uff0c\u901a\u7528\u6027\u5f3a \u9762\u5411\u4e1a\u52a1\uff0c\u7279\u522b\u662f\u91d1\u878d\u548c\u7535\u5546 \u7279\u8272\u529f\u80fd \u5f3a\u5927\u7684\u8def\u7531\u4ea4\u6362\u673a \u4e8b\u52a1\u6d88\u606f\u3001\u5ef6\u8fdf/\u5b9a\u65f6\u6d88\u606f \u6027\u80fd \u826f\u597d \u975e\u5e38\u9ad8\uff0c\u4ec5\u6b21\u4e8eKafka \u793e\u533a\u751f\u6001 \u56fd\u9645\u5316\uff0c\u975e\u5e38\u6210\u719f \u56fd\u5185\u751f\u6001\u5f3a\u5927\uff0c\u4e0e\u963f\u91cc\u7cfb\u7ed3\u5408\u7d27\u5bc6 <p>RocketMQ\u53ef\u4ee5\u770b\u4f5c\u662f\u4e00\u4e2a\u5728\u6027\u80fd\u548c\u529f\u80fd\u4e4b\u95f4\u505a\u4e86\u5f88\u597d\u5e73\u8861\u7684\u4ea7\u54c1\u3002\u5b83\u5438\u53d6\u4e86Kafka\u7684\u9ad8\u6027\u80fd\u8bbe\u8ba1\uff0c\u4e5f\u878d\u5408\u4e86RabbitMQ\u7684\u5f88\u591a\u9762\u5411\u4e1a\u52a1\u7684\u529f\u80fd\u3002\u7279\u522b\u662f\u5b83\u539f\u751f\u7684\u4e8b\u52a1\u6d88\u606f\u548c\u5ef6\u8fdf\u6d88\u606f\u529f\u80fd\uff0c\u5bf9\u4e8e\u7535\u5546\u4e0b\u5355\u3001\u5206\u5e03\u5f0f\u4e8b\u52a1\u7b49\u573a\u666f\u662f\u201c\u6740\u624b\u7ea7\u201d\u7279\u6027\uff0c\u800c\u8fd9\u4e9b\u5728RabbitMQ\u6216Kafka\u4e2d\u9700\u8981\u81ea\u5df1\u4e8c\u6b21\u5f00\u53d1\u624d\u80fd\u8f83\u597d\u5730\u5b9e\u73b0\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%BB%E6%B5%81%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E4%BB%8B%E7%BB%8D%EF%BC%8Crabbitmq%E7%9B%B8%E6%AF%94%E5%85%B6%E4%BD%99%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E6%9C%89%E4%BB%80%E4%B9%88%E4%BC%98%E5%8A%A3%E5%8A%BF/#_2","title":"\u603b\u7ed3","text":"<p>\u9009\u62e9\u54ea\u4e2a\u6d88\u606f\u961f\u5217\uff0c\u6700\u7ec8\u53d6\u51b3\u4e8e\u4e1a\u52a1\u573a\u666f\u548c\u6280\u672f\u9700\u6c42\u3002</p> <ul> <li> <p>\u9009\u62e9RabbitMQ\uff1a\u5f53\u4f60\u7684\u5e94\u7528\u9700\u8981\u5904\u7406\u590d\u6742\u7684\u8def\u7531\u903b\u8f91\uff0c\u5bf9\u6d88\u606f\u7684\u53ef\u9760\u6027\u8981\u6c42\u6781\u9ad8\uff0c\u4e14\u541e\u5410\u91cf\u4e0d\u662f\u9996\u8981\u74f6\u9888\u65f6\u3002\u975e\u5e38\u9002\u5408\u4f20\u7edf\u4f01\u4e1a\u5e94\u7528\u3001\u540e\u53f0\u4efb\u52a1\u89e3\u8026\u7b49\u573a\u666f\u3002</p> </li> <li> <p>\u9009\u62e9Kafka\uff1a\u5f53\u4f60\u7684\u6838\u5fc3\u9700\u6c42\u662f\u5904\u7406\u6d77\u91cf\u6570\u636e\uff0c\u6784\u5efa\u5b9e\u65f6\u6570\u636e\u7ba1\u9053\uff0c\u7528\u4e8e\u65e5\u5fd7\u805a\u5408\u3001\u5927\u6570\u636e\u5206\u6790\u3001\u6d41\u5f0f\u8ba1\u7b97\u65f6\u3002</p> </li> <li> <p>\u9009\u62e9RocketMQ\uff1a\u5f53\u4f60\u7684\u4e1a\u52a1\u573a\u666f\uff08\u7279\u522b\u662f\u7535\u5546\u3001\u91d1\u878d\uff09\u5bf9\u6d88\u606f\u7684\u53ef\u9760\u6027\u3001\u987a\u5e8f\u6027\u6709\u6781\u9ad8\u8981\u6c42\uff0c\u5e76\u4e14\u9700\u8981\u7528\u5230\u4e8b\u52a1\u6d88\u606f\u3001\u5ef6\u8fdf\u6d88\u606f\u7b49\u9ad8\u7ea7\u7279\u6027\u65f6\uff0c\u5b83\u662f\u4e00\u4e2a\u975e\u5e38\u4f18\u79c0\u7684\u9009\u62e9\u3002</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E5%A6%82%E6%9E%9C%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B4%A9%E6%BA%83%E7%AD%89%E6%83%85%E5%86%B5%E5%AF%BC%E8%87%B4%E6%B6%88%E8%B4%B9%E8%80%85%E6%97%A0%E6%B3%95%E6%AD%A3%E5%B8%B8%E6%B6%88%E8%B4%B9%E6%B6%88%E6%81%AF%EF%BC%8Crabbitmq%E4%BC%9A%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86/","title":"\u5982\u679c\u6570\u636e\u5e93\u5d29\u6e83\u7b49\u60c5\u51b5\u5bfc\u81f4\u6d88\u8d39\u8005\u65e0\u6cd5\u6b63\u5e38\u6d88\u8d39\u6d88\u606f\uff0crabbitmq\u4f1a\u5982\u4f55\u5904\u7406","text":"<p>\u5f53\u6d88\u8d39\u8005\u56e0\u6570\u636e\u5e93\u5d29\u6e83\u7b49\u60c5\u51b5\u65e0\u6cd5\u6b63\u5e38\u6d88\u8d39\u6d88\u606f\u65f6\uff0cRabbitMQ \u63d0\u4f9b\u4e86\u4e00\u5957\u5f3a\u5927\u7684\u673a\u5236\u6765\u786e\u4fdd\u6d88\u606f\u7684\u53ef\u9760\u6027\uff0c\u9632\u6b62\u6d88\u606f\u4e22\u5931\u3002\u5176\u6838\u5fc3\u5904\u7406\u65b9\u5f0f\u4f9d\u8d56\u4e8e\u6d88\u606f\u786e\u8ba4\uff08Acknowledgement\uff09\u673a\u5236\u3001\u6d88\u606f\u91cd\u6295\u9012\uff08Redelivery\uff09\u4ee5\u53ca\u6b7b\u4fe1\u4ea4\u6362\u673a\uff08Dead-Letter Exchange\uff09\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E5%A6%82%E6%9E%9C%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B4%A9%E6%BA%83%E7%AD%89%E6%83%85%E5%86%B5%E5%AF%BC%E8%87%B4%E6%B6%88%E8%B4%B9%E8%80%85%E6%97%A0%E6%B3%95%E6%AD%A3%E5%B8%B8%E6%B6%88%E8%B4%B9%E6%B6%88%E6%81%AF%EF%BC%8Crabbitmq%E4%BC%9A%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86/#ack","title":"\u6d88\u606f\u786e\u8ba4\u673a\u5236 (ACK)","text":"<p>\u4e3a\u4e86\u786e\u4fdd\u6d88\u606f\u88ab\u6210\u529f\u5904\u7406\uff0cRabbitMQ \u5f15\u5165\u4e86\u6d88\u8d39\u8005\u786e\u8ba4\u673a\u5236\u3002</p> <ul> <li> <p>\u81ea\u52a8\u786e\u8ba4 (Automatic Acknowledgement): \u5728\u8fd9\u79cd\u6a21\u5f0f\u4e0b\uff0cRabbitMQ \u5728\u5c06\u6d88\u606f\u53d1\u9001\u7ed9\u6d88\u8d39\u8005\u540e\u4f1a\u7acb\u5373\u5c06\u5176\u4ece\u961f\u5217\u4e2d\u5220\u9664\u3002 \u5982\u679c\u6b64\u65f6\u6d88\u8d39\u8005\u53d1\u751f\u5d29\u6e83\uff0c\u800c\u6d88\u606f\u8fd8\u672a\u5904\u7406\u5b8c\u6bd5\uff0c\u90a3\u4e48\u8fd9\u6761\u6d88\u606f\u5c06\u4f1a\u4e22\u5931\u3002 \u56e0\u6b64\uff0c\u8fd9\u79cd\u6a21\u5f0f\u9002\u7528\u4e8e\u53ef\u4ee5\u5bb9\u5fcd\u6d88\u606f\u4e22\u5931\u7684\u573a\u666f\u3002</p> </li> <li> <p>\u624b\u52a8\u786e\u8ba4 (Manual Acknowledgement): \u8fd9\u662f\u4fdd\u8bc1\u6d88\u606f\u53ef\u9760\u6027\u7684\u5173\u952e\u3002 \u5728\u624b\u52a8\u6a21\u5f0f\u4e0b\uff0cRabbitMQ \u4f1a\u7b49\u5f85\u6d88\u8d39\u8005\u660e\u786e\u544a\u77e5\u6d88\u606f\u5df2\u7ecf\u88ab\u6210\u529f\u5904\u7406\u3002 \u6d88\u8d39\u8005\u5728\u5b8c\u6210\u4e1a\u52a1\u903b\u8f91\uff08\u4f8b\u5982\uff0c\u5c06\u6570\u636e\u6210\u529f\u5199\u5165\u6570\u636e\u5e93\uff09\u540e\uff0c\u4f1a\u5411 RabbitMQ \u53d1\u9001\u4e00\u4e2a ACK\uff08\u786e\u8ba4\uff09\u56de\u6267\u3002RabbitMQ \u6536\u5230 ACK \u540e\uff0c\u624d\u4f1a\u5c06\u8be5\u6d88\u606f\u4ece\u961f\u5217\u4e2d\u5220\u9664\u3002</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E5%A6%82%E6%9E%9C%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B4%A9%E6%BA%83%E7%AD%89%E6%83%85%E5%86%B5%E5%AF%BC%E8%87%B4%E6%B6%88%E8%B4%B9%E8%80%85%E6%97%A0%E6%B3%95%E6%AD%A3%E5%B8%B8%E6%B6%88%E8%B4%B9%E6%B6%88%E6%81%AF%EF%BC%8Crabbitmq%E4%BC%9A%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86/#_1","title":"\u6d88\u606f\u91cd\u6295\u9012","text":"<p>\u5982\u679c\u6d88\u8d39\u8005\u5728\u5904\u7406\u6d88\u606f\u8fc7\u7a0b\u4e2d\u53d1\u751f\u5d29\u6e83\uff08\u4f8b\u5982\u6570\u636e\u5e93\u8fde\u63a5\u4e2d\u65ad\uff09\uff0c\u6216\u8005\u7531\u4e8e\u4e1a\u52a1\u903b\u8f91\u9519\u8bef\u800c\u65e0\u6cd5\u6210\u529f\u5904\u7406\u6d88\u606f\uff0c\u5b83\u5c06\u4e0d\u4f1a\u53d1\u9001 ACK\u3002 \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0cRabbitMQ \u7684\u5904\u7406\u65b9\u5f0f\u5982\u4e0b\uff1a</p> <ul> <li>\u8fde\u63a5\u65ad\u5f00\uff1a \u5f53\u6d88\u8d39\u8005\u4e0e RabbitMQ \u7684\u8fde\u63a5\u56e0\u5d29\u6e83\u800c\u65ad\u5f00\u65f6\uff0cRabbitMQ \u4f1a\u5c06\u6240\u6709\u672a\u88ab\u786e\u8ba4\u7684\u6d88\u606f\u91cd\u65b0\u653e\u56de\u961f\u5217\u3002</li> <li>\u91cd\u65b0\u6295\u9012\u7ed9\u5176\u4ed6\u6d88\u8d39\u8005\uff1a \u5982\u679c\u6709\u5176\u4ed6\u5065\u5eb7\u7684\u6d88\u8d39\u8005\u8ba2\u9605\u4e86\u540c\u4e00\u4e2a\u961f\u5217\uff0cRabbitMQ \u4f1a\u7acb\u5373\u5c06\u8fd9\u6761\u6d88\u606f\u91cd\u65b0\u6295\u9012\u7ed9\u5176\u4ed6\u6d88\u8d39\u8005\u3002</li> <li>\u6295\u9012\u7ed9\u540c\u4e00\u6d88\u8d39\u8005\uff1a \u5982\u679c\u6ca1\u6709\u5176\u4ed6\u6d88\u8d39\u8005\uff0c\u5f53\u5d29\u6e83\u7684\u6d88\u8d39\u8005\u6062\u590d\u5e76\u91cd\u65b0\u8fde\u63a5\u540e\uff0cRabbitMQ \u4f1a\u5c06\u6d88\u606f\u518d\u6b21\u6295\u9012\u7ed9\u5b83\u3002</li> </ul> <p>\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0cRabbitMQ \u4fdd\u8bc1\u4e86\u201c\u81f3\u5c11\u4e00\u6b21\u201d\u7684\u6d88\u606f\u4ea4\u4ed8\u3002 \u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u4e5f\u610f\u5473\u7740\u6d88\u8d39\u8005\u9700\u8981\u5177\u5907\u5904\u7406\u91cd\u590d\u6d88\u606f\u7684\u80fd\u529b\uff08\u5e42\u7b49\u6027\uff09\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E5%A6%82%E6%9E%9C%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B4%A9%E6%BA%83%E7%AD%89%E6%83%85%E5%86%B5%E5%AF%BC%E8%87%B4%E6%B6%88%E8%B4%B9%E8%80%85%E6%97%A0%E6%B3%95%E6%AD%A3%E5%B8%B8%E6%B6%88%E8%B4%B9%E6%B6%88%E6%81%AF%EF%BC%8Crabbitmq%E4%BC%9A%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86/#nack-reject","title":"\u5426\u5b9a\u786e\u8ba4 (NACK) \u4e0e\u62d2\u7edd (Reject)","text":"<p>\u6d88\u8d39\u8005\u4e5f\u53ef\u4ee5\u4e3b\u52a8\u544a\u77e5 RabbitMQ \u6d88\u606f\u5904\u7406\u5931\u8d25\uff0c\u8fd9\u901a\u8fc7 <code>basic.nack</code> \u6216 <code>basic.reject</code> \u65b9\u6cd5\u5b9e\u73b0\u3002 \u8fd9\u4e24\u4e2a\u65b9\u6cd5\u90fd\u53ef\u4ee5\u9009\u62e9\u662f\u5426\u5c06\u6d88\u606f\u91cd\u65b0\u5165\u961f\u3002</p> <ul> <li>\u5982\u679c\u8bbe\u7f6e <code>requeue</code> \u4e3a <code>true</code>\uff0c\u6d88\u606f\u4f1a\u88ab\u91cd\u65b0\u653e\u56de\u961f\u5217\u7b49\u5f85\u4e0b\u4e00\u6b21\u6295\u9012\u3002</li> <li>\u5982\u679c\u8bbe\u7f6e\u4e3a <code>false</code>\uff0c\u6d88\u606f\u5c06\u4e0d\u4f1a\u88ab\u91cd\u65b0\u6295\u9012\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E5%A6%82%E6%9E%9C%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B4%A9%E6%BA%83%E7%AD%89%E6%83%85%E5%86%B5%E5%AF%BC%E8%87%B4%E6%B6%88%E8%B4%B9%E8%80%85%E6%97%A0%E6%B3%95%E6%AD%A3%E5%B8%B8%E6%B6%88%E8%B4%B9%E6%B6%88%E6%81%AF%EF%BC%8Crabbitmq%E4%BC%9A%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86/#dead-letter-exchange","title":"\u6b7b\u4fe1\u4ea4\u6362\u673a (Dead-Letter Exchange)","text":"<p>\u5f53\u6d88\u606f\u56e0\u4e3a\u67d0\u4e9b\u539f\u56e0\u6301\u7eed\u5904\u7406\u5931\u8d25\uff0c\u4f8b\u5982\u6d88\u606f\u683c\u5f0f\u9519\u8bef\u6216\u4e1a\u52a1\u903b\u8f91\u4e0a\u7684\u95ee\u9898\u5bfc\u81f4\u6d88\u8d39\u8005\u53cd\u590d\u5d29\u6e83\uff0c\u65e0\u9650\u5730\u91cd\u6295\u9012\u4f1a\u7ed9\u7cfb\u7edf\u5e26\u6765\u538b\u529b\u3002 \u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0cRabbitMQ \u63d0\u4f9b\u4e86\u6b7b\u4fe1\u4ea4\u6362\u673a\uff08DLX\uff09\u3002</p> <p>\u6d88\u606f\u8fdb\u5165\u6b7b\u4fe1\u4ea4\u6362\u673a\u7684\u51e0\u79cd\u60c5\u51b5\u5305\u62ec\uff1a</p> <ul> <li>\u6d88\u606f\u88ab\u6d88\u8d39\u8005\u4f7f\u7528 <code>basic.reject</code> \u6216 <code>basic.nack</code> \u5426\u5b9a\uff0c\u5e76\u4e14 <code>requeue</code> \u53c2\u6570\u88ab\u8bbe\u7f6e\u4e3a <code>false</code>\u3002</li> <li>\u6d88\u606f\u5728\u961f\u5217\u4e2d\u7684\u5b58\u6d3b\u65f6\u95f4\u8d85\u8fc7\u4e86\u8bbe\u7f6e\u7684 TTL\uff08Time-To-Live\uff09\u3002</li> <li>\u961f\u5217\u8fbe\u5230\u4e86\u6700\u5927\u957f\u5ea6\u9650\u5236\u3002</li> </ul> <p>\u901a\u8fc7\u4e3a\u4e1a\u52a1\u961f\u5217\u914d\u7f6e\u6b7b\u4fe1\u4ea4\u6362\u673a\uff0c\u90a3\u4e9b\u65e0\u6cd5\u88ab\u6210\u529f\u5904\u7406\u7684\u6d88\u606f\u4f1a\u88ab\u8def\u7531\u5230\u4e00\u4e2a\u4e13\u95e8\u7684\u201c\u6b7b\u4fe1\u961f\u5217\u201d\u4e2d\u3002 \u4e4b\u540e\uff0c\u5f00\u53d1\u4eba\u5458\u53ef\u4ee5\u5bf9\u6b7b\u4fe1\u961f\u5217\u4e2d\u7684\u6d88\u606f\u8fdb\u884c\u5206\u6790\u3001\u4fee\u590d\u548c\u91cd\u65b0\u5904\u7406\uff0c\u4ece\u800c\u907f\u514d\u4e86\u95ee\u9898\u6d88\u606f\u5bf9\u4e3b\u6d41\u7a0b\u7684\u5f71\u54cd\u3002</p> <p>\u603b\u7ed3\u6765\u8bf4\uff0c\u9762\u5bf9\u6570\u636e\u5e93\u5d29\u6e83\u7b49\u5bfc\u81f4\u7684\u6d88\u8d39\u8005\u6545\u969c\uff0cRabbitMQ \u7684\u5904\u7406\u6d41\u7a0b\u662f\uff1a</p> <ol> <li>\u7531\u4e8e\u6d88\u8d39\u8005\u5728\u5d29\u6e83\u524d\u672a\u80fd\u53d1\u9001 ACK\uff0c\u672a\u88ab\u786e\u8ba4\u7684\u6d88\u606f\u4f1a\u4fdd\u7559\u5728 RabbitMQ \u7684\u961f\u5217\u4e2d\u3002</li> <li>RabbitMQ \u68c0\u6d4b\u5230\u6d88\u8d39\u8005\u8fde\u63a5\u4e2d\u65ad\u540e\uff0c\u4f1a\u5c06\u8fd9\u4e9b\u672a\u786e\u8ba4\u7684\u6d88\u606f\u91cd\u65b0\u53d8\u4e3a\u53ef\u6295\u9012\u72b6\u6001\u3002</li> <li>\u5982\u679c\u5b58\u5728\u5176\u4ed6\u53ef\u7528\u7684\u6d88\u8d39\u8005\uff0c\u6d88\u606f\u5c06\u88ab\u91cd\u65b0\u6295\u9012\u3002</li> <li>\u5982\u679c\u6d88\u606f\u6301\u7eed\u5904\u7406\u5931\u8d25\uff0c\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u6b7b\u4fe1\u4ea4\u6362\u673a\uff0c\u5c06\u8fd9\u4e9b\u201c\u95ee\u9898\u6d88\u606f\u201d\u8f6c\u79fb\u5230\u6b7b\u4fe1\u961f\u5217\u4e2d\u8fdb\u884c\u540e\u7eed\u5904\u7406\uff0c\u907f\u514d\u5bf9\u7cfb\u7edf\u9020\u6210\u6301\u7eed\u51b2\u51fb\u3002</li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%88%86%E5%B8%83%E5%BC%8F/%E9%9B%AA%E8%8A%B1%E7%AE%97%E6%B3%95%E4%BB%8B%E7%BB%8D/","title":"\u96ea\u82b1\u7b97\u6cd5\u4ecb\u7ecd","text":"<p>\u96ea\u82b1\u7b97\u6cd5\uff08Snowflake Algorithm\uff09\u662fTwitter\u5f00\u6e90\u7684\u5206\u5e03\u5f0fID\u751f\u6210\u7b97\u6cd5\uff0c\u5176\u76ee\u7684\u662f\u5728\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\u751f\u6210\u5168\u5c40\u552f\u4e00\u3001\u8d8b\u52bf\u9012\u589e\u768464\u4f4d\u6574\u6570ID\u3002\u5b83\u89e3\u51b3\u4e86\u4f20\u7edf\u6570\u636e\u5e93\u81ea\u589eID\u5728\u5206\u5e03\u5f0f\u73af\u5883\u4e0b\u96be\u4ee5\u6269\u5c55\u548c\u7ba1\u7406\u7684\u95ee\u9898\uff0c\u4e5f\u907f\u514d\u4e86UUID\u8fc7\u957f\u3001\u65e0\u5e8f\u3001\u5360\u7528\u7a7a\u95f4\u5927\u7b49\u7f3a\u70b9\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%88%86%E5%B8%83%E5%BC%8F/%E9%9B%AA%E8%8A%B1%E7%AE%97%E6%B3%95%E4%BB%8B%E7%BB%8D/#_1","title":"\u80cc\u666f","text":"<p>\u5728\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\uff0c\u751f\u6210\u552f\u4e00ID\u662f\u4e00\u4e2a\u5e38\u89c1\u7684\u6311\u6218\u3002 *   \u6570\u636e\u5e93\u81ea\u589eID\uff1a\u7b80\u5355\u6613\u7528\uff0c\u4f46\u96be\u4ee5\u5728\u591a\u4e2a\u6570\u636e\u5e93\u5b9e\u4f8b\u4e4b\u95f4\u4fdd\u6301\u552f\u4e00\u6027\uff0c\u6269\u5c55\u6027\u5dee\u3002 *   UUID (GUID)\uff1a\u5168\u5c40\u552f\u4e00\uff0c\u4f46\u957f\u5ea6\u8fc7\u957f\uff08128\u4f4d\uff09\uff0c\u65e0\u5e8f\uff08\u5bfc\u81f4\u6570\u636e\u5e93\u7d22\u5f15\u6548\u7387\u4f4e\u4e0b\uff09\uff0c\u4e0d\u6613\u8bfb\u3002 *   \u4e2d\u5fc3\u5316ID\u670d\u52a1\uff1a\u53ef\u4ee5\u4fdd\u8bc1\u552f\u4e00\u6027\uff0c\u4f46\u53ef\u80fd\u6210\u4e3a\u5355\u70b9\u6545\u969c\u548c\u6027\u80fd\u74f6\u9888\u3002</p> <p>\u96ea\u82b1\u7b97\u6cd5\u65e8\u5728\u63d0\u4f9b\u4e00\u79cd\u53bb\u4e2d\u5fc3\u5316\u3001\u9ad8\u6027\u80fd\u3001\u9ad8\u53ef\u7528\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u751f\u6210\u5177\u6709\u4ee5\u4e0b\u7279\u6027\u7684ID\uff1a *   \u5168\u5c40\u552f\u4e00\uff1a\u5728\u6574\u4e2a\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\u90fd\u4e0d\u4f1a\u91cd\u590d\u3002 *   \u8d8b\u52bf\u9012\u589e\uff1a\u867d\u7136\u4e0d\u662f\u4e25\u683c\u7684\u5355\u8c03\u9012\u589e\uff0c\u4f46\u603b\u4f53\u4e0a\u662f\u9012\u589e\u7684\uff0c\u6709\u5229\u4e8e\u6570\u636e\u5e93\u7d22\u5f15\u548c\u5b58\u50a8\u3002 *   \u9ad8\u6027\u80fd\uff1aID\u5728\u672c\u5730\u751f\u6210\uff0c\u4e0d\u4f9d\u8d56\u7f51\u7edc\u901a\u4fe1\uff0c\u751f\u6210\u901f\u5ea6\u6781\u5feb\u3002 *   \u4e0d\u4f9d\u8d56\u6570\u636e\u5e93\uff1a\u907f\u514d\u4e86\u6570\u636e\u5e93\u7684\u6027\u80fd\u74f6\u9888\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%88%86%E5%B8%83%E5%BC%8F/%E9%9B%AA%E8%8A%B1%E7%AE%97%E6%B3%95%E4%BB%8B%E7%BB%8D/#id","title":"ID\u7ed3\u6784","text":"<p>\u96ea\u82b1\u7b97\u6cd5\u751f\u6210\u7684ID\u662f\u4e00\u4e2a64\u4f4d\u7684Long\u578b\u6574\u6570\uff0c\u5176\u7ed3\u6784\u88ab\u5de7\u5999\u5730\u5212\u5206\u4e3a\u51e0\u4e2a\u90e8\u5206\uff1a</p> <pre><code>1 bit        41 bits           10 bits           12 bits\n+-----+---------------------+-----------------+--------------+\n| 0   |   \u65f6\u95f4\u6233 (\u6beb\u79d2)      |   \u5de5\u4f5c\u8282\u70b9ID     |    \u5e8f\u5217\u53f7     |\n+-----+---------------------+-----------------+--------------+\n</code></pre> <ul> <li> <p>1\u4f4d\uff1a\u7b26\u53f7\u4f4d (Sign Bit)</p> <ul> <li>\u59cb\u7ec8\u4e3a0\u3002\u7531\u4e8eID\u662f\u6b63\u6570\uff0c\u6700\u9ad8\u4f4d\u4e0d\u9700\u8981\u8868\u793a\u6b63\u8d1f\uff0c\u6240\u4ee5\u8fd9\u4e00\u4f4d\u662f\u9884\u7559\u7684\uff0c\u6216\u8005\u8bf4\u4e0d\u4f7f\u7528\u3002</li> </ul> </li> <li> <p>41\u4f4d\uff1a\u65f6\u95f4\u6233 (Timestamp)</p> <ul> <li>\u8868\u793aID\u751f\u6210\u65f6\u7684\u65f6\u95f4\u6233\uff0c\u7cbe\u786e\u5230\u6beb\u79d2\u3002</li> <li>\u8fd9\u4e2a\u65f6\u95f4\u6233\u5e76\u975e\u5f53\u524d\u7cbe\u786e\u65f6\u95f4\uff0c\u800c\u662f \u5f53\u524d\u65f6\u95f4\u51cf\u53bb\u4e00\u4e2a\u9884\u8bbe\u7684\u201c\u8d77\u59cb\u65f6\u95f4\u201d\uff08Epoch\uff09\u3002\u8fd9\u4e2a\u8d77\u59cb\u65f6\u95f4\u53ef\u4ee5\u81ea\u5df1\u5b9a\u4e49\uff0c\u4f8b\u5982 <code>2020-01-01 00:00:00</code>\u3002</li> <li>41\u4f4d\u7684\u65f6\u95f4\u6233\u53ef\u4ee5\u8868\u793a <code>2^41 - 1</code> \u6beb\u79d2\uff0c\u5927\u7ea6\u662f <code>69\u5e74</code>\u3002\u8fd9\u610f\u5473\u7740\u4ece\u5b9a\u4e49\u7684\u8d77\u59cb\u65f6\u95f4\u5f00\u59cb\uff0cID\u751f\u6210\u5668\u53ef\u4ee5\u4e0d\u95f4\u65ad\u5730\u5de5\u4f5c69\u5e74\u800c\u4e0d\u4f1a\u51fa\u73b0\u65f6\u95f4\u6233\u6ea2\u51fa\u3002</li> <li>\u8fd9\u4e00\u90e8\u5206\u662fID\u80fd\u591f\u8d8b\u52bf\u9012\u589e\u7684\u6838\u5fc3\u3002</li> </ul> </li> <li> <p>10\u4f4d\uff1a\u5de5\u4f5c\u8282\u70b9ID (Worker ID)</p> <ul> <li>\u7528\u4e8e\u6807\u8bc6\u751f\u6210ID\u7684\u673a\u5668\u6216\u8fdb\u7a0b\u3002</li> <li>10\u4f4d\u53ef\u4ee5\u8868\u793a <code>2^10 - 1 = 1023</code> \u4e2a\u5de5\u4f5c\u8282\u70b9\u3002\u8fd9\u610f\u5473\u7740\u4f60\u53ef\u4ee5\u90e8\u7f72\u6700\u591a1024\u53f0\u72ec\u7acb\u7684\u673a\u5668\uff08\u6216\u8fdb\u7a0b\uff09\u6765\u751f\u6210ID\uff0c\u6bcf\u53f0\u673a\u5668\u90fd\u6709\u4e00\u4e2a\u552f\u4e00\u7684ID\u3002</li> <li>\u8fd9\u4e2aID\u901a\u5e38\u9700\u8981\u9884\u5148\u914d\u7f6e\u7ed9\u6bcf\u4e2a\u673a\u5668\uff0c\u6216\u8005\u901a\u8fc7\u67d0\u79cd\u65b9\u5f0f\uff08\u5982Zookeeper\uff09\u52a8\u6001\u5206\u914d\u3002</li> <li>\u8fd9\u4e00\u90e8\u5206\u662fID\u5728\u5206\u5e03\u5f0f\u73af\u5883\u4e0b\u80fd\u4fdd\u6301\u552f\u4e00\u6027\u7684\u5173\u952e\u3002</li> </ul> </li> <li> <p>12\u4f4d\uff1a\u5e8f\u5217\u53f7 (Sequence Number)</p> <ul> <li>\u7528\u4e8e\u8868\u793a\u5728\u540c\u4e00\u4e2a\u6beb\u79d2\u5185\uff0c\u540c\u4e00\u4e2a\u5de5\u4f5c\u8282\u70b9\u4e0a\u751f\u6210\u7684ID\u7684\u5e8f\u5217\u53f7\u3002</li> <li>12\u4f4d\u53ef\u4ee5\u8868\u793a <code>2^12 - 1 = 4095</code> \u4e2a\u5e8f\u5217\u53f7\u3002\u8fd9\u610f\u5473\u7740\u5728\u540c\u4e00\u4e2a\u6beb\u79d2\u5185\uff0c\u4e00\u4e2a\u5de5\u4f5c\u8282\u70b9\u6700\u591a\u53ef\u4ee5\u751f\u62104096\u4e2a\u4e0d\u540c\u7684ID\u3002</li> <li>\u5982\u679c\u5728\u4e00\u4e2a\u6beb\u79d2\u5185\u751f\u6210\u7684ID\u6570\u91cf\u8d85\u8fc74096\uff0c\u5219\u4f1a\u7b49\u5f85\u4e0b\u4e00\u4e2a\u6beb\u79d2\u518d\u751f\u6210\u3002</li> <li>\u8fd9\u4e00\u90e8\u5206\u4fdd\u8bc1\u4e86\u5728\u6781\u9ad8\u5e76\u53d1\u4e0b\uff0c\u540c\u4e00\u6beb\u79d2\u5185\u540c\u4e00\u673a\u5668\u4e0a\u7684ID\u4f9d\u7136\u552f\u4e00\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%88%86%E5%B8%83%E5%BC%8F/%E9%9B%AA%E8%8A%B1%E7%AE%97%E6%B3%95%E4%BB%8B%E7%BB%8D/#_2","title":"\u5de5\u4f5c\u539f\u7406","text":"<p>\u5f53\u4e00\u4e2a\u670d\u52a1\u9700\u8981\u751f\u6210\u4e00\u4e2aID\u65f6\uff0c\u5b83\u4f1a\u6267\u884c\u4ee5\u4e0b\u6b65\u9aa4\uff1a</p> <ol> <li>\u83b7\u53d6\u5f53\u524d\u65f6\u95f4\u6233\uff1a\u83b7\u53d6\u5f53\u524d\u7684\u6beb\u79d2\u7ea7\u65f6\u95f4\u6233 <code>current_timestamp</code>\u3002</li> <li>\u5904\u7406\u65f6\u949f\u56de\u62e8\uff1a<ul> <li>\u5982\u679c <code>current_timestamp</code> \u5c0f\u4e8e\u4e0a\u6b21\u751f\u6210ID\u7684\u65f6\u95f4\u6233 <code>last_timestamp</code>\uff0c\u8bf4\u660e\u7cfb\u7edf\u65f6\u949f\u56de\u62e8\u4e86\uff0c\u8fd9\u4f1a\u5bfc\u81f4ID\u91cd\u590d\u3002\u901a\u5e38\u4f1a\u629b\u51fa\u4e00\u4e2a\u5f02\u5e38\uff0c\u6216\u8005\u7b49\u5f85\u65f6\u949f\u8ffd\u4e0a\u3002</li> <li>\u5982\u679c <code>current_timestamp</code> \u7b49\u4e8e <code>last_timestamp</code>\uff1a<ul> <li>\u5e8f\u5217\u53f7 <code>sequence</code> \u52a01\u3002</li> <li>\u5982\u679c <code>sequence</code> \u8d85\u8fc7\u4e8612\u4f4d\u6700\u5927\u503c\uff084095\uff09\uff0c\u8bf4\u660e\u5f53\u524d\u6beb\u79d2\u5185ID\u5df2\u7528\u5c3d\uff0c\u9700\u8981\u7b49\u5f85\u76f4\u5230\u4e0b\u4e00\u4e2a\u6beb\u79d2\u3002</li> </ul> </li> <li>\u5982\u679c <code>current_timestamp</code> \u5927\u4e8e <code>last_timestamp</code>\uff1a<ul> <li>\u91cd\u7f6e\u5e8f\u5217\u53f7 <code>sequence</code> \u4e3a0\u3002</li> <li>\u66f4\u65b0 <code>last_timestamp</code> \u4e3a <code>current_timestamp</code>\u3002</li> </ul> </li> </ul> </li> <li>\u7ec4\u5408ID\uff1a<ul> <li>\u5c06 <code>(current_timestamp - epoch)</code> \u5de6\u79fb <code>(worker_id_bits + sequence_bits)</code> \u4f4d\u3002</li> <li>\u5c06 <code>worker_id</code> \u5de6\u79fb <code>sequence_bits</code> \u4f4d\u3002</li> <li>\u5c06 <code>sequence</code> \u76f4\u63a5\u7ec4\u5408\u3002</li> <li>\u6700\u7ec8\u901a\u8fc7\u4f4d\u6216 (OR) \u64cd\u4f5c\u5c06\u4e09\u90e8\u5206\u5408\u5e76\u6210\u4e00\u4e2a64\u4f4d\u7684Long\u578bID\u3002</li> </ul> </li> </ol> <p>\u4f4d\u79fb\u8ba1\u7b97\u793a\u4f8b\uff1a \u5982\u679c <code>worker_id_bits</code> \u662f 10\uff0c<code>sequence_bits</code> \u662f 12\uff1a *   \u65f6\u95f4\u6233\u90e8\u5206\u9700\u8981\u5de6\u79fb <code>10 + 12 = 22</code> \u4f4d\u3002 *   \u5de5\u4f5c\u8282\u70b9ID\u90e8\u5206\u9700\u8981\u5de6\u79fb <code>12</code> \u4f4d\u3002</p> <p><code>ID = (timestamp_diff &lt;&lt; 22) | (worker_id &lt;&lt; 12) | sequence</code></p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%88%86%E5%B8%83%E5%BC%8F/%E9%9B%AA%E8%8A%B1%E7%AE%97%E6%B3%95%E4%BB%8B%E7%BB%8D/#_3","title":"\u4f18\u7f3a\u70b9","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E5%88%86%E5%B8%83%E5%BC%8F/%E9%9B%AA%E8%8A%B1%E7%AE%97%E6%B3%95%E4%BB%8B%E7%BB%8D/#_4","title":"\u4f18\u70b9","text":"<ol> <li>\u5168\u5c40\u552f\u4e00\u6027\uff1a\u901a\u8fc7\u65f6\u95f4\u6233\u3001\u5de5\u4f5c\u8282\u70b9ID\u548c\u5e8f\u5217\u53f7\u7684\u7ec4\u5408\uff0c\u4fdd\u8bc1\u4e86\u5728\u5206\u5e03\u5f0f\u73af\u5883\u4e0b\u7684ID\u552f\u4e00\u6027\u3002</li> <li>\u9ad8\u6027\u80fd\u9ad8\u53ef\u7528\uff1aID\u5728\u672c\u5730\u751f\u6210\uff0c\u65e0\u9700\u8fdb\u884c\u7f51\u7edcIO\u548c\u6570\u636e\u5e93\u64cd\u4f5c\uff0c\u751f\u6210\u901f\u5ea6\u6781\u5feb\uff0c\u4e14\u4e0d\u4f9d\u8d56\u5916\u90e8\u670d\u52a1\uff0c\u51cf\u5c11\u4e86\u5355\u70b9\u6545\u969c\u7684\u98ce\u9669\u3002</li> <li>\u8d8b\u52bf\u9012\u589e\uff1a\u7531\u4e8e\u9ad841\u4f4d\u662f\u65f6\u95f4\u6233\uff0c\u751f\u6210\u7684ID\u662f\u8d8b\u52bf\u9012\u589e\u7684\u3002\u8fd9\u5bf9\u4e8e\u6570\u636e\u5e93\u7d22\u5f15\uff08\u5982MySQL\u7684InnoDB\uff09\u975e\u5e38\u53cb\u597d\uff0c\u53ef\u4ee5\u51cf\u5c11\u9875\u5206\u88c2\u548c\u788e\u7247\uff0c\u63d0\u9ad8\u5199\u5165\u6027\u80fd\u3002</li> <li>\u4e0d\u66b4\u9732\u4e1a\u52a1\u4fe1\u606f\uff1aID\u4e0d\u5305\u542b\u4efb\u4f55\u4e1a\u52a1\u542b\u4e49\uff0c\u5177\u6709\u4e00\u5b9a\u7684\u5b89\u5168\u6027\u3002</li> <li>\u5360\u7528\u7a7a\u95f4\u5c0f\uff1a64\u4f4dLong\u578b\uff0c\u6bd4UUID\uff08128\u4f4d\uff09\u5c0f\u4e00\u534a\uff0c\u5b58\u50a8\u6548\u7387\u66f4\u9ad8\u3002</li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%88%86%E5%B8%83%E5%BC%8F/%E9%9B%AA%E8%8A%B1%E7%AE%97%E6%B3%95%E4%BB%8B%E7%BB%8D/#_5","title":"\u7f3a\u70b9","text":"<ol> <li>\u4f9d\u8d56\u7cfb\u7edf\u65f6\u949f\uff1a<ul> <li>\u65f6\u949f\u56de\u62e8\u95ee\u9898\uff1a\u5982\u679c\u670d\u52a1\u5668\u7684\u65f6\u949f\u53d1\u751f\u56de\u62e8\uff08\u4f8b\u5982\uff0cNTP\u540c\u6b65\u5bfc\u81f4\u65f6\u949f\u8c03\u6574\u5230\u8fc7\u53bb\uff09\uff0c\u53ef\u80fd\u4f1a\u751f\u6210\u91cd\u590d\u7684ID\u3002\u8fd9\u662f\u96ea\u82b1\u7b97\u6cd5\u6700\u4e3b\u8981\u7684\u6311\u6218\u3002</li> <li>\u89e3\u51b3\u65b9\u6848\uff1a<ul> <li>\u68c0\u6d4b\u5230\u65f6\u949f\u56de\u62e8\u65f6\uff0c\u629b\u51fa\u5f02\u5e38\uff0c\u6216\u8005\u6682\u505c\u670d\u52a1\uff0c\u7b49\u5f85\u65f6\u949f\u8ffd\u4e0a\u3002</li> <li>\u8bbe\u7f6e\u4e00\u4e2a\u201c\u7b49\u5f85\u201d\u7b56\u7565\uff1a\u5982\u679c\u65f6\u949f\u56de\u62e8\u5728\u4e00\u4e2a\u53ef\u63a5\u53d7\u7684\u8303\u56f4\u5185\uff08\u5982\u51e0\u767e\u6beb\u79d2\uff09\uff0c\u53ef\u4ee5\u7b49\u5f85\u5230\u65f6\u949f\u8fbe\u5230\u4e0a\u6b21\u751f\u6210ID\u7684\u65f6\u95f4\uff0c\u6216\u8005\u7b49\u5f85\u5230\u4e0b\u4e00\u6beb\u79d2\u3002</li> <li>\u4e25\u683cNTP\u540c\u6b65\uff0c\u5e76\u76d1\u63a7\u7cfb\u7edf\u65f6\u949f\u3002</li> <li>\u6709\u4e9b\u6539\u8fdb\u7b97\u6cd5\uff08\u5982\u767e\u5ea6UidGenerator\uff09\u4f1a\u4f7f\u7528\u4e0e\u7cfb\u7edf\u65f6\u95f4\u65e0\u5173\u7684\u201c\u81ea\u5b9a\u4e49\u65f6\u95f4\u201d\u6765\u7f13\u89e3\u6b64\u95ee\u9898\u3002</li> </ul> </li> </ul> </li> <li>\u5de5\u4f5c\u8282\u70b9ID\uff08Worker ID\uff09\u7ba1\u7406\uff1a<ul> <li>\u9700\u8981\u4e3a\u6bcf\u4e2aID\u751f\u6210\u5668\u5b9e\u4f8b\u5206\u914d\u4e00\u4e2a\u552f\u4e00\u7684<code>Worker ID</code>\u3002</li> <li>\u5728\u5f39\u6027\u4f38\u7f29\u3001\u5bb9\u5668\u5316\u90e8\u7f72\u7684\u73af\u5883\u4e2d\uff0c\u52a8\u6001\u5206\u914d\u548c\u7ba1\u7406<code>Worker ID</code>\u662f\u4e00\u4e2a\u6311\u6218\u3002</li> <li>\u89e3\u51b3\u65b9\u6848\uff1a<ul> <li>\u624b\u52a8\u914d\u7f6e\uff1a\u7b80\u5355\u4f46\u7ef4\u62a4\u6210\u672c\u9ad8\u3002</li> <li>\u5229\u7528Zookeeper/Eureka\u7b49\u6ce8\u518c\u4e2d\u5fc3\uff1a\u5728\u670d\u52a1\u542f\u52a8\u65f6\u5411\u6ce8\u518c\u4e2d\u5fc3\u6ce8\u518c\u5e76\u83b7\u53d6<code>Worker ID</code>\u3002</li> <li>\u901a\u8fc7\u673a\u5668IP\u5730\u5740/\u7aef\u53e3\u53f7\u7b49\u4fe1\u606f\u751f\u6210\u3002</li> </ul> </li> </ul> </li> <li>\u56fa\u5b9a\u4f4d\u6570\u7684\u9650\u5236\uff1a41\u4f4d\u65f6\u95f4\u6233\u300110\u4f4d\u5de5\u4f5c\u8282\u70b9ID\u300112\u4f4d\u5e8f\u5217\u53f7\u7684\u5212\u5206\u662f\u56fa\u5b9a\u7684\uff0c\u5982\u679c\u672a\u6765\u4e1a\u52a1\u9700\u6c42\uff08\u5982\u9700\u8981\u66f4\u591a\u5de5\u4f5c\u8282\u70b9\u6216\u66f4\u957f\u65f6\u95f4\u7684\u670d\u52a1\uff09\u8d85\u51fa\u8fd9\u4e9b\u9650\u5236\uff0c\u5219\u9700\u8981\u4fee\u6539\u7b97\u6cd5\u6216\u8c03\u6574\u4f4d\u6570\u5206\u914d\u3002</li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%88%86%E5%B8%83%E5%BC%8F/%E9%9B%AA%E8%8A%B1%E7%AE%97%E6%B3%95%E4%BB%8B%E7%BB%8D/#_6","title":"\u4f18\u5316","text":"<ul> <li>Epoch\u7684\u9009\u53d6\uff1a\u9009\u62e9\u4e00\u4e2a\u5408\u9002\u7684\u8d77\u59cb\u65f6\u95f4\uff08Epoch\uff09\uff0c\u53ef\u4ee5\u6700\u5927\u531641\u4f4d\u65f6\u95f4\u6233\u7684\u4f7f\u7528\u5bff\u547d\u3002\u901a\u5e38\u9009\u4e00\u4e2a\u8ddd\u79bb\u5f53\u524d\u65f6\u95f4\u8f83\u8fd1\u7684\u65e5\u671f\u3002</li> <li>Worker ID\u7684\u5206\u914d\uff1a<ul> <li>\u5bf9\u4e8e\u5c0f\u89c4\u6a21\u90e8\u7f72\uff0c\u53ef\u4ee5\u624b\u52a8\u914d\u7f6e\u6216\u4ece\u914d\u7f6e\u6587\u4ef6\u8bfb\u53d6\u3002</li> <li>\u5bf9\u4e8e\u5927\u89c4\u6a21\u90e8\u7f72\u6216\u5bb9\u5668\u5316\u73af\u5883\uff0c\u53ef\u4ee5\u96c6\u6210ZooKeeper\u3001Etcd\u3001Consul\u7b49\u670d\u52a1\u6ce8\u518c\u4e0e\u53d1\u73b0\u5de5\u5177\uff0c\u5728\u5e94\u7528\u542f\u52a8\u65f6\u81ea\u52a8\u6ce8\u518c\u5e76\u83b7\u53d6\u552f\u4e00\u7684<code>Worker ID</code>\u3002</li> </ul> </li> <li>NTP\u670d\u52a1\uff1a\u786e\u4fdd\u6240\u6709\u673a\u5668\u7684\u65f6\u949f\u90fd\u901a\u8fc7NTP\u670d\u52a1\u8fdb\u884c\u540c\u6b65\uff0c\u4ee5\u51cf\u5c11\u65f6\u949f\u56de\u62e8\u7684\u53ef\u80fd\u6027\u3002</li> <li>\u9ad8\u53ef\u7528\u6027\uff1a\u5373\u4f7f\u5355\u4e2a<code>Worker</code>\u5b95\u673a\uff0c\u5176\u4ed6<code>Worker</code>\u4ecd\u80fd\u7ee7\u7eed\u751f\u6210ID\uff0c\u5177\u6709\u826f\u597d\u7684\u5206\u5e03\u5f0f\u5bb9\u9519\u6027\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/JWT%E4%BB%8B%E7%BB%8D/","title":"JWT\u4ecb\u7ecd","text":"<p>JWT (JSON Web Token) \u662f\u76ee\u524d\u6700\u6d41\u884c\u7684\u8de8\u57df\u8ba4\u8bc1\u89e3\u51b3\u65b9\u6848\u4e4b\u4e00\uff0c\u5b83\u662f\u4e00\u4e2a\u5f00\u653e\u6807\u51c6 (RFC 7519)\uff0c\u5b9a\u4e49\u4e86\u4e00\u79cd\u7d27\u51d1\u4e14\u81ea\u5305\u542b\u7684\u65b9\u5f0f\uff0c\u7528\u4e8e\u5728\u5404\u65b9\u4e4b\u95f4\u5b89\u5168\u5730\u4f20\u8f93\u4fe1\u606f\u3002 \u7531\u4e8e\u4fe1\u606f\u662f\u7ecf\u8fc7\u6570\u5b57\u7b7e\u540d\u7684\uff0c\u6240\u4ee5\u53ef\u4ee5\u88ab\u9a8c\u8bc1\u548c\u4fe1\u4efb\u3002</p> <p>JWT \u7684\u6838\u5fc3\u4f18\u52bf\u5728\u4e8e\u5176\u65e0\u72b6\u6001\u6027\u3002\u5728\u4f20\u7edf\u7684\u57fa\u4e8e Session \u7684\u8ba4\u8bc1\u4e2d\uff0c\u670d\u52a1\u5668\u9700\u8981\u5b58\u50a8\u7528\u6237\u7684\u4f1a\u8bdd\u4fe1\u606f\u3002 \u800c JWT \u81ea\u8eab\u5c31\u5305\u542b\u4e86\u6240\u6709\u9700\u8981\u9a8c\u8bc1\u7684\u4fe1\u606f\uff0c\u670d\u52a1\u5668\u65e0\u9700\u5728\u540e\u7aef\u4fdd\u7559\u4efb\u4f55\u7528\u6237\u72b6\u6001\uff0c\u8fd9\u6781\u5927\u5730\u51cf\u8f7b\u4e86\u670d\u52a1\u5668\u7684\u538b\u529b\uff0c\u5e76\u63d0\u9ad8\u4e86\u7cfb\u7edf\u7684\u53ef\u4f38\u7f29\u6027\u548c\u53ef\u7528\u6027\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/JWT%E4%BB%8B%E7%BB%8D/#jwt","title":"JWT \u7684\u6838\u5fc3\u7ed3\u6784","text":"<p>\u4e00\u4e2a JWT \u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u7531\u70b9 (<code>.</code>) \u5206\u9694\u7684\u957f\u5b57\u7b26\u4e32\uff0c\u8fd9\u4e2a\u5b57\u7b26\u4e32\u7531\u4e09\u90e8\u5206\u7ecf\u8fc7 Base64Url \u7f16\u7801\u540e\u8fde\u63a5\u800c\u6210\uff1a</p> <p><code>Header.Payload.Signature</code></p> <p>\u4e00\u4e2a\u5178\u578b\u7684 JWT \u5982\u4e0b\u6240\u793a\uff1a <code>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c</code></p> <p>\u4e0b\u9762\u6211\u4eec\u6765\u9010\u4e00\u89e3\u6790\u8fd9\u4e09\u4e2a\u90e8\u5206\uff1a</p> <ol> <li> <p>\u5934\u90e8 (Header)     \u5934\u90e8\u901a\u5e38\u7531\u4e24\u90e8\u5206\u7ec4\u6210\uff1a\u4ee4\u724c\u7684\u7c7b\u578b (<code>typ</code>)\uff0c\u56fa\u5b9a\u4e3a \"JWT\"\uff1b\u4ee5\u53ca\u6240\u4f7f\u7528\u7684\u7b7e\u540d\u7b97\u6cd5 (<code>alg</code>)\uff0c\u4f8b\u5982 HMAC SHA256 (HS256) \u6216 RSA (RS256)\u3002     <code>json     {       \"alg\": \"HS256\",       \"typ\": \"JWT\"     }</code>     \u8fd9\u4e2a JSON \u5bf9\u8c61\u4f1a\u7ecf\u8fc7 Base64Url \u7f16\u7801\uff0c\u6784\u6210 JWT \u7684\u7b2c\u4e00\u90e8\u5206\u3002</p> </li> <li> <p>\u8f7d\u8377 (Payload)     \u8f7d\u8377\u90e8\u5206\u5305\u542b\u4e86\u201c\u58f0\u660e (Claims)\u201d\uff0c\u8fd9\u4e9b\u662f\u5173\u4e8e\u5b9e\u4f53\uff08\u901a\u5e38\u662f\u7528\u6237\uff09\u548c\u5176\u4ed6\u9644\u52a0\u5143\u6570\u636e\u7684\u9648\u8ff0\u3002 \u58f0\u660e\u5206\u4e3a\u4e09\u79cd\u7c7b\u578b\uff1a</p> <ul> <li>\u6ce8\u518c\u58f0\u660e (Registered Claims)\uff1a\u8fd9\u662f\u4e00\u7ec4\u9884\u5b9a\u4e49\u7684\u3001\u975e\u5f3a\u5236\u4f46\u5efa\u8bae\u4f7f\u7528\u7684\u58f0\u660e\uff0c\u4ee5\u63d0\u4f9b\u4e00\u7ec4\u6709\u7528\u7684\u3001\u53ef\u4e92\u64cd\u4f5c\u7684\u58f0\u660e\u3002 \u5e38\u89c1\u7684\u6709\uff1a<ul> <li><code>iss</code> (Issuer): \u4ee4\u724c\u7684\u7b7e\u53d1\u8005\u3002</li> <li><code>sub</code> (Subject): \u4ee4\u724c\u7684\u4e3b\u9898\uff0c\u901a\u5e38\u662f\u7528\u6237\u7684\u552f\u4e00\u6807\u8bc6\u7b26\u3002</li> <li><code>aud</code> (Audience): \u4ee4\u724c\u7684\u63a5\u6536\u8005\u3002</li> <li><code>exp</code> (Expiration Time): \u4ee4\u724c\u7684\u8fc7\u671f\u65f6\u95f4\u6233\u3002</li> <li><code>iat</code> (Issued At): \u4ee4\u724c\u7684\u7b7e\u53d1\u65f6\u95f4\u3002</li> <li><code>nbf</code> (Not Before): \u5b9a\u4e49\u5728\u6b64\u65f6\u95f4\u4e4b\u524d\uff0c\u4ee4\u724c\u4e0d\u53ef\u7528\u3002</li> <li><code>jti</code> (JWT ID): \u4ee4\u724c\u7684\u552f\u4e00\u6807\u8bc6\u7b26\u3002</li> </ul> </li> <li>\u516c\u5171\u58f0\u660e (Public Claims)\uff1a\u53ef\u4ee5\u7531\u4f7f\u7528\u8005\u81ea\u7531\u5b9a\u4e49\uff0c\u4f46\u4e3a\u4e86\u907f\u514d\u51b2\u7a81\uff0c\u5e94\u8be5\u5728 IANA JSON Web Token Registry \u4e2d\u6ce8\u518c\u6216\u4f7f\u7528\u5305\u542b\u6297\u51b2\u7a81\u547d\u540d\u7a7a\u95f4\u7684 URI\u3002</li> <li>\u79c1\u6709\u58f0\u660e (Private Claims)\uff1a\u8fd9\u662f\u5728\u901a\u4fe1\u53cc\u65b9\u4e4b\u95f4\u81ea\u5b9a\u4e49\u7684\u58f0\u660e\uff0c\u7528\u4e8e\u5171\u4eab\u4fe1\u606f\u3002</li> </ul> <p>\u91cd\u8981\u63d0\u793a\uff1a\u8f7d\u8377\u90e8\u5206\u540c\u6837\u662f\u7ecf\u8fc7 Base64Url \u7f16\u7801\u7684\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u53ef\u4ee5\u88ab\u8f7b\u6613\u5730\u89e3\u7801\u548c\u8bfb\u53d6\u3002 \u56e0\u6b64\uff0c\u7edd\u5bf9\u4e0d\u80fd\u5728\u8f7d\u8377\u4e2d\u5b58\u653e\u4efb\u4f55\u654f\u611f\u4fe1\u606f\uff0c\u5982\u5bc6\u7801\u3002</p> </li> <li> <p>\u7b7e\u540d (Signature)     \u7b7e\u540d\u7684\u4f5c\u7528\u662f\u4fdd\u8bc1 JWT \u7684\u5b8c\u6574\u6027\u548c\u771f\u5b9e\u6027\uff0c\u9632\u6b62\u6570\u636e\u5728\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u88ab\u7be1\u6539\u3002 \u5b83\u7684\u751f\u6210\u8fc7\u7a0b\u5982\u4e0b\uff1a</p> <ol> <li>\u83b7\u53d6\u7ecf\u8fc7 Base64Url \u7f16\u7801\u7684\u5934\u90e8\u3002</li> <li>\u83b7\u53d6\u7ecf\u8fc7 Base64Url \u7f16\u7801\u7684\u8f7d\u8377\u3002</li> <li>\u5c06\u4e24\u8005\u7528\u70b9 (<code>.</code>) \u8fde\u63a5\u8d77\u6765\u3002</li> <li>\u4f7f\u7528\u5934\u90e8 (<code>alg</code> \u5b57\u6bb5) \u4e2d\u6307\u5b9a\u7684\u7b7e\u540d\u7b97\u6cd5\uff0c\u914d\u5408\u4e00\u4e2a\u53ea\u6709\u670d\u52a1\u5668\u77e5\u9053\u7684\u5bc6\u94a5 (secret)\uff0c\u5bf9\u8fde\u63a5\u540e\u7684\u5b57\u7b26\u4e32\u8fdb\u884c\u7b7e\u540d\u3002</li> </ol> <p>\u4f8b\u5982\uff0c\u4f7f\u7528 HS256 \u7b97\u6cd5\u7684\u7b7e\u540d\u4f2a\u4ee3\u7801\u4e3a\uff1a <code>HMACSHA256(base64UrlEncode(header) + \".\" + base64UrlEncode(payload), secret)</code></p> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/JWT%E4%BB%8B%E7%BB%8D/#jwt_1","title":"JWT \u7684\u5de5\u4f5c\u4e0e\u8ba4\u8bc1\u6d41\u7a0b","text":"<p>JWT \u4e3b\u8981\u5e94\u7528\u4e8e\u8eab\u4efd\u9a8c\u8bc1\u548c\u4fe1\u606f\u4ea4\u6362\u3002 \u5176\u5178\u578b\u7684\u8ba4\u8bc1\u6d41\u7a0b\u5982\u4e0b\uff1a</p> <ol> <li>\u7528\u6237\u767b\u5f55\uff1a\u7528\u6237\u4f7f\u7528\u5176\u51ed\u636e\uff08\u5982\u7528\u6237\u540d\u548c\u5bc6\u7801\uff09\u5411\u670d\u52a1\u5668\u53d1\u8d77\u767b\u5f55\u8bf7\u6c42\u3002</li> <li>\u4ee4\u724c\u751f\u6210\u4e0e\u5206\u53d1\uff1a\u670d\u52a1\u5668\u9a8c\u8bc1\u7528\u6237\u51ed\u636e\u3002\u5982\u679c\u6210\u529f\uff0c\u670d\u52a1\u5668\u4f1a\u521b\u5efa\u4e00\u4e2a JWT\uff0c\u5176\u4e2d\u5305\u542b\u7528\u6237\u7684\u6807\u8bc6\u548c\u5176\u4ed6\u5fc5\u8981\u4fe1\u606f\uff0c\u7136\u540e\u901a\u8fc7\u54cd\u5e94\u5c06\u5176\u53d1\u9001\u56de\u5ba2\u6237\u7aef\u3002</li> <li>\u5ba2\u6237\u7aef\u5b58\u50a8\uff1a\u5ba2\u6237\u7aef\u6536\u5230 JWT \u540e\uff0c\u901a\u5e38\u4f1a\u5c06\u5176\u5b58\u50a8\u5728\u672c\u5730\uff0c\u4f8b\u5982\u6d4f\u89c8\u5668\u7684 Local Storage\u3001Session Storage \u6216\u4e00\u4e2a\u5b89\u5168\u7684 HttpOnly Cookie \u4e2d\u3002</li> <li>\u6388\u6743\u8bf7\u6c42\uff1a\u5f53\u5ba2\u6237\u7aef\u9700\u8981\u8bbf\u95ee\u53d7\u4fdd\u62a4\u7684 API \u6216\u8d44\u6e90\u65f6\uff0c\u5b83\u4f1a\u5728\u8bf7\u6c42\u7684 <code>Authorization</code> \u5934\u4e2d\u643a\u5e26 JWT\uff0c\u901a\u5e38\u4f7f\u7528 <code>Bearer</code> \u6a21\u5f0f\u3002     <code>Authorization: Bearer &lt;token&gt;</code></li> <li>\u670d\u52a1\u5668\u9a8c\u8bc1\uff1a\u670d\u52a1\u5668\u5728\u6536\u5230\u8bf7\u6c42\u540e\uff0c\u4f1a\u4ece\u8bf7\u6c42\u5934\u4e2d\u63d0\u53d6 JWT\u3002\u63a5\u7740\uff0c\u670d\u52a1\u5668\u4f1a\u4f7f\u7528\u81ea\u5df1\u7684\u5bc6\u94a5\u6765\u9a8c\u8bc1\u4ee4\u724c\u7684\u7b7e\u540d\u3002\u5982\u679c\u7b7e\u540d\u6709\u6548\uff0c\u670d\u52a1\u5668\u5c31\u53ef\u4ee5\u4fe1\u4efb\u8be5\u4ee4\u724c\u4e2d\u7684\u4fe1\u606f\uff0c\u5e76\u6839\u636e\u5176\u4e2d\u7684\u58f0\u660e\uff08\u5982\u7528\u6237 ID\u3001\u6743\u9650\u7b49\uff09\u6765\u6388\u6743\u7528\u6237\u7684\u8bf7\u6c42\u3002</li> <li>\u54cd\u5e94\u8d44\u6e90\uff1a\u4e00\u65e6\u4ee4\u724c\u9a8c\u8bc1\u6210\u529f\uff0c\u670d\u52a1\u5668\u5c31\u4f1a\u5904\u7406\u8be5\u8bf7\u6c42\u5e76\u8fd4\u56de\u76f8\u5e94\u7684\u8d44\u6e90\u6216\u6570\u636e\u3002</li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/JWT%E4%BB%8B%E7%BB%8D/#jwt_2","title":"\u5982\u4f55\u4fdd\u8bc1 JWT \u7684\u5b89\u5168","text":"<p>JWT \u7684\u5b89\u5168\u6027\u4f9d\u8d56\u4e8e\u5176\u7b7e\u540d\u673a\u5236\u548c\u4e00\u7cfb\u5217\u5b89\u5168\u6700\u4f73\u5b9e\u8df5\u7684\u7ed3\u5408\uff1a</p> <ul> <li>\u6838\u5fc3\u5b89\u5168\u673a\u5236\uff1a\u6570\u5b57\u7b7e\u540d\uff1a\u7b7e\u540d\u786e\u4fdd\u4e86 JWT \u5728\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u6ca1\u6709\u88ab\u7be1\u6539\uff08\u6570\u636e\u5b8c\u6574\u6027\uff09\uff0c\u5e76\u4e14\u53ef\u4ee5\u9a8c\u8bc1\u5176\u7b7e\u53d1\u8005\uff08\u8ba4\u8bc1\u4e0e\u9632\u4f2a\uff09\u3002 \u653b\u51fb\u8005\u56e0\u4e3a\u6ca1\u6709\u670d\u52a1\u5668\u7684\u5bc6\u94a5\uff0c\u65e0\u6cd5\u4f2a\u9020\u51fa\u6709\u6548\u7684\u7b7e\u540d\u3002</li> <li>\u59cb\u7ec8\u4f7f\u7528 HTTPS\uff1a\u4e3a\u4e86\u9632\u6b62\u4e2d\u95f4\u4eba\u653b\u51fb\u548c\u4ee4\u724c\u7a83\u542c\uff0cJWT \u5fc5\u987b\u901a\u8fc7\u52a0\u5bc6\u7684 HTTPS \u8fde\u63a5\u8fdb\u884c\u4f20\u8f93\u3002</li> <li>\u9009\u62e9\u5f3a\u7b7e\u540d\u7b97\u6cd5\uff1a\u907f\u514d\u4f7f\u7528 <code>none</code> \u7b97\u6cd5\uff0c\u5e76\u4f18\u5148\u9009\u62e9\u5982 RS256\uff08\u975e\u5bf9\u79f0\uff09\u6216 HS256\uff08\u5bf9\u79f0\uff09\u7b49\u5f3a\u52a0\u5bc6\u7b97\u6cd5\u3002\u670d\u52a1\u5668\u5e94\u5f3a\u5236\u6821\u9a8c\u7b97\u6cd5\uff0c\u4e0d\u63a5\u53d7\u5ba2\u6237\u7aef\u6307\u5b9a\u7684\u7b97\u6cd5\u3002</li> <li>\u5bc6\u94a5\u7ba1\u7406\uff1a\u7b7e\u540d\u5bc6\u94a5\u5fc5\u987b\u88ab\u4e25\u683c\u4fdd\u5bc6\u4e14\u8db3\u591f\u590d\u6742\u3002\u5b9a\u671f\u8f6e\u6362\u5bc6\u94a5\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u5b89\u5168\u4e60\u60ef\u3002</li> <li>\u8bbe\u7f6e\u5408\u7406\u7684\u8fc7\u671f\u65f6\u95f4 (<code>exp</code>)\uff1a\u4e3a\u4ee4\u724c\u8bbe\u7f6e\u4e00\u4e2a\u8f83\u77ed\u7684\u6709\u6548\u671f\uff0c\u53ef\u4ee5\u5927\u5927\u964d\u4f4e\u4ee4\u724c\u88ab\u76d7\u7528\u540e\u6240\u5e26\u6765\u7684\u98ce\u9669\u3002</li> <li>\u5237\u65b0\u4ee4\u724c\u673a\u5236 (Refresh Token)\uff1a\u4e3a\u4e86\u5e73\u8861\u5b89\u5168\u6027\u548c\u7528\u6237\u4f53\u9a8c\uff0c\u901a\u5e38\u4f1a\u4f7f\u7528\u4e24\u79cd\u4ee4\u724c\uff1a<ul> <li>\u8bbf\u95ee\u4ee4\u724c (Access Token)\uff1a\u751f\u547d\u5468\u671f\u77ed\uff08\u598215\u5206\u949f\uff09\uff0c\u7528\u4e8e\u8bbf\u95ee\u8d44\u6e90\u3002</li> <li>\u5237\u65b0\u4ee4\u724c (Refresh Token)\uff1a\u751f\u547d\u5468\u671f\u957f\uff08\u59827\u5929\uff09\uff0c\u7528\u4e8e\u5728\u8bbf\u95ee\u4ee4\u724c\u8fc7\u671f\u540e\u83b7\u53d6\u65b0\u7684\u8bbf\u95ee\u4ee4\u724c\u3002</li> </ul> </li> <li>\u4e0d\u5728\u8f7d\u8377\u4e2d\u5b58\u653e\u654f\u611f\u6570\u636e\uff1a\u518d\u6b21\u5f3a\u8c03\uff0cJWT \u7684\u8f7d\u8377\u662f\u516c\u5f00\u53ef\u8bfb\u7684\uff0c\u5207\u52ff\u5b58\u653e\u5bc6\u7801\u3001\u4e2a\u4eba\u8eab\u4efd\u4fe1\u606f\u7b49\u654f\u611f\u6570\u636e\u3002</li> <li>\u5ba2\u6237\u7aef\u5b89\u5168\u5b58\u50a8\uff1a\u5728 Web \u5e94\u7528\u4e2d\uff0c\u5c06 JWT \u5b58\u50a8\u5728 <code>HttpOnly</code> \u7c7b\u578b\u7684 Cookie \u4e2d\u53ef\u4ee5\u6709\u6548\u9632\u6b62 XSS (\u8de8\u7ad9\u811a\u672c) \u653b\u51fb\u7a83\u53d6\u4ee4\u724c\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/JWT%E6%98%AF%E6%97%A0%E7%8A%B6%E6%80%81%E7%9A%84%EF%BC%8C%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%A6%82%E4%BD%95%E4%B8%BB%E5%8A%A8%E8%AE%A9%E4%B8%80%E4%B8%AA%E5%B7%B2%E7%AD%BE%E5%8F%91%E7%9A%84JWT%E5%A4%B1%E6%95%88/","title":"JWT\u662f\u65e0\u72b6\u6001\u7684\uff0c\u670d\u52a1\u7aef\u5982\u4f55\u4e3b\u52a8\u8ba9\u4e00\u4e2a\u5df2\u7b7e\u53d1\u7684JWT\u5931\u6548","text":"<p>JWT\uff08JSON Web Token\uff09\u7684\u6838\u5fc3\u4f18\u52bf\u4e4b\u4e00\u662f\u5176\u201c\u65e0\u72b6\u6001\u201d\u7279\u6027\uff0c\u5373\u670d\u52a1\u7aef\u65e0\u9700\u4fdd\u5b58\u4efb\u4f55\u5173\u4e8e\u4ee4\u724c\u7684\u72b6\u6001\u4fe1\u606f\uff0c\u4ec5\u901a\u8fc7\u6821\u9a8c\u4ee4\u724c\u7684\u7b7e\u540d\u5373\u53ef\u786e\u8ba4\u5176\u6709\u6548\u6027\u3002\u7136\u800c\uff0c\u6b63\u662f\u8fd9\u4e2a\u7279\u6027\u5bfc\u81f4\u670d\u52a1\u7aef\u9ed8\u8ba4\u65e0\u6cd5\u4e3b\u52a8\u8ba9\u4e00\u4e2a\u5df2\u7ecf\u7b7e\u53d1\u4e14\u672a\u8fc7\u671f\u7684\u4ee4\u724c\u5931\u6548\u3002 \u5c3d\u7ba1\u8fd9\u4e0eJWT\u7684\u521d\u8877\u76f8\u6096\uff0c\u4f46\u5728\u8bb8\u591a\u5b9e\u9645\u5e94\u7528\u573a\u666f\u4e2d\uff08\u5982\u7528\u6237\u767b\u51fa\u3001\u4fee\u6539\u5bc6\u7801\u3001\u7ba1\u7406\u5458\u5f3a\u5236\u7528\u6237\u4e0b\u7ebf\uff09\uff0c\u4e3b\u52a8\u8ba9\u4ee4\u724c\u5931\u6548\u662f\u5fc5\u8981\u7684\u529f\u80fd\u3002</p> <p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u53d1\u5c55\u51fa\u4e86\u591a\u79cd\u501f\u52a9\u201c\u5916\u529b\u201d\uff08\u901a\u5e38\u662f\u5f15\u5165\u4e00\u4e2a\u8f7b\u91cf\u7ea7\u7684\u72b6\u6001\u5b58\u50a8\uff09\u6765\u95f4\u63a5\u5b9e\u73b0JWT\u5931\u6548\u7684\u65b9\u6848\u3002\u4ee5\u4e0b\u662f\u51e0\u79cd\u4e3b\u6d41\u7684\u65b9\u6cd5\u53ca\u5176\u5b9e\u73b0\u601d\u8def\uff1a</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/JWT%E6%98%AF%E6%97%A0%E7%8A%B6%E6%80%81%E7%9A%84%EF%BC%8C%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%A6%82%E4%BD%95%E4%B8%BB%E5%8A%A8%E8%AE%A9%E4%B8%80%E4%B8%AA%E5%B7%B2%E7%AD%BE%E5%8F%91%E7%9A%84JWT%E5%A4%B1%E6%95%88/#1-token-blacklist","title":"1. \u7ef4\u62a4Token\u9ed1\u540d\u5355 (Blacklist)","text":"<p>\u8fd9\u662f\u6700\u5e38\u7528\u4e5f\u662f\u6700\u76f4\u63a5\u7684\u89e3\u51b3\u65b9\u6848\u3002\u5176\u6838\u5fc3\u601d\u60f3\u662f\u5efa\u7acb\u4e00\u4e2a\u5df2\u5931\u6548\u4f46\u5c1a\u672a\u8fc7\u671f\u7684Token\u5217\u8868\uff0c\u6bcf\u6b21\u8bf7\u6c42\u65f6\u90fd\u53bb\u67e5\u8be2\u8fd9\u4e2a\u5217\u8868\u3002</p> <p>\u5b9e\u73b0\u601d\u8def: *   \u5b58\u50a8\u9009\u62e9\uff1a\u4f7f\u7528\u9ad8\u6027\u80fd\u7684\u5185\u5b58\u6570\u636e\u5e93\uff0c\u5982Redis\uff0c\u6765\u5b58\u50a8\u9ed1\u540d\u5355\u3002 *   \u6ce8\u9500\u64cd\u4f5c\uff1a\u5f53\u7528\u6237\u4e3b\u52a8\u767b\u51fa\u6216\u9700\u8981\u5f3a\u5236\u5176\u4e0b\u7ebf\u65f6\uff0c\u5c06\u8be5\u7528\u6237\u7684\u5f53\u524dJWT\u52a0\u5165\u5230Redis\u9ed1\u540d\u5355\u4e2d\u3002 *   \u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\uff1a\u4e3a\u4e86\u9632\u6b62\u9ed1\u540d\u5355\u65e0\u9650\u81a8\u80c0\uff0c\u5b58\u5165\u9ed1\u540d\u5355\u7684JWT\u5e94\u8be5\u8bbe\u7f6e\u4e00\u4e2a\u8fc7\u671f\u65f6\u95f4\uff0c\u8fd9\u4e2a\u65f6\u95f4\u7b49\u4e8e\u8be5JWT\u5269\u4f59\u7684\u6709\u6548\u65f6\u95f4\u3002 \u4f8b\u5982\uff0c\u4e00\u4e2aToken\u603b\u6709\u6548\u671f\u662f2\u5c0f\u65f6\uff0c\u5728\u7b2c30\u5206\u949f\u65f6\u88ab\u6ce8\u9500\uff0c\u90a3\u4e48\u5b83\u5728\u9ed1\u540d\u5355\u4e2d\u7684\u5b58\u6d3b\u65f6\u95f4\u5c31\u5e94\u8be5\u662f90\u5206\u949f\u3002\u8fd9\u6837\u53ef\u4ee5\u786e\u4fddRedis\u80fd\u81ea\u52a8\u6e05\u7406\u6389\u90a3\u4e9b\u5df2\u7ecf\u81ea\u7136\u8fc7\u671f\u7684Token\u6761\u76ee\u3002 *   \u6821\u9a8c\u6d41\u7a0b\uff1a\u5728\u670d\u52a1\u7aef\u7684\u8ba4\u8bc1\u4e2d\u95f4\u4ef6\u4e2d\uff0c\u9664\u4e86\u8fdb\u884c\u5e38\u89c4\u7684\u7b7e\u540d\u548c\u6709\u6548\u671f\u6821\u9a8c\u5916\uff0c\u589e\u52a0\u4e00\u6b65\u64cd\u4f5c\uff1a\u67e5\u8be2\u5f53\u524d\u8bf7\u6c42\u7684Token\u662f\u5426\u5b58\u5728\u4e8e\u9ed1\u540d\u5355\u4e2d\u3002\u5982\u679c\u5b58\u5728\uff0c\u5219\u7acb\u5373\u62d2\u7edd\u8be5\u8bf7\u6c42\u3002 *   \u4f18\u5316\uff1a\u4e3a\u4e86\u8282\u7701\u5b58\u50a8\u7a7a\u95f4\uff0c\u53ef\u4ee5\u4e0d\u5b58\u50a8\u5b8c\u6574\u7684Token\u5b57\u7b26\u4e32\uff0c\u800c\u662f\u5b58\u50a8\u5176\u552f\u4e00\u6807\u8bc6<code>jti</code> (JWT ID) claim\u3002</p> <p>\u4f18\u7f3a\u70b9: *   \u4f18\u70b9\uff1a\u53ef\u4ee5\u7cbe\u786e\u5730\u8ba9\u5355\u4e2aToken\u5931\u6548\uff0c\u63a7\u5236\u7c92\u5ea6\u6700\u7ec6\u3002\u903b\u8f91\u6e05\u6670\uff0c\u6613\u4e8e\u5b9e\u73b0\u3002 *   \u7f3a\u70b9\uff1a\u6253\u7834\u4e86JWT\u7684\u5b8c\u5168\u65e0\u72b6\u6001\u6027\uff0c\u6bcf\u6b21\u8bf7\u6c42\u90fd\u9700\u8981\u989d\u5916\u67e5\u8be2\u4e00\u6b21Redis\uff0c\u589e\u52a0\u4e86\u7f51\u7edc\u5f00\u9500\u548c\u7cfb\u7edf\u5ef6\u8fdf\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/JWT%E6%98%AF%E6%97%A0%E7%8A%B6%E6%80%81%E7%9A%84%EF%BC%8C%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%A6%82%E4%BD%95%E4%B8%BB%E5%8A%A8%E8%AE%A9%E4%B8%80%E4%B8%AA%E5%B7%B2%E7%AD%BE%E5%8F%91%E7%9A%84JWT%E5%A4%B1%E6%95%88/#2-jwt","title":"2. \u5728JWT\u4e2d\u589e\u52a0\u7248\u672c\u53f7\u6216\u65f6\u95f4\u6233","text":"<p>\u8fd9\u79cd\u65b9\u6cd5\u901a\u8fc7\u4e3a\u7528\u6237\u5173\u8054\u4e00\u4e2a\u7248\u672c\u6807\u8bc6\u6765\u6279\u91cf\u5e9f\u9664\u65e7\u7684Token\uff0c\u975e\u5e38\u9002\u7528\u4e8e\u4fee\u6539\u5bc6\u7801\u540e\u8ba9\u6240\u6709\u65e7Token\u5931\u6548\u7684\u573a\u666f\u3002</p> <p>\u5b9e\u73b0\u601d\u8def: *   \u6570\u636e\u5e93\u8bbe\u8ba1\uff1a\u5728\u7528\u6237\u6570\u636e\u8868\u4e2d\u589e\u52a0\u4e00\u4e2a\u5b57\u6bb5\uff0c\u4f8b\u5982 <code>token_version</code> (\u6574\u6570) \u6216 <code>password_changed_at</code> (\u65f6\u95f4\u6233)\u3002 *   \u7b7e\u53d1Token\uff1a\u5f53\u4e3a\u7528\u6237\u7b7e\u53d1\u65b0\u7684JWT\u65f6\uff0c\u5c06\u5f53\u524d\u7528\u6237\u7684 <code>token_version</code> \u6216 <code>password_changed_at</code> \u4f5c\u4e3aPayload\u7684\u4e00\u4e2aclaim\u52a0\u5165\u5230JWT\u4e2d\u3002 *   \u5931\u6548\u64cd\u4f5c\uff1a\u5f53\u7528\u6237\u4fee\u6539\u5bc6\u7801\u6216\u6267\u884c\u201c\u6240\u6709\u8bbe\u5907\u767b\u51fa\u201d\u64cd\u4f5c\u65f6\uff0c\u53ea\u9700\u66f4\u65b0\u6570\u636e\u5e93\u4e2d\u5bf9\u5e94\u7528\u6237\u7684 <code>token_version</code>\uff08\u4f8b\u5982\uff0c\u5c06\u5176\u52a01\uff09\u6216 <code>password_changed_at</code> \u4e3a\u5f53\u524d\u65f6\u95f4\u3002 *   \u6821\u9a8c\u6d41\u7a0b\uff1a\u5728\u6821\u9a8cToken\u65f6\uff0c\u9664\u4e86\u57fa\u7840\u6821\u9a8c\uff0c\u8fd8\u9700\u8981\u4ece\u6570\u636e\u5e93\u4e2d\u8bfb\u51fa\u8be5\u7528\u6237\u7684\u5f53\u524d\u7248\u672c/\u65f6\u95f4\u6233\uff0c\u5e76\u4e0eToken\u4e2d\u643a\u5e26\u7684\u7248\u672c/\u65f6\u95f4\u6233\u8fdb\u884c\u6bd4\u5bf9\u3002\u5982\u679cToken\u4e2d\u7684\u7248\u672c\u5c0f\u4e8e\u6570\u636e\u5e93\u4e2d\u7684\u7248\u672c\uff0c\u6216\u8005Token\u7684\u7b7e\u53d1\u65f6\u95f4\u65e9\u4e8e\u5bc6\u7801\u4fee\u6539\u65f6\u95f4\uff0c\u5219\u5224\u5b9aToken\u65e0\u6548\u3002</p> <p>\u4f18\u7f3a\u70b9: *   \u4f18\u70b9\uff1a\u65e0\u9700\u7ef4\u62a4\u5e9e\u5927\u7684\u9ed1\u540d\u5355\uff0c\u5b58\u50a8\u5f00\u9500\u5c0f\u3002\u4e00\u6b21\u6570\u636e\u5e93\u66f4\u65b0\u5373\u53ef\u8ba9\u8be5\u7528\u6237\u7684\u6240\u6709\u65e7Token\u5168\u90e8\u5931\u6548\u3002 *   \u7f3a\u70b9\uff1a\u540c\u6837\u9700\u8981\u6bcf\u6b21\u8bf7\u6c42\u90fd\u67e5\u8be2\u6570\u636e\u5e93\uff0c\u5f15\u5165\u4e86\u72b6\u6001\u4f9d\u8d56\u3002\u65e0\u6cd5\u505a\u5230\u53ea\u8ba9\u5355\u4e2a\u8bbe\u5907\u4e0a\u7684Token\u5931\u6548\uff08\u4f1a\u5f71\u54cd\u6240\u6709\u6301\u6709\u65e7\u7248\u672cToken\u7684\u8bbe\u5907\uff09\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/JWT%E6%98%AF%E6%97%A0%E7%8A%B6%E6%80%81%E7%9A%84%EF%BC%8C%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%A6%82%E4%BD%95%E4%B8%BB%E5%8A%A8%E8%AE%A9%E4%B8%80%E4%B8%AA%E5%B7%B2%E7%AD%BE%E5%8F%91%E7%9A%84JWT%E5%A4%B1%E6%95%88/#3-secret-key","title":"3. \u4e3a\u6bcf\u4e2a\u7528\u6237\u751f\u6210\u552f\u4e00\u7684\u52a0\u5bc6\u5bc6\u94a5 (Secret Key)","text":"<p>\u6b64\u65b9\u6848\u901a\u8fc7\u66f4\u6539\u7528\u4e8e\u7b7e\u540dJWT\u7684\u5bc6\u94a5\u6765\u4f7fToken\u5931\u6548\u3002</p> <p>\u5b9e\u73b0\u601d\u8def: *   \u6570\u636e\u5e93\u8bbe\u8ba1\uff1a\u5728\u7528\u6237\u6570\u636e\u8868\u4e2d\u589e\u52a0\u4e00\u4e2a\u5b57\u6bb5\uff0c\u5982 <code>token_secret</code>\uff0c\u4e3a\u6bcf\u4e2a\u7528\u6237\u5b58\u50a8\u4e00\u4e2a\u552f\u4e00\u7684\u3001\u968f\u673a\u751f\u6210\u7684\u5b57\u7b26\u4e32\u3002 *   \u7b7e\u53d1Token\uff1a\u4e3a\u7528\u6237\u7b7e\u53d1JWT\u65f6\uff0c\u4f7f\u7528\u5176\u4e13\u5c5e\u7684 <code>token_secret</code> \u8fdb\u884c\u7b7e\u540d\u3002 *   \u5931\u6548\u64cd\u4f5c\uff1a\u5f53\u9700\u8981\u8ba9\u67d0\u4e2a\u7528\u6237\u7684\u6240\u6709Token\u5931\u6548\u65f6\uff0c\u53ea\u9700\u91cd\u65b0\u751f\u6210\u4e00\u4e2a\u65b0\u7684\u968f\u673a\u5b57\u7b26\u4e32\uff0c\u5e76\u66f4\u65b0\u8be5\u7528\u6237\u5728\u6570\u636e\u5e93\u4e2d\u7684 <code>token_secret</code> \u5b57\u6bb5\u3002 *   \u6821\u9a8c\u6d41\u7a0b\uff1a\u6821\u9a8cToken\u65f6\uff0c\u5148\u4eceToken\u7684Payload\u4e2d\u89e3\u6790\u51fa\u7528\u6237ID\uff0c\u7136\u540e\u6839\u636eID\u4ece\u6570\u636e\u5e93\u4e2d\u67e5\u8be2\u51fa\u8be5\u7528\u6237\u4e13\u5c5e\u7684 <code>token_secret</code>\uff0c\u6700\u540e\u7528\u8fd9\u4e2a\u5bc6\u94a5\u53bb\u9a8c\u8bc1Token\u7684\u7b7e\u540d\u3002\u7531\u4e8e\u65e7Token\u662f\u7528\u65e7\u5bc6\u94a5\u7b7e\u53d1\u7684\uff0c\u65b0\u5bc6\u94a5\u81ea\u7136\u65e0\u6cd5\u901a\u8fc7\u9a8c\u8bc1\u3002</p> <p>\u4f18\u7f3a\u70b9: *   \u4f18\u70b9\uff1a\u5b9e\u73b0\u4e86\u771f\u6b63\u7684\u5931\u6548\uff0c\u65e0\u9700\u9ed1\u540d\u5355\u3002 *   \u7f3a\u70b9\uff1a\u5b9e\u73b0\u903b\u8f91\u66f4\u590d\u6742\uff0c\u5bc6\u94a5\u7ba1\u7406\u6210\u672c\u66f4\u9ad8\u3002\u6bcf\u6b21\u6821\u9a8c\u90fd\u9700\u8981\u5148\u89e3\u6790Payload\u518d\u67e5\u8be2\u6570\u636e\u5e93\u83b7\u53d6\u5bc6\u94a5\uff0c\u6d41\u7a0b\u76f8\u5bf9\u7e41\u7410\uff0c\u6027\u80fd\u5f00\u9500\u8f83\u5927\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/JWT%E6%98%AF%E6%97%A0%E7%8A%B6%E6%80%81%E7%9A%84%EF%BC%8C%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%A6%82%E4%BD%95%E4%B8%BB%E5%8A%A8%E8%AE%A9%E4%B8%80%E4%B8%AA%E5%B7%B2%E7%AD%BE%E5%8F%91%E7%9A%84JWT%E5%A4%B1%E6%95%88/#4-token-access-token-refresh-token","title":"4. \u91c7\u7528\u53ccToken\u673a\u5236 (Access Token + Refresh Token)","text":"<p>\u8fd9\u662f\u4e00\u79cd\u66f4\u5b8c\u5584\u7684\u8ba4\u8bc1\u7b56\u7565\uff0c\u867d\u7136\u4e0d\u76f4\u63a5\u201c\u5931\u6548\u201dAccess Token\uff0c\u4f46\u901a\u8fc7\u7f29\u77ed\u5176\u751f\u547d\u5468\u671f\u6765\u964d\u4f4e\u98ce\u9669\uff0c\u5e76\u63d0\u4f9b\u5e73\u6ed1\u7684\u5237\u65b0\u4f53\u9a8c\u3002</p> <p>\u5b9e\u73b0\u601d\u8def: *   \u7b7e\u53d1Token\uff1a\u7528\u6237\u767b\u5f55\u65f6\uff0c\u540c\u65f6\u7b7e\u53d1\u4e24\u4e2aToken\uff1a     *   Access Token: \u7528\u4e8e\u8bbf\u95ee\u53d7\u4fdd\u62a4\u8d44\u6e90\uff0c\u6709\u6548\u671f\u5f88\u77ed\uff08\u59825-15\u5206\u949f\uff09\u3002     *   Refresh Token: \u7528\u4e8e\u83b7\u53d6\u65b0\u7684Access Token\uff0c\u6709\u6548\u671f\u8f83\u957f\uff08\u59827-30\u5929\uff09\u3002 *   \u5931\u6548\u64cd\u4f5c\uff1a\u5f53\u7528\u6237\u767b\u51fa\u65f6\uff0c\u53ea\u9700\u5c06\u957f\u6548\u7684Refresh Token\u52a0\u5165\u9ed1\u540d\u5355\u6216\u4ece\u767d\u540d\u5355\u4e2d\u5220\u9664\u5373\u53ef\u3002\u7531\u4e8eAccess Token\u751f\u547d\u5468\u671f\u6781\u77ed\uff0c\u5f88\u5feb\u5c31\u4f1a\u81ea\u7136\u8fc7\u671f\uff0c\u5373\u4f7f\u88ab\u76d7\u7528\uff0c\u5371\u5bb3\u4e5f\u6709\u9650\u3002 *   \u6821\u9a8c\u4e0e\u5237\u65b0\uff1a     1.  \u5ba2\u6237\u7aef\u6bcf\u6b21\u8bf7\u6c42\u643a\u5e26Access Token\u3002     2.  \u670d\u52a1\u7aef\u9a8c\u8bc1Access Token\uff0c\u5982\u679c\u6709\u6548\u5219\u5904\u7406\u8bf7\u6c42\u3002     3.  \u5982\u679cAccess Token\u8fc7\u671f\uff0c\u5ba2\u6237\u7aef\u4f7f\u7528Refresh Token\u5411\u7279\u5b9a\u7684\u5237\u65b0\u63a5\u53e3\u8bf7\u6c42\u65b0\u7684Access Token\u3002     4.  \u670d\u52a1\u7aef\u9a8c\u8bc1Refresh Token\u7684\u6709\u6548\u6027\uff08\u67e5\u8be2\u6570\u636e\u5e93\u4e2d\u7684\u72b6\u6001\uff09\uff0c\u5982\u679c\u6709\u6548\u5219\u7b7e\u53d1\u65b0\u7684Access Token\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u3002</p> <p>\u4f18\u7f3a\u70b9: *   \u4f18\u70b9\uff1a\u517c\u987e\u4e86\u5b89\u5168\u6027\u548c\u7528\u6237\u4f53\u9a8c\u3002\u77ed\u671f\u7684Access Token\u964d\u4f4e\u4e86\u6cc4\u9732\u98ce\u9669\uff0c\u957f\u671f\u7684Refresh Token\u907f\u514d\u4e86\u7528\u6237\u9891\u7e41\u767b\u5f55\u3002\u670d\u52a1\u7aef\u53ea\u9700\u7ba1\u7406Refresh Token\u7684\u72b6\u6001\uff0c\u67e5\u8be2\u9891\u7387\u8fdc\u4f4e\u4e8e\u7ba1\u7406Access Token\u3002 *   \u7f3a\u70b9\uff1a\u5b9e\u73b0\u590d\u6742\u5ea6\u6700\u9ad8\uff0c\u9700\u8981\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u7aef\u914d\u5408\u5904\u7406Token\u7684\u5237\u65b0\u903b\u8f91\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/RBAC%E6%9D%83%E9%99%90%E7%B3%BB%E7%BB%9F%E6%80%8E%E4%B9%88%E8%AE%BE%E8%AE%A1/","title":"RBAC\u6743\u9650\u7cfb\u7edf\u600e\u4e48\u8bbe\u8ba1","text":"<p>RBAC\uff08Role-Based Access Control\uff09\u6743\u9650\u7cfb\u7edf\u7684\u8bbe\u8ba1\u662f\u4f01\u4e1a\u7ea7\u540e\u7aef\u5f00\u53d1\u4e2d\u975e\u5e38\u6838\u5fc3\u548c\u5e38\u89c1\u7684\u4e00\u73af\u3002\u5b83\u80fd\u591f\u6781\u5927\u5730\u7b80\u5316\u6743\u9650\u7ba1\u7406\uff0c\u5c06\u590d\u6742\u7684\u7528\u6237-\u6743\u9650\u5173\u7cfb\u89e3\u8026\u3002\u60a8\u63d0\u51fa\u7684\u95ee\u9898\u8fd8\u589e\u52a0\u4e86\u4e00\u4e2a\u975e\u5e38\u5b9e\u9645\u7684\u6311\u6218\uff1a\u5982\u4f55\u5728\u6b64\u57fa\u7840\u4e0a\u6269\u5c55\uff0c\u5b9e\u73b0\u6570\u636e\u7ea7\u522b\u7684\u6743\u9650\u63a7\u5236\u3002</p> <p>\u6211\u7684\u8bbe\u8ba1\u601d\u8def\u4f1a\u5206\u4e3a\u4e24\u4e2a\u90e8\u5206\uff1a\u9996\u5148\uff0c\u6784\u5efa\u4e00\u4e2a\u7ecf\u5178\u7684\u3001\u901a\u7528\u7684RBAC\u6a21\u578b\uff1b\u7136\u540e\uff0c\u5728\u5176\u57fa\u7840\u4e0a\u65e0\u7f1d\u5730\u589e\u52a0\u4e00\u4e2a\u6570\u636e\u6743\u9650\u5c42\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/RBAC%E6%9D%83%E9%99%90%E7%B3%BB%E7%BB%9F%E6%80%8E%E4%B9%88%E8%AE%BE%E8%AE%A1/#rbac","title":"\u7ecf\u5178RBAC\u6a21\u578b\u8bbe\u8ba1","text":"<p>\u7ecf\u5178\u7684RBAC\u6a21\u578b\uff0c\u4e5f\u5e38\u88ab\u79f0\u4e3aRBAC0\u6216RBAC1\uff0c\u6838\u5fc3\u601d\u60f3\u662f\u901a\u8fc7\u201c\u89d2\u8272\uff08Role\uff09\u201d\u8fd9\u4e2a\u4e2d\u95f4\u5c42\u6765\u8fde\u63a5\u201c\u7528\u6237\uff08User\uff09\u201d\u548c\u201c\u6743\u9650\uff08Permission\uff09\u201d\u3002\u7528\u6237\u4e0d\u518d\u76f4\u63a5\u62e5\u6709\u6743\u9650\uff0c\u800c\u662f\u901a\u8fc7\u88ab\u8d4b\u4e88\u4e00\u4e2a\u6216\u591a\u4e2a\u89d2\u8272\u6765\u95f4\u63a5\u83b7\u5f97\u8fd9\u4e9b\u89d2\u8272\u6240\u5305\u542b\u7684\u6240\u6709\u6743\u9650\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/RBAC%E6%9D%83%E9%99%90%E7%B3%BB%E7%BB%9F%E6%80%8E%E4%B9%88%E8%AE%BE%E8%AE%A1/#1","title":"1. \u6838\u5fc3\u5b9e\u4f53\u4e0e\u5173\u7cfb","text":"<ul> <li>\u7528\u6237\uff08User\uff09\uff1a\u7cfb\u7edf\u7684\u4f7f\u7528\u8005\u3002</li> <li>\u89d2\u8272\uff08Role\uff09\uff1a\u6743\u9650\u7684\u96c6\u5408\uff0c\u4ee3\u8868\u4e00\u4e2a\u8eab\u4efd\u6216\u804c\u8d23\uff0c\u5982\u201c\u7ba1\u7406\u5458\u201d\u3001\u201c\u6587\u7ae0\u7f16\u8f91\u201d\u3001\u201c\u666e\u901a\u4f1a\u5458\u201d\u3002</li> <li>\u6743\u9650\uff08Permission\uff09\uff1a\u4e00\u4e2a\u5177\u4f53\u7684\u64cd\u4f5c\u8bb8\u53ef\uff0c\u901a\u5e38\u662f\u539f\u5b50\u5316\u7684\u3002\u6bd4\u5982\u201c\u521b\u5efa\u6587\u7ae0\u201d\u3001\u201c\u5220\u9664\u7528\u6237\u201d\u3001\u201c\u67e5\u770b\u62a5\u8868\u201d\u3002\u6211\u503e\u5411\u4e8e\u91c7\u7528 <code>\u8d44\u6e90:\u64cd\u4f5c</code> \u7684\u683c\u5f0f\u6765\u5b9a\u4e49\uff0c\u4f8b\u5982 <code>article:create</code>, <code>user:delete</code>\u3002</li> </ul> <p>\u5b83\u4eec\u4e4b\u95f4\u7684\u5173\u7cfb\u662f\uff1a *   \u4e00\u4e2a\u7528\u6237\u53ef\u4ee5\u62e5\u6709\u591a\u4e2a\u89d2\u8272\u3002\uff08\u591a\u5bf9\u591a\uff09 *   \u4e00\u4e2a\u89d2\u8272\u53ef\u4ee5\u5305\u542b\u591a\u4e2a\u6743\u9650\u3002\uff08\u591a\u5bf9\u591a\uff09</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/RBAC%E6%9D%83%E9%99%90%E7%B3%BB%E7%BB%9F%E6%80%8E%E4%B9%88%E8%AE%BE%E8%AE%A1/#2","title":"2. \u6570\u636e\u5e93\u8868\u7ed3\u6784\u8bbe\u8ba1","text":"<p>\u6839\u636e\u4e0a\u8ff0\u5173\u7cfb\uff0c\u6211\u4eec\u9700\u8981\u4e94\u5f20\u8868\u6765\u6784\u5efa\u8fd9\u4e2a\u6a21\u578b\uff1a</p> <ol> <li> <p><code>users</code> \u8868\uff1a\u5b58\u50a8\u7528\u6237\u4fe1\u606f\u3002</p> <ul> <li><code>id</code> (PK)</li> <li><code>username</code></li> <li><code>password_hash</code></li> <li>... (\u5176\u4ed6\u4e1a\u52a1\u5b57\u6bb5)</li> </ul> </li> <li> <p><code>roles</code> \u8868\uff1a\u5b58\u50a8\u89d2\u8272\u5b9a\u4e49\u3002</p> <ul> <li><code>id</code> (PK)</li> <li><code>role_name</code> (e.g., 'admin', 'editor')</li> <li><code>description</code></li> </ul> </li> <li> <p><code>permissions</code> \u8868\uff1a\u5b58\u50a8\u6743\u9650\u5b9a\u4e49\u3002</p> <ul> <li><code>id</code> (PK)</li> <li><code>permission_code</code> (e.g., 'article:create', 'article:edit')</li> <li><code>description</code></li> </ul> </li> <li> <p><code>user_roles</code> \u5173\u8054\u8868\uff1a\u8fde\u63a5\u7528\u6237\u548c\u89d2\u8272\u3002</p> <ul> <li><code>user_id</code> (FK to users.id)</li> <li><code>role_id</code> (FK to roles.id)</li> <li>(PRIMARY KEY on <code>user_id</code>, <code>role_id</code>)</li> </ul> </li> <li> <p><code>role_permissions</code> \u5173\u8054\u8868\uff1a\u8fde\u63a5\u89d2\u8272\u548c\u6743\u9650\u3002</p> <ul> <li><code>role_id</code> (FK to roles.id)</li> <li><code>permission_id</code> (FK to permissions.id)</li> <li>(PRIMARY KEY on <code>role_id</code>, <code>permission_id</code>)</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/RBAC%E6%9D%83%E9%99%90%E7%B3%BB%E7%BB%9F%E6%80%8E%E4%B9%88%E8%AE%BE%E8%AE%A1/#3","title":"3. \u6743\u9650\u6821\u9a8c\u6d41\u7a0b","text":"<p>\u5f53\u4e00\u4e2a\u7528\u6237\u5c1d\u8bd5\u6267\u884c\u67d0\u4e2a\u64cd\u4f5c\u65f6\uff0c\u540e\u7aef\u7684\u6821\u9a8c\u903b\u8f91\u5982\u4e0b\uff1a 1.  \u63a5\u6536\u5230\u8bf7\u6c42\uff0c\u83b7\u53d6\u5f53\u524d\u7528\u6237\u7684 <code>user_id</code> \u548c\u9700\u8981\u6821\u9a8c\u7684 <code>permission_code</code>\u3002 2.  \u901a\u8fc7 <code>user_id</code> \u5728 <code>user_roles</code> \u8868\u4e2d\u67e5\u8be2\u8be5\u7528\u6237\u62e5\u6709\u7684\u6240\u6709 <code>role_id</code>\u3002 3.  \u62ff\u7740\u8fd9\u4e9b <code>role_id</code>\uff0c\u5728 <code>role_permissions</code> \u8868\u4e2d\u67e5\u8be2\u8fd9\u4e9b\u89d2\u8272\u6240\u5bf9\u5e94\u7684\u6240\u6709 <code>permission_id</code>\u3002 4.  \u6839\u636e\u8fd9\u4e9b <code>permission_id</code> \u53bb <code>permissions</code> \u8868\u4e2d\u67e5\u8be2\u51fa\u5177\u4f53\u7684 <code>permission_code</code> \u96c6\u5408\u3002 5.  \u5224\u65ad\u7528\u6237\u8bf7\u6c42\u7684 <code>permission_code</code> \u662f\u5426\u5b58\u5728\u4e8e\u8fd9\u4e2a\u96c6\u5408\u4e2d\u3002\u5982\u679c\u5b58\u5728\uff0c\u5219\u6388\u6743\u8bbf\u95ee\uff1b\u5426\u5219\uff0c\u62d2\u7edd\u3002</p> <p>\u8fd9\u4e2a\u6a21\u578b\u89e3\u51b3\u4e86\u201c\u7528\u6237\u80fd\u5426\u8fdb\u884c\u67d0\u7c7b\u64cd\u4f5c\u201d\u7684\u95ee\u9898\u3002\u4f8b\u5982\uff0c\u89d2\u8272\u4e3a\u201c\u6587\u7ae0\u7f16\u8f91\u201d\u7684\u7528\u6237\uff0c\u62e5\u6709 <code>article:edit</code> \u6743\u9650\uff0c\u4ed6\u5c31\u53ef\u4ee5\u8fdb\u5165\u7f16\u8f91\u6587\u7ae0\u7684\u9875\u9762\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/RBAC%E6%9D%83%E9%99%90%E7%B3%BB%E7%BB%9F%E6%80%8E%E4%B9%88%E8%AE%BE%E8%AE%A1/#_1","title":"\u589e\u52a0\u6570\u636e\u6743\u9650\u8bbe\u8ba1","text":"<p>\u7ecf\u5178RBAC\u7684\u5c40\u9650\u6027\u5728\u4e8e\uff0c\u5b83\u53ea\u80fd\u63a7\u5236\u5230\u201c\u64cd\u4f5c\u201d\u7ea7\u522b\uff0c\u800c\u4e0d\u80fd\u63a7\u5236\u5230\u201c\u6570\u636e\u884c\u201d\u7ea7\u522b\u3002\u6bd4\u5982\uff0c\u201c\u6587\u7ae0\u7f16\u8f91\u201d\u53ef\u4ee5\u7f16\u8f91\u6587\u7ae0\uff0c\u4f46\u4ed6\u5e94\u8be5\u53ea\u80fd\u7f16\u8f91\u81ea\u5df1\u521b\u5efa\u7684\u6587\u7ae0\uff0c\u800c\u4e0d\u662f\u6240\u6709\u4eba\u7684\u6587\u7ae0\u3002\u8fd9\u5c31\u662f\u6570\u636e\u6743\u9650\u8981\u89e3\u51b3\u7684\u95ee\u9898\u3002</p> <p>\u6309\u7167\u60a8\u7684\u8981\u6c42\uff0c\u6211\u4eec\u901a\u8fc7\u589e\u52a0\u8868\u6765\u5b9e\u73b0\u8fd9\u4e2a\u529f\u80fd\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/RBAC%E6%9D%83%E9%99%90%E7%B3%BB%E7%BB%9F%E6%80%8E%E4%B9%88%E8%AE%BE%E8%AE%A1/#1_1","title":"1. \u8bbe\u8ba1\u601d\u8def","text":"<p>\u6211\u4eec\u7684\u6838\u5fc3\u601d\u8def\u662f\u5f15\u5165\u4e00\u4e2a\u65b0\u7684\u201c\u7b56\u7565\u201d\u5c42\uff0c\u8fd9\u4e2a\u7b56\u7565\u76f4\u63a5\u5c06\u201c\u4e3b\u4f53\uff08Principal\uff09\u201d\u548c\u5b83\u80fd\u64cd\u4f5c\u7684\u201c\u5177\u4f53\u8d44\u6e90\u5b9e\u4f8b\uff08Resource Instance\uff09\u201d\u4ee5\u53ca\u201c\u6743\u9650\u201d\u7ed1\u5b9a\u8d77\u6765\u3002</p> <ul> <li>\u4e3b\u4f53\uff1a\u53ef\u4ee5\u662f\u5355\u4e2a\u7528\u6237\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u89d2\u8272\u3002\u8fd9\u6837\u8bbe\u8ba1\u66f4\u7075\u6d3b\u3002</li> <li>\u8d44\u6e90\u5b9e\u4f8b\uff1a\u6307\u4ee3\u6570\u636e\u5e93\u4e2d\u67d0\u5f20\u8868\u7684\u67d0\u4e00\u884c\u6570\u636e\uff0c\u6bd4\u5982ID\u4e3a123\u7684\u6587\u7ae0\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/RBAC%E6%9D%83%E9%99%90%E7%B3%BB%E7%BB%9F%E6%80%8E%E4%B9%88%E8%AE%BE%E8%AE%A1/#2_1","title":"2. \u65b0\u589e\u6570\u636e\u6743\u9650\u8868","text":"<p>\u6211\u5c06\u8bbe\u8ba1\u4e00\u5f20\u540d\u4e3a <code>data_access_policies</code> \u7684\u8868\uff1a</p> <ol> <li><code>data_access_policies</code> \u8868\uff1a<ul> <li><code>id</code> (PK)</li> <li><code>principal_type</code> (ENUM/VARCHAR: 'user', 'role')\uff1a\u6307\u660e\u4e3b\u4f53\u662f\u7528\u6237\u8fd8\u662f\u89d2\u8272\u3002</li> <li><code>principal_id</code> (BIGINT)\uff1a\u5bf9\u5e94 <code>users.id</code> \u6216 <code>roles.id</code>\u3002</li> <li><code>resource_type</code> (VARCHAR: 'article', 'order')\uff1a\u6307\u660e\u662f\u54ea\u79cd\u7c7b\u578b\u7684\u8d44\u6e90\u3002</li> <li><code>resource_id</code> (BIGINT)\uff1a\u5177\u4f53\u8d44\u6e90\u7684ID\u3002\u8fd9\u662f\u6570\u636e\u6743\u9650\u7684\u6838\u5fc3\u3002\u6211\u4eec\u53ef\u4ee5\u7528\u4e00\u4e2a\u7279\u6b8a\u503c\uff08\u59820\u6216NULL\uff09\u6765\u4ee3\u8868\u201c\u6240\u6709\u8d44\u6e90\u201d\u3002</li> <li><code>permission_id</code> (FK to permissions.id)\uff1a\u5141\u8bb8\u5728\u6b64\u8d44\u6e90\u4e0a\u6267\u884c\u7684\u64cd\u4f5c\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/RBAC%E6%9D%83%E9%99%90%E7%B3%BB%E7%BB%9F%E6%80%8E%E4%B9%88%E8%AE%BE%E8%AE%A1/#_2","title":"\u5b8c\u6574\u7684\u6743\u9650\u6821\u9a8c\u6d41\u7a0b","text":"<p>\u73b0\u5728\uff0c\u5f53\u4e00\u4e2a\u7528\u6237\uff08\u6bd4\u5982 <code>user_id=101</code>\uff09\u5c1d\u8bd5\u7f16\u8f91ID\u4e3a <code>456</code> \u7684\u6587\u7ae0\uff08<code>article:edit</code>\uff09\u65f6\uff0c\u6821\u9a8c\u6d41\u7a0b\u4f1a\u53d8\u5f97\u66f4\u52a0\u4e25\u8c28\uff1a</p> <ol> <li> <p>\u7b2c\u4e00\u6b65\uff1a\u64cd\u4f5c\u6743\u9650\u6821\u9a8c\uff08\u7ecf\u5178RBAC\u68c0\u67e5\uff09</p> <ul> <li>\u7cfb\u7edf\u9996\u5148\u68c0\u67e5\u7528\u6237<code>101</code>\u7684\u89d2\u8272\u662f\u5426\u62e5\u6709 <code>article:edit</code> \u8fd9\u4e2a\u901a\u7528\u6743\u9650\u3002</li> <li>\u8fd9\u662f\u4e2a\u5feb\u901f\u7684\u524d\u7f6e\u68c0\u67e5\uff0c\u5982\u679c\u7528\u6237\u8fde\u7f16\u8f91\u6587\u7ae0\u7684\u8d44\u683c\u90fd\u6ca1\u6709\uff0c\u5c31\u76f4\u63a5\u62d2\u7edd\uff0c\u65e0\u9700\u8fdb\u884c\u4e0b\u4e00\u6b65\u3002</li> </ul> </li> <li> <p>\u7b2c\u4e8c\u6b65\uff1a\u6570\u636e\u6743\u9650\u6821\u9a8c\uff08\u5982\u679c\u7b2c\u4e00\u6b65\u901a\u8fc7\uff09</p> <ul> <li>\u7cfb\u7edf\u73b0\u5728\u9700\u8981\u5224\u65ad\uff0c\u7528\u6237<code>101</code>\u662f\u5426\u6709\u6743\u7f16\u8f91\u8fd9\u7bc7ID\u4e3a456\u7684\u7279\u5b9a\u6587\u7ae0\u3002</li> <li>\u6b64\u65f6\uff0c\u6211\u4eec\u4f1a\u53bb\u67e5\u8be2 <code>data_access_policies</code> \u8868\uff0c\u67e5\u8be2\u6761\u4ef6\u4f1a\u662f\uff1a     <code>sql     SELECT 1 FROM data_access_policies     WHERE       permission_id = (SELECT id FROM permissions WHERE permission_code = 'article:edit')       AND resource_type = 'article'       AND (         -- \u7b56\u75651: \u5141\u8bb8\u64cd\u4f5c\u6240\u6709\u6587\u7ae0         resource_id IS NULL OR resource_id = 0         OR         -- \u7b56\u75652: \u660e\u786e\u5141\u8bb8\u64cd\u4f5c\u8fd9\u7bc7\u7279\u5b9a\u7684\u6587\u7ae0         resource_id = 456       )       AND (         -- \u7b56\u75653: \u6743\u9650\u76f4\u63a5\u6388\u4e88\u7ed9\u4e86\u8be5\u7528\u6237         (principal_type = 'user' AND principal_id = 101)         OR         -- \u7b56\u75654: \u6743\u9650\u6388\u4e88\u7ed9\u4e86\u8be5\u7528\u6237\u6240\u5c5e\u7684\u67d0\u4e2a\u89d2\u8272         (principal_type = 'role' AND principal_id IN (SELECT role_id FROM user_roles WHERE user_id = 101))       )     LIMIT 1;</code></li> <li>\u5982\u679c\u4e0a\u8ff0\u67e5\u8be2\u80fd\u8fd4\u56de\u7ed3\u679c\uff0c\u8bf4\u660e\u5b58\u5728\u4e00\u6761\u7b56\u7565\u5141\u8bb8\u6b64\u64cd\u4f5c\uff0c\u6821\u9a8c\u901a\u8fc7\u3002</li> <li>\u5982\u679c\u67e5\u8be2\u6ca1\u6709\u8fd4\u56de\u7ed3\u679c\uff0c\u5373\u4f7f\u4ed6\u6709 <code>article:edit</code> \u7684\u901a\u7528\u6743\u9650\uff0c\u4e5f\u4f1a\u56e0\u4e3a\u6ca1\u6709\u5177\u4f53\u8fd9\u7bc7\u6587\u7a3f\u7684\u6570\u636e\u6743\u9650\u800c\u88ab\u62d2\u7edd\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/RBAC%E6%9D%83%E9%99%90%E7%B3%BB%E7%BB%9F%E6%80%8E%E4%B9%88%E8%AE%BE%E8%AE%A1/#_3","title":"\u793a\u4f8b\u573a\u666f\uff1a","text":"<ul> <li>\u7f16\u8f91\u81ea\u5df1\u6587\u7ae0\uff1a\u5f53\u7528\u6237\u521b\u5efa\u6587\u7ae0\u65f6\uff0c\u7cfb\u7edf\u53ef\u4ee5\u81ea\u52a8\u5728 <code>data_access_policies</code> \u8868\u4e2d\u63d2\u5165\u4e00\u6761\u8bb0\u5f55\uff1a<code>('user', user_id, 'article', new_article_id, 'article:edit')</code>\u3002</li> <li>\u90e8\u95e8\u7ecf\u7406\u67e5\u770b\u672c\u90e8\u95e8\u6570\u636e\uff1a\u53ef\u4ee5\u4e3a\u201c\u90e8\u95e8\u7ecf\u7406\u201d\u8fd9\u4e2a\u89d2\u8272\uff0c\u6279\u91cf\u63d2\u5165\u4ed6\u6240\u7ba1\u8f96\u90e8\u95e8\u6240\u6709\u5458\u5de5\u521b\u5efa\u7684\u8ba2\u5355\u7684\u67e5\u770b\u7b56\u7565\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/redis%E5%AE%9E%E7%8E%B0%E5%8F%91%E5%8F%B7%E5%99%A8/","title":"Redis\u5b9e\u73b0\u53d1\u53f7\u5668","text":"<p>\u5728\u73b0\u4ee3\u5206\u5e03\u5f0f\u7cfb\u7edf\u67b6\u6784\u4e2d\uff0c\u91c7\u7528Redis\u5b9e\u73b0\u53d1\u53f7\u5668\uff08\u5373\u5168\u5c40\u552f\u4e00ID\u751f\u6210\u5668\uff09\u800c\u975e\u76f4\u63a5\u4f7f\u7528\u6570\u636e\u5e93\u7684\u81ea\u589eID\uff0c\u4e3b\u8981\u662f\u51fa\u4e8e\u5bf9\u9ad8\u6027\u80fd\u3001\u9ad8\u53ef\u7528\u6027\u548c\u53ef\u6269\u5c55\u6027\u7684\u8003\u91cf\u3002\u6570\u636e\u5e93\u81ea\u589eID\u5728\u7b80\u5355\u7684\u5355\u4f53\u5e94\u7528\u4e2d\u8868\u73b0\u826f\u597d\uff0c\u4f46\u5728\u5927\u89c4\u6a21\u3001\u9ad8\u5e76\u53d1\u7684\u5206\u5e03\u5f0f\u573a\u666f\u4e0b\u5219\u4f1a\u66b4\u9732\u51fa\u8bf8\u591a\u5f0a\u7aef\u3002</p> <p>\u4ee5\u4e0b\u5c06\u4ece\u591a\u4e2a\u7ef4\u5ea6\u8be6\u7ec6\u8bf4\u660e\u4e3a\u4f55Redis\u662f\u66f4\u4f18\u8d8a\u7684\u9009\u62e9\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/redis%E5%AE%9E%E7%8E%B0%E5%8F%91%E5%8F%B7%E5%99%A8/#redis","title":"Redis\u4f5c\u4e3a\u53d1\u53f7\u5668\u7684\u6838\u5fc3\u4f18\u52bf","text":"<p>Redis\u5229\u7528\u5176<code>INCR</code>\u548c<code>INCRBY</code>\u8fd9\u4e24\u4e2a\u539f\u5b50\u64cd\u4f5c\u547d\u4ee4\u6765\u751f\u6210ID\u3002\u8fd9\u4e9b\u547d\u4ee4\u80fd\u591f\u5bf9\u4e00\u4e2a\u952e\uff08key\uff09\u7684\u503c\u8fdb\u884c\u539f\u5b50\u6027\u7684\u589e\u52a0\uff0c\u5e76\u8fd4\u56de\u589e\u52a0\u540e\u7684\u503c\u3002\u7531\u4e8eRedis\u662f\u57fa\u4e8e\u5185\u5b58\u64cd\u4f5c\u4e14\u5176\u547d\u4ee4\u6267\u884c\u662f\u5355\u7ebf\u7a0b\u7684\uff0c\u8fd9\u5929\u7136\u5730\u4fdd\u8bc1\u4e86\u5728\u9ad8\u5e76\u53d1\u573a\u666f\u4e0b\u751f\u6210ID\u7684\u552f\u4e00\u6027\u548c\u7ebf\u7a0b\u5b89\u5168\u6027\u3002</p> <p>1. \u5353\u8d8a\u7684\u6027\u80fd\u548c\u9ad8\u5e76\u53d1\u80fd\u529b *   \u5185\u5b58\u64cd\u4f5c vs. \u78c1\u76d8\u64cd\u4f5c\uff1aRedis\u5c06\u6570\u636e\u5b58\u50a8\u5728\u5185\u5b58\u4e2d\uff0c\u6240\u6709\u64cd\u4f5c\uff08\u5305\u62ecID\u81ea\u589e\uff09\u90fd\u5728\u5185\u5b58\u4e2d\u5b8c\u6210\uff0c\u901f\u5ea6\u6781\u5feb\u3002\u76f8\u6bd4\u4e4b\u4e0b\uff0c\u6570\u636e\u5e93\u7684\u81ea\u589eID\u9700\u8981\u5199\u5165\u78c1\u76d8\uff0c\u5e76\u6d89\u53ca\u4e8b\u52a1\u3001\u65e5\u5fd7\u548c\u9501\u673a\u5236\uff0c\u5728\u9ad8\u5e76\u53d1\u4e0b\u6027\u80fd\u8fdc\u4e0d\u53caRedis\u3002 \u636e\u57fa\u51c6\u6d4b\u8bd5\u663e\u793a\uff0cRedis\u7684INCR\u64cd\u4f5c\u6bcf\u79d2\u53ef\u5904\u7406\u8d85\u8fc710\u4e07\u6b21\u8bf7\u6c42\u3002 *   \u907f\u514d\u6570\u636e\u5e93\u9501\u7ade\u4e89\uff1a\u6570\u636e\u5e93\u4e3a\u4e86\u4fdd\u8bc1\u81ea\u589eID\u7684\u552f\u4e00\u6027\uff0c\u5728\u751f\u6210\u65b0ID\u65f6\u9700\u8981\u5bf9\u5185\u90e8\u8ba1\u6570\u5668\u52a0\u9501\u3002\u5728\u9ad8\u5e76\u53d1\u63d2\u5165\u6570\u636e\u65f6\uff0c\u8fd9\u4e2a\u9501\u4f1a\u6210\u4e3a\u4e25\u91cd\u7684\u6027\u80fd\u74f6\u9888\uff0c\u9650\u5236\u7cfb\u7edf\u7684\u5199\u5165\u541e\u5410\u91cf\u3002 \u800cRedis\u7684\u539f\u5b50\u64cd\u4f5c\u5219\u907f\u514d\u4e86\u8fd9\u79cd\u663e\u5f0f\u7684\u9501\u7ade\u4e89\u3002</p> <p>2. \u4f18\u79c0\u7684\u6c34\u5e73\u6269\u5c55\u80fd\u529b\uff08\u9002\u7528\u4e8e\u5206\u5e03\u5f0f\u7cfb\u7edf\uff09 *   \u89e3\u8026ID\u751f\u6210\u4e0e\u6570\u636e\u5e93\uff1a\u5c06\u53d1\u53f7\u5668\u670d\u52a1\u72ec\u7acb\u51fa\u6765\uff0c\u4f7f\u5176\u4e0d\u4f9d\u8d56\u4e8e\u4efb\u4f55\u7279\u5b9a\u7684\u6570\u636e\u5e93\u5b9e\u4f8b\u3002\u8fd9\u5728\u5206\u5e93\u5206\u8868\u7684\u573a\u666f\u4e0b\u81f3\u5173\u91cd\u8981\u3002 *   \u89e3\u51b3\u5206\u5e93\u5206\u8868\u96be\u9898\uff1a\u5728\u5206\u5e03\u5f0f\u67b6\u6784\u4e2d\uff0c\u6570\u636e\u901a\u5e38\u88ab\u5206\u7247\u5b58\u50a8\u5728\u591a\u4e2a\u6570\u636e\u5e93\u5b9e\u4f8b\u6216\u8868\u4e2d\u3002\u5982\u679c\u4f9d\u8d56\u5404\u5206\u7247\u7684\u81ea\u589eID\uff0c\u5c06\u65e0\u6cd5\u4fdd\u8bc1\u5168\u5c40\u552f\u4e00\u6027\u3002 \u4f8b\u5982\uff0c\u6570\u636e\u5e93A\u548c\u6570\u636e\u5e93B\u90fd\u53ef\u80fd\u751f\u6210ID\u4e3a1\u7684\u8bb0\u5f55\uff0c\u5bfc\u81f4\u51b2\u7a81\u3002 \u867d\u7136\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u4e0d\u540c\u7684\u8d77\u59cb\u503c\u548c\u6b65\u957f\uff08\u4f8b\u5982\uff0c\u8282\u70b91\u751f\u62101, 3, 5...\uff0c\u8282\u70b92\u751f\u62102, 4, 6...\uff09\u6765\u7f13\u89e3\uff0c\u4f46\u8fd9\u79cd\u65b9\u6848\u7f3a\u4e4f\u5f39\u6027\uff0c\u4e00\u65e6\u9700\u8981\u589e\u52a0\u6216\u51cf\u5c11\u6570\u636e\u5e93\u8282\u70b9\uff0c\u7ef4\u62a4\u5c06\u53d8\u5f97\u6781\u5176\u590d\u6742\u548c\u56f0\u96be\u3002 *   \u96c6\u4e2d\u5f0f\u53d1\u53f7\uff0c\u5168\u5c40\u552f\u4e00\uff1a\u4f7f\u7528Redis\u4f5c\u4e3a\u4e2d\u5fc3\u5316\u7684\u53d1\u53f7\u5668\uff0c\u6240\u6709\u5e94\u7528\u8282\u70b9\u90fd\u5411Redis\u7533\u8bf7ID\uff0c\u4ece\u800c\u8f7b\u677e\u4fdd\u8bc1\u751f\u6210\u7684ID\u5728\u6574\u4e2a\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\u7684\u5168\u5c40\u552f\u4e00\u6027\u3002</p> <p>3. \u9ad8\u53ef\u7528\u6027 *   \u907f\u514d\u5355\u70b9\u6545\u969c\uff1a\u6570\u636e\u5e93\u81ea\u589eID\u901a\u5e38\u4f9d\u8d56\u4e8e\u4e3b\u6570\u636e\u5e93\u3002\u4e00\u65e6\u4e3b\u5e93\u53d1\u751f\u6545\u969c\uff0c\u6574\u4e2a\u7cfb\u7edf\u7684\u5199\u5165\u64cd\u4f5c\uff08\u9700\u8981\u65b0ID\u7684\u4e1a\u52a1\uff09\u90fd\u4f1a\u88ab\u963b\u585e\u3002 *   \u96c6\u7fa4\u652f\u6301\uff1aRedis\u53ef\u4ee5\u901a\u8fc7\u54e8\u5175\uff08Sentinel\uff09\u6216\u96c6\u7fa4\uff08Cluster\uff09\u6a21\u5f0f\u90e8\u7f72\uff0c\u5b9e\u73b0\u9ad8\u53ef\u7528\u3002\u5f53\u4e3b\u8282\u70b9\u6545\u969c\u65f6\uff0c\u7cfb\u7edf\u53ef\u4ee5\u81ea\u52a8\u5207\u6362\u5230\u4ece\u8282\u70b9\uff0c\u4fdd\u8bc1\u53d1\u53f7\u670d\u52a1\u7684\u6301\u7eed\u53ef\u7528\u3002</p> <p>4. \u7075\u6d3b\u6027\u548c\u5b9a\u5236\u5316 *   \u81ea\u5b9a\u4e49ID\u683c\u5f0f\uff1a\u4f7f\u7528Redis\u53ef\u4ee5\u975e\u5e38\u65b9\u4fbf\u5730\u5b9e\u73b0\u590d\u6742\u7684ID\u751f\u6210\u89c4\u5219\u3002\u4f8b\u5982\uff0c\u53ef\u4ee5\u5c06\u4e1a\u52a1\u524d\u7f00\u3001\u65e5\u671f\u65f6\u95f4\u6233\u548cRedis\u751f\u6210\u7684\u5e8f\u5217\u53f7\u62fc\u63a5\u8d77\u6765\uff0c\u5f62\u6210\u66f4\u5177\u53ef\u8bfb\u6027\u548c\u4e1a\u52a1\u542b\u4e49\u7684ID\uff08\u5982\uff1aORDER-20250903-000001\uff09\u3002 *   \u652f\u6301\u6309\u5468\u671f\u91cd\u7f6e\uff1a\u5229\u7528Redis\u7684\u8fc7\u671f\u65f6\u95f4\u7279\u6027\uff0c\u53ef\u4ee5\u8f7b\u677e\u5b9e\u73b0\u5e8f\u5217\u53f7\u7684\u6309\u5929\u6216\u6309\u6708\u91cd\u7f6e\uff0c\u8fd9\u5bf9\u4e8e\u751f\u6210\u6d41\u6c34\u53f7\u7b49\u9700\u6c42\u975e\u5e38\u6709\u7528\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/redis%E5%AE%9E%E7%8E%B0%E5%8F%91%E5%8F%B7%E5%99%A8/#id","title":"\u6570\u636e\u5e93\u81ea\u589eID\u7684\u5c40\u9650\u6027","text":"<p>\u5c3d\u7ba1\u4f7f\u7528\u7b80\u5355\u662f\u5176\u4f18\u70b9\uff0c\u4f46\u5728\u73b0\u4ee3\u5e94\u7528\u4e2d\uff0c\u5176\u7f3a\u70b9\u975e\u5e38\u7a81\u51fa\uff1a</p> <ul> <li>\u6027\u80fd\u74f6\u9888\uff1a\u5982\u524d\u6240\u8ff0\uff0c\u9ad8\u5e76\u53d1\u4e0b\u7684\u9501\u7ade\u4e89\u95ee\u9898\u4f1a\u4e25\u91cd\u9650\u5236\u7cfb\u7edf\u6027\u80fd\u3002</li> <li>\u6269\u5c55\u6027\u5dee\uff1a\u5728\u5206\u5e93\u5206\u8868\u7684\u5206\u5e03\u5f0f\u67b6\u6784\u4e2d\uff0c\u65e0\u6cd5\u4fdd\u8bc1ID\u7684\u5168\u5c40\u552f\u4e00\u6027\u548c\u8fde\u7eed\u9012\u589e\uff0c\u6269\u5c55\u975e\u5e38\u56f0\u96be\u3002</li> <li>\u4e3b\u952e\u4f9d\u8d56\u4e0e\u8026\u5408\uff1aID\u7684\u751f\u6210\u4e0e\u6570\u636e\u5b58\u50a8\u7d27\u5bc6\u8026\u5408\uff0c\u4e0d\u5229\u4e8e\u7cfb\u7edf\u67b6\u6784\u7684\u6f14\u8fdb\u548c\u7ef4\u62a4\u3002</li> <li>\u5b89\u5168\u6027\u95ee\u9898\uff1a\u8fde\u7eed\u7684\u81ea\u589eID\u5bb9\u6613\u66b4\u9732\u4e1a\u52a1\u654f\u611f\u4fe1\u606f\uff0c\u4f8b\u5982\u901a\u8fc7\u8ba2\u5355\u53f7\u7684\u5dee\u503c\u53ef\u4ee5\u8f7b\u6613\u63a8\u7b97\u51fa\u6bcf\u65e5\u7684\u8ba2\u5355\u91cf\u3002 \u653b\u51fb\u8005\u4e5f\u66f4\u5bb9\u6613\u901a\u8fc7\u904d\u5386ID\u6765\u722c\u53d6\u6570\u636e\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/redis%E5%AE%9E%E7%8E%B0%E5%8F%91%E5%8F%B7%E5%99%A8/#redis_1","title":"\u4f7f\u7528Redis\u4f5c\u4e3a\u53d1\u53f7\u5668\u7684\u6ce8\u610f\u4e8b\u9879","text":"<p>\u867d\u7136Redis\u4f18\u52bf\u660e\u663e\uff0c\u4f46\u4e5f\u5b58\u5728\u4e00\u4e9b\u9700\u8981\u6ce8\u610f\u7684\u5730\u65b9\uff1a</p> <ul> <li>\u589e\u52a0\u4e86\u7cfb\u7edf\u590d\u6742\u6027\uff1a\u5f15\u5165\u4e86Redis\u4f5c\u4e3a\u65b0\u7684\u5916\u90e8\u4f9d\u8d56\uff0c\u9700\u8981\u5bf9\u5176\u8fdb\u884c\u90e8\u7f72\u3001\u76d1\u63a7\u548c\u7ef4\u62a4\u3002</li> <li>\u6570\u636e\u6301\u4e45\u5316\u98ce\u9669\uff1a\u5982\u679cRedis\u5b9e\u4f8b\u53d1\u751f\u5b95\u673a\u4e14\u6ca1\u6709\u914d\u7f6e\u5408\u9002\u7684\u6301\u4e45\u5316\u7b56\u7565\uff08\u5982AOF\u6216RDB\uff09\uff0c\u5185\u5b58\u4e2d\u7684ID\u8ba1\u6570\u53ef\u80fd\u4f1a\u4e22\u5931\uff0c\u5bfc\u81f4\u91cd\u542f\u540e\u751f\u6210\u91cd\u590d\u7684ID\u3002 \u56e0\u6b64\uff0c\u5fc5\u987b\u8c28\u614e\u914d\u7f6eRedis\u7684\u6301\u4e45\u5316\u673a\u5236\u4ee5\u786e\u4fdd\u6570\u636e\u5b89\u5168\u3002</li> <li>\u7f51\u7edc\u5f00\u9500\uff1a\u6bcf\u6b21\u83b7\u53d6ID\u90fd\u9700\u8981\u4e00\u6b21\u7f51\u7edc\u8bf7\u6c42\uff0c\u5c3d\u7ba1Redis\u6027\u80fd\u5f88\u9ad8\uff0c\u4f46\u5728\u6781\u7aef\u573a\u666f\u4e0b\u7f51\u7edc\u5ef6\u8fdf\u4e5f\u9700\u8981\u88ab\u8003\u8651\u3002</li> </ul> \u7279\u6027 Redis\u53d1\u53f7\u5668 \u6570\u636e\u5e93\u81ea\u589eID \u6027\u80fd \u6781\u9ad8 (\u5185\u5b58\u64cd\u4f5c\uff0c\u539f\u5b50\u547d\u4ee4) \u4e00\u822c (\u78c1\u76d8I/O\uff0c\u9501\u7ade\u4e89) \u5e76\u53d1\u80fd\u529b \u975e\u5e38\u9ad8 \u6709\u9650 (\u6613\u6210\u4e3a\u74f6\u9888) \u5206\u5e03\u5f0f\u652f\u6301 \u4f18\u79c0 (\u8f7b\u677e\u5b9e\u73b0\u5168\u5c40\u552f\u4e00) \u5dee (\u5206\u5e93\u5206\u8868\u4e0b\u96be\u4ee5\u5904\u7406) \u53ef\u7528\u6027 \u9ad8 (\u53ef\u901a\u8fc7\u96c6\u7fa4\u4fdd\u8bc1) \u4e00\u822c (\u4f9d\u8d56\u4e3b\u5e93\uff0c\u6613\u5355\u70b9\u6545\u969c) \u7075\u6d3b\u6027 \u9ad8 (\u652f\u6301\u81ea\u5b9a\u4e49\u683c\u5f0f\u548c\u89c4\u5219) \u4f4e (\u683c\u5f0f\u56fa\u5b9a) \u7cfb\u7edf\u8026\u5408 \u4f4e (\u4e0e\u6570\u636e\u5e93\u89e3\u8026) \u9ad8 (\u4e0e\u6570\u636e\u8868\u5f3a\u8026\u5408) \u5b9e\u73b0\u590d\u6742\u5ea6 \u5f15\u5165\u65b0\u7ec4\u4ef6\uff0c\u9700\u8003\u8651\u6301\u4e45\u5316 \u5b9e\u73b0\u7b80\u5355\uff0c\u6570\u636e\u5e93\u539f\u751f\u652f\u6301"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/reids%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%B8%80%E8%87%B4%E6%80%A7%E9%97%AE%E9%A2%98/","title":"Reids\u548c\u6570\u636e\u5e93\u7684\u4e00\u81f4\u6027\u95ee\u9898","text":"<p>\u5f53Redis\u4f5c\u4e3a\u7f13\u5b58\u6216\u8f85\u52a9\u5b58\u50a8\u4e0e\u5173\u7cfb\u578b\u6570\u636e\u5e93\uff08\u6216\u5176\u4ed6\u6301\u4e45\u5316\u5b58\u50a8\uff09\u4e00\u8d77\u4f7f\u7528\u65f6\uff0c\u4fdd\u6301\u4e24\u8005\u6570\u636e\u7684\u4e00\u81f4\u6027\u662f\u4e00\u4e2a\u5e38\u89c1\u7684\u6311\u6218\u3002\u7531\u4e8e\u6570\u636e\u5728\u4e24\u4e2a\u4e0d\u540c\u7684\u5b58\u50a8\u7cfb\u7edf\u4e4b\u95f4\u5b58\u5728\u5197\u4f59\uff0c\u5e76\u4e14\u66f4\u65b0\u8def\u5f84\u53ef\u80fd\u4e0d\u540c\uff0c\u56e0\u6b64\u5f88\u5bb9\u6613\u51fa\u73b0\u6570\u636e\u4e0d\u4e00\u81f4\u7684\u95ee\u9898\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/reids%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%B8%80%E8%87%B4%E6%80%A7%E9%97%AE%E9%A2%98/#_1","title":"\u4e3a\u4ec0\u4e48\u4f1a\u51fa\u73b0\u4e00\u81f4\u6027\u95ee\u9898\uff1f","text":"<ol> <li>\u6570\u636e\u5197\u4f59\uff1a \u540c\u4e00\u4efd\u6570\u636e\u540c\u65f6\u5b58\u5728\u4e8eRedis\u548c\u6570\u636e\u5e93\u4e2d\u3002</li> <li>\u66f4\u65b0\u8def\u5f84\u4e0d\u540c\uff1a \u5e94\u7528\u7a0b\u5e8f\u901a\u5e38\u4f1a\u76f4\u63a5\u4e0eRedis\u548c\u6570\u636e\u5e93\u4ea4\u4e92\u3002\u5982\u679c\u66f4\u65b0\u53ea\u4f5c\u7528\u4e8e\u5176\u4e2d\u4e00\u4e2a\uff0c\u6216\u8005\u66f4\u65b0\u987a\u5e8f\u3001\u65f6\u673a\u4e0d\u540c\uff0c\u5c31\u4f1a\u5bfc\u81f4\u6570\u636e\u4e0d\u4e00\u81f4\u3002</li> <li>\u5206\u5e03\u5f0f\u73af\u5883\uff1a \u5728\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\uff0c\u7f51\u7edc\u5ef6\u8fdf\u3001\u8282\u70b9\u6545\u969c\u3001\u5e76\u53d1\u8bbf\u95ee\u7b49\u90fd\u53ef\u80fd\u52a0\u5267\u4e00\u81f4\u6027\u95ee\u9898\u3002</li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/reids%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%B8%80%E8%87%B4%E6%80%A7%E9%97%AE%E9%A2%98/#_2","title":"\u5e38\u89c1\u7684\u4e00\u81f4\u6027\u95ee\u9898","text":"<ol> <li> <p>\u7f13\u5b58\u4e0e\u6570\u636e\u5e93\u6570\u636e\u4e0d\u4e00\u81f4\uff08\u6700\u5e38\u89c1\uff09</p> <ul> <li>\u810f\u8bfb/\u5e7b\u8bfb\uff1a \u5f53\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u5df2\u7ecf\u66f4\u65b0\uff0c\u4f46Redis\u4e2d\u4ecd\u7136\u4fdd\u7559\u7740\u65e7\u7684\uff08stale\uff09\u6570\u636e\uff0c\u6b64\u65f6\u5982\u679c\u8bf7\u6c42\u4eceRedis\u83b7\u53d6\u6570\u636e\uff0c\u5c31\u4f1a\u8bfb\u5230\u65e7\u503c\u3002</li> <li>\u5199\u4e22\u5931\uff1a \u5728\u7279\u5b9a\u5e76\u53d1\u573a\u666f\u4e0b\uff0c\u5982\u679c\u66f4\u65b0\u64cd\u4f5c\u5904\u7406\u4e0d\u5f53\uff0c\u53ef\u80fd\u5bfc\u81f4\u6570\u636e\u5e93\u6216Redis\u4e2d\u7684\u67d0\u6b21\u66f4\u65b0\u4e22\u5931\u3002</li> </ul> </li> <li> <p>\u7f13\u5b58\u7a7f\u900f (Cache Penetration)</p> <ul> <li>\u67e5\u8be2\u4e00\u4e2a\u5728Redis\u548c\u6570\u636e\u5e93\u4e2d\u90fd\u4e0d\u5b58\u5728\u7684key\u3002\u6bcf\u6b21\u8fd9\u6837\u7684\u67e5\u8be2\u90fd\u4f1a\u76f4\u63a5\u6253\u5230\u6570\u636e\u5e93\uff0c\u5bfc\u81f4\u6570\u636e\u5e93\u538b\u529b\u589e\u5927\uff0c\u751a\u81f3\u88ab\u6253\u57ae\u3002</li> </ul> </li> <li> <p>\u7f13\u5b58\u51fb\u7a7f (Cache Breakdown)</p> <ul> <li>\u67d0\u4e2a\u70ed\u70b9key\u5728Redis\u4e2d\u8fc7\u671f\uff0c\u6b64\u65f6\u5927\u91cf\u5e76\u53d1\u8bf7\u6c42\u540c\u65f6\u67e5\u8be2\u8fd9\u4e2akey\u3002\u6240\u6709\u8fd9\u4e9b\u8bf7\u6c42\u90fd\u4f1a\u7a7f\u900f\u7f13\u5b58\uff0c\u76f4\u63a5\u6253\u5230\u6570\u636e\u5e93\uff0c\u9020\u6210\u6570\u636e\u5e93\u77ac\u95f4\u538b\u529b\u8fc7\u5927\u3002</li> </ul> </li> <li> <p>\u7f13\u5b58\u96ea\u5d29 (Cache Avalanche)</p> <ul> <li>Redis\u4e2d\u5927\u6279\u91cf\u7684key\u5728\u540c\u4e00\u65f6\u95f4\u8fc7\u671f\u3002\u8fd9\u4f1a\u5bfc\u81f4\u5927\u91cf\u7684\u8bf7\u6c42\u540c\u65f6\u7a7f\u900f\u7f13\u5b58\uff0c\u6253\u5230\u6570\u636e\u5e93\uff0c\u6570\u636e\u5e93\u7684\u8d1f\u8f7d\u77ac\u95f4\u98d9\u5347\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/reids%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%B8%80%E8%87%B4%E6%80%A7%E9%97%AE%E9%A2%98/#redis","title":"\u89e3\u51b3Redis\u4e0e\u6570\u636e\u5e93\u4e00\u81f4\u6027\u95ee\u9898\u7684\u7b56\u7565","text":"<p>\u4e3b\u8981\u7b56\u7565\u56f4\u7ed5\u7740\u8bfb\u5199\u64cd\u4f5c\u8fdb\u884c\uff0c\u4ee5\u786e\u4fddRedis\u4e2d\u7684\u6570\u636e\u4e0e\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u5c3d\u53ef\u80fd\u4fdd\u6301\u540c\u6b65\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/reids%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%B8%80%E8%87%B4%E6%80%A7%E9%97%AE%E9%A2%98/#1","title":"1. \u7f13\u5b58\u66f4\u65b0\u7b56\u7565","text":"<p>\u8fd9\u4e9b\u7b56\u7565\u4e3b\u8981\u89e3\u51b3 \"\u7f13\u5b58\u4e0e\u6570\u636e\u5e93\u6570\u636e\u4e0d\u4e00\u81f4\" \u7684\u95ee\u9898\u3002</p> <ul> <li> <p>1.1 Cache Aside (\u65c1\u8def\u7f13\u5b58)     \u8fd9\u662f\u6700\u5e38\u7528\u4e5f\u662f\u6700\u7075\u6d3b\u7684\u7b56\u7565\u3002</p> <ul> <li>\u8bfb\u64cd\u4f5c\uff1a<ol> <li>\u5148\u4eceRedis\u4e2d\u8bfb\u53d6\u6570\u636e\u3002</li> <li>\u5982\u679cRedis\u4e2d\u5b58\u5728\uff08\u547d\u4e2d\uff09\uff0c\u5219\u76f4\u63a5\u8fd4\u56de\u3002</li> <li>\u5982\u679cRedis\u4e2d\u4e0d\u5b58\u5728\uff08\u672a\u547d\u4e2d\uff09\uff0c\u5219\u4ece\u6570\u636e\u5e93\u4e2d\u8bfb\u53d6\u6570\u636e\u3002</li> <li>\u5c06\u4ece\u6570\u636e\u5e93\u8bfb\u53d6\u7684\u6570\u636e\u5199\u5165Redis\uff0c\u5e76\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\u3002</li> <li>\u8fd4\u56de\u6570\u636e\u3002</li> </ol> </li> <li>\u5199\u64cd\u4f5c\uff08\u5173\u952e\u70b9\uff09\uff1a<ol> <li>\u5148\u66f4\u65b0\u6570\u636e\u5e93\uff0c\u518d\u5220\u9664/\u5931\u6548Redis\u4e2d\u7684\u7f13\u5b58\u3002<ul> <li>\u4f18\u70b9\uff1a \u7b80\u5355\u5b9e\u7528\u3002\u5982\u679c\u5220\u9664\u7f13\u5b58\u5931\u8d25\uff0c\u540e\u7eed\u8bfb\u64cd\u4f5c\u4f1a\u4ece\u6570\u636e\u5e93\u52a0\u8f7d\u65b0\u6570\u636e\u5e76\u66f4\u65b0\u7f13\u5b58\uff0c\u6700\u7ec8\u4f1a\u4e00\u81f4\u3002</li> <li>\u95ee\u9898\uff1a<ul> <li>\u5148\u5220\u9664\u7f13\u5b58\uff0c\u518d\u66f4\u65b0\u6570\u636e\u5e93\uff1a \u5982\u679c\u5220\u9664\u7f13\u5b58\u6210\u529f\uff0c\u4f46\u66f4\u65b0\u6570\u636e\u5e93\u5931\u8d25\uff0c\u90a3\u4e48\u7f13\u5b58\u4e2d\u5c31\u662f\u65e7\u6570\u636e\uff08\u6b64\u65f6\u6ca1\u6709\u7f13\u5b58\uff09\uff0c\u6570\u636e\u5e93\u662f\u65e7\u6570\u636e\uff0c\u4e0b\u6b21\u8bfb\u8bf7\u6c42\u4f1a\u76f4\u63a5\u4ece\u6570\u636e\u5e93\u8bfb\u5230\u65e7\u6570\u636e\uff0c\u5e76\u5199\u5165\u7f13\u5b58\uff0c\u9020\u6210\u6570\u636e\u4e0d\u4e00\u81f4\u3002</li> <li>\u5220\u9664\u7f13\u5b58\u4e0e\u66f4\u65b0\u6570\u636e\u5e93\u7684\u539f\u5b50\u6027\u95ee\u9898\uff1a \u5728\u5e76\u53d1\u573a\u666f\u4e0b\uff0c\u53ef\u80fd\u51fa\u73b0\u4ee5\u4e0b\u60c5\u51b5\u5bfc\u81f4\u4e0d\u4e00\u81f4\uff1a<ol> <li>\u7ebf\u7a0bA\u5220\u9664\u7f13\u5b58\u3002</li> <li>\u7ebf\u7a0bB\u8bfb\u53d6\u7f13\u5b58\u672a\u547d\u4e2d\uff0c\u4ece\u6570\u636e\u5e93\u8bfb\u53d6\u65e7\u503c\u3002</li> <li>\u7ebf\u7a0bA\u66f4\u65b0\u6570\u636e\u5e93\u3002</li> <li>\u7ebf\u7a0bB\u5c06\u65e7\u503c\u5199\u5165\u7f13\u5b58\u3002 \u6b64\u65f6\u7f13\u5b58\u4e2d\u662f\u65e7\u6570\u636e\uff0c\u6570\u636e\u5e93\u4e2d\u662f\u65b0\u6570\u636e\uff0c\u4ea7\u751f\u4e0d\u4e00\u81f4\u3002</li> </ol> </li> </ul> </li> <li>\u63a8\u8350\u65b9\u6848\uff1a\u5148\u66f4\u65b0\u6570\u636e\u5e93\uff0c\u518d\u5220\u9664\u7f13\u5b58\u3002 \u867d\u7136\u7406\u8bba\u4e0a\u4ecd\u6709\u4f4e\u6982\u7387\u51fa\u73b0\u4e0d\u4e00\u81f4\uff08\u5728\u66f4\u65b0\u6570\u636e\u5e93\u6210\u529f\u540e\uff0c\u5220\u9664\u7f13\u5b58\u5931\u8d25\uff0c\u4e14\u5728\u8fd9\u4e4b\u95f4\u6709\u8bfb\u8bf7\u6c42\u547d\u4e2d\u7f13\u5b58\uff09\uff0c\u4f46\u8fd9\u79cd\u4e0d\u4e00\u81f4\u662f\u6682\u65f6\u7684\uff0c\u5e76\u4e14\u53ef\u4ee5\u901a\u8fc7 \u91cd\u8bd5\u673a\u5236\uff08\u5982\u5c06\u5f85\u5220\u9664\u7684key\u653e\u5165\u6d88\u606f\u961f\u5217\uff0c\u5f02\u6b65\u91cd\u8bd5\u5220\u9664\uff09\u6216 \u53cc\u5220\u7b56\u7565\uff08\u5148\u5220\u9664\u7f13\u5b58\uff0c\u518d\u66f4\u65b0\u6570\u636e\u5e93\uff0c\u6700\u540e\u518d\u6b21\u5220\u9664\u7f13\u5b58\uff0c\u4ee5\u5e94\u5bf9\u4e0a\u9762\u8bf4\u7684\u5e76\u53d1\u95ee\u9898\uff09\u6765\u964d\u4f4e\u98ce\u9669\u3002</li> </ul> </li> </ol> </li> </ul> </li> <li> <p>1.2 Write Through (\u76f4\u5199\u5f0f)</p> <ul> <li>\u5199\u64cd\u4f5c\uff1a \u6570\u636e\u540c\u65f6\u5199\u5165Redis\u548c\u6570\u636e\u5e93\u3002</li> <li>\u8bfb\u64cd\u4f5c\uff1a \u53ea\u4eceRedis\u8bfb\u53d6\u6570\u636e\u3002</li> <li>\u4f18\u70b9\uff1a \u4fdd\u8bc1\u4e86Redis\u548c\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u6570\u636e\u5f3a\u4e00\u81f4\u6027\u3002</li> <li>\u7f3a\u70b9\uff1a \u5199\u5165\u6027\u80fd\u53d7\u9650\u4e8e\u6570\u636e\u5e93\u7684\u5199\u5165\u901f\u5ea6\uff1b\u5f53Redis\u4f5c\u4e3a\u72ec\u7acb\u7f13\u5b58\u5c42\u65f6\uff0c\u5b9e\u73b0\u590d\u6742\uff08\u9700\u8981Redis\u81ea\u8eab\u5177\u5907\u5c06\u6570\u636e\u5199\u5165\u6570\u636e\u5e93\u7684\u80fd\u529b\uff0c\u6216\u8005\u901a\u8fc7\u5e94\u7528\u5c42\u903b\u8f91\u6a21\u62df\uff09\u3002\u5e38\u7528\u4e8e\u5bf9\u6570\u636e\u4e00\u81f4\u6027\u8981\u6c42\u975e\u5e38\u9ad8\uff0c\u4e14\u5199\u5165\u64cd\u4f5c\u8f83\u5c11\u7684\u573a\u666f\u3002</li> </ul> </li> <li> <p>1.3 Write Back (\u56de\u5199\u5f0f)</p> <ul> <li>\u5199\u64cd\u4f5c\uff1a \u6570\u636e\u4f18\u5148\u5199\u5165Redis\uff0c\u7136\u540e\u5f02\u6b65\u5730\u6279\u91cf\u5199\u5165\u6570\u636e\u5e93\u3002</li> <li>\u8bfb\u64cd\u4f5c\uff1a \u53ea\u4eceRedis\u8bfb\u53d6\u6570\u636e\u3002</li> <li>\u4f18\u70b9\uff1a \u5199\u5165\u6027\u80fd\u6781\u9ad8\u3002</li> <li>\u7f3a\u70b9\uff1a \u6570\u636e\u53ef\u80fd\u4e22\u5931\uff08\u5982\u679cRedis\u5728\u6570\u636e\u672a\u56de\u5199\u5230\u6570\u636e\u5e93\u4e4b\u524d\u5d29\u6e83\uff09\uff0c\u6570\u636e\u4e00\u81f4\u6027\u662f\u6700\u7ec8\u4e00\u81f4\u6027\u800c\u975e\u5f3a\u4e00\u81f4\u6027\u3002\u9002\u7528\u4e8e\u5bf9\u5199\u5165\u6027\u80fd\u8981\u6c42\u6781\u9ad8\uff0c\u4e14\u5141\u8bb8\u4e00\u5b9a\u6570\u636e\u4e22\u5931\u6216\u5ef6\u8fdf\u4e00\u81f4\u6027\u7684\u573a\u666f\uff08\u5982\u65e5\u5fd7\u3001\u8ba1\u6570\u5668\uff09\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/reids%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%B8%80%E8%87%B4%E6%80%A7%E9%97%AE%E9%A2%98/#2","title":"2. \u89e3\u51b3\u7f13\u5b58\u7a7f\u900f","text":"<ul> <li> <p>2.1 \u7f13\u5b58\u7a7a\u503c (Cache Null Objects)</p> <ul> <li>\u5f53\u4ece\u6570\u636e\u5e93\u67e5\u8be2\u7ed3\u679c\u4e3a\u7a7a\u65f6\uff0c\u4e5f\u5c06\u8fd9\u4e2a\u7a7a\u7ed3\u679c\uff08\u4f8b\u5982\u4e00\u4e2a\u7279\u6b8a\u6807\u8bb0\u6216\u7a7a\u5b57\u7b26\u4e32\uff09\u7f13\u5b58\u5230Redis\u4e2d\uff0c\u5e76\u8bbe\u7f6e\u4e00\u4e2a\u8f83\u77ed\u7684\u8fc7\u671f\u65f6\u95f4\u3002</li> <li>\u4f18\u70b9\uff1a \u540e\u7eed\u5bf9\u540c\u4e00\u4e2a\u4e0d\u5b58\u5728key\u7684\u67e5\u8be2\u4f1a\u76f4\u63a5\u4eceRedis\u8fd4\u56de\u7a7a\u503c\uff0c\u907f\u514d\u518d\u6b21\u67e5\u8be2\u6570\u636e\u5e93\u3002</li> <li>\u7f3a\u70b9\uff1a \u989d\u5916\u7684\u5185\u5b58\u5f00\u9500\uff1b\u9700\u8981\u4e3a\u4e1a\u52a1\u5224\u65ad\u7a7a\u503c\u3002</li> </ul> </li> <li> <p>2.2 \u5e03\u9686\u8fc7\u6ee4\u5668 (Bloom Filter)</p> <ul> <li>\u5728Redis\u4e4b\u524d\u52a0\u4e00\u5c42\u5e03\u9686\u8fc7\u6ee4\u5668\u3002\u5c06\u6240\u6709\u53ef\u80fd\u5b58\u5728\u7684key\u7684\u54c8\u5e0c\u503c\u5b58\u653e\u5728\u5e03\u9686\u8fc7\u6ee4\u5668\u4e2d\u3002</li> <li>\u67e5\u8be2\u6d41\u7a0b\uff1a<ol> <li>\u8bf7\u6c42\u5148\u7ecf\u8fc7\u5e03\u9686\u8fc7\u6ee4\u5668\u3002</li> <li>\u5982\u679c\u5e03\u9686\u8fc7\u6ee4\u5668\u5224\u65adkey\u4e0d\u5b58\u5728\uff0c\u5219\u76f4\u63a5\u8fd4\u56de\uff0c\u4e0d\u67e5\u8be2Redis\u548c\u6570\u636e\u5e93\u3002</li> <li>\u5982\u679c\u5e03\u9686\u8fc7\u6ee4\u5668\u5224\u65adkey\u53ef\u80fd\u5b58\u5728\uff08\u6709\u8bef\u5224\u7387\uff09\uff0c\u5219\u7ee7\u7eed\u67e5\u8be2Redis\u3002</li> </ol> </li> <li>\u4f18\u70b9\uff1a \u5185\u5b58\u6548\u7387\u9ad8\uff0c\u80fd\u591f\u5feb\u901f\u5224\u65adkey\u662f\u5426\u4e0d\u5b58\u5728\uff0c\u5927\u5e45\u51cf\u5c11\u6570\u636e\u5e93\u538b\u529b\u3002</li> <li>\u7f3a\u70b9\uff1a \u6709\u4e00\u5b9a\u7684\u8bef\u5224\u7387\uff08\u5373\u5e03\u9686\u8fc7\u6ee4\u5668\u53ef\u80fd\u5224\u65adkey\u5b58\u5728\uff0c\u4f46\u5b9e\u9645\u4e0d\u5b58\u5728\uff0c\u5bfc\u81f4\u591a\u4e00\u6b21Redis\u67e5\u8be2\uff09\uff1b\u65e0\u6cd5\u5220\u9664\u5143\u7d20\u3002\u9002\u7528\u4e8e\u5bf9\u67e5\u8be2\u901f\u5ea6\u548c\u5185\u5b58\u8981\u6c42\u9ad8\u7684\u573a\u666f\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/reids%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%B8%80%E8%87%B4%E6%80%A7%E9%97%AE%E9%A2%98/#3","title":"3. \u89e3\u51b3\u7f13\u5b58\u51fb\u7a7f","text":"<ul> <li> <p>3.1 \u4e92\u65a5\u9501 (Mutex Lock / Distributed Lock)</p> <ul> <li>\u5f53\u4e00\u4e2a\u70ed\u70b9key\u8fc7\u671f\u65f6\uff0c\u7b2c\u4e00\u4e2a\u8bf7\u6c42\u53bb\u91cd\u5efa\u7f13\u5b58\uff0c\u540c\u65f6\u83b7\u53d6\u4e00\u4e2a\u5206\u5e03\u5f0f\u9501\u3002</li> <li>\u5176\u4ed6\u5e76\u53d1\u8bf7\u6c42\u5728\u83b7\u53d6\u9501\u5931\u8d25\u540e\uff0c\u8fdb\u884c\u7b49\u5f85\uff08\u4f8b\u5982\u4f7f\u7528<code>sleep</code>\u6216\u81ea\u65cb\uff09\uff0c\u76f4\u5230\u6301\u6709\u9501\u7684\u7ebf\u7a0b\u91cd\u5efa\u7f13\u5b58\u5b8c\u6210\uff0c\u7136\u540e\u91cd\u65b0\u5c1d\u8bd5\u4eceRedis\u8bfb\u53d6\u3002</li> <li>\u4f18\u70b9\uff1a \u4fdd\u8bc1\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u53bb\u91cd\u5efa\u7f13\u5b58\uff0c\u51cf\u8f7b\u6570\u636e\u5e93\u538b\u529b\u3002</li> <li>\u7f3a\u70b9\uff1a \u5f15\u5165\u9501\u7684\u5f00\u9500\u548c\u590d\u6742\u6027\uff0c\u53ef\u80fd\u589e\u52a0\u7b49\u5f85\u65f6\u95f4\u3002</li> </ul> </li> <li> <p>3.2 \u6c38\u4e0d\u8fc7\u671f / \u903b\u8f91\u8fc7\u671f</p> <ul> <li>\u4e0d\u7ed9\u70ed\u70b9key\u8bbe\u7f6e\u7269\u7406\u8fc7\u671f\u65f6\u95f4\uff0c\u6216\u8005\u8bbe\u7f6e\u4e00\u4e2a\u975e\u5e38\u957f\u7684\u8fc7\u671f\u65f6\u95f4\u3002</li> <li>\u5728Redis\u4e2d\u5b58\u50a8\u6570\u636e\u65f6\uff0c\u989d\u5916\u5e26\u4e0a\u4e00\u4e2a\u903b\u8f91\u8fc7\u671f\u65f6\u95f4\u5b57\u6bb5\u3002</li> <li>\u8bfb\u64cd\u4f5c\uff1a<ol> <li>\u4eceRedis\u8bfb\u53d6\u6570\u636e\u548c\u5176\u903b\u8f91\u8fc7\u671f\u65f6\u95f4\u3002</li> <li>\u5982\u679c\u903b\u8f91\u8fc7\u671f\u65f6\u95f4\u5df2\u5230\uff0c\u5219\u5f02\u6b65\u542f\u52a8\u4e00\u4e2a\u540e\u53f0\u7ebf\u7a0b\u53bb\u6570\u636e\u5e93\u52a0\u8f7d\u65b0\u6570\u636e\u5e76\u66f4\u65b0Redis\uff0c\u540c\u65f6\u7acb\u5373\u8fd4\u56deRedis\u4e2d\u7684\u65e7\u6570\u636e\uff08\u6682\u65f6\u63d0\u4f9b\u65e7\u6570\u636e\uff09\u3002</li> <li>\u5982\u679c\u903b\u8f91\u8fc7\u671f\u65f6\u95f4\u672a\u5230\uff0c\u5219\u76f4\u63a5\u8fd4\u56deRedis\u6570\u636e\u3002</li> </ol> </li> <li>\u4f18\u70b9\uff1a \u59cb\u7ec8\u6709\u6570\u636e\u8fd4\u56de\uff0c\u4e0d\u4f1a\u51fb\u7a7f\u6570\u636e\u5e93\u3002</li> <li>\u7f3a\u70b9\uff1a \u7f13\u5b58\u6570\u636e\u53ef\u80fd\u77ed\u6682\u4e0d\u4e00\u81f4\uff0c\u9700\u8981\u540e\u53f0\u5f02\u6b65\u66f4\u65b0\u673a\u5236\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/reids%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%B8%80%E8%87%B4%E6%80%A7%E9%97%AE%E9%A2%98/#4","title":"4. \u89e3\u51b3\u7f13\u5b58\u96ea\u5d29","text":"<ul> <li> <p>4.1 \u9519\u5f00\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4</p> <ul> <li>\u4e3aRedis\u4e2d\u7684key\u8bbe\u7f6e\u4e0d\u540c\u7684\u8fc7\u671f\u65f6\u95f4\uff0c\u907f\u514d\u5927\u91cfkey\u540c\u65f6\u8fc7\u671f\u3002\u53ef\u4ee5\u5728\u539f\u6709\u8fc7\u671f\u65f6\u95f4\u57fa\u7840\u4e0a\u52a0\u4e0a\u4e00\u4e2a\u968f\u673a\u503c\u3002</li> <li>\u4f18\u70b9\uff1a \u7b80\u5355\u6709\u6548\u3002</li> <li>\u7f3a\u70b9\uff1a \u65e0\u6cd5\u5b8c\u5168\u907f\u514d\uff0c\u53ea\u662f\u964d\u4f4e\u540c\u65f6\u8fc7\u671f\u7684\u6982\u7387\u3002</li> </ul> </li> <li> <p>4.2 \u7f13\u5b58\u9884\u70ed</p> <ul> <li>\u5728\u7cfb\u7edf\u542f\u52a8\u65f6\u6216\u4e1a\u52a1\u9ad8\u5cf0\u671f\u5230\u6765\u4e4b\u524d\uff0c\u63d0\u524d\u5c06\u70ed\u70b9\u6570\u636e\u52a0\u8f7d\u5230Redis\u4e2d\uff0c\u5e76\u8bbe\u7f6e\u5408\u9002\u7684\u8fc7\u671f\u65f6\u95f4\u3002</li> <li>\u4f18\u70b9\uff1a \u907f\u514d\u4e86\u542f\u52a8\u65f6\u7684\u7f13\u5b58\u672a\u547d\u4e2d\u95ee\u9898\u3002</li> </ul> </li> <li> <p>4.3 \u9650\u6d41\u4e0e\u7194\u65ad</p> <ul> <li>\u5728\u5e94\u7528\u5c42\u9762\u8fdb\u884c\u9650\u6d41\uff0c\u5f53Redis\u4e0d\u53ef\u7528\u6216\u5927\u91cf\u7f13\u5b58\u672a\u547d\u4e2d\u65f6\uff0c\u9650\u5236\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\u9891\u7387\uff0c\u4fdd\u62a4\u6570\u636e\u5e93\u3002</li> <li>\u5f53\u6570\u636e\u5e93\u538b\u529b\u8fc7\u5927\u65f6\uff0c\u53ef\u4ee5\u5bf9\u90e8\u5206\u670d\u52a1\u8fdb\u884c\u7194\u65ad\uff0c\u8fd4\u56de\u9ed8\u8ba4\u503c\u6216\u9519\u8bef\u4fe1\u606f\uff0c\u907f\u514d\u96ea\u5d29\u6548\u5e94\u3002</li> </ul> </li> <li> <p>4.4 \u591a\u7ea7\u7f13\u5b58</p> <ul> <li>\u5f15\u5165\u591a\u7ea7\u7f13\u5b58\uff0c\u4f8b\u5982\u5728Redis\u4e4b\u524d\u518d\u589e\u52a0\u4e00\u5c42\u672c\u5730\u7f13\u5b58\uff08\u5982Guava Cache\uff09\u3002\u5f53Redis\u53d1\u751f\u96ea\u5d29\u65f6\uff0c\u672c\u5730\u7f13\u5b58\u4ecd\u7136\u53ef\u4ee5\u627f\u62c5\u4e00\u90e8\u5206\u6d41\u91cf\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E4%B8%80%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8t%E4%B8%AD%E5%8C%85%E5%90%AB%E6%9C%893%E4%B8%AAint%E5%AD%97%E6%AE%B5A%2CB%2CC%EF%BC%8C%E8%AF%B7%E9%97%AE%E6%80%8E%E6%A0%B7%E5%BB%BA%E7%B4%A2%E5%BC%95%E6%9C%80%E5%90%88%E9%80%82/","title":"\u4e00\u4e2a\u6570\u636e\u5e93\u8868t\u4e2d\u5305\u542b\u67093\u4e2aint\u5b57\u6bb5A,B,C\uff0c\u8bf7\u95ee\u600e\u6837\u5efa\u7d22\u5f15\u6700\u5408\u9002","text":"<p>\u4e3a\u4e86\u4f18\u5316\u8fd9\u4e24\u4e2a\u6700\u9891\u7e41\u67e5\u8be2\u7684\u8bed\u53e5\uff0c\u6211\u4eec\u9700\u8981\u8003\u8651\u7d22\u5f15\u7684\u4ee5\u4e0b\u51e0\u4e2a\u539f\u5219\uff1a</p> <ol> <li> <p>\u590d\u5408\u7d22\u5f15\u7684\u5217\u987a\u5e8f\uff1a \u5bf9\u4e8e\u590d\u5408\u7d22\u5f15\uff0c\u5217\u7684\u987a\u5e8f\u975e\u5e38\u91cd\u8981\u3002\u901a\u5e38\u5c06\u7528\u4e8e\u7b49\u503c\u67e5\u8be2\uff08=\uff09\u7684\u5217\u653e\u5728\u524d\u9762\uff0c\u7136\u540e\u662f\u8303\u56f4\u67e5\u8be2\uff08&gt;, &lt;, BETWEEN, LIKE 'prefix%'\uff09\u7684\u5217\uff0c\u6700\u540e\u662f\u4ec5\u7528\u4e8e\u67e5\u8be2\u7ed3\u679c\uff08SELECT\u5b50\u53e5\u4e2d\uff0c\u4f46\u4e0d\u5728WHERE\u6216ORDER BY\u4e2d\uff09\u7684\u5217\uff0c\u4ee5\u5b9e\u73b0\u8986\u76d6\u7d22\u5f15\u3002</p> </li> <li> <p>\u8986\u76d6\u7d22\u5f15\uff1a \u5982\u679c\u7d22\u5f15\u5305\u542b\u4e86\u67e5\u8be2\u6240\u9700\u7684\u6240\u6709\u5217\uff08\u65e0\u8bba\u662fWHERE\u5b50\u53e5\u4e2d\u7684\u6761\u4ef6\u5217\u8fd8\u662fSELECT\u5b50\u53e5\u4e2d\u7684\u7ed3\u679c\u5217\uff09\uff0c\u90a3\u4e48\u6570\u636e\u5e93\u53ef\u4ee5\u76f4\u63a5\u4ece\u7d22\u5f15\u4e2d\u83b7\u53d6\u6240\u6709\u6570\u636e\uff0c\u800c\u65e0\u9700\u56de\u8868\u67e5\u8be2\uff0c\u4ece\u800c\u5927\u5927\u63d0\u9ad8\u6027\u80fd\u3002</p> </li> </ol> <p>\u73b0\u5728\u6211\u4eec\u6765\u5206\u6790\u4e24\u6761\u67e5\u8be2\u8bed\u53e5\uff1a</p> <p>\u67e5\u8be2\u8bed\u53e51: select A,B,C from t where B=100 and C &gt; 200;</p> <ul> <li> <p>WHERE\u6761\u4ef6\uff1aB=100 (\u7b49\u503c\u67e5\u8be2), C &gt; 200 (\u8303\u56f4\u67e5\u8be2)\u3002</p> </li> <li> <p>SELECT\u5217\uff1aA, B, C\u3002</p> </li> <li> <p>\u5bf9\u4e8e\u6b64\u67e5\u8be2\uff0c\u4e00\u4e2a\u7406\u60f3\u7684\u7d22\u5f15\u5e94\u8be5\u662f (B, C, A)\u3002\u8fd9\u6837\uff1a</p> <ul> <li> <p>\u7d22\u5f15\u53ef\u4ee5\u9996\u5148\u5229\u7528 B=100 \u8fdb\u884c\u5feb\u901f\u5b9a\u4f4d\u3002</p> </li> <li> <p>\u63a5\u7740\u53ef\u4ee5\u5bf9 C &gt; 200 \u8fdb\u884c\u8303\u56f4\u626b\u63cf\u3002</p> </li> <li> <p>\u7531\u4e8e A, B, C \u90fd\u5305\u542b\u5728\u7d22\u5f15\u4e2d\uff0c\u8fd9\u4f1a\u662f\u4e00\u4e2a\u8986\u76d6\u7d22\u5f15\uff0c\u907f\u514d\u4e86\u56de\u8868\u64cd\u4f5c\u3002</p> </li> </ul> </li> </ul> <p>\u67e5\u8be2\u8bed\u53e52: select A from t where A = 20 and B = 10 and C = 80;</p> <ul> <li> <p>WHERE\u6761\u4ef6\uff1aA=20 (\u7b49\u503c\u67e5\u8be2), B=10 (\u7b49\u503c\u67e5\u8be2), C=80 (\u7b49\u503c\u67e5\u8be2)\u3002</p> </li> <li> <p>SELECT\u5217\uff1aA\u3002</p> </li> <li> <p>\u5bf9\u4e8e\u6b64\u67e5\u8be2\uff0c\u4e00\u4e2a\u7406\u60f3\u7684\u7d22\u5f15\u5e94\u8be5\u662f (A, B, C)\uff08\u6216\u8005\u4efb\u610f\u7684\u6392\u5217\uff0c\u5982 (B, C, A) \u7b49\uff0c\u56e0\u4e3a\u90fd\u662f\u7b49\u503c\u67e5\u8be2\uff0c\u53ea\u8981\u6240\u6709\u6761\u4ef6\u5217\u90fd\u5728\u7d22\u5f15\u4e2d\uff0c\u6027\u80fd\u90fd\u5f88\u597d\uff09\u3002\u540c\u65f6\uff0cA\u5728\u7d22\u5f15\u4e2d\uff0c\u4e5f\u662f\u4e00\u4e2a\u8986\u76d6\u7d22\u5f15\u3002</p> </li> </ul> <p>\u7efc\u5408\u8003\u8651\u4e24\u6761\u67e5\u8be2\uff1a</p> <p>\u6211\u4eec\u9700\u8981\u627e\u5230\u4e00\u4e2a\u80fd\u540c\u65f6\u4f18\u5316\u8fd9\u4e24\u6761\u67e5\u8be2\u7684\u6700\u4f18\u7d22\u5f15\u65b9\u6848\u3002</p> <ul> <li> <p>\u5982\u679c\u521b\u5efa\u7d22\u5f15 (A, B, C)\uff1a</p> <ul> <li> <p>\u5bf9\u4e8e\u67e5\u8be22 (where A = 20 and B = 10 and C = 80)\uff1a\u5b8c\u7f8e\u547d\u4e2d\uff0c\u6240\u6709\u6761\u4ef6\u90fd\u5728\u7d22\u5f15\u4e2d\uff0c\u4e14\u987a\u5e8f\u5339\u914d\uff0c\u662f\u8986\u76d6\u7d22\u5f15\u3002</p> </li> <li> <p>\u5bf9\u4e8e\u67e5\u8be21 (where B=100 and C &gt; 200)\uff1a\u7d22\u5f15\u7684\u7b2c\u4e00\u4e2a\u5b57\u6bb5 A \u6ca1\u6709\u51fa\u73b0\u5728 WHERE \u6761\u4ef6\u4e2d\u3002\u6570\u636e\u5e93\u5c06\u65e0\u6cd5\u6709\u6548\u5229\u7528\u6b64\u7d22\u5f15\u6765\u5feb\u901f\u5b9a\u4f4d B=100 \u7684\u8bb0\u5f55\uff0c\u5f88\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5168\u8868\u626b\u63cf\u6216\u5168\u7d22\u5f15\u626b\u63cf\uff0c\u6027\u80fd\u8f83\u5dee\u3002</p> </li> </ul> </li> <li> <p>\u5982\u679c\u521b\u5efa\u7d22\u5f15 (B, C, A)\uff1a</p> <ul> <li> <p>\u5bf9\u4e8e\u67e5\u8be21 (where B=100 and C &gt; 200)\uff1a\u7d22\u5f15\u7684\u7b2c\u4e00\u4e2a\u5b57\u6bb5 B \u662f\u7b49\u503c\u6761\u4ef6\uff0c\u7b2c\u4e8c\u4e2a\u5b57\u6bb5 C \u662f\u8303\u56f4\u6761\u4ef6\uff0c\u7b2c\u4e09\u4e2a\u5b57\u6bb5 A \u662f\u8986\u76d6\u5b57\u6bb5\u3002\u5b8c\u7f8e\u547d\u4e2d\uff0c\u9ad8\u6548\u5229\u7528\u7d22\u5f15\uff0c\u662f\u8986\u76d6\u7d22\u5f15\u3002</p> </li> <li> <p>\u5bf9\u4e8e\u67e5\u8be22 (where A = 20 and B = 10 and C = 80)\uff1a\u7d22\u5f15\u7684\u7b2c\u4e00\u4e2a\u5b57\u6bb5 B \u53ef\u4ee5\u7528\u4e8e B=10 \u7684\u7b49\u503c\u5339\u914d\u3002\u5b9a\u4f4d\u5230 B=10 \u7684\u8bb0\u5f55\u540e\uff0c\u6570\u636e\u5e93\u53ef\u4ee5\u5728\u7d22\u5f15\u5185\u90e8\u5bf9 C=80 \u548c A=20 \u8fdb\u884c\u8fc7\u6ee4\u3002\u7531\u4e8e A, B, C \u90fd\u5305\u542b\u5728\u7d22\u5f15\u4e2d\uff0c\u8fd9\u4e5f\u662f\u4e00\u4e2a\u8986\u76d6\u7d22\u5f15\uff0c\u907f\u514d\u4e86\u56de\u8868\u64cd\u4f5c\u3002</p> </li> </ul> </li> </ul> <p>\u7ed3\u8bba\uff1a</p> <p>\u521b\u5efa\u4e00\u4e2a\u5355\u4e00\u7684\u590d\u5408\u7d22\u5f15 (B, C, A) \u662f\u6700\u5408\u9002\u7684\u65b9\u6848\u3002</p> <ol> <li> <p>\u5b83\u80fd\u591f\u5145\u5206\u4f18\u5316\u67e5\u8be21\uff0c\u56e0\u4e3a\u7d22\u5f15\u987a\u5e8f\u4e0e\u67e5\u8be2\u6761\u4ef6\uff08\u7b49\u503c\u5728\u524d\uff0c\u8303\u56f4\u5728\u540e\uff09\u5b8c\u7f8e\u5339\u914d\uff0c\u5e76\u4e14\u662f\u4e00\u4e2a\u8986\u76d6\u7d22\u5f15\u3002</p> </li> <li> <p>\u5b83\u4e5f\u80fd\u975e\u5e38\u6709\u6548\u5730\u4f18\u5316\u67e5\u8be22\u3002\u867d\u7136 A \u4e0d\u662f\u7d22\u5f15\u7684\u7b2c\u4e00\u4e2a\u5b57\u6bb5\uff0c\u4f46\u7531\u4e8e B \u5728\u7d22\u5f15\u5934\u90e8\u4e14\u662f\u7b49\u503c\u6761\u4ef6\uff0c\u7d22\u5f15\u53ef\u4ee5\u9996\u5148\u901a\u8fc7 B \u8fdb\u884c\u8fc7\u6ee4\uff0c\u7136\u540e\u5728\u7d22\u5f15\u5185\u90e8\u7ee7\u7eed\u8fc7\u6ee4 C \u548c A\u3002\u540c\u65f6\uff0c\u5b83\u4e5f\u662f\u4e00\u4e2a\u8986\u76d6\u7d22\u5f15\uff0c\u67e5\u8be2\u6240\u9700\u7684\u6240\u6709\u6570\u636e\u90fd\u53ef\u4ee5\u5728\u7d22\u5f15\u4e2d\u627e\u5230\uff0c\u65e0\u9700\u56de\u8868\u3002</p> </li> </ol> <p>\u56e0\u6b64\uff0c\u5efa\u8bae\u7684\u7d22\u5f15\u521b\u5efa\u8bed\u53e5\u4e3a\uff1a</p> <p>CREATE INDEX idx_b_c_a ON t (B, C, A);</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E4%B8%80%E6%AC%A1%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2%E5%8F%AF%E8%83%BD%E7%BB%8F%E5%8E%86%E5%87%A0%E6%AC%A1%E7%A3%81%E7%9B%98IO/","title":"\u4e00\u6b21\u6570\u636e\u67e5\u8be2\u53ef\u80fd\u7ecf\u5386\u51e0\u6b21\u78c1\u76d8IO","text":"<p>\u4e00\u6b21\u6570\u636e\u67e5\u8be2\u6240\u7ecf\u5386\u7684\u78c1\u76d8I/O\u6b21\u6570\u5e76\u975e\u56fa\u5b9a\u503c\uff0c\u5b83\u53d7\u5230\u591a\u79cd\u56e0\u7d20\u7684\u7efc\u5408\u5f71\u54cd\uff0c\u5305\u62ec\u7d22\u5f15\u7ed3\u6784\u3001\u67e5\u8be2\u6761\u4ef6\u7684\u590d\u6742\u5ea6\u3001\u7d22\u5f15\u8986\u76d6\u60c5\u51b5\u4ee5\u53ca\u6570\u636e\u5e93\u4f18\u5316\u7b56\u7565\u7b49\u3002\u5728\u6df1\u5165\u63a2\u8ba8\u8fd9\u4e2a\u95ee\u9898\u65f6\uff0c\u7406\u89e3B+\u6811\u7684\u5b58\u50a8\u7ed3\u6784\u3001MySQL\u7684\u7d22\u5f15\u4e0b\u63a8\uff08Index Condition Pushdown, ICP\uff09\u7b49\u6280\u672f\u81f3\u5173\u91cd\u8981\u3002</p> <p>\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u4e00\u6b21\u590d\u5408\u7d22\u5f15\u67e5\u8be2\u7684\u78c1\u76d8I/O\u53ef\u4ee5\u5206\u4e3a\u4e24\u4e2a\u4e3b\u8981\u9636\u6bb5\uff1a\u7d22\u5f15\u8bbf\u95ee\u9636\u6bb5\u548c\u6570\u636e\u8868\u8bbf\u95ee\u9636\u6bb5\uff08\u56de\u8868\uff09\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E4%B8%80%E6%AC%A1%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2%E5%8F%AF%E8%83%BD%E7%BB%8F%E5%8E%86%E5%87%A0%E6%AC%A1%E7%A3%81%E7%9B%98IO/#io","title":"\u7d22\u5f15\u8bbf\u95ee\u9636\u6bb5\u7684\u78c1\u76d8I/O","text":"<p>\u6570\u636e\u5e93\u7d22\u5f15\u901a\u5e38\u91c7\u7528B+\u6811\u7ed3\u6784\u5b58\u50a8\u5728\u78c1\u76d8\u4e0a\u3002B+\u6811\u7684\u7279\u70b9\u662f\u5176\u9ad8\u5ea6\u76f8\u5bf9\u8f83\u4f4e\uff0c\u901a\u5e383\u52304\u5c42\u5c31\u80fd\u652f\u6301\u5343\u4e07\u751a\u81f3\u4e0a\u4ebf\u7ea7\u522b\u7684\u6570\u636e\u3002\u7531\u4e8eB+\u6811\u7684\u975e\u53f6\u5b50\u8282\u70b9\u53ea\u5b58\u50a8\u7d22\u5f15\u952e\u548c\u6307\u5411\u4e0b\u4e00\u5c42\u8282\u70b9\u7684\u6307\u9488\uff0c\u56e0\u6b64\u6bcf\u4e2a\u8282\u70b9\u53ef\u4ee5\u5bb9\u7eb3\u5927\u91cf\u7684\u7d22\u5f15\u9879\u3002</p> <p>\u5f53\u8fdb\u884c\u4e00\u6b21\u7d22\u5f15\u67e5\u8be2\u65f6\uff0c\u6570\u636e\u5e93\u4f1a\u4eceB+\u6811\u7684\u6839\u8282\u70b9\u5f00\u59cb\uff0c\u9010\u5c42\u5411\u4e0b\u67e5\u627e\uff0c\u76f4\u5230\u627e\u5230\u53f6\u5b50\u8282\u70b9\u4e2d\u5bf9\u5e94\u7684\u7d22\u5f15\u6761\u76ee\u3002\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u6bcf\u4e00\u5c42\u8282\u70b9\u7684\u8bbf\u95ee\u90fd\u53ef\u80fd\u5bf9\u5e94\u4e00\u6b21\u78c1\u76d8I/O\u64cd\u4f5c\u3002\u56e0\u6b64\uff0c\u7d22\u5f15\u8bbf\u95ee\u9636\u6bb5\u7684\u78c1\u76d8I/O\u6b21\u6570\u5927\u81f4\u7b49\u4e8eB+\u6811\u7684\u9ad8\u5ea6\u3002\u5bf9\u4e8e\u4e00\u4e2a\u9ad8\u5ea6\u4e3a3\u7684B+\u6811\u7d22\u5f15\uff0c\u901a\u5e38\u9700\u89813\u6b21\u78c1\u76d8I/O\u624d\u80fd\u5b9a\u4f4d\u5230\u5177\u4f53\u7684\u7d22\u5f15\u8bb0\u5f55\u3002</p> <p>\u7136\u800c\uff0c\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u7531\u4e8e\u6570\u636e\u5e93\u901a\u5e38\u4f1a\u5c06B+\u6811\u7684\u6839\u8282\u70b9\u548c\u90e8\u5206\u5e38\u7528\u8282\u70b9\u7f13\u5b58\u5230\u5185\u5b58\u4e2d\uff0c\u56e0\u6b64\u5b9e\u9645\u7684\u78c1\u76d8I/O\u6b21\u6570\u53ef\u80fd\u4f1a\u5c11\u4e8eB+\u6811\u7684\u9ad8\u5ea6\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E4%B8%80%E6%AC%A1%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2%E5%8F%AF%E8%83%BD%E7%BB%8F%E5%8E%86%E5%87%A0%E6%AC%A1%E7%A3%81%E7%9B%98IO/#io_1","title":"\u6570\u636e\u8868\u8bbf\u95ee\u9636\u6bb5\u7684\u78c1\u76d8I/O\uff08\u56de\u8868\uff09","text":"<p>\u5728\u901a\u8fc7\u590d\u5408\u7d22\u5f15\u627e\u5230\u4e3b\u952e\u503c\u540e\uff0c\u5982\u679c\u67e5\u8be2\u9700\u8981\u83b7\u53d6\u7d22\u5f15\u4e4b\u5916\u7684\u5176\u4ed6\u5217\u6570\u636e\uff0c\u5c31\u9700\u8981\u6839\u636e\u4e3b\u952e\u503c\u56de\u5230\u4e3b\u952e\u7d22\u5f15\uff08\u805a\u7c07\u7d22\u5f15\uff09\u4e2d\u53bb\u67e5\u627e\u5b8c\u6574\u7684\u884c\u8bb0\u5f55\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u88ab\u79f0\u4e3a\u201c\u56de\u8868\u201d\u3002\u6bcf\u4e00\u6b21\u56de\u8868\uff0c\u90fd\u53ef\u80fd\u4ea7\u751f\u4e00\u6b21\u6216\u591a\u6b21\u78c1\u76d8I/O\uff08\u901a\u5e38\u662f\u968f\u673aI/O\uff0c\u6027\u80fd\u5f00\u9500\u8f83\u5927\uff09\u3002</p> <p>\u56e0\u6b64\uff0c\u603b\u7684\u78c1\u76d8I/O\u6b21\u6570 = \u7d22\u5f15\u8bbf\u95eeI/O\u6b21\u6570 + \u56de\u8868I/O\u6b21\u6570\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E4%B8%80%E6%AC%A1%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2%E5%8F%AF%E8%83%BD%E7%BB%8F%E5%8E%86%E5%87%A0%E6%AC%A1%E7%A3%81%E7%9B%98IO/#index-condition-pushdown-icp","title":"\u7d22\u5f15\u4e0b\u63a8\uff08Index Condition Pushdown, ICP\uff09\u7684\u4f18\u5316","text":"<p>\u4e3a\u4e86\u51cf\u5c11\u56de\u8868\u6b21\u6570\uff0c\u4ece\u800c\u964d\u4f4e\u78c1\u76d8I/O\uff0cMySQL 5.6\u7248\u672c\u5f15\u5165\u4e86\u7d22\u5f15\u4e0b\u63a8\uff08ICP\uff09\u8fd9\u4e00\u91cd\u8981\u4f18\u5316\u3002</p> <p>\u5728\u6ca1\u6709\u7d22\u5f15\u4e0b\u63a8\u4e4b\u524d\uff1a \u5f53\u4e00\u4e2a\u67e5\u8be2\u7684WHERE\u6761\u4ef6\u4e2d\uff0c\u90e8\u5206\u6761\u4ef6\u53ef\u4ee5\u5229\u7528\u7d22\u5f15\uff0c\u800c\u90e8\u5206\u6761\u4ef6\u4e0d\u80fd\u65f6\uff08\u4f8b\u5982\uff0c\u5bf9\u4e8e\u4e00\u4e2a<code>(col1, col2)</code>\u7684\u590d\u5408\u7d22\u5f15\uff0c\u67e5\u8be2\u6761\u4ef6\u4e3a<code>WHERE col1 = 'A' AND col2 LIKE '%B%'</code>\uff09\uff0c\u5b58\u50a8\u5f15\u64ce\u5c42\u4f1a\u6839\u636e<code>col1 = 'A'</code>\u627e\u5230\u6240\u6709\u6ee1\u8db3\u6761\u4ef6\u7684\u7d22\u5f15\u8bb0\u5f55\uff0c\u7136\u540e\u9010\u4e00\u56de\u8868\u5230\u4e3b\u952e\u7d22\u5f15\uff0c\u5c06\u5b8c\u6574\u7684\u884c\u6570\u636e\u8fd4\u56de\u7ed9Server\u5c42\u3002Server\u5c42\u518d\u6839\u636e<code>col2 LIKE '%B%'</code>\u8fd9\u4e2a\u6761\u4ef6\u5bf9\u8fd4\u56de\u7684\u6570\u636e\u8fdb\u884c\u8fc7\u6ee4\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u53ef\u80fd\u4f1a\u6709\u5927\u91cf\u4e0d\u7b26\u5408<code>col2</code>\u6761\u4ef6\u7684\u6570\u636e\u88ab\u56de\u8868\uff0c\u4ea7\u751f\u4e86\u4e0d\u5fc5\u8981\u7684\u78c1\u76d8I/O\u3002</p> <p>\u5f15\u5165\u7d22\u5f15\u4e0b\u63a8\u4e4b\u540e\uff1a \u7d22\u5f15\u4e0b\u63a8\u5c06\u90e8\u5206\u53ef\u4ee5\u5728\u7d22\u5f15\u5c42\u9762\u76f4\u63a5\u5224\u65ad\u7684\u8fc7\u6ee4\u6761\u4ef6\u4e0b\u63a8\u5230\u5b58\u50a8\u5f15\u64ce\u5c42\u3002\u5728\u4e0a\u8ff0\u4f8b\u5b50\u4e2d\uff0c\u867d\u7136<code>col2 LIKE '%B%'</code>\u65e0\u6cd5\u7528\u4e8e\u7d22\u5f15\u7684\u5feb\u901f\u5b9a\u4f4d\uff0c\u4f46\u662f\u5b58\u50a8\u5f15\u64ce\u5728\u904d\u5386<code>col1 = 'A'</code>\u7684\u7d22\u5f15\u8bb0\u5f55\u65f6\uff0c\u53ef\u4ee5\u76f4\u63a5\u5728\u7d22\u5f15\u5185\u90e8\u5224\u65ad<code>col2</code>\u7684\u503c\u662f\u5426\u6ee1\u8db3<code>LIKE '%B%'</code>\u7684\u6761\u4ef6\u3002\u53ea\u6709\u6ee1\u8db3\u6761\u4ef6\u7684\u7d22\u5f15\u8bb0\u5f55\uff0c\u624d\u4f1a\u88ab\u7528\u4e8e\u56de\u8868\u67e5\u8be2\u3002</p> <p>\u901a\u8fc7\u7d22\u5f15\u4e0b\u63a8\uff0c\u53ef\u4ee5\u663e\u8457\u51cf\u5c11\u56de\u8868\u7684\u6b21\u6570\uff0c\u4ece\u800c\u5927\u5e45\u964d\u4f4e\u6570\u636e\u8868\u8bbf\u95ee\u9636\u6bb5\u7684\u78c1\u76d8I/O\u3002 \u5728\u7406\u60f3\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u7d22\u5f15\u4e2d\u5df2\u7ecf\u5305\u542b\u4e86\u6240\u6709\u9700\u8981\u5224\u65ad\u7684\u5217\uff0c\u751a\u81f3\u53ef\u4ee5\u76f4\u63a5\u5728\u7d22\u5f15\u5c42\u9762\u5b8c\u6210\u6240\u6709\u8fc7\u6ee4\uff0c\u5b8c\u5168\u907f\u514d\u56de\u8868\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E4%B8%80%E6%AC%A1%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2%E5%8F%AF%E8%83%BD%E7%BB%8F%E5%8E%86%E5%87%A0%E6%AC%A1%E7%A3%81%E7%9B%98IO/#_1","title":"\u573a\u666f\u5206\u6790\uff1a","text":"<p>\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u4e2a\u7528\u6237\u8868<code>user</code>\uff0c\u5176\u4e2d\u6709<code>(name, age)</code>\u7684\u590d\u5408\u7d22\u5f15\u3002</p> <ol> <li> <p>\u67e5\u8be2\u6761\u4ef6\u5b8c\u5168\u5339\u914d\u590d\u5408\u7d22\u5f15\uff1a<code>SELECT * FROM user WHERE name = '\u5f20\u4e09' AND age = 30;</code></p> <ul> <li>\u7d22\u5f15\u8bbf\u95eeI/O\uff1a \u7ea6\u7b49\u4e8eB+\u6811\u7684\u9ad8\u5ea6\uff08\u4f8b\u59823\u6b21\uff09\uff0c\u5b9a\u4f4d\u5230<code>name='\u5f20\u4e09'</code>\u4e14<code>age=30</code>\u7684\u7d22\u5f15\u8bb0\u5f55\u3002</li> <li>\u56de\u8868I/O\uff1a \u7531\u4e8e\u9700\u8981\u83b7\u53d6\u6240\u6709\u5217\uff08<code>*</code>\uff09\uff0c\u9700\u8981\u8fdb\u884c1\u6b21\u56de\u8868\u64cd\u4f5c\uff0c\u83b7\u53d6\u5b8c\u6574\u7684\u6570\u636e\u884c\u3002</li> <li>\u603bI/O\uff1a \u5927\u7ea6\u4e3a 3 + 1 = 4\u6b21\u3002</li> </ul> </li> <li> <p>\u67e5\u8be2\u6761\u4ef6\u90e8\u5206\u5339\u914d\uff0c\u672a\u4f7f\u7528\u7d22\u5f15\u4e0b\u63a8\uff08MySQL 5.6\u4e4b\u524d\uff09\uff1a<code>SELECT * FROM user WHERE name LIKE '\u5f20%' AND age = 10;</code></p> <ul> <li>\u7d22\u5f15\u8bbf\u95eeI/O\uff1a \u7ea6\u7b49\u4e8eB+\u6811\u7684\u9ad8\u5ea6\uff08\u4f8b\u59823\u6b21\uff09\uff0c\u5b9a\u4f4d\u5230\u7b2c\u4e00\u4e2a<code>name</code>\u4ee5\u201c\u5f20\u201d\u5f00\u5934\u7684\u7d22\u5f15\u8bb0\u5f55\u3002</li> <li>\u56de\u8868I/O\uff1a \u5b58\u50a8\u5f15\u64ce\u4f1a\u904d\u5386\u6240\u6709<code>name</code>\u4ee5\u201c\u5f20\u201d\u5f00\u5934\u7684\u7d22\u5f15\u8bb0\u5f55\uff0c\u5e76\u5bf9\u6bcf\u4e00\u6761\u8bb0\u5f55\u90fd\u8fdb\u884c\u56de\u8868\u3002\u5047\u8bbe\u6709100\u6761\u7b26\u5408<code>name LIKE '\u5f20%'</code>\u7684\u8bb0\u5f55\uff0c\u5c31\u9700\u8981100\u6b21\u56de\u8868I/O\u3002</li> <li>\u603bI/O\uff1a \u8fdc\u5927\u4e8e 3 + 1 \u6b21\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u7b26\u5408<code>name</code>\u6761\u4ef6\u7684\u8bb0\u5f55\u6570\u3002</li> </ul> </li> <li> <p>\u67e5\u8be2\u6761\u4ef6\u90e8\u5206\u5339\u914d\uff0c\u4f7f\u7528\u7d22\u5f15\u4e0b\u63a8\uff08MySQL 5.6\u53ca\u4e4b\u540e\uff09\uff1a<code>SELECT * FROM user WHERE name LIKE '\u5f20%' AND age = 10;</code></p> <ul> <li>\u7d22\u5f15\u8bbf\u95eeI/O\uff1a \u7ea6\u7b49\u4e8eB+\u6811\u7684\u9ad8\u5ea6\uff08\u4f8b\u59823\u6b21\uff09\uff0c\u5b9a\u4f4d\u5230\u7b2c\u4e00\u4e2a<code>name</code>\u4ee5\u201c\u5f20\u201d\u5f00\u5934\u7684\u7d22\u5f15\u8bb0\u5f55\u3002</li> <li>\u56de\u8868I/O\uff1a \u5b58\u50a8\u5f15\u64ce\u5728\u904d\u5386<code>name</code>\u4ee5\u201c\u5f20\u201d\u5f00\u5934\u7684\u7d22\u5f15\u8bb0\u5f55\u65f6\uff0c\u4f1a\u540c\u65f6\u5224\u65ad<code>age</code>\u662f\u5426\u7b49\u4e8e10\u3002\u53ea\u6709\u540c\u65f6\u6ee1\u8db3\u8fd9\u4e24\u4e2a\u6761\u4ef6\u7684\u7d22\u5f15\u8bb0\u5f55\u624d\u4f1a\u8fdb\u884c\u56de\u8868\u3002\u5047\u8bbe100\u6761<code>name</code>\u4ee5\u201c\u5f20\u201d\u5f00\u5934\u7684\u8bb0\u5f55\u4e2d\uff0c\u53ea\u67095\u6761\u7684<code>age</code>\u7b49\u4e8e10\uff0c\u90a3\u4e48\u5c31\u53ea\u9700\u89815\u6b21\u56de\u8868I/O\u3002</li> <li>\u603bI/O\uff1a \u5927\u7ea6\u4e3a 3 + 5 = 8\u6b21\uff0c\u8fdc\u5c11\u4e8e\u672a\u4f7f\u7528ICP\u7684\u60c5\u51b5\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E4%B8%80%E6%AC%A1%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2%E5%8F%AF%E8%83%BD%E7%BB%8F%E5%8E%86%E5%87%A0%E6%AC%A1%E7%A3%81%E7%9B%98IO/#_2","title":"\u8986\u76d6\u7d22\u5f15","text":"<p>\u5982\u679c\u67e5\u8be2\u6240\u9700\u7684\u6240\u6709\u5217\u90fd\u5305\u542b\u5728\u590d\u5408\u7d22\u5f15\u4e2d\uff0c\u90a3\u4e48\u6570\u636e\u5e93\u5c31\u53ef\u4ee5\u76f4\u63a5\u4ece\u7d22\u5f15\u4e2d\u83b7\u53d6\u6240\u6709\u6570\u636e\uff0c\u800c\u65e0\u9700\u56de\u8868\u3002\u8fd9\u79cd\u60c5\u51b5\u88ab\u79f0\u4e3a\u201c\u8986\u76d6\u7d22\u5f15\u201d\u3002</p> <p>\u4f8b\u5982\uff0c\u5bf9\u4e8e<code>(name, age)</code>\u7684\u590d\u5408\u7d22\u5f15\uff0c\u67e5\u8be2<code>SELECT name, age FROM user WHERE name LIKE '\u5f20%';</code>\u5c31\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u7d22\u5f15\u626b\u63cf\u5b8c\u6210\uff0c\u56de\u8868I/O\u6b21\u6570\u4e3a0\uff0c\u6781\u5927\u5730\u63d0\u5347\u4e86\u67e5\u8be2\u6027\u80fd\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E4%B8%BA%E4%BB%80%E4%B9%88%E9%87%87%E7%94%A8redis%E5%AE%9E%E7%8E%B0%E5%8F%91%E5%8F%B7%E5%99%A8%EF%BC%8C%E8%80%8C%E4%B8%8D%E9%87%87%E7%94%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E8%87%AA%E5%A2%9Eid/","title":"\u4e3a\u4ec0\u4e48\u91c7\u7528redis\u5b9e\u73b0\u53d1\u53f7\u5668\uff0c\u800c\u4e0d\u91c7\u7528\u6570\u636e\u5e93\u81ea\u589eid","text":"<p>\u5728\u6784\u5efa\u5206\u5e03\u5f0f\u7cfb\u7edf\u65f6\uff0c\u9009\u62e9\u5408\u9002\u7684ID\u751f\u6210\u7b56\u7565\u81f3\u5173\u91cd\u8981\u3002\u867d\u7136\u6570\u636e\u5e93\u7684\u81ea\u589eID\u673a\u5236\u7b80\u5355\u6613\u7528\uff0c\u4f46\u5728\u8bb8\u591a\u573a\u666f\u4e0b\uff0c\u7279\u522b\u662f\u9ad8\u5e76\u53d1\u548c\u5206\u5e03\u5f0f\u73af\u5883\u4e2d\uff0c\u91c7\u7528Redis\u5b9e\u73b0\u53d1\u53f7\u5668\u6210\u4e3a\u4e00\u79cd\u66f4\u4f18\u8d8a\u7684\u9009\u62e9\u3002\u4ee5\u4e0b\u5c06\u8be6\u7ec6\u9610\u8ff0\u4e3a\u4f55\u5728\u8fd9\u4e9b\u573a\u666f\u4e0b\u503e\u5411\u4e8e\u4f7f\u7528Redis\uff0c\u5e76\u5bf9\u4e24\u79cd\u65b9\u6848\u8fdb\u884c\u5bf9\u6bd4\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E4%B8%BA%E4%BB%80%E4%B9%88%E9%87%87%E7%94%A8redis%E5%AE%9E%E7%8E%B0%E5%8F%91%E5%8F%B7%E5%99%A8%EF%BC%8C%E8%80%8C%E4%B8%8D%E9%87%87%E7%94%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E8%87%AA%E5%A2%9Eid/#redis","title":"Redis\u4f5c\u4e3a\u53d1\u53f7\u5668\u7684\u6838\u5fc3\u4f18\u52bf","text":"<p>\u5728\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\uff0c\u4f7f\u7528Redis\u751f\u6210ID\u7684\u4e3b\u8981\u4f18\u52bf\u5728\u4e8e\u5176\u5353\u8d8a\u7684\u6027\u80fd\u3001\u9ad8\u5e76\u53d1\u5904\u7406\u80fd\u529b\u548c\u5bf9\u5206\u5e03\u5f0f\u67b6\u6784\u7684\u826f\u597d\u652f\u6301\u3002</p> <ul> <li> <p>\u5353\u8d8a\u7684\u6027\u80fd\u548c\u9ad8\u5e76\u53d1\u80fd\u529b:</p> <ul> <li>Redis\u662f\u57fa\u4e8e\u5185\u5b58\u7684\u6570\u636e\u5e93\uff0c\u6240\u6709\u64cd\u4f5c\u90fd\u5728\u5185\u5b58\u4e2d\u5b8c\u6210\uff0c\u901f\u5ea6\u6781\u5feb\u3002\u5176<code>INCR</code>\u548c<code>INCRBY</code>\u547d\u4ee4\u662f\u539f\u5b50\u64cd\u4f5c\uff0c\u8fd9\u610f\u5473\u7740\u5373\u4f7f\u5728\u591a\u4e2a\u5ba2\u6237\u7aef\u540c\u65f6\u8bf7\u6c42ID\u65f6\uff0c\u4e5f\u80fd\u4fdd\u8bc1\u64cd\u4f5c\u7684\u7ebf\u7a0b\u5b89\u5168\uff0c\u4e0d\u4f1a\u4ea7\u751f\u91cd\u590d\u7684ID\u3002 Redis\u7684\u5355\u7ebf\u7a0b\u6a21\u578b\u907f\u514d\u4e86\u591a\u7ebf\u7a0b\u73af\u5883\u4e0b\u7684\u9501\u7ade\u4e89\u95ee\u9898\uff0c\u4f7f\u5176\u80fd\u591f\u8f7b\u677e\u5e94\u5bf9\u9ad8\u5e76\u53d1\u7684ID\u751f\u6210\u8bf7\u6c42\u3002</li> </ul> </li> <li> <p>\u5bf9\u5206\u5e03\u5f0f\u7cfb\u7edf\u7684\u53cb\u597d\u652f\u6301:</p> <ul> <li>\u5728\u5206\u5e93\u5206\u8868\u7684\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u67b6\u6784\u4e2d\uff0c\u6bcf\u4e2a\u6570\u636e\u5e93\u5b9e\u4f8b\u72ec\u7acb\u751f\u6210\u81ea\u589eID\u4f1a\u5bfc\u81f4ID\u51b2\u7a81\u3002 Redis\u4f5c\u4e3a\u4e00\u4e2a\u72ec\u7acb\u7684\u670d\u52a1\uff0c\u53ef\u4ee5\u4e3a\u6240\u6709\u4e1a\u52a1\u6a21\u5757\u548c\u6570\u636e\u5e93\u5b9e\u4f8b\u63d0\u4f9b\u5168\u5c40\u552f\u4e00\u7684ID\uff0c\u4ece\u800c\u6839\u672c\u4e0a\u89e3\u51b3\u4e86\u8fd9\u4e2a\u95ee\u9898\u3002</li> </ul> </li> <li> <p>\u7075\u6d3b\u6027\u548c\u53ef\u6269\u5c55\u6027:</p> <ul> <li>\u4f7f\u7528Redis\u53ef\u4ee5\u975e\u5e38\u65b9\u4fbf\u5730\u4e3a\u4e0d\u540c\u7684\u4e1a\u52a1\u573a\u666f\u8bbe\u7f6e\u4e0d\u540c\u7684ID\u751f\u6210\u5668\u3002\u53ea\u9700\u4e3a\u6bcf\u4e2a\u4e1a\u52a1\u5b9a\u4e49\u4e00\u4e2a\u72ec\u7acb\u7684key\uff0c\u7136\u540e\u8c03\u7528<code>INCR</code>\u547d\u4ee4\u5373\u53ef\u3002 \u6b64\u5916\uff0cRedis\u96c6\u7fa4\u63d0\u4f9b\u4e86\u826f\u597d\u7684\u6c34\u5e73\u6269\u5c55\u80fd\u529b\uff0c\u80fd\u591f\u901a\u8fc7\u589e\u52a0\u8282\u70b9\u6765\u63d0\u5347\u6574\u4e2aID\u751f\u6210\u670d\u52a1\u7684\u541e\u5410\u91cf\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E4%B8%BA%E4%BB%80%E4%B9%88%E9%87%87%E7%94%A8redis%E5%AE%9E%E7%8E%B0%E5%8F%91%E5%8F%B7%E5%99%A8%EF%BC%8C%E8%80%8C%E4%B8%8D%E9%87%87%E7%94%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E8%87%AA%E5%A2%9Eid/#id","title":"\u6570\u636e\u5e93\u81ea\u589eID\u7684\u5c40\u9650\u6027","text":"<p>\u6570\u636e\u5e93\u81ea\u589eID\u867d\u7136\u5b9e\u73b0\u7b80\u5355\uff0c\u4f46\u5728\u73b0\u4ee3\u5206\u5e03\u5f0f\u5e94\u7528\u4e2d\u66b4\u9732\u4e86\u8bf8\u591a\u5f0a\u7aef\u3002</p> <ul> <li> <p>\u6027\u80fd\u74f6\u9888:</p> <ul> <li>\u5728\u9ad8\u5e76\u53d1\u5199\u5165\u7684\u573a\u666f\u4e0b\uff0c\u6570\u636e\u5e93\u7684\u81ea\u589eID\u53ef\u80fd\u4f1a\u6210\u4e3a\u6027\u80fd\u74f6\u9888\u3002\u6240\u6709\u63d2\u5165\u64cd\u4f5c\u90fd\u9700\u8981\u83b7\u53d6\u540c\u4e00\u4e2a\u81ea\u589e\u9501\uff0c\u5bfc\u81f4\u8bf7\u6c42\u6392\u961f\u7b49\u5f85\uff0c\u4ece\u800c\u9650\u5236\u4e86\u7cfb\u7edf\u7684\u5199\u5165\u6027\u80fd\u3002</li> </ul> </li> <li> <p>\u5206\u5e03\u5f0f\u73af\u5883\u4e0b\u7684ID\u51b2\u7a81:</p> <ul> <li>\u5728\u5206\u5e93\u5206\u8868\u7684\u73af\u5883\u4e2d\uff0c\u6bcf\u4e2a\u6570\u636e\u5e93\u8282\u70b9\u90fd\u4f1a\u72ec\u7acb\u7ef4\u62a4\u81ea\u5df1\u7684\u81ea\u589e\u5e8f\u5217\uff0c\u8fd9\u5fc5\u7136\u5bfc\u81f4\u751f\u6210\u7684ID\u53d1\u751f\u51b2\u7a81\uff0c\u65e0\u6cd5\u4fdd\u8bc1\u5168\u5c40\u552f\u4e00\u6027\u3002</li> </ul> </li> <li> <p>\u6269\u5c55\u6027\u5dee:</p> <ul> <li>\u5f53\u4e1a\u52a1\u589e\u957f\u9700\u8981\u589e\u52a0\u6570\u636e\u5e93\u5b9e\u4f8b\u65f6\uff0c\u534f\u8c03\u4e0d\u540c\u5b9e\u4f8b\u95f4\u7684\u81ea\u589eID\u751f\u6210\u4f1a\u53d8\u5f97\u975e\u5e38\u590d\u6742\u3002\u4f8b\u5982\uff0c\u9700\u8981\u4e3a\u6bcf\u4e2a\u5b9e\u4f8b\u8bbe\u7f6e\u4e0d\u540c\u7684\u8d77\u59cb\u503c\u548c\u6b65\u957f\uff0c\u8fd9\u79cd\u65b9\u6848\u7f3a\u4e4f\u7075\u6d3b\u6027\u4e14\u96be\u4ee5\u7ef4\u62a4\u3002</li> </ul> </li> <li> <p>\u6570\u636e\u8fc1\u79fb\u4e0e\u5408\u5e76\u56f0\u96be:</p> <ul> <li>\u5728\u8fdb\u884c\u6570\u636e\u5e93\u5408\u5e76\u6216\u6570\u636e\u8fc1\u79fb\u65f6\uff0c\u81ea\u589e\u4e3b\u952e\u53ef\u80fd\u5bfc\u81f4\u51b2\u7a81\uff0c\u9700\u8981\u989d\u5916\u7684\u5de5\u4f5c\u6765\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E4%B8%BA%E4%BB%80%E4%B9%88%E9%87%87%E7%94%A8redis%E5%AE%9E%E7%8E%B0%E5%8F%91%E5%8F%B7%E5%99%A8%EF%BC%8C%E8%80%8C%E4%B8%8D%E9%87%87%E7%94%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E8%87%AA%E5%A2%9Eid/#redisid","title":"Redis\u4e0e\u6570\u636e\u5e93\u81ea\u589eID\u7684\u5bf9\u6bd4","text":"\u7279\u6027 Redis \u53d1\u53f7\u5668 \u6570\u636e\u5e93\u81ea\u589eID \u6027\u80fd \u975e\u5e38\u9ad8\uff0c\u57fa\u4e8e\u5185\u5b58\u64cd\u4f5c \u76f8\u5bf9\u8f83\u4f4e\uff0c\u53d7\u9650\u4e8e\u78c1\u76d8I/O\u548c\u9501\u7ade\u4e89 \u5e76\u53d1\u80fd\u529b \u975e\u5e38\u9ad8\uff0c\u539f\u5b50\u64cd\u4f5c\u4fdd\u8bc1\u7ebf\u7a0b\u5b89\u5168 \u6709\u9650\uff0c\u9ad8\u5e76\u53d1\u4e0b\u6613\u6210\u4e3a\u74f6\u9888 \u5206\u5e03\u5f0f\u652f\u6301 \u4f18\u79c0\uff0c\u5929\u7136\u652f\u6301\u5206\u5e03\u5f0fID\u751f\u6210 \u5dee\uff0c\u96be\u4ee5\u4fdd\u8bc1\u5168\u5c40\u552f\u4e00\u6027 \u53ef\u6269\u5c55\u6027 \u9ad8\uff0c\u6613\u4e8e\u6c34\u5e73\u6269\u5c55 \u5dee\uff0c\u589e\u52a0\u8282\u70b9\u65f6ID\u7ba1\u7406\u590d\u6742 \u5b9e\u73b0\u590d\u6742\u5ea6 \u7b80\u5355\uff0c\u4e3b\u8981\u5229\u7528<code>INCR</code>\u547d\u4ee4 \u975e\u5e38\u7b80\u5355\uff0c\u6570\u636e\u5e93\u5185\u7f6e\u529f\u80fd \u4f9d\u8d56 \u9700\u5f15\u5165Redis\u670d\u52a1 \u4f9d\u8d56\u4e8e\u6570\u636e\u5e93\u672c\u8eab"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E5%9C%BA%E6%99%AF%E9%A2%98%E6%80%9D%E8%B7%AF/","title":"\u573a\u666f\u9898\u601d\u8def","text":"<p>\u5728\u6784\u5efa\u4e00\u4e2a\u7cfb\u7edf\u65f6\uff0c\u9664\u4e86\u5b9e\u73b0\u4e1a\u52a1\u903b\u8f91\uff08\u529f\u80fd\u6027\u9700\u6c42\uff09\u5916\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u5173\u6ce8\u7cfb\u7edf\u5982\u4f55\u66f4\u597d\u5730\u8fd0\u884c\u3002\u975e\u529f\u80fd\u6027\u8bbe\u8ba1\u6b63\u662f\u89e3\u51b3\u8fd9\u4e9b\u201c\u5982\u4f55\u66f4\u597d\u5730\u8fd0\u884c\u201d\u7684\u95ee\u9898\u3002\u5b83\u4eec\u63cf\u8ff0\u4e86\u7cfb\u7edf\u5728\u6267\u884c\u5176\u529f\u80fd\u65f6\u5fc5\u987b\u5177\u5907\u7684\u7279\u6027\u548c\u7ea6\u675f\uff0c\u662f\u8861\u91cf\u7cfb\u7edf\u8d28\u91cf\u7684\u5173\u952e\u6307\u6807\u3002\u5e38\u89c1\u7684\u975e\u529f\u80fd\u6027\u6307\u6807\u5305\u62ec\uff1a</p> <ul> <li>\u9ad8\u6027\u80fd\uff08High Performance\uff09\uff1a\u7cfb\u7edf\u5728\u7ed9\u5b9a\u65f6\u95f4\u5185\u5904\u7406\u8bf7\u6c42\u7684\u901f\u5ea6\u548c\u6548\u7387\u3002\u5b83\u901a\u5e38\u901a\u8fc7\u4ee5\u4e0b\u6307\u6807\u8861\u91cf\uff1a<ul> <li>\u54cd\u5e94\u65f6\u95f4\uff08Response Time\uff09\uff1a\u7cfb\u7edf\u5bf9\u7528\u6237\u8bf7\u6c42\u505a\u51fa\u54cd\u5e94\u6240\u9700\u7684\u65f6\u95f4\uff0c\u662f\u7528\u6237\u4f53\u9a8c\u6700\u76f4\u89c2\u7684\u4f53\u73b0\u3002</li> <li>\u541e\u5410\u91cf\uff08Throughput\uff09\uff1a\u7cfb\u7edf\u5728\u5355\u4f4d\u65f6\u95f4\u5185\u5904\u7406\u7684\u8bf7\u6c42\u6570\u91cf\u6216\u4e8b\u52a1\u6570\u91cf\u3002</li> <li>\u5e76\u53d1\u7528\u6237\u6570\uff08Concurrent Users\uff09\uff1a\u7cfb\u7edf\u80fd\u591f\u540c\u65f6\u5904\u7406\u7684\u6700\u5927\u7528\u6237\u8bf7\u6c42\u6570\u91cf\u3002</li> </ul> </li> <li>\u9ad8\u53ef\u7528\u6027\uff08High Availability\uff09\uff1a\u7cfb\u7edf\u5728\u957f\u65f6\u95f4\u5185\u4fdd\u6301\u53ef\u64cd\u4f5c\u548c\u53ef\u8bbf\u95ee\u7684\u80fd\u529b\uff0c\u5373\u7cfb\u7edf\u80fd\u591f\u6301\u7eed\u63d0\u4f9b\u670d\u52a1\u800c\u4e0d\u4f1a\u4e2d\u65ad\u3002\u901a\u5e38\u901a\u8fc7\u6b63\u5e38\u8fd0\u884c\u65f6\u95f4\u767e\u5206\u6bd4\uff08\u598299.99%\uff0c\u8868\u793a\u6bcf\u5e74\u505c\u673a\u65f6\u95f4\u5c11\u4e8e52.6\u5206\u949f\uff09\u6765\u8861\u91cf\uff0c\u662f\u4e1a\u52a1\u8fde\u7eed\u6027\u7684\u6838\u5fc3\u4fdd\u969c\u3002</li> <li>\u9ad8\u5e76\u53d1\uff08High Concurrency\uff09\uff1a\u7cfb\u7edf\u5728\u540c\u4e00\u65f6\u523b\u5904\u7406\u591a\u4e2a\u7528\u6237\u8bf7\u6c42\u7684\u80fd\u529b\uff0c\u662f\u9ad8\u6027\u80fd\u7684\u4e00\u4e2a\u91cd\u8981\u4f53\u73b0\uff0c\u5c24\u5176\u5728\u7528\u6237\u91cf\u5927\u7684\u4e92\u8054\u7f51\u5e94\u7528\u4e2d\u81f3\u5173\u91cd\u8981\u3002</li> <li>\u53ef\u6269\u5c55\u6027\uff08Scalability\uff09\uff1a\u7cfb\u7edf\u5728\u4e0d\u6539\u53d8\u67b6\u6784\u7684\u524d\u63d0\u4e0b\uff0c\u901a\u8fc7\u589e\u52a0\u8d44\u6e90\uff08\u5982CPU\u3001\u5185\u5b58\u3001\u786c\u76d8\u6216\u670d\u52a1\u5668\u5b9e\u4f8b\uff09\u6765\u5904\u7406\u66f4\u591a\u8d1f\u8f7d\uff08\u7528\u6237\u3001\u6570\u636e\u6216\u4e8b\u52a1\uff09\u7684\u80fd\u529b\u3002\u53ef\u6269\u5c55\u6027\u5206\u4e3a\uff1a<ul> <li>\u5782\u76f4\u6269\u5c55\uff08Vertical Scaling/Scale Up\uff09\uff1a\u63d0\u5347\u5355\u4e2a\u670d\u52a1\u5668\u7684\u786c\u4ef6\u914d\u7f6e\u3002</li> <li>\u6c34\u5e73\u6269\u5c55\uff08Horizontal Scaling/Scale Out\uff09\uff1a\u589e\u52a0\u670d\u52a1\u5668\u6216\u670d\u52a1\u5b9e\u4f8b\u7684\u6570\u91cf\u3002</li> </ul> </li> <li>\u53ef\u7ef4\u62a4\u6027\uff08Maintainability\uff09\uff1a\u7cfb\u7edf\u6613\u4e8e\u4fee\u6539\u3001\u6d4b\u8bd5\u3001\u90e8\u7f72\u3001\u76d1\u63a7\u548c\u6545\u969c\u6392\u9664\u7684\u80fd\u529b\u3002\u4e00\u4e2a\u9ad8\u53ef\u7ef4\u62a4\u6027\u7684\u7cfb\u7edf\u80fd\u591f\u964d\u4f4e\u957f\u671f\u8fd0\u8425\u6210\u672c\uff0c\u5e76\u63d0\u9ad8\u5f00\u53d1\u6548\u7387\u3002</li> <li>\u5b89\u5168\u6027\uff08Security\uff09\uff1a\u4fdd\u62a4\u7cfb\u7edf\u514d\u53d7\u672a\u7ecf\u6388\u6743\u7684\u8bbf\u95ee\u3001\u6570\u636e\u6cc4\u9732\u3001\u62d2\u7edd\u670d\u52a1\u653b\u51fb\uff08DDoS\uff09\u548c\u5176\u4ed6\u6076\u610f\u884c\u4e3a\u7684\u80fd\u529b\u3002\u5b83\u6d89\u53ca\u8ba4\u8bc1\u3001\u6388\u6743\u3001\u6570\u636e\u52a0\u5bc6\u3001\u5ba1\u8ba1\u548c\u5b89\u5168\u6f0f\u6d1e\u7ba1\u7406\u7b49\u65b9\u9762\u3002</li> <li>\u53ef\u9760\u6027\uff08Reliability\uff09\uff1a\u7cfb\u7edf\u5728\u6307\u5b9a\u6761\u4ef6\u4e0b\u548c\u6307\u5b9a\u65f6\u95f4\u5185\u65e0\u6545\u969c\u8fd0\u884c\u7684\u80fd\u529b\uff0c\u5173\u6ce8\u7cfb\u7edf\u5728\u9047\u5230\u9519\u8bef\u65f6\u7684\u6062\u590d\u80fd\u529b\u548c\u7a33\u5b9a\u6027\u3002</li> <li>\u53ef\u89c2\u6d4b\u6027\uff08Observability\uff09\uff1a\u901a\u8fc7\u7cfb\u7edf\u5916\u90e8\u8f93\u51fa\uff08\u5982\u65e5\u5fd7\u3001\u6307\u6807\u3001\u8ffd\u8e2a\uff09\u6765\u7406\u89e3\u7cfb\u7edf\u5185\u90e8\u72b6\u6001\u7684\u80fd\u529b\uff0c\u5bf9\u4e8e\u5feb\u901f\u5b9a\u4f4d\u95ee\u9898\u548c\u8fdb\u884c\u6027\u80fd\u8c03\u4f18\u81f3\u5173\u91cd\u8981\u3002</li> </ul> <p>\u9762\u8bd5\u5b98\u5728\u8003\u5bdf\u975e\u529f\u80fd\u6027\u8bbe\u8ba1\u65f6\uff0c\u901a\u5e38\u4f1a\u4ece\u7cfb\u7edf\u53ef\u80fd\u9047\u5230\u7684\u201c\u5361\u70b9\u201d\u6216\u201c\u5f85\u4f18\u5316\u70b9\u201d\u51fa\u53d1\uff0c\u5f15\u5bfc\u4f60\u601d\u8003\u89e3\u51b3\u65b9\u6848\u3002\u4f8b\u5982\uff0c\u5f53\u63d0\u5230\u7f13\u5b58\u65f6\uff0c\u9664\u4e86\u5176\u8bfb\u5199\u901f\u5ea6\u5feb\uff0c\u5176\u625b\u5e76\u53d1\u80fd\u529b\u5f80\u5f80\u662f\u66f4\u6838\u5fc3\u7684\u4ef7\u503c\uff0c\u56e0\u4e3a\u5b83\u80fd\u6709\u6548\u51cf\u8f7b\u540e\u7aef\u670d\u52a1\u7684\u538b\u529b\u3002\u6570\u636e\u5e93\u4f5c\u4e3a\u5927\u591a\u6570\u7cfb\u7edf\u7684\u6838\u5fc3\u7ec4\u4ef6\uff0c\u4e5f\u7ecf\u5e38\u6210\u4e3a\u7cfb\u7edf\u7684\u6027\u80fd\u74f6\u9888\uff0c\u56e0\u6b64\u9488\u5bf9\u6570\u636e\u5e93\u7684\u975e\u529f\u80fd\u6027\u4f18\u5316\u662f\u9762\u8bd5\u4e2d\u7684\u91cd\u70b9\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E5%9C%BA%E6%99%AF%E9%A2%98%E6%80%9D%E8%B7%AF/#_1","title":"\u573a\u666f\u4e00: \u5927\u6570\u636e\u91cf","text":"<p>\u5f53\u7cfb\u7edf\u5904\u7406\u7684\u6570\u636e\u91cf\u975e\u5e38\u5e9e\u5927\u65f6\uff0c\u4f1a\u9762\u4e34\u5b58\u50a8\u548c\u67e5\u8be2\u6548\u7387\u4e0a\u7684\u5de8\u5927\u6311\u6218\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E5%9C%BA%E6%99%AF%E9%A2%98%E6%80%9D%E8%B7%AF/#11","title":"1.1 \u600e\u4e48\u5b58\uff1f","text":"<p>\u5728\u4e0d\u5f71\u54cd\u7cfb\u7edf\u529f\u80fd\u7684\u524d\u63d0\u4e0b\uff0c\u6211\u4eec\u9700\u8981\u5c3d\u53ef\u80fd\u8282\u7701\u5b58\u50a8\u7a7a\u95f4\uff0c\u5e76\u9632\u6b62\u5355\u8868\u6570\u636e\u91cf\u8fc7\u5927\u5bfc\u81f4\u6027\u80fd\u4e0b\u964d\u3002</p> <ul> <li>\u6570\u636e\u7c7b\u578b\u4f18\u5316\uff1a\u9009\u62e9\u6700\u5408\u9002\u3001\u5360\u7528\u7a7a\u95f4\u6700\u5c0f\u7684\u6570\u636e\u7c7b\u578b\u80fd\u591f\u663e\u8457\u8282\u7701\u5b58\u50a8\u7a7a\u95f4\u5e76\u63d0\u9ad8I/O\u6548\u7387\u3002\u4f8b\u5982\uff0c\u4f7f\u7528 <code>TINYINT</code> \u5b58\u50a8\u5e03\u5c14\u503c\uff080\u62161\uff09\u800c\u975e <code>VARCHAR</code>\uff1b\u5bf9\u4e8e\u56fa\u5b9a\u957f\u5ea6\u7684\u5b57\u7b26\u4e32\uff0c\u4f7f\u7528 <code>CHAR</code> \u800c\u975e <code>VARCHAR</code>\uff1b\u5bf9\u4e8e\u6574\u6570\uff0c\u9009\u62e9\u80fd\u6ee1\u8db3\u8303\u56f4\u7684\u6700\u5c0f\u7c7b\u578b\uff08\u5982 <code>SMALLINT</code> \u6216 <code>INT</code>\uff09\u3002</li> <li>\u6570\u636e\u5e93\u8303\u5f0f\u4e0e\u53cd\u8303\u5f0f\uff1a<ul> <li>\u6570\u636e\u5e93\u8303\u5f0f\uff08Normalization\uff09\uff1a\u901a\u8fc7\u5206\u89e3\u8868\u6765\u6d88\u9664\u6570\u636e\u5197\u4f59\uff0c\u4fdd\u8bc1\u6570\u636e\u4e00\u81f4\u6027\u3002\u4f8b\u5982\uff0c\u7b2c\u4e09\u8303\u5f0f\u8981\u6c42\u975e\u4e3b\u952e\u5217\u4e0d\u4f9d\u8d56\u4e8e\u5176\u4ed6\u975e\u4e3b\u952e\u5217\u3002\u4f18\u70b9\u662f\u6570\u636e\u5197\u4f59\u5c0f\u3001\u66f4\u65b0\u5f02\u5e38\u5c11\uff1b\u7f3a\u70b9\u662f\u67e5\u8be2\u65f6\u53ef\u80fd\u9700\u8981\u591a\u8868\u8054\u7ed3\uff0c\u589e\u52a0\u67e5\u8be2\u590d\u6742\u5ea6\u53ca\u6027\u80fd\u5f00\u9500\u3002</li> <li>\u53cd\u8303\u5f0f\uff08Denormalization\uff09\uff1a\u4e3a\u4e86\u63d0\u9ad8\u67e5\u8be2\u6027\u80fd\uff0c\u6709\u610f\u5f15\u5165\u6570\u636e\u5197\u4f59\uff0c\u5c06\u4e00\u4e9b\u76f8\u5173\u6570\u636e\u5b58\u50a8\u5728\u540c\u4e00\u5f20\u8868\u4e2d\uff0c\u51cf\u5c11\u8054\u7ed3\u64cd\u4f5c\u3002\u4f18\u70b9\u662f\u67e5\u8be2\u901f\u5ea6\u5feb\uff1b\u7f3a\u70b9\u662f\u6570\u636e\u5197\u4f59\u5927\u3001\u66f4\u65b0\u65f6\u53ef\u80fd\u51fa\u73b0\u6570\u636e\u4e0d\u4e00\u81f4\u3002\u5728\u975e\u529f\u80fd\u6027\u8bbe\u8ba1\u4e2d\uff0c\u901a\u5e38\u9700\u8981\u5728\u8303\u5f0f\u548c\u53cd\u8303\u5f0f\u4e4b\u95f4\u53d6\u5f97\u5e73\u8861\uff0c\u5c24\u5176\u662f\u5728\u8bfb\u591a\u5199\u5c11\u7684\u573a\u666f\u4e0b\uff0c\u9002\u5ea6\u53cd\u8303\u5f0f\u53ef\u4ee5\u663e\u8457\u63d0\u5347\u67e5\u8be2\u6027\u80fd\u3002</li> </ul> </li> <li>\u6570\u636e\u5f52\u6863\u4e0e\u51b7\u70ed\u5206\u79bb\uff1a\u5c06\u4e0d\u7ecf\u5e38\u8bbf\u95ee\u7684\u5386\u53f2\u6570\u636e\u6216\u65e7\u6570\u636e\uff08\u51b7\u6570\u636e\uff09\u4ece\u4e3b\u6570\u636e\u5e93\u4e2d\u8fc1\u79fb\u5230\u6210\u672c\u66f4\u4f4e\u3001\u8bbf\u95ee\u901f\u5ea6\u76f8\u5bf9\u8f83\u6162\u7684\u5b58\u50a8\u4ecb\u8d28\uff08\u5982HDFS\u3001\u5bf9\u8c61\u5b58\u50a8S3\u3001\u5f52\u6863\u6570\u636e\u5e93\uff09\u4e2d\uff0c\u53ea\u5728\u4e3b\u6570\u636e\u5e93\u4e2d\u4fdd\u7559\u9891\u7e41\u8bbf\u95ee\u7684\u6d3b\u8dc3\u6570\u636e\uff08\u70ed\u6570\u636e\uff09\u3002\u8fd9\u79cd\u7b56\u7565\u53ef\u4ee5\u51cf\u8f7b\u4e3b\u6570\u636e\u5e93\u7684\u5b58\u50a8\u548cI/O\u538b\u529b\uff0c\u964d\u4f4e\u8fd0\u8425\u6210\u672c\uff0c\u5e76\u63d0\u9ad8\u70ed\u6570\u636e\u7684\u8bbf\u95ee\u6027\u80fd\u3002</li> <li>\u5e03\u9686\u8fc7\u6ee4\u5668\uff08Bloom Filter\uff09\uff1a\u4e00\u79cd\u7a7a\u95f4\u6548\u7387\u6781\u9ad8\u7684\u6982\u7387\u578b\u6570\u636e\u7ed3\u6784\uff0c\u7528\u4e8e\u5224\u65ad\u4e00\u4e2a\u5143\u7d20\u662f\u5426\u201c\u53ef\u80fd\u201d\u5b58\u5728\u4e8e\u4e00\u4e2a\u96c6\u5408\u4e2d\u3002\u5b83\u901a\u8fc7\u591a\u4e2a\u54c8\u5e0c\u51fd\u6570\u5c06\u5143\u7d20\u6620\u5c04\u5230\u4f4d\u6570\u7ec4\u4e2d\u7684\u591a\u4e2a\u4f4d\u7f6e\u5e76\u8bbe\u7f6e\u4e3a1\u3002\u4f18\u70b9\u662f\u5360\u7528\u7a7a\u95f4\u6781\u5c0f\uff0c\u67e5\u8be2\u901f\u5ea6\u5feb\uff1b\u7f3a\u70b9\u662f\u5b58\u5728\u4e00\u5b9a\u7684\u8bef\u5224\u7387\uff08\u5373\u67e5\u8be2\u7ed3\u679c\u4e3a\u201c\u53ef\u80fd\u5b58\u5728\u201d\u65f6\uff0c\u8be5\u5143\u7d20\u53ef\u80fd\u5b9e\u9645\u4e0d\u5b58\u5728\uff09\u4e14\u4e0d\u652f\u6301\u5220\u9664\u64cd\u4f5c\u3002\u5728\u9700\u8981\u5927\u91cf\u53bb\u91cd\u6216\u5224\u65ad\u5143\u7d20\u662f\u5426\u5b58\u5728\u4e14\u5141\u8bb8\u4e00\u5b9a\u8bef\u5224\u7387\u7684\u573a\u666f\uff08\u5982\u7f13\u5b58\u7a7f\u900f\u9632\u62a4\u3001\u5783\u573e\u90ae\u4ef6\u8fc7\u6ee4\u3001\u5927\u6570\u636e\u53bb\u91cd\uff09\u4e0b\uff0c\u5e03\u9686\u8fc7\u6ee4\u5668\u80fd\u663e\u8457\u51cf\u5c11\u5b58\u50a8\u548c\u67e5\u8be2\u5f00\u9500\u3002</li> <li>\u5206\u5e93\u5206\u8868\uff08Sharding\uff09\uff1a\u5c06\u4e00\u4e2a\u5927\u578b\u6570\u636e\u5e93\u6216\u5355\u5f20\u8868\u6309\u7167\u4e00\u5b9a\u89c4\u5219\uff08\u5982\u6309\u7528\u6237ID\u3001\u65f6\u95f4\u8303\u56f4\u3001\u54c8\u5e0c\u503c\uff09\u6c34\u5e73\u62c6\u5206\u4e3a\u591a\u4e2a\u66f4\u5c0f\u3001\u66f4\u6613\u7ba1\u7406\u7684\u90e8\u5206\uff0c\u5e76\u5c06\u8fd9\u4e9b\u90e8\u5206\u5206\u6563\u5b58\u50a8\u5728\u4e0d\u540c\u7684\u6570\u636e\u5e93\u5b9e\u4f8b\u6216\u8868\u4e2d\u3002<ul> <li>\u5206\u5e93\uff1a\u5c06\u4e0d\u540c\u4e1a\u52a1\u6a21\u5757\u7684\u6570\u636e\u5206\u6563\u5230\u4e0d\u540c\u7684\u6570\u636e\u5e93\u5b9e\u4f8b\u4e2d\u3002</li> <li>\u5206\u8868\uff1a\u5c06\u5355\u5f20\u5927\u8868\u7684\u6570\u636e\u5206\u6563\u5230\u540c\u4e00\u6570\u636e\u5e93\u5b9e\u4f8b\u7684\u4e0d\u540c\u8868\u4e2d\uff0c\u6216\u4e0d\u540c\u6570\u636e\u5e93\u5b9e\u4f8b\u7684\u8868\u4e2d\u3002 \u5206\u5e93\u5206\u8868\u80fd\u6709\u6548\u5206\u6563\u5b58\u50a8\u538b\u529b\u548cI/O\u8d1f\u8f7d\uff0c\u7a81\u7834\u5355\u673a\u6570\u636e\u5e93\u7684\u6027\u80fd\u74f6\u9888\uff0c\u63d0\u9ad8\u7cfb\u7edf\u7684\u5b58\u50a8\u5bb9\u91cf\u548c\u67e5\u8be2\u5e76\u53d1\u80fd\u529b\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E5%9C%BA%E6%99%AF%E9%A2%98%E6%80%9D%E8%B7%AF/#12","title":"1.2 \u600e\u4e48\u67e5\u7684\u5feb\uff1f","text":"<p>\u5feb\u901f\u67e5\u8be2\u5927\u6570\u636e\u91cf\u9700\u8981\u591a\u65b9\u9762\u7684\u4f18\u5316\u7b56\u7565\u3002</p> <ul> <li>\u6570\u636e\u7ed3\u6784\u4f18\u5316\uff1a<ul> <li>\u7d22\u5f15\uff1a\u6570\u636e\u5e93\u7684\u7d22\u5f15\u662f\u63d0\u9ad8\u67e5\u8be2\u901f\u5ea6\u7684\u5173\u952e\uff0c\u5b83\u5141\u8bb8\u6570\u636e\u5e93\u7cfb\u7edf\u5feb\u901f\u5b9a\u4f4d\u6570\u636e\u800c\u65e0\u9700\u5168\u8868\u626b\u63cf\u3002\u7406\u89e3\u4e0d\u540c\u7d22\u5f15\u7ed3\u6784\u7684\u5de5\u4f5c\u539f\u7406\u81f3\u5173\u91cd\u8981\uff1a<ul> <li>\u94fe\u8868\u7ed3\u6784\uff1a\u4f5c\u4e3a\u57fa\u7840\u6570\u636e\u7ed3\u6784\uff0c\u67e5\u627e\u6548\u7387\u4f4e\uff08O(N)\uff09\uff0c\u901a\u5e38\u4e0d\u76f4\u63a5\u7528\u4e8e\u6570\u636e\u5e93\u7d22\u5f15\uff0c\u4f46\u5728\u67d0\u4e9b\u5185\u90e8\u5b9e\u73b0\u4e2d\u53ef\u80fd\u4f5c\u4e3a\u8f85\u52a9\u7ed3\u6784\u3002</li> <li>\u7ea2\u9ed1\u6811\uff1a\u4e00\u79cd\u81ea\u5e73\u8861\u4e8c\u53c9\u67e5\u627e\u6811\uff0c\u5728\u5185\u5b58\u4e2d\u8fdb\u884c\u67e5\u627e\u3001\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u65f6\uff0c\u5e73\u5747\u548c\u6700\u574f\u65f6\u95f4\u590d\u6742\u5ea6\u5747\u4e3aO(logN)\u3002\u5b83\u9002\u7528\u4e8e\u5185\u5b58\u6570\u636e\u5e93\u6216\u5185\u5b58\u4e2d\u7684\u7d22\u5f15\u7ed3\u6784\u3002</li> <li>B+\u6811\uff1a\u6570\u636e\u5e93\u7d22\u5f15\uff08\u5982MySQL InnoDB\u7684\u805a\u7c07\u7d22\u5f15\u548c\u8f85\u52a9\u7d22\u5f15\uff09\u6700\u5e38\u7528\u7684\u6570\u636e\u7ed3\u6784\u3002\u5176\u7279\u70b9\u662f\uff1a\u6240\u6709\u6570\u636e\u90fd\u5b58\u50a8\u5728\u53f6\u5b50\u8282\u70b9\uff0c\u4e14\u53f6\u5b50\u8282\u70b9\u901a\u8fc7\u6307\u9488\u8fde\u63a5\u5f62\u6210\u4e00\u4e2a\u6709\u5e8f\u94fe\u8868\uff0c\u4fbf\u4e8e\u8303\u56f4\u67e5\u8be2\uff1b\u975e\u53f6\u5b50\u8282\u70b9\u53ea\u5b58\u50a8\u7d22\u5f15\u952e\u503c\uff0c\u4e0d\u5b58\u50a8\u6570\u636e\uff0c\u51cf\u5c11\u4e86\u6811\u7684\u9ad8\u5ea6\uff0c\u4ece\u800c\u51cf\u5c11\u78c1\u76d8I/O\u6b21\u6570\u3002B+\u6811\u975e\u5e38\u9002\u5408\u78c1\u76d8\u5b58\u50a8\uff0c\u56e0\u4e3a\u5176\u8282\u70b9\u5927\u5c0f\u901a\u5e38\u4e0e\u78c1\u76d8\u9875\u5927\u5c0f\u5bf9\u9f50\uff0c\u6bcf\u6b21I/O\u80fd\u8bfb\u53d6\u66f4\u591a\u6709\u6548\u4fe1\u606f\u3002</li> <li>\u8df3\u8868\uff08Skip List\uff09\uff1a\u4e00\u79cd\u6982\u7387\u6027\u6570\u636e\u7ed3\u6784\uff0c\u901a\u8fc7\u591a\u5c42\u6709\u5e8f\u94fe\u8868\u5b9e\u73b0\uff0c\u4e0a\u5c42\u94fe\u8868\u662f\u4e0b\u5c42\u94fe\u8868\u7684\u5b50\u96c6\u3002\u67e5\u627e\u3001\u63d2\u5165\u3001\u5220\u9664\u7684\u5e73\u5747\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(logN)\uff0c\u4e14\u5b9e\u73b0\u76f8\u5bf9\u7b80\u5355\uff0c\u5e76\u53d1\u6027\u80fd\u8f83\u597d\u3002\u5e38\u7528\u4e8eRedis\u7b49\u5185\u5b58\u6570\u636e\u5e93\uff08\u5982Redis\u7684ZSET\u5e95\u5c42\u5b9e\u73b0\u4e4b\u4e00\uff09\u3002</li> </ul> </li> </ul> </li> <li>\u641c\u7d22\u7b97\u6cd5\uff1a\u5728\u6570\u636e\u5e93\u67e5\u8be2\u4e2d\uff0c\u76f4\u63a5\u5e94\u7528DFS\uff08\u6df1\u5ea6\u4f18\u5148\u641c\u7d22\uff09\u3001BFS\uff08\u5e7f\u5ea6\u4f18\u5148\u641c\u7d22\uff09\u7b49\u901a\u7528\u641c\u7d22\u7b97\u6cd5\u7684\u573a\u666f\u8f83\u5c11\u3002\u66f4\u91cd\u8981\u7684\u662f\u6570\u636e\u5e93\u5185\u90e8\u7684\u67e5\u8be2\u4f18\u5316\u5668\u4f1a\u6839\u636eSQL\u8bed\u53e5\u548c\u7d22\u5f15\u4fe1\u606f\u751f\u6210\u6700\u4f18\u7684\u6267\u884c\u8ba1\u5212\u3002\u5f00\u53d1\u8005\u4e3b\u8981\u901a\u8fc7\u4f18\u5316\u7d22\u5f15\u8bbe\u8ba1\u3001SQL\u8bed\u53e5\u548c\u8868\u7ed3\u6784\u6765\u95f4\u63a5\u5f71\u54cd\u67e5\u8be2\u7b97\u6cd5\u3002</li> <li>\u52a0\u4e00\u5c42\u7f13\u5b58\uff08Caching\uff09\uff1a\u5c06\u7ecf\u5e38\u8bbf\u95ee\u7684\u70ed\u70b9\u6570\u636e\u5b58\u5165\u9ad8\u901f\u7f13\u5b58\uff08\u5982Redis\u3001Memcached\u3001Guava Cache\uff09\u4e2d\uff0c\u4e0b\u6b21\u8bf7\u6c42\u76f4\u63a5\u4ece\u7f13\u5b58\u4e2d\u83b7\u53d6\u6570\u636e\uff0c\u907f\u514d\u9891\u7e41\u8bbf\u95ee\u540e\u7aef\u6570\u636e\u5e93\u6216\u670d\u52a1\u3002\u7f13\u5b58\u663e\u8457\u964d\u4f4e\u4e86\u6570\u636e\u8bbf\u95ee\u5ef6\u8fdf\uff0c\u63d0\u5347\u4e86\u7cfb\u7edf\u541e\u5410\u91cf\uff0c\u662f\u5e94\u5bf9\u8bfb\u5bc6\u96c6\u578b\u573a\u666f\u7684\u6709\u6548\u624b\u6bb5\u3002</li> <li>\u5206\u800c\u6cbb\u4e4b\u7684\u601d\u60f3\uff08Divide and Conquer\uff09\uff1a\u5c06\u4e00\u4e2a\u5927\u95ee\u9898\u5206\u89e3\u6210\u591a\u4e2a\u5c0f\u95ee\u9898\uff0c\u5206\u522b\u89e3\u51b3\u540e\u518d\u5408\u5e76\u7ed3\u679c\u3002<ul> <li>\u5206\u5e03\u5f0f\u5b58\u50a8\uff1a\u901a\u8fc7\u589e\u52a0\u5b58\u50a8\u5b9e\u4f8b\uff08\u5982\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edfHDFS\u3001Ceph\uff1b\u5206\u5e03\u5f0f\u6570\u636e\u5e93MongoDB\u3001Cassandra\uff09\u6765\u5206\u6563\u6570\u636e\u548cI/O\u8d1f\u8f7d\u3002\u6bcf\u4e2a\u5b9e\u4f8b\u8d1f\u8d23\u5b58\u50a8\u4e00\u90e8\u5206\u6570\u636e\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u5e76\u884c\u8bbf\u95ee\u591a\u4e2a\u5b9e\u4f8b\u3002</li> <li>\u5206\u5e93\u5206\u8868\uff1a\u5982\u4e0a\u6240\u8ff0\uff0c\u5c06\u6570\u636e\u5206\u6563\u5230\u591a\u4e2a\u6570\u636e\u5e93\u6216\u8868\u4e2d\uff0c\u63d0\u5347\u67e5\u8be2\u6027\u80fd\u3002\u4e00\u4e2a\u67e5\u8be2\u53ef\u4ee5\u5e76\u884c\u5728\u591a\u4e2a\u5206\u7247\u4e0a\u6267\u884c\uff0c\u7136\u540e\u5408\u5e76\u7ed3\u679c\u3002</li> <li>\u6570\u636e\u4ed3\u5e93/\u6570\u636e\u6e56\uff1a\u6784\u5efa\u4e13\u95e8\u7528\u4e8e\u5206\u6790\u548c\u67e5\u8be2\u5927\u89c4\u6a21\u6570\u636e\u7684\u5e73\u53f0\uff0c\u5982Hadoop\u3001Spark\u3001ClickHouse\u7b49\u3002\u5b83\u4eec\u901a\u5e38\u91c7\u7528\u5217\u5f0f\u5b58\u50a8\u3001\u5927\u89c4\u6a21\u5e76\u884c\u5904\u7406\uff08MPP\uff09\u67b6\u6784\u7b49\u6280\u672f\uff0c\u5c06\u64cd\u4f5c\u578b\u6570\u636e\u5e93\uff08OLTP\uff09\u7684\u5206\u6790\u538b\u529b\u89e3\u8026\uff0c\u4e13\u6ce8\u4e8e\u5feb\u901f\u3001\u590d\u6742\u7684\u67e5\u8be2\u3002\u6570\u636e\u4ed3\u5e93\u5f3a\u8c03\u7ed3\u6784\u5316\u6570\u636e\u548cOLAP\u67e5\u8be2\uff0c\u6570\u636e\u6e56\u5219\u53ef\u4ee5\u5b58\u50a8\u5404\u79cd\u683c\u5f0f\u7684\u539f\u59cb\u6570\u636e\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E5%9C%BA%E6%99%AF%E9%A2%98%E6%80%9D%E8%B7%AF/#13","title":"1.3 \u53bb\u91cd\u95ee\u9898","text":"<p>\u5904\u7406\u5927\u89c4\u6a21\u6570\u636e\u53bb\u91cd\u662f\u4e00\u4e2a\u7ecf\u5178\u95ee\u9898\uff0c\u5c24\u5176\u5728\u6570\u636e\u91cf\u8fdc\u8d85\u5355\u673a\u5185\u5b58\u65f6\u3002</p> <ul> <li>\u5e03\u9686\u8fc7\u6ee4\u5668\uff1a\u5bf9\u4e8e\u6d77\u91cf\u6570\u636e\uff08\u598240\u4ebf\u4e2aQQ\u53f7\uff09\u7684\u53bb\u91cd\u573a\u666f\uff0c\u82e5\u5141\u8bb8\u4e00\u5b9a\u8bef\u5224\u7387\uff0c\u5e03\u9686\u8fc7\u6ee4\u5668\u662f\u9ad8\u6548\u4e14\u5185\u5b58\u5360\u7528\u6781\u4f4e\u7684\u65b9\u6848\u3002\u5b83\u53ef\u4ee5\u5feb\u901f\u5224\u65ad\u4e00\u4e2aQQ\u53f7\u662f\u5426\u5df2\u5b58\u5728\uff0c\u663e\u8457\u51cf\u5c11\u4e86\u9700\u8981\u8fdb\u4e00\u6b65\u5904\u7406\u7684\u6570\u636e\u91cf\u3002</li> <li>\u5206\u800c\u6cbb\u4e4b\uff1a<ul> <li>\u54c8\u5e0c\u5206\u7247\uff1a\u5c06\u5927\u6570\u636e\u91cf\u5206\u5272\u6210\u5c0f\u5757\u3002\u4f8b\u5982\uff0c\u5c0640\u4ebf\u4e2aQQ\u53f7\u6309\u7167\u5176\u54c8\u5e0c\u503c\uff08\u6216\u53d6\u6a21\uff09\u5206\u6563\u5230\u591a\u53f0\u673a\u5668\u6216\u591a\u4e2a\u6587\u4ef6\u4e2d\u3002\u6bcf\u53f0\u673a\u5668\u6216\u6bcf\u4e2a\u6587\u4ef6\u8d1f\u8d23\u5904\u7406\u81ea\u5df1\u7684\u90a3\u90e8\u5206\u6570\u636e\uff0c\u5e76\u5728\u672c\u5730\u8fdb\u884c\u53bb\u91cd\u3002\u8fd9\u79cd\u65b9\u6cd5\u5c06\u53bb\u91cd\u4efb\u52a1\u5e76\u884c\u5316\uff0c\u63d0\u9ad8\u4e86\u5904\u7406\u6548\u7387\u3002</li> <li>\u5927\u6570\u636e\u91cf\u6392\u5e8f -&gt; \u5f52\u5e76\u6392\u5e8f\uff1a\u5bf9\u4e8e\u9700\u8981\u5b8c\u5168\u53bb\u91cd\u4e14\u5185\u5b58\u65e0\u6cd5\u5bb9\u7eb3\u6240\u6709\u6570\u636e\u7684\u60c5\u51b5\uff0c\u53ef\u4ee5\u91c7\u7528\u4ee5\u4e0b\u6b65\u9aa4\uff1a<ol> <li>\u5206\u7247\uff1a\u5c06\u539f\u59cb\u6570\u636e\u6587\u4ef6\u5207\u5206\u6210\u591a\u4e2a\u5c0f\u6587\u4ef6\uff0c\u6bcf\u4e2a\u5c0f\u6587\u4ef6\u7684\u5927\u5c0f\u53ef\u4ee5\u5728\u5355\u673a\u5185\u5b58\u4e2d\u5904\u7406\u3002</li> <li>\u5c40\u90e8\u6392\u5e8f\u4e0e\u53bb\u91cd\uff1a\u5bf9\u6bcf\u4e2a\u5c0f\u6587\u4ef6\u72ec\u7acb\u8fdb\u884c\u6392\u5e8f\uff0c\u5e76\u5728\u6392\u5e8f\u8fc7\u7a0b\u4e2d\u8fdb\u884c\u521d\u6b65\u53bb\u91cd\uff08\u76f8\u90bb\u76f8\u540c\u5143\u7d20\u53ea\u4fdd\u7559\u4e00\u4e2a\uff09\u3002</li> <li>\u591a\u8def\u5f52\u5e76\u6392\u5e8f\u4e0e\u6700\u7ec8\u53bb\u91cd\uff1a\u5229\u7528\u591a\u8def\u5f52\u5e76\u6392\u5e8f\u7684\u601d\u60f3\uff0c\u5c06\u5df2\u6392\u5e8f\u7684\u5c0f\u6587\u4ef6\u5408\u5e76\u3002\u5728\u5408\u5e76\u8fc7\u7a0b\u4e2d\uff0c\u6bcf\u6b21\u4eceN\u4e2a\u6587\u4ef6\u4e2d\u53d6\u51fa\u5f53\u524d\u6700\u5c0f\u7684\u5143\u7d20\uff0c\u5e76\u4e0e\u4e0a\u4e00\u4e2a\u8f93\u51fa\u7684\u5143\u7d20\u8fdb\u884c\u6bd4\u8f83\uff0c\u5982\u679c\u76f8\u540c\u5219\u8df3\u8fc7\uff0c\u5b9e\u73b0\u6700\u7ec8\u7684\u53bb\u91cd\u3002\u8fd9\u79cd\u65b9\u6cd5\u9002\u7528\u4e8e\u9700\u8981\u7cbe\u786e\u53bb\u91cd\u7684\u8d85\u5927\u6570\u636e\u96c6\u3002</li> </ol> </li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E5%9C%BA%E6%99%AF%E9%A2%98%E6%80%9D%E8%B7%AF/#_2","title":"\u573a\u666f\u4e8c: \u9ad8\u5e76\u53d1\u91cf","text":"<p>\u9ad8\u5e76\u53d1\u662f\u73b0\u4ee3\u4e92\u8054\u7f51\u7cfb\u7edf\u5fc5\u987b\u9762\u5bf9\u7684\u6311\u6218\uff0c\u5b83\u8981\u6c42\u7cfb\u7edf\u80fd\u591f\u540c\u65f6\u5904\u7406\u5927\u91cf\u7684\u7528\u6237\u8bf7\u6c42\u800c\u4e0d\u5d29\u6e83\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E5%9C%BA%E6%99%AF%E9%A2%98%E6%80%9D%E8%B7%AF/#21-","title":"2.1 \u5927\u6d41\u91cf -&gt; \u9632\u6b62\u6253\u5d29\u7cfb\u7edf","text":"<ul> <li>\u9650\u6d41\uff08Rate Limiting\uff09\uff1a\u9650\u5236\u5355\u4f4d\u65f6\u95f4\u5185\u5141\u8bb8\u901a\u8fc7\u7684\u8bf7\u6c42\u6570\u91cf\uff0c\u4ee5\u4fdd\u62a4\u540e\u7aef\u670d\u52a1\u4e0d\u88ab\u7a81\u53d1\u6216\u6076\u610f\u6d41\u91cf\u51b2\u57ae\u3002\u5e38\u89c1\u7684\u9650\u6d41\u7b97\u6cd5\u5305\u62ec\uff1a<ul> <li>\u8ba1\u6570\u5668\u6cd5\uff08Fixed Window Counter\uff09\uff1a\u6700\u7b80\u5355\uff0c\u4f46\u53ef\u80fd\u5728\u7a97\u53e3\u8fb9\u754c\u53d1\u751f\u7a81\u53d1\u6d41\u91cf\u3002</li> <li>\u6ed1\u52a8\u7a97\u53e3\u6cd5\uff08Sliding Window Counter\uff09\uff1a\u6bd4\u8ba1\u6570\u5668\u6cd5\u66f4\u5e73\u6ed1\uff0c\u4f46\u5b9e\u73b0\u7565\u590d\u6742\u3002</li> <li>\u6f0f\u6876\u7b97\u6cd5\uff08Leaky Bucket\uff09\uff1a\u8bf7\u6c42\u4ee5\u6052\u5b9a\u901f\u7387\u5904\u7406\uff0c\u8d85\u51fa\u5bb9\u91cf\u7684\u8bf7\u6c42\u4f1a\u88ab\u4e22\u5f03\u6216\u6392\u961f\u3002\u7279\u70b9\u662f\u51fa\u6c34\u901f\u5ea6\u6052\u5b9a\uff0c\u5e73\u6ed1\u6d41\u91cf\u3002</li> <li>\u4ee4\u724c\u6876\u7b97\u6cd5\uff08Token Bucket\uff09\uff1a\u7cfb\u7edf\u4ee5\u6052\u5b9a\u901f\u7387\u751f\u6210\u4ee4\u724c\u653e\u5165\u6876\u4e2d\uff0c\u8bf7\u6c42\u5230\u6765\u65f6\u9700\u8981\u83b7\u53d6\u4e00\u4e2a\u4ee4\u724c\u624d\u80fd\u88ab\u5904\u7406\u3002\u5982\u679c\u6876\u4e2d\u6ca1\u6709\u4ee4\u724c\u5219\u8bf7\u6c42\u88ab\u62d2\u7edd\u6216\u6392\u961f\u3002\u7279\u70b9\u662f\u5141\u8bb8\u7a81\u53d1\u6d41\u91cf\uff0c\u53ea\u8981\u6876\u4e2d\u6709\u8db3\u591f\u7684\u4ee4\u724c\u3002</li> </ul> </li> <li>\u7194\u65ad\uff08Circuit Breaking\uff09\uff1a\u5f53\u67d0\u4e2a\u4e0b\u6e38\u670d\u52a1\u51fa\u73b0\u6545\u969c\uff08\u5982\u54cd\u5e94\u8d85\u65f6\u3001\u9519\u8bef\u7387\u8fc7\u9ad8\u3001\u8fde\u7eed\u5931\u8d25\u8fbe\u5230\u9608\u503c\uff09\u65f6\uff0c\u5ba2\u6237\u7aef\u4e0d\u518d\u7ee7\u7eed\u8c03\u7528\u8be5\u670d\u52a1\uff0c\u800c\u662f\u76f4\u63a5\u8fd4\u56de\u5931\u8d25\u6216\u6267\u884c\u964d\u7ea7\u903b\u8f91\uff0c\u907f\u514d\u6545\u969c\u8513\u5ef6\u5bfc\u81f4\u6574\u4e2a\u7cfb\u7edf\u96ea\u5d29\u6548\u5e94\u3002\u7194\u65ad\u5668\u6709\u4e09\u79cd\u72b6\u6001\uff1a<ul> <li>\u5173\u95ed\uff08Closed\uff09\uff1a\u6b63\u5e38\u72b6\u6001\uff0c\u8bf7\u6c42\u76f4\u63a5\u901a\u8fc7\u3002</li> <li>\u6253\u5f00\uff08Open\uff09\uff1a\u5f53\u9519\u8bef\u7387\u8fbe\u5230\u9608\u503c\u65f6\uff0c\u7194\u65ad\u5668\u6253\u5f00\uff0c\u6240\u6709\u8bf7\u6c42\u76f4\u63a5\u5931\u8d25\u3002</li> <li>\u534a\u5f00\uff08Half-Open\uff09\uff1a\u7ecf\u8fc7\u4e00\u6bb5\u65f6\u95f4\u540e\uff0c\u7194\u65ad\u5668\u8fdb\u5165\u534a\u5f00\u72b6\u6001\uff0c\u5141\u8bb8\u5c11\u91cf\u8bf7\u6c42\u5c1d\u8bd5\u8c03\u7528\u4e0b\u6e38\u670d\u52a1\uff0c\u5982\u679c\u6210\u529f\u5219\u56de\u5230\u5173\u95ed\u72b6\u6001\uff0c\u5982\u679c\u7ee7\u7eed\u5931\u8d25\u5219\u56de\u5230\u6253\u5f00\u72b6\u6001\u3002</li> </ul> </li> <li>\u670d\u52a1\u964d\u7ea7\uff08Service Degradation\uff09\uff1a\u5728\u7cfb\u7edf\u8d1f\u8f7d\u8fc7\u9ad8\u3001\u8d44\u6e90\u7d27\u5f20\u6216\u90e8\u5206\u670d\u52a1\u4e0d\u53ef\u7528\u65f6\uff0c\u5173\u95ed\u4e00\u4e9b\u975e\u6838\u5fc3\u529f\u80fd\uff0c\u6216\u4f7f\u7528\u7b80\u5355\u66ff\u4ee3\u65b9\u6848\uff0c\u4ee5\u727a\u7272\u90e8\u5206\u7528\u6237\u4f53\u9a8c\u4e3a\u4ee3\u4ef7\uff0c\u4fdd\u8bc1\u6838\u5fc3\u529f\u80fd\u7684\u53ef\u7528\u6027\u548c\u7cfb\u7edf\u7684\u6574\u4f53\u7a33\u5b9a\u6027\u3002\u4f8b\u5982\uff0c\u7535\u5546\u5927\u4fc3\u65f6\uff0c\u53ef\u4ee5\u5173\u95ed\u5546\u54c1\u8bc4\u8bba\u3001\u63a8\u8350\u7cfb\u7edf\uff0c\u53ea\u4fdd\u7559\u6838\u5fc3\u7684\u8d2d\u4e70\u6d41\u7a0b\u3002</li> <li>\u505a\u5206\u5e03\u5f0f\uff0c\u6dfb\u52a0\u5b9e\u4f8b\uff08Horizontal Scaling\uff09\uff1a\u901a\u8fc7\u589e\u52a0\u670d\u52a1\u5668\u6216\u670d\u52a1\u5b9e\u4f8b\u6570\u91cf\u6765\u5206\u6563\u6d41\u91cf\u3002\u7ed3\u5408\u8d1f\u8f7d\u5747\u8861\u5668\uff08\u5982Nginx\u3001HAProxy\u3001LVS\uff09\u5c06\u5927\u6d41\u91cf\u5e73\u5747\u5206\u914d\u5230\u6bcf\u4e2a\u5b9e\u4f8b\u4e0a\uff0c\u8fd9\u662f\u5e94\u5bf9\u9ad8\u5e76\u53d1\u6700\u76f4\u63a5\u6709\u6548\u7684\u65b9\u6cd5\u3002\u5f53\u8bf7\u6c42\u91cf\u589e\u52a0\u65f6\uff0c\u53ea\u9700\u7b80\u5355\u5730\u589e\u52a0\u670d\u52a1\u5668\u5373\u53ef\u6269\u5c55\u7cfb\u7edf\u7684\u5904\u7406\u80fd\u529b\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E5%9C%BA%E6%99%AF%E9%A2%98%E6%80%9D%E8%B7%AF/#22","title":"2.2 \u5e76\u53d1\u5b89\u5168","text":"<p>\u5728\u9ad8\u5e76\u53d1\u73af\u5883\u4e0b\uff0c\u6570\u636e\u4e00\u81f4\u6027\u548c\u8d44\u6e90\u8bbf\u95ee\u7684\u5b89\u5168\u6027\u81f3\u5173\u91cd\u8981\uff0c\u4ee5\u907f\u514d\u810f\u8bfb\u3001\u5e7b\u8bfb\u3001\u6570\u636e\u4e22\u5931\u7b49\u95ee\u9898\u3002</p> <ul> <li>\u52a0\u4e00\u5c42\u7f13\u5b58\uff08Caching\uff09\uff1a\u5c06\u70ed\u70b9\u6570\u636e\u653e\u5230\u7f13\u5b58\uff08\u5982Redis\uff09\u4e2d\uff0c\u53ef\u4ee5\u663e\u8457\u51cf\u8f7b\u6570\u636e\u5e93\u7684\u5e76\u53d1\u8bbf\u95ee\u538b\u529b\u3002\u7531\u4e8e\u7f13\u5b58\u901a\u5e38\u90e8\u7f72\u5728\u5185\u5b58\u4e2d\u4e14\u8bbf\u95ee\u901f\u5ea6\u5feb\uff0c\u5176\u625b\u5e76\u53d1\u80fd\u529b\u8fdc\u9ad8\u4e8e\u78c1\u76d8I/O\u53d7\u9650\u7684\u6570\u636e\u5e93\uff08\u5982MySQL\uff09\uff0c\u56e0\u6b64\u662f\u5904\u7406\u9ad8\u5e76\u53d1\u8bfb\u7684\u7406\u60f3\u9009\u62e9\u3002</li> <li>\u5206\u5e03\u5f0f\u9501\uff08Distributed Lock\uff09\uff1a\u5728\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u5171\u4eab\u8d44\u6e90\u7684\u5e76\u53d1\u5b89\u5168\uff08\u4f8b\u5982\uff0c\u9632\u6b62\u591a\u4e2a\u670d\u52a1\u5b9e\u4f8b\u540c\u65f6\u4fee\u6539\u540c\u4e00\u4e2a\u5e93\u5b58\u6570\u91cf\uff09\uff0c\u9700\u8981\u4f7f\u7528\u5206\u5e03\u5f0f\u9501\u3002\u5b83\u786e\u4fdd\u5728\u4efb\u4f55\u65f6\u523b\u53ea\u6709\u4e00\u4e2a\u5ba2\u6237\u7aef\u80fd\u591f\u6301\u6709\u9501\u5e76\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\u3002<ul> <li>Redis \u5206\u5e03\u5f0f\u9501\uff1a\u5229\u7528 Redis \u7684\u539f\u5b50\u64cd\u4f5c\uff08\u5982 <code>SETNX key value</code>\uff0c\u5f53key\u4e0d\u5b58\u5728\u65f6\u624d\u8bbe\u7f6e\uff0c\u4fdd\u8bc1\u552f\u4e00\u6027\uff1b\u6216\u8005\u4f7f\u7528Lua\u811a\u672c\u4fdd\u8bc1\u591a\u4e2a\u547d\u4ee4\u7684\u539f\u5b50\u6027\uff09\u6765\u5b9e\u73b0\u5206\u5e03\u5f0f\u9501\u3002\u7136\u800c\uff0cRedis\u5206\u5e03\u5f0f\u9501\u7684\u5b9e\u73b0\u9700\u8981\u6ce8\u610f\u4ee5\u4e0b\u95ee\u9898\uff1a<ul> <li>\u6b7b\u9501\uff1a\u6301\u6709\u9501\u7684\u670d\u52a1\u5d29\u6e83\uff0c\u672a\u53ca\u65f6\u91ca\u653e\u9501\u3002</li> <li>\u9501\u8fc7\u671f\uff1a\u4e1a\u52a1\u5904\u7406\u65f6\u95f4\u8d85\u8fc7\u9501\u7684\u8fc7\u671f\u65f6\u95f4\uff0c\u5bfc\u81f4\u9501\u88ab\u63d0\u524d\u91ca\u653e\uff0c\u5176\u4ed6\u7ebf\u7a0b\u83b7\u53d6\u9501\u3002</li> <li>\u8bef\u5220\u9501\uff1a\u4e00\u4e2a\u7ebf\u7a0b\u91ca\u653e\u4e86\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u7684\u9501\u3002</li> <li>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0c\u901a\u5e38\u9700\u8981\u7cbe\u5fc3\u8bbe\u8ba1\u548c\u5b9e\u73b0\uff0c\u4f8b\u5982\uff1a\u4e3a\u9501\u8bbe\u7f6e\u5408\u7406\u7684\u8fc7\u671f\u65f6\u95f4\u3001\u4f7f\u7528\u8bf7\u6c42ID\u6765\u6807\u8bc6\u9501\u7684\u62e5\u6709\u8005\u3001\u7eed\u671f\u673a\u5236\uff08\u770b\u95e8\u72d7\uff09\uff0c\u751a\u81f3\u8003\u8651\u4f7f\u7528 Redlock \u7b97\u6cd5\uff08\u4e00\u79cd\u591a\u5b9e\u4f8bRedis\u5206\u5e03\u5f0f\u9501\u65b9\u6848\uff0c\u4f46\u5176\u5b89\u5168\u6027\u4e5f\u5b58\u5728\u4e89\u8bae\uff09\u6216 ZooKeeper\u3001Etcd \u7b49\u66f4\u4e13\u4e1a\u7684\u5206\u5e03\u5f0f\u534f\u8c03\u670d\u52a1\uff0c\u5b83\u4eec\u63d0\u4f9b\u4e86\u66f4\u5f3a\u7684\u5f3a\u4e00\u81f4\u6027\u548c\u53ef\u9760\u7684\u9501\u670d\u52a1\u3002</li> </ul> </li> </ul> </li> <li>Redis \u5206\u7247\u96c6\u7fa4\uff08Redis Cluster\uff09\uff1a\u4e3a\u4e86\u63d0\u5347 Redis \u672c\u8eab\u7684\u5b58\u50a8\u5bb9\u91cf\u548c\u5e76\u53d1\u5904\u7406\u80fd\u529b\uff0c\u53ef\u4ee5\u90e8\u7f72 Redis \u5206\u7247\u96c6\u7fa4\u3002\u5b83\u901a\u8fc7\u54c8\u5e0c\u69fd\uff08hash slot\uff09\u5c06\u6570\u636e\u5206\u6563\u5230\u591a\u4e2a Redis \u8282\u70b9\u4e0a\uff0c\u6bcf\u4e2a\u8282\u70b9\u8d1f\u8d23\u4e00\u90e8\u5206\u6570\u636e\u3002\u8fd9\u6837\uff0c\u4e0d\u4ec5\u53ef\u4ee5\u7a81\u7834\u5355\u673a\u5185\u5b58\u9650\u5236\uff0c\u8fd8\u80fd\u5c06\u8bfb\u5199\u8bf7\u6c42\u5206\u6563\u5230\u591a\u4e2a\u8282\u70b9\uff0c\u4ece\u800c\u63d0\u5347\u6574\u4f53\u7684\u5b58\u50a8\u5bb9\u91cf\u548c\u5e76\u53d1\u5904\u7406\u80fd\u529b\u3002Redis Cluster \u8fd8\u5185\u7f6e\u4e86\u9ad8\u53ef\u7528\u673a\u5236\uff08\u4e3b\u4ece\u590d\u5236\u548c\u6545\u969c\u8f6c\u79fb\uff09\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E5%9C%BA%E6%99%AF%E9%A2%98%E6%80%9D%E8%B7%AF/#_3","title":"\u573a\u666f\u4e09: \u63a5\u53e3\u54cd\u5e94\u901f\u5ea6\u6162","text":"<p>\u63a5\u53e3\u54cd\u5e94\u6162\u662f\u7528\u6237\u4f53\u9a8c\u4e0d\u4f73\u7684\u76f4\u63a5\u4f53\u73b0\uff0c\u9700\u8981\u5b9a\u4f4d\u5e76\u4f18\u5316\u591a\u79cd\u6f5c\u5728\u539f\u56e0\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E5%9C%BA%E6%99%AF%E9%A2%98%E6%80%9D%E8%B7%AF/#31","title":"3.1 \u6570\u636e\u5e93\u8bfb\u5199\u6162","text":"<p>\u6570\u636e\u5e93\u662f\u7cfb\u7edf\u4e2d\u6700\u5e38\u89c1\u7684\u6027\u80fd\u74f6\u9888\u4e4b\u4e00\u3002</p> <ul> <li>\u7d22\u5f15\u5931\u6548\uff1a\u7d22\u5f15\u662f\u63d0\u9ad8\u67e5\u8be2\u901f\u5ea6\u7684\u5173\u952e\uff0c\u4f46\u5982\u679cSQL\u8bed\u53e5\u7f16\u5199\u4e0d\u5f53\u6216\u7d22\u5f15\u8bbe\u8ba1\u4e0d\u5408\u7406\uff0c\u53ef\u80fd\u5bfc\u81f4\u7d22\u5f15\u5931\u6548\u6216\u6548\u7387\u4f4e\u4e0b\uff0c\u4ece\u800c\u5f15\u53d1\u5168\u8868\u626b\u63cf\u3002<ul> <li>\u7d22\u5f15\u533a\u5206\u5ea6\u4f4e\uff1a\u4f8b\u5982\uff0c\u201c\u6027\u522b\u201d\u5b57\u6bb5\u53ea\u6709\u201c\u7537\u201d\u3001\u201c\u5973\u201d\u4e24\u4e2a\u503c\uff0c\u5176\u533a\u5206\u5ea6\u975e\u5e38\u4f4e\u3002\u5982\u679c\u67e5\u8be2\u6761\u4ef6\u662f <code>WHERE gender = '\u7537'</code>\uff0c\u5373\u4f7f\u6709\u7d22\u5f15\uff0c\u6570\u636e\u5e93\u4f18\u5316\u5668\u4e5f\u53ef\u80fd\u8ba4\u4e3a\u626b\u63cf\u5927\u90e8\u5206\u6570\u636e\u548c\u626b\u63cf\u7d22\u5f15\u518d\u56de\u8868IO\u7684\u6210\u672c\u76f8\u5dee\u4e0d\u5927\uff0c\u4ece\u800c\u9009\u62e9\u5168\u8868\u626b\u63cf\uff0c\u5bfc\u81f4\u7d22\u5f15\u6548\u679c\u4e0d\u4f73\u3002</li> <li>\u6ca1\u6709\u505a\u8054\u5408\u7d22\u5f15\uff1a\u5f53\u67e5\u8be2\u6761\u4ef6\u6d89\u53ca\u591a\u4e2a\u5b57\u6bb5\u65f6\uff08\u4f8b\u5982 <code>WHERE column_a = ? AND column_b = ?</code>\uff09\uff0c\u53ea\u4f7f\u7528\u5355\u5217\u7d22\u5f15\u6216\u7d22\u5f15\u987a\u5e8f\u4e0d\u5f53\uff08\u8054\u5408\u7d22\u5f15\u5e94\u9075\u5faa\u201c\u6700\u5de6\u524d\u7f00\u539f\u5219\u201d\uff09\u53ef\u80fd\u5bfc\u81f4\u7d22\u5f15\u5931\u6548\u6216\u53ea\u4f7f\u7528\u90e8\u5206\u7d22\u5f15\uff0c\u8fdb\u800c\u6267\u884c\u6548\u7387\u4f4e\u4e0b\u3002</li> <li>SQL \u8bed\u53e5\u5199\u6cd5\u95ee\u9898\uff1a<ul> <li>\u5728\u7d22\u5f15\u5217\u4e0a\u4f7f\u7528\u51fd\u6570\uff08\u5982 <code>WHERE YEAR(create_time) = 2023</code>\uff09\u3002</li> <li>\u4f7f\u7528 <code>LIKE %xxx</code>\uff08\u524d\u5bfc\u6a21\u7cca\u5339\u914d\uff09\u8fdb\u884c\u67e5\u8be2\u3002</li> <li>\u4f7f\u7528 <code>OR</code> \u6761\u4ef6\uff08\u9664\u975e<code>OR</code>\u4e24\u8fb9\u7684\u5217\u90fd\u6709\u7d22\u5f15\u4e14\u90fd\u6ee1\u8db3\u6761\u4ef6\uff09\u3002</li> <li>\u4f7f\u7528 <code>!=</code> \u6216 <code>NOT IN</code> \u7b49\u8d1f\u5411\u67e5\u8be2\u3002</li> <li>\u9690\u5f0f\u7c7b\u578b\u8f6c\u6362\u3002</li> <li>\u8fd9\u4e9b\u64cd\u4f5c\u90fd\u53ef\u80fd\u5bfc\u81f4\u6570\u636e\u5e93\u4f18\u5316\u5668\u65e0\u6cd5\u4f7f\u7528\u7d22\u5f15\uff0c\u9000\u5316\u4e3a\u5168\u8868\u626b\u63cf\u3002</li> </ul> </li> </ul> </li> <li>MySQL \u7684\u8c03\u4f18\uff1a<ul> <li>\u5206\u9875\u4f18\u5316\uff1a\u5f53\u6570\u636e\u91cf\u975e\u5e38\u5927\u65f6\uff0c\u4f20\u7edf\u7684 <code>LIMIT offset, count</code> \u65b9\u5f0f\uff0c<code>offset</code> \u8d8a\u5927\uff0c\u67e5\u8be2\u6548\u7387\u8d8a\u4f4e\uff0c\u56e0\u4e3a\u5b83\u4f1a\u626b\u63cf <code>offset + count</code> \u6761\u8bb0\u5f55\u7136\u540e\u4e22\u5f03 <code>offset</code> \u6761\u3002\u4f18\u5316\u65b9\u6848\u5305\u62ec\uff1a<ul> <li>\u4f7f\u7528\u8986\u76d6\u7d22\u5f15\uff0c\u907f\u514d\u56de\u8868\u67e5\u8be2\uff1a<code>SELECT id FROM table WHERE condition ORDER BY id LIMIT offset, count</code>\uff0c\u518d\u6839\u636e <code>id</code> \u5217\u8868\u6279\u91cf\u67e5\u8be2\u8be6\u7ec6\u6570\u636e\u3002</li> <li>\u57fa\u4e8e\u4e0a\u4e00\u9875\u6700\u5927ID\u8fdb\u884c\u67e5\u8be2\uff1a<code>SELECT * FROM table WHERE id &gt; last_id LIMIT count</code>\uff0c\u9002\u7528\u4e8e\u4e25\u683c\u9012\u589eID\u7684\u573a\u666f\u3002</li> </ul> </li> <li>\u8fde\u63a5\u6570\u4f18\u5316\uff1aMySQL \u5b9e\u4f8b\u8fde\u63a5\u6570\u8fc7\u591a\u4f1a\u6d88\u8017\u5927\u91cf\u8d44\u6e90\uff0c\u5bfc\u81f4\u6570\u636e\u5e93\u54cd\u5e94\u53d8\u6162\u751a\u81f3\u5d29\u6e83\u3002\u9700\u8981\u8c03\u6574\u6570\u636e\u5e93\u7684\u6700\u5927\u8fde\u63a5\u6570\u914d\u7f6e\uff08<code>max_connections</code>\uff09\u4ee5\u53ca\u5e94\u7528\u7a0b\u5e8f\u7684\u8fde\u63a5\u6c60\u914d\u7f6e\uff08\u5982 <code>HikariCP</code>\u3001<code>Druid</code>\uff09\uff0c\u786e\u4fdd\u8fde\u63a5\u6570\u5408\u7406\u4e14\u8fde\u63a5\u80fd\u591f\u88ab\u9ad8\u6548\u590d\u7528\u3002</li> <li>\u5206\u5e93\u5206\u8868\uff1a\u5982\u524d\u6240\u8ff0\uff0c\u89e3\u51b3\u5355\u8868\u6570\u636e\u91cf\u8fc7\u5927\u5bfc\u81f4\u626b\u63cf\u6162\u3001\u7d22\u5f15\u6548\u7387\u4f4e\u7684\u95ee\u9898\uff0c\u5c06\u6570\u636e\u5206\u6563\u5b58\u50a8\u4ee5\u63d0\u5347\u67e5\u8be2\u6027\u80fd\u3002</li> <li>\u52a0\u7f13\u5b58\uff1a\u5bf9\u4e8e\u8bfb\u591a\u5199\u5c11\u7684\u70ed\u70b9\u6570\u636e\uff0c\u5229\u7528\u7f13\u5b58\u5c42\u6765\u63d0\u9ad8\u67e5\u8be2\u901f\u5ea6\uff0c\u51cf\u5c11\u6570\u636e\u5e93\u538b\u529b\u3002</li> <li>\u6162\u67e5\u8be2\u65e5\u5fd7\u5206\u6790\uff1a\u5b9a\u671f\u5f00\u542f\u5e76\u5206\u6790\u6570\u636e\u5e93\u7684\u6162\u67e5\u8be2\u65e5\u5fd7\uff0c\u627e\u51fa\u6267\u884c\u6548\u7387\u4f4e\u7684 SQL \u8bed\u53e5\uff0c\u7ed3\u5408 <code>EXPLAIN</code> \u547d\u4ee4\u5206\u6790\u5176\u6267\u884c\u8ba1\u5212\uff0c\u7136\u540e\u9488\u5bf9\u6027\u5730\u8fdb\u884c\u7d22\u5f15\u4f18\u5316\u3001SQL\u91cd\u5199\u6216\u7ed3\u6784\u8c03\u6574\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E5%9C%BA%E6%99%AF%E9%A2%98%E6%80%9D%E8%B7%AF/#32","title":"3.2 \u8c03\u7528\u4e0b\u6e38\u63a5\u53e3\u8017\u65f6","text":"<ul> <li>\u5916\u90e8\u670d\u52a1\u5ef6\u8fdf\uff1a\u5982\u679c\u4f60\u7684\u670d\u52a1\u9700\u8981\u8c03\u7528\u4e00\u4e2a\u8017\u65f6\u7684\u7b2c\u4e09\u65b9\u6216\u5185\u90e8\u4e0b\u6e38\u670d\u52a1\uff0c\u8be5\u8c03\u7528\u65f6\u95f4\u4f1a\u76f4\u63a5\u53e0\u52a0\u5230\u4f60\u7684\u63a5\u53e3\u54cd\u5e94\u901f\u5ea6\u4e0a\u3002<ul> <li>\u4f18\u5316\u8c03\u7528\u65b9\u5f0f\uff1a<ul> <li>\u5f02\u6b65\u8c03\u7528\uff1a\u5bf9\u4e8e\u975e\u5b9e\u65f6\u6027\u7684\u4e0b\u6e38\u670d\u52a1\u8c03\u7528\uff0c\u53ef\u4ee5\u4f7f\u7528\u6d88\u606f\u961f\u5217\uff08\u5982Kafka\u3001RabbitMQ\uff09\u8fdb\u884c\u5f02\u6b65\u5904\u7406\uff0c\u907f\u514d\u963b\u585e\u4e3b\u6d41\u7a0b\u3002</li> <li>\u6279\u91cf\u8c03\u7528\uff1a\u5c06\u591a\u6b21\u5355\u4e2a\u8c03\u7528\u5408\u5e76\u4e3a\u4e00\u6b21\u6279\u91cf\u8c03\u7528\uff0c\u51cf\u5c11\u7f51\u7edcI/O\u548c\u4e0b\u6e38\u670d\u52a1\u5904\u7406\u7684\u5f00\u9500\u3002</li> <li>\u5f15\u5165\u7f13\u5b58\uff1a\u5bf9\u4e0b\u6e38\u670d\u52a1\u7684\u8fd4\u56de\u7ed3\u679c\u8fdb\u884c\u7f13\u5b58\u3002</li> <li>\u670d\u52a1\u964d\u7ea7\u4e0e\u7194\u65ad\uff1a\u5f53\u4e0b\u6e38\u670d\u52a1\u54cd\u5e94\u6162\u6216\u4e0d\u53ef\u7528\u65f6\uff0c\u542f\u7528\u964d\u7ea7\u7b56\u7565\uff08\u5982\u8fd4\u56de\u9ed8\u8ba4\u503c\u3001\u4f7f\u7528\u5907\u7528\u6570\u636e\uff09\uff0c\u6216\u901a\u8fc7\u7194\u65ad\u673a\u5236\u5feb\u901f\u5931\u8d25\uff0c\u907f\u514d\u957f\u65f6\u95f4\u7b49\u5f85\u3002</li> </ul> </li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E5%9C%BA%E6%99%AF%E9%A2%98%E6%80%9D%E8%B7%AF/#33-vs","title":"3.3 \u540c\u6b65\u5904\u7406 vs. \u5f02\u6b65\u5904\u7406","text":"<ul> <li>\u80fd\u7528\u5f02\u6b65\u5904\u7406\u7684\u5730\u65b9\u7528\u4e86\u540c\u6b65\u5904\u7406\uff1a\u8bb8\u591a\u975e\u6838\u5fc3\u4e1a\u52a1\u903b\u8f91\u53ef\u4ee5\u5f02\u6b65\u5316\uff0c\u907f\u514d\u963b\u585e\u4e3b\u6d41\u7a0b\uff0c\u4ece\u800c\u663e\u8457\u63d0\u5347\u7528\u6237\u63a5\u53e3\u7684\u54cd\u5e94\u901f\u5ea6\u3002<ul> <li>\u793a\u4f8b\uff1a\u7528\u6237\u4e0b\u5355\u540e\uff0c\u53d1\u9001\u77ed\u4fe1/\u90ae\u4ef6\u901a\u77e5\u3001\u66f4\u65b0\u7528\u6237\u79ef\u5206\u3001\u751f\u6210\u8ba2\u5355\u62a5\u8868\u3001\u8bb0\u5f55\u64cd\u4f5c\u65e5\u5fd7\u7b49\u64cd\u4f5c\uff0c\u8fd9\u4e9b\u90fd\u4e0d\u662f\u7528\u6237\u5b9e\u65f6\u611f\u77e5\u5f3a\u70c8\u7684\u6838\u5fc3\u6d41\u7a0b\u3002\u5b83\u4eec\u90fd\u53ef\u4ee5\u901a\u8fc7\u6d88\u606f\u961f\u5217\uff08\u5982Kafka, RabbitMQ\uff09\u5c06\u4efb\u52a1\u6295\u9012\u7ed9\u72ec\u7acb\u7684\u6d88\u8d39\u8005\u8fdb\u884c\u5f02\u6b65\u5904\u7406\uff0c\u4e3b\u63a5\u53e3\u53ef\u4ee5\u7acb\u5373\u8fd4\u56de\u8ba2\u5355\u6210\u529f\u4fe1\u606f\u7ed9\u7528\u6237\uff0c\u63d0\u4f9b\u66f4\u597d\u7684\u7528\u6237\u4f53\u9a8c\u3002</li> </ul> </li> <li>\u7f51\u7edc\u95ee\u9898\uff1a\u7f51\u7edc\u5ef6\u8fdf\u3001\u5e26\u5bbd\u9650\u5236\u3001\u4e22\u5305\u3001DNS\u89e3\u6790\u6162\u7b49\u90fd\u53ef\u80fd\u5bfc\u81f4\u63a5\u53e3\u54cd\u5e94\u6162\u3002\u8fd9\u9700\u8981\u4ece\u7f51\u7edc\u5c42\u9762\u8fdb\u884c\u6392\u67e5\u548c\u4f18\u5316\uff0c\u4f8b\u5982\u4f18\u5316\u7f51\u7edc\u62d3\u6251\u3001\u4f7f\u7528CDN\u52a0\u901f\u3001\u9009\u62e9\u66f4\u53ef\u9760\u7684\u7f51\u7edc\u670d\u52a1\u5546\u3001\u4f18\u5316DNS\u89e3\u6790\u914d\u7f6e\u7b49\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E5%9C%BA%E6%99%AF%E9%A2%98%E6%80%9D%E8%B7%AF/#34-jvm","title":"3.4 JVM \u76f8\u5173\u95ee\u9898","text":"<ul> <li>\u9891\u7e41 GC (\u5783\u573e\u56de\u6536) \u5bfc\u81f4 STW (Stop-The-World)\uff1aJava \u5e94\u7528\u7a0b\u5e8f\u5982\u679c\u9891\u7e41\u521b\u5efa\u5927\u91cf\u4e34\u65f6\u5bf9\u8c61\uff0c\u4f1a\u5bfc\u81f4\u5783\u573e\u56de\u6536\u5668\u9891\u7e41\u5de5\u4f5c\u3002\u5728\u67d0\u4e9b GC \u9636\u6bb5\uff0c\u7279\u522b\u662f Full GC\uff0c\u4f1a\u6682\u505c\u6240\u6709\u5e94\u7528\u7ebf\u7a0b\uff08Stop-The-World\uff09\uff0c\u9020\u6210\u660e\u663e\u7684\u5361\u987f\uff0c\u4e25\u91cd\u5f71\u54cd\u63a5\u53e3\u54cd\u5e94\u548c\u7cfb\u7edf\u541e\u5410\u91cf\u3002<ul> <li>\u4f18\u5316\u65b9\u6cd5\uff1a<ul> <li>\u51cf\u5c11\u4e0d\u5fc5\u8981\u7684\u5bf9\u8c61\u521b\u5efa\uff1a\u4f8b\u5982\uff0c\u4f7f\u7528\u5bf9\u8c61\u6c60\u3001\u5b57\u7b26\u4e32\u5e38\u91cf\u6c60\u3001\u907f\u514d\u5728\u5faa\u73af\u4e2d\u521b\u5efa\u5927\u5bf9\u8c61\u3002</li> <li>\u4f18\u5316\u5185\u5b58\u4f7f\u7528\u6a21\u5f0f\uff1a\u51cf\u5c11\u5927\u5bf9\u8c61\u7684\u5206\u914d\u3001\u907f\u514d\u5185\u5b58\u6cc4\u6f0f\u3002</li> <li>\u9009\u62e9\u5408\u9002\u7684 JVM \u5783\u573e\u56de\u6536\u5668\u53ca\u5176\u53c2\u6570\uff1a\u5982G1 GC\u3001CMS GC\u3001Parallel GC\uff0c\u5e76\u6839\u636e\u5e94\u7528\u7279\u70b9\u8c03\u6574\u5806\u5927\u5c0f\u3001\u65b0\u751f\u4ee3\u8001\u5e74\u4ee3\u6bd4\u4f8b\u3001GC\u7ebf\u7a0b\u6570\u7b49\u53c2\u6570\u3002\u73b0\u4ee3JVM\u7684\u5e76\u53d1GC\uff08\u5982G1\uff09\u76ee\u6807\u5c31\u662f\u5c3d\u53ef\u80fd\u51cf\u5c11STW\u65f6\u95f4\u3002</li> </ul> </li> </ul> </li> <li>\u7ebf\u7a0b\u6682\u505c\uff1a\u9664\u4e86 GC \u5bfc\u81f4\u7684 STW\uff0c\u7ebf\u7a0b\u5728\u7b49\u5f85\u9501\u3001\u7b49\u5f85 I/O\uff08\u5982\u6570\u636e\u5e93\u67e5\u8be2\u3001\u6587\u4ef6\u8bfb\u5199\u3001\u7f51\u7edc\u8bf7\u6c42\uff09\u6216\u56e0 <code>Thread.sleep()</code> \u7b49\u539f\u56e0\u4e5f\u53ef\u80fd\u6682\u505c\uff0c\u5f71\u54cd\u5e76\u53d1\u6027\u80fd\u548c\u63a5\u53e3\u54cd\u5e94\u3002<ul> <li>\u4f18\u5316\u65b9\u6cd5\uff1a\u51cf\u5c11\u9501\u7ade\u4e89\u3001\u4f18\u5316I/O\u64cd\u4f5c\uff08\u5982\u4f7f\u7528NIO\u3001\u5f02\u6b65I/O\uff09\u3001\u907f\u514d\u4e0d\u5fc5\u8981\u7684 <code>sleep</code>\uff0c\u4ee5\u53ca\u5408\u7406\u4f7f\u7528\u7ebf\u7a0b\u6c60\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E5%9C%BA%E6%99%AF%E9%A2%98%E6%80%9D%E8%B7%AF/#35","title":"3.5 \u672a\u5145\u5206\u5229\u7528\u591a\u7ebf\u7a0b","text":"<ul> <li>\u6ca1\u6709\u8003\u8651\u4f7f\u7528\u591a\u7ebf\u7a0b\u53ef\u4ee5\u5e76\u53d1\u5904\u7406\u7684\u4efb\u52a1\uff1a\u67d0\u4e9b\u4e1a\u52a1\u573a\u666f\u4e0b\uff0c\u591a\u4e2a\u72ec\u7acb\u7684\u5b50\u4efb\u52a1\u4e4b\u95f4\u6ca1\u6709\u4f9d\u8d56\u5173\u7cfb\uff0c\u53ef\u4ee5\u5e76\u884c\u6267\u884c\u3002\u4f46\u5982\u679c\u91c7\u7528\u5355\u7ebf\u7a0b\u987a\u5e8f\u6267\u884c\uff0c\u5c31\u4f1a\u5bfc\u81f4\u6574\u4f53\u54cd\u5e94\u65f6\u95f4\u8fc7\u957f\u3002<ul> <li>\u793a\u4f8b\uff1a\u8d2d\u7968\u7cfb\u7edf\u5904\u7406\u4e0d\u540c\u7c7b\u578b\u7684\u7968\uff08\u5982\u6210\u4eba\u7968\u3001\u513f\u7ae5\u7968\u3001\u5b66\u751f\u7968\uff09\u7684\u6821\u9a8c\u548c\u6263\u8d39\u903b\u8f91\uff0c\u5982\u679c\u8fd9\u4e9b\u5904\u7406\u903b\u8f91\u76f8\u4e92\u72ec\u7acb\uff0c\u4e14\u4e0d\u6d89\u53ca\u5171\u4eab\u8d44\u6e90\u7684\u5f3a\u4e00\u81f4\u6027\u8981\u6c42\uff0c\u5b8c\u5168\u53ef\u4ee5\u5229\u7528\u591a\u7ebf\u7a0b\u5e76\u53d1\u5904\u7406\uff0c\u7f29\u77ed\u603b\u54cd\u5e94\u65f6\u95f4\u3002</li> <li>\u4f18\u5316\u65b9\u6cd5\uff1a\u8bc6\u522b\u51fa\u53ef\u5e76\u884c\u5316\u7684\u4efb\u52a1\uff0c\u4f7f\u7528\u7ebf\u7a0b\u6c60\uff08\u5982 <code>ExecutorService</code>\uff09\u7ba1\u7406\u548c\u6267\u884c\u8fd9\u4e9b\u4efb\u52a1\uff0c\u5145\u5206\u5229\u7528\u591a\u6838CPU\u8d44\u6e90\uff0c\u7f29\u77ed\u6574\u4f53\u5904\u7406\u65f6\u95f4\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E5%9C%BA%E6%99%AF%E9%A2%98%E6%80%9D%E8%B7%AF/#_4","title":"\u573a\u666f\u56db: \u9ad8\u53ef\u7528","text":"<p>\u9ad8\u53ef\u7528\u6027\u662f\u7cfb\u7edf\u7a33\u5b9a\u8fd0\u884c\u7684\u57fa\u77f3\uff0c\u610f\u5473\u7740\u7cfb\u7edf\u5728\u9762\u5bf9\u6545\u969c\u65f6\u80fd\u591f\u6301\u7eed\u63d0\u4f9b\u670d\u52a1\uff0c\u5c06\u505c\u673a\u65f6\u95f4\u964d\u81f3\u6700\u4f4e\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E5%9C%BA%E6%99%AF%E9%A2%98%E6%80%9D%E8%B7%AF/#41","title":"4.1 \u5197\u4f59\u4e0e\u5907\u4efd","text":"<ul> <li>\u6570\u636e\u5907\u4efd\uff1a\u5b9a\u671f\u5bf9\u5173\u952e\u6570\u636e\u8fdb\u884c\u5907\u4efd\uff0c\u5e76\u786e\u4fdd\u5907\u4efd\u6570\u636e\u53ef\u6062\u590d\u3002\u5907\u4efd\u7b56\u7565\u5e94\u5305\u62ec\uff1a<ul> <li>\u5168\u91cf\u5907\u4efd\uff08Full Backup\uff09\uff1a\u5907\u4efd\u6240\u6709\u6570\u636e\u3002</li> <li>\u589e\u91cf\u5907\u4efd\uff08Incremental Backup\uff09\uff1a\u53ea\u5907\u4efd\u81ea\u4e0a\u6b21\u4efb\u4f55\u7c7b\u578b\u5907\u4efd\u4ee5\u6765\u53d1\u751f\u53d8\u5316\u7684\u6570\u636e\u3002</li> <li>\u5dee\u5f02\u5907\u4efd\uff08Differential Backup\uff09\uff1a\u5907\u4efd\u81ea\u4e0a\u6b21\u5168\u91cf\u5907\u4efd\u4ee5\u6765\u53d1\u751f\u53d8\u5316\u7684\u6570\u636e\u3002</li> <li>\u65e5\u5fd7\u5907\u4efd\uff08Log Backup\uff09\uff1a\u7528\u4e8e\u5b9e\u73b0\u65f6\u95f4\u70b9\u6062\u590d\uff08Point-in-Time Recovery\uff09\u3002 \u540c\u65f6\uff0c\u5907\u4efd\u6570\u636e\u5e94\u5f02\u5730\u5b58\u50a8\uff0c\u5e76\u5b9a\u671f\u8fdb\u884c\u6062\u590d\u6f14\u7ec3\uff0c\u4ee5\u9a8c\u8bc1\u5907\u4efd\u7684\u6709\u6548\u6027\u3002</li> </ul> </li> <li>\u670d\u52a1\u5197\u4f59\uff1a\u90e8\u7f72\u591a\u4e2a\u670d\u52a1\u5b9e\u4f8b\uff0c\u5f53\u67d0\u4e2a\u5b9e\u4f8b\u6545\u969c\u65f6\uff0c\u8d1f\u8f7d\u5747\u8861\u5668\u53ef\u4ee5\u5c06\u6d41\u91cf\u81ea\u52a8\u5207\u6362\u5230\u5176\u4ed6\u5065\u5eb7\u5b9e\u4f8b\uff0c\u4ece\u800c\u907f\u514d\u5355\u70b9\u6545\u969c\u3002\u8fd9\u901a\u5e38\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u5b9e\u73b0\uff1a<ul> <li>\u4e3b\u5907\uff08Active-Passive\uff09\uff1a\u4e00\u4e2a\u4e3b\u5b9e\u4f8b\u63d0\u4f9b\u670d\u52a1\uff0c\u4e00\u4e2a\u6216\u591a\u4e2a\u5907\u7528\u5b9e\u4f8b\u5904\u4e8e\u5f85\u547d\u72b6\u6001\uff0c\u4e3b\u5b9e\u4f8b\u6545\u969c\u65f6\u5907\u7528\u5b9e\u4f8b\u63a5\u7ba1\u3002</li> <li>\u4e3b\u4ece\uff08Master-Slave\uff09/\u4e3b\u4ece\u590d\u5236\uff1a\u4e3b\u8282\u70b9\u8d1f\u8d23\u5199\u5165\uff0c\u4ece\u8282\u70b9\u8d1f\u8d23\u8bfb\u53d6\u5e76\u540c\u6b65\u4e3b\u8282\u70b9\u6570\u636e\uff0c\u4e3b\u8282\u70b9\u6545\u969c\u65f6\u4ece\u8282\u70b9\u53ef\u4ee5\u63d0\u5347\u4e3a\u4e3b\u8282\u70b9\u3002</li> <li>\u591a\u6d3b\uff08Active-Active\uff09\uff1a\u6240\u6709\u5b9e\u4f8b\u90fd\u540c\u65f6\u63d0\u4f9b\u670d\u52a1\uff0c\u6d41\u91cf\u5206\u6563\u5230\u6240\u6709\u5065\u5eb7\u5b9e\u4f8b\uff0c\u5177\u6709\u66f4\u597d\u7684\u8d44\u6e90\u5229\u7528\u7387\u548c\u6545\u969c\u5bb9\u5fcd\u80fd\u529b\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E5%9C%BA%E6%99%AF%E9%A2%98%E6%80%9D%E8%B7%AF/#42","title":"4.2 \u76d1\u63a7\u4e0e\u9884\u8b66","text":"<ul> <li>\u76d1\u63a7\uff1a\u5efa\u7acb\u5b8c\u5584\u7684\u7cfb\u7edf\u76d1\u63a7\u4f53\u7cfb\uff0c\u5b9e\u65f6\u6536\u96c6\u548c\u5206\u6790\u7cfb\u7edf\u5404\u9879\u6307\u6807\uff0c\u4ee5\u4fbf\u53ca\u65f6\u53d1\u73b0\u6f5c\u5728\u95ee\u9898\u3002\u76d1\u63a7\u5185\u5bb9\u5e94\u6db5\u76d6\uff1a<ul> <li>\u57fa\u7840\u8bbe\u65bd\u76d1\u63a7\uff1a\u670d\u52a1\u5668CPU\u3001\u5185\u5b58\u3001\u78c1\u76d8I/O\u3001\u7f51\u7edc\u5e26\u5bbd\u7b49\u8d44\u6e90\u5229\u7528\u7387\u3002</li> <li>\u5e94\u7528\u7a0b\u5e8f\u6027\u80fd\u76d1\u63a7\uff08APM\uff09\uff1a\u8bf7\u6c42\u54cd\u5e94\u65f6\u95f4\u3001\u541e\u5410\u91cf\u3001\u9519\u8bef\u7387\u3001GC\u6d3b\u52a8\u3001\u7ebf\u7a0b\u6c60\u72b6\u6001\u7b49\u3002</li> <li>\u670d\u52a1\u8c03\u7528\u94fe\u8ffd\u8e2a\uff1a\u8bb0\u5f55\u8bf7\u6c42\u5728\u4e0d\u540c\u670d\u52a1\u95f4\u7684\u8c03\u7528\u8def\u5f84\u548c\u8017\u65f6\uff0c\u7528\u4e8e\u6027\u80fd\u74f6\u9888\u5b9a\u4f4d\u3002</li> <li>\u4e1a\u52a1\u6307\u6807\u76d1\u63a7\uff1a\u7528\u6237\u6ce8\u518c\u6570\u3001\u8ba2\u5355\u91cf\u3001\u652f\u4ed8\u6210\u529f\u7387\u7b49\uff0c\u53cd\u6620\u4e1a\u52a1\u5065\u5eb7\u72b6\u51b5\u3002</li> <li>\u65e5\u5fd7\u6536\u96c6\u4e0e\u5206\u6790\uff1a\u96c6\u4e2d\u5316\u6536\u96c6\u548c\u5206\u6790\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\uff0c\u7528\u4e8e\u6545\u969c\u6392\u67e5\u548c\u5b89\u5168\u5ba1\u8ba1\u3002</li> </ul> </li> <li>\u544a\u8b66\uff1a\u8bbe\u5b9a\u5408\u7406\u7684\u544a\u8b66\u9608\u503c\uff0c\u5f53\u7cfb\u7edf\u51fa\u73b0\u5f02\u5e38\uff08\u5982\u9519\u8bef\u7387\u8d85\u8fc7\u9608\u503c\u3001\u54cd\u5e94\u65f6\u95f4\u8fc7\u957f\u3001\u8d44\u6e90\u5229\u7528\u7387\u8fc7\u9ad8\uff09\u6216\u6027\u80fd\u4e0b\u964d\u65f6\uff0c\u80fd\u591f\u53ca\u65f6\u901a\u8fc7\u77ed\u4fe1\u3001\u90ae\u4ef6\u3001\u7535\u8bdd\u3001IM\uff08\u5373\u65f6\u901a\u8baf\uff09\u7b49\u591a\u79cd\u65b9\u5f0f\u901a\u77e5\u76f8\u5173\u4eba\u5458\uff0c\u4fdd\u8bc1\u95ee\u9898\u5c3d\u5feb\u88ab\u611f\u77e5\u548c\u5904\u7406\u3002\u544a\u8b66\u7684\u51c6\u786e\u6027\u548c\u53ca\u65f6\u6027\u662f\u9ad8\u53ef\u7528\u7684\u91cd\u8981\u4fdd\u969c\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E5%9C%BA%E6%99%AF%E9%A2%98%E6%80%9D%E8%B7%AF/#43","title":"4.3 \u5bb9\u707e\u4e0e\u5f02\u5730\u591a\u6d3b","text":"<ul> <li>\u5bb9\u707e\uff08Disaster Recovery\uff09\uff1a\u8bbe\u8ba1\u7cfb\u7edf\u5728\u53d1\u751f\u91cd\u5927\u707e\u96be\uff08\u5982\u673a\u623f\u65ad\u7535\u3001\u706b\u707e\u3001\u5730\u9707\u3001\u533a\u57df\u7f51\u7edc\u4e2d\u65ad\uff09\u65f6\uff0c\u80fd\u591f\u5feb\u901f\u6062\u590d\u670d\u52a1\u7684\u80fd\u529b\u3002\u5bb9\u707e\u7684\u6838\u5fc3\u6307\u6807\u662f\uff1a<ul> <li>\u6062\u590d\u70b9\u76ee\u6807\uff08RPO - Recovery Point Objective\uff09\uff1a\u53ef\u63a5\u53d7\u7684\u6570\u636e\u4e22\u5931\u91cf\uff0c\u5373\u7cfb\u7edf\u6062\u590d\u540e\uff0c\u6570\u636e\u53ef\u80fd\u56de\u6eaf\u5230\u7684\u65f6\u95f4\u70b9\u3002</li> <li>\u6062\u590d\u65f6\u95f4\u76ee\u6807\uff08RTO - Recovery Time Objective\uff09\uff1a \u670d\u52a1\u4ece\u4e2d\u65ad\u5230\u6062\u590d\u6b63\u5e38\u8fd0\u884c\u6240\u9700\u7684\u6700\u5927\u65f6\u95f4\u3002 \u5bb9\u707e\u65b9\u6848\u901a\u5e38\u5305\u62ec\uff1a\u6570\u636e\u5907\u4efd\u4e0e\u6062\u590d\u3001\u591a\u6570\u636e\u4e2d\u5fc3\u90e8\u7f72\uff08\u540c\u57ce\u53cc\u6d3b\u3001\u4e24\u5730\u4e09\u4e2d\u5fc3\uff09\u3001\u707e\u5907\u6f14\u7ec3\u7b49\u3002</li> </ul> </li> <li>\u5f02\u5730\u591a\u6d3b\uff1a\u5728\u4e0d\u540c\u5730\u7406\u4f4d\u7f6e\u7684\u6570\u636e\u4e2d\u5fc3\u90e8\u7f72\u76f8\u540c\u670d\u52a1\uff0c\u6240\u6709\u6570\u636e\u4e2d\u5fc3\u90fd\u5bf9\u5916\u63d0\u4f9b\u670d\u52a1\uff0c\u5904\u7406\u5404\u81ea\u533a\u57df\u7684\u6d41\u91cf\u3002\u5f53\u4e00\u4e2a\u533a\u57df\u53d1\u751f\u6545\u969c\u65f6\uff0c\u6d41\u91cf\u53ef\u4ee5\u65e0\u7f1d\u6216\u5feb\u901f\u5207\u6362\u5230\u5176\u4ed6\u5065\u5eb7\u7684\u533a\u57df\uff0c\u5b9e\u73b0\u6700\u9ad8\u7ea7\u522b\u7684\u53ef\u7528\u6027\u3002\u5f02\u5730\u591a\u6d3b\u7684\u6311\u6218\u5728\u4e8e\u6570\u636e\u5728\u4e0d\u540c\u6570\u636e\u4e2d\u5fc3\u4e4b\u95f4\u7684\u4e00\u81f4\u6027\u7ef4\u62a4\uff08\u5982\u6700\u7ec8\u4e00\u81f4\u6027\u3001\u5f3a\u4e00\u81f4\u6027\u9009\u62e9\uff09\u548c\u6d41\u91cf\u7684\u667a\u80fd\u8def\u7531\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E5%9C%BA%E6%99%AF%E9%A2%98%E6%80%9D%E8%B7%AF/#44-redis","title":"4.4 Redis \u96c6\u7fa4\u9ad8\u53ef\u7528","text":"<p>Redis \u4f5c\u4e3a\u5173\u952e\u7684\u7f13\u5b58\u548c\u6570\u636e\u5b58\u50a8\u670d\u52a1\uff0c\u5176\u9ad8\u53ef\u7528\u6027\u65b9\u6848\u975e\u5e38\u91cd\u8981\u3002</p> <ul> <li>\u4e3b\u4ece\u590d\u5236\uff08Master-Slave Replication\uff09\uff1a\u4e00\u4e2a\u4e3b\u8282\u70b9\u8d1f\u8d23\u5199\u5165\u548c\u8bfb\u53d6\uff0c\u591a\u4e2a\u4ece\u8282\u70b9\u8d1f\u8d23\u8bfb\u53d6\uff0c\u4ece\u8282\u70b9\u5f02\u6b65\u590d\u5236\u4e3b\u8282\u70b9\u7684\u6570\u636e\u3002<ul> <li>\u4f18\u70b9\uff1a\u8bfb\u5199\u5206\u79bb\u53ef\u4ee5\u63d0\u5347\u8bfb\u6027\u80fd\u548c\u541e\u5410\u91cf\uff1b\u5f53\u4e3b\u8282\u70b9\u6545\u969c\u65f6\uff0c\u53ef\u4ee5\u624b\u52a8\u6216\u81ea\u52a8\u5c06\u4e00\u4e2a\u4ece\u8282\u70b9\u63d0\u5347\u4e3a\u65b0\u4e3b\u8282\u70b9\uff0c\u5b9e\u73b0\u6570\u636e\u5907\u4efd\u548c\u90e8\u5206\u9ad8\u53ef\u7528\u3002</li> <li>\u7f3a\u70b9\uff1a\u4e3b\u8282\u70b9\u6545\u969c\u65f6\u9700\u8981\u4eba\u5de5\u5e72\u9884\u6216\u501f\u52a9\u5916\u90e8\u5de5\u5177\uff08\u5982Sentinel\uff09\u8fdb\u884c\u6545\u969c\u8f6c\u79fb\uff1b\u4ece\u8282\u70b9\u590d\u5236\u662f\u5f02\u6b65\u7684\uff0c\u53ef\u80fd\u5b58\u5728\u5c11\u91cf\u6570\u636e\u4e22\u5931\u98ce\u9669\u3002</li> </ul> </li> <li>\u54e8\u5175\u6a21\u5f0f\uff08Redis Sentinel\uff09\uff1a\u4e00\u4e2a\u6216\u591a\u4e2a Sentinel \u8fdb\u7a0b\u7ec4\u6210\u7684\u96c6\u7fa4\uff0c\u7528\u4e8e\u76d1\u63a7 Redis \u4e3b\u4ece\u8282\u70b9\u3002<ul> <li>\u76d1\u63a7\u670d\u52a1\uff1aSentinel \u4f1a\u6301\u7eed\u68c0\u67e5\u4e3b\u8282\u70b9\u548c\u4ece\u8282\u70b9\u662f\u5426\u6b63\u5e38\u8fd0\u884c\u3002</li> <li>\u81ea\u52a8\u6545\u969c\u8f6c\u79fb\uff1a\u5f53\u4e3b\u8282\u70b9\u53d1\u751f\u6545\u969c\u65f6\uff0cSentinel \u4e4b\u95f4\u4f1a\u8fdb\u884c\u534f\u5546\uff0c\u6295\u7968\u9009\u4e3e\u4e00\u4e2a\u65b0\u7684\u4ece\u8282\u70b9\u4f5c\u4e3a\u4e3b\u8282\u70b9\uff0c\u5e76\u901a\u77e5\u6240\u6709\u5ba2\u6237\u7aef\u8fdb\u884c\u8fde\u63a5\u5207\u6362\uff0c\u4ece\u800c\u5b9e\u73b0 Redis \u7684\u81ea\u52a8\u9ad8\u53ef\u7528\u3002\u5b83\u89e3\u51b3\u4e86\u4e3b\u4ece\u590d\u5236\u6a21\u5f0f\u4e0b\u4e3b\u8282\u70b9\u6545\u969c\u9700\u8981\u4eba\u5de5\u5e72\u9884\u7684\u95ee\u9898\u3002</li> </ul> </li> <li>Redis Cluster\uff1aRedis \u5b98\u65b9\u63d0\u4f9b\u7684\u5206\u5e03\u5f0f\u89e3\u51b3\u65b9\u6848\uff0c\u5b83\u901a\u8fc7\u5206\u7247\uff08Sharding\uff09\u548c\u4e3b\u4ece\u590d\u5236\u7ed3\u5408\u7684\u65b9\u5f0f\uff0c\u63d0\u4f9b\u6570\u636e\u7684\u81ea\u52a8\u5206\u7247\u3001\u9ad8\u53ef\u7528\u548c\u53ef\u6269\u5c55\u6027\u3002<ul> <li>\u6570\u636e\u5206\u7247\uff1aRedis Cluster \u5c06\u6240\u6709\u6570\u636e\u5212\u5206\u4e3a16384\u4e2a\u54c8\u5e0c\u69fd\uff08hash slot\uff09\uff0c\u6bcf\u4e2a\u8282\u70b9\u8d1f\u8d23\u5176\u4e2d\u4e00\u90e8\u5206\u69fd\u3002\u6570\u636e\u6839\u636e\u952e\u7684\u54c8\u5e0c\u503c\u6620\u5c04\u5230\u5bf9\u5e94\u7684\u69fd\uff0c\u4ece\u800c\u5206\u5e03\u5230\u4e0d\u540c\u7684\u8282\u70b9\u3002</li> <li>\u9ad8\u53ef\u7528\uff1a\u6bcf\u4e2a\u4e3b\u8282\u70b9\u53ef\u4ee5\u6709\u591a\u4e2a\u4ece\u8282\u70b9\u3002\u5f53\u4e3b\u8282\u70b9\u53d1\u751f\u6545\u969c\u65f6\uff0c\u96c6\u7fa4\u4e2d\u7684\u5176\u4ed6\u8282\u70b9\u4f1a\u6295\u7968\u9009\u4e3e\u4e00\u4e2a\u5065\u5eb7\u7684\u4ece\u8282\u70b9\u63a5\u66ff\u6210\u4e3a\u65b0\u7684\u4e3b\u8282\u70b9\u3002</li> <li>\u53ef\u6269\u5c55\u6027\uff1a\u53ef\u4ee5\u65b9\u4fbf\u5730\u6dfb\u52a0\u6216\u79fb\u9664\u8282\u70b9\uff0c\u5b9e\u73b0\u6570\u636e\u7684\u81ea\u52a8\u8fc1\u79fb\u548c\u8d1f\u8f7d\u5747\u8861\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E5%A6%82%E4%BD%95%E5%AD%98%E5%82%A8%E5%A4%A7%E9%87%8F%E7%9A%84ip%E5%9C%B0%E5%9D%80/","title":"\u5982\u4f55\u5b58\u50a8\u5927\u91cf\u7684ip\u5730\u5740","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E5%A6%82%E4%BD%95%E5%AD%98%E5%82%A8%E5%A4%A7%E9%87%8F%E7%9A%84ip%E5%9C%B0%E5%9D%80/#redis-ip","title":"\u4f7f\u7528 Redis \u4f4d\u56fe\u5b58\u50a8\u5927\u91cf IP \u5730\u5740","text":"<p>\u4f7f\u7528\u4f4d\u56fe\u5b58\u50a8 IP \u5730\u5740\u7684\u6838\u5fc3\u601d\u60f3\u662f\uff1a\u5c06\u6bcf\u4e2a IP \u5730\u5740\u8f6c\u6362\u6210\u4e00\u4e2a\u6574\u6570\uff0c\u7136\u540e\u5c06\u8fd9\u4e2a\u6574\u6570\u4f5c\u4e3a\u4f4d\u56fe\u4e2d\u7684\u504f\u79fb\u91cf\uff08offset\uff09\uff0c\u901a\u8fc7\u5c06\u8be5\u504f\u79fb\u91cf\u4f4d\u7f6e\u7684\u4e8c\u8fdb\u5236\u4f4d\u8bbe\u7f6e\u4e3a <code>1</code> \u6765\u8868\u793a\u8be5 IP \u5730\u5740\u5b58\u5728\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E5%A6%82%E4%BD%95%E5%AD%98%E5%82%A8%E5%A4%A7%E9%87%8F%E7%9A%84ip%E5%9C%B0%E5%9D%80/#_1","title":"\u65b9\u6848\u6b65\u9aa4","text":"<p>\u7b2c 1 \u6b65\uff1a\u5c06 IP \u5730\u5740\u8f6c\u6362\u4e3a\u6574\u6570</p> <p>IPv4 \u5730\u5740\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a 32 \u4f4d\u7684\u65e0\u7b26\u53f7\u6574\u6570\u3002\u6807\u51c6\u70b9\u5206\u5341\u8fdb\u5236\u8868\u793a\u6cd5\uff08\u5982 <code>192.168.1.10</code>\uff09\u662f\u4e3a\u4e86\u65b9\u4fbf\u4eba\u7c7b\u9605\u8bfb\u3002\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u51fd\u6570\u5c06\u5176\u8f6c\u6362\u4e3a\u6574\u6570\u3002</p> <p>\u8f6c\u6362\u516c\u5f0f\u4e3a\uff1a <code>\u6574\u6570 = a*256\u00b3 + b*256\u00b2 + c*256\u00b9 + d*256\u2070</code></p> <p>\u4f8b\u5982\uff0cIP \u5730\u5740 <code>192.168.1.10</code> \u5bf9\u5e94\u7684\u6574\u6570\u662f\uff1a <code>192 * (2^24) + 168 * (2^16) + 1 * (2^8) + 10 = 3232235786</code></p> <p>\u8fd9\u4e2a\u6574\u6570 <code>3232235786</code> \u5c06\u4f5c\u4e3a\u6211\u4eec\u5728\u4f4d\u56fe\u4e2d\u7684\u552f\u4e00\u504f\u79fb\u91cf\u3002</p> <p>\u7b2c 2 \u6b65\uff1a\u5c06 IP \u5730\u5740\u5b58\u5165\u4f4d\u56fe</p> <p>\u4f7f\u7528 <code>SETBIT</code> \u547d\u4ee4\u6765\u8bb0\u5f55\u4e00\u4e2a IP \u5730\u5740\u7684\u8bbf\u95ee\u3002\u8be5\u547d\u4ee4\u4f1a\u5c06\u6307\u5b9a key \u7684\u4f4d\u56fe\u4e2d\uff0c\u5728\u7279\u5b9a\u504f\u79fb\u91cf\uff08offset\uff09\u4e0a\u7684\u4e8c\u8fdb\u5236\u4f4d\u8bbe\u7f6e\u4e3a\u6307\u5b9a\u503c\uff080 \u6216 1\uff09\u3002</p> <ul> <li>\u547d\u4ee4\u683c\u5f0f: <code>SETBIT key offset value</code></li> <li>\u65f6\u95f4\u590d\u6742\u5ea6: O(1)</li> </ul> <p>\u573a\u666f\u793a\u4f8b\uff1a\u8bb0\u5f55 2025 \u5e74 9 \u6708 3 \u65e5\u7684\u7f51\u7ad9\u72ec\u7acb\u8bbf\u5ba2 IP</p> <ol> <li>\u786e\u5b9a Key: \u4e3a\u4e86\u533a\u5206\u6bcf\u4e00\u5929\u7684\u6570\u636e\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u65e5\u671f\u4f5c\u4e3a key \u7684\u4e00\u90e8\u5206\uff0c\u4f8b\u5982 <code>daily_active_ips:20250903</code>\u3002</li> <li>\u8bb0\u5f55\u8bbf\u95ee: \u5f53\u4e00\u4e2a IP \u4e3a <code>192.168.1.10</code> \u7684\u7528\u6237\u8bbf\u95ee\u65f6\uff0c\u6211\u4eec\u5148\u5c06\u5176\u8f6c\u6362\u4e3a\u6574\u6570 <code>3232235786</code>\u3002</li> <li>\u6267\u884c\u547d\u4ee4:     <code>redis     SETBIT daily_active_ips:20250903 3232235786 1</code>     \u6267\u884c\u6b64\u547d\u4ee4\u540e\uff0c<code>daily_active_ips:20250903</code> \u8fd9\u4e2a key \u5bf9\u5e94\u7684\u4f4d\u56fe\u4e2d\u7b2c <code>3232235786</code> \u4f4d\u5c31\u88ab\u8bbe\u7f6e\u6210\u4e86 <code>1</code>\u3002</li> </ol> <p>\u7b2c 3 \u6b65\uff1aIP \u5730\u5740\u7684\u76f8\u5173\u64cd\u4f5c\u4e0e\u7edf\u8ba1</p> <p>\u6709\u4e86\u5b58\u50a8\u7ed3\u6784\uff0c\u6211\u4eec\u53ef\u4ee5\u975e\u5e38\u9ad8\u6548\u5730\u8fdb\u884c\u5404\u79cd\u7edf\u8ba1\u548c\u67e5\u8be2\u3002</p> <ul> <li> <p>\u67e5\u8be2\u6307\u5b9a IP \u662f\u5426\u8bbf\u95ee\u8fc7:     \u4f7f\u7528 <code>GETBIT</code> \u547d\u4ee4\u68c0\u67e5\u67d0\u4e2a\u504f\u79fb\u91cf\u4e0a\u7684\u503c\u662f\u5426\u4e3a <code>1</code>\u3002     <code>redis     GETBIT daily_active_ips:20250903 3232235786</code>     \u5982\u679c\u8fd4\u56de <code>1</code>\uff0c\u5219\u8868\u793a\u8be5 IP \u8bbf\u95ee\u8fc7\uff1b\u8fd4\u56de <code>0</code> \u5219\u8868\u793a\u672a\u8bbf\u95ee\u8fc7\u3002</p> </li> <li> <p>\u7edf\u8ba1\u5f53\u5929\u7684\u72ec\u7acb IP \u603b\u6570:     \u4f7f\u7528 <code>BITCOUNT</code> \u547d\u4ee4\u53ef\u4ee5\u5feb\u901f\u7edf\u8ba1\u4e00\u4e2a\u4f4d\u56fe\u4e2d\u88ab\u8bbe\u7f6e\u4e3a <code>1</code> \u7684\u4f4d\u7684\u6570\u91cf\u3002     <code>redis     BITCOUNT daily_active_ips:20250903</code>     \u8be5\u547d\u4ee4\u4f1a\u8fd4\u56de\u5f53\u5929\u6240\u6709\u72ec\u7acb IP \u7684\u603b\u6570\uff0c\u6027\u80fd\u6781\u9ad8\u3002</p> </li> <li> <p>\u7edf\u8ba1\u8fde\u7eed\u591a\u5929\u90fd\u6d3b\u8dc3\u7684\u7528\u6237:     \u5047\u8bbe\u6211\u4eec\u9700\u8981\u7edf\u8ba1\u5728 9 \u6708 3 \u65e5\u548c 9 \u6708 4 \u65e5\u90fd\u8bbf\u95ee\u8fc7\u7684 IP \u6570\u91cf\u3002\u53ef\u4ee5\u4f7f\u7528 <code>BITOP</code> \u547d\u4ee4\u5bf9\u591a\u4e2a\u4f4d\u56fe\u8fdb\u884c\u4f4d\u8fd0\u7b97\u3002</p> <ol> <li>\u9996\u5148\uff0c\u5c06\u4e24\u5929\u7684\u4f4d\u56fe\u8fdb\u884c\u201c\u4e0e\u201d\uff08AND\uff09\u8fd0\u7b97\uff0c\u7ed3\u679c\u5b58\u5165\u4e00\u4e2a\u65b0\u7684 key\uff0c\u4f8b\u5982 <code>active_both_days</code>\u3002     <code>redis     BITOP AND active_both_days daily_active_ips:20250903 daily_active_ips:20250904</code>     \u8fd9\u4e2a\u65b0\u4f4d\u56fe\u4e2d\uff0c\u53ea\u6709\u5728\u4e24\u4e2a\u6e90\u4f4d\u56fe\u4e2d\u5bf9\u5e94\u4f4d\u90fd\u4e3a <code>1</code> \u7684\u4f4d\u7f6e\uff0c\u7ed3\u679c\u624d\u4e3a <code>1</code>\u3002</li> <li>\u7136\u540e\uff0c\u7edf\u8ba1\u65b0\u4f4d\u56fe\u4e2d\u7684 <code>1</code> \u7684\u6570\u91cf\u3002     <code>redis     BITCOUNT active_both_days</code> \u540c\u6837\uff0c<code>BITOP</code> \u8fd8\u652f\u6301 <code>OR</code> (\u6216)\u3001<code>XOR</code> (\u5f02\u6216) \u548c <code>NOT</code> (\u975e) \u8fd0\u7b97\uff0c\u53ef\u4ee5\u7075\u6d3b\u5730\u5b9e\u73b0\u590d\u6742\u7684\u7edf\u8ba1\u9700\u6c42\u3002</li> </ol> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E5%A6%82%E4%BD%95%E5%AD%98%E5%82%A8%E5%A4%A7%E9%87%8F%E7%9A%84ip%E5%9C%B0%E5%9D%80/#redis","title":"Redis \u4f4d\u56fe\u7684\u5e95\u5c42\u5b9e\u73b0","text":"<p>1. \u5e95\u5c42\u6570\u636e\u7ed3\u6784\u662f\u5b57\u7b26\u4e32\uff08String\uff09</p> <p>Redis \u7684\u4f4d\u56fe\u5728\u5e95\u5c42\u662f\u501f\u52a9\u5b57\u7b26\u4e32\u7c7b\u578b\uff08String\uff09\u5b9e\u73b0\u7684\u3002 Redis \u4e2d\u7684\u5b57\u7b26\u4e32\u662f\u4e8c\u8fdb\u5236\u5b89\u5168\u7684\u52a8\u6001\u5b57\u7b26\u4e32\uff08SDS\uff09\uff0c\u53ef\u4ee5\u770b\u4f5c\u662f\u4e00\u4e2a\u5b57\u8282\u6570\u7ec4\u3002 Redis \u6b63\u662f\u5229\u7528\u4e86\u8fd9\u4e2a\u7279\u6027\uff0c\u5141\u8bb8\u5bf9\u5b57\u7b26\u4e32\u7684\u6bcf\u4e00\u4e2a\u4e8c\u8fdb\u5236\u4f4d\u8fdb\u884c\u76f4\u63a5\u64cd\u4f5c\u3002</p> <p>\u4f60\u53ef\u4ee5\u5c06\u4f4d\u56fe\u60f3\u8c61\u6210\u4e00\u4e2a\u4ee5\u201c\u4f4d\u201d\u4e3a\u5355\u4f4d\u7684\u6570\u7ec4\uff0c\u800c\u8fd9\u4e2a\u6570\u7ec4\u5b9e\u9645\u4e0a\u5b58\u50a8\u5728\u4e00\u4e2a\u5b57\u7b26\u4e32\u4e2d\u3002</p> <p>2. \u5bfb\u5740\u4e0e\u7a7a\u95f4\u5206\u914d\u673a\u5236</p> <p>\u5f53\u4f60\u6267\u884c <code>SETBIT mykey 100 1</code> \u547d\u4ee4\u65f6\uff0cRedis \u5185\u90e8\u4f1a\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a</p> <ul> <li>\u8ba1\u7b97\u5b57\u8282\u4f4d\u7f6e (Byte Index): Redis \u9700\u8981\u786e\u5b9a\u7b2c 100 \u4f4d\u4f4d\u4e8e\u54ea\u4e2a\u5b57\u8282\u3002\u8ba1\u7b97\u65b9\u5f0f\u662f <code>offset / 8</code>\u3002\u6240\u4ee5 <code>100 / 8 = 12</code>\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u5728\u7b2c 12 \u4e2a\u5b57\u8282\uff08\u7d22\u5f15\u4ece 0 \u5f00\u59cb\uff09\u3002</li> <li>\u8ba1\u7b97\u4f4d\u4f4d\u7f6e (Bit Index): \u63a5\u7740\u786e\u5b9a\u662f\u8fd9\u4e2a\u5b57\u8282\u4e2d\u7684\u7b2c\u51e0\u4f4d\u3002\u8ba1\u7b97\u65b9\u5f0f\u662f <code>offset % 8</code>\u3002\u6240\u4ee5 <code>100 % 8 = 4</code>\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u662f\u8be5\u5b57\u8282\u7684\u7b2c 4 \u4f4d\uff08\u7d22\u5f15\u4ece 0 \u5f00\u59cb\uff09\u3002</li> <li>\u8bfb\u5199\u64cd\u4f5c: Redis \u8bfb\u53d6\u7b2c 12 \u4e2a\u5b57\u8282\u7684\u73b0\u6709\u503c\uff0c\u7136\u540e\u901a\u8fc7\u4f4d\u8fd0\u7b97\u5c06\u7b2c 4 \u4f4d\u8bbe\u7f6e\u4e3a <code>1</code>\u3002</li> <li>\u81ea\u52a8\u6269\u5bb9: \u5982\u679c <code>mykey</code> \u4e0d\u5b58\u5728\uff0c\u6216\u8005\u5176\u5e95\u5c42\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\u4e0d\u8db3\u4ee5\u5bb9\u7eb3\u7b2c 12 \u4e2a\u5b57\u8282\uff0cRedis \u4f1a\u81ea\u52a8\u5c06\u5176\u6269\u5bb9\uff0c\u5e76\u5c06\u6240\u6709\u65b0\u5206\u914d\u7684\u5185\u5b58\u7a7a\u95f4\u7528 <code>0</code> \u586b\u5145\uff0c\u7136\u540e\u518d\u6267\u884c\u8bbe\u7f6e\u64cd\u4f5c\u3002 \u8fd9\u4e5f\u662f\u4e3a\u4ec0\u4e48\u5373\u4f7f\u4f60\u53ea\u8bbe\u7f6e\u4e86\u4e00\u4e2a\u5f88\u5927\u7684\u504f\u79fb\u91cf\uff0c\u4f4d\u56fe\u4e5f\u4f1a\u5360\u7528\u76f8\u5e94\u5927\u5c0f\u7684\u5185\u5b58\u3002</li> </ul> <p>3. \u7a7a\u95f4\u5360\u7528</p> <p>\u4f4d\u56fe\u5360\u7528\u7684\u7a7a\u95f4\u5927\u5c0f\u53d6\u51b3\u4e8e\u8bbe\u7f6e\u8fc7\u7684\u6700\u5927\u504f\u79fb\u91cf\uff08max_offset\uff09\u3002 \u4f8b\u5982\uff0c\u5982\u679c\u6700\u5927\u7684\u504f\u79fb\u91cf\u662f <code>3232235786</code>\uff08\u5bf9\u5e94 IP <code>192.168.1.10</code>\uff09\uff0c\u90a3\u4e48\u9700\u8981\u7684\u4f4d\u6570\u5c31\u662f <code>3232235786 + 1</code>\u3002</p> <p>\u5360\u7528\u7684\u5b57\u8282\u6570\u53ef\u4ee5\u901a\u8fc7\u516c\u5f0f <code>(max_offset / 8) + 1</code> \u8ba1\u7b97\u3002 \u5bf9\u4e8e\u6574\u4e2a IPv4 \u5730\u5740\u7a7a\u95f4\uff08\u7ea6 2^32\uff09\uff0c\u5982\u679c\u9700\u8981\u5168\u90e8\u6620\u5c04\uff0c\u5219\u9700\u8981 <code>2^32</code> \u4f4d\uff0c\u6362\u7b97\u4e0b\u6765\u5c31\u662f <code>(2^32 / 8 / 1024 / 1024) = 512MB</code> \u7684\u5185\u5b58\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E5%AF%B91%E4%B8%AA%E4%BA%BF%E6%95%B0%E6%8D%AE%E8%BF%9B%E8%A1%8C%E6%8E%92%E5%BA%8F%EF%BC%8C%E5%86%85%E5%AD%98%E5%8F%AA%E6%9C%8910M%E5%BA%94%E8%AF%A5%E4%BD%BF%E7%94%A8%E4%BB%80%E4%B9%88%E7%AE%97%E6%B3%95/","title":"\u5bf91\u4e2a\u4ebf\u6570\u636e\u8fdb\u884c\u6392\u5e8f\uff0c\u5185\u5b58\u53ea\u670910M\u5e94\u8be5\u4f7f\u7528\u4ec0\u4e48\u7b97\u6cd5","text":"<p>\u56e0\u4e3a\u6570\u636e\u91cf\uff081\u4ebf\u4e2a\u6570\u636e\u9879\uff0c\u5373\u4f7f\u6bcf\u4e2a\u6570\u636e\u9879\u53ea\u662f\u4e00\u4e2a4\u5b57\u8282\u6574\u6570\uff0c\u4e5f\u9700\u8981\u7ea6400MB\u7684\u5b58\u50a8\uff0c\u8fd9\u8fdc\u5927\u4e8e10MB\u7684\u53ef\u7528\u5185\u5b58\uff09\u8fdc\u8d85\u51fa\u4e86\u5185\u5b58\u7684\u5bb9\u91cf\u3002\u6211\u4eec\u65e0\u6cd5\u4e00\u6b21\u6027\u5c06\u6240\u6709\u6570\u636e\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u8fdb\u884c\u5185\u90e8\u6392\u5e8f\uff08\u4f8b\u5982\u4f7f\u7528\u5feb\u901f\u6392\u5e8f\u3001\u5f52\u5e76\u6392\u5e8f\u3001\u5806\u6392\u5e8f\u7b49\uff09\u3002\u56e0\u6b64\uff0c\u9700\u8981\u4f7f\u7528\u5916\u90e8\u6392\u5e8f\u7b97\u6cd5\uff0c\u5176\u4e2d\u6700\u5e38\u7528\u548c\u7ecf\u5178\u7684\u662f\u5916\u90e8\u591a\u8def\u5f52\u5e76\u6392\u5e8f\u3002</p> <p>\u9636\u6bb5\u4e00\uff1a\u751f\u6210\u521d\u59cb\u6709\u5e8f\u7684\u987a\u4e32</p> <ol> <li>\u5206\u5757\u8bfb\u53d6\u4e0e\u5185\u90e8\u6392\u5e8f\uff1a<ul> <li>\u6211\u4eec\u5c0610MB\u7684\u5185\u5b58\u5c3d\u53ef\u80fd\u591a\u5730\u7528\u4f5c\u8f93\u5165\u7f13\u51b2\u533a\u3002\u5047\u8bbe\u6bcf\u4e2a\u6570\u636e\u9879\u662f S \u5b57\u8282\uff0c\u90a3\u4e4810MB\u5185\u5b58\u5927\u7ea6\u53ef\u4ee5\u5bb9\u7eb3 M \u7b49\u4e8e (10 \u4e58\u4ee5 1024 \u4e58\u4ee5 1024) \u9664\u4ee5 S \u4e2a\u6570\u636e\u9879\u3002</li> <li>\u6211\u4eec\u4ece\u78c1\u76d8\u4e0a\u8bfb\u53d6 M \u4e2a\u6570\u636e\u9879\u5230\u5185\u5b58\u4e2d\u3002</li> <li>\u4f7f\u7528\u4e00\u79cd\u9ad8\u6548\u7684\u5185\u90e8\u6392\u5e8f\u7b97\u6cd5\uff08\u4f8b\u5982\u5feb\u901f\u6392\u5e8f\u6216\u5806\u6392\u5e8f\uff09\u5bf9\u8fd9 M \u4e2a\u6570\u636e\u9879\u8fdb\u884c\u6392\u5e8f\u3002\u5806\u6392\u5e8f\u5728\u7a7a\u95f4\u4e0a\u53ef\u80fd\u66f4\u4f18\uff0c\u56e0\u4e3a\u5b83\u539f\u5730\u6392\u5e8f\u4e14\u4e0d\u9700\u8981\u989d\u5916\u7684\u9012\u5f52\u6808\u7a7a\u95f4\uff08\u5982\u679c\u8fed\u4ee3\u5b9e\u73b0\uff09\u3002</li> <li>\u5c06\u6392\u5e8f\u540e\u7684\u8fd9 M \u4e2a\u6570\u636e\u9879\uff08\u73b0\u5728\u662f\u4e00\u4e2a\u6709\u5e8f\u7684\u201c\u987a\u4e32\u201d\uff09\u5199\u56de\u5230\u78c1\u76d8\u4e0a\u7684\u4e00\u4e2a\u4e34\u65f6\u6587\u4ef6\u4e2d\u3002</li> </ul> </li> <li>\u91cd\u590d\u64cd\u4f5c\uff1a<ul> <li>\u91cd\u590d\u4e0a\u8ff0\u6b65\u9aa4\uff0c\u76f4\u5230\u6240\u6709\u76841\u4ebf\u4e2a\u6570\u636e\u9879\u90fd\u88ab\u5904\u7406\u5b8c\u6bd5\u3002</li> <li>\u8fd9\u6837\uff0c\u78c1\u76d8\u4e0a\u5c31\u4f1a\u751f\u6210 N \u7b49\u4e8e (\u603b\u6570\u636e\u91cf) \u9664\u4ee5 M \u4e2a\u4e34\u65f6\u7684\u3001\u5404\u81ea\u5185\u90e8\u6709\u5e8f\u7684\u987a\u4e32\u6587\u4ef6\u3002\u4f8b\u5982\uff0c\u5982\u679c\u6bcf\u4e2a\u6570\u636e\u9879\u662f4\u5b57\u8282\u6574\u6570\uff0c10MB\u5185\u5b58\u7ea6\u80fd\u5bb9\u7eb3 250 \u4e07\u4e2a\u6574\u6570\u3002\u90a3\u4e481\u4ebf\u4e2a\u6574\u6570\u4f1a\u4ea7\u751f 1\u4ebf \u9664\u4ee5 250\u4e07 \u7b49\u4e8e 40 \u4e2a\u521d\u59cb\u6709\u5e8f\u987a\u4e32\u3002</li> </ul> </li> </ol> <p>\u9636\u6bb5\u4e8c\uff1a\u591a\u8def\u5f52\u5e76</p> <p>\u73b0\u5728\u6211\u4eec\u6709\u4e86 N \u4e2a\u5df2\u6392\u5e8f\u7684\u987a\u4e32\u6587\u4ef6\u3002\u6211\u4eec\u9700\u8981\u5c06\u5b83\u4eec\u5408\u5e76\u6210\u4e00\u4e2a\u6700\u7ec8\u7684\u6709\u5e8f\u6587\u4ef6\u3002</p> <ol> <li> <p>\u5206\u914d\u5185\u5b58\u7f13\u51b2\u533a\uff1a</p> <ul> <li>10MB\u7684\u5185\u5b58\u9700\u8981\u88ab\u5408\u7406\u5206\u914d\u3002\u4e00\u90e8\u5206\u7528\u4f5c K \u4e2a\u8f93\u5165\u7f13\u51b2\u533a\uff08\u6bcf\u4e2a\u5bf9\u5e94\u4e00\u4e2a\u8981\u5f52\u5e76\u7684\u987a\u4e32\uff09\uff0c\u53e6\u4e00\u90e8\u5206\u7528\u4f5c\u4e00\u4e2a\u8f93\u51fa\u7f13\u51b2\u533a\u3002</li> <li>\u5047\u8bbe\u6211\u4eec\u4e3a\u6bcf\u4e2a\u8f93\u5165\u7f13\u51b2\u533a\u5206\u914d B_in \u5927\u5c0f\u7684\u7a7a\u95f4\uff0c\u4e3a\u8f93\u51fa\u7f13\u51b2\u533a\u5206\u914d B_out \u5927\u5c0f\u7684\u7a7a\u95f4\u3002\u90a3\u4e48 K \u4e58\u4ee5 B_in \u52a0\u4e0a B_out \u7684\u548c\u5fc5\u987b\u5c0f\u4e8e\u6216\u7b49\u4e8e 10MB\u3002</li> <li>K \u7684\u503c\uff08\u5373\u4e00\u6b21\u5f52\u5e76\u591a\u5c11\u4e2a\u987a\u4e32\uff09\u662f\u4e00\u4e2a\u5173\u952e\u53c2\u6570\u3002K \u8d8a\u5927\uff0c\u5f52\u5e76\u7684\u8d9f\u6570\u5c31\u8d8a\u5c11\uff0c\u603b\u7684\u8f93\u5165\u8f93\u51fa\u6b21\u6570\u4e5f\u53ef\u80fd\u8d8a\u5c11\u3002\u6211\u4eec\u5e0c\u671b\u5728\u53ef\u7528\u5185\u5b58\u4e0b\u5c3d\u53ef\u80fd\u589e\u5927 K\u3002</li> </ul> </li> <li> <p>\u6267\u884cK\u8def\u5f52\u5e76\uff1a</p> <ul> <li>\u4ece K \u4e2a\u8981\u5f52\u5e76\u7684\u987a\u4e32\u6587\u4ef6\u4e2d\uff0c\u5404\u8bfb\u53d6\u4e00\u5757\u6570\u636e\uff08\u4f8b\u5982 B_in \u5927\u5c0f\uff09\u5230\u5bf9\u5e94\u7684\u8f93\u5165\u7f13\u51b2\u533a\u4e2d\u3002</li> <li>\u4f7f\u7528\u4e00\u4e2a\u6700\u5c0f\u5806\u6570\u636e\u7ed3\u6784\uff0c\u5927\u5c0f\u4e3a K\u3002\u5806\u4e2d\u6bcf\u4e2a\u5143\u7d20\u5b58\u50a8\u7684\u662f\u5bf9\u5e94\u8f93\u5165\u7f13\u51b2\u533a\u5f53\u524d\u53ef\u7528\u7684\u6700\u5c0f\u6570\u636e\u9879\u53ca\u5176\u6765\u6e90\u987a\u4e32\u7684\u6807\u8bc6\u3002</li> <li>\u91cd\u590d\u4ee5\u4e0b\u64cd\u4f5c\uff0c\u76f4\u5230\u6240\u6709\u8f93\u5165\u987a\u4e32\u90fd\u5904\u7406\u5b8c\u6bd5\uff1a     a.  \u4ece\u6700\u5c0f\u5806\u4e2d\u53d6\u51fa\uff08\u5e76\u5220\u9664\uff09\u5806\u9876\u5143\u7d20\uff08\u5373\u5f53\u524d\u6240\u6709\u8f93\u5165\u7f13\u51b2\u533a\u4e2d\u6700\u5c0f\u7684\u6570\u636e\u9879\uff09\u3002     b.  \u5c06\u8fd9\u4e2a\u6700\u5c0f\u6570\u636e\u9879\u5199\u5165\u8f93\u51fa\u7f13\u51b2\u533a\u3002     c.  \u5982\u679c\u8f93\u51fa\u7f13\u51b2\u533a\u6ee1\u4e86\uff0c\u5c31\u5c06\u5176\u5185\u5bb9\u8ffd\u52a0\u5199\u5165\u5230\u6700\u7ec8\u7684\u6392\u5e8f\u7ed3\u679c\u6587\u4ef6\u4e2d\uff0c\u5e76\u6e05\u7a7a\u8f93\u51fa\u7f13\u51b2\u533a\u3002     d.  \u4ece\u8be5\u6700\u5c0f\u6570\u636e\u9879\u7684\u539f\u8f93\u5165\u7f13\u51b2\u533a\u4e2d\uff0c\u8bfb\u53d6\u4e0b\u4e00\u4e2a\u6570\u636e\u9879\u3002\u5982\u679c\u8be5\u8f93\u5165\u7f13\u51b2\u533a\u5df2\u7a7a\uff0c\u5219\u4ece\u5176\u5bf9\u5e94\u7684\u78c1\u76d8\u987a\u4e32\u6587\u4ef6\u4e2d\u8bfb\u53d6\u4e0b\u4e00\u5757\u6570\u636e\u586b\u5145\u8be5\u7f13\u51b2\u533a\u3002\u5982\u679c\u8be5\u987a\u4e32\u6587\u4ef6\u5df2\u8bfb\u5b8c\uff0c\u5219\u6807\u8bb0\u8be5\u8def\u5f52\u5e76\u7ed3\u675f\uff0c\u4e0d\u518d\u5411\u5806\u4e2d\u6dfb\u52a0\u6765\u81ea\u6b64\u8def\u7684\u6570\u636e\u3002     e.  \u5c06\u65b0\u8bfb\u53d6\u7684\u6570\u636e\u9879\uff08\u5982\u679c\u5b58\u5728\uff09\u63d2\u5165\u5230\u6700\u5c0f\u5806\u4e2d\u3002</li> </ul> </li> <li> <p>\u591a\u8d9f\u5f52\u5e76\uff08\u5982\u679c\u9700\u8981\uff09\uff1a</p> <ul> <li>\u5982\u679c\u521d\u59cb\u987a\u4e32\u7684\u6570\u91cf N \u5927\u4e8e\u4e00\u6b21\u53ef\u4ee5\u5f52\u5e76\u7684\u8def\u6570 K\uff08\u5373 N \u5927\u4e8e K\uff09\uff0c\u90a3\u4e48\u7b2c\u4e00\u8d9f\u5f52\u5e76\u4f1a\u4ea7\u751f N \u9664\u4ee5 K \u5411\u4e0a\u53d6\u6574 \u4e2a\u65b0\u7684\u3001\u66f4\u957f\u7684\u6709\u5e8f\u987a\u4e32\u3002</li> <li>\u7136\u540e\u5bf9\u8fd9\u4e9b\u65b0\u751f\u6210\u7684\u987a\u4e32\u518d\u8fdb\u884c\u4e0b\u4e00\u8d9f\u5f52\u5e76\uff0c\u76f4\u5230\u6700\u7ec8\u53ea\u5269\u4e0b\u4e00\u4e2a\u5b8c\u5168\u6392\u5e8f\u7684\u987a\u4e32\uff0c\u5373\u6700\u7ec8\u7684\u6392\u5e8f\u7ed3\u679c\u3002</li> <li>\u4f8b\u5982\uff0c\u5982\u679c\u670940\u4e2a\u521d\u59cb\u987a\u4e32\uff0c\u800c\u5185\u5b58\u5141\u8bb8\u6211\u4eec\u8fdb\u884c10\u8def\u5f52\u5e76\uff08K\u7b49\u4e8e10\uff09\uff1a<ul> <li>\u7b2c\u4e00\u8d9f\uff1a40\u4e2a\u987a\u4e32\uff0c\u6bcf10\u4e2a\u5f52\u5e76\u4e00\u6b21\uff0c\u4ea7\u751f 40 \u9664\u4ee5 10 \u7b49\u4e8e 4 \u4e2a\u66f4\u957f\u7684\u987a\u4e32\u3002</li> <li>\u7b2c\u4e8c\u8d9f\uff1a\u8fd94\u4e2a\u987a\u4e32\uff0c\u8fdb\u884c\u4e00\u6b214\u8def\u5f52\u5e76\uff08\u56e0\u4e3a4\u5c0f\u4e8e10\uff0c\u8fd9\u662f\u53ef\u884c\u7684\uff09\uff0c\u4ea7\u751f\u6700\u7ec8\u76841\u4e2a\u5b8c\u5168\u6392\u5e8f\u7684\u6587\u4ef6\u3002</li> </ul> </li> </ul> </li> </ol> <p>\u5177\u4f53\u523010MB\u5185\u5b58\u548c1\u4ebf\u6570\u636e\u7684\u4f8b\u5b50\uff1a</p> <ul> <li>\u5047\u8bbe\u6570\u636e\u9879\u662f4\u5b57\u8282\u6574\u6570\u3002</li> <li>\u9636\u6bb5\u4e00\uff08\u751f\u6210\u987a\u4e32\uff09\uff1a<ul> <li>10MB\u5185\u5b58\u5927\u7ea6\u53ef\u4ee5\u5bb9\u7eb3 10 \u4e58\u4ee5 1024 \u4e58\u4ee5 1024 \u9664\u4ee5 4\uff0c\u7ea6\u7b49\u4e8e 262\u4e07 \u4e2a\u6574\u6570\u3002</li> <li>\u6211\u4eec\u5c06\u8bfb\u53d6\u8fd9\u4e48\u591a\u6574\u6570\uff0c\u6392\u5e8f\uff0c\u5199\u56de\u78c1\u76d8\u3002</li> <li>\u603b\u5171\u4f1a\u4ea7\u751f 1\u4ebf \u9664\u4ee5 262\u4e07\uff0c\u7ea6\u7b49\u4e8e 38.15\uff0c\u5373\u5927\u7ea639\u4e2a\u521d\u59cb\u6709\u5e8f\u987a\u4e32\u3002</li> </ul> </li> <li>\u9636\u6bb5\u4e8c\uff08\u591a\u8def\u5f52\u5e76\uff09\uff1a<ul> <li>\u6211\u4eec\u9700\u8981\u4e3a39\u4e2a\u8f93\u5165\u7f13\u51b2\u533a\uff08\u6bcf\u4e2a\u5bf9\u5e94\u4e00\u4e2a\u987a\u4e32\uff09\u548c\u4e00\u4e2a\u8f93\u51fa\u7f13\u51b2\u533a\u5206\u914d10MB\u5185\u5b58\u3002</li> <li>\u5982\u679c\u6bcf\u4e2a\u7f13\u51b2\u533a\u81f3\u5c11\u9700\u8981\u80fd\u5bb9\u7eb3\u4e00\u4e9b\u6570\u636e\uff08\u6bd4\u5982\u51e0KB\u5230\u51e0\u5341KB\uff0c\u4ee5\u4fbf\u8fdb\u884c\u6709\u6548\u7684\u5757\u8f93\u5165\u8f93\u51fa\uff09\uff0c\u6211\u4eec\u53ef\u4ee5\u8ba1\u7b97K\u7684\u6700\u5927\u503c\u3002</li> <li>\u5047\u8bbe\u6211\u4eec\u7ed9\u6bcf\u4e2a\u8f93\u5165\u7f13\u51b2\u533a\u5206\u914d100KB\uff0c\u8f93\u51fa\u7f13\u51b2\u533a\u4e5f\u5206\u914d100KB\u3002\u90a3\u4e48 K \u4e58\u4ee5 100KB \u52a0\u4e0a 100KB \u7684\u548c\u5e94\u5c0f\u4e8e\u7b49\u4e8e 10MB\uff08\u537310240KB\uff09\u3002</li> <li>K \u4e58\u4ee5 100KB \u5c0f\u4e8e\u7b49\u4e8e 10140KB\uff0c\u6240\u4ee5 K \u5c0f\u4e8e\u7b49\u4e8e 101.4\u3002</li> <li>\u8fd9\u610f\u5473\u7740\u6211\u4eec\u53ef\u4ee5\u540c\u65f6\u5f52\u5e76\u591a\u8fbe\u7ea6101\u8def\u3002</li> <li>\u7531\u4e8e\u6211\u4eec\u53ea\u670939\u4e2a\u521d\u59cb\u987a\u4e32\uff0c\u800c39\u5c0f\u4e8e101\uff0c\u6240\u4ee5\u6211\u4eec\u53ea\u9700\u8981\u4e00\u8d9f\u5f52\u5e76\u5c31\u53ef\u4ee5\u5b8c\u6210\u6240\u670939\u4e2a\u987a\u4e32\u7684\u5408\u5e76\uff0c\u76f4\u63a5\u751f\u6210\u6700\u7ec8\u7684\u6392\u5e8f\u7ed3\u679c\u6587\u4ef6\u3002</li> <li>\u5177\u4f53\u5730\uff0c\u6211\u4eec\u4f1a\u4e3a\u8fd939\u4e2a\u987a\u4e32\u5404\u5f00\u4e00\u4e2a\u8f93\u5165\u7f13\u51b2\u533a\uff0c\u518d\u52a0\u4e00\u4e2a\u8f93\u51fa\u7f13\u51b2\u533a\u300210MB \u9664\u4ee5 (39 \u52a0 1)\uff0c\u537310MB \u9664\u4ee5 40\uff0c\u7b49\u4e8e 256KB\u3002\u6bcf\u4e2a\u7f13\u51b2\u533a\u53ef\u4ee5\u6709256KB\uff0c\u8fd9\u5bf9\u4e8e\u78c1\u76d8\u8f93\u5165\u8f93\u51fa\u6765\u8bf4\u662f\u76f8\u5f53\u4e0d\u9519\u7684\u5757\u5927\u5c0f\u3002</li> </ul> </li> </ul> <p>\u4f18\u5316\u548c\u8003\u8651\u70b9\uff1a</p> <ol> <li>\u66ff\u6362\u9009\u62e9\u7b97\u6cd5\uff1a\u5728\u751f\u6210\u521d\u59cb\u987a\u4e32\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u66ff\u6362\u9009\u62e9\u7b97\u6cd5\u3002\u5b83\u5229\u7528\u4e00\u4e2a\u5185\u5b58\u4e2d\u7684\u6700\u5c0f\u5806\uff0c\u53ef\u4ee5\u751f\u6210\u5e73\u5747\u957f\u5ea6\u4e3a2\u500d\u5185\u5b58\u5927\u5c0f\u7684\u987a\u4e32\uff0c\u4ece\u800c\u51cf\u5c11\u521d\u59cb\u987a\u4e32\u7684\u6570\u91cf\uff0c\u8fdb\u800c\u53ef\u80fd\u51cf\u5c11\u5f52\u5e76\u7684\u8d9f\u6570\u3002</li> <li>\u53cc\u7f13\u51b2\u6216\u591a\u7f13\u51b2\uff1a\u5728\u8fdb\u884c\u8f93\u5165\u8f93\u51fa\u64cd\u4f5c\u65f6\uff08\u8bfb\u987a\u4e32\u3001\u5199\u987a\u4e32\u3001\u5199\u6700\u7ec8\u7ed3\u679c\uff09\uff0c\u53ef\u4ee5\u4f7f\u7528\u53cc\u7f13\u51b2\u6280\u672f\u6765\u91cd\u53e0\u8f93\u5165\u8f93\u51fa\u64cd\u4f5c\u548cCPU\u8ba1\u7b97\uff08\u6392\u5e8f\u6216\u5f52\u5e76\uff09\uff0c\u63d0\u9ad8\u6548\u7387\u3002\u4f8b\u5982\uff0c\u5f53CPU\u5904\u7406\u4e00\u4e2a\u7f13\u51b2\u533a\u7684\u6570\u636e\u65f6\uff0c\u53e6\u4e00\u4e2a\u7f13\u51b2\u533a\u53ef\u4ee5\u540c\u65f6\u8fdb\u884c\u78c1\u76d8\u8bfb\u5199\u3002</li> <li>\u8f93\u5165\u8f93\u51fa\u6027\u80fd\uff1a\u5916\u90e8\u6392\u5e8f\u7684\u6027\u80fd\u74f6\u9888\u901a\u5e38\u5728\u78c1\u76d8\u8f93\u5165\u8f93\u51fa\u3002\u56e0\u6b64\uff0c\u5e94\u5c3d\u91cf\u4f7f\u7528\u987a\u5e8f\u8f93\u5165\u8f93\u51fa\uff0c\u5e76\u9009\u62e9\u5408\u9002\u7684\u5757\u5927\u5c0f\uff08\u7f13\u51b2\u533a\u5927\u5c0f\uff09\u6765\u4f18\u5316\u78c1\u76d8\u8bfb\u5199\u6548\u7387\u3002</li> <li>\u5185\u5b58\u5206\u914d\uff1a10MB\u5185\u5b58\u7684\u5212\u5206\u9700\u8981\u4ed4\u7ec6\u6743\u8861\u3002\u5728\u5f52\u5e76\u9636\u6bb5\uff0c\u66f4\u591a\u7684\u8def\u6570\uff08K\uff09\u901a\u5e38\u66f4\u597d\uff0c\u4f46\u8fd9\u610f\u5473\u7740\u6bcf\u4e2a\u8f93\u5165\u7f13\u51b2\u533a\u4f1a\u53d8\u5c0f\u3002\u592a\u5c0f\u7684\u7f13\u51b2\u533a\u4f1a\u5bfc\u81f4\u9891\u7e41\u7684\u8f93\u5165\u8f93\u51fa\u3002</li> </ol> <p>\u603b\u7ed3\u6765\u8bf4\uff0c\u5bf9\u4e8e1\u4ebf\u6570\u636e\u548c10MB\u5185\u5b58\u7684\u6392\u5e8f\u95ee\u9898\uff0c\u6807\u51c6\u7b54\u6848\u662f\u91c7\u7528\u5916\u90e8\u591a\u8def\u5f52\u5e76\u6392\u5e8f\u3002\u901a\u8fc7\u5148\u5c06\u6570\u636e\u5206\u5757\u5728\u5185\u5b58\u4e2d\u6392\u5e8f\u751f\u6210\u521d\u59cb\u987a\u4e32\uff0c\u7136\u540e\u518d\u5bf9\u8fd9\u4e9b\u987a\u4e32\u8fdb\u884c\u591a\u8def\u5f52\u5e76\uff0c\u6700\u7ec8\u5f97\u5230\u5b8c\u5168\u6392\u5e8f\u7684\u7ed3\u679c\u3002\u6838\u5fc3\u5728\u4e8e\u6709\u6548\u5730\u7ba1\u7406\u5185\u5b58\u548c\u78c1\u76d8\u8f93\u5165\u8f93\u51fa\u3002</p> <p>\u62d3\u5c55\u5ef6\u7533\uff1a</p> <ol> <li>\u5e76\u884c\u5916\u90e8\u6392\u5e8f\uff1a\u5982\u679c\u6709\u591a\u6838CPU\u548c\u591a\u4e2a\u78c1\u76d8\uff0c\u53ef\u4ee5\u8fdb\u4e00\u6b65\u5e76\u884c\u5316\u5916\u90e8\u6392\u5e8f\u7684\u5404\u4e2a\u9636\u6bb5\uff0c\u4f8b\u5982\u5e76\u884c\u751f\u6210\u521d\u59cb\u987a\u4e32\uff0c\u6216\u8005\u5728\u5f52\u5e76\u9636\u6bb5\u5e76\u884c\u8bfb\u53d6\u4e0d\u540c\u7684\u987a\u4e32\u6570\u636e\u3002</li> <li>\u5206\u5e03\u5f0f\u6392\u5e8f\uff1a\u5982\u679c\u6570\u636e\u91cf\u66f4\u5927\uff0c\u6216\u8005\u6709\u5206\u5e03\u5f0f\u8ba1\u7b97\u73af\u5883\uff08\u4f8b\u5982 Hadoop MapReduce \u6216 Spark \u8fd9\u6837\u7684\u7cfb\u7edf\uff09\uff0c\u5219\u4f1a\u91c7\u7528\u5206\u5e03\u5f0f\u6392\u5e8f\u7b56\u7565\u3002\u5176\u57fa\u672c\u601d\u60f3\u4e0e\u5916\u90e8\u6392\u5e8f\u7c7b\u4f3c\uff0c\u4f46\u4f1a\u5728\u591a\u53f0\u673a\u5668\u4e0a\u5e76\u884c\u8fdb\u884c\u6570\u636e\u5206\u7247\u3001\u5c40\u90e8\u6392\u5e8f\uff08\u901a\u5e38\u5728\u6620\u5c04\u9636\u6bb5\u5b8c\u6210\uff09\u548c\u5408\u5e76\uff08\u901a\u5e38\u5728\u89c4\u7ea6\u9636\u6bb5\u5b8c\u6210\uff09\u3002</li> <li>\u7279\u5b9a\u6570\u636e\u7c7b\u578b\u7684\u4f18\u5316\uff1a\u5982\u679c\u6570\u636e\u6709\u7279\u5b9a\u5206\u5e03\u6216\u7279\u6027\uff08\u4f8b\u5982\uff0c\u5927\u91cf\u91cd\u590d\u503c\uff09\uff0c\u53ef\u4ee5\u8003\u8651\u4e00\u4e9b\u9488\u5bf9\u6027\u7684\u4f18\u5316\uff0c\u5982\u5728\u521d\u59cb\u6392\u5e8f\u9636\u6bb5\u8fdb\u884c\u8ba1\u6570\u6392\u5e8f\u6216\u6876\u6392\u5e8f\u7684\u53d8\u79cd\uff0c\u6216\u8005\u5728\u5f52\u5e76\u65f6\u5904\u7406\u91cd\u590d\u503c\u3002</li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E6%8E%92%E8%A1%8C%E6%A6%9C%E5%8A%9F%E8%83%BD%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0/","title":"\u6392\u884c\u699c\u529f\u80fd\u600e\u4e48\u5b9e\u73b0","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E6%8E%92%E8%A1%8C%E6%A6%9C%E5%8A%9F%E8%83%BD%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0/#_1","title":"\u8bbe\u8ba1","text":"<ul> <li> <p>Redis \u6709\u5e8f\u96c6\u5408 (Sorted Set)\uff1aRedis \u662f\u4e00\u4e2a\u57fa\u4e8e\u5185\u5b58\u7684\u6570\u636e\u7ed3\u6784\u5b58\u50a8\u7cfb\u7edf\uff0c\u8bfb\u5199\u6027\u80fd\u6781\u9ad8\u3002\u5176 Sorted Set \u6570\u636e\u7ed3\u6784\uff08\u4e5f\u79f0\u4e3a ZSET\uff09\u4e13\u95e8\u4e3a\u6392\u5e8f\u800c\u751f\uff0c\u5b83\u5728\u96c6\u5408\uff08Set\uff09\u7684\u57fa\u7840\u4e0a\u4e3a\u6bcf\u4e2a\u6210\u5458\uff08member\uff09\u5173\u8054\u4e86\u4e00\u4e2a\u5206\u6570\uff08score\uff09\u3002\u8fd9\u4f7f\u5f97 Redis \u80fd\u591f\u4ee5\u6781\u9ad8\u7684\u6548\u7387\uff08\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(log N)\uff09\u8fdb\u884c\u6210\u5458\u7684\u63d2\u5165\u3001\u66f4\u65b0\u3001\u5220\u9664\u4ee5\u53ca\u6392\u540d\u67e5\u8be2\u7b49\u64cd\u4f5c\u3002\u56e0\u6b64\uff0cRedis \u975e\u5e38\u9002\u5408\u5904\u7406\u5b9e\u65f6\u6027\u8981\u6c42\u9ad8\u7684\u6392\u884c\u699c\u6570\u636e\u67e5\u8be2\u3002</p> </li> <li> <p>\u6570\u636e\u5e93 (\u5982 MySQL, PostgreSQL)\uff1a\u5173\u7cfb\u578b\u6570\u636e\u5e93\uff08\u6216\u90e8\u5206 NoSQL \u6570\u636e\u5e93\uff09\u5219\u8d1f\u8d23\u6570\u636e\u7684\u6301\u4e45\u5316\u5b58\u50a8\u548c\u590d\u6742\u67e5\u8be2\u3002\u6240\u6709\u7528\u6237\u7684\u5f97\u5206\u8bb0\u5f55\u3001\u5386\u53f2\u6392\u884c\u6570\u636e\u7b49\u90fd\u4f1a\u5728\u6570\u636e\u5e93\u4e2d\u5b58\u6863\u3002\u8fd9\u786e\u4fdd\u4e86\u6570\u636e\u7684\u5b89\u5168\u6027\u548c\u5b8c\u6574\u6027\uff0c\u5e76\u4e14\u53ef\u4ee5\u652f\u6301\u79bb\u7ebf\u5206\u6790\u3001\u6570\u636e\u5907\u4efd\u7b49\u9700\u6c42\u3002</p> </li> </ul> <p>\u901a\u8fc7\u8fd9\u79cd\u67b6\u6784\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u5b9e\u65f6\u7684\u8bfb\u5199\u8bf7\u6c42\u4ea4\u7ed9 Redis \u5904\u7406\uff0c\u4fdd\u8bc1\u6392\u884c\u699c\u7684\u5feb\u901f\u54cd\u5e94\uff1b\u540c\u65f6\uff0c\u901a\u8fc7\u5c06\u6570\u636e\u5f02\u6b65\u5199\u5165\u6570\u636e\u5e93\uff0c\u786e\u4fdd\u6570\u636e\u7684\u6301\u4e45\u6027\u548c\u4e00\u81f4\u6027\u3002</p> <p>\u5178\u578b\u7684\u6392\u884c\u699c\u7cfb\u7edf\u67b6\u6784\u548c\u6570\u636e\u6d41\u5982\u4e0b\uff1a</p> <ol> <li> <p>\u5206\u6570\u66f4\u65b0\uff1a</p> <ul> <li>\u5f53\u7528\u6237\u7684\u5206\u6570\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u5e94\u7528\u7a0b\u5e8f\u9996\u5148\u5c06\u65b0\u7684\u5206\u6570\u6570\u636e\u5199\u5165 Redis \u7684 Sorted Set\u3002\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u5feb\u7684\u64cd\u4f5c\uff0c\u53ef\u4ee5\u7acb\u5373\u53cd\u9988\u7ed9\u7528\u6237\u6700\u65b0\u7684\u6392\u540d\u3002</li> <li>\u540c\u65f6\uff0c\u5e94\u7528\u7a0b\u5e8f\u5c06\u8be5\u6b21\u5206\u6570\u66f4\u65b0\u7684\u8bb0\u5f55\uff08\u4f8b\u5982\u7528\u6237ID\u3001\u5206\u6570\u3001\u65f6\u95f4\u6233\u7b49\uff09\u53d1\u9001\u5230\u4e00\u4e2a\u6d88\u606f\u961f\u5217\u4e2d\uff08\u5982 RabbitMQ, Kafka\uff09\u3002</li> </ul> </li> <li> <p>\u6570\u636e\u6301\u4e45\u5316\uff1a</p> <ul> <li>\u4e00\u4e2a\u72ec\u7acb\u7684\u540e\u53f0\u670d\u52a1\u4f1a\u6d88\u8d39\u6d88\u606f\u961f\u5217\u4e2d\u7684\u6570\u636e\uff0c\u5e76\u5c06\u5206\u6570\u66f4\u65b0\u7684\u8be6\u7ec6\u8bb0\u5f55\u6279\u91cf\u5199\u5165\u6570\u636e\u5e93\u4e2d\u3002\u8fd9\u79cd\u5f02\u6b65\u5316\u7684\u201c\u5199\u540e\u201d (Write-Behind) \u6a21\u5f0f\uff0c\u53ef\u4ee5\u6709\u6548\u964d\u4f4e\u5bf9\u4e3b\u5e94\u7528\u6d41\u7a0b\u7684\u5f71\u54cd\uff0c\u5e76\u51cf\u8f7b\u6570\u636e\u5e93\u7684\u77ac\u65f6\u5199\u5165\u538b\u529b\u3002</li> </ul> </li> <li> <p>\u6392\u884c\u699c\u67e5\u8be2\uff1a</p> <ul> <li>\u5f53\u7528\u6237\u9700\u8981\u67e5\u770b\u6392\u884c\u699c\u65f6\uff0c\u5e94\u7528\u7a0b\u5e8f\u76f4\u63a5\u4ece Redis \u7684 Sorted Set \u4e2d\u67e5\u8be2\u6570\u636e\u3002 Redis \u63d0\u4f9b\u4e86\u4e30\u5bcc\u7684\u547d\u4ee4\u6765\u6ee1\u8db3\u5404\u79cd\u67e5\u8be2\u9700\u6c42\uff0c\u4f8b\u5982\u83b7\u53d6\u6392\u540d\u524d N \u7684\u7528\u6237\u3001\u67e5\u8be2\u7279\u5b9a\u7528\u6237\u7684\u6392\u540d\u548c\u5206\u6570\u3001\u83b7\u53d6\u67d0\u4e2a\u7528\u6237\u5468\u8fb9\u7684\u6392\u540d\u7b49\u3002</li> </ul> </li> <li> <p>\u6570\u636e\u6062\u590d\u4e0e\u4e00\u81f4\u6027\uff1a</p> <ul> <li>\u6570\u636e\u5e93\u4f5c\u4e3a\u6700\u7ec8\u7684\u6570\u636e\u6e90\u3002\u5982\u679c Redis \u53d1\u751f\u6545\u969c\u6216\u6570\u636e\u4e22\u5931\uff0c\u53ef\u4ee5\u901a\u8fc7\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u91cd\u5efa\u6574\u4e2a\u6216\u90e8\u5206\u7684\u6392\u884c\u699c\u3002</li> <li>\u53ef\u4ee5\u5b9a\u671f\uff08\u4f8b\u5982\u6bcf\u5929\u51cc\u6668\uff09\u8fdb\u884c\u6570\u636e\u6821\u51c6\uff0c\u4ee5\u786e\u4fdd Redis \u4e2d\u7684\u6570\u636e\u4e0e\u6570\u636e\u5e93\u4e2d\u7684\u6838\u5fc3\u6570\u636e\u4fdd\u6301\u6700\u7ec8\u4e00\u81f4\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E6%8E%92%E8%A1%8C%E6%A6%9C%E5%8A%9F%E8%83%BD%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0/#_2","title":"\u5b9e\u73b0","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E6%8E%92%E8%A1%8C%E6%A6%9C%E5%8A%9F%E8%83%BD%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0/#1-redis-sorted-set","title":"1. Redis Sorted Set \u7684\u8bbe\u8ba1\u4e0e\u4f7f\u7528","text":"<p>Redis \u7684 Sorted Set \u662f\u5b9e\u73b0\u5b9e\u65f6\u6392\u884c\u699c\u7684\u6838\u5fc3\u3002 \u6211\u4eec\u901a\u5e38\u4f1a\u4e3a\u4e0d\u540c\u7684\u6392\u884c\u699c\u8bbe\u7f6e\u4e0d\u540c\u7684 key\u3002</p> <p>\u547d\u540d\u89c4\u8303\uff1a\u4e3a\u4e86\u652f\u6301\u591a\u79cd\u7c7b\u578b\u7684\u6392\u884c\u699c\uff08\u5982\u65e5\u699c\u3001\u5468\u699c\u3001\u603b\u699c\uff09\uff0ckey \u7684\u547d\u540d\u81f3\u5173\u91cd\u8981\u3002\u4f8b\u5982\uff1a *   <code>leaderboard:daily:2025-09-03</code> *   <code>leaderboard:weekly:2025-W36</code> *   <code>leaderboard:global</code></p> <p>\u5e38\u7528 Redis \u547d\u4ee4\uff1a</p> <ul> <li> <p>\u66f4\u65b0\u7528\u6237\u5206\u6570 <code>ZADD</code>:</p> <ul> <li><code>ZADD leaderboard:global 1000 \"user:123\"</code></li> <li>\u6b64\u547d\u4ee4\u4f1a\u5c06 \"user:123\" \u7684\u5206\u6570\u66f4\u65b0\u4e3a 1000\u3002\u5982\u679c\u8be5\u7528\u6237\u5df2\u5b58\u5728\uff0c\u5219\u66f4\u65b0\u5176\u5206\u6570\uff1b\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u5219\u6dfb\u52a0\u8be5\u7528\u6237\u3002</li> </ul> </li> <li> <p>\u589e\u52a0\u7528\u6237\u5206\u6570 <code>ZINCRBY</code>:</p> <ul> <li><code>ZINCRBY leaderboard:global 50 \"user:123\"</code></li> <li>\u6b64\u547d\u4ee4\u4f1a\u7ed9 \"user:123\" \u7684\u5206\u6570\u589e\u52a0 50\u3002</li> </ul> </li> <li> <p>\u83b7\u53d6\u6392\u540d\u524d N \u7684\u7528\u6237 <code>ZREVRANGE</code>:</p> <ul> <li><code>ZREVRANGE leaderboard:global 0 9 WITHSCORES</code></li> <li>\u6b64\u547d\u4ee4\u4f1a\u8fd4\u56de\u5206\u6570\u6700\u9ad8\u7684\u524d 10 \u540d\u7528\u6237\u53ca\u5176\u5206\u6570\uff08\u4ece\u9ad8\u5230\u4f4e\u6392\u5e8f\uff09\u3002</li> </ul> </li> <li> <p>\u83b7\u53d6\u7528\u6237\u7684\u6392\u540d <code>ZREVRANK</code>:</p> <ul> <li><code>ZREVRANK leaderboard:global \"user:123\"</code></li> <li>\u6b64\u547d\u4ee4\u8fd4\u56de\u6307\u5b9a\u7528\u6237\u5728\u6392\u884c\u699c\u4e2d\u7684\u6392\u540d\uff08\u4ece 0 \u5f00\u59cb\uff0c\u5206\u6570\u8d8a\u9ad8\u6392\u540d\u8d8a\u9760\u524d\uff09\u3002</li> </ul> </li> <li> <p>\u83b7\u53d6\u7528\u6237\u7684\u5206\u6570 <code>ZSCORE</code>:</p> <ul> <li><code>ZSCORE leaderboard:global \"user:123\"</code></li> <li>\u6b64\u547d\u4ee4\u8fd4\u56de\u6307\u5b9a\u7528\u6237\u7684\u5206\u6570\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E6%8E%92%E8%A1%8C%E6%A6%9C%E5%8A%9F%E8%83%BD%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0/#2-schema","title":"2. \u6570\u636e\u5e93\u7684 Schema \u8bbe\u8ba1","text":"<p>\u6570\u636e\u5e93\u7684\u8bbe\u8ba1\u9700\u8981\u8003\u8651\u5230\u6570\u636e\u7684\u6301\u4e45\u5316\u548c\u672a\u6765\u7684\u6269\u5c55\u6027\u3002\u53ef\u4ee5\u8bbe\u8ba1\u5982\u4e0b\u51e0\u5f20\u8868\uff1a</p> <ul> <li> <p><code>users</code> \u8868: \u5b58\u50a8\u7528\u6237\u4fe1\u606f\u3002     <code>sql     CREATE TABLE users (         user_id INT PRIMARY KEY AUTO_INCREMENT,         username VARCHAR(50) UNIQUE,         -- \u5176\u4ed6\u7528\u6237\u4fe1\u606f     );</code></p> </li> <li> <p><code>scores</code> \u8868: \u5b58\u50a8\u6bcf\u4e00\u6b21\u7684\u5206\u6570\u53d8\u66f4\u8bb0\u5f55\u3002     <code>sql     CREATE TABLE scores (         score_id BIGINT PRIMARY KEY AUTO_INCREMENT,         user_id INT,         score_change INT,         created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,         -- \u5176\u4ed6\u76f8\u5173\u4fe1\u606f\uff0c\u5982\u6765\u6e90\u3001\u7c7b\u578b\u7b49         FOREIGN KEY (user_id) REFERENCES users(user_id)     );</code></p> </li> <li> <p><code>leaderboard_summary</code> \u8868: \u5b58\u50a8\u7528\u6237\u7684\u603b\u5206\u548c\u6700\u540e\u66f4\u65b0\u65f6\u95f4\uff0c\u7528\u4e8e\u6570\u636e\u6062\u590d\u548c\u4e00\u81f4\u6027\u6821\u9a8c\u3002     <code>sql     CREATE TABLE leaderboard_summary (         user_id INT PRIMARY KEY,         total_score BIGINT,         last_updated_at TIMESTAMP,         FOREIGN KEY (user_id) REFERENCES users(user_id)     );</code></p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E6%8E%92%E8%A1%8C%E6%A6%9C%E5%8A%9F%E8%83%BD%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0/#3","title":"3. \u6570\u636e\u540c\u6b65\u7b56\u7565","text":"<p>\u786e\u4fdd Redis \u548c\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u6570\u636e\u540c\u6b65\u662f\u8be5\u67b6\u6784\u7684\u5173\u952e\u3002\u4ee5\u4e0b\u662f\u51e0\u79cd\u5e38\u89c1\u7684\u540c\u6b65\u7b56\u7565\uff1a</p> <ul> <li> <p>\u53cc\u5199\u6a21\u5f0f (Dual Write)\uff1a</p> <ul> <li>\u6d41\u7a0b\uff1a\u5e94\u7528\u7a0b\u5e8f\u5728\u66f4\u65b0\u5206\u6570\u65f6\uff0c\u5148\u5199 Redis\uff0c\u6210\u529f\u540e\u518d\u5199\u6570\u636e\u5e93\u3002</li> <li>\u4f18\u70b9\uff1a\u5b9e\u73b0\u7b80\u5355\uff0c\u5b9e\u65f6\u6027\u9ad8\u3002</li> <li>\u7f3a\u70b9\uff1a\u5b58\u5728\u6570\u636e\u4e0d\u4e00\u81f4\u7684\u98ce\u9669\u3002\u4f8b\u5982\uff0c\u5199 Redis \u6210\u529f\uff0c\u4f46\u5199\u6570\u636e\u5e93\u5931\u8d25\uff0c\u4f1a\u5bfc\u81f4 Redis \u4e2d\u7684\u662f\u65b0\u6570\u636e\uff0c\u800c\u6570\u636e\u5e93\u4e2d\u662f\u65e7\u6570\u636e\u3002\u8fd9\u4f1a\u7ed9\u7cfb\u7edf\u5e26\u6765\u989d\u5916\u7684\u590d\u6742\u6027\uff0c\u9700\u8981\u5f15\u5165\u91cd\u8bd5\u6216\u8865\u507f\u673a\u5236\u3002</li> </ul> </li> <li> <p>\u5199\u540e\u6a21\u5f0f (Write-Behind Caching)\uff1a</p> <ul> <li>\u6d41\u7a0b\uff1a\u5e94\u7528\u7a0b\u5e8f\u53ea\u7ba1\u5199\u5165 Redis\uff0c\u7136\u540e\u901a\u8fc7\u6d88\u606f\u961f\u5217\u5f02\u6b65\u5730\u5c06\u6570\u636e\u5199\u5165\u6570\u636e\u5e93\u3002</li> <li>\u4f18\u70b9\uff1a\u5199\u5165\u6027\u80fd\u9ad8\uff0c\u4e3b\u6d41\u7a0b\u4e0e\u6570\u636e\u5e93\u89e3\u8026\uff0c\u53ef\u9760\u6027\u5f3a\u3002\u5373\u4f7f\u6570\u636e\u5e93\u6682\u65f6\u4e0d\u53ef\u7528\uff0c\u53ea\u8981\u6d88\u606f\u961f\u5217\u6b63\u5e38\uff0c\u6570\u636e\u5c31\u4e0d\u4f1a\u4e22\u5931\u3002</li> <li>\u7f3a\u70b9\uff1a\u6570\u636e\u5728 Redis \u548c\u6570\u636e\u5e93\u4e4b\u95f4\u5b58\u5728\u77ed\u6682\u7684\u4e0d\u4e00\u81f4\u3002\u5bf9\u4e8e\u5927\u591a\u6570\u6392\u884c\u699c\u573a\u666f\uff0c\u8fd9\u79cd\u6700\u7ec8\u4e00\u81f4\u6027\u662f\u53ef\u4ee5\u63a5\u53d7\u7684\u3002</li> </ul> </li> </ul> <p>\u63a8\u8350\u91c7\u7528\u201c\u5199\u540e\u6a21\u5f0f\u201d\uff0c\u56e0\u4e3a\u5b83\u5728\u6027\u80fd\u3001\u53ef\u9760\u6027\u548c\u7cfb\u7edf\u89e3\u8026\u65b9\u9762\u90fd\u8868\u73b0\u66f4\u4f18\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E6%8E%92%E8%A1%8C%E6%A6%9C%E5%8A%9F%E8%83%BD%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0/#4","title":"4. \u5904\u7406\u7279\u6b8a\u573a\u666f","text":"<ul> <li> <p>\u540c\u5206\u5904\u7406\uff08Tie-Breaking\uff09\uff1a</p> <ul> <li>Redis \u7684 Sorted Set \u5728\u5206\u6570\u76f8\u540c\u65f6\uff0c\u4f1a\u6309\u7167\u6210\u5458\u7684\u5b57\u5178\u5e8f\u8fdb\u884c\u6392\u5e8f\u3002</li> <li>\u5982\u679c\u9700\u8981\u81ea\u5b9a\u4e49\u540c\u5206\u89c4\u5219\uff08\u4f8b\u5982\uff0c\u5148\u8fbe\u5230\u8be5\u5206\u6570\u8005\u6392\u540d\u9760\u524d\uff09\uff0c\u53ef\u4ee5\u5728\u5206\u6570\u4e0a\u505a\u4e00\u4e9b\u201c\u624b\u811a\u201d\u3002\u4e00\u4e2a\u5e38\u89c1\u7684\u505a\u6cd5\u662f\u5c06\u65f6\u95f4\u6233\u4f5c\u4e3a\u4e00\u4e2a\u5c0f\u6570\u90e8\u5206\u9644\u52a0\u5230\u5206\u6570\u4e0a\u3002\u4f8b\u5982\uff0c\u5206\u6570\u4e3a <code>score</code>\uff0c\u65f6\u95f4\u6233\u4e3a <code>timestamp</code>\uff0c\u90a3\u4e48\u5b58\u5165 Redis \u7684\u6700\u7ec8\u5206\u6570\u53ef\u4ee5\u4e3a <code>score.timestamp</code>\u3002\u7531\u4e8e\u65f6\u95f4\u6233\u662f\u9012\u589e\u7684\uff0c\u6240\u4ee5\u53ef\u4ee5\u5b9e\u73b0\u5148\u5230\u5148\u5f97\u7684\u6392\u5e8f\u89c4\u5219\u3002</li> </ul> </li> <li> <p>\u6570\u636e\u6062\u590d\uff1a</p> <ul> <li>\u5982\u679c Redis \u5b9e\u4f8b\u56e0\u6545\u5b95\u673a\u4e14\u6570\u636e\u65e0\u6cd5\u6062\u590d\uff0c\u53ef\u4ee5\u7f16\u5199\u4e00\u4e2a\u811a\u672c\uff0c\u4ece\u6570\u636e\u5e93\u7684 <code>leaderboard_summary</code> \u8868\u4e2d\u8bfb\u53d6\u6240\u6709\u7528\u6237\u7684\u603b\u5206\uff0c\u7136\u540e\u4f7f\u7528 <code>ZADD</code> \u547d\u4ee4\u6279\u91cf\u91cd\u5efa Redis \u4e2d\u7684 Sorted Set\u3002</li> </ul> </li> <li> <p>\u83b7\u53d6\u7528\u6237\u5468\u8fb9\u7684\u6392\u540d\uff1a</p> <ul> <li>\u8fd9\u662f\u4e00\u4e2a\u5e38\u89c1\u7684\u9700\u6c42\uff0c\u4f8b\u5982\u663e\u793a\u7528\u6237\u524d\u540e\u5404 5 \u540d\u7684\u73a9\u5bb6\u3002\u53ef\u4ee5\u901a\u8fc7\u5148\u7528 <code>ZREVRANK</code> \u83b7\u53d6\u7528\u6237\u7684\u6392\u540d <code>rank</code>\uff0c\u7136\u540e\u8ba1\u7b97\u51fa\u8d77\u59cb\u548c\u7ed3\u675f\u4f4d\u7f6e\uff08\u5982 <code>rank-5</code> \u548c <code>rank+5</code>\uff09\uff0c\u518d\u4f7f\u7528 <code>ZREVRANGE</code> \u6765\u83b7\u53d6\u8fd9\u4e2a\u533a\u95f4\u7684\u7528\u6237\u5217\u8868\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E6%9C%89a%2C%20b%E4%B8%A4%E4%B8%AA%E6%96%87%E4%BB%B6%EF%BC%8C%E5%88%86%E5%88%AB%E5%AD%98%E6%94%BE10%E4%BA%BF%E6%9D%A1%E5%B7%A6%E5%8F%B3%E7%9A%84URL%EF%BC%8C%E6%AF%8F%E4%B8%AAURL%E5%A4%A7%E6%A6%82%E6%98%AF64B%2C%20%E8%AF%B7%E6%89%BE%E5%87%BAa%2C%20b%E4%B8%A4%E4%B8%AA%E6%96%87%E4%BB%B6%E5%85%B1%E5%90%8C%E7%9A%84URL%EF%BC%8C%E6%9C%BA%E5%99%A8%E7%9A%84%E5%86%85%E5%AD%98%E9%99%90%E5%88%B6%E6%98%AF1G/","title":"\u6709a, b\u4e24\u4e2a\u6587\u4ef6\uff0c\u5206\u522b\u5b58\u653e10\u4ebf\u6761\u5de6\u53f3\u7684URL\uff0c\u6bcf\u4e2aURL\u5927\u6982\u662f64B, \u8bf7\u627e\u51faa, b\u4e24\u4e2a\u6587\u4ef6\u5171\u540c\u7684URL\uff0c\u673a\u5668\u7684\u5185\u5b58\u9650\u5236\u662f1G","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E6%9C%89a%2C%20b%E4%B8%A4%E4%B8%AA%E6%96%87%E4%BB%B6%EF%BC%8C%E5%88%86%E5%88%AB%E5%AD%98%E6%94%BE10%E4%BA%BF%E6%9D%A1%E5%B7%A6%E5%8F%B3%E7%9A%84URL%EF%BC%8C%E6%AF%8F%E4%B8%AAURL%E5%A4%A7%E6%A6%82%E6%98%AF64B%2C%20%E8%AF%B7%E6%89%BE%E5%87%BAa%2C%20b%E4%B8%A4%E4%B8%AA%E6%96%87%E4%BB%B6%E5%85%B1%E5%90%8C%E7%9A%84URL%EF%BC%8C%E6%9C%BA%E5%99%A8%E7%9A%84%E5%86%85%E5%AD%98%E9%99%90%E5%88%B6%E6%98%AF1G/#_1","title":"\u54c8\u5e0c\u5206\u6cbb\u6cd5","text":"<p>\u8be5\u65b9\u6cd5\u7684\u6838\u5fc3\u601d\u60f3\u662f\u5c06\u5927\u6587\u4ef6\u5206\u5272\u6210\u82e5\u5e72\u5c0f\u6587\u4ef6\uff0c\u786e\u4fdd\u6bcf\u4e2a\u5c0f\u6587\u4ef6\u53ef\u4ee5\u5728\u5185\u5b58\u4e2d\u5904\u7406\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E6%9C%89a%2C%20b%E4%B8%A4%E4%B8%AA%E6%96%87%E4%BB%B6%EF%BC%8C%E5%88%86%E5%88%AB%E5%AD%98%E6%94%BE10%E4%BA%BF%E6%9D%A1%E5%B7%A6%E5%8F%B3%E7%9A%84URL%EF%BC%8C%E6%AF%8F%E4%B8%AAURL%E5%A4%A7%E6%A6%82%E6%98%AF64B%2C%20%E8%AF%B7%E6%89%BE%E5%87%BAa%2C%20b%E4%B8%A4%E4%B8%AA%E6%96%87%E4%BB%B6%E5%85%B1%E5%90%8C%E7%9A%84URL%EF%BC%8C%E6%9C%BA%E5%99%A8%E7%9A%84%E5%86%85%E5%AD%98%E9%99%90%E5%88%B6%E6%98%AF1G/#partitioning","title":"\u6b65\u9aa4\u4e00\uff1a\u6587\u4ef6\u5206\u533a (Partitioning)","text":"<ol> <li> <p>\u786e\u5b9a\u5206\u533a\u6570\u91cf (N):</p> <ul> <li>\u6bcf\u4e2a\u6587\u4ef6\u7ea664GB\u3002\u6211\u4eec\u5e0c\u671b\u6bcf\u4e2a\u5206\u533a\u6587\u4ef6\u7684\u5927\u5c0f\u80fd\u591f\u8f7b\u677e\u88c5\u5165\u5185\u5b58\uff0c\u5e76\u7559\u6709\u4f59\u91cf\u7ed9\u54c8\u5e0c\u8868\u7684\u5f00\u9500\u3002</li> <li>\u5982\u679c\u6bcf\u4e2a\u5206\u533a\u6587\u4ef6\u5927\u5c0f\u4e3a\u7ea6250MB\uff0c\u90a3\u4e48\u4e00\u4e2aPython <code>set</code> \u7ed3\u6784\u5b58\u50a8\u8fd9\u4e9bURL\uff0c\u52a0\u4e0a\u5176\u5185\u90e8\u5f00\u9500\uff0c\u5e94\u8be5\u80fd\u63a7\u5236\u57281GB\u5185\u5b58\u9650\u5236\u5185\u3002</li> <li>\u6240\u9700\u7684\u6700\u5c0f\u5206\u533a\u6570\u91cf N = 64GB / 250MB = 256\u3002</li> <li>\u9009\u62e9\u4e00\u4e2a2\u7684\u5e42\u6b21\u4f5c\u4e3aN\uff08\u4f8b\u5982256\u6216512\uff09\u901a\u5e38\u6709\u52a9\u4e8e\u54c8\u5e0c\u5747\u5300\u5206\u5e03\u3002\u6211\u4eec\u9009\u62e9 N = 256\u3002\u8fd9\u610f\u5473\u7740\u6bcf\u4e2a\u5206\u533a\u5c06\u5305\u542b\u5927\u7ea6 10\u4ebf / 256 \u2248 390\u4e07\u6761URL\u3002</li> </ul> </li> <li> <p>\u521b\u5efa\u5206\u533a\u6587\u4ef6:</p> <ul> <li>\u4e3a\u6587\u4ef6a\u521b\u5efa256\u4e2a\u5b50\u6587\u4ef6\uff1a<code>a_part_0</code>, <code>a_part_1</code>, ..., <code>a_part_255</code>\u3002</li> <li>\u4e3a\u6587\u4ef6b\u521b\u5efa256\u4e2a\u5b50\u6587\u4ef6\uff1a<code>b_part_0</code>, <code>b_part_1</code>, ..., <code>b_part_255</code>\u3002</li> <li>\u5c06\u8fd9\u4e9b\u6587\u4ef6\u5206\u522b\u5b58\u653e\u5728\u4e24\u4e2a\u4e0d\u540c\u7684\u4e34\u65f6\u76ee\u5f55\u4e0b\uff08\u4f8b\u5982<code>temp_a/</code>\u548c<code>temp_b/</code>\uff09\u3002</li> </ul> </li> <li> <p>\u5904\u7406\u6587\u4ef6a:</p> <ul> <li>\u6253\u5f00\u6587\u4ef6a\uff0c\u9010\u884c\u8bfb\u53d6URL\u3002</li> <li>\u5bf9\u4e8e\u6bcf\u4e00\u6761URL\uff0c\u8ba1\u7b97\u5176\u54c8\u5e0c\u503c\uff1a<code>hash_value = hash(URL)</code>\u3002\u4e3a\u4e86\u66f4\u597d\u7684\u54c8\u5e0c\u5206\u5e03\u548c\u8de8\u7cfb\u7edf\u4e00\u81f4\u6027\uff0c\u53ef\u4ee5\u4f7f\u7528\u5982 <code>fnv1a</code> \u6216 <code>murmur3</code> \u7b49\u901a\u7528\u54c8\u5e0c\u7b97\u6cd5\uff0c\u6216\u8005\u7b80\u5355\u5730\u4f7f\u7528 <code>abs(hash(URL))</code> \u5e76\u53d6\u6a21\u3002</li> <li>\u6839\u636e\u54c8\u5e0c\u503c\u786e\u5b9a\u5206\u533a\u7d22\u5f15\uff1a<code>partition_index = hash_value % N</code>\u3002</li> <li>\u5c06\u8be5URL\u5199\u5165\u5bf9\u5e94\u7684\u5206\u533a\u6587\u4ef6 <code>a_part_partition_index</code>\u3002</li> <li>\u4e3a\u4e86\u63d0\u9ad8\u6548\u7387\uff0c\u53ef\u4ee5\u4f7f\u7528\u7f13\u51b2\u5199\u5165\uff0c\u5373\u5148\u6536\u96c6\u4e00\u5b9a\u6570\u91cf\u7684URL\u518d\u6279\u91cf\u5199\u5165\u6587\u4ef6\u3002</li> </ul> </li> <li> <p>\u5904\u7406\u6587\u4ef6b:</p> <ul> <li>\u4ee5\u4e0e\u5904\u7406\u6587\u4ef6a\u76f8\u540c\u7684\u65b9\u5f0f\u5904\u7406\u6587\u4ef6b\u3002\u52a1\u5fc5\u4f7f\u7528\u76f8\u540c\u7684\u54c8\u5e0c\u51fd\u6570\u548c\u5206\u533a\u6570\u91cfN\uff0c\u5c06URL\u5199\u5165\u5bf9\u5e94\u7684\u5206\u533a\u6587\u4ef6 <code>b_part_partition_index</code>\u3002</li> <li>\u8fd9\u6837\uff0c\u5982\u679c\u4e00\u4e2aURL\u540c\u65f6\u5b58\u5728\u4e8e\u6587\u4ef6a\u548c\u6587\u4ef6b\u4e2d\uff0c\u5b83\u6700\u7ec8\u4f1a\u843d\u5165\u76f8\u540c\u7684\u5206\u533a\u7d22\u5f15 <code>i</code>\uff0c\u5373\u540c\u65f6\u51fa\u73b0\u5728 <code>a_part_i</code> \u548c <code>b_part_i</code> \u4e2d\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E6%9C%89a%2C%20b%E4%B8%A4%E4%B8%AA%E6%96%87%E4%BB%B6%EF%BC%8C%E5%88%86%E5%88%AB%E5%AD%98%E6%94%BE10%E4%BA%BF%E6%9D%A1%E5%B7%A6%E5%8F%B3%E7%9A%84URL%EF%BC%8C%E6%AF%8F%E4%B8%AAURL%E5%A4%A7%E6%A6%82%E6%98%AF64B%2C%20%E8%AF%B7%E6%89%BE%E5%87%BAa%2C%20b%E4%B8%A4%E4%B8%AA%E6%96%87%E4%BB%B6%E5%85%B1%E5%90%8C%E7%9A%84URL%EF%BC%8C%E6%9C%BA%E5%99%A8%E7%9A%84%E5%86%85%E5%AD%98%E9%99%90%E5%88%B6%E6%98%AF1G/#url-finding-intersections","title":"\u6b65\u9aa4\u4e8c\uff1a\u67e5\u627e\u5171\u540cURL (Finding Intersections)","text":"<ol> <li>\u9010\u4e2a\u5904\u7406\u5206\u533a\u5bf9:<ul> <li> <p>\u904d\u5386 <code>i</code> \u4ece 0 \u5230 <code>N-1</code>\uff1a</p> <ul> <li> <p>\u52a0\u8f7d <code>a_part_i</code> \u5230\u5185\u5b58:</p> <ul> <li>\u521b\u5efa\u4e00\u4e2a\u7a7a\u7684\u54c8\u5e0c\u96c6\u5408\uff08\u4f8b\u5982Python\u7684 <code>set</code>\uff09\u3002</li> <li>\u6253\u5f00 <code>a_part_i</code> \u6587\u4ef6\uff0c\u9010\u884c\u8bfb\u53d6\u6240\u6709URL\uff0c\u5e76\u5c06\u5b83\u4eec\u6dfb\u52a0\u5230\u54c8\u5e0c\u96c6\u5408\u4e2d\u3002</li> <li>\u7531\u4e8e\u6bcf\u4e2a\u5206\u533a\u6587\u4ef6\u7ea6250MB\uff0c\u5c06\u5176URL\u52a0\u8f7d\u5230\u54c8\u5e0c\u96c6\u5408\u4e2d\uff08\u5373\u4f7f\u8003\u8651\u54c8\u5e0c\u8868\u5f00\u9500\uff0c\u901a\u5e38\u4f1a\u5360\u7528\u539f\u59cb\u6570\u636e2-4\u500d\u7684\u5185\u5b58\uff09\u5e94\u8be5\u80fd\u63a7\u5236\u57281GB\u5185\u5b58\u9650\u5236\u5185\u3002</li> </ul> </li> <li> <p>\u5904\u7406 <code>b_part_i</code>:</p> <ul> <li>\u6253\u5f00 <code>b_part_i</code> \u6587\u4ef6\u3002</li> <li>\u521b\u5efa\u4e00\u4e2a\u7ed3\u679c\u6587\u4ef6\uff08\u4f8b\u5982 <code>common_urls.txt</code>\uff09\uff0c\u6216\u4ee5\u8ffd\u52a0\u6a21\u5f0f\u6253\u5f00\u4e00\u4e2a\u603b\u7684\u7ed3\u679c\u6587\u4ef6\u3002</li> <li>\u9010\u884c\u8bfb\u53d6 <code>b_part_i</code> \u4e2d\u7684URL\u3002</li> <li>\u5bf9\u4e8e <code>b_part_i</code> \u4e2d\u7684\u6bcf\u6761URL\uff0c\u68c0\u67e5\u5b83\u662f\u5426\u5728\u521a\u624d\u52a0\u8f7d\u5230\u5185\u5b58\u7684\u54c8\u5e0c\u96c6\u5408\u4e2d\uff08\u5373 <code>URL in hash_set_from_a_part_i</code>\uff09\u3002</li> <li>\u5982\u679c\u5b58\u5728\uff0c\u5219\u8bf4\u660e\u8fd9\u662f\u4e00\u4e2a\u5171\u540c\u7684URL\uff0c\u5c06\u5176\u5199\u5165 <code>common_urls.txt</code>\u3002</li> </ul> </li> <li> <p>\u6e05\u7406:</p> <ul> <li>\u6e05\u7a7a\u5f53\u524d\u7684\u54c8\u5e0c\u96c6\u5408\uff0c\u91ca\u653e\u5185\u5b58\uff0c\u4e3a\u5904\u7406\u4e0b\u4e00\u4e2a\u5206\u533a\u5bf9\u505a\u51c6\u5907\u3002</li> <li>\u5173\u95ed\u6240\u6709\u6253\u5f00\u7684\u6587\u4ef6\u53e5\u67c4\u3002</li> </ul> </li> </ul> </li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E6%9C%89a%2C%20b%E4%B8%A4%E4%B8%AA%E6%96%87%E4%BB%B6%EF%BC%8C%E5%88%86%E5%88%AB%E5%AD%98%E6%94%BE10%E4%BA%BF%E6%9D%A1%E5%B7%A6%E5%8F%B3%E7%9A%84URL%EF%BC%8C%E6%AF%8F%E4%B8%AAURL%E5%A4%A7%E6%A6%82%E6%98%AF64B%2C%20%E8%AF%B7%E6%89%BE%E5%87%BAa%2C%20b%E4%B8%A4%E4%B8%AA%E6%96%87%E4%BB%B6%E5%85%B1%E5%90%8C%E7%9A%84URL%EF%BC%8C%E6%9C%BA%E5%99%A8%E7%9A%84%E5%86%85%E5%AD%98%E9%99%90%E5%88%B6%E6%98%AF1G/#_2","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ul> <li>\u5185\u5b58\u7ba1\u7406: \u5173\u952e\u5728\u4e8e\u786e\u4fdd\u5728\u6b65\u9aa4\u4e8c\u4e2d\uff0c\u4efb\u4f55\u65f6\u523b\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u7684\u5355\u4e2a\u54c8\u5e0c\u96c6\u5408\u4e0d\u4f1a\u8d85\u8fc71GB\u3002\u901a\u8fc7\u5408\u7406\u9009\u62e9N\u503c\uff0c\u53ef\u4ee5\u63a7\u5236\u6bcf\u4e2a\u5206\u533a\u7684\u5927\u5c0f\u3002\u5982\u679cN=256\u7684\u5206\u533a\u5728\u5185\u5b58\u4e2d\u4f9d\u7136\u7d27\u5f20\uff0c\u53ef\u4ee5\u589e\u52a0N\u5230512\uff0c\u6bcf\u4e2a\u5206\u533a\u6587\u4ef6\u5927\u5c0f\u4f1a\u51cf\u534a\u81f3125MB\uff0c\u5185\u5b58\u538b\u529b\u4f1a\u5927\u5927\u964d\u4f4e\u3002</li> <li>\u54c8\u5e0c\u51fd\u6570: \u9009\u62e9\u4e00\u4e2a\u80fd\u5747\u5300\u5206\u5e03URL\u7684\u54c8\u5e0c\u51fd\u6570\u81f3\u5173\u91cd\u8981\uff0c\u4ee5\u907f\u514d\u67d0\u4e9b\u5206\u533a\u6587\u4ef6\u8fc7\u5927\uff0c\u5bfc\u81f4\u5185\u5b58\u6ea2\u51fa\u3002</li> <li>I/O \u6027\u80fd: \u5927\u91cf\u7684\u6587\u4ef6\u8bfb\u5199\u64cd\u4f5c\u53ef\u80fd\u4f1a\u6210\u4e3a\u74f6\u9888\u3002\u4f7f\u7528\u6587\u4ef6\u7f13\u51b2\uff08buffered I/O\uff09\u53ef\u4ee5\u63d0\u9ad8\u6548\u7387\u3002</li> <li>\u4e34\u65f6\u6587\u4ef6: \u8fd9\u4e2a\u65b9\u6cd5\u4f1a\u4ea7\u751f <code>2 * N</code> \u4e2a\u4e34\u65f6\u6587\u4ef6\u3002\u5728\u5904\u7406\u5b8c\u6210\u540e\uff0c\u8fd9\u4e9b\u4e34\u65f6\u6587\u4ef6\u53ef\u4ee5\u5220\u9664\u4ee5\u91ca\u653e\u78c1\u76d8\u7a7a\u95f4\u3002</li> <li>\u5065\u58ee\u6027: \u5728\u5b9e\u9645\u5b9e\u73b0\u4e2d\uff0c\u9700\u8981\u8003\u8651\u6587\u4ef6\u6253\u5f00\u5931\u8d25\u3001\u8bfb\u5199\u9519\u8bef\u7b49\u5f02\u5e38\u60c5\u51b5\uff0c\u5e76\u8fdb\u884c\u9002\u5f53\u7684\u9519\u8bef\u5904\u7406\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E8%8B%A5%E7%BC%93%E5%AD%98%E6%95%B0%E6%8D%AE%E4%B8%A2%E5%A4%B1%EF%BC%8C%E6%9C%89%E5%93%AA%E4%BA%9B%E5%BA%94%E5%AF%B9%E6%96%B9%E6%A1%88/","title":"\u82e5\u7f13\u5b58\u6570\u636e\u4e22\u5931\uff0c\u6709\u54ea\u4e9b\u5e94\u5bf9\u65b9\u6848","text":"<p>\u7f13\u5b58\u6570\u636e\u4e22\u5931\u7684\u51e0\u79cd\u5178\u578b\u573a\u666f\uff1a</p> <ol> <li>\u5e38\u89c4\u5931\u6548\uff1a\u7f13\u5b58\u6570\u636e\u7531\u4e8e\u8fbe\u5230\u8bbe\u7f6e\u7684\u8fc7\u671f\u65f6\u95f4\uff08TTL/TTI\uff09\u800c\u88ab\u6b63\u5e38\u6dd8\u6c70\u3002</li> <li>\u5185\u5b58\u6dd8\u6c70\uff1a\u7f13\u5b58\u56e0\u5185\u5b58\u7a7a\u95f4\u4e0d\u8db3\uff0c\u6839\u636e\u6dd8\u6c70\u7b56\u7565\uff08\u5982LRU, LFU\uff09\u6e05\u9664\u4e86\u90e8\u5206\u6570\u636e\u3002</li> <li>\u670d\u52a1\u6545\u969c\uff1a\u7f13\u5b58\u8282\u70b9\u6216\u6574\u4e2a\u96c6\u7fa4\u53d1\u751f\u6545\u969c\u3001\u91cd\u542f\uff0c\u5bfc\u81f4\u5185\u5b58\u4e2d\u7684\u6570\u636e\u5168\u90e8\u4e22\u5931\u3002</li> <li>\u4eba\u4e3a\u6216\u7a0b\u5e8f\u9519\u8bef\uff1a\u9519\u8bef\u7684\u64cd\u4f5c\uff08\u5982<code>FLUSHALL</code>\uff09\u6216\u7a0b\u5e8fBUG\u5bfc\u81f4\u6570\u636e\u88ab\u8bef\u5220\u9664\u3002</li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E8%8B%A5%E7%BC%93%E5%AD%98%E6%95%B0%E6%8D%AE%E4%B8%A2%E5%A4%B1%EF%BC%8C%E6%9C%89%E5%93%AA%E4%BA%9B%E5%BA%94%E5%AF%B9%E6%96%B9%E6%A1%88/#_1","title":"\u6838\u5fc3\u5e94\u5bf9\u65b9\u6848\uff1a\u65c1\u8def\u7f13\u5b58","text":"<p>\u8fd9\u662f\u6700\u57fa\u7840\u4e5f\u662f\u6700\u6838\u5fc3\u7684\u5e94\u5bf9\u7b56\u7565\uff0c\u5373\u7ecf\u5178\u7684\u201c\u65c1\u8def\u7f13\u5b58\u6a21\u5f0f\u201d\u3002\u5f53\u7f13\u5b58\u6570\u636e\u4e22\u5931\u65f6\uff0c\u7cfb\u7edf\u80fd\u591f\u81ea\u52a8\u4ece\u540e\u7aef\u6570\u636e\u6e90\uff08\u901a\u5e38\u662f\u6570\u636e\u5e93\uff09\u6062\u590d\u6570\u636e\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E8%8B%A5%E7%BC%93%E5%AD%98%E6%95%B0%E6%8D%AE%E4%B8%A2%E5%A4%B1%EF%BC%8C%E6%9C%89%E5%93%AA%E4%BA%9B%E5%BA%94%E5%AF%B9%E6%96%B9%E6%A1%88/#_2","title":"\u6d41\u7a0b\uff1a","text":"<ol> <li>\u5e94\u7528\u8bf7\u6c42\u6570\u636e\u65f6\uff0c\u9996\u5148\u8bbf\u95ee\u7f13\u5b58\u3002</li> <li>\u5982\u679c\u7f13\u5b58\u5728\uff0c\u5219\u547d\u4e2d\uff08Cache Hit\uff09\uff0c\u76f4\u63a5\u8fd4\u56de\u6570\u636e\u3002</li> <li>\u5982\u679c\u7f13\u5b58\u4e0d\u5728\uff0c\u5219\u672a\u547d\u4e2d\uff08Cache Miss\uff09\uff0c\u6267\u884c\u4ee5\u4e0b\u6b65\u9aa4\uff1a     a.  \u4ece\u540e\u7aef\u6570\u636e\u5e93\u67e5\u8be2\u6570\u636e\u3002     b.  \u5c06\u4ece\u6570\u636e\u5e93\u67e5\u5230\u7684\u6570\u636e\u5199\u56de\uff08Rebuild\uff09\u5230\u7f13\u5b58\u4e2d\u3002\u4e3a\u4e86\u907f\u514d\u65b0\u5199\u5165\u7684\u6570\u636e\u9a6c\u4e0a\u53c8\u88ab\u6dd8\u6c70\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u4e00\u4e2a\u5408\u7406\u7684\u8fc7\u671f\u65f6\u95f4\u3002     c.  \u5c06\u6570\u636e\u8fd4\u56de\u7ed9\u5e94\u7528\u7a0b\u5e8f\u3002</li> </ol> <p>\u8fd9\u4e2a\u6a21\u5f0f\u4fdd\u8bc1\u4e86\u5373\u4f7f\u7f13\u5b58\u4e22\u5931\uff0c\u7cfb\u7edf\u4e5f\u80fd\u901a\u8fc7\u8bbf\u95ee\u6570\u636e\u5e93\u6765\u6b63\u5e38\u5de5\u4f5c\uff0c\u5e76\u4e14\u80fd\u81ea\u52a8\u6062\u590d\u7f13\u5b58\u3002\u4f46\u5b83\u5728\u9ad8\u5e76\u53d1\u573a\u666f\u4e0b\u4f1a\u5f15\u51fa\u66f4\u4e25\u91cd\u7684\u95ee\u9898\uff0c\u9700\u8981\u8fdb\u9636\u65b9\u6848\u6765\u89e3\u51b3\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E8%8B%A5%E7%BC%93%E5%AD%98%E6%95%B0%E6%8D%AE%E4%B8%A2%E5%A4%B1%EF%BC%8C%E6%9C%89%E5%93%AA%E4%BA%9B%E5%BA%94%E5%AF%B9%E6%96%B9%E6%A1%88/#_3","title":"\u89e3\u51b3\u9ad8\u5e76\u53d1\u4e0b\u7684\u6062\u590d\u95ee\u9898","text":"<p>\u5355\u7eaf\u7684Cache-Aside\u6a21\u5f0f\u5728\u9ad8\u5e76\u53d1\u4e0b\uff0c\u5982\u679c\u67d0\u4e2a\u70ed\u70b9\u6570\u636e\u4e22\u5931\uff0c\u4f1a\u5bfc\u81f4\u5927\u91cf\u8bf7\u6c42\u77ac\u95f4\u5168\u90e8\u6253\u5230\u6570\u636e\u5e93\u4e0a\uff0c\u53ef\u80fd\u9020\u6210\u6570\u636e\u5e93\u5d29\u6e83\u3002\u8fd9\u79cd\u60c5\u51b5\u6211\u4eec\u79f0\u4e4b\u4e3a\u201c\u7f13\u5b58\u51fb\u7a7f\u201d\u6216\u201c\u7f13\u5b58\u96ea\u5d29\u201d\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E8%8B%A5%E7%BC%93%E5%AD%98%E6%95%B0%E6%8D%AE%E4%B8%A2%E5%A4%B1%EF%BC%8C%E6%9C%89%E5%93%AA%E4%BA%9B%E5%BA%94%E5%AF%B9%E6%96%B9%E6%A1%88/#1-cache-breakdown-key","title":"1. \u7f13\u5b58\u51fb\u7a7f (Cache Breakdown) - \u9488\u5bf9\u5355\u4e2a\u70ed\u70b9Key","text":"<ul> <li>\u95ee\u9898\uff1a\u4e00\u4e2a\u975e\u5e38\u70ed\u95e8\u7684\u6570\u636ekey\u5728\u67d0\u4e00\u523b\u5931\u6548\uff0c\u5bfc\u81f4\u6d77\u91cf\u5e76\u53d1\u8bf7\u6c42\u540c\u65f6\u8bbf\u95ee\u8fd9\u4e2akey\uff0c\u90fd\u672a\u547d\u4e2d\uff0c\u7ee7\u800c\u5168\u90e8\u6d8c\u5411\u6570\u636e\u5e93\u3002</li> <li>\u5e94\u5bf9\u65b9\u6848\uff1a<ul> <li>\u4e92\u65a5\u9501 (Mutex Lock / Distributed Lock)\uff1a\u5f53\u7f13\u5b58\u672a\u547d\u4e2d\u65f6\uff0c\u4e0d\u662f\u6240\u6709\u8bf7\u6c42\u90fd\u53bb\u67e5\u6570\u636e\u5e93\u3002\u800c\u662f\u5148\u5c1d\u8bd5\u83b7\u53d6\u4e00\u4e2a\u9501\uff08\u5982Redis\u7684<code>SETNX</code>\u6216Zookeeper\u7684\u5206\u5e03\u5f0f\u9501\uff09\u3002<ol> <li>\u53ea\u6709\u7b2c\u4e00\u4e2a\u83b7\u53d6\u5230\u9501\u7684\u7ebf\u7a0b\uff0c\u624d\u6709\u8d44\u683c\u53bb\u67e5\u8be2\u6570\u636e\u5e93\u5e76\u91cd\u5efa\u7f13\u5b58\u3002</li> <li>\u5176\u4ed6\u7ebf\u7a0b\u83b7\u53d6\u9501\u5931\u8d25\u540e\uff0c\u4e0d\u4f1a\u53bb\u67e5\u6570\u636e\u5e93\uff0c\u800c\u662f\u7b49\u5f85\u4e00\u5c0f\u6bb5\u65f6\u95f4\u540e\uff0c\u91cd\u65b0\u5c1d\u8bd5\u4ece\u7f13\u5b58\u4e2d\u83b7\u53d6\u6570\u636e\u3002</li> <li>\u8fd9\u6837\u5c31\u4fdd\u8bc1\u4e86\u53ea\u6709\u4e00\u4e2a\u8bf7\u6c42\u4f1a\u843d\u5230\u6570\u636e\u5e93\u4e0a\uff0c\u4fdd\u62a4\u4e86\u540e\u7aef\u3002</li> </ol> </li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E8%8B%A5%E7%BC%93%E5%AD%98%E6%95%B0%E6%8D%AE%E4%B8%A2%E5%A4%B1%EF%BC%8C%E6%9C%89%E5%93%AA%E4%BA%9B%E5%BA%94%E5%AF%B9%E6%96%B9%E6%A1%88/#2-cache-avalanche-key","title":"2. \u7f13\u5b58\u96ea\u5d29 (Cache Avalanche) - \u9488\u5bf9\u5927\u91cfKey\u540c\u65f6\u5931\u6548","text":"<ul> <li>\u95ee\u9898\uff1a\u7531\u4e8e\u7f13\u5b58\u8282\u70b9\u5b95\u673a\uff0c\u6216\u8005\u5927\u91cfkey\u8bbe\u7f6e\u4e86\u5b8c\u5168\u76f8\u540c\u7684\u8fc7\u671f\u65f6\u95f4\uff0c\u5728\u67d0\u4e00\u65f6\u523b\u540c\u65f6\u5931\u6548\uff0c\u5bfc\u81f4\u6d41\u91cf\u6d2a\u5cf0\u76f4\u63a5\u51b2\u51fb\u6570\u636e\u5e93\u3002</li> <li>\u5e94\u5bf9\u65b9\u6848\uff1a<ul> <li>\u8fc7\u671f\u65f6\u95f4\u6dfb\u52a0\u968f\u673a\u503c\uff1a\u5728\u57fa\u7840\u8fc7\u671f\u65f6\u95f4\u4e0a\u589e\u52a0\u4e00\u4e2a\u968f\u673a\u7684\u504f\u79fb\u91cf\uff08Jitter\uff09\u3002\u4f8b\u5982\uff0c\u539f\u672c10\u5206\u949f\u8fc7\u671f\u7684\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u4e3a<code>10 * 60 + random(300)</code>\u79d2\u3002\u8fd9\u6837\u53ef\u4ee5\u628akey\u7684\u5931\u6548\u65f6\u95f4\u70b9\u5206\u6563\u5f00\uff0c\u907f\u514d\u96c6\u4e2d\u5931\u6548\u3002</li> <li>\u642d\u5efa\u9ad8\u53ef\u7528\u7f13\u5b58\u96c6\u7fa4\uff1a\u4f7f\u7528\u5982Redis Sentinel\uff08\u54e8\u5175\uff09\u6216Redis Cluster\uff08\u96c6\u7fa4\uff09\u6a21\u5f0f\u3002\u5f53\u4e3b\u8282\u70b9\u5b95\u673a\u65f6\uff0c\u53ef\u4ee5\u81ea\u52a8\u8fdb\u884c\u4e3b\u5907\u5207\u6362\uff0c\u867d\u7136\u4f1a\u6709\u77ed\u6682\u7684\u6570\u636e\u4e22\u5931\uff08\u53d6\u51b3\u4e8e\u4e3b\u4ece\u540c\u6b65\u7b56\u7565\uff09\uff0c\u4f46\u80fd\u4fdd\u8bc1\u670d\u52a1\u5feb\u901f\u6062\u590d\uff0c\u907f\u514d\u6574\u4e2a\u7f13\u5b58\u670d\u52a1\u4e0d\u53ef\u7528\u3002</li> <li>\u6570\u636e\u591a\u7ea7\u7f13\u5b58\uff1a\u5728\u5e94\u7528\u5185\u90e8\uff08\u8fdb\u7a0b\u5185\uff09\u4f7f\u7528\u4e00\u5c42\u672c\u5730\u7f13\u5b58\uff08\u5982Caffeine, Guava Cache\uff09\uff0c\u518d\u914d\u5408\u8fdc\u7aef\u7684\u5206\u5e03\u5f0f\u7f13\u5b58\u3002\u5373\u4f7f\u8fdc\u7aef\u7f13\u5b58\u96ea\u5d29\uff0c\u672c\u5730\u7f13\u5b58\u4e5f\u80fd\u9876\u4f4f\u4e00\u90e8\u5206\u6d41\u91cf\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E8%8B%A5%E7%BC%93%E5%AD%98%E6%95%B0%E6%8D%AE%E4%B8%A2%E5%A4%B1%EF%BC%8C%E6%9C%89%E5%93%AA%E4%BA%9B%E5%BA%94%E5%AF%B9%E6%96%B9%E6%A1%88/#3-cache-penetration-","title":"3. \u7f13\u5b58\u7a7f\u900f (Cache Penetration) - \u9488\u5bf9\u67e5\u8be2\u4e0d\u5b58\u5728\u7684\u6570\u636e","text":"<ul> <li>\u95ee\u9898\uff1a\u6076\u610f\u8bf7\u6c42\u6216\u5f02\u5e38\u60c5\u51b5\uff0c\u67e5\u8be2\u4e00\u4e2a\u6570\u636e\u5e93\u91cc\u6839\u672c\u4e0d\u5b58\u5728\u7684\u6570\u636e\u3002\u8fd9\u4f1a\u5bfc\u81f4\u6bcf\u6b21\u8bf7\u6c42\u90fd\u672a\u547d\u4e2d\u7f13\u5b58\uff0c\u6bcf\u6b21\u90fd\u53bb\u67e5\u6570\u636e\u5e93\uff0c\u5e76\u4e14\u6c38\u8fdc\u65e0\u6cd5\u91cd\u5efa\u7f13\u5b58\u3002</li> <li>\u5e94\u5bf9\u65b9\u6848\uff1a<ul> <li>\u7f13\u5b58\u7a7a\u5bf9\u8c61 (Cache Null Values)\uff1a\u5f53\u4ece\u6570\u636e\u5e93\u67e5\u8be2\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684\u6570\u636e\u65f6\uff0c\u4ecd\u7136\u5728\u7f13\u5b58\u4e2d\u4e3a\u8fd9\u4e2akey\u5b58\u5165\u4e00\u4e2a\u7279\u6b8a\u7684\u201c\u7a7a\u503c\u201d\uff08\u6bd4\u5982\u4e00\u4e2a\u56fa\u5b9a\u7684\u5b57\u7b26\u4e32\"null\"\uff09\uff0c\u5e76\u8bbe\u7f6e\u4e00\u4e2a\u8f83\u77ed\u7684\u8fc7\u671f\u65f6\u95f4\u3002\u8fd9\u6837\uff0c\u540e\u7eed\u5bf9\u8be5key\u7684\u67e5\u8be2\u4f1a\u76f4\u63a5\u547d\u4e2d\u7f13\u5b58\u91cc\u7684\u201c\u7a7a\u503c\u201d\uff0c\u800c\u4e0d\u4f1a\u518d\u8bbf\u95ee\u6570\u636e\u5e93\u3002</li> <li>\u5e03\u9686\u8fc7\u6ee4\u5668 (Bloom Filter)\uff1a\u5c06\u6240\u6709\u53ef\u80fd\u5b58\u5728\u7684\u6570\u636ekey\u63d0\u524d\u5b58\u5165\u4e00\u4e2a\u5e03\u9686\u8fc7\u6ee4\u5668\u4e2d\u3002\u5f53\u4e00\u4e2a\u67e5\u8be2\u8bf7\u6c42\u6765\u65f6\uff0c\u5148\u53bb\u5e03\u9686\u8fc7\u6ee4\u5668\u5224\u65ad\u8fd9\u4e2akey\u662f\u5426\u5b58\u5728\u3002\u5982\u679c\u5e03\u9686\u8fc7\u6ee4\u5668\u5224\u65ad\u4e0d\u5b58\u5728\uff0c\u5c31\u76f4\u63a5\u62d2\u7edd\u8bf7\u6c42\uff0c\u6839\u672c\u4e0d\u4f1a\u53bb\u67e5\u7f13\u5b58\u548c\u6570\u636e\u5e93\u3002\u8fd9\u80fd\u6709\u6548\u62e6\u622a\u5927\u91cf\u975e\u6cd5\u8bf7\u6c42\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E8%8B%A5%E7%BC%93%E5%AD%98%E6%95%B0%E6%8D%AE%E4%B8%A2%E5%A4%B1%EF%BC%8C%E6%9C%89%E5%93%AA%E4%BA%9B%E5%BA%94%E5%AF%B9%E6%96%B9%E6%A1%88/#_4","title":"\u4e8b\u524d\u9884\u9632\u4e0e\u7cfb\u7edf\u6027\u5bb9\u9519\u7b56\u7565","text":"<p>\u9664\u4e86\u88ab\u52a8\u6062\u590d\uff0c\u66f4\u5065\u58ee\u7684\u7cfb\u7edf\u4f1a\u91c7\u53d6\u4e3b\u52a8\u7684\u9884\u9632\u548c\u5bb9\u9519\u63aa\u65bd\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E8%8B%A5%E7%BC%93%E5%AD%98%E6%95%B0%E6%8D%AE%E4%B8%A2%E5%A4%B1%EF%BC%8C%E6%9C%89%E5%93%AA%E4%BA%9B%E5%BA%94%E5%AF%B9%E6%96%B9%E6%A1%88/#1-cache-pre-warming-pre-loading","title":"1. \u7f13\u5b58\u9884\u70ed (Cache Pre-warming / Pre-loading)","text":"<ul> <li>\u505a\u6cd5\uff1a\u5728\u7cfb\u7edf\u542f\u52a8\u65f6\u6216\u5728\u6d41\u91cf\u4f4e\u8c37\u671f\uff0c\u63d0\u524d\u5c06\u4e00\u4e9b\u53ef\u9884\u89c1\u7684\u70ed\u70b9\u6570\u636e\u52a0\u8f7d\u5230\u7f13\u5b58\u4e2d\u3002\u8fd9\u6837\u53ef\u4ee5\u907f\u514d\u7cfb\u7edf\u542f\u52a8\u521d\u671f\u56e0\u5927\u91cf\u7f13\u5b58\u672a\u547d\u4e2d\u800c\u5bf9\u6570\u636e\u5e93\u9020\u6210\u538b\u529b\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E8%8B%A5%E7%BC%93%E5%AD%98%E6%95%B0%E6%8D%AE%E4%B8%A2%E5%A4%B1%EF%BC%8C%E6%9C%89%E5%93%AA%E4%BA%9B%E5%BA%94%E5%AF%B9%E6%96%B9%E6%A1%88/#2-persistence","title":"2. \u6570\u636e\u6301\u4e45\u5316 (Persistence)","text":"<ul> <li>\u505a\u6cd5\uff1a\u5f00\u542f\u7f13\u5b58\u670d\u52a1\u7684\u6301\u4e45\u5316\u529f\u80fd\uff0c\u5982Redis\u7684RDB\uff08\u5feb\u7167\uff09\u548cAOF\uff08\u65e5\u5fd7\u8ffd\u52a0\uff09\u3002\u5f53\u7f13\u5b58\u670d\u52a1\u91cd\u542f\u65f6\uff0c\u53ef\u4ee5\u4ece\u78c1\u76d8\u4e0a\u7684\u6301\u4e45\u5316\u6587\u4ef6\u4e2d\u5feb\u901f\u6062\u590d\u6570\u636e\uff0c\u51cf\u5c11\u51b7\u542f\u52a8\u65f6\u7684\u6570\u636e\u4e22\u5931\u91cf\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E8%8B%A5%E7%BC%93%E5%AD%98%E6%95%B0%E6%8D%AE%E4%B8%A2%E5%A4%B1%EF%BC%8C%E6%9C%89%E5%93%AA%E4%BA%9B%E5%BA%94%E5%AF%B9%E6%96%B9%E6%A1%88/#3-degradation-and-circuit-breaking","title":"3. \u670d\u52a1\u964d\u7ea7\u4e0e\u7194\u65ad (Degradation and Circuit Breaking)","text":"<ul> <li>\u505a\u6cd5\uff1a\u8fd9\u662f\u4fdd\u62a4\u7cfb\u7edf\u7684\u6700\u540e\u4e00\u9053\u9632\u7ebf\u3002<ul> <li>\u964d\u7ea7\uff1a\u5f53\u76d1\u6d4b\u5230\u6570\u636e\u5e93\u538b\u529b\u8fc7\u5927\u6216\u7f13\u5b58\u670d\u52a1\u5927\u89c4\u6a21\u6545\u969c\u65f6\uff0c\u53ef\u4ee5\u4e34\u65f6\u5173\u95ed\u4e00\u4e9b\u975e\u6838\u5fc3\u4e1a\u52a1\u7684\u7f13\u5b58\u8bfb\u5199\uff0c\u751a\u81f3\u76f4\u63a5\u8fd4\u56de\u4e00\u4e9b\u9ed8\u8ba4\u503c\u6216\u9759\u6001\u9875\u9762\uff0c\u4fdd\u8bc1\u6838\u5fc3\u4e1a\u52a1\u7684\u7a33\u5b9a\u3002</li> <li>\u7194\u65ad\uff1a\u5728\u5e94\u7528\u5c42\u9762\u96c6\u6210\u7194\u65ad\u5668\uff08\u5982Hystrix, Sentinel\uff09\u3002\u5f53\u8bbf\u95ee\u6570\u636e\u5e93\u7684\u5931\u8d25\u7387\u8fbe\u5230\u4e00\u5b9a\u9608\u503c\u65f6\uff0c\u81ea\u52a8\u7194\u65ad\uff0c\u540e\u7eed\u8bf7\u6c42\u5728\u4e00\u6bb5\u65f6\u95f4\u5185\u4e0d\u518d\u8bbf\u95ee\u6570\u636e\u5e93\uff0c\u76f4\u63a5\u8fd4\u56de\u9519\u8bef\u6216\u964d\u7ea7\u6570\u636e\uff0c\u5f85\u6570\u636e\u5e93\u6062\u590d\u540e\u518d\u6162\u6162\u653e\u5f00\u6d41\u91cf\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E7%9F%AD%E9%93%BE%E7%B3%BB%E7%BB%9F%EF%BC%8C%20%E6%AF%8F%E6%97%A5%E5%86%99%E5%85%A5%E9%87%8F%E7%99%BE%E4%B8%87%EF%BC%8C%E8%AE%BF%E9%97%AE%E9%87%8F%E5%8D%83%E4%B8%87%20%EF%BC%8C%E8%A6%81%E6%B1%82%E9%80%9A%E8%BF%87%E7%9F%AD%E9%93%BE%E6%89%BE%E5%88%B0%E9%95%BF%E9%93%BE%2010ms%E5%86%85%EF%BC%8C%E5%90%8C%E6%97%B6%E4%B8%8D%E8%83%BD%E9%87%8D%E5%A4%8D%E6%8F%92%E5%85%A5%E9%95%BF%E9%93%BE/","title":"\u8bbe\u8ba1\u4e00\u4e2a\u77ed\u94fe\u7cfb\u7edf\uff0c \u6bcf\u65e5\u5199\u5165\u91cf\u767e\u4e07\uff0c\u8bbf\u95ee\u91cf\u5343\u4e07 \uff0c\u8981\u6c42\u901a\u8fc7\u77ed\u94fe\u627e\u5230\u957f\u94fe 10ms\u5185\uff0c\u540c\u65f6\u4e0d\u80fd\u91cd\u590d\u63d2\u5165\u957f\u94fe","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E7%9F%AD%E9%93%BE%E7%B3%BB%E7%BB%9F%EF%BC%8C%20%E6%AF%8F%E6%97%A5%E5%86%99%E5%85%A5%E9%87%8F%E7%99%BE%E4%B8%87%EF%BC%8C%E8%AE%BF%E9%97%AE%E9%87%8F%E5%8D%83%E4%B8%87%20%EF%BC%8C%E8%A6%81%E6%B1%82%E9%80%9A%E8%BF%87%E7%9F%AD%E9%93%BE%E6%89%BE%E5%88%B0%E9%95%BF%E9%93%BE%2010ms%E5%86%85%EF%BC%8C%E5%90%8C%E6%97%B6%E4%B8%8D%E8%83%BD%E9%87%8D%E5%A4%8D%E6%8F%92%E5%85%A5%E9%95%BF%E9%93%BE/#_1","title":"\u8bbe\u8ba1\u76ee\u6807","text":"<ol> <li>\u9ad8\u541e\u5410\u91cf\uff1a\u652f\u6301\u6bcf\u65e5\u767e\u4e07\u7ea7\u522b\u7684\u77ed\u94fe\u751f\u6210\uff08\u5199\u5165\uff09\u3002</li> <li>\u9ad8\u5e76\u53d1\uff1a\u652f\u6301\u6bcf\u65e5\u5343\u4e07\u7ea7\u522b\u7684\u77ed\u94fe\u8bbf\u95ee\uff08\u8bfb\u53d6\uff09\u3002</li> <li>\u4f4e\u5ef6\u8fdf\uff1a\u77ed\u94fe\u91cd\u5b9a\u5411\uff08\u901a\u8fc7\u77ed\u94fe\u627e\u957f\u94fe\uff09\u7684\u6838\u5fc3\u8017\u65f6\u5728 10ms \u4ee5\u5185\u3002</li> <li>\u5e42\u7b49\u6027\uff1a\u540c\u4e00\u4e2a\u957f\u94fe\u63a5\u65e0\u8bba\u8bf7\u6c42\u591a\u5c11\u6b21\uff0c\u90fd\u8fd4\u56de\u76f8\u540c\u7684\u77ed\u94fe\u63a5\uff0c\u4e0d\u91cd\u590d\u63d2\u5165\u3002</li> <li>\u9ad8\u53ef\u7528\uff1a\u7cfb\u7edf\u80fd\u591f\u6301\u7eed\u63d0\u4f9b\u670d\u52a1\uff0c\u65e0\u5355\u70b9\u6545\u969c\u3002</li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E7%9F%AD%E9%93%BE%E7%B3%BB%E7%BB%9F%EF%BC%8C%20%E6%AF%8F%E6%97%A5%E5%86%99%E5%85%A5%E9%87%8F%E7%99%BE%E4%B8%87%EF%BC%8C%E8%AE%BF%E9%97%AE%E9%87%8F%E5%8D%83%E4%B8%87%20%EF%BC%8C%E8%A6%81%E6%B1%82%E9%80%9A%E8%BF%87%E7%9F%AD%E9%93%BE%E6%89%BE%E5%88%B0%E9%95%BF%E9%93%BE%2010ms%E5%86%85%EF%BC%8C%E5%90%8C%E6%97%B6%E4%B8%8D%E8%83%BD%E9%87%8D%E5%A4%8D%E6%8F%92%E5%85%A5%E9%95%BF%E9%93%BE/#_2","title":"\u6838\u5fc3\u67b6\u6784","text":"<p>\u4e00\u4e2a\u5178\u578b\u7684\u77ed\u94fe\u7cfb\u7edf\u67b6\u6784\u5305\u542b\u4ee5\u4e0b\u51e0\u4e2a\u6838\u5fc3\u7ec4\u4ef6\uff1a</p> <p><code>\u7528\u6237 -&gt; \u8d1f\u8f7d\u5747\u8861 -&gt; \u5e94\u7528\u670d\u52a1\u96c6\u7fa4 -&gt; \u7f13\u5b58\u96c6\u7fa4 -&gt; \u6570\u636e\u5e93\u96c6\u7fa4</code></p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E7%9F%AD%E9%93%BE%E7%B3%BB%E7%BB%9F%EF%BC%8C%20%E6%AF%8F%E6%97%A5%E5%86%99%E5%85%A5%E9%87%8F%E7%99%BE%E4%B8%87%EF%BC%8C%E8%AE%BF%E9%97%AE%E9%87%8F%E5%8D%83%E4%B8%87%20%EF%BC%8C%E8%A6%81%E6%B1%82%E9%80%9A%E8%BF%87%E7%9F%AD%E9%93%BE%E6%89%BE%E5%88%B0%E9%95%BF%E9%93%BE%2010ms%E5%86%85%EF%BC%8C%E5%90%8C%E6%97%B6%E4%B8%8D%E8%83%BD%E9%87%8D%E5%A4%8D%E6%8F%92%E5%85%A5%E9%95%BF%E9%93%BE/#_3","title":"\u77ed\u7801\u751f\u6210\u7b56\u7565","text":"<p>\u77ed\u7801\uff08Short Code\uff09\u662f\u77ed\u94fe\u63a5\u4e2d\u7684\u6838\u5fc3\u90e8\u5206\uff0c\u4f8b\u5982 <code>https://url.short/AbC123</code> \u4e2d\u7684 <code>AbC123</code>\u3002\u5b83\u7684\u751f\u6210\u65b9\u5f0f\u76f4\u63a5\u5f71\u54cd\u7cfb\u7edf\u7684\u6027\u80fd\u548c\u6269\u5c55\u6027\u3002</p> <ul> <li>\u6311\u6218\uff1a\u9700\u8981\u751f\u6210\u5168\u5c40\u552f\u4e00\u4e14\u4e0d\u91cd\u590d\u7684\u77ed\u7801\uff0c\u540c\u65f6\u8981\u9ad8\u6548\u4e14\u5c3d\u53ef\u80fd\u77ed\u3002</li> <li>\u65b9\u6848\uff1a\u5206\u5e03\u5f0fID\u751f\u6210\u5668\uff08\u53d1\u53f7\u5668\uff09<ul> <li>\u96ea\u82b1\u7b97\u6cd5 (Snowflake)\uff1a\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u6210\u719f\u7684\u65b9\u6848\u3002\u5b83\u53ef\u4ee5\u751f\u6210\u4e00\u4e2a 64-bit \u7684 long \u7c7b\u578b\u6574\u6570\uff0c\u5177\u6709\u5168\u5c40\u552f\u4e00\u3001\u8d8b\u52bf\u9012\u589e\u7684\u7279\u70b9\u3002</li> <li>\u8f6c\u6362\uff1a\u5c06\u751f\u6210\u7684 64-bit \u6574\u6570\u8f6c\u6362\u4e3a62\u8fdb\u5236\u7684\u5b57\u7b26\u4e32\uff08<code>0-9</code>, <code>a-z</code>, <code>A-Z</code>\uff09\u3002\u4e00\u4e2a 64-bit \u7684\u6574\u6570\u53ef\u4ee5\u8f6c\u6362\u4e3a\u4e00\u4e2a 11 \u4f4d\u5de6\u53f3\u768462\u8fdb\u5236\u5b57\u7b26\u4e32\uff0c\u957f\u5ea6\u9002\u4e2d\u4e14\u552f\u4e00\u3002\u4f8b\u5982\uff0c<code>convert_to_base62(snowflake_id)</code>\u3002</li> </ul> </li> </ul> <p>\u4f18\u52bf\uff1a *   \u6027\u80fd\u9ad8\uff1aID\u5728\u670d\u52a1\u672c\u5730\u751f\u6210\uff0c\u4e0d\u4f9d\u8d56\u4e8e\u6570\u636e\u5e93\uff0c\u901f\u5ea6\u6781\u5feb\u3002 *   \u5168\u5c40\u552f\u4e00\uff1a\u7b97\u6cd5\u672c\u8eab\u4fdd\u8bc1\u4e86\u5728\u5206\u5e03\u5f0f\u73af\u5883\u4e0bID\u7684\u552f\u4e00\u6027\u3002 *   \u4e0d\u91cd\u590d\uff1a\u751f\u6210\u7684ID\u6c38\u4e0d\u91cd\u590d\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E7%9F%AD%E9%93%BE%E7%B3%BB%E7%BB%9F%EF%BC%8C%20%E6%AF%8F%E6%97%A5%E5%86%99%E5%85%A5%E9%87%8F%E7%99%BE%E4%B8%87%EF%BC%8C%E8%AE%BF%E9%97%AE%E9%87%8F%E5%8D%83%E4%B8%87%20%EF%BC%8C%E8%A6%81%E6%B1%82%E9%80%9A%E8%BF%87%E7%9F%AD%E9%93%BE%E6%89%BE%E5%88%B0%E9%95%BF%E9%93%BE%2010ms%E5%86%85%EF%BC%8C%E5%90%8C%E6%97%B6%E4%B8%8D%E8%83%BD%E9%87%8D%E5%A4%8D%E6%8F%92%E5%85%A5%E9%95%BF%E9%93%BE/#_4","title":"\u5b58\u50a8\u7cfb\u7edf","text":"<p>\u5b58\u50a8\u7cfb\u7edf\u7684\u9009\u62e9\u5bf9\u4e8e\u6ee1\u8db310ms\u7684\u5ef6\u8fdf\u8981\u6c42\u81f3\u5173\u91cd\u8981\u3002\u6211\u4eec\u5c06\u91c7\u7528\u201c\u7f13\u5b58 + \u6570\u636e\u5e93\u201d\u7684\u591a\u7ea7\u5b58\u50a8\u7b56\u7565\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E7%9F%AD%E9%93%BE%E7%B3%BB%E7%BB%9F%EF%BC%8C%20%E6%AF%8F%E6%97%A5%E5%86%99%E5%85%A5%E9%87%8F%E7%99%BE%E4%B8%87%EF%BC%8C%E8%AE%BF%E9%97%AE%E9%87%8F%E5%8D%83%E4%B8%87%20%EF%BC%8C%E8%A6%81%E6%B1%82%E9%80%9A%E8%BF%87%E7%9F%AD%E9%93%BE%E6%89%BE%E5%88%B0%E9%95%BF%E9%93%BE%2010ms%E5%86%85%EF%BC%8C%E5%90%8C%E6%97%B6%E4%B8%8D%E8%83%BD%E9%87%8D%E5%A4%8D%E6%8F%92%E5%85%A5%E9%95%BF%E9%93%BE/#cache","title":"\u7f13\u5b58\u5c42 (Cache)","text":"<ul> <li>\u76ee\u7684\uff1a\u6700\u5927\u5316\u5730\u63d0\u5347\u8bfb\u53d6\u6027\u80fd\uff0c\u5c06\u5ef6\u8fdf\u63a7\u5236\u5728\u6beb\u79d2\u7ea7\u3002</li> <li>\u6280\u672f\u9009\u578b\uff1aRedis\u3002</li> <li>\u7f13\u5b58\u5185\u5bb9\uff1a<ol> <li>\u6b63\u5411\u6620\u5c04\uff1a<code>Key: \u77ed\u7801 (Short Code)</code> -&gt; <code>Value: \u957f\u94fe\u63a5 (Long URL)</code>\u3002\u8fd9\u662f\u6700\u6838\u5fc3\u7684\u7f13\u5b58\uff0c\u7528\u4e8e\u52a0\u901f\u91cd\u5b9a\u5411\u3002</li> <li>\u53cd\u5411\u6620\u5c04\uff1a<code>Key: \u957f\u94fe\u63a5\u7684MD5\u6458\u8981</code> -&gt; <code>Value: \u77ed\u7801 (Short Code)</code>\u3002\u7528\u4e8e\u5feb\u901f\u5224\u65ad\u957f\u94fe\u63a5\u662f\u5426\u5df2\u5b58\u5728\uff0c\u9632\u6b62\u91cd\u590d\u63d2\u5165\u3002</li> <li>\u5e03\u9686\u8fc7\u6ee4\u5668 (Bloom Filter)\uff1a\u5728\u7f13\u5b58\u4e2d\u7528\u4e00\u4e2a\u5e03\u9686\u8fc7\u6ee4\u5668\u6765\u5b58\u653e\u6240\u6709\u5df2\u7ecf\u751f\u6210\u8fc7\u7684\u77ed\u7801\uff0c\u53ef\u4ee5\u5feb\u901f\u5224\u65ad\u4e00\u4e2a\u77ed\u7801\u662f\u5426\u5b58\u5728\uff0c\u6709\u6548\u9632\u6b62\u7f13\u5b58\u7a7f\u900f\u3002</li> </ol> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E7%9F%AD%E9%93%BE%E7%B3%BB%E7%BB%9F%EF%BC%8C%20%E6%AF%8F%E6%97%A5%E5%86%99%E5%85%A5%E9%87%8F%E7%99%BE%E4%B8%87%EF%BC%8C%E8%AE%BF%E9%97%AE%E9%87%8F%E5%8D%83%E4%B8%87%20%EF%BC%8C%E8%A6%81%E6%B1%82%E9%80%9A%E8%BF%87%E7%9F%AD%E9%93%BE%E6%89%BE%E5%88%B0%E9%95%BF%E9%93%BE%2010ms%E5%86%85%EF%BC%8C%E5%90%8C%E6%97%B6%E4%B8%8D%E8%83%BD%E9%87%8D%E5%A4%8D%E6%8F%92%E5%85%A5%E9%95%BF%E9%93%BE/#database","title":"\u6570\u636e\u5e93\u5c42 (Database)","text":"<ul> <li>\u76ee\u7684\uff1a\u6301\u4e45\u5316\u5b58\u50a8\u6570\u636e\uff0c\u4fdd\u8bc1\u6570\u636e\u4e0d\u4e22\u5931\u3002</li> <li>\u6280\u672f\u9009\u578b\uff1a\u9009\u62e9 NoSQL \u6570\u636e\u5e93\uff0c\u5982 Cassandra \u6216 DynamoDB\uff0c\u56e0\u4e3a\u5b83\u4eec\u63d0\u4f9b\u4e86\u6781\u597d\u7684\u6a2a\u5411\u6269\u5c55\u80fd\u529b\u548c\u4f4e\u5ef6\u8fdf\u7684\u952e\u503c\u67e5\u8be2\u6027\u80fd\u3002\u5982\u679c\u4e1a\u52a1\u521d\u671f\u89c4\u6a21\u4e0d\u5927\uff0cMySQL \u914d\u5408\u5206\u5e93\u5206\u8868\u4e5f\u80fd\u6ee1\u8db3\u9700\u6c42\uff0c\u4f46NoSQL\u662f\u66f4\u957f\u8fdc\u7684\u9009\u62e9\u3002</li> <li> <p>\u8868\u8bbe\u8ba1\uff1a</p> <ol> <li> <p>\u4e3b\u8868 (url_mapping)\uff1a</p> <ul> <li><code>short_code</code> (\u4e3b\u952e/\u5206\u533a\u952e): \u77ed\u7801</li> <li><code>long_url</code>: \u957f\u94fe\u63a5</li> <li><code>created_at</code>: \u521b\u5efa\u65f6\u95f4\u7b49\u5143\u6570\u636e</li> <li>\u67e5\u8be2\u6a21\u5f0f\uff1a<code>SELECT long_url FROM url_mapping WHERE short_code = ?</code>\u3002\u8fd9\u662f\u5178\u578b\u7684KV\u67e5\u8be2\uff0c\u6027\u80fd\u6781\u9ad8\u3002</li> </ul> </li> <li> <p>\u53cd\u5411\u7d22\u5f15\u8868 (long_url_index)\uff1a</p> <ul> <li><code>long_url_md5</code> (\u4e3b\u952e/\u5206\u533a\u952e): \u957f\u94fe\u63a5\u7684MD5\u503c</li> <li><code>short_code</code>: \u5bf9\u5e94\u7684\u77ed\u7801</li> <li>\u67e5\u8be2\u6a21\u5f0f\uff1a<code>SELECT short_code FROM long_url_index WHERE long_url_md5 = ?</code>\u3002</li> </ul> </li> </ol> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E7%9F%AD%E9%93%BE%E7%B3%BB%E7%BB%9F%EF%BC%8C%20%E6%AF%8F%E6%97%A5%E5%86%99%E5%85%A5%E9%87%8F%E7%99%BE%E4%B8%87%EF%BC%8C%E8%AE%BF%E9%97%AE%E9%87%8F%E5%8D%83%E4%B8%87%20%EF%BC%8C%E8%A6%81%E6%B1%82%E9%80%9A%E8%BF%87%E7%9F%AD%E9%93%BE%E6%89%BE%E5%88%B0%E9%95%BF%E9%93%BE%2010ms%E5%86%85%EF%BC%8C%E5%90%8C%E6%97%B6%E4%B8%8D%E8%83%BD%E9%87%8D%E5%A4%8D%E6%8F%92%E5%85%A5%E9%95%BF%E9%93%BE/#3","title":"3. \u6838\u5fc3\u6d41\u7a0b\u8bbe\u8ba1","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E7%9F%AD%E9%93%BE%E7%B3%BB%E7%BB%9F%EF%BC%8C%20%E6%AF%8F%E6%97%A5%E5%86%99%E5%85%A5%E9%87%8F%E7%99%BE%E4%B8%87%EF%BC%8C%E8%AE%BF%E9%97%AE%E9%87%8F%E5%8D%83%E4%B8%87%20%EF%BC%8C%E8%A6%81%E6%B1%82%E9%80%9A%E8%BF%87%E7%9F%AD%E9%93%BE%E6%89%BE%E5%88%B0%E9%95%BF%E9%93%BE%2010ms%E5%86%85%EF%BC%8C%E5%90%8C%E6%97%B6%E4%B8%8D%E8%83%BD%E9%87%8D%E5%A4%8D%E6%8F%92%E5%85%A5%E9%95%BF%E9%93%BE/#a","title":"A. \u521b\u5efa\u77ed\u94fe\u63a5\uff08\u5199\u5165\u6d41\u7a0b\uff09","text":"<p>\u6b64\u6d41\u7a0b\u5fc5\u987b\u89e3\u51b3\u201c\u9632\u91cd\u590d\u63d2\u5165\u201d\u7684\u95ee\u9898\u3002</p> <ol> <li>\u63a5\u6536\u8bf7\u6c42\uff1a\u5e94\u7528\u670d\u52a1\u63a5\u6536\u5230\u7528\u6237\u63d0\u4ea4\u7684\u957f\u94fe\u63a5 <code>long_url</code>\u3002</li> <li>\u8ba1\u7b97\u6458\u8981\uff1a\u8ba1\u7b97 <code>long_url</code> \u7684 MD5 \u503c\uff0c\u5f97\u5230 <code>long_url_md5</code>\u3002</li> <li>\u67e5\u8be2\u7f13\u5b58\uff1a<ul> <li>\u9996\u5148\u67e5\u8be2 Redis \u7684\u53cd\u5411\u6620\u5c04\u7f13\u5b58\uff1a<code>GET long_url_md5</code>\u3002</li> <li>\u5982\u679c\u547d\u4e2d\uff0c\u8bf4\u660e\u8be5\u957f\u94fe\u63a5\u5df2\u5b58\u5728\uff0c\u76f4\u63a5\u5c06\u5bf9\u5e94\u7684 <code>short_code</code> \u8fd4\u56de\u7ed9\u7528\u6237\u3002\u6d41\u7a0b\u7ed3\u675f\u3002</li> </ul> </li> <li>\u67e5\u8be2\u6570\u636e\u5e93\uff1a<ul> <li>\u5982\u679c\u7f13\u5b58\u672a\u547d\u4e2d\uff0c\u5219\u67e5\u8be2\u6570\u636e\u5e93\u4e2d\u7684\u53cd\u5411\u7d22\u5f15\u8868 <code>long_url_index</code>\u3002</li> <li>\u5982\u679c\u6570\u636e\u5e93\u4e2d\u5b58\u5728\u8bb0\u5f55\uff0c\u8bf4\u660e\u957f\u94fe\u63a5\u5df2\u5b58\u5728\u3002\u5c06\u67e5\u8be2\u5230\u7684 <code>short_code</code> \u8fd4\u56de\u7ed9\u7528\u6237\uff0c\u5e76\u56de\u5199\u5230 Redis \u53cd\u5411\u6620\u5c04\u7f13\u5b58\u4e2d\uff0c\u65b9\u4fbf\u4e0b\u6b21\u5feb\u901f\u67e5\u627e\u3002\u6d41\u7a0b\u7ed3\u675f\u3002</li> </ul> </li> <li>\u751f\u6210\u65b0\u77ed\u94fe\uff1a<ul> <li>\u5982\u679c\u6570\u636e\u5e93\u4e2d\u4e5f\u4e0d\u5b58\u5728\uff0c\u8bf4\u660e\u8fd9\u662f\u4e00\u4e2a\u65b0\u7684\u957f\u94fe\u63a5\u3002</li> <li>\u8c03\u7528\u5206\u5e03\u5f0fID\u751f\u6210\u5668\u83b7\u53d6\u4e00\u4e2a\u552f\u4e00\u7684 ID\u3002</li> <li>\u5c06\u8be5 ID \u8f6c\u6362\u4e3a62\u8fdb\u5236\uff0c\u5f97\u5230\u65b0\u7684 <code>short_code</code>\u3002</li> <li>\u5199\u5165\u6570\u636e\u5e93\uff1a\u5c06 <code>(short_code, long_url)</code> \u5b58\u5165\u4e3b\u8868 <code>url_mapping</code>\uff0c\u540c\u65f6\u5c06 <code>(long_url_md5, short_code)</code> \u5b58\u5165\u53cd\u5411\u7d22\u5f15\u8868 <code>long_url_index</code>\u3002\u4e3a\u4fdd\u8bc1\u6570\u636e\u4e00\u81f4\u6027\uff0c\u8fd9\u4e24\u4e2a\u64cd\u4f5c\u6700\u597d\u5728\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u5b8c\u6210\u3002</li> <li>\u5199\u5165\u7f13\u5b58\uff1a\u5c06\u65b0\u7684\u6620\u5c04\u5173\u7cfb\u5199\u5165 Redis \u7684\u6b63\u5411\u548c\u53cd\u5411\u7f13\u5b58\u3002</li> <li>\u8fd4\u56de\u77ed\u7801\uff1a\u5c06\u65b0\u751f\u6210\u7684 <code>short_code</code> \u8fd4\u56de\u7ed9\u7528\u6237\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E7%9F%AD%E9%93%BE%E7%B3%BB%E7%BB%9F%EF%BC%8C%20%E6%AF%8F%E6%97%A5%E5%86%99%E5%85%A5%E9%87%8F%E7%99%BE%E4%B8%87%EF%BC%8C%E8%AE%BF%E9%97%AE%E9%87%8F%E5%8D%83%E4%B8%87%20%EF%BC%8C%E8%A6%81%E6%B1%82%E9%80%9A%E8%BF%87%E7%9F%AD%E9%93%BE%E6%89%BE%E5%88%B0%E9%95%BF%E9%93%BE%2010ms%E5%86%85%EF%BC%8C%E5%90%8C%E6%97%B6%E4%B8%8D%E8%83%BD%E9%87%8D%E5%A4%8D%E6%8F%92%E5%85%A5%E9%95%BF%E9%93%BE/#b","title":"B. \u8bbf\u95ee\u77ed\u94fe\u63a5\uff08\u8bfb\u53d6\u6d41\u7a0b\uff09","text":"<p>\u6b64\u6d41\u7a0b\u5fc5\u987b\u6ee1\u8db3 10ms \u5185\u7684\u5ef6\u8fdf\u8981\u6c42\u3002</p> <ol> <li>\u63a5\u6536\u8bf7\u6c42\uff1a\u8d1f\u8f7d\u5747\u8861\u5c06\u7528\u6237\u7684\u77ed\u94fe\u63a5\u8bbf\u95ee\u8bf7\u6c42\uff08\u5982 <code>https://url.short/AbC123</code>\uff09\u8f6c\u53d1\u5230\u5e94\u7528\u670d\u52a1\uff0c\u670d\u52a1\u5c42\u63d0\u53d6\u51fa <code>short_code</code> \u4e3a <code>AbC123</code>\u3002</li> <li>\u67e5\u8be2\u7f13\u5b58\uff1a<ul> <li>\u76f4\u63a5\u4ece Redis \u67e5\u8be2\u6b63\u5411\u6620\u5c04\uff1a<code>GET AbC123</code>\u3002</li> <li>\u7f13\u5b58\u547d\u4e2d (Cache Hit)\uff1a\u7edd\u5927\u591a\u6570\uff0899%\u4ee5\u4e0a\uff09\u7684\u8bf7\u6c42\u5e94\u8be5\u5728\u8fd9\u91cc\u547d\u4e2d\u3002\u76f4\u63a5\u83b7\u53d6\u5230 <code>long_url</code>\uff0c\u5e94\u7528\u670d\u52a1\u8fd4\u56de 302/301 \u91cd\u5b9a\u5411\u54cd\u5e94\u3002\u6b64\u8fc7\u7a0b\u901a\u5e38\u5728 1-2ms \u5185\u5373\u53ef\u5b8c\u6210\uff0c\u8fdc\u4f4e\u4e8e 10ms \u7684\u8981\u6c42\u3002</li> </ul> </li> <li>\u67e5\u8be2\u6570\u636e\u5e93\uff1a<ul> <li>\u7f13\u5b58\u672a\u547d\u4e2d (Cache Miss)\uff1a\u5982\u679c Redis \u4e2d\u6ca1\u6709\u6570\u636e\uff08\u53ef\u80fd\u662f\u56e0\u4e3a\u7f13\u5b58\u8fc7\u671f\u6216\u670d\u52a1\u51b7\u542f\u52a8\uff09\uff0c\u5219\u67e5\u8be2\u6570\u636e\u5e93\u4e3b\u8868 <code>url_mapping</code>\u3002</li> <li>\u5982\u679c\u6570\u636e\u5e93\u4e2d\u5b58\u5728\u8bb0\u5f55\uff0c\u83b7\u53d6 <code>long_url</code>\uff0c\u8fd4\u56de\u7ed9\u7528\u6237\uff0c\u5e76\u56de\u5199\u5230 Redis \u7f13\u5b58\u4e2d\uff0c\u4ee5\u4fbf\u4e0b\u6b21\u8bbf\u95ee\u3002</li> <li>\u5982\u679c\u6570\u636e\u5e93\u4e2d\u4e5f\u4e0d\u5b58\u5728\uff0c\u8bf4\u660e\u8fd9\u662f\u4e00\u4e2a\u65e0\u6548\u7684\u77ed\u94fe\u63a5\uff0c\u8fd4\u56de 404 Not Found \u9875\u9762\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E7%B1%BB%E4%BC%BC%E5%BE%AE%E5%8D%9A%E6%88%96%E8%80%85%E6%9C%8B%E5%8F%8B%E5%9C%88%E7%9A%84%E2%80%9CFeed%E6%B5%81%E2%80%9D%E7%B3%BB%E7%BB%9F%EF%BC%8C%E5%BA%94%E5%BD%93%E6%80%8E%E4%B9%88%E8%AE%BE%E8%AE%A1%EF%BC%8C%E9%9C%80%E8%A6%81%E8%80%83%E8%99%91%E5%93%AA%E4%BA%9B%E6%96%B9%E9%9D%A2/","title":"\u8bbe\u8ba1\u4e00\u4e2a\u7c7b\u4f3c\u5fae\u535a\u6216\u8005\u670b\u53cb\u5708\u7684\u201cFeed\u6d41\u201d\u7cfb\u7edf\uff0c\u5e94\u5f53\u600e\u4e48\u8bbe\u8ba1\uff0c\u9700\u8981\u8003\u8651\u54ea\u4e9b\u65b9\u9762","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E7%B1%BB%E4%BC%BC%E5%BE%AE%E5%8D%9A%E6%88%96%E8%80%85%E6%9C%8B%E5%8F%8B%E5%9C%88%E7%9A%84%E2%80%9CFeed%E6%B5%81%E2%80%9D%E7%B3%BB%E7%BB%9F%EF%BC%8C%E5%BA%94%E5%BD%93%E6%80%8E%E4%B9%88%E8%AE%BE%E8%AE%A1%EF%BC%8C%E9%9C%80%E8%A6%81%E8%80%83%E8%99%91%E5%93%AA%E4%BA%9B%E6%96%B9%E9%9D%A2/#_1","title":"\u6838\u5fc3\u6982\u5ff5","text":"<ul> <li>\u6838\u5fc3\u529f\u80fd\uff1aFeed\u6d41\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u4fe1\u606f\u805a\u5408\u5668\uff0c\u5b83\u5c06\u7528\u6237\u5173\u6ce8\u7684\u591a\u4e2a\u4fe1\u606f\u6e90\uff08\u5176\u4ed6\u7528\u6237\u3001\u516c\u4f17\u53f7\u7b49\uff09\u4ea7\u751f\u7684\u5185\u5bb9\uff0c\u6309\u7167\u4e00\u5b9a\u7684\u987a\u5e8f\uff08\u5982\u65f6\u95f4\u3001\u76f8\u5173\u6027\uff09\u7ec4\u7ec7\u8d77\u6765\uff0c\u5448\u73b0\u7ed9\u7528\u6237\u3002 \u5178\u578b\u7684\u4f8b\u5b50\u5c31\u662f\u5fae\u535a\u7684\u9996\u9875\u4fe1\u606f\u6d41\u548c\u5fae\u4fe1\u7684\u670b\u53cb\u5708\u3002</li> <li>\u4e3b\u8981\u6311\u6218\uff1a<ul> <li>\u5b9e\u65f6\u6027\uff1a\u7528\u6237\u53d1\u5e03\u7684\u5185\u5bb9\u9700\u8981\u5c3d\u5feb\u5730\u88ab\u5176\u7c89\u4e1d\u6216\u597d\u53cb\u770b\u5230\u3002</li> <li>\u6d77\u91cf\u6570\u636e\uff1a\u793e\u4ea4\u5e73\u53f0\u6bcf\u5929\u90fd\u4f1a\u4ea7\u751f\u6d77\u91cf\u7684Feed\u6570\u636e\u548c\u7528\u6237\u4ea4\u4e92\u4fe1\u606f\u3002</li> <li>\u8bfb\u5199\u4e0d\u5e73\u8861\uff1aFeed\u6d41\u7cfb\u7edf\u662f\u5178\u578b\u7684\u8bfb\u591a\u5199\u5c11\u573a\u666f\uff0c\u8bfb\u53d6Feed\u7684\u6b21\u6570\u8fdc\u5927\u4e8e\u53d1\u5e03\u7684\u6b21\u6570\uff0c\u8bfb\u5199\u6bd4\u53ef\u80fd\u8fbe\u5230100:1\u751a\u81f3\u66f4\u9ad8\u3002</li> <li>\u540d\u4eba\u6548\u5e94\uff08\u5927V\u95ee\u9898\uff09\uff1a\u62e5\u6709\u5343\u4e07\u751a\u81f3\u4e0a\u4ebf\u7c89\u4e1d\u7684\u5927V\u53d1\u5e03\u4e00\u6761\u52a8\u6001\uff0c\u4f1a\u5f15\u53d1\u5de8\u5927\u7684\u7cfb\u7edf\u538b\u529b\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E7%B1%BB%E4%BC%BC%E5%BE%AE%E5%8D%9A%E6%88%96%E8%80%85%E6%9C%8B%E5%8F%8B%E5%9C%88%E7%9A%84%E2%80%9CFeed%E6%B5%81%E2%80%9D%E7%B3%BB%E7%BB%9F%EF%BC%8C%E5%BA%94%E5%BD%93%E6%80%8E%E4%B9%88%E8%AE%BE%E8%AE%A1%EF%BC%8C%E9%9C%80%E8%A6%81%E8%80%83%E8%99%91%E5%93%AA%E4%BA%9B%E6%96%B9%E9%9D%A2/#_2","title":"\u7cfb\u7edf\u67b6\u6784\u8bbe\u8ba1\uff1a\u63a8\u3001\u62c9\u4e0e\u63a8\u62c9\u7ed3\u5408","text":"<p>Feed\u6d41\u7cfb\u7edf\u7684\u6838\u5fc3\u5728\u4e8e\u5982\u4f55\u5c06\u53d1\u5e03\u8005\uff08Producer\uff09\u7684\u5185\u5bb9\u6709\u6548\u5730\u5206\u53d1\u7ed9\u8ba2\u9605\u8005\uff08Consumer\uff09\u3002\u4e1a\u754c\u4e3b\u8981\u6709\u4e09\u79cd\u6a21\u5f0f\uff1a\u63a8\u6a21\u5f0f\u3001\u62c9\u6a21\u5f0f\u548c\u63a8\u62c9\u7ed3\u5408\u6a21\u5f0f\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E7%B1%BB%E4%BC%BC%E5%BE%AE%E5%8D%9A%E6%88%96%E8%80%85%E6%9C%8B%E5%8F%8B%E5%9C%88%E7%9A%84%E2%80%9CFeed%E6%B5%81%E2%80%9D%E7%B3%BB%E7%BB%9F%EF%BC%8C%E5%BA%94%E5%BD%93%E6%80%8E%E4%B9%88%E8%AE%BE%E8%AE%A1%EF%BC%8C%E9%9C%80%E8%A6%81%E8%80%83%E8%99%91%E5%93%AA%E4%BA%9B%E6%96%B9%E9%9D%A2/#-write-diffusion","title":"\u63a8\u6a21\u5f0f\uff08\u5199\u6269\u6563 - Write Diffusion\uff09","text":"<ul> <li>\u5de5\u4f5c\u539f\u7406\uff1a\u5f53\u4e00\u4e2a\u7528\u6237\u53d1\u5e03\u5185\u5bb9\u65f6\uff0c\u7cfb\u7edf\u4f1a\u4e3b\u52a8\u5c06\u8fd9\u6761\u5185\u5bb9\u201c\u63a8\u9001\u201d\u7ed9\u4ed6\u7684\u6240\u6709\u7c89\u4e1d\u3002\u6bcf\u4e2a\u7528\u6237\u7684\u9996\u9875Feed\u6d41\u662f\u4e00\u4e2a\u72ec\u7acb\u7684\u201c\u6536\u4ef6\u7bb1\u201d\uff08Inbox\uff09\uff0c\u53d1\u5e03\u8005\u53d1\u5e03\u5185\u5bb9\u540e\uff0c\u7cfb\u7edf\u4f1a\u5c06\u8fd9\u6761Feed\u7684ID\u6216\u8005\u5185\u5bb9\u672c\u8eab\u590d\u5236\u5230\u5176\u6240\u6709\u7c89\u4e1d\u7684\u6536\u4ef6\u7bb1\u4e2d\u3002\u7528\u6237\u5237\u65b0Feed\u6d41\u65f6\uff0c\u53ea\u9700\u8bfb\u53d6\u81ea\u5df1\u7684\u6536\u4ef6\u7bb1\u5373\u53ef\u3002</li> <li>\u4f18\u70b9\uff1a<ul> <li>\u8bfb\u53d6\u901f\u5ea6\u5feb\uff1a\u7528\u6237\u83b7\u53d6Feed\u6d41\u65f6\u65e0\u9700\u8fdb\u884c\u590d\u6742\u7684\u805a\u5408\u8ba1\u7b97\uff0c\u76f4\u63a5\u8bfb\u53d6\u5373\u53ef\uff0c\u5ef6\u8fdf\u4f4e\uff0c\u7528\u6237\u4f53\u9a8c\u597d\u3002</li> <li>\u903b\u8f91\u7b80\u5355\uff0c\u9002\u5408\u7c89\u4e1d\u6570\u4e0d\u591a\u7684\u573a\u666f\u3002</li> </ul> </li> <li>\u7f3a\u70b9\uff1a<ul> <li>\u5199\u5165\u538b\u529b\u5927\uff1a\u5bf9\u4e8e\u7c89\u4e1d\u4f17\u591a\u7684\u201c\u5927V\u201d\u7528\u6237\uff0c\u53d1\u5e03\u4e00\u6761\u52a8\u6001\u4f1a\u5bfc\u81f4\u5927\u91cf\u7684\u5199\u64cd\u4f5c\uff0c\u5bf9\u5b58\u50a8\u7cfb\u7edf\u9020\u6210\u5de8\u5927\u538b\u529b\u3002</li> <li>\u5b58\u50a8\u7a7a\u95f4\u6d6a\u8d39\uff1a\u540c\u4e00\u6761Feed\u4f1a\u88ab\u590d\u5236\u591a\u4efd\uff0c\u5360\u7528\u5927\u91cf\u5b58\u50a8\u7a7a\u95f4\u3002</li> <li>\u8d44\u6e90\u6d6a\u8d39\uff1a\u5f88\u591a\u4e0d\u6d3b\u8dc3\u7528\u6237\u7684\u6536\u4ef6\u7bb1\u4e2d\u4f1a\u5806\u79ef\u5927\u91cf\u4ece\u672a\u88ab\u8bfb\u53d6\u7684\u6570\u636e\uff0c\u9020\u6210\u8d44\u6e90\u6d6a\u8d39\u3002</li> </ul> </li> </ul> <p>\u9002\u7528\u573a\u666f\uff1a\u5fae\u4fe1\u670b\u53cb\u5708\u3002\u7531\u4e8e\u597d\u53cb\u6570\u91cf\u6709\u4e0a\u9650\uff08\u4f8b\u59825000\u4eba\uff09\uff0c\u7c89\u4e1d\u57fa\u6570\u76f8\u5bf9\u8f83\u5c0f\uff0c\u5199\u5165\u6269\u6563\u7684\u6210\u672c\u53ef\u63a7\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E7%B1%BB%E4%BC%BC%E5%BE%AE%E5%8D%9A%E6%88%96%E8%80%85%E6%9C%8B%E5%8F%8B%E5%9C%88%E7%9A%84%E2%80%9CFeed%E6%B5%81%E2%80%9D%E7%B3%BB%E7%BB%9F%EF%BC%8C%E5%BA%94%E5%BD%93%E6%80%8E%E4%B9%88%E8%AE%BE%E8%AE%A1%EF%BC%8C%E9%9C%80%E8%A6%81%E8%80%83%E8%99%91%E5%93%AA%E4%BA%9B%E6%96%B9%E9%9D%A2/#-read-diffusion","title":"\u62c9\u6a21\u5f0f\uff08\u8bfb\u6269\u6563 - Read Diffusion\uff09","text":"<ul> <li>\u5de5\u4f5c\u539f\u7406\uff1a\u5f53\u7528\u6237\u5237\u65b0\u9996\u9875Feed\u6d41\u65f6\uff0c\u7cfb\u7edf\u4f1a\u4e3b\u52a8\u53bb\u201c\u62c9\u53d6\u201d\u4ed6\u6240\u5173\u6ce8\u7684\u6240\u6709\u7528\u6237\u53d1\u5e03\u7684\u6700\u65b0\u5185\u5bb9\u3002\u7cfb\u7edf\u9700\u8981\u5b9e\u65f6\u5730\u67e5\u8be2\u7528\u6237\u5173\u6ce8\u5217\u8868\uff0c\u7136\u540e\u805a\u5408\u8fd9\u4e9b\u7528\u6237\u53d1\u5e03\u7684Feed\uff0c\u6309\u65f6\u95f4\u6392\u5e8f\u540e\u8fd4\u56de\u3002</li> <li>\u4f18\u70b9\uff1a<ul> <li>\u5199\u5165\u7b80\u5355\uff1a\u53d1\u5e03\u8005\u53d1\u5e03\u5185\u5bb9\u65f6\uff0c\u53ea\u9700\u5728\u81ea\u5df1\u7684\u201c\u53d1\u4ef6\u7bb1\u201d\uff08Outbox\uff09\u4e2d\u589e\u52a0\u4e00\u6761\u8bb0\u5f55\u5373\u53ef\uff0c\u5199\u5165\u6210\u672c\u4f4e\u3002</li> <li>\u8282\u7701\u5b58\u50a8\u7a7a\u95f4\uff1aFeed\u53ea\u5b58\u50a8\u4e00\u4efd\uff0c\u4e0d\u4f1a\u6709\u5197\u4f59\u6570\u636e\u3002</li> </ul> </li> <li>\u7f3a\u70b9\uff1a<ul> <li>\u8bfb\u53d6\u590d\u6742\u4e14\u6162\uff1a\u7528\u6237\u83b7\u53d6Feed\u6d41\u65f6\uff0c\u9700\u8981\u8fdb\u884c\u591a\u6b21\u67e5\u8be2\u548c\u5927\u91cf\u7684\u5b9e\u65f6\u8ba1\u7b97\uff0c\u5ef6\u8fdf\u9ad8\u3002</li> <li>\u70ed\u70b9\u7528\u6237\u95ee\u9898\uff1a\u5982\u679c\u4e00\u4e2a\u7528\u6237\u5173\u6ce8\u4e86\u4e0a\u5343\u4eba\uff0c\u6bcf\u6b21\u5237\u65b0\u90fd\u9700\u8981\u8fdb\u884c\u5927\u91cf\u7684\u62c9\u53d6\u548c\u6392\u5e8f\u64cd\u4f5c\uff0c\u5bf9\u6570\u636e\u5e93\u548c\u670d\u52a1\u5668\u538b\u529b\u5de8\u5927\u3002</li> </ul> </li> </ul> <p>\u9002\u7528\u573a\u666f\uff1a\u65e9\u671f\u7684Twitter\u548c\u5fae\u535a\u66fe\u91c7\u7528\u8fc7\u6b64\u6a21\u5f0f\uff0c\u4f46\u968f\u7740\u7528\u6237\u91cf\u548c\u5173\u6ce8\u5173\u7cfb\u7684\u590d\u6742\u5316\uff0c\u7eaf\u62c9\u6a21\u5f0f\u5df2\u4e0d\u80fd\u6ee1\u8db3\u6027\u80fd\u8981\u6c42\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E7%B1%BB%E4%BC%BC%E5%BE%AE%E5%8D%9A%E6%88%96%E8%80%85%E6%9C%8B%E5%8F%8B%E5%9C%88%E7%9A%84%E2%80%9CFeed%E6%B5%81%E2%80%9D%E7%B3%BB%E7%BB%9F%EF%BC%8C%E5%BA%94%E5%BD%93%E6%80%8E%E4%B9%88%E8%AE%BE%E8%AE%A1%EF%BC%8C%E9%9C%80%E8%A6%81%E8%80%83%E8%99%91%E5%93%AA%E4%BA%9B%E6%96%B9%E9%9D%A2/#hybrid","title":"\u63a8\u62c9\u7ed3\u5408\u6a21\u5f0f\uff08Hybrid\uff09","text":"<p>\u8fd9\u662f\u76ee\u524d\u4e3b\u6d41\u793e\u4ea4\u5e73\u53f0\uff08\u5982\u5fae\u535a\uff09\u91c7\u7528\u7684\u65b9\u6848\uff0c\u5b83\u7ed3\u5408\u4e86\u63a8\u548c\u62c9\u7684\u4f18\u70b9\uff0c\u9488\u5bf9\u4e0d\u540c\u7c7b\u578b\u7684\u7528\u6237\u91c7\u7528\u4e0d\u540c\u7684\u7b56\u7565\u3002</p> <ul> <li> <p>\u6838\u5fc3\u601d\u60f3\uff1a</p> <ul> <li>\u666e\u901a\u7528\u6237\uff08\u7c89\u4e1d\u91cf\u5c11\uff09\uff1a\u91c7\u7528\u63a8\u6a21\u5f0f\u3002\u5f53\u4ed6\u4eec\u53d1\u5e03\u5185\u5bb9\u65f6\uff0c\u76f4\u63a5\u5c06\u5185\u5bb9ID\u63a8\u9001\u5230\u5176\u7c89\u4e1d\u7684\u6536\u4ef6\u7bb1\u4e2d\u3002</li> <li>\u5927V\u7528\u6237\uff08\u7c89\u4e1d\u91cf\u5de8\u5927\uff09\uff1a\u91c7\u7528\u62c9\u6a21\u5f0f\u3002\u5927V\u53d1\u5e03\u5185\u5bb9\u65f6\uff0c\u53ea\u5199\u5165\u81ea\u5df1\u7684\u53d1\u4ef6\u7bb1\u3002\u5f53\u7c89\u4e1d\u5237\u65b0Feed\u6d41\u65f6\uff0c\u518d\u53bb\u62c9\u53d6\u6240\u5173\u6ce8\u5927V\u7684\u5185\u5bb9\u3002</li> <li>\u6d3b\u8dc3\u7c89\u4e1d\uff1a\u5bf9\u4e8e\u5927V\u7684\u6d3b\u8dc3\u7c89\u4e1d\uff0c\u53ef\u4ee5\u91c7\u7528\u63a8\u6a21\u5f0f\uff0c\u5c06\u5185\u5bb9\u5b9e\u65f6\u63a8\u9001\u7ed9\u4ed6\u4eec\uff0c\u4fdd\u8bc1\u8fd9\u90e8\u5206\u6838\u5fc3\u7528\u6237\u7684\u4f53\u9a8c\u3002</li> </ul> </li> <li> <p>\u8bfb\u53d6\u6d41\u7a0b\uff1a\u7528\u6237\u5237\u65b0Feed\u6d41\u65f6\uff0c\u7cfb\u7edf\u9700\u8981\uff1a</p> <ol> <li>\u8bfb\u53d6\u81ea\u5df1\u7684\u6536\u4ef6\u7bb1\uff08\u5305\u542b\u4e86\u6240\u6709\u5173\u6ce8\u7684\u666e\u901a\u7528\u6237\u63a8\u9001\u6765\u7684\u5185\u5bb9\uff09\u3002</li> <li>\u4e3b\u52a8\u62c9\u53d6\u6240\u5173\u6ce8\u7684\u5927V\u7684\u53d1\u4ef6\u7bb1\u4e2d\u7684\u6700\u65b0\u5185\u5bb9\u3002</li> <li>\u5c06\u4e24\u90e8\u5206\u5185\u5bb9\u8fdb\u884c\u5408\u5e76\uff0c\u5e76\u6309\u65f6\u95f4\u6392\u5e8f\uff0c\u6700\u7ec8\u5448\u73b0\u7ed9\u7528\u6237\u3002</li> </ol> </li> </ul> <p>\u8fd9\u79cd\u6a21\u5f0f\u6709\u6548\u5730\u89e3\u51b3\u4e86\u5927V\u5e26\u6765\u7684\u5199\u5165\u98ce\u66b4\u95ee\u9898\uff0c\u540c\u65f6\u4fdd\u8bc1\u4e86\u5927\u90e8\u5206\u7528\u6237\u80fd\u591f\u5feb\u901f\u5730\u83b7\u53d6Feed\u6d41\uff0c\u5b9e\u73b0\u4e86\u6027\u80fd\u548c\u4f53\u9a8c\u7684\u5e73\u8861\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E7%B1%BB%E4%BC%BC%E5%BE%AE%E5%8D%9A%E6%88%96%E8%80%85%E6%9C%8B%E5%8F%8B%E5%9C%88%E7%9A%84%E2%80%9CFeed%E6%B5%81%E2%80%9D%E7%B3%BB%E7%BB%9F%EF%BC%8C%E5%BA%94%E5%BD%93%E6%80%8E%E4%B9%88%E8%AE%BE%E8%AE%A1%EF%BC%8C%E9%9C%80%E8%A6%81%E8%80%83%E8%99%91%E5%93%AA%E4%BA%9B%E6%96%B9%E9%9D%A2/#_3","title":"\u6570\u636e\u5b58\u50a8\u8bbe\u8ba1","text":"<p>Feed\u6d41\u7cfb\u7edf\u7684\u6570\u636e\u5b58\u50a8\u9700\u8981\u8003\u8651\u9ad8\u5e76\u53d1\u8bfb\u5199\u548c\u53ef\u6269\u5c55\u6027\u3002</p> <ul> <li>Feed\u5185\u5bb9\u5b58\u50a8\uff1a\u7528\u6237\u53d1\u5e03\u7684\u5177\u4f53\u5185\u5bb9\uff08\u6587\u5b57\u3001\u56fe\u7247\u3001\u89c6\u9891\u7b49\uff09\u53ef\u4ee5\u5b58\u50a8\u5728\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf\uff08\u5982HDFS\uff09\u6216\u5bf9\u8c61\u5b58\u50a8\uff08\u5982S3\uff09\u4e2d\u3002\u6570\u636e\u5e93\u4e2d\u53ea\u5b58\u50a8\u5176\u5143\u6570\u636e\u548c\u7d22\u5f15\uff0c\u5982<code>feed_id</code>, <code>user_id</code>, <code>content_url</code>, <code>create_time</code>\u7b49\u3002\u8fd9\u90e8\u5206\u6570\u636e\u9700\u8981\u6c38\u4e45\u4fdd\u5b58\uff0c\u53ef\u4ee5\u6309<code>user_id</code>\u8fdb\u884c\u5206\u5e93\u5206\u8868\u3002</li> <li>\u7528\u6237\u5173\u7cfb\u5b58\u50a8\uff1a\u5173\u6ce8\u5173\u7cfb\uff08\u8c01\u5173\u6ce8\u4e86\u8c01\uff0c\u8c01\u7684\u7c89\u4e1d\u662f\u8c01\uff09\u6570\u636e\u91cf\u5de8\u5927\uff0c\u4e14\u67e5\u8be2\u9891\u7e41\u3002\u9002\u5408\u4f7f\u7528NoSQL\u6570\u636e\u5e93\uff0c\u5982Cassandra\u6216HBase\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528MySQL\u8fdb\u884c\u5206\u5e93\u5206\u8868\u3002</li> <li>\u6536\u4ef6\u7bb1/\u53d1\u4ef6\u7bb1\uff08Timeline\u5b58\u50a8\uff09\uff1a\u8fd9\u662fFeed\u6d41\u7684\u6838\u5fc3\uff0c\u9700\u8981\u9ad8\u901f\u7684\u8bfb\u5199\u80fd\u529b\u3002\u901a\u5e38\u4f7f\u7528\u5206\u5e03\u5f0f\u7f13\u5b58\uff08\u5982Redis\uff09\u6765\u5b58\u50a8\u3002 Redis\u7684Sorted Set\u6216List\u6570\u636e\u7ed3\u6784\u975e\u5e38\u9002\u5408\u5b58\u50a8\u6709\u65f6\u5e8f\u5173\u7cfb\u7684Feed ID\u5217\u8868\u3002\u7531\u4e8e\u7f13\u5b58\u5bb9\u91cf\u6709\u9650\uff0c\u4e00\u822c\u53ea\u7f13\u5b58\u8fd1\u671f\u7684\u70ed\u95e8\u6570\u636e\uff08\u5982\u4e00\u5468\u5185\uff09\u3002\u5386\u53f2\u6570\u636e\u53ef\u4ee5\u5f52\u6863\u5230\u6301\u4e45\u5316\u5b58\u50a8\u4e2d\uff0c\u5982HBase\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E7%B1%BB%E4%BC%BC%E5%BE%AE%E5%8D%9A%E6%88%96%E8%80%85%E6%9C%8B%E5%8F%8B%E5%9C%88%E7%9A%84%E2%80%9CFeed%E6%B5%81%E2%80%9D%E7%B3%BB%E7%BB%9F%EF%BC%8C%E5%BA%94%E5%BD%93%E6%80%8E%E4%B9%88%E8%AE%BE%E8%AE%A1%EF%BC%8C%E9%9C%80%E8%A6%81%E8%80%83%E8%99%91%E5%93%AA%E4%BA%9B%E6%96%B9%E9%9D%A2/#_4","title":"\u5173\u952e\u6280\u672f\u4e0e\u4f18\u5316\u7b56\u7565","text":"<p>\u4e3a\u4e86\u6784\u5efa\u4e00\u4e2a\u9ad8\u6027\u80fd\u7684Feed\u6d41\u7cfb\u7edf\uff0c\u8fd8\u9700\u8981\u8003\u8651\u4ee5\u4e0b\u6280\u672f\u70b9\uff1a</p> <ul> <li>\u5f02\u6b65\u5904\u7406\uff1a\u5bf9\u4e8e\u63a8\u6a21\u5f0f\u4e2d\u7684\u5199\u5165\u6269\u6563\u64cd\u4f5c\uff0c\u4e0d\u5e94\u540c\u6b65\u8fdb\u884c\uff0c\u800c\u5e94\u901a\u8fc7\u6d88\u606f\u961f\u5217\uff08\u5982Kafka\u3001RabbitMQ\uff09\u8fdb\u884c\u5f02\u6b65\u89e3\u8026\u3002\u53d1\u5e03\u8005\u53d1\u5e03\u5185\u5bb9\u540e\uff0c\u5c06\u4e00\u4e2a\u6d88\u606f\u653e\u5165\u961f\u5217\uff0c\u7531\u540e\u53f0\u7684\u591a\u4e2a\u6d88\u8d39\u8005\u53bb\u6267\u884c\u63a8\u9001\u4efb\u52a1\uff0c\u8fd9\u6837\u53ef\u4ee5\u6781\u5927\u5730\u63d0\u9ad8\u5199\u5165\u63a5\u53e3\u7684\u54cd\u5e94\u901f\u5ea6\u548c\u7cfb\u7edf\u7684\u541e\u5410\u91cf\u3002</li> <li>\u7f13\u5b58\u7b56\u7565\uff1a\u7f13\u5b58\u662f\u63d0\u5347Feed\u6d41\u7cfb\u7edf\u6027\u80fd\u7684\u5173\u952e\u3002\u9664\u4e86Timeline\u7f13\u5b58\u5916\uff0c\u8fd8\u5e94\u8be5\u5bf9\u7528\u6237\u57fa\u672c\u4fe1\u606f\u3001\u70ed\u95e8Feed\u5185\u5bb9\u7b49\u8fdb\u884c\u7f13\u5b58\u3002</li> <li>\u5206\u9875\u4e0e\u65e0\u9650\u6eda\u52a8\uff1aFeed\u6d41\u901a\u5e38\u91c7\u7528\u201c\u65e0\u9650\u6eda\u52a8\u201d\u7684\u65b9\u5f0f\u52a0\u8f7d\uff0c\u540e\u7aef\u9700\u8981\u5b9e\u73b0\u9ad8\u6548\u7684\u5206\u9875\u673a\u5236\u3002\u57fa\u4e8e\u6e38\u6807\uff08Cursor-based Pagination\uff09\u7684\u5206\u9875\u65b9\u5f0f\u6bd4\u4f20\u7edf\u7684\u57fa\u4e8e\u504f\u79fb\u91cf\uff08Offset-based Pagination\uff09\u66f4\u9002\u5408Feed\u6d41\u573a\u666f\uff0c\u56e0\u4e3a\u5b83\u53ef\u4ee5\u907f\u514d\u5728\u6570\u636e\u4e0d\u65ad\u66f4\u65b0\u65f6\u51fa\u73b0\u91cd\u590d\u6216\u9057\u6f0f\u7684\u95ee\u9898\u3002</li> <li>\u6392\u5e8f\u4e0e\u63a8\u8350\uff1a<ul> <li>\u65f6\u95f4\u5e8f\uff08Timeline\uff09\uff1a\u8fd9\u662f\u6700\u57fa\u7840\u7684\u6392\u5e8f\u65b9\u5f0f\uff0c\u5982\u670b\u53cb\u5708\u3002</li> <li>\u667a\u80fd\u6392\u5e8f/\u63a8\u8350\uff1a\u73b0\u4ee3Feed\u6d41\u7cfb\u7edf\uff08\u5982\u5fae\u535a\u7684\u201c\u70ed\u95e8\u201d\u6216\u6296\u97f3\uff09\u4f1a\u5f15\u5165\u63a8\u8350\u7b97\u6cd5\uff0c\u6839\u636e\u7528\u6237\u7684\u5174\u8da3\u3001\u4e92\u52a8\u884c\u4e3a\u7b49\u5bf9Feed\u8fdb\u884c\u4e2a\u6027\u5316\u6392\u5e8f\uff0c\u63d0\u5347\u7528\u6237\u7c98\u6027\u3002\u8fd9\u9700\u8981\u4e00\u4e2a\u72ec\u7acb\u7684\u63a8\u8350\u5f15\u64ce\u7cfb\u7edf\u6765\u652f\u6301\u3002</li> </ul> </li> <li>\u641c\u7d22\u529f\u80fd\uff1a\u867d\u7136Feed\u6d41\u672c\u8eab\u4e0d\u76f4\u63a5\u63d0\u4f9b\u641c\u7d22\uff0c\u4f46\u4e00\u4e2a\u5b8c\u6574\u7684\u793e\u4ea4\u4ea7\u54c1\u5fc5\u987b\u5177\u5907\u641c\u7d22\u529f\u80fd\uff0c\u4ee5\u4fbf\u7528\u6237\u53d1\u73b0\u4fe1\u606f\u3002\u8fd9\u901a\u5e38\u9700\u8981\u5f15\u5165\u641c\u7d22\u5f15\u64ce\uff08\u5982Elasticsearch\uff09\u6765\u5bf9Feed\u5185\u5bb9\u8fdb\u884c\u7d22\u5f15\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E9%99%90%E6%B5%81%E6%80%9D%E8%B7%AF/","title":"\u9650\u6d41\u601d\u8def","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E9%99%90%E6%B5%81%E6%80%9D%E8%B7%AF/#_1","title":"\u56db\u79cd\u57fa\u672c\u9650\u6d41\u7b97\u6cd5 (\u5355\u673a\u9650\u6d41)","text":"<p>\u56fa\u5b9a\u7a97\u53e3\u7b97\u6cd5</p> <ul> <li>\u539f\u7406\uff1a\u5c06\u65f6\u95f4\u5212\u5206\u4e3a\u56fa\u5b9a\u7684\u201c\u7a97\u53e3\u201d\uff08\u4f8b\u5982\uff0c\u6bcf\u79d2\u4e00\u4e2a\u7a97\u53e3\uff09\uff0c\u5728\u6bcf\u4e2a\u7a97\u53e3\u5185\u7ef4\u62a4\u4e00\u4e2a\u8ba1\u6570\u5668\u3002\u5f53\u8bf7\u6c42\u5230\u6765\u65f6\uff0c\u8ba1\u6570\u5668\u52a0\u4e00\u3002\u5982\u679c\u8ba1\u6570\u5668\u8d85\u8fc7\u9608\u503c\uff0c\u5219\u62d2\u7edd\u8bf7\u6c42\u3002\u5f53\u65f6\u95f4\u7a97\u53e3\u7ed3\u675f\u65f6\uff0c\u8ba1\u6570\u5668\u91cd\u7f6e\u4e3a\u96f6\u3002</li> <li>\u4f18\u70b9\uff1a<ul> <li>\u5b9e\u73b0\u975e\u5e38\u7b80\u5355\uff0c\u5bb9\u6613\u7406\u89e3\u3002</li> </ul> </li> <li>\u7f3a\u70b9\uff1a<ul> <li>\u5b58\u5728\u4e34\u754c\u7a81\u53d8\u95ee\u9898\uff1a\u5728\u4e24\u4e2a\u7a97\u53e3\u7684\u8fb9\u754c\u5904\uff0c\u53ef\u80fd\u627f\u53d7\u4e24\u500d\u4e8e\u9608\u503c\u7684\u6d41\u91cf\u3002\u4f8b\u5982\uff0c\u9650\u6d41100 QPS\uff0c\u4e00\u4e2a\u8bf7\u6c42\u5728\u7b2c1\u79d2\u7684\u6700\u540e100\u6beb\u79d2\u5185\u53d1\u8d77\u4e86100\u4e2a\u8bf7\u6c42\uff0c\u5e76\u5728\u7b2c2\u79d2\u7684\u524d100\u6beb\u79d2\u5185\u53c8\u53d1\u8d77\u4e86100\u4e2a\u8bf7\u6c42\uff0c\u8fd9200\u4e2a\u8bf7\u6c42\u5728200\u6beb\u79d2\u5185\u662f\u5408\u6cd5\u7684\uff0c\u4f46\u5b9e\u9645\u8d1f\u8f7d\u5f88\u9ad8\u3002</li> <li>\u6d41\u91cf\u63a7\u5236\u4e0d\u5e73\u6ed1\uff0c\u65e0\u6cd5\u5e94\u5bf9\u7a81\u53d1\u6d41\u91cf\u3002</li> </ul> </li> </ul> <p>\u6ed1\u52a8\u7a97\u53e3\u7b97\u6cd5</p> <ul> <li>\u539f\u7406\uff1a\u5bf9\u56fa\u5b9a\u7a97\u53e3\u7b97\u6cd5\u7684\u6539\u8fdb\u3002\u5b83\u5c06\u4e00\u4e2a\u5927\u7684\u65f6\u95f4\u7a97\u53e3\uff08\u59821\u5206\u949f\uff09\u5212\u5206\u4e3a\u591a\u4e2a\u66f4\u5c0f\u7684\u5b50\u7a97\u53e3\uff08\u598260\u4e2a1\u79d2\u7684\u5b50\u7a97\u53e3\uff09\u3002\u968f\u7740\u65f6\u95f4\u7684\u63a8\u79fb\uff0c\u7a97\u53e3\u4f1a\u201c\u6ed1\u52a8\u201d\uff1a\u6bcf\u8fc71\u79d2\uff0c\u4e00\u4e2a\u65b0\u7684\u5b50\u7a97\u53e3\u88ab\u6dfb\u52a0\u8fdb\u6765\uff0c\u540c\u65f6\u6700\u65e7\u7684\u4e00\u4e2a\u5b50\u7a97\u53e3\u88ab\u79fb\u9664\u3002\u8bf7\u6c42\u603b\u6570\u662f\u5f53\u524d\u6240\u6709\u5b50\u7a97\u53e3\u5185\u7684\u8bf7\u6c42\u8ba1\u6570\u4e4b\u548c\u3002</li> <li>\u4f18\u70b9\uff1a<ul> <li>\u76f8\u6bd4\u56fa\u5b9a\u7a97\u53e3\uff0c\u6d41\u91cf\u63a7\u5236\u66f4\u5e73\u6ed1\u3001\u66f4\u7cbe\u786e\u3002</li> <li>\u6709\u6548\u89e3\u51b3\u4e86\u56fa\u5b9a\u7a97\u53e3\u7684\u4e34\u754c\u7a81\u53d8\u95ee\u9898\u3002</li> </ul> </li> <li>\u7f3a\u70b9\uff1a<ul> <li>\u5b9e\u73b0\u76f8\u5bf9\u590d\u6742\u3002</li> <li>\u9700\u8981\u5b58\u50a8\u66f4\u591a\u7684\u6570\u636e\uff08\u6bcf\u4e2a\u5b50\u7a97\u53e3\u7684\u8ba1\u6570\uff09\uff0c\u5185\u5b58\u6d88\u8017\u66f4\u5927\u3002</li> </ul> </li> </ul> <p>\u6f0f\u6876\u7b97\u6cd5</p> <ul> <li>\u539f\u7406\uff1a\u5c06\u8bf7\u6c42\u60f3\u8c61\u6210\u6c34\u6d41\uff0c\u7cfb\u7edf\u662f\u4e00\u4e2a\u56fa\u5b9a\u5bb9\u91cf\u3001\u56fa\u5b9a\u6d41\u51fa\u901f\u7387\u7684\u201c\u6f0f\u6876\u201d\u3002\u65e0\u8bba\u6d41\u5165\u901f\u7387\u6709\u591a\u5feb\uff0c\u6d41\u51fa\u7684\u901f\u7387\u59cb\u7ec8\u662f\u6052\u5b9a\u7684\u3002\u5f53\u201c\u6876\u201d\u6ee1\u4e86\u4e4b\u540e\uff0c\u65b0\u6d41\u5165\u7684\u8bf7\u6c42\u5c06\u88ab\u76f4\u63a5\u4e22\u5f03\u3002</li> <li>\u4f18\u70b9\uff1a<ul> <li>\u53ef\u4ee5\u5f3a\u884c\u5e73\u6ed1\u6d41\u91cf\uff0c\u4f7f\u5f97\u8bf7\u6c42\u4ee5\u4e00\u4e2a\u6052\u5b9a\u7684\u901f\u7387\u88ab\u5904\u7406\u3002</li> <li>\u6709\u6548\u9632\u6b62\u7cfb\u7edf\u88ab\u7a81\u53d1\u6d41\u91cf\u51b2\u57ae\u3002</li> </ul> </li> <li>\u7f3a\u70b9\uff1a<ul> <li>\u65e0\u6cd5\u5e94\u5bf9\u7a81\u53d1\u6d41\u91cf\u3002\u5373\u4f7f\u7cfb\u7edf\u5f53\u524d\u5904\u4e8e\u7a7a\u95f2\u72b6\u6001\uff0c\u4e5f\u5fc5\u987b\u4ee5\u56fa\u5b9a\u7684\u6162\u901f\u7387\u5904\u7406\u8bf7\u6c42\uff0c\u5bfc\u81f4\u8d44\u6e90\u6d6a\u8d39\u3002</li> <li>\u4e0d\u5177\u5907\u7075\u6d3b\u6027\uff0c\u6d41\u51fa\u901f\u7387\u56fa\u5b9a\uff0c\u65e0\u6cd5\u52a8\u6001\u8c03\u6574\u3002</li> </ul> </li> </ul> <p>\u4ee4\u724c\u6876\u7b97\u6cd5</p> <ul> <li>\u539f\u7406\uff1a\u7cfb\u7edf\u4ee5\u4e00\u4e2a\u56fa\u5b9a\u7684\u901f\u7387\u5411\u4e00\u4e2a\u56fa\u5b9a\u5bb9\u91cf\u7684\u201c\u4ee4\u724c\u6876\u201d\u4e2d\u653e\u5165\u4ee4\u724c\u3002\u6bcf\u4e2a\u8fdb\u6765\u7684\u8bf7\u6c42\u90fd\u9700\u8981\u5148\u4ece\u6876\u4e2d\u83b7\u53d6\u4e00\u4e2a\u4ee4\u724c\uff0c\u83b7\u53d6\u6210\u529f\u624d\u80fd\u88ab\u5904\u7406\uff1b\u5982\u679c\u6876\u5185\u6ca1\u6709\u4ee4\u724c\uff0c\u5219\u8bf7\u6c42\u88ab\u62d2\u7edd\u6216\u6392\u961f\u7b49\u5f85\u3002</li> <li>\u4f18\u70b9\uff1a<ul> <li>\u65e2\u80fd\u9650\u6d41\uff0c\u53c8\u80fd\u5e94\u5bf9\u7a81\u53d1\u6d41\u91cf\u3002\u5f53\u6d41\u91cf\u8f83\u5c0f\u65f6\uff0c\u4ee4\u724c\u4f1a\u7d2f\u79ef\u8d77\u6765\uff1b\u5f53\u7a81\u53d1\u6d41\u91cf\u5230\u6765\u65f6\uff0c\u7d2f\u79ef\u7684\u4ee4\u724c\u53ef\u4ee5\u4e00\u6b21\u6027\u88ab\u6d88\u8017\uff0c\u4ece\u800c\u5141\u8bb8\u7cfb\u7edf\u5728\u77ed\u65f6\u95f4\u5185\u5904\u7406\u8d85\u8fc7\u5e73\u5747\u901f\u7387\u7684\u8bf7\u6c42\uff08\u7a81\u53d1\u91cf\u4e0d\u80fd\u8d85\u8fc7\u6876\u7684\u5bb9\u91cf\uff09\u3002</li> <li>\u7075\u6d3b\u6027\u9ad8\uff0c\u53ef\u4ee5\u901a\u8fc7\u8c03\u6574\u4ee4\u724c\u751f\u6210\u901f\u7387\u548c\u6876\u5bb9\u91cf\u6765\u63a7\u5236\u6d41\u91cf\u3002</li> </ul> </li> <li>\u7f3a\u70b9\uff1a<ul> <li>\u5b9e\u73b0\u6bd4\u6f0f\u6876\u7b97\u6cd5\u7a0d\u590d\u6742\u3002</li> <li>\u5982\u679c\u4ee4\u724c\u751f\u6210\u901f\u7387\u6301\u7eed\u9ad8\u4e8e\u6d88\u8017\u901f\u7387\uff0c\u4f1a\u5bfc\u81f4\u4ee4\u724c\u7d2f\u79ef\uff0c\u53ef\u80fd\u9020\u6210\u8d44\u6e90\u6d6a\u8d39\u3002</li> </ul> </li> </ul> \u7b97\u6cd5 \u4f18\u70b9 \u7f3a\u70b9 \u9002\u5408\u573a\u666f \u56fa\u5b9a\u7a97\u53e3 \u5b9e\u73b0\u7b80\u5355\uff0c\u5bb9\u6613\u7406\u89e3\u548c\u90e8\u7f72\u3002 \u5b58\u5728\u4e34\u754c\u7a81\u53d8\u95ee\u9898\uff0c\u6d41\u91cf\u63a7\u5236\u4e0d\u5e73\u6ed1\u3002 \u5bf9\u6d41\u91cf\u5e73\u6ed1\u5ea6\u8981\u6c42\u4e0d\u9ad8\u7684\u7a33\u5b9a\u573a\u666f\u3002 \u6ed1\u52a8\u7a97\u53e3 \u6d41\u91cf\u63a7\u5236\u66f4\u5e73\u6ed1\u3001\u7cbe\u786e\uff0c\u89e3\u51b3\u4e86\u4e34\u754c\u95ee\u9898\u3002 \u5b9e\u73b0\u590d\u6742\uff0c\u5185\u5b58\u6d88\u8017\u8f83\u9ad8\u3002 \u9700\u8981\u5e73\u6ed1\u5904\u7406\u7a81\u53d1\u6d41\u91cf\u7684\u573a\u666f\u3002 \u6f0f\u6876\u7b97\u6cd5 \u5f3a\u5236\u5e73\u6ed1\u6d41\u91cf\uff0c\u8f93\u51fa\u901f\u7387\u6052\u5b9a\u3002 \u65e0\u6cd5\u5e94\u5bf9\u7a81\u53d1\u6d41\u91cf\uff0c\u7f3a\u4e4f\u7075\u6d3b\u6027\uff0c\u53ef\u80fd\u6d6a\u8d39\u8d44\u6e90\u3002 \u9700\u8981\u56fa\u5b9a\u8f93\u51fa\u901f\u7387\u7684\u573a\u666f\uff0c\u5982API\u7f51\u5173\u7684\u6d41\u91cf\u6574\u5f62\u3002 \u4ee4\u724c\u6876 \u65e2\u80fd\u9650\u6d41\u53c8\u80fd\u5e94\u5bf9\u7a81\u53d1\u6d41\u91cf\uff0c\u975e\u5e38\u7075\u6d3b\u3002 \u5b9e\u73b0\u76f8\u5bf9\u590d\u6742\uff0c\u9700\u8981\u7cbe\u786e\u7684\u65f6\u95f4\u63a7\u5236\u3002 \u7edd\u5927\u591a\u6570\u9700\u8981\u9650\u6d41\u4e14\u5141\u8bb8\u4e00\u5b9a\u7a81\u53d1\u6d41\u91cf\u7684\u573a\u666f\u3002"},{"location":"%E9%9D%A2%E7%BB%8F/%E5%9C%BA%E6%99%AF%E9%A2%98/%E9%99%90%E6%B5%81%E6%80%9D%E8%B7%AF/#_2","title":"\u5206\u5e03\u5f0f\u9650\u6d41\u65b9\u6848","text":"<p>\u57fa\u4e8e\u4e2d\u5fc3\u5316\u5b58\u50a8\u7684\u65b9\u6848 (\u5982 Redis)</p> <ul> <li>\u539f\u7406\uff1a\u5c06\u9650\u6d41\u7684\u8ba1\u6570\u5668\u6216\u4ee4\u724c\u6876\u72b6\u6001\u5b58\u50a8\u5728\u4e00\u4e2a\u4e2d\u5fc3\u5316\u7684\u670d\u52a1\uff08\u5982 Redis\uff09\u4e2d\u3002\u6240\u6709\u670d\u52a1\u5b9e\u4f8b\u5728\u5904\u7406\u8bf7\u6c42\u524d\uff0c\u90fd\u5148\u5411\u8be5\u4e2d\u5fc3\u5316\u670d\u52a1\u7533\u8bf7\u8bb8\u53ef\u3002\u901a\u5e38\u5229\u7528 Redis \u7684\u539f\u5b50\u64cd\u4f5c\uff08\u5982 <code>INCR</code>\uff09\u6216 Lua \u811a\u672c\u6765\u5b9e\u73b0\u3002</li> <li>\u5b58\u5728\u95ee\u9898\uff1a<ul> <li>\u6027\u80fd\u74f6\u9888\uff1a\u6240\u6709\u8bf7\u6c42\u90fd\u4f9d\u8d56\u4e2d\u5fc3\u5316\u670d\u52a1\uff0c\u53ef\u80fd\u5bfc\u81f4\u5176\u6210\u4e3a\u7cfb\u7edf\u74f6\u9888\u3002</li> <li>\u5355\u70b9\u6545\u969c\uff1a\u5982\u679c\u4e2d\u5fc3\u5316\u670d\u52a1\u5b95\u673a\uff0c\u6574\u4e2a\u9650\u6d41\u529f\u80fd\u5c06\u5931\u6548\u3002</li> <li>\u7f51\u7edc\u5ef6\u8fdf\uff1a\u6bcf\u6b21\u8bf7\u6c42\u90fd\u9700\u8981\u4e00\u6b21\u7f51\u7edc\u8c03\u7528\uff0c\u589e\u52a0\u4e86\u54cd\u5e94\u65f6\u95f4\u3002</li> </ul> </li> </ul> <p>\u57fa\u4e8e\u8d1f\u8f7d\u5747\u8861\u7684\u672c\u5730\u9650\u6d41\u65b9\u6848</p> <ul> <li>\u539f\u7406\uff1a\u901a\u8fc7\u8d1f\u8f7d\u5747\u8861\u5668\uff08\u5982 Nginx\uff09\u5c06\u8bf7\u6c42\u5747\u5300\u5206\u53d1\u5230\u5404\u4e2a\u670d\u52a1\u5b9e\u4f8b\u4e0a\u3002\u6bcf\u4e2a\u5b9e\u4f8b\u5404\u81ea\u7ef4\u62a4\u4e00\u4e2a\u72ec\u7acb\u7684\u5355\u673a\u9650\u6d41\u5668\uff08\u5982\u4ee4\u724c\u6876\uff09\u3002</li> <li>\u5b58\u5728\u95ee\u9898\uff1a<ul> <li>\u7cbe\u5ea6\u95ee\u9898\uff1a\u8fd9\u5e76\u975e\u5168\u5c40\u7cbe\u786e\u9650\u6d41\u3002\u5982\u679c\u6d41\u91cf\u5206\u914d\u4e0d\u5747\uff0c\u53ef\u80fd\u5bfc\u81f4\u67d0\u4e9b\u5b9e\u4f8b\u8fc7\u8f7d\u800c\u5176\u4ed6\u5b9e\u4f8b\u7a7a\u95f2\uff0c\u6574\u4e2a\u7cfb\u7edf\u7684\u603b\u8bf7\u6c42\u91cf\u53ef\u80fd\u8d85\u8fc7\u9884\u8bbe\u7684\u5168\u5c40\u9608\u503c\u3002</li> <li>\u52a8\u6001\u6269\u7f29\u5bb9\u9002\u5e94\u6027\u5dee\uff1a\u5f53\u670d\u52a1\u5b9e\u4f8b\u6570\u91cf\u53d8\u5316\u65f6\uff0c\u9700\u8981\u91cd\u65b0\u8c03\u6574\u6bcf\u4e2a\u5b9e\u4f8b\u7684\u9650\u6d41\u914d\u7f6e\u3002</li> <li>\u8d1f\u8f7d\u5747\u8861\u5668\u5355\u70b9\u6545\u969c\uff1a\u8d1f\u8f7d\u5747\u8861\u5668\u672c\u8eab\u53ef\u80fd\u6210\u4e3a\u5355\u70b9\u3002</li> </ul> </li> </ul> <p>\u57fa\u4e8e\u5206\u5e03\u5f0f\u534f\u8c03\u670d\u52a1\u7684\u65b9\u6848</p> <ul> <li>\u539f\u7406\uff1a\u5229\u7528 ZooKeeper \u6216 etcd \u8fd9\u7c7b\u670d\u52a1\u7684\u5206\u5e03\u5f0f\u9501\u6216\u987a\u5e8f\u8282\u70b9\u7279\u6027\u6765\u5b9e\u73b0\u5168\u5c40\u9650\u6d41\u3002\u4f8b\u5982\uff0c\u5728 ZooKeeper \u4e2d\u521b\u5efa\u4e00\u4e2a\u8282\u70b9\u6765\u5b58\u50a8\u4ee4\u724c\u6570\u91cf\uff0c\u5404\u4e2a\u670d\u52a1\u901a\u8fc7\u83b7\u53d6\u5206\u5e03\u5f0f\u9501\u6765\u539f\u5b50\u6027\u5730\u589e\u51cf\u4ee4\u724c\u6570\u3002</li> <li>\u5b58\u5728\u95ee\u9898\uff1a<ul> <li>\u5b9e\u73b0\u590d\u6742\uff1a\u65b9\u6848\u8bbe\u8ba1\u548c\u5b9e\u73b0\u90fd\u6bd4\u8f83\u590d\u6742\u3002</li> <li>\u6027\u80fd\u95ee\u9898\uff1a\u5206\u5e03\u5f0f\u534f\u8c03\u670d\u52a1\u901a\u5e38\u4e0d\u9002\u5408\u9ad8\u9891\u7684\u8bfb\u5199\u64cd\u4f5c\uff0c\u5927\u91cf\u7684\u4ee4\u724c\u7533\u8bf7\u548c\u91ca\u653e\u8bf7\u6c42\u53ef\u80fd\u4f7f\u5176\u6210\u4e3a\u7cfb\u7edf\u74f6\u9888\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/syncorized%E5%92%8Ccas%E5%AD%98%E5%9C%A8%E4%BB%80%E4%B9%88%E5%B7%AE%E5%88%AB%EF%BC%8C%E5%90%84%E4%B8%AA%E6%96%B9%E9%9D%A2%E8%AF%A6%E7%BB%86%E8%AE%B2%E8%A7%A3%EF%BC%8C%E6%80%A7%E8%83%BD%E4%B8%8A%E8%AF%A6%E7%BB%86%E8%AE%B2%E8%A7%A3%EF%BC%8C%E5%90%8C%E6%97%B6%E4%BB%8E%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E8%A7%92%E5%BA%A6%E8%AF%A6%E7%BB%86%E4%BB%8B%E7%BB%8D/","title":"Syncorized\u548ccas\u5b58\u5728\u4ec0\u4e48\u5dee\u522b\uff0c\u5404\u4e2a\u65b9\u9762\u8be6\u7ec6\u8bb2\u89e3\uff0c\u6027\u80fd\u4e0a\u8be6\u7ec6\u8bb2\u89e3\uff0c\u540c\u65f6\u4ece\u64cd\u4f5c\u7cfb\u7edf\u7684\u89d2\u5ea6\u8be6\u7ec6\u4ecb\u7ecd","text":"<p><code>synchronized</code> \u548c Compare-and-Swap (CAS) \u662f\u4e24\u79cd\u5728\u5e76\u53d1\u7f16\u7a0b\u4e2d\u89e3\u51b3\u7ebf\u7a0b\u5b89\u5168\u95ee\u9898\u7684\u6838\u5fc3\u673a\u5236\uff0c\u5b83\u4eec\u5728\u5b9e\u73b0\u65b9\u5f0f\u3001\u6027\u80fd\u7279\u70b9\u548c\u4e0e\u64cd\u4f5c\u7cfb\u7edf\u7684\u4ea4\u4e92\u65b9\u9762\u5b58\u5728\u663e\u8457\u5dee\u5f02\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/syncorized%E5%92%8Ccas%E5%AD%98%E5%9C%A8%E4%BB%80%E4%B9%88%E5%B7%AE%E5%88%AB%EF%BC%8C%E5%90%84%E4%B8%AA%E6%96%B9%E9%9D%A2%E8%AF%A6%E7%BB%86%E8%AE%B2%E8%A7%A3%EF%BC%8C%E6%80%A7%E8%83%BD%E4%B8%8A%E8%AF%A6%E7%BB%86%E8%AE%B2%E8%A7%A3%EF%BC%8C%E5%90%8C%E6%97%B6%E4%BB%8E%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E8%A7%92%E5%BA%A6%E8%AF%A6%E7%BB%86%E4%BB%8B%E7%BB%8D/#synchronized","title":"synchronized","text":"<p>1. \u5b9a\u4e49\u4e0e\u673a\u5236\uff1a <code>synchronized</code> \u662f Java \u8bed\u8a00\u7684\u5173\u952e\u5b57\uff0c\u7528\u4e8e\u5b9e\u73b0\u540c\u6b65\uff0c\u5b83\u63d0\u4f9b\u4e86\u4e00\u79cd\u60b2\u89c2\u9501\uff08Pessimistic Locking\uff09\u7684\u673a\u5236\u3002\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u8fdb\u5165 <code>synchronized</code> \u4ee3\u7801\u5757\u6216\u65b9\u6cd5\u65f6\uff0c\u5b83\u4f1a\u5c1d\u8bd5\u83b7\u53d6\u5bf9\u8c61\u7684\u76d1\u89c6\u5668\u9501\uff08monitor lock\uff09\u3002\u5982\u679c\u9501\u5df2\u88ab\u5176\u4ed6\u7ebf\u7a0b\u6301\u6709\uff0c\u5f53\u524d\u7ebf\u7a0b\u4f1a\u88ab\u963b\u585e\uff0c\u8fdb\u5165\u7b49\u5f85\u72b6\u6001\uff0c\u76f4\u5230\u9501\u88ab\u91ca\u653e\u3002<code>synchronized</code> \u4fdd\u8bc1\u4e86\u540c\u4e00\u65f6\u523b\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u53ef\u4ee5\u6267\u884c\u4e34\u754c\u533a\uff08critical section\uff09\u7684\u4ee3\u7801\uff0c\u4ece\u800c\u786e\u4fdd\u4e86\u6570\u636e\u7684\u4e00\u81f4\u6027\u3002<code>synchronized</code> \u786e\u4fdd\u4e86\u4e92\u65a5\u6027\u3001\u8fdb\u7a0b\u3001\u548c\u6709\u754c\u7b49\u5f85\uff08\u65e0\u9965\u997f\uff09\u7b49\u5173\u952e\u90e8\u5206\u95ee\u9898\u7684\u4e09\u4e2a\u57fa\u672c\u89c4\u5219\u3002</p> <p>2. \u9501\u7684\u7c92\u5ea6\u4e0e\u7c7b\u578b\uff1a <code>synchronized</code> \u4f5c\u7528\u4e8e\u5bf9\u8c61\u6216\u65b9\u6cd5\uff1a *   \u540c\u6b65\u65b9\u6cd5\uff1a \u9501\u5b9a\u5f53\u524d\u5b9e\u4f8b\u5bf9\u8c61\u3002 *   \u9759\u6001\u540c\u6b65\u65b9\u6cd5\uff1a \u9501\u5b9a\u5f53\u524d\u7c7b\u7684 Class \u5bf9\u8c61\u3002 *   \u540c\u6b65\u4ee3\u7801\u5757\uff1a \u9501\u5b9a\u62ec\u53f7\u4e2d\u6307\u5b9a\u7684\u5bf9\u8c61\u3002 <code>synchronized</code> \u63d0\u4f9b\u7684\u9501\u662f\u72ec\u5360\u9501\uff08Exclusive Lock\uff09\u4e14\u662f\u975e\u516c\u5e73\u9501\uff08Unfair Lock\uff09\uff0c\u8fd9\u610f\u5473\u7740\u7ebf\u7a0b\u83b7\u53d6\u9501\u7684\u987a\u5e8f\u4e0d\u662f\u4e25\u683c\u6309\u7167\u8bf7\u6c42\u7684\u5148\u540e\u987a\u5e8f\u3002</p> <p>3. \u6027\u80fd\u7279\u70b9\uff1a *   \u5f00\u9500\uff1a \u4f20\u7edf\u4e0a\uff0c<code>synchronized</code> \u88ab\u8ba4\u4e3a\u662f\u201c\u91cd\u91cf\u7ea7\u9501\u201d\uff0c\u56e0\u4e3a\u5b83\u6d89\u53ca\u64cd\u4f5c\u7cfb\u7edf\u5c42\u9762\u7684\u4e0a\u4e0b\u6587\u5207\u6362\uff0c\u5f53\u7ebf\u7a0b\u88ab\u963b\u585e\u65f6\uff0c\u9700\u8981\u64cd\u4f5c\u7cfb\u7edf\u4ecb\u5165\u8fdb\u884c\u7ebf\u7a0b\u7684\u6302\u8d77\u548c\u5524\u9192\uff0c\u8fd9\u4f1a\u5e26\u6765\u8f83\u5927\u7684\u6027\u80fd\u5f00\u9500\u3002 *   \u73b0\u4ee3JVM\u4f18\u5316\uff1a \u73b0\u4ee3JVM\u5bf9 <code>synchronized</code> \u8fdb\u884c\u4e86\u5927\u91cf\u4f18\u5316\uff0c\u5305\u62ec\u504f\u5411\u9501\uff08Biased Locking\uff09\u3001\u8f7b\u91cf\u7ea7\u9501\uff08Lightweight Locking\uff09\u548c\u81ea\u9002\u5e94\u81ea\u65cb\uff08Adaptive Spinning\uff09\u7b49\u3002\u5728\u4f4e\u7ade\u4e89\u60c5\u51b5\u4e0b\uff0c<code>synchronized</code> \u7684\u6027\u80fd\u5df2\u5927\u5927\u63d0\u9ad8\uff0c\u751a\u81f3\u53ef\u4ee5\u63a5\u8fd1\u975e\u963b\u585e\u540c\u6b65\u7684\u6027\u80fd\u3002 *   \u9ad8\u7ade\u4e89\u60c5\u51b5\uff1a \u5728\u9ad8\u7ade\u4e89\u573a\u666f\u4e0b\uff0c\u5f53\u81ea\u65cb\u7b49\u5f85\u7684\u5f00\u9500\u8d85\u8fc7\u7ebf\u7a0b\u6302\u8d77\u548c\u5524\u9192\u7684\u5f00\u9500\u65f6\uff0c<code>synchronized</code> \u53ef\u80fd\u4f1a\u8868\u73b0\u51fa\u66f4\u597d\u7684\u6027\u80fd\uff0c\u56e0\u4e3a\u5b83\u4f1a\u9009\u62e9\u5c06\u7b49\u5f85\u7684\u7ebf\u7a0b\u653e\u5165\u961f\u5217\u5e76\u6302\u8d77\uff0c\u800c\u4e0d\u662f\u8ba9\u5b83\u4eec\u6301\u7eed\u5360\u7528CPU\u81ea\u65cb\u3002</p> <p>4. \u64cd\u4f5c\u7cfb\u7edf\u89d2\u5ea6\uff1a *   \u5185\u6838\u6001\u4ecb\u5165\uff1a \u5f53 <code>synchronized</code> \u9501\u53d1\u751f\u7ade\u4e89\uff0c\u5e76\u4e14\u7ebf\u7a0b\u9700\u8981\u88ab\u963b\u585e\u65f6\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u4ecb\u5165\u3002\u7ebf\u7a0b\u4f1a\u4ece\u7528\u6237\u6001\u5207\u6362\u5230\u5185\u6838\u6001\uff0c\u88ab\u6302\u8d77\u5e76\u653e\u5165\u7b49\u5f85\u961f\u5217\u3002\u8fd9\u79cd\u4e0a\u4e0b\u6587\u5207\u6362\u662f\u6602\u8d35\u7684\uff0c\u56e0\u4e3a\u5b83\u6d89\u53ca\u5230\u4fdd\u5b58\u548c\u6062\u590dCPU\u5bc4\u5b58\u5668\u3001\u7a0b\u5e8f\u8ba1\u6570\u5668\u7b49\u4fe1\u606f\u3002 *   \u8c03\u5ea6\uff1a \u64cd\u4f5c\u7cfb\u7edf\u8d1f\u8d23\u7ba1\u7406\u8fd9\u4e9b\u7b49\u5f85\u7684\u7ebf\u7a0b\uff0c\u5e76\u5728\u9501\u91ca\u653e\u65f6\uff0c\u6839\u636e\u8c03\u5ea6\u7b56\u7565\u5524\u9192\u5176\u4e2d\u4e00\u4e2a\u7ebf\u7a0b\u4f7f\u5176\u91cd\u65b0\u83b7\u5f97CPU\u6267\u884c\u6743\u3002 *   \u540c\u6b65\u786c\u4ef6\uff1a \u64cd\u4f5c\u7cfb\u7edf\u901a\u8fc7\u5229\u7528\u5e95\u5c42\u786c\u4ef6\u63d0\u4f9b\u7684\u539f\u5b50\u64cd\u4f5c\uff08\u5982\u7981\u7528\u4e2d\u65ad\u3001Test-and-Set\u6307\u4ee4\u6216Compare-and-Swap\u6307\u4ee4\uff09\u6765\u786e\u4fdd\u4e92\u65a5\u9501\u7684\u539f\u5b50\u6027\uff0c\u4ece\u800c\u5b9e\u73b0 <code>synchronized</code> \u8fd9\u6837\u7684\u540c\u6b65\u673a\u5236\u3002 *   \u907f\u514d\u7ade\u6001\u6761\u4ef6\uff1a \u8fdb\u7a0b\u540c\u6b65\u673a\u5236\uff08\u5982 <code>synchronized</code>\uff09\u662f\u64cd\u4f5c\u7cfb\u7edf\u7ba1\u7406\u5e76\u53d1\u8fdb\u7a0b\u3001\u786e\u4fdd\u5171\u4eab\u8d44\u6e90\u8bbf\u95ee\u6709\u5e8f\u3001\u9632\u6b62\u7ade\u6001\u6761\u4ef6\u548c\u6570\u636e\u4e0d\u4e00\u81f4\u7684\u5173\u952e\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/syncorized%E5%92%8Ccas%E5%AD%98%E5%9C%A8%E4%BB%80%E4%B9%88%E5%B7%AE%E5%88%AB%EF%BC%8C%E5%90%84%E4%B8%AA%E6%96%B9%E9%9D%A2%E8%AF%A6%E7%BB%86%E8%AE%B2%E8%A7%A3%EF%BC%8C%E6%80%A7%E8%83%BD%E4%B8%8A%E8%AF%A6%E7%BB%86%E8%AE%B2%E8%A7%A3%EF%BC%8C%E5%90%8C%E6%97%B6%E4%BB%8E%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E8%A7%92%E5%BA%A6%E8%AF%A6%E7%BB%86%E4%BB%8B%E7%BB%8D/#cas-compare-and-swap","title":"CAS (Compare-and-Swap)","text":"<p>1. \u5b9a\u4e49\u4e0e\u673a\u5236\uff1a CAS\uff08Compare-and-Swap\uff0c\u6bd4\u8f83\u5e76\u4ea4\u6362\uff09\u662f\u4e00\u79cd\u4e50\u89c2\u9501\uff08Optimistic Locking\uff09\u7684\u5b9e\u73b0\u65b9\u5f0f\uff0c\u5b83\u662f\u4e00\u79cd\u786c\u4ef6\u6307\u4ee4\u7ea7\u522b\u7684\u539f\u5b50\u64cd\u4f5c\u3002CAS \u64cd\u4f5c\u5305\u542b\u4e09\u4e2a\u53c2\u6570\uff1a\u5185\u5b58\u4f4d\u7f6e V\u3001\u9884\u671f\u65e7\u503c A \u548c\u65b0\u503c B\u3002CAS \u64cd\u4f5c\u7684\u903b\u8f91\u662f\uff1a\u5982\u679c\u5185\u5b58\u4f4d\u7f6e V \u7684\u5f53\u524d\u503c\u4e0e\u9884\u671f\u65e7\u503c A \u76f8\u5339\u914d\uff0c\u90a3\u4e48\u5c06 V \u7684\u503c\u66f4\u65b0\u4e3a\u65b0\u503c B\uff1b\u5426\u5219\uff0c\u4e0d\u505a\u4efb\u4f55\u64cd\u4f5c\u3002\u65e0\u8bba\u66f4\u65b0\u6210\u529f\u4e0e\u5426\uff0cCAS \u64cd\u4f5c\u90fd\u4f1a\u8fd4\u56de V \u7684\u65e7\u503c\u3002\u8fd9\u79cd\u673a\u5236\u786e\u4fdd\u4e86\u5728\u5e76\u53d1\u73af\u5883\u4e0b\uff0c\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u80fd\u6210\u529f\u6267\u884c\u64cd\u4f5c\uff0c\u800c\u5176\u4ed6\u7ebf\u7a0b\u4f1a\u5931\u8d25\u5e76\u53ef\u4ee5\u9009\u62e9\u91cd\u8bd5\u3002Java \u4e2d\u7684 <code>java.util.concurrent.atomic</code> \u5305\u4e0b\u7684\u7c7b\uff08\u5982 <code>AtomicInteger</code>\u3001<code>AtomicLong</code>\uff09\u4ee5\u53ca <code>AbstractQueuedSynchronizer (AQS)</code> \u7684\u5b9e\u73b0\u90fd\u57fa\u4e8e CAS\u3002</p> <p>2. \u9501\u7684\u7c92\u5ea6\u4e0e\u7c7b\u578b\uff1a *   \u975e\u963b\u585e\uff1a CAS \u662f\u4e00\u79cd\u975e\u963b\u585e\u7b97\u6cd5\uff0c\u5b83\u4e0d\u4f1a\u963b\u585e\u7ebf\u7a0b\uff0c\u800c\u662f\u8ba9\u7ebf\u7a0b\u5728\u64cd\u4f5c\u5931\u8d25\u65f6\u91cd\u8bd5\uff0c\u4ece\u800c\u907f\u514d\u4e86\u4f20\u7edf\u9501\u673a\u5236\u5e26\u6765\u7684\u4e0a\u4e0b\u6587\u5207\u6362\u5f00\u9500\u3002 *   \u539f\u5b50\u6027\uff1a CAS \u64cd\u4f5c\u7531CPU\u786c\u4ef6\u6307\u4ee4\u4fdd\u8bc1\u5176\u539f\u5b50\u6027\uff0c\u4f8b\u5982 x86 \u67b6\u6784\u4e0a\u7684 <code>lock cmpxchg</code> \u6307\u4ee4\uff0c\u8fd9\u610f\u5473\u7740\u6bd4\u8f83\u548c\u4ea4\u6362\u8fd9\u4e24\u4e2a\u6b65\u9aa4\u662f\u4e0d\u53ef\u5206\u5272\u7684\uff0c\u4e0d\u4f1a\u88ab\u4e2d\u65ad\u3002</p> <p>3. \u6027\u80fd\u7279\u70b9\uff1a *   \u4f4e\u7ade\u4e89\u60c5\u51b5\uff1a \u5728\u4f4e\u7ade\u4e89\uff08\u6216\u65e0\u7ade\u4e89\uff09\u73af\u5883\u4e0b\uff0cCAS \u7684\u6027\u80fd\u901a\u5e38\u4f18\u4e8e <code>synchronized</code>\uff0c\u56e0\u4e3a\u5b83\u907f\u514d\u4e86\u9501\u7684\u83b7\u53d6\u3001\u91ca\u653e\u4ee5\u53ca\u6f5c\u5728\u7684\u7ebf\u7a0b\u963b\u585e\u548c\u4e0a\u4e0b\u6587\u5207\u6362\u5f00\u9500\u3002 *   \u9ad8\u7ade\u4e89\u60c5\u51b5\uff1a \u5728\u9ad8\u7ade\u4e89\u73af\u5883\u4e0b\uff0cCAS \u53ef\u80fd\u4f1a\u5bfc\u81f4\u5927\u91cf\u7684\u5931\u8d25\u548c\u91cd\u8bd5\uff08\u81ea\u65cb\uff09\uff0c\u8fd9\u4f1a\u6d88\u8017\u5927\u91cf\u7684CPU\u65f6\u95f4\uff0c\u5f62\u6210\u201c\u5fd9\u7b49\u5f85\u201d\uff08busy-waiting\uff09\uff0c\u5373\u7ebf\u7a0b\u5728\u4e0d\u65ad\u5730\u5c1d\u8bd5\u66f4\u65b0\u4f46\u6bcf\u6b21\u90fd\u5931\u8d25\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0cCAS \u7684\u6027\u80fd\u53ef\u80fd\u4f1a\u4e0b\u964d\uff0c\u751a\u81f3\u4e0d\u5982 <code>synchronized</code>\u3002 *   \u53ef\u4f38\u7f29\u6027\uff1a \u975e\u963b\u585e\u7b97\u6cd5\uff08\u5982\u57fa\u4e8eCAS\u7684\u7b97\u6cd5\uff09\u901a\u5e38\u5177\u6709\u66f4\u77ed\u7684\u201c\u4e34\u754c\u533a\u201d\uff0c\u8fd9\u4f7f\u5f97\u5b83\u4eec\u5728\u591a\u6838\u7cfb\u7edf\u4e0a\u5177\u6709\u66f4\u597d\u7684\u53ef\u4f38\u7f29\u6027\u3002 *   LongAdder\u4f18\u5316\uff1a \u4e3a\u4e86\u89e3\u51b3\u9ad8\u7ade\u4e89\u4e0b CAS \u7684\u81ea\u65cb\u95ee\u9898\uff0cJava 8 \u5f15\u5165\u4e86 <code>LongAdder</code>\uff0c\u5b83\u901a\u8fc7\u5206\u6bb5\uff08Striping\uff09\u7684\u7b56\u7565\uff0c\u5c06\u7ade\u4e89\u5206\u6563\u5230\u591a\u4e2a <code>Cell</code> \u4e0a\uff0c\u4ece\u800c\u5728\u9ad8\u5e76\u53d1\u73af\u5883\u4e0b\u6bd4 <code>AtomicLong</code>\uff08\u57fa\u4e8eCAS\uff09\u548c <code>synchronized</code> \u8868\u73b0\u51fa\u66f4\u597d\u7684\u6027\u80fd\u3002</p> <p>4. \u64cd\u4f5c\u7cfb\u7edf\u89d2\u5ea6\uff1a *   \u786c\u4ef6\u6307\u4ee4\u652f\u6301\uff1a CAS \u7684\u6838\u5fc3\u5728\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u548cCPU\u63d0\u4f9b\u7684\u5e95\u5c42\u786c\u4ef6\u6307\u4ee4\u652f\u6301\uff0c\u4f8b\u5982 <code>cmpxchg</code> \u6307\u4ee4\u3002\u8fd9\u4e9b\u6307\u4ee4\u5141\u8bb8CPU\u539f\u5b50\u6027\u5730\u6267\u884c\u6bd4\u8f83\u548c\u4ea4\u6362\u64cd\u4f5c\uff0c\u800c\u65e0\u9700\u64cd\u4f5c\u7cfb\u7edf\u5c42\u9762\u7684\u663e\u5f0f\u9501\u673a\u5236\u3002 *   \u5185\u5b58\u4e00\u81f4\u6027\u4e0e\u7f13\u5b58\uff1a \u5c3d\u7ba1 CAS \u64cd\u4f5c\u662f\u786c\u4ef6\u7ea7\u522b\u7684\uff0c\u4f46\u5b83\u4ecd\u7136\u9700\u8981\u8bbf\u95ee\u4e3b\u5185\u5b58\u3002\u5728\u591a\u5904\u7406\u5668\u7cfb\u7edf\u4e2d\uff0cCAS \u64cd\u4f5c\u4f1a\u6d89\u53ca\u5230\u7f13\u5b58\u4e00\u81f4\u6027\u534f\u8bae\uff08\u5982MESI\u534f\u8bae\uff09\uff0c\u4ee5\u786e\u4fdd\u6240\u6709CPU\u6838\u5fc3\u5bf9\u5171\u4eab\u53d8\u91cf\u7684\u89c6\u56fe\u662f\u4e00\u81f4\u7684\u3002\u8fd9\u90e8\u5206\u5de5\u4f5c\u7531\u786c\u4ef6\u548c\u64cd\u4f5c\u7cfb\u7edf\u534f\u540c\u5b8c\u6210\u3002 *   \u51cf\u5c11\u5185\u6838\u6001\u5207\u6362\uff1a CAS \u7684\u4f18\u52bf\u5728\u4e8e\u5b83\u5c3d\u91cf\u907f\u514d\u4e86\u7ebf\u7a0b\u7684\u963b\u585e\u548c\u5185\u6838\u6001\u5207\u6362\uff0c\u4ece\u800c\u51cf\u5c11\u4e86\u64cd\u4f5c\u7cfb\u7edf\u5bf9\u540c\u6b65\u64cd\u4f5c\u7684\u76f4\u63a5\u5e72\u9884\u3002\u5f53 CAS \u5931\u8d25\u65f6\uff0c\u7ebf\u7a0b\u53ef\u4ee5\u7acb\u5373\u91cd\u8bd5\u6216\u8005\u6267\u884c\u5176\u4ed6\u903b\u8f91\uff0c\u800c\u4e0d\u9700\u8981\u8fdb\u5165\u7b49\u5f85\u961f\u5217\u5e76\u7b49\u5f85\u64cd\u4f5c\u7cfb\u7edf\u8c03\u5ea6\u3002 *   \u539f\u5b50\u64cd\u4f5c\u57fa\u77f3\uff1a CAS \u63d0\u4f9b\u4e86\u4e00\u79cd\u6784\u5efa\u975e\u963b\u585e\u6570\u636e\u7ed3\u6784\u548c\u7b97\u6cd5\u7684\u5e95\u5c42\u539f\u5b50\u539f\u8bed\u3002\u8bb8\u591a\u9ad8\u7ea7\u7684\u5e76\u53d1\u5de5\u5177\uff0c\u5982 <code>ConcurrentHashMap</code> \u4e2d\u7684\u67d0\u4e9b\u64cd\u4f5c\u4ee5\u53ca <code>java.util.concurrent.locks</code> \u5305\u4e2d\u7684\u9501\u5b9e\u73b0\uff0c\u90fd\u5229\u7528\u4e86 CAS \u64cd\u4f5c\u6765\u786e\u4fdd\u7ebf\u7a0b\u5b89\u5168\u548c\u63d0\u9ad8\u6027\u80fd\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/syncorized%E5%92%8Ccas%E5%AD%98%E5%9C%A8%E4%BB%80%E4%B9%88%E5%B7%AE%E5%88%AB%EF%BC%8C%E5%90%84%E4%B8%AA%E6%96%B9%E9%9D%A2%E8%AF%A6%E7%BB%86%E8%AE%B2%E8%A7%A3%EF%BC%8C%E6%80%A7%E8%83%BD%E4%B8%8A%E8%AF%A6%E7%BB%86%E8%AE%B2%E8%A7%A3%EF%BC%8C%E5%90%8C%E6%97%B6%E4%BB%8E%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E8%A7%92%E5%BA%A6%E8%AF%A6%E7%BB%86%E4%BB%8B%E7%BB%8D/#_1","title":"\u603b\u7ed3\u6bd4\u8f83","text":"\u7279\u6027 synchronized CAS (Compare-and-Swap) \u673a\u5236 \u60b2\u89c2\u9501\uff0c\u963b\u585e\u5f0f\u540c\u6b65 \u4e50\u89c2\u9501\uff0c\u975e\u963b\u585e\u5f0f\u540c\u6b65 \u5b9e\u73b0 Java \u5173\u952e\u5b57 CPU \u786c\u4ef6\u6307\u4ee4\u7ea7\u522b\u7684\u539f\u5b50\u64cd\u4f5c \u6027\u80fd \u4f4e\u7ade\u4e89\uff1a \u7ecf\u8fc7JVM\u4f18\u5316\u540e\u6027\u80fd\u826f\u597d \u4f4e\u7ade\u4e89\uff1a \u6027\u80fd\u4f18\u5f02\uff0c\u907f\u514d\u4e0a\u4e0b\u6587\u5207\u6362 \u9ad8\u7ade\u4e89\uff1a \u53ef\u80fd\u5bfc\u81f4\u7ebf\u7a0b\u963b\u585e\u548c\u4e0a\u4e0b\u6587\u5207\u6362\uff0c\u4f46\u907f\u514d\u81ea\u65cb\uff0c\u6709\u65f6\u4f18\u4e8eCAS \u9ad8\u7ade\u4e89\uff1a \u6613\u4ea7\u751f\u81ea\u65cb\uff08\u5fd9\u7b49\u5f85\uff09\uff0c\u6d88\u8017CPU\uff0c\u53ef\u80fd\u6027\u80fd\u4e0b\u964d \u9501\u7c92\u5ea6 \u901a\u5e38\u7528\u4e8e\u4ee3\u7801\u5757\u6216\u65b9\u6cd5\uff0c\u4fdd\u62a4\u8f83\u5927\u4e34\u754c\u533a \u901a\u5e38\u7528\u4e8e\u5bf9\u5355\u4e2a\u5171\u4eab\u53d8\u91cf\u7684\u539f\u5b50\u66f4\u65b0 \u7075\u6d3b\u6027 \u8f83\u5c11\u7075\u6d3b\u6027\uff0c\u81ea\u52a8\u7ba1\u7406\u9501\u7684\u83b7\u53d6\u548c\u91ca\u653e \u66f4\u7075\u6d3b\uff0c\u53ef\u7528\u4e8e\u5b9e\u73b0\u66f4\u590d\u6742\u7684\u975e\u963b\u585e\u7b97\u6cd5 \u64cd\u4f5c\u7cfb\u7edf \u7ade\u4e89\u65f6\u6d89\u53caOS\u7684\u7ebf\u7a0b\u8c03\u5ea6\u3001\u6302\u8d77\u548c\u5524\u9192\uff0c\u6709\u5185\u6838\u6001\u5207\u6362\u5f00\u9500 \u4f9d\u8d56CPU\u786c\u4ef6\u539f\u5b50\u6307\u4ee4\uff0c\u5c3d\u91cf\u907f\u514dOS\u4ecb\u5165\uff0c\u65e0\u76f4\u63a5\u5185\u6838\u6001\u5207\u6362 \u5e94\u7528 \u9002\u7528\u4e8e\u5bf9\u590d\u6742\u4e1a\u52a1\u903b\u8f91\u548c\u8f83\u5927\u4ee3\u7801\u5757\u7684\u540c\u6b65 \u9002\u7528\u4e8e\u5bf9\u5355\u4e2a\u53d8\u91cf\u8fdb\u884c\u539f\u5b50\u64cd\u4f5c\uff0c\u6784\u5efa\u65e0\u9501\u6570\u636e\u7ed3\u6784 <p>\u9009\u62e9 <code>synchronized</code> \u8fd8\u662f CAS \u53d6\u51b3\u4e8e\u5177\u4f53\u7684\u5e94\u7528\u573a\u666f\u548c\u5bf9\u6027\u80fd\u3001\u590d\u6742\u6027\u7684\u6743\u8861\u3002\u5728\u7ade\u4e89\u4e0d\u6fc0\u70c8\u7684\u60c5\u51b5\u4e0b\uff0c\u6216\u8005\u5bf9\u4ee3\u7801\u7684\u7b80\u6d01\u6027\u548c\u53ef\u7406\u89e3\u6027\u8981\u6c42\u66f4\u9ad8\u65f6\uff0c<code>synchronized</code> \u53ef\u80fd\u662f\u66f4\u597d\u7684\u9009\u62e9\u3002\u800c\u5728\u8ffd\u6c42\u6781\u81f4\u6027\u80fd\u3001\u907f\u514d\u7ebf\u7a0b\u963b\u585e\uff0c\u4e14\u80fd\u5904\u7406\u597d CAS \u5931\u8d25\u91cd\u8bd5\u903b\u8f91\u7684\u573a\u666f\u4e0b\uff0c\u57fa\u4e8e CAS \u7684\u539f\u5b50\u64cd\u4f5c\uff08\u6216\u66f4\u9ad8\u7ea7\u7684\u5982 <code>LongAdder</code>\uff09\u4f1a\u662f\u66f4\u4f18\u7684\u9009\u62e9\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E4%BB%8B%E7%BB%8D%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E5%92%8C%E7%89%A9%E7%90%86%E5%86%85%E5%AD%98/","title":"\u4ecb\u7ecd\u865a\u62df\u5185\u5b58\u548c\u7269\u7406\u5185\u5b58","text":"<p>\u5728\u8ba1\u7b97\u673a\u7cfb\u7edf\u4e2d\uff0c\u865a\u62df\u5185\u5b58\uff08Virtual Memory\uff09\u548c\u7269\u7406\u5185\u5b58\uff08Physical Memory\uff09\u662f\u4e24\u79cd\u81f3\u5173\u91cd\u8981\u7684\u5185\u5b58\u7ba1\u7406\u6982\u5ff5\uff0c\u5b83\u4eec\u534f\u540c\u5de5\u4f5c\uff0c\u786e\u4fdd\u8ba1\u7b97\u673a\u9ad8\u6548\u7a33\u5b9a\u8fd0\u884c\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E4%BB%8B%E7%BB%8D%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E5%92%8C%E7%89%A9%E7%90%86%E5%86%85%E5%AD%98/#physical-memory","title":"\u7269\u7406\u5185\u5b58 (Physical Memory)","text":"<p>\u7269\u7406\u5185\u5b58\uff0c\u901a\u5e38\u6307\u6211\u4eec\u6240\u8bf4\u7684\u968f\u673a\u5b58\u53d6\u5b58\u50a8\u5668\uff08RAM\uff0cRandom Access Memory\uff09\uff0c\u662f\u8ba1\u7b97\u673a\u786c\u4ef6\u4e0a\u5b9e\u9645\u5b58\u5728\u7684\u5b58\u50a8\u82af\u7247\u6216\u5185\u5b58\u6761\u3002\u5b83\u662fCPU\u53ef\u4ee5\u76f4\u63a5\u8bbf\u95ee\u7684\u3001\u7528\u4e8e\u4e34\u65f6\u5b58\u50a8\u7a0b\u5e8f\u548c\u6570\u636e\u7684\u5730\u65b9\u3002</p> <p>\u4e3b\u8981\u7279\u70b9\uff1a *   \u786c\u4ef6\u57fa\u7840\uff1a\u7269\u7406\u5185\u5b58\u662f\u8ba1\u7b97\u673a\u4e2d\u771f\u5b9e\u5b58\u5728\u7684\u786c\u4ef6\u7ec4\u4ef6\uff0c\u4f8b\u5982DDR4\u6216DDR5\u5185\u5b58\u6761\u3002 *   \u76f4\u63a5\u8bbf\u95ee\uff1aCPU\u53ef\u4ee5\u76f4\u63a5\u5feb\u901f\u5730\u8bbf\u95ee\u7269\u7406\u5185\u5b58\u4e2d\u7684\u6570\u636e\u548c\u6307\u4ee4\u3002 *   \u901f\u5ea6\u5feb\uff1a\u4e0e\u786c\u76d8\u7b49\u5b58\u50a8\u8bbe\u5907\u76f8\u6bd4\uff0c\u7269\u7406\u5185\u5b58\u7684\u8bfb\u5199\u901f\u5ea6\u975e\u5e38\u5feb\u3002 *   \u5bb9\u91cf\u6709\u9650\uff1a\u4e00\u53f0\u8ba1\u7b97\u673a\u7684\u7269\u7406\u5185\u5b58\u5bb9\u91cf\u662f\u56fa\u5b9a\u7684\uff0c\u53d6\u51b3\u4e8e\u5b89\u88c5\u7684\u5185\u5b58\u6761\u6570\u91cf\u548c\u7cfb\u7edf\u67b6\u6784\u3002 *   \u6613\u5931\u6027\uff1a\u7269\u7406\u5185\u5b58\u662f\u6613\u5931\u6027\u5b58\u50a8\uff0c\u8fd9\u610f\u5473\u7740\u5f53\u8ba1\u7b97\u673a\u65ad\u7535\u65f6\uff0c\u5176\u4e2d\u5b58\u50a8\u7684\u6240\u6709\u6570\u636e\u90fd\u4f1a\u4e22\u5931\u3002 *   \u4f5c\u7528\uff1a\u5b83\u4e3b\u8981\u7528\u4e8e\u5b58\u50a8\u5f53\u524d\u6b63\u5728\u8fd0\u884c\u7684\u7a0b\u5e8f\u3001\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u4ee5\u53ca\u9700\u8981\u5feb\u901f\u8bbf\u95ee\u7684\u6570\u636e\uff0c\u4ee5\u4fbfCPU\u80fd\u591f\u5feb\u901f\u6267\u884c\u4efb\u52a1\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E4%BB%8B%E7%BB%8D%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E5%92%8C%E7%89%A9%E7%90%86%E5%86%85%E5%AD%98/#virtual-memory","title":"\u865a\u62df\u5185\u5b58 (Virtual Memory)","text":"<p>\u865a\u62df\u5185\u5b58\u662f\u4e00\u79cd\u5185\u5b58\u7ba1\u7406\u6280\u672f\uff0c\u5b83\u4e3a\u6bcf\u4e2a\u7a0b\u5e8f\u63d0\u4f9b\u4e86\u4e00\u4e2a\u201c\u7406\u60f3\u5316\u7684\u3001\u8fde\u7eed\u7684\u201d\u5927\u5185\u5b58\u7a7a\u95f4\u62bd\u8c61\uff0c\u5373\u4f7f\u5b9e\u9645\u7684\u7269\u7406\u5185\u5b58\u662f\u788e\u7247\u5316\u7684\u6216\u4e0d\u8db3\u7684\u3002\u5b83\u901a\u8fc7\u5c06\u4e00\u90e8\u5206\u786c\u76d8\u7a7a\u95f4\uff08\u901a\u5e38\u79f0\u4e3a\u201c\u4ea4\u6362\u7a7a\u95f4\u201d\u6216\u201c\u5206\u9875\u6587\u4ef6\u201d\uff09\u6a21\u62df\u6210\u5185\u5b58\u6765\u6269\u5c55\u8ba1\u7b97\u673a\u7684\u53ef\u7528\u5185\u5b58\u5bb9\u91cf\u3002</p> <p>\u5de5\u4f5c\u539f\u7406\uff1a \u5f53\u7269\u7406\u5185\u5b58\u4e0d\u8db3\u65f6\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u5c06\u7269\u7406\u5185\u5b58\u4e2d\u4e0d\u7ecf\u5e38\u4f7f\u7528\u7684\u6570\u636e\u6216\u7a0b\u5e8f\u6bb5\u4e34\u65f6\u8f6c\u79fb\u5230\u786c\u76d8\u4e0a\u7684\u865a\u62df\u5185\u5b58\u533a\u57df\uff08\u5373\u4ea4\u6362\u6587\u4ef6\uff09\u4e2d\uff0c\u4ece\u800c\u91ca\u653e\u7269\u7406\u5185\u5b58\u4f9b\u5f53\u524d\u6d3b\u52a8\u7a0b\u5e8f\u4f7f\u7528\u3002\u5f53\u9700\u8981\u7528\u5230\u8fd9\u4e9b\u88ab\u201c\u4ea4\u6362\u51fa\u53bb\u201d\u7684\u6570\u636e\u65f6\uff0c\u64cd\u4f5c\u7cfb\u7edf\u518d\u5c06\u5176\u4ece\u786c\u76d8\u52a0\u8f7d\u56de\u7269\u7406\u5185\u5b58\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u7531\u64cd\u4f5c\u7cfb\u7edf\u548cCPU\u4e2d\u7684\u5185\u5b58\u7ba1\u7406\u5355\u5143\uff08MMU\uff09\u534f\u540c\u5b8c\u6210\uff0c\u901a\u8fc7\u201c\u9875\u8868\u201d\u5c06\u7a0b\u5e8f\u4f7f\u7528\u7684\u201c\u865a\u62df\u5730\u5740\u201d\u6620\u5c04\u5230\u5b9e\u9645\u7684\u201c\u7269\u7406\u5730\u5740\u201d\u3002</p> <p>\u4e3b\u8981\u4f5c\u7528\u4e0e\u4f18\u52bf\uff1a *   \u6269\u5c55\u5185\u5b58\u5bb9\u91cf\uff1a\u5141\u8bb8\u7a0b\u5e8f\u4f7f\u7528\u6bd4\u5b9e\u9645\u7269\u7406\u5185\u5b58\u66f4\u5927\u7684\u5730\u5740\u7a7a\u95f4\uff0c\u514b\u670d\u7269\u7406\u5185\u5b58\u7684\u9650\u5236\u3002 *   \u591a\u4efb\u52a1\u5904\u7406\uff1a\u652f\u6301\u540c\u65f6\u8fd0\u884c\u66f4\u591a\u7684\u7a0b\u5e8f\uff0c\u5373\u4f7f\u8fd9\u4e9b\u7a0b\u5e8f\u7684\u603b\u5185\u5b58\u9700\u6c42\u8d85\u8fc7\u4e86\u7269\u7406\u5185\u5b58\u7684\u603b\u91cf\u3002 *   \u5185\u5b58\u9694\u79bb\u4e0e\u4fdd\u62a4\uff1a\u4e3a\u6bcf\u4e2a\u8fdb\u7a0b\u63d0\u4f9b\u72ec\u7acb\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\uff0c\u9632\u6b62\u4e00\u4e2a\u7a0b\u5e8f\u8bbf\u95ee\u6216\u4fee\u6539\u53e6\u4e00\u4e2a\u7a0b\u5e8f\u7684\u5185\u5b58\uff0c\u589e\u5f3a\u7cfb\u7edf\u5b89\u5168\u6027\u548c\u7a33\u5b9a\u6027\u3002 *   \u7b80\u5316\u7f16\u7a0b\uff1a\u7a0b\u5e8f\u5458\u65e0\u9700\u5173\u5fc3\u7269\u7406\u5185\u5b58\u7684\u5b9e\u9645\u5e03\u5c40\uff0c\u53ef\u4ee5\u5047\u8bbe\u62e5\u6709\u8fde\u7eed\u7684\u3001\u8db3\u591f\u5927\u7684\u5185\u5b58\u7a7a\u95f4\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E4%BB%8B%E7%BB%8D%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E5%92%8C%E7%89%A9%E7%90%86%E5%86%85%E5%AD%98/#_1","title":"\u865a\u62df\u5185\u5b58\u4e0e\u7269\u7406\u5185\u5b58\u7684\u533a\u522b","text":"\u7279\u6027 \u7269\u7406\u5185\u5b58 (Physical Memory) \u865a\u62df\u5185\u5b58 (Virtual Memory) \u672c\u8d28 \u771f\u5b9e\u7684\u786c\u4ef6\u7ec4\u4ef6\uff0c\u5373RAM\u5185\u5b58\u6761\u3002 \u4e00\u79cd\u5185\u5b58\u7ba1\u7406\u6280\u672f\uff0c\u662f\u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u7684\u4e00\u79cd\u62bd\u8c61\u6982\u5ff5\u3002 \u4f4d\u7f6e \u4f4d\u4e8e\u8ba1\u7b97\u673a\u4e3b\u677f\u4e0a\u7684\u5185\u5b58\u63d2\u69fd\u4e2d\u3002 \u4f4d\u4e8e\u786c\u76d8\u6216\u56fa\u6001\u786c\u76d8\uff08SSD\uff09\u4e0a\u7684\u4e00\u4e2a\u7279\u6b8a\u6587\u4ef6\u533a\u57df\uff08\u4ea4\u6362\u6587\u4ef6/\u5206\u9875\u6587\u4ef6\uff09\u3002 \u901f\u5ea6 \u8bfb\u5199\u901f\u5ea6\u6781\u5feb\uff0cCPU\u53ef\u76f4\u63a5\u8bbf\u95ee\u3002 \u901f\u5ea6\u8fdc\u4f4e\u4e8e\u7269\u7406\u5185\u5b58\uff0c\u53d7\u9650\u4e8e\u786c\u76d8\u6216SSD\u7684\u8bfb\u5199\u901f\u5ea6\u3002 \u5bb9\u91cf \u56fa\u5b9a\uff0c\u7531\u5b89\u88c5\u7684\u5185\u5b58\u6761\u5bb9\u91cf\u51b3\u5b9a\u3002 \u5bb9\u91cf\u53d7\u9650\u4e8e\u786c\u76d8\u7a7a\u95f4\u5927\u5c0f\uff0c\u53ef\u4ee5\u52a8\u6001\u8c03\u6574\u3002 \u6613\u5931\u6027 \u6613\u5931\u6027\uff0c\u65ad\u7535\u540e\u6570\u636e\u4e22\u5931\u3002 \u7406\u8bba\u4e0a\u6570\u636e\u53ef\u4ee5\u6301\u4e45\u5b58\u50a8\u5728\u786c\u76d8\u4e0a\uff0c\u76f4\u5230\u88ab\u64cd\u4f5c\u7cfb\u7edf\u4ea4\u6362\u56de\u7269\u7406\u5185\u5b58\u6216\u5220\u9664\u3002 CPU\u8bbf\u95ee CPU\u76f4\u63a5\u8bbf\u95ee\uff0c\u901a\u8fc7\u7269\u7406\u5730\u5740\u3002 CPU\u901a\u8fc7\u5185\u5b58\u7ba1\u7406\u5355\u5143\uff08MMU\uff09\u548c\u9875\u8868\u5c06\u865a\u62df\u5730\u5740\u8f6c\u6362\u4e3a\u7269\u7406\u5730\u5740\u624d\u80fd\u8bbf\u95ee\u3002 \u4f5c\u7528 \u5feb\u901f\u5b58\u50a8\u548c\u8bbf\u95ee\u5f53\u524d\u6d3b\u52a8\u7a0b\u5e8f\u548c\u6570\u636e\uff0c\u4fdd\u969c\u7cfb\u7edf\u54cd\u5e94\u901f\u5ea6\u3002 \u6269\u5c55\u53ef\u7528\u5185\u5b58\uff0c\u5b9e\u73b0\u591a\u4efb\u52a1\uff0c\u63d0\u4f9b\u5185\u5b58\u9694\u79bb\u548c\u4fdd\u62a4\uff0c\u7b80\u5316\u5185\u5b58\u7ba1\u7406\u3002 \u7ba1\u7406 \u7531\u64cd\u4f5c\u7cfb\u7edf\u76f4\u63a5\u7ba1\u7406\u548c\u5206\u914d\u3002 \u7531\u64cd\u4f5c\u7cfb\u7edf\u548c\u786c\u4ef6\uff08MMU\uff09\u534f\u540c\u7ba1\u7406\uff0c\u6d89\u53ca\u9875\u9762\u7f6e\u6362\u7b49\u590d\u6742\u673a\u5236\u3002"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%86%85%E5%AD%98%E5%B1%8F%E9%9A%9C%E6%98%AF%E4%BB%80%E4%B9%88/","title":"\u5185\u5b58\u5c4f\u969c\u662f\u4ec0\u4e48","text":"<p>\u5185\u5b58\u5c4f\u969c\uff08Memory Barrier\uff09\uff0c\u4e5f\u79f0\u5185\u5b58\u6805\u680f\uff08Memory Fence\uff09\uff0c\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u786c\u4ef6\u6307\u4ee4\u3002 \u5b83\u7684\u6838\u5fc3\u4f5c\u7528\u662f\u5bf9\u5185\u5b58\u8bbf\u95ee\u64cd\u4f5c\u8fdb\u884c\u6392\u5e8f\uff0c\u786e\u4fdd\u5728\u5b83\u4e4b\u524d\u7684\u7279\u5b9a\u5185\u5b58\u64cd\u4f5c\u5b8c\u6210\u4e4b\u540e\uff0c\u5b83\u4e4b\u540e\u7684\u5185\u5b58\u64cd\u4f5c\u624d\u80fd\u5f00\u59cb\u6267\u884c\u3002 \u8fd9\u5c31\u50cf\u5728\u6307\u4ee4\u5e8f\u5217\u4e2d\u8bbe\u7f6e\u4e00\u4e2a\u201c\u6805\u680f\u201d\uff0c\u67d0\u4e9b\u6307\u4ee4\u4e0d\u80fd\u8d8a\u8fc7\u8fd9\u4e2a\u6805\u680f\u8fdb\u884c\u91cd\u6392\u3002</p> <p>\u5728\u9ad8\u5e76\u53d1\u7684\u591a\u6838\u5904\u7406\u5668\u73af\u5883\u4e2d\uff0c\u5185\u5b58\u5c4f\u969c\u662f\u5b9e\u73b0\u6570\u636e\u540c\u6b65\u3001\u4fdd\u8bc1\u6570\u636e\u4e00\u81f4\u6027\u548c\u7a0b\u5e8f\u6b63\u786e\u6027\u7684\u5173\u952e\u5e95\u5c42\u6280\u672f\u4e4b\u4e00\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%86%85%E5%AD%98%E5%B1%8F%E9%9A%9C%E6%98%AF%E4%BB%80%E4%B9%88/#_1","title":"\u4e3a\u4ec0\u4e48\u9700\u8981\u5185\u5b58\u5c4f\u969c","text":"<p>\u5728\u5355\u7ebf\u7a0b\u3001\u5355\u5904\u7406\u5668\u7684\u65f6\u4ee3\uff0c\u7a0b\u5e8f\u57fa\u672c\u4e0a\u662f\u6309\u4ee3\u7801\u987a\u5e8f\u6267\u884c\u7684\uff0c\u903b\u8f91\u6e05\u6670\u3002\u7136\u800c\uff0c\u5728\u73b0\u4ee3\u591a\u6838\u8ba1\u7b97\u673a\u4f53\u7cfb\u7ed3\u6784\u4e2d\uff0c\u4e3a\u4e86\u6781\u81f4\u5730\u63d0\u5347\u6027\u80fd\uff0c\u7f16\u8bd1\u5668\u548cCPU\u4f1a\u8fdb\u884c\u4e24\u7c7b\u4e3b\u8981\u7684\u201c\u4f18\u5316\u201d\uff0c\u8fd9\u4e9b\u4f18\u5316\u5728\u5355\u7ebf\u7a0b\u4e0b\u6ca1\u6709\u95ee\u9898\uff0c\u4f46\u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e0b\u4f1a\u5f15\u53d1\u6df7\u4e71\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%86%85%E5%AD%98%E5%B1%8F%E9%9A%9C%E6%98%AF%E4%BB%80%E4%B9%88/#_2","title":"\u6307\u4ee4\u91cd\u6392\u5e8f","text":"<p>\u4e3a\u4e86\u63d0\u9ad8\u6548\u7387\uff0c\u6307\u4ee4\u7684\u5b9e\u9645\u6267\u884c\u987a\u5e8f\u53ef\u80fd\u4e0e\u4ee3\u7801\u7f16\u5199\u7684\u987a\u5e8f\u4e0d\u4e00\u81f4\u3002 \u8fd9\u79cd\u91cd\u6392\u5e8f\u53d1\u751f\u5728\u4e24\u4e2a\u5c42\u9762\uff1a</p> <ol> <li>\u7f16\u8bd1\u5668\u91cd\u6392\u5e8f\uff1a\u5728\u7f16\u8bd1\u9636\u6bb5\uff0c\u7f16\u8bd1\u5668\u4e3a\u4e86\u4f18\u5316\u6027\u80fd\uff0c\u53ef\u80fd\u4f1a\u91cd\u65b0\u5b89\u6392\u6307\u4ee4\u7684\u987a\u5e8f\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4e24\u6761\u6307\u4ee4\u6ca1\u6709\u6570\u636e\u4f9d\u8d56\u5173\u7cfb\uff0c\u7f16\u8bd1\u5668\u53ef\u80fd\u4f1a\u8c03\u6362\u5b83\u4eec\u7684\u987a\u5e8f\u4ee5\u66f4\u597d\u5730\u5229\u7528CPU\u8d44\u6e90\u3002\u4f8b\u5982\uff1a<code>x = r; y = 1;</code> \u8fd9\u4e24\u884c\u4ee3\u7801\u5728\u5f00\u542f\u7f16\u8bd1\u5668\u4f18\u5316\uff08\u5982 <code>g++ -O2</code>\uff09\u540e\uff0c\u5bf9 <code>y</code> \u7684\u8d4b\u503c\u53ef\u80fd\u4f1a\u88ab\u6392\u5230\u5bf9 <code>x</code> \u7684\u8d4b\u503c\u4e4b\u524d\u3002</li> <li> <p>\u5904\u7406\u5668\u4e71\u5e8f\u6267\u884c\uff08Out-of-Order Execution\uff09\uff1a\u73b0\u4ee3CPU\u4e3a\u4e86\u907f\u514d\u56e0\u7b49\u5f85\u5185\u5b58\u6570\u636e\u800c\u7a7a\u95f2\uff0c\u4f1a\u91c7\u7528\u4e71\u5e8f\u6267\u884c\u6280\u672f\u3002\u5982\u679c\u4e00\u6761\u6307\u4ee4\u9700\u8981\u7b49\u5f85\uff0cCPU\u4f1a\u8df3\u8fc7\u5b83\uff0c\u53bb\u6267\u884c\u540e\u9762\u4e0d\u4f9d\u8d56\u4e8e\u7b49\u5f85\u7ed3\u679c\u7684\u6307\u4ee4\u3002 \u8fd9\u79cd\u4f18\u5316\u5728\u5355\u4e2aCPU\u6838\u5fc3\u5185\u90e8\u770b\u662f\u6ca1\u95ee\u9898\u7684\uff0c\u56e0\u4e3a\u6709\u4e13\u95e8\u7684\u673a\u5236\u786e\u4fdd\u6700\u7ec8\u7ed3\u679c\u548c\u987a\u5e8f\u6267\u884c\u4e00\u81f4\u3002\u4f46\u5728\u591a\u6838\u73af\u5883\u4e0b\uff0c\u4e00\u4e2a\u6838\u5fc3\u7684\u4e71\u5e8f\u6267\u884c\uff0c\u5728\u53e6\u4e00\u4e2a\u6838\u5fc3\u770b\u6765\uff0c\u5c31\u662f\u5185\u5b58\u72b6\u6001\u7684\u975e\u9884\u671f\u53d8\u5316\u3002</p> <p>\u4e00\u4e2a\u7ecf\u5178\u7684\u4f8b\u5b50\u662f\uff1a <code>c // \u521d\u59cb\u503c x = 0, y = 0 // \u7ebf\u7a0b1       // \u7ebf\u7a0b2 a = 1;        b = 1; x = b;        y = a;</code> \u5728\u4e0d\u91cd\u6392\u5e8f\u7684\u60c5\u51b5\u4e0b\uff0c(x, y) \u7684\u7ed3\u679c\u53ef\u80fd\u662f (0, 1), (1, 0) \u6216 (1, 1)\u3002\u4f46\u5982\u679c\u53d1\u751f\u91cd\u6392\u5e8f\uff0c\u4f8b\u5982\u7ebf\u7a0b1\u6267\u884c <code>x=b</code> \u5728 <code>a=1</code> \u4e4b\u524d\uff0c\u540c\u65f6\u7ebf\u7a0b2\u6267\u884c <code>y=a</code> \u5728 <code>b=1</code> \u4e4b\u524d\uff0c\u5c31\u53ef\u80fd\u51fa\u73b0 (x, y) = (0, 0) \u7684\u7ed3\u679c\u3002</p> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%86%85%E5%AD%98%E5%B1%8F%E9%9A%9C%E6%98%AF%E4%BB%80%E4%B9%88/#_3","title":"\u7f13\u5b58\u53ef\u89c1\u6027\u95ee\u9898","text":"<p>\u5728\u591a\u6838\uff08SMP\uff09\u67b6\u6784\u4e2d\uff0c\u6bcf\u4e2aCPU\u6838\u5fc3\u90fd\u6709\u81ea\u5df1\u72ec\u7acb\u7684\u9ad8\u901f\u7f13\u5b58\uff08\u5982L1\u3001L2 Cache\uff09\u3002 \u5f53\u4e00\u4e2a\u6838\u5fc3\uff08CPU 0\uff09\u4fee\u6539\u4e86\u4e00\u4e2a\u5171\u4eab\u53d8\u91cf\uff08\u5982 <code>x=42</code>\uff09\u65f6\uff0c\u5b83\u901a\u5e38\u662f\u5148\u5c06\u65b0\u503c\u5199\u5165\u81ea\u5df1\u7684\u9ad8\u901f\u7f13\u5b58\u4e2d\uff0c\u5e76\u4e0d\u4f1a\u7acb\u5373\u540c\u6b65\u5230\u4e3b\u5185\u5b58\u3002 \u8fd9\u65f6\uff0c\u53e6\u4e00\u4e2a\u6838\u5fc3\uff08CPU 1\uff09\u5982\u679c\u53bb\u8bfb\u53d6\u8fd9\u4e2a\u53d8\u91cf\uff0c\u5b83\u53ef\u80fd\u4f1a\u4ece\u81ea\u5df1\u7684\u7f13\u5b58\u6216\u4e3b\u5185\u5b58\u4e2d\u8bfb\u5230\u4e00\u4e2a\u65e7\u503c\u3002</p> <p>\u8fd9\u5c31\u5bfc\u81f4\u4e86\u53ef\u89c1\u6027\u95ee\u9898\uff1a\u4e00\u4e2a\u7ebf\u7a0b\u5bf9\u5171\u4eab\u53d8\u91cf\u7684\u4fee\u6539\uff0c\u4e0d\u80fd\u7acb\u5373\u88ab\u5176\u4ed6\u7ebf\u7a0b\u770b\u5230\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%86%85%E5%AD%98%E5%B1%8F%E9%9A%9C%E6%98%AF%E4%BB%80%E4%B9%88/#_4","title":"\u89e3\u51b3\u65b9\u6848\uff1a\u5185\u5b58\u5c4f\u969c","text":"<p>\u5185\u5b58\u5c4f\u969c\u6b63\u662f\u4e3a\u4e86\u89e3\u51b3\u4e0a\u8ff0\u91cd\u6392\u5e8f\u548c\u53ef\u89c1\u6027\u95ee\u9898\u800c\u5b58\u5728\u7684\u3002\u5b83\u901a\u8fc7\u5f3a\u5236CPU\u6267\u884c\u7279\u5b9a\u7684\u64cd\u4f5c\u6765\u786e\u4fdd\u987a\u5e8f\u548c\u53ef\u89c1\u6027\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%86%85%E5%AD%98%E5%B1%8F%E9%9A%9C%E6%98%AF%E4%BB%80%E4%B9%88/#_5","title":"\u6291\u5236\u91cd\u6392\u5e8f","text":"<p>\u5185\u5b58\u5c4f\u969c\u6307\u4ee4\u4f1a\u544a\u8bc9CPU\u548c\u7f16\u8bd1\u5668\uff1a\u201c\u5728\u6267\u884c\u5c4f\u969c\u4e4b\u540e\u7684\u4efb\u4f55\u8bfb/\u5199\u64cd\u4f5c\u4e4b\u524d\uff0c\u5fc5\u987b\u786e\u4fdd\u5c4f\u969c\u4e4b\u524d\u7684\u6240\u6709\u8bfb/\u5199\u64cd\u4f5c\u90fd\u5df2\u7ecf\u5b8c\u6210\u3002\u201d \u8fd9\u5c31\u6709\u6548\u5730\u7981\u6b62\u4e86\u6307\u4ee4\u8de8\u8d8a\u5c4f\u969c\u8fdb\u884c\u91cd\u6392\u5e8f\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%86%85%E5%AD%98%E5%B1%8F%E9%9A%9C%E6%98%AF%E4%BB%80%E4%B9%88/#_6","title":"\u4fdd\u8bc1\u53ef\u89c1\u6027","text":"<p>\u5185\u5b58\u5c4f\u969c\u901a\u5e38\u4f1a\u9644\u5e26\u5237\u65b0\u7f13\u5b58\u76f8\u5173\u7684\u64cd\u4f5c\u3002 \u4f8b\u5982\uff0c\u4e00\u4e2a\u5199\u5c4f\u969c\uff08Store Barrier\uff09\u4f1a\u5f3a\u5236\u5c06\u5f53\u524dCPU\u6838\u5fc3\u7684\u201c\u5199\u7f13\u51b2\u533a\u201d\uff08Store Buffer\uff09\u4e2d\u7684\u6570\u636e\u5237\u65b0\u5230\u5176\u9ad8\u901f\u7f13\u5b58\u4e2d\uff0c\u5e76\u501f\u52a9\u7f13\u5b58\u4e00\u81f4\u6027\u534f\u8bae\uff08\u5982MESI\u534f\u8bae\uff09\u901a\u77e5\u5176\u4ed6\u6838\u5fc3\u5b83\u4eec\u5bf9\u5e94\u7684\u7f13\u5b58\u884c\u5df2\u5931\u6548\u3002 \u5f53\u5176\u4ed6\u6838\u5fc3\u9700\u8981\u8bfb\u53d6\u8be5\u6570\u636e\u65f6\uff0c\u53d1\u73b0\u81ea\u5df1\u7684\u7f13\u5b58\u5df2\u5931\u6548\uff0c\u5c31\u4f1a\u4ece\u4e3b\u5185\u5b58\u6216\u5176\u4ed6\u6838\u5fc3\u7684\u7f13\u5b58\u4e2d\u83b7\u53d6\u6700\u65b0\u503c\uff0c\u4ece\u800c\u4fdd\u8bc1\u4e86\u53ef\u89c1\u6027\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%86%85%E5%AD%98%E5%B1%8F%E9%9A%9C%E6%98%AF%E4%BB%80%E4%B9%88/#_7","title":"\u5185\u5b58\u5c4f\u969c\u7684\u7c7b\u578b","text":"<p>\u4e0d\u540c\u7684CPU\u67b6\u6784\u63d0\u4f9b\u4e86\u4e0d\u540c\u7c92\u5ea6\u7684\u5185\u5b58\u5c4f\u969c\u6307\u4ee4\u3002\u4ece\u529f\u80fd\u4e0a\uff0c\u5b83\u4eec\u901a\u5e38\u53ef\u4ee5\u5206\u4e3a\u4ee5\u4e0b\u51e0\u7c7b\uff1a</p> <ol> <li> <p>\u5199\u5c4f\u969c (Write/Store Barrier)\uff1a</p> <ul> <li>\u6307\u4ee4\u793a\u4f8b (x86): <code>sfence</code></li> <li>\u4f5c\u7528: \u786e\u4fdd\u5728\u8be5\u5c4f\u969c\u4e4b\u524d\u7684\u6240\u6709\u201c\u5199\u201d\u64cd\u4f5c\uff0c\u90fd\u4f18\u5148\u4e8e\u8be5\u5c4f\u969c\u4e4b\u540e\u7684\u6240\u6709\u201c\u5199\u201d\u64cd\u4f5c\u88ab\u5176\u4ed6\u5904\u7406\u5668\u770b\u5230\u3002\u5b83\u53ea\u5bf9\u5199\u64cd\u4f5c\u6392\u5e8f\u3002</li> </ul> </li> <li> <p>\u8bfb\u5c4f\u969c (Read/Load Barrier)\uff1a</p> <ul> <li>\u6307\u4ee4\u793a\u4f8b (x86): <code>lfence</code></li> <li>\u4f5c\u7528: \u786e\u4fdd\u5728\u8be5\u5c4f\u969c\u4e4b\u524d\u7684\u6240\u6709\u201c\u8bfb\u201d\u64cd\u4f5c\uff0c\u90fd\u4f18\u5148\u4e8e\u8be5\u5c4f\u969c\u4e4b\u540e\u7684\u6240\u6709\u201c\u8bfb\u201d\u64cd\u4f5c\u6267\u884c\u3002\u5b83\u53ea\u5bf9\u8bfb\u64cd\u4f5c\u6392\u5e8f\u3002</li> </ul> </li> <li> <p>\u5168\u529f\u80fd\u5c4f\u969c (Full Barrier)\uff1a</p> <ul> <li>\u6307\u4ee4\u793a\u4f8b (x86): <code>mfence</code></li> <li>\u4f5c\u7528: \u540c\u65f6\u5177\u5907\u8bfb\u5c4f\u969c\u548c\u5199\u5c4f\u969c\u7684\u529f\u80fd\u3002\u786e\u4fdd\u5c4f\u969c\u524d\u7684\u6240\u6709\u8bfb\u5199\u64cd\u4f5c\u90fd\u4f18\u5148\u4e8e\u5c4f\u969c\u540e\u7684\u6240\u6709\u8bfb\u5199\u64cd\u4f5c\u3002\u8fd9\u662f\u6700\u5f3a\u4f46\u5f00\u9500\u4e5f\u6700\u5927\u7684\u5c4f\u969c\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%86%85%E5%AD%98%E5%B1%8F%E9%9A%9C%E6%98%AF%E4%BB%80%E4%B9%88/#mesi","title":"\u5185\u5b58\u5c4f\u969c\u4e0e\u7f13\u5b58\u4e00\u81f4\u6027\u534f\u8bae\uff08\u5982MESI\uff09\u7684\u5173\u7cfb","text":"<p>\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u5173\u952e\u4e14\u5bb9\u6613\u6df7\u6dc6\u7684\u70b9\u3002</p> <ul> <li>MESI\u534f\u8bae\uff1a\u89e3\u51b3\u7684\u662f\u591a\u4e2a\u6838\u5fc3\u4e4b\u95f4\u7f13\u5b58\u6570\u636e\u7684\u6700\u7ec8\u4e00\u81f4\u6027\u95ee\u9898\u3002\u5b83\u786e\u4fdd\u5f53\u4e00\u4e2a\u6838\u5fc3\u4fee\u6539\u6570\u636e\u540e\uff0c\u5176\u4ed6\u6838\u5fc3\u6700\u7ec8\u80fd\u5f97\u5230\u901a\u77e5\uff08\u901a\u8fc7\u5c06\u5b83\u4eec\u7684\u7f13\u5b58\u884c\u7f6e\u4e3a\u201c\u65e0\u6548\u201d\u72b6\u6001\uff09\uff0c\u4ece\u800c\u5728\u4e0b\u6b21\u8bbf\u95ee\u65f6\u80fd\u83b7\u53d6\u5230\u6700\u65b0\u6570\u636e\u3002</li> <li>\u5185\u5b58\u5c4f\u969c\uff1a\u89e3\u51b3\u7684\u662f\u64cd\u4f5c\u7684\u987a\u5e8f\u6027\u95ee\u9898\u3002MESI\u534f\u8bae\u672c\u8eab\u4e0d\u4fdd\u8bc1\u64cd\u4f5c\u7684\u987a\u5e8f\u3002\u5373\u4f7f\u6709\u4e86MESI\uff0cCPU\u4ecd\u7136\u53ef\u80fd\u4e71\u5e8f\u6267\u884c\uff0c\u5bfc\u81f4\u5176\u4ed6\u6838\u5fc3\u89c2\u5bdf\u5230\u9519\u8bef\u987a\u5e8f\u7684\u5185\u5b58\u66f4\u65b0\u3002</li> </ul> <p>\u53ef\u4ee5\u8fd9\u6837\u7406\u89e3\uff1aMESI\u534f\u8bae\u63d0\u4f9b\u4e86\u6570\u636e\u540c\u6b65\u7684\u7269\u7406\u57fa\u7840\uff0c\u800c\u5185\u5b58\u5c4f\u969c\u5219\u662f\u5728\u8fd9\u4e2a\u57fa\u7840\u4e0a\uff0c\u7531\u7a0b\u5e8f\u5458\u6216\u7f16\u8bd1\u5668\u53d1\u51fa\u7684\u3001\u7528\u4e8e\u63a7\u5236\u540c\u6b65\u65f6\u673a\u7684\u201c\u547d\u4ee4\u201d\u3002 \u5185\u5b58\u5c4f\u969c\u5f3a\u5236CPU\u7b49\u5f85\u7f13\u5b58\u64cd\u4f5c\uff08\u5982\u7b49\u5f85\u5176\u4ed6\u6838\u5fc3\u5bf9\u81ea\u5df1\u7f13\u5b58\u5931\u6548\u7684\u786e\u8ba4\uff09\u5b8c\u6210\u540e\uff0c\u518d\u7ee7\u7eed\u6267\u884c\u540e\u7eed\u6307\u4ee4\uff0c\u4ece\u800c\u4fdd\u8bc1\u4e86\u987a\u5e8f\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%86%85%E5%AD%98%E5%B1%8F%E9%9A%9C%E6%98%AF%E4%BB%80%E4%B9%88/#_8","title":"\u5b9e\u9645\u5e94\u7528","text":"<p>\u5728\u5e94\u7528\u5c42\u5f00\u53d1\u4e2d\uff0c\u6211\u4eec\u901a\u5e38\u4e0d\u76f4\u63a5\u4f7f\u7528\u6c47\u7f16\u6307\u4ee4\u6765\u63d2\u5165\u5185\u5b58\u5c4f\u969c\u3002\u76f8\u53cd\uff0c\u6211\u4eec\u4f7f\u7528\u9ad8\u7ea7\u8bed\u8a00\u6216\u5e93\u63d0\u4f9b\u7684\u5c01\u88c5\u597d\u7684\u540c\u6b65\u539f\u8bed\uff0c\u8fd9\u4e9b\u539f\u8bed\u5728\u5e95\u5c42\u5df2\u7ecf\u4e3a\u6211\u4eec\u5904\u7406\u4e86\u5185\u5b58\u5c4f\u969c\u3002</p> <ul> <li>Java\u4e2d\u7684<code>volatile</code>\u5173\u952e\u5b57\uff1a\u5bf9\u4e00\u4e2a<code>volatile</code>\u53d8\u91cf\u7684\u5199\u64cd\u4f5c\u4e4b\u540e\uff0c\u4f1a\u63d2\u5165\u4e00\u4e2a\u5199\u5c4f\u969c\uff1b\u5728\u8bfb\u64cd\u4f5c\u4e4b\u524d\uff0c\u4f1a\u63d2\u5165\u4e00\u4e2a\u8bfb\u5c4f\u969c\u3002\u8fd9\u4fdd\u8bc1\u4e86\u5bf9\u8be5\u53d8\u91cf\u7684\u4fee\u6539\u5bf9\u5176\u4ed6\u7ebf\u7a0b\u7acb\u5373\u53ef\u89c1\uff0c\u5e76\u7981\u6b62\u4e86\u76f8\u5173\u6307\u4ee4\u7684\u91cd\u6392\u5e8f\u3002</li> <li>\u9501\uff08Locks/Mutexes\uff09\uff1a\u5728\u52a0\u9501\u548c\u89e3\u9501\u64cd\u4f5c\u4e2d\uff0c\u90fd\u9690\u542b\u4e86\u5185\u5b58\u5c4f\u969c\u3002\u89e3\u9501\u64cd\u4f5c\u4f1a\u5305\u542b\u4e00\u4e2a\u5199\u5c4f\u969c\uff0c\u786e\u4fdd\u4e34\u754c\u533a\u5185\u7684\u6240\u6709\u4fee\u6539\u90fd\u5df2\u540c\u6b65\u5230\u4e3b\u5b58\uff1b\u52a0\u9501\u64cd\u4f5c\u4f1a\u5305\u542b\u4e00\u4e2a\u8bfb\u5c4f\u969c\uff0c\u786e\u4fdd\u80fd\u8bfb\u53d6\u5230\u6700\u65b0\u7684\u5171\u4eab\u6570\u636e\u3002</li> <li>\u539f\u5b50\u64cd\u4f5c\uff08Atomics/CAS\uff09\uff1a\u5982<code>Compare-and-Swap</code>\u64cd\u4f5c\uff0c\u5728x86\u4e0a\u901a\u5e38\u4f1a\u4f7f\u7528<code>lock</code>\u524d\u7f00\u7684\u6c47\u7f16\u6307\u4ee4\uff0c\u8fd9\u4e2a<code>lock</code>\u524d\u7f00\u672c\u8eab\u5c31\u8d77\u5230\u4e86\u5168\u529f\u80fd\u5c4f\u969c\u7684\u4f5c\u7528\uff0c\u4fdd\u8bc1\u4e86\u539f\u5b50\u6027\u548c\u5185\u5b58\u987a\u5e8f\u3002</li> <li>\u65e0\u9501\u6570\u636e\u7ed3\u6784\uff1a\u5728\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u6216\u9ad8\u6027\u80fd\u8ba1\u7b97\u5e93\u4e2d\uff0c\u4e3a\u4e86\u907f\u514d\u9501\u5e26\u6765\u7684\u5f00\u9500\uff0c\u5f00\u53d1\u8005\u4f1a\u76f4\u63a5\u4f7f\u7528\u5185\u5b58\u5c4f\u969c\u6765\u6784\u5efa\u65e0\u9501\uff08Lock-free\uff09\u7684\u6570\u636e\u7ed3\u6784\uff0c\u4f8b\u5982\u60a8\u63d0\u4f9b\u7684\u8d44\u6599\u4e2d\u7684<code>kfifo</code>\u65e0\u9501\u73af\u5f62\u961f\u5217\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%8F%8C%E9%87%8D%E5%88%A4%E5%AE%9A%E9%94%81%E6%98%AF%E4%BB%80%E4%B9%88/","title":"\u53cc\u91cd\u5224\u5b9a\u9501\u662f\u4ec0\u4e48","text":"<p>\u5728\u5b9e\u73b0\u5355\u4f8b\u6a21\u5f0f\u65f6\uff0c\u6211\u4eec\u5e0c\u671b\u5bf9\u8c61\u53ea\u5728\u7b2c\u4e00\u6b21\u88ab\u9700\u8981\u65f6\u624d\u521b\u5efa\uff08\u5ef6\u8fdf\u521d\u59cb\u5316\uff09\uff0c\u540c\u65f6\u8fd8\u8981\u4fdd\u8bc1\u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e0b\u53ea\u6709\u4e00\u4e2a\u5b9e\u4f8b\u88ab\u521b\u5efa\uff08\u7ebf\u7a0b\u5b89\u5168\uff09\u3002</p> <p>\u4e00\u4e2a\u6700\u7b80\u5355\u76f4\u63a5\u7684\u7ebf\u7a0b\u5b89\u5168\u65b9\u6cd5\u662f\u8fd9\u6837\u7684\uff1a</p> <pre><code>public class Singleton {\n    private static Singleton instance;\n\n    private Singleton() {}\n\n    public static synchronized Singleton getInstance() {\n        if (instance == null) {\n            instance = new Singleton();\n        }\n        return instance;\n    }\n}\n</code></pre> <ul> <li>\u8bf4\u660e\uff1a\u8fd9\u4e2a\u65b9\u6cd5\u5728<code>getInstance()</code>\u4e0a\u52a0\u4e86<code>synchronized</code>\u5173\u952e\u5b57\uff0c\u786e\u4fdd\u4e86\u7ebf\u7a0b\u5b89\u5168\u3002</li> <li>\u95ee\u9898\uff1a\u8fd9\u79cd\u65b9\u6cd5\u867d\u7136\u5b89\u5168\uff0c\u4f46\u6548\u7387\u4f4e\u4e0b\u3002<code>synchronized</code>\u4f1a\u7ed9\u6574\u4e2a\u65b9\u6cd5\u4e0a\u9501\uff0c\u610f\u5473\u7740\u65e0\u8bba\u5b9e\u4f8b\u662f\u5426\u5df2\u7ecf\u88ab\u521b\u5efa\uff0c\u6bcf\u6b21\u8c03\u7528<code>getInstance()</code>\u90fd\u4f1a\u89e6\u53d1\u540c\u6b65\uff0c\u4ea7\u751f\u4e0d\u5fc5\u8981\u7684\u6027\u80fd\u5f00\u9500\u3002\u5b9e\u9645\u4e0a\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5728\u7b2c\u4e00\u6b21\u521b\u5efa\u5b9e\u4f8b\u65f6\u8fdb\u884c\u540c\u6b65\uff0c\u4e00\u65e6\u5b9e\u4f8b\u521b\u5efa\u5b8c\u6210\uff0c\u540e\u7eed\u7684\u8bfb\u53d6\u64cd\u4f5c\u662f\u4e0d\u9700\u8981\u540c\u6b65\u7684\u3002</li> </ul> <p>\u53cc\u91cd\u5224\u5b9a\u9501\uff08DCL\uff09\u6b63\u662f\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u6027\u80fd\u95ee\u9898\u800c\u8bde\u751f\u7684\u3002\u5b83\u7684\u6838\u5fc3\u601d\u60f3\u662f\uff1a\u5728\u52a0\u9501\u524d\uff0c\u5148\u68c0\u67e5\u4e00\u6b21\u5b9e\u4f8b\u662f\u5426\u5b58\u5728\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%8F%8C%E9%87%8D%E5%88%A4%E5%AE%9A%E9%94%81%E6%98%AF%E4%BB%80%E4%B9%88/#dcl","title":"\u53cc\u91cd\u5224\u5b9a\u9501\uff08DCL\uff09\u7684\u5b9e\u73b0","text":"<p>\u4e0b\u9762\u662fDCL\u7684\u5178\u578b\u5b9e\u73b0\u4ee3\u7801\uff1a</p> <pre><code>public class Singleton {\n    // \u5173\u952e\u70b91: \u4f7f\u7528 volatile \u5173\u952e\u5b57\u4fee\u9970\u5b9e\u4f8b\u53d8\u91cf\n    private static volatile Singleton instance;\n\n    private Singleton() {}\n\n    public static Singleton getInstance() {\n        // \u5173\u952e\u70b92: \u7b2c\u4e00\u6b21\u68c0\u67e5\uff0c\u4e0d\u52a0\u9501\n        if (instance == null) {\n            // \u5173\u952e\u70b93: \u8fdb\u5165\u540c\u6b65\u4ee3\u7801\u5757\n            synchronized (Singleton.class) {\n                // \u5173\u952e\u70b94: \u7b2c\u4e8c\u6b21\u68c0\u67e5\uff0c\u52a0\u9501\u72b6\u6001\u4e0b\u68c0\u67e5\n                if (instance == null) {\n                    // \u521b\u5efa\u5b9e\u4f8b\n                    instance = new Singleton();\n                }\n            }\n        }\n        return instance;\n    }\n}\n</code></pre> <ol> <li> <p>\u7b2c\u4e00\u6b21\u68c0\u67e5 (<code>if (instance == null)</code>)\uff1a</p> <ul> <li>\u8fd9\u662fDCL\u7684\u7b2c\u4e00\u4e2a\u201c\u5224\u5b9a\u201d\u3002</li> <li>\u5b83\u7684\u4f5c\u7528\u662f\uff1a\u5982\u679c\u5b9e\u4f8b\u5df2\u7ecf\u521b\u5efa\u597d\u4e86\uff0c\u90a3\u4e48\u540e\u7eed\u7684\u7ebf\u7a0b\u8c03\u7528<code>getInstance()</code>\u65f6\uff0c\u4f1a\u76f4\u63a5\u901a\u8fc7\u8fd9\u4e2a\u68c0\u67e5\u5e76\u7acb\u5373\u8fd4\u56de\u5df2\u7ecf\u521b\u5efa\u597d\u7684\u5b9e\u4f8b\uff0c\u5b8c\u5168\u4e0d\u4f1a\u8fdb\u5165<code>synchronized</code>\u540c\u6b65\u5757\u3002\u8fd9\u6781\u5927\u5730\u63d0\u9ad8\u4e86\u6027\u80fd\uff0c\u907f\u514d\u4e86\u7edd\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u7684\u540c\u6b65\u5f00\u9500\u3002</li> </ul> </li> <li> <p>\u8fdb\u5165\u540c\u6b65\u5757 (<code>synchronized (Singleton.class)</code>)\uff1a</p> <ul> <li>\u53ea\u6709\u5f53<code>instance</code>\u4e3a<code>null</code>\u65f6\uff0c\u7ebf\u7a0b\u624d\u4f1a\u5c1d\u8bd5\u8fdb\u5165\u8fd9\u4e2a\u540c\u6b65\u4ee3\u7801\u5757\u3002</li> <li>\u8fd9\u4fdd\u8bc1\u4e86\u5728\u4efb\u4f55\u4e00\u4e2a\u65f6\u95f4\u70b9\uff0c\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u53ef\u4ee5\u8fdb\u5165\u5185\u90e8\u4ee3\u7801\u53bb\u521b\u5efa\u5b9e\u4f8b\u3002</li> </ul> </li> <li> <p>\u7b2c\u4e8c\u6b21\u68c0\u67e5 (<code>if (instance == null)</code>)\uff1a</p> <ul> <li>\u8fd9\u662fDCL\u7684\u7b2c\u4e8c\u4e2a\u201c\u5224\u5b9a\u201d\uff0c\u4e5f\u662f\u5176\u7cbe\u9ad3\u6240\u5728\u3002</li> <li>\u5b83\u7684\u4f5c\u7528\u662f\uff1a\u9632\u6b62\u591a\u4e2a\u5b9e\u4f8b\u88ab\u521b\u5efa\u3002\u8003\u8651\u8fd9\u6837\u4e00\u79cd\u60c5\u51b5\uff1a\u7ebf\u7a0bA\u548c\u7ebf\u7a0bB\u540c\u65f6\u901a\u8fc7\u4e86\u7b2c\u4e00\u6b21\u68c0\u67e5\uff08\u56e0\u4e3a\u90a3\u65f6<code>instance</code>\u786e\u5b9e\u662f<code>null</code>\uff09\u3002\u7ebf\u7a0bA\u5148\u83b7\u5f97\u4e86\u9501\uff0c\u8fdb\u5165\u4e86\u540c\u6b65\u5757\uff1b\u7ebf\u7a0bB\u5728\u5916\u9762\u7b49\u5f85\u3002\u5f53\u7ebf\u7a0bA\u521b\u5efa\u5b8c\u5b9e\u4f8b\u5e76\u91ca\u653e\u9501\u540e\uff0c\u7ebf\u7a0bB\u83b7\u5f97\u9501\u5e76\u8fdb\u5165\u540c\u6b65\u5757\u3002\u5982\u679c\u6ca1\u6709\u8fd9\u7b2c\u4e8c\u6b21\u68c0\u67e5\uff0c\u7ebf\u7a0bB\u4f1a\u6beb\u4e0d\u77e5\u60c5\u5730\u518d\u6b21\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5b9e\u4f8b\uff0c\u8fd9\u5c31\u8fdd\u80cc\u4e86\u5355\u4f8b\u6a21\u5f0f\u7684\u521d\u8877\u3002\u6709\u4e86\u7b2c\u4e8c\u6b21\u68c0\u67e5\uff0c\u7ebf\u7a0bB\u4f1a\u53d1\u73b0<code>instance</code>\u5df2\u7ecf\u4e0d\u4e3a<code>null</code>\u4e86\uff0c\u4e8e\u662f\u5b83\u4e0d\u4f1a\u518d\u521b\u5efa\u5b9e\u4f8b\uff0c\u76f4\u63a5\u9000\u51fa\u540c\u6b65\u5757\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%8F%8C%E9%87%8D%E5%88%A4%E5%AE%9A%E9%94%81%E6%98%AF%E4%BB%80%E4%B9%88/#volatile","title":"<code>volatile</code>\u5173\u952e\u5b57\u4e3a\u4ec0\u4e48\u662f\u5fc5\u9700\u7684\uff1f","text":"<p>\u5728\u65e9\u671f\u7684DCL\u5b9e\u73b0\u4e2d\uff0c\u5f88\u591a\u4eba\u5ffd\u7565\u4e86<code>volatile</code>\u5173\u952e\u5b57\uff0c\u8fd9\u5bfc\u81f4DCL\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u662f\u5931\u6548\u7684\u3002\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u5fae\u5999\u4e14\u91cd\u8981\u7684\u95ee\u9898\uff0c\u6839\u6e90\u5728\u4e8eJava\u5185\u5b58\u6a21\u578b\u4e2d\u7684\u6307\u4ee4\u91cd\u6392\u5e8f\uff08Instruction Reordering\uff09\u3002</p> <p><code>instance = new Singleton();</code> \u8fd9\u884c\u4ee3\u7801\u770b\u8d77\u6765\u662f\u4e00\u4e2a\u539f\u5b50\u64cd\u4f5c\uff0c\u4f46\u5b9e\u9645\u4e0a\u5b83\u5728JVM\u4e2d\u5927\u81f4\u88ab\u5206\u4e3a\u4e09\u4e2a\u6b65\u9aa4\uff1a 1.  <code>memory = allocate();</code> // 1. \u5206\u914d\u5bf9\u8c61\u7684\u5185\u5b58\u7a7a\u95f4 2.  <code>ctorInstance(memory);</code> // 2. \u521d\u59cb\u5316\u5bf9\u8c61\uff08\u6267\u884c\u6784\u9020\u51fd\u6570\uff09 3.  <code>instance = memory;</code>    // 3. \u5c06instance\u5f15\u7528\u6307\u5411\u5206\u914d\u7684\u5185\u5b58\u5730\u5740</p> <p>\u5728\u6ca1\u6709<code>volatile</code>\u7684\u60c5\u51b5\u4e0b\uff0cJVM\u4e3a\u4e86\u4f18\u5316\u6027\u80fd\uff0c\u53ef\u80fd\u4f1a\u5bf9\u8fd9\u4e09\u4e2a\u6b65\u9aa4\u8fdb\u884c\u91cd\u6392\u5e8f\uff0c\u4f8b\u5982\u6267\u884c\u987a\u5e8f\u53ef\u80fd\u53d8\u6210 <code>1 -&gt; 3 -&gt; 2</code>\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%8F%8C%E9%87%8D%E5%88%A4%E5%AE%9A%E9%94%81%E6%98%AF%E4%BB%80%E4%B9%88/#_1","title":"\u51fa\u73b0\u95ee\u9898\u7684\u573a\u666f\uff1a","text":"<ol> <li>\u7ebf\u7a0bA\u8fdb\u5165\u540c\u6b65\u5757\uff0c\u6267\u884c<code>instance = new Singleton();</code>\u3002</li> <li>\u7531\u4e8e\u6307\u4ee4\u91cd\u6392\u5e8f\uff0cJVM\u5148\u6267\u884c\u4e86\u6b65\u9aa41\uff08\u5206\u914d\u5185\u5b58\uff09\u548c\u6b65\u9aa43\uff08\u5c06instance\u6307\u5411\u5185\u5b58\u5730\u5740\uff09\u3002\u6b64\u65f6\uff0c<code>instance</code>\u5f15\u7528\u5df2\u7ecf\u4e0d\u4e3a<code>null</code>\u4e86\uff0c\u4f46\u5b83\u6307\u5411\u7684\u5185\u5b58\u4e2d\u7684\u5bf9\u8c61\u8fd8\u6ca1\u6709\u88ab\u521d\u59cb\u5316\uff08\u6b65\u9aa42\u8fd8\u6ca1\u6267\u884c\uff09\u3002</li> <li>\u5c31\u5728\u8fd9\u4e00\u77ac\u95f4\uff0c\u7ebf\u7a0bB\u8c03\u7528<code>getInstance()</code>\u3002</li> <li>\u7ebf\u7a0bB\u6267\u884c\u7b2c\u4e00\u6b21\u68c0\u67e5<code>if (instance == null)</code>\u3002\u5b83\u53d1\u73b0<code>instance</code>\u4e0d\u4e3a<code>null</code>\uff0c\u4e8e\u662f\u76f4\u63a5\u8fd4\u56de<code>instance</code>\u3002</li> <li>\u4f46\u662f\uff0c\u7ebf\u7a0bB\u5f97\u5230\u7684<code>instance</code>\u662f\u4e00\u4e2a\u5c1a\u672a\u521d\u59cb\u5316\u5b8c\u6210\u7684\u5bf9\u8c61\uff0c\u5982\u679c\u6b64\u65f6\u7ebf\u7a0bB\u5c1d\u8bd5\u4f7f\u7528\u8fd9\u4e2a\u5bf9\u8c61\u7684\u4efb\u4f55\u6210\u5458\u53d8\u91cf\u6216\u65b9\u6cd5\uff0c\u90fd\u53ef\u80fd\u4f1a\u5bfc\u81f4\u7a7a\u6307\u9488\u5f02\u5e38\u6216\u5176\u4ed6\u4e0d\u53ef\u9884\u89c1\u7684\u9519\u8bef\u3002</li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%8F%8C%E9%87%8D%E5%88%A4%E5%AE%9A%E9%94%81%E6%98%AF%E4%BB%80%E4%B9%88/#volatile_1","title":"<code>volatile</code>\u7684\u4f5c\u7528\uff1a","text":"<p><code>volatile</code>\u5173\u952e\u5b57\u5728\u8fd9\u91cc\u6709\u4e24\u4e2a\u5173\u952e\u4f5c\u7528\uff1a 1.  \u4fdd\u8bc1\u53ef\u89c1\u6027\uff1a\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u4fee\u6539\u4e86<code>volatile</code>\u53d8\u91cf\u7684\u503c\uff0c\u65b0\u503c\u5bf9\u5176\u4ed6\u7ebf\u7a0b\u6765\u8bf4\u662f\u7acb\u5373\u53ef\u89c1\u7684\u3002 2.  \u7981\u6b62\u6307\u4ee4\u91cd\u6392\u5e8f\uff1a<code>volatile</code>\u4f1a\u63d0\u4f9b\u4e00\u4e2a\u201c\u5185\u5b58\u5c4f\u969c\u201d\uff08Memory Barrier\uff09\uff0c\u5b83\u80fd\u786e\u4fdd\u5728<code>volatile</code>\u5199\u64cd\u4f5c\uff08\u5728\u8fd9\u91cc\u662f<code>instance = memory;</code>\uff09\u4e4b\u524d\u7684\u6240\u6709\u64cd\u4f5c\uff08\u5305\u62ec\u5bf9\u8c61\u7684\u521d\u59cb\u5316\uff09\u90fd\u5df2\u7ecf\u5b8c\u6210\u3002\u5b83\u5f3a\u5236<code>1 -&gt; 2 -&gt; 3</code>\u7684\u987a\u5e8f\u6267\u884c\uff0c\u4ece\u800c\u9632\u6b62\u4e86\u4e0a\u9762\u63cf\u8ff0\u7684\u90a3\u4e2a\u95ee\u9898\u3002</p> <p>\u56e0\u6b64\uff0c<code>volatile</code>\u662f\u5b9e\u73b0\u4e00\u4e2a\u6b63\u786e\u3001\u53ef\u9760\u7684\u53cc\u91cd\u5224\u5b9a\u9501\u5355\u4f8b\u6a21\u5f0f\u4e0d\u53ef\u6216\u7f3a\u7684\u4e00\u90e8\u5206\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%8F%8C%E9%87%8D%E5%88%A4%E5%AE%9A%E9%94%81%E6%98%AF%E4%BB%80%E4%B9%88/#_2","title":"\u73b0\u4ee3\u5b9e\u8df5","text":"<p>\u53cc\u91cd\u5224\u5b9a\u9501\u662f\u4e00\u4e2a\u806a\u660e\u7684\u8bbe\u8ba1\uff0c\u5b83\u5728\u4fdd\u8bc1\u7ebf\u7a0b\u5b89\u5168\u7684\u540c\u65f6\uff0c\u517c\u987e\u4e86\u6027\u80fd\u3002\u4f46\u7531\u4e8e\u5176\u590d\u6742\u6027\uff08\u5c24\u5176\u662f\u5bf9<code>volatile</code>\u548c\u6307\u4ee4\u91cd\u6392\u5e8f\u7684\u4f9d\u8d56\uff09\uff0c\u5728\u9762\u8bd5\u548c\u7406\u8bba\u5b66\u4e60\u4e2d\u975e\u5e38\u91cd\u8981\u3002</p> <p>\u4e0d\u8fc7\uff0c\u5728\u73b0\u4ee3Java\u7f16\u7a0b\u5b9e\u8df5\u4e2d\uff0c\u6709\u66f4\u7b80\u5355\u3001\u66f4\u5b89\u5168\u7684\u5b9e\u73b0\u5355\u4f8b\u6a21\u5f0f\u7684\u65b9\u6cd5\uff0c\u5b83\u4eec\u5229\u7528\u4e86JVM\u7c7b\u52a0\u8f7d\u673a\u5236\u6765\u4fdd\u8bc1\u7ebf\u7a0b\u5b89\u5168\uff0c\u901a\u5e38\u66f4\u53d7\u63a8\u8350\uff1a</p> <ul> <li>\u9759\u6001\u5185\u90e8\u7c7b\uff08Initialization-on-demand holder idiom\uff09\uff1a</li> </ul> <pre><code>public class Singleton {\n    private Singleton() {}\n\n    private static class SingletonHolder {\n        private static final Singleton INSTANCE = new Singleton();\n    }\n\n    public static Singleton getInstance() {\n        return SingletonHolder.INSTANCE;\n    }\n}\n</code></pre> <p>\u8fd9\u662f\u76ee\u524d\u6700\u88ab\u63a8\u5d07\u7684\u5355\u4f8b\u5b9e\u73b0\u65b9\u5f0f\u3002\u5b83\u65e2\u5b9e\u73b0\u4e86\u5ef6\u8fdf\u52a0\u8f7d\uff0c\u53c8\u7531JVM\u4fdd\u8bc1\u4e86\u7ebf\u7a0b\u5b89\u5168\uff0c\u4ee3\u7801\u7b80\u6d01\u4e14\u4e0d\u4f1a\u51fa\u9519\u3002</p> <ul> <li>\u679a\u4e3e\uff08Enum\uff09\uff1a</li> </ul> <pre><code>public enum Singleton {\n    INSTANCE;\n\n    public void doSomething() {\n        // ...\n    }\n}\n</code></pre>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%90%8C%E6%AD%A5%E3%80%81%E5%BC%82%E6%AD%A5IO%EF%BC%8C%E4%BB%A5%E5%8F%8A%E5%92%8C%E9%98%BB%E5%A1%9E%E3%80%81%E9%9D%9E%E9%98%BB%E5%A1%9EIO%E7%9A%84%E5%8C%BA%E5%88%AB%E5%92%8C%E8%81%94%E7%B3%BB/","title":"\u540c\u6b65\u3001\u5f02\u6b65IO\uff0c\u4ee5\u53ca\u548c\u963b\u585e\u3001\u975e\u963b\u585eIO\u7684\u533a\u522b\u548c\u8054\u7cfb","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%90%8C%E6%AD%A5%E3%80%81%E5%BC%82%E6%AD%A5IO%EF%BC%8C%E4%BB%A5%E5%8F%8A%E5%92%8C%E9%98%BB%E5%A1%9E%E3%80%81%E9%9D%9E%E9%98%BB%E5%A1%9EIO%E7%9A%84%E5%8C%BA%E5%88%AB%E5%92%8C%E8%81%94%E7%B3%BB/#blocking-vs-non-blocking","title":"\u963b\u585e (Blocking) vs. \u975e\u963b\u585e (Non-blocking)","text":"<p>\u8fd9\u4e2a\u7ef4\u5ea6\u63cf\u8ff0\u7684\u662f\u5e94\u7528\u7a0b\u5e8f\uff08\u4f60\uff09\u5728\u53d1\u8d77\u4e00\u4e2aI/O\u8bf7\u6c42\uff08\u70b9\u5496\u5561\uff09\u540e\uff0c\u5982\u679c\u6570\u636e\uff08\u5496\u5561\uff09\u8fd8\u6ca1\u51c6\u5907\u597d\uff0c\u5e94\u7528\u7a0b\u5e8f\uff08\u4f60\uff09\u4f1a\u4e0d\u4f1a\u88ab\u5361\u4f4f\uff08\u539f\u5730\u7b49\u5f85\uff09\u3002\u5b83\u5173\u6ce8\u7684\u662f\u5355\u4e2a\u7cfb\u7edf\u8c03\u7528\u7684\u884c\u4e3a\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%90%8C%E6%AD%A5%E3%80%81%E5%BC%82%E6%AD%A5IO%EF%BC%8C%E4%BB%A5%E5%8F%8A%E5%92%8C%E9%98%BB%E5%A1%9E%E3%80%81%E9%9D%9E%E9%98%BB%E5%A1%9EIO%E7%9A%84%E5%8C%BA%E5%88%AB%E5%92%8C%E8%81%94%E7%B3%BB/#1-io-blocking-io","title":"1. \u963b\u585eI/O (Blocking I/O)","text":"<ul> <li>\u5b9a\u4e49\uff1a\u5e94\u7528\u7a0b\u5e8f\u53d1\u8d77I/O\u8bf7\u6c42\u540e\uff0c\u5982\u679c\u5185\u6838\u6570\u636e\u8fd8\u6ca1\u51c6\u5907\u597d\uff0c\u90a3\u4e48\u5e94\u7528\u7a0b\u5e8f\u7684\u8fd9\u4e2a\u7ebf\u7a0b\u5c31\u4f1a\u88ab\u6302\u8d77\uff08\u963b\u585e\uff09\uff0c\u76f4\u5230\u6570\u636e\u51c6\u5907\u597d\u5e76\u5c06\u6570\u636e\u4ece\u5185\u6838\u62f7\u8d1d\u5230\u7528\u6237\u7a7a\u95f4\u540e\uff0c\u8bf7\u6c42\u624d\u4f1a\u8fd4\u56de\u3002</li> <li> <p>\u5496\u5561\u5e97\u6bd4\u55bb\uff1a     \u4f60\u8d70\u5230\u67dc\u53f0\u70b9\u4e86\u4e00\u676f\u5496\u5561\u3002\u670d\u52a1\u5458\u544a\u8bc9\u4f60\uff1a\u201c\u597d\u7684\uff0c\u8bf7\u7a0d\u7b49\u3002\u201d \u7136\u540e\u4f60\u5c31\u7ad9\u5728\u67dc\u53f0\u524d\uff0c\u4ec0\u4e48\u4e5f\u4e0d\u5e72\uff0c\u4e00\u76f4\u7b49\u5230\u670d\u52a1\u5458\u628a\u505a\u597d\u7684\u5496\u5561\u9012\u7ed9\u4f60\uff0c\u4f60\u624d\u79bb\u5f00\u67dc\u53f0\u53bb\u505a\u522b\u7684\u4e8b\u60c5\u3002\u5728\u7b49\u5f85\u7684\u6574\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u4f60\u88ab\u201c\u963b\u585e\u201d\u5728\u4e86\u67dc\u53f0\u524d\u3002</p> <p><code>\u4f60 -&gt; \u70b9\u5496\u5561() // \u53d1\u8d77\u8bf7\u6c42\uff0c\u7136\u540e\u5c31\u4e00\u76f4\u5361\u5728\u8fd9\u91cc...               // ...\u76f4\u5230\u5496\u5561\u505a\u597d\u62ff\u5230\u624b \u4f60 -&gt; \u559d\u5496\u5561() // \u8bf7\u6c42\u8fd4\u56de\uff0c\u7ee7\u7eed\u505a\u540e\u9762\u7684\u4e8b</code> *   \u4f18\u70b9\uff1a\u7f16\u7a0b\u6a21\u578b\u6700\u7b80\u5355\uff0c\u903b\u8f91\u6e05\u6670\u3002 *   \u7f3a\u70b9\uff1a\u4e00\u4e2a\u7ebf\u7a0b\u5728I/O\u671f\u95f4\u5b8c\u5168\u88ab\u6302\u8d77\uff0c\u65e0\u6cd5\u505a\u4efb\u4f55\u5176\u4ed6\u4e8b\u60c5\uff0c\u5bfc\u81f4\u8d44\u6e90\u5229\u7528\u7387\u4f4e\u3002</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%90%8C%E6%AD%A5%E3%80%81%E5%BC%82%E6%AD%A5IO%EF%BC%8C%E4%BB%A5%E5%8F%8A%E5%92%8C%E9%98%BB%E5%A1%9E%E3%80%81%E9%9D%9E%E9%98%BB%E5%A1%9EIO%E7%9A%84%E5%8C%BA%E5%88%AB%E5%92%8C%E8%81%94%E7%B3%BB/#2-io-non-blocking-io","title":"2. \u975e\u963b\u585eI/O (Non-blocking I/O)","text":"<ul> <li>\u5b9a\u4e49\uff1a\u5e94\u7528\u7a0b\u5e8f\u53d1\u8d77I/O\u8bf7\u6c42\u540e\uff0c\u5982\u679c\u5185\u6838\u6570\u636e\u8fd8\u6ca1\u51c6\u5907\u597d\uff0c\u8be5\u8bf7\u6c42\u4f1a\u7acb\u5373\u8fd4\u56de\u4e00\u4e2a\u9519\u8bef\u7801\uff08\u4f8b\u5982 <code>EWOULDBLOCK</code>\uff09\u3002\u5e94\u7528\u7a0b\u5e8f\u7684\u7ebf\u7a0b\u4e0d\u4f1a\u88ab\u6302\u8d77\uff0c\u53ef\u4ee5\u7ee7\u7eed\u6267\u884c\u5176\u4ed6\u4efb\u52a1\u3002\u5e94\u7528\u7a0b\u5e8f\u9700\u8981\u901a\u8fc7\u8f6e\u8be2\uff08polling\uff09\u7684\u65b9\u5f0f\uff0c\u4e0d\u65ad\u5730\u53bb\u8be2\u95ee\u5185\u6838\u6570\u636e\u662f\u5426\u51c6\u5907\u597d\u4e86\u3002</li> <li> <p>\u5496\u5561\u5e97\u6bd4\u55bb\uff1a     \u4f60\u8d70\u5230\u67dc\u53f0\u70b9\u4e86\u4e00\u676f\u5496\u5561\u3002\u670d\u52a1\u5458\u770b\u4e86\u4e00\u773c\uff0c\u53d1\u73b0\u8fd8\u6ca1\u597d\uff0c\u7acb\u523b\u544a\u8bc9\u4f60\uff1a\u201c\u8fd8\u6ca1\u597d\u5462\uff01\u201d \u7136\u540e\u4f60\u5c31\u79bb\u5f00\u4e86\u67dc\u53f0\u3002\u4f46\u4f60\u5fc3\u91cc\u60e6\u8bb0\u7740\u5496\u5561\uff0c\u6240\u4ee5\u4f60\u6bcf\u9694\u4e00\u5c0f\u4f1a\u513f\u5c31\u8dd1\u56de\u67dc\u53f0\u95ee\uff1a\u201c\u6211\u7684\u5496\u5561\u597d\u4e86\u5417\uff1f\u201d\u3002\u670d\u52a1\u5458\u6bcf\u6b21\u90fd\u7acb\u523b\u56de\u7b54\u4f60\u201c\u597d\u4e86\u201d\u6216\u201c\u6ca1\u597d\u201d\u3002\u5728\u4f60\u4e00\u6b21\u6b21\u8be2\u95ee\u7684\u95f4\u9699\uff0c\u4f60\u53ef\u4ee5\u73a9\u624b\u673a\u6216\u8005\u505a\u522b\u7684\u4e8b\u3002\u76f4\u5230\u6709\u4e00\u6b21\u4f60\u95ee\u7684\u65f6\u5019\uff0c\u670d\u52a1\u5458\u628a\u505a\u597d\u7684\u5496\u5561\u7ed9\u4e86\u4f60\u3002</p> <p><code>while (true) {     \u5496\u5561 = \u70b9\u5496\u5561() // \u53d1\u8d77\u8bf7\u6c42\uff0c\u7acb\u523b\u8fd4\u56de     if (\u5496\u5561 != \"\u8fd8\u6ca1\u597d\") {         break // \u62ff\u5230\u5496\u5561\u4e86\uff0c\u8df3\u51fa\u5faa\u73af     }     // \u5728\u8fd9\u91cc\u53ef\u4ee5\u505a\u70b9\u522b\u7684\u4e8b...     \u73a9\u624b\u673a()  } \u4f60 -&gt; \u559d\u5496\u5561()</code> *   \u4f18\u70b9\uff1a\u7ebf\u7a0b\u4e0d\u4f1a\u88ab\u963b\u585e\uff0c\u53ef\u4ee5\u5728\u7b49\u5f85I/O\u7684\u95f4\u9699\u5904\u7406\u5176\u4ed6\u4efb\u52a1\u3002 *   \u7f3a\u70b9\uff1a\u9700\u8981\u4e0d\u65ad\u5730\u8f6e\u8be2\uff0c\u8fd9\u4f1a\u6301\u7eed\u6d88\u8017CPU\u8d44\u6e90\uff08\u201c\u5fd9\u7b49\u5f85\u201d\uff09\u3002</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%90%8C%E6%AD%A5%E3%80%81%E5%BC%82%E6%AD%A5IO%EF%BC%8C%E4%BB%A5%E5%8F%8A%E5%92%8C%E9%98%BB%E5%A1%9E%E3%80%81%E9%9D%9E%E9%98%BB%E5%A1%9EIO%E7%9A%84%E5%8C%BA%E5%88%AB%E5%92%8C%E8%81%94%E7%B3%BB/#synchronous-vs-asynchronous","title":"\u540c\u6b65 (Synchronous) vs. \u5f02\u6b65 (Asynchronous)","text":"<p>\u8fd9\u4e2a\u7ef4\u5ea6\u63cf\u8ff0\u7684\u662f\u5e94\u7528\u7a0b\u5e8f\uff08\u4f60\uff09\u4e0e\u64cd\u4f5c\u7cfb\u7edf\uff08\u670d\u52a1\u5458\uff09\u4e4b\u95f4\u534f\u4f5c\u5b8c\u6210\u6574\u4e2aI/O\u64cd\u4f5c\uff08\u4ece\u70b9\u5355\u5230\u62ff\u5230\u5496\u5561\u7684\u5168\u8fc7\u7a0b\uff09\u7684\u6a21\u5f0f\u3002\u5b83\u5173\u6ce8\u7684\u662f\u6574\u4e2aI/O\u4e8b\u4ef6\u7684\u901a\u77e5\u6a21\u578b\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%90%8C%E6%AD%A5%E3%80%81%E5%BC%82%E6%AD%A5IO%EF%BC%8C%E4%BB%A5%E5%8F%8A%E5%92%8C%E9%98%BB%E5%A1%9E%E3%80%81%E9%9D%9E%E9%98%BB%E5%A1%9EIO%E7%9A%84%E5%8C%BA%E5%88%AB%E5%92%8C%E8%81%94%E7%B3%BB/#3-io-synchronous-io","title":"3. \u540c\u6b65I/O (Synchronous I/O)","text":"<ul> <li>\u5b9a\u4e49\uff1a\u5e94\u7528\u7a0b\u5e8f\u81ea\u5df1\u4e3b\u52a8\u53d1\u8d77I/O\u64cd\u4f5c\uff0c\u5e76\u4e14\u9700\u8981\u81ea\u5df1\u5168\u7a0b\u5173\u5fc3\u8fd9\u4e2a\u64cd\u4f5c\u7684\u72b6\u6001\uff0c\u76f4\u5230\u64cd\u4f5c\u6700\u7ec8\u5b8c\u6210\uff08\u6570\u636e\u6210\u529f\u4ece\u5185\u6838\u62f7\u8d1d\u5230\u7528\u6237\u7a7a\u95f4\uff09\u3002</li> <li>\u6838\u5fc3\u7279\u5f81\uff1aI/O\u64cd\u4f5c\u7684\u53d1\u8d77\u65b9\u548c\u6700\u7ec8\u6570\u636e\u5904\u7406\u65b9\u662f\u540c\u4e00\u4e2a\u7ebf\u7a0b\u3002</li> <li> <p>\u5496\u5561\u5e97\u6bd4\u55bb\uff1a     \u65e0\u8bba\u662f\u963b\u585e\uff08\u4f60\u50bb\u7b49\u5728\u67dc\u53f0\uff09\u8fd8\u662f\u975e\u963b\u585e\uff08\u4f60\u53cd\u590d\u8dd1\u53bb\u95ee\uff09\uff0c\u90fd\u662f\u4f60\u81ea\u5df1\u5168\u7a0b\u5728\u8ddf\u8fdb\u201c\u8981\u5496\u5561\u201d\u8fd9\u4ef6\u4e8b\u3002\u4f60\u5fc5\u987b\u4eb2\u81ea\u7b49\u5230\u6216\u8005\u95ee\u5230\u5496\u5561\u597d\u4e86\uff0c\u7136\u540e\u4eb2\u81ea\u4ece\u670d\u52a1\u5458\u624b\u91cc\u63a5\u8fc7\u6765\u3002\u6574\u4e2a\u8fc7\u7a0b\uff0c\u4f60\uff08\u5e94\u7528\u7a0b\u5e8f\uff09\u662f\u4e3b\u52a8\u65b9\u3002</p> <p>\u56e0\u6b64\uff0c\u963b\u585eI/O\u548c\u975e\u963b\u585eI/O\u90fd\u5c5e\u4e8e\u540c\u6b65I/O\u7684\u8303\u7574\u3002</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%90%8C%E6%AD%A5%E3%80%81%E5%BC%82%E6%AD%A5IO%EF%BC%8C%E4%BB%A5%E5%8F%8A%E5%92%8C%E9%98%BB%E5%A1%9E%E3%80%81%E9%9D%9E%E9%98%BB%E5%A1%9EIO%E7%9A%84%E5%8C%BA%E5%88%AB%E5%92%8C%E8%81%94%E7%B3%BB/#4-io-asynchronous-io","title":"4. \u5f02\u6b65I/O (Asynchronous I/O)","text":"<ul> <li>\u5b9a\u4e49\uff1a\u5e94\u7528\u7a0b\u5e8f\u53d1\u8d77\u4e00\u4e2aI/O\u8bf7\u6c42\u540e\uff0c\u4fbf\u5c06\u8fd9\u4ef6\u4e8b\u5b8c\u5168\u59d4\u6258\u7ed9\u64cd\u4f5c\u7cfb\u7edf\u4e86\uff0c\u7136\u540e\u7acb\u5373\u8fd4\u56de\uff0c\u53bb\u505a\u5176\u4ed6\u7684\u4e8b\u60c5\u3002\u5f53\u64cd\u4f5c\u7cfb\u7edf\u5b8c\u6210\u4e86\u6240\u6709\u5de5\u4f5c\uff08\u5305\u62ec\u6570\u636e\u51c6\u5907\u548c\u4ece\u5185\u6838\u62f7\u8d1d\u5230\u7528\u6237\u7a7a\u95f4\uff09\uff0c\u5b83\u4f1a\u901a\u8fc7\u67d0\u79cd\u673a\u5236\uff08\u5982\u56de\u8c03\u51fd\u6570\u3001\u4e8b\u4ef6\u901a\u77e5\uff09\u6765\u901a\u77e5\u5e94\u7528\u7a0b\u5e8f\u3002</li> <li>\u6838\u5fc3\u7279\u5f81\uff1aI/O\u64cd\u4f5c\u7684\u53d1\u8d77\u548c\u540e\u7eed\u7684\u6570\u636e\u5904\u7406\u53ef\u4ee5\u7531\u4e0d\u540c\u7684\u7ebf\u7a0b\uff08\u6216\u673a\u5236\uff09\u5b8c\u6210\u3002</li> <li> <p>\u5496\u5561\u5e97\u6bd4\u55bb\uff1a     \u4f60\u8d70\u5230\u67dc\u53f0\u70b9\u4e86\u4e00\u676f\u5496\u5561\uff0c\u5e76\u4e14\u7ed9\u4e86\u670d\u52a1\u5458\u4e00\u4e2a\u9707\u52a8\u7684\u53d6\u9910\u5668\u3002\u7136\u540e\u4f60\u5c31\u5f7b\u5e95\u5fd8\u4e86\u8fd9\u4ef6\u4e8b\uff0c\u627e\u4e2a\u5ea7\u4f4d\u53bb\u5904\u7406\u5de5\u4f5c\u4e86\u3002\u6574\u4e2a\u505a\u5496\u5561\u3001\u628a\u5496\u5561\u4ece\u5427\u53f0\u7aef\u51fa\u6765\u7684\u8fc7\u7a0b\u90fd\u7531\u670d\u52a1\u5458\uff08\u64cd\u4f5c\u7cfb\u7edf\uff09\u5168\u6743\u8d1f\u8d23\u3002\u5f53\u5496\u5561\u5b8c\u5168\u51c6\u5907\u597d\u540e\uff0c\u670d\u52a1\u5458\u6309\u4e86\u4e00\u4e0b\u6309\u94ae\uff0c\u4f60\u7684\u53d6\u9910\u5668\u54cd\u4e86\uff0c\u8fd9\u65f6\u4f60\u624d\u8fc7\u53bb\u628a\u5496\u5561\u53d6\u8d70\u3002</p> <p>``` // \u544a\u8bc9\u670d\u52a1\u5458\uff1a\u5496\u5561\u597d\u4e86\u5c31\u9707\u52a8\u6211\u7684\u53d6\u9910\u5668(callback) \u70b9\u5496\u5561(\u53d6\u9910\u5668)  \u4f60 -&gt; \u5904\u7406\u5de5\u4f5c() // \u5b8c\u5168\u4e0d\u7ba1\u5496\u5561\u7684\u4e8b\uff0c\u53bb\u505a\u522b\u7684\u5de5\u4f5c</p> <p>// ...\u4e00\u6bb5\u65f6\u95f4\u540e... // (\u53d6\u9910\u5668\u9707\u52a8) -&gt; \u89e6\u53d1\u56de\u8c03 function on_coffee_ready(\u5496\u5561) {     \u559d\u5496\u5561() } ``` *   \u4f18\u70b9\uff1a\u7ebf\u7a0b\u5b8c\u5168\u4e0d\u4f1a\u88abI/O\u64cd\u4f5c\u963b\u585e\uff0c\u8d44\u6e90\u5229\u7528\u7387\u6781\u9ad8\u3002\u4e00\u4e2a\u7ebf\u7a0b\u53ef\u4ee5\u540c\u65f6\u5904\u7406\u5927\u91cf\u7684I/O\u8bf7\u6c42\u3002 *   \u7f3a\u70b9\uff1a\u7f16\u7a0b\u6a21\u578b\u6700\u590d\u6742\uff0c\u9700\u8981\u4e8b\u4ef6\u9a71\u52a8\u548c\u56de\u8c03\u673a\u5236\u3002</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%90%8C%E6%AD%A5%E3%80%81%E5%BC%82%E6%AD%A5IO%EF%BC%8C%E4%BB%A5%E5%8F%8A%E5%92%8C%E9%98%BB%E5%A1%9E%E3%80%81%E9%9D%9E%E9%98%BB%E5%A1%9EIO%E7%9A%84%E5%8C%BA%E5%88%AB%E5%92%8C%E8%81%94%E7%B3%BB/#_1","title":"\u533a\u522b","text":"<ol> <li> <p>\u7ef4\u5ea6\u7684\u4e0d\u540c\uff1a</p> <ul> <li>\u963b\u585e\u6216\u975e\u963b\u585e\uff0c\u5173\u6ce8\u7684\u662f\u8c03\u7528API\u540e\uff0c\u7ebf\u7a0b\u662f\u5426\u4f1a\u7acb\u523b\u6302\u8d77\u3002</li> <li>\u540c\u6b65\u6216\u5f02\u6b65\uff0c\u5173\u6ce8\u7684\u662f\u6574\u4e2aI/O\u6d41\u7a0b\u4e2d\uff0c\u7531\u8c01\u6765\u8d1f\u8d23\u8ddf\u8fdb\u548c\u901a\u77e5\u7ed3\u679c\u3002</li> </ul> </li> <li> <p>\u6838\u5fc3\u533a\u522b\uff1a</p> <ul> <li>\u540c\u6b65\u4e0e\u5f02\u6b65\uff1a\u6700\u672c\u8d28\u7684\u533a\u522b\u5728\u4e8e\uff0c\u540c\u6b65I/O\u9700\u8981\u5e94\u7528\u7a0b\u5e8f\u4e3b\u52a8\u53bb\u8f6e\u8be2\u6216\u7b49\u5f85I/O\u64cd\u4f5c\u7684\u7ed3\u679c\uff1b\u800c\u5f02\u6b65I/O\u662f\u5e94\u7528\u7a0b\u5e8f\u88ab\u52a8\u5730\u63a5\u6536I/O\u64cd\u4f5c\u5b8c\u6210\u7684\u901a\u77e5\u3002</li> <li>\u975e\u963b\u585e\u4e0e\u5f02\u6b65\uff1a\u8fd9\u662f\u6700\u5bb9\u6613\u6df7\u6dc6\u7684\u3002<ul> <li>\u975e\u963b\u585eI/O (\u5c5e\u4e8e\u540c\u6b65)\uff1a\u5e94\u7528\u9700\u8981\u591a\u6b21\u4e3b\u52a8\u8be2\u95ee\u5185\u6838: \"\u597d\u4e86\u6ca1\uff1f\"\u3002\u867d\u7136\u7ebf\u7a0b\u6ca1\u963b\u585e\uff0c\u4f46\u5b83\u5f97\u4e00\u76f4\u64cd\u5fc3\u8fd9\u4ef6\u4e8b\u3002</li> <li>\u5f02\u6b65I/O\uff1a\u5e94\u7528\u53ea\u9700\u544a\u8bc9\u5185\u6838: \"\u4f60\u5f04\u5427\uff0c\u597d\u4e86\u53eb\u6211\u3002\"\u3002\u5e94\u7528\u5b8c\u5168\u4e0d\u7528\u64cd\u5fc3\u8fdb\u5ea6\uff0c\u53ea\u9700\u7b49\u5f85\u901a\u77e5\u3002</li> </ul> </li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%90%8C%E6%AD%A5%E3%80%81%E5%BC%82%E6%AD%A5IO%EF%BC%8C%E4%BB%A5%E5%8F%8A%E5%92%8C%E9%98%BB%E5%A1%9E%E3%80%81%E9%9D%9E%E9%98%BB%E5%A1%9EIO%E7%9A%84%E5%8C%BA%E5%88%AB%E5%92%8C%E8%81%94%E7%B3%BB/#io-multiplexing-io","title":"I/O\u591a\u8def\u590d\u7528 (Multiplexing I/O):","text":"<p>\u5b83\u901a\u5e38\u4e0e\u975e\u963b\u585eI/O\u914d\u5408\u4f7f\u7528\uff0c\u662f\u5b9e\u73b0\u9ad8\u6027\u80fdNIO\u7684\u5173\u952e\u3002\u5b83\u5f15\u5165\u4e86\u4e00\u4e2a\u201c\u4ee3\u7406\u201d\uff08\u5982 <code>select</code>, <code>epoll</code>\uff09\uff0c\u4f60\u53ef\u4ee5\u628a\u5f88\u591a\u8defI/O\u8bf7\u6c42\u90fd\u6ce8\u518c\u7ed9\u8fd9\u4e2a\u4ee3\u7406\u3002\u7136\u540e\u4f60\u7684\u7ebf\u7a0b\u53ea\u9700\u8981\u963b\u585e\u5730\u95ee\u8fd9\u4e2a\u201c\u4ee3\u7406\u201d\uff1a\u201c\u6211\u6258\u4f60\u529e\u7684\u90a3\u4e9b\u4e8b\uff0c\u6709\u4efb\u4f55\u4e00\u4ef6\u597d\u4e86\u5417\uff1f\u201d\u3002\u8fd9\u6837\u5c31\u907f\u514d\u4e86\u5bf9\u6bcf\u4e00\u4e2aI/O\u90fd\u8fdb\u884c\u65e0\u6548\u8f6e\u8be2\uff0c\u5927\u5927\u63d0\u9ad8\u4e86\u6548\u7387\u3002\u8fd9\u4ecd\u7136\u5c5e\u4e8e\u540c\u6b65I/O\uff0c\u56e0\u4e3a\u6700\u7ec8\u8fd8\u662f\u9700\u8981\u4f60\u7684\u7ebf\u7a0b\u4e3b\u52a8\u53bb\u95ee\u4ee3\u7406\uff0c\u5e76\u81ea\u5df1\u53bb\u62f7\u8d1d\u6570\u636e\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%92%8C%E5%A4%9A%E8%BF%9B%E7%A8%8B%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E5%88%86%E5%88%AB%E4%BB%8B%E7%BB%8D/","title":"\u591a\u7ebf\u7a0b\u548c\u591a\u8fdb\u7a0b\u4f7f\u7528\u573a\u666f\u5206\u522b\u4ecb\u7ecd","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%92%8C%E5%A4%9A%E8%BF%9B%E7%A8%8B%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E5%88%86%E5%88%AB%E4%BB%8B%E7%BB%8D/#_1","title":"\u591a\u8fdb\u7a0b","text":"<p>\u591a\u8fdb\u7a0b\u662f\u6307\u5728\u4e00\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u540c\u65f6\u8fd0\u884c\u591a\u4e2a\u72ec\u7acb\u7684\u7a0b\u5e8f\uff0c\u6216\u8005\u4e00\u4e2a\u7a0b\u5e8f\u88ab\u5206\u6210\u591a\u4e2a\u72ec\u7acb\u7684\u6267\u884c\u5355\u5143\uff0c\u6bcf\u4e2a\u5355\u5143\u90fd\u662f\u4e00\u4e2a\u72ec\u7acb\u7684\u8fdb\u7a0b\u3002\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u62e5\u6709\u81ea\u5df1\u72ec\u7acb\u7684\u5730\u5740\u7a7a\u95f4\u3001\u5185\u5b58\u3001\u6587\u4ef6\u53e5\u67c4\u7b49\u8d44\u6e90\u3002\u8fdb\u7a0b\u4e4b\u95f4\u4e92\u76f8\u72ec\u7acb\uff0c\u4e00\u4e2a\u8fdb\u7a0b\u7684\u5d29\u6e83\u901a\u5e38\u4e0d\u4f1a\u5f71\u54cd\u5230\u5176\u4ed6\u8fdb\u7a0b\u6216\u4e3b\u7a0b\u5e8f\u7684\u7a33\u5b9a\u6027\u3002\u8fdb\u7a0b\u662f\u64cd\u4f5c\u7cfb\u7edf\u8fdb\u884c\u8d44\u6e90\u5206\u914d\u548c\u8c03\u5ea6\u7684\u57fa\u672c\u5355\u4f4d\u3002</p> <p>\u4f18\u70b9\uff1a *   \u72ec\u7acb\u6027\u9ad8\u3001\u7a33\u5b9a\u6027\u5f3a\uff1a \u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u62e5\u6709\u72ec\u7acb\u7684\u5730\u5740\u7a7a\u95f4\u548c\u8d44\u6e90\uff0c\u4e92\u76f8\u72ec\u7acb\u3002\u4e00\u4e2a\u5b50\u8fdb\u7a0b\u7684\u5d29\u6e83\u4e0d\u4f1a\u5f71\u54cd\u5230\u4e3b\u7a0b\u5e8f\u6216\u5176\u4ed6\u5b50\u8fdb\u7a0b\u7684\u7a33\u5b9a\u6027\u3002 *   \u6613\u4e8e\u6269\u5c55\u6027\u80fd\uff1a \u53ef\u4ee5\u901a\u8fc7\u589e\u52a0CPU\u6838\u5fc3\u6570\u91cf\uff0c\u65b9\u4fbf\u5730\u6269\u5c55\u6574\u4e2a\u7cfb\u7edf\u7684\u6027\u80fd\u3002 *   \u51cf\u5c11\u9501\u7ade\u4e89\uff1a \u7531\u4e8e\u8fdb\u7a0b\u95f4\u4e0d\u76f4\u63a5\u5171\u4eab\u5185\u5b58\uff0c\u53ef\u4ee5\u5c3d\u91cf\u51cf\u5c11\u7ebf\u7a0b\u52a0\u9501/\u89e3\u9501\u7684\u5f71\u54cd\uff0c\u4ece\u800c\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u6781\u5927\u63d0\u9ad8\u6027\u80fd\uff0c\u5373\u4f7f\u67d0\u4e9b\u6a21\u5757\u7b97\u6cd5\u6548\u7387\u8f83\u4f4e\u4e5f\u65e0\u59a8\u3002 *   \u603b\u6027\u80fd\u4e0a\u9650\u9ad8\uff1a \u6bcf\u4e2a\u5b50\u8fdb\u7a0b\u90fd\u6709\u72ec\u7acb\u7684\u5730\u5740\u7a7a\u95f4\u548c\u76f8\u5173\u8d44\u6e90\uff0c\u80fd\u591f\u8fbe\u5230\u7684\u603b\u4f53\u6027\u80fd\u4e0a\u9650\u975e\u5e38\u5927\u3002 *   \u9002\u7528\u4e8eUNIX/Linux\u73af\u5883\uff1a \u5728UNIX/Linux\u73af\u5883\u4e0b\uff0c\u8fdb\u7a0b\u8c03\u5ea6\u6548\u7387\u5f88\u9ad8\uff0c\u4e14\u8c03\u5ea6\u5f00\u9500\u4e0e\u7ebf\u7a0b\u8c03\u5ea6\u5f00\u9500\u6ca1\u6709\u663e\u8457\u533a\u522b\u3002TUXEDO\u7b49\u9ad8\u6027\u80fd\u4e2d\u95f4\u4ef6\u4e5f\u503e\u5411\u4e8e\u91c7\u7528\u591a\u8fdb\u7a0b\u67b6\u6784\u3002</p> <p>\u7f3a\u70b9\uff1a *   \u8d44\u6e90\u6d88\u8017\u5927\u3001\u521b\u5efa\u9500\u6bc1\u6162\uff1a \u542f\u52a8\u65b0\u8fdb\u7a0b\u9700\u8981\u5206\u914d\u72ec\u7acb\u7684\u5730\u5740\u7a7a\u95f4\u548c\u5efa\u7acb\u4f17\u591a\u6570\u636e\u8868\uff0c\u8fd9\u662f\u4e00\u79cd\u201c\u6602\u8d35\u201d\u7684\u591a\u4efb\u52a1\u65b9\u5f0f\uff0c\u7cfb\u7edf\u5f00\u9500\u660e\u663e\u5927\u4e8e\u521b\u5efa\u6216\u64a4\u9500\u7ebf\u7a0b\u3002 *   \u901a\u4fe1\u590d\u6742\uff1a \u8fdb\u7a0b\u95f4\u5185\u5b58\u65e0\u6cd5\u76f4\u63a5\u5171\u4eab\uff0c\u901a\u4fe1\uff08IPC\uff09\u673a\u5236\u76f8\u5bf9\u590d\u6742\uff0c\u901a\u5e38\u9700\u8981\u901a\u8fc7\u7ba1\u9053\u3001\u6d88\u606f\u961f\u5217\u3001\u5171\u4eab\u5185\u5b58\u3001\u5957\u63a5\u5b57\u7b49\u65b9\u5f0f\u8fdb\u884c\uff0c\u8fd9\u5bf9\u4e8e\u5927\u6570\u636e\u91cf\u4f20\u8f93\u4e0d\u592a\u65b9\u4fbf\uff0c\u66f4\u9002\u5408\u5c0f\u6570\u636e\u91cf\u4f20\u8f93\u548c\u5bc6\u96c6\u8fd0\u7b97\u3002 *   \u903b\u8f91\u63a7\u5236\u76f8\u5bf9\u590d\u6742\uff1a \u9700\u8981\u5904\u7406\u8fdb\u7a0b\u95f4\u901a\u4fe1\u548c\u534f\u8c03\uff0c\u7a0b\u5e8f\u903b\u8f91\u63a7\u5236\u4f1a\u6bd4\u591a\u7ebf\u7a0b\u66f4\u590d\u6742\u3002</p> <p>\u9002\u5408\u573a\u666f\uff1a *   \u9ad8\u7a33\u5b9a\u6027\u8981\u6c42\uff1a \u5bf9\u7a0b\u5e8f\u7684\u5065\u58ee\u6027\u8981\u6c42\u6781\u9ad8\uff0c\u4e0d\u5e0c\u671b\u4e00\u4e2a\u6a21\u5757\u7684\u9519\u8bef\u5f71\u54cd\u6574\u4e2a\u7cfb\u7edf\u3002 *   \u72ec\u7acb\u4e14\u5e76\u53d1\u7684\u4efb\u52a1\uff1a \u4efb\u52a1\u4e4b\u95f4\u76f8\u5bf9\u72ec\u7acb\uff0c\u4e0d\u9700\u8981\u9891\u7e41\u5171\u4eab\u5927\u91cf\u6570\u636e\uff0c\u4f46\u9700\u8981\u9ad8\u5ea6\u5e76\u884c\u6267\u884c\u3002 *   \u5b89\u5168\u9694\u79bb\uff1a \u9700\u8981\u5728\u4e0d\u540c\u8fdb\u7a0b\u4e4b\u95f4\u8fdb\u884c\u5b89\u5168\u9694\u79bb\uff0c\u4f8b\u5982\u8fd0\u884c\u4e0d\u53ef\u4fe1\u7684\u4ee3\u7801\u3002 *   \u5206\u5e03\u5f0f\u7cfb\u7edf\u548c\u670d\u52a1\u5668\uff1a \u7279\u522b\u662f\u9ad8\u6027\u80fd\u4ea4\u6613\u670d\u52a1\u5668\u4e2d\u95f4\u4ef6\uff0c\u5982TUXEDO\uff0c\u503e\u5411\u4e8e\u591a\u8fdb\u7a0b\u67b6\u6784\u4ee5\u5b9e\u73b0\u9ad8\u5e76\u53d1\u548c\u9ad8\u541e\u5410\u91cf\u3002 *   UNIX/Linux\u670d\u52a1\u5668\u5f00\u53d1\uff1a \u8003\u8651\u5230UNIX\u5bb6\u65cf\u4ece\u591a\u8fdb\u7a0b\u53d1\u5c55\u800c\u6765\uff0c\u4e14\u8fdb\u7a0b\u8c03\u5ea6\u6548\u7387\u9ad8\uff0c\u591a\u8fdb\u7a0b\u5728\u8fd9\u4e9b\u7cfb\u7edf\u4e0b\u901a\u5e38\u8868\u73b0\u4f18\u5f02\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%92%8C%E5%A4%9A%E8%BF%9B%E7%A8%8B%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E5%88%86%E5%88%AB%E4%BB%8B%E7%BB%8D/#_2","title":"\u591a\u7ebf\u7a0b","text":"<p>\u591a\u7ebf\u7a0b\u662f\u6307\u5728\u4e00\u4e2a\u8fdb\u7a0b\u5185\u90e8\uff0c\u521b\u5efa\u548c\u8fd0\u884c\u591a\u4e2a\u72ec\u7acb\u7684\u6267\u884c\u6d41\u3002\u8fd9\u4e9b\u6267\u884c\u6d41\u79f0\u4e3a\u7ebf\u7a0b\u3002\u6240\u6709\u7ebf\u7a0b\u5171\u4eab\u6240\u5c5e\u8fdb\u7a0b\u7684\u5730\u5740\u7a7a\u95f4\u3001\u6587\u4ef6\u53e5\u67c4\u7b49\u8d44\u6e90\uff0c\u4f46\u6bcf\u4e2a\u7ebf\u7a0b\u6709\u81ea\u5df1\u72ec\u7acb\u7684\u7a0b\u5e8f\u8ba1\u6570\u5668\u3001\u6808\u548c\u5bc4\u5b58\u5668\u3002\u7ebf\u7a0b\u662fCPU\u8c03\u5ea6\u7684\u57fa\u672c\u5355\u4f4d\uff0c\u5b83\u662f\u4e00\u79cd\u201c\u8282\u4fed\u201d\u7684\u591a\u4efb\u52a1\u64cd\u4f5c\u65b9\u5f0f\u3002 \u591a\u7ebf\u7a0b\u548c\u591a\u8fdb\u7a0b\u5728\u4e0d\u540c\u7684\u573a\u666f\u4e0b\u5404\u6709\u4f18\u52a3\uff0c\u56e0\u6b64\u5728\u5b9e\u9645\u7f16\u7a0b\u4e2d\u9700\u8981\u6839\u636e\u5177\u4f53\u9700\u6c42\u8fdb\u884c\u6743\u8861\u548c\u9009\u62e9\u3002</p> <p>\u4f18\u70b9\uff1a *   \u8d44\u6e90\u6d88\u8017\u4f4e\u3001\u521b\u5efa\u9500\u6bc1\u5feb\uff1a \u7ebf\u7a0b\u88ab\u8ba4\u4e3a\u662f\u201c\u8282\u4fed\u201d\u7684\u591a\u4efb\u52a1\u64cd\u4f5c\u65b9\u5f0f\u3002\u5b83\u4eec\u5171\u4eab\u76f8\u540c\u7684\u5730\u5740\u7a7a\u95f4\uff0c\u542f\u52a8\u548c\u5207\u6362\u7684\u5f00\u9500\u8fdc\u5c0f\u4e8e\u8fdb\u7a0b\uff0c\u56e0\u4e3a\u7cfb\u7edf\u65e0\u9700\u4e3a\u6bcf\u4e2a\u7ebf\u7a0b\u5206\u914d\u72ec\u7acb\u7684\u5730\u5740\u7a7a\u95f4\u548c\u5efa\u7acb\u5927\u91cf\u7684\u6570\u636e\u8868\u3002 *   \u6570\u636e\u5171\u4eab\u65b9\u4fbf\uff1a \u7531\u4e8e\u7ebf\u7a0b\u5728\u540c\u4e00\u8fdb\u7a0b\u5185\u5171\u4eab\u5185\u5b58\u7a7a\u95f4\uff0c\u5b83\u4eec\u4e4b\u95f4\u7684\u6570\u636e\u4ea4\u6362\u975e\u5e38\u4fbf\u6377\u548c\u5feb\u901f\u3002 *   \u903b\u8f91\u548c\u63a7\u5236\u7b80\u5355\uff1a \u5728\u65e0\u9700\u8de8\u8fdb\u7a0b\u8fb9\u754c\u7684\u60c5\u51b5\u4e0b\uff0c\u7a0b\u5e8f\u903b\u8f91\u548c\u63a7\u5236\u65b9\u5f0f\u76f8\u5bf9\u7b80\u5355\u3002 *   \u6709\u6548\u5229\u7528\u591aCPU\uff1a \u64cd\u4f5c\u7cfb\u7edf\u53ef\u4ee5\u786e\u4fdd\u5f53\u7ebf\u7a0b\u6570\u4e0d\u8d85\u8fc7CPU\u6570\u91cf\u65f6\uff0c\u4e0d\u540c\u7684\u7ebf\u7a0b\u8fd0\u884c\u5728\u4e0d\u540c\u7684CPU\u4e0a\uff0c\u4ece\u800c\u6709\u6548\u5229\u7528\u591a\u6838\u5904\u7406\u5668\u3002 *   \u6539\u5584\u7a0b\u5e8f\u7ed3\u6784\uff1a \u53ef\u4ee5\u5c06\u4e00\u4e2a\u957f\u800c\u590d\u6742\u7684\u7a0b\u5e8f\u62c6\u5206\u4e3a\u591a\u4e2a\u72ec\u7acb\u6216\u534a\u72ec\u7acb\u7684\u7ebf\u7a0b\u90e8\u5206\uff0c\u6709\u52a9\u4e8e\u7406\u89e3\u548c\u4fee\u6539\u3002</p> <p>\u7f3a\u70b9\uff1a *   \u540c\u6b65\u4e0e\u52a0\u9501\u590d\u6742\uff1a \u7ebf\u7a0b\u4e4b\u95f4\u5171\u4eab\u5185\u5b58\u867d\u7136\u65b9\u4fbf\uff0c\u4f46\u4e5f\u5f15\u5165\u4e86\u590d\u6742\u7684\u540c\u6b65\u548c\u52a0\u9501\u63a7\u5236\u95ee\u9898\uff0c\u5bb9\u6613\u51fa\u9519\uff0c\u53ef\u80fd\u5bfc\u81f4\u6b7b\u9501\u6216\u6570\u636e\u4e0d\u4e00\u81f4\u3002 *   \u7a33\u5b9a\u6027\u98ce\u9669\uff1a \u7531\u4e8e\u5171\u4eab\u5730\u5740\u7a7a\u95f4\uff0c\u4e00\u4e2a\u7ebf\u7a0b\u7684\u5d29\u6e83\u53ef\u80fd\u5f71\u54cd\u5230\u6574\u4e2a\u7a0b\u5e8f\u7684\u7a33\u5b9a\u6027\uff0c\u5bfc\u81f4\u6574\u4e2a\u8fdb\u7a0b\u5d29\u6e83\u3002 *   \u5730\u5740\u7a7a\u95f4\u9650\u5236\uff1a \u6bcf\u4e2a\u7ebf\u7a0b\u4e0e\u4e3b\u7a0b\u5e8f\u5171\u7528\u5730\u5740\u7a7a\u95f4\uff0c\u53ef\u80fd\u4f1a\u53d7\u9650\u4e8e\u603b\u4f53\u7684\u5730\u5740\u7a7a\u95f4\u5927\u5c0f\uff08\u4f8b\u5982\uff0c\u4f20\u7edf32\u4f4d\u7cfb\u7edf2GB\u7684\u9650\u5236\uff0c\u5c3d\u7ba1\u73b0\u4ee364\u4f4d\u7cfb\u7edf\u5df2\u5927\u5927\u7f13\u89e3\uff09\u3002 *   \u6027\u80fd\u4e0a\u9650\u6709\u9650\uff1a \u7ebf\u7a0b\u6570\u91cf\u8fbe\u5230\u4e00\u5b9a\u7a0b\u5ea6\u540e\uff0c\u5373\u4f7f\u589e\u52a0CPU\u4e5f\u65e0\u6cd5\u63d0\u9ad8\u6027\u80fd\uff0c\u751a\u81f3\u56e0\u4e3a\u7ebf\u7a0b\u8c03\u5ea6\u672c\u8eab\u7684\u5f00\u9500\uff08\u9700\u8981\u4fdd\u5b58\u7ebf\u7a0b\u72b6\u6001\uff0c\u9891\u7e41\u8c03\u5ea6\u5360\u7528\u5927\u91cf\u673a\u65f6\uff09\u800c\u5bfc\u81f4\u6027\u80fd\u4e0b\u964d\u3002</p> <p>\u9002\u5408\u573a\u666f\uff1a *   \u8f7b\u91cf\u7ea7\u5e76\u53d1\u4efb\u52a1\uff1a \u5f53\u4efb\u52a1\u9700\u8981\u9891\u7e41\u521b\u5efa\u548c\u9500\u6bc1\uff0c\u6216\u8005\u4efb\u52a1\u4e4b\u95f4\u9700\u8981\u5927\u91cf\u5171\u4eab\u6570\u636e\u65f6\u3002 *   CPU\u5bc6\u96c6\u578b\u4efb\u52a1\uff1a \u5728\u5408\u7406\u63a7\u5236\u7ebf\u7a0b\u6570\u91cf\uff08\u4e0d\u8d85\u51faCPU\u6838\u5fc3\u6570\u592a\u591a\uff09\u7684\u60c5\u51b5\u4e0b\uff0c\u5229\u7528\u591a\u6838\u8fdb\u884c\u5e76\u884c\u8ba1\u7b97\u3002 *   \u54cd\u5e94\u7528\u6237\u754c\u9762\uff1a \u5728GUI\u5e94\u7528\u7a0b\u5e8f\u4e2d\uff0c\u5c06\u8017\u65f6\u64cd\u4f5c\u653e\u5230\u540e\u53f0\u7ebf\u7a0b\uff0c\u4ee5\u4fdd\u6301\u754c\u9762\u54cd\u5e94\u3002 *   \u6a21\u5757\u5316\u7a0b\u5e8f\u7ed3\u6784\uff1a \u5c06\u4e00\u4e2a\u5927\u578b\u590d\u6742\u7a0b\u5e8f\u5206\u89e3\u4e3a\u591a\u4e2a\u529f\u80fd\u72ec\u7acb\u7684\u6267\u884c\u5355\u5143\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%92%8C%E5%A4%9A%E8%BF%9B%E7%A8%8B%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E5%88%86%E5%88%AB%E4%BB%8B%E7%BB%8D/#_3","title":"\u7ed3\u5408","text":"<p>\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u5355\u5355\u9009\u62e9\u591a\u7ebf\u7a0b\u6216\u591a\u8fdb\u7a0b\u53ef\u80fd\u90fd\u4e0d\u662f\u6700\u4f18\u89e3\u3002\u66f4\u5e38\u89c1\u4e14\u9ad8\u6548\u7684\u505a\u6cd5\u662f\u591a\u8fdb\u7a0b\u548c\u591a\u7ebf\u7a0b\u7ed3\u5408\u3002</p> <ul> <li>\u7b56\u7565\uff1a \u4e00\u4e2a\u5e38\u89c1\u7684\u7b56\u7565\u662f\uff0c\u6839\u636eCPU\u6838\u5fc3\u6570\u5f00\u542f\u76f8\u5e94\u6570\u91cf\u7684\u5b50\u8fdb\u7a0b\uff08\u4f8b\u5982\uff0c\u6bcf\u4e2aCPU\u6838\u5fc3\u5f00\u542f\u4e00\u4e2a\u5b50\u8fdb\u7a0b\uff09\uff0c\u7136\u540e\u5728\u6bcf\u4e2a\u5b50\u8fdb\u7a0b\u5185\u90e8\u518d\u5f00\u542f\u591a\u7ebf\u7a0b\u6765\u5904\u7406\u540c\u7c7b\u578b\u7684\u6570\u636e\u6216\u6267\u884c\u66f4\u7ec6\u7c92\u5ea6\u7684\u5e76\u53d1\u4efb\u52a1\u3002</li> <li>\u8003\u8651\u6570\u636e\u4f20\u8f93\u91cf\uff1a \u5982\u679c\u4efb\u52a1\u4e4b\u95f4\u9700\u8981\u4f20\u8f93\u7684\u6570\u636e\u91cf\u5927\uff0c\u4e14\u9891\u7e41\uff0c\u5219\u503e\u5411\u4e8e\u5728\u8fdb\u7a0b\u5185\u90e8\u4f7f\u7528\u591a\u7ebf\u7a0b\u3002\u5982\u679c\u6570\u636e\u4f20\u8f93\u91cf\u5c0f\uff0c\u4f46\u9700\u8981\u9ad8\u5ea6\u9694\u79bb\u548c\u7a33\u5b9a\u6027\uff0c\u6216\u8005\u4efb\u52a1\u662f\u8ba1\u7b97\u5bc6\u96c6\u578b\u7684\uff0c\u5219\u53ef\u4ee5\u8003\u8651\u591a\u8fdb\u7a0b\u3002</li> <li>\u7cfb\u7edf\u73af\u5883\uff1a \u5728UNIX/Linux\u73af\u5883\u4e0b\uff0c\u591a\u8fdb\u7a0b\u7684\u5f00\u9500\u76f8\u5bf9\u8f83\u5c0f\uff0c\u6548\u7387\u8f83\u9ad8\uff0c\u56e0\u6b64\u591a\u8fdb\u7a0b\u662f\u4e00\u4e2a\u975e\u5e38\u53ef\u884c\u7684\u9009\u62e9\uff0c\u5c24\u5176\u662f\u5728\u6784\u5efa\u9ad8\u6027\u80fd\u670d\u52a1\u5668\u65f6\u3002\u800c\u5728Windows\u73af\u5883\u4e0b\uff0c\u7531\u4e8e\u5176\u5728\u7ebf\u7a0b\u5207\u6362\u548c\u9501\u6027\u80fd\u4e0a\u7684\u4f18\u52bf\uff0c\u591a\u7ebf\u7a0b\u53ef\u80fd\u5728\u67d0\u4e9b\u573a\u666f\u4e0b\u8868\u73b0\u66f4\u4f73\u3002</li> <li>\u7f16\u7a0b\u590d\u6742\u5ea6\uff1a \u5982\u679c\u5bf9\u5f00\u53d1\u901f\u5ea6\u548c\u4ee3\u7801\u7b80\u6d01\u6027\u6709\u8f83\u9ad8\u8981\u6c42\uff0c\u4e14\u5bf9\u7a33\u5b9a\u6027\u8981\u6c42\u53ef\u4ee5\u7a0d\u4f5c\u59a5\u534f\uff0c\u591a\u7ebf\u7a0b\u53ef\u80fd\u66f4\u5177\u5438\u5f15\u529b\u3002\u53cd\u4e4b\uff0c\u5982\u679c\u80fd\u63a5\u53d7\u66f4\u9ad8\u7684\u5f00\u53d1\u590d\u6742\u5ea6\u548c\u7ef4\u62a4\u6210\u672c\u4ee5\u6362\u53d6\u66f4\u9ad8\u7684\u7a33\u5b9a\u6027\u548c\u53ef\u6269\u5c55\u6027\uff0c\u591a\u8fdb\u7a0b\u6216\u6df7\u5408\u6a21\u5f0f\u66f4\u4e3a\u5408\u9002\u3002</li> <li>\u5185\u5b58\u6d88\u8017\uff1a \u5c3d\u7ba1\u73b0\u5728\u5185\u5b58\u4ef7\u683c\u4fbf\u5b9c\uff0c\u670d\u52a1\u5668\u52a8\u8f84\u82e5\u5e72GB\u5185\u5b58\uff0c\u591a\u8fdb\u7a0b\u989d\u5916\u7684\u5168\u5c40\u6570\u636e\u533a\u6d88\u8017\u4e0d\u518d\u662f\u4e3b\u8981\u95ee\u9898\uff0c\u4f46\u4ecd\u9700\u5728\u8bbe\u8ba1\u65f6\u8003\u8651\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%AD%BB%E9%94%81%E7%9A%84%E5%8E%9F%E5%9B%A0%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%8C%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E6%AD%BB%E9%94%81/","title":"\u6b7b\u9501\u7684\u539f\u56e0\u662f\u4ec0\u4e48\uff0c\u5982\u4f55\u89e3\u51b3\u6b7b\u9501","text":"<p>\u6b7b\u9501\u662f\u6307\u5728\u591a\u9053\u7a0b\u5e8f\u8bbe\u8ba1\u4e2d\uff0c\u4e24\u4e2a\u6216\u4e24\u4e2a\u4ee5\u4e0a\u7684\u8fdb\u7a0b\uff08\u6216\u7ebf\u7a0b\uff09\u56e0\u4e89\u593a\u8d44\u6e90\u800c\u9020\u6210\u7684\u4e00\u79cd\u4e92\u76f8\u7b49\u5f85\u7684\u50f5\u5c40\uff0c\u82e5\u65e0\u5916\u529b\u4f5c\u7528\uff0c\u5b83\u4eec\u90fd\u5c06\u65e0\u6cd5\u7ee7\u7eed\u63a8\u8fdb\u3002 \u4f8b\u5982\uff0c\u8fdb\u7a0bA\u5360\u6709\u8d44\u6e901\uff0c\u5e76\u7b49\u5f85\u8d44\u6e902\uff0c\u800c\u8fdb\u7a0bB\u5360\u6709\u8d44\u6e902\uff0c\u5e76\u7b49\u5f85\u8d44\u6e901\uff0c\u6b64\u65f6\u4e24\u4e2a\u8fdb\u7a0b\u90fd\u65e0\u6cd5\u7ee7\u7eed\u6267\u884c\uff0c\u5c31\u5f62\u6210\u4e86\u4e00\u4e2a\u6b7b\u9501\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%AD%BB%E9%94%81%E7%9A%84%E5%8E%9F%E5%9B%A0%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%8C%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E6%AD%BB%E9%94%81/#_1","title":"\u6b7b\u9501\u4ea7\u751f\u7684\u539f\u56e0\u548c\u5fc5\u8981\u6761\u4ef6","text":"<p>\u6b7b\u9501\u7684\u4ea7\u751f\u5e76\u975e\u5076\u7136\uff0c\u5b83\u5fc5\u987b\u540c\u65f6\u6ee1\u8db3\u4ee5\u4e0b\u56db\u4e2a\u5fc5\u8981\u6761\u4ef6\uff0c\u7f3a\u4e00\u4e0d\u53ef\uff1a</p> <ol> <li> <p>\u4e92\u65a5\u6761\u4ef6 (Mutual Exclusion)\uff1a\u6307\u4e00\u4e2a\u8d44\u6e90\u5728\u540c\u4e00\u65f6\u523b\u53ea\u80fd\u88ab\u4e00\u4e2a\u8fdb\u7a0b\u6240\u4f7f\u7528\u3002 \u5982\u679c\u5176\u4ed6\u8fdb\u7a0b\u8bf7\u6c42\u8be5\u8d44\u6e90\uff0c\u5219\u5fc5\u987b\u7b49\u5f85\uff0c\u76f4\u5230\u8d44\u6e90\u88ab\u91ca\u653e\u3002\u8fd9\u662f\u8bb8\u591a\u8d44\u6e90\uff08\u5982\u6253\u5370\u673a\u3001\u5904\u7406\u5668\uff09\u56fa\u6709\u7684\u7279\u6027\uff0c\u901a\u5e38\u65e0\u6cd5\u7834\u574f\u3002</p> </li> <li> <p>\u8bf7\u6c42\u4e0e\u4fdd\u6301\u6761\u4ef6 (Hold and Wait)\uff1a\u6307\u8fdb\u7a0b\u5df2\u7ecf\u81f3\u5c11\u4fdd\u6301\u4e86\u4e00\u4e2a\u8d44\u6e90\uff0c\u4f46\u53c8\u63d0\u51fa\u4e86\u65b0\u7684\u8d44\u6e90\u8bf7\u6c42\uff0c\u800c\u8be5\u8d44\u6e90\u5df2\u88ab\u5176\u4ed6\u8fdb\u7a0b\u5360\u7528\uff0c\u6b64\u65f6\u8bf7\u6c42\u8fdb\u7a0b\u88ab\u963b\u585e\uff0c\u4f46\u5bf9\u81ea\u5df1\u5df2\u83b7\u5f97\u7684\u8d44\u6e90\u4fdd\u6301\u4e0d\u653e\u3002</p> </li> <li> <p>\u4e0d\u53ef\u5265\u593a\u6761\u4ef6 (No Preemption)\uff1a\u6307\u8fdb\u7a0b\u5df2\u83b7\u5f97\u7684\u8d44\u6e90\uff0c\u5728\u672a\u4f7f\u7528\u5b8c\u4e4b\u524d\uff0c\u4e0d\u80fd\u88ab\u5176\u4ed6\u8fdb\u7a0b\u5f3a\u884c\u5265\u593a\uff0c\u53ea\u80fd\u7531\u83b7\u5f97\u8be5\u8d44\u6e90\u7684\u8fdb\u7a0b\u81ea\u5df1\u91ca\u653e\u3002</p> </li> <li> <p>\u5faa\u73af\u7b49\u5f85\u6761\u4ef6 (Circular Wait)\uff1a\u5728\u53d1\u751f\u6b7b\u9501\u65f6\uff0c\u5fc5\u7136\u5b58\u5728\u4e00\u4e2a\u8fdb\u7a0b\u2014\u8d44\u6e90\u7684\u73af\u5f62\u94fe\uff0c\u5373\u8fdb\u7a0b\u96c6\u5408{P0, P1, \u2026, Pn}\u4e2d\u7684P0\u6b63\u5728\u7b49\u5f85\u4e00\u4e2aP1\u5360\u7528\u7684\u8d44\u6e90\uff1bP1\u6b63\u5728\u7b49\u5f85P2\u5360\u7528\u7684\u8d44\u6e90\uff0c\u2026\u2026\uff0cPn\u6b63\u5728\u7b49\u5f85\u5df2\u88abP0\u5360\u7528\u7684\u8d44\u6e90\u3002</p> </li> </ol> <p>\u9664\u4e86\u8fd9\u56db\u4e2a\u5fc5\u8981\u6761\u4ef6\uff0c\u5bfc\u81f4\u6b7b\u9501\u7684\u5177\u4f53\u539f\u56e0\u8fd8\u5305\u62ec\uff1a *   \u8d44\u6e90\u7ade\u4e89\uff1a\u5f53\u7cfb\u7edf\u4e2d\u53ef\u4f9b\u591a\u4e2a\u8fdb\u7a0b\u5171\u4eab\u7684\u8d44\u6e90\u4e0d\u8db3\u65f6\uff0c\u8fdb\u7a0b\u4f1a\u56e0\u4e89\u593a\u8d44\u6e90\u800c\u9677\u5165\u50f5\u5c40\u3002 *   \u8fdb\u7a0b\u63a8\u8fdb\u987a\u5e8f\u4e0d\u5f53\uff1a\u8fdb\u7a0b\u5728\u8fd0\u884c\u8fc7\u7a0b\u4e2d\uff0c\u8bf7\u6c42\u548c\u91ca\u653e\u8d44\u6e90\u7684\u987a\u5e8f\u4e0d\u5f53\uff0c\u4e5f\u53ef\u80fd\u5bfc\u81f4\u6b7b\u9501\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%AD%BB%E9%94%81%E7%9A%84%E5%8E%9F%E5%9B%A0%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%8C%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E6%AD%BB%E9%94%81/#_2","title":"\u5982\u4f55\u89e3\u51b3\u6b7b\u9501","text":"<p>\u89e3\u51b3\u6b7b\u9501\u7684\u65b9\u6cd5\u901a\u5e38\u5206\u4e3a\u56db\u5927\u7c7b\uff1a\u6b7b\u9501\u9884\u9632\u3001\u6b7b\u9501\u907f\u514d\u3001\u6b7b\u9501\u68c0\u6d4b\u4e0e\u89e3\u9664\uff0c\u4ee5\u53ca\u5ffd\u7565\u8be5\u95ee\u9898\uff08\u5982\u9e35\u9e1f\u7b97\u6cd5\uff09\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%AD%BB%E9%94%81%E7%9A%84%E5%8E%9F%E5%9B%A0%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%8C%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E6%AD%BB%E9%94%81/#1-deadlock-prevention","title":"1. \u6b7b\u9501\u9884\u9632 (Deadlock Prevention)","text":"<p>\u6b7b\u9501\u9884\u9632\u662f\u901a\u8fc7\u7834\u574f\u4ea7\u751f\u6b7b\u9501\u7684\u56db\u4e2a\u5fc5\u8981\u6761\u4ef6\u4e2d\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u6765\u9632\u6b62\u6b7b\u9501\u7684\u53d1\u751f\u3002</p> <ul> <li>\u7834\u574f\u8bf7\u6c42\u4e0e\u4fdd\u6301\u6761\u4ef6\uff1a<ul> <li>\u4e00\u6b21\u6027\u5206\u914d\u6240\u6709\u8d44\u6e90\uff1a\u8981\u6c42\u6bcf\u4e2a\u8fdb\u7a0b\u5728\u5f00\u59cb\u6267\u884c\u524d\uff0c\u4e00\u6b21\u6027\u5730\u7533\u8bf7\u5176\u5728\u6574\u4e2a\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u6240\u9700\u7684\u5168\u90e8\u8d44\u6e90\u3002 \u8fd9\u6837\u505a\u7684\u597d\u5904\u662f\u7b80\u5355\uff0c\u4f46\u7f3a\u70b9\u662f\u8d44\u6e90\u6d6a\u8d39\u4e25\u91cd\uff0c\u4e14\u53ef\u80fd\u5bfc\u81f4\u8fdb\u7a0b\u201c\u9965\u997f\u201d\uff08\u5373\u8fdb\u7a0b\u53ef\u80fd\u56e0\u4e3a\u65e0\u6cd5\u4e00\u6b21\u6027\u83b7\u5f97\u6240\u6709\u8d44\u6e90\u800c\u957f\u65f6\u95f4\u65e0\u6cd5\u8fd0\u884c\uff09\u3002</li> </ul> </li> <li>\u7834\u574f\u4e0d\u53ef\u5265\u593a\u6761\u4ef6\uff1a<ul> <li>\u5141\u8bb8\u8d44\u6e90\u5265\u593a\u3002 \u5f53\u4e00\u4e2a\u5df2\u7ecf\u4fdd\u6301\u4e86\u67d0\u4e9b\u8d44\u6e90\u7684\u8fdb\u7a0b\uff0c\u518d\u8bf7\u6c42\u65b0\u7684\u8d44\u6e90\u800c\u4e0d\u80fd\u7acb\u5373\u5f97\u5230\u6ee1\u8db3\u65f6\uff0c\u5b83\u5fc5\u987b\u91ca\u653e\u6240\u6709\u5df2\u7ecf\u4fdd\u6301\u7684\u8d44\u6e90\u3002\u53e6\u4e00\u79cd\u65b9\u5f0f\u662f\uff0c\u64cd\u4f5c\u7cfb\u7edf\u53ef\u4ee5\u5265\u593a\u5176\u4ed6\u8fdb\u7a0b\u5360\u6709\u7684\u8d44\u6e90\u3002 \u8fd9\u79cd\u7b56\u7565\u5b9e\u73b0\u8d77\u6765\u6bd4\u8f83\u590d\u6742\uff0c\u4e14\u53ef\u80fd\u5bfc\u81f4\u524d\u4e00\u8fdb\u7a0b\u7684\u5de5\u4f5c\u524d\u529f\u5c3d\u5f03\u3002</li> </ul> </li> <li>\u7834\u574f\u5faa\u73af\u7b49\u5f85\u6761\u4ef6\uff1a<ul> <li>\u8d44\u6e90\u6709\u5e8f\u5206\u914d\u6cd5\uff1a\u5c06\u7cfb\u7edf\u4e2d\u7684\u6240\u6709\u8d44\u6e90\u8fdb\u884c\u7ebf\u6027\u6392\u5e8f\uff0c\u5e76\u8d4b\u4e88\u4e0d\u540c\u7684\u5e8f\u53f7\u3002\u6240\u6709\u8fdb\u7a0b\u5bf9\u8d44\u6e90\u7684\u8bf7\u6c42\u5fc5\u987b\u4e25\u683c\u6309\u5e8f\u53f7\u9012\u589e\u7684\u987a\u5e8f\u63d0\u51fa\u3002 \u8fd9\u6837\u5c31\u7834\u574f\u4e86\u5faa\u73af\u7b49\u5f85\u7684\u6761\u4ef6\u3002\u8fd9\u662f\u76ee\u524d\u5e94\u7528\u6700\u5e7f\u6cdb\u7684\u6b7b\u9501\u9884\u9632\u7b56\u7565\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%AD%BB%E9%94%81%E7%9A%84%E5%8E%9F%E5%9B%A0%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%8C%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E6%AD%BB%E9%94%81/#2-deadlock-avoidance","title":"2. \u6b7b\u9501\u907f\u514d (Deadlock Avoidance)","text":"<p>\u6b7b\u9501\u9884\u9632\u7684\u7b56\u7565\u901a\u5e38\u4f1a\u964d\u4f4e\u7cfb\u7edf\u7684\u5e76\u53d1\u6027\u3002\u6b7b\u9501\u907f\u514d\u5219\u662f\u4e00\u79cd\u66f4\u52a8\u6001\u7684\u65b9\u6cd5\uff0c\u5b83\u5728\u8d44\u6e90\u5206\u914d\u8fc7\u7a0b\u4e2d\uff0c\u901a\u8fc7\u7b97\u6cd5\u6765\u5224\u65ad\u672c\u6b21\u5206\u914d\u662f\u5426\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u8fdb\u5165\u4e0d\u5b89\u5168\u72b6\u6001\uff0c\u4ece\u800c\u907f\u514d\u6b7b\u9501\u7684\u53d1\u751f\u3002</p> <ul> <li>\u5b89\u5168\u72b6\u6001\uff1a\u7cfb\u7edf\u5904\u4e8e\u5b89\u5168\u72b6\u6001\u662f\u6307\u7cfb\u7edf\u80fd\u6309\u67d0\u79cd\u8fdb\u7a0b\u987a\u5e8f(P1, P2, \u2026, Pn)\u6765\u4e3a\u6bcf\u4e2a\u8fdb\u7a0b\u5206\u914d\u5176\u6240\u9700\u7684\u8d44\u6e90\uff0c\u76f4\u81f3\u6700\u5927\u9700\u6c42\uff0c\u4f7f\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u53ef\u4ee5\u987a\u5229\u5730\u5b8c\u6210\u3002</li> <li>\u94f6\u884c\u5bb6\u7b97\u6cd5 (Banker's Algorithm)\uff1a\u8fd9\u662f\u6700\u8457\u540d\u7684\u6b7b\u9501\u907f\u514d\u7b97\u6cd5\u3002\u5728\u5206\u914d\u8d44\u6e90\u4e4b\u524d\uff0c\u7cfb\u7edf\u4f1a\u68c0\u67e5\u8fd9\u6b21\u5206\u914d\u662f\u5426\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u4ece\u5b89\u5168\u72b6\u6001\u8f6c\u53d8\u4e3a\u4e0d\u5b89\u5168\u72b6\u6001\u3002\u5982\u679c\u662f\uff0c\u5219\u4e0d\u4e88\u5206\u914d\uff0c\u8ba9\u8fdb\u7a0b\u7b49\u5f85\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%AD%BB%E9%94%81%E7%9A%84%E5%8E%9F%E5%9B%A0%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%8C%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E6%AD%BB%E9%94%81/#3-deadlock-detection-and-recovery","title":"3. \u6b7b\u9501\u68c0\u6d4b\u4e0e\u89e3\u9664 (Deadlock Detection and Recovery)","text":"<p>\u8fd9\u79cd\u7b56\u7565\u5141\u8bb8\u6b7b\u9501\u7684\u53d1\u751f\uff0c\u4f46\u7cfb\u7edf\u4f1a\u4e0d\u65ad\u5730\u76d1\u6d4b\uff0c\u5224\u65ad\u6b7b\u9501\u662f\u5426\u771f\u7684\u53d1\u751f\u4e86\u3002\u4e00\u65e6\u68c0\u6d4b\u51fa\u6b7b\u9501\uff0c\u5c31\u4f1a\u91c7\u53d6\u63aa\u65bd\u6765\u89e3\u9664\u5b83\u3002</p> <ul> <li>\u6b7b\u9501\u68c0\u6d4b\uff1a<ul> <li>\u8d44\u6e90\u5206\u914d\u56fe\uff1a\u901a\u8fc7\u68c0\u6d4b\u8d44\u6e90\u5206\u914d\u56fe\u4e2d\u662f\u5426\u5b58\u5728\u73af\u8def\u6765\u5224\u65ad\u662f\u5426\u53d1\u751f\u4e86\u6b7b\u9501\u3002 \u7cfb\u7edf\u4f1a\u5b9a\u671f\u8fd0\u884c\u4e00\u4e2a\u7b97\u6cd5\u6765\u68c0\u6d4b\u8fd9\u4e2a\u56fe\u3002</li> </ul> </li> <li>\u6b7b\u9501\u89e3\u9664\uff1a\u4e00\u65e6\u68c0\u6d4b\u5230\u6b7b\u9501\uff0c\u53ef\u4ee5\u91c7\u53d6\u4ee5\u4e0b\u63aa\u65bd\uff1a<ul> <li>\u8d44\u6e90\u5265\u593a\u6cd5\uff1a\u6302\u8d77\u67d0\u4e9b\u6b7b\u9501\u8fdb\u7a0b\uff0c\u5e76\u62a2\u5360\u5b83\u7684\u8d44\u6e90\uff0c\u5c06\u8fd9\u4e9b\u8d44\u6e90\u5206\u914d\u7ed9\u5176\u4ed6\u7684\u6b7b\u9501\u8fdb\u7a0b\u3002</li> <li>\u64a4\u9500\u8fdb\u7a0b\uff1a\u5f3a\u5236\u64a4\u9500\u90e8\u5206\u751a\u81f3\u5168\u90e8\u6b7b\u9501\u8fdb\u7a0b\uff0c\u5e76\u5265\u593a\u8fd9\u4e9b\u8fdb\u7a0b\u7684\u8d44\u6e90\u3002</li> <li>\u8fdb\u7a0b\u56de\u6eda\uff1a\u8ba9\u4e00\u4e2a\u6216\u591a\u4e2a\u8fdb\u7a0b\u56de\u9000\u5230\u8db3\u4ee5\u907f\u514d\u6b7b\u9501\u7684\u5730\u6b65\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%AD%BB%E9%94%81%E7%9A%84%E5%8E%9F%E5%9B%A0%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%8C%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E6%AD%BB%E9%94%81/#4","title":"4. \u5ffd\u7565\u6b7b\u9501","text":"<p>\u5728\u67d0\u4e9b\u7cfb\u7edf\u4e2d\uff0c\u6b7b\u9501\u53d1\u751f\u7684\u6982\u7387\u5f88\u4f4e\uff0c\u800c\u7528\u4e8e\u9884\u9632\u3001\u907f\u514d\u6216\u68c0\u6d4b\u548c\u89e3\u9664\u6b7b\u9501\u7684\u5f00\u9500\u53c8\u5f88\u5927\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u91c7\u53d6\u201c\u9e35\u9e1f\u7b97\u6cd5\u201d\uff0c\u5373\u5047\u88c5\u95ee\u9898\u4ece\u672a\u53d1\u751f\u8fc7\u3002 \u5982\u679c\u771f\u7684\u53d1\u751f\u4e86\u6b7b\u9501\uff0c\u53ef\u4ee5\u901a\u8fc7\u91cd\u542f\u7cfb\u7edf\u6765\u89e3\u51b3\u3002</p> \u7b56\u7565 \u63cf\u8ff0 \u4f18\u70b9 \u7f3a\u70b9 \u6b7b\u9501\u9884\u9632 \u901a\u8fc7\u7834\u574f\u6b7b\u9501\u4ea7\u751f\u7684\u56db\u4e2a\u5fc5\u8981\u6761\u4ef6\u4e4b\u4e00\u6765\u9632\u6b62\u6b7b\u9501\u3002 \u7b80\u5355\uff0c\u4ece\u6839\u672c\u4e0a\u9632\u6b62\u6b7b\u9501\u3002 \u9650\u5236\u4e86\u5e76\u53d1\u6027\uff0c\u964d\u4f4e\u4e86\u8d44\u6e90\u5229\u7528\u7387\u3002 \u6b7b\u9501\u907f\u514d \u5728\u8d44\u6e90\u5206\u914d\u65f6\u52a8\u6001\u5224\u65ad\u662f\u5426\u4f1a\u8fdb\u5165\u4e0d\u5b89\u5168\u72b6\u6001\uff0c\u4ece\u800c\u907f\u514d\u6b7b\u9501\u3002 \u8d44\u6e90\u5229\u7528\u7387\u8f83\u9ad8\uff0c\u4e0d\u9700\u8981\u9884\u5148\u77e5\u9053\u6240\u6709\u8d44\u6e90\u8bf7\u6c42\u3002 \u9700\u8981\u9884\u77e5\u8fdb\u7a0b\u7684\u6700\u5927\u8d44\u6e90\u9700\u6c42\uff0c\u7b97\u6cd5\u5f00\u9500\u8f83\u5927\u3002 \u6b7b\u9501\u68c0\u6d4b\u4e0e\u89e3\u9664 \u5141\u8bb8\u6b7b\u9501\u53d1\u751f\uff0c\u4f46\u901a\u8fc7\u68c0\u6d4b\u673a\u5236\u53ca\u65f6\u53d1\u73b0\u5e76\u91c7\u53d6\u63aa\u65bd\u89e3\u9664\u3002 \u8d44\u6e90\u5229\u7528\u7387\u548c\u5e76\u53d1\u6027\u8f83\u9ad8\u3002 \u68c0\u6d4b\u548c\u89e3\u9664\u6b7b\u9501\u7684\u5f00\u9500\u53ef\u80fd\u5f88\u5927\u3002 \u5ffd\u7565\u6b7b\u9501 \u5047\u5b9a\u6b7b\u9501\u4e0d\u4f1a\u53d1\u751f\uff0c\u4e0d\u91c7\u53d6\u4efb\u4f55\u63aa\u65bd\u3002 \u65e0\u7cfb\u7edf\u5f00\u9500\u3002 \u7cfb\u7edf\u53ef\u80fd\u56e0\u6b7b\u9501\u800c\u6302\u8d77\uff0c\u9700\u8981\u624b\u52a8\u5e72\u9884\uff08\u5982\u91cd\u542f\uff09\u3002"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%94%A8%E6%88%B7%E6%80%81%E5%92%8C%E5%86%85%E6%A0%B8%E6%80%81%E6%98%AF%E5%A6%82%E4%BD%95%E5%88%87%E6%8D%A2%E7%9A%84%EF%BC%9F/","title":"\u7528\u6237\u6001\u548c\u5185\u6838\u6001\u662f\u5982\u4f55\u5207\u6362\u7684\uff1f","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%94%A8%E6%88%B7%E6%80%81%E5%92%8C%E5%86%85%E6%A0%B8%E6%80%81%E6%98%AF%E5%A6%82%E4%BD%95%E5%88%87%E6%8D%A2%E7%9A%84%EF%BC%9F/#_1","title":"\u7528\u6237\u6001\u548c\u5185\u6838\u6001","text":"<p>CPU\u901a\u5e38\u8bbe\u8ba1\u4e86\u591a\u4e2a\u6743\u9650\u7ea7\u522b\uff08Privilege Levels\uff09\uff0c\u6700\u57fa\u672c\u7684\u5c31\u662f\u7528\u6237\u6001\uff08User Mode\uff09\u548c\u5185\u6838\u6001\uff08Kernel Mode\uff0c\u4e5f\u53eb\u7279\u6743\u6001\u3001\u7cfb\u7edf\u6001\u3001\u7ba1\u6001\uff09\u3002</p> <ul> <li>\u5185\u6838\u6001\uff1a\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u8fd0\u884c\u5728\u8be5\u6a21\u5f0f\u4e0b\u3002\u5728\u6b64\u6a21\u5f0f\u4e0b\uff0cCPU\u53ef\u4ee5\u6267\u884c\u6240\u6709\u6307\u4ee4\uff0c\u8bbf\u95ee\u6240\u6709\u5185\u5b58\u548c\u786c\u4ef6\u8d44\u6e90\u3002\u8fd9\u662f\u6700\u9ad8\u6743\u9650\u7ea7\u522b\u3002</li> <li>\u7528\u6237\u6001\uff1a\u5e94\u7528\u7a0b\u5e8f\u8fd0\u884c\u5728\u8be5\u6a21\u5f0f\u4e0b\u3002\u5728\u6b64\u6a21\u5f0f\u4e0b\uff0cCPU\u6267\u884c\u7684\u6307\u4ee4\u548c\u53ef\u8bbf\u95ee\u7684\u8d44\u6e90\u53d7\u5230\u9650\u5236\u3002\u4f8b\u5982\uff0c\u7528\u6237\u6001\u7a0b\u5e8f\u4e0d\u80fd\u76f4\u63a5\u8bbf\u95ee\u786c\u4ef6\u8bbe\u5907\uff0c\u4e0d\u80fd\u76f4\u63a5\u4fee\u6539\u5173\u952e\u7684\u7cfb\u7edf\u6570\u636e\u7ed3\u6784\uff0c\u4e0d\u80fd\u6267\u884c\u67d0\u4e9b\u7279\u6743\u6307\u4ee4\u3002</li> </ul> <p>\u8fd9\u79cd\u533a\u5206\u7684\u4e3b\u8981\u76ee\u7684\u662f\uff1a</p> <ul> <li>\u4fdd\u62a4\u64cd\u4f5c\u7cfb\u7edf\uff1a\u9632\u6b62\u7528\u6237\u7a0b\u5e8f\u610f\u5916\u6216\u6076\u610f\u5730\u7834\u574f\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\uff0c\u4ece\u800c\u4fdd\u8bc1\u7cfb\u7edf\u7684\u7a33\u5b9a\u6027\u3002</li> <li>\u8d44\u6e90\u7ba1\u7406\uff1a\u64cd\u4f5c\u7cfb\u7edf\u4f5c\u4e3a\u8d44\u6e90\u7ba1\u7406\u8005\uff0c\u9700\u8981\u6709\u80fd\u529b\u7edf\u4e00\u8c03\u5ea6\u548c\u5206\u914dCPU\u65f6\u95f4\u3001\u5185\u5b58\u3001I/O\u8bbe\u5907\u7b49\uff0c\u7528\u6237\u7a0b\u5e8f\u53ea\u80fd\u901a\u8fc7\u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u7684\u63a5\u53e3\u6765\u8bf7\u6c42\u8fd9\u4e9b\u8d44\u6e90\u3002</li> <li>\u63d0\u4f9b\u62bd\u8c61\uff1a\u64cd\u4f5c\u7cfb\u7edf\u5411\u7528\u6237\u7a0b\u5e8f\u63d0\u4f9b\u7b80\u6d01\u3001\u4e00\u81f4\u7684\u63a5\u53e3\uff08\u5982\u7cfb\u7edf\u8c03\u7528\uff09\uff0c\u5c4f\u853d\u5e95\u5c42\u786c\u4ef6\u7684\u590d\u6742\u6027\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%94%A8%E6%88%B7%E6%80%81%E5%92%8C%E5%86%85%E6%A0%B8%E6%80%81%E6%98%AF%E5%A6%82%E4%BD%95%E5%88%87%E6%8D%A2%E7%9A%84%EF%BC%9F/#_2","title":"\u5207\u6362\u7684\u89e6\u53d1\u6761\u4ef6","text":"<p>\u4ece\u7528\u6237\u6001\u5207\u6362\u5230\u5185\u6838\u6001\uff0c\u901a\u5e38\u7531\u4ee5\u4e0b\u4e09\u79cd\u60c5\u51b5\u89e6\u53d1\uff1a</p> <ol> <li> <p>\u7cfb\u7edf\u8c03\u7528\uff08System Call\uff09\uff1a</p> <ul> <li>\u8fd9\u662f\u6700\u5e38\u89c1\u7684\u4e3b\u52a8\u5207\u6362\u65b9\u5f0f\u3002\u7528\u6237\u7a0b\u5e8f\u4e3a\u4e86\u83b7\u5f97\u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u7684\u670d\u52a1\uff08\u5982\u6587\u4ef6\u64cd\u4f5c\u3001\u8fdb\u7a0b\u7ba1\u7406\u3001\u7f51\u7edc\u901a\u4fe1\u7b49\uff09\uff0c\u4f1a\u4e3b\u52a8\u8bf7\u6c42\u5185\u6838\u3002\u4f8b\u5982\uff0c\u5f53\u4e00\u4e2aC\u7a0b\u5e8f\u8c03\u7528<code>open()</code>\u3001<code>read()</code>\u3001<code>fork()</code>\u7b49\u5e93\u51fd\u6570\u65f6\uff0c\u8fd9\u4e9b\u5e93\u51fd\u6570\u5185\u90e8\u4f1a\u5c01\u88c5\u4e00\u4e2a\u6216\u591a\u4e2a\u7cfb\u7edf\u8c03\u7528\u3002</li> </ul> </li> <li> <p>\u4e2d\u65ad\uff08Interrupt\uff09\uff1a</p> <ul> <li>\u8fd9\u662f\u88ab\u52a8\u7684\u5207\u6362\u65b9\u5f0f\u3002\u5f53\u4e2d\u65ad\u53d1\u751f\u65f6\uff0cCPU\u4f1a\u6682\u505c\u5f53\u524d\u6b63\u5728\u6267\u884c\u7684\u7528\u6237\u7a0b\u5e8f\uff0c\u8f6c\u800c\u53bb\u6267\u884c\u5185\u6838\u4e2d\u7684\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u3002</li> <li>\u786c\u4ef6\u4e2d\u65ad\uff1a\u7531\u5916\u90e8\u786c\u4ef6\u8bbe\u5907\u4ea7\u751f\uff0c\u4f8b\u5982\u78c1\u76d8I/O\u5b8c\u6210\u3001\u7f51\u7edc\u6570\u636e\u5305\u5230\u8fbe\u3001\u5b9a\u65f6\u5668\u5230\u671f\u7b49\u3002</li> <li>\u8f6f\u4ef6\u4e2d\u65ad\uff1a\u901a\u5e38\u6307\u7531\u7279\u5b9a\u6307\u4ee4\uff08\u5982x86\u7684<code>INT n</code>\u6307\u4ee4\uff09\u5f15\u53d1\u7684\u4e2d\u65ad\uff0c\u7cfb\u7edf\u8c03\u7528\u5728\u67d0\u4e9b\u67b6\u6784\u4e0a\u4e5f\u901a\u8fc7\u7279\u5b9a\u7684\u8f6f\u4ef6\u4e2d\u65ad\u6307\u4ee4\u5b9e\u73b0\u3002</li> </ul> </li> <li> <p>\u5f02\u5e38\uff08Exception\uff09\u6216\u9677\u9631\uff08Trap\uff09\uff1a</p> <ul> <li>\u8fd9\u4e5f\u662f\u88ab\u52a8\u7684\u5207\u6362\u65b9\u5f0f\u3002\u5f53CPU\u5728\u6267\u884c\u7528\u6237\u6001\u6307\u4ee4\u65f6\uff0c\u5982\u679c\u53d1\u751f\u4e86\u9519\u8bef\u6216\u7279\u6b8a\u60c5\u51b5\uff08\u5982\u9664\u96f6\u9519\u8bef\u3001\u7f3a\u9875\u6545\u969c\u3001\u8bbf\u95ee\u975e\u6cd5\u5185\u5b58\u5730\u5740\u3001\u6267\u884c\u4e86\u975e\u6cd5\u6307\u4ee4\u7b49\uff09\uff0cCPU\u4f1a\u6355\u83b7\u8fd9\u4e9b\u5f02\u5e38\uff0c\u5e76\u5207\u6362\u5230\u5185\u6838\u6001\uff0c\u7531\u5185\u6838\u6765\u5904\u7406\u8fd9\u4e9b\u5f02\u5e38\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%94%A8%E6%88%B7%E6%80%81%E5%92%8C%E5%86%85%E6%A0%B8%E6%80%81%E6%98%AF%E5%A6%82%E4%BD%95%E5%88%87%E6%8D%A2%E7%9A%84%EF%BC%9F/#_3","title":"\u5177\u4f53\u7684\u5207\u6362\u8fc7\u7a0b","text":"<p>\u4ee5\u7cfb\u7edf\u8c03\u7528\u4e3a\u4f8b\uff0c\u5207\u6362\u8fc7\u7a0b\u5927\u81f4\u5982\u4e0b\uff08\u4e0d\u540cCPU\u67b6\u6784\u7ec6\u8282\u53ef\u80fd\u6709\u6240\u4e0d\u540c\uff0c\u4f46\u539f\u7406\u76f8\u4f3c\uff09\uff1a</p> <ol> <li> <p>\u51c6\u5907\u9636\u6bb5\uff08\u7528\u6237\u6001\uff09\uff1a</p> <ul> <li>\u7528\u6237\u7a0b\u5e8f\u5c06\u7cfb\u7edf\u8c03\u7528\u53f7\uff08\u6807\u8bc6\u8bf7\u6c42\u54ea\u4e2a\u670d\u52a1\uff09\u548c\u53c2\u6570\u4fdd\u5b58\u5230CPU\u7684\u7279\u5b9a\u5bc4\u5b58\u5668\u6216\u5185\u5b58\u7684\u7ea6\u5b9a\u4f4d\u7f6e\u3002</li> <li>\u7528\u6237\u7a0b\u5e8f\u6267\u884c\u4e00\u6761\u7279\u6b8a\u7684\u201c\u9677\u5165\u6307\u4ee4\u201d\u6216\u201c\u9677\u9631\u6307\u4ee4\u201d\uff08Trap Instruction\uff09\uff0c\u4f8b\u5982x86\u67b6\u6784\u4e0b\u7684<code>SYSCALL</code> (\u8f83\u65b0\u7684\u65b9\u5f0f) \u6216 <code>INT 0x80</code> (\u4f20\u7edf\u65b9\u5f0f)\uff0cARM\u67b6\u6784\u4e0b\u7684<code>SVC</code> (Supervisor Call) \u6307\u4ee4\u3002</li> </ul> </li> <li> <p>\u786c\u4ef6\u6267\u884c\u9636\u6bb5\uff1a</p> <ul> <li>\u5f53CPU\u6267\u884c\u8fd9\u6761\u9677\u5165\u6307\u4ee4\u65f6\uff0c\u786c\u4ef6\u4f1a\u81ea\u52a8\u5b8c\u6210\u4ee5\u4e0b\u4e00\u4e9b\u64cd\u4f5c\uff1a<ul> <li>\u5c06CPU\u7684\u5f53\u524d\u6a21\u5f0f\u4ece\u7528\u6237\u6001\u5207\u6362\u5230\u5185\u6838\u6001\u3002\u8fd9\u901a\u5e38\u662f\u901a\u8fc7\u4fee\u6539CPU\u72b6\u6001\u5bc4\u5b58\u5668\u4e2d\u7684\u67d0\u4e2a\u6807\u5fd7\u4f4d\u5b9e\u73b0\u7684\u3002</li> <li>\u4fdd\u5b58\u5f53\u524d\u7528\u6237\u6001\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\uff0c\u81f3\u5c11\u5305\u62ec\uff1a<ul> <li>\u7a0b\u5e8f\u8ba1\u6570\u5668\uff08PC\uff0c\u6307\u5411\u4e0b\u4e00\u6761\u8981\u6267\u884c\u7684\u7528\u6237\u6307\u4ee4\uff09</li> <li>\u7528\u6237\u6808\u6307\u9488\uff08User Stack Pointer\uff09</li> <li>\u67d0\u4e9b\u5173\u952e\u7684CPU\u72b6\u6001\u5bc4\u5b58\u5668\uff08\u5982\u7a0b\u5e8f\u72b6\u6001\u5b57PSW\uff09 \u8fd9\u4e9b\u4fe1\u606f\u901a\u5e38\u4f1a\u88ab\u4fdd\u5b58\u5230\u5185\u6838\u6808\u6216\u8005\u4e00\u4e2a\u9884\u5b9a\u4e49\u7684\u5185\u5b58\u533a\u57df\u3002</li> </ul> </li> <li>CPU\u6839\u636e\u9677\u5165\u6307\u4ee4\u7684\u7c7b\u578b\u6216\u7cfb\u7edf\u8c03\u7528\u53f7\uff08\u6216\u4e2d\u65ad/\u5f02\u5e38\u53f7\uff09\uff0c\u67e5\u8be2\u4e00\u4e2a\u7531\u64cd\u4f5c\u7cfb\u7edf\u9884\u5148\u8bbe\u7f6e\u597d\u7684\u8868\uff0c\u79f0\u4e3a\u4e2d\u65ad\u63cf\u8ff0\u7b26\u8868\uff08IDT\uff09\u6216\u7cfb\u7edf\u8c03\u7528\u5411\u91cf\u8868\u3002\u8fd9\u4e2a\u8868\u5b58\u653e\u4e86\u6240\u6709\u5185\u6838\u63d0\u4f9b\u7684\u670d\u52a1\u4f8b\u7a0b\uff08\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u3001\u7cfb\u7edf\u8c03\u7528\u5904\u7406\u7a0b\u5e8f\uff09\u7684\u5165\u53e3\u5730\u5740\u3002</li> <li>CPU\u8df3\u8f6c\u5230\u8be5\u8868\u4e2d\u67e5\u627e\u5230\u7684\u5185\u6838\u5904\u7406\u7a0b\u5e8f\u7684\u5165\u53e3\u5730\u5740\u5f00\u59cb\u6267\u884c\u3002</li> </ul> </li> </ul> </li> <li> <p>\u5185\u6838\u6267\u884c\u9636\u6bb5\uff08\u5185\u6838\u6001\uff09\uff1a</p> <ul> <li>\u5185\u6838\u5904\u7406\u7a0b\u5e8f\u9996\u5148\u4f1a\u505a\u8fdb\u4e00\u6b65\u7684\u4e0a\u4e0b\u6587\u4fdd\u5b58\uff0c\u4f8b\u5982\u4fdd\u5b58\u7528\u6237\u6001\u7684\u5176\u4ed6\u901a\u7528\u5bc4\u5b58\u5668\u7684\u503c\u5230\u5185\u6838\u6808\u4e2d\u3002\u8fd9\u662f\u56e0\u4e3a\u5185\u6838\u4ee3\u7801\u53ef\u80fd\u9700\u8981\u4f7f\u7528\u8fd9\u4e9b\u5bc4\u5b58\u5668\uff0c\u5e76\u4e14\u5728\u8fd4\u56de\u7528\u6237\u6001\u65f6\u9700\u8981\u6062\u590d\u5b83\u4eec\u3002</li> <li>\u5185\u6838\u4f1a\u5207\u6362\u5230\u5185\u6838\u6808\uff08\u6bcf\u4e2a\u8fdb\u7a0b\u901a\u5e38\u90fd\u6709\u81ea\u5df1\u7684\u5185\u6838\u6808\uff09\u3002</li> <li>\u5185\u6838\u6839\u636e\u7cfb\u7edf\u8c03\u7528\u53f7\u548c\u4f20\u9012\u7684\u53c2\u6570\uff0c\u6267\u884c\u76f8\u5e94\u7684\u5185\u6838\u670d\u52a1\u4ee3\u7801\u3002</li> <li>\u5728\u6267\u884c\u671f\u95f4\uff0c\u5185\u6838\u62e5\u6709\u5b8c\u5168\u7684\u6743\u9650\uff0c\u53ef\u4ee5\u8bbf\u95ee\u6240\u6709\u786c\u4ef6\u548c\u5185\u5b58\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%94%A8%E6%88%B7%E6%80%81%E5%92%8C%E5%86%85%E6%A0%B8%E6%80%81%E6%98%AF%E5%A6%82%E4%BD%95%E5%88%87%E6%8D%A2%E7%9A%84%EF%BC%9F/#_4","title":"\u4ece\u5185\u6838\u6001\u5982\u4f55\u8fd4\u56de\u7528\u6237\u6001","text":"<p>\u5f53\u5185\u6838\u670d\u52a1\u6267\u884c\u5b8c\u6bd5\uff0c\u6216\u8005\u4e2d\u65ad/\u5f02\u5e38\u5904\u7406\u5b8c\u6210\u540e\uff0c\u9700\u8981\u4ece\u5185\u6838\u6001\u8fd4\u56de\u5230\u7528\u6237\u6001\uff1a</p> <ol> <li> <p>\u5185\u6838\u51c6\u5907\u8fd4\u56de\uff1a</p> <ul> <li>\u5185\u6838\u5c06\u7cfb\u7edf\u8c03\u7528\u7684\u8fd4\u56de\u503c\uff08\u5982\u679c\u6709\uff09\u5b58\u653e\u5230\u7ea6\u5b9a\u7684\u5bc4\u5b58\u5668\u4e2d\u3002</li> <li>\u5185\u6838\u4ece\u5185\u6838\u6808\u4e2d\u6062\u590d\u4e4b\u524d\u4fdd\u5b58\u7684\u7528\u6237\u6001\u901a\u7528\u5bc4\u5b58\u5668\u3002</li> </ul> </li> <li> <p>\u6267\u884c\u7279\u6743\u8fd4\u56de\u6307\u4ee4\uff1a</p> <ul> <li>\u5185\u6838\u6267\u884c\u4e00\u6761\u7279\u6b8a\u7684\u201c\u8fd4\u56de\u6307\u4ee4\u201d\uff0c\u4f8b\u5982x86\u67b6\u6784\u4e0b\u7684<code>SYSRET</code> (\u4e0e<code>SYSCALL</code>\u5bf9\u5e94) \u6216 <code>IRET</code> (\u4e2d\u65ad\u8fd4\u56de)\uff0cARM\u67b6\u6784\u4e0b\u7684<code>ERET</code>\u3002</li> <li>\u8fd9\u6761\u6307\u4ee4\u4f1a\u4f7fCPU\u5b8c\u6210\u4ee5\u4e0b\u64cd\u4f5c\uff1a<ul> <li>\u5c06\u4e4b\u524d\u4fdd\u5b58\u7684\u7528\u6237\u6001PC\u3001\u7528\u6237\u6808\u6307\u9488\u548cCPU\u72b6\u6001\u5bc4\u5b58\u5668\u7b49\u6062\u590d\u5230CPU\u4e2d\u3002</li> <li>\u5c06CPU\u7684\u5f53\u524d\u6a21\u5f0f\u4ece\u5185\u6838\u6001\u5207\u6362\u56de\u7528\u6237\u6001\u3002</li> </ul> </li> </ul> </li> <li> <p>\u7ee7\u7eed\u7528\u6237\u6001\u6267\u884c\uff1a</p> <ul> <li>CPU\u4ece\u4e4b\u524d\u4fdd\u5b58\u7684\u7528\u6237\u6001PC\u6307\u5411\u7684\u6307\u4ee4\u5904\uff0c\u7ee7\u7eed\u6267\u884c\u7528\u6237\u7a0b\u5e8f\u3002</li> </ul> </li> </ol> <p>\u7528\u6237\u6001\u548c\u5185\u6838\u6001\u7684\u5207\u6362\u662f\u4e00\u4e2a\u7531\u786c\u4ef6\u548c\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u7d27\u5bc6\u534f\u4f5c\u5b8c\u6210\u7684\u8fc7\u7a0b\u3002\u5b83\u901a\u8fc7\u4e00\u4e2a\u660e\u786e\u5b9a\u4e49\u7684\u63a5\u53e3\uff08\u9677\u5165\u6307\u4ee4\u3001\u4e2d\u65ad\u5411\u91cf\u8868\uff09\u548c\u4e25\u683c\u7684\u4e0a\u4e0b\u6587\u4fdd\u5b58\u4e0e\u6062\u590d\u673a\u5236\uff0c\u786e\u4fdd\u4e86\u5728\u63d0\u4f9b\u5f3a\u5927\u529f\u80fd\u7684\u540c\u65f6\uff0c\u7cfb\u7edf\u7684\u5b89\u5168\u6027\u548c\u7a33\u5b9a\u6027\u4e0d\u53d7\u635f\u5bb3\u3002\u8fd9\u4e2a\u5207\u6362\u8fc7\u7a0b\u867d\u7136\u6709\u4e00\u5b9a\u7684\u5f00\u9500\uff08\u6d89\u53ca\u5230\u5bc4\u5b58\u5668\u64cd\u4f5c\u3001\u6808\u5207\u6362\u3001\u53ef\u80fd\u7684TLB\u5237\u65b0\u7b49\uff09\uff0c\u4f46\u5bf9\u4e8e\u73b0\u4ee3\u64cd\u4f5c\u7cfb\u7edf\u7684\u8bbe\u8ba1\u662f\u4e0d\u53ef\u6216\u7f3a\u7684\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%BA%BF%E7%A8%8B%E4%B8%8A%E4%B8%8B%E6%96%87%E5%88%87%E6%8D%A2%E4%BB%8B%E7%BB%8D/","title":"\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362\u4ecb\u7ecd","text":"<p>\u5728\u73b0\u4ee3\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u7ebf\u7a0b\u662fCPU\u8c03\u5ea6\u7684\u6700\u5c0f\u5355\u5143\u3002\u4e3a\u4e86\u5b9e\u73b0\u5e76\u53d1\u6267\u884c\uff0cCPU\u9700\u8981\u5728\u591a\u4e2a\u7ebf\u7a0b\u4e4b\u95f4\u5feb\u901f\u5207\u6362\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u5c31\u662f\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362\uff08Thread Context Switch\uff09\u3002\u5b83\u65e2\u662f\u5b9e\u73b0\u591a\u4efb\u52a1\u7684\u57fa\u77f3\uff0c\u4e5f\u662f\u5e76\u53d1\u7a0b\u5e8f\u4e2d\u4e00\u4e2a\u91cd\u8981\u7684\u6027\u80fd\u5f00\u9500\u6765\u6e90\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%BA%BF%E7%A8%8B%E4%B8%8A%E4%B8%8B%E6%96%87%E5%88%87%E6%8D%A2%E4%BB%8B%E7%BB%8D/#_1","title":"\u7ebf\u7a0b\u4e0a\u4e0b\u6587","text":"<p>\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u662f\u64cd\u4f5c\u7cfb\u7edf\u4e3a\u4e86\u80fd\u591f\u968f\u65f6\u6682\u505c\u548c\u6062\u590d\u7ebf\u7a0b\u6267\u884c\u800c\u9700\u8981\u4fdd\u5b58\u7684\u4e00\u7ec4\u5173\u952e\u6570\u636e\u3002\u5b83\u5b8c\u6574\u5730\u8bb0\u5f55\u4e86\u7ebf\u7a0b\u5728\u67d0\u4e2a\u65f6\u95f4\u70b9\u7684\u201c\u5feb\u7167\u201d\uff0c\u4e3b\u8981\u5305\u542b\uff1a</p> <ol> <li>CPU\u5bc4\u5b58\u5668\u72b6\u6001\uff1a<ul> <li>\u901a\u7528\u5bc4\u5b58\u5668\uff1a\u5982 <code>EAX</code>, <code>EBX</code> \u7b49\uff0c\u7528\u4e8e\u5b58\u50a8\u8ba1\u7b97\u8fc7\u7a0b\u4e2d\u7684\u4e34\u65f6\u6570\u636e\u3002</li> <li>\u7a0b\u5e8f\u8ba1\u6570\u5668\uff08PC/IP\uff09\uff1a\u6307\u5411\u7ebf\u7a0b\u4e0b\u4e00\u6761\u8981\u6267\u884c\u7684\u6307\u4ee4\u7684\u5730\u5740\uff0c\u662f\u6267\u884c\u6d41\u7684\u6838\u5fc3\u3002</li> <li>\u6808\u6307\u9488\uff08SP\uff09\uff1a\u6307\u5411\u7ebf\u7a0b\u5f53\u524d\u6808\u5e27\u7684\u9876\u90e8\uff0c\u7ba1\u7406\u51fd\u6570\u8c03\u7528\u548c\u5c40\u90e8\u53d8\u91cf\u3002</li> <li>\u7279\u6b8a\u5bc4\u5b58\u5668\uff1a\u5982\u6d6e\u70b9\uff08FPU\uff09\u3001\u591a\u5a92\u4f53\u6269\u5c55\uff08MMX, SSE, AVX\uff09\u7b49\u5bc4\u5b58\u5668\uff0c\u5b83\u4eec\u6570\u636e\u91cf\u5de8\u5927\uff0c\u662f\u4e0a\u4e0b\u6587\u5207\u6362\u5f00\u9500\u7684\u91cd\u8981\u7ec4\u6210\u90e8\u5206\u3002</li> </ul> </li> <li>\u7ebf\u7a0b\u72b6\u6001\u548c\u5c5e\u6027\uff1a\u5b58\u50a8\u5728\u5185\u6838\u6570\u636e\u7ed3\u6784\uff08Linux\u4e2d\u4e3a <code>struct task_struct</code>\uff09\u4e2d\u7684\u4fe1\u606f\uff0c\u5982\u7ebf\u7a0bID\u3001\u72b6\u6001\uff08\u8fd0\u884c\u3001\u5c31\u7eea\u3001\u963b\u585e\u7b49\uff09\u3001\u4f18\u5148\u7ea7\u3001\u5185\u6838\u6808\u7b49\u3002</li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%BA%BF%E7%A8%8B%E4%B8%8A%E4%B8%8B%E6%96%87%E5%88%87%E6%8D%A2%E4%BB%8B%E7%BB%8D/#_2","title":"\u4e0a\u4e0b\u6587\u5207\u6362\u7684\u89e6\u53d1\u65f6\u673a","text":"<p>\u4e0a\u4e0b\u6587\u5207\u6362\u7684\u53d1\u751f\u5e76\u975e\u968f\u673a\uff0c\u800c\u662f\u7531\u7279\u5b9a\u7684\u4e8b\u4ef6\u89e6\u53d1\uff0c\u53ef\u5206\u4e3a\u4e24\u5927\u7c7b\uff1a</p> <ul> <li> <p>\u81ea\u613f\u5207\u6362\uff08Voluntary Switch\uff09\uff1a\u7ebf\u7a0b\u4e3b\u52a8\u653e\u5f03CPU\u3002</p> <ul> <li>I/O\u963b\u585e\uff1a\u7ebf\u7a0b\u8bf7\u6c42\u8bfb\u5199\u6587\u4ef6\u6216\u7f51\u7edc\u6570\u636e\u65f6\uff0c\u7531\u4e8e\u7b49\u5f85\u8bbe\u5907\u54cd\u5e94\uff0c\u4f1a\u8fdb\u5165\u963b\u585e\u72b6\u6001\u3002</li> <li>\u540c\u6b65\u963b\u585e\uff1a\u7ebf\u7a0b\u5c1d\u8bd5\u83b7\u53d6\u4e00\u4e2a\u5df2\u88ab\u5176\u4ed6\u7ebf\u7a0b\u6301\u6709\u7684\u9501\uff08Mutex\u3001Semaphore\uff09\u65f6\uff0c\u4f1a\u8fdb\u5165\u7b49\u5f85\u961f\u5217\u3002</li> <li>\u4e3b\u52a8\u4f11\u7720\uff1a\u7ebf\u7a0b\u8c03\u7528 <code>sleep()</code> \u6216 <code>yield()</code> \u7b49\u51fd\u6570\uff0c\u81ea\u613f\u8ba9\u51faCPU\u3002</li> </ul> </li> <li> <p>\u975e\u81ea\u613f\u5207\u6362/\u62a2\u5360\uff08Involuntary Switch / Preemption\uff09\uff1a\u64cd\u4f5c\u7cfb\u7edf\u5f3a\u5236\u5265\u593a\u7ebf\u7a0b\u7684CPU\u4f7f\u7528\u6743\u3002</p> <ul> <li>\u65f6\u95f4\u7247\u7528\u5c3d\uff1a\u5728\u91c7\u7528\u8f6e\u8be2\uff08Round-Robin\uff09\u7b49\u516c\u5e73\u8c03\u5ea6\u7b56\u7565\u7684\u7cfb\u7edf\u4e2d\uff0c\u7ebf\u7a0b\u8fd0\u884c\u5b8c\u5206\u914d\u7684\u65f6\u95f4\u7247\u540e\uff0c\u4f1a\u88ab\u8c03\u5ea6\u5668\u5f3a\u5236\u5207\u6362\u3002</li> <li>\u66f4\u9ad8\u4f18\u5148\u7ea7\u7ebf\u7a0b\u5c31\u7eea\uff1a\u5f53\u4e00\u4e2a\u66f4\u9ad8\u4f18\u5148\u7ea7\u7684\u7ebf\u7a0b\u4ece\u963b\u585e\u72b6\u6001\u6062\u590d\uff08\u4f8b\u5982\uff0c\u5b83\u7b49\u5f85\u7684I/O\u64cd\u4f5c\u5b8c\u6210\uff09\uff0c\u8c03\u5ea6\u5668\u4f1a\u7acb\u5373\u62a2\u5360\u5f53\u524d\u6b63\u5728\u8fd0\u884c\u7684\u4f4e\u4f18\u5148\u7ea7\u7ebf\u7a0b\u3002</li> <li>\u786c\u4ef6\u4e2d\u65ad\uff1a\u5916\u90e8\u8bbe\u5907\uff08\u5982\u952e\u76d8\u3001\u7f51\u7edc\u5361\uff09\u5b8c\u6210\u64cd\u4f5c\u540e\u53d1\u51fa\u4e2d\u65ad\u4fe1\u53f7\u3002CPU\u54cd\u5e94\u4e2d\u65ad\uff0c\u5728\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u7ed3\u675f\u540e\uff0c\u8c03\u5ea6\u5668\u53ef\u80fd\u4f1a\u51b3\u5b9a\u8fd0\u884c\u4e00\u4e2a\u6bd4\u4e4b\u524d\u88ab\u4e2d\u65ad\u7684\u7ebf\u7a0b\u66f4\u91cd\u8981\u7684\u4efb\u52a1\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%BA%BF%E7%A8%8B%E4%B8%8A%E4%B8%8B%E6%96%87%E5%88%87%E6%8D%A2%E4%BB%8B%E7%BB%8D/#_3","title":"\u8c03\u5ea6\u7b56\u7565\u4e0e\u7b97\u6cd5","text":"<p>\u5f53\u9700\u8981\u8fdb\u884c\u4e0a\u4e0b\u6587\u5207\u6362\u65f6\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u7684\u8c03\u5ea6\u5668\uff08Scheduler\uff09\u4f1a\u6839\u636e\u9884\u8bbe\u7684\u8c03\u5ea6\u7b56\u7565\uff08Scheduling Policy\uff09\u6765\u51b3\u5b9a\u4e0b\u4e00\u4e2a\u5e94\u8be5\u8fd0\u884c\u54ea\u4e2a\u7ebf\u7a0b\u3002\u4e0d\u540c\u7684\u7b56\u7565\u76ee\u6807\u4e0d\u540c\uff0c\u9002\u7528\u4e8e\u4e0d\u540c\u7684\u5e94\u7528\u573a\u666f\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%BA%BF%E7%A8%8B%E4%B8%8A%E4%B8%8B%E6%96%87%E5%88%87%E6%8D%A2%E4%BB%8B%E7%BB%8D/#1","title":"(1) \u4ea4\u4e92\u5f0f\u7cfb\u7edf\u7684\u4e3b\u8981\u8c03\u5ea6\u7b56\u7565","text":"<p>\u8fd9\u7c7b\u7cfb\u7edf\uff08\u5982\u684c\u9762\u64cd\u4f5c\u7cfb\u7edf\u3001\u670d\u52a1\u5668\uff09\u6ce8\u91cd\u54cd\u5e94\u65f6\u95f4\u548c\u516c\u5e73\u6027\u3002</p> <ul> <li> <p>\u8f6e\u8be2\u8c03\u5ea6 (Round-Robin Scheduling)</p> <ul> <li>\u6838\u5fc3\u601d\u60f3\uff1a\u7ef4\u62a4\u4e00\u4e2a\u5c31\u7eea\u7ebf\u7a0b\u961f\u5217\uff0c\u8c03\u5ea6\u5668\u6309\u201c\u5148\u6765\u5148\u670d\u52a1\u201d\u7684\u539f\u5219\u9009\u62e9\u961f\u9996\u7ebf\u7a0b\uff0c\u5e76\u7ed9\u4e88\u4e00\u4e2a\u56fa\u5b9a\u7684\u65f6\u95f4\u7247\uff08Quantum\uff09\u3002</li> <li>\u5207\u6362\u65f6\u673a\uff1a\u5982\u679c\u7ebf\u7a0b\u5728\u65f6\u95f4\u7247\u5185\u963b\u585e\uff0c\u7acb\u5373\u5207\u6362\uff1b\u5982\u679c\u65f6\u95f4\u7247\u7528\u5c3d\u7ebf\u7a0b\u4ecd\u5728\u8fd0\u884c\uff0c\u5219\u5f3a\u5236\u62a2\u5360\uff0c\u5e76\u5c06\u5176\u79fb\u5230\u961f\u5c3e\u3002</li> <li>\u5173\u952e\u6743\u8861\uff1a\u65f6\u95f4\u7247\u7684\u957f\u5ea6\u81f3\u5173\u91cd\u8981\u3002<ul> <li>\u592a\u77ed\uff1a\u5207\u6362\u8fc7\u4e8e\u9891\u7e41\uff0c\u5927\u90e8\u5206CPU\u65f6\u95f4\u90fd\u6d88\u8017\u5728\u4e0a\u4e0b\u6587\u5207\u6362\u7684\u76f4\u63a5\u5f00\u9500\u4e0a\uff0c\u5bfc\u81f4\u7cfb\u7edf\u541e\u5410\u91cf\u4e0b\u964d\u3002</li> <li>\u592a\u957f\uff1a\u77ed\u5c0f\u7684\u4ea4\u4e92\u5f0f\u4efb\u52a1\u9700\u8981\u7b49\u5f85\u5f88\u4e45\u624d\u80fd\u5f97\u5230\u54cd\u5e94\uff0c\u7cfb\u7edf\u54cd\u5e94\u6027\u53d8\u5dee\u3002\u901a\u5e38\u8bbe\u7f6e\u4e3a20-50\u6beb\u79d2\u662f\u6bd4\u8f83\u7406\u60f3\u7684\u6298\u4e2d\u3002</li> </ul> </li> </ul> </li> <li> <p>\u4f18\u5148\u7ea7\u8c03\u5ea6 (Priority Scheduling)</p> <ul> <li>\u6838\u5fc3\u601d\u60f3\uff1a\u4e3a\u6bcf\u4e2a\u7ebf\u7a0b\u5206\u914d\u4e00\u4e2a\u4f18\u5148\u7ea7\uff0c\u8c03\u5ea6\u5668\u603b\u662f\u9009\u62e9\u5c31\u7eea\u961f\u5217\u4e2d\u4f18\u5148\u7ea7\u6700\u9ad8\u7684\u7ebf\u7a0b\u8fd0\u884c\u3002</li> <li>\u4f18\u5148\u7ea7\u6765\u6e90\uff1a\u53ef\u4ee5\u662f\u9759\u6001\u7684\uff08\u521b\u5efa\u540e\u4e0d\u53d8\uff09\u6216\u52a8\u6001\u7684\uff08\u64cd\u4f5c\u7cfb\u7edf\u6839\u636e\u7ebf\u7a0b\u884c\u4e3a\u8c03\u6574\uff09\u3002</li> <li>\u52a8\u6001\u4f18\u5148\u7ea7\u8c03\u6574\uff08\u8001\u5316 Aging\uff09\uff1a\u4e3a\u9632\u6b62\u9ad8\u4f18\u5148\u7ea7\u7ebf\u7a0b\u6c38\u8fdc\u9738\u5360CPU\u5bfc\u81f4\u4f4e\u4f18\u5148\u7ea7\u7ebf\u7a0b\u201c\u9965\u997f\u201d\uff0c\u7cfb\u7edf\u53ef\u4ee5\u52a8\u6001\u8c03\u6574\u4f18\u5148\u7ea7\u3002\u4f8b\u5982\uff0c\u53ef\u4ee5\u5468\u671f\u6027\u5730\u964d\u4f4e\u5f53\u524d\u8fd0\u884c\u7ebf\u7a0b\u7684\u4f18\u5148\u7ea7\uff0c\u6216\u63d0\u5347\u957f\u65f6\u95f4\u7b49\u5f85\u7684\u7ebf\u7a0b\u7684\u4f18\u5148\u7ea7\u3002\u5bf9\u4e8eI/O\u5bc6\u96c6\u578b\u7ebf\u7a0b\uff0c\u4e00\u79cd\u5e38\u89c1\u7b56\u7565\u662f\u6839\u636e\u5176CPU\u4f7f\u7528\u7387\u52a8\u6001\u63d0\u5347\u5176\u4f18\u5148\u7ea7\uff08\u5982\u8bbe\u4e3a <code>1/f</code>\uff0cf\u4e3a\u4e0a\u4e00\u65f6\u95f4\u7247CPU\u5360\u7528\u6bd4\u4f8b\uff09\uff0c\u8ba9\u5b83\u80fd\u5feb\u901f\u53d1\u8d77\u4e0b\u4e00\u6b21I/O\uff0c\u4ece\u800c\u63d0\u9ad8\u8bbe\u5907\u5229\u7528\u7387\u3002</li> </ul> </li> <li> <p>\u591a\u7ea7\u53cd\u9988\u961f\u5217 (Multi-level Feedback Queues)</p> <ul> <li>\u6838\u5fc3\u601d\u60f3\uff1a\u662f\u8f6e\u8be2\u548c\u4f18\u5148\u7ea7\u8c03\u5ea6\u7684\u7ed3\u5408\u4e0e\u8fdb\u5316\u3002\u7cfb\u7edf\u8bbe\u7f6e\u591a\u4e2a\u5c31\u7eea\u961f\u5217\uff0c\u6bcf\u4e2a\u961f\u5217\u6709\u4e0d\u540c\u7684\u4f18\u5148\u7ea7\u548c\u65f6\u95f4\u7247\u957f\u5ea6\u3002</li> <li>\u8fd0\u4f5c\u65b9\u5f0f\uff1a\u65b0\u7ebf\u7a0b\u9996\u5148\u8fdb\u5165\u6700\u9ad8\u4f18\u5148\u7ea7\u961f\u5217\uff08\u65f6\u95f4\u7247\u6700\u77ed\uff09\u3002\u5982\u679c\u5728\u65f6\u95f4\u7247\u5185\u672a\u5b8c\u6210\uff0c\u5219\u964d\u7ea7\u5230\u4e0b\u4e00\u4e2a\u961f\u5217\uff08\u4f18\u5148\u7ea7\u66f4\u4f4e\uff0c\u65f6\u95f4\u7247\u66f4\u957f\uff09\u3002\u8fd9\u79cd\u673a\u5236\u80fd\u591f\u5f88\u597d\u5730\u6ee1\u8db3\u4e0d\u540c\u7c7b\u578b\u4efb\u52a1\u7684\u9700\u6c42\uff1a\u4ea4\u4e92\u5f0f\u77ed\u4efb\u52a1\u80fd\u5728\u9ad8\u4f18\u5148\u7ea7\u961f\u5217\u4e2d\u5feb\u901f\u5b8c\u6210\uff1b\u800cCPU\u5bc6\u96c6\u578b\u957f\u4efb\u52a1\u5219\u4f1a\u9010\u6e10\u201c\u4e0b\u6c89\u201d\u5230\u4f4e\u4f18\u5148\u7ea7\u961f\u5217\uff0c\u4f7f\u7528\u66f4\u957f\u7684\u65f6\u95f4\u7247\uff0c\u51cf\u5c11\u5207\u6362\u6b21\u6570\u3002</li> </ul> </li> <li> <p>\u516c\u5e73\u5206\u4eab\u8c03\u5ea6 (Fair-Share Scheduling)</p> <ul> <li>\u89e3\u51b3\u95ee\u9898\uff1a\u4f20\u7edf\u8c03\u5ea6\u5668\u53ea\u770b\u7ebf\u7a0b\uff0c\u4e0d\u770b\u7ebf\u7a0b\u7684\u201c\u4e3b\u4eba\u201d\u3002\u5982\u679c\u7528\u6237A\u542f\u52a810\u4e2a\u7ebf\u7a0b\uff0c\u7528\u6237B\u542f\u52a81\u4e2a\uff0c\u7528\u6237A\u5c06\u83b7\u5f9710\u500d\u4e8e\u7528\u6237B\u7684CPU\u65f6\u95f4\u3002</li> <li>\u6838\u5fc3\u601d\u60f3\uff1a\u8c03\u5ea6\u5668\u4ee5\u7528\u6237\u6216\u7528\u6237\u7ec4\u4e3a\u5355\u4f4d\u6765\u5206\u914dCPU\u65f6\u95f4\u3002\u4f8b\u5982\uff0c\u786e\u4fdd\u7528\u6237A\u548c\u7528\u6237B\u5404\u83b7\u5f9750%\u7684CPU\u65f6\u95f4\uff0c\u65e0\u8bba\u4ed6\u4eec\u5404\u81ea\u8fd0\u884c\u4e86\u591a\u5c11\u7ebf\u7a0b\u3002\u73b0\u4ee3Linux\u7684CFS\uff08Completely Fair Scheduler\uff09\u5c31\u662f\u8fd9\u4e00\u601d\u60f3\u7684\u7cbe\u81f4\u5b9e\u73b0\uff0c\u5b83\u901a\u8fc7\u865a\u62df\u8fd0\u884c\u65f6\u95f4\uff08vruntime\uff09\u6765\u4fdd\u8bc1\u6bcf\u4e2a\u4efb\u52a1\u83b7\u5f97\u4e0e\u5176\u6743\u91cd\u6210\u6b63\u6bd4\u7684CPU\u65f6\u95f4\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%BA%BF%E7%A8%8B%E4%B8%8A%E4%B8%8B%E6%96%87%E5%88%87%E6%8D%A2%E4%BB%8B%E7%BB%8D/#2","title":"(2) \u7ebf\u7a0b\u6a21\u578b\u7684\u8c03\u5ea6\u5dee\u5f02","text":"<ul> <li>\u7528\u6237\u7ea7\u7ebf\u7a0b\uff1a\u8c03\u5ea6\u5b8c\u5168\u5728\u7528\u6237\u7a7a\u95f4\u7531\u7ebf\u7a0b\u5e93\u5b8c\u6210\uff0c\u5185\u6838\u6beb\u4e0d\u77e5\u60c5\u3002\u5207\u6362\u901f\u5ea6\u6781\u5feb\uff08\u4ec5\u9700\u51e0\u6761\u6307\u4ee4\u4fdd\u5b58/\u6062\u590d\u5bc4\u5b58\u5668\uff09\uff0c\u4f46\u4e00\u4e2a\u7ebf\u7a0b\u7684\u963b\u585e\uff08\u5982I/O\u8c03\u7528\uff09\u4f1a\u5bfc\u81f4\u6574\u4e2a\u8fdb\u7a0b\u88ab\u5185\u6838\u6302\u8d77\u3002</li> <li>\u5185\u6838\u7ea7\u7ebf\u7a0b\uff1a\u7531\u5185\u6838\u76f4\u63a5\u7ba1\u7406\u548c\u8c03\u5ea6\uff0c\u662f\u73b0\u4ee3\u64cd\u4f5c\u7cfb\u7edf\u7684\u6807\u51c6\u6a21\u578b\u3002\u5207\u6362\u5f00\u9500\u8f83\u5927\uff08\u9700\u8981\u9677\u5165\u5185\u6838\uff09\uff0c\u4f46\u4e00\u4e2a\u7ebf\u7a0b\u7684\u963b\u585e\u4e0d\u5f71\u54cd\u540c\u4e00\u8fdb\u7a0b\u4e2d\u7684\u5176\u4ed6\u7ebf\u7a0b\uff0c\u5e76\u4e14\u53ef\u4ee5\u771f\u6b63\u5229\u7528\u591a\u6838CPU\u5b9e\u73b0\u5e76\u884c\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%BA%BF%E7%A8%8B%E4%B8%8A%E4%B8%8B%E6%96%87%E5%88%87%E6%8D%A2%E4%BB%8B%E7%BB%8D/#linux","title":"Linux\u4e2d\u4e0a\u4e0b\u6587\u5207\u6362\u7684\u5b9e\u73b0\u673a\u5236","text":"<p>\u5728Linux\u4e2d\uff0c\u7ebf\u7a0b\u548c\u8fdb\u7a0b\u90fd\u88ab\u62bd\u8c61\u4e3a\u4efb\u52a1\uff08Task\uff09\uff0c\u7531<code>struct task_struct</code>\u63cf\u8ff0\u3002\u4e0a\u4e0b\u6587\u5207\u6362\u7684\u6838\u5fc3\u7531<code>context_switch()</code>\u51fd\u6570\u9a71\u52a8\uff0c\u4e3b\u8981\u5305\u542b\u4e24\u5927\u90e8\u5206\uff1a</p> <ol> <li> <p>\u5207\u6362\u5185\u5b58\u5730\u5740\u7a7a\u95f4 (<code>switch_mm_irqs_off</code>)</p> <ul> <li>\u5bf9\u4e8e\u4e0d\u540c\u8fdb\u7a0b\u7684\u7ebf\u7a0b\u5207\u6362\uff0c\u5fc5\u987b\u5207\u6362CPU\u7684\u9875\u8868\u57fa\u5730\u5740\u5bc4\u5b58\u5668\uff08x86\u4e2d\u7684CR3\uff09\uff0c\u8ba9MMU\u6307\u5411\u65b0\u8fdb\u7a0b\u7684\u5730\u5740\u7a7a\u95f4\u3002\u8fd9\u662f\u4e00\u4e2a\u9ad8\u5f00\u9500\u64cd\u4f5c\uff0c\u56e0\u4e3a\u5b83\u4f1a\u4f7fTLB\uff08\u5730\u5740\u8f6c\u6362\u65c1\u8def\u7f13\u5b58\uff09\u4e2d\u7684\u5927\u90e8\u5206\u7f13\u5b58\u5931\u6548\u3002</li> <li>\u5bf9\u4e8e\u540c\u4e00\u8fdb\u7a0b\u5185\u7684\u7ebf\u7a0b\u5207\u6362\uff0c\u7531\u4e8e\u5b83\u4eec\u5171\u4eab\u5730\u5740\u7a7a\u95f4\uff0c\u8fd9\u4e00\u6b65\u88ab\u8df3\u8fc7\uff0c\u4ece\u800c\u5927\u5927\u964d\u4f4e\u4e86\u5207\u6362\u6210\u672c\u3002</li> </ul> </li> <li> <p>\u5207\u6362\u5904\u7406\u5668\u72b6\u6001 (<code>switch_to</code>)</p> <ul> <li>\u8fd9\u662f\u5207\u6362\u7684\u6838\u5fc3\uff0c\u901a\u5e38\u7531\u4e00\u5c0f\u6bb5\u4e0e\u4f53\u7cfb\u7ed3\u6784\u9ad8\u5ea6\u76f8\u5173\u7684\u6c47\u7f16\u4ee3\u7801\u5b9e\u73b0\u3002</li> <li>\u4fdd\u5b58\u65e7\u4efb\u52a1\uff1a\u5c06\u5f53\u524d\u4efb\u52a1\uff08prev\uff09\u7684\u5185\u6838\u6808\u6307\u9488\uff08SP\uff09\u4fdd\u5b58\u5230\u5176<code>task_struct-&gt;thread.sp</code>\u5b57\u6bb5\u3002\u7136\u540e\uff0c\u5c06\u88ab\u8c03\u7528\u8005\u4fdd\u5b58\u7684\u5bc4\u5b58\u5668\uff08callee-saved registers, \u5982<code>%ebp, %ebx</code>\u7b49\uff09\u538b\u5165\u5f53\u524d\uff08prev\u7684\uff09\u5185\u6838\u6808\u3002</li> <li>\u52a0\u8f7d\u65b0\u4efb\u52a1\uff1a\u4ece\u4e0b\u4e00\u4e2a\u4efb\u52a1\uff08next\uff09\u7684<code>task_struct-&gt;thread.sp</code>\u4e2d\u52a0\u8f7d\u5176\u5185\u6838\u6808\u6307\u9488\u5230CPU\u7684SP\u5bc4\u5b58\u5668\u3002</li> <li>\u6062\u590d\u65b0\u4efb\u52a1\uff1a\u4ece\u65b0\u7684\u5185\u6838\u6808\u4e2d\u5f39\u51fa\uff08\u6062\u590d\uff09\u4e4b\u524d\u4fdd\u5b58\u7684\u88ab\u8c03\u7528\u8005\u5bc4\u5b58\u5668\u3002</li> <li>\u5207\u6362\u6267\u884c\u6d41\uff08\u9690\u5f0f\uff09\uff1a<code>switch_to</code>\u7684\u5de7\u5999\u4e4b\u5904\u5728\u4e8e\u5b83\u4e0d\u76f4\u63a5\u4fdd\u5b58\u548c\u6062\u590d\u6307\u4ee4\u6307\u9488\uff08IP\uff09\u3002\u5b83\u901a\u8fc7<code>jmp</code>\u6307\u4ee4\u8df3\u8f6c\u5230<code>__switch_to</code>\u51fd\u6570\u3002\u5f53\u8be5\u51fd\u6570\u6700\u7ec8\u8fd4\u56de\u65f6\uff0c<code>ret</code>\u6307\u4ee4\u4f1a\u4ece\u65b0\u7684\u5185\u6838\u6808\u4e0a\u5f39\u51fa\u8fd4\u56de\u5730\u5740\uff0c\u8fd9\u4e2a\u5730\u5740\u6b63\u662f\u65b0\u4efb\u52a1\uff08next\uff09\u4e0a\u6b21\u88ab\u4e2d\u65ad\u7684\u5730\u65b9\u3002\u8fd9\u6837\uff0c\u6267\u884c\u6d41\u5c31\u81ea\u7136\u5730\u8f6c\u79fb\u5230\u4e86\u65b0\u4efb\u52a1\u4e0a\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%BA%BF%E7%A8%8B%E4%B8%8A%E4%B8%8B%E6%96%87%E5%88%87%E6%8D%A2%E4%BB%8B%E7%BB%8D/#_4","title":"\u4e0a\u4e0b\u6587\u5207\u6362\u7684\u5f00\u9500","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%BA%BF%E7%A8%8B%E4%B8%8A%E4%B8%8B%E6%96%87%E5%88%87%E6%8D%A2%E4%BB%8B%E7%BB%8D/#1_1","title":"(1) \u76f4\u63a5\u5f00\u9500","text":"<ul> <li>\u5bc4\u5b58\u5668\u72b6\u6001\u5b58\u53d6\uff1a\u8bfb\u5199\u5185\u5b58\u4ee5\u4fdd\u5b58\u548c\u6062\u590d\u51e0\u5341\u4e2aCPU\u5bc4\u5b58\u5668\u3002\u7279\u522b\u662f\u4f53\u79ef\u5e9e\u5927\u7684FPU/AVX\u5bc4\u5b58\u5668\uff0c\u8bfb\u5199\u5ef6\u8fdf\u663e\u8457\u3002</li> <li>\u5185\u6838\u4ee3\u7801\u6267\u884c\uff1a\u8fd0\u884c\u8c03\u5ea6\u5668\u7b97\u6cd5\u3001\u66f4\u65b0\u4efb\u52a1\u72b6\u6001\u3001\u7ef4\u62a4\u8fd0\u884c\u961f\u5217\u7b49\u7ba1\u7406\u64cd\u4f5c\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%BA%BF%E7%A8%8B%E4%B8%8A%E4%B8%8B%E6%96%87%E5%88%87%E6%8D%A2%E4%BB%8B%E7%BB%8D/#2_1","title":"(2) \u95f4\u63a5\u5f00\u9500","text":"<ul> <li>CPU\u9ad8\u901f\u7f13\u5b58\u5931\u6548 (Cache Miss)\uff1a\u5f53\u5207\u6362\u5230\u65b0\u7ebf\u7a0b\u540e\uff0c\u5176\u5de5\u4f5c\u6570\u636e\uff08\u4ee3\u7801\u548c\u53d8\u91cf\uff09\u5f88\u53ef\u80fd\u4e0d\u5728CPU\u7684L1/L2/L3\u7f13\u5b58\u4e2d\u3002CPU\u5fc5\u987b\u4ece\u901f\u5ea6\u6162\u5f97\u591a\u7684\u4e3b\u5185\u5b58\u4e2d\u91cd\u65b0\u52a0\u8f7d\u6570\u636e\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u4f1a\u5bfc\u81f4\u5927\u91cf\u7684\u7f13\u5b58\u7f3a\u5931\uff08Cache Miss\uff09\uff0c\u4f7fCPU\u5904\u4e8e\u7b49\u5f85\u72b6\u6001\uff0c\u4e25\u91cd\u5f71\u54cd\u6267\u884c\u6548\u7387\u3002</li> <li>TLB\u5931\u6548 (TLB Miss)\uff1aTLB\u662f\u7528\u4e8e\u52a0\u901f\u865a\u62df\u5730\u5740\u5230\u7269\u7406\u5730\u5740\u8f6c\u6362\u7684\u7f13\u5b58\u3002\u8de8\u8fdb\u7a0b\u5207\u6362\u4f1a\u5bfc\u81f4TLB\u88ab\u5237\u65b0\u6216\u5927\u91cf\u5931\u6548\uff0c\u4f7f\u5f97\u65b0\u7ebf\u7a0b\u7684\u6bcf\u6b21\u5185\u5b58\u8bbf\u95ee\u90fd\u53ef\u80fd\u9700\u8981\u6162\u901f\u5730\u67e5\u8be2\u591a\u7ea7\u9875\u8868\uff0c\u9020\u6210\u663e\u8457\u5ef6\u8fdf\u3002PCID\uff08\u8fdb\u7a0b\u4e0a\u4e0b\u6587\u6807\u8bc6\u7b26\uff09\u6280\u672f\u53ef\u4ee5\u7f13\u89e3\u4f46\u65e0\u6cd5\u5b8c\u5168\u6d88\u9664\u6b64\u95ee\u9898\u3002</li> <li>\u5206\u652f\u9884\u6d4b\u5668\u5931\u6548\uff1a\u73b0\u4ee3CPU\u901a\u8fc7\u5206\u652f\u9884\u6d4b\u6765\u907f\u514d\u6d41\u6c34\u7ebf\u505c\u987f\u3002\u5207\u6362\u5230\u65b0\u7ebf\u7a0b\u540e\uff0c\u5176\u4ee3\u7801\u6267\u884c\u8def\u5f84\u4e0e\u65e7\u7ebf\u7a0b\u4e0d\u540c\uff0c\u4f1a\u5bfc\u81f4\u5206\u652f\u9884\u6d4b\u5668\u7f13\u5b58\u7684\u6a21\u5f0f\u5931\u6548\uff0c\u9884\u6d4b\u51c6\u786e\u7387\u9aa4\u964d\uff0c\u8fdb\u800c\u964d\u4f4eCPU\u7684\u6307\u4ee4\u6267\u884c\u6548\u7387\u3002</li> </ul> <p>\u6839\u636e\u91cf\u5316\u6570\u636e\uff0c\u4e00\u6b21\u7b80\u5355\u7684\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362\uff08\u6709CPU\u4eb2\u548c\u6027\uff09\u8017\u65f6\u7ea6 1.2\u5fae\u79d2\u3002\u5728\u8fd9\u6bb5\u65f6\u95f4\u91cc\uff0c\u4e00\u9897\u73b0\u4ee3CPU\u8db3\u4ee5\u6267\u884c\u6570\u4e07\u751a\u81f3\u6570\u5341\u4e07\u6761\u6307\u4ee4\u3002\u8fd9\u610f\u5473\u7740\uff0c\u9ad8\u9891\u7684\u4e0a\u4e0b\u6587\u5207\u6362\u662f\u5728\u201c\u65e0\u8c13\u5730\u201d\u6d6a\u8d39\u5b9d\u8d35\u7684\u8ba1\u7b97\u8d44\u6e90\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%BA%BF%E7%A8%8B%E4%B8%8A%E4%B8%8B%E6%96%87%E5%88%87%E6%8D%A2%E4%BB%8B%E7%BB%8D/#_5","title":"\u5982\u4f55\u51cf\u5c11\u4e0a\u4e0b\u6587\u5207\u6362\u7684\u5f71\u54cd","text":"<ol> <li> <p>\u51cf\u5c11\u5207\u6362\u9891\u7387</p> <ul> <li>\u65e0\u9501/\u9501\u65e0\u5173\u7f16\u7a0b\uff1a\u4f7f\u7528CAS\uff08Compare-And-Swap\uff09\u539f\u5b50\u64cd\u4f5c\u548c\u65e0\u9501\u6570\u636e\u7ed3\u6784\uff0c\u907f\u514d\u56e0\u9501\u7ade\u4e89\u5bfc\u81f4\u7684\u7ebf\u7a0b\u963b\u585e\u3002</li> <li>\u4f7f\u7528\u534f\u7a0b\uff08\u7528\u6237\u6001\u7ebf\u7a0b\uff09\uff1a\u5728\u7528\u6237\u7a7a\u95f4\u8fdb\u884c\u4efb\u52a1\u8c03\u5ea6\uff0c\u5207\u6362\u6210\u672c\u6781\u4f4e\uff08\u4ec5\u4fdd\u5b58\u51e0\u4e2a\u5173\u952e\u5bc4\u5b58\u5668\uff0c\u7eb3\u79d2\u7ea7\uff09\uff0c\u4e14\u4e0d\u6d89\u53ca\u5185\u6838\u6001\u8f6c\u6362\u548c\u7f13\u5b58\u5931\u6548\u3002Go\u8bed\u8a00\u7684Goroutine\u662f\u5176\u5178\u8303\u3002</li> <li>\u5408\u7406\u914d\u7f6e\u7ebf\u7a0b\u6c60\uff1a\u6839\u636e\u4efb\u52a1\u7c7b\u578b\uff08CPU\u5bc6\u96c6\u578b vs I/O\u5bc6\u96c6\u578b\uff09\u8bbe\u7f6e\u5408\u9002\u7684\u7ebf\u7a0b\u6570\u91cf\uff0c\u907f\u514d\u521b\u5efa\u5927\u91cf\u975e\u5fc5\u8981\u7684\u7ebf\u7a0b\uff0c\u5bfc\u81f4\u8fc7\u5ea6\u8c03\u5ea6\u3002</li> <li>\u6279\u5904\u7406\u4e0e\u5408\u5e76\uff1a\u5c06\u591a\u4e2a\u5c0f\u4efb\u52a1\u6253\u5305\u6210\u4e00\u4e2a\u5927\u4efb\u52a1\u6267\u884c\uff0c\u51cf\u5c11\u8c03\u5ea6\u5355\u5143\u7684\u6570\u91cf\u3002</li> </ul> </li> <li> <p>\u964d\u4f4e\u5355\u6b21\u5207\u6362\u6210\u672c</p> <ul> <li>CPU\u4eb2\u548c\u6027\uff08CPU Affinity\uff09\uff1a\u5c06\u7ebf\u7a0b\u7ed1\u5b9a\u5230\u7279\u5b9a\u7684CPU\u6838\u5fc3\u4e0a\u8fd0\u884c\u3002\u8fd9\u80fd\u6781\u5927\u5730\u63d0\u9ad8\u7f13\u5b58\u547d\u4e2d\u7387\uff0c\u56e0\u4e3a\u7ebf\u7a0b\u7684\u70ed\u6570\u636e\u4f1a\u6301\u7eed\u4fdd\u7559\u5728\u8be5\u6838\u5fc3\u7684\u7f13\u5b58\u4e2d\uff0c\u6709\u6548\u964d\u4f4e\u4e86\u95f4\u63a5\u5f00\u9500\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E8%87%AA%E6%97%8B%E9%94%81%E6%98%AF%E4%BB%80%E4%B9%88/","title":"\u81ea\u65cb\u9501\u662f\u4ec0\u4e48","text":"<p>\u81ea\u65cb\u9501\uff08Spinlock\uff09\u662f\u4e00\u79cd\u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e2d\u7528\u4e8e\u4fdd\u62a4\u5171\u4eab\u8d44\u6e90\u7684\u5e95\u5c42\u540c\u6b65\u673a\u5236\u3002\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u5c1d\u8bd5\u83b7\u53d6\u4e00\u4e2a\u5df2\u7ecf\u88ab\u5176\u4ed6\u7ebf\u7a0b\u6301\u6709\u7684\u81ea\u65cb\u9501\u65f6\uff0c\u8be5\u7ebf\u7a0b\u4e0d\u4f1a\u88ab\u6302\u8d77\uff08\u5373\u8fdb\u5165\u7761\u7720\u72b6\u6001\uff09\uff0c\u800c\u662f\u4f1a\u6301\u7eed\u5730\u5728\u4e00\u4e2a\u5faa\u73af\u4e2d\u201c\u65cb\u8f6c\u201d\uff0c\u53cd\u590d\u68c0\u67e5\u9501\u662f\u5426\u5df2\u7ecf\u91ca\u653e\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u88ab\u79f0\u4e3a\u201c\u5fd9\u7b49\u5f85\u201d\uff08busy-waiting\uff09\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E8%87%AA%E6%97%8B%E9%94%81%E6%98%AF%E4%BB%80%E4%B9%88/#_1","title":"\u5de5\u4f5c\u539f\u7406","text":"<p>\u81ea\u65cb\u9501\u7684\u6838\u5fc3\u601d\u60f3\u662f\uff0c\u5982\u679c\u6301\u6709\u9501\u7684\u7ebf\u7a0b\u80fd\u591f\u975e\u5e38\u8fc5\u901f\u5730\u91ca\u653e\u9501\uff0c\u90a3\u4e48\u7b49\u5f85\u83b7\u53d6\u9501\u7684\u7ebf\u7a0b\u5c31\u4e0d\u9700\u8981\u8fdb\u884c\u6602\u8d35\u7684\u4e0a\u4e0b\u6587\u5207\u6362\uff08\u4ece\u7528\u6237\u6001\u5207\u6362\u5230\u5185\u6838\u6001\u5e76\u88ab\u6302\u8d77\uff09\uff0c\u800c\u662f\u53ef\u4ee5\u82b1\u8d39\u5c11\u91cfCPU\u65f6\u95f4\u8fdb\u884c\u201c\u81ea\u65cb\u201d\u7b49\u5f85\u3002 \u8fd9\u6837\u53ef\u4ee5\u907f\u514d\u7ebf\u7a0b\u8c03\u5ea6\u548c\u4e0a\u4e0b\u6587\u5207\u6362\u5e26\u6765\u7684\u5f00\u9500\uff0c\u56e0\u6b64\u5728\u9501\u88ab\u5360\u7528\u65f6\u95f4\u6781\u77ed\u7684\u573a\u666f\u4e0b\uff0c\u81ea\u65cb\u9501\u7684\u6548\u7387\u975e\u5e38\u9ad8\u3002</p> <p>\u81ea\u65cb\u9501\u7684\u5b9e\u73b0\u901a\u5e38\u4f9d\u8d56\u4e8e\u539f\u5b50\u64cd\u4f5c\uff0c\u4f8b\u5982\u201c\u6bd4\u8f83\u5e76\u4ea4\u6362\u201d\uff08Compare-and-Swap, CAS\uff09\u3002 CAS\u64cd\u4f5c\u5305\u542b\u4e09\u4e2a\u53c2\u6570\uff1a\u5185\u5b58\u4f4d\u7f6e\u3001\u9884\u671f\u539f\u503c\u548c\u65b0\u503c\u3002\u53ea\u6709\u5f53\u5185\u5b58\u4f4d\u7f6e\u7684\u5f53\u524d\u503c\u4e0e\u9884\u671f\u539f\u503c\u76f8\u540c\u65f6\uff0c\u624d\u4f1a\u539f\u5b50\u5730\u5c06\u8be5\u4f4d\u7f6e\u7684\u503c\u66f4\u65b0\u4e3a\u65b0\u503c\u3002 \u8fd9\u4fdd\u8bc1\u4e86\u5728\u68c0\u67e5\u548c\u83b7\u53d6\u9501\u7684\u6574\u4e2a\u8fc7\u7a0b\u4e2d\u4e0d\u4f1a\u88ab\u4e2d\u65ad\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E8%87%AA%E6%97%8B%E9%94%81%E6%98%AF%E4%BB%80%E4%B9%88/#_2","title":"\u4f18\u7f3a\u70b9","text":"<p>\u4f18\u70b9:</p> <ul> <li>\u9ad8\u6548\u7387\uff1a \u5bf9\u4e8e\u9501\u5360\u7528\u65f6\u95f4\u975e\u5e38\u77ed\u7684\u60c5\u51b5\uff0c\u81ea\u65cb\u9501\u907f\u514d\u4e86\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362\u7684\u5de8\u5927\u5f00\u9500\uff0c\u54cd\u5e94\u901f\u5ea6\u5feb\uff0c\u53ef\u4ee5\u663e\u8457\u63d0\u9ad8\u6027\u80fd\u3002</li> <li>\u5b9e\u73b0\u7b80\u5355\uff1a \u76f8\u8f83\u4e8e\u5176\u4ed6\u9501\u673a\u5236\uff08\u5982\u4e92\u65a5\u9501\uff09\uff0c\u81ea\u65cb\u9501\u7684\u5e95\u5c42\u5b9e\u73b0\u66f4\u4e3a\u7b80\u5355\u3002</li> </ul> <p>\u7f3a\u70b9:</p> <ul> <li>\u6d88\u8017CPU\u8d44\u6e90\uff1a \u5982\u679c\u9501\u88ab\u957f\u65f6\u95f4\u5360\u7528\uff0c\u5904\u4e8e\u81ea\u65cb\u7b49\u5f85\u7684\u7ebf\u7a0b\u4f1a\u6301\u7eed\u5360\u7528CPU\u65f6\u95f4\u8fdb\u884c\u65e0\u6548\u7684\u5faa\u73af\u68c0\u67e5\uff0c\u9020\u6210CPU\u8d44\u6e90\u6d6a\u8d39\u3002</li> <li>\u53ef\u80fd\u5bfc\u81f4\u6b7b\u9501\uff1a \u9012\u5f52\u5730\u83b7\u53d6\u540c\u4e00\u4e2a\u4e0d\u53ef\u91cd\u5165\u7684\u81ea\u65cb\u9501\u4f1a\u5bfc\u81f4\u6b7b\u9501\uff0c\u5373\u7ebf\u7a0b\u4f1a\u6c38\u8fdc\u201c\u81ea\u65cb\u201d\u7b49\u5f85\u81ea\u5df1\u91ca\u653e\u9501\u3002</li> <li>\u4e0d\u9002\u7528\u4e8e\u5355\u6838\u5904\u7406\u5668\uff1a \u5728\u5355\u6838\u5904\u7406\u5668\u4e0a\uff0c\u4e00\u4e2a\u7ebf\u7a0b\u5728\u81ea\u65cb\u7b49\u5f85\u65f6\uff0c\u6301\u6709\u9501\u7684\u7ebf\u7a0b\u65e0\u6cd5\u83b7\u5f97CPU\u65f6\u95f4\u6765\u6267\u884c\u5e76\u91ca\u653e\u9501\u3002\u56e0\u6b64\uff0c\u81ea\u65cb\u9501\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u6ca1\u6709\u610f\u4e49\uff0c\u53ea\u4f1a\u767d\u767d\u6d6a\u8d39CPU\u5468\u671f\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E8%87%AA%E6%97%8B%E9%94%81%E6%98%AF%E4%BB%80%E4%B9%88/#mutex","title":"\u81ea\u65cb\u9501\u4e0e\u4e92\u65a5\u9501\uff08Mutex\uff09\u7684\u6bd4\u8f83","text":"<p>\u81ea\u65cb\u9501\u548c\u4e92\u65a5\u9501\u90fd\u662f\u4e3a\u4e86\u4fdd\u62a4\u5171\u4eab\u8d44\u6e90\uff0c\u4f46\u5b83\u4eec\u5728\u7ebf\u7a0b\u7b49\u5f85\u9501\u65f6\u7684\u884c\u4e3a\u4e0d\u540c\uff1a</p> <ul> <li>\u81ea\u65cb\u9501: \u83b7\u53d6\u9501\u5931\u8d25\u7684\u7ebf\u7a0b\u4f1a\u8fdb\u5165\u5fd9\u7b49\u5f85\u72b6\u6001\uff0c\u6301\u7eed\u5360\u7528CPU\u3002</li> <li>\u4e92\u65a5\u9501: \u83b7\u53d6\u9501\u5931\u8d25\u7684\u7ebf\u7a0b\u4f1a\u88ab\u7f6e\u4e8e\u7761\u7720\u72b6\u6001\uff0c\u7531\u64cd\u4f5c\u7cfb\u7edf\u8c03\u5ea6\uff0c\u76f4\u5230\u9501\u88ab\u91ca\u653e\u65f6\u518d\u5c06\u5176\u5524\u9192\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u6d89\u53ca\u5230\u4e0a\u4e0b\u6587\u5207\u6362\u3002</li> </ul> <p>\u5982\u4f55\u9009\u62e9\uff1f</p> <ul> <li>\u5982\u679c\u9884\u8ba1\u7ebf\u7a0b\u6301\u6709\u9501\u7684\u65f6\u95f4\u975e\u5e38\u77ed\uff08\u901a\u5e38\u662f\u51e0\u4e2a\u6307\u4ee4\u5468\u671f\uff09\uff0c\u5e76\u4e14\u5728\u591a\u6838\u5904\u7406\u5668\u4e0a\u8fd0\u884c\u65f6\uff0c\u4f7f\u7528\u81ea\u65cb\u9501\u662f\u66f4\u4f18\u7684\u9009\u62e9\u3002</li> <li>\u5982\u679c\u7ebf\u7a0b\u6301\u6709\u9501\u7684\u65f6\u95f4\u53ef\u80fd\u8f83\u957f\uff0c\u6216\u8005\u5728\u6301\u6709\u9501\u671f\u95f4\u53ef\u80fd\u4f1a\u53d1\u751f\u963b\u585e\uff08\u5982\u8fdb\u884cI/O\u64cd\u4f5c\uff09\uff0c\u5219\u5e94\u8be5\u4f7f\u7528\u4e92\u65a5\u9501\uff0c\u4ee5\u907f\u514d\u6d6a\u8d39CPU\u8d44\u6e90\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E8%87%AA%E6%97%8B%E9%94%81%E6%98%AF%E4%BB%80%E4%B9%88/#java","title":"Java\u5b9e\u73b0","text":"<p>\u5728Java\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u5229\u7528<code>java.util.concurrent.atomic</code>\u5305\u4e2d\u7684\u539f\u5b50\u7c7b\u6765\u65b9\u4fbf\u5730\u5b9e\u73b0\u4e00\u4e2a\u7b80\u5355\u7684\u81ea\u65cb\u9501\u3002 <code>AtomicReference</code>\u7c7b\u63d0\u4f9b\u4e86<code>compareAndSet</code>\u65b9\u6cd5\uff0c\u53ef\u4ee5\u539f\u5b50\u5730\u66f4\u65b0\u5bf9\u8c61\u7684\u5f15\u7528\u3002</p> <p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u3001\u4e0d\u53ef\u91cd\u5165\u7684\u81ea\u65cb\u9501\u5b9e\u73b0\uff1a</p> <pre><code>import java.util.concurrent.atomic.AtomicReference;\n\npublic class SpinLock {\n\n    // \u4f7f\u7528AtomicReference\u6765\u6301\u6709\u5f53\u524d\u5360\u7528\u9501\u7684\u7ebf\u7a0b\n    private final AtomicReference&lt;Thread&gt; owner = new AtomicReference&lt;&gt;();\n\n    public void lock() {\n        Thread currentThread = Thread.currentThread();\n        // \u5982\u679c\u9501\u672a\u88ab\u6301\u6709\uff08owner\u4e3anull\uff09\uff0c\u5219\u5c1d\u8bd5\u5c06owner\u8bbe\u7f6e\u4e3a\u5f53\u524d\u7ebf\u7a0b\n        // \u5982\u679c\u8bbe\u7f6e\u5931\u8d25\uff0c\u8bf4\u660e\u9501\u5df2\u88ab\u5176\u4ed6\u7ebf\u7a0b\u6301\u6709\uff0c\u8fdb\u5165\u5faa\u73af\u7b49\u5f85\n        while (!owner.compareAndSet(null, currentThread)) {\n            // \u5fd9\u7b49\u5f85\uff0c\u53ef\u4ee5\u52a0\u5165\u4e00\u4e9b\u903b\u8f91\u907f\u514d\u8fc7\u4e8e\u5bc6\u96c6\u7684\u5faa\u73af\n            // \u4f8b\u5982\uff1aThread.yield();\n        }\n    }\n\n    public void unlock() {\n        Thread currentThread = Thread.currentThread();\n        // \u53ea\u6709\u6301\u6709\u9501\u7684\u7ebf\u7a0b\u624d\u80fd\u91ca\u653e\u9501\n        // \u5c06owner\u8bbe\u7f6e\u56denull\uff0c\u8868\u793a\u9501\u5df2\u91ca\u653e\n        owner.compareAndSet(currentThread, null);\n    }\n}\n</code></pre>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E4%BB%8B%E7%BB%8D/","title":"\u865a\u62df\u5185\u5b58\u4ecb\u7ecd","text":"<p>\u865a\u62df\u5185\u5b58\uff08Virtual Memory\uff09\u662f\u4e00\u79cd\u8ba1\u7b97\u673a\u7cfb\u7edf\u5185\u5b58\u7ba1\u7406\u6280\u672f\uff0c\u5b83\u4e3a\u5e94\u7528\u7a0b\u5e8f\u63d0\u4f9b\u4e86\u4e00\u79cd\u201c\u7406\u60f3\u5316\u7684\u3001\u62bd\u8c61\u7684\u5b58\u50a8\u8d44\u6e90\u201d\uff0c\u4ece\u800c\u201c\u7ed9\u7528\u6237\u8425\u9020\u51fa\u62e5\u6709\u4e00\u4e2a\u975e\u5e38\u5927\u7684\uff08\u4e3b\uff09\u5185\u5b58\u7684\u5047\u8c61\u201d\u3002\u7b80\u800c\u8a00\u4e4b\uff0c\u5b83\u5141\u8bb8\u7a0b\u5e8f\u8fd0\u884c\u5728\u6bd4\u5b9e\u9645\u7269\u7406\u5185\u5b58\uff08RAM\uff09\u66f4\u5927\u7684\u5730\u5740\u7a7a\u95f4\u4e2d\uff0c\u5e76\u4e14\u7b80\u5316\u4e86\u5185\u5b58\u7ba1\u7406\uff0c\u63d0\u9ad8\u4e86\u7cfb\u7edf\u7684\u5b89\u5168\u6027\u548c\u591a\u4efb\u52a1\u5904\u7406\u80fd\u529b\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E4%BB%8B%E7%BB%8D/#_1","title":"\u4ec0\u4e48\u662f\u865a\u62df\u5185\u5b58\uff1f","text":"<p>\u865a\u62df\u5185\u5b58\u901a\u8fc7\u7ed3\u5408\u786c\u4ef6\u548c\u8f6f\u4ef6\uff0c\u5c06\u7a0b\u5e8f\u4f7f\u7528\u7684\u5185\u5b58\u5730\u5740\uff08\u79f0\u4e3a\u865a\u62df\u5730\u5740\uff09\u6620\u5c04\u5230\u8ba1\u7b97\u673a\u5185\u5b58\u4e2d\u7684\u7269\u7406\u5730\u5740\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u7a0b\u5e8f\u6216\u4efb\u52a1\u800c\u8a00\uff0c\u4e3b\u5b58\u50a8\u5668\u8868\u73b0\u4e3a\u4e00\u4e2a\u8fde\u7eed\u7684\u5730\u5740\u7a7a\u95f4\uff0c\u4eff\u4f5b\u5b83\u62e5\u6709\u4e86\u5168\u90e8\u7684\u5185\u5b58\uff0c\u800c\u65e0\u9700\u5173\u5fc3\u5b9e\u9645\u7684\u7269\u7406\u5185\u5b58\u662f\u5982\u4f55\u788e\u7247\u5316\u6216\u88ab\u5176\u4ed6\u7a0b\u5e8f\u5360\u7528\u7684\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E4%BB%8B%E7%BB%8D/#_2","title":"\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528\u865a\u62df\u5185\u5b58\uff1f","text":"<p>\u865a\u62df\u5185\u5b58\u7684\u5f15\u5165\u89e3\u51b3\u4e86\u73b0\u4ee3\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u7684\u51e0\u4e2a\u5173\u952e\u95ee\u9898\uff1a 1.  \u7a81\u7834\u7269\u7406\u5185\u5b58\u9650\u5236\uff1a \u5141\u8bb8\u7a0b\u5e8f\u8fd0\u884c\u5728\u6bd4\u5b9e\u9645\u7269\u7406RAM\u66f4\u5927\u7684\u5185\u5b58\u7a7a\u95f4\u4e2d\u3002\u5f53\u7269\u7406\u5185\u5b58\u4e0d\u8db3\u65f6\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u5c06\u4e0d\u5e38\u7528\u7684\u6570\u636e\u4eceRAM\u4e34\u65f6\u79fb\u52a8\u5230\u786c\u76d8\u4e0a\u7684\u4e00\u4e2a\u7279\u6b8a\u533a\u57df\uff08\u79f0\u4e3a\u4ea4\u6362\u7a7a\u95f4\u3001\u5206\u9875\u6587\u4ef6\u6216\u865a\u62df\u5185\u5b58\u6587\u4ef6\uff09\u3002 2.  \u591a\u4efb\u52a1\u5904\u7406\uff1a \u652f\u6301\u540c\u65f6\u8fd0\u884c\u591a\u4e2a\u5927\u578b\u5e94\u7528\u7a0b\u5e8f\uff0c\u5373\u4f7f\u8fd9\u4e9b\u5e94\u7528\u7a0b\u5e8f\u7684\u603b\u5185\u5b58\u9700\u6c42\u8d85\u8fc7\u4e86\u7269\u7406RAM\u7684\u603b\u91cf\u3002\u64cd\u4f5c\u7cfb\u7edf\u53ea\u52a0\u8f7d\u7a0b\u5e8f\u4e2d\u9700\u8981\u7acb\u5373\u6267\u884c\u7684\u90e8\u5206\u5230RAM\uff0c\u800c\u5c06\u5176\u4ed6\u90e8\u5206\u653e\u5728\u786c\u76d8\u4e0a\uff0c\u6309\u9700\u52a0\u8f7d\u3002 3.  \u5185\u5b58\u9694\u79bb\u4e0e\u4fdd\u62a4\uff1a \u4e3a\u6bcf\u4e2a\u8fdb\u7a0b\u5206\u914d\u72ec\u7acb\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\u3002\u8fd9\u610f\u5473\u7740\u4e00\u4e2a\u7a0b\u5e8f\u65e0\u6cd5\u968f\u610f\u8bbf\u95ee\u53e6\u4e00\u4e2a\u7a0b\u5e8f\u7684\u5185\u5b58\uff0c\u4ece\u800c\u63d0\u9ad8\u4e86\u7cfb\u7edf\u7684\u5b89\u5168\u6027\u548c\u7a33\u5b9a\u6027\uff0c\u9632\u6b62\u4e00\u4e2a\u7a0b\u5e8f\u7684\u9519\u8bef\u5f71\u54cd\u5230\u5176\u4ed6\u7a0b\u5e8f\u6216\u64cd\u4f5c\u7cfb\u7edf\u3002 4.  \u7b80\u5316\u5185\u5b58\u7ba1\u7406\uff1a \u5e94\u7528\u7a0b\u5e8f\u65e0\u9700\u5173\u5fc3\u7269\u7406\u5185\u5b58\u7684\u5b9e\u9645\u5e03\u5c40\u6216\u788e\u7247\u5316\u95ee\u9898\u3002\u64cd\u4f5c\u7cfb\u7edf\u8d1f\u8d23\u7ba1\u7406\u865a\u62df\u5730\u5740\u5230\u7269\u7406\u5730\u5740\u7684\u6620\u5c04\uff0c\u7b80\u5316\u4e86\u7a0b\u5e8f\u7684\u7f16\u5199\u548c\u79fb\u690d\u3002 5.  \u5185\u5b58\u5171\u4eab\uff1a \u5141\u8bb8\u591a\u4e2a\u8fdb\u7a0b\u5171\u4eab\u540c\u4e00\u4e2a\u7269\u7406\u5185\u5b58\u533a\u57df\uff0c\u4f8b\u5982\u5171\u4eab\u5e93\u6587\u4ef6\uff0c\u4ece\u800c\u8282\u7701\u4e86\u7269\u7406\u5185\u5b58\u7684\u4f7f\u7528\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E4%BB%8B%E7%BB%8D/#_3","title":"\u865a\u62df\u5185\u5b58\u7684\u5173\u952e\u7ec4\u4ef6\u548c\u5de5\u4f5c\u539f\u7406","text":"<p>\u865a\u62df\u5185\u5b58\u7684\u5b9e\u73b0\u4f9d\u8d56\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u548c\u7279\u5b9a\u7684\u786c\u4ef6\u652f\u6301\uff0c\u4e3b\u8981\u662f\u5185\u5b58\u7ba1\u7406\u5355\u5143\uff08MMU\uff09\u3002</p> <ul> <li>\u865a\u62df\u5730\u5740\u7a7a\u95f4 (Virtual Address Space)\uff1a \u8fd9\u662f\u7a0b\u5e8f\u201c\u770b\u5230\u201d\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u5b83\u662f\u4e00\u4e2a\u903b\u8f91\u4e0a\u7684\u8fde\u7eed\u5730\u5740\u8303\u56f4\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u81ea\u5df1\u72ec\u7acb\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\u3002</li> <li>\u7269\u7406\u5730\u5740\u7a7a\u95f4 (Physical Address Space)\uff1a \u8fd9\u662f\u8ba1\u7b97\u673a\u5b9e\u9645\u7684RAM\u786c\u4ef6\u5730\u5740\u3002</li> <li>\u5185\u5b58\u7ba1\u7406\u5355\u5143 (MMU)\uff1a \u901a\u5e38\u96c6\u6210\u5728CPU\u4e2d\uff0c\u8d1f\u8d23\u5728CPU\u751f\u6210\u865a\u62df\u5730\u5740\u65f6\uff0c\u5c06\u5176\u81ea\u52a8\u7ffb\u8bd1\u6210\u7269\u7406\u5730\u5740\u3002</li> <li>\u9875 (Pages) \u548c \u9875\u5e27 (Frames)\uff1a \u4e3a\u4e86\u9ad8\u6548\u7ba1\u7406\uff0c\u865a\u62df\u5185\u5b58\u548c\u7269\u7406\u5185\u5b58\u90fd\u88ab\u5206\u5272\u6210\u56fa\u5b9a\u5927\u5c0f\u7684\u5757\u3002\u865a\u62df\u5730\u5740\u7a7a\u95f4\u4e2d\u7684\u5757\u79f0\u4e3a\u201c\u9875\u201d\uff0c\u7269\u7406\u5185\u5b58\u4e2d\u7684\u5757\u79f0\u4e3a\u201c\u9875\u5e27\u201d\uff08\u6216\u201c\u5757\u201d\uff09\u3002\u73b0\u4ee3\u7cfb\u7edf\u4e2d\u7684\u9875\u5927\u5c0f\u901a\u5e38\u81f3\u5c11\u4e3a4KB\u3002</li> <li>\u9875\u8868 (Page Table)\uff1a \u64cd\u4f5c\u7cfb\u7edf\u4e3a\u6bcf\u4e2a\u8fdb\u7a0b\u7ef4\u62a4\u4e00\u4e2a\u9875\u8868\uff0c\u5b83\u662f\u4e00\u4e2a\u6570\u636e\u7ed3\u6784\uff0c\u8bb0\u5f55\u4e86\u865a\u62df\u9875\u4e0e\u7269\u7406\u9875\u5e27\u4e4b\u95f4\u7684\u6620\u5c04\u5173\u7cfb\u3002MMU\u4f7f\u7528\u8fd9\u4e2a\u9875\u8868\u6765\u5b8c\u6210\u5730\u5740\u7ffb\u8bd1\u3002</li> <li>\u4ea4\u6362\u7a7a\u95f4 (Swap Space / Paging File)\uff1a \u8fd9\u662f\u786c\u76d8\u4e0a\u9884\u7559\u7684\u4e00\u5757\u533a\u57df\uff0c\u7528\u4e8e\u4e34\u65f6\u5b58\u50a8\u90a3\u4e9b\u5f53\u524d\u4e0d\u5728\u7269\u7406RAM\u4e2d\u7684\u865a\u62df\u9875\u3002</li> <li>\u7f3a\u9875\u4e2d\u65ad (Page Fault)\uff1a \u5f53\u7a0b\u5e8f\u8bd5\u56fe\u8bbf\u95ee\u4e00\u4e2a\u865a\u62df\u5730\u5740\uff0c\u4f46\u8be5\u5730\u5740\u5bf9\u5e94\u7684\u9875\u5f53\u524d\u4e0d\u5728\u7269\u7406\u5185\u5b58\u4e2d\u65f6\uff0cMMU\u4f1a\u89e6\u53d1\u4e00\u4e2a\u201c\u7f3a\u9875\u4e2d\u65ad\u201d\u3002\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u4ecb\u5165\uff0c\u4ece\u4ea4\u6362\u7a7a\u95f4\u5c06\u6240\u9700\u7684\u9875\u52a0\u8f7d\u5230\u7269\u7406\u5185\u5b58\u4e2d\u7684\u4e00\u4e2a\u7a7a\u95f2\u9875\u5e27\uff0c\u7136\u540e\u66f4\u65b0\u9875\u8868\uff0c\u6700\u540e\u91cd\u65b0\u6267\u884c\u4e4b\u524d\u7684\u6307\u4ee4\u3002</li> </ul> <p>\u5de5\u4f5c\u6d41\u7a0b\uff08\u7b80\u5316\u7248\uff09\uff1a 1.  CPU\u751f\u6210\u4e00\u4e2a\u865a\u62df\u5730\u5740\uff0c\u8bf7\u6c42\u8bbf\u95ee\u6570\u636e\u6216\u6307\u4ee4\u3002 2.  MMU\u63a5\u6536\u865a\u62df\u5730\u5740\uff0c\u5e76\u6839\u636e\u5f53\u524d\u8fdb\u7a0b\u7684\u9875\u8868\u67e5\u627e\u5bf9\u5e94\u7684\u7269\u7406\u5730\u5740\u3002 3.  \u5982\u679c\u5bf9\u5e94\u7684\u9875\u5df2\u7ecf\u5728\u7269\u7406\u5185\u5b58\u4e2d\uff08\u5373\u5728\u9875\u8868\u4e2d\u627e\u5230\u4e86\u6709\u6548\u6620\u5c04\uff09\uff0cMMU\u4f1a\u5c06\u865a\u62df\u5730\u5740\u7ffb\u8bd1\u6210\u7269\u7406\u5730\u5740\uff0c\u7136\u540eCPU\u76f4\u63a5\u8bbf\u95ee\u8be5\u7269\u7406\u5185\u5b58\u4f4d\u7f6e\u3002 4.  \u5982\u679c\u5bf9\u5e94\u7684\u9875\u4e0d\u5728\u7269\u7406\u5185\u5b58\u4e2d\uff08\u9875\u8868\u6307\u793a\u8be5\u9875\u65e0\u6548\u6216\u4e0d\u5728RAM\u4e2d\uff09\uff0cMMU\u4f1a\u89e6\u53d1\u4e00\u4e2a\u7f3a\u9875\u4e2d\u65ad\u3002 5.  \u64cd\u4f5c\u7cfb\u7edf\u63a5\u7ba1\uff0c\u4ece\u786c\u76d8\u4e0a\u7684\u4ea4\u6362\u7a7a\u95f4\u4e2d\u627e\u5230\u6240\u9700\u7684\u9875\uff0c\u5c06\u5176\u52a0\u8f7d\u5230\u7269\u7406\u5185\u5b58\u7684\u4e00\u4e2a\u7a7a\u95f2\u9875\u5e27\u4e2d\u3002 6.  \u64cd\u4f5c\u7cfb\u7edf\u66f4\u65b0\u9875\u8868\uff0c\u8bb0\u5f55\u65b0\u7684\u865a\u62df\u5730\u5740\u5230\u7269\u7406\u5730\u5740\u7684\u6620\u5c04\u3002 7.  \u6700\u540e\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5c06\u63a7\u5236\u6743\u8fd4\u56de\u7ed9\u7a0b\u5e8f\uff0c\u8ba9\u5b83\u91cd\u65b0\u6267\u884c\u5bfc\u81f4\u7f3a\u9875\u4e2d\u65ad\u7684\u6307\u4ee4\u3002\u6b64\u65f6\uff0c\u6240\u9700\u7684\u9875\u5df2\u5728\u7269\u7406\u5185\u5b58\u4e2d\uff0c\u53ef\u4ee5\u6b63\u5e38\u8bbf\u95ee\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E4%BB%8B%E7%BB%8D/#_4","title":"\u4f18\u70b9\u548c\u7f3a\u70b9","text":"<p>\u4f18\u70b9\uff1a *   \u6269\u5927\u53ef\u7528\u5185\u5b58\uff1a \u5141\u8bb8\u8fd0\u884c\u6bd4\u7269\u7406RAM\u66f4\u5927\u7684\u7a0b\u5e8f\u548c\u66f4\u591a\u7a0b\u5e8f\u3002 *   \u63d0\u9ad8\u591a\u4efb\u52a1\u6548\u7387\uff1a \u652f\u6301\u540c\u65f6\u8fd0\u884c\u591a\u4e2a\u5e94\u7528\u7a0b\u5e8f\uff0c\u4f18\u5316\u8d44\u6e90\u5229\u7528\u3002 *   \u5185\u5b58\u4fdd\u62a4\uff1a \u9694\u79bb\u8fdb\u7a0b\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u63d0\u9ad8\u7cfb\u7edf\u7a33\u5b9a\u6027\u548c\u5b89\u5168\u6027\u3002 *   \u7b80\u5316\u7f16\u7a0b\uff1a \u7a0b\u5e8f\u5458\u65e0\u9700\u5173\u5fc3\u7269\u7406\u5185\u5b58\u7684\u7ec6\u8282\uff0c\u7a0b\u5e8f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u903b\u8f91\u4e0a\u8fde\u7eed\u7684\u5730\u5740\u7a7a\u95f4\u3002 *   \u4ee3\u7801\u5171\u4eab\uff1a \u4fbf\u4e8e\u591a\u4e2a\u8fdb\u7a0b\u5171\u4eab\u76f8\u540c\u7684\u4ee3\u7801\u6216\u6570\u636e\u6bb5\uff0c\u8282\u7701\u5185\u5b58\u3002</p> <p>\u7f3a\u70b9\uff1a *   \u6027\u80fd\u5f00\u9500\uff1a \u865a\u62df\u5730\u5740\u5230\u7269\u7406\u5730\u5740\u7684\u8f6c\u6362\u9700\u8981MMU\u53c2\u4e0e\uff0c\u4f1a\u5e26\u6765\u8f7b\u5fae\u7684\u65f6\u95f4\u5f00\u9500\u3002\u66f4\u91cd\u8981\u7684\u662f\uff0c\u5f53\u53d1\u751f\u7f3a\u9875\u4e2d\u65ad\u65f6\uff0c\u4ece\u786c\u76d8\u52a0\u8f7d\u6570\u636e\u5230RAM\u6bd4\u76f4\u63a5\u4eceRAM\u8bbf\u95ee\u6162\u5f97\u591a\uff0c\u8fd9\u53ef\u80fd\u5bfc\u81f4\u660e\u663e\u7684\u6027\u80fd\u4e0b\u964d\uff08\u5373\u201c\u98a0\u7c38\u201d\u6216\u201c\u6296\u52a8\u201d\uff0cthrashing\uff09\u3002 *   \u78c1\u76d8I/O\u589e\u52a0\uff1a \u9891\u7e41\u7684\u9875\u4ea4\u6362\u4f1a\u589e\u52a0\u786c\u76d8\u7684\u8bfb\u5199\u64cd\u4f5c\uff0c\u7f29\u77ed\u786c\u76d8\u5bff\u547d\u3002 *   \u590d\u6742\u5ea6\uff1a \u64cd\u4f5c\u7cfb\u7edf\u9700\u8981\u7ba1\u7406\u590d\u6742\u7684\u9875\u8868\u548c\u9875\u66ff\u6362\u7b97\u6cd5\uff0c\u589e\u52a0\u4e86\u7cfb\u7edf\u7684\u590d\u6742\u6027\u3002</p> <p>\u5c3d\u7ba1\u5b58\u5728\u6027\u80fd\u5f00\u9500\uff0c\u4f46\u865a\u62df\u5185\u5b58\u7684\u4f18\u52bf\u4f7f\u5176\u6210\u4e3a\u73b0\u4ee3\u64cd\u4f5c\u7cfb\u7edf\u4e0d\u53ef\u6216\u7f3a\u7684\u4e00\u90e8\u5206\uff0c\u6781\u5927\u5730\u63d0\u5347\u4e86\u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u529f\u80fd\u6027\u548c\u7528\u6237\u4f53\u9a8c\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E8%BF%9B%E7%A8%8B%E7%BA%BF%E7%A8%8B%E5%92%8C%E5%8D%8F%E7%A8%8B%E7%9A%84%E5%8C%BA%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88/","title":"\u8fdb\u7a0b\u7ebf\u7a0b\u548c\u534f\u7a0b\u7684\u533a\u522b\u662f\u4ec0\u4e48","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E8%BF%9B%E7%A8%8B%E7%BA%BF%E7%A8%8B%E5%92%8C%E5%8D%8F%E7%A8%8B%E7%9A%84%E5%8C%BA%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88/#process","title":"\u8fdb\u7a0b (Process)","text":"<ul> <li>\u5b9a\u4e49\uff1a \u8fdb\u7a0b\u662f\u8ba1\u7b97\u673a\u4e2d\u5df2\u8fd0\u884c\u7a0b\u5e8f\u7684\u5b9e\u4f53\u3002\u5b83\u662f\u64cd\u4f5c\u7cfb\u7edf\u8fdb\u884c\u8d44\u6e90\u5206\u914d\u548c\u8c03\u5ea6\u7684\u57fa\u672c\u5355\u4f4d\u3002\u7a0b\u5e8f\u662f\u9759\u6001\u7684\u6307\u4ee4\u96c6\u5408\uff0c\u800c\u8fdb\u7a0b\u662f\u7a0b\u5e8f\u7684\u4e00\u6b21\u52a8\u6001\u6267\u884c\u8fc7\u7a0b\u3002</li> <li>\u7279\u5f81\uff1a<ul> <li>\u72ec\u7acb\u6027\uff1a \u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u81ea\u5df1\u72ec\u7acb\u7684\u5730\u5740\u7a7a\u95f4\uff0c\u5305\u62ec\u6587\u672c\u533a\u57df\uff08\u7a0b\u5e8f\u4ee3\u7801\uff09\u3001\u6570\u636e\u533a\u57df\uff08\u53d8\u91cf\u548c\u6570\u636e\uff09\u7b49\uff0c\u8fdb\u7a0b\u4e4b\u95f4\u5f7c\u6b64\u9694\u79bb\u3002</li> <li>\u52a8\u6001\u6027\uff1a \u8fdb\u7a0b\u662f\u4e34\u65f6\u7684\uff0c\u6709\u751f\u547d\u5468\u671f\u7684\uff0c\u662f\u52a8\u6001\u4ea7\u751f\u548c\u6d88\u4ea1\u7684\u3002</li> <li>\u5e76\u53d1\u6027\uff1a \u4efb\u4f55\u8fdb\u7a0b\u90fd\u53ef\u4ee5\u4e0e\u5176\u4ed6\u8fdb\u7a0b\u5e76\u53d1\u6267\u884c\u3002</li> <li>\u8d44\u6e90\u62e5\u6709\uff1a \u8fdb\u7a0b\u662f\u7cfb\u7edf\u5206\u914d\u8d44\u6e90\uff08\u5982CPU\u65f6\u95f4\u3001\u5185\u5b58\u3001\u6587\u4ef6\u548cI/O\u8bbe\u5907\uff09\u7684\u57fa\u672c\u5355\u4f4d\u3002</li> </ul> </li> <li>\u5207\u6362\u5f00\u9500\uff1a \u8fdb\u7a0b\u95f4\u7684\u5207\u6362\u6d89\u53ca\u7cfb\u7edf\u4e3a\u4e4b\u5206\u914d\u6216\u56de\u6536\u8d44\u6e90\uff08\u5982\u5185\u5b58\u7a7a\u95f4\u3001I/O\u8bbe\u5907\uff09\uff0c\u5f00\u9500\u8fdc\u5927\u4e8e\u7ebf\u7a0b\u5207\u6362\u3002\u8fdb\u7a0b\u5207\u6362\u7531\u64cd\u4f5c\u7cfb\u7edf\u51b3\u5b9a\uff0c\u7528\u6237\u65e0\u611f\u77e5.</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E8%BF%9B%E7%A8%8B%E7%BA%BF%E7%A8%8B%E5%92%8C%E5%8D%8F%E7%A8%8B%E7%9A%84%E5%8C%BA%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88/#thread","title":"\u7ebf\u7a0b (Thread)","text":"<ul> <li>\u5b9a\u4e49\uff1a \u7ebf\u7a0b\u662f\u8fdb\u7a0b\u4e2d\u7684\u4e00\u4e2a\u6267\u884c\u5355\u5143\uff0c\u662fCPU\u8c03\u5ea6\u548c\u5206\u6d3e\u7684\u57fa\u672c\u5355\u4f4d\u3002\u5b83\u662f\u8fdb\u7a0b\u5185\u53ef\u8c03\u5ea6\u7684\u5b9e\u4f53\u3002\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u81f3\u5c11\u6709\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u4e5f\u53ef\u4ee5\u6709\u591a\u4e2a\u7ebf\u7a0b\u3002</li> <li>\u7279\u5f81\uff1a<ul> <li>\u8f7b\u91cf\u7ea7\uff1a \u7ebf\u7a0b\u7684\u521b\u5efa\u4e0e\u64a4\u9500\u3001\u7ebf\u7a0b\u4e4b\u95f4\u7684\u5207\u6362\u6240\u5360\u7528\u7684\u8d44\u6e90\u6bd4\u8fdb\u7a0b\u5c11\u5f88\u591a\u3002</li> <li>\u5171\u4eab\u8d44\u6e90\uff1a \u7ebf\u7a0b\u57fa\u672c\u4e0d\u62e5\u6709\u7cfb\u7edf\u8d44\u6e90\uff0c\u53ea\u62e5\u6709\u4e00\u70b9\u5728\u8fd0\u884c\u4e2d\u5fc5\u4e0d\u53ef\u5c11\u7684\u8d44\u6e90\uff08\u5982\u7a0b\u5e8f\u8ba1\u6570\u5668\u3001\u4e00\u7ec4\u5bc4\u5b58\u5668\u548c\u6808\uff09\uff0c\u4f46\u5b83\u53ef\u4e0e\u540c\u4e00\u8fdb\u7a0b\u7684\u5176\u4ed6\u7ebf\u7a0b\u5171\u4eab\u8fdb\u7a0b\u6240\u62e5\u6709\u7684\u5168\u90e8\u8d44\u6e90\uff0c\u5305\u62ec\u5185\u5b58\u5730\u5740\u7a7a\u95f4\u3002</li> <li>\u5e76\u53d1\u6267\u884c\uff1a \u540c\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u7684\u591a\u4e2a\u7ebf\u7a0b\u4e4b\u95f4\u53ef\u4ee5\u5e76\u53d1\u6267\u884c\u3002</li> <li>\u8c03\u5ea6\uff1a \u7ebf\u7a0b\u662f\u7cfb\u7edf\uff08\u5904\u7406\u5668\uff09\u8c03\u5ea6\u7684\u57fa\u672c\u5355\u4f4d\u3002\u7ebf\u7a0b\u7684\u8c03\u5ea6\u662f\u62a2\u5360\u5f0f\u7684\uff0c\u7531\u64cd\u4f5c\u7cfb\u7edf\u51b3\u5b9a\u3002</li> </ul> </li> <li>\u5207\u6362\u5f00\u9500\uff1a \u7ebf\u7a0b\u5207\u6362\u6d89\u53ca\u7528\u6237\u6001\u73b0\u573a\uff08\u4e0a\u4e0b\u6587\u3001\u5bc4\u5b58\u5668\u3001\u7528\u6237\u6808\u7b49\uff09\u7684\u4fdd\u5b58\u548c\u6062\u590d\uff0c\u5e76\u53ef\u80fd\u6d89\u53ca\u5185\u6838\u6001\u548c\u7528\u6237\u6001\u7684\u5207\u6362\uff0c\u5f00\u9500\u6bd4\u534f\u7a0b\u5927\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E8%BF%9B%E7%A8%8B%E7%BA%BF%E7%A8%8B%E5%92%8C%E5%8D%8F%E7%A8%8B%E7%9A%84%E5%8C%BA%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88/#coroutine","title":"\u534f\u7a0b (Coroutine)","text":"<ul> <li>\u5b9a\u4e49\uff1a \u534f\u7a0b\uff08Coroutine\uff09\u662f\u8ba1\u7b97\u673a\u7a0b\u5e8f\u7684\u4e00\u7c7b\u7ec4\u4ef6\uff0c\u63a8\u5e7f\u4e86\u534f\u4f5c\u5f0f\u591a\u4efb\u52a1\u7684\u5b50\u4f8b\u7a0b\uff0c\u5141\u8bb8\u6267\u884c\u88ab\u6302\u8d77\u4e0e\u88ab\u6062\u590d\u3002\u5b83\u662f\u4e00\u79cd\u7528\u6237\u6001\u7684\u8f7b\u91cf\u7ea7\u7ebf\u7a0b\uff0c\u4e5f\u88ab\u79f0\u4e3a\u5fae\u7ebf\u7a0b\u6216\u7ea4\u7a0b\u3002</li> <li>\u7279\u5f81\uff1a<ul> <li>\u7528\u6237\u6001\u8c03\u5ea6\uff1a \u534f\u7a0b\u7684\u8c03\u5ea6\u5b8c\u5168\u7531\u7528\u6237\u63a7\u5236\uff0c\u5728\u7528\u6237\u6001\u6267\u884c\u3002\u8fd9\u610f\u5473\u7740\u534f\u7a0b\u4e4b\u95f4\u7684\u5207\u6362\u4e0d\u9700\u8981\u6d89\u53ca\u4efb\u4f55\u7cfb\u7edf\u8c03\u7528\u6216\u5185\u6838\u6001\u5207\u6362\uff0c\u6027\u80fd\u5f00\u9500\u76f8\u8f83\u4e8e\u7ebf\u7a0b\u66f4\u5c0f\u3002</li> <li>\u534f\u4f5c\u5f0f\uff1a \u534f\u7a0b\u662f\u534f\u4f5c\u5f0f\u7684\u4efb\u52a1\uff0c\u610f\u5473\u7740\u5b83\u4eec\u9700\u8981\u663e\u5f0f\u5730\u5c06\u63a7\u5236\u6743\u4ea4\u7ed9\u5176\u4ed6\u534f\u7a0b\uff08\u901a\u8fc7 <code>yield</code> \u7b49\u673a\u5236\uff09\uff0c\u800c\u4e0d\u662f\u7531\u64cd\u4f5c\u7cfb\u7edf\u62a2\u5360\u5f0f\u8c03\u5ea6\u3002</li> <li>\u8f7b\u91cf\u7ea7\uff1a \u6bcf\u4e2a\u534f\u7a0b\u7684\u4f53\u79ef\u6bd4\u7ebf\u7a0b\u8981\u5c0f\u5f97\u591a\uff0c\u4e00\u4e2a\u7ebf\u7a0b\u53ef\u4ee5\u5bb9\u7eb3\u6570\u91cf\u76f8\u5f53\u53ef\u89c2\u7684\u534f\u7a0b\u3002</li> <li>\u4e0a\u4e0b\u6587\u4fdd\u5b58\uff1a \u534f\u7a0b\u62e5\u6709\u81ea\u5df1\u7684\u5bc4\u5b58\u5668\u4e0a\u4e0b\u6587\u548c\u6808\u3002\u5f53\u534f\u7a0b\u8c03\u5ea6\u5207\u6362\u65f6\uff0c\u53ef\u4ee5\u76f4\u63a5\u4fdd\u5b58\u5f53\u524d\u534f\u7a0b\u7684\u72b6\u6001\uff0c\u7136\u540e\u76f4\u63a5\u6062\u590d\u53e6\u4e00\u4e2a\u534f\u7a0b\u7684\u72b6\u6001\u3002</li> <li>\u5e76\u53d1\u800c\u975e\u5e76\u884c\uff1a \u534f\u7a0b\u63d0\u4f9b\u5e76\u53d1\u6027\uff08\u770b\u4e0a\u53bb\u662f\u540c\u65f6\u6267\u884c\uff0c\u5b9e\u9645\u4e3a\u4ea4\u66ff\u6267\u884c\uff09\u800c\u975e\u5e76\u884c\u6027\u3002\u4e00\u4e2a\u7ebf\u7a0b\u53ef\u4ee5\u6709\u591a\u4e2a\u534f\u7a0b\u3002</li> <li>\u65e0\u9501\uff1a \u7531\u4e8e\u534f\u7a0b\u662f\u5728\u5355\u7ebf\u7a0b\u5185\u534f\u4f5c\u6267\u884c\uff0c\u4e0d\u9700\u8981\u591a\u7ebf\u7a0b\u7684\u9501\u673a\u5236\uff0c\u53ef\u4ee5\u4e0d\u52a0\u9501\u5730\u8bbf\u95ee\u5168\u5c40\u53d8\u91cf\uff0c\u4ece\u800c\u63d0\u9ad8\u6267\u884c\u6548\u7387\u3002</li> </ul> </li> <li>\u9002\u7528\u573a\u666f\uff1a \u534f\u7a0b\u7279\u522b\u9002\u5408\u4e8e\u7528\u6765\u5b9e\u73b0\u5f7c\u6b64\u719f\u6089\u7684\u7a0b\u5e8f\u7ec4\u4ef6\uff0c\u5982\u534f\u4f5c\u5f0f\u591a\u4efb\u52a1\u3001\u5f02\u5e38\u5904\u7406\u3001\u4e8b\u4ef6\u5faa\u73af\u3001\u8fed\u4ee3\u5668\u3001\u65e0\u9650\u5217\u8868\u548c\u7ba1\u9053\u3002\u5728 I/O \u5bc6\u96c6\u578b\u4efb\u52a1\u4e2d\uff0c\u534f\u7a0b\u7684\u6027\u80fd\u4f18\u52bf\u5c24\u4e3a\u660e\u663e\u3002</li> </ul> \u7279\u6027 \u8fdb\u7a0b (Process) \u7ebf\u7a0b (Thread) \u534f\u7a0b (Coroutine) \u8d44\u6e90 \u64cd\u4f5c\u7cfb\u7edf\u8d44\u6e90\u5206\u914d\u7684\u57fa\u672c\u5355\u4f4d\uff0c\u62e5\u6709\u72ec\u7acb\u7684\u5730\u5740\u7a7a\u95f4\u548c\u8d44\u6e90\u3002 \u5171\u4eab\u8fdb\u7a0b\u7684\u5730\u5740\u7a7a\u95f4\u548c\u8d44\u6e90\uff0c\u53ea\u62e5\u6709\u5c11\u91cf\u5fc5\u9700\u8d44\u6e90\u3002 \u5171\u4eab\u6240\u5728\u7ebf\u7a0b\u7684\u8d44\u6e90\uff0c\u62e5\u6709\u81ea\u5df1\u7684\u5bc4\u5b58\u5668\u4e0a\u4e0b\u6587\u548c\u6808\u3002 \u8c03\u5ea6 \u64cd\u4f5c\u7cfb\u7edf\u8c03\u5ea6\uff0c\u62a2\u5360\u5f0f\u8c03\u5ea6\u3002 \u64cd\u4f5c\u7cfb\u7edf\u8c03\u5ea6\uff0c\u62a2\u5360\u5f0f\u8c03\u5ea6\u3002 \u7528\u6237\uff08\u7a0b\u5e8f\uff09\u8c03\u5ea6\uff0c\u534f\u4f5c\u5f0f\u8c03\u5ea6\u3002 \u5f00\u9500 \u521b\u5efa\u3001\u9500\u6bc1\u3001\u5207\u6362\u5f00\u9500\u6700\u5927\u3002 \u521b\u5efa\u3001\u9500\u6bc1\u3001\u5207\u6362\u5f00\u9500\u4e2d\u7b49\u3002 \u521b\u5efa\u3001\u9500\u6bc1\u3001\u5207\u6362\u5f00\u9500\u6700\u5c0f\u3002 \u72ec\u7acb\u6027 \u72ec\u7acb\u6027\u5f3a\uff0c\u8fdb\u7a0b\u95f4\u4e92\u76f8\u9694\u79bb\u3002 \u4f9d\u8d56\u4e8e\u8fdb\u7a0b\uff0c\u540c\u8fdb\u7a0b\u5185\u7ebf\u7a0b\u5171\u4eab\u8d44\u6e90\u3002 \u4f9d\u8d56\u4e8e\u7ebf\u7a0b\uff0c\u534f\u7a0b\u4e4b\u95f4\u534f\u4f5c\u3002 \u5e76\u53d1/\u5e76\u884c \u65e2\u53ef\u5e76\u53d1\u4e5f\u53ef\u5e76\u884c\u3002 \u65e2\u53ef\u5e76\u53d1\u4e5f\u53ef\u5e76\u884c\u3002 \u5e76\u53d1\uff08\u5b8f\u89c2\u4e0a\uff09\uff0c\u4f46\u5355\u7ebf\u7a0b\u5185\u662f\u534f\u4f5c\u5f0f\u4ea4\u66ff\u6267\u884c\uff0c\u975e\u5e76\u884c\u3002 \u901a\u4fe1 \u4e3b\u8981\u901a\u8fc7 IPC \u673a\u5236\uff08\u5982\u7ba1\u9053\u3001\u6d88\u606f\u961f\u5217\uff09\u3002 \u901a\u8fc7\u5171\u4eab\u5185\u5b58\u3001\u9501\u7b49\u673a\u5236\u3002 \u5728\u5355\u7ebf\u7a0b\u5185\u76f4\u63a5\u5171\u4eab\u53d8\u91cf\uff0c\u65e0\u9700\u9501\u673a\u5236\u3002 \u6570\u91cf \u6570\u91cf\u6709\u9650\uff0c\u5f00\u9500\u5927\u3002 \u6570\u91cf\u6bd4\u8fdb\u7a0b\u591a\uff0c\u4f46\u4ecd\u6709\u4e00\u5b9a\u5f00\u9500\u3002 \u6570\u91cf\u53ef\u89c2\uff0c\u5f00\u9500\u6781\u5c0f\u3002"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1%E7%9A%84%E6%96%B9%E5%BC%8F%E6%9C%89%E4%BB%80%E4%B9%88/","title":"\u8fdb\u7a0b\u95f4\u901a\u4fe1\u7684\u65b9\u5f0f\u6709\u4ec0\u4e48","text":"<p>\u8fdb\u7a0b\u95f4\u901a\u4fe1 (IPC) \u662f\u6307\u4e24\u4e2a\u8fdb\u7a0b\u4e4b\u95f4\u8fdb\u884c\u4fe1\u606f\u4ea4\u6d41\u7684\u673a\u5236\uff0c\u5b83\u4e0d\u4ec5\u53ef\u4ee5\u53d1\u751f\u5728\u540c\u4e00\u4e3b\u673a\u7684\u4e24\u4e2a\u8fdb\u7a0b\u4e4b\u95f4\uff0c\u4e5f\u53ef\u4ee5\u53d1\u751f\u5728\u4e0d\u540c\u4e3b\u673a\u7684\u4e24\u4e2a\u8fdb\u7a0b\u4e4b\u95f4\u3002UNIX \u7cfb\u7edf\u63d0\u4f9b\u4e86\u591a\u79cd\u8fdb\u7a0b\u95f4\u901a\u4fe1\u65b9\u5f0f\uff0c\u4e3b\u8981\u5305\u62ec\u7ba1\u9053 (pipe)\u3001\u4fe1\u53f7\u91cf (semaphore)\u3001\u5171\u4eab\u5185\u5b58 (shared memory)\u3001\u6d88\u606f\u961f\u5217 (message queue) \u548c\u5957\u63a5\u5b57 (socket)\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1%E7%9A%84%E6%96%B9%E5%BC%8F%E6%9C%89%E4%BB%80%E4%B9%88/#_1","title":"\u7ba1\u9053","text":"<p>\u7ba1\u9053\u662f\u6700\u65e9\u51fa\u73b0\u4e14\u4f7f\u7528\u9891\u7e41\u7684\u8fdb\u7a0b\u95f4\u901a\u4fe1\u673a\u5236\u4e4b\u4e00\u3002\u5b83\u5141\u8bb8\u4e00\u4e2a\u8fdb\u7a0b\u7684\u8f93\u51fa\u4f5c\u4e3a\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u7684\u8f93\u5165\uff0c\u5b9e\u73b0\u4e24\u4e2a\u8fdb\u7a0b\u4e4b\u95f4\u7684\u6570\u636e\u6d41\u4f20\u8f93\u3002\u7ba1\u9053\u53ef\u4ee5\u662f\u65e0\u540d\u7ba1\u9053\uff08pipe\uff09\u6216\u547d\u540d\u7ba1\u9053\uff08named pipe\uff09\u3002</p> <p>\u5b9e\u73b0\u539f\u7406\uff1a</p> <ul> <li> <p>\u65e0\u540d\u7ba1\u9053 (pipe)\uff1a</p> <ul> <li><code>popen()</code> \u548c <code>pclose()</code>: <code>popen()</code> \u51fd\u6570\u901a\u8fc7\u521b\u5efa\u4e00\u4e2a\u53cc\u5411\u7ba1\u9053\uff0c\u7136\u540e\u8c03\u7528 <code>fork()</code> \u4ea7\u751f\u5b50\u8fdb\u7a0b\uff0c\u5e76\u5728\u5b50\u8fdb\u7a0b\u4e2d\u901a\u8fc7 <code>/bin/sh -c</code> \u6765\u6267\u884c\u53c2\u6570 <code>command</code> \u7684\u547d\u4ee4\u3002\u8fd9\u6837\uff0c\u8c03\u7528\u8fdb\u7a0b\u53ef\u4ee5\u8bfb\u53d6\u88ab\u8c03\u7528\u8fdb\u7a0b\u7684\u8f93\u51fa\u6216\u5411\u5176\u8f93\u5165\u6570\u636e\u3002<code>open_mode</code> \u53c2\u6570\u51b3\u5b9a\u6570\u636e\u6d41\u5411\uff0c<code>r</code> \u7528\u4e8e\u8bfb\u53d6\u88ab\u8c03\u7528\u8fdb\u7a0b\u7684\u8f93\u51fa\uff0c<code>w</code> \u7528\u4e8e\u5411\u88ab\u8c03\u7528\u8fdb\u7a0b\u5199\u5165\u6570\u636e\u3002<code>pclose()</code> \u51fd\u6570\u7528\u4e8e\u5173\u95ed\u7ba1\u9053\uff0c\u5b83\u4f1a\u963b\u585e\u76f4\u5230\u88ab\u8c03\u7528\u8fdb\u7a0b\u9000\u51fa\u3002\u65e9\u671f <code>popen()</code> \u5b9e\u73b0\u7684\u7ba1\u9053\u662f\u5355\u5411\u7684\uff0c\u4f46\u73b0\u4ee3\u4e00\u4e9b\u5b9e\u73b0\uff08\u5982 FreeBSD 2.2.6 \u5f15\u5165\uff09\u652f\u6301\u53cc\u5411\u7ba1\u9053 (<code>r+</code> \u6a21\u5f0f)\u3002</li> <li><code>pipe()</code> \u7cfb\u7edf\u8c03\u7528: <code>pipe()</code> \u7cfb\u7edf\u8c03\u7528\u521b\u5efa\u4e00\u4e2a\u65e0\u540d\u7ba1\u9053\uff0c\u5e76\u8fd4\u56de\u4e24\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26 <code>file_descriptor[0]</code> \u548c <code>file_descriptor[1]</code>\u3002\u5199\u5165 <code>file_descriptor[1]</code> \u7684\u6570\u636e\u53ef\u4ee5\u4ece <code>file_descriptor[0]</code> \u8bfb\u53d6\uff0c\u4e24\u8005\u9075\u5faa FIFO (First-In, First-Out) \u539f\u5219\u3002\u8fd9\u79cd\u5e95\u5c42\u7ba1\u9053\u901a\u5e38\u5728 <code>fork()</code> \u8c03\u7528\u4e4b\u540e\u4f7f\u7528\uff0c\u5b9e\u73b0\u7236\u5b50\u8fdb\u7a0b\u4e4b\u95f4\u7684\u901a\u4fe1\uff1a\u7236\u8fdb\u7a0b\u53ef\u4ee5\u5411\u7ba1\u9053\u4e00\u7aef\u5199\u5165\u6570\u636e\uff0c\u5b50\u8fdb\u7a0b\u4ece\u53e6\u4e00\u7aef\u8bfb\u53d6\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002\u7236\u5b50\u8fdb\u7a0b\u901a\u8fc7\u5171\u4eab\u7531 <code>pipe()</code> \u521b\u5efa\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u6765\u5b9e\u73b0\u901a\u4fe1\u3002</li> </ul> </li> <li> <p>\u547d\u540d\u7ba1\u9053 (named pipe, FIFO)\uff1a</p> <ul> <li>\u5b9a\u4e49\uff1a \u547d\u540d\u7ba1\u9053\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u6587\u4ef6\uff0c\u53ef\u4ee5\u5728\u6587\u4ef6\u7cfb\u7edf\u4e2d\u5b58\u5728\uff0c\u56e0\u6b64\u5b83\u5141\u8bb8\u4e0d\u76f8\u5173\u7684\u8fdb\u7a0b\u4e4b\u95f4\u8fdb\u884c\u901a\u4fe1\u3002</li> <li>\u5b9e\u73b0\u539f\u7406\uff1a \u7528\u6237\u53ef\u4ee5\u4f7f\u7528 <code>mkfifo &lt;pipe-name&gt;</code> \u547d\u4ee4\u521b\u5efa\u547d\u540d\u7ba1\u9053\u3002\u4e00\u65e6\u521b\u5efa\uff0c\u547d\u540d\u7ba1\u9053\u5c31\u8868\u73b0\u5f97\u50cf\u4e00\u4e2a\u666e\u901a\u6587\u4ef6\uff0c\u4e0d\u540c\u8fdb\u7a0b\u53ef\u4ee5\u901a\u8fc7\u6253\u5f00\u3001\u8bfb\u53d6\u548c\u5199\u5165\u8fd9\u4e2a\u6587\u4ef6\u6765\u4ea4\u6362\u6570\u636e\u3002\u5f53\u4e00\u4e2a\u8fdb\u7a0b\u6253\u5f00\u547d\u540d\u7ba1\u9053\u8fdb\u884c\u8bfb\u53d6\u65f6\uff0c\u5982\u679c\u7ba1\u9053\u4e2d\u6ca1\u6709\u6570\u636e\uff0c\u5b83\u4f1a\u963b\u585e\u76f4\u5230\u6709\u6570\u636e\u5199\u5165\u3002\u540c\u6837\uff0c\u5199\u5165\u8fdb\u7a0b\u4e5f\u53ef\u80fd\u5728\u7ba1\u9053\u6ee1\u65f6\u963b\u585e\u3002\u64cd\u4f5c\u7cfb\u7edf\u7ef4\u62a4\u7ba1\u9053\u7684\u5185\u90e8\u7f13\u51b2\u533a\u6765\u5b58\u50a8\u6570\u636e\u3002\u547d\u540d\u7ba1\u9053\u7684API\u4e0e\u666e\u901a\u6587\u4ef6\u64cd\u4f5c\u7c7b\u4f3c\uff0c\u4f46\u672c\u6587\u672a\u8be6\u7ec6\u7ed9\u51fa\u5176\u51fd\u6570\u539f\u578b\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1%E7%9A%84%E6%96%B9%E5%BC%8F%E6%9C%89%E4%BB%80%E4%B9%88/#_2","title":"\u4fe1\u53f7\u91cf","text":"<p>\u4fe1\u53f7\u91cf\u662f\u7531 Dijkstra \u63d0\u51fa\u7684\uff0c\u7528\u4e8e\u89e3\u51b3\u5e76\u53d1\u7a0b\u5e8f\u4e2d\u5bf9\u5171\u4eab\u8d44\u6e90\uff08\u4e34\u754c\u8d44\u6e90\uff09\u7684\u8bbf\u95ee\u63a7\u5236\u95ee\u9898\u3002\u5b83\u901a\u8fc7\u7b80\u5355\u7684 P (wait/decrement) \u548c V (signal/increment) \u64cd\u4f5c\u6765\u534f\u8c03\u591a\u4e2a\u8fdb\u7a0b\u6216\u7ebf\u7a0b\u5bf9\u5171\u4eab\u8d44\u6e90\u7684\u8bbf\u95ee\uff0c\u9632\u6b62\u6570\u636e\u9519\u8bef\u3002\u6700\u7b80\u5355\u7684\u4fe1\u53f7\u91cf\u662f\u4e00\u4e2a\u53ea\u80fd\u53d6 0 \u6216 1 \u7684\u53d8\u91cf\uff08\u4e8c\u503c\u4fe1\u53f7\u91cf\uff09\u3002</p> <p>\u5b9e\u73b0\u539f\u7406\uff1a</p> <ul> <li>P \u64cd\u4f5c (wait): \u5f53\u8fdb\u7a0b\u8981\u8fdb\u5165\u4e34\u754c\u533a\u65f6\uff0c\u9996\u5148\u8c03\u7528 P(s)\u3002\u5982\u679c\u4fe1\u53f7\u91cf <code>s</code> \u7684\u503c\u5927\u4e8e 0\uff0c\u5219\u5c06\u5176\u51cf 1\uff0c\u5e76\u5141\u8bb8\u8fdb\u7a0b\u8fdb\u5165\u4e34\u754c\u533a\u3002\u5982\u679c <code>s</code> \u7684\u503c\u7b49\u4e8e 0\uff0c\u5219\u8868\u793a\u4e34\u754c\u533a\u5df2\u88ab\u5360\u7528\uff0c\u8fdb\u7a0b\u4f1a\u88ab\u6302\u8d77\uff0c\u76f4\u5230 <code>s</code> \u7684\u503c\u53d8\u4e3a\u5927\u4e8e 0\u3002</li> <li>V \u64cd\u4f5c (signal): \u5f53\u8fdb\u7a0b\u5b8c\u6210\u5bf9\u4e34\u754c\u533a\u7684\u8bbf\u95ee\u540e\uff0c\u8c03\u7528 V(s)\u3002\u5982\u679c\u6b64\u65f6\u6709\u8fdb\u7a0b\u56e0\u4e3a\u6267\u884c P(s) \u800c\u88ab\u6302\u8d77\uff0c\u5219\u6062\u590d\u8be5\u8fdb\u7a0b\u7684\u8fd0\u884c\u3002\u5426\u5219\uff0c\u5c06\u4fe1\u53f7\u91cf <code>s</code> \u7684\u503c\u52a0 1\u3002</li> <li>UNIX API: UNIX \u63d0\u4f9b\u4e86 <code>semctl</code> (\u4fe1\u53f7\u91cf\u63a7\u5236)\u3001<code>semget</code> (\u83b7\u53d6\u4fe1\u53f7\u91cf\u96c6\u6807\u8bc6\u7b26) \u548c <code>semop</code> (\u4fe1\u53f7\u91cf\u64cd\u4f5c) \u7b49\u51fd\u6570\u6765\u7ba1\u7406\u548c\u64cd\u4f5c\u4fe1\u53f7\u91cf\u3002\u8fd9\u4e9b\u51fd\u6570\u901a\u5e38\u64cd\u4f5c\u7684\u662f\u4e00\u4e2a\u4fe1\u53f7\u91cf\u96c6\uff0c\u800c\u4e0d\u662f\u5355\u4e2a\u4fe1\u53f7\u91cf\u3002\u901a\u8fc7\u8fd9\u4e9b\u539f\u8bed\u64cd\u4f5c\uff0c\u64cd\u4f5c\u7cfb\u7edf\u53ef\u4ee5\u786e\u4fdd\u5728\u4efb\u4f55\u7ed9\u5b9a\u65f6\u523b\u53ea\u6709\u4e00\u4e2a\u8fdb\u7a0b\u80fd\u591f\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\uff08\u5bf9\u4e8e\u4e8c\u503c\u4fe1\u53f7\u91cf\uff09\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1%E7%9A%84%E6%96%B9%E5%BC%8F%E6%9C%89%E4%BB%80%E4%B9%88/#_3","title":"\u5171\u4eab\u5185\u5b58","text":"<p>\u5171\u4eab\u5185\u5b58\u662f\u4e00\u79cd\u5141\u8bb8\u4e0d\u540c\u8fdb\u7a0b\u5c06\u540c\u4e00\u5757\u7269\u7406\u5185\u5b58\u5730\u5740\u8fde\u63a5\u5230\u5b83\u4eec\u5404\u81ea\u7684\u865a\u62df\u5185\u5b58\u7a7a\u95f4\u4e2d\u7684\u673a\u5236\u3002\u4e00\u65e6\u8fde\u63a5\uff0c\u8fd9\u4e9b\u8fdb\u7a0b\u5c31\u53ef\u4ee5\u76f4\u63a5\u8bfb\u5199\u8fd9\u5757\u5185\u5b58\u533a\u57df\uff0c\u4ece\u800c\u5b9e\u73b0\u9ad8\u901f\u7684\u8fdb\u7a0b\u95f4\u901a\u4fe1\u3002</p> <p>\u5b9e\u73b0\u539f\u7406\uff1a</p> <ul> <li>\u5185\u5b58\u6620\u5c04\uff1a \u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u673a\u5236\uff08\u5982 <code>shmget</code>\uff09\u6765\u521b\u5efa\u4e00\u5757\u7279\u6b8a\u7684\u5185\u5b58\u533a\u57df\u4f5c\u4e3a\u5171\u4eab\u5185\u5b58\u3002\u7136\u540e\uff0c\u901a\u8fc7 <code>shmat</code> \u51fd\u6570\uff0c\u4e0d\u540c\u7684\u8fdb\u7a0b\u53ef\u4ee5\u5c06\u8fd9\u5757\u5171\u4eab\u5185\u5b58\u6620\u5c04\u5230\u5b83\u4eec\u81ea\u5df1\u7684\u5730\u5740\u7a7a\u95f4\u4e2d\u3002</li> <li>\u76f4\u63a5\u8bbf\u95ee\uff1a \u4e00\u65e6\u5185\u5b58\u88ab\u6620\u5c04\uff0c\u8fdb\u7a0b\u5c31\u53ef\u4ee5\u50cf\u8bbf\u95ee\u81ea\u5df1\u7684\u79c1\u6709\u5185\u5b58\u4e00\u6837\u8bbf\u95ee\u8fd9\u5757\u5171\u4eab\u5185\u5b58\u3002\u4efb\u4f55\u4e00\u4e2a\u8fdb\u7a0b\u5bf9\u5171\u4eab\u5185\u5b58\u7684\u5199\u5165\uff0c\u5176\u4ed6\u8fdb\u7a0b\u90fd\u80fd\u7acb\u5373\u770b\u5230\u3002</li> <li>\u7f3a\u4e4f\u540c\u6b65\uff1a \u5171\u4eab\u5185\u5b58\u672c\u8eab\u4e0d\u63d0\u4f9b\u540c\u6b65\u673a\u5236\u3002\u8fd9\u610f\u5473\u7740\uff0c\u5982\u679c\u591a\u4e2a\u8fdb\u7a0b\u540c\u65f6\u5c1d\u8bd5\u8bfb\u5199\u5171\u4eab\u5185\u5b58\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u7ade\u6001\u6761\u4ef6\u548c\u6570\u636e\u4e0d\u4e00\u81f4\u3002\u56e0\u6b64\uff0c\u5728\u4f7f\u7528\u5171\u4eab\u5185\u5b58\u65f6\uff0c\u7a0b\u5e8f\u5458\u901a\u5e38\u9700\u8981\u7ed3\u5408\u5176\u4ed6 IPC \u673a\u5236\uff08\u5982\u4fe1\u53f7\u91cf\u6216\u4e92\u65a5\u9501\uff09\u6765\u7ef4\u62a4\u5bf9\u5171\u4eab\u5185\u5b58\u7684\u8bfb\u5199\u540c\u6b65\u3002</li> <li>UNIX API: UNIX \u63d0\u4f9b\u4e86 <code>shmget</code> (\u521b\u5efa\u6216\u83b7\u53d6\u5171\u4eab\u5185\u5b58\u6bb5)\u3001<code>shmat</code> (\u5c06\u5171\u4eab\u5185\u5b58\u8fde\u63a5\u5230\u8fdb\u7a0b\u5730\u5740\u7a7a\u95f4)\u3001<code>shmctl</code> (\u63a7\u5236\u5171\u4eab\u5185\u5b58) \u548c <code>shmdt</code> (\u5c06\u5171\u4eab\u5185\u5b58\u4e0e\u8fdb\u7a0b\u5730\u5740\u7a7a\u95f4\u5206\u79bb) \u7b49\u51fd\u6570\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1%E7%9A%84%E6%96%B9%E5%BC%8F%E6%9C%89%E4%BB%80%E4%B9%88/#_4","title":"\u6d88\u606f\u961f\u5217","text":"<p>\u6d88\u606f\u961f\u5217\u662f\u4e00\u79cd\u5141\u8bb8\u8fdb\u7a0b\u901a\u8fc7\u53d1\u9001\u548c\u63a5\u6536\u5177\u6709\u7279\u5b9a\u683c\u5f0f\u7684\u6d88\u606f\u6765\u8fdb\u884c\u901a\u4fe1\u7684\u673a\u5236\u3002\u5b83\u7c7b\u4f3c\u4e8e\u547d\u540d\u7ba1\u9053\uff0c\u4f46\u63d0\u4f9b\u4e86\u66f4\u7075\u6d3b\u7684\u6d88\u606f\u5904\u7406\u80fd\u529b\u3002</p> <p>\u5b9e\u73b0\u539f\u7406\uff1a</p> <ul> <li>\u6d88\u606f\u5b58\u50a8\uff1a \u6d88\u606f\u961f\u5217\u7531\u64cd\u4f5c\u7cfb\u7edf\u7ef4\u62a4\uff0c\u5b83\u662f\u4e00\u4e2a\u94fe\u8868\u7ed3\u6784\uff0c\u7528\u4e8e\u5b58\u50a8\u8fdb\u7a0b\u53d1\u9001\u7684\u6d88\u606f\u3002</li> <li>\u6d88\u606f\u7c7b\u578b\uff1a \u6d88\u606f\u961f\u5217\u4e2d\u7684\u6bcf\u6761\u6d88\u606f\u901a\u5e38\u90fd\u5e26\u6709\u4e00\u4e2a\u7c7b\u578b\u5b57\u6bb5\u3002\u8fd9\u4f7f\u5f97\u63a5\u6536\u8fdb\u7a0b\u53ef\u4ee5\u9009\u62e9\u6027\u5730\u63a5\u6536\u7279\u5b9a\u7c7b\u578b\u7684\u6d88\u606f\uff0c\u800c\u4e0d\u662f\u4e25\u683c\u6309\u7167 FIFO \u987a\u5e8f\u63a5\u6536\u6240\u6709\u6d88\u606f\u3002</li> <li>\u53d1\u9001\u4e0e\u63a5\u6536\uff1a \u8fdb\u7a0b\u901a\u8fc7 <code>msgsnd</code> \u51fd\u6570\u5c06\u6d88\u606f\u53d1\u9001\u5230\u961f\u5217\u4e2d\uff0c\u901a\u8fc7 <code>msgrcv</code> \u51fd\u6570\u4ece\u961f\u5217\u4e2d\u63a5\u6536\u6d88\u606f\u3002</li> <li>UNIX API: UNIX \u63d0\u4f9b\u4e86 <code>msgget</code> (\u521b\u5efa\u6216\u83b7\u53d6\u6d88\u606f\u961f\u5217)\u3001<code>msgsnd</code> (\u53d1\u9001\u6d88\u606f)\u3001<code>msgrcv</code> (\u63a5\u6536\u6d88\u606f) \u548c <code>msgctl</code> (\u63a7\u5236\u6d88\u606f\u961f\u5217) \u7b49\u51fd\u6570\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1%E7%9A%84%E6%96%B9%E5%BC%8F%E6%9C%89%E4%BB%80%E4%B9%88/#_5","title":"\u5957\u63a5\u5b57","text":"<p>\u5957\u63a5\u5b57\u662f\u4e00\u79cd\u7528\u4e8e\u5728\u7f51\u7edc\u4e2d\u8fdb\u884c\u8fdb\u7a0b\u95f4\u901a\u4fe1\u7684\u673a\u5236\uff0c\u5b83\u4e0d\u4ec5\u53ef\u4ee5\u7528\u4e8e\u4e0d\u540c\u4e3b\u673a\u4e0a\u7684\u8fdb\u7a0b\u901a\u4fe1\uff0c\u4e5f\u53ef\u4ee5\u7528\u4e8e\u540c\u4e00\u4e3b\u673a\u4e0a\u7684\u8fdb\u7a0b\u901a\u4fe1\u3002\u5b83\u662f\u7f51\u7edc\u901a\u4fe1\u7684\u57fa\u7840\u3002</p> <p>\u5b9e\u73b0\u539f\u7406\uff1a</p> <ul> <li>\u7f51\u7edc\u534f\u8bae\u6808\uff1a \u5bf9\u4e8e\u8de8\u4e3b\u673a\u7684\u901a\u4fe1\uff0c\u5957\u63a5\u5b57\u901a\u8fc7\u5efa\u7acb\u4f20\u8f93\u5c42\u8fde\u63a5\uff08\u5982 TCP \u6216 UDP\uff09\u6765\u8fdb\u884c\u6570\u636e\u4f20\u8f93\u3002<ul> <li>TCP (\u53ef\u9760\u4f20\u8f93):<ul> <li>\u670d\u52a1\u7aef\uff1a \u8c03\u7528 <code>socket()</code> \u521b\u5efa\u5957\u63a5\u5b57 -&gt; <code>bind()</code> \u7ed1\u5b9a IP/Port -&gt; <code>listen()</code> \u76d1\u542c\u7aef\u53e3 -&gt; <code>accept()</code> \u7b49\u5f85\u5ba2\u6237\u7aef\u8fde\u63a5\u3002</li> <li>\u5ba2\u6237\u7aef\uff1a \u8c03\u7528 <code>socket()</code> \u521b\u5efa\u5957\u63a5\u5b57 -&gt; <code>connect()</code> \u53d1\u8d77 TCP \u63e1\u624b\u4e0e\u670d\u52a1\u7aef\u5efa\u7acb\u8fde\u63a5\u3002</li> <li>\u901a\u4fe1\uff1a \u8fde\u63a5\u5efa\u7acb\u540e\uff0c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u7aef\u90fd\u53ef\u4ee5\u4f7f\u7528 <code>send()</code> \u548c <code>recv()</code> \u8fdb\u884c\u6570\u636e\u7684\u53d1\u9001\u548c\u63a5\u6536\u3002TCP \u662f\u5168\u53cc\u5de5\u7684\uff0c\u652f\u6301\u53cc\u5411\u6570\u636e\u6d41\u3002</li> <li>\u7ed3\u675f\uff1a \u901a\u4fe1\u5b8c\u6210\u540e\uff0c\u8c03\u7528 <code>close()</code> \u65ad\u5f00\u8fde\u63a5\u3002</li> </ul> </li> <li>UDP (\u65e0\u8fde\u63a5\u4f20\u8f93): UDP \u5957\u63a5\u5b57\u4e0d\u5efa\u7acb\u8fde\u63a5\uff0c\u76f4\u63a5\u53d1\u9001\u6570\u636e\u62a5\u3002</li> </ul> </li> <li>UNIX Domain Socket (\u672c\u5730\u5957\u63a5\u5b57):<ul> <li>\u5b9a\u4e49\uff1a \u5bf9\u4e8e\u540c\u4e00\u4e3b\u673a\u4e0a\u7684\u4e24\u4e2a\u8fdb\u7a0b\u901a\u4fe1\uff0c\u53ef\u4ee5\u4f7f\u7528 UNIX Domain Socket\u3002\u5b83\u4e0d\u9700\u8981\u7ecf\u8fc7\u7f51\u7edc\u534f\u8bae\u6808\uff0c\u76f4\u63a5\u5728\u64cd\u4f5c\u7cfb\u7edf\u5185\u90e8\u8fdb\u884c\u6570\u636e\u4f20\u8f93\u3002</li> <li>\u5b9e\u73b0\u539f\u7406\uff1a UNIX Domain Socket \u4f7f\u7528\u4e0e\u666e\u901a\u5957\u63a5\u5b57\u51e0\u4e4e\u76f8\u540c\u7684 API\uff0c\u4f46\u5957\u63a5\u5b57\u7c7b\u578b\u8bbe\u7f6e\u4e3a <code>AF_UNIX</code> (\u6216 <code>AF_LOCAL</code>)\u3002\u5b83\u4f1a\u5728\u6587\u4ef6\u7cfb\u7edf\u4e0a\u521b\u5efa\u4e00\u4e2a <code>.sock</code> \u6587\u4ef6\uff0c\u4e0d\u540c\u8fdb\u7a0b\u901a\u8fc7\u8bfb\u5199\u8fd9\u4e2a <code>.sock</code> \u6587\u4ef6\u6765\u5b9e\u73b0\u901a\u4fe1\uff0c\u800c\u4e0d\u662f\u901a\u8fc7\u7f51\u7edc\u63a5\u53e3\u3002\u8fd9\u79cd\u65b9\u5f0f\u6bd4\u901a\u8fc7 LoopBack \u5730\u5740 (127.0.0.1) \u8fdb\u884c TCP/IP \u901a\u4fe1\u66f4\u9ad8\u6548\uff0c\u56e0\u4e3a\u5b83\u907f\u514d\u4e86\u7f51\u7edc\u534f\u8bae\u6808\u7684\u5f00\u9500\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E9%A1%B5%E5%BC%8F%E5%92%8C%E6%AE%B5%E5%BC%8F%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/","title":"\u9875\u5f0f\u548c\u6bb5\u5f0f\u5185\u5b58\u7ba1\u7406","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E9%A1%B5%E5%BC%8F%E5%92%8C%E6%AE%B5%E5%BC%8F%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/#paging","title":"\u9875\u5f0f\u5185\u5b58\u7ba1\u7406 (Paging)","text":"<p>\u9875\u5f0f\u5185\u5b58\u7ba1\u7406\u662f\u76ee\u524d\u6700\u5e38\u7528\u3001\u6700\u4e3b\u6d41\u7684\u865a\u62df\u5185\u5b58\u7ba1\u7406\u65b9\u5f0f\u3002\u5b83\u7684\u6838\u5fc3\u601d\u60f3\u662f\u5c06\u7a0b\u5e8f\uff08\u903b\u8f91\u5730\u5740\u7a7a\u95f4\uff09\u548c\u7269\u7406\u5185\u5b58\u7a7a\u95f4\u90fd\u5212\u5206\u4e3a\u56fa\u5b9a\u5927\u5c0f\u7684\u5757\u3002</p> <p>\u6838\u5fc3\u6982\u5ff5\uff1a</p> <ul> <li>\u9875 (Page)\uff1a \u8fdb\u7a0b\u7684\u903b\u8f91\u5730\u5740\u7a7a\u95f4\u88ab\u5212\u5206\u4e3a\u4e00\u7cfb\u5217\u56fa\u5b9a\u5927\u5c0f\u7684\u5757\uff0c\u79f0\u4e3a\u9875\u3002\u6bcf\u4e2a\u9875\u90fd\u6709\u4e00\u4e2a\u9875\u53f7\uff08Page Number\uff09\u548c\u9875\u5185\u504f\u79fb\u91cf\uff08Offset\uff09\u3002</li> <li>\u9875\u5e27 (Frame / Page Frame)\uff1a \u7269\u7406\u5185\u5b58\u88ab\u5212\u5206\u4e3a\u4e0e\u9875\u76f8\u540c\u5927\u5c0f\u7684\u5757\uff0c\u79f0\u4e3a\u9875\u5e27\u3002\u6bcf\u4e2a\u9875\u5e27\u4e5f\u6709\u4e00\u4e2a\u5e27\u53f7\u3002</li> <li>\u9875\u8868 (Page Table)\uff1a \u64cd\u4f5c\u7cfb\u7edf\u4e3a\u6bcf\u4e2a\u8fdb\u7a0b\u7ef4\u62a4\u4e00\u4e2a\u9875\u8868\u3002\u9875\u8868\u8bb0\u5f55\u4e86\u8fdb\u7a0b\u7684\u6bcf\u4e2a\u865a\u62df\u9875\u4e0e\u5176\u5728\u7269\u7406\u5185\u5b58\u4e2d\u7684\u5bf9\u5e94\u9875\u5e27\u7684\u6620\u5c04\u5173\u7cfb\u3002\u9875\u8868\u7684\u6bcf\u4e00\u9879\u901a\u5e38\u5305\u542b\uff1a<ul> <li>\u9875\u5e27\u53f7\uff1a \u6307\u793a\u8be5\u865a\u62df\u9875\u5728\u7269\u7406\u5185\u5b58\u4e2d\u5bf9\u5e94\u7684\u9875\u5e27\u53f7\u3002</li> <li>\u6709\u6548\u4f4d (Valid/Invalid Bit)\uff1a \u6307\u793a\u8be5\u9875\u662f\u5426\u5f53\u524d\u5728\u7269\u7406\u5185\u5b58\u4e2d\u3002\u5982\u679c\u4e0d\u5728\uff0c\u5219\u4f1a\u89e6\u53d1\u7f3a\u9875\u4e2d\u65ad\u3002</li> <li>\u4fee\u6539\u4f4d (Dirty Bit)\uff1a \u6307\u793a\u8be5\u9875\u5728\u5185\u5b58\u4e2d\u662f\u5426\u88ab\u4fee\u6539\u8fc7\u3002\u5982\u679c\u88ab\u4fee\u6539\uff0c\u5728\u7f6e\u6362\u51fa\u53bb\u65f6\u9700\u8981\u5199\u56de\u78c1\u76d8\u3002</li> <li>\u8bbf\u95ee\u4f4d (Accessed Bit)\uff1a \u6307\u793a\u8be5\u9875\u8fd1\u671f\u662f\u5426\u88ab\u8bbf\u95ee\u8fc7\uff0c\u7528\u4e8e\u9875\u7f6e\u6362\u7b97\u6cd5\u3002</li> <li>\u4fdd\u62a4\u4f4d\uff1a \u63a7\u5236\u9875\u7684\u8bfb/\u5199/\u6267\u884c\u6743\u9650\u3002</li> </ul> </li> </ul> <p>\u5730\u5740\u8f6c\u6362\u8fc7\u7a0b\uff1a</p> <p>\u5f53CPU\u751f\u6210\u4e00\u4e2a\u865a\u62df\u5730\u5740\u65f6\uff0c\u5185\u5b58\u7ba1\u7406\u5355\u5143\uff08MMU\uff09\u4f1a\u8fdb\u884c\u4ee5\u4e0b\u8f6c\u6362\uff1a 1.  \u89e3\u6790\u865a\u62df\u5730\u5740\uff1a \u865a\u62df\u5730\u5740\u88ab\u5206\u6210\u4e24\u90e8\u5206\uff1a\u9875\u53f7 (P) \u548c \u9875\u5185\u504f\u79fb\u91cf (D)\u3002     *   <code>\u865a\u62df\u5730\u5740 = (P, D)</code> 2.  \u67e5\u627e\u9875\u8868\uff1a MMU\u4f7f\u7528\u9875\u53f7P\u4f5c\u4e3a\u7d22\u5f15\uff0c\u5728\u5f53\u524d\u8fdb\u7a0b\u7684\u9875\u8868\u4e2d\u67e5\u627e\u5bf9\u5e94\u7684\u9875\u8868\u9879\u3002 3.  \u83b7\u53d6\u7269\u7406\u9875\u5e27\u53f7\uff1a \u4ece\u9875\u8868\u9879\u4e2d\u83b7\u53d6\u5230\u5bf9\u5e94\u7684\u7269\u7406\u9875\u5e27\u53f7 (F)\u3002 4.  \u6784\u5efa\u7269\u7406\u5730\u5740\uff1a \u5c06\u7269\u7406\u9875\u5e27\u53f7F\u4e0e\u9875\u5185\u504f\u79fb\u91cfD\u7ec4\u5408\u8d77\u6765\uff0c\u5f62\u6210\u6700\u7ec8\u7684\u7269\u7406\u5730\u5740\u3002     *   <code>\u7269\u7406\u5730\u5740 = (F, D)</code></p> <p>\u9875\u5f0f\u5185\u5b58\u7ba1\u7406\u7684\u4f18\u70b9\uff1a</p> <ul> <li>\u6d88\u9664\u5916\u90e8\u788e\u7247\uff1a \u7531\u4e8e\u9875\u548c\u9875\u5e27\u5927\u5c0f\u56fa\u5b9a\u4e14\u53ef\u4ee5\u4e0d\u8fde\u7eed\u5b58\u653e\uff0c\u6240\u4ee5\u4e0d\u4f1a\u4ea7\u751f\u5c0f\u7684\u3001\u65e0\u6cd5\u5229\u7528\u7684\u5185\u5b58\u788e\u7247\uff08\u5916\u90e8\u788e\u7247\uff09\u3002\uff08\u4f46\u53ef\u80fd\u4f1a\u6709\u5c11\u91cf\u5185\u90e8\u788e\u7247\uff0c\u5373\u4e00\u4e2a\u9875\u7684\u6700\u540e\u4e00\u4e2a\u5757\u53ef\u80fd\u6ca1\u88ab\u5b8c\u5168\u5229\u7528\uff09\u3002</li> <li>\u5b9e\u73b0\u865a\u62df\u5185\u5b58\uff1a \u7269\u7406\u5185\u5b58\u4e0d\u5fc5\u8fde\u7eed\uff0c\u8fdb\u7a0b\u7684\u903b\u8f91\u5730\u5740\u7a7a\u95f4\u53ef\u4ee5\u8fdc\u5927\u4e8e\u7269\u7406\u5185\u5b58\u3002</li> <li>\u5185\u5b58\u9694\u79bb\u548c\u4fdd\u62a4\uff1a \u6bcf\u4e2a\u8fdb\u7a0b\u6709\u72ec\u7acb\u7684\u9875\u8868\uff0c\u53ef\u4ee5\u6709\u6548\u9694\u79bb\u8fdb\u7a0b\u5185\u5b58\uff0c\u9632\u6b62\u76f8\u4e92\u5e72\u6270\u3002\u9875\u8868\u4e2d\u7684\u4fdd\u62a4\u4f4d\u53ef\u4ee5\u63a7\u5236\u8bbf\u95ee\u6743\u9650\u3002</li> <li>\u7b80\u5316\u5185\u5b58\u5206\u914d\uff1a \u64cd\u4f5c\u7cfb\u7edf\u53ea\u9700\u8981\u627e\u5230\u4e00\u4e2a\u7a7a\u95f2\u9875\u5e27\u5373\u53ef\uff0c\u65e0\u9700\u5bfb\u627e\u8fde\u7eed\u7684\u5927\u5757\u5185\u5b58\u3002</li> <li>\u5171\u4eab\u4ee3\u7801\u548c\u6570\u636e\uff1a \u53ef\u4ee5\u901a\u8fc7\u8ba9\u4e0d\u540c\u8fdb\u7a0b\u7684\u9875\u8868\u9879\u6307\u5411\u540c\u4e00\u4e2a\u7269\u7406\u9875\u5e27\u6765\u5b9e\u73b0\u4ee3\u7801\u6216\u6570\u636e\u7684\u5171\u4eab\uff08\u4f8b\u5982\u5171\u4eab\u5e93\uff09\u3002</li> </ul> <p>\u9875\u5f0f\u5185\u5b58\u7ba1\u7406\u7684\u7f3a\u70b9\uff1a</p> <ul> <li>\u5185\u90e8\u788e\u7247\uff1a \u7531\u4e8e\u9875\u5927\u5c0f\u56fa\u5b9a\uff0c\u4e00\u4e2a\u8fdb\u7a0b\u7684\u6700\u540e\u4e00\u4e2a\u9875\u53ef\u80fd\u65e0\u6cd5\u5b8c\u5168\u586b\u6ee1\uff0c\u5bfc\u81f4\u9875\u5185\u672a\u4f7f\u7528\u7684\u7a7a\u95f4\u6210\u4e3a\u5185\u90e8\u788e\u7247\u3002</li> <li>\u9875\u8868\u8fc7\u5927\uff1a \u5982\u679c\u865a\u62df\u5730\u5740\u7a7a\u95f4\u5f88\u5927\uff0c\u9875\u8868\u4f1a\u975e\u5e38\u5927\u3002\u4f8b\u5982\uff0c64\u4f4d\u7cfb\u7edf\u4e0b\uff0c\u9875\u8868\u53ef\u80fd\u9700\u8981\u591a\u7ea7\u7ed3\u6784\u624d\u80fd\u7ba1\u7406\u3002</li> <li>\u5730\u5740\u8f6c\u6362\u5f00\u9500\uff1a \u6bcf\u6b21\u5185\u5b58\u8bbf\u95ee\u90fd\u9700\u8981\u67e5\u4e24\u6b21\u5185\u5b58\uff08\u4e00\u6b21\u67e5\u9875\u8868\uff0c\u4e00\u6b21\u67e5\u5b9e\u9645\u6570\u636e\uff09\u3002\u867d\u7136TLB\uff08Translation Lookaside Buffer\uff09\u7f13\u5b58\u53ef\u4ee5\u7f13\u89e3\u8fd9\u4e2a\u95ee\u9898\uff0c\u4f46\u4ecd\u7136\u662f\u989d\u5916\u7684\u5f00\u9500\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E9%A1%B5%E5%BC%8F%E5%92%8C%E6%AE%B5%E5%BC%8F%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/#segmentation","title":"\u6bb5\u5f0f\u5185\u5b58\u7ba1\u7406 (Segmentation)","text":"<p>\u6bb5\u5f0f\u5185\u5b58\u7ba1\u7406\u8bd5\u56fe\u4ece\u7a0b\u5e8f\u5458\u7684\u89d2\u5ea6\u6765\u7ec4\u7ec7\u5185\u5b58\uff0c\u5b83\u5c06\u7a0b\u5e8f\u7684\u903b\u8f91\u5730\u5740\u7a7a\u95f4\u5212\u5206\u4e3a\u4e00\u7cfb\u5217\u903b\u8f91\u5355\u5143\uff0c\u8fd9\u4e9b\u903b\u8f91\u5355\u5143\u88ab\u79f0\u4e3a\u201c\u6bb5\u201d\u3002\u6bcf\u4e2a\u6bb5\u90fd\u6709\u5176\u72ec\u7acb\u7684\u903b\u8f91\u610f\u4e49\u548c\u5927\u5c0f\uff0c\u4f8b\u5982\u4ee3\u7801\u6bb5\u3001\u6570\u636e\u6bb5\u3001\u5806\u6808\u6bb5\u7b49\u3002</p> <p>\u6838\u5fc3\u6982\u5ff5\uff1a</p> <ul> <li>\u6bb5 (Segment)\uff1a \u8fdb\u7a0b\u7684\u903b\u8f91\u5730\u5740\u7a7a\u95f4\u88ab\u5212\u5206\u4e3a\u4e0d\u5b9a\u957f\u3001\u5177\u6709\u903b\u8f91\u610f\u4e49\u7684\u6bb5\u3002\u6bcf\u4e2a\u6bb5\u90fd\u6709\u4e00\u4e2a\u6bb5\u53f7\uff08Segment Number\uff09\u548c\u6bb5\u5185\u504f\u79fb\u91cf\uff08Offset\uff09\u3002</li> <li>\u6bb5\u8868 (Segment Table)\uff1a \u64cd\u4f5c\u7cfb\u7edf\u4e3a\u6bcf\u4e2a\u8fdb\u7a0b\u7ef4\u62a4\u4e00\u4e2a\u6bb5\u8868\u3002\u6bb5\u8868\u8bb0\u5f55\u4e86\u8fdb\u7a0b\u7684\u6bcf\u4e2a\u903b\u8f91\u6bb5\u5728\u7269\u7406\u5185\u5b58\u4e2d\u7684\u8d77\u59cb\u5730\u5740\u548c\u957f\u5ea6\uff08\u754c\u9650\uff09\u3002\u6bb5\u8868\u7684\u6bcf\u4e00\u9879\u901a\u5e38\u5305\u542b\uff1a<ul> <li>\u57fa\u5740 (Base Address)\uff1a \u8be5\u6bb5\u5728\u7269\u7406\u5185\u5b58\u4e2d\u7684\u8d77\u59cb\u5730\u5740\u3002</li> <li>\u754c\u9650 (Limit / Length)\uff1a \u8be5\u6bb5\u7684\u957f\u5ea6\u3002</li> <li>\u4fdd\u62a4\u4f4d\uff1a \u63a7\u5236\u6bb5\u7684\u8bfb/\u5199/\u6267\u884c\u6743\u9650\u3002</li> </ul> </li> </ul> <p>\u5730\u5740\u8f6c\u6362\u8fc7\u7a0b\uff1a</p> <p>\u5f53CPU\u751f\u6210\u4e00\u4e2a\u865a\u62df\u5730\u5740\u65f6\uff0cMMU\u4f1a\u8fdb\u884c\u4ee5\u4e0b\u8f6c\u6362\uff1a 1.  \u89e3\u6790\u865a\u62df\u5730\u5740\uff1a \u865a\u62df\u5730\u5740\u88ab\u5206\u6210\u4e24\u90e8\u5206\uff1a\u6bb5\u53f7 (S) \u548c \u6bb5\u5185\u504f\u79fb\u91cf (D)\u3002     *   <code>\u865a\u62df\u5730\u5740 = (S, D)</code> 2.  \u67e5\u627e\u6bb5\u8868\uff1a MMU\u4f7f\u7528\u6bb5\u53f7S\u4f5c\u4e3a\u7d22\u5f15\uff0c\u5728\u5f53\u524d\u8fdb\u7a0b\u7684\u6bb5\u8868\u4e2d\u67e5\u627e\u5bf9\u5e94\u7684\u6bb5\u8868\u9879\u3002 3.  \u8fb9\u754c\u68c0\u67e5\uff1a \u68c0\u67e5\u6bb5\u5185\u504f\u79fb\u91cfD\u662f\u5426\u5c0f\u4e8e\u7b49\u4e8e\u8be5\u6bb5\u7684\u754c\u9650\u503c\u3002\u5982\u679c<code>D &gt; \u754c\u9650</code>\uff0c\u5219\u8868\u793a\u8d8a\u754c\u8bbf\u95ee\uff0c\u4f1a\u89e6\u53d1\u786c\u4ef6\u5f02\u5e38\u3002 4.  \u8ba1\u7b97\u7269\u7406\u5730\u5740\uff1a \u5982\u679c\u672a\u8d8a\u754c\uff0c\u5219\u5c06\u8be5\u6bb5\u7684\u57fa\u5740\u4e0e\u6bb5\u5185\u504f\u79fb\u91cfD\u76f8\u52a0\uff0c\u5f97\u5230\u6700\u7ec8\u7684\u7269\u7406\u5730\u5740\u3002     *   <code>\u7269\u7406\u5730\u5740 = \u57fa\u5740 + D</code></p> <p>\u6bb5\u5f0f\u5185\u5b58\u7ba1\u7406\u7684\u4f18\u70b9\uff1a</p> <ul> <li>\u7b26\u5408\u7a0b\u5e8f\u5458\u903b\u8f91\uff1a \u4ee5\u903b\u8f91\u5355\u5143\uff08\u4ee3\u7801\u3001\u6570\u636e\u3001\u5806\u6808\uff09\u5212\u5206\uff0c\u65b9\u4fbf\u7a0b\u5e8f\u5458\u8fdb\u884c\u7a0b\u5e8f\u8bbe\u8ba1\u548c\u7ba1\u7406\u3002</li> <li>\u6613\u4e8e\u5b9e\u73b0\u5171\u4eab\u548c\u4fdd\u62a4\uff1a \u4ee5\u6bb5\u4e3a\u5355\u4f4d\u8fdb\u884c\u4fdd\u62a4\u548c\u5171\u4eab\uff0c\u4f8b\u5982\u591a\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u5171\u4eab\u540c\u4e00\u4e2a\u4ee3\u7801\u6bb5\u3002</li> <li>\u52a8\u6001\u589e\u957f\uff1a \u67d0\u4e9b\u6bb5\uff08\u5982\u5806\u6808\uff09\u53ef\u4ee5\u6839\u636e\u9700\u8981\u52a8\u6001\u589e\u957f\uff0c\u53ea\u9700\u4fee\u6539\u6bb5\u8868\u4e2d\u7684\u754c\u9650\u503c\u5373\u53ef\u3002</li> </ul> <p>\u6bb5\u5f0f\u5185\u5b58\u7ba1\u7406\u7684\u7f3a\u70b9\uff1a</p> <ul> <li>\u5916\u90e8\u788e\u7247\uff1a \u7531\u4e8e\u6bb5\u7684\u957f\u5ea6\u4e0d\u56fa\u5b9a\uff0c\u5728\u5185\u5b58\u4e2d\u4f1a\u4ea7\u751f\u5927\u5c0f\u4e0d\u4e00\u7684\u7a7a\u95f2\u5757\uff0c\u8fd9\u4e9b\u5c0f\u5757\u5185\u5b58\u53ef\u80fd\u65e0\u6cd5\u88ab\u540e\u7eed\u7684\u8fdb\u7a0b\u5229\u7528\uff0c\u5bfc\u81f4\u5916\u90e8\u788e\u7247\u95ee\u9898\u3002</li> <li>\u5185\u5b58\u5206\u914d\u590d\u6742\uff1a \u64cd\u4f5c\u7cfb\u7edf\u9700\u8981\u5bfb\u627e\u5927\u5c0f\u5408\u9002\u7684\u8fde\u7eed\u5185\u5b58\u5757\u6765\u653e\u7f6e\u6bb5\uff0c\u8fd9\u6bd4\u9875\u5f0f\u7ba1\u7406\u66f4\u590d\u6742\u3002</li> <li>\u5730\u5740\u8f6c\u6362\u5f00\u9500\uff1a \u540c\u6837\u9700\u8981\u67e5\u4e24\u6b21\u5185\u5b58\uff08\u4e00\u6b21\u67e5\u6bb5\u8868\uff0c\u4e00\u6b21\u67e5\u5b9e\u9645\u6570\u636e\uff09\uff0c\u5e76\u4e14\u9700\u8981\u8fdb\u884c\u8fb9\u754c\u68c0\u67e5\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E9%A1%B5%E5%BC%8F%E5%92%8C%E6%AE%B5%E5%BC%8F%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/#segmented-paging","title":"\u6bb5\u9875\u5f0f\u5185\u5b58\u7ba1\u7406 (Segmented Paging)","text":"<p>\u73b0\u4ee3\u64cd\u4f5c\u7cfb\u7edf\u4e3a\u4e86\u7ed3\u5408\u4e24\u8005\u7684\u4f18\u70b9\u5e76\u89c4\u907f\u5b83\u4eec\u7684\u7f3a\u70b9\uff0c\u5e38\u5e38\u91c7\u7528\u6bb5\u9875\u5f0f\u5185\u5b58\u7ba1\u7406\u3002\u5b83\u5c06\u7a0b\u5e8f\u7684\u903b\u8f91\u5730\u5740\u7a7a\u95f4\u5148\u5212\u5206\u4e3a\u591a\u4e2a\u6bb5\uff0c\u6bcf\u4e2a\u6bb5\u518d\u7ec6\u5206\u4e3a\u591a\u4e2a\u9875\u3002</p> <p>\u6838\u5fc3\u6982\u5ff5\uff1a</p> <ul> <li>\u6bb5\u8868\uff1a \u6bcf\u4e2a\u8fdb\u7a0b\u6709\u4e00\u4e2a\u6bb5\u8868\uff0c\u8bb0\u5f55\u4e86\u6bcf\u4e2a\u6bb5\u7684\u57fa\u5740\u548c\u957f\u5ea6\u3002\u8fd9\u91cc\u7684\u201c\u57fa\u5740\u201d\u4e0d\u518d\u662f\u7269\u7406\u5730\u5740\uff0c\u800c\u662f\u6307\u5411\u8be5\u6bb5\u5bf9\u5e94\u7684\u201c\u9875\u8868\u201d\u7684\u7269\u7406\u5730\u5740\uff08\u9875\u8868\u57fa\u5740\uff09\u3002</li> <li>\u9875\u8868\uff1a \u6bcf\u4e2a\u6bb5\u90fd\u6709\u4e00\u4e2a\u81ea\u5df1\u7684\u9875\u8868\u3002\u9875\u8868\u8bb0\u5f55\u4e86\u8be5\u6bb5\u5185\u90e8\u7684\u865a\u62df\u9875\u5230\u7269\u7406\u9875\u5e27\u7684\u6620\u5c04\u5173\u7cfb\u3002</li> </ul> <p>\u5730\u5740\u8f6c\u6362\u8fc7\u7a0b\uff1a</p> <p>\u5f53CPU\u751f\u6210\u4e00\u4e2a\u865a\u62df\u5730\u5740\u65f6\uff1a 1.  \u89e3\u6790\u865a\u62df\u5730\u5740\uff1a \u865a\u62df\u5730\u5740\u88ab\u5206\u6210\u4e09\u90e8\u5206\uff1a\u6bb5\u53f7 (S)\u3001\u9875\u53f7 (P) \u548c \u9875\u5185\u504f\u79fb\u91cf (D)\u3002     *   <code>\u865a\u62df\u5730\u5740 = (S, P, D)</code> 2.  \u67e5\u627e\u6bb5\u8868\uff1a MMU\u4f7f\u7528\u6bb5\u53f7S\u67e5\u627e\u8fdb\u7a0b\u7684\u6bb5\u8868\uff0c\u83b7\u53d6\u8be5\u6bb5\u5bf9\u5e94\u7684\u9875\u8868\u8d77\u59cb\u5730\u5740\u548c\u957f\u5ea6\u3002 3.  \u8fb9\u754c\u68c0\u67e5\uff1a \u68c0\u67e5\u9875\u53f7P\u662f\u5426\u5728\u8be5\u6bb5\u7684\u9875\u8868\u8303\u56f4\u5185\uff08\u5373<code>P &lt; \u6bb5\u957f\u5ea6/\u9875\u5927\u5c0f</code>\uff09\u3002 4.  \u67e5\u627e\u9875\u8868\uff1a \u6839\u636e\u6bb5\u8868\u83b7\u53d6\u7684\u9875\u8868\u8d77\u59cb\u5730\u5740\u548c\u9875\u53f7P\uff0c\u627e\u5230\u5bf9\u5e94\u7684\u9875\u8868\u9879\u3002 5.  \u83b7\u53d6\u7269\u7406\u9875\u5e27\u53f7\uff1a \u4ece\u9875\u8868\u9879\u4e2d\u83b7\u53d6\u7269\u7406\u9875\u5e27\u53f7 (F)\u3002 6.  \u6784\u5efa\u7269\u7406\u5730\u5740\uff1a \u5c06\u7269\u7406\u9875\u5e27\u53f7F\u4e0e\u9875\u5185\u504f\u79fb\u91cfD\u7ec4\u5408\uff0c\u5f97\u5230\u6700\u7ec8\u7684\u7269\u7406\u5730\u5740\u3002     *   <code>\u7269\u7406\u5730\u5740 = (F, D)</code></p> <p>\u6bb5\u9875\u5f0f\u5185\u5b58\u7ba1\u7406\u7684\u4f18\u70b9\uff1a</p> <ul> <li>\u7ed3\u5408\u4f18\u70b9\uff1a \u65e2\u4fdd\u7559\u4e86\u6bb5\u5f0f\u7ba1\u7406\u6309\u903b\u8f91\u5355\u5143\u5212\u5206\u7684\u4f18\u70b9\uff08\u6613\u4e8e\u5171\u4eab\u3001\u4fdd\u62a4\u548c\u52a8\u6001\u589e\u957f\uff09\uff0c\u53c8\u5229\u7528\u4e86\u9875\u5f0f\u7ba1\u7406\u6d88\u9664\u5916\u90e8\u788e\u7247\u7684\u4f18\u70b9\u3002\u56e0\u4e3a\u6bcf\u4e2a\u6bb5\u5185\u90e8\u662f\u4ee5\u9875\u4e3a\u5355\u4f4d\u8fdb\u884c\u5206\u914d\u7684\uff0c\u6240\u4ee5\u6bb5\u672c\u8eab\u65e0\u9700\u5360\u636e\u8fde\u7eed\u7684\u7269\u7406\u5185\u5b58\u3002</li> <li>\u66f4\u7ec6\u7c92\u5ea6\u7684\u63a7\u5236\uff1a \u53ef\u4ee5\u5bf9\u6bcf\u4e2a\u6bb5\u751a\u81f3\u6bcf\u4e2a\u9875\u8fdb\u884c\u72ec\u7acb\u7684\u4fdd\u62a4\u548c\u7ba1\u7406\u3002</li> </ul> <p>\u6bb5\u9875\u5f0f\u5185\u5b58\u7ba1\u7406\u7684\u7f3a\u70b9\uff1a</p> <ul> <li>\u5730\u5740\u8f6c\u6362\u6b21\u6570\u589e\u52a0\uff1a \u6bcf\u6b21\u5185\u5b58\u8bbf\u95ee\u53ef\u80fd\u9700\u8981\u4e09\u6b21\u5185\u5b58\u8bbf\u95ee\uff08\u4e00\u6b21\u67e5\u6bb5\u8868\uff0c\u4e00\u6b21\u67e5\u9875\u8868\uff0c\u4e00\u6b21\u67e5\u5b9e\u9645\u6570\u636e\uff09\uff0c\u8fdb\u4e00\u6b65\u589e\u52a0\u4e86\u5730\u5740\u8f6c\u6362\u7684\u5f00\u9500\u3002TLB\u5728\u8fd9\u91cc\u7684\u4f5c\u7528\u66f4\u4e3a\u5173\u952e\u3002</li> <li>\u7ba1\u7406\u590d\u6742\uff1a \u64cd\u4f5c\u7cfb\u7edf\u9700\u8981\u540c\u65f6\u7ba1\u7406\u6bb5\u8868\u548c\u591a\u4e2a\u9875\u8868\uff0c\u589e\u52a0\u4e86\u7ba1\u7406\u7684\u590d\u6742\u6027\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/B%2B%E6%A0%91%E3%80%81B%E6%A0%91%E5%92%8C%E7%BA%A2%E9%BB%91%E6%A0%91%E4%BB%8B%E7%BB%8D/","title":"B+\u6811\u3001B\u6811\u548c\u7ea2\u9ed1\u6811\u4ecb\u7ecd","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/B%2B%E6%A0%91%E3%80%81B%E6%A0%91%E5%92%8C%E7%BA%A2%E9%BB%91%E6%A0%91%E4%BB%8B%E7%BB%8D/#red-black-tree","title":"\u7ea2\u9ed1\u6811\uff08Red-Black Tree\uff09","text":"<ol> <li> <p>\u7279\u70b9\uff1a</p> <ul> <li>\u672c\u8d28\u4e0a\u662f\u4e00\u79cd\u81ea\u5e73\u8861\u7684\u4e8c\u53c9\u67e5\u627e\u6811\uff08Binary Search Tree\uff09\u3002</li> <li>\u6bcf\u4e2a\u8282\u70b9\u8981\u4e48\u662f\u7ea2\u8272\uff0c\u8981\u4e48\u662f\u9ed1\u8272\u3002</li> <li>\u901a\u8fc7\u4e00\u5957\u4e25\u683c\u7684\u7740\u8272\u89c4\u5219\u6765\u7ef4\u6301\u6811\u7684\u5e73\u8861\uff1a<ol> <li>\u6bcf\u4e2a\u8282\u70b9\u975e\u7ea2\u5373\u9ed1\u3002</li> <li>\u6839\u8282\u70b9\u662f\u9ed1\u8272\u7684\u3002</li> <li>\u6240\u6709\u53f6\u5b50\u8282\u70b9\uff08NIL\u8282\u70b9\uff0c\u7a7a\u8282\u70b9\uff09\u90fd\u662f\u9ed1\u8272\u7684\u3002</li> <li>\u5982\u679c\u4e00\u4e2a\u8282\u70b9\u662f\u7ea2\u8272\u7684\uff0c\u5219\u5b83\u7684\u4e24\u4e2a\u5b50\u8282\u70b9\u5fc5\u987b\u662f\u9ed1\u8272\u7684\uff08\u4e0d\u80fd\u6709\u4e24\u4e2a\u8fde\u7eed\u7684\u7ea2\u8272\u8282\u70b9\uff09\u3002</li> <li>\u4ece\u4efb\u4e00\u8282\u70b9\u5230\u5176\u6bcf\u4e2a\u53f6\u5b50\u8282\u70b9\u7684\u6240\u6709\u8def\u5f84\u90fd\u5305\u542b\u76f8\u540c\u6570\u76ee\u7684\u9ed1\u8272\u8282\u70b9\uff08\u9ed1\u9ad8\uff09\u3002</li> </ol> </li> <li>\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u540e\uff0c\u53ef\u80fd\u4f1a\u7834\u574f\u8fd9\u4e9b\u89c4\u5219\uff0c\u6b64\u65f6\u901a\u8fc7\u65cb\u8f6c\uff08Rotation\uff09\u548c\u989c\u8272\u7ffb\u8f6c\uff08Color-Flipping\uff09\u7b49\u64cd\u4f5c\u6765\u91cd\u65b0\u8c03\u6574\u6811\u7684\u7ed3\u6784\uff0c\u4f7f\u5176\u6062\u590d\u5e73\u8861\u3002</li> <li>\u6811\u7684\u9ad8\u5ea6\u8fd1\u4f3c\u4e8e<code>log N</code>\uff08N\u662f\u8282\u70b9\u6570\uff09\uff0c\u4fdd\u8bc1\u4e86\u67e5\u627e\u3001\u63d2\u5165\u3001\u5220\u9664\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u90fd\u662fO(log N)\u3002</li> </ul> </li> <li> <p>\u9002\u7528\u573a\u666f\uff1a</p> <ul> <li>\u4e3b\u8981\u7528\u4e8e\u5185\u5b58\u4e2d\u7684\u6570\u636e\u7ed3\u6784\u3002\u56e0\u4e3a\u5b83\u7684\u5e73\u8861\u8c03\u6574\u64cd\u4f5c\uff08\u65cb\u8f6c\u548c\u53d8\u8272\uff09\u6bd4\u8f83\u9891\u7e41\u4e14\u7ec6\u7c92\u5ea6\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u5728\u5185\u5b58\u4e2d\u975e\u5e38\u5feb\u3002</li> <li>\u4f8b\u5982\uff0cJava\u4e2d\u7684<code>TreeMap</code>, <code>TreeSet</code>\uff1bC++ STL\u4e2d\u7684<code>map</code>, <code>set</code>\uff1bLinux\u5185\u6838\u4e2d\u7684\u5b8c\u5168\u516c\u5e73\u8c03\u5ea6\u5668\uff08CFS\uff09\u548c\u865a\u62df\u5185\u5b58\u7ba1\u7406\u7b49\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/B%2B%E6%A0%91%E3%80%81B%E6%A0%91%E5%92%8C%E7%BA%A2%E9%BB%91%E6%A0%91%E4%BB%8B%E7%BB%8D/#bb-tree","title":"B\u6811\uff08B-Tree\uff09","text":"<ol> <li> <p>\u7279\u70b9\uff1a</p> <ul> <li>\u662f\u4e00\u79cd\u591a\u8def\uff08multi-way\uff09\u5e73\u8861\u67e5\u627e\u6811\uff0c\u4e0d\u662f\u4e8c\u53c9\u6811\u3002\u6bcf\u4e2a\u8282\u70b9\u53ef\u4ee5\u6709\u591a\u4e2a\u5b50\u8282\u70b9\u3002</li> <li>\u4e00\u4e2am\u9636\u7684B\u6811\uff0c\u6bcf\u4e2a\u975e\u53f6\u5b50\u8282\u70b9\u6700\u591a\u6709m\u4e2a\u5b50\u8282\u70b9\uff0c\u6700\u5c11\u6709<code>ceil(m/2)</code>\u4e2a\u5b50\u8282\u70b9\u3002</li> <li>\u6240\u6709\u53f6\u5b50\u8282\u70b9\u90fd\u5728\u540c\u4e00\u5c42\u7ea7\uff0c\u4fdd\u6301\u4e86\u6811\u7684\u5e73\u8861\u3002</li> <li>\u6570\u636e\uff08\u6216\u6307\u5411\u6570\u636e\u7684\u6307\u9488\uff09\u5b58\u50a8\u5728\u6240\u6709\u7684\u8282\u70b9\u4e2d\uff0c\u5305\u62ec\u5185\u90e8\u8282\u70b9\u548c\u53f6\u5b50\u8282\u70b9\u3002</li> <li>\u6bcf\u4e2a\u8282\u70b9\u53ef\u4ee5\u5b58\u50a8\u591a\u4e2a\u952e\uff0c\u8282\u70b9\u5185\u7684\u952e\u662f\u6709\u5e8f\u7684\u3002</li> <li>\u8282\u70b9\u7684\u5927\u5c0f\u901a\u5e38\u8bbe\u8ba1\u4e3a\u4e0e\u78c1\u76d8\u5757\uff08\u6216\u9875\uff09\u7684\u5927\u5c0f\u76f8\u5339\u914d\uff0c\u4ee5\u4f18\u5316\u78c1\u76d8I/O\u3002</li> </ul> </li> <li> <p>\u9002\u7528\u573a\u666f\uff1a</p> <ul> <li>\u4e3b\u8981\u7528\u4e8e\u78c1\u76d8\u7b49\u5916\u90e8\u5b58\u50a8\u8bbe\u5907\u4e0a\u7684\u6570\u636e\u7d22\u5f15\u3002\u56e0\u4e3a\u78c1\u76d8I/O\u7684\u6210\u672c\u8fdc\u9ad8\u4e8e\u5185\u5b58\u8bbf\u95ee\uff0cB\u6811\u7684\u591a\u8def\u7279\u6027\u4f7f\u5f97\u6811\u7684\u9ad8\u5ea6\u975e\u5e38\u4f4e\uff08O(log_m N)\uff09\uff0c\u4ece\u800c\u5927\u5927\u51cf\u5c11\u4e86\u67e5\u627e\u6570\u636e\u65f6\u6240\u9700\u7684\u78c1\u76d8I/O\u6b21\u6570\u3002</li> <li>\u4f8b\u5982\uff0c\u4e00\u4e9b\u6587\u4ef6\u7cfb\u7edf\u548c\u975e\u5173\u7cfb\u578b\u6570\u636e\u5e93\uff08NoSQL\uff09\u53ef\u80fd\u4f1a\u4f7f\u7528B\u6811\u6216\u5176\u53d8\u4f53\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/B%2B%E6%A0%91%E3%80%81B%E6%A0%91%E5%92%8C%E7%BA%A2%E9%BB%91%E6%A0%91%E4%BB%8B%E7%BB%8D/#bb-tree_1","title":"B+\u6811\uff08B+-Tree\uff09","text":"<ol> <li> <p>\u7279\u70b9\uff1a</p> <ul> <li>\u662fB\u6811\u7684\u4e00\u79cd\u53d8\u4f53\uff0c\u540c\u6837\u662f\u591a\u8def\u5e73\u8861\u67e5\u627e\u6811\u3002</li> <li>\u4e0eB\u6811\u6700\u6838\u5fc3\u7684\u533a\u522b\u5728\u4e8e\u6570\u636e\u5b58\u50a8\u65b9\u5f0f\uff1a<ul> <li>\u6240\u6709\u7684\u6570\u636e\u8bb0\u5f55\u90fd\u53ea\u5b58\u50a8\u5728\u53f6\u5b50\u8282\u70b9\u4e0a\u3002</li> <li>\u5185\u90e8\u8282\u70b9\uff08\u975e\u53f6\u5b50\u8282\u70b9\uff09\u53ea\u5b58\u50a8\u952e\uff08\u4f5c\u4e3a\u7d22\u5f15\uff09\u548c\u6307\u5411\u5b50\u8282\u70b9\u7684\u6307\u9488\uff0c\u4e0d\u5b58\u50a8\u4efb\u4f55\u4e0e\u952e\u5173\u8054\u7684\u6570\u636e\u3002</li> </ul> </li> <li>\u6240\u6709\u53f6\u5b50\u8282\u70b9\u901a\u8fc7\u6307\u9488\u4e32\u8054\u8d77\u6765\uff0c\u5f62\u6210\u4e00\u4e2a\u6709\u5e8f\u7684\u53cc\u5411\uff08\u6216\u5355\u5411\uff09\u94fe\u8868\u3002</li> <li>\u5185\u90e8\u8282\u70b9\u4e2d\u7684\u952e\u4f1a\u5197\u4f59\u5730\u51fa\u73b0\u5728\u5176\u5b50\u6811\u7684\u53f6\u5b50\u8282\u70b9\u4e2d\uff08\u4f5c\u4e3a\u7d22\u5f15\u6216\u8fb9\u754c\uff09\u3002</li> </ul> </li> <li> <p>\u9002\u7528\u573a\u666f\uff1a</p> <ul> <li>\u7edd\u5927\u591a\u6570\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684\u7d22\u5f15\u7ed3\u6784\uff0c\u7279\u522b\u662f\u50cfMySQL\u7684InnoDB\u5b58\u50a8\u5f15\u64ce\u3002</li> <li>\u6587\u4ef6\u7cfb\u7edf\u7d22\u5f15\u3002</li> </ul> </li> </ol> \u7279\u6027 B\u6811 B+\u6811 \u7ea2\u9ed1\u6811 \u57fa\u672c\u7ed3\u6784 \u591a\u8def\u5e73\u8861\u67e5\u627e\u6811 B\u6811\u7684\u53d8\u79cd\uff0c\u591a\u8def\u5e73\u8861\u67e5\u627e\u6811 \u8fd1\u4f3c\u5e73\u8861\u7684\u4e8c\u53c9\u67e5\u627e\u6811 \u6570\u636e\u5b58\u50a8 \u6240\u6709\u8282\u70b9\uff08\u5185\u90e8\u8282\u70b9\u548c\u53f6\u5b50\u8282\u70b9\uff09\u90fd\u5b58\u50a8\u5173\u952e\u5b57\u548c\u6570\u636e\u3002 \u53ea\u6709\u53f6\u5b50\u8282\u70b9\u5b58\u50a8\u6570\u636e\uff0c\u5185\u90e8\u8282\u70b9\u4ec5\u5b58\u50a8\u5173\u952e\u5b57\u4f5c\u4e3a\u7d22\u5f15\u3002 \u6240\u6709\u8282\u70b9\u90fd\u5b58\u50a8\u5173\u952e\u5b57\u548c\u6570\u636e\u3002 \u8303\u56f4\u67e5\u8be2 \u6548\u7387\u8f83\u4f4e\uff0c\u9700\u8981\u8fdb\u884c\u4e2d\u5e8f\u904d\u5386\u3002 \u6548\u7387\u6781\u9ad8\uff0c\u53ea\u9700\u5728\u53f6\u5b50\u8282\u70b9\u7684\u94fe\u8868\u4e0a\u8fdb\u884c\u904d\u5386\u3002 \u6548\u7387\u8f83\u4f4e\uff0c\u9700\u8981\u4e2d\u5e8f\u904d\u5386\u3002 \u78c1\u76d8I/O \u6811\u7684\u9ad8\u5ea6\u76f8\u5bf9\u8f83\u4f4e\uff0cI/O\u6b21\u6570\u5c11\u3002\u4f46\u5185\u90e8\u8282\u70b9\u8f83\u5927\uff0c\u5360\u7528\u66f4\u591a\u78c1\u76d8\u7a7a\u95f4\u3002 \u6811\u7684\u9ad8\u5ea6\u901a\u5e38\u6bd4B\u6811\u66f4\u4f4e\uff0cI/O\u6b21\u6570\u66f4\u5c11\uff0c\u5bf9\u78c1\u76d8\u66f4\u53cb\u597d\u3002 \u6811\u7684\u9ad8\u5ea6\u76f8\u5bf9\u8f83\u9ad8\uff0cI/O\u64cd\u4f5c\u6b21\u6570\u591a\uff0c\u4e0d\u9002\u5408\u5916\u5b58\u5b58\u50a8\u3002 \u67e5\u8be2\u6548\u7387 \u4e0d\u7a33\u5b9a\uff0c\u6700\u597d\u7684\u60c5\u51b5\u53ef\u80fd\u5728\u6839\u8282\u70b9\u76f4\u63a5\u547d\u4e2d\uff0c\u6700\u574f\u60c5\u51b5\u9700\u8981\u67e5\u627e\u5230\u53f6\u5b50\u8282\u70b9\u3002 \u975e\u5e38\u7a33\u5b9a\uff0c\u4efb\u4f55\u67e5\u627e\u90fd\u5fc5\u987b\u5230\u8fbe\u53f6\u5b50\u5c42\u3002 \u6548\u7387\u7a33\u5b9a\uff0c\u67e5\u627e\u3001\u63d2\u5165\u3001\u5220\u9664\u7684\u5e73\u5747\u548c\u6700\u574f\u65f6\u95f4\u590d\u6742\u5ea6\u5747\u4e3aO(log n)\u3002 \u5e94\u7528\u573a\u666f \u6570\u636e\u5e93\u548c\u6587\u4ef6\u7cfb\u7edf\u3002 \u7edd\u5927\u591a\u6570\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684\u7d22\u5f15\uff08\u5982MySQL InnoDB\uff09\u3001\u6587\u4ef6\u7cfb\u7edf\u3002 \u5185\u5b58\u4e2d\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5982C++ STL\u4e2d\u7684map\u3001set\uff0cJava\u4e2d\u7684TreeMap\u3001TreeSet\u3002 \u5e73\u8861\u7b56\u7565 \u901a\u8fc7\u8282\u70b9\u7684\u5206\u88c2\u548c\u5408\u5e76\u6765\u7ef4\u6301\u9ad8\u5ea6\u7684\u7edd\u5bf9\u5e73\u8861\u3002 \u4e0eB\u6811\u7c7b\u4f3c\uff0c\u901a\u8fc7\u8282\u70b9\u5206\u88c2\u548c\u5408\u5e76\u7ef4\u6301\u5e73\u8861\u3002 \u901a\u8fc7\u8282\u70b9\u989c\u8272\u7684\u53d8\u6362\u548c\u6811\u7684\u65cb\u8f6c\u6765\u7ef4\u6301\u8fd1\u4f3c\u5e73\u8861\u3002 <ul> <li>B\u6811\u548cB+\u6811\u7531\u4e8e\u5176\u77ee\u80d6\u7684\u7ed3\u6784\uff0c\u975e\u5e38\u9002\u5408\u9700\u8981\u5927\u91cfI/O\u64cd\u4f5c\u7684\u5916\u5b58\uff08\u78c1\u76d8\uff09\u573a\u666f\u3002\u5b83\u4eec\u901a\u8fc7\u4e00\u6b21\u8bfb\u53d6\u4e00\u6574\u4e2a\u8282\u70b9\uff08\u78c1\u76d8\u9875\uff09\u7684\u6570\u636e\u6765\u51cf\u5c11\u6602\u8d35\u7684\u78c1\u76d8\u5bfb\u9053\u6b21\u6570\u3002</li> <li>B+\u6811\u76f8\u8f83\u4e8eB\u6811\uff0c\u5728\u8303\u56f4\u67e5\u8be2\u548c\u987a\u5e8f\u8bbf\u95ee\u65b9\u9762\u6709\u5de8\u5927\u4f18\u52bf\uff0c\u5e76\u4e14\u901a\u5e38\u6709\u66f4\u4f4e\u7684\u6811\u9ad8\uff0c\u662f\u6570\u636e\u5e93\u7d22\u5f15\u66f4\u4f18\u7684\u9009\u62e9\u3002</li> <li>\u7ea2\u9ed1\u6811\u662f\u4e00\u79cd\u66f4\u901a\u7528\u7684\u5185\u5b58\u6570\u636e\u7ed3\u6784\u3002 \u5b83\u7684\u5e73\u8861\u8c03\u6574\u5f00\u9500\u76f8\u5bf9\u8f83\u4f4e\uff0c\u80fd\u591f\u5728\u9891\u7e41\u7684\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u4e2d\u4fdd\u6301\u9ad8\u6548\u7684\u6027\u80fd\uff0c\u56e0\u6b64\u5e7f\u6cdb\u5e94\u7528\u4e8e\u5b9e\u73b0\u5185\u5b58\u4e2d\u7684\u5173\u8054\u6570\u7ec4\u6216\u96c6\u5408\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/B%2B%E6%A0%91%E4%BB%8B%E7%BB%8D/","title":"B+\u6811\u4ecb\u7ecd","text":"<p>B+\u6811\uff08B+-Tree\uff09\u662f\u4e00\u79cd\u4e3a\u78c1\u76d8\u6216\u5176\u4ed6\u5757\u5b58\u50a8\u8bbe\u5907\u4f18\u5316\u7684\u81ea\u5e73\u8861\u6811\u6570\u636e\u7ed3\u6784\uff0c\u5e7f\u6cdb\u5e94\u7528\u4e8e\u6570\u636e\u5e93\u548c\u6587\u4ef6\u7cfb\u7edf\u7684\u7d22\u5f15\u3002\u5b83\u662fB\u6811\u7684\u4e00\u79cd\u53d8\u4f53\uff0c\u7279\u522b\u64c5\u957f\u8303\u56f4\u67e5\u8be2\u548c\u987a\u5e8f\u8bbf\u95ee\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/B%2B%E6%A0%91%E4%BB%8B%E7%BB%8D/#b","title":"B+\u6811\u7684\u4e3b\u8981\u7279\u6027","text":"<ol> <li>\u5e73\u8861\u6027\uff1a\u6240\u6709\u53f6\u5b50\u8282\u70b9\u90fd\u5728\u540c\u4e00\u6df1\u5ea6\uff0c\u786e\u4fdd\u4e86\u7a33\u5b9a\u7684\u67e5\u8be2\u6027\u80fd\u3002</li> <li>\u591a\u8def\u6027\uff1a\u6bcf\u4e2a\u5185\u90e8\u8282\u70b9\u53ef\u4ee5\u6709\u591a\u4e2a\u5b50\u8282\u70b9\uff08\u8fdc\u8d852\u4e2a\uff09\uff0c\u4f7f\u5f97\u6811\u7684\u9ad8\u5ea6\u76f8\u5bf9\u8f83\u4f4e\uff0c\u51cf\u5c11\u78c1\u76d8I/O\u3002</li> <li>\u6570\u636e\u4ec5\u5728\u53f6\u5b50\u8282\u70b9\uff1a\u6240\u6709\u6570\u636e\u8bb0\u5f55\uff08\u6216\u6307\u5411\u6570\u636e\u7684\u6307\u9488\uff09\u90fd\u5b58\u50a8\u5728\u53f6\u5b50\u8282\u70b9\u3002\u5185\u90e8\u8282\u70b9\u4ec5\u5b58\u50a8\u952e\uff08\u4f5c\u4e3a\u7d22\u5f15\uff09\u548c\u6307\u5411\u5b50\u8282\u70b9\u7684\u6307\u9488\u3002</li> <li>\u53f6\u5b50\u8282\u70b9\u94fe\u8868\uff1a\u6240\u6709\u53f6\u5b50\u8282\u70b9\u901a\u8fc7\u6307\u9488\u4e32\u8054\u8d77\u6765\uff0c\u5f62\u6210\u4e00\u4e2a\u6709\u5e8f\u94fe\u8868\uff0c\u4fbf\u4e8e\u8303\u56f4\u67e5\u8be2\u548c\u987a\u5e8f\u626b\u63cf\u3002</li> <li>\u952e\u7684\u5197\u4f59\uff1a\u5185\u90e8\u8282\u70b9\u4e2d\u7684\u952e\u662f\u5176\u53f3\u5b50\u6811\u4e2d\u6700\u5c0f\u952e\u7684\u526f\u672c\uff08\u6216\u8005\u662f\u5176\u5de6\u5b50\u6811\u4e2d\u6700\u5927\u952e\u7684\u526f\u672c\uff0c\u5177\u4f53\u5b9e\u73b0\u7565\u6709\u4e0d\u540c\uff09\uff0c\u8fd9\u4e9b\u952e\u4e5f\u4f1a\u51fa\u73b0\u5728\u53f6\u5b50\u8282\u70b9\u4e2d\u3002</li> </ol> <p>B+\u6811\u7684\u67e5\u627e\u8fc7\u7a0b\u59cb\u7ec8\u662f\u4ece\u6839\u8282\u70b9\u5f00\u59cb\uff0c\u9010\u5c42\u5411\u4e0b\uff0c\u6700\u7ec8\u5728\u53f6\u5b50\u8282\u70b9\u4e2d\u627e\u5230\u76ee\u6807\u952e\uff08\u5982\u679c\u5b58\u5728\uff09\u6216\u786e\u5b9a\u952e\u4e0d\u5b58\u5728\u3002</p> <p>\u5047\u8bbe\u6211\u4eec\u8981\u67e5\u627e\u4e00\u4e2a\u952e <code>target_key</code>\uff1a</p> <ol> <li> <p>\u4ece\u6839\u8282\u70b9\u5f00\u59cb\uff1a</p> <ul> <li>\u8bfb\u53d6\u6839\u8282\u70b9\u5230\u5185\u5b58\u4e2d\uff08\u5982\u679c\u5b83\u4e0d\u5728\u5185\u5b58\uff09\u3002</li> <li>\u5728\u5f53\u524d\u8282\u70b9\uff08\u521d\u59cb\u4e3a\u6839\u8282\u70b9\uff09\u7684\u952e\u5217\u8868\u4e2d\uff0c\u901a\u8fc7\u6bd4\u8f83 <code>target_key</code> \u4e0e\u8282\u70b9\u4e2d\u7684\u5404\u4e2a\u952e\uff08K_1, K_2, ..., K_n\uff09\uff0c\u627e\u5230\u4e00\u4e2a\u5408\u9002\u7684\u533a\u95f4\u3002<ul> <li>\u5982\u679c <code>target_key &lt; K_1</code>\uff0c\u5219\u6cbf\u7740\u7b2c\u4e00\u4e2a\u6307\u9488 <code>P_0</code> \u6307\u5411\u7684\u5b50\u8282\u70b9\u7ee7\u7eed\u67e5\u627e\u3002</li> <li>\u5982\u679c <code>K_i &lt;= target_key &lt; K_{i+1}</code>\uff0c\u5219\u6cbf\u7740\u6307\u9488 <code>P_i</code> \u6307\u5411\u7684\u5b50\u8282\u70b9\u7ee7\u7eed\u67e5\u627e\u3002</li> <li>\u5982\u679c <code>target_key &gt;= K_n</code>\uff08n\u662f\u8282\u70b9\u4e2d\u6700\u540e\u4e00\u4e2a\u952e\u7684\u7d22\u5f15\uff09\uff0c\u5219\u6cbf\u7740\u6700\u540e\u4e00\u4e2a\u6307\u9488 <code>P_n</code> \u6307\u5411\u7684\u5b50\u8282\u70b9\u7ee7\u7eed\u67e5\u627e\u3002</li> </ul> </li> <li>\u7531\u4e8e\u8282\u70b9\u5185\u7684\u952e\u662f\u6709\u5e8f\u7684\uff0c\u8fd9\u4e2a\u533a\u95f4\u7684\u67e5\u627e\u53ef\u4ee5\u4f7f\u7528\u4e8c\u5206\u67e5\u627e\uff08\u5982\u679c\u952e\u8f83\u591a\uff09\u6216\u987a\u5e8f\u67e5\u627e\uff08\u5982\u679c\u952e\u8f83\u5c11\uff09\u3002</li> </ul> </li> <li> <p>\u9012\u5f52/\u8fed\u4ee3\u5411\u4e0b\uff1a</p> <ul> <li>\u6839\u636e\u4e0a\u4e00\u6b65\u786e\u5b9a\u7684\u6307\u9488\uff0c\u79fb\u52a8\u5230\u4e0b\u4e00\u4e2a\u5b50\u8282\u70b9\u3002</li> <li>\u91cd\u590d\u6b65\u9aa41\u4e2d\u7684\u6bd4\u8f83\u548c\u9009\u62e9\u8fc7\u7a0b\uff0c\u5728\u65b0\u7684\u5f53\u524d\u8282\u70b9\u4e2d\u627e\u5230\u4e0b\u4e00\u4e2a\u8981\u8bbf\u95ee\u7684\u5b50\u8282\u70b9\u3002</li> <li>\u8fd9\u4e2a\u8fc7\u7a0b\u4e00\u76f4\u6301\u7eed\uff0c\u76f4\u5230\u5230\u8fbe\u4e00\u4e2a\u53f6\u5b50\u8282\u70b9\u3002</li> </ul> </li> <li> <p>\u5728\u53f6\u5b50\u8282\u70b9\u4e2d\u67e5\u627e\uff1a</p> <ul> <li>\u5f53\u5230\u8fbe\u53f6\u5b50\u8282\u70b9\u65f6\uff0c\u8bfb\u53d6\u8be5\u53f6\u5b50\u8282\u70b9\u5230\u5185\u5b58\u3002</li> <li>\u5728\u53f6\u5b50\u8282\u70b9\u7684\u952e\u5217\u8868\u4e2d\u67e5\u627e <code>target_key</code>\u3002\u53f6\u5b50\u8282\u70b9\u4e2d\u7684\u952e\u4e5f\u662f\u6709\u5e8f\u7684\uff0c\u540c\u6837\u53ef\u4ee5\u4f7f\u7528\u4e8c\u5206\u67e5\u627e\u6216\u987a\u5e8f\u67e5\u627e\u3002</li> <li>\u5982\u679c\u627e\u5230\u4e86 <code>target_key</code>\uff1a<ul> <li>\u90a3\u4e48\u4e0e\u8be5\u952e\u5173\u8054\u7684\u6570\u636e\uff08\u6216\u6307\u5411\u6570\u636e\u7684\u6307\u9488\uff09\u4e5f\u5b58\u50a8\u5728\u8fd9\u4e2a\u53f6\u5b50\u8282\u70b9\u4e2d\uff0c\u67e5\u627e\u6210\u529f\uff0c\u8fd4\u56de\u6570\u636e\u3002</li> </ul> </li> <li>\u5982\u679c\u672a\u627e\u5230 <code>target_key</code>\uff1a<ul> <li>\u7531\u4e8eB+\u6811\u7684\u7279\u6027\uff08\u6240\u6709\u952e\u53ca\u5176\u6570\u636e\u90fd\u5728\u53f6\u5b50\u8282\u70b9\uff0c\u5e76\u4e14\u53f6\u5b50\u8282\u70b9\u6709\u5e8f\uff09\uff0c\u5982\u679c\u5728\u53f6\u5b50\u8282\u70b9\u4e2d\u90fd\u627e\u4e0d\u5230\uff0c\u90a3\u4e48\u8be5\u952e\u5728\u6574\u4e2aB+\u6811\u4e2d\u5c31\u4e0d\u5b58\u5728\u3002\u67e5\u627e\u5931\u8d25\u3002</li> </ul> </li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/B%2B%E6%A0%91%E4%BB%8B%E7%BB%8D/#b_1","title":"B+\u6811\u67e5\u627e\u7684\u65f6\u95f4\u590d\u6742\u5ea6","text":"<p>B+\u6811\u7684\u67e5\u627e\u65f6\u95f4\u590d\u6742\u5ea6\u4e3b\u8981\u7531\u6811\u7684\u9ad8\u5ea6\u548c\u5728\u6bcf\u4e2a\u8282\u70b9\u5185\u90e8\u67e5\u627e\u952e\u7684\u65f6\u95f4\u51b3\u5b9a\u3002</p> <ul> <li> <p>\u6811\u7684\u9ad8\u5ea6\uff08h\uff09\uff1a</p> <ul> <li>\u4e00\u4e2am\u9636B+\u6811\uff08\u6bcf\u4e2a\u5185\u90e8\u8282\u70b9\u6700\u591a\u6709m\u4e2a\u5b50\u8282\u70b9\uff0c\u6700\u5c11\u6709 <code>ceil(m/2)</code> \u4e2a\u5b50\u8282\u70b9\uff09\uff0c\u5982\u679c\u5305\u542bN\u4e2a\u952e\uff08\u901a\u5e38\u6307\u53f6\u5b50\u8282\u70b9\u4e2d\u7684\u952e\u6570\u91cf\uff09\uff0c\u5176\u9ad8\u5ea6h\u5927\u81f4\u4e3a <code>O(log_m N)</code>\u3002</li> <li>\u7531\u4e8em\u901a\u5e38\u5f88\u5927\uff08\u4f8b\u5982\uff0c\u4e00\u4e2a\u78c1\u76d8\u9875\u53ef\u4ee5\u5bb9\u7eb3\u51e0\u5341\u5230\u51e0\u767e\u4e2a\u952e\u548c\u6307\u9488\uff09\uff0c\u6240\u4ee5\u6811\u7684\u9ad8\u5ea6h\u975e\u5e38\u4f4e\u3002\u4f8b\u5982\uff0c\u4e00\u4e2a\u5343\u4e07\u7ea7\u522b\u8bb0\u5f55\u7684\u8868\uff0c\u5176B+\u6811\u7d22\u5f15\u7684\u9ad8\u5ea6\u53ef\u80fd\u53ea\u67093-4\u5c42\u3002</li> <li>\u6bcf\u6b21\u4ece\u4e00\u5c42\u79fb\u52a8\u5230\u4e0b\u4e00\u5c42\uff0c\u901a\u5e38\u5bf9\u5e94\u4e00\u6b21\u78c1\u76d8I/O\u64cd\u4f5c\uff08\u5982\u679c\u8282\u70b9\u4e0d\u5728\u5185\u5b58\u7f13\u51b2\u6c60\u4e2d\uff09\u3002\u6240\u4ee5\uff0c\u67e5\u627e\u8fc7\u7a0b\u4e2d\u7684\u4e3b\u8981\u65f6\u95f4\u5f00\u9500\u662f\u78c1\u76d8I/O\u7684\u6b21\u6570\uff0c\u5b83\u4e0e\u6811\u7684\u9ad8\u5ea6\u6210\u6b63\u6bd4\u3002</li> </ul> </li> <li> <p>\u8282\u70b9\u5185\u90e8\u67e5\u627e\u65f6\u95f4\uff1a</p> <ul> <li>\u5728\u6bcf\u4e2a\u8282\u70b9\u5185\u90e8\uff08\u65e0\u8bba\u662f\u5185\u90e8\u8282\u70b9\u8fd8\u662f\u53f6\u5b50\u8282\u70b9\uff09\uff0c\u9700\u8981\u67e5\u627e\u5408\u9002\u7684\u952e\u6216\u6307\u9488\u3002\u5982\u679c\u4e00\u4e2a\u8282\u70b9\u5185\u6709k\u4e2a\u952e\uff0c\u4f7f\u7528\u4e8c\u5206\u67e5\u627e\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662f <code>O(log k)</code>\u3002</li> <li>\u7531\u4e8ek\uff08\u5373\u8282\u70b9\u5185\u952e\u7684\u6570\u91cf\uff0c\u901a\u5e38\u4e0em\u76f8\u5173\uff09\u76f8\u5bf9\u4e8eN\u6765\u8bf4\u662f\u4e00\u4e2a\u5f88\u5c0f\u7684\u5e38\u6570\uff08\u6216\u8005\u8bf4\uff0cm\u662f\u56fa\u5b9a\u7684\u9636\u6570\uff0ck &lt;= m-1\uff09\uff0c\u6240\u4ee5\u8282\u70b9\u5185\u90e8\u7684\u67e5\u627e\u65f6\u95f4\u901a\u5e38\u88ab\u8ba4\u4e3a\u662f\u5e38\u6570\u65f6\u95f4\uff0c\u6216\u8005\u662f\u4e00\u4e2a\u8fdc\u5c0f\u4e8e\u6811\u9ad8\u5ea6\u5f71\u54cd\u7684\u56e0\u7d20\u3002</li> <li>\u5373\u4f7f\u4e0d\u4f7f\u7528\u4e8c\u5206\u67e5\u627e\uff0c\u800c\u662f\u987a\u5e8f\u626b\u63cf\uff08\u5bf9\u4e8ek\u8f83\u5c0f\u7684\u60c5\u51b5\u53ef\u80fd\u66f4\u5feb\uff09\uff0c\u5176\u65f6\u95f4\u4e5f\u662f\u4e0em\u76f8\u5173\u7684\u5e38\u6570\u3002</li> </ul> </li> </ul> <p>\u7efc\u5408\u6765\u770b\uff1a *   \u67e5\u627e\u64cd\u4f5c\u9700\u8981\u4ece\u6839\u8282\u70b9\u5230\u53f6\u5b50\u8282\u70b9\u8bbf\u95eeh\u4e2a\u8282\u70b9\u3002 *   \u6bcf\u6b21\u8bbf\u95ee\u4e00\u4e2a\u8282\u70b9\uff0c\u6700\u574f\u60c5\u51b5\u9700\u8981\u4e00\u6b21\u78c1\u76d8I/O\u3002 *   \u5728\u6bcf\u4e2a\u8282\u70b9\u5185\u90e8\u67e5\u627e\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a <code>O(log m)</code> \u6216 <code>O(m)</code>\uff08\u5982\u679c\u987a\u5e8f\u626b\u63cf\uff09\u3002</p> <p>\u56e0\u6b64\uff0cB+\u6811\u7684\u67e5\u627e\u65f6\u95f4\u590d\u6742\u5ea6\u901a\u5e38\u8868\u793a\u4e3a <code>O(h * log m)</code> \u6216 <code>O(h * m)</code>\u3002\u7136\u800c\uff0c\u5728\u5206\u6790\u6570\u636e\u5e93\u7d22\u5f15\u6027\u80fd\u65f6\uff0c\u66f4\u5173\u6ce8\u7684\u662fI/O\u6b21\u6570\uff0c\u6240\u4ee5\u901a\u5e38\u7b80\u5316\u4e3a <code>O(log_m N)</code> \u6b21\u78c1\u76d8I/O\u3002\u7531\u4e8eCPU\u64cd\u4f5c\u8fdc\u5feb\u4e8e\u78c1\u76d8I/O\uff0c\u6240\u4ee5\u78c1\u76d8I/O\u7684\u6b21\u6570\u662f\u51b3\u5b9a\u6027\u56e0\u7d20\u3002</p> <p>\u5982\u679c\u8003\u8651\u5230\u6570\u636e\u5b8c\u5168\u5728\u5185\u5b58\u4e2d\u7684\u60c5\u51b5\uff08\u4f8b\u5982\uff0c\u6574\u4e2a\u7d22\u5f15\u6811\u90fd\u88ab\u7f13\u5b58\u4e86\uff09\uff0c\u90a3\u4e48\u65f6\u95f4\u590d\u6742\u5ea6\u5c31\u662f <code>O(h * log m)</code>\uff0c\u8fd9\u4ecd\u7136\u662f\u5bf9\u6570\u7ea7\u522b\u7684\uff0c\u975e\u5e38\u9ad8\u6548\u3002</p> <p>\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u4e2a3\u9636B+\u6811\uff08m=3\uff09\uff0c\u610f\u5473\u7740\u6bcf\u4e2a\u5185\u90e8\u8282\u70b9\u6700\u591a\u67093\u4e2a\u5b69\u5b50\u548c2\u4e2a\u952e\uff0c\u53f6\u5b50\u8282\u70b9\u4e5f\u5b58\u50a8\u952e\u548c\u6570\u636e\u3002</p> <p>\u5047\u8bbe\u6811\u7ed3\u6784\u5982\u4e0b\uff08\u7b80\u5316\u8868\u793a\uff0cK\u662f\u952e\uff0cP\u662f\u6307\u9488\uff0cD\u662f\u6570\u636e\uff09\uff1a</p> <pre><code>           [K5, K10] (Root)\n          /    |    \\\n   P0(&lt;K5) P1(K5-K10) P2(&gt;=K10)\n      |        |          |\n  [D1,D2,D3] [D6,D7,D8] [D11,D12,D13] (Leaf nodes, values represent keys, assume data Dx is associated with key x)\n   (Keys:1,2,3) (Keys:6,7,8) (Keys:11,12,13)\n   (Linked to next leaf) -&gt; (Linked to next leaf) -&gt; null\n</code></pre> <p>(\u5b9e\u9645B+\u6811\u4e2d\u5185\u90e8\u8282\u70b9\u53ea\u5b58\u952e\u548c\u6307\u9488\uff0c\u8fd9\u91cc\u4e3a\u4e86\u7b80\u5316\uff0c\u5047\u8bbeK5, K10\u662f\u5206\u9694\u952e\uff0c\u53f6\u5b50\u8282\u70b9D_x\u4ee3\u8868\u952e\u4e3ax\u7684\u6570\u636e)</p> <p>\u8981\u67e5\u627e\u952e <code>target_key = 7</code>\uff1a</p> <ol> <li> <p>\u4ece\u6839\u8282\u70b9 <code>[K5, K10]</code> \u5f00\u59cb\u3002</p> <ul> <li>\u6bd4\u8f83 <code>7</code> \u4e0e <code>K5</code> (<code>7 &gt; 5</code>)\u3002</li> <li>\u6bd4\u8f83 <code>7</code> \u4e0e <code>K10</code> (<code>7 &lt; 10</code>)\u3002</li> <li>\u6240\u4ee5 <code>target_key</code> \u843d\u5728 <code>K5</code> \u548c <code>K10</code> \u4e4b\u95f4\uff0c\u9009\u62e9\u4e2d\u95f4\u7684\u6307\u9488 <code>P1</code>\u3002</li> </ul> </li> <li> <p>\u6cbf\u7740\u6307\u9488 <code>P1</code> \u5230\u8fbe\u5176\u5b50\u8282\u70b9\uff0c\u53d1\u73b0\u8fd9\u662f\u4e00\u4e2a\u53f6\u5b50\u8282\u70b9 <code>[D6,D7,D8]</code> (\u952e\u4e3a6,7,8)\u3002</p> <ul> <li>\u5728\u8be5\u53f6\u5b50\u8282\u70b9\u4e2d\u67e5\u627e <code>7</code>\u3002</li> <li>\u627e\u5230\u952e <code>7</code>\uff0c\u83b7\u53d6\u5176\u5173\u8054\u7684\u6570\u636e <code>D7</code>\u3002</li> <li>\u67e5\u627e\u6210\u529f\u3002</li> </ul> </li> </ol> <p>\u5982\u679c\u8981\u67e5\u627e <code>target_key = 4</code>\uff1a 1.  \u4ece\u6839\u8282\u70b9 <code>[K5, K10]</code> \u5f00\u59cb\u3002     *   \u6bd4\u8f83 <code>4</code> \u4e0e <code>K5</code> (<code>4 &lt; 5</code>)\u3002     *   \u9009\u62e9\u7b2c\u4e00\u4e2a\u6307\u9488 <code>P0</code>\u3002</p> <ol> <li>\u6cbf\u7740\u6307\u9488 <code>P0</code> \u5230\u8fbe\u5176\u5b50\u8282\u70b9\uff0c\u53f6\u5b50\u8282\u70b9 <code>[D1,D2,D3]</code> (\u952e\u4e3a1,2,3)\u3002<ul> <li>\u5728\u8be5\u53f6\u5b50\u8282\u70b9\u4e2d\u67e5\u627e <code>4</code>\u3002</li> <li><code>4</code> \u5927\u4e8e\u53f6\u5b50\u8282\u70b9\u4e2d\u6240\u6709\u952e (<code>1,2,3</code>)\u3002</li> <li>\u67e5\u627e\u5931\u8d25\uff0c\u952e <code>4</code> \u4e0d\u5b58\u5728\u3002</li> </ul> </li> </ol> <p>![[1346871-20240730112327521-241140105.svg]]</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL%20%E6%95%B0%E6%8D%AE%E9%87%8F%E8%BF%87%E5%A4%A7%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86/","title":"MySQL \u6570\u636e\u91cf\u8fc7\u5927\u5982\u4f55\u5904\u7406","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL%20%E6%95%B0%E6%8D%AE%E9%87%8F%E8%BF%87%E5%A4%A7%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86/#_1","title":"\u5355\u8868\u6570\u636e\u91cf\u8fc7\u5927\u7684\u4e3b\u8981\u6027\u80fd\u74f6\u9888","text":"<p>\u968f\u7740\u6570\u636e\u91cf\u7684\u589e\u957f\uff0cMySQL\u5355\u8868\u6027\u80fd\u4f1a\u9047\u5230\u4ee5\u4e0b\u74f6\u9888\uff1a *   \u7d22\u5f15\u5931\u6548\u548cI/O\u538b\u529b\u589e\u52a0\uff1a\u5f53\u6570\u636e\u91cf\u5de8\u5927\u65f6\uff0c\u7d22\u5f15\u6811\u7684\u5c42\u7ea7\u4f1a\u53d8\u6df1\uff0c\u5bfc\u81f4\u67e5\u8be2\u65f6\u9700\u8981\u626b\u63cf\u66f4\u591a\u7684\u6570\u636e\u5757\uff0c\u589e\u52a0\u4e86\u78c1\u76d8I/O\u7684\u538b\u529b\u3002\u5982\u679c\u5185\u5b58\u65e0\u6cd5\u7f13\u5b58\u5168\u90e8\u7d22\u5f15\uff0c\u6027\u80fd\u4f1a\u8fdb\u4e00\u6b65\u4e0b\u964d\u3002 *   \u589e\u5220\u6539\u67e5\u6027\u80fd\u4e0b\u964d\uff1a\u6570\u636e\u91cf\u7684\u589e\u5927\u4f1a\u76f4\u63a5\u5bfc\u81f4CRUD\uff08\u521b\u5efa\u3001\u8bfb\u53d6\u3001\u66f4\u65b0\u3001\u5220\u9664\uff09\u64cd\u4f5c\u7684\u8017\u65f6\u589e\u52a0\u3002 *   \u9501\u7ade\u4e89\u6fc0\u70c8\uff1a\u5728\u9ad8\u5e76\u53d1\u573a\u666f\u4e0b\uff0c\u5bf9\u5927\u8868\u8fdb\u884c\u64cd\u4f5c\u4f1a\u589e\u52a0\u9501\u7ade\u4e89\u7684\u51e0\u7387\uff0c\u4ece\u800c\u964d\u4f4e\u6570\u636e\u5e93\u7684\u5e76\u53d1\u5904\u7406\u80fd\u529b\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL%20%E6%95%B0%E6%8D%AE%E9%87%8F%E8%BF%87%E5%A4%A7%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86/#_2","title":"\u89e3\u51b3\u65b9\u6848","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL%20%E6%95%B0%E6%8D%AE%E9%87%8F%E8%BF%87%E5%A4%A7%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86/#1-mysqlsql","title":"1. \u4f18\u5316\u73b0\u6709MySQL\u6570\u636e\u5e93\u548cSQL\u67e5\u8be2","text":"<p>\u5728\u8fdb\u884c\u590d\u6742\u7684\u8868\u62c6\u5206\u4e4b\u524d\uff0c\u9996\u5148\u5e94\u5145\u5206\u4f18\u5316\u73b0\u6709\u6570\u636e\u5e93\u548cSQL\uff0c\u8fd9\u901a\u5e38\u662f\u6210\u672c\u6700\u4f4e\u4e14\u89c1\u6548\u6700\u5feb\u7684\u65b9\u6cd5\u3002</p> <ul> <li>\u6570\u636e\u5e93\u548c\u8868\u7ed3\u6784\u8bbe\u8ba1\u4f18\u5316\uff1a<ul> <li>\u9009\u62e9\u5408\u9002\u7684\u6570\u636e\u7c7b\u578b\uff1a\u5c3d\u91cf\u4f7f\u7528\u66f4\u5c0f\u7684\u6570\u636e\u7c7b\u578b\uff0c\u4f8b\u5982\u4f7f\u7528<code>TINYINT</code>\u3001<code>SMALLINT</code>\u4ee3\u66ff<code>INT</code>\uff0c<code>INT</code>\u4ee3\u66ff<code>BIGINT</code>\uff0c\u5e76\u4e3a\u975e\u8d1f\u6570\u5b57\u6bb5\u6dfb\u52a0<code>UNSIGNED</code>\u3002</li> <li>\u907f\u514d\u4f7f\u7528NULL\u5b57\u6bb5\uff1aNULL\u503c\u4f1a\u7ed9\u67e5\u8be2\u4f18\u5316\u5e26\u6765\u56f0\u96be\uff0c\u5e76\u5360\u7528\u989d\u5916\u7684\u7d22\u5f15\u7a7a\u95f4\uff0c\u5efa\u8bae\u75280\u6216\u5176\u4ed6\u9ed8\u8ba4\u503c\u4ee3\u66ff\u3002</li> <li>\u5b57\u6bb5\u6570\u91cf\uff1a\u5355\u8868\u7684\u5b57\u6bb5\u4e0d\u5b9c\u8fc7\u591a\uff0c\u5efa\u8bae\u572820\u4e2a\u4ee5\u5185\u3002</li> </ul> </li> <li>\u7d22\u5f15\u4f18\u5316\uff1a<ul> <li>\u9488\u5bf9\u6027\u521b\u5efa\u7d22\u5f15\uff1a\u5728\u7ecf\u5e38\u4f5c\u4e3a\u67e5\u8be2\u6761\u4ef6\u7684<code>WHERE</code>\u548c<code>ORDER BY</code>\u5b50\u53e5\u6d89\u53ca\u7684\u5217\u4e0a\u521b\u5efa\u7d22\u5f15\u3002</li> <li>\u907f\u514d\u7d22\u5f15\u5931\u6548\uff1a\u907f\u514d\u5728<code>WHERE</code>\u5b50\u53e5\u4e2d\u5bf9\u5b57\u6bb5\u8fdb\u884c<code>NULL</code>\u503c\u5224\u65ad\u3001\u4f7f\u7528\u51fd\u6570\u6216\u8fdb\u884c\u5217\u8fd0\u7b97\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u53ef\u80fd\u5bfc\u81f4\u7d22\u5f15\u5931\u6548\u800c\u8fdb\u884c\u5168\u8868\u626b\u63cf\u3002</li> <li>\u4f7f\u7528\u8986\u76d6\u7d22\u5f15\uff1a\u5f53\u67e5\u8be2\u7684\u5b57\u6bb5\u90fd\u5728\u7d22\u5f15\u4e2d\u65f6\uff0c\u53ef\u4ee5\u907f\u514d\u56de\u8868\u67e5\u8be2\uff0c\u663e\u8457\u63d0\u9ad8\u6548\u7387\u3002</li> </ul> </li> <li>SQL\u67e5\u8be2\u4f18\u5316\uff1a<ul> <li>\u907f\u514d<code>SELECT *</code>\uff1a\u53ea\u67e5\u8be2\u9700\u8981\u7684\u5b57\u6bb5\uff0c\u51cf\u5c11\u7f51\u7edc\u4f20\u8f93\u548c\u6570\u636e\u5e93\u7684I/O\u3002</li> <li>\u5206\u9875\u67e5\u8be2\u4f18\u5316\uff1a\u4f7f\u7528<code>LIMIT</code>\u8fdb\u884c\u5206\u9875\uff0c\u907f\u514d\u4e00\u6b21\u6027\u8fd4\u56de\u5927\u91cf\u6570\u636e\u3002</li> <li>\u7b80\u5316SQL\u8bed\u53e5\uff1a\u590d\u6742\u7684SQL\u8bed\u53e5\u53ef\u4ee5\u62c6\u5206\u6210\u591a\u4e2a\u7b80\u5355\u7684\u8bed\u53e5\uff0c\u4ee5\u51cf\u5c11\u9501\u5b9a\u7684\u65f6\u95f4\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL%20%E6%95%B0%E6%8D%AE%E9%87%8F%E8%BF%87%E5%A4%A7%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86/#2-partitioning","title":"2. \u8868\u5206\u533a\uff08Partitioning\uff09","text":"<p>\u5206\u533a\u662f\u5c06\u4e00\u4e2a\u5927\u8868\u5728\u903b\u8f91\u4e0a\u4ecd\u7136\u662f\u4e00\u4e2a\u8868\uff0c\u4f46\u7269\u7406\u4e0a\u5206\u5272\u6210\u591a\u4e2a\u66f4\u5c0f\u7684\u3001\u66f4\u5bb9\u6613\u7ba1\u7406\u7684\u90e8\u5206\u3002\u8fd9\u5bf9\u5e94\u7528\u5c42\u662f\u900f\u660e\u7684\uff0c\u4e0d\u9700\u8981\u4fee\u6539\u4e1a\u52a1\u4ee3\u7801\u3002</p> <ul> <li>\u5de5\u4f5c\u539f\u7406\uff1a\u6839\u636e\u6307\u5b9a\u7684\u5206\u533a\u952e\uff08\u5982\u65e5\u671f\u3001\u8303\u56f4\u6216\u5217\u503c\uff09\u5c06\u6570\u636e\u5b58\u50a8\u5728\u4e0d\u540c\u7684\u7269\u7406\u6587\u4ef6\u4e2d\u3002\u5f53\u67e5\u8be2\u6761\u4ef6\u5305\u542b\u5206\u533a\u952e\u65f6\uff0c\u6570\u636e\u5e93\u53ea\u9700\u8981\u626b\u63cf\u76f8\u5173\u7684\u5206\u533a\uff0c\u4ece\u800c\u5927\u5927\u63d0\u9ad8\u67e5\u8be2\u901f\u5ea6\u3002</li> <li>\u4f18\u70b9\uff1a<ul> <li>\u63d0\u5347\u67e5\u8be2\u6027\u80fd\uff0c\u7279\u522b\u662f\u5f53\u67e5\u8be2\u6761\u4ef6\u80fd\u6709\u6548\u8fc7\u6ee4\u5206\u533a\u65f6\u3002</li> <li>\u7b80\u5316\u6570\u636e\u7ba1\u7406\uff0c\u4f8b\u5982\u53ef\u4ee5\u6309\u5206\u533a\u5feb\u901f\u5220\u9664\u8fc7\u671f\u6570\u636e\u3002</li> </ul> </li> <li>\u7f3a\u70b9\uff1a<ul> <li>\u4e00\u4e2a\u8868\u6700\u591a\u53ea\u80fd\u67091024\u4e2a\u5206\u533a\u3002</li> <li>\u5206\u533a\u8868\u65e0\u6cd5\u4f7f\u7528\u5916\u952e\u7ea6\u675f\u3002</li> <li>\u5982\u679c\u5206\u533a\u952e\u5305\u542b\u4e3b\u952e\u6216\u552f\u4e00\u7d22\u5f15\u7684\u5217\uff0c\u5219\u6240\u6709\u4e3b\u952e\u548c\u552f\u4e00\u7d22\u5f15\u5217\u90fd\u5fc5\u987b\u5305\u542b\u8fdb\u6765\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL%20%E6%95%B0%E6%8D%AE%E9%87%8F%E8%BF%87%E5%A4%A7%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86/#3-sharding","title":"3. \u5206\u5e93\u5206\u8868\uff08Sharding\uff09","text":"<p>\u5f53\u5355\u5e93\u6216\u5355\u8868\u7684\u5bb9\u91cf\u548c\u5e76\u53d1\u91cf\u8fbe\u5230\u74f6\u9888\u65f6\uff0c\u5c31\u9700\u8981\u8003\u8651\u5206\u5e93\u5206\u8868\u3002\u8fd9\u662f\u5e94\u5bf9\u6d77\u91cf\u6570\u636e\u548c\u9ad8\u5e76\u53d1\u7684\u5e38\u7528\u67b6\u6784\u65b9\u6848\u3002</p> <ul> <li>\u5782\u76f4\u62c6\u5206\uff1a<ul> <li>\u5782\u76f4\u5206\u8868\uff1a\u5c06\u4e00\u4e2a\u5305\u542b\u5f88\u591a\u5217\u7684\u5bbd\u8868\uff0c\u6839\u636e\u4e1a\u52a1\u5173\u8054\u6027\u62c6\u5206\u6210\u591a\u4e2a\u7a84\u8868\u3002\u4f8b\u5982\uff0c\u5c06\u7528\u6237\u8868\u4e2d\u7684\u57fa\u672c\u4fe1\u606f\u548c\u767b\u5f55\u4fe1\u606f\u62c6\u5206\u5230\u4e24\u5f20\u8868\u4e2d\u3002</li> <li>\u5782\u76f4\u5206\u5e93\uff1a\u6839\u636e\u4e1a\u52a1\u6a21\u5757\u5c06\u4e0d\u540c\u7684\u8868\u5206\u5e03\u5230\u4e0d\u540c\u7684\u6570\u636e\u5e93\u4e2d\u3002</li> </ul> </li> <li> <p>\u6c34\u5e73\u62c6\u5206\uff1a</p> <ul> <li>\u6c34\u5e73\u5206\u8868\uff1a\u5c06\u4e00\u4e2a\u884c\u6570\u975e\u5e38\u591a\u7684\u8868\uff0c\u6309\u7167\u67d0\u79cd\u89c4\u5219\uff08\u5982\u7528\u6237ID\u53d6\u6a21\u3001\u6309\u65f6\u95f4\u8303\u56f4\uff09\u5c06\u6570\u636e\u884c\u62c6\u5206\u5230\u591a\u4e2a\u7ed3\u6784\u76f8\u540c\u7684\u8868\u4e2d\u3002</li> <li>\u6c34\u5e73\u5206\u5e93\uff1a\u5c06\u6c34\u5e73\u62c6\u5206\u540e\u7684\u8868\u5206\u5e03\u5230\u4e0d\u540c\u7684\u6570\u636e\u5e93\u4e2d\uff0c\u8fdb\u4e00\u6b65\u5206\u6563\u538b\u529b\u3002</li> </ul> </li> <li> <p>\u4f18\u70b9\uff1a</p> <ul> <li>\u6709\u6548\u5206\u6563\u5355\u5e93\u5355\u8868\u7684\u538b\u529b\uff0c\u63d0\u5347\u6570\u636e\u5e93\u7684\u5e76\u53d1\u5904\u7406\u80fd\u529b\u548c\u5b58\u50a8\u5bb9\u91cf\u3002</li> </ul> </li> <li>\u7f3a\u70b9\uff1a<ul> <li>\u5b9e\u73b0\u590d\u6742\u5ea6\u9ad8\uff0c\u9700\u8981\u4fee\u6539\u4e1a\u52a1\u4ee3\u7801\uff0c\u5e76\u53ef\u80fd\u5f15\u5165\u5206\u5e03\u5f0f\u4e8b\u52a1\u3001\u8de8\u5e93JOIN\u7b49\u96be\u9898\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL%20%E6%95%B0%E6%8D%AE%E9%87%8F%E8%BF%87%E5%A4%A7%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86/#4","title":"4. \u5347\u7ea7\u6216\u66f4\u6362\u6570\u636e\u5e93\u65b9\u6848","text":"<p>\u5982\u679c\u4e1a\u52a1\u6570\u636e\u91cf\u6301\u7eed\u9ad8\u901f\u589e\u957f\uff0c\u4e14\u73b0\u6709MySQL\u4f18\u5316\u5df2\u8fbe\u74f6\u9888\uff0c\u53ef\u4ee5\u8003\u8651\u66f4\u5f3a\u5927\u7684\u6570\u636e\u5e93\u89e3\u51b3\u65b9\u6848\u3002</p> <ul> <li>\u5347\u7ea7\u5230\u517c\u5bb9MySQL\u7684\u5206\u5e03\u5f0f\u6570\u636e\u5e93\uff1a\u4f8b\u5982TiDB\u3001\u963f\u91cc\u4e91\u7684POLARDB\u7b49\uff0c\u8fd9\u4e9b\u6570\u636e\u5e93\u517c\u5bb9MySQL\u534f\u8bae\uff0c\u53ef\u4ee5\u505a\u5230\u5e73\u6ed1\u8fc1\u79fb\uff0c\u5e95\u5c42\u91c7\u7528\u5206\u5e03\u5f0f\u67b6\u6784\uff0c\u80fd\u66f4\u597d\u5730\u652f\u6301\u6d77\u91cf\u6570\u636e\u3002</li> <li>\u8fc1\u79fb\u5230NoSQL/NewSQL\u6570\u636e\u5e93\uff1a\u5bf9\u4e8e\u67d0\u4e9b\u4e1a\u52a1\u573a\u666f\uff0c\u53ef\u4ee5\u8003\u8651\u4f7f\u7528Hadoop\u751f\u6001\u3001Elasticsearch\u6216\u5176\u4ed6NoSQL\u6570\u636e\u5e93\u6765\u5904\u7406\u6d77\u91cf\u6570\u636e\u7684\u5b58\u50a8\u548c\u67e5\u8be2\u3002\u4f46\u8fd9\u901a\u5e38\u9700\u8981\u5bf9\u4e1a\u52a1\u4ee3\u7801\u8fdb\u884c\u8f83\u5927\u6539\u52a8\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL%20%E6%95%B0%E6%8D%AE%E9%87%8F%E8%BF%87%E5%A4%A7%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86/#5","title":"5. \u5f15\u5165\u7f13\u5b58","text":"<p>\u5bf9\u4e8e\u8bfb\u591a\u5199\u5c11\u7684\u573a\u666f\uff0c\u5f15\u5165\u7f13\u5b58\u662f\u63d0\u5347\u6027\u80fd\u3001\u964d\u4f4e\u6570\u636e\u5e93\u538b\u529b\u7684\u6709\u6548\u624b\u6bb5\u3002 *   \u4f7f\u7528Redis\u6216Memcached\uff1a\u5c06\u70ed\u70b9\u6570\u636e\u7f13\u5b58\u5230\u5185\u5b58\u4e2d\uff0c\u51cf\u5c11\u5bf9\u6570\u636e\u5e93\u7684\u76f4\u63a5\u8bbf\u95ee\uff0c\u53ef\u4ee5\u6781\u5927\u5730\u63d0\u9ad8\u7cfb\u7edf\u7684\u54cd\u5e94\u901f\u5ea6\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL%E4%B8%A4%E9%98%B6%E6%AE%B5%E6%8F%90%E4%BA%A4%E8%AF%A6%E8%A7%A3/","title":"MySQL\u4e24\u9636\u6bb5\u63d0\u4ea4\u8be6\u89e3","text":"<p>\u4e24\u9636\u6bb5\u63d0\u4ea4\uff08Two-Phase Commit, 2PC\uff09\u662f\u8ba1\u7b97\u673a\u79d1\u5b66\u4e2d\u4e00\u79cd\u7ecf\u5178\u7684\u5206\u5e03\u5f0f\u7b97\u6cd5\uff0c\u7528\u4e8e\u4fdd\u8bc1\u5206\u5e03\u5f0f\u4e8b\u52a1\u7684\u539f\u5b50\u6027\u3002\u6240\u8c13\u5206\u5e03\u5f0f\u4e8b\u52a1\uff0c\u662f\u6307\u4e00\u4e2a\u4e8b\u52a1\u64cd\u4f5c\u6d89\u53ca\u5230\u591a\u4e2a\u72ec\u7acb\u7684\u3001\u7f51\u7edc\u4e92\u8fde\u7684\u6570\u636e\u5e93\u6216\u8d44\u6e90\u7ba1\u7406\u5668\u3002\u4e24\u9636\u6bb5\u63d0\u4ea4\u7684\u6838\u5fc3\u76ee\u6807\u662f\u786e\u4fdd\u8fd9\u4e9b\u72ec\u7acb\u7684\u53c2\u4e0e\u8005\u8981\u4e48\u5168\u90e8\u6210\u529f\u63d0\u4ea4\u4e8b\u52a1\uff0c\u8981\u4e48\u5168\u90e8\u56de\u6eda\uff0c\u4ece\u800c\u907f\u514d\u6570\u636e\u4e0d\u4e00\u81f4\u7684\u72b6\u6001\u3002</p> <p>\u5728MySQL\u4e2d\uff0c\u4e24\u9636\u6bb5\u63d0\u4ea4\u6700\u5178\u578b\u7684\u5e94\u7528\u573a\u666f\u662f\u4e3a\u4e86\u4fdd\u8bc1\u5b58\u50a8\u5f15\u64ce\u5c42\uff08\u5982InnoDB\uff09\u548cServer\u5c42\u4e4b\u95f4\u6570\u636e\u7684\u4e00\u81f4\u6027\uff0c\u7279\u522b\u662f\u5f53\u540c\u65f6\u5f00\u542f<code>redo log</code>\u548c<code>binlog</code>\u65f6\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL%E4%B8%A4%E9%98%B6%E6%AE%B5%E6%8F%90%E4%BA%A4%E8%AF%A6%E8%A7%A3/#redo-log-binlog","title":"Redo Log \u4e0e Binlog \u7684\u4e00\u81f4\u6027","text":"<ul> <li>Redo Log (\u91cd\u505a\u65e5\u5fd7)\uff1a<ul> <li>\u5c42\u6b21\uff1aInnoDB\u5b58\u50a8\u5f15\u64ce\u5c42\u3002</li> <li>\u5185\u5bb9\uff1a\u7269\u7406\u65e5\u5fd7\uff0c\u8bb0\u5f55\u7684\u662f\u5bf9\u6570\u636e\u9875\uff08Data Page\uff09\u7684\u7269\u7406\u4fee\u6539\uff0c\u4f8b\u5982\u201c\u5728\u54ea\u4e2a\u8868\u7a7a\u95f4\u7684\u54ea\u4e2a\u6570\u636e\u9875\u7684\u54ea\u4e2a\u504f\u79fb\u91cf\u4e0a\u5199\u5165\u4e86\u4ec0\u4e48\u6570\u636e\u201d\u3002</li> <li>\u4f5c\u7528\uff1a\u4fdd\u8bc1\u4e8b\u52a1\u7684\u6301\u4e45\u6027\uff08Durability\uff09\u3002\u5373\u4f7f\u6570\u636e\u5e93\u5d29\u6e83\uff0cInnoDB\u4e5f\u53ef\u4ee5\u901a\u8fc7Redo Log\u6765\u6062\u590d\u5df2\u63d0\u4ea4\u7684\u4e8b\u52a1\uff0c\u786e\u4fdd\u6570\u636e\u4e0d\u4e22\u5931\u3002</li> </ul> </li> <li>Binlog (\u4e8c\u8fdb\u5236\u65e5\u5fd7)\uff1a<ul> <li>\u5c42\u6b21\uff1aMySQL Server\u5c42\uff0c\u6240\u6709\u5b58\u50a8\u5f15\u64ce\u5171\u4eab\u3002</li> <li>\u5185\u5bb9\uff1a\u903b\u8f91\u65e5\u5fd7\uff0c\u8bb0\u5f55\u4e86\u5bfc\u81f4\u6570\u636e\u53d1\u751f\u6539\u53d8\u7684SQL\u8bed\u53e5\uff08Statement\u683c\u5f0f\uff09\u6216\u884c\u7684\u53d8\u66f4\u8bb0\u5f55\uff08Row\u683c\u5f0f\uff09\u3002</li> <li>\u4f5c\u7528\uff1a\u4e3b\u8981\u7528\u4e8e\u6570\u636e\u5e93\u590d\u5236\uff08\u4e3b\u4ece\u540c\u6b65\uff09\u548c\u57fa\u4e8e\u65f6\u95f4\u70b9\u7684\u6062\u590d\uff08Point-in-Time Recovery\uff09**\u3002</li> </ul> </li> </ul> <p>\u4e00\u81f4\u6027\u95ee\u9898\uff1a \u60f3\u8c61\u4e00\u4e0b\uff0c\u5982\u679c\u6ca1\u6709\u4e24\u9636\u6bb5\u63d0\u4ea4\uff0c\u4e00\u4e2a\u4e8b\u52a1\u7684\u63d0\u4ea4\u8fc7\u7a0b\u53ef\u80fd\u662f\u5148\u5199Redo Log\uff0c\u518d\u5199Binlog\u3002\u5982\u679c\u5199\u5b8cRedo Log\u540e\uff0c\u5728\u5199Binlog\u4e4b\u524d\uff0c\u670d\u52a1\u5668\u5d29\u6e83\u4e86\uff0c\u4f1a\u53d1\u751f\u4ec0\u4e48\uff1f</p> <ul> <li>\u7ed3\u679c\uff1a\u6570\u636e\u5e93\u91cd\u542f\u540e\uff0c\u7531\u4e8eRedo Log\u5df2\u7ecf\u5199\u5165\uff0cInnoDB\u4f1a\u901a\u8fc7\u6062\u590d\u673a\u5236\u5c06\u6570\u636e\u66f4\u6539\u6301\u4e45\u5316\u3002\u7136\u800c\uff0cBinlog\u4e2d\u6ca1\u6709\u8fd9\u4e2a\u4e8b\u52a1\u7684\u8bb0\u5f55\u3002</li> <li>\u95ee\u9898\uff1a<ul> <li>\u4e3b\u4ece\u4e0d\u4e00\u81f4\uff1a\u4e3b\u5e93\u6570\u636e\u5df2\u4fee\u6539\uff0c\u4f46\u4ece\u5e93\u7531\u4e8e\u6536\u4e0d\u5230\u5bf9\u5e94\u7684Binlog\uff0c\u6570\u636e\u4fdd\u6301\u539f\u6837\u3002</li> <li>\u6570\u636e\u6062\u590d\u4e0d\u4e00\u81f4\uff1a\u5982\u679c\u4f7f\u7528Binlog\u8fdb\u884c\u6062\u590d\uff0c\u5c06\u4e22\u5931\u8fd9\u4e2a\u5df2\u63d0\u4ea4\u7684\u4e8b\u52a1\u3002</li> </ul> </li> </ul> <p>\u53cd\u4e4b\uff0c\u5982\u679c\u5148\u5199Binlog\u518d\u5199Redo Log\uff0c\u540c\u6837\u4f1a\u56e0\u4e2d\u95f4\u5d29\u6e83\u5bfc\u81f4\u6570\u636e\u4e0d\u4e00\u81f4\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0cMySQL\u5f15\u5165\u4e86\u4e24\u9636\u6bb5\u63d0\u4ea4\u673a\u5236\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL%E4%B8%A4%E9%98%B6%E6%AE%B5%E6%8F%90%E4%BA%A4%E8%AF%A6%E8%A7%A3/#_1","title":"\u4e24\u9636\u6bb5\u63d0\u4ea4\u7684\u6d41\u7a0b","text":"<p>MySQL\u5c06\u4e8b\u52a1\u7684\u63d0\u4ea4\u8fc7\u7a0b\u62c6\u5206\u4e3a\u4e24\u4e2a\u9636\u6bb5\uff1a\u51c6\u5907\u9636\u6bb5\uff08Prepare\uff09 \u548c \u63d0\u4ea4\u9636\u6bb5\uff08Commit\uff09\u3002</p> <p>\u9636\u6bb5\u4e00\uff1a\u51c6\u5907\u9636\u6bb5 (Prepare Phase)</p> <p>\u5f53\u5ba2\u6237\u7aef\u6267\u884c<code>COMMIT</code>\u547d\u4ee4\u65f6\uff0c\u534f\u8c03\u8005\uff08MySQL Server\uff09\u5f00\u59cb\u6267\u884c\u7b2c\u4e00\u9636\u6bb5\u7684\u64cd\u4f5c\uff1a</p> <ol> <li>InnoDB\u5199Redo Log\u5e76\u7f6e\u4e8ePrepare\u72b6\u6001\uff1a<ul> <li>\u534f\u8c03\u8005\u901a\u77e5InnoDB\u6267\u884c\u4e8b\u52a1\u7684\u51c6\u5907\u5de5\u4f5c\u3002</li> <li>InnoDB\u5c06\u8be5\u4e8b\u52a1\u6240\u6d89\u53ca\u7684\u6240\u6709<code>undo log</code>\u548c<code>redo log</code>\u6570\u636e\u5199\u5165\u65e5\u5fd7\u6587\u4ef6\u5e76\u5237\u76d8\uff08fsync\uff09\u3002</li> <li>\u6b64\u65f6\uff0cRedo Log\u4e2d\u4f1a\u6807\u8bb0\u8fd9\u4e2a\u4e8b\u52a1\u7684\u72b6\u6001\u4e3a\u201cprepare\u201d\uff0c\u5e76\u8bb0\u5f55\u4e0b\u8be5\u4e8b\u52a1\u7684XID\uff08eXtended Architecture Identifier\uff0c\u5168\u5c40\u4e8b\u52a1ID\uff09**\u3002</li> <li>\u5b8c\u6210\u4e0a\u8ff0\u64cd\u4f5c\u540e\uff0cInnoDB\u5c31\u5177\u5907\u4e86\u63d0\u4ea4\u6216\u56de\u6eda\u8be5\u4e8b\u52a1\u7684\u80fd\u529b\uff0c\u5e76\u5411\u534f\u8c03\u8005\u62a5\u544a\u201c\u51c6\u5907\u5c31\u7eea\u201d\u3002</li> </ul> </li> </ol> <p>\u9636\u6bb5\u4e8c\uff1a\u63d0\u4ea4\u9636\u6bb5 (Commit Phase)</p> <p>\u534f\u8c03\u8005\u4f1a\u6839\u636e\u51c6\u5907\u9636\u6bb5\u7684\u7ed3\u679c\uff0c\u6267\u884c\u7b2c\u4e8c\u9636\u6bb5\u7684\u64cd\u4f5c\u3002</p> <ol> <li> <p>Server\u5c42\u5199Binlog\uff1a</p> <ul> <li>\u63a5\u6536\u5230InnoDB\u7684\u201c\u51c6\u5907\u5c31\u7eea\u201d\u54cd\u5e94\u540e\uff0c\u534f\u8c03\u8005\uff08MySQL Server\uff09\u4f1a\u5c06\u8be5\u4e8b\u52a1\u7684\u8bb0\u5f55\u5199\u5165\u5230<code>binlog</code>\u6587\u4ef6\u4e2d\u5e76\u5237\u76d8\u3002</li> </ul> </li> <li> <p>InnoDB\u6267\u884c\u6700\u7ec8\u63d0\u4ea4\uff1a</p> <ul> <li>\u534f\u8c03\u8005\u5728\u6210\u529f\u5199\u5165Binlog\u540e\uff0c\u4f1a\u518d\u6b21\u8c03\u7528InnoDB\u7684\u63a5\u53e3\uff0c\u901a\u77e5\u5b83\u53ef\u4ee5\u6b63\u5f0f\u63d0\u4ea4\u4e8b\u52a1\u4e86\u3002</li> <li>InnoDB\u63a5\u6536\u5230\u901a\u77e5\u540e\uff0c\u4f1a\u5c06Redo Log\u4e2d\u5bf9\u5e94\u4e8b\u52a1\u7684\u72b6\u6001\u4ece\u201cprepare\u201d\u4fee\u6539\u4e3a\u201ccommit\u201d\u3002\u8fd9\u4e2a\u4fee\u6539\u975e\u5e38\u8f7b\u91cf\uff0c\u4ec5\u9700\u8bb0\u5f55\u4e00\u4e2a\u63d0\u4ea4\u6807\u8bb0\u5373\u53ef\uff0c\u65e0\u9700\u518d\u6b21\u5237\u76d8\u3002\u81f3\u6b64\uff0c\u4e8b\u52a1\u6210\u529f\u63d0\u4ea4\u3002</li> </ul> </li> </ol> <p>\u5982\u679c\u4efb\u4f55\u4e00\u4e2a\u6b65\u9aa4\u5931\u8d25\uff08\u4f8b\u5982Binlog\u5199\u5165\u5931\u8d25\uff09\uff0c\u534f\u8c03\u8005\u5c31\u4f1a\u901a\u77e5InnoDB\u56de\u6eda\u8be5\u4e8b\u52a1\uff0cInnoDB\u4f1a\u5229\u7528Undo Log\u6765\u64a4\u9500\u6240\u6709\u4fee\u6539\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL%E4%B8%A4%E9%98%B6%E6%AE%B5%E6%8F%90%E4%BA%A4%E8%AF%A6%E8%A7%A3/#_2","title":"\u5d29\u6e83\u6062\u590d\u5982\u4f55\u4fdd\u8bc1\u4e00\u81f4\u6027\uff1f","text":"<p>\u4e24\u9636\u6bb5\u63d0\u4ea4\u7684\u7cbe\u9ad3\u5728\u4e8e\uff0c\u5b83\u8ba9<code>redo log</code>\u4e2d\u7684\u4e8b\u52a1\u72b6\u6001\u4e0e<code>binlog</code>\u7684\u5185\u5bb9\u5b9e\u73b0\u4e86\u7ed1\u5b9a\uff0c\u4f7f\u5f97\u6570\u636e\u5e93\u5728\u5d29\u6e83\u540e\u80fd\u591f\u505a\u51fa\u6b63\u786e\u7684\u51b3\u7b56\uff1a</p> <ul> <li> <p>\u573a\u666f\u4e00\uff1a\u5d29\u6e83\u53d1\u751f\u5728\u201cPrepare\u201d\u9636\u6bb5\u4e4b\u540e\uff0cBinlog\u5199\u5165\u4e4b\u524d</p> <ul> <li>\u6062\u590d\u8fc7\u7a0b\uff1a\u6570\u636e\u5e93\u91cd\u542f\u540e\uff0cInnoDB\u5728\u6062\u590d\u65f6\u53d1\u73b0\u4e00\u4e2a\u5904\u4e8e\u201cprepare\u201d\u72b6\u6001\u7684Redo Log\u4e8b\u52a1\u3002\u6b64\u65f6\uff0c\u5b83\u4f1a\u53bb\u68c0\u67e5Binlog\u4e2d\u662f\u5426\u5b58\u5728\u4e0e\u4e4b\u5bf9\u5e94\u7684XID\u3002</li> <li>\u51b3\u7b56\uff1a\u7531\u4e8eBinlog\u5c1a\u672a\u5199\u5165\uff0c\u6062\u590d\u7a0b\u5e8f\u627e\u4e0d\u5230\u5bf9\u5e94\u7684XID\u3002\u56e0\u6b64\uff0cInnoDB\u4f1a\u5224\u5b9a\u8be5\u4e8b\u52a1\u672a\u5b8c\u6210\uff0c\u5e76\u81ea\u52a8*\u56de\u6eda\u8be5\u4e8b\u52a1\u3002\u8fd9\u4fdd\u8bc1\u4e86\u6570\u636e\u5e93\u72b6\u6001\u4e0eBinlog\u7684\u5185\u5bb9\u4e00\u81f4\u3002</li> </ul> </li> <li> <p>\u573a\u666f\u4e8c\uff1a\u5d29\u6e83\u53d1\u751f\u5728Binlog\u5199\u5165\u4e4b\u540e\uff0cRedo Log\u72b6\u6001\u6539\u4e3a\u201cCommit\u201d\u4e4b\u524d</p> <ul> <li>\u6062\u590d\u8fc7\u7a0b\uff1a\u6570\u636e\u5e93\u91cd\u542f\u540e\uff0cInnoDB\u53d1\u73b0\u4e00\u4e2a\u5904\u4e8e\u201cprepare\u201d\u72b6\u6001\u7684Redo Log\u4e8b\u52a1\uff0c\u5e76\u540c\u65f6\u5728Binlog\u4e2d\u627e\u5230\u4e86\u5bf9\u5e94\u7684XID\u3002</li> <li>\u51b3\u7b56\uff1a\u65e2\u7136Binlog\u5df2\u7ecf\u6210\u529f\u5199\u5165\uff0c\u8bf4\u660e\u8fd9\u4e2a\u4e8b\u52a1\u5728\u903b\u8f91\u4e0a\u662f\u9700\u8981\u88ab\u63d0\u4ea4\u7684\u3002\u56e0\u6b64\uff0c\u6062\u590d\u7a0b\u5e8f\u4f1a\u81ea\u52a8\u63d0\u4ea4\u8be5\u4e8b\u52a1\uff08\u5373\u5c06Redo Log\u4e2d\u7684\u72b6\u6001\u6539\u4e3a\u201ccommit\u201d\uff09\u3002\u8fd9\u540c\u6837\u4fdd\u8bc1\u4e86\u6570\u636e\u5e93\u72b6\u6001\u4e0eBinlog\u7684\u4e00\u81f4\u6027\u3002</li> </ul> </li> </ul> \u9636\u6bb5 \u534f\u8c03\u8005 (MySQL Server) \u53c2\u4e0e\u8005 (InnoDB) \u5d29\u6e83\u540e\u7684\u884c\u4e3a \u51c6\u5907\u9636\u6bb5 \u53d1\u51faPrepare\u6307\u4ee4 1. \u5199\u5165Redo Log\u5e76\u5237\u76d8  2. \u6807\u8bb0Redo Log\u4e3a<code>Prepare</code>\u72b6\u6001  3. \u54cd\u5e94\u201c\u51c6\u5907\u5c31\u7eea\u201d \u5982\u679c\u5728\u6b64\u65f6\u5d29\u6e83\uff0c\u91cd\u542f\u540e\u4e8b\u52a1\u4f1a\u88ab\u56de\u6eda\uff0c\u56e0\u4e3aBinlog\u4e2d\u6ca1\u6709\u8bb0\u5f55\u3002 \u63d0\u4ea4\u9636\u6bb5 1. \u63a5\u6536\u5230\u201c\u5c31\u7eea\u201d\u540e\uff0c\u5199\u5165Binlog\u5e76\u5237\u76d8  2. \u53d1\u51faCommit\u6307\u4ee4 \u63a5\u6536\u5230Commit\u6307\u4ee4\u540e\uff0c\u5c06Redo Log\u4e2d\u7684\u72b6\u6001\u6539\u4e3a<code>Commit</code> \u5982\u679c\u5728\u6b64\u65f6\u5d29\u6e83\uff0c\u91cd\u542f\u540e\u4e8b\u52a1\u4f1a\u88ab\u63d0\u4ea4\uff0c\u56e0\u4e3aBinlog\u4e2d\u5df2\u6709\u8bb0\u5f55\u3002"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL%E6%9C%89%E4%BB%80%E4%B9%88%E9%A1%B5/","title":"MySQL\u6709\u4ec0\u4e48\u9875","text":"<p>\u5728MySQL\u4e2d\uff0c\u7279\u522b\u662f\u5bf9\u4e8e\u5176\u6700\u5e38\u7528\u7684InnoDB\u5b58\u50a8\u5f15\u64ce\uff0c\u201c\u9875\u201d\uff08Page\uff09\u662f\u5176\u7ba1\u7406\u78c1\u76d8\u5b58\u50a8\u548c\u5185\u5b58\u7f13\u51b2\u7684\u6700\u57fa\u672c\u5355\u4f4d\u3002InnoDB\u5c06\u6240\u6709\u6570\u636e\u90fd\u5b58\u653e\u5728\u4e00\u4e2a\u6216\u591a\u4e2a\u8868\u7a7a\u95f4\uff08tablespace\uff09\u6587\u4ef6\u4e2d\uff0c\u800c\u8868\u7a7a\u95f4\u5728\u7269\u7406\u4e0a\u662f\u7531\u4e00\u7cfb\u5217\u8fde\u7eed\u7684\u6570\u636e\u9875\u7ec4\u6210\u7684\u3002\u53ef\u4ee5\u628a\u9875\u7406\u89e3\u4e3aInnoDB\u4e0e\u78c1\u76d8\u8fdb\u884cI/O\u4ea4\u4e92\u7684\u6700\u5c0f\u5355\u5143\u3002</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cInnoDB\u7684\u9875\u5927\u5c0f\u662f16KB\uff0c\u4f46\u4e5f\u53ef\u4ee5\u5728\u521b\u5efaMySQL\u5b9e\u4f8b\u65f6\u914d\u7f6e\u4e3a\u5176\u4ed6\u503c\uff08\u59824KB, 8KB, 32KB, 64KB\uff09\u3002</p> <p>InnoDB\u4e2d\u6709\u591a\u79cd\u4e0d\u540c\u7c7b\u578b\u7684\u9875\uff0c\u5b83\u4eec\u5404\u81ea\u6709\u4e0d\u540c\u7684\u7ed3\u6784\u548c\u7528\u9014\uff0c\u5171\u540c\u6784\u6210\u4e86\u6574\u4e2a\u6570\u636e\u5e93\u7684\u5b58\u50a8\u4f53\u7cfb\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u4e3b\u8981\u7684\u9875\u7c7b\u578b\uff1a</p> <ol> <li> <p>\u6570\u636e\u9875\uff08Data Page\uff09\uff0c\u4e5f\u79f0\u4e3a\u7d22\u5f15\u9875\uff08Index Page\uff09\uff1a</p> <ul> <li>\u8fd9\u662f\u6700\u6838\u5fc3\u3001\u6700\u5e38\u89c1\u7684\u9875\u7c7b\u578b\uff0c\u7528\u4e8e\u5b58\u50a8\u8868\u4e2d\u7684\u884c\u6570\u636e\u4ee5\u53caB+\u6811\u7d22\u5f15\u3002</li> <li>\u65e0\u8bba\u662f\u805a\u7c07\u7d22\u5f15\uff08\u4e3b\u952e\u7d22\u5f15\uff09\u8fd8\u662f\u4e8c\u7ea7\u7d22\u5f15\uff0c\u5b83\u4eec\u7684\u8282\u70b9\u5728\u7269\u7406\u4e0a\u90fd\u662f\u4ee5\u6570\u636e\u9875\u7684\u5f62\u5f0f\u5b58\u5728\u7684\u3002</li> <li>\u4e00\u4e2a\u6570\u636e\u9875\u7684\u5185\u90e8\u7ed3\u6784\u975e\u5e38\u590d\u6742\uff0c\u5927\u81f4\u5305\u542b\uff1a<ul> <li>\u6587\u4ef6\u5934\uff08File Header\uff09\uff1a\u8bb0\u5f55\u9875\u7684\u7f16\u53f7\u3001\u7c7b\u578b\u3001\u6821\u9a8c\u548c\u3001\u524d\u540e\u9875\u6307\u9488\u7b49\u5143\u4fe1\u606f\u3002</li> <li>\u9875\u5934\uff08Page Header\uff09\uff1a\u8bb0\u5f55\u9875\u7684\u72b6\u6001\u4fe1\u606f\uff0c\u5982\u9875\u5185\u8bb0\u5f55\u6570\u3001\u7a7a\u95f2\u7a7a\u95f4\u6307\u9488\u3001\u6700\u540e\u63d2\u5165\u8bb0\u5f55\u7684\u4f4d\u7f6e\u7b49\u3002</li> <li>Infimum + Supremum \u8bb0\u5f55\uff1a\u4e24\u4e2a\u865a\u62df\u7684\u884c\u8bb0\u5f55\uff0c\u5206\u522b\u4ee3\u8868\u9875\u4e2d\u7684\u6700\u5c0f\u503c\u548c\u6700\u5927\u503c\uff0c\u7528\u4e8e\u754c\u5b9a\u9875\u7684\u8303\u56f4\u3002</li> <li>\u7528\u6237\u8bb0\u5f55\uff08User Records\uff09\uff1a\u5b9e\u9645\u5b58\u50a8\u7684\u6570\u636e\u884c\uff0c\u5b83\u4eec\u5728\u9875\u5185\u901a\u8fc7\u5355\u5411\u94fe\u8868\u8fde\u63a5\uff0c\u5e76\u6309\u4e3b\u952e\u987a\u5e8f\uff08\u5bf9\u4e8e\u805a\u7c07\u7d22\u5f15\uff09\u6216\u7d22\u5f15\u952e\u987a\u5e8f\uff08\u5bf9\u4e8e\u4e8c\u7ea7\u7d22\u5f15\uff09\u6392\u5217\u3002</li> <li>\u7a7a\u95f2\u7a7a\u95f4\uff08Free Space\uff09\uff1a\u9875\u4e2d\u5c1a\u672a\u4f7f\u7528\u7684\u7a7a\u95f4\u3002</li> <li>\u9875\u76ee\u5f55\uff08Page Directory\uff09\uff1a\u4e5f\u79f0\u4e3a\u69fd\uff08Slot\uff09\uff0c\u7528\u4e8e\u52a0\u901f\u9875\u5185\u8bb0\u5f55\u7684\u67e5\u627e\u3002\u5b83\u5c06\u9875\u4e2d\u7684\u8bb0\u5f55\u5206\u6210\u82e5\u5e72\u4e2a\u7ec4\uff0c\u5b58\u50a8\u6bcf\u4e2a\u7ec4\u6700\u540e\u4e00\u6761\u8bb0\u5f55\u7684\u5730\u5740\u504f\u79fb\u91cf\uff0c\u5f62\u6210\u4e00\u4e2a\u7a00\u758f\u7d22\u5f15\u3002\u67e5\u627e\u65f6\u5148\u901a\u8fc7\u4e8c\u5206\u67e5\u627e\u5b9a\u4f4d\u5230\u69fd\uff0c\u518d\u5728\u69fd\u5185\u8fdb\u884c\u987a\u5e8f\u67e5\u627e\u3002</li> <li>\u6587\u4ef6\u5c3e\uff08File Trailer\uff09\uff1a\u5305\u542b\u6821\u9a8c\u548c\u7b49\u4fe1\u606f\uff0c\u7528\u4e8e\u5728\u9875\u5199\u5165\u78c1\u76d8\u540e\u8fdb\u884c\u4e00\u81f4\u6027\u6821\u9a8c\uff0c\u9632\u6b62\u9875\u635f\u574f\u3002</li> </ul> </li> </ul> </li> <li> <p>Undo\u65e5\u5fd7\u9875\uff08Undo Log Page\uff09\uff1a</p> <ul> <li>\u7528\u4e8e\u5b58\u50a8Undo Log\u8bb0\u5f55\u3002Undo Log\u662f\u5b9e\u73b0\u4e8b\u52a1\u539f\u5b50\u6027\u548cMVCC\uff08\u591a\u7248\u672c\u5e76\u53d1\u63a7\u5236\uff09\u7684\u5173\u952e\u3002</li> <li>\u5f53\u4e8b\u52a1\u4fee\u6539\u6570\u636e\u65f6\uff0c\u4f1a\u5c06\u4fee\u6539\u524d\u7684\u6570\u636e\u7248\u672c\u6216\u56de\u6eda\u64cd\u4f5c\u8bb0\u5f55\u5230Undo Log\u4e2d\u3002\u8fd9\u4e9bUndo Log\u8bb0\u5f55\u5c31\u5b58\u653e\u5728Undo\u65e5\u5fd7\u9875\u91cc\u3002</li> </ul> </li> <li> <p>\u7cfb\u7edf\u9875\uff08System Page\uff09\uff1a</p> <ul> <li>\u7528\u4e8e\u5b58\u50a8\u6570\u636e\u5e93\u8fd0\u884c\u6240\u9700\u7684\u5404\u79cd\u7cfb\u7edf\u7ea7\u5143\u6570\u636e\u3002\u4f8b\u5982\uff1a<ul> <li>InnoDB\u6570\u636e\u5b57\u5178\u5934\u9875\uff08Data Dictionary Header Page\uff09\uff1a\u5305\u542b\u6570\u636e\u5b57\u5178\u7684\u6839\u8282\u70b9\u4fe1\u606f\u3001\u7cfb\u7edf\u8868\u7a7a\u95f4\u5934\u90e8\u4fe1\u606f\u7b49\u3002</li> <li>\u63d2\u5165\u7f13\u51b2\u4f4d\u56fe\u9875\uff08Insert Buffer Bitmap Page\uff09\uff1a\u7528\u4e8e\u7ba1\u7406Insert Buffer\uff08\u73b0\u5728\u79f0\u4e3aChange Buffer\uff09\u7684\u4fe1\u606f\u3002</li> </ul> </li> </ul> </li> <li> <p>\u4e8b\u52a1\u7cfb\u7edf\u9875\uff08Transaction System Page\uff09\uff1a</p> <ul> <li>\u5b58\u50a8\u4e0e\u4e8b\u52a1\u7cfb\u7edf\u76f8\u5173\u7684\u5143\u6570\u636e\uff0c\u4f8b\u5982\u5f53\u524d\u6d3b\u8dc3\u4e8b\u52a1\u7684\u6700\u5927\u4e8b\u52a1ID\u3001Undo\u65e5\u5fd7\u6240\u5728\u7684\u6bb5\u4fe1\u606f\u7b49\u3002</li> </ul> </li> <li> <p>\u6ea2\u51fa\u9875\uff08Unallocated Page\uff09\uff0c\u66f4\u51c6\u786e\u7684\u8bf4\u6cd5\u662f\u6ea2\u51fa\u6570\u636e\u5b58\u50a8\uff08Off-page Storage\uff09\uff1a</p> <ul> <li>\u5f53\u4e00\u884c\u6570\u636e\u7684\u5927\u5c0f\u8d85\u8fc7\u4e00\u4e2a\u6570\u636e\u9875\u6240\u80fd\u5bb9\u7eb3\u7684\u9650\u5236\u65f6\uff08\u4f8b\u5982\uff0c\u5305\u542b\u4e86\u975e\u5e38\u5927\u7684<code>TEXT</code>\u3001<code>BLOB</code>\u6216<code>VARCHAR</code>\u5b57\u6bb5\uff09\uff0cInnoDB\u4e0d\u4f1a\u5c06\u6574\u884c\u6570\u636e\u90fd\u5b58\u50a8\u5728\u4e00\u4e2a\u6570\u636e\u9875\u4e2d\u3002</li> <li>\u5b83\u4f1a\u5c06\u8fd9\u884c\u6570\u636e\u4e2d\u4e00\u90e8\u5206\u8f83\u5c0f\u6216\u5b9a\u957f\u7684\u5217\u5b58\u50a8\u5728B+\u6811\u7684\u6570\u636e\u9875\u4e2d\uff0c\u800c\u5c06\u90a3\u4e9b\u5927\u7684\u3001\u53ef\u53d8\u957f\u5ea6\u7684\u5217\u5b58\u50a8\u5728\u4e13\u95e8\u7684\u6ea2\u51fa\u9875\uff08Unallocated Page\uff0c\u5b9e\u9645\u4e0a\u662f\u5206\u914d\u4e00\u4e9b\u8fde\u7eed\u7684\u9875\u6765\u5b58\u50a8\uff09\u4e2d\u3002B+\u6811\u7684\u6570\u636e\u9875\u4e2d\u53ea\u4fdd\u7559\u4e00\u4e2a\u6307\u5411\u8fd9\u4e9b\u6ea2\u51fa\u9875\u768420\u5b57\u8282\u6307\u9488\u3002</li> <li>\u8fd9\u79cd\u673a\u5236\u79f0\u4e3a\u884c\u6ea2\u51fa\uff08Row Overflow\uff09\u3002</li> </ul> </li> <li> <p>\u672a\u5206\u914d\u9875\uff08Unallocated Page\uff09\uff1a</p> <ul> <li>\u8868\u7a7a\u95f4\u4e2d\u5c1a\u672a\u88ab\u4efb\u4f55\u6570\u636e\u7ed3\u6784\u4f7f\u7528\u7684\u7a7a\u95f2\u9875\u3002</li> </ul> </li> <li> <p>\u5176\u4ed6\u4e13\u7528\u9875\uff1a</p> <ul> <li>\u4f8b\u5982\uff0cInnoDB\u8fd8\u4f7f\u7528\u4e00\u4e9b\u4e13\u95e8\u7684\u9875\u6765\u7ba1\u7406\u8868\u7a7a\u95f4\u4e2d\u7684\u533a\uff08Extent\uff0c\u753164\u4e2a\u8fde\u7eed\u7684\u9875\u7ec4\u6210\uff09\u548c\u6bb5\uff08Segment\uff09\u7684\u5206\u914d\u4fe1\u606f\uff0c\u5982<code>INODE</code>\u9875\u3001<code>IBUF_BITMAP</code>\u9875\u7b49\u3002</li> </ul> </li> </ol> <p>\u53ef\u4ee5\u628aInnoDB\u7684\u5b58\u50a8\u770b\u4f5c\u662f\u4e00\u4e2a\u7531\u5404\u79cd\u4e0d\u540c\u7c7b\u578b\u7684\u9875\u6784\u6210\u7684\u590d\u6742\u7ed3\u6784\uff1a *   \u6570\u636e\u9875\uff08\u7d22\u5f15\u9875\uff09\u662f\u5b58\u653e\u7528\u6237\u6570\u636e\u548cB+\u6811\u7d22\u5f15\u7684\u4e3b\u4f53\u3002 *   Undo\u65e5\u5fd7\u9875\u8d1f\u8d23\u4e8b\u52a1\u7684\u56de\u6eda\u548cMVCC\u3002 *   \u7cfb\u7edf\u9875\u548c\u4e8b\u52a1\u7cfb\u7edf\u9875\u7b49\u5b58\u50a8\u7740\u7ef4\u6301\u6570\u636e\u5e93\u6b63\u5e38\u8fd0\u884c\u7684\u5404\u79cd\u5143\u6570\u636e\u3002 *   \u6ea2\u51fa\u9875\u7528\u4e8e\u5b58\u50a8\u8fc7\u5927\u7684\u5217\u6570\u636e\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/Redo%20Log%E4%BB%8B%E7%BB%8D/","title":"Redo Log\u4ecb\u7ecd","text":"<p>Redo Log\u662f\u4e00\u79cd\u57fa\u4e8e\u7269\u7406\u683c\u5f0f\u7684\u65e5\u5fd7\u3002\u5b83\u8bb0\u5f55\u7684\u662f\u5bf9\u6570\u636e\u5e93\u7269\u7406\u9875\u9762\uff08Page\uff09\u6240\u505a\u7684\u4fee\u6539\uff0c\u800c\u4e0d\u662f\u903b\u8f91\u4e0a\u7684SQL\u8bed\u53e5\u3002</p> <ul> <li>\u7269\u7406\u683c\u5f0f\uff1a\u5b83\u8bb0\u5f55\u7684\u662f\u201c\u5728\u54ea\u4e2a\u6570\u636e\u6587\u4ef6\u7684\u54ea\u4e2a\u9875\u9762\u7684\u54ea\u4e2a\u504f\u79fb\u91cf\u4e0a\uff0c\u505a\u4e86\u4ec0\u4e48\u503c\u7684\u4fee\u6539\u201d\u3002\u8fd9\u79cd\u8bb0\u5f55\u65b9\u5f0f\u975e\u5e38\u7d27\u51d1\u548c\u9ad8\u6548\u3002</li> <li>\u5faa\u73af\u5199\u5165\uff1aRedo Log\u6587\u4ef6\u4e0d\u662f\u65e0\u9650\u589e\u957f\u7684\u3002\u5b83\u662f\u7531\u591a\u4e2a\u56fa\u5b9a\u5927\u5c0f\u7684\u6587\u4ef6\u7ec4\u6210\u7684\u73af\u5f62\u65e5\u5fd7\u7ec4\uff08\u6bd4\u5982<code>ib_logfile0</code>, <code>ib_logfile1</code>\uff09\u3002\u5f53\u5199\u5230\u6700\u540e\u4e00\u4e2a\u6587\u4ef6\u7684\u672b\u5c3e\u65f6\uff0c\u4f1a\u91cd\u65b0\u56de\u5230\u7b2c\u4e00\u4e2a\u6587\u4ef6\u5f00\u59cb\u8986\u76d6\u5199\u3002</li> <li>\u5e42\u7b49\u6027\uff1a\u7531\u4e8e\u662f\u7269\u7406\u65e5\u5fd7\uff0c\u91cd\u653eRedo Log\u7684\u64cd\u4f5c\u662f\u5e42\u7b49\u7684\u3002\u5373\u4f7f\u56e0\u4e3a\u67d0\u79cd\u539f\u56e0\u91cd\u590d\u6267\u884c\u4e86\u540c\u4e00\u6761Redo Log\u8bb0\u5f55\uff0c\u5bf9\u6570\u636e\u9875\u7684\u7ed3\u679c\u4e5f\u4e0d\u4f1a\u4ea7\u751f\u5f71\u54cd\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/Redo%20Log%E4%BB%8B%E7%BB%8D/#redo-log","title":"\u4e3a\u4ec0\u4e48\u9700\u8981Redo Log","text":"<p>Redo Log\u7684\u6838\u5fc3\u76ee\u7684\u662f\u89e3\u51b3\u4e00\u4e2a\u6027\u80fd\u548c\u53ef\u9760\u6027\u4e4b\u95f4\u7684\u77db\u76fe\uff0c\u8fd9\u4e2a\u6280\u672f\u65b9\u6848\u88ab\u79f0\u4e3aWAL\uff08Write-Ahead Logging\uff0c\u9884\u5199\u65e5\u5fd7\uff09\u3002</p> <ol> <li> <p>\u6027\u80fd\u95ee\u9898\uff1a\u6570\u636e\u5e93\u7684\u6570\u636e\u6700\u7ec8\u662f\u5b58\u50a8\u5728\u78c1\u76d8\u4e0a\u7684\u3002\u5982\u679c\u6bcf\u6b21\u4e8b\u52a1\u63d0\u4ea4\uff0c\u6211\u4eec\u90fd\u5fc5\u987b\u628a\u6240\u6709\u4fee\u6539\u8fc7\u7684\u6570\u636e\u9875\uff08Data Page\uff09\u90fd\u4ece\u5185\u5b58\u5237\u56de\u5230\u78c1\u76d8\uff0c\u90a3\u4e48\u4f1a\u4ea7\u751f\u5927\u91cf\u7684\u968f\u673aI/O\u3002\u968f\u673aI/O\u662f\u975e\u5e38\u6162\u7684\uff0c\u8fd9\u4f1a\u6781\u5927\u5730\u62d6\u6162\u6570\u636e\u5e93\u7684\u6027\u80fd\u3002</p> </li> <li> <p>WAL\u89e3\u51b3\u65b9\u6848\uff1aInnoDB\u5f15\u5165\u4e86Redo Log\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002\u5b83\u7684\u5de5\u4f5c\u6d41\u7a0b\u662f\uff1a</p> <ul> <li>\u5f53\u4e8b\u52a1\u4fee\u6539\u6570\u636e\u65f6\uff0c\u5b83\u9996\u5148\u4fee\u6539\u7684\u662f\u5185\u5b58\u4e2d\u7684\u6570\u636e\u9875\uff08Buffer Pool\uff09\u3002</li> <li>\u540c\u65f6\uff0c\u5b83\u4f1a\u5c06\u8fd9\u6b21\u4fee\u6539\u7684\u201c\u7269\u7406\u64cd\u4f5c\u201d\u8bb0\u5f55\u5230Redo Log Buffer\uff08\u4e00\u5757\u5185\u5b58\u533a\u57df\uff09\u4e2d\u3002</li> <li>\u5f53\u4e8b\u52a1\u63d0\u4ea4\u65f6\uff0c\u5b83\u4e0d\u9700\u8981\u7acb\u5373\u5c06\u6570\u636e\u9875\u5237\u76d8\uff0c\u800c\u53ea\u9700\u8981\u4fdd\u8bc1\u5c06\u5bf9\u5e94\u7684Redo Log\u8bb0\u5f55\u4eceRedo Log Buffer\u5237\u5230\u78c1\u76d8\u4e0a\u7684Redo Log\u6587\u4ef6\u4e2d\u3002</li> <li>\u8fd9\u4e2aRedo Log\u7684\u5237\u76d8\u64cd\u4f5c\u662f\u987a\u5e8fI/O\uff0c\u901f\u5ea6\u8fdc\u5feb\u4e8e\u6570\u636e\u9875\u7684\u968f\u673aI/O\u3002</li> </ul> </li> <li> <p>\u5e26\u6765\u7684\u597d\u5904\uff1a</p> <ul> <li>\u4fdd\u8bc1\u4e86\u4e8b\u52a1\u7684\u6301\u4e45\u6027\uff08Durability\uff09\uff1a\u53ea\u8981\u4e8b\u52a1\u63d0\u4ea4\u65f6Redo Log\u6210\u529f\u5199\u5165\u78c1\u76d8\uff0c\u90a3\u4e48\u5373\u4f7f\u6570\u636e\u5e93\u6b64\u65f6\u5b95\u673a\uff0c\u5185\u5b58\u4e2d\u7684\u6570\u636e\u9875\u4fee\u6539\u5168\u90e8\u4e22\u5931\uff0c\u6211\u4eec\u4e5f\u80fd\u5728\u91cd\u542f\u540e\u901a\u8fc7\u91cd\u653eRedo Log\u6765\u6062\u590d\u8fd9\u4e9b\u4fee\u6539\uff0c\u4fdd\u8bc1\u5df2\u63d0\u4ea4\u7684\u4e8b\u52a1\u6c38\u4e0d\u4e22\u5931\u3002</li> <li>\u63d0\u5347\u4e86\u6027\u80fd\uff1a\u5c06\u4e8b\u52a1\u63d0\u4ea4\u65f6\u7684\u5927\u91cf\u968f\u673aI/O\u64cd\u4f5c\uff0c\u8f6c\u6362\u6210\u4e86\u4e00\u6b21\u6216\u51e0\u6b21\u9ad8\u6548\u7684\u987a\u5e8fI/O\u64cd\u4f5c\uff0c\u6781\u5927\u5730\u63d0\u5347\u4e86\u6570\u636e\u5e93\u7684\u541e\u5410\u91cf\u3002\u771f\u6b63\u7684\u6570\u636e\u9875\u5237\u76d8\uff08\u79f0\u4e3a\u201c\u5237\u810f\u201d\uff09\u53ef\u4ee5\u7531\u540e\u53f0\u7ebf\u7a0b\u5f02\u6b65\u3001\u6279\u91cf\u5730\u8fdb\u884c\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/Redo%20Log%E4%BB%8B%E7%BB%8D/#redo-log_1","title":"Redo Log\u7684\u5de5\u4f5c\u6d41\u7a0b\uff08\u4e24\u9636\u6bb5\u63d0\u4ea4\uff09","text":"<p>Redo Log\u7684\u5199\u5165\u8fc7\u7a0b\u975e\u5e38\u7cbe\u7ec6\uff0c\u6d89\u53ca\u5230\u4e24\u4e2a\u5173\u952e\u7684\u6307\u9488\u548c\u4e00\u5757\u5185\u5b58\u7f13\u51b2\u533a\uff1a</p> <ul> <li><code>write pos</code>: \u5f53\u524d\u8bb0\u5f55\u7684\u4f4d\u7f6e\uff0c\u4e00\u8fb9\u5199\u4e00\u8fb9\u540e\u79fb\u3002</li> <li><code>check point</code>: \u5f53\u524d\u8981\u64e6\u9664\u7684\u4f4d\u7f6e\uff0c\u4e5f\u662f\u4e00\u8fb9\u64e6\u9664\u4e00\u8fb9\u540e\u79fb\u3002</li> <li><code>Log Buffer</code>: Redo Log\u7684\u5185\u5b58\u7f13\u51b2\u533a\u3002</li> </ul> <p>\u5f53\u4e8b\u52a1\u63d0\u4ea4\u65f6\uff0c\u4e3a\u4e86\u4fdd\u8bc1Binlog\u548cRedo Log\u4e4b\u95f4\u7684\u4e00\u81f4\u6027\uff08\u8fd9\u5bf9\u4e8e\u4e3b\u4ece\u590d\u5236\u548c\u6570\u636e\u6062\u590d\u81f3\u5173\u91cd\u8981\uff09\uff0cInnoDB\u4f7f\u7528\u4e86\u5185\u90e8\u7684\u4e24\u9636\u6bb5\u63d0\u4ea4\uff08Two-phase Commit\uff09\u673a\u5236\uff1a</p> <ol> <li> <p>Prepare\u9636\u6bb5\uff1a</p> <ul> <li>\u5f53\u6267\u884c<code>COMMIT</code>\u65f6\uff0cInnoDB\u9996\u5148\u4f1a\u5c06\u8be5\u4e8b\u52a1\u7684Redo Log\u8bb0\u5f55\u5199\u5165\u6587\u4ef6\u7cfb\u7edf\u7f13\u5b58\uff0c\u5e76\u6253\u4e0a\u4e00\u4e2a\u201cprepare\u201d\u6807\u8bb0\u3002</li> <li>\u7136\u540e\u901a\u77e5MySQL Server\u5c42\uff0c\u53ef\u4ee5\u5199\u5165Binlog\u4e86\u3002</li> </ul> </li> <li> <p>Commit\u9636\u6bb5\uff1a</p> <ul> <li>MySQL Server\u5c42\u63a5\u6536\u5230\u901a\u77e5\u540e\uff0c\u5c06\u8be5\u4e8b\u52a1\u7684Binlog\u5199\u5165\u78c1\u76d8\u3002</li> <li>Binlog\u5199\u5165\u6210\u529f\u540e\uff0cServer\u5c42\u4f1a\u518d\u8c03\u7528InnoDB\u7684\u63a5\u53e3\uff0c\u544a\u8bc9\u5b83\u53ef\u4ee5\u771f\u6b63\u63d0\u4ea4\u4e8b\u52a1\u4e86\u3002</li> <li>InnoDB\u6536\u5230\u8fd9\u4e2a\u6700\u7ec8\u786e\u8ba4\u540e\uff0c\u624d\u4f1a\u5728Redo Log\u4e2d\u5199\u5165\u4e00\u4e2a\u201ccommit\u201d\u6807\u8bb0\uff0c\u4ee3\u8868\u4e8b\u52a1\u7684\u771f\u6b63\u5b8c\u6210\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/Redo%20Log%E4%BB%8B%E7%BB%8D/#_1","title":"\u4e24\u9636\u6bb5\u63d0\u4ea4\u7684\u91cd\u8981\u6027\uff1a","text":"<p>\u8fd9\u4e2a\u673a\u5236\u4fdd\u8bc1\u4e86\u4efb\u4f55\u4e00\u4e2a\u4e8b\u52a1\uff0c\u8981\u4e48\u5b83\u7684Redo Log\u548cBinlog\u90fd\u5b8c\u6574\u5b58\u5728\uff0c\u8981\u4e48\u5c31\u90fd\u6ca1\u6709\u3002 *   \u5982\u679c\u6570\u636e\u5e93\u5728Redo Log prepare\u4e4b\u540e\u3001Binlog\u5199\u5165\u524d\u5b95\u673a\uff1a\u91cd\u542f\u540e\uff0cInnoDB\u53d1\u73b0\u8fd9\u4e2aRedo Log\u53ea\u6709prepare\u6807\u8bb0\u6ca1\u6709commit\u6807\u8bb0\uff0c\u5b83\u4f1a\u53bb\u67e5\u8be2Binlog\u4e2d\u662f\u5426\u6709\u5bf9\u5e94\u7684\u4e8b\u52a1\u8bb0\u5f55\u3002\u53d1\u73b0\u6ca1\u6709\uff0c\u5c31\u4f1a\u56de\u6eda\u8fd9\u4e2a\u4e8b\u52a1\u3002 *   \u5982\u679c\u6570\u636e\u5e93\u5728Binlog\u5199\u5165\u4e4b\u540e\u3001Redo Log commit\u524d\u5b95\u673a\uff1a\u91cd\u542f\u540e\uff0cInnoDB\u53d1\u73b0\u8fd9\u4e2aRedo Log\u6709prepare\u6807\u8bb0\uff0c\u5e76\u4e14\u5728Binlog\u4e2d\u4e5f\u80fd\u627e\u5230\u5bf9\u5e94\u7684\u4e8b\u52a1\uff0c\u5b83\u5c31\u4f1a\u8ba4\u4e3a\u8fd9\u4e2a\u4e8b\u52a1\u662f\u9700\u8981\u88ab\u63d0\u4ea4\u7684\uff0c\u4f1a\u7ee7\u7eed\u5b8c\u6210Redo Log\u7684commit\u64cd\u4f5c\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/Redo%20Log%E4%BB%8B%E7%BB%8D/#redo-logbinlog","title":"Redo Log\u4e0eBinlog\u7684\u533a\u522b","text":"\u7279\u6027 Redo Log Binlog \u6240\u5c5e\u5c42\u6b21 InnoDB\u5f15\u64ce\u5c42 MySQL Server\u5c42 \u65e5\u5fd7\u683c\u5f0f \u7269\u7406\u65e5\u5fd7\uff08\u6570\u636e\u9875\u7684\u4fee\u6539\uff09 \u903b\u8f91\u65e5\u5fd7\uff08SQL\u8bed\u53e5\u6216\u884c\u53d8\u66f4\uff09 \u5199\u5165\u65b9\u5f0f \u5faa\u73af\u5199\u5165 \u8ffd\u52a0\u5199\u5165\uff0c\u5199\u6ee1\u4e00\u4e2a\u6587\u4ef6\u6362\u4e0b\u4e00\u4e2a \u6838\u5fc3\u4f5c\u7528 \u4fdd\u8bc1\u4e8b\u52a1\u6301\u4e45\u6027\uff0c\u5b9e\u73b0\u5d29\u6e83\u6062\u590d \u5b9e\u73b0\u4e3b\u4ece\u590d\u5236\u548c\u6570\u636e\u6062\u590d \u5e42\u7b49\u6027 \u662f \u4e0d\u4e00\u5b9a\uff08STATEMENT\u683c\u5f0f\u4e0b\uff09"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/Undo%20Log%E4%BB%8B%E7%BB%8D/","title":"Undo Log\u4ecb\u7ecd","text":"<p>Undo Log\uff08\u64a4\u9500\u65e5\u5fd7\uff09\u662f InnoDB \u5b58\u50a8\u5f15\u64ce\u7684\u6838\u5fc3\u7ec4\u6210\u90e8\u5206\uff0c\u5b83\u5728\u6570\u636e\u5e93\u7684\u4e24\u4e2a\u5173\u952e\u9886\u57df\u2014\u2014\u5e76\u53d1\u63a7\u5236 (MVCC) \u548c \u6545\u969c\u6062\u590d (Crash Recovery) \u4e2d\u626e\u6f14\u7740\u4e0d\u53ef\u6216\u7f3a\u7684\u89d2\u8272\u3002InnoDB \u4e2d\u7684 Undo Log \u5177\u6709\u201c\u4ea6\u65e5\u5fd7\u4ea6\u6570\u636e\u201d\u7684\u7279\u6027\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u65e2\u50cf\u65e5\u5fd7\u4e00\u6837\u8bb0\u5f55\u64cd\u4f5c\uff0c\u53c8\u50cf\u6570\u636e\u4e00\u6837\u88ab\u7ba1\u7406\uff0c\u5176\u81ea\u8eab\u7684\u6301\u4e45\u6027\u4e5f\u7531 Redo Log \u6765\u4fdd\u969c\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/Undo%20Log%E4%BB%8B%E7%BB%8D/#undo-log","title":"Undo Log \u7684\u6838\u5fc3\u4f5c\u7528","text":"<ol> <li> <p>\u5b9e\u73b0\u4e8b\u52a1\u7684\u539f\u5b50\u6027\uff08\u56de\u6eda\uff09: \u6570\u636e\u5e93\u4fdd\u8bc1\u4e8b\u52a1\u662f\u539f\u5b50\u6027\u7684\uff0c\u5373\u4e8b\u52a1\u4e2d\u7684\u6240\u6709\u64cd\u4f5c\u8981\u4e48\u5168\u90e8\u6210\u529f\uff0c\u8981\u4e48\u5168\u90e8\u5931\u8d25\u3002\u5f53\u7528\u6237\u6267\u884c <code>ROLLBACK</code>\uff0c\u6216\u56e0\u6b7b\u9501\u3001\u7cfb\u7edf\u5d29\u6e83\u7b49\u539f\u56e0\u5bfc\u81f4\u4e8b\u52a1\u4e2d\u65ad\u65f6\uff0c\u6570\u636e\u5e93\u9700\u8981\u64a4\u9500\u8be5\u4e8b\u52a1\u5df2\u7ecf\u6267\u884c\u7684\u6240\u6709\u4fee\u6539\u3002Undo Log \u8bb0\u5f55\u4e86\u6570\u636e\u88ab\u4fee\u6539\u524d\u7684\u201c\u5386\u53f2\u7248\u672c\u201d\uff0c\u901a\u8fc7\u9006\u5411\u64cd\u4f5c\u8fd9\u4e9b\u8bb0\u5f55\uff0c\u53ef\u4ee5\u5c06\u6570\u636e\u6062\u590d\u5230\u4e8b\u52a1\u5f00\u59cb\u524d\u7684\u72b6\u6001\uff0c\u4ece\u800c\u4fdd\u8bc1\u539f\u5b50\u6027\u3002</p> </li> <li> <p>\u5b9e\u73b0\u591a\u7248\u672c\u5e76\u53d1\u63a7\u5236 (MVCC): \u4e3a\u4e86\u63d0\u9ad8\u5e76\u53d1\u6027\u80fd\uff0c\u907f\u514d\u8bfb\u5199\u64cd\u4f5c\u4e92\u76f8\u963b\u585e\uff0cInnoDB \u91c7\u7528\u4e86 MVCC \u673a\u5236\u3002\u5f53\u4e00\u4e2a\u4e8b\u52a1\u9700\u8981\u8bfb\u53d6\u67d0\u884c\u6570\u636e\u65f6\uff0c\u5982\u679c\u8be5\u884c\u6b63\u5728\u88ab\u53e6\u4e00\u4e2a\u672a\u63d0\u4ea4\u7684\u4e8b\u52a1\u6240\u4fee\u6539\uff0cInnoDB \u4e0d\u4f1a\u76f4\u63a5\u52a0\u9501\u7b49\u5f85\uff0c\u800c\u662f\u4f1a\u5229\u7528 Undo Log \u4e2d\u5b58\u50a8\u7684\u5386\u53f2\u7248\u672c\uff0c\u4e3a\u8bfb\u4e8b\u52a1\u63d0\u4f9b\u4e00\u4e2a\u5728\u8be5\u4e8b\u52a1\u5f00\u59cb\u65f6\u4e0d\u5305\u542b\u672a\u63d0\u4ea4\u4fee\u6539\u7684\u6570\u636e\u201c\u5feb\u7167\u201d\uff0c\u4ece\u800c\u5b9e\u73b0\u65e0\u9501\u7684\u201c\u4e00\u81f4\u6027\u8bfb\u201d\u3002</p> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/Undo%20Log%E4%BB%8B%E7%BB%8D/#undo-log_1","title":"Undo Log \u7684\u7ec4\u7ec7\u7ed3\u6784","text":"<p>\u8981\u7406\u89e3 Undo Log \u7684\u5de5\u4f5c\u673a\u5236\uff0c\u9996\u5148\u5fc5\u987b\u4e86\u89e3\u5176\u5c42\u7ea7\u5316\u7684\u7ec4\u7ec7\u7ed3\u6784\uff1a</p> <ul> <li>Undo Record: \u8fd9\u662f\u6700\u5c0f\u7684\u5355\u5143\uff0c\u8bb0\u5f55\u4e86\u5355\u6b21\u884c\u8bb0\u5f55\u4fee\u6539\u524d\u7684\u955c\u50cf\u3002\u4e3b\u8981\u5206\u4e3a <code>INSERT</code> \u7c7b\u578b\uff08\u7528\u4e8e\u56de\u6eda\u63d2\u5165\u64cd\u4f5c\uff09\u548c <code>UPDATE</code> \u7c7b\u578b\uff08\u7528\u4e8e\u56de\u6eda\u66f4\u65b0/\u5220\u9664\u64cd\u4f5c\uff0c\u5e76\u670d\u52a1\u4e8e MVCC\uff09\u3002</li> <li>Undo Log: \u4e00\u4e2a\u4e8b\u52a1\u53ef\u80fd\u4f1a\u4fee\u6539\u591a\u884c\u6570\u636e\uff0c\u4ea7\u751f\u7684\u591a\u4e2a Undo Record \u4f1a\u88ab\u4e32\u8054\u6210\u4e00\u4e2a\u94fe\u8868\uff0c\u5f62\u6210\u8be5\u4e8b\u52a1\u7684 Undo Log\u3002</li> <li>Undo Segment: \u8fd9\u662f\u4e00\u4e2a\u7269\u7406\u5b58\u50a8\u5355\u5143\uff0c\u7528\u4e8e\u5b58\u653e\u4e00\u4e2a\u6216\u591a\u4e2a Undo Log\u3002\u6bcf\u4e2a\u6267\u884c\u5199\u64cd\u4f5c\u7684\u4e8b\u52a1\u90fd\u4f1a\u72ec\u5360\u4e00\u4e2a Undo Segment\u3002\u4e3a\u4e86\u9ad8\u6548\u5229\u7528\u7a7a\u95f4\uff0c\u591a\u4e2a\u8f83\u5c0f\u7684 Undo Log \u53ef\u4ee5\u7d27\u51d1\u5730\u5b58\u653e\u5728\u540c\u4e00\u4e2a Undo Page \u4e2d\u3002</li> <li>Rollback Segment: \u5b83\u662f Undo Segment \u7684\u4e00\u4e2a\u96c6\u5408\uff0c\u901a\u5e38\u5305\u542b 1024 \u4e2a Undo Segment \u7684\u69fd\u4f4d\uff08Slot\uff09\u3002\u6570\u636e\u5e93\u7684\u5e76\u53d1\u5199\u4e8b\u52a1\u6570\u53d7 Rollback Segment \u603b\u6570\u7684\u9650\u5236\u3002</li> <li>Undo Tablespace: \u8fd9\u662f\u5b58\u653e Rollback Segment \u7684\u7269\u7406\u6587\u4ef6\u3002\u4ece MySQL 8.0 \u5f00\u59cb\uff0cUndo Tablespace \u53ef\u4ee5\u72ec\u7acb\u4e8e\u7cfb\u7edf\u8868\u7a7a\u95f4\uff08ibdata1\uff09\u5b58\u5728\uff0c\u8fd9\u6781\u5927\u5730\u6539\u5584\u4e86\u7a7a\u95f4\u7ba1\u7406\u548c\u56de\u6536\u7684\u7075\u6d3b\u6027\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/Undo%20Log%E4%BB%8B%E7%BB%8D/#undo-log_2","title":"Undo Log \u7684\u751f\u547d\u5468\u671f\uff1a\u5199\u5165\u3001\u843d\u76d8\u4e0e\u4e22\u5f03\u673a\u5236","text":"<p>\u4e0b\u9762\u6211\u4eec\u8be6\u7ec6\u4ecb\u7ecd Undo Log \u4ece\u751f\u6210\u5230\u6700\u7ec8\u88ab\u6e05\u7406\u7684\u6574\u4e2a\u8fc7\u7a0b\uff0c\u91cd\u70b9\u5173\u6ce8\u5176\u843d\u76d8\u3001\u5237\u65b0\u548c\u4e22\u5f03\u673a\u5236\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/Undo%20Log%E4%BB%8B%E7%BB%8D/#1-writing","title":"1. \u5199\u5165\u4e0e\u5206\u914d (Writing)","text":"<p>\u5f53\u4e00\u4e2a\u5199\u4e8b\u52a1\u9996\u6b21\u6267\u884c\u4fee\u6539\u64cd\u4f5c\u65f6\uff0cInnoDB \u4f1a\u4e3a\u5176\u5206\u914d\u4e00\u4e2a Undo Segment\u3002\u4e8b\u52a1\u6267\u884c\u7684\u6bcf\u4e00\u6b21\u6570\u636e\u4fee\u6539\uff08INSERT, UPDATE, DELETE\uff09\uff0c\u90fd\u4f1a\u6267\u884c\u4ee5\u4e0b\u6b65\u9aa4\uff1a</p> <ol> <li>\u751f\u6210 Undo Record: \u6839\u636e\u4fee\u6539\u7684\u7c7b\u578b\uff08\u63d2\u5165\u3001\u66f4\u65b0\u6216\u5220\u9664\uff09\u751f\u6210\u4e00\u4e2a\u5bf9\u5e94\u7684 Undo Record\uff0c\u5176\u4e2d\u5305\u542b\u4e86\u6062\u590d\u6570\u636e\u6240\u9700\u7684\u4e3b\u952e\u3001\u88ab\u4fee\u6539\u5b57\u6bb5\u7684\u5386\u53f2\u503c\u3001\u6307\u5411\u524d\u4e00\u4e2a\u5386\u53f2\u7248\u672c\u7684\u6307\u9488\uff08<code>Rollptr</code>\uff09\u7b49\u4fe1\u606f\u3002</li> <li>\u5199\u5165 Undo Log: \u5c06\u8fd9\u4e2a\u65b0\u751f\u6210\u7684 Undo Record \u987a\u5e8f\u5199\u5165\u5f53\u524d\u4e8b\u52a1\u6301\u6709\u7684 Undo Segment \u7684\u6d3b\u52a8 Undo Log \u4e2d\u3002</li> <li>\u66f4\u65b0\u6570\u636e\u8bb0\u5f55: \u5c06\u6570\u636e\u9875\uff08Data Page\uff09\u4e2d\u7684\u8bb0\u5f55\u8fdb\u884c\u4fee\u6539\uff0c\u5e76\u5c06\u8be5\u8bb0\u5f55\u5185\u90e8\u7684\u9690\u85cf\u5b57\u6bb5 <code>rollptr</code> \u6307\u5411\u521a\u521a\u5199\u5165\u7684 Undo Record\u3002\u8fd9\u4e2a\u6307\u9488\u6784\u6210\u4e86\u7248\u672c\u94fe\uff0c\u662f MVCC \u5b9e\u73b0\u7684\u5173\u952e\u3002</li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/Undo%20Log%E4%BB%8B%E7%BB%8D/#2-flushing-to-disk","title":"2. \u843d\u76d8\u4e0e\u5237\u65b0\u673a\u5236 (Flushing to Disk)","text":"<p>\u8fd9\u662f\u7406\u89e3 Undo Log \u201c\u4ea6\u65e5\u5fd7\u4ea6\u6570\u636e\u201d\u7279\u6027\u7684\u5173\u952e\u3002Undo Log \u672c\u8eab\u6ca1\u6709\u72ec\u7acb\u7684\u3001\u7c7b\u4f3c Redo Log <code>fsync</code> \u90a3\u6837\u7684\u5f3a\u5236\u5237\u76d8\u673a\u5236\u3002\u5b83\u7684\u6301\u4e45\u5316\u9075\u5faa InnoDB \u5bf9\u6240\u6709\u6570\u636e\u7684\u901a\u7528\u7ba1\u7406\u65b9\u5f0f\uff1a</p> <ol> <li>\u5199\u5165 Buffer Pool: Undo Log \u7684\u5199\u5165\u64cd\u4f5c\u4e0e\u6570\u636e\u9875\u7684\u4fee\u6539\u4e00\u6837\uff0c\u9996\u5148\u662f\u5728\u5185\u5b58\u4e2d\u7684 Buffer Pool \u4e2d\u5b8c\u6210\u7684\u3002\u5199\u5165 Undo Record \u5b9e\u9645\u4e0a\u662f\u4fee\u6539\u4e86 Buffer Pool \u4e2d\u67d0\u4e2a Undo Page \u7684\u5185\u5bb9\u3002</li> <li>\u751f\u6210 Redo Log: \u5bf9 Undo Page \u7684\u6240\u6709\u4fee\u6539\uff08\u4f8b\u5982\uff0c\u5199\u5165\u4e00\u4e2a\u65b0\u7684 Undo Record\u3001\u66f4\u65b0 Undo Page Header \u7b49\uff09\u90fd\u4f1a\u88ab\u8bb0\u5f55\u4e3a Redo Log\u3002\u4f8b\u5982\uff0c<code>MLOG_UNDO_INSERT</code> \u7c7b\u578b\u7684 Redo Log \u4f1a\u8bb0\u5f55\u4e0b\u5411 Undo Page \u6dfb\u52a0\u4e00\u6761 Undo Record \u7684\u8fd9\u4e00\u7269\u7406\u64cd\u4f5c\u3002</li> <li>\u6301\u4e45\u5316\u4f9d\u8d56 Redo Log: Undo Log \u7684\u6301\u4e45\u6027\u7531 Redo Log \u6765\u4fdd\u8bc1\u3002\u5f53\u4e8b\u52a1\u63d0\u4ea4\u65f6\uff0c\u5176\u4ea7\u751f\u7684 Redo Log \u5fc5\u987b\u88ab\u5237\u65b0\u5230\u78c1\u76d8\uff08\u5373 <code>innodb_flush_log_at_trx_commit</code> \u63a7\u5236\u7684\u7b56\u7565\uff09\u3002\u53ea\u8981 Redo Log \u843d\u76d8\u4e86\uff0c\u5373\u4f7f\u6b64\u65f6\u6570\u636e\u5e93\u5d29\u6e83\uff0c\u5bf9\u5e94\u7684 Undo Page \u8fd8\u6ca1\u6709\u4ece Buffer Pool \u5237\u5230\u78c1\u76d8\uff0c\u5728\u6062\u590d\u65f6 InnoDB \u4e5f\u53ef\u4ee5\u901a\u8fc7\u91cd\u653e Redo Log \u6765\u91cd\u5efa\u8fd9\u4e2a Undo Page \u7684\u4fee\u6539\uff0c\u4ece\u800c\u786e\u4fdd Undo Log \u7684\u5b8c\u6574\u6027\u3002</li> <li>\u5f02\u6b65\u5237\u76d8: \u53d8\u810f\u7684 Undo Page\uff08\u5373\u5728 Buffer Pool \u4e2d\u88ab\u4fee\u6539\u4f46\u5c1a\u672a\u5199\u5165\u78c1\u76d8\u7684 Undo Page\uff09\u4f1a\u50cf\u666e\u901a\u7684\u6570\u636e\u9875\u4e00\u6837\uff0c\u7531\u540e\u53f0\u7684\u5237\u810f\u7ebf\u7a0b\uff08Flush List \u6216 LRU List Flush\uff09\u5728\u5408\u9002\u7684\u65f6\u673a\u5f02\u6b65\u5730\u5199\u5165\u5230\u5bf9\u5e94\u7684 Undo Tablespace \u6587\u4ef6\u4e2d\u3002</li> </ol> <p>\u603b\u7ed3\u6765\u8bf4\uff0cUndo Log \u7684\u201c\u843d\u76d8\u201d\u662f\u4e00\u4e2a\u95f4\u63a5\u8fc7\u7a0b\uff1a\u5176\u64cd\u4f5c\u7684\u6301\u4e45\u6027\u7531\u540c\u6b65\u5237\u65b0\u7684 Redo Log \u4fdd\u8bc1\uff0c\u800c\u5176\u672c\u8eab\u6240\u5728\u7684 Undo Page \u5219\u7531\u540e\u53f0\u7ebf\u7a0b\u5f02\u6b65\u5237\u5165\u78c1\u76d8\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/Undo%20Log%E4%BB%8B%E7%BB%8D/#3-discarding-purging","title":"3. \u4e22\u5f03\u4e0e\u6e05\u7406\u673a\u5236 (Discarding / Purging)","text":"<p>\u5f53\u4e00\u4e2a\u4e8b\u52a1\u63d0\u4ea4\u540e\uff0c\u5b83\u4ea7\u751f\u7684 Undo Log \u5e76\u4e0d\u4f1a\u7acb\u5373\u88ab\u5220\u9664\u3002\u56e0\u4e3a\u53ef\u80fd\u8fd8\u6709\u5176\u4ed6\u6b63\u5728\u8fd0\u884c\u7684\u8bfb\u4e8b\u52a1\u9700\u8981\u8bbf\u95ee\u8fd9\u4e9b Undo Log \u6765\u6784\u5efa\u6570\u636e\u5feb\u7167\uff08MVCC\uff09\u3002\u53ea\u6709\u5f53\u7cfb\u7edf\u786e\u8ba4\u67d0\u4e2a Undo Log \u8bb0\u5f55\u7684\u5386\u53f2\u7248\u672c\u4e0d\u518d\u88ab\u4efb\u4f55\u4e8b\u52a1\u6240\u9700\u8981\u65f6\uff0c\u624d\u80fd\u8fdb\u884c\u6e05\u7406\u3002\u8fd9\u4e2a\u6e05\u7406\u8fc7\u7a0b\u7531\u540e\u53f0\u7684 Purge \u7ebf\u7a0b \u8d1f\u8d23\uff0c\u5206\u4e3a\u4ee5\u4e0b\u51e0\u4e2a\u9636\u6bb5\uff1a</p> <ol> <li> <p>\u79fb\u5165 History List: \u5f53\u4e00\u4e2a\u5199\u4e8b\u52a1\u63d0\u4ea4\u540e\uff0c\u5982\u679c\u5176 Undo Log \u5305\u542b\u88ab\u66f4\u65b0\u6216\u5220\u9664\u7684\u8bb0\u5f55\uff08\u5373 <code>UPDATE</code> \u7c7b\u578b\u7684 Undo Log\uff09\uff0c\u8fd9\u4e2a Undo Log \u4f1a\u88ab\u79fb\u52a8\u5230\u4e00\u4e2a\u540d\u4e3a History List \u7684\u94fe\u8868\u4e2d\uff0c\u5e76\u6309\u4e8b\u52a1\u63d0\u4ea4\u7684\u987a\u5e8f\uff08<code>trx_no</code>\uff09\u6392\u5217\u3002</p> </li> <li> <p>\u5224\u65ad\u662f\u5426\u53ef\u6e05\u7406: Purge \u7ebf\u7a0b\u4f1a\u68c0\u67e5\u5f53\u524d\u6240\u6709\u6d3b\u8dc3\u7684\u53ea\u8bfb\u4e8b\u52a1\u3002\u6bcf\u4e2a\u8bfb\u4e8b\u52a1\u90fd\u6709\u4e00\u4e2a ReadView\uff0c\u5176\u4e2d\u8bb0\u5f55\u4e86\u5b83\u542f\u52a8\u65f6\u7cfb\u7edf\u4e2d\u6700\u8001\u7684\u6d3b\u8dc3\u4e8b\u52a1ID\u3002\u4e00\u4e2a Undo Log \u53ef\u4ee5\u88ab\u6e05\u7406\u7684\u524d\u63d0\u662f\uff0c\u521b\u5efa\u8fd9\u4e2a Undo Log \u7684\u4e8b\u52a1\u7684\u63d0\u4ea4\u5e8f\u53f7\uff08<code>trx_no</code>\uff09\u6bd4\u5f53\u524d\u6240\u6709\u6d3b\u8dc3\u8bfb\u4e8b\u52a1 ReadView \u4e2d\u8bb0\u5f55\u7684\u6700\u8001\u4e8b\u52a1ID\u8fd8\u8981\u5c0f\u3002\u8fd9\u610f\u5473\u7740\uff0c\u6240\u6709\u6b63\u5728\u8fd0\u884c\u7684\u8bfb\u4e8b\u52a1\u90fd\u201c\u770b\u5f97\u5230\u201d\u8fd9\u4e2a Undo Log \u5bf9\u5e94\u7684\u4e8b\u52a1\u7684\u4fee\u6539\uff0c\u56e0\u6b64\u4e0d\u518d\u9700\u8981\u8bbf\u95ee\u8fd9\u4e2a\u5386\u53f2\u7248\u672c\u4e86\u3002</p> </li> <li> <p>\u6267\u884c Purge \u64cd\u4f5c (Undo Purge):</p> <ul> <li>Purge \u7ebf\u7a0b\u4ece History List \u4e2d\u627e\u5230\u7b26\u5408\u6e05\u7406\u6761\u4ef6\u7684 Undo Log\u3002</li> <li>\u5b83\u4f1a\u904d\u5386\u8fd9\u4e9b Undo Log \u4e2d\u7684\u6bcf\u4e00\u6761 Undo Record\u3002</li> <li>\u5bf9\u4e8e <code>TRX_UNDO_DEL_MARK_REC</code> \u7c7b\u578b\u7684\u8bb0\u5f55\uff08\u5373\u903b\u8f91\u5220\u9664\u7684\u8bb0\u5f55\uff09\uff0cPurge \u7ebf\u7a0b\u4f1a\u6267\u884c\u771f\u6b63\u7684\u7269\u7406\u5220\u9664\u64cd\u4f5c\uff0c\u5373\u4ece\u4e3b\u952e\u7d22\u5f15\u548c\u4e8c\u7ea7\u7d22\u5f15\u4e2d\u5f7b\u5e95\u79fb\u9664\u8be5\u8bb0\u5f55\u3002\u8fd9\u662f\u56e0\u4e3a\u5728\u6267\u884c <code>DELETE</code> \u64cd\u4f5c\u65f6\uff0cInnoDB \u4e3a\u4e86 MVCC \u53ea\u662f\u7ed9\u8bb0\u5f55\u6253\u4e0a\u4e86\u4e00\u4e2a\u5220\u9664\u6807\u8bb0\uff0c\u800c\u4e0d\u662f\u7acb\u5373\u7269\u7406\u5220\u9664\u3002</li> </ul> </li> <li> <p>\u56de\u6536 Undo Log \u7a7a\u95f4 (Undo Truncate):</p> <ul> <li>\u5f53\u4e00\u4e2a Undo Log \u4e2d\u7684\u6240\u6709 Undo Record \u90fd\u88ab\u5904\u7406\u5b8c\u6bd5\u540e\uff0c\u8fd9\u4e2a Undo Log \u672c\u8eab\u5c31\u53ef\u4ee5\u88ab\u56de\u6536\u4e86\u3002</li> <li>Purge \u7ebf\u7a0b\u4f1a\u91ca\u653e\u8fd9\u4e9b Undo Log \u6240\u5360\u7528\u7684 Undo Page\uff0c\u5e76\u5c06\u5176\u6240\u5c5e\u7684 Undo Segment \u6807\u8bb0\u4e3a\u53ef\u91cd\u7528\uff08\u52a0\u5165\u5230 Cached List\uff09\u6216\u76f4\u63a5\u91ca\u653e\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u5c31\u662f Undo Segment \u7684\u622a\u65ad (Truncate)\uff0c\u5b83\u4f1a\u56de\u6536 Undo Tablespace \u5185\u90e8\u7684\u7a7a\u95f4\u3002</li> <li>\u8fd9\u4e2a\u64cd\u4f5c\u901a\u5e38\u662f\u6279\u91cf\u8fdb\u884c\u7684\uff0c\u5176\u9891\u7387\u7531 <code>innodb_rseg_truncate_frequency</code> \u53c2\u6570\u63a7\u5236\u3002</li> </ul> </li> <li> <p>\u6536\u7f29 Undo Tablespace \u6587\u4ef6 (Undo Tablespace Truncate):</p> <ul> <li>\u5982\u679c\u542f\u7528\u4e86\u72ec\u7acb\u7684 Undo Tablespace\uff0c\u5e76\u4e14\u914d\u7f6e\u4e86 <code>innodb_undo_log_truncate</code> \u9009\u9879\uff0c\u5f53\u4e00\u4e2a Undo Tablespace \u6587\u4ef6\u4e2d\u7684\u6240\u6709 Undo Segment \u90fd\u53d8\u4e3a\u7a7a\u95f2\u72b6\u6001\u540e\uff0cInnoDB \u53ef\u4ee5\u5c06\u8fd9\u4e2a\u6587\u4ef6\u6807\u8bb0\u4e3a <code>inactive</code>\u3002</li> <li>\u5728\u6ca1\u6709\u65b0\u4e8b\u52a1\u4f7f\u7528\u8fd9\u4e2a\u6587\u4ef6\u540e\uff0cInnoDB \u4f1a\u5728\u540e\u53f0\u91cd\u5efa\u8fd9\u4e2a Undo Tablespace\uff0c\u5c06\u5176\u5927\u5c0f\u6536\u7f29\u5230\u521d\u59cb\u503c\uff0c\u4ece\u800c\u5c06\u6587\u4ef6\u7cfb\u7edf\u7a7a\u95f4\u8fd4\u8fd8\u7ed9\u64cd\u4f5c\u7cfb\u7edf\u3002\u8fd9\u89e3\u51b3\u4e86\u4ee5\u5f80 Undo Log \u7a7a\u95f4\u53ea\u589e\u4e0d\u51cf\u7684\u95ee\u9898\u3002</li> </ul> </li> </ol> <p>\u901a\u8fc7\u8fd9\u4e00\u7cfb\u5217\u7cbe\u5bc6\u7684\u673a\u5236\uff0cUndo Log \u5728\u4fdd\u8bc1\u6570\u636e\u5e93\u4e8b\u52a1\u7279\u6027\u548c\u9ad8\u5e76\u53d1\u6027\u80fd\u7684\u540c\u65f6\uff0c\u4e5f\u5b9e\u73b0\u4e86\u81ea\u8eab\u9ad8\u6548\u3001\u5b89\u5168\u7684\u5168\u751f\u547d\u5468\u671f\u7ba1\u7406\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/explain%E6%98%AF%E4%BB%80%E4%B9%88/","title":"Explain\u662f\u4ec0\u4e48","text":"<p><code>EXPLAIN</code> \u662f SQL \u4e2d\u4e00\u4e2a\u975e\u5e38\u5f3a\u5927\u7684\u8bca\u65ad\u5de5\u5177\uff0c\u5f53\u4f60\u5728\u4e00\u4e2a SQL \u67e5\u8be2\u8bed\u53e5\uff08\u5982 <code>SELECT</code>, <code>INSERT</code>, <code>UPDATE</code>, <code>DELETE</code> \u7b49\uff09\u524d\u52a0\u4e0a <code>EXPLAIN</code> \u5173\u952e\u5b57\u65f6\uff0c\u6570\u636e\u5e93\u5e76\u4e0d\u4f1a\u771f\u6b63\u6267\u884c\u8fd9\u6761\u8bed\u53e5\uff0c\u800c\u662f\u4f1a\u8fd4\u56de\u5b83\u5c06\u5982\u4f55\u6267\u884c\u8fd9\u6761\u8bed\u53e5\u7684\u8be6\u7ec6\u8ba1\u5212\u3002 \u8fd9\u4e2a\u6267\u884c\u8ba1\u5212\u63ed\u793a\u4e86\u6570\u636e\u5e93\u8bbf\u95ee\u6570\u636e\u7684\u65b9\u5f0f\uff0c\u4f8b\u5982\u8868\u7684\u8fde\u63a5\u987a\u5e8f\u3001\u4f7f\u7528\u4e86\u54ea\u4e9b\u7d22\u5f15\u3001\u6570\u636e\u662f\u5982\u4f55\u88ab\u626b\u63cf\u548c\u6392\u5e8f\u7684\u7b49\u7b49\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/explain%E6%98%AF%E4%BB%80%E4%B9%88/#explain","title":"EXPLAIN \u80fd\u5f97\u5230\u4ec0\u4e48\u7ed3\u679c","text":"<p><code>EXPLAIN</code> \u7684\u8f93\u51fa\u901a\u5e38\u662f\u4e00\u4e2a\u8868\u683c\uff0c\u5176\u4e2d\u5305\u542b\u4e86\u591a\u4e2a\u5217\uff0c\u4e0d\u540c\u7684\u6570\u636e\u5e93\uff08\u5982 MySQL, PostgreSQL\uff09\u8f93\u51fa\u7684\u5217\u4f1a\u7565\u6709\u4e0d\u540c\uff0c\u4f46\u6838\u5fc3\u4fe1\u606f\u662f\u76f8\u4f3c\u7684\u3002\u4ee5\u4e0b\u662f MySQL \u4e2d <code>EXPLAIN</code> \u8f93\u51fa\u7684\u4e3b\u8981\u5217\u53ca\u5176\u542b\u4e49\uff1a</p> \u5217\u540d (Column) \u63cf\u8ff0 id \u67e5\u8be2\u4e2d\u6bcf\u4e2a <code>SELECT</code> \u5b50\u53e5\u7684\u552f\u4e00\u6807\u8bc6\u7b26\u3002id \u8d8a\u5927\uff0c\u6267\u884c\u4f18\u5148\u7ea7\u8d8a\u9ad8\u3002 select_type <code>SELECT</code> \u67e5\u8be2\u7684\u7c7b\u578b\uff08\u4f8b\u5982 <code>SIMPLE</code> \u7b80\u5355\u67e5\u8be2, <code>SUBQUERY</code> \u5b50\u67e5\u8be2, <code>UNION</code> \u8054\u5408\u67e5\u8be2\u7b49\uff09\u3002 table \u5f53\u524d\u884c\u6b63\u5728\u8bbf\u95ee\u7684\u8868\u7684\u540d\u79f0\u3002 partitions \u67e5\u8be2\u5c06\u5339\u914d\u5230\u7684\u5206\u533a\u3002\u5bf9\u4e8e\u672a\u5206\u533a\u7684\u8868\uff0c\u6b64\u503c\u4e3a <code>NULL</code>\u3002 type [\u91cd\u8981] \u663e\u793a\u4e86\u6570\u636e\u5e93\u5982\u4f55\u67e5\u627e\u8868\u4e2d\u7684\u884c\uff0c\u662f\u8bc4\u4f30\u67e5\u8be2\u6027\u80fd\u7684\u5173\u952e\u6307\u6807\u3002 \u5e38\u89c1\u7684\u7c7b\u578b\u4ece\u6700\u4f18\u5230\u6700\u5dee\u4f9d\u6b21\u4e3a\uff1a<code>system</code> &gt; <code>const</code> &gt; <code>eq_ref</code> &gt; <code>ref</code> &gt; <code>range</code> &gt; <code>index</code> &gt; <code>ALL</code>\u3002 <code>ALL</code> \u8868\u793a\u5168\u8868\u626b\u63cf\uff0c\u901a\u5e38\u610f\u5473\u7740\u6027\u80fd\u95ee\u9898\u3002 possible_keys \u6307\u51fa\u6570\u636e\u5e93\u53ef\u4ee5\u7528\u6765\u67e5\u627e\u884c\u7684\u7d22\u5f15\u3002 key \u6570\u636e\u5e93\u5b9e\u9645\u51b3\u5b9a\u4f7f\u7528\u7684\u7d22\u5f15\u3002\u5982\u679c\u4e3a <code>NULL</code>\uff0c\u5219\u8868\u793a\u6ca1\u6709\u4f7f\u7528\u7d22\u5f15\u3002 key_len \u4f7f\u7528\u7684\u7d22\u5f15\u7684\u957f\u5ea6\uff08\u5b57\u8282\u6570\uff09\u3002\u8fd9\u4e2a\u503c\u53ef\u4ee5\u5e2e\u52a9\u5224\u65ad\u590d\u5408\u7d22\u5f15\u662f\u5426\u88ab\u5b8c\u5168\u5229\u7528\u3002 ref \u663e\u793a\u54ea\u4e9b\u5217\u6216\u5e38\u91cf\u88ab\u7528\u4e8e\u4e0e <code>key</code> \u5217\u4e2d\u7684\u7d22\u5f15\u8fdb\u884c\u6bd4\u8f83\u3002 rows [\u91cd\u8981] \u4f30\u7b97\u7684\u4e3a\u4e86\u627e\u5230\u6240\u9700\u884c\u800c\u9700\u8981\u8bfb\u53d6\u7684\u884c\u6570\u3002 \u8fd9\u4e2a\u6570\u503c\u8d8a\u5c0f\u8d8a\u597d\u3002 filtered \u8868\u793a\u6309\u8868\u6761\u4ef6\u8fc7\u6ee4\u540e\uff0c\u5269\u4e0b\u7684\u884c\u6570\u7684\u767e\u5206\u6bd4\u3002<code>rows</code> * <code>filtered</code> / 100 \u53ef\u4ee5\u4f30\u7b97\u51fa\u5c06\u4e0e\u4e0b\u4e00\u5f20\u8868\u8fde\u63a5\u7684\u884c\u6570\u3002 Extra [\u91cd\u8981] \u5305\u542b\u4e86\u4e0d\u9002\u5408\u5728\u5176\u4ed6\u5217\u4e2d\u663e\u793a\u4f46\u975e\u5e38\u91cd\u8981\u7684\u989d\u5916\u4fe1\u606f\u3002 \u4f8b\u5982 <code>Using filesort</code>\uff08\u8868\u793a\u9700\u8981\u8fdb\u884c\u5916\u90e8\u6392\u5e8f\uff0c\u6548\u7387\u4f4e\uff09\u3001<code>Using temporary</code>\uff08\u8868\u793a\u4f7f\u7528\u4e86\u4e34\u65f6\u8868\uff09\u3001<code>Using index</code>\uff08\u8868\u793a\u4f7f\u7528\u4e86\u8986\u76d6\u7d22\u5f15\uff0c\u6027\u80fd\u597d\uff09\u3002"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/explain%E6%98%AF%E4%BB%80%E4%B9%88/#explain_1","title":"\u4f7f\u7528 <code>EXPLAIN</code> \u6392\u67e5\u95ee\u9898","text":"<p>\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u4e2a\u7528\u6237\u8868 <code>users</code>\uff0c\u8868\u7ed3\u6784\u548c\u6570\u636e\u5982\u4e0b\uff1a</p> <p>\u8868\u7ed3\u6784:</p> <pre><code>CREATE TABLE `users` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `name` varchar(50) DEFAULT NULL,\n  `email` varchar(50) DEFAULT NULL,\n  `status` tinyint(4) DEFAULT '0',\n  PRIMARY KEY (`id`)\n);\n</code></pre> <p>\u73b0\u5728\uff0c\u6211\u4eec\u9700\u8981\u67e5\u627e\u6240\u6709\u72b6\u6001\u4e3a \"\u6d3b\u8dc3\"\uff08\u5047\u8bbe <code>status = 1</code>\uff09\u7684\u7528\u6237\u3002\u6211\u4eec\u6267\u884c\u4ee5\u4e0b\u67e5\u8be2\uff1a</p> <pre><code>SELECT * FROM users WHERE status = 1;\n</code></pre> <p>\u5728\u6570\u636e\u91cf\u5f88\u5927\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u53d1\u73b0\u8fd9\u4e2a\u67e5\u8be2\u975e\u5e38\u6162\u3002\u8fd9\u65f6\u5c31\u53ef\u4ee5\u4f7f\u7528 <code>EXPLAIN</code> \u6765\u8bca\u65ad\u95ee\u9898\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/explain%E6%98%AF%E4%BB%80%E4%B9%88/#explain_2","title":"\u7b2c\u4e00\u6b65\uff1a\u6267\u884c <code>EXPLAIN</code>","text":"<p>\u5728\u67e5\u8be2\u524d\u52a0\u4e0a <code>EXPLAIN</code> \u5173\u952e\u5b57\uff1a</p> <pre><code>EXPLAIN SELECT * FROM users WHERE status = 1;\n</code></pre>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/explain%E6%98%AF%E4%BB%80%E4%B9%88/#explain_3","title":"\u7b2c\u4e8c\u6b65\uff1a\u5206\u6790 <code>EXPLAIN</code> \u7684\u8f93\u51fa\u7ed3\u679c","text":"<p>\u4f60\u53ef\u80fd\u4f1a\u5f97\u5230\u7c7b\u4f3c\u4e0b\u9762\u7684\u7ed3\u679c\uff08\u4e0d\u540c\u7248\u672c\u7684\u6570\u636e\u5e93\u548c\u6570\u636e\u91cf\uff0c\u7ed3\u679c\u53ef\u80fd\u7565\u6709\u5dee\u5f02\uff09\uff1a</p> id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE users ALL NULL NULL NULL NULL 1000000 Using where <p>\u95ee\u9898\u8bca\u65ad\uff1a</p> <ol> <li><code>type</code> \u5217\u4e3a <code>ALL</code>\uff1a\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u660e\u786e\u7684\u5371\u9669\u4fe1\u53f7\uff0c\u8868\u793a\u6570\u636e\u5e93\u6b63\u5728\u8fdb\u884c\u5168\u8868\u626b\u63cf\u3002 \u4e5f\u5c31\u662f\u8bf4\uff0c\u5373\u4f7f\u6211\u4eec\u53ea\u60f3\u8981\u51e0\u6761 <code>status = 1</code> \u7684\u8bb0\u5f55\uff0c\u6570\u636e\u5e93\u4e5f\u5fc5\u987b\u68c0\u67e5\u8868\u4e2d\u7684\u6bcf\u4e00\u884c\uff08\u4f30\u7b97\u7684 <code>rows</code> \u4e3a 100 \u4e07\u884c\uff09\u3002 \u8fd9\u662f\u5bfc\u81f4\u67e5\u8be2\u7f13\u6162\u7684\u6839\u672c\u539f\u56e0\u3002</li> <li><code>key</code> \u5217\u4e3a <code>NULL</code>\uff1a\u8fd9\u8bc1\u5b9e\u4e86\u6570\u636e\u5e93\u6ca1\u6709\u4f7f\u7528\u4efb\u4f55\u7d22\u5f15\u6765\u6267\u884c\u8fd9\u4e2a\u67e5\u8be2\u3002</li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/explain%E6%98%AF%E4%BB%80%E4%B9%88/#_1","title":"\u7b2c\u4e09\u6b65\uff1a\u63d0\u51fa\u4f18\u5316\u65b9\u6848","text":"<p>\u4e3a\u4e86\u907f\u514d\u5168\u8868\u626b\u63cf\uff0c\u6700\u76f4\u63a5\u6709\u6548\u7684\u529e\u6cd5\u662f\u5728\u67e5\u8be2\u6761\u4ef6\u6d89\u53ca\u7684\u5217\uff08\u8fd9\u91cc\u662f <code>status</code> \u5217\uff09\u4e0a\u521b\u5efa\u4e00\u4e2a\u7d22\u5f15\u3002</p> <p>\u4f18\u5316\u65b9\u6848\uff1a \u5728 <code>status</code> \u5217\u4e0a\u6dfb\u52a0\u7d22\u5f15\u3002</p> <pre><code>CREATE INDEX idx_status ON users(status);\n</code></pre>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/explain%E6%98%AF%E4%BB%80%E4%B9%88/#_2","title":"\u7b2c\u56db\u6b65\uff1a\u9a8c\u8bc1\u4f18\u5316\u6548\u679c","text":"<p>\u73b0\u5728\u6211\u4eec\u518d\u6b21\u5bf9\u76f8\u540c\u7684\u67e5\u8be2\u6267\u884c <code>EXPLAIN</code>\uff1a</p> <pre><code>EXPLAIN SELECT * FROM users WHERE status = 1;\n</code></pre> <p>\u8f93\u51fa\u7ed3\u679c\u53ef\u80fd\u4f1a\u53d8\u6210\u8fd9\u6837\uff1a</p> id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE users ref idx_status idx_status 1 const 50000 Using index condition <p>\u6548\u679c\u5206\u6790\uff1a</p> <ol> <li><code>type</code> \u5217\u53d8\u4e3a <code>ref</code>\uff1a\u67e5\u8be2\u7c7b\u578b\u4ece <code>ALL</code>\uff08\u5168\u8868\u626b\u63cf\uff09\u53d8\u6210\u4e86 <code>ref</code>\u3002\u8fd9\u8868\u793a\u6570\u636e\u5e93\u901a\u8fc7\u7d22\u5f15\u627e\u5230\u4e86\u6240\u6709\u5339\u914d\u7684\u884c\uff0c\u6027\u80fd\u8fdc\u9ad8\u4e8e <code>ALL</code>\u3002</li> <li><code>key</code> \u5217\u663e\u793a <code>idx_status</code>\uff1a\u660e\u786e\u5730\u544a\u8bc9\u6211\u4eec\uff0c\u65b0\u521b\u5efa\u7684\u7d22\u5f15 <code>idx_status</code> \u5df2\u7ecf\u88ab\u6210\u529f\u4f7f\u7528\u3002</li> <li><code>rows</code> \u5217\u663e\u8457\u51cf\u5c11\uff1a\u9884\u4f30\u626b\u63cf\u7684\u884c\u6570\u4ece 100 \u4e07\u6025\u5267\u4e0b\u964d\u5230\u4e86 5 \u4e07\uff08\u5047\u8bbe\u6709 5 \u4e07\u6d3b\u8dc3\u7528\u6237\uff09\u3002\u6570\u636e\u5e93\u4e0d\u518d\u9700\u8981\u904d\u5386\u6574\u5f20\u8868\uff0c\u800c\u662f\u76f4\u63a5\u901a\u8fc7\u7d22\u5f15\u5b9a\u4f4d\u5230\u9700\u8981\u7684\u6570\u636e\uff0c\u67e5\u8be2\u901f\u5ea6\u4f1a\u5f97\u5230\u6570\u91cf\u7ea7\u7684\u63d0\u5347\u3002</li> </ol> <p>\u901a\u8fc7\u8fd9\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230 <code>EXPLAIN</code> \u662f\u5982\u4f55\u5e2e\u52a9\u6211\u4eec\u4e00\u6b65\u6b65\u53d1\u73b0\u95ee\u9898\u3001\u5236\u5b9a\u7b56\u7565\u5e76\u9a8c\u8bc1\u4f18\u5316\u7684\u3002\u5728\u5904\u7406\u590d\u6742\u7684 <code>JOIN</code> \u67e5\u8be2\u6216\u5b50\u67e5\u8be2\u65f6\uff0c<code>EXPLAIN</code> \u540c\u6837\u80fd\u63d0\u4f9b\u5173\u952e\u7684\u6d1e\u5bdf\uff0c\u5e2e\u52a9\u4f60\u7406\u89e3\u67e5\u8be2\u7684\u6bcf\u4e00\u4e2a\u6b65\u9aa4\uff0c\u4ece\u800c\u8fdb\u884c\u7cbe\u786e\u7684\u6027\u80fd\u8c03\u4f18\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/inplace%20DDL%E6%98%AF%E4%BB%80%E4%B9%88/","title":"inplace DDL\u662f\u4ec0\u4e48","text":"<p>In-place DDL\uff08\u539f\u5730DDL\u6216\u5728\u7ebfDDL\uff09\u662f\u4e00\u79cd\u5728\u6570\u636e\u5e93\u4e2d\u6267\u884c\u6570\u636e\u5b9a\u4e49\u8bed\u8a00\uff08DDL\uff09\u64cd\u4f5c\uff08\u5982 <code>ALTER TABLE</code>\uff09\u7684\u673a\u5236\uff0c\u5176\u6838\u5fc3\u7279\u70b9\u662f\u907f\u514d\u5bf9\u6574\u5f20\u8868\u8fdb\u884c\u6570\u636e\u7684\u5b8c\u6574\u590d\u5236\u548c\u91cd\u5efa\u3002\u5b83\u76f4\u63a5\u5728\u539f\u59cb\u8868\u7684\u6570\u636e\u6587\u4ef6\u4e0a\u8fdb\u884c\u7ed3\u6784\u4fee\u6539\uff0c\u4ece\u800c\u663e\u8457\u51cf\u5c11\u64cd\u4f5c\u671f\u95f4\u7684\u8d44\u6e90\u6d88\u8017\u548c\u5bf9\u4e1a\u52a1\u7684\u5f71\u54cd\u3002</p> <p>\u8fd9\u4e2a\u6982\u5ff5\u5728\u5904\u7406\u5927\u8868\u7684\u7ed3\u6784\u53d8\u66f4\u65f6\u5c24\u5176\u91cd\u8981\uff0c\u662f\u73b0\u4ee3\u5173\u7cfb\u578b\u6570\u636e\u5e93\uff08\u7279\u522b\u662fMySQL\u7684InnoDB\u5b58\u50a8\u5f15\u64ce\uff09\u63d0\u5347\u53ef\u7528\u6027\u7684\u5173\u952e\u7279\u6027\u4e4b\u4e00\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/inplace%20DDL%E6%98%AF%E4%BB%80%E4%B9%88/#vs","title":"\u6838\u5fc3\u601d\u60f3\uff1a\u539f\u5730\u88c5\u4fee vs. \u62c6\u4e86\u91cd\u5efa","text":"<p>\u4e3a\u4e86\u66f4\u597d\u5730\u7406\u89e3\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u4e00\u4e2a\u6bd4\u55bb\uff1a</p> <ul> <li> <p>\u4f20\u7edfDDL\uff08Copying DDL\uff09\uff1a\u5c31\u50cf\u4f60\u8981\u7ed9\u4e00\u4e2a\u623f\u95f4\uff08\u6570\u636e\u8868\uff09\u589e\u52a0\u4e00\u6839\u67f1\u5b50\u3002\u4f20\u7edf\u65b9\u6cd5\u662f\uff0c\u4f60\u5728\u65c1\u8fb9\u627e\u5757\u7a7a\u5730\uff0c\u6309\u7167\u65b0\u7684\u56fe\u7eb8\uff08\u65b0\u8868\u7ed3\u6784\uff09\u76d6\u4e00\u4e2a\u4e00\u6a21\u4e00\u6837\u7684\u65b0\u623f\u95f4\uff0c\u7136\u540e\u628a\u65e7\u623f\u95f4\u91cc\u7684\u6240\u6709\u5bb6\u5177\uff08\u6570\u636e\uff09\u4e00\u4ef6\u4e00\u4ef6\u642c\u5230\u65b0\u623f\u95f4\uff0c\u6700\u540e\u62c6\u6389\u65e7\u623f\u95f4\uff0c\u8ba9\u65b0\u623f\u95f4\u9876\u66ff\u5b83\u7684\u4f4d\u7f6e\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u8017\u65f6\u8017\u529b\uff0c\u800c\u4e14\u5728\u201c\u642c\u5bb6\u201d\u671f\u95f4\uff0c\u8fd9\u4e2a\u623f\u95f4\u57fa\u672c\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528\uff08\u8868\u88ab\u957f\u65f6\u95f4\u9501\u5b9a\uff09\u3002</p> </li> <li> <p>In-place DDL\uff1a\u5219\u50cf\u662f\u76f4\u63a5\u5728\u539f\u6765\u7684\u623f\u95f4\u91cc\u65bd\u5de5\u3002\u5de5\u4eba\uff08\u6570\u636e\u5e93\u5f15\u64ce\uff09\u5e26\u7740\u5de5\u5177\u548c\u6750\u6599\u8fdb\u6765\uff0c\u5728\u4e0d\u628a\u6240\u6709\u5bb6\u5177\u90fd\u642c\u51fa\u53bb\u7684\u60c5\u51b5\u4e0b\uff0c\u76f4\u63a5\u5728\u623f\u95f4\u5185\u90e8\u628a\u67f1\u5b50\u5efa\u597d\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u623f\u95f4\u53ef\u80fd\u77ed\u65f6\u95f4\u4f1a\u6709\u4e00\u4e9b\u5e72\u6270\uff08\u77ed\u6682\u7684\u9501\uff09\uff0c\u4f46\u5927\u90e8\u5206\u65f6\u95f4\u91cc\uff0c\u4eba\u4eec\u8fd8\u662f\u53ef\u4ee5\u8fdb\u51fa\u548c\u4f7f\u7528\u623f\u95f4\u91cc\u7684\u5bb6\u5177\u7684\uff08\u8868\u5728\u5927\u90e8\u5206\u65f6\u95f4\u5185\u53ef\u8bfb\u5199\uff09\u3002</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/inplace%20DDL%E6%98%AF%E4%BB%80%E4%B9%88/#ddlcopying","title":"\u4f20\u7edfDDL\uff08Copying\u65b9\u5f0f\uff09\u7684\u5de5\u4f5c\u6d41\u7a0b","text":"<ol> <li>\u521b\u5efa\u4e00\u4e2a\u7b26\u5408\u65b0\u8868\u7ed3\u6784\u7684\u4e34\u65f6\u8868\u3002</li> <li>\u5c06\u539f\u59cb\u8868\u9501\u5b9a\uff0c\u9632\u6b62\u6570\u636e\u5199\u5165\u3002</li> <li>\u5c06\u539f\u59cb\u8868\u4e2d\u7684\u6570\u636e\u9010\u884c\u590d\u5236\u5230\u4e34\u65f6\u8868\u4e2d\u3002</li> <li>\u5728\u4e34\u65f6\u8868\u4e0a\u521b\u5efa\u65b0\u7684\u7d22\u5f15\u3002</li> <li>\u590d\u5236\u5b8c\u6210\u540e\uff0c\u5c06\u539f\u59cb\u8868\u5220\u9664\uff0c\u5e76\u5c06\u4e34\u65f6\u8868\u91cd\u547d\u540d\u4e3a\u539f\u59cb\u8868\u7684\u540d\u79f0\u3002</li> <li>\u91ca\u653e\u9501\u3002</li> </ol> <p>\u8fd9\u4e2a\u8fc7\u7a0b\u7684\u7f3a\u70b9\u975e\u5e38\u660e\u663e\uff1a *   \u957f\u65f6\u95f4\u9501\u5b9a\uff1a\u5728\u6570\u636e\u590d\u5236\u671f\u95f4\uff0c\u8868\u901a\u5e38\u662f\u53ea\u8bfb\u751a\u81f3\u5b8c\u5168\u9501\u5b9a\u7684\uff0c\u5bf9\u7ebf\u4e0a\u4e1a\u52a1\u662f\u707e\u96be\u6027\u7684\u3002 *   \u53cc\u500d\u7a7a\u95f4\uff1a\u9700\u8981\u4e34\u65f6\u7684\u78c1\u76d8\u7a7a\u95f4\u6765\u5b58\u653e\u65b0\u8868\uff0c\u5982\u679c\u539f\u8868\u662f1TB\uff0c\u4f60\u5c31\u9700\u8981\u989d\u5916\u76841TB\u7a7a\u95f4\u3002 *   \u9ad8I/O\u6d88\u8017\uff1a\u5927\u91cf\u7684\u6570\u636e\u8bfb\u53d6\u548c\u5199\u5165\u4f1a\u7ed9\u670d\u52a1\u5668\u5e26\u6765\u5de8\u5927\u7684I/O\u538b\u529b\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/inplace%20DDL%E6%98%AF%E4%BB%80%E4%B9%88/#in-place-ddl","title":"In-place DDL\u7684\u4f18\u52bf","text":"<p>In-place DDL\u901a\u8fc7\u907f\u514d\u5168\u8868\u590d\u5236\uff0c\u5e26\u6765\u4e86\u9769\u547d\u6027\u7684\u6539\u8fdb\uff1a</p> <ol> <li>\u66f4\u9ad8\u7684\u53ef\u7528\u6027\uff1a\u64cd\u4f5c\u671f\u95f4\u5bf9\u8868\u7684\u9501\u5b9a\u65f6\u95f4\u6781\u5927\u5730\u7f29\u77ed\uff0c\u751a\u81f3\u53ef\u4ee5\u5b9e\u73b0\u5b8c\u5168\u4e0d\u9501\u8868\uff08\u5141\u8bb8\u5e76\u53d1\u7684\u8bfb\u5199\u64cd\u4f5c\uff09\u3002\u8fd9\u88ab\u79f0\u4e3a\u201cOnline DDL\u201d\u3002</li> <li>\u66f4\u5c11\u7684\u78c1\u76d8\u7a7a\u95f4\uff1a\u4e0d\u9700\u8981\u989d\u5916\u7684\u7a7a\u95f4\u6765\u521b\u5efa\u4e34\u65f6\u8868\u3002</li> <li>\u66f4\u4f4e\u7684I/O\u8d1f\u8f7d\uff1a\u53ea\u4fee\u6539\u4e0e\u8868\u7ed3\u6784\u76f8\u5173\u7684\u5143\u6570\u636e\u548c\u5c11\u91cf\u6570\u636e\u9875\uff0c\u907f\u514d\u4e86\u6d77\u91cf\u6570\u636e\u7684\u8fc1\u79fb\u3002</li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/inplace%20DDL%E6%98%AF%E4%BB%80%E4%B9%88/#mysql","title":"\u5728MySQL\u4e2d\u7684\u5b9e\u8df5","text":"<p>MySQL\u7684InnoDB\u5b58\u50a8\u5f15\u64ce\u662fIn-place DDL\u7684\u5178\u578b\u5b9e\u8df5\u8005\u3002\u4eceMySQL 5.6\u7248\u672c\u5f00\u59cb\uff0cOnline DDL\u529f\u80fd\u5f97\u5230\u4e86\u6781\u5927\u7684\u589e\u5f3a\u3002\u5728\u6267\u884c<code>ALTER TABLE</code>\u8bed\u53e5\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7<code>ALGORITHM</code>\u548c<code>LOCK</code>\u5b50\u53e5\u6765\u63a7\u5236DDL\u7684\u6267\u884c\u65b9\u5f0f\u3002</p> <p><code>ALTER TABLE table_name [alter_specification], ALGORITHM=INPLACE, LOCK=NONE;</code></p> <ul> <li> <p><code>ALGORITHM</code>\u5b50\u53e5\uff1a</p> <ul> <li><code>INPLACE</code>\uff1a\u544a\u8bc9MySQL\u5c3d\u53ef\u80fd\u4f7f\u7528\u539f\u5730\u7b97\u6cd5\u3002\u5982\u679c\u8be5\u64cd\u4f5c\u4e0d\u652f\u6301<code>INPLACE</code>\uff0c\u5219\u4f1a\u62a5\u9519\u3002</li> <li><code>COPY</code>\uff1a\u5f3a\u5236\u4f7f\u7528\u4f20\u7edf\u7684\u62f7\u8d1d\u7b97\u6cd5\u3002</li> <li><code>INSTANT</code>\uff1aMySQL 8.0\u5f15\u5165\u7684\u66f4\u5feb\u7684\u7b97\u6cd5\uff0c\u53ea\u4fee\u6539\u5143\u6570\u636e\uff0c\u4e0d\u6d89\u53ca\u6570\u636e\u6587\u4ef6\uff0c\u901f\u5ea6\u6781\u5feb\uff08\u4f8b\u5982\uff0c\u6dfb\u52a0\u5217\uff09\u3002</li> <li><code>DEFAULT</code>\uff1a\u7531MySQL\u81ea\u884c\u51b3\u5b9a\u4f7f\u7528\u6700\u4f73\u7b97\u6cd5\u3002</li> </ul> </li> <li> <p><code>LOCK</code>\u5b50\u53e5\uff1a</p> <ul> <li><code>NONE</code>\uff1a\u6700\u7406\u60f3\u7684\u72b6\u6001\uff0c\u5141\u8bb8\u5e76\u53d1\u7684\u8bfb\u548c\u5199\uff08DML\uff09\u3002</li> <li><code>SHARED</code>\uff1a\u5141\u8bb8\u5e76\u53d1\u8bfb\uff0c\u4f46\u7981\u6b62\u5e76\u53d1\u5199\u3002</li> <li><code>EXCLUSIVE</code>\uff1a\u5b8c\u5168\u9501\u5b9a\u8868\uff0c\u7981\u6b62\u4efb\u4f55\u8bfb\u5199\u3002</li> <li><code>DEFAULT</code>\uff1aMySQL\u5728\u4fdd\u8bc1\u6570\u636e\u4e00\u81f4\u6027\u7684\u524d\u63d0\u4e0b\uff0c\u9009\u62e9\u4fb5\u5165\u6027\u6700\u5c0f\u7684\u9501\u7ea7\u522b\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/inplace%20DDL%E6%98%AF%E4%BB%80%E4%B9%88/#in-place","title":"\u5e76\u4e0d\u662f\u6240\u6709\u64cd\u4f5c\u90fd\u652f\u6301In-place","text":"<p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5e76\u975e\u6240\u6709\u7684DDL\u64cd\u4f5c\u90fd\u80fd\u4ee5In-place\u65b9\u5f0f\u5b8c\u6210\u3002\u8fd9\u53d6\u51b3\u4e8e\u64cd\u4f5c\u7684\u7c7b\u578b\u548c\u6570\u636e\u5e93\u7684\u7248\u672c\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/inplace%20DDL%E6%98%AF%E4%BB%80%E4%B9%88/#in-place_1","title":"\u901a\u5e38\u652f\u6301In-place\u7684\u64cd\u4f5c\uff1a","text":"<ul> <li>\u6dfb\u52a0\u3001\u5220\u9664\u6216\u91cd\u547d\u540d\u7d22\u5f15\u3002</li> <li>\u6dfb\u52a0\u3001\u5220\u9664\u6216\u91cd\u547d\u540d\u5217\uff08\u5728\u73b0\u4ee3\u7248\u672c\u4e2d\uff0c\u6dfb\u52a0\u5217\u51e0\u4e4e\u662f\u77ac\u95f4\u5b8c\u6210\u7684\uff09\u3002</li> <li>\u4fee\u6539\u5217\u7684\u9ed8\u8ba4\u503c\u3002</li> <li>\u4fee\u6539<code>ENUM</code>\u6216<code>SET</code>\u5217\u7684\u5b9a\u4e49\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/inplace%20DDL%E6%98%AF%E4%BB%80%E4%B9%88/#copying","title":"\u901a\u5e38\u9700\u8981Copying\uff08\u91cd\u5efa\u8868\uff09\u7684\u64cd\u4f5c\uff1a","text":"<ul> <li>\u4fee\u6539\u5217\u7684\u6570\u636e\u7c7b\u578b\uff08\u4f8b\u5982<code>INT</code>\u6539\u4e3a<code>BIGINT</code>\uff09\u3002</li> <li>\u4fee\u6539\u8868\u7684\u5b57\u7b26\u96c6\u3002</li> <li>\u4fee\u6539\u4e3b\u952e\u3002</li> <li>\u6539\u53d8\u8868\u7684<code>ROW_FORMAT</code>\u3002</li> </ul> \u7279\u6027 In-place DDL (\u539f\u5730/\u5728\u7ebf) Copying DDL (\u62f7\u8d1d/\u79bb\u7ebf) \u6838\u5fc3\u673a\u5236 \u76f4\u63a5\u4fee\u6539\u539f\u8868\u6570\u636e\u6587\u4ef6\uff0c\u4e0d\u590d\u5236\u6570\u636e \u521b\u5efa\u65b0\u8868\uff0c\u590d\u5236\u6240\u6709\u6570\u636e\uff0c\u7136\u540e\u66ff\u6362 \u53ef\u7528\u6027 \u9ad8\uff0c\u9501\u65f6\u95f4\u6781\u77ed\uff0c\u751a\u81f3\u65e0\u9501 \u4f4e\uff0c\u957f\u65f6\u95f4\u9501\u5b9a\u8868 \u78c1\u76d8\u7a7a\u95f4 \u65e0\u9700\u989d\u5916\u7a7a\u95f4 \u9700\u8981\u7ea6\u7b49\u4e8e\u539f\u8868\u5927\u5c0f\u7684\u989d\u5916\u7a7a\u95f4 I/O\u8d1f\u8f7d \u4f4e\uff0c\u4ec5\u4fee\u6539\u5143\u6570\u636e\u548c\u5fc5\u8981\u6570\u636e \u9ad8\uff0c\u5168\u8868\u6570\u636e\u7684\u8bfb\u5199 \u9002\u7528\u573a\u666f \u5bf9\u53ef\u7528\u6027\u8981\u6c42\u9ad8\u7684\u751f\u4ea7\u73af\u5883\uff0c\u5c24\u5176\u662f\u5927\u8868 \u65e7\u7248\u672c\u6570\u636e\u5e93\uff0c\u6216\u67d0\u4e9b\u4e0d\u652f\u6301In-place\u7684\u590d\u6742\u64cd\u4f5c"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mvcc%E4%BB%8B%E7%BB%8D/","title":"Mvcc\u4ecb\u7ecd","text":"<p>MVCC\uff0c\u5168\u79f0\u4e3a\u591a\u7248\u672c\u5e76\u53d1\u63a7\u5236\uff08Multi-Version Concurrency Control\uff09\uff0c\u662f\u4e00\u79cd\u7528\u6765\u5728\u6570\u636e\u5e93\u4e2d\u5904\u7406\u5e76\u53d1\u8bbf\u95ee\u7684\u6280\u672f\uff0c\u65e8\u5728\u63d0\u9ad8\u6570\u636e\u5e93\u7684\u5e76\u53d1\u6027\u80fd\u3002\u5728\u4f20\u7edf\u7684\u6570\u636e\u5e93\u7cfb\u7edf\u4e2d\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u6570\u636e\u7684\u4e00\u81f4\u6027\uff0c\u901a\u5e38\u91c7\u7528\u52a0\u9501\u7684\u65b9\u5f0f\u6765\u5904\u7406\u8bfb\u5199\u51b2\u7a81\uff0c\u4f46\u8fd9\u4f1a\u5bfc\u81f4\u8bfb\u5199\u3001\u5199\u8bfb\u3001\u5199\u5199\u64cd\u4f5c\u4e4b\u95f4\u76f8\u4e92\u963b\u585e\uff0c\u4e25\u91cd\u5f71\u54cd\u5e76\u53d1\u80fd\u529b\u3002</p> <p>MVCC\u7684\u6838\u5fc3\u601d\u60f3\u662f\uff0c\u901a\u8fc7\u4fdd\u5b58\u6570\u636e\u5728\u67d0\u4e2a\u65f6\u95f4\u70b9\u7684\u5feb\u7167\u6765\u5b9e\u73b0\u3002\u8fd9\u610f\u5473\u7740\u6bcf\u4e2a\u4e8b\u52a1\u770b\u5230\u7684\u6570\u636e\u7248\u672c\u662f\u5176\u542f\u52a8\u65f6\u5c31\u786e\u5b9a\u597d\u4e86\u7684\uff0c\u4e8b\u52a1\u671f\u95f4\u5176\u4ed6\u5df2\u63d0\u4ea4\u4e8b\u52a1\u6240\u505a\u7684\u4fee\u6539\u5bf9\u5b83\u4e0d\u53ef\u89c1\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u8bfb\u64cd\u4f5c\u5c31\u4e0d\u4f1a\u963b\u585e\u5199\u64cd\u4f5c\uff0c\u5199\u64cd\u4f5c\u4e5f\u4e0d\u4f1a\u963b\u585e\u8bfb\u64cd\u4f5c\uff0c\u53ea\u6709\u5199\u64cd\u4f5c\u4e0e\u5199\u64cd\u4f5c\u4e4b\u95f4\u624d\u4f1a\u76f8\u4e92\u963b\u585e\uff0c\u4ece\u800c\u6781\u5927\u5730\u63d0\u5347\u4e86\u6570\u636e\u5e93\u7684\u5e76\u53d1\u5904\u7406\u80fd\u529b\u3002</p> <p>\u5728\u5185\u90e8\u5b9e\u73b0\u4e2d\uff0c\u6570\u636e\u5e93\u901a\u8fc7<code>undo log</code>\u4fdd\u5b58\u4e86\u6570\u636e\u7684\u591a\u4e2a\u5386\u53f2\u7248\u672c\u3002\u5f53\u4e00\u4e2a\u4e8b\u52a1\u9700\u8981\u8bfb\u53d6\u6570\u636e\u65f6\uff0c\u7cfb\u7edf\u4f1a\u6839\u636e\u4e8b\u52a1\u7684\u9694\u79bb\u7ea7\u522b\u548c\u7248\u672c\u53ef\u89c1\u6027\u89c4\u5219\uff0c\u4ece\u7248\u672c\u94fe\u4e2d\u627e\u5230\u4e00\u4e2a\u5408\u9002\u7684\u5386\u53f2\u7248\u672c\u63d0\u4f9b\u7ed9\u8be5\u4e8b\u52a1\uff0c\u800c\u4e0d\u662f\u6700\u65b0\u7684\u6570\u636e\u3002</p> <p>\u9002\u7528\u9694\u79bb\u7ea7\u522b\uff1aMVCC\u4e3b\u8981\u5de5\u4f5c\u5728\u8bfb\u5df2\u63d0\u4ea4\uff08Read Committed, RC\uff09\u548c\u53ef\u91cd\u590d\u8bfb\uff08Repeatable Read, RR\uff09\u8fd9\u4e24\u4e2a\u9694\u79bb\u7ea7\u522b\u4e0b\u3002\u56e0\u4e3a\u672a\u63d0\u4ea4\u8bfb\u603b\u662f\u8bfb\u53d6\u6700\u65b0\u7684\u6570\u636e\uff0c\u800c\u4e32\u884c\u5316\u5219\u4f1a\u5bf9\u6240\u6709\u8bfb\u53d6\u7684\u6570\u636e\u884c\u52a0\u9501\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mvcc%E4%BB%8B%E7%BB%8D/#mvcc","title":"MVCC\u7684\u5e95\u5c42\u5b9e\u73b0\u539f\u7406","text":"<p>MVCC\u7684\u5b9e\u73b0\u4e3b\u8981\u4f9d\u8d56\u4e8e\u4ee5\u4e0b\u51e0\u4e2a\u6838\u5fc3\u6982\u5ff5\uff1a\u9690\u85cf\u5b57\u6bb5\u3001undo log\u3001\u7248\u672c\u94fe \u548c ReadView\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mvcc%E4%BB%8B%E7%BB%8D/#1","title":"1. \u9690\u85cf\u5b57\u6bb5","text":"<p>\u5bf9\u4e8eInnoDB\u5b58\u50a8\u5f15\u64ce\uff0c\u6bcf\u4e00\u884c\u6570\u636e\u8bb0\u5f55\u4e2d\u9664\u4e86\u6211\u4eec\u5b9a\u4e49\u7684\u5b57\u6bb5\u5916\uff0c\u8fd8\u5305\u542b\u4e86\u51e0\u4e2a\u9690\u85cf\u5b57\u6bb5\uff0c\u5176\u4e2d\u6700\u91cd\u8981\u7684\u4e24\u4e2a\u662f\uff1a *   <code>trx_id</code> (\u4e8b\u52a1ID)\uff1a\u8bb0\u5f55\u4e86\u6700\u8fd1\u4e00\u6b21\u4fee\u6539\uff08\u63d2\u5165\u6216\u66f4\u65b0\uff09\u8be5\u884c\u6570\u636e\u7684\u4e8b\u52a1\u7684ID\u3002\u8fd9\u4e2aID\u662f\u81ea\u589e\u957f\u7684\u3002 *   <code>roll_pointer</code> (\u56de\u6eda\u6307\u9488)\uff1a\u6307\u5411\u8be5\u884c\u4e0a\u4e00\u4e2a\u7248\u672c\u7684<code>undo log</code>\u8bb0\u5f55\u3002\u901a\u8fc7\u8fd9\u4e2a\u6307\u9488\uff0c\u53ef\u4ee5\u5c06\u4e00\u884c\u6570\u636e\u7684\u591a\u4e2a\u7248\u672c\u4e32\u8054\u8d77\u6765\u3002</p> <p>\u8fd8\u6709\u4e00\u4e2a\u9690\u85cf\u5b57\u6bb5<code>row_id</code>\uff0c\u5b83\u662f\u5728\u6ca1\u6709\u4e3b\u952e\u548c\u975e\u7a7a\u552f\u4e00\u7d22\u5f15\u65f6\uff0cInnoDB\u81ea\u52a8\u751f\u6210\u7684\u5355\u8c03\u9012\u589e\u7684\u884cID\uff0c\u4f46\u5b83\u4e0eMVCC\u7684\u76f4\u63a5\u5173\u7cfb\u4e0d\u5927\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mvcc%E4%BB%8B%E7%BB%8D/#2-undo-log","title":"2. undo log","text":"<p><code>undo log</code>\u5373\u56de\u6eda\u65e5\u5fd7\uff0c\u5b83\u5728MVCC\u4e2d\u626e\u6f14\u7740\u81f3\u5173\u91cd\u8981\u7684\u89d2\u8272\uff0c\u4e3b\u8981\u6709\u4e24\u4e2a\u4f5c\u7528\uff1a 1.  \u4e8b\u52a1\u56de\u6eda\uff1a\u5f53\u4e8b\u52a1\u9700\u8981\u56de\u6eda\u65f6\uff0c\u53ef\u4ee5\u5229\u7528<code>undo log</code>\u5c06\u6570\u636e\u6062\u590d\u5230\u4fee\u6539\u524d\u7684\u72b6\u6001\uff0c\u4fdd\u8bc1\u539f\u5b50\u6027\u3002 2.  \u6784\u5efa\u7248\u672c\u94fe\uff1a<code>undo log</code>\u5b58\u50a8\u4e86\u6570\u636e\u7684\u5386\u53f2\u7248\u672c\uff0cMVCC\u5229\u7528\u5b83\u6765\u5b9e\u73b0\u5feb\u7167\u8bfb\u3002</p> <p><code>undo log</code>\u4e3b\u8981\u5206\u4e3a\u4e24\u79cd\uff1a *   insert undo log: \u5728\u4e8b\u52a1\u63d2\u5165\u65b0\u8bb0\u5f55\u65f6\u4ea7\u751f\uff0c\u4ec5\u5728\u4e8b\u52a1\u56de\u6eda\u65f6\u9700\u8981\uff0c\u4e8b\u52a1\u63d0\u4ea4\u540e\u5373\u53ef\u4e22\u5f03\u3002 *   update undo log: \u5728\u4e8b\u52a1\u66f4\u65b0\u6216\u5220\u9664\u8bb0\u5f55\u65f6\u4ea7\u751f\uff0c\u4e0d\u4ec5\u7528\u4e8e\u4e8b\u52a1\u56de\u6eda\uff0c\u4e5f\u7528\u4e8e\u5feb\u7167\u8bfb\u3002\u53ea\u6709\u5728\u6ca1\u6709\u4e8b\u52a1\u9700\u8981\u901a\u8fc7\u5b83\u6765\u6784\u5efa\u5386\u53f2\u7248\u672c\u65f6\uff0c\u624d\u4f1a\u88ab\u6e05\u7406\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mvcc%E4%BB%8B%E7%BB%8D/#3","title":"3. \u7248\u672c\u94fe","text":"<p>\u5f53\u591a\u4e2a\u4e8b\u52a1\u5bf9\u540c\u4e00\u884c\u6570\u636e\u8fdb\u884c\u4fee\u6539\u65f6\uff0c\u4f1a\u4ea7\u751f\u591a\u4e2a\u7248\u672c\u3002\u8fd9\u4e9b\u7248\u672c\u901a\u8fc7<code>roll_pointer</code>\uff08\u56de\u6eda\u6307\u9488\uff09\u8fde\u63a5\u6210\u4e00\u4e2a\u94fe\u8868\uff0c\u8fd9\u4e2a\u94fe\u8868\u5c31\u88ab\u79f0\u4e3a\u7248\u672c\u94fe\u3002\u94fe\u8868\u7684\u5934\u90e8\u662f\u5f53\u524d\u6700\u65b0\u7684\u6570\u636e\u7248\u672c\uff0c\u94fe\u8868\u4e2d\u7684\u6bcf\u4e2a\u7248\u672c\u90fd\u8bb0\u5f55\u4e86\u4fee\u6539\u5b83\u7684<code>trx_id</code>\u3002</p> <p>1#### 4. ReadView (\u8bfb\u89c6\u56fe)</p> <p>ReadView\u662fMVCC\u5b9e\u73b0\u53ef\u89c1\u6027\u5224\u65ad\u7684\u6838\u5fc3\u3002\u5f53\u4e00\u4e2a\u4e8b\u52a1\u6267\u884c\u5feb\u7167\u8bfb\uff08\u666e\u901a\u7684<code>SELECT</code>\u8bed\u53e5\uff09\u65f6\uff0c\u6570\u636e\u5e93\u4f1a\u4e3a\u5176\u751f\u6210\u4e00\u4e2aReadView\u3002\u8fd9\u4e2aReadView\u8bb0\u5f55\u5e76\u7ef4\u62a4\u4e86\u5728\u751f\u6210\u8fd9\u4e2aReadView\u7684\u65f6\u523b\uff0c\u7cfb\u7edf\u4e2d\u6240\u6709\u6d3b\u8dc3\uff08\u5373\u672a\u63d0\u4ea4\uff09\u7684\u4e8b\u52a1ID\u5217\u8868\u3002\u53ef\u4ee5\u7406\u89e3\u4e3a\uff0cReadView\u4fdd\u5b58\u4e86\u5f53\u524d\u4e8b\u52a1\u4e0d\u5e94\u8be5\u770b\u5230\u7684\u5176\u4ed6\u4e8b\u52a1ID\u5217\u8868\u3002</p> <p>ReadView\u5305\u542b\u4ee5\u4e0b\u51e0\u4e2a\u91cd\u8981\u5c5e\u6027\uff1a *   <code>creator_trx_id</code>\uff1a\u521b\u5efa\u8fd9\u4e2aReadView\u7684\u4e8b\u52a1\u7684ID\u3002 *   <code>trx_ids</code>\uff1a\u4e00\u4e2a\u5217\u8868\uff0c\u8bb0\u5f55\u4e86\u5728\u751f\u6210ReadView\u65f6\uff0c\u7cfb\u7edf\u4e2d\u6240\u6709\u6d3b\u8dc3\uff08\u672a\u63d0\u4ea4\uff09\u7684\u8bfb\u5199\u4e8b\u52a1ID\u3002 *   <code>up_limit_id</code>\uff1a\u6d3b\u8dc3\u4e8b\u52a1\u5217\u8868<code>trx_ids</code>\u4e2d\u6700\u5c0f\u7684\u4e8b\u52a1ID\u3002\u5982\u679c<code>trx_ids</code>\u4e3a\u7a7a\uff0c\u5219\u7b49\u4e8e<code>low_limit_id</code>\u3002 *   <code>low_limit_id</code>\uff1a\u751f\u6210ReadView\u65f6\uff0c\u7cfb\u7edf\u4e0b\u4e00\u4e2a\u5c06\u8981\u5206\u914d\u7684\u4e8b\u52a1ID\uff0c\u5373\u5f53\u524d\u5df2\u51fa\u73b0\u7684\u6700\u5927\u4e8b\u52a1ID + 1\u3002</p> <p>\u53ef\u89c1\u6027\u5224\u65ad\u89c4\u5219\uff1a \u5f53\u4e00\u4e2a\u4e8b\u52a1\u53bb\u8bbf\u95ee\u67d0\u4e2a\u7248\u672c\u94fe\u4e2d\u7684\u6570\u636e\u65f6\uff0c\u4f1a\u7528\u5176\u6301\u6709\u7684ReadView\u4e0e\u8be5\u6570\u636e\u7248\u672c\u7684<code>trx_id</code>\u8fdb\u884c\u6bd4\u8f83\uff0c\u5224\u65ad\u8be5\u7248\u672c\u662f\u5426\u53ef\u89c1\uff1a</p> <ol> <li>\u5982\u679c<code>trx_id</code>\u7b49\u4e8e<code>creator_trx_id</code>\uff1a\u8bf4\u660e\u8fd9\u4e2a\u7248\u672c\u662f\u5f53\u524d\u4e8b\u52a1\u81ea\u5df1\u4fee\u6539\u7684\uff0c\u53ef\u89c1\u3002</li> <li>\u5982\u679c<code>trx_id</code>\u5c0f\u4e8e<code>up_limit_id</code>\uff1a\u8bf4\u660e\u4fee\u6539\u8fd9\u4e2a\u7248\u672c\u7684\u4e8b\u52a1\u5728\u5f53\u524d\u4e8b\u52a1\u751f\u6210ReadView\u4e4b\u524d\u5df2\u7ecf\u63d0\u4ea4\u4e86\uff0c\u56e0\u6b64\u8be5\u7248\u672c\u53ef\u89c1\u3002</li> <li>\u5982\u679c<code>trx_id</code>\u5927\u4e8e\u6216\u7b49\u4e8e<code>low_limit_id</code>\uff1a\u8bf4\u660e\u4fee\u6539\u8fd9\u4e2a\u7248\u672c\u7684\u4e8b\u52a1\u662f\u5728\u5f53\u524d\u4e8b\u52a1\u751f\u6210ReadView\u4e4b\u540e\u624d\u5f00\u542f\u7684\uff0c\u56e0\u6b64\u8be5\u7248\u672c\u4e0d\u53ef\u89c1\u3002</li> <li>\u5982\u679c<code>trx_id</code>\u5728<code>up_limit_id</code>\u548c<code>low_limit_id</code>\u4e4b\u95f4\uff1a\u9700\u8981\u8fdb\u4e00\u6b65\u5224\u65ad<code>trx_id</code>\u662f\u5426\u5b58\u5728\u4e8e<code>trx_ids</code>\u5217\u8868\u4e2d\u3002<ul> <li>\u5982\u679c\u5b58\u5728\uff0c\u8bf4\u660e\u5728\u751f\u6210ReadView\u65f6\uff0c\u4fee\u6539\u8be5\u7248\u672c\u7684\u4e8b\u52a1\u8fd8\u662f\u6d3b\u8dc3\u7684\uff08\u672a\u63d0\u4ea4\uff09\uff0c\u56e0\u6b64\u8be5\u7248\u672c\u4e0d\u53ef\u89c1\u3002</li> <li>\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u8bf4\u660e\u5728\u751f\u6210ReadView\u65f6\uff0c\u4fee\u6539\u8be5\u7248\u672c\u7684\u4e8b\u52a1\u5df2\u7ecf\u63d0\u4ea4\u4e86\uff0c\u56e0\u6b64\u8be5\u7248\u672c\u53ef\u89c1\u3002</li> </ul> </li> </ol> <p>\u5982\u679c\u4e00\u4e2a\u7248\u672c\u7ecf\u8fc7\u4e0a\u8ff0\u5224\u65ad\u540e\u88ab\u8ba4\u4e3a\u662f\u4e0d\u53ef\u89c1\u7684\uff0c\u4e8b\u52a1\u5c31\u4f1a\u901a\u8fc7<code>roll_pointer</code>\u987a\u7740\u7248\u672c\u94fe\u7ee7\u7eed\u5bfb\u627e\u4e0a\u4e00\u4e2a\u7248\u672c\uff0c\u7136\u540e\u91cd\u590d\u8fdb\u884c\u53ef\u89c1\u6027\u5224\u65ad\uff0c\u76f4\u5230\u627e\u5230\u4e00\u4e2a\u53ef\u89c1\u7684\u7248\u672c\u4e3a\u6b62\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mvcc%E4%BB%8B%E7%BB%8D/#mvcc_1","title":"MVCC\u5728\u4e0d\u540c\u9694\u79bb\u7ea7\u522b\u4e0b\u7684\u5de5\u4f5c\u65b9\u5f0f","text":"<p>MVCC\u5728\u8bfb\u5df2\u63d0\u4ea4 (RC) \u548c \u53ef\u91cd\u590d\u8bfb (RR) \u7ea7\u522b\u4e0b\u7684\u6838\u5fc3\u533a\u522b\u5728\u4e8e\u751f\u6210ReadView\u7684\u65f6\u673a\uff1a</p> <ul> <li>\u8bfb\u5df2\u63d0\u4ea4 (RC)\uff1a\u4e8b\u52a1\u4e2d\u7684\u6bcf\u4e00\u6b21\u5feb\u7167\u8bfb\uff08<code>SELECT</code>\u8bed\u53e5\uff09\u90fd\u4f1a\u751f\u6210\u4e00\u4e2a\u65b0\u7684\u3001\u6700\u65b0\u7684ReadView\u3002\u8fd9\u610f\u5473\u7740\uff0c\u5728\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u591a\u6b21\u67e5\u8be2\uff0c\u53ef\u80fd\u4f1a\u770b\u5230\u5176\u4ed6\u5df2\u63d0\u4ea4\u4e8b\u52a1\u6240\u505a\u7684\u4fee\u6539\uff0c\u4ece\u800c\u5bfc\u81f4\u4e0d\u53ef\u91cd\u590d\u8bfb\u3002</li> <li>\u53ef\u91cd\u590d\u8bfb (RR)\uff1a\u4e8b\u52a1\u4e2d\u7684\u7b2c\u4e00\u6b21\u5feb\u7167\u8bfb\u4f1a\u751f\u6210\u4e00\u4e2aReadView\uff0c\u5e76\u4e14\u5728\u6574\u4e2a\u4e8b\u52a1\u671f\u95f4\u90fd\u590d\u7528\u8fd9\u4e2aReadView\u3002\u56e0\u6b64\uff0c\u65e0\u8bba\u5176\u4ed6\u4e8b\u52a1\u5982\u4f55\u4fee\u6539\u5e76\u63d0\u4ea4\uff0c\u8be5\u4e8b\u52a1\u770b\u5230\u7684\u6570\u636e\u7248\u672c\u90fd\u662f\u4e00\u81f4\u7684\uff0c\u4ece\u800c\u907f\u514d\u4e86\u4e0d\u53ef\u91cd\u590d\u8bfb\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mvcc%E4%BB%8B%E7%BB%8D/#mvcc_2","title":"MVCC\u80fd\u5426\u89e3\u51b3\u5e7b\u8bfb\uff1f","text":"<p>\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u6709\u4e89\u8bae\u7684\u95ee\u9898\uff0c\u4e25\u8c28\u7684\u7ed3\u8bba\u662f\uff1aMVCC\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u907f\u514d\u4e86\u5feb\u7167\u8bfb\u7684\u5e7b\u8bfb\uff0c\u4f46\u4e0d\u80fd\u5b8c\u5168\u89e3\u51b3\u5e7b\u8bfb\u95ee\u9898\u3002RR\u7ea7\u522b\u4e0b\u5f7b\u5e95\u89e3\u51b3\u5e7b\u8bfb\uff0c\u9700\u8981\u4f9d\u9760\u9501\uff08\u4e34\u952e\u9501 Gap Lock + Record Lock\uff09\u673a\u5236\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mvcc%E4%BB%8B%E7%BB%8D/#1-mvcc","title":"1. \u4e3a\u4ec0\u4e48\u8bf4MVCC\u4e0d\u80fd\u5b8c\u5168\u89e3\u51b3\u5e7b\u8bfb\uff1f","text":"<ol> <li>\u4e8b\u52a1A (RR\u7ea7\u522b) \u6267\u884c <code>SELECT * FROM user WHERE id = 5;</code>\uff0c\u56e0\u4e3aReadView\u7684\u7f18\u6545\uff0c\u67e5\u8be2\u7ed3\u679c\u4e3a\u7a7a\u3002</li> <li>\u4e8b\u52a1B \u63d2\u5165\u4e00\u6761 <code>id = 5</code> \u7684\u8bb0\u5f55\u5e76\u63d0\u4ea4\u3002</li> <li>\u4e8b\u52a1A \u518d\u6b21\u6267\u884c <code>SELECT * FROM user WHERE id = 5;</code>\uff0c\u7531\u4e8e\u590d\u7528\u65e7\u7684ReadView\uff0c\u67e5\u8be2\u7ed3\u679c\u4f9d\u7136\u4e3a\u7a7a\u3002\u4ece\u8fd9\u4e2a\u89d2\u5ea6\u770b\uff0c\u4f3c\u4e4e\u6ca1\u6709\u5e7b\u8bfb\uff0c\u56e0\u4e3a\u4e24\u6b21\u8bfb\u53d6\u7ed3\u679c\u4e00\u81f4\uff0c\u8fd9\u662fMVCC\u4fdd\u8bc1\u7684\u201c\u53ef\u91cd\u590d\u8bfb\u201d\u3002</li> </ol> <p>\u4f46\u662f\uff0c\u5982\u679c\u4e8b\u52a1A\u63a5\u4e0b\u6765\u6267\u884c\u63d2\u5165\u64cd\u4f5c\uff1a<code>INSERT INTO user (id, name) VALUES (5, '\u7530\u4e03');</code> \u6b64\u65f6\u6570\u636e\u5e93\u4f1a\u62a5\u9519\uff0c\u63d0\u793a\u4e3b\u952e\u51b2\u7a81\u3002\u8fd9\u5c31\u4ea7\u751f\u4e86\u201c\u5e7b\u89c9\u201d\uff1a\u6211\u660e\u660e\u67e5\u8be2\u4e0d\u5230<code>id=5</code>\u7684\u8bb0\u5f55\uff0c\u4f46\u63d2\u5165\u65f6\u5374\u544a\u8bc9\u6211\u8bb0\u5f55\u5df2\u5b58\u5728\u3002\u8fd9\u5c31\u662f\u5e7b\u8bfb\u3002</p> <p>\u8fd9\u4e2a\u4f8b\u5b50\u6e05\u6670\u5730\u8868\u660e\uff0c\u5355\u7eaf\u4f9d\u9760MVCC\u673a\u5236\uff0c\u4e8b\u52a1\u65e0\u6cd5\u611f\u77e5\u5230\u5176\u4ed6\u4e8b\u52a1\u5df2\u7ecf\u63d0\u4ea4\u7684\u63d2\u5165\u64cd\u4f5c\uff0c\u5bfc\u81f4\u5728\u6267\u884c\u5199\u5165\uff08\u5f53\u524d\u8bfb\uff09\u65f6\u51fa\u73b0\u95ee\u9898\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mvcc%E4%BB%8B%E7%BB%8D/#2-vs","title":"2. \u5feb\u7167\u8bfb vs. \u5f53\u524d\u8bfb","text":"<ul> <li>\u5feb\u7167\u8bfb (Snapshot Read)\uff1a\u666e\u901a\u7684<code>SELECT</code>\u8bed\u53e5\uff0c\u4e0d\u52a0\u9501\uff0c\u8bfb\u53d6\u7684\u662f\u7b26\u5408\u53ef\u89c1\u6027\u89c4\u5219\u7684\u5386\u53f2\u7248\u672c\u6570\u636e\u3002</li> <li>\u5f53\u524d\u8bfb (Current Read)\uff1a\u4f1a\u8bfb\u53d6\u8bb0\u5f55\u7684\u6700\u65b0\u7248\u672c\uff0c\u5e76\u5bf9\u8bfb\u53d6\u7684\u8bb0\u5f55\u52a0\u9501\uff0c\u4ee5\u4fdd\u8bc1\u5176\u4ed6\u4e8b\u52a1\u4e0d\u80fd\u5e76\u53d1\u4fee\u6539\u3002\u4ee5\u4e0b\u8bed\u53e5\u90fd\u662f\u5f53\u524d\u8bfb\uff1a<ul> <li><code>SELECT ... FOR UPDATE</code> (\u52a0\u6392\u4ed6\u9501)</li> <li><code>SELECT ... LOCK IN SHARE MODE</code> (\u52a0\u5171\u4eab\u9501)</li> <li><code>INSERT</code>, <code>UPDATE</code>, <code>DELETE</code> (\u9690\u5f0f\u52a0\u9501)</li> </ul> </li> </ul> <p>MVCC\u53ea\u5bf9\u5feb\u7167\u8bfb\u6709\u6548\u3002\u5bf9\u4e8e\u5f53\u524d\u8bfb\uff0c\u4e3a\u4e86\u907f\u514d\u5e7b\u8bfb\uff0cMySQL\u7684InnoDB\u5f15\u64ce\u5728RR\u7ea7\u522b\u4e0b\u5f15\u5165\u4e86Next-Key Lock\uff08\u4e34\u952e\u9501\uff09\uff0c\u5b83\u9501\u4f4f\u4e86\u8bb0\u5f55\u672c\u8eab\u53ca\u5176\u4e4b\u524d\u7684\u95f4\u9699\uff0c\u4ece\u800c\u9632\u6b62\u5176\u4ed6\u4e8b\u52a1\u5728\u8fd9\u4e2a\u8303\u56f4\u5185\u63d2\u5165\u65b0\u7684\u8bb0\u5f55\u3002</p> <p>\u7ed3\u8bba\uff1a *   MVCC\u673a\u5236\u901a\u8fc7\u4fdd\u8bc1\u4e8b\u52a1\u5728\u5feb\u7167\u8bfb\u65f6\u6570\u636e\u7684\u4e00\u81f4\u6027\uff0c\u89e3\u51b3\u4e86\u4e0d\u53ef\u91cd\u590d\u8bfb\u95ee\u9898\u3002 *   \u5bf9\u4e8e\u5e7b\u8bfb\u95ee\u9898\uff0cMVCC\u53ea\u80fd\u907f\u514d\u5feb\u7167\u8bfb\u573a\u666f\u4e0b\u7684\u5e7b\u8bfb\uff08\u5373\u591a\u6b21<code>SELECT</code>\u7ed3\u679c\u4e00\u81f4\uff09\uff0c\u4f46\u65e0\u6cd5\u89e3\u51b3\u5f53\u524d\u8bfb\u573a\u666f\u4e0b\u7684\u5e7b\u8bfb\u3002 *   \u5728MySQL\u7684RR\u9694\u79bb\u7ea7\u522b\u4e0b\uff0c\u5e7b\u8bfb\u95ee\u9898\u6700\u7ec8\u662f\u7531\u9501\u673a\u5236\uff08\u4e3b\u8981\u662fNext-Key Lock\uff09\u6765\u89e3\u51b3\u7684\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E4%B8%AD%E6%9C%89%E5%93%AA%E4%BA%9B%E6%97%A5%E5%BF%97/","title":"Mysql\u4e2d\u6709\u54ea\u4e9b\u65e5\u5fd7","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E4%B8%AD%E6%9C%89%E5%93%AA%E4%BA%9B%E6%97%A5%E5%BF%97/#server-level-logs","title":"\u670d\u52a1\u5c42\u65e5\u5fd7 (Server Level Logs)","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E4%B8%AD%E6%9C%89%E5%93%AA%E4%BA%9B%E6%97%A5%E5%BF%97/#1-error-log","title":"1. \u9519\u8bef\u65e5\u5fd7 (Error Log)","text":"<ul> <li>\u4f5c\u7528\uff1a\u8fd9\u662fMySQL\u6700\u91cd\u8981\u7684\u65e5\u5fd7\u4e4b\u4e00\u3002\u5b83\u8bb0\u5f55\u4e86mysqld\u670d\u52a1\u5728\u542f\u52a8\u3001\u8fd0\u884c\u548c\u5173\u95ed\u8fc7\u7a0b\u4e2d\u9047\u5230\u7684\u6240\u6709\u4e25\u91cd\u9519\u8bef\u3001\u8b66\u544a\u4ee5\u53ca\u4e00\u4e9b\u91cd\u8981\u7684\u8bca\u65ad\u4fe1\u606f\u3002</li> <li>\u5e94\u7528\u573a\u666f\uff1a<ul> <li>\u5f53\u6570\u636e\u5e93\u65e0\u6cd5\u542f\u52a8\u65f6\uff0c\u9996\u5148\u5c31\u5e94\u8be5\u67e5\u770b\u9519\u8bef\u65e5\u5fd7\uff0c\u5b83\u4f1a\u544a\u8bc9\u4f60\u539f\u56e0\u3002</li> <li>\u6392\u67e5\u8fd0\u884c\u4e2d\u7684\u7591\u96be\u6742\u75c7\uff0c\u6bd4\u5982\u67d0\u4e2a\u67e5\u8be2\u5bfc\u81f4\u670d\u52a1\u5668\u5d29\u6e83\uff0c\u76f8\u5173\u7684\u5806\u6808\u4fe1\u606f\u4f1a\u8bb0\u5f55\u5728\u8fd9\u91cc\u3002</li> </ul> </li> <li>\u914d\u7f6e\uff1a\u901a\u8fc7<code>log_error</code>\u53c2\u6570\u6307\u5b9a\u6587\u4ef6\u8def\u5f84\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E4%B8%AD%E6%9C%89%E5%93%AA%E4%BA%9B%E6%97%A5%E5%BF%97/#2-general-query-log","title":"2. \u901a\u7528\u67e5\u8be2\u65e5\u5fd7 (General Query Log)","text":"<ul> <li>\u4f5c\u7528\uff1a\u5b83\u4f1a\u8bb0\u5f55\u6240\u6709\u5230\u8fbeMySQL\u670d\u52a1\u5668\u7684\u8fde\u63a5\u548c\u6267\u884c\u7684\u6bcf\u4e00\u6761SQL\u8bed\u53e5\u3002</li> <li>\u5e94\u7528\u573a\u666f\uff1a<ul> <li>\u7528\u4e8e\u5ba1\u8ba1\uff0c\u53ef\u4ee5\u5b8c\u6574\u5730\u56de\u6eaf\u67d0\u4e2a\u65f6\u95f4\u6bb5\u5185\u6570\u636e\u5e93\u7684\u6240\u6709\u64cd\u4f5c\u3002</li> <li>\u7528\u4e8e\u95ee\u9898\u590d\u73b0\uff0c\u5f53\u67d0\u4e2a\u64cd\u4f5c\u5bfc\u81f4\u95ee\u9898\u4f46\u65e0\u6cd5\u786e\u5b9a\u662f\u54ea\u6761SQL\u65f6\uff0c\u53ef\u4ee5\u5f00\u542f\u5b83\u6765\u6355\u83b7\u3002</li> </ul> </li> <li>\u6ce8\u610f\u4e8b\u9879\uff1a\u8fd9\u4e2a\u65e5\u5fd7\u4f1a\u8bb0\u5f55\u6d77\u91cf\u4fe1\u606f\uff0c\u5bf9\u670d\u52a1\u5668\u7684IO\u6027\u80fd\u5f71\u54cd\u975e\u5e38\u5927\u3002\u56e0\u6b64\uff0c\u9664\u975e\u662f\u5728\u8c03\u8bd5\u6216\u5ba1\u8ba1\u7684\u7279\u6b8a\u60c5\u51b5\u4e0b\uff0c\u751f\u4ea7\u73af\u5883\u901a\u5e38\u662f\u5173\u95ed\u7684\u3002</li> <li>\u914d\u7f6e\uff1a\u901a\u8fc7<code>general_log</code>\u5f00\u5173\u548c<code>general_log_file</code>\u8def\u5f84\u6765\u63a7\u5236\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E4%B8%AD%E6%9C%89%E5%93%AA%E4%BA%9B%E6%97%A5%E5%BF%97/#3-slow-query-log","title":"3. \u6162\u67e5\u8be2\u65e5\u5fd7 (Slow Query Log)","text":"<ul> <li>\u4f5c\u7528\uff1a\u8fd9\u662f\u6211\u4eec\u540e\u7aef\u5de5\u7a0b\u5e08\u6700\u5e38\u6253\u4ea4\u9053\u7684\u65e5\u5fd7\u3002\u5b83\u8bb0\u5f55\u4e86\u6267\u884c\u65f6\u95f4\u8d85\u8fc7\u6307\u5b9a\u9608\u503c\u7684\u6240\u6709SQL\u67e5\u8be2\u3002</li> <li>\u5e94\u7528\u573a\u666f\uff1a<ul> <li>\u6027\u80fd\u4f18\u5316\u7684\u4e3b\u8981\u5165\u53e3\u3002\u901a\u8fc7\u5206\u6790\u6162\u67e5\u8be2\u65e5\u5fd7\uff0c\u6211\u4eec\u53ef\u4ee5\u627e\u5230\u7cfb\u7edf\u4e2d\u6548\u7387\u6700\u4f4e\u7684SQL\u8bed\u53e5\uff0c\u7136\u540e\u9488\u5bf9\u6027\u5730\u8fdb\u884c\u4f18\u5316\uff08\u6bd4\u5982\u52a0\u7d22\u5f15\u3001\u6539\u5199SQL\u7b49\uff09\u3002</li> </ul> </li> <li>\u6838\u5fc3\u914d\u7f6e\uff1a<ul> <li><code>slow_query_log</code>: \u5f00\u5173\u3002</li> <li><code>long_query_time</code>: \u5b9a\u4e49\u201c\u6162\u201d\u7684\u65f6\u95f4\u9608\u503c\uff0c\u5355\u4f4d\u662f\u79d2\u3002</li> <li><code>log_queries_not_using_indexes</code>: \u4e00\u4e2a\u975e\u5e38\u6709\u7528\u7684\u9009\u9879\uff0c\u5f00\u542f\u540e\uff0c\u5373\u4f7f\u67e5\u8be2\u4e0d\u6162\uff0c\u4f46\u53ea\u8981\u5b83\u6ca1\u6709\u4f7f\u7528\u7d22\u5f15\uff0c\u4e5f\u4f1a\u88ab\u8bb0\u5f55\u4e0b\u6765\uff0c\u5e2e\u52a9\u6211\u4eec\u4e3b\u52a8\u53d1\u73b0\u6f5c\u5728\u7684\u6027\u80fd\u95ee\u9898\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E4%B8%AD%E6%9C%89%E5%93%AA%E4%BA%9B%E6%97%A5%E5%BF%97/#4-binary-log-binlog","title":"4. \u4e8c\u8fdb\u5236\u65e5\u5fd7 (Binary Log / Binlog)","text":"<ul> <li>\u4f5c\u7528\uff1a\u8fd9\u662fMySQL\u7684\u903b\u8f91\u65e5\u5fd7\uff0c\u5b83\u8bb0\u5f55\u4e86\u6240\u6709\u5bf9\u6570\u636e\u5e93\u8fdb\u884c\u4fee\u6539\u7684\u64cd\u4f5c\uff08\u5982INSERT, UPDATE, DELETE\uff09\uff0c\u4f46\u4e0d\u5305\u62ecSELECT\u3002\u5b83\u4ee5\u4e00\u79cd\u7d27\u51d1\u7684\u4e8c\u8fdb\u5236\u683c\u5f0f\u5b58\u50a8\u3002</li> <li>\u5e94\u7528\u573a\u666f\uff1a<ul> <li>\u6570\u636e\u590d\u5236\uff08Replication\uff09\uff1a\u4e3b\u4ece\u540c\u6b65\u7684\u57fa\u77f3\u3002\u4ece\u5e93\uff08Slave\uff09\u901a\u8fc7\u8bfb\u53d6\u4e3b\u5e93\uff08Master\uff09\u7684binlog\u6765\u91cd\u653e\u4e3b\u5e93\u4e0a\u7684\u6570\u636e\u53d8\u66f4\uff0c\u4ece\u800c\u4fdd\u6301\u6570\u636e\u4e00\u81f4\u3002</li> <li>\u6570\u636e\u6062\u590d\uff08Point-in-Time Recovery\uff09\uff1a\u5f53\u6570\u636e\u5e93\u53d1\u751f\u610f\u5916\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u5148\u7528\u5168\u91cf\u5907\u4efd\u6062\u590d\u5230\u4e00\u4e2a\u8fc7\u53bb\u7684\u65f6\u95f4\u70b9\uff0c\u7136\u540e\u5229\u7528binlog\u91cd\u653e\u4ece\u90a3\u4e2a\u65f6\u95f4\u70b9\u5230\u6545\u969c\u53d1\u751f\u524d\u7684\u6240\u6709\u64cd\u4f5c\uff0c\u5b9e\u73b0\u7cbe\u51c6\u7684\u6570\u636e\u6062\u590d\u3002</li> </ul> </li> <li>\u683c\u5f0f\uff1a\u6709\u4e09\u79cd\u683c\u5f0f\uff0cSTATEMENT\uff08\u8bb0\u5f55SQL\u8bed\u53e5\uff0c\u53ef\u80fd\u5bfc\u81f4\u4e3b\u4ece\u4e0d\u4e00\u81f4\uff09\u3001ROW\uff08\u8bb0\u5f55\u6bcf\u4e00\u884c\u6570\u636e\u7684\u53d8\u66f4\u7ec6\u8282\uff0c\u6700\u5b89\u5168\uff0c\u4f46\u65e5\u5fd7\u91cf\u5927\uff09\u548cMIXED\uff08\u6df7\u5408\u6a21\u5f0f\uff0c\u9ed8\u8ba4\u4f7f\u7528STATEMENT\uff0c\u4f46\u5728\u7279\u5b9a\u60c5\u51b5\u4e0b\u4f1a\u81ea\u52a8\u5207\u6362\u5230ROW\uff09\u3002\u73b0\u5728ROW\u683c\u5f0f\u662f\u4e3b\u6d41\u548c\u63a8\u8350\u7684\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E4%B8%AD%E6%9C%89%E5%93%AA%E4%BA%9B%E6%97%A5%E5%BF%97/#engine-level-logs","title":"\u5f15\u64ce\u5c42\u65e5\u5fd7 (Engine Level Logs)","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E4%B8%AD%E6%9C%89%E5%93%AA%E4%BA%9B%E6%97%A5%E5%BF%97/#5-redo-log","title":"5. \u91cd\u505a\u65e5\u5fd7 (Redo Log)","text":"<ul> <li>\u4f5c\u7528\uff1a\u8fd9\u662fInnoDB\u7279\u6709\u7684\u7269\u7406\u65e5\u5fd7\uff0c\u7528\u4e8e\u5b9e\u73b0\u4e8b\u52a1\u7684\u6301\u4e45\u6027\uff08Durability\uff09\u548c\u5d29\u6e83\u6062\u590d\uff08Crash Recovery\uff09\u3002</li> <li>\u5de5\u4f5c\u539f\u7406\uff1a\u5f53\u4e8b\u52a1\u5bf9\u6570\u636e\u8fdb\u884c\u4fee\u6539\u65f6\uff0cInnoDB\u4f1a\u5148\u628a\u4fee\u6539\u5185\u5bb9\u4ee5\u7269\u7406\u53d8\u66f4\u7684\u5f62\u5f0f\u5199\u5165\u5230Redo Log Buffer\uff0c\u7136\u540e\u8fd9\u4e2aBuffer\u4f1a\u9002\u65f6\u5730\u5237\u5165\u5230\u78c1\u76d8\u4e0a\u7684Redo Log\u6587\u4ef6\u3002\u8fd9\u4e2a\u5199\u5165\u662f\u987a\u5e8fIO\uff0c\u975e\u5e38\u5feb\u3002\u800c\u771f\u6b63\u7684\u6570\u636e\u5199\u5165\u78c1\u76d8\uff08\u968f\u673aIO\uff0c\u8f83\u6162\uff09\u5219\u53ef\u4ee5\u5f02\u6b65\u8fdb\u884c\u3002</li> <li>\u597d\u5904\uff1a\u5b83\u4fdd\u8bc1\u4e86\u5373\u4f7f\u6570\u636e\u5e93\u5728\u6570\u636e\u9875\u8fd8\u672a\u5b8c\u5168\u5199\u5165\u78c1\u76d8\u65f6\u5b95\u673a\uff0c\u91cd\u542f\u540e\u4e5f\u53ef\u4ee5\u901a\u8fc7\u91cd\u653eRedo Log\u6765\u6062\u590d\u5230\u5b95\u673a\u524d\u7684\u72b6\u6001\uff0c\u786e\u4fdd\u5df2\u63d0\u4ea4\u4e8b\u52a1\u7684\u4fee\u6539\u4e0d\u4f1a\u4e22\u5931\u3002\u8fd9\u5c31\u662f\u6240\u8c13\u7684WAL\uff08Write-Ahead Logging\uff09\u6280\u672f\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E4%B8%AD%E6%9C%89%E5%93%AA%E4%BA%9B%E6%97%A5%E5%BF%97/#6-undo-log","title":"6. \u64a4\u9500\u65e5\u5fd7 (Undo Log)","text":"<ul> <li>\u4f5c\u7528\uff1a\u5b83\u4e5f\u662fInnoDB\u7279\u6709\u7684\u903b\u8f91\u65e5\u5fd7\uff0c\u4e3b\u8981\u6709\u4e24\u4e2a\u4f5c\u7528\uff1a<ol> <li>\u4e8b\u52a1\u56de\u6eda\uff08Rollback\uff09\uff1a\u5f53\u4e00\u4e2a\u4e8b\u52a1\u9700\u8981\u56de\u6eda\u65f6\uff0cInnoDB\u4f1a\u5229\u7528Undo Log\u4e2d\u7684\u4fe1\u606f\u6765\u6267\u884c\u4e0e\u539f\u59cb\u64cd\u4f5c\u76f8\u53cd\u7684\u64cd\u4f5c\uff0c\u4ece\u800c\u5c06\u6570\u636e\u6062\u590d\u5230\u4e8b\u52a1\u5f00\u59cb\u524d\u7684\u72b6\u6001\u3002</li> <li>\u5b9e\u73b0MVCC\uff08\u591a\u7248\u672c\u5e76\u53d1\u63a7\u5236\uff09\uff1aUndo Log\u4e2d\u4fdd\u5b58\u4e86\u6570\u636e\u7684\u5386\u53f2\u7248\u672c\u3002\u5f53\u4e00\u4e2a\u8bfb\u4e8b\u52a1\u9700\u8981\u67e5\u770b\u67d0\u4e2a\u65e7\u7248\u672c\u7684\u6570\u636e\u65f6\uff0cInnoDB\u4f1a\u901a\u8fc7Undo Log\u6765\u6784\u5efa\u8fd9\u4e2a\u6570\u636e\u5feb\u7167\u3002</li> </ol> </li> </ul> \u65e5\u5fd7\u7c7b\u578b \u6240\u5c5e\u5c42\u6b21 \u4e3b\u8981\u4f5c\u7528 \u9519\u8bef\u65e5\u5fd7 \u670d\u52a1\u5c42 \u8bb0\u5f55\u542f\u52a8\u3001\u8fd0\u884c\u3001\u5173\u95ed\u7684\u9519\u8bef\u548c\u8bca\u65ad\u4fe1\u606f \u901a\u7528\u67e5\u8be2\u65e5\u5fd7 \u670d\u52a1\u5c42 \u8bb0\u5f55\u6240\u6709\u8fde\u63a5\u548cSQL\u8bed\u53e5\uff0c\u7528\u4e8e\u5ba1\u8ba1\u548c\u8c03\u8bd5 \u6162\u67e5\u8be2\u65e5\u5fd7 \u670d\u52a1\u5c42 \u8bb0\u5f55\u6267\u884c\u6162\u7684SQL\uff0c\u662f\u6027\u80fd\u4f18\u5316\u7684\u5173\u952e \u4e8c\u8fdb\u5236\u65e5\u5fd7 (Binlog) \u670d\u52a1\u5c42 \u8bb0\u5f55\u6570\u636e\u4fee\u6539\uff0c\u7528\u4e8e\u4e3b\u4ece\u590d\u5236\u548c\u6570\u636e\u6062\u590d \u91cd\u505a\u65e5\u5fd7 (Redo Log) \u5f15\u64ce\u5c42 (InnoDB) \u4fdd\u8bc1\u4e8b\u52a1\u6301\u4e45\u6027\u548c\u5d29\u6e83\u6062\u590d \u64a4\u9500\u65e5\u5fd7 (Undo Log) \u5f15\u64ce\u5c42 (InnoDB) \u5b9e\u73b0\u4e8b\u52a1\u56de\u6eda\u548cMVCC"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E4%B8%AD%E6%9C%89%E5%93%AA%E4%BA%9B%E9%94%81/","title":"Mysql\u4e2d\u6709\u54ea\u4e9b\u9501","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E4%B8%AD%E6%9C%89%E5%93%AA%E4%BA%9B%E9%94%81/#_1","title":"\u6309\u9501\u7684\u7c92\u5ea6\u5212\u5206","text":"<p>\u9501\u7684\u7c92\u5ea6\u51b3\u5b9a\u4e86\u9501\u4f1a\u5f71\u54cd\u7684\u6570\u636e\u8303\u56f4\uff0c\u7c92\u5ea6\u8d8a\u5c0f\uff0c\u5e76\u53d1\u5ea6\u8d8a\u9ad8\uff0c\u4f46\u7cfb\u7edf\u5f00\u9500\u4e5f\u8d8a\u5927\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E4%B8%AD%E6%9C%89%E5%93%AA%E4%BA%9B%E9%94%81/#1-global-lock","title":"1. \u5168\u5c40\u9501 (Global Lock)","text":"<ul> <li>\u4f5c\u7528\uff1a\u5bf9\u6574\u4e2a\u6570\u636e\u5e93\u5b9e\u4f8b\u52a0\u9501\u3002\u6700\u5178\u578b\u7684\u547d\u4ee4\u662f <code>FLUSH TABLES WITH READ LOCK</code> (FTWRL)\u3002</li> <li>\u6548\u679c\uff1a\u5f53\u6267\u884c\u8fd9\u4e2a\u547d\u4ee4\u540e\uff0c\u6574\u4e2a\u6570\u636e\u5e93\u5c31\u5904\u4e8e\u53ea\u8bfb\u72b6\u6001\u3002\u6240\u6709\u7684\u6570\u636e\u66f4\u65b0\u8bed\u53e5\uff08DML\uff09\u548c\u6570\u636e\u5b9a\u4e49\u8bed\u53e5\uff08DDL\uff09\u90fd\u4f1a\u88ab\u963b\u585e\u3002</li> <li>\u4f7f\u7528\u573a\u666f\uff1a\u4e3b\u8981\u7528\u4e8e\u505a\u5168\u5e93\u7684\u903b\u8f91\u5907\u4efd\uff08\u6bd4\u5982\u4f7f\u7528<code>mysqldump</code>\uff09\uff0c\u4ee5\u4fdd\u8bc1\u5728\u5907\u4efd\u671f\u95f4\u6570\u636e\u7684\u4e00\u81f4\u6027\uff0c\u4e0d\u4f1a\u6709\u65b0\u7684\u4fee\u6539\u5199\u5165\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E4%B8%AD%E6%9C%89%E5%93%AA%E4%BA%9B%E9%94%81/#2-table-level-lock","title":"2. \u8868\u7ea7\u9501 (Table-level Lock)","text":"<ul> <li>\u4f5c\u7528\uff1a\u76f4\u63a5\u9501\u5b9a\u4e00\u6574\u5f20\u8868\u3002\u8fd9\u662fMySQL\u4e2d\u6700\u57fa\u672c\u7684\u9501\u7b56\u7565\uff0c\u5f00\u9500\u5c0f\uff0c\u52a0\u9501\u5feb\uff0c\u4f46\u5e76\u53d1\u5ea6\u6700\u4f4e\u3002</li> <li>\u4e3b\u8981\u7c7b\u578b\uff1a<ul> <li>\u8868\u8bfb\u9501\uff08Read Lock\uff09\uff1a\u4e5f\u53eb\u5171\u4eab\u9501\u3002\u4e00\u4e2a\u4e8b\u52a1\u5bf9\u8868\u52a0\u4e86\u8bfb\u9501\u540e\uff0c\u5176\u4ed6\u4e8b\u52a1\u4e5f\u53ef\u4ee5\u5bf9\u8be5\u8868\u52a0\u8bfb\u9501\uff0c\u4f46\u4e0d\u80fd\u52a0\u5199\u9501\u3002</li> <li>\u8868\u5199\u9501\uff08Write Lock\uff09\uff1a\u4e5f\u53eb\u6392\u4ed6\u9501\u3002\u4e00\u4e2a\u4e8b\u52a1\u5bf9\u8868\u52a0\u4e86\u5199\u9501\u540e\uff0c\u5176\u4ed6\u4e8b\u52a1\u65e2\u4e0d\u80fd\u52a0\u8bfb\u9501\uff0c\u4e5f\u4e0d\u80fd\u52a0\u5199\u9501\u3002</li> </ul> </li> <li>\u5f15\u64ce\u5b9e\u73b0\uff1aMyISAM\u5b58\u50a8\u5f15\u64ce\u4e3b\u8981\u4f7f\u7528\u7684\u5c31\u662f\u8868\u7ea7\u9501\u3002InnoDB\u5728\u6267\u884c\u67d0\u4e9bDDL\u8bed\u53e5\u65f6\uff08\u5982<code>ALTER TABLE</code>\uff09\u4e5f\u4f1a\u4f7f\u7528\u8868\u7ea7\u9501\u3002</li> <li>InnoDB\u4e2d\u7684\u610f\u5411\u9501\uff1aInnoDB\u4e3a\u4e86\u652f\u6301\u591a\u7c92\u5ea6\u9501\u5b9a\uff08\u5373\u5141\u8bb8\u8868\u9501\u548c\u884c\u9501\u5171\u5b58\uff09\uff0c\u5f15\u5165\u4e86\u610f\u5411\u9501\u3002\u610f\u5411\u9501\u672c\u8eab\u4e5f\u662f\u4e00\u79cd\u8868\u7ea7\u9501\uff0c\u5b83\u5206\u4e3a\uff1a<ul> <li>\u610f\u5411\u5171\u4eab\u9501\uff08IS\uff09\uff1a\u8868\u793a\u4e00\u4e2a\u4e8b\u52a1\u51c6\u5907\u5728\u8868\u4e2d\u7684\u67d0\u4e9b\u884c\u4e0a\u52a0\u5171\u4eab\u9501\uff08S\u9501\uff09\u3002</li> <li>\u610f\u5411\u6392\u4ed6\u9501\uff08IX\uff09\uff1a\u8868\u793a\u4e00\u4e2a\u4e8b\u52a1\u51c6\u5907\u5728\u8868\u4e2d\u7684\u67d0\u4e9b\u884c\u4e0a\u52a0\u6392\u4ed6\u9501\uff08X\u9501\uff09\u3002 \u610f\u5411\u9501\u662f\u7531\u5f15\u64ce\u81ea\u52a8\u7ba1\u7406\u7684\uff0c\u4e0d\u9700\u8981\u7528\u6237\u5e72\u9884\u3002\u5b83\u7684\u4f5c\u7528\u662f\uff0c\u5f53\u4e00\u4e2a\u4e8b\u52a1\u60f3\u5bf9\u6574\u5f20\u8868\u52a0\u8868\u9501\u65f6\uff0c\u53ea\u9700\u8981\u68c0\u67e5\u8be5\u8868\u662f\u5426\u6709\u610f\u5411\u9501\uff0c\u5c31\u53ef\u4ee5\u5feb\u901f\u5224\u65ad\u662f\u5426\u9700\u8981\u7b49\u5f85\uff0c\u800c\u4e0d\u7528\u53bb\u9010\u884c\u68c0\u67e5\u662f\u5426\u6709\u884c\u9501\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E4%B8%AD%E6%9C%89%E5%93%AA%E4%BA%9B%E9%94%81/#3-row-level-lock","title":"3. \u884c\u7ea7\u9501 (Row-level Lock)","text":"<ul> <li>\u4f5c\u7528\uff1a\u9501\u5b9a\u67d0\u4e00\u884c\u6216\u591a\u884c\u6570\u636e\u3002\u8fd9\u662fInnoDB\u5b58\u50a8\u5f15\u64ce\u7684\u5de8\u5927\u4f18\u52bf\u6240\u5728\u3002\u5b83\u9501\u5b9a\u7684\u7c92\u5ea6\u6700\u7ec6\uff0c\u5e76\u53d1\u51b2\u7a81\u6700\u5c0f\uff0c\u80fd\u591f\u652f\u6301\u6700\u5927\u7684\u5e76\u53d1\u5ea6\u3002</li> <li>\u5b9e\u73b0\uff1aInnoDB\u7684\u884c\u7ea7\u9501\u662f\u57fa\u4e8e\u7d22\u5f15\u6765\u5b9e\u73b0\u7684\u3002\u5982\u679c\u4e00\u6761SQL\u8bed\u53e5\u6ca1\u6709\u4f7f\u7528\u5230\u7d22\u5f15\uff0c\u90a3\u4e48\u884c\u7ea7\u9501\u53ef\u80fd\u4f1a\u9000\u5316\u4e3a\u8868\u7ea7\u9501\u3002</li> <li>\u4e3b\u8981\u7c7b\u578b\uff08InnoDB\uff09\uff1a<ul> <li>\u8bb0\u5f55\u9501 (Record Lock)\uff1a\u8fd9\u662f\u6700\u7b80\u5355\u7684\u884c\u9501\uff0c\u5b83\u7cbe\u786e\u5730\u9501\u5b9a\u4e00\u6761\u7d22\u5f15\u8bb0\u5f55\u3002</li> <li>\u95f4\u9699\u9501 (Gap Lock)\uff1a\u5b83\u9501\u5b9a\u7684\u662f\u4e00\u4e2a\u7d22\u5f15\u8bb0\u5f55\u4e4b\u95f4\u7684\u201c\u95f4\u9699\u201d\uff0c\u4e0d\u5305\u542b\u8bb0\u5f55\u672c\u8eab\u3002\u6bd4\u5982\u9501\u5b9a<code>(3, 5)</code>\u8fd9\u4e2a\u5f00\u533a\u95f4\u3002\u5b83\u7684\u4e3b\u8981\u4f5c\u7528\u662f\u9632\u6b62\u5176\u4ed6\u4e8b\u52a1\u5728\u8fd9\u4e2a\u95f4\u9699\u4e2d\u63d2\u5165\u65b0\u7684\u8bb0\u5f55\uff0c\u4ece\u800c\u89e3\u51b3\u4e86\u5e7b\u8bfb\u95ee\u9898\u3002</li> <li>\u4e34\u952e\u9501 (Next-Key Lock)\uff1a\u8fd9\u662f\u8bb0\u5f55\u9501\u548c\u95f4\u9699\u9501\u7684\u7ed3\u5408\u4f53\uff0c\u5b83\u9501\u5b9a\u4e00\u4e2a\u7d22\u5f15\u8bb0\u5f55\u4ee5\u53ca\u8be5\u8bb0\u5f55\u524d\u9762\u7684\u90a3\u4e2a\u95f4\u0d17\u0d4d\u0d2f\u3002\u6bd4\u5982\u9501\u5b9a<code>(3, 5]</code>\u8fd9\u4e2a\u5de6\u5f00\u53f3\u95ed\u533a\u95f4\u3002\u8fd9\u662fInnoDB\u5728\u53ef\u91cd\u590d\u8bfb\u9694\u79bb\u7ea7\u522b\u4e0b\uff0c\u884c\u7ea7\u9501\u7684\u9ed8\u8ba4\u7b97\u6cd5\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E4%B8%AD%E6%9C%89%E5%93%AA%E4%BA%9B%E9%94%81/#_2","title":"\u6309\u9501\u7684\u6a21\u5f0f\u5212\u5206","text":"<p>\u8fd9\u4e2a\u7ef4\u5ea6\u63cf\u8ff0\u7684\u662f\u9501\u4e0e\u9501\u4e4b\u95f4\u7684\u5173\u7cfb\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E4%B8%AD%E6%9C%89%E5%93%AA%E4%BA%9B%E9%94%81/#1-shared-lock-s-lock","title":"1. \u5171\u4eab\u9501 (Shared Lock / S Lock)","text":"<ul> <li>\u4e5f\u79f0\u4e3a\u8bfb\u9501\u3002</li> <li>\u7279\u70b9\uff1a\u591a\u4e2a\u4e8b\u52a1\u53ef\u4ee5\u540c\u65f6\u5bf9\u540c\u4e00\u4efd\u6570\u636e\u6301\u6709\u5171\u4eab\u9501\u3002\u4e00\u4e2a\u4e8b\u52a1\u6301\u6709S\u9501\u65f6\uff0c\u5176\u4ed6\u4e8b\u52a1\u53ef\u4ee5\u518d\u7533\u8bf7S\u9501\uff0c\u4f46\u4e0d\u80fd\u7533\u8bf7X\u9501\u3002</li> <li>\u7528\u6cd5\uff1a\u5728\u666e\u901a<code>SELECT</code>\u8bed\u53e5\u540e\u52a0\u4e0a <code>LOCK IN SHARE MODE</code>\u3002</li> <li>\u901a\u4fd7\u6bd4\u55bb\uff1a\u5927\u5bb6\u53ef\u4ee5\u4e00\u8d77\u8bfb\u4e66\uff0c\u4f46\u6709\u4eba\u5728\u8bfb\u4e66\u65f6\uff0c\u4e0d\u5141\u8bb8\u4efb\u4f55\u4eba\u6765\u6495\u4e66\u6216\u6539\u5199\u5185\u5bb9\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E4%B8%AD%E6%9C%89%E5%93%AA%E4%BA%9B%E9%94%81/#2-exclusive-lock-x-lock","title":"2. \u6392\u4ed6\u9501 (Exclusive Lock / X Lock)","text":"<ul> <li>\u4e5f\u79f0\u4e3a\u5199\u9501\u3002</li> <li>\u7279\u70b9\uff1a\u6392\u4ed6\u9501\u662f\u72ec\u5360\u7684\u3002\u4e00\u65e6\u4e00\u4e2a\u4e8b\u52a1\u5bf9\u67d0\u4efd\u6570\u636e\u6301\u6709\u4e86\u6392\u4ed6\u9501\uff0c\u5176\u4ed6\u4efb\u4f55\u4e8b\u52a1\u90fd\u4e0d\u80fd\u518d\u5bf9\u8fd9\u4efd\u6570\u636e\u52a0\u4efb\u4f55\u7c7b\u578b\u7684\u9501\uff08\u65e0\u8bba\u662fS\u9501\u8fd8\u662fX\u9501\uff09\uff0c\u76f4\u5230\u6301\u6709\u8005\u91ca\u653e\u5b83\u3002</li> <li>\u7528\u6cd5\uff1a<code>INSERT</code>, <code>UPDATE</code>, <code>DELETE</code>\u8fd9\u4e9b\u5199\u64cd\u4f5c\u4f1a\u81ea\u52a8\u52a0\u4e0a\u6392\u4ed6\u9501\u3002\u4e5f\u53ef\u4ee5\u5728<code>SELECT</code>\u8bed\u53e5\u540e\u52a0\u4e0a <code>FOR UPDATE</code>\u6765\u624b\u52a8\u52a0\u6392\u4ed6\u9501\u3002</li> <li>\u901a\u4fd7\u6bd4\u55bb\uff1a\u4e00\u4e2a\u4eba\u5728\u4fee\u6539\u6587\u4ef6\u65f6\uff0c\u4e0d\u5141\u8bb8\u4efb\u4f55\u4eba\u6765\u770b\uff0c\u4e5f\u4e0d\u5141\u8bb8\u4efb\u4f55\u4eba\u6765\u4fee\u6539\u3002</li> </ul> \u7ef4\u5ea6 \u7c7b\u578b \u89e3\u91ca \u7c92\u5ea6 \u5168\u5c40\u9501 \u9501\u5b9a\u6574\u4e2a\u6570\u636e\u5e93\u5b9e\u4f8b\uff0c\u7528\u4e8e\u5907\u4efd\u3002 \u8868\u7ea7\u9501 \u9501\u5b9a\u6574\u5f20\u8868\uff0cMyISAM\u4e3b\u8981\u4f7f\u7528\u3002InnoDB\u6709\u8868\u9501\u548c\u66f4\u91cd\u8981\u7684\u610f\u5411\u9501\u3002 \u884c\u7ea7\u9501 \u9501\u5b9a\u5355\u884c\u6216\u591a\u884c\uff0cInnoDB\u6838\u5fc3\u4f18\u52bf\u3002\u5305\u62ec\u8bb0\u5f55\u9501\u3001\u95f4\u9699\u9501\u3001\u4e34\u952e\u9501\u3002 \u6a21\u5f0f \u5171\u4eab\u9501 (S Lock) \u8bfb\u9501\uff0c\u5141\u8bb8\u591a\u4e2a\u8bfb\u4e8b\u52a1\u5171\u5b58\uff0c\u4f46\u4e0e\u5199\u4e8b\u52a1\u4e92\u65a5\u3002 \u6392\u4ed6\u9501 (X Lock) \u5199\u9501\uff0c\u5b8c\u5168\u72ec\u5360\uff0c\u4e0e\u4efb\u4f55\u5176\u4ed6\u9501\u90fd\u4e92\u65a5\u3002"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E4%BA%8B%E5%8A%A1%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/","title":"Mysql\u4e8b\u52a1\u662f\u5982\u4f55\u5b9e\u73b0\u7684","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E4%BA%8B%E5%8A%A1%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/#atomicity-undo-log","title":"\u539f\u5b50\u6027 (Atomicity) \u7684\u5b9e\u73b0\uff1aUndo Log","text":"<p>\u539f\u5b50\u6027\u8981\u6c42\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u7684\u6240\u6709\u64cd\u4f5c\uff0c\u8981\u4e48\u5168\u90e8\u6210\u529f\u6267\u884c\uff0c\u8981\u4e48\u5168\u90e8\u5931\u8d25\u56de\u6eda\u3002InnoDB\u4f7f\u7528Undo Log\uff08\u64a4\u9500\u65e5\u5fd7\uff09\u6765\u4fdd\u8bc1\u8fd9\u4e00\u70b9\u3002</p> <ul> <li>\u5de5\u4f5c\u539f\u7406\uff1a\u5f53\u4e00\u4e2a\u4e8b\u52a1\u9700\u8981\u5bf9\u6570\u636e\u8fdb\u884c\u4fee\u6539\u65f6\uff0cInnoDB\u4f1a\u9996\u5148\u5c06\u6570\u636e\u7684\u65e7\u7248\u672c\uff08\u4fee\u6539\u524d\u7684\u6570\u636e\uff09\u8bb0\u5f55\u5230Undo Log\u4e2d\u3002\u8fd9\u4e2a\u65e5\u5fd7\u8bb0\u5f55\u7684\u662f\u903b\u8f91\u4e0a\u7684\u201c\u53cd\u5411\u64cd\u4f5c\u201d\u3002</li> <li>\u5b9e\u73b0\u56de\u6eda\uff1a\u5982\u679c\u4e8b\u52a1\u56e0\u4e3a\u4efb\u4f55\u539f\u56e0\u9700\u8981\u56de\u6eda\uff08\u6bd4\u5982\u7528\u6237\u6267\u884c<code>ROLLBACK</code>\uff0c\u6216\u8005\u53d1\u751f\u9519\u8bef\uff09\uff0cInnoDB\u5c31\u4f1a\u627e\u5230\u8be5\u4e8b\u52a1\u5bf9\u5e94\u7684Undo Log\uff0c\u5e76\u6309\u7167\u76f8\u53cd\u7684\u987a\u5e8f\u6267\u884c\u5176\u4e2d\u7684\u64cd\u4f5c\uff0c\u4ece\u800c\u5c06\u6570\u636e\u6062\u590d\u5230\u4e8b\u52a1\u5f00\u59cb\u524d\u7684\u521d\u59cb\u72b6\u6001\u3002</li> <li>\u5b9e\u73b0\u539f\u5b50\u6027\uff1a\u5373\u4f7f\u5728\u4e8b\u52a1\u6267\u884c\u8fc7\u7a0b\u4e2d\u6570\u636e\u5e93\u53d1\u751f\u5d29\u6e83\uff0c\u91cd\u542f\u540eInnoDB\u4f9d\u7136\u53ef\u4ee5\u901a\u8fc7Undo Log\u6765\u56de\u6eda\u90a3\u4e9b\u5df2\u7ecf\u6267\u884c\u4f46\u5c1a\u672a\u63d0\u4ea4\u7684\u4e8b\u52a1\uff0c\u786e\u4fdd\u4e86\u201c\u8981\u4e48\u5168\u505a\uff0c\u8981\u4e48\u5168\u4e0d\u505a\u201d\u7684\u539f\u5b50\u6027\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E4%BA%8B%E5%8A%A1%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/#isolation-mvcc","title":"\u9694\u79bb\u6027 (Isolation) \u7684\u5b9e\u73b0\uff1aMVCC \u4e0e\u9501","text":"<p>\u9694\u79bb\u6027\u8981\u6c42\u5e76\u53d1\u6267\u884c\u7684\u4e8b\u52a1\u4e4b\u95f4\u4e92\u4e0d\u5e72\u6270\uff0c\u770b\u8d77\u6765\u5c31\u50cf\u662f\u4e32\u884c\u6267\u884c\u4e00\u6837\u3002InnoDB\u4e3b\u8981\u901a\u8fc7MVCC\uff08\u591a\u7248\u672c\u5e76\u53d1\u63a7\u5236\uff09\u548c\u9501\u673a\u5236\u6765\u5b9e\u73b0\u9694\u79bb\u6027\u3002</p> <ol> <li> <p>MVCC (Multi-Version Concurrency Control)\uff1a     \u8fd9\u662f\u5b9e\u73b0\u8bfb-\u5199\u5e76\u53d1\u7684\u5173\u952e\uff0c\u4e3b\u8981\u7528\u4e8e\u5904\u7406\u201c\u5feb\u7167\u8bfb\u201d\uff08\u666e\u901a\u7684<code>SELECT</code>\uff09\u3002\u5b83\u901a\u8fc7\u6211\u4eec\u4e4b\u524d\u8ba8\u8bba\u8fc7\u7684Undo Log\u7248\u672c\u94fe\u548cReadView\uff08\u8bfb\u89c6\u56fe\uff09\u673a\u5236\uff0c\u4e3a\u6bcf\u4e2a\u8bfb\u4e8b\u52a1\u63d0\u4f9b\u4e00\u4e2a\u4e00\u81f4\u6027\u7684\u6570\u636e\u5feb\u7167\u3002\u8fd9\u6837\uff0c\u8bfb\u64cd\u4f5c\u5c31\u4e0d\u9700\u8981\u7b49\u5f85\u5199\u64cd\u4f5c\u91ca\u653e\u9501\uff0c\u800c\u662f\u53ef\u4ee5\u76f4\u63a5\u8bfb\u53d6\u6570\u636e\u7684\u5386\u53f2\u7248\u672c\uff0c\u6781\u5927\u5730\u63d0\u5347\u4e86\u5e76\u53d1\u6027\u80fd\u3002\u4e0d\u540c\u9694\u79bb\u7ea7\u522b\uff08\u5982\u8bfb\u5df2\u63d0\u4ea4\u3001\u53ef\u91cd\u590d\u8bfb\uff09\u7684\u5dee\u5f02\uff0c\u4e3b\u8981\u5c31\u4f53\u73b0\u5728ReadView\u7684\u521b\u5efa\u65f6\u673a\u4e0a\u3002</p> </li> <li> <p>\u9501 (Locking)\uff1a     \u5f53MVCC\u65e0\u6cd5\u89e3\u51b3\u51b2\u7a81\u65f6\uff08\u4e3b\u8981\u662f\u5199-\u5199\u51b2\u7a81\uff09\uff0cInnoDB\u5c31\u4f1a\u4f7f\u7528\u9501\u673a\u5236\u3002\u8fd9\u4e3b\u8981\u7528\u4e8e\u5904\u7406\u201c\u5f53\u524d\u8bfb\u201d\uff08\u5982<code>SELECT...FOR UPDATE</code>, <code>UPDATE</code>, <code>DELETE</code>\uff09\u3002\u5f53\u4e00\u4e2a\u4e8b\u52a1\u9700\u8981\u4fee\u6539\u6570\u636e\u65f6\uff0c\u5b83\u4f1a\u5148\u83b7\u53d6\u8be5\u6570\u636e\u7684\u6392\u4ed6\u9501\uff08X\u9501\uff09\uff0c\u963b\u6b62\u5176\u4ed6\u4e8b\u52a1\u5bf9\u8be5\u6570\u636e\u8fdb\u884c\u4efb\u4f55\u4fee\u6539\uff0c\u76f4\u5230\u5f53\u524d\u4e8b\u52a1\u63d0\u4ea4\u6216\u56de\u6eda\u91ca\u653e\u8be5\u9501\u3002\u901a\u8fc7\u9501\uff0cInnoDB\u4fdd\u8bc1\u4e86\u5728\u4efb\u4f55\u65f6\u523b\uff0c\u6700\u591a\u53ea\u6709\u4e00\u4e2a\u4e8b\u52a1\u80fd\u4fee\u6539\u540c\u4e00\u4efd\u6570\u636e\u3002</p> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E4%BA%8B%E5%8A%A1%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/#durability-redo-log-wal","title":"\u6301\u4e45\u6027 (Durability) \u7684\u5b9e\u73b0\uff1aRedo Log \u4e0e WAL","text":"<p>\u6301\u4e45\u6027\u8981\u6c42\u4e00\u65e6\u4e8b\u52a1\u63d0\u4ea4\uff0c\u5176\u5bf9\u6570\u636e\u5e93\u7684\u4fee\u6539\u5c31\u662f\u6c38\u4e45\u6027\u7684\uff0c\u5373\u4f7f\u53d1\u751f\u7cfb\u7edf\u5d29\u6e83\u4e5f\u4e0d\u4f1a\u4e22\u5931\u3002InnoDB\u4f7f\u7528Redo Log\uff08\u91cd\u505a\u65e5\u5fd7\uff09\u548cWAL\uff08Write-Ahead Logging\uff0c\u9884\u5199\u65e5\u5fd7\uff09\u6280\u672f\u6765\u9ad8\u6548\u5730\u5b9e\u73b0\u6301\u4e45\u6027\u3002</p> <ul> <li>WAL\u6280\u672f\uff1a\u5f53\u6570\u636e\u9700\u8981\u4fee\u6539\u65f6\uff0cInnoDB\u4f1a\u5148\u4fee\u6539\u5185\u5b58\u4e2d\u7684\u6570\u636e\u9875\uff08\u5728Buffer Pool\u91cc\uff09\uff0c\u7136\u540e\u5c06\u8fd9\u6b21\u4fee\u6539\u7684\u7269\u7406\u64cd\u4f5c\u8bb0\u5f55\u5230Redo Log\u4e2d\u3002\u4e8b\u52a1\u63d0\u4ea4\u65f6\uff0c\u5e76\u4e0d\u9700\u8981\u7acb\u5373\u5c06\u4fee\u6539\u8fc7\u7684\u6570\u636e\u9875\u5237\u56de\u78c1\u76d8\uff08\u8fd9\u662f\u4e00\u4e2a\u6162\u901f\u7684\u968f\u673aIO\uff09\uff0c\u800c\u53ea\u9700\u8981\u4fdd\u8bc1\u5bf9\u5e94\u7684Redo Log\u5df2\u7ecf\u5237\u5165\u78c1\u76d8\uff08\u8fd9\u662f\u4e00\u4e2a\u5feb\u901f\u7684\u987a\u5e8fIO\uff09\u3002</li> <li>\u5b9e\u73b0\u6301\u4e45\u6027\uff1a\u53ea\u8981Redo Log\u6210\u529f\u5199\u5165\u78c1\u76d8\uff0c\u4e8b\u52a1\u7684\u63d0\u4ea4\u5c31\u88ab\u8ba4\u4e3a\u662f\u5b8c\u6210\u4e86\u3002\u5982\u679c\u6b64\u65f6\u6570\u636e\u5e93\u5b95\u673a\uff0c\u5185\u5b58\u4e2d\u7684\u6570\u636e\u4fee\u6539\u867d\u7136\u4e22\u5931\u4e86\uff0c\u4f46\u91cd\u542f\u540eInnoDB\u53ef\u4ee5\u901a\u8fc7\u91cd\u653e\u78c1\u76d8\u4e0a\u7684Redo Log\uff0c\u5c06\u6240\u6709\u5df2\u63d0\u4ea4\u4e8b\u52a1\u7684\u4fee\u6539\u91cd\u65b0\u5e94\u7528\u5230\u6570\u636e\u9875\u4e0a\uff0c\u4ece\u800c\u6062\u590d\u5230\u5b95\u673a\u524d\u7684\u72b6\u6001\uff0c\u4fdd\u8bc1\u4e86\u6570\u636e\u7684\u6301\u4e45\u6027\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E4%BA%8B%E5%8A%A1%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/#consistency","title":"\u4e00\u81f4\u6027 (Consistency) \u7684\u5b9e\u73b0\uff1a\u591a\u65b9\u534f\u540c\u7684\u7ed3\u679c","text":"<p>\u4e00\u81f4\u6027\u662f\u4e8b\u52a1\u8ffd\u6c42\u7684\u6700\u7ec8\u76ee\u6807\uff0c\u5b83\u8981\u6c42\u6570\u636e\u5e93\u4ece\u4e00\u4e2a\u4e00\u81f4\u6027\u72b6\u6001\u8f6c\u53d8\u5230\u53e6\u4e00\u4e2a\u4e00\u81f4\u6027\u72b6\u6001\u3002\u5b83\u4e0d\u662f\u7531\u5355\u4e00\u6280\u672f\u5b9e\u73b0\u7684\uff0c\u800c\u662f\u7531\u539f\u5b50\u6027\u3001\u9694\u79bb\u6027\u548c\u6301\u4e45\u6027\u5171\u540c\u4fdd\u969c\u7684\u7ed3\u679c\u3002</p> <ul> <li>\u539f\u5b50\u6027\u4fdd\u8bc1\u4e86\u4e8b\u52a1\u7684\u5b8c\u6574\u6267\u884c\u6216\u5b8c\u5168\u4e0d\u6267\u884c\uff0c\u9632\u6b62\u4e86\u56e0\u90e8\u5206\u64cd\u4f5c\u5931\u8d25\u800c\u5bfc\u81f4\u7684\u6570\u636e\u4e0d\u4e00\u81f4\u3002</li> <li>\u9694\u79bb\u6027\u4fdd\u8bc1\u4e86\u5e76\u53d1\u4e8b\u52a1\u4e4b\u95f4\u4e0d\u4f1a\u4ea7\u751f\u5f02\u5e38\u7684\u4e2d\u95f4\u72b6\u6001\uff0c\u4f7f\u5f97\u6bcf\u4e2a\u4e8b\u52a1\u90fd\u611f\u89c9\u81ea\u5df1\u662f\u5728\u4e00\u4e2a\u72ec\u7acb\u7684\u73af\u5883\u4e2d\u8fd0\u884c\u3002</li> <li>\u6301\u4e45\u6027\u4fdd\u8bc1\u4e86\u5df2\u63d0\u4ea4\u7684\u4e8b\u52a1\u7ed3\u679c\u4e0d\u4f1a\u56e0\u7cfb\u7edf\u6545\u969c\u800c\u4e22\u5931\uff0c\u7ef4\u62a4\u4e86\u6570\u636e\u72b6\u6001\u7684\u7a33\u5b9a\u3002</li> </ul> <p>\u6b64\u5916\uff0c\u6570\u636e\u5e93\u672c\u8eab\u5b9a\u4e49\u7684\u7ea6\u675f\uff08\u5982\u4e3b\u952e\u3001\u5916\u952e\u3001\u552f\u4e00\u6027\u7ea6\u675f\u7b49\uff09\u4e5f\u662f\u4fdd\u8bc1\u4e00\u81f4\u6027\u7684\u91cd\u8981\u90e8\u5206\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E4%BA%8B%E5%8A%A1%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/#_1","title":"\u4e00\u4e2a\u4e8b\u52a1\u7684\u5b8c\u6574\u751f\u547d\u5468\u671f","text":"<p>\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e2a<code>UPDATE</code>\u4e8b\u52a1\u7684\u751f\u547d\u5468\u671f\u6765\u4e32\u8054\u8d77\u8fd9\u4e9b\u673a\u5236\uff1a 1.  \u4e8b\u52a1\u5f00\u59cb\u3002 2.  \u6267\u884c<code>UPDATE</code>\u8bed\u53e5\uff1a     *   InnoDB\u9996\u5148\u9700\u8981\u6267\u884c\u4e00\u4e2a\u201c\u5f53\u524d\u8bfb\u201d\uff0c\u83b7\u53d6\u8fd9\u884c\u6570\u636e\u7684\u6392\u4ed6\u9501\u3002     *   \u5c06\u8fd9\u884c\u6570\u636e\u7684\u539f\u59cb\u503c\u5199\u5165Undo Log\u3002     *   \u5728\u5185\u5b58\u7684Buffer Pool\u4e2d\u4fee\u6539\u8fd9\u884c\u6570\u636e\u3002     *   \u5c06\u8fd9\u4e2a\u4fee\u6539\u64cd\u4f5c\u7684\u7269\u7406\u53d8\u66f4\u8bb0\u5f55\u5230Redo Log Buffer\u4e2d\u3002 3.  \u6267\u884c<code>COMMIT</code>\uff1a     *   \u8fd9\u662f\u4e00\u4e2a\u201c\u4e24\u9636\u6bb5\u63d0\u4ea4\u201d\u8fc7\u7a0b\uff0c\u4e3a\u4e86\u534f\u8c03Redo Log\u548cBinlog\u7684\u4e00\u81f4\u6027\u3002     *   \u7b2c\u4e00\u9636\u6bb5\uff1aRedo Log\u8fdb\u5165<code>prepare</code>\u72b6\u6001\uff0c\u5e76\u5237\u5165\u78c1\u76d8\u3002     *   \u7b2c\u4e8c\u9636\u6bb5\uff1a\u5982\u679c\u5f00\u542f\u4e86Binlog\uff0c\u5219\u5c06Binlog\u5199\u5165\u78c1\u76d8\u3002     *   \u7b2c\u4e09\u9636\u6bb5\uff1aRedo Log\u8fdb\u5165<code>commit</code>\u72b6\u6001\u3002     *   \u4e00\u65e6Redo Log commit\u5b8c\u6210\uff0c\u4e8b\u52a1\u5c31\u88ab\u8ba4\u4e3a\u662f\u6210\u529f\u63d0\u4ea4\u5e76\u6301\u4e45\u5316\u4e86\u3002 4.  \u540e\u53f0\u7ebf\u7a0b\u4f1a\u5728\u540e\u7eed\u67d0\u4e2a\u5408\u9002\u7684\u65f6\u673a\uff0c\u5c06Buffer Pool\u4e2d\u88ab\u4fee\u6539\u8fc7\u7684\u6570\u636e\u9875\uff08\u810f\u9875\uff09\u5f02\u6b65\u5730\u5237\u56de\u5230\u78c1\u76d8\u6587\u4ef6\u4e2d\u3002</p> <p>\u603b\u7ed3\u6765\u8bf4\uff0cMySQL\u7684\u4e8b\u52a1\u5b9e\u73b0\u662f\u4e00\u4e2a\u7cbe\u5999\u7684\u534f\u540c\u7cfb\u7edf\uff1aUndo Log\u8d1f\u8d23\u56de\u6eda\u548c\u539f\u5b50\u6027\uff0cRedo Log\u8d1f\u8d23\u6301\u4e45\u6027\u548c\u5d29\u6e83\u6062\u590d\uff0cMVCC\u548c\u9501\u5171\u540c\u8d1f\u8d23\u9694\u79bb\u6027\uff0c\u800c\u8fd9\u4e00\u5207\u90fd\u662f\u4e3a\u4e86\u8fbe\u6210\u6700\u7ec8\u7684\u4e00\u81f4\u6027\u76ee\u6807\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E5%B4%A9%E6%BA%83%E4%BB%A5%E5%90%8E%E6%81%A2%E5%A4%8D%E6%B5%81%E7%A8%8B%EF%BC%9Fmysql%E5%B4%A9%E6%BA%83%E4%B9%8B%E5%90%8E%E6%9C%AA%E6%8F%90%E4%BA%A4%E7%9A%84%E4%BA%8B%E5%8A%A1%E6%80%8E%E4%B9%88%E5%8A%9E%EF%BC%9F/","title":"Mysql\u5d29\u6e83\u4ee5\u540e\u6062\u590d\u6d41\u7a0b\uff1fmysql\u5d29\u6e83\u4e4b\u540e\u672a\u63d0\u4ea4\u7684\u4e8b\u52a1\u600e\u4e48\u529e\uff1f","text":"<p>\u5f53MySQL\u670d\u52a1\u5668\u906d\u9047\u65ad\u7535\u3001\u64cd\u4f5c\u7cfb\u7edf\u5d29\u6e83\u6216\u81ea\u8eab\u9519\u8bef\u7b49\u610f\u5916\u60c5\u51b5\u800c\u5f02\u5e38\u5173\u95ed\u65f6\uff0c\u5b83\u5185\u7f6e\u7684\u6062\u590d\u673a\u5236\u4f1a\u5728\u4e0b\u6b21\u542f\u52a8\u65f6\u81ea\u52a8\u89e6\u53d1\uff0c\u4ee5\u786e\u4fdd\u6570\u636e\u7684\u4e00\u81f4\u6027\u548c\u5b8c\u6574\u6027\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u7684\u6838\u5fc3\u76ee\u6807\u662f\u5c06\u6570\u636e\u5e93\u6062\u590d\u5230\u5d29\u6e83\u524d\u6700\u540e\u4e00\u4e2a\u903b\u8f91\u4e00\u81f4\u7684\u72b6\u6001\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E5%B4%A9%E6%BA%83%E4%BB%A5%E5%90%8E%E6%81%A2%E5%A4%8D%E6%B5%81%E7%A8%8B%EF%BC%9Fmysql%E5%B4%A9%E6%BA%83%E4%B9%8B%E5%90%8E%E6%9C%AA%E6%8F%90%E4%BA%A4%E7%9A%84%E4%BA%8B%E5%8A%A1%E6%80%8E%E4%B9%88%E5%8A%9E%EF%BC%9F/#mysql","title":"MySQL\u5d29\u6e83\u540e\u7684\u6062\u590d\u6d41\u7a0b","text":"<p>InnoDB\u5b58\u50a8\u5f15\u64ce\u662f\u5b9e\u73b0\u8fd9\u4e00\u590d\u6742\u6062\u590d\u8fc7\u7a0b\u7684\u5173\u952e\uff0c\u5b83\u4e3b\u8981\u4f9d\u8d56\u4e09\u5927\u6838\u5fc3\u7ec4\u4ef6\uff1aRedo Log\uff08\u91cd\u505a\u65e5\u5fd7\uff09\u3001Undo Log\uff08\u64a4\u9500\u65e5\u5fd7\uff09 \u548c Doublewrite Buffer\uff08\u53cc\u5199\u7f13\u51b2\u533a\uff09\u3002</p> <p>\u6062\u590d\u6d41\u7a0b\u53ef\u5206\u4e3a\u4ee5\u4e0b\u51e0\u4e2a\u5173\u952e\u6b65\u9aa4\uff1a</p> <p>1. \u542f\u52a8\u5e76\u8bc6\u522b\u201c\u810f\u5173\u95ed\u201d MySQL\u670d\u52a1\u5668\u91cd\u542f\u65f6\uff0cInnoDB\u4f1a\u9996\u5148\u68c0\u67e5\u5176\u65e5\u5fd7\u548c\u6570\u636e\u6587\u4ef6\u4e2d\u7684\u7279\u5b9a\u6807\u8bb0\u3002\u901a\u8fc7\u8fd9\u4e2a\u6807\u8bb0\uff0c\u5b83\u53ef\u4ee5\u5224\u65ad\u4e0a\u4e00\u6b21\u5173\u95ed\u662f\u6b63\u5e38\u3001\u5e73\u7a33\u7684\u201c\u5e72\u51c0\u5173\u95ed\u201d\uff0c\u8fd8\u662f\u610f\u5916\u4e2d\u65ad\u7684\u201c\u810f\u5173\u95ed\u201d\u3002\u5982\u679c\u662f\u540e\u8005\uff0c\u6062\u590d\u6d41\u7a0b\u4fbf\u4f1a\u542f\u52a8\u3002</p> <p>2. Redo\u9636\u6bb5 (\u524d\u6eda\u64cd\u4f5c) - \u4fdd\u8bc1\u6301\u4e45\u6027(Durability) \u8fd9\u662f\u6062\u590d\u7684\u7b2c\u4e00\u6b65\uff0c\u4e5f\u662f\u81f3\u5173\u91cd\u8981\u7684\u4e00\u6b65\u3002InnoDB\u4f1a\u626b\u63cfRedo Log\u6587\u4ef6\uff0c\u5176\u4e3b\u8981\u76ee\u7684\u662f\u786e\u4fdd\u6240\u6709\u5728\u5d29\u6e83\u524d\u5df2\u63d0\u4ea4(COMMIT)\u7684\u4e8b\u52a1\uff0c\u5176\u6570\u636e\u4fee\u6539\u90fd\u80fd\u88ab\u6c38\u4e45\u4fdd\u5b58\u5230\u78c1\u76d8\u7684\u6570\u636e\u6587\u4ef6\u4e2d\u3002</p> <ul> <li>\u5de5\u4f5c\u539f\u7406\uff1a\u4e3a\u4e86\u4f18\u5316\u6027\u80fd\uff0cInnoDB\u91c7\u7528\u9884\u5199\u65e5\u5fd7(Write-Ahead Logging, WAL)\u7b56\u7565\u3002\u5f53\u6570\u636e\u88ab\u4fee\u6539\u65f6\uff0c\u53d8\u66f4\u9996\u5148\u5199\u5165\u5185\u5b58\u4e2d\u7684Buffer Pool\uff0c\u5e76\u4e14\u76f8\u5e94\u7684\u4fee\u6539\u8bb0\u5f55\u4f1a\u7acb\u5373\u5199\u5165\u78c1\u76d8\u4e0a\u7684Redo Log\uff0c\u800c\u771f\u6b63\u7684\u6570\u636e\u6587\u4ef6\u5237\u76d8\u5219\u662f\u5f02\u6b65\u7684\u3001\u5ef6\u8fdf\u7684\u3002\u8fd9\u79cd\u673a\u5236\u4fdd\u8bc1\u4e86\u5373\u4f7f\u4fee\u6539\u8fc7\u7684\u6570\u636e\u9875\u8fd8\u6ca1\u6765\u5f97\u53ca\u5199\u5165\u6570\u636e\u6587\u4ef6\u5c31\u53d1\u751f\u4e86\u5d29\u6e83\uff0c\u8bb0\u5f55\u5728Redo Log\u4e2d\u7684\u64cd\u4f5c\u4e5f\u4e0d\u4f1a\u4e22\u5931\u3002</li> <li>\u6062\u590d\u64cd\u4f5c\uff1a\u6062\u590d\u7a0b\u5e8f\u4f1a\u4ece\u4e0a\u4e00\u4e2a\u68c0\u67e5\u70b9(Checkpoint)\u5f00\u59cb\uff0c\u91cd\u653e(Replay) Redo Log\u4e2d\u8bb0\u5f55\u7684\u6240\u6709\u5df2\u63d0\u4ea4\u4e8b\u52a1\u7684\u6570\u636e\u9875\u4fee\u6539\u64cd\u4f5c\uff0c\u5c06\u8fd9\u4e9b\u53d8\u66f4\u5e94\u7528\u5230\u6570\u636e\u6587\u4ef6\u4e2d\u3002</li> <li>\u9636\u6bb5\u6210\u679c\uff1a\u6b64\u9636\u6bb5\u5b8c\u6210\u540e\uff0c\u6240\u6709\u5df2\u63d0\u4ea4\u4e8b\u52a1\u7684\u53d8\u66f4\u90fd\u5df2\u4f53\u73b0\u5728\u6570\u636e\u6587\u4ef6\u4e2d\uff0c\u4ece\u800c\u4fdd\u8bc1\u4e86ACID\u7279\u6027\u4e2d\u7684\u6301\u4e45\u6027\u3002 \u4e0d\u8fc7\uff0c\u6b64\u65f6\u7684\u6570\u636e\u6587\u4ef6\u53ef\u80fd\u4e5f\u5305\u542b\u4e86\u5d29\u6e83\u65f6\u672a\u63d0\u4ea4\u4e8b\u52a1\u7684\u4fee\u6539\uff0c\u8fd9\u4e9b\u201c\u810f\u6570\u636e\u201d\u5c06\u5728\u4e0b\u4e00\u9636\u6bb5\u88ab\u6e05\u7406\u3002</li> </ul> <p>3. Undo\u9636\u6bb5 (\u56de\u6eda\u64cd\u4f5c) - \u4fdd\u8bc1\u539f\u5b50\u6027(Atomicity) \u5728Redo\u9636\u6bb5\u786e\u4fdd\u5df2\u63d0\u4ea4\u6570\u636e\u4e0d\u4e22\u5931\u540e\uff0c\u6570\u636e\u5e93\u5f00\u59cb\u5904\u7406\u672a\u5b8c\u6210\u7684\u4e8b\u52a1\u3002</p> <ul> <li>\u5de5\u4f5c\u539f\u7406\uff1a\u6570\u636e\u5e93\u7684\u539f\u5b50\u6027\u8981\u6c42\u4e00\u4e2a\u4e8b\u52a1\u5185\u7684\u6240\u6709\u64cd\u4f5c\u8981\u4e48\u5168\u90e8\u6210\u529f\uff0c\u8981\u4e48\u5168\u90e8\u5931\u8d25\uff0c\u4e0d\u80fd\u505c\u7559\u5728\u4e2d\u95f4\u72b6\u6001\u3002 <code>Undo Log</code>\u8bb0\u5f55\u4e86\u6570\u636e\u5728\u4fee\u6539\u524d\u7684\u201c\u5386\u53f2\u7248\u672c\u201d\u6216\u64a4\u9500\u64cd\u4f5c\u6240\u9700\u7684\u4fe1\u606f\u3002</li> <li>\u6062\u590d\u64cd\u4f5c\uff1a\u6062\u590d\u7a0b\u5e8f\u4f1a\u5229\u7528Undo Log\u6765\u8bc6\u522b\u6240\u6709\u5728\u5d29\u6e83\u65f6\u5904\u4e8e\u201c\u6d3b\u8dc3\u201d\u72b6\u6001\uff08\u5373\u672a\u63d0\u4ea4\uff09\u7684\u4e8b\u52a1\u3002 \u7136\u540e\uff0c\u5b83\u4f1a\u6839\u636eUndo Log\u4e2d\u7684\u4fe1\u606f\u6267\u884c\u53cd\u5411\u64cd\u4f5c\uff0c\u64a4\u9500\u8fd9\u4e9b\u4e8b\u52a1\u6240\u505a\u7684\u6240\u6709\u6570\u636e\u4fee\u6539\uff0c\u5c06\u6570\u636e\u6062\u590d\u5230\u8fd9\u4e9b\u4e8b\u52a1\u5f00\u59cb\u4e4b\u524d\u7684\u72b6\u6001\u3002</li> <li>\u9636\u6bb5\u6210\u679c\uff1a\u6b64\u9636\u6bb5\u5b8c\u6210\u540e\uff0c\u6240\u6709\u672a\u63d0\u4ea4\u4e8b\u52a1\u5bf9\u6570\u636e\u5e93\u7684\u5f71\u54cd\u88ab\u5f7b\u5e95\u6e05\u9664\uff0c\u4fdd\u8bc1\u4e86ACID\u7279\u6027\u4e2d\u7684\u539f\u5b50\u6027\u3002</li> </ul> <p>4. \u6062\u590d\u5b8c\u6210\uff0c\u63a5\u53d7\u65b0\u8fde\u63a5 \u4e00\u65e6Redo\u548cUndo\u9636\u6bb5\u5168\u90e8\u987a\u5229\u5b8c\u6210\uff0c\u6570\u636e\u5e93\u5c31\u8fbe\u5230\u4e86\u4e00\u4e2a\u5b8c\u5168\u4e00\u81f4\u7684\u72b6\u6001\uff1a\u6240\u6709\u5df2\u63d0\u4ea4\u7684\u4e8b\u52a1\u90fd\u5df2\u6210\u529f\u6301\u4e45\u5316\uff0c\u6240\u6709\u672a\u63d0\u4ea4\u7684\u4e8b\u52a1\u90fd\u5df2\u88ab\u5b8c\u5168\u56de\u6eda\u3002 \u6b64\u65f6\uff0cMySQL\u670d\u52a1\u624d\u7b97\u771f\u6b63\u542f\u52a8\u5b8c\u6bd5\uff0c\u5e76\u53ef\u4ee5\u5f00\u59cb\u63a5\u53d7\u65b0\u7684\u5ba2\u6237\u7aef\u8fde\u63a5\u548c\u8bf7\u6c42\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E5%B4%A9%E6%BA%83%E4%BB%A5%E5%90%8E%E6%81%A2%E5%A4%8D%E6%B5%81%E7%A8%8B%EF%BC%9Fmysql%E5%B4%A9%E6%BA%83%E4%B9%8B%E5%90%8E%E6%9C%AA%E6%8F%90%E4%BA%A4%E7%9A%84%E4%BA%8B%E5%8A%A1%E6%80%8E%E4%B9%88%E5%8A%9E%EF%BC%9F/#mysql_1","title":"MySQL\u5d29\u6e83\u540e\u672a\u63d0\u4ea4\u7684\u4e8b\u52a1\u600e\u4e48\u529e\uff1f","text":"<p>\u6240\u6709\u5728\u5d29\u6e83\u53d1\u751f\u65f6\u8fd8\u672a\u63d0\u4ea4\u7684\u4e8b\u52a1\uff0c\u90fd\u5c06\u88ab\u5f7b\u5e95\u56de\u6eda\uff08Rollback\uff09\u3002</p> <p>\u8fd9\u662f\u7531\u6570\u636e\u5e93ACID\u539f\u5219\u4e2d\u7684A (\u539f\u5b50\u6027)\u6240\u4fdd\u8bc1\u7684\u3002</p> <ul> <li>\u539f\u5b50\u6027\uff08Atomicity\uff09\uff1a\u4e00\u4e2a\u4e8b\u52a1\u88ab\u770b\u4f5c\u662f\u4e0d\u53ef\u5206\u5272\u7684\u6700\u5c0f\u5de5\u4f5c\u5355\u5143\uff0c\u5176\u5185\u90e8\u6240\u6709\u64cd\u4f5c\u5fc5\u987b\u5168\u90e8\u6210\u529f\u6267\u884c\uff0c\u5426\u5219\u6574\u4e2a\u4e8b\u52a1\u5c06\u5931\u8d25\uff0c\u6570\u636e\u5e93\u72b6\u6001\u56de\u9000\u5230\u4e8b\u52a1\u5f00\u59cb\u4e4b\u524d\u3002</li> <li>\u5b9e\u73b0\u673a\u5236\uff1a<code>Undo Log</code>\u662f\u5b9e\u73b0\u539f\u5b50\u6027\u7684\u6838\u5fc3\u3002\u5f53\u4e00\u4e2a\u4e8b\u52a1\u5f00\u59cb\u4fee\u6539\u6570\u636e\u65f6\uff0cInnoDB\u4f1a\u5148\u5c06\u6570\u636e\u7684\u201c\u65e7\u7248\u672c\u201d\u6216\u8005\u8bf4\u201c\u5982\u4f55\u64a4\u9500\u5f53\u524d\u64cd\u4f5c\u201d\u7684\u4fe1\u606f\u8bb0\u5f55\u5230Undo Log\u4e2d\u3002<ul> <li>\u5982\u679c\u4e8b\u52a1\u6700\u7ec8\u6267\u884c<code>COMMIT</code>\uff0c\u8fd9\u4e9bUndo Log\u4f1a\u5728\u672a\u6765\u67d0\u4e2a\u65f6\u95f4\u70b9\u88ab\u7cfb\u7edf\u6e05\u7406\u3002</li> <li>\u5982\u679c\u7528\u6237\u4e3b\u52a8\u6267\u884c<code>ROLLBACK</code>\uff0cMySQL\u4f1a\u5229\u7528Undo Log\u6765\u64a4\u9500\u8be5\u4e8b\u52a1\u6240\u505a\u7684\u6240\u6709\u4fee\u6539\u3002</li> <li>\u5982\u679c\u5728<code>COMMIT</code>\u4e4b\u524d\u7cfb\u7edf\u5d29\u6e83\uff0c\u91cd\u542f\u540e\u7684Undo\u6062\u590d\u9636\u6bb5\u4f1a\u81ea\u52a8\u626e\u6f14<code>ROLLBACK</code>\u7684\u89d2\u8272\uff0c\u627e</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E6%8C%81%E4%B9%85%E5%8C%96%E7%9A%84/","title":"Mysql\u6570\u636e\u5e93\u662f\u5982\u4f55\u5b9e\u73b0\u6301\u4e45\u5316\u7684","text":"<p>\u6570\u636e\u5e93\u7684\u6301\u4e45\u5316\u662f\u5176\u6838\u5fc3\u7279\u6027\u4e4b\u4e00\uff0c\u786e\u4fdd\u4e86\u5373\u4f7f\u5728\u7cfb\u7edf\u5d29\u6e83\u6216\u65ad\u7535\u7b49\u610f\u5916\u60c5\u51b5\u4e0b\uff0c\u5df2\u63d0\u4ea4\u7684\u4e8b\u52a1\u6570\u636e\u4e5f\u4e0d\u4f1a\u4e22\u5931\u3002\u8fd9\u4e00\u673a\u5236\u7684\u5b9e\u73b0\u9700\u8981\u5728\u9ad8\u6027\u80fd\u4e0e\u9ad8\u53ef\u9760\u6027\u4e4b\u95f4\u505a\u51fa\u7cbe\u5999\u7684\u5e73\u8861\u3002\u5176\u5e95\u5c42\u539f\u7406\u6d89\u53ca\u4ece\u786c\u4ef6\u3001\u64cd\u4f5c\u7cfb\u7edf\u5230\u6570\u636e\u5e93\u8f6f\u4ef6\u7684\u591a\u4e2a\u5c42\u9762\uff0c\u5176\u4e2d\u9884\u5199\u65e5\u5fd7\uff08Write-Ahead Logging, WAL\uff09\u662f\u5173\u952e\u6280\u672f\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E6%8C%81%E4%B9%85%E5%8C%96%E7%9A%84/#io","title":"\u78c1\u76d8I/O\u74f6\u9888\u4e0e\u5e94\u5bf9\u7b56\u7565","text":"<p>\u6570\u636e\u5e93\u7684\u6570\u636e\u6700\u7ec8\u5b58\u50a8\u5728\u786c\u76d8\u4e0a\u3002\u4f20\u7edf\u673a\u68b0\u786c\u76d8\uff08HDD\uff09\u7684\u8bfb\u5199\u64cd\u4f5c\u4f9d\u8d56\u4e8e\u78c1\u5934\u7684\u673a\u68b0\u8fd0\u52a8\uff0c\u5305\u62ec\u5bfb\u9053\u548c\u65cb\u8f6c\u5b9a\u4f4d\uff0c\u8fd9\u4e00\u8fc7\u7a0b\u8fdc\u6162\u4e8eCPU\u548c\u5185\u5b58\u7684\u7535\u5b50\u4fe1\u53f7\u901f\u5ea6\u3002\u56e0\u6b64\uff0c\u76f4\u63a5\u7684\u78c1\u76d8\u8bfb\u5199\uff0c\u5c24\u5176\u662f\u968f\u673a\u8bfb\u5199\uff0c\u4f1a\u6210\u4e3a\u6570\u636e\u5e93\u6027\u80fd\u7684\u4e3b\u8981\u74f6\u9888\u3002</p> <ul> <li> <p>\u968f\u673a\u8bfb\u5199 vs. \u987a\u5e8f\u8bfb\u5199\uff1a</p> <ul> <li> <p>\u968f\u673a\u8bfb\u5199\uff1a\u5f53\u9700\u8981\u8bfb\u5199\u7684\u6570\u636e\u5728\u78c1\u76d8\u4e0a\u4e0d\u8fde\u7eed\u65f6\uff0c\u78c1\u5934\u9700\u8981\u9891\u7e41\u79fb\u52a8\uff0c\u8017\u8d39\u5927\u91cf\u65f6\u95f4\u3002\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u9875\u5728\u7269\u7406\u4e0a\u5f80\u5f80\u662f\u968f\u673a\u5206\u5e03\u7684\uff0c\u56e0\u6b64\u76f4\u63a5\u4fee\u6539\u6570\u636e\u6587\u4ef6\u4f1a\u5bfc\u81f4\u5927\u91cf\u7684\u968f\u673aI/O\u3002</p> </li> <li> <p>\u987a\u5e8f\u8bfb\u5199\uff1a\u5982\u679c\u6570\u636e\u662f\u8fde\u7eed\u5b58\u50a8\u7684\uff0c\u78c1\u5934\u53ef\u4ee5\u4e00\u6b21\u6027\u8bfb\u53d6\u6216\u5199\u5165\u5927\u5757\u6570\u636e\uff0c\u5927\u5927\u63d0\u9ad8\u4e86\u6548\u7387\u3002</p> </li> </ul> </li> </ul> <p>\u4e3a\u4e86\u89e3\u51b3\u78c1\u76d8I/O\u7684\u74f6\u9888\uff0c\u73b0\u4ee3\u8ba1\u7b97\u7cfb\u7edf\u5f15\u5165\u4e86\u591a\u7ea7\u7f13\u5b58\uff1a</p> <ol> <li> <p>\u64cd\u4f5c\u7cfb\u7edf\u7f13\u5b58\uff08Page Cache/Buffer Cache\uff09\uff1a\u64cd\u4f5c\u7cfb\u7edf\u5728\u5185\u5b58\u4e2d\u5f00\u8f9f\u4e00\u5757\u533a\u57df\uff0c\u7528\u4e8e\u7f13\u5b58\u78c1\u76d8\u6570\u636e\u3002\u5199\u64cd\u4f5c\u9996\u5148\u5199\u5165\u7f13\u5b58\uff0c\u7136\u540e\u7531\u64cd\u4f5c\u7cfb\u7edf\u6839\u636e\u7279\u5b9a\u7b56\u7565\uff08\u5982\u5b9a\u65f6\u3001\u7f13\u5b58\u533a\u6ee1\uff09\u5f02\u6b65\u5237\u5199\u5230\u78c1\u76d8\u3002\u8fd9\u88ab\u79f0\u4e3a\u201c\u5ef6\u8fdf\u5199\u201d\uff08Delayed Write\uff09\uff0c\u53ef\u4ee5\u5408\u5e76\u591a\u6b21\u5c0f\u7684\u5199\u64cd\u4f5c\uff0c\u63d0\u5347\u6027\u80fd\u3002</p> </li> <li> <p>\u6570\u636e\u5e93\u7f13\u5b58\uff08\u5982InnoDB Buffer Pool\uff09\uff1aMySQL\u7b49\u6570\u636e\u5e93\u5728\u7528\u6237\u7a7a\u95f4\u5185\u5b9e\u73b0\u4e86\u81ea\u5df1\u7684\u7f13\u5b58\u6c60\u3002\u6240\u6709\u7684\u6570\u636e\u8bfb\u5199\u9996\u5148\u5728Buffer Pool\u4e2d\u8fdb\u884c\uff0c\u8fd9\u6781\u5927\u5730\u51cf\u5c11\u4e86\u4e0e\u78c1\u76d8\u7684\u76f4\u63a5\u4ea4\u4e92\u3002</p> </li> </ol> <p>\u7136\u800c\uff0c\u4ec5\u4ec5\u4f9d\u9760\u7f13\u5b58\u4f1a\u5e26\u6765\u65b0\u7684\u95ee\u9898\uff1a\u5982\u679c\u7cfb\u7edf\u5728\u7f13\u5b58\u4e2d\u7684\u201c\u810f\u6570\u636e\u201d\uff08\u5df2\u4fee\u6539\u4f46\u672a\u5199\u5165\u78c1\u76d8\u7684\u6570\u636e\uff09\u843d\u76d8\u524d\u5b95\u673a\uff0c\u6570\u636e\u5c31\u4f1a\u4e22\u5931\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E6%8C%81%E4%B9%85%E5%8C%96%E7%9A%84/#write-ahead-logging-wal","title":"\u6838\u5fc3\u673a\u5236\uff1a\u9884\u5199\u65e5\u5fd7 (Write-Ahead Logging - WAL)","text":"<p>\u4e3a\u4e86\u5728\u5229\u7528\u7f13\u5b58\u63d0\u5347\u6027\u80fd\u7684\u540c\u65f6\u4fdd\u8bc1\u6570\u636e\u4e0d\u4e22\u5931\uff0c\u6570\u636e\u5e93\u666e\u904d\u91c7\u7528WAL\u673a\u5236\u3002\u5176\u6838\u5fc3\u601d\u60f3\u662f\uff1a\u5728\u4fee\u6539\u6570\u636e\u4e4b\u524d\uff0c\u5fc5\u987b\u5148\u5c06\u63cf\u8ff0\u8fd9\u4e9b\u4fee\u6539\u7684\u65e5\u5fd7\u8bb0\u5f55\u5199\u5165\u5230\u6301\u4e45\u5316\u7684\u65e5\u5fd7\u6587\u4ef6\u4e2d\u3002</p> <p>\u4ee5MySQL\u7684InnoDB\u5b58\u50a8\u5f15\u64ce\u4e3a\u4f8b\uff0c\u8fd9\u4e00\u673a\u5236\u901a\u8fc7redo log\uff08\u91cd\u505a\u65e5\u5fd7\uff09\u5b9e\u73b0\u3002</p> <p>redo log\u7684\u5de5\u4f5c\u6d41\u7a0b\u5982\u4e0b\uff1a</p> <ol> <li> <p>\u5f53\u4e00\u4e2a\u4e8b\u52a1\u9700\u8981\u4fee\u6539\u6570\u636e\u65f6\uff0c\u5b83\u9996\u5148\u5728\u5185\u5b58\u4e2d\u7684Buffer Pool\u91cc\u4fee\u6539\u5bf9\u5e94\u7684\u6570\u636e\u9875\u3002</p> </li> <li> <p>\u5728\u4fee\u6539\u6570\u636e\u9875\u7684\u540c\u65f6\uff0cInnoDB\u4f1a\u751f\u6210\u4e00\u6761\u6216\u591a\u6761redo log\u8bb0\u5f55\uff0c\u8fd9\u4e9b\u8bb0\u5f55\u63cf\u8ff0\u4e86\u201c\u5728\u54ea\u4e2a\u6570\u636e\u9875\u7684\u54ea\u4e2a\u4f4d\u7f6e\u505a\u4e86\u4ec0\u4e48\u4fee\u6539\u201d\u3002</p> </li> <li> <p>\u8fd9\u4e9bredo log\u8bb0\u5f55\u9996\u5148\u88ab\u5199\u5165\u5185\u5b58\u4e2d\u7684redo log buffer\u3002</p> </li> <li> <p>\u5728\u4e8b\u52a1\u63d0\u4ea4\u65f6\uff0credo log buffer\u4e2d\u7684\u5185\u5bb9\u5fc5\u987b\u88ab\u5237\u5199\u5230\u78c1\u76d8\u4e0a\u7684redo log\u6587\u4ef6\u4e2d\u3002\u4e00\u65e6\u65e5\u5fd7\u6210\u529f\u5199\u5165\u78c1\u76d8\uff0c\u4e8b\u52a1\u5c31\u88ab\u8ba4\u4e3a\u662f\u6301\u4e45\u5316\u7684\uff0c\u5373\u4f7fBuffer Pool\u4e2d\u7684\u810f\u6570\u636e\u9875\u5c1a\u672a\u5237\u76d8\u3002</p> </li> <li> <p>\u6570\u636e\u5e93\u540e\u53f0\u7ebf\u7a0b\u4f1a\u5728\u5408\u9002\u7684\u65f6\u673a\uff0c\u5c06Buffer Pool\u4e2d\u7684\u810f\u6570\u636e\u9875\u5f02\u6b65\u5730\u5237\u5199\u5230\u78c1\u76d8\u7684\u6570\u636e\u6587\u4ef6\u4e2d\u3002</p> </li> </ol> <p>\u4e3a\u4ec0\u4e48redo log\u80fd\u63d0\u5347\u6027\u80fd\u5e76\u4fdd\u8bc1\u6301\u4e45\u5316\uff1f</p> <ul> <li> <p>\u53d8\u968f\u673a\u5199\u4e3a\u987a\u5e8f\u5199\uff1a\u76f4\u63a5\u5237\u5199\u6570\u636e\u9875\u662f\u968f\u673aI/O\uff0c\u800credo log\u662f\u4ee5\u8ffd\u52a0\u7684\u65b9\u5f0f\u5199\u5165\u65e5\u5fd7\u6587\u4ef6\u7684\uff0c\u8fd9\u662f\u4e00\u79cd\u987a\u5e8fI/O\uff0c\u6548\u7387\u8fdc\u9ad8\u4e8e\u968f\u673aI/O\u3002\u6570\u636e\u5e93\u5c06\u4e8b\u52a1\u6301\u4e45\u5316\u7684\u538b\u529b\u4ece\u6602\u8d35\u7684\u968f\u673a\u5199\u6570\u636e\u9875\u8f6c\u79fb\u5230\u4e86\u9ad8\u6548\u7684\u987a\u5e8f\u5199\u65e5\u5fd7\u4e0a\u3002</p> </li> <li> <p>\u4fdd\u8bc1\u6570\u636e\u4e0d\u4e22\u5931\uff1a\u5982\u679c\u6570\u636e\u5e93\u5728\u810f\u6570\u636e\u9875\u5237\u76d8\u524d\u5d29\u6e83\uff0c\u91cd\u542f\u540e\u53ef\u4ee5\u901a\u8fc7redo log\u8fdb\u884c\u6062\u590d\u3002\u5b83\u4f1a\u68c0\u67e5\u65e5\u5fd7\uff0c\u5c06\u90a3\u4e9b\u5df2\u7ecf\u63d0\u4ea4\u4f46\u6570\u636e\u9875\u5c1a\u672a\u843d\u76d8\u7684\u4fee\u6539\u91cd\u65b0\u5e94\u7528\u5230\u6570\u636e\u9875\u4e0a\uff0c\u4ece\u800c\u786e\u4fdd\u4e86\u6570\u636e\u7684\u5b8c\u6574\u6027\u3002</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E6%8C%81%E4%B9%85%E5%8C%96%E7%9A%84/#redo-log","title":"redo log\u7684\u5237\u76d8\u7b56\u7565","text":"<p>InnoDB\u63d0\u4f9b\u4e86innodb_flush_log_at_trx_commit\u53c2\u6570\u6765\u63a7\u5236\u4e8b\u52a1\u63d0\u4ea4\u65f6redo log\u7684\u5237\u76d8\u7b56\u7565\uff0c\u5141\u8bb8\u7528\u6237\u5728\u6027\u80fd\u548c\u6570\u636e\u4e00\u81f4\u6027\u4e4b\u95f4\u8fdb\u884c\u9009\u62e9\uff1a</p> <ul> <li> <p>innodb_flush_log_at_trx_commit = 1\uff08\u9ed8\u8ba4\u503c\uff09\uff1a</p> <ul> <li> <p>\u6700\u9ad8\u5b89\u5168\u6027\uff1a\u6bcf\u6b21\u4e8b\u52a1\u63d0\u4ea4\u65f6\uff0credo log\u90fd\u4f1a\u4eceredo log buffer\u540c\u6b65\u5199\u5165\u5230\u64cd\u4f5c\u7cfb\u7edf\u7684\u7f13\u5b58\uff0c\u5e76\u7acb\u5373\u8c03\u7528fsync()\u5f3a\u5236\u5237\u5199\u5230\u78c1\u76d8\u3002\u8fd9\u79cd\u65b9\u5f0f\u53ef\u4ee5\u6700\u5927\u9650\u5ea6\u5730\u4fdd\u8bc1\u5df2\u63d0\u4ea4\u7684\u4e8b\u52a1\u4e0d\u4e22\u5931\u6570\u636e\u3002</p> </li> <li> <p>\u6027\u80fd\u5f71\u54cd\uff1a\u6bcf\u6b21\u63d0\u4ea4\u90fd\u6d89\u53ca\u4e00\u6b21\u78c1\u76d8I/O\uff0c\u6027\u80fd\u6700\u5dee\u3002\u9002\u7528\u4e8e\u5bf9\u6570\u636e\u4e00\u81f4\u6027\u8981\u6c42\u6781\u9ad8\u7684\u573a\u666f\uff0c\u5982\u652f\u4ed8\u3001\u91d1\u878d\u4e1a\u52a1\u3002</p> </li> </ul> </li> <li> <p>innodb_flush_log_at_trx_commit = 0\uff1a</p> <ul> <li> <p>\u6700\u9ad8\u6027\u80fd\uff1a\u4e8b\u52a1\u63d0\u4ea4\u65f6\uff0credo log\u4ec5\u7559\u5728redo log buffer\u4e2d\u3002\u7531\u540e\u53f0\u4e3b\u7ebf\u7a0b\u5927\u7ea6\u6bcf\u79d2\u5c06redo log buffer\u7684\u5185\u5bb9\u5237\u5199\u5230\u78c1\u76d8\u3002</p> </li> <li> <p>\u5b89\u5168\u6027\u6700\u4f4e\uff1a\u5982\u679cMySQL\u8fdb\u7a0b\u5728\u4e8b\u52a1\u63d0\u4ea4\u540e\u3001\u65e5\u5fd7\u5237\u76d8\u524d\u5d29\u6e83\uff0c\u4f1a\u4e22\u5931\u6700\u8fd1\u4e00\u79d2\u5185\u6240\u6709\u5df2\u63d0\u4ea4\u7684\u4e8b\u52a1\u6570\u636e\u3002</p> </li> </ul> </li> <li> <p>innodb_flush_log_at_trx_commit = 2\uff1a</p> <ul> <li> <p>\u6027\u80fd\u4e0e\u5b89\u5168\u7684\u6298\u4e2d\uff1a\u6bcf\u6b21\u4e8b\u52a1\u63d0\u4ea4\u65f6\uff0credo log\u4f1a\u5199\u5165\u64cd\u4f5c\u7cfb\u7edf\u7684\u9875\u9762\u7f13\u5b58\uff08OS Buffer Cache\uff09\uff0c\u4f46\u4e0d\u4f1a\u7acb\u5373fsync()\u5230\u78c1\u76d8\u3002\u800c\u662f\u4f9d\u8d56\u64cd\u4f5c\u7cfb\u7edf\u5927\u7ea6\u6bcf\u79d2\u4e00\u6b21\u7684\u5237\u76d8\u64cd\u4f5c\u3002</p> </li> <li> <p>\u8f83\u9ad8\u5b89\u5168\u6027\uff1a\u53ea\u8981\u64cd\u4f5c\u7cfb\u7edf\u4e0d\u5d29\u6e83\u6216\u670d\u52a1\u5668\u4e0d\u65ad\u7535\uff0c\u6570\u636e\u5c31\u4e0d\u4f1a\u4e22\u5931\u3002\u76f8\u6bd4\u8bbe\u7f6e1\uff0c\u6027\u80fd\u6709\u663e\u8457\u63d0\u5347\u3002</p> </li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E6%9C%89%E5%93%AA%E4%BA%9B%E7%B4%A2%E5%BC%95/","title":"Mysql\u6709\u54ea\u4e9b\u7d22\u5f15","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E6%9C%89%E5%93%AA%E4%BA%9B%E7%B4%A2%E5%BC%95/#_1","title":"\u6309\u6570\u636e\u7ed3\u6784\u5212\u5206","text":"<p>\u8fd9\u51b3\u5b9a\u4e86\u7d22\u5f15\u7684\u5e95\u5c42\u5b9e\u73b0\u65b9\u5f0f\u548c\u5b83\u7684\u9002\u7528\u573a\u666f\u3002</p> <ol> <li> <p>B+Tree\u7d22\u5f15\uff1a     \u8fd9\u662f\u6700\u5e38\u89c1\u3001\u4e5f\u662f\u9ed8\u8ba4\u7684\u7d22\u5f15\u7c7b\u578b\uff0cInnoDB\u548cMyISAM\u90fd\u4f7f\u7528\u5b83\u3002\u5b83\u7684\u6570\u636e\u7ed3\u6784\u662f\u4e00\u4e2a\u5e73\u8861\u7684\u591a\u8def\u641c\u7d22\u6811\uff0c\u6240\u6709\u6570\u636e\u90fd\u6309\u987a\u5e8f\u5b58\u50a8\u3002</p> <ul> <li>\u4f18\u70b9\uff1a\u975e\u5e38\u9002\u5408\u7528\u4e8e\u5168\u952e\u503c\u3001\u952e\u503c\u8303\u56f4\u6216\u6700\u5de6\u524d\u7f00\u7684\u67e5\u627e\u3002\u5bf9<code>=</code>, <code>&gt;</code>, <code>&lt;</code>, <code>BETWEEN</code>, <code>IN</code>\u4ee5\u53ca\u4ee5\u5e38\u91cf\u5f00\u5934\u7684<code>LIKE</code>\u67e5\u8be2\u6548\u7387\u90fd\u5f88\u9ad8\u3002</li> <li>\u9002\u7528\u573a\u666f\uff1a\u7edd\u5927\u591a\u6570\u7684\u67e5\u8be2\u573a\u666f\u3002</li> </ul> </li> <li> <p>\u54c8\u5e0c\u7d22\u5f15\uff1a     \u8fd9\u662fMemory\u5b58\u50a8\u5f15\u64ce\u7684\u9ed8\u8ba4\u7d22\u5f15\u7c7b\u578b\u3002\u5b83\u57fa\u4e8e\u54c8\u5e0c\u8868\u5b9e\u73b0\uff0c\u53ea\u6709\u7cbe\u786e\u5339\u914d\u7d22\u5f15\u6240\u6709\u5217\u7684\u67e5\u8be2\u624d\u6709\u6548\u3002</p> <ul> <li>\u4f18\u70b9\uff1a\u5bf9\u4e8e\u7b49\u503c\u67e5\u8be2\uff08<code>=</code> \u548c <code>IN</code>\uff09\uff0c\u5b83\u7684\u901f\u5ea6\u6781\u5feb\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u662fO(1)\u3002</li> <li>\u7f3a\u70b9\uff1a\u4e0d\u652f\u6301\u8303\u56f4\u67e5\u8be2\u548c\u6392\u5e8f\u3002\u56e0\u4e3a\u6570\u636e\u4e0d\u662f\u6709\u5e8f\u5b58\u50a8\u7684\uff0c\u6240\u4ee5<code>ORDER BY</code>\u64cd\u4f5c\u4e5f\u65e0\u6cd5\u5229\u7528\u54c8\u5e0c\u7d22\u5f15\u3002</li> <li>\u8865\u5145\uff1aInnoDB\u6709\u4e00\u4e2a\u201c\u81ea\u9002\u5e94\u54c8\u5e0c\u7d22\u5f15\u201d\uff08Adaptive Hash Index\uff09\u7684\u529f\u80fd\uff0c\u5b83\u4f1a\u5728B-Tree\u7d22\u5f15\u7684\u57fa\u7840\u4e0a\uff0c\u5bf9\u70ed\u70b9\u6570\u636e\u81ea\u52a8\u6784\u5efa\u54c8\u5e0c\u7d22\u5f15\uff0c\u4ee5\u63d0\u5347\u67e5\u8be2\u6027\u80fd\u3002</li> </ul> </li> <li> <p>\u5168\u6587\u7d22\u5f15 (Full-text Index)\uff1a     \u8fd9\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u7d22\u5f15\uff0c\u4e3b\u8981\u7528\u4e8e\u5728\u5927\u91cf\u6587\u672c\u4e2d\u8fdb\u884c\u5173\u952e\u8bcd\u641c\u7d22\u3002</p> <ul> <li>\u5de5\u4f5c\u539f\u7406\uff1a\u5b83\u901a\u8fc7\u5efa\u7acb\u4e00\u4e2a\u201c\u5012\u6392\u7d22\u5f15\u201d\u6765\u5b9e\u73b0\uff0c\u8bb0\u5f55\u4e86\u6bcf\u4e2a\u8bcd\u5728\u54ea\u4e9b\u6587\u6863\u4e2d\u51fa\u73b0\u3002</li> <li>\u4f7f\u7528\u65b9\u5f0f\uff1a\u914d\u5408<code>MATCH() ... AGAINST()</code>\u8bed\u6cd5\u4f7f\u7528\uff0c\u800c\u4e0d\u662f<code>LIKE</code>\u3002</li> <li>\u9002\u7528\u573a\u666f\uff1a\u7528\u4e8e\u6587\u7ae0\u3001\u8bc4\u8bba\u7b49\u6587\u672c\u5185\u5bb9\u7684\u641c\u7d22\u3002</li> </ul> </li> <li> <p>\u7a7a\u95f4\u6570\u636e\u7d22\u5f15 (R-Tree Index)\uff1a     \u8fd9\u662f\u4e00\u79cd\u6bd4\u8f83\u7279\u6b8a\u7684\u7d22\u5f15\uff0c\u4e3b\u8981\u7528\u4e8e\u5730\u7406\u7a7a\u95f4\u6570\u636e\u7c7b\u578b\uff08GIS\uff09\uff0c\u53ef\u4ee5\u9ad8\u6548\u5730\u8fdb\u884c\u7a7a\u95f4\u67e5\u8be2\u3002\u8fd9\u4e2a\u5728\u5e38\u89c4\u7684\u4e1a\u52a1\u5f00\u53d1\u4e2d\u7528\u5f97\u6bd4\u8f83\u5c11\u3002</p> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E6%9C%89%E5%93%AA%E4%BA%9B%E7%B4%A2%E5%BC%95/#_2","title":"\u6309\u903b\u8f91\u529f\u80fd\u5212\u5206","text":"<p>\u8fd9\u662f\u6211\u4eec\u5f00\u53d1\u8005\u5728\u521b\u5efa\u7d22\u5f15\u65f6\uff0c\u4ece\u4e1a\u52a1\u89d2\u5ea6\u7ed9\u7d22\u5f15\u8d4b\u4e88\u7684\u201c\u89d2\u8272\u201d\u3002</p> <ol> <li> <p>\u666e\u901a\u7d22\u5f15 (Normal Index)\uff1a     \u6700\u57fa\u672c\u7684\u7d22\u5f15\uff0c\u6ca1\u6709\u4efb\u4f55\u9650\u5236\u3002\u5b83\u7684\u552f\u4e00\u4f5c\u7528\u5c31\u662f\u52a0\u901f\u67e5\u8be2\u3002</p> </li> <li> <p>\u552f\u4e00\u7d22\u5f15 (Unique Index)\uff1a     \u5b83\u5728\u666e\u901a\u7d22\u5f15\u7684\u57fa\u7840\u4e0a\uff0c\u589e\u52a0\u4e86\u6570\u636e\u552f\u4e00\u6027\u7684\u7ea6\u675f\u3002\u5373\u7d22\u5f15\u5217\u7684\u503c\u5fc5\u987b\u662f\u552f\u4e00\u7684\uff0c\u4f46\u5141\u8bb8\u6709\u591a\u4e2aNULL\u503c\u3002</p> </li> <li> <p>\u4e3b\u952e\u7d22\u5f15 (Primary Key Index)\uff1a     \u8fd9\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u552f\u4e00\u7d22\u5f15\uff0c\u5b83\u4e0d\u5141\u8bb8\u6709NULL\u503c\uff0c\u5e76\u4e14\u4e00\u5f20\u8868\u53ea\u80fd\u6709\u4e00\u4e2a\u4e3b\u952e\u7d22\u5f15\u3002\u5b83\u7528\u4e8e\u552f\u4e00\u5730\u6807\u8bc6\u8868\u4e2d\u7684\u6bcf\u4e00\u884c\u8bb0\u5f55\u3002\u5728InnoDB\u4e2d\uff0c\u4e3b\u952e\u7d22\u5f15\u6709\u975e\u5e38\u7279\u6b8a\u7684\u5730\u4f4d\u3002</p> </li> <li> <p>\u7ec4\u5408\u7d22\u5f15 (Composite Index)\uff1a     \u4e5f\u53eb\u590d\u5408\u7d22\u5f15\u3002\u5b83\u662f\u6307\u5728\u8868\u7684\u591a\u4e2a\u5217\u4e0a\u521b\u5efa\u4e00\u4e2a\u7d22\u5f15\u3002</p> <ul> <li>\u9075\u5faa\u201c\u6700\u5de6\u524d\u7f00\u539f\u5219\u201d\uff1a\u4e00\u4e2a\u7ec4\u5408\u7d22\u5f15<code>idx(col1, col2, col3)</code>\uff0c\u76f8\u5f53\u4e8e\u521b\u5efa\u4e86<code>(col1)</code>\u3001<code>(col1, col2)</code>\u3001<code>(col1, col2, col3)</code>\u8fd9\u51e0\u4e2a\u7d22\u5f15\u7684\u6548\u679c\u3002\u5982\u679c\u67e5\u8be2\u6761\u4ef6\u6ca1\u6709\u4f7f\u7528\u5230\u7d22\u5f15\u7684\u6700\u5de6\u8fb9\u7684\u5217\uff0c\u6bd4\u5982<code>WHERE col2 = 'x'</code>\uff0c\u90a3\u4e48\u8fd9\u4e2a\u7d22\u5f15\u5c31\u65e0\u6cd5\u88ab\u4f7f\u7528\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E6%9C%89%E5%93%AA%E4%BA%9B%E7%B4%A2%E5%BC%95/#innodb","title":"\u6309\u7269\u7406\u5b58\u50a8\u65b9\u5f0f\u5212\u5206\uff08InnoDB\u7279\u6709\uff09","text":"<p>\u8fd9\u662fInnoDB\u5f15\u64ce\u4e2d\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u6982\u5ff5\uff0c\u5b83\u51b3\u5b9a\u4e86\u6570\u636e\u548c\u7d22\u5f15\u662f\u5982\u4f55\u7ec4\u7ec7\u5728\u4e00\u8d77\u7684\u3002</p> <ol> <li> <p>\u805a\u7c07\u7d22\u5f15 (Clustered Index)\uff1a</p> <ul> <li>\u5b9a\u4e49\uff1a\u805a\u7c07\u7d22\u5f15\u7684\u53f6\u5b50\u8282\u70b9\u5b58\u50a8\u7684\u4e0d\u662f\u7d22\u5f15\u6307\u9488\uff0c\u800c\u662f\u5b8c\u6574\u7684\u884c\u6570\u636e\u3002\u56e0\u6b64\uff0c\u7d22\u5f15\u548c\u6570\u636e\u662f\u5b58\u653e\u5728\u4e00\u8d77\u7684\u3002</li> <li>\u7279\u6027\uff1a\u4e00\u5f20\u8868\u53ea\u80fd\u6709\u4e00\u4e2a\u805a\u7c07\u7d22\u5f15\u3002InnoDB\u4f1a\u6309\u7167\u4ee5\u4e0b\u987a\u5e8f\u6765\u9009\u62e9\u6216\u521b\u5efa\u805a\u7c07\u7d22\u5f15\uff1a<ol> <li>\u5982\u679c\u8868\u5b9a\u4e49\u4e86\u4e3b\u952e\uff0c\u5219\u4e3b\u952e\u7d22\u5f15\u5c31\u662f\u805a\u7c07\u7d22\u5f15\u3002</li> <li>\u5982\u679c\u6ca1\u6709\u4e3b\u952e\uff0c\u5219\u4f1a\u9009\u62e9\u7b2c\u4e00\u4e2a\u975e\u7a7a\u7684\u552f\u4e00\u7d22\u5f15\u4f5c\u4e3a\u805a\u7c07\u7d22\u5f15\u3002</li> <li>\u5982\u679c\u4ee5\u4e0a\u90fd\u6ca1\u6709\uff0cInnoDB\u4f1a\u81ea\u52a8\u751f\u6210\u4e00\u4e2a\u9690\u85cf\u76846\u5b57\u8282\u7684<code>ROW_ID</code>\u4f5c\u4e3a\u805a\u7c07\u7d22\u5f15\u3002</li> </ol> </li> <li>\u4f18\u70b9\uff1a\u6839\u636e\u4e3b\u952e\u8fdb\u884c\u67e5\u8be2\u65f6\uff0c\u901f\u5ea6\u6781\u5feb\uff0c\u56e0\u4e3a\u627e\u5230\u7d22\u5f15\u5c31\u627e\u5230\u4e86\u6570\u636e\uff0c\u4e0d\u9700\u8981\u989d\u5916\u7684\u56de\u8868\u64cd\u4f5c\u3002</li> </ul> </li> <li> <p>\u975e\u805a\u7c07\u7d22\u5f15 (Non-Clustered Index) \u6216 \u8f85\u52a9\u7d22\u5f15 (Secondary Index)\uff1a</p> <ul> <li>\u5b9a\u4e49\uff1a\u9664\u4e86\u805a\u7c07\u7d22\u5f15\u4e4b\u5916\u7684\u6240\u6709\u7d22\u5f15\uff0c\u90fd\u79f0\u4e3a\u975e\u805a\u7c07\u7d22\u5f15\u6216\u8f85\u52a9\u7d22\u5f15\u3002</li> <li>\u7279\u6027\uff1a\u5b83\u7684\u53f6\u5b50\u8282\u70b9\u5b58\u50a8\u7684\u4e0d\u662f\u884c\u6570\u636e\uff0c\u800c\u662f\u8be5\u884c\u6570\u636e\u5bf9\u5e94\u7684\u4e3b\u952e\u503c\u3002</li> <li>\u67e5\u8be2\u8fc7\u7a0b\uff1a\u5f53\u4f7f\u7528\u8f85\u52a9\u7d22\u5f15\u8fdb\u884c\u67e5\u8be2\u65f6\uff0c\u4f1a\u5148\u901a\u8fc7\u8be5\u7d22\u5f15\u627e\u5230\u5bf9\u5e94\u7684\u4e3b\u952e\u503c\uff0c\u7136\u540e\u518d\u7528\u8fd9\u4e2a\u4e3b\u952e\u503c\u53bb\u805a\u7c07\u7d22\u5f15\u4e2d\u67e5\u627e\u5b8c\u6574\u7684\u884c\u6570\u636e\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u88ab\u79f0\u4e3a\u201c\u56de\u8868\u201d\u3002</li> <li>\u4f18\u5316\uff1a\u4e3a\u4e86\u907f\u514d\u56de\u8868\u5e26\u6765\u7684\u6027\u80fd\u5f00\u9500\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u201c\u8986\u76d6\u7d22\u5f15\u201d\u3002\u5982\u679c\u4e00\u4e2a\u67e5\u8be2\u6240\u9700\u7684\u6240\u6709\u6570\u636e\uff08<code>SELECT</code>\u5217\u8868\u548c<code>WHERE</code>\u6761\u4ef6\uff09\u90fd\u80fd\u5728\u4e00\u4e2a\u8f85\u52a9\u7d22\u5f15\u4e2d\u76f4\u63a5\u83b7\u53d6\uff0c\u90a3\u4e48\u5c31\u4e0d\u9700\u8981\u56de\u8868\u4e86\uff0c\u8fd9\u79cd\u67e5\u8be2\u65b9\u5f0f\u5c31\u53eb\u8986\u76d6\u7d22\u5f15\u67e5\u8be2\uff0c\u6027\u80fd\u4f1a\u5f88\u9ad8\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/sql%E6%9F%A5%E8%AF%A2%E7%9A%84%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B%E6%98%AF%E4%BB%80%E4%B9%88/","title":"Sql\u67e5\u8be2\u7684\u6267\u884c\u8fc7\u7a0b\u662f\u4ec0\u4e48","text":"<p>\u4e00\u6761SQL\u67e5\u8be2\u8bed\u53e5\u4ece\u5ba2\u6237\u7aef\u53d1\u51fa\u5230\u6700\u7ec8\u8fd4\u56de\u7ed3\u679c\u96c6\uff0c\u5176\u5728\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf\uff08DBMS\uff09\u5185\u90e8\u7684\u6267\u884c\u8fc7\u7a0b\u662f\u4e00\u4e2a\u76f8\u5f53\u590d\u6742\u4f46\u6709\u5e8f\u7684\u6d41\u7a0b\u3002\u867d\u7136\u4e0d\u540cDBMS\u7684\u5177\u4f53\u5b9e\u73b0\u53ef\u80fd\u6709\u6240\u5dee\u5f02\uff0c\u4f46\u6838\u5fc3\u6b65\u9aa4\u901a\u5e38\u662f\u76f8\u4f3c\u7684\u3002\u6211\u53ef\u4ee5\u5c06\u5176\u6982\u62ec\u4e3a\u4ee5\u4e0b\u51e0\u4e2a\u4e3b\u8981\u9636\u6bb5\uff1a</p> <ol> <li> <p>\u8fde\u63a5\u4e0e\u8ba4\u8bc1\uff08Connection and Authentication\uff09\uff1a</p> <ul> <li>\u5ba2\u6237\u7aef\uff08\u5982\u5e94\u7528\u7a0b\u5e8f\u3001SQL\u5ba2\u6237\u7aef\u5de5\u5177\uff09\u9996\u5148\u9700\u8981\u4e0e\u6570\u636e\u5e93\u670d\u52a1\u5668\u5efa\u7acb\u7f51\u7edc\u8fde\u63a5\u3002</li> <li>\u8fde\u63a5\u5efa\u7acb\u540e\uff0c\u5ba2\u6237\u7aef\u901a\u5e38\u9700\u8981\u63d0\u4f9b\u51ed\u636e\uff08\u5982\u7528\u6237\u540d\u3001\u5bc6\u7801\uff09\u8fdb\u884c\u8eab\u4efd\u8ba4\u8bc1\u3002\u6570\u636e\u5e93\u670d\u52a1\u5668\u9a8c\u8bc1\u51ed\u636e\u7684\u6709\u6548\u6027\u3002</li> <li>\u8ba4\u8bc1\u901a\u8fc7\u540e\uff0c\u670d\u52a1\u5668\u4f1a\u4e3a\u8fd9\u4e2a\u8fde\u63a5\u521b\u5efa\u4e00\u4e2a\u4f1a\u8bdd\uff08Session\uff09\uff0c\u5e76\u53ef\u80fd\u8fdb\u884c\u6743\u9650\u68c0\u67e5\uff0c\u786e\u8ba4\u7528\u6237\u5bf9\u5c06\u8981\u64cd\u4f5c\u7684\u6570\u636e\u5e93\u5bf9\u8c61\u662f\u5426\u6709\u76f8\u5e94\u7684\u6743\u9650\u3002</li> </ul> </li> <li> <p>SQL\u89e3\u6790\uff08Parsing\uff09\uff1a</p> <ul> <li>\u8bcd\u6cd5\u5206\u6790\uff08Lexical Analysis / Tokenization\uff09\uff1a\u5c06SQL\u8bed\u53e5\u5b57\u7b26\u4e32\u5206\u89e3\u6210\u4e00\u4e2a\u4e2a\u72ec\u7acb\u7684\u8bcd\u6cd5\u5355\u5143\uff08Token\uff09\uff0c\u4f8b\u5982\u5173\u952e\u5b57\uff08SELECT, FROM, WHERE\uff09\u3001\u6807\u8bc6\u7b26\uff08\u8868\u540d, \u5217\u540d\uff09\u3001\u64cd\u4f5c\u7b26\uff08=, &gt;, &lt;\uff09\u3001\u5b57\u9762\u91cf\uff08\u6570\u5b57, \u5b57\u7b26\u4e32\uff09\u7b49\u3002</li> <li>\u8bed\u6cd5\u5206\u6790\uff08Syntactic Analysis / Parsing\uff09\uff1a\u6839\u636e\u6570\u636e\u5e93\u7684SQL\u8bed\u6cd5\u89c4\u5219\uff0c\u5c06\u8bcd\u6cd5\u5355\u5143\u6d41\u6784\u5efa\u6210\u4e00\u4e2a\u62bd\u8c61\u8bed\u6cd5\u6811\uff08Abstract Syntax Tree, AST\uff09\uff0c\u4e5f\u79f0\u4e3a\u89e3\u6790\u6811\u3002\u8fd9\u4e2a\u6811\u5f62\u7ed3\u6784\u6e05\u6670\u5730\u8868\u8fbe\u4e86SQL\u8bed\u53e5\u7684\u903b\u8f91\u7ed3\u6784\u548c\u5404\u4e2a\u7ec4\u6210\u90e8\u5206\u4e4b\u95f4\u7684\u5173\u7cfb\u3002\u5982\u679cSQL\u8bed\u53e5\u5b58\u5728\u8bed\u6cd5\u9519\u8bef\uff0c\u6b64\u9636\u6bb5\u4f1a\u62a5\u9519\u3002</li> <li>\u8bed\u4e49\u5206\u6790\uff08Semantic Analysis\uff09\uff1a\u5728\u8bed\u6cd5\u6811\u7684\u57fa\u7840\u4e0a\uff0c\u8fdb\u884c\u8bed\u4e49\u68c0\u67e5\u3002\u4f8b\u5982\uff1a<ul> <li>\u68c0\u67e5\u8868\u540d\u3001\u5217\u540d\u662f\u5426\u5b58\u5728\u4e14\u6709\u6548\u3002</li> <li>\u68c0\u67e5\u6570\u636e\u7c7b\u578b\u662f\u5426\u5339\u914d\uff08\u5982WHERE\u5b50\u53e5\u4e2d\u6bd4\u8f83\u7684\u5217\u7c7b\u578b\u662f\u5426\u517c\u5bb9\uff09\u3002</li> <li>\u68c0\u67e5\u7528\u6237\u5bf9\u6d89\u53ca\u7684\u5bf9\u8c61\u662f\u5426\u6709\u8db3\u591f\u7684\u6743\u9650\u3002</li> <li>\u5c06\u4e00\u4e9b\u89c6\u56fe\uff08View\uff09\u5c55\u5f00\u4e3a\u5176\u5e95\u5c42\u7684\u67e5\u8be2\u3002</li> <li>\u786e\u5b9a\u67e5\u8be2\u4e2d\u5404\u90e8\u5206\u7684\u542b\u4e49\uff0c\u4f8b\u5982\u89e3\u6790\u522b\u540d\u3002</li> </ul> </li> </ul> </li> <li> <p>\u67e5\u8be2\u4f18\u5316\uff08Query Optimization\uff09\uff1a</p> <ul> <li>\u8fd9\u662f\u6570\u636e\u5e93\u6027\u80fd\u7684\u5173\u952e\u6b65\u9aa4\u3002\u4f18\u5316\u5668\u7684\u76ee\u6807\u662f\u4e3a\u7ed9\u5b9a\u7684SQL\u67e5\u8be2\u627e\u5230\u4e00\u4e2a\u6700\u9ad8\u6548\u7684\u6267\u884c\u8ba1\u5212\uff08Execution Plan\uff09\u3002</li> <li>\u903b\u8f91\u4f18\u5316\uff08Logical Optimization\uff09\uff1a\u57fa\u4e8e\u5173\u7cfb\u4ee3\u6570\u7b49\u7406\u8bba\uff0c\u5bf9\u67e5\u8be2\u8fdb\u884c\u7b49\u4ef7\u53d8\u6362\uff0c\u4ee5\u751f\u6210\u66f4\u6613\u4e8e\u9ad8\u6548\u6267\u884c\u7684\u903b\u8f91\u7ed3\u6784\u3002\u4f8b\u5982\uff0c\u8c13\u8bcd\u4e0b\u63a8\uff08\u5c06\u8fc7\u6ee4\u6761\u4ef6\u5c3d\u53ef\u80fd\u65e9\u5730\u5e94\u7528\uff09\u3001\u8fde\u63a5\u6d88\u9664\u3001\u5b50\u67e5\u8be2\u5c55\u5f00\u7b49\u3002</li> <li>\u7269\u7406\u4f18\u5316\uff08Physical Optimization\uff09\uff1a\u57fa\u4e8e\u6570\u636e\u5e93\u7684\u7269\u7406\u5b58\u50a8\u7279\u6027\uff08\u5982\u7d22\u5f15\u3001\u6570\u636e\u5206\u5e03\u3001\u7edf\u8ba1\u4fe1\u606f\u7b49\uff09\u548c\u6210\u672c\u6a21\u578b\uff08Cost-Based Optimization, CBO\uff09\uff0c\u4e3a\u903b\u8f91\u4e0a\u7b49\u4ef7\u7684\u6267\u884c\u8def\u5f84\u9009\u62e9\u6210\u672c\u6700\u4f4e\u7684\u7269\u7406\u6267\u884c\u64cd\u4f5c\u3002<ul> <li>\u9009\u62e9\u8bbf\u95ee\u8def\u5f84\uff1a\u51b3\u5b9a\u662f\u5168\u8868\u626b\u63cf\u8fd8\u662f\u4f7f\u7528\u7d22\u5f15\u626b\u63cf\uff08\u4ee5\u53ca\u4f7f\u7528\u54ea\u4e2a\u7d22\u5f15\uff09\u3002</li> <li>\u9009\u62e9\u8fde\u63a5\u7b97\u6cd5\uff1a\u5bf9\u4e8e\u591a\u8868\u8fde\u63a5\uff0c\u9009\u62e9\u5408\u9002\u7684\u8fde\u63a5\u7b97\u6cd5\uff0c\u5982\u5d4c\u5957\u5faa\u73af\u8fde\u63a5\uff08Nested Loop Join\uff09\u3001\u54c8\u5e0c\u8fde\u63a5\uff08Hash Join\uff09\u3001\u5408\u5e76\u8fde\u63a5\uff08Merge Join\uff09\u3002</li> <li>\u786e\u5b9a\u8fde\u63a5\u987a\u5e8f\uff1a\u5bf9\u4e8e\u591a\u8868\u8fde\u63a5\uff0c\u8fde\u63a5\u7684\u987a\u5e8f\u5bf9\u6027\u80fd\u5f71\u54cd\u5f88\u5927\uff0c\u4f18\u5316\u5668\u4f1a\u5c1d\u8bd5\u627e\u5230\u6700\u4f18\u7684\u8fde\u63a5\u987a\u5e8f\u3002</li> <li>\u5e76\u884c\u5904\u7406\u51b3\u7b56\uff1a\u5982\u679c\u6570\u636e\u5e93\u652f\u6301\u5e76\u884c\u67e5\u8be2\uff0c\u4f18\u5316\u5668\u4f1a\u51b3\u5b9a\u662f\u5426\u4ee5\u53ca\u5982\u4f55\u5e76\u884c\u6267\u884c\u67e5\u8be2\u7684\u67d0\u4e9b\u90e8\u5206\u3002</li> </ul> </li> <li>\u4f18\u5316\u5668\u4f1a\u751f\u6210\u4e00\u4e2a\u6216\u591a\u4e2a\u5019\u9009\u6267\u884c\u8ba1\u5212\uff0c\u5e76\u6839\u636e\u6210\u672c\u4f30\u7b97\u9009\u62e9\u4e00\u4e2a\u201c\u6700\u4f18\u201d\u7684\u8ba1\u5212\u3002</li> </ul> </li> <li> <p>\u67e5\u8be2\u6267\u884c\uff08Query Execution\uff09\uff1a</p> <ul> <li>\u6267\u884c\u5f15\u64ce\uff08Execution Engine\uff09\u6839\u636e\u4f18\u5316\u5668\u751f\u6210\u7684\u6267\u884c\u8ba1\u5212\u6765\u5b9e\u9645\u64cd\u4f5c\u6570\u636e\u3002</li> <li>\u6267\u884c\u8ba1\u5212\u901a\u5e38\u662f\u4e00\u7cfb\u5217\u64cd\u4f5c\u7b26\uff08Operators\uff09\u7ec4\u6210\u7684\u6811\u72b6\u7ed3\u6784\uff0c\u5982\u8868\u626b\u63cf\u3001\u7d22\u5f15\u626b\u63cf\u3001\u8fde\u63a5\u3001\u6392\u5e8f\u3001\u805a\u5408\u3001\u8fc7\u6ee4\u7b49\u3002</li> <li>\u6267\u884c\u5f15\u64ce\u4f1a\u6309\u7167\u8ba1\u5212\u6811\u7684\u987a\u5e8f\uff08\u901a\u5e38\u662f\u4ece\u53f6\u5b50\u8282\u70b9\u5411\u6839\u8282\u70b9\uff0c\u91c7\u7528\u706b\u5c71\u6a21\u578b\u6216\u63a8\u62c9\u6a21\u578b\uff09\u8c03\u7528\u76f8\u5e94\u7684\u64cd\u4f5c\u7b26\u6765\u5904\u7406\u6570\u636e\u3002</li> <li>\u6570\u636e\u8bbf\u95ee\uff1a\u4ece\u78c1\u76d8\u8bfb\u53d6\u6570\u636e\u9875\u5230\u5185\u5b58\u7f13\u51b2\u533a\uff08Buffer Pool\uff09\uff0c\u6216\u8005\u76f4\u63a5\u4f7f\u7528\u5df2\u5728\u7f13\u51b2\u533a\u4e2d\u7684\u6570\u636e\u3002</li> <li>\u6570\u636e\u5904\u7406\uff1a\u6267\u884c\u8fc7\u6ee4\u3001\u8fde\u63a5\u3001\u6392\u5e8f\u3001\u805a\u5408\u7b49\u64cd\u4f5c\u3002</li> <li>\u4e8b\u52a1\u7ba1\u7406\uff1a\u5982\u679cSQL\u8bed\u53e5\u662f\u5728\u4e00\u4e2a\u4e8b\u52a1\u4e2d\uff0c\u6267\u884c\u8fc7\u7a0b\u4f1a\u53d7\u5230\u4e8b\u52a1\u7684ACID\u5c5e\u6027\u7ea6\u675f\uff0c\u53ef\u80fd\u6d89\u53ca\u9501\u7684\u83b7\u53d6\u4e0e\u91ca\u653e\u3001\u65e5\u5fd7\u8bb0\u5f55\u7b49\u3002</li> </ul> </li> <li> <p>\u7ed3\u679c\u8fd4\u56de\uff08Result Returning\uff09\uff1a</p> <ul> <li>\u6267\u884c\u5f15\u64ce\u5c06\u5904\u7406\u540e\u7684\u7ed3\u679c\u96c6\uff08\u901a\u5e38\u662f\u884c\u6570\u636e\uff09\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u3002</li> <li>\u6570\u636e\u53ef\u80fd\u9700\u8981\u8fdb\u884c\u683c\u5f0f\u5316\u548c\u8f6c\u6362\u3002</li> <li>\u5982\u679c\u7ed3\u679c\u96c6\u5f88\u5927\uff0c\u53ef\u80fd\u4f1a\u5206\u6279\u6b21\u8fd4\u56de\u3002</li> <li>\u8fde\u63a5\u5173\u95ed\uff1a\u67e5\u8be2\u5b8c\u6210\u540e\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u9009\u62e9\u5173\u95ed\u4e0e\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u6216\u8005\u4fdd\u6301\u8fde\u63a5\u4ee5\u6267\u884c\u540e\u7eedSQL\u3002</li> </ul> </li> </ol> <p>\u4ee5MySQL\u4e3a\u4f8b\uff0c\u5176\u5927\u81f4\u6d41\u7a0b\u4f1a\u5305\u542b\uff1a *   \u8fde\u63a5\u5668\uff1a\u8d1f\u8d23\u8fde\u63a5\u7ba1\u7406\u3001\u6743\u9650\u9a8c\u8bc1\u3002 *   \u67e5\u8be2\u7f13\u5b58\uff08MySQL 8.0\u5df2\u79fb\u9664\uff09\uff1a\u5982\u679c\u5f00\u542f\uff0c\u4f1a\u68c0\u67e5\u67e5\u8be2\u662f\u5426\u547d\u4e2d\u7f13\u5b58\u3002 *   \u5206\u6790\u5668\uff1a\u8fdb\u884c\u8bcd\u6cd5\u5206\u6790\u3001\u8bed\u6cd5\u5206\u6790\u3002 *   \u4f18\u5316\u5668\uff1a\u8fdb\u884c\u67e5\u8be2\u4f18\u5316\uff0c\u9009\u62e9\u6267\u884c\u8ba1\u5212\u3002 *   \u6267\u884c\u5668\uff1a\u8c03\u7528\u5b58\u50a8\u5f15\u64ce\u63a5\u53e3\uff0c\u6267\u884c\u67e5\u8be2\u3002 *   \u5b58\u50a8\u5f15\u64ce\uff08\u5982InnoDB, MyISAM\uff09\uff1a\u8d1f\u8d23\u6570\u636e\u7684\u5b9e\u9645\u5b58\u50a8\u548c\u63d0\u53d6\u3002</p> <p>\u4e00\u6761SQL\u67e5\u8be2\u7684\u6267\u884c\u8fc7\u7a0b\u53ef\u4ee5\u6982\u62ec\u4e3a\uff1a \u5ba2\u6237\u7aef\u8fde\u63a5\u8ba4\u8bc1 -&gt; SQL\u8bed\u53e5\u89e3\u6790\uff08\u8bcd\u6cd5\u3001\u8bed\u6cd5\u3001\u8bed\u4e49\uff09 -&gt; \u67e5\u8be2\u4f18\u5316\uff08\u903b\u8f91\u4f18\u5316\u3001\u7269\u7406\u4f18\u5316\u3001\u751f\u6210\u6267\u884c\u8ba1\u5212\uff09 -&gt; \u67e5\u8be2\u6267\u884c\uff08\u6839\u636e\u6267\u884c\u8ba1\u5212\u64cd\u4f5c\u6570\u636e\uff09 -&gt; \u7ed3\u679c\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u3002 \u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u4f18\u5316\u5668\u662f\u51b3\u5b9a\u67e5\u8be2\u6027\u80fd\u7684\u6838\u5fc3\u7ec4\u4ef6\uff0c\u5b83\u4f9d\u8d56\u4e8e\u51c6\u786e\u7684\u7edf\u8ba1\u4fe1\u606f\u548c\u9ad8\u6548\u7684\u7b97\u6cd5\u6765\u751f\u6210\u6700\u4f73\u7684\u6267\u884c\u8def\u5f84\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%B8%80%E5%BC%A0%E5%A4%A7%E8%A1%A8%E5%8A%A0%E4%B8%80%E4%B8%AA%E5%AD%97%E6%AE%B5%E9%9C%80%E8%A6%81%E8%80%83%E8%99%91%E4%BB%80%E4%B9%88/","title":"\u4e00\u5f20\u5927\u8868\u52a0\u4e00\u4e2a\u5b57\u6bb5\u9700\u8981\u8003\u8651\u4ec0\u4e48","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%B8%80%E5%BC%A0%E5%A4%A7%E8%A1%A8%E5%8A%A0%E4%B8%80%E4%B8%AA%E5%AD%97%E6%AE%B5%E9%9C%80%E8%A6%81%E8%80%83%E8%99%91%E4%BB%80%E4%B9%88/#_1","title":"\u6838\u5fc3\u98ce\u9669\uff1a\u957f\u65f6\u95f4\u9501\u8868","text":"<p>\u8fd9\u662f\u6700\u9700\u8981\u5173\u6ce8\u7684\u95ee\u9898\u3002\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c<code>ALTER TABLE ... ADD COLUMN</code>\u64cd\u4f5c\u4f1a\u8bf7\u6c42\u4e00\u4e2a\u9ad8\u7ea7\u522b\u7684\u5143\u6570\u636e\u9501\uff08Metadata Lock\uff09\uff0c\u8fd9\u4f1a\u963b\u585e\u5bf9\u8be5\u8868\u7684\u6240\u6709\u8bfb\u5199\u64cd\u4f5c\uff08DML\uff09\uff0c\u76f4\u5230\u64cd\u4f5c\u5b8c\u6210\u3002\u5bf9\u4e8e\u4e00\u5f20\u5927\u8868\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u53ef\u80fd\u6301\u7eed\u51e0\u5206\u949f\u5230\u51e0\u4e2a\u5c0f\u65f6\u4e0d\u7b49\uff0c\u8fd9\u671f\u95f4\u76f8\u5173\u7684\u4e1a\u52a1\u5c06\u5b8c\u5168\u762b\u75ea\uff0c\u8fd9\u662f\u751f\u4ea7\u73af\u5883\u7edd\u5bf9\u65e0\u6cd5\u63a5\u53d7\u7684\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%B8%80%E5%BC%A0%E5%A4%A7%E8%A1%A8%E5%8A%A0%E4%B8%80%E4%B8%AA%E5%AD%97%E6%AE%B5%E9%9C%80%E8%A6%81%E8%80%83%E8%99%91%E4%BB%80%E4%B9%88/#_2","title":"\u9700\u8981\u8003\u8651\u7684\u8be6\u7ec6\u56e0\u7d20","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%B8%80%E5%BC%A0%E5%A4%A7%E8%A1%A8%E5%8A%A0%E4%B8%80%E4%B8%AA%E5%AD%97%E6%AE%B5%E9%9C%80%E8%A6%81%E8%80%83%E8%99%91%E4%BB%80%E4%B9%88/#1","title":"1. \u6280\u672f\u4e0e\u8d44\u6e90\u5f71\u54cd","text":"<ul> <li>\u6570\u636e\u5e93\u9501\u673a\u5236\uff1a<ul> <li>\u4f60\u7684\u6570\u636e\u5e93\u7c7b\u578b\u548c\u7248\u672c\u662f\u4ec0\u4e48\uff1f\uff08\u4f8b\u5982 MySQL 5.6 vs 8.0, PostgreSQL \u7b49\uff09\u3002\u4e0d\u540c\u7248\u672c\u5bf9DDL\uff08\u6570\u636e\u5b9a\u4e49\u8bed\u8a00\uff09\u64cd\u4f5c\u7684\u5b9e\u73b0\u5728\u7ebf\u5904\u7406\u80fd\u529b\u6709\u5929\u58e4\u4e4b\u522b\u3002</li> <li>\u4f8b\u5982\uff0cMySQL 8.0 \u7684 <code>ALGORITHM=INSTANT</code> \u7279\u6027\u53ef\u4ee5\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff08\u5982\u5728\u672b\u5c3e\u6dfb\u52a0\u5217\u3001\u4e14\u65e0\u590d\u6742\u9ed8\u8ba4\u503c\uff09\u5b9e\u73b0\u77ac\u95f4\u5b8c\u6210\uff0c\u51e0\u4e4e\u4e0d\u9501\u8868\u3002\u800c\u8001\u7248\u672c\u7684MySQL\u5219\u53ef\u80fd\u9700\u8981\u9501\u5168\u8868\u5e76\u91cd\u5efa\u6570\u636e\u3002</li> </ul> </li> <li>\u6267\u884c\u65f6\u95f4\u4e0eI/O\uff1a<ul> <li>\u64cd\u4f5c\u662f\u5426\u9700\u8981\u91cd\u5efa\u8868\uff1f\u5982\u679c\u6570\u636e\u5e93\u9700\u8981\u62f7\u8d1d\u6574\u5f20\u8868\u7684\u6570\u636e\u5230\u4e00\u4e2a\u65b0\u7684\u8868\u7ed3\u6784\u4e2d\uff0c\u8fd9\u4f1a\u6d88\u8017\u5de8\u5927\u7684\u78c1\u76d8I/O\u548cCPU\u8d44\u6e90\uff0c\u5e76\u4e14\u6267\u884c\u65f6\u95f4\u4f1a\u975e\u5e38\u957f\u3002</li> <li>\u8fd9\u4e2a\u8fc7\u7a0b\u4f1a\u4ea7\u751f\u5927\u91cf\u7684\u6570\u636e\u5e93\u65e5\u5fd7\uff08\u5982MySQL\u7684binlog\uff0cPostgreSQL\u7684WAL\uff09\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u4e3b\u4ece\u590d\u5236\u5ef6\u8fdf\uff0c\u751a\u81f3\u6491\u7206\u65e5\u5fd7\u5b58\u50a8\u7a7a\u95f4\u3002</li> </ul> </li> <li>\u78c1\u76d8\u7a7a\u95f4\uff1a<ul> <li>\u5982\u679c\u64cd\u4f5c\u9700\u8981\u91cd\u5efa\u8868\uff0c\u4f60\u9700\u8981\u786e\u4fdd\u6709\u8db3\u591f\u7684\u5269\u4f59\u78c1\u76d8\u7a7a\u95f4\u6765\u5b58\u653e\u4e00\u4e2a\u8868\u7684\u5b8c\u6574\u526f\u672c\u3002\u4fdd\u5b88\u4f30\u8ba1\uff0c\u81f3\u5c11\u9700\u8981\u8868\u5927\u5c0f1.5\u500d\u7684\u7a7a\u95f2\u7a7a\u95f4\u3002</li> </ul> </li> <li>\u65b0\u5b57\u6bb5\u7684\u5c5e\u6027\uff1a<ul> <li>\u662f\u5426\u6709\u9ed8\u8ba4\u503c (DEFAULT)\uff1f\u8fd9\u662f\u4e2a\u5173\u952e\u70b9\u3002<ul> <li><code>DEFAULT NULL</code>\uff1a\u901a\u5e38\u662f\u6700\u5feb\u7684\uff0c\u5f88\u591a\u73b0\u4ee3\u6570\u636e\u5e93\u5bf9\u6b64\u6709\u4f18\u5316\uff0c\u53ea\u9700\u4fee\u6539\u5143\u6570\u636e\u3002</li> <li><code>DEFAULT '\u67d0\u4e2a\u503c'</code>\uff1a\u5728\u8001\u7248\u672c\u6570\u636e\u5e93\u4e2d\uff0c\u8fd9\u901a\u5e38\u610f\u5473\u7740\u8981\u66f4\u65b0\u8868\u4e2d\u7684\u6bcf\u4e00\u884c\u6765\u5199\u5165\u8fd9\u4e2a\u9ed8\u8ba4\u503c\uff0c\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u6162\u7684\u64cd\u4f5c\u3002\u4f46\u5728\u65b0\u7248\u672c\u6570\u636e\u5e93\u4e2d\uff08\u5982MySQL 8.0+\uff09\uff0c\u8fd9\u4e2a\u64cd\u4f5c\u4e5f\u53ef\u80fd\u901a\u8fc7\u53ea\u4fee\u6539\u5143\u6570\u636e\u7684\u65b9\u5f0f\u5b9e\u73b0\u4f18\u5316\u3002</li> </ul> </li> <li>\u5b57\u6bb5\u4f4d\u7f6e\uff1a\u5728\u8868\u7684\u672b\u5c3e\u6dfb\u52a0\u5b57\u6bb5 (<code>ADD COLUMN ...</code>) \u901a\u5e38\u6bd4\u5728\u4e2d\u95f4\u67d0\u4e2a\u4f4d\u7f6e\u6dfb\u52a0 (<code>ADD COLUMN ... AFTER some_column</code>) \u8981\u5feb\u5f97\u591a\uff0c\u56e0\u4e3a\u540e\u8005\u51e0\u4e4e\u603b\u662f\u9700\u8981\u91cd\u5efa\u8868\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%B8%80%E5%BC%A0%E5%A4%A7%E8%A1%A8%E5%8A%A0%E4%B8%80%E4%B8%AA%E5%AD%97%E6%AE%B5%E9%9C%80%E8%A6%81%E8%80%83%E8%99%91%E4%BB%80%E4%B9%88/#2","title":"2. \u4e1a\u52a1\u4e0e\u5e94\u7528\u5f71\u54cd","text":"<ul> <li>\u670d\u52a1\u53ef\u7528\u6027\uff1a<ul> <li>\u6700\u6838\u5fc3\u7684\u95ee\u9898\uff1a\u80fd\u5426\u63a5\u53d7\u4e1a\u52a1\u505c\u673a\uff1f\u505c\u673a\u7a97\u53e3\u6709\u591a\u957f\uff1f\u6839\u636e\u8fd9\u4e2a\u95ee\u9898\u7684\u7b54\u6848\uff0c\u6765\u51b3\u5b9a\u4f60\u5c06\u91c7\u7528\u7684\u7b56\u7565\u3002</li> </ul> </li> <li>\u5e94\u7528\u7a0b\u5e8f\u517c\u5bb9\u6027\uff1a<ul> <li>\u4ee3\u7801\u662f\u5426\u5df2\u7ecf\u51c6\u5907\u597d\u5904\u7406\u8fd9\u4e2a\u65b0\u5b57\u6bb5\uff1f</li> <li>ORM\u6846\u67b6\uff08\u5982JPA/Hibernate, MyBatis\uff09\u662f\u5426\u80fd\u6b63\u786e\u8bc6\u522b\u65b0\u7684\u8868\u7ed3\u6784\uff1f\u5982\u679c\u5e94\u7528\u5148\u4e8e\u6570\u636e\u5e93\u90e8\u7f72\uff0c\u53ef\u80fd\u4f1a\u56e0\u4e3a\u627e\u4e0d\u5230\u65b0\u5b57\u6bb5\u800c\u62a5\u9519\u3002\u5982\u679c\u6570\u636e\u5e93\u5148\u53d8\u66f4\uff0c\u5e94\u7528\u53ef\u80fd\u65e0\u6cd5\u5199\u5165\u65b0\u5b57\u6bb5\u3002\u9700\u8981\u534f\u8c03\u597d\u90e8\u7f72\u987a\u5e8f\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%B8%80%E5%BC%A0%E5%A4%A7%E8%A1%A8%E5%8A%A0%E4%B8%80%E4%B8%AA%E5%AD%97%E6%AE%B5%E9%9C%80%E8%A6%81%E8%80%83%E8%99%91%E4%BB%80%E4%B9%88/#3","title":"3. \u64cd\u4f5c\u4e0e\u7ef4\u62a4\u5f71\u54cd","text":"<ul> <li>\u6267\u884c\u65f6\u673a\uff1a<ul> <li>\u5fc5\u987b\u9009\u62e9\u5728\u4e1a\u52a1\u91cf\u6700\u4f4e\u7684\u201c\u7ef4\u62a4\u7a97\u53e3\u201d\u6267\u884c\uff0c\u6bd4\u5982\u51cc\u6668\u3002</li> </ul> </li> <li>\u5907\u4efd\u4e0e\u56de\u6eda\u8ba1\u5212\uff1a<ul> <li>\u5728\u6267\u884c\u4efb\u4f55\u9ad8\u5371\u64cd\u4f5c\u4e4b\u524d\uff0c\u5fc5\u987b\u786e\u4fdd\u6709\u6700\u65b0\u7684\u3001\u53ef\u7528\u7684\u5168\u91cf\u5907\u4efd\u3002</li> <li>\u5982\u679c\u64cd\u4f5c\u5931\u8d25\uff0c\u56de\u6eda\u65b9\u6848\u662f\u4ec0\u4e48\uff1fDDL\u64cd\u4f5c\u901a\u5e38\u662f\u9690\u5f0f\u63d0\u4ea4\u7684\uff0c\u4e00\u65e6\u5f00\u59cb\u5c31\u5f88\u96be\u4e2d\u65ad\uff0c\u5982\u679c\u5931\u8d25\uff0c\u56de\u6eda\u672c\u8eab\u4e5f\u53ef\u80fd\u662f\u4e00\u4e2a\u6f2b\u957f\u7684\u8fc7\u7a0b\u3002</li> </ul> </li> <li>\u76d1\u63a7\uff1a<ul> <li>\u5728\u64cd\u4f5c\u671f\u95f4\uff0c\u9700\u8981\u5bc6\u5207\u76d1\u63a7\u6570\u636e\u5e93\u7684\u5404\u9879\u6307\u6807\uff1aCPU\u3001\u5185\u5b58\u3001I/O\u3001\u9501\u7b49\u5f85\u60c5\u51b5\u3001\u4e3b\u4ece\u590d\u5236\u5ef6\u8fdf\u7b49\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%B8%80%E5%BC%A0%E5%A4%A7%E8%A1%A8%E5%8A%A0%E4%B8%80%E4%B8%AA%E5%AD%97%E6%AE%B5%E9%9C%80%E8%A6%81%E8%80%83%E8%99%91%E4%BB%80%E4%B9%88/#_3","title":"\u63a8\u8350\u7684\u6267\u884c\u7b56\u7565","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%B8%80%E5%BC%A0%E5%A4%A7%E8%A1%A8%E5%8A%A0%E4%B8%80%E4%B8%AA%E5%AD%97%E6%AE%B5%E9%9C%80%E8%A6%81%E8%80%83%E8%99%91%E4%BB%80%E4%B9%88/#alter-table","title":"\u7b56\u7565\u4e00\uff1a\u76f4\u63a5\u6267\u884c <code>ALTER TABLE</code> (\u9ad8\u98ce\u9669\uff0c\u4ec5\u7279\u5b9a\u573a\u666f\u9002\u7528)","text":"<ul> <li>\u9002\u7528\u573a\u666f\uff1a<ol> <li>\u5f00\u53d1\u6216\u6d4b\u8bd5\u73af\u5883\u3002</li> <li>\u53ef\u4ee5\u63a5\u53d7\u957f\u65f6\u95f4\u7684\u4e1a\u52a1\u505c\u673a\u3002</li> <li>\u4f60\u4f7f\u7528\u7684\u6570\u636e\u5e93\u7248\u672c\u652f\u6301\u5728\u7ebfDDL\u6216\u5373\u65f6DDL\uff08\u5982MySQL 8.0\u7684<code>ALGORITHM=INSTANT</code>\uff09\uff0c\u5e76\u4e14\u4f60\u7684\u64cd\u4f5c\u6ee1\u8db3\u5176\u6761\u4ef6\uff08\u5982\u5728\u672b\u5c3e\u52a0<code>NULL</code>\u5217\uff09\u3002</li> </ol> </li> <li>\u64cd\u4f5c\u524d\u68c0\u67e5\uff1a\u52a1\u5fc5\u5148\u5728\u6d4b\u8bd5\u73af\u5883\u6a21\u62df\uff0c\u9884\u4f30\u6267\u884c\u65f6\u95f4\u548c\u9501\u8868\u65f6\u95f4\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%B8%80%E5%BC%A0%E5%A4%A7%E8%A1%A8%E5%8A%A0%E4%B8%80%E4%B8%AA%E5%AD%97%E6%AE%B5%E9%9C%80%E8%A6%81%E8%80%83%E8%99%91%E4%BB%80%E4%B9%88/#_4","title":"\u7b56\u7565\u4e8c\uff1a\u4f7f\u7528\u5728\u7ebf\u8868\u7ed3\u6784\u53d8\u66f4\u5de5\u5177 (\u96f6\u505c\u673a\uff0c\u751f\u4ea7\u73af\u5883\u9996\u9009)","text":"<p>\u8fd9\u662f\u4e1a\u754c\u5904\u7406\u6b64\u7c7b\u95ee\u9898\u7684\u6807\u51c6\u65b9\u6848\uff0c\u539f\u7406\u7c7b\u4f3c\u201c\u5077\u5929\u6362\u65e5\u201d\u3002</p> <ul> <li>\u5e38\u7528\u5de5\u5177\uff1a<ul> <li><code>pt-online-schema-change</code> (Percona Toolkit\u4e2d\u7684\u5de5\u5177\uff0c\u9002\u7528\u4e8eMySQL)</li> <li><code>gh-ost</code> (GitHub\u5f00\u6e90\u7684\u5de5\u5177\uff0c\u9002\u7528\u4e8eMySQL)</li> </ul> </li> <li>\u5de5\u4f5c\u539f\u7406\u7b80\u8ff0\uff1a<ol> <li>\u521b\u5efa\u4e00\u4e2a\u4e0e\u539f\u8868\u7ed3\u6784\u76f8\u540c\u7684\u65b0\u8868\uff08\u201c\u5e7d\u7075\u8868\u201d\uff09\u3002</li> <li>\u5728\u5e7d\u7075\u8868\u4e0a\u6267\u884c<code>ALTER TABLE</code>\u547d\u4ee4\uff0c\u52a0\u4e0a\u65b0\u5b57\u6bb5\u3002</li> <li>\u5728\u539f\u8868\u4e0a\u521b\u5efa\u89e6\u53d1\u5668\uff08INSERT, UPDATE, DELETE\uff09\u3002</li> <li>\u5f00\u59cb\u5c06\u539f\u8868\u7684\u6570\u636e\u5206\u5757\uff08chunk by chunk\uff09\u5730\u62f7\u8d1d\u5230\u5e7d\u7075\u8868\u3002</li> <li>\u5728\u62f7\u8d1d\u671f\u95f4\uff0c\u539f\u8868\u4e0a\u53d1\u751f\u7684\u6570\u636e\u53d8\u66f4\u4f1a\u901a\u8fc7\u89e6\u53d1\u5668\u5b9e\u65f6\u540c\u6b65\u5230\u5e7d\u7075\u8868\u3002</li> <li>\u5f53\u6570\u636e\u62f7\u8d1d\u5b8c\u6210\u4e14\u8ffd\u5e73\u589e\u91cf\u540e\uff0c\u8fdb\u884c\u4e00\u4e2a\u539f\u5b50\u6027\u7684<code>RENAME TABLE</code>\u64cd\u4f5c\uff0c\u5c06\u539f\u8868\u548c\u5e7d\u7075\u8868\u7684\u540d\u5b57\u5bf9\u8c03\u3002</li> <li>\u6700\u540e\u5220\u9664\u65e7\u7684\u539f\u8868\u548c\u89e6\u53d1\u5668\u3002</li> </ol> </li> <li>\u4f18\u70b9\uff1a\u6574\u4e2a\u8fc7\u7a0b\u9664\u4e86\u6700\u540e<code>RENAME</code>\u7684\u77ac\u95f4\uff08\u901a\u5e38\u662f\u79d2\u7ea7\uff09\u4f1a\u6709\u77ed\u6682\u7684\u9501\uff0c\u5176\u4ed6\u65f6\u95f4\u5bf9\u5e94\u7528\u7684\u8bfb\u5199\u64cd\u4f5c\u51e0\u4e4e\u6ca1\u6709\u5f71\u54cd\uff0c\u5b9e\u73b0\u4e86\u201c\u5728\u7ebf\u201d\u53d8\u66f4\u3002</li> <li>\u7f3a\u70b9\uff1a\u6d41\u7a0b\u66f4\u590d\u6742\uff0c\u5bf9\u6570\u636e\u5e93\u4f1a\u4ea7\u751f\u989d\u5916\u7684\u8d1f\u8f7d\uff08\u6570\u636e\u62f7\u8d1d\u548c\u89e6\u53d1\u5668\uff09\uff0c\u9700\u8981\u989d\u5916\u7684\u78c1\u76d8\u7a7a\u95f4\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%B8%A4%E6%AE%B5%E9%94%81%E5%8D%8F%E8%AE%AE/","title":"\u4e24\u6bb5\u9501\u534f\u8bae","text":"<p>\u5728\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf\u4e2d\uff0c\u4e3a\u786e\u4fdd\u591a\u7528\u6237\u5e76\u53d1\u8bbf\u95ee\u65f6\u6570\u636e\u7684\u4e00\u81f4\u6027\u3001\u5b8c\u6574\u6027\u548c\u4e8b\u52a1\u7684\u9694\u79bb\u6027\uff0c\u4e24\u9636\u6bb5\u9501\u534f\u8bae\uff08Two-Phase Locking, 2PL\uff09\u626e\u6f14\u7740\u81f3\u5173\u91cd\u8981\u7684\u89d2\u8272\u3002\u8be5\u534f\u8bae\u901a\u8fc7\u4e25\u683c\u7684\u5e76\u53d1\u63a7\u5236\uff0c\u6709\u6548\u907f\u514d\u4e86\u810f\u8bfb\u3001\u4e0d\u53ef\u91cd\u590d\u8bfb\u548c\u5e7b\u8bfb\u7b49\u95ee\u9898\uff0c\u662f\u8bb8\u591a\u5173\u7cfb\u578b\u6570\u636e\u5e93\u5b9e\u73b0\u4e8b\u52a1\u7ba1\u7406\u7684\u57fa\u7840\u3002</p> <p>\u4e24\u9636\u6bb5\u9501\u534f\u8bae\u7684\u6838\u5fc3\u601d\u60f3\u5728\u4e8e\u5c06\u4e8b\u52a1\u7684\u6267\u884c\u8fc7\u7a0b\u5212\u5206\u4e3a\u4e24\u4e2a\u660e\u786e\u7684\u9636\u6bb5\uff1a\u9501\u5b9a\uff08\u6269\u5c55\uff09\u9636\u6bb5\u548c\u89e3\u9501\uff08\u6536\u7f29\uff09\u9636\u6bb5\u3002</p> <ul> <li>\u9501\u5b9a\u9636\u6bb5\uff08Growing/Expanding Phase\uff09\uff1a\u5728\u6b64\u9636\u6bb5\uff0c\u4e8b\u52a1\u53ef\u4ee5\u6839\u636e\u9700\u8981\u83b7\u53d6\u5176\u64cd\u4f5c\u6240\u9700\u6570\u636e\u9879\u7684\u9501\uff0c\u4f46\u4e0d\u80fd\u91ca\u653e\u4efb\u4f55\u5df2\u7ecf\u6301\u6709\u7684\u9501\u3002</li> <li>\u89e3\u9501\u9636\u6bb5\uff08Shrinking/Contracting Phase\uff09\uff1a\u4e00\u65e6\u4e8b\u52a1\u91ca\u653e\u4e86\u7b2c\u4e00\u4e2a\u9501\uff0c\u5b83\u5c31\u8fdb\u5165\u4e86\u89e3\u9501\u9636\u6bb5\u3002\u5728\u6b64\u9636\u6bb5\uff0c\u4e8b\u52a1\u53ea\u80fd\u91ca\u653e\u9501\uff0c\u4e0d\u80fd\u518d\u7533\u8bf7\u4efb\u4f55\u65b0\u7684\u9501\u3002</li> </ul> <p>\u8fd9\u79cd\u4e25\u683c\u7684\u9501\u5b9a\u548c\u89e3\u9501\u987a\u5e8f\uff0c\u786e\u4fdd\u4e86\u4e8b\u52a1\u7684\u53ef\u4e32\u884c\u5316\u6267\u884c\uff0c\u4ece\u800c\u907f\u514d\u4e86\u5e76\u53d1\u64cd\u4f5c\u53ef\u80fd\u5bfc\u81f4\u7684\u6570\u636e\u51b2\u7a81\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%B8%A4%E6%AE%B5%E9%94%81%E5%8D%8F%E8%AE%AE/#_1","title":"\u4e3a\u4f55\u9700\u8981\u4e24\u9636\u6bb5\u9501\uff1f","text":"<p>\u5728\u9ad8\u5e76\u53d1\u73af\u5883\u4e0b\uff0c\u591a\u4e2a\u4e8b\u52a1\u540c\u65f6\u5bf9\u6570\u636e\u5e93\u8fdb\u884c\u8bfb\u5199\u64cd\u4f5c\uff0c\u82e5\u65e0\u6709\u6548\u7684\u63a7\u5236\u673a\u5236\uff0c\u6781\u6613\u5f15\u53d1\u6570\u636e\u4e0d\u4e00\u81f4\u7684\u95ee\u9898\u3002\u4e24\u9636\u6bb5\u9501\u534f\u8bae\u4e3b\u8981\u89e3\u51b3\u4e86\u4ee5\u4e0b\u51e0\u4e2a\u6838\u5fc3\u95ee\u9898\uff1a</p> <ol> <li> <p>\u786e\u4fdd\u6570\u636e\u4e00\u81f4\u6027\uff1a\u6570\u636e\u4e00\u81f4\u6027\u662f\u6570\u636e\u5e93\u7cfb\u7edf\u7684\u57fa\u77f3\u3002 \u4e24\u9636\u6bb5\u9501\u901a\u8fc7\u5728\u4e8b\u52a1\u7684\u6574\u4e2a\u6267\u884c\u671f\u95f4\u6301\u6709\u5fc5\u8981\u7684\u9501\uff0c\u786e\u4fdd\u5728\u540c\u4e00\u65f6\u95f4\u5185\u53ea\u6709\u4e00\u4e2a\u4e8b\u52a1\u80fd\u591f\u4fee\u6539\u7279\u5b9a\u7684\u6570\u636e\uff0c\u4ece\u800c\u907f\u514d\u4e86\u56e0\u5e76\u53d1\u4fee\u6539\u5bfc\u81f4\u7684\u6570\u636e\u4e0d\u4e00\u81f4\u95ee\u9898\u3002 \u8fd9\u5bf9\u4e8e\u91d1\u878d\u4ea4\u6613\u3001\u5e93\u5b58\u7ba1\u7406\u7b49\u5bf9\u6570\u636e\u51c6\u786e\u6027\u8981\u6c42\u6781\u9ad8\u7684\u573a\u666f\u81f3\u5173\u91cd\u8981\u3002</p> </li> <li> <p>\u63d0\u5347\u4e8b\u52a1\u7684\u9694\u79bb\u6027\uff1a\u4e8b\u52a1\u9694\u79bb\u662f\u6570\u636e\u5e93ACID\uff08\u539f\u5b50\u6027\u3001\u4e00\u81f4\u6027\u3001\u9694\u79bb\u6027\u3001\u6301\u4e45\u6027\uff09\u7279\u6027\u4e4b\u4e00\u3002\u4e24\u9636\u6bb5\u9501\u901a\u8fc7\u9501\u5b9a\u4e8b\u52a1\u6240\u64cd\u4f5c\u7684\u6570\u636e\uff0c\u786e\u4fdd\u6bcf\u4e2a\u4e8b\u52a1\u7684\u6267\u884c\u90fd\u72ec\u7acb\u4e8e\u5176\u4ed6\u5e76\u53d1\u4e8b\u52a1\uff0c\u4eff\u4f5b\u5b83\u4eec\u662f\u4e32\u884c\u6267\u884c\u7684\u4e00\u6837\uff0c\u4ece\u800c\u663e\u8457\u63d0\u5347\u4e86\u4e8b\u52a1\u7684\u9694\u79bb\u6027\u3002</p> </li> <li> <p>\u63d0\u9ad8\u5e76\u53d1\u63a7\u5236\u6548\u7387\uff1a\u5728\u9ad8\u5e76\u53d1\u573a\u666f\u4e0b\uff0c\u9ad8\u6548\u7684\u5e76\u53d1\u63a7\u5236\u662f\u7cfb\u7edf\u7a33\u5b9a\u8fd0\u884c\u7684\u4fdd\u969c\u3002 \u4e24\u9636\u6bb5\u9501\u901a\u8fc7\u5728\u9501\u5b9a\u9636\u6bb5\u4e00\u6b21\u6027\u6216\u9010\u6b65\u83b7\u53d6\u6240\u6709\u9700\u8981\u7684\u9501\uff0c\u51cf\u5c11\u4e86\u4e8b\u52a1\u6267\u884c\u8fc7\u7a0b\u4e2d\u9891\u7e41\u8bf7\u6c42\u9501\u7684\u6b21\u6570\uff0c\u4ece\u800c\u5728\u4fdd\u8bc1\u6570\u636e\u5b89\u5168\u7684\u540c\u65f6\uff0c\u63d0\u9ad8\u4e86\u7cfb\u7edf\u7684\u6574\u4f53\u6027\u80fd\u548c\u541e\u5410\u91cf\u3002</p> </li> <li> <p>\u907f\u514d\u6b7b\u9501\uff1a\u867d\u7136\u4e24\u9636\u6bb5\u9501\u672c\u8eab\u4e5f\u53ef\u80fd\u5bfc\u81f4\u6b7b\u9501\uff08\u5f53\u4e24\u4e2a\u6216\u591a\u4e2a\u4e8b\u52a1\u76f8\u4e92\u7b49\u5f85\u5bf9\u65b9\u91ca\u653e\u9501\u65f6\uff09\uff0c\u4f46\u5176\u8bbe\u8ba1\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u6709\u52a9\u4e8e\u51cf\u5c11\u6b7b\u9501\u7684\u53d1\u751f\u3002 \u4f8b\u5982\uff0c\u901a\u8fc7\u5728\u9501\u5b9a\u9636\u6bb5\u4e00\u6b21\u6027\u83b7\u53d6\u6240\u6709\u9501\u7684\u7b56\u7565\uff08\u4fdd\u5b88\u578b2PL\uff09\uff0c\u53ef\u4ee5\u5b8c\u5168\u907f\u514d\u6b7b\u9501\u3002 \u540c\u65f6\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u901a\u5e38\u4f1a\u914d\u5907\u6b7b\u9501\u68c0\u6d4b\u548c\u5904\u7406\u673a\u5236\u6765\u5e94\u5bf9\u53ef\u80fd\u51fa\u73b0\u7684\u6b7b\u9501\u60c5\u51b5\u3002</p> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%B8%A4%E6%AE%B5%E9%94%81%E5%8D%8F%E8%AE%AE/#_2","title":"\u4e24\u9636\u6bb5\u9501\u7684\u5b9e\u73b0\u673a\u5236\u4e0e\u7c7b\u578b","text":"<p>\u4e24\u9636\u6bb5\u9501\u7684\u5b9e\u73b0\u6d89\u53ca\u9501\u7684\u7c7b\u578b\u3001\u7ba1\u7406\u53ca\u83b7\u53d6\u4e0e\u91ca\u653e\u7b56\u7565\u3002</p> <ul> <li>\u9501\u7684\u7c7b\u578b\uff1a\u4e3b\u8981\u5206\u4e3a\u5171\u4eab\u9501\uff08Shared Lock, S\u9501\uff09\u548c\u6392\u4ed6\u9501\uff08Exclusive Lock, X\u9501\uff09\u3002\u5171\u4eab\u9501\u5141\u8bb8\u591a\u4e2a\u4e8b\u52a1\u540c\u65f6\u8bfb\u53d6\u540c\u4e00\u6570\u636e\uff0c\u4f46\u4e0d\u80fd\u4fee\u6539\uff1b\u800c\u6392\u4ed6\u9501\u5219\u72ec\u5360\u6570\u636e\uff0c\u65e2\u53ef\u8bfb\u4e5f\u53ef\u5199\uff0c\u7981\u6b62\u5176\u4ed6\u4efb\u4f55\u4e8b\u52a1\u8bbf\u95ee\u3002</li> <li>\u9501\u7684\u7ba1\u7406\uff1a\u6570\u636e\u5e93\u7cfb\u7edf\u901a\u5e38\u4f7f\u7528\u9501\u8868\u6765\u8bb0\u5f55\u548c\u7ba1\u7406\u6240\u6709\u9501\u7684\u72b6\u6001\uff0c\u5305\u62ec\u9501\u7684\u7c7b\u578b\u3001\u6301\u6709\u8005\u4ee5\u53ca\u6b63\u5728\u7b49\u5f85\u8be5\u9501\u7684\u4e8b\u52a1\u7b49\u4fe1\u606f\u3002</li> <li>\u9501\u7684\u8f6c\u6362\uff1a\u5728\u9501\u5b9a\u9636\u6bb5\uff0c\u4e8b\u52a1\u53ef\u4ee5\u5c06\u6301\u6709\u7684\u5171\u4eab\u9501\u5347\u7ea7\u4e3a\u6392\u4ed6\u9501\uff08\u4f8b\u5982\uff0c\u5148\u8bfb\u53d6\u540e\u4fee\u6539\u6570\u636e\uff09\uff0c\u4f46\u4e0d\u80fd\u5c06\u6392\u4ed6\u9501\u964d\u7ea7\u4e3a\u5171\u4eab\u9501\u3002</li> </ul> <p>\u6839\u636e\u5bf9\u52a0\u9501\u548c\u89e3\u9501\u65f6\u95f4\u70b9\u7684\u4e0d\u540c\u9650\u5236\uff0c\u4e24\u9636\u6bb5\u9501\u534f\u8bae\u53ef\u4ee5\u5206\u4e3a\u4ee5\u4e0b\u51e0\u79cd\u4e3b\u8981\u7c7b\u578b\uff1a</p> <ul> <li>\u57fa\u672c\u4e24\u9636\u6bb5\u9501\uff08Basic 2PL\uff09\uff1a\u4e25\u683c\u9075\u5b88\u9501\u5b9a\u548c\u89e3\u9501\u4e24\u4e2a\u9636\u6bb5\u3002\u5b83\u80fd\u4fdd\u8bc1\u51b2\u7a81\u53ef\u4e32\u884c\u5316\uff0c\u4f46\u65e0\u6cd5\u907f\u514d\u7ea7\u8054\u56de\u6eda\uff08\u4e00\u4e2a\u4e8b\u52a1\u56de\u6eda\u5bfc\u81f4\u5176\u4ed6\u4f9d\u8d56\u4e8e\u5176\u672a\u63d0\u4ea4\u7ed3\u679c\u7684\u4e8b\u52a1\u4e5f\u5fc5\u987b\u56de\u6eda\uff09\u3002</li> <li>\u4e25\u683c\u4e24\u9636\u6bb5\u9501\uff08Strict 2PL\uff09\uff1a\u8981\u6c42\u4e8b\u52a1\u6301\u6709\u7684\u6240\u6709\u6392\u4ed6\u9501\u5fc5\u987b\u5230\u4e8b\u52a1\u63d0\u4ea4\u6216\u4e2d\u6b62\u540e\u624d\u80fd\u91ca\u653e\u3002 \u8fd9\u79cd\u65b9\u5f0f\u53ef\u4ee5\u907f\u514d\u7ea7\u8054\u56de\u6eda\uff0c\u56e0\u4e3a\u5176\u4ed6\u4e8b\u52a1\u65e0\u6cd5\u8bfb\u53d6\u5230\u5f53\u524d\u4e8b\u52a1\u672a\u63d0\u4ea4\u7684\u4fee\u6539\u3002</li> <li>\u5f3a\u4e24\u9636\u6bb5\u9501\uff08Rigorous 2PL\uff09\uff1a\u6bd4\u4e25\u683c2PL\u66f4\u4e3a\u4e25\u683c\uff0c\u8981\u6c42\u4e8b\u52a1\u6301\u6709\u7684\u6240\u6709\u9501\uff08\u5305\u62ec\u5171\u4eab\u9501\u548c\u6392\u4ed6\u9501\uff09\u90fd\u5fc5\u987b\u5230\u4e8b\u52a1\u63d0\u4ea4\u6216\u4e2d\u6b62\u540e\u624d\u80fd\u91ca\u653e\u3002 \u8fd9\u63d0\u4f9b\u4e86\u66f4\u5f3a\u7684\u9694\u79bb\u4fdd\u8bc1\uff0c\u5b9e\u73b0\u4e5f\u76f8\u5bf9\u7b80\u5355\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%B8%A4%E6%AE%B5%E9%94%81%E5%8D%8F%E8%AE%AE/#_3","title":"\u6027\u80fd\u4f18\u5316\u4e0e\u5c40\u9650\u6027","text":"<p>\u5c3d\u7ba1\u4e24\u9636\u6bb5\u9501\u662f\u4fdd\u8bc1\u6570\u636e\u4e00\u81f4\u6027\u7684\u6709\u6548\u624b\u6bb5\uff0c\u4f46\u4e5f\u5b58\u5728\u6f5c\u5728\u7684\u6027\u80fd\u95ee\u9898\uff0c\u5c24\u5176\u662f\u5728\u9ad8\u5e76\u53d1\u73af\u5883\u4e0b\u3002</p> <p>\u6027\u80fd\u4f18\u5316\u7b56\u7565\u5305\u62ec\uff1a</p> <ul> <li>\u9501\u7684\u7c92\u5ea6\u63a7\u5236\uff1a\u9501\u7684\u7c92\u5ea6\uff08\u5982\u8868\u7ea7\u9501\u3001\u9875\u7ea7\u9501\u3001\u884c\u7ea7\u9501\uff09\u5bf9\u7cfb\u7edf\u5e76\u53d1\u6027\u5f71\u54cd\u5de8\u5927\u3002\u9501\u7684\u7c92\u5ea6\u8d8a\u5c0f\uff0c\u5e76\u53d1\u5ea6\u8d8a\u9ad8\uff0c\u4f46\u9501\u7ba1\u7406\u7684\u5f00\u9500\u4e5f\u8d8a\u5927\u3002\u53cd\u4e4b\u4ea6\u7136\u3002\u6839\u636e\u5e94\u7528\u573a\u666f\u9009\u62e9\u5408\u9002\u7684\u9501\u7c92\u5ea6\u662f\u6027\u80fd\u4f18\u5316\u7684\u5173\u952e\u3002</li> <li>\u9501\u7684\u5347\u7ea7\u4e0e\u964d\u7ea7\uff1a\u7cfb\u7edf\u53ef\u4ee5\u6839\u636e\u60c5\u51b5\u5c06\u591a\u4e2a\u4f4e\u7c92\u5ea6\u7684\u9501\uff08\u5982\u591a\u4e2a\u884c\u9501\uff09\u5408\u5e76\u4e3a\u4e00\u4e2a\u9ad8\u7c92\u5ea6\u7684\u9501\uff08\u5982\u9875\u9501\u6216\u8868\u9501\uff09\uff0c\u4ee5\u51cf\u5c11\u9501\u7ba1\u7406\u7684\u5f00\u9500\u3002</li> <li>\u6b7b\u9501\u68c0\u6d4b\u4e0e\u5904\u7406\uff1a\u6570\u636e\u5e93\u7cfb\u7edf\u4f1a\u5b9a\u671f\u8fd0\u884c\u6b7b\u9501\u68c0\u6d4b\u7b97\u6cd5\uff08\u5982\u6784\u5efa\u4e8b\u52a1\u7b49\u5f85\u56fe\uff09\uff0c\u4e00\u65e6\u53d1\u73b0\u6b7b\u9501\uff0c\u4f1a\u9009\u62e9\u4e00\u4e2a\u6216\u591a\u4e2a\u4e8b\u52a1\u8fdb\u884c\u56de\u6eda\uff0c\u4ee5\u6253\u7834\u5faa\u73af\u7b49\u5f85\u3002</li> </ul> <p>\u4e24\u9636\u6bb5\u9501\u7684\u4e3b\u8981\u5c40\u9650\u6027\uff1a</p> <ul> <li>\u53ef\u80fd\u5f15\u53d1\u6b7b\u9501\uff1a\u8fd9\u662f2PL\u6700\u4e3b\u8981\u7684\u95ee\u9898\u4e4b\u4e00\u3002</li> <li>\u6027\u80fd\u5f00\u9500\uff1a\u9501\u7684\u83b7\u53d6\u3001\u91ca\u653e\u548c\u7ba1\u7406\u4f1a\u6d88\u8017\u7cfb\u7edf\u8d44\u6e90\u3002\u5728\u9ad8\u5e76\u53d1\u4e0b\uff0c\u957f\u65f6\u95f4\u7684\u9501\u7b49\u5f85\u53ef\u80fd\u6210\u4e3a\u7cfb\u7edf\u74f6\u9888\uff0c\u964d\u4f4e\u5e76\u53d1\u6027\u80fd\u3002</li> </ul> <p>\u4e3a\u4e86\u514b\u670d\u8fd9\u4e9b\u5c40\u9650\u6027\uff0c\u73b0\u4ee3\u6570\u636e\u5e93\u7cfb\u7edf\u5e38\u5e38\u5c06\u4e24\u9636\u6bb5\u9501\u4e0e\u5176\u4ed6\u5e76\u53d1\u63a7\u5236\u673a\u5236\u7ed3\u5408\u4f7f\u7528\uff0c\u4f8b\u5982\u591a\u7248\u672c\u5e76\u53d1\u63a7\u5236\uff08MVCC\uff09\u3002 MVCC\u901a\u8fc7\u4e3a\u6570\u636e\u7ef4\u62a4\u591a\u4e2a\u7248\u672c\uff0c\u4f7f\u5f97\u8bfb\u64cd\u4f5c\u901a\u5e38\u4e0d\u9700\u8981\u52a0\u9501\uff0c\u4ece\u800c\u5b9e\u73b0\u4e86\u8bfb\u5199\u64cd\u4f5c\u7684\u975e\u963b\u585e\uff0c\u6781\u5927\u5730\u63d0\u9ad8\u4e86\u5e76\u53d1\u6027\u80fd\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%B8%BA%E4%BB%80%E4%B9%88%20MySQL%20%E9%87%87%E7%94%A8%20B%2B%20%E6%A0%91%E4%BD%9C%E4%B8%BA%E7%B4%A2%E5%BC%95/","title":"\u4e3a\u4ec0\u4e48 MySQL \u91c7\u7528 B+ \u6811\u4f5c\u4e3a\u7d22\u5f15","text":"<p>MySQL \u7684\u6570\u636e\u6301\u4e45\u5316\u5b58\u50a8\u5728\u78c1\u76d8\u4e0a\u3002\u78c1\u76d8\u662f\u4e00\u79cd\u6162\u901f\u5b58\u50a8\u8bbe\u5907\uff0c\u5176\u8bbf\u95ee\u901f\u5ea6\u4ee5\u6beb\u79d2\u8ba1\uff0c\u8fdc\u6162\u4e8e\u7eb3\u79d2\u7ea7\u7684\u5185\u5b58\u8bbf\u95ee\u3002\u6570\u636e\u5e93\u64cd\u4f5c\u4e2d\uff0c\u901a\u8fc7\u7d22\u5f15\u67e5\u627e\u6570\u636e\u9700\u8981\u5148\u4ece\u78c1\u76d8\u8bfb\u53d6\u7d22\u5f15\u5230\u5185\u5b58\uff0c\u518d\u6839\u636e\u7d22\u5f15\u627e\u5230\u6570\u636e\u884c\u5e76\u8bfb\u5165\u5185\u5b58\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u6d89\u53ca\u591a\u6b21\u78c1\u76d8 I/O\u3002\u56e0\u6b64\uff0c\u4e00\u4e2a\u4f18\u79c0\u7684\u7d22\u5f15\u6570\u636e\u7ed3\u6784\uff0c\u5176\u6838\u5fc3\u76ee\u6807\u662f\u5c3d\u53ef\u80fd\u51cf\u5c11\u67e5\u8be2\u8fc7\u7a0b\u4e2d\u7684\u78c1\u76d8 I/O \u6b21\u6570\u3002</p> <p>\u5bf9\u7d22\u5f15\u6570\u636e\u7ed3\u6784\u7684\u8981\u6c42\uff1a 1.  \u67e5\u8be2\u65f6\uff0c\u78c1\u76d8 I/O \u64cd\u4f5c\u6b21\u6570\u8981\u5c3d\u53ef\u80fd\u5c11\u3002 2.  \u80fd\u9ad8\u6548\u5730\u652f\u6301\u5355\u70b9\u67e5\u8be2\u548c\u8303\u56f4\u67e5\u8be2\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%B8%BA%E4%BB%80%E4%B9%88%20MySQL%20%E9%87%87%E7%94%A8%20B%2B%20%E6%A0%91%E4%BD%9C%E4%B8%BA%E7%B4%A2%E5%BC%95/#_1","title":"\u6570\u636e\u7ed3\u6784\u7684\u6f14\u8fdb","text":"<ol> <li> <p>\u4e8c\u5206\u67e5\u627e\u4e0e\u6570\u7ec4</p> <ul> <li>\u4f18\u70b9\uff1a\u5bf9\u4e8e\u6709\u5e8f\u6570\u7ec4\uff0c\u4e8c\u5206\u67e5\u627e\u6cd5\u6548\u7387\u5f88\u9ad8\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(logn)\u3002</li> <li>\u7f3a\u70b9\uff1a\u6570\u7ec4\u662f\u7ebf\u6027\u7ed3\u6784\uff0c\u63d2\u5165\u548c\u5220\u9664\u5143\u7d20\u65f6\uff0c\u9700\u8981\u79fb\u52a8\u5927\u91cf\u540e\u7eed\u5143\u7d20\uff0c\u8fd9\u4e2a\u5f00\u9500\u5728\u78c1\u76d8\u4e0a\u662f\u65e0\u6cd5\u63a5\u53d7\u7684\u3002</li> </ul> </li> <li> <p>\u4e8c\u53c9\u67e5\u627e\u6811 (Binary Search Tree)</p> <ul> <li>\u4f18\u70b9\uff1a\u5b83\u662f\u4e00\u79cd\u5929\u7136\u7684\u4e8c\u5206\u7ed3\u6784\uff0c\u89e3\u51b3\u4e86\u6570\u7ec4\u63d2\u5165\u548c\u5220\u9664\u56f0\u96be\u7684\u95ee\u9898\u3002\u67e5\u8be2\u65f6\uff0c\u901a\u8fc7\u6bd4\u8f83\u8282\u70b9\u503c\u51b3\u5b9a\u5411\u5de6\u6216\u5411\u53f3\u5b50\u6811\u67e5\u627e\uff0c\u65e0\u9700\u8ba1\u7b97\u4e2d\u95f4\u4f4d\u7f6e\u3002</li> <li>\u7f3a\u70b9\uff1a\u5b58\u5728\u6781\u7aef\u60c5\u51b5\u3002\u5982\u679c\u63d2\u5165\u7684\u5143\u7d20\u603b\u662f\u6709\u5e8f\u7684\uff08\u4f8b\u5982\uff0c\u603b\u662f\u63d2\u5165\u6700\u5927\u503c\uff09\uff0c\u4e8c\u53c9\u67e5\u627e\u6811\u4f1a\u9000\u5316\u6210\u4e00\u4e2a\u94fe\u8868\u3002\u6b64\u65f6\uff0c\u67e5\u8be2\u65f6\u95f4\u590d\u6742\u5ea6\u4ece O(logn) \u4e0b\u964d\u5230 O(n)\uff0c\u6811\u7684\u9ad8\u5ea6\u968f\u4e4b\u589e\u52a0\uff0c\u5bfc\u81f4\u78c1\u76d8 I/O \u6b21\u6570\u589e\u591a\uff0c\u6027\u80fd\u4e25\u91cd\u4e0b\u964d\u3002</li> </ul> </li> <li> <p>\u81ea\u5e73\u8861\u4e8c\u53c9\u6811 (Self-Balancing Binary Search Tree, \u5982 AVL \u6811\u3001\u7ea2\u9ed1\u6811)</p> <ul> <li>\u4f18\u70b9\uff1a\u901a\u8fc7\u7279\u5b9a\u7684\u7ea6\u675f\u6761\u4ef6\uff08\u5982 AVL \u6811\u4e2d\u4efb\u610f\u8282\u70b9\u7684\u5de6\u53f3\u5b50\u6811\u9ad8\u5ea6\u5dee\u4e0d\u8d85\u8fc71\uff09\u6765\u7ef4\u6301\u6811\u7684\u5e73\u8861\uff0c\u907f\u514d\u4e86\u9000\u5316\u6210\u94fe\u8868\u7684\u60c5\u51b5\uff0c\u786e\u4fdd\u67e5\u8be2\u65f6\u95f4\u590d\u6742\u5ea6\u7a33\u5b9a\u5728 O(logn)\u3002</li> <li>\u7f3a\u70b9\uff1a\u672c\u8d28\u4e0a\u4ecd\u7136\u662f\u4e8c\u53c9\u6811\uff0c\u6bcf\u4e2a\u8282\u70b9\u6700\u591a\u53ea\u6709\u4e24\u4e2a\u5b50\u8282\u70b9\u3002\u5f53\u6570\u636e\u91cf\u975e\u5e38\u5927\u65f6\uff0c\u6811\u7684\u9ad8\u5ea6\u4f9d\u7136\u4f1a\u5f88\u9ad8\u3002\u6811\u7684\u9ad8\u5ea6\u76f4\u63a5\u5173\u7cfb\u5230\u78c1\u76d8 I/O \u7684\u6b21\u6570\uff08\u5047\u8bbe\u6bcf\u4e2a\u8282\u70b9\u5bf9\u5e94\u4e00\u6b21 I/O\uff09\uff0c\u56e0\u6b64\u9ad8\u8038\u7684\u6811\u4f1a\u5f71\u54cd\u67e5\u8be2\u6548\u7387\u3002</li> </ul> </li> <li> <p>B \u6811 (B-Tree)</p> <ul> <li>\u4e3a\u4e86\u964d\u4f4e\u6811\u7684\u9ad8\u5ea6\uff0cB \u6811\u88ab\u63d0\u4e86\u51fa\u6765\u3002\u5b83\u662f\u4e00\u4e2a\u591a\u53c9\u6811\uff0c\u5141\u8bb8\u6bcf\u4e2a\u8282\u70b9\u62e5\u6709\u8d85\u8fc7\u4e24\u4e2a\u5b50\u8282\u70b9\uff08M &gt; 2\uff09\uff0cM \u79f0\u4e3a B \u6811\u7684\u9636\u3002</li> <li>\u7279\u70b9\uff1a\u8282\u70b9\u53ef\u4ee5\u5b58\u50a8\u591a\u4e2a\u7d22\u5f15\u503c\u548c\u591a\u4e2a\u5b50\u8282\u70b9\u6307\u9488\u3002\u8fd9\u4f7f\u5f97\u6811\u53d8\u5f97\u201c\u77ee\u80d6\u201d\uff0c\u6781\u5927\u5730\u964d\u4f4e\u4e86\u6811\u7684\u9ad8\u5ea6\u3002</li> <li>\u67e5\u8be2\u8fc7\u7a0b\uff1a\u4ece\u6839\u8282\u70b9\u5f00\u59cb\uff0c\u6bd4\u8f83\u7d22\u5f15\u503c\uff0c\u7136\u540e\u987a\u7740\u5bf9\u5e94\u7684\u5b50\u8282\u70b9\u6307\u9488\u5411\u4e0b\u67e5\u627e\u3002</li> <li>\u7f3a\u70b9\uff1a<ul> <li>\u6bcf\u4e2a\u8282\u70b9\u90fd\u540c\u65f6\u5b58\u50a8\u7d22\u5f15\u952e\u548c\u6570\u636e\u8bb0\u5f55\u3002\u5982\u679c\u6570\u636e\u8bb0\u5f55\u672c\u8eab\u5f88\u5927\uff0c\u4f1a\u5bfc\u81f4\u4e00\u4e2a\u8282\u70b9\uff08\u5373\u4e00\u4e2a\u78c1\u76d8\u9875\uff09\u5185\u80fd\u5b58\u50a8\u7684\u7d22\u5f15\u952e\u6570\u91cf\u53d8\u5c11\uff0c\u4ece\u800c\u95f4\u63a5\u589e\u52a0\u4e86\u6811\u7684\u9ad8\u5ea6\u3002</li> <li>\u5728\u67e5\u8be2\u8fc7\u7a0b\u4e2d\uff0c\u4f1a\u52a0\u8f7d\u8bb8\u591a\u975e\u76ee\u6807\u8282\u70b9\u7684\u65e0\u7528\u6570\u636e\u8bb0\u5f55\u5230\u5185\u5b58\u4e2d\uff0c\u5360\u7528\u4e86\u8d44\u6e90\u3002</li> <li>\u8303\u56f4\u67e5\u8be2\u6548\u7387\u4f4e\u3002B \u6811\u8fdb\u884c\u8303\u56f4\u67e5\u8be2\u9700\u8981\u8fdb\u884c\u4e2d\u5e8f\u904d\u5386\uff0c\u53ef\u80fd\u6d89\u53ca\u591a\u4e2a\u4e0d\u76f8\u90bb\u8282\u70b9\u7684\u78c1\u76d8 I/O\uff0c\u6548\u7387\u4e0d\u9ad8\u3002</li> </ul> </li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%B8%BA%E4%BB%80%E4%B9%88%20MySQL%20%E9%87%87%E7%94%A8%20B%2B%20%E6%A0%91%E4%BD%9C%E4%B8%BA%E7%B4%A2%E5%BC%95/#b","title":"B+ \u6811","text":"<p>B+ \u6811\u662f\u5bf9 B \u6811\u7684\u4f18\u5316\u548c\u5347\u7ea7\uff0c\u4e5f\u662f MySQL InnoDB \u5b58\u50a8\u5f15\u64ce\u6700\u7ec8\u91c7\u7528\u7684\u7d22\u5f15\u7ed3\u6784\u3002</p> <p>B+ \u6811\u4e0e B \u6811\u7684\u6838\u5fc3\u5dee\u5f02\uff1a 1.  \u6570\u636e\u5b58\u50a8\u4f4d\u7f6e\uff1a\u975e\u53f6\u5b50\u8282\u70b9\u53ea\u5b58\u50a8\u7d22\u5f15\u952e\uff0c\u4e0d\u5b58\u50a8\u5b9e\u9645\u7684\u6570\u636e\u8bb0\u5f55\u3002\u6240\u6709\u7684\u6570\u636e\u8bb0\u5f55\u90fd\u5b58\u653e\u5728\u53f6\u5b50\u8282\u70b9\u4e2d\u3002 2.  \u7d22\u5f15\u5197\u4f59\uff1a\u975e\u53f6\u5b50\u8282\u70b9\u4e2d\u7684\u7d22\u5f15\uff0c\u4f1a\u540c\u65f6\u5b58\u5728\u4e8e\u5176\u5b50\u8282\u70b9\u4e2d\uff0c\u5e76\u4e14\u662f\u5b50\u8282\u70b9\u4e2d\u7d22\u5f15\u7684\u6700\u5927\u503c\u6216\u6700\u5c0f\u503c\u3002 3.  \u53f6\u5b50\u8282\u70b9\u94fe\u8868\uff1a\u6240\u6709\u7684\u53f6\u5b50\u8282\u70b9\u901a\u8fc7\u4e00\u4e2a\u94fe\u8868\u76f8\u4e92\u8fde\u63a5\uff0c\u5f62\u6210\u4e00\u4e2a\u6709\u5e8f\u5e8f\u5217\u3002 4.  \u67e5\u8be2\u8def\u5f84\uff1a\u4efb\u4f55\u6570\u636e\u7684\u67e5\u8be2\u90fd\u5fc5\u987b\u4ece\u6839\u8282\u70b9\u8d70\u5230\u53f6\u5b50\u8282\u70b9\u624d\u80fd\u5b8c\u6210\uff0c\u67e5\u8be2\u8def\u5f84\u957f\u5ea6\u56fa\u5b9a\u3002</p> <p>B+ \u6811\u7684\u4f18\u52bf\uff1a 1.  \u66f4\u5c11\u7684\u78c1\u76d8 I/O\uff1a\u7531\u4e8e\u975e\u53f6\u5b50\u8282\u70b9\u4e0d\u5b58\u50a8\u6570\u636e\u8bb0\u5f55\uff0c\u53ea\u5b58\u50a8\u7d22\u5f15\uff0c\u6240\u4ee5\u5355\u4e2a\u8282\u70b9\uff08\u4e00\u4e2a\u78c1\u76d8\u9875\uff0c\u5982 16KB\uff09\u53ef\u4ee5\u5bb9\u7eb3\u66f4\u591a\u7684\u7d22\u5f15\u952e\u3002\u8fd9\u4f7f\u5f97 B+ \u6811\u6bd4\u540c\u6837\u6570\u636e\u91cf\u7684 B \u6811\u66f4\u52a0\u201c\u77ee\u80d6\u201d\uff0c\u6811\u7684\u9ad8\u5ea6\u66f4\u4f4e\uff0c\u67e5\u8be2\u65f6\u6240\u9700\u7684\u78c1\u76d8 I/O \u6b21\u6570\u66f4\u5c11\u3002 2.  \u63d2\u5165\u548c\u5220\u9664\u6548\u7387\u66f4\u9ad8\uff1aB+ \u6811\u6709\u5927\u91cf\u7684\u5197\u4f59\u8282\u70b9\u3002\u5728\u5220\u9664\u8282\u70b9\u65f6\uff0c\u901a\u5e38\u53ef\u4ee5\u76f4\u63a5\u4ece\u53f6\u5b50\u8282\u70b9\u4e2d\u8fdb\u884c\uff0c\u5bf9\u975e\u53f6\u5b50\u8282\u70b9\u7684\u5f71\u54cd\u8f83\u5c0f\uff0c\u4e0d\u9700\u8981\u50cf B \u6811\u90a3\u6837\u8fdb\u884c\u590d\u6742\u7684\u6811\u7ed3\u6784\u53d8\u5f62\u3002 3.  \u8303\u56f4\u67e5\u8be2\u6781\u5176\u9ad8\u6548\uff1a\u8fd9\u662f B+ \u6811\u6700\u663e\u8457\u7684\u4f18\u52bf\u3002\u5f53\u9700\u8981\u8fdb\u884c\u8303\u56f4\u67e5\u8be2\u65f6\uff08\u5982\u67e5\u627e\u67d0\u4e2a\u65f6\u95f4\u6bb5\u5185\u7684\u8ba2\u5355\uff09\uff0c\u53ea\u9700\u5148\u5b9a\u4f4d\u5230\u8303\u56f4\u7684\u8d77\u59cb\u53f6\u5b50\u8282\u70b9\uff0c\u7136\u540e\u901a\u8fc7\u53f6\u5b50\u8282\u70b9\u4e4b\u95f4\u7684\u94fe\u8868\uff0c\u987a\u5e8f\u5411\u540e\u904d\u5386\u5373\u53ef\uff0c\u65e0\u9700\u53cd\u590d\u4ece\u6839\u8282\u70b9\u5f00\u59cb\u67e5\u627e\u3002B \u6811\u5219\u5fc5\u987b\u8fdb\u884c\u591a\u6b21\u6811\u7684\u904d\u5386\u624d\u80fd\u5b8c\u6210\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%B8%BA%E4%BB%80%E4%B9%88%20MySQL%20%E9%87%87%E7%94%A8%20B%2B%20%E6%A0%91%E4%BD%9C%E4%B8%BA%E7%B4%A2%E5%BC%95/#mysql-innodb-b","title":"MySQL (InnoDB) \u4e2d\u7684 B+ \u6811\u7279\u6027","text":"<p>InnoDB \u5b58\u50a8\u5f15\u64ce\u5bf9 B+ \u6811\u8fdb\u884c\u4e86\u8fdb\u4e00\u6b65\u7684\u5b9e\u73b0\u548c\u4f18\u5316\u3002 1.  \u53cc\u5411\u94fe\u8868\uff1a\u53f6\u5b50\u8282\u70b9\u4e4b\u95f4\u901a\u8fc7\u4e00\u4e2a\u53cc\u5411\u94fe\u8868\u8fde\u63a5\uff0c\u65e2\u53ef\u4ee5\u5411\u540e\u904d\u5386\uff0c\u4e5f\u53ef\u4ee5\u5411\u524d\u904d\u5386\u3002 2.  \u6570\u636e\u9875\uff1aB+ \u6811\u7684\u8282\u70b9\u5728 InnoDB \u4e2d\u88ab\u79f0\u4e3a\u6570\u636e\u9875\uff08Page\uff09\uff0c\u6bcf\u4e2a\u6570\u636e\u9875\u9ed8\u8ba4\u5927\u5c0f\u4e3a 16 KB\uff0c\u91cc\u9762\u5b58\u653e\u4e86\u7528\u6237\u8bb0\u5f55\u548c\u5143\u4fe1\u606f\u3002 3.  \u7d22\u5f15\u7c7b\u578b\uff1a     *   \u805a\u7c07\u7d22\u5f15 (Clustered Index)\uff1a\u53f6\u5b50\u8282\u70b9\u76f4\u63a5\u5b58\u653e\u5b8c\u6574\u7684\u7528\u6237\u8bb0\u5f55\uff08\u884c\u6570\u636e\uff09\u3002\u6bcf\u4e2a\u8868\u5fc5\u987b\u6709\u4e00\u4e2a\u4e14\u53ea\u80fd\u6709\u4e00\u4e2a\u805a\u7c07\u7d22\u5f15\uff08\u901a\u5e38\u662f\u4e3b\u952e\uff09\u3002     *   \u4e8c\u7ea7\u7d22\u5f15 (Secondary Index)\uff1a\u4e5f\u53eb\u975e\u805a\u7c07\u7d22\u5f15\u3002\u5176\u53f6\u5b50\u8282\u70b9\u5b58\u653e\u7684\u4e0d\u662f\u884c\u6570\u636e\uff0c\u800c\u662f\u8be5\u884c\u6570\u636e\u5bf9\u5e94\u7684\u4e3b\u952e\u503c\u3002\u5f53\u4f7f\u7528\u4e8c\u7ea7\u7d22\u5f15\u67e5\u8be2\u65f6\uff0c\u4f1a\u5148\u627e\u5230\u5bf9\u5e94\u7684\u4e3b\u952e\uff0c\u7136\u540e\u518d\u7528\u8be5\u4e3b\u952e\u53bb\u805a\u7c07\u7d22\u5f15\u4e2d\u67e5\u627e\u5b8c\u6574\u7684\u884c\u6570\u636e\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u79f0\u4e3a\u201c\u56de\u8868\u201d\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%90%84%E4%B8%AA%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/","title":"\u4e8b\u52a1\u7684\u5404\u4e2a\u9694\u79bb\u7ea7\u522b\u662f\u5982\u4f55\u5b9e\u73b0\u7684","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%90%84%E4%B8%AA%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/#1-locking","title":"1. \u9501\u673a\u5236 (Locking)","text":"<p>\u9501\u662f\u5b9e\u73b0\u9694\u79bb\u6027\u7684\u4f20\u7edf\u65b9\u5f0f\uff0c\u5176\u6838\u5fc3\u601d\u60f3\u662f\u5f53\u4e00\u4e2a\u4e8b\u52a1\u5728\u8bbf\u95ee\u67d0\u4e9b\u6570\u636e\u65f6\uff0c\u963b\u6b62\u5176\u4ed6\u4e8b\u52a1\u8fdb\u884c\u4e0d\u517c\u5bb9\u7684\u64cd\u4f5c\u3002</p> <ul> <li> <p>\u9501\u7684\u7c7b\u578b\uff1a</p> <ul> <li>\u5171\u4eab\u9501 (Shared Lock, S\u9501)\uff1a\u4e5f\u53eb\u8bfb\u9501\u3002\u591a\u4e2a\u4e8b\u52a1\u53ef\u4ee5\u540c\u65f6\u6301\u6709\u540c\u4e00\u4efd\u6570\u636e\u7684\u5171\u4eab\u9501\uff0c\u5e76\u8bfb\u53d6\u8be5\u6570\u636e\u3002\u4f46\u5f53\u6570\u636e\u4e0a\u6709S\u9501\u65f6\uff0c\u5176\u4ed6\u4e8b\u52a1\u4e0d\u80fd\u83b7\u53d6\u8be5\u6570\u636e\u7684\u6392\u4ed6\u9501\uff08X\u9501\uff09\u3002</li> <li>\u6392\u4ed6\u9501 (Exclusive Lock, X\u9501)\uff1a\u4e5f\u53eb\u5199\u9501\u3002\u5982\u679c\u4e00\u4e2a\u4e8b\u52a1\u6301\u6709\u4e86\u67d0\u4efd\u6570\u636e\u7684\u6392\u4ed6\u9501\uff0c\u90a3\u4e48\u5176\u4ed6\u4efb\u4f55\u4e8b\u52a1\u90fd\u4e0d\u80fd\u518d\u83b7\u53d6\u8be5\u6570\u636e\u7684\u4efb\u4f55\u9501\uff08\u65e0\u8bba\u662fS\u9501\u8fd8\u662fX\u9501\uff09\uff0c\u76f4\u5230\u6301\u6709\u9501\u7684\u4e8b\u52a1\u91ca\u653e\u3002\u8fd9\u4fdd\u8bc1\u4e86\u540c\u4e00\u65f6\u95f4\u53ea\u6709\u4e00\u4e2a\u4e8b\u52a1\u80fd\u4fee\u6539\u6570\u636e\u3002</li> </ul> </li> <li> <p>\u9501\u7684\u7c92\u5ea6\uff1a</p> <ul> <li>\u8868\u7ea7\u9501\uff1a\u9501\u5b9a\u6574\u5f20\u8868\uff0c\u5f00\u9500\u5c0f\uff0c\u52a0\u9501\u5feb\uff0c\u4f46\u5e76\u53d1\u5ea6\u6700\u4f4e\u3002</li> <li>\u884c\u7ea7\u9501\uff1a\u9501\u5b9a\u6570\u636e\u884c\uff0c\u5f00\u9500\u5927\uff0c\u52a0\u9501\u6162\uff0c\u4f46\u5e76\u53d1\u5ea6\u6700\u9ad8\uff0c\u80fd\u6700\u5927\u7a0b\u5ea6\u652f\u6301\u5e76\u53d1\u5904\u7406\u3002InnoDB\u5b58\u50a8\u5f15\u64ce\u652f\u6301\u884c\u7ea7\u9501\u3002</li> <li>\u95f4\u9699\u9501 (Gap Lock)\uff1a\u9501\u5b9a\u4e00\u4e2a\u8303\u56f4\uff0c\u4f46\u4e0d\u5305\u62ec\u8bb0\u5f55\u672c\u8eab\u3002\u4e3b\u8981\u7528\u4e8e\u9632\u6b62\u5e7b\u8bfb\u3002</li> <li>\u4e34\u952e\u9501 (Next-Key Lock)\uff1a\u662f\u8bb0\u5f55\u9501\u548c\u95f4\u9699\u9501\u7684\u7ec4\u5408\uff0c\u9501\u5b9a\u4e00\u4e2a\u5de6\u5f00\u53f3\u95ed\u7684\u533a\u95f4\u3002\u8fd9\u662fInnoDB\u5728\u53ef\u91cd\u590d\u8bfb\u9694\u79bb\u7ea7\u522b\u4e0b\u89e3\u51b3\u5e7b\u8bfb\u7684\u5173\u952e\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%90%84%E4%B8%AA%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/#2-multi-version-concurrency-control-mvcc","title":"2. \u591a\u7248\u672c\u5e76\u53d1\u63a7\u5236 (Multi-Version Concurrency Control, MVCC)","text":"<p>MVCC\u662fInnoDB\u5f15\u64ce\u5728<code>\u8bfb\u5df2\u63d0\u4ea4</code>\u548c<code>\u53ef\u91cd\u590d\u8bfb</code>\u9694\u79bb\u7ea7\u522b\u4e0b\u5904\u7406\u8bfb\u64cd\u4f5c\u7684\u6838\u5fc3\u673a\u5236\u3002\u5b83\u7684\u4e3b\u8981\u4f18\u52bf\u5728\u4e8e\u5904\u7406\u8bfb-\u5199\u51b2\u7a81\u65f6\u65e0\u9700\u52a0\u9501\uff0c\u5b9e\u73b0\u4e86\u975e\u963b\u585e\u7684\u5e76\u53d1\u8bfb\u53d6\uff0c\u6781\u5927\u5730\u63d0\u5347\u4e86\u6570\u636e\u5e93\u7684\u5e76\u53d1\u6027\u80fd\u3002</p> <p>MVCC\u7684\u5b9e\u73b0\u4f9d\u8d56\u4e8e\u4ee5\u4e0b\u51e0\u4e2a\u5173\u952e\u8981\u7d20\uff1a</p> <ul> <li> <p>\u9690\u85cf\u5b57\u6bb5\uff1aInnoDB\u4f1a\u4e3a\u6bcf\u884c\u6570\u636e\u6dfb\u52a0\u4e09\u4e2a\u9690\u85cf\u5b57\u6bb5\u3002</p> <ul> <li><code>DB_TRX_ID</code>\uff1a\u8bb0\u5f55\u6700\u8fd1\u4e00\u6b21\u521b\u5efa\u6216\u4fee\u6539\u8be5\u884c\u6570\u636e\u7684\u4e8b\u52a1ID\u3002</li> <li><code>DB_ROLL_PTR</code>\uff1a\u56de\u6eda\u6307\u9488\uff0c\u6307\u5411\u8be5\u884c\u8bb0\u5f55\u7684\u4e0a\u4e00\u4e2a\u7248\u672c\uff0c\u5b58\u50a8\u5728Undo Log\u4e2d\u3002</li> <li><code>DB_ROW_ID</code>\uff1a\u9690\u85cf\u7684\u884cID\uff0c\u5f53\u8868\u6ca1\u6709\u4e3b\u952e\u65f6\uff0cInnoDB\u4f1a\u7528\u5b83\u6765\u751f\u6210\u805a\u7c07\u7d22\u5f15\u3002</li> </ul> </li> <li> <p>Undo Log\uff08\u56de\u6eda\u65e5\u5fd7\uff09\uff1aUndo Log\u5b58\u50a8\u4e86\u6570\u636e\u7684\u65e7\u7248\u672c\u3002\u5f53\u4e00\u4e2a\u4e8b\u52a1\u4fee\u6539\u6570\u636e\u65f6\uff0c\u5b83\u4f1a\u5c06\u4fee\u6539\u524d\u7684\u6570\u636e\u7248\u672c\u5b58\u5165Undo Log\uff0c\u5f62\u6210\u4e00\u4e2a\u7248\u672c\u94fe\u3002<code>DB_ROLL_PTR</code>\u5c31\u662f\u8fde\u63a5\u8fd9\u4e2a\u7248\u672c\u94fe\u7684\u6307\u9488\u3002</p> </li> <li> <p>Read View\uff08\u4e00\u81f4\u6027\u89c6\u56fe\uff09\uff1aRead View\u662fMVCC\u7684\u6838\u5fc3\uff0c\u5b83\u51b3\u5b9a\u4e86\u5728\u5f53\u524d\u4e8b\u52a1\u4e2d\u54ea\u4e9b\u6570\u636e\u7248\u672c\u662f\u53ef\u89c1\u7684\u3002\u5f53\u4e8b\u52a1\u542f\u52a8\u65f6\uff08\u6216\u5728\u7279\u5b9a\u9694\u79bb\u7ea7\u522b\u4e0b\uff0c\u6bcf\u6761\u67e5\u8be2\u8bed\u53e5\u5f00\u59cb\u65f6\uff09\uff0c\u4f1a\u521b\u5efa\u4e00\u4e2aRead View\u3002 \u5b83\u4e3b\u8981\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <ul> <li><code>m_ids</code>\uff1a\u521b\u5efaRead View\u65f6\uff0c\u5f53\u524d\u7cfb\u7edf\u4e2d\u6240\u6709\u6d3b\u8dc3\uff08\u672a\u63d0\u4ea4\uff09\u7684\u4e8b\u52a1ID\u5217\u8868\u3002</li> <li><code>min_trx_id</code>\uff1a<code>m_ids</code>\u5217\u8868\u4e2d\u7684\u6700\u5c0f\u4e8b\u52a1ID\u3002</li> <li><code>max_trx_id</code>\uff1a\u521b\u5efaRead View\u65f6\uff0c\u7cfb\u7edf\u5e94\u8be5\u5206\u914d\u7ed9\u4e0b\u4e00\u4e2a\u4e8b\u52a1\u7684ID\u3002</li> <li><code>creator_trx_id</code>\uff1a\u521b\u5efa\u8be5Read View\u7684\u4e8b\u52a1\u7684ID\u3002</li> </ul> </li> <li> <p>\u53ef\u89c1\u6027\u5224\u65ad\u89c4\u5219\uff1a\u5f53\u4e00\u4e2a\u4e8b\u52a1\u8bbf\u95ee\u67d0\u884c\u6570\u636e\u65f6\uff0c\u4f1a\u7528\u81ea\u5df1\u7684Read View\u4e0e\u8be5\u884c\u8bb0\u5f55\u7684<code>DB_TRX_ID</code>\u8fdb\u884c\u6bd4\u8f83\uff0c\u4ee5\u5224\u65ad\u8be5\u7248\u672c\u662f\u5426\u53ef\u89c1\uff1a</p> <ol> <li>\u5982\u679c<code>DB_TRX_ID</code>\u7b49\u4e8e<code>creator_trx_id</code>\uff0c\u8bf4\u660e\u662f\u5f53\u524d\u4e8b\u52a1\u81ea\u5df1\u4fee\u6539\u7684\uff0c\u53ef\u89c1\u3002</li> <li>\u5982\u679c<code>DB_TRX_ID</code>\u5c0f\u4e8e<code>min_trx_id</code>\uff0c\u8bf4\u660e\u4fee\u6539\u8be5\u6570\u636e\u7684\u4e8b\u52a1\u5728\u5f53\u524d\u4e8b\u52a1\u542f\u52a8\u524d\u5c31\u5df2\u7ecf\u63d0\u4ea4\uff0c\u53ef\u89c1\u3002</li> <li>\u5982\u679c<code>DB_TRX_ID</code>\u5927\u4e8e\u6216\u7b49\u4e8e<code>max_trx_id</code>\uff0c\u8bf4\u660e\u4fee\u6539\u8be5\u6570\u636e\u7684\u4e8b\u52a1\u5728\u5f53\u524d\u4e8b\u52a1\u521b\u5efaRead View\u4e4b\u540e\u624d\u542f\u52a8\uff0c\u4e0d\u53ef\u89c1\u3002</li> <li>\u5982\u679c<code>DB_TRX_ID</code>\u5728<code>min_trx_id</code>\u548c<code>max_trx_id</code>\u4e4b\u95f4\uff0c\u5219\u9700\u8981\u68c0\u67e5<code>m_ids</code>\u5217\u8868\u3002\u5982\u679c<code>DB_TRX_ID</code>\u5728<code>m_ids</code>\u4e2d\uff0c\u8bf4\u660e\u4fee\u6539\u8be5\u6570\u636e\u7684\u4e8b\u52a1\u5728\u5f53\u524d\u4e8b\u52a1\u521b\u5efaRead View\u65f6\u4ecd\u7136\u6d3b\u8dc3\uff08\u672a\u63d0\u4ea4\uff09\uff0c\u56e0\u6b64\u4e0d\u53ef\u89c1\u3002\u5982\u679c\u4e0d\u5728<code>m_ids</code>\u4e2d\uff0c\u8bf4\u660e\u5df2\u7ecf\u63d0\u4ea4\uff0c\u53ef\u89c1\u3002</li> </ol> </li> </ul> <p>\u5982\u679c\u67d0\u4e2a\u7248\u672c\u7684\u6570\u636e\u5bf9\u5f53\u524d\u4e8b\u52a1\u4e0d\u53ef\u89c1\uff0c\u5b83\u5c31\u4f1a\u901a\u8fc7<code>DB_ROLL_PTR</code>\u56de\u6eda\u6307\u9488\u53bbUndo Log\u4e2d\u67e5\u627e\u4e0a\u4e00\u4e2a\u7248\u672c\uff0c\u7136\u540e\u91cd\u590d\u4e0a\u8ff0\u53ef\u89c1\u6027\u5224\u65ad\uff0c\u76f4\u5230\u627e\u5230\u4e00\u4e2a\u53ef\u89c1\u7684\u7248\u672c\u4e3a\u6b62\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%90%84%E4%B8%AA%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/#_1","title":"\u56db\u5927\u9694\u79bb\u7ea7\u522b\u7684\u5b9e\u73b0","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%90%84%E4%B8%AA%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/#1-read-uncommitted","title":"1. \u8bfb\u672a\u63d0\u4ea4 (Read Uncommitted)","text":"<ul> <li>\u73b0\u8c61\uff1a\u5141\u8bb8\u810f\u8bfb\u3001\u4e0d\u53ef\u91cd\u590d\u8bfb\u3001\u5e7b\u8bfb\u3002</li> <li>\u5b9e\u73b0\u601d\u8def\u548c\u539f\u7406\uff1a\u8fd9\u662f\u6700\u7b80\u5355\u7684\u9694\u79bb\u7ea7\u522b\uff0c\u51e0\u4e4e\u6ca1\u6709\u9694\u79bb\u6027\u3002\u5728\u6b64\u7ea7\u522b\u4e0b\uff0c\u8bfb\u53d6\u6570\u636e\u4e0d\u4f1a\u52a0\u4efb\u4f55\u9501\uff0c\u4e5f\u4e0d\u4f7f\u7528MVCC\u3002 \u5b83\u76f4\u63a5\u8bfb\u53d6\u6570\u636e\u884c\u6700\u65b0\u7684\u7248\u672c\uff0c\u5373\u4f7f\u8fd9\u4e2a\u7248\u672c\u662f\u7531\u4e00\u4e2a\u5c1a\u672a\u63d0\u4ea4\u7684\u4e8b\u52a1\u6240\u4fee\u6539\u7684\u3002\u56e0\u6b64\uff0c\u6027\u80fd\u6700\u597d\uff0c\u4f46\u6570\u636e\u4e00\u81f4\u6027\u6700\u5dee\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%90%84%E4%B8%AA%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/#2-read-committed","title":"2. \u8bfb\u5df2\u63d0\u4ea4 (Read Committed)","text":"<ul> <li>\u73b0\u8c61\uff1a\u89e3\u51b3\u4e86\u810f\u8bfb\uff0c\u4f46\u4ecd\u53ef\u80fd\u51fa\u73b0\u4e0d\u53ef\u91cd\u590d\u8bfb\u3001\u5e7b\u8bfb\u3002</li> <li>\u5b9e\u73b0\u601d\u8def\u548c\u539f\u7406\uff1a\u8fd9\u662f\u5927\u591a\u6570\u6570\u636e\u5e93\uff08\u5982Oracle\u3001PostgreSQL\uff09\u7684\u9ed8\u8ba4\u9694\u79bb\u7ea7\u522b\u3002\u5b83\u7684\u5b9e\u73b0\u4e3b\u8981\u4f9d\u8d56MVCC\u3002<ul> <li>\u8bfb\u64cd\u4f5c (SELECT)\uff1a\u5728\u4e8b\u52a1\u4e2d\u7684\u6bcf\u4e00\u6761<code>SELECT</code>\u8bed\u53e5\u6267\u884c\u524d\uff0c\u90fd\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684Read View\u3002 \u8fd9\u610f\u5473\u7740\uff0c\u5982\u679c\u4e8b\u52a1A\u5728\u4e24\u6b21\u67e5\u8be2\u4e4b\u95f4\uff0c\u4e8b\u52a1B\u6070\u597d\u4fee\u6539\u4e86\u6570\u636e\u5e76\u63d0\u4ea4\uff0c\u90a3\u4e48\u4e8b\u52a1A\u7684\u7b2c\u4e8c\u4e2a<code>SELECT</code>\u4f1a\u751f\u6210\u4e00\u4e2a\u65b0\u7684Read View\uff0c\u6b64\u65f6\u5c31\u80fd\u770b\u5230\u4e8b\u52a1B\u63d0\u4ea4\u7684\u4fee\u6539\u3002\u8fd9\u5c31\u5bfc\u81f4\u4e86\u201c\u4e0d\u53ef\u91cd\u590d\u8bfb\u201d\u3002\u7531\u4e8eRead View\u53ea\u80fd\u770b\u5230\u5df2\u63d0\u4ea4\u4e8b\u52a1\u7684\u4fee\u6539\uff0c\u56e0\u6b64\u201c\u810f\u8bfb\u201d\u95ee\u9898\u88ab\u89e3\u51b3\u3002</li> <li>\u5199\u64cd\u4f5c (UPDATE, DELETE)\uff1a\u5199\u64cd\u4f5c\u4ecd\u7136\u9700\u8981\u52a0\u884c\u7ea7\u6392\u4ed6\u9501\uff0c\u4ee5\u9632\u6b62\u591a\u4e2a\u4e8b\u52a1\u540c\u65f6\u4fee\u6539\u540c\u4e00\u884c\u6570\u636e\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%90%84%E4%B8%AA%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/#3-repeatable-read","title":"3. \u53ef\u91cd\u590d\u8bfb (Repeatable Read)","text":"<ul> <li>\u73b0\u8c61\uff1a\u89e3\u51b3\u4e86\u810f\u8bfb\u3001\u4e0d\u53ef\u91cd\u590d\u8bfb\uff0c\u4f46\u7406\u8bba\u4e0a\u4ecd\u6709\u5e7b\u8bfb\u95ee\u9898\uff08InnoDB\u5728\u5f88\u5927\u7a0b\u5ea6\u4e0a\u89e3\u51b3\u4e86\uff09\u3002 \u8fd9\u662fMySQL InnoDB\u5f15\u64ce\u7684\u9ed8\u8ba4\u9694\u79bb\u7ea7\u522b\u3002</li> <li>\u5b9e\u73b0\u601d\u8def\u548c\u539f\u7406\uff1a\u6b64\u7ea7\u522b\u7684\u5b9e\u73b0\u7ed3\u5408\u4e86MVCC\u548c\u9501\u673a\u5236\u3002<ul> <li>\u8bfb\u64cd\u4f5c (\u5feb\u7167\u8bfb, \u666e\u901aSELECT)\uff1a\u53ea\u5728\u4e8b\u52a1\u5f00\u59cb\u540e\u7684\u7b2c\u4e00\u6b21\u67e5\u8be2\u64cd\u4f5c\u65f6\u521b\u5efa\u4e00\u4e2aRead View\uff0c\u5e76\u4e14\u6574\u4e2a\u4e8b\u52a1\u671f\u95f4\u90fd\u590d\u7528\u8fd9\u4e00\u4e2aRead View\u3002 \u56e0\u4e3aRead View\u662f\u56fa\u5b9a\u7684\uff0c\u6240\u4ee5\u65e0\u8bba\u5176\u4ed6\u4e8b\u52a1\u5982\u4f55\u4fee\u6539\u6570\u636e\u5e76\u63d0\u4ea4\uff0c\u5f53\u524d\u4e8b\u52a1\u770b\u5230\u7684\u59cb\u7ec8\u662f\u4e8b\u52a1\u542f\u52a8\u65f6\u7684\u6570\u636e\u5feb\u7167\uff0c\u4ece\u800c\u4fdd\u8bc1\u4e86\u201c\u53ef\u91cd\u590d\u8bfb\u201d\u3002</li> <li>\u5199\u64cd\u4f5c (\u5f53\u524d\u8bfb, <code>SELECT...FOR UPDATE</code>, <code>UPDATE</code>, <code>DELETE</code>) \u4e0e\u5e7b\u8bfb\u7684\u89e3\u51b3\uff1a<ul> <li>\u6807\u51c6\u7684MVCC\u53ea\u80fd\u89e3\u51b3\u5feb\u7167\u8bfb\u7684\u5e7b\u8bfb\u95ee\u9898\u3002\u5bf9\u4e8e\u9700\u8981\u52a0\u9501\u7684\u201c\u5f53\u524d\u8bfb\u201d\u64cd\u4f5c\uff0cInnoDB\u901a\u8fc7Next-Key Lock\uff08\u4e34\u952e\u9501\uff09\u6765\u89e3\u51b3\u5e7b\u8bfb\u3002</li> <li>\u5f53\u4e00\u4e2a\u4e8b\u52a1\u6267\u884c\u5f53\u524d\u8bfb\u65f6\uff0c\u5b83\u4e0d\u4ec5\u4f1a\u9501\u5b9a\u5339\u914d\u5230\u7684\u8bb0\u5f55\uff08\u8bb0\u5f55\u9501\uff09\uff0c\u8fd8\u4f1a\u9501\u5b9a\u8fd9\u4e9b\u8bb0\u5f55\u4e4b\u95f4\u7684\u201c\u95f4\u9699\u201d\uff08\u95f4\u9699\u9501\uff09\u3002 \u8fd9\u6837\u4e00\u6765\uff0c\u5176\u4ed6\u4e8b\u52a1\u5c31\u65e0\u6cd5\u5728\u8fd9\u4e2a\u95f4\u9699\u4e2d\u63d2\u5165\u65b0\u7684\u8bb0\u5f55\uff0c\u4ece\u800c\u9632\u6b62\u4e86\u5e7b\u8bfb\u7684\u53d1\u751f\u3002</li> </ul> </li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%90%84%E4%B8%AA%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/#4-serializable","title":"4. \u4e32\u884c\u5316 (Serializable)","text":"<ul> <li>\u73b0\u8c61\uff1a\u89e3\u51b3\u4e86\u810f\u8bfb\u3001\u4e0d\u53ef\u91cd\u590d\u8bfb\u548c\u5e7b\u8bfb\u6240\u6709\u95ee\u9898\u3002</li> <li>\u5b9e\u73b0\u601d\u8def\u548c\u539f\u7406\uff1a\u8fd9\u662f\u6700\u9ad8\u7ea7\u522b\u7684\u9694\u79bb\uff0c\u4e5f\u662f\u6700\u5f71\u54cd\u5e76\u53d1\u6027\u80fd\u7684\u3002<ul> <li>\u5b9e\u73b0\u673a\u5236\uff1a\u6b64\u7ea7\u522b\u4e0b\uff0cInnoDB\u4e0d\u518d\u4f7f\u7528MVCC\u8fdb\u884c\u975e\u9501\u5b9a\u8bfb\u3002\u5b83\u4f1a\u4e3a\u6240\u6709\u7684\u8bfb\u64cd\u4f5c\uff08SELECT\uff09\u9690\u5f0f\u5730\u52a0\u4e0a\u5171\u4eab\u9501\uff08S\u9501\uff09\uff0c\u4e3a\u5199\u64cd\u4f5c\u52a0\u4e0a\u6392\u4ed6\u9501\uff08X\u9501\uff09\u3002</li> <li>\u6548\u679c\uff1a\u5f53\u4e00\u4e2a\u4e8b\u52a1\u8bfb\u53d6\u6570\u636e\u65f6\uff0c\u4f1a\u52a0S\u9501\uff0c\u5176\u4ed6\u4e8b\u52a1\u53ef\u4ee5\u7ee7\u7eed\u8bfb\u53d6\u4f46\u4e0d\u80fd\u4fee\u6539\u3002\u5f53\u4e00\u4e2a\u4e8b\u52a1\u5199\u5165\u6570\u636e\u65f6\uff0c\u4f1a\u52a0X\u9501\uff0c\u5176\u4ed6\u4e8b\u52a1\u65e2\u4e0d\u80fd\u8bfb\u4e5f\u4e0d\u80fd\u5199\u3002\u8fd9\u79cd\u673a\u5236\u5f3a\u5236\u6240\u6709\u4e8b\u52a1\u4e32\u884c\u6267\u884c\uff0c\u4e00\u4e2a\u63a5\u4e00\u4e2a\u5730\u5904\u7406\uff0c\u56e0\u6b64\u5b8c\u5168\u907f\u514d\u4e86\u5e76\u53d1\u95ee\u9898\uff0c\u4f46\u5e76\u53d1\u6027\u80fd\u4e5f\u6700\u4f4e\u3002</li> </ul> </li> </ul> \u9694\u79bb\u7ea7\u522b \u5b9e\u73b0\u6838\u5fc3\u6280\u672f \u8bfb\u64cd\u4f5c\u5904\u7406\u65b9\u5f0f \u5199\u64cd\u4f5c\u5904\u7406\u65b9\u5f0f \u89e3\u51b3\u7684\u95ee\u9898 \u5b58\u5728\u7684\u95ee\u9898 \u8bfb\u672a\u63d0\u4ea4 \u65e0\u9501 \u76f4\u63a5\u8bfb\u53d6\u6700\u65b0\u7248\u672c \u52a0\u6392\u4ed6\u9501 (\u65e0) \u810f\u8bfb\u3001\u4e0d\u53ef\u91cd\u590d\u8bfb\u3001\u5e7b\u8bfb \u8bfb\u5df2\u63d0\u4ea4 MVCC \u6bcf\u6b21SELECT\u521b\u5efa\u65b0\u7684Read View \u52a0\u6392\u4ed6\u9501 \u810f\u8bfb \u4e0d\u53ef\u91cd\u590d\u8bfb\u3001\u5e7b\u8bfb \u53ef\u91cd\u590d\u8bfb MVCC + Next-Key Lock \u4e8b\u52a1\u5f00\u59cb\u65f6\u521b\u5efa\u552f\u4e00Read View \u52a0\u6392\u4ed6\u9501\u548cNext-Key Lock \u810f\u8bfb\u3001\u4e0d\u53ef\u91cd\u590d\u8bfb\u3001\u5e7b\u8bfb\uff08\u5927\u90e8\u5206\uff09 (\u57fa\u672c\u89e3\u51b3\u5e7b\u8bfb) \u4e32\u884c\u5316 \u8bfb\u5199\u9501 \u6240\u6709\u8bfb\u64cd\u4f5c\u52a0\u5171\u4eab\u9501 \u6240\u6709\u5199\u64cd\u4f5c\u52a0\u6392\u4ed6\u9501 \u810f\u8bfb\u3001\u4e0d\u53ef\u91cd\u590d\u8bfb\u3001\u5e7b\u8bfb \u5e76\u53d1\u6027\u80fd\u5dee"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E6%9C%89%E4%BB%80%E4%B9%88/","title":"\u4e8b\u52a1\u7684\u9694\u79bb\u7ea7\u522b\u6709\u4ec0\u4e48","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E6%9C%89%E4%BB%80%E4%B9%88/#_1","title":"\u5e76\u53d1\u573a\u666f\u4e0b\u7684\u4e09\u7c7b\u95ee\u9898","text":"<ul> <li>\u810f\u8bfb (Dirty Read): \u4e00\u4e2a\u4e8b\u52a1\u8bfb\u53d6\u5230\u4e86\u53e6\u4e00\u4e2a\u4e8b\u52a1\u5c1a\u672a\u63d0\u4ea4\u7684\u6570\u636e\u3002\u5982\u679c\u540e\u4e00\u4e2a\u4e8b\u52a1\u56de\u6eda\uff0c\u90a3\u4e48\u7b2c\u4e00\u4e2a\u4e8b\u52a1\u8bfb\u53d6\u5230\u7684\u5c31\u662f\u65e0\u6548\u7684\u201c\u810f\u201d\u6570\u636e\u3002</li> <li>\u4e0d\u53ef\u91cd\u590d\u8bfb (Non-repeatable Read): \u5728\u540c\u4e00\u4e2a\u4e8b\u52a1\u5185\uff0c\u591a\u6b21\u8bfb\u53d6\u540c\u4e00\u884c\u6570\u636e\uff0c\u7ed3\u679c\u5374\u4e0d\u4e00\u81f4\u3002\u8fd9\u662f\u56e0\u4e3a\u5728\u8bfb\u53d6\u95f4\u9694\u5185\uff0c\u6709\u5176\u4ed6\u4e8b\u52a1\u4fee\u6539\u4e86\u8be5\u884c\u6570\u636e\u5e76\u63d0\u4ea4\u3002</li> <li>\u5e7b\u8bfb (Phantom Read): \u5728\u540c\u4e00\u4e2a\u4e8b\u52a1\u5185\uff0c\u591a\u6b21\u6267\u884c\u540c\u6837\u7684\u8303\u56f4\u67e5\u8be2\uff0c\u8fd4\u56de\u7684\u7ed3\u679c\u96c6\u884c\u6570\u4e0d\u540c\u3002\u8fd9\u662f\u56e0\u4e3a\u5728\u67e5\u8be2\u95f4\u9694\u5185\uff0c\u6709\u5176\u4ed6\u4e8b\u52a1\u63d2\u5165\u6216\u5220\u9664\u4e86\u6ee1\u8db3\u67e5\u8be2\u6761\u4ef6\u7684\u6570\u636e\u884c\uff0c\u4eff\u4f5b\u51fa\u73b0\u4e86\u201c\u5e7b\u5f71\u201d\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E6%9C%89%E4%BB%80%E4%B9%88/#_2","title":"\u56db\u79cd\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b","text":"<p>\u9488\u5bf9\u4e0a\u8ff0\u5e76\u53d1\u95ee\u9898\uff0cSQL\u6807\u51c6\u63d0\u51fa\u4e86\u56db\u79cd\u9694\u79bb\u7ea7\u522b\uff1a</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E6%9C%89%E4%BB%80%E4%B9%88/#1-read-uncommitted","title":"1. \u8bfb\u672a\u63d0\u4ea4 (Read Uncommitted)","text":"<p>\u8fd9\u662f\u6700\u4f4e\u7684\u9694\u79bb\u7ea7\u522b\u3002\u5728\u6b64\u7ea7\u522b\u4e0b\uff0c\u4e00\u4e2a\u4e8b\u52a1\u53ef\u4ee5\u770b\u5230\u5176\u4ed6\u4e8b\u52a1\u5c1a\u672a\u63d0\u4ea4\u7684\u53d8\u66f4\u3002</p> <ul> <li>\u89e3\u51b3\u7684\u95ee\u9898\uff1a \u65e0\uff0c\u8fd9\u662f\u9694\u79bb\u7ea7\u522b\u6700\u4f4e\u7684\uff0c\u65e0\u6cd5\u89e3\u51b3\u4efb\u4f55\u5e76\u53d1\u95ee\u9898\u3002</li> <li>\u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898\uff1a \u810f\u8bfb\u3001\u4e0d\u53ef\u91cd\u590d\u8bfb\u3001\u5e7b\u8bfb\u3002</li> <li>\u4f18\u70b9\uff1a \u5e76\u53d1\u6027\u80fd\u6700\u9ad8\uff0c\u56e0\u4e3a\u5b83\u51e0\u4e4e\u6ca1\u6709\u52a0\u9501\u7684\u5f00\u9500\u3002</li> <li>\u7f3a\u70b9\uff1a \u6570\u636e\u4e00\u81f4\u6027\u6700\u5dee\uff0c\u5b9e\u9645\u5e94\u7528\u4e2d\u5f88\u5c11\u4f7f\u7528\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E6%9C%89%E4%BB%80%E4%B9%88/#2-read-committed","title":"2. \u8bfb\u5df2\u63d0\u4ea4 (Read Committed)","text":"<p>\u8fd9\u662f\u5927\u591a\u6570\u6570\u636e\u5e93\u7cfb\u7edf\u9ed8\u8ba4\u7684\u9694\u79bb\u7ea7\u522b\uff08\u4f46MySQL\u7684InnoDB\u5f15\u64ce\u4f8b\u5916\uff09\u3002 \u5728\u6b64\u7ea7\u522b\u4e0b\uff0c\u4e00\u4e2a\u4e8b\u52a1\u53ea\u80fd\u8bfb\u53d6\u5230\u5df2\u7ecf\u63d0\u4ea4\u7684\u4e8b\u52a1\u6240\u505a\u7684\u53d8\u66f4\u3002</p> <ul> <li>\u89e3\u51b3\u7684\u95ee\u9898\uff1a \u810f\u8bfb\u3002</li> <li>\u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898\uff1a \u4e0d\u53ef\u91cd\u590d\u8bfb\u3001\u5e7b\u8bfb\u3002</li> <li>\u5b9e\u73b0\u65b9\u5f0f\uff1a \u5728PostgreSQL\u7b49\u6570\u636e\u5e93\u4e2d\uff0c\u4e00\u4e2aSELECT\u67e5\u8be2\u53ea\u80fd\u770b\u5230\u5728\u67e5\u8be2\u5f00\u59cb\u4e4b\u524d\u5c31\u5df2\u7ecf\u63d0\u4ea4\u7684\u6570\u636e\u3002 \u5373\u4f7f\u5728\u540c\u4e00\u4e2a\u4e8b\u52a1\u4e2d\uff0c\u4e24\u4e2a\u8fde\u7eed\u7684SELECT\u67e5\u8be2\u4e5f\u53ef\u80fd\u4f1a\u770b\u5230\u4e0d\u540c\u7684\u6570\u636e\uff0c\u56e0\u4e3a\u4e2d\u95f4\u53ef\u80fd\u6709\u5176\u4ed6\u4e8b\u52a1\u63d0\u4ea4\u4e86\u66f4\u6539\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E6%9C%89%E4%BB%80%E4%B9%88/#3-repeatable-read","title":"3. \u53ef\u91cd\u590d\u8bfb (Repeatable Read)","text":"<p>\u8fd9\u662fMySQL InnoDB\u5b58\u50a8\u5f15\u64ce\u7684\u9ed8\u8ba4\u9694\u79bb\u7ea7\u522b\u3002 \u6b64\u7ea7\u522b\u4fdd\u8bc1\u5728\u540c\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u591a\u6b21\u8bfb\u53d6\u540c\u4e00\u884c\u6570\u636e\u65f6\uff0c\u7ed3\u679c\u90fd\u662f\u76f8\u540c\u7684\u3002</p> <ul> <li>\u89e3\u51b3\u7684\u95ee\u9898\uff1a \u810f\u8bfb\u3001\u4e0d\u53ef\u91cd\u590d\u8bfb\u3002</li> <li>\u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898\uff1a \u5e7b\u8bfb\u3002</li> <li>\u5b9e\u73b0\u65b9\u5f0f\uff1a<ul> <li>\u5728\u975e\u591a\u7248\u672c\u5e76\u53d1\u63a7\u5236\uff08MVCC\uff09\u7684\u6570\u636e\u5e93\u4e2d\uff0c\u8fd9\u901a\u5e38\u901a\u8fc7\u5bf9\u8bfb\u53d6\u7684\u884c\u52a0\u9501\u76f4\u5230\u4e8b\u52a1\u7ed3\u675f\u6765\u5b9e\u73b0\uff0c\u4ee5\u9632\u6b62\u5176\u4ed6\u4e8b\u52a1\u4fee\u6539\u8fd9\u4e9b\u884c\u3002</li> <li>\u5728\u652f\u6301MVCC\u7684\u6570\u636e\u5e93\uff08\u5982InnoDB\uff09\u4e2d\uff0c\u4e8b\u52a1\u5728\u542f\u52a8\u65f6\u4f1a\u521b\u5efa\u4e00\u4e2a\u6570\u636e\u5feb\u7167\uff08Read View\uff09\uff0c\u6574\u4e2a\u4e8b\u52a1\u671f\u95f4\u7684\u6240\u6709\u8bfb\u53d6\u64cd\u4f5c\u90fd\u57fa\u4e8e\u8fd9\u4e2a\u5feb\u7167\uff0c\u4ece\u800c\u4fdd\u8bc1\u4e86\u53ef\u91cd\u590d\u8bfb\u3002 \u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0cInnoDB\u5728\u53ef\u91cd\u590d\u8bfb\u7ea7\u522b\u4e0b\uff0c\u901a\u8fc7\u591a\u7248\u672c\u5e76\u53d1\u63a7\u5236\uff08MVCC\uff09\u548cnext-key locking\u6280\u672f\uff0c\u5f88\u5927\u7a0b\u5ea6\u4e0a\u907f\u514d\u4e86\u5e7b\u8bfb\u73b0\u8c61\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E6%9C%89%E4%BB%80%E4%B9%88/#4-serializable","title":"4. \u4e32\u884c\u5316 (Serializable)","text":"<p>\u8fd9\u662f\u6700\u9ad8\u7684\u9694\u79bb\u7ea7\u522b\u3002\u5b83\u5f3a\u5236\u4e8b\u52a1\u4e32\u884c\u6267\u884c\uff0c\u5373\u4e00\u4e2a\u63a5\u4e00\u4e2a\u5730\u5904\u7406\uff0c\u4ece\u800c\u907f\u514d\u4e86\u6240\u6709\u5e76\u53d1\u95ee\u9898\u3002</p> <ul> <li>\u89e3\u51b3\u7684\u95ee\u9898\uff1a \u810f\u8bfb\u3001\u4e0d\u53ef\u91cd\u590d\u8bfb\u3001\u5e7b\u8bfb\u3002</li> <li>\u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898\uff1a \u65e0\u3002</li> <li>\u5b9e\u73b0\u65b9\u5f0f\uff1a \u901a\u5e38\u901a\u8fc7\u5bf9\u8bfb\u53d6\u7684\u6bcf\u4e00\u884c\u6570\u636e\u90fd\u52a0\u4e0a\u8bfb\u5199\u9501\u6765\u5b9e\u73b0\u3002\u5f53\u591a\u4e2a\u4e8b\u52a1\u5bf9\u540c\u4e00\u8bb0\u5f55\u8fdb\u884c\u8bfb\u5199\u64cd\u4f5c\u65f6\uff0c\u5982\u679c\u53d1\u751f\u51b2\u7a81\uff0c\u540e\u8bbf\u95ee\u7684\u4e8b\u52a1\u5fc5\u987b\u7b49\u5f85\u524d\u4e00\u4e2a\u4e8b\u52a1\u6267\u884c\u5b8c\u6210\u3002</li> <li>\u4f18\u70b9\uff1a \u63d0\u4f9b\u4e86\u6700\u9ad8\u7ea7\u522b\u7684\u6570\u636e\u4e00\u81f4\u6027\u3002</li> <li>\u7f3a\u70b9\uff1a \u6027\u80fd\u6700\u4f4e\uff0c\u56e0\u4e3a\u5e76\u53d1\u5ea6\u5927\u5927\u964d\u4f4e\uff0c\u53ef\u80fd\u5bfc\u81f4\u5927\u91cf\u7684\u8d85\u65f6\u548c\u9501\u7ade\u4e89\uff0c\u4e00\u822c\u4e0d\u63a8\u8350\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E4%BC%9A%E5%88%9B%E5%BB%BA%E4%B8%B4%E6%97%B6%E8%A1%A8/","title":"\u4ec0\u4e48\u65f6\u5019\u4f1a\u521b\u5efa\u4e34\u65f6\u8868","text":"<p>MySQL\u5728\u591a\u79cd\u60c5\u51b5\u4e0b\u4f1a\u521b\u5efa\u4e34\u65f6\u8868\uff0c\u8fd9\u53ef\u4ee5\u5206\u4e3a\u4e24\u5927\u7c7b\uff1a\u7531\u7528\u6237\u663e\u5f0f\u521b\u5efa\u548c\u7531MySQL\u670d\u52a1\u5668\u5728\u6267\u884c\u7279\u5b9aSQL\u8bed\u53e5\u65f6\u9690\u5f0f\uff08\u5185\u90e8\uff09\u521b\u5efa\u3002\u7406\u89e3\u8fd9\u4e9b\u573a\u666f\u5bf9\u4e8e\u6570\u636e\u5e93\u6027\u80fd\u4f18\u5316\u81f3\u5173\u91cd\u8981\uff0c\u56e0\u4e3a\u4e34\u65f6\u8868\u7684\u521b\u5efa\uff0c\u5c24\u5176\u662f\u5728\u78c1\u76d8\u4e0a\u521b\u5efa\u65f6\uff0c\u4f1a\u6d88\u8017\u989d\u5916\u7684I/O\u548cCPU\u8d44\u6e90\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E4%BC%9A%E5%88%9B%E5%BB%BA%E4%B8%B4%E6%97%B6%E8%A1%A8/#1-external-temporary-tables","title":"1. \u7528\u6237\u663e\u5f0f\u521b\u5efa (External Temporary Tables)","text":"<p>\u7528\u6237\u53ef\u4ee5\u6839\u636e\u4e1a\u52a1\u9700\u6c42\uff0c\u5728\u4f1a\u8bdd\u4e2d\u624b\u52a8\u521b\u5efa\u4e34\u65f6\u8868\u3002\u8fd9\u79cd\u4e34\u65f6\u8868\u4ec5\u5728\u5f53\u524d\u7684\u6570\u636e\u5e93\u8fde\u63a5\u4e2d\u53ef\u89c1\uff0c\u5f53\u8fde\u63a5\u5173\u95ed\u65f6\u4f1a\u81ea\u52a8\u88ab\u5220\u9664\u3002</p> <p>\u4f7f\u7528\u573a\u666f\uff1a *   \u5b58\u50a8\u590d\u6742\u67e5\u8be2\u7684\u4e2d\u95f4\u7ed3\u679c\uff1a\u5f53\u9700\u8981\u5bf9\u4e00\u4e2a\u5927\u7684\u6570\u636e\u96c6\u8fdb\u884c\u591a\u6b21\u590d\u6742\u7684\u67e5\u8be2\u6216\u5904\u7406\u65f6\uff0c\u53ef\u4ee5\u5148\u5c06\u7b5b\u9009\u51fa\u7684\u5b50\u96c6\u6570\u636e\u5b58\u5165\u4e34\u65f6\u8868\uff0c\u540e\u7eed\u64cd\u4f5c\u76f4\u63a5\u9488\u5bf9\u8fd9\u4e2a\u5c0f\u5f97\u591a\u7684\u4e34\u65f6\u8868\u8fdb\u884c\uff0c\u4ece\u800c\u63d0\u9ad8\u6548\u7387\u3002 *   \u5927\u6570\u636e\u91cf\u7b5b\u9009\uff1a\u4ece\u4e00\u4e2a\u975e\u5e38\u5927\u7684\u8868\u4e2d\u7b5b\u9009\u51fa\u5c11\u91cf\u6570\u636e\u8fdb\u884c\u540e\u7eed\u5904\u7406\u3002 *   \u4fdd\u5b58\u4e34\u65f6\u6570\u636e\uff1a\u5728\u5b58\u50a8\u8fc7\u7a0b\u6216\u5e94\u7528\u7a0b\u5e8f\u4e2d\uff0c\u9700\u8981\u4e00\u4e2a\u4e34\u65f6\u7684\u5730\u65b9\u5b58\u653e\u4f1a\u8bdd\u671f\u95f4\u9700\u8981\u7528\u5230\u7684\u6570\u636e\u3002</p> <p>\u521b\u5efa\u8bed\u6cd5\uff1a</p> <pre><code>CREATE TEMPORARY TABLE temp_table_name (\n    -- \u5217\u5b9a\u4e49\n);\n\n-- \u6216\u8005\u4ece\u67e5\u8be2\u7ed3\u679c\u76f4\u63a5\u521b\u5efa\nCREATE TEMPORARY TABLE temp_table_name AS SELECT ...;\n</code></pre>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E4%BC%9A%E5%88%9B%E5%BB%BA%E4%B8%B4%E6%97%B6%E8%A1%A8/#2-mysql-internal-temporary-tables","title":"2. MySQL\u9690\u5f0f\u521b\u5efa (Internal Temporary Tables)","text":"<p>\u5f53MySQL\u65e0\u6cd5\u76f4\u63a5\u901a\u8fc7\u7d22\u5f15\u6216\u5176\u4ed6\u9ad8\u6548\u65b9\u5f0f\u6765\u5b8c\u6210\u67d0\u4e9b\u64cd\u4f5c\u65f6\uff0c\u5b83\u4f1a\u5728\u540e\u53f0\u81ea\u52a8\u521b\u5efa\u5185\u90e8\u4e34\u65f6\u8868\u6765\u8f85\u52a9\u5904\u7406\u3002 \u8fd9\u5bf9\u7528\u6237\u662f\u900f\u660e\u7684\uff0c\u4f46\u53ef\u4ee5\u901a\u8fc7<code>EXPLAIN</code>\u547d\u4ee4\u7684<code>Extra</code>\u5217\u4e2d\u662f\u5426\u51fa\u73b0 <code>Using temporary</code> \u6765\u5224\u65ad\u3002</p> <p>\u5e38\u89c1\u89e6\u53d1\u573a\u666f\uff1a</p> <ul> <li> <p>\u6392\u5e8f\uff08ORDER BY\uff09\u4e0e\u5206\u7ec4\uff08GROUP BY\uff09\u64cd\u4f5c\uff1a</p> <ul> <li>\u5f53<code>ORDER BY</code>\u548c<code>GROUP BY</code>\u5b50\u53e5\u4e2d\u7684\u5217\u4e0d\u4e00\u81f4\u65f6\u3002</li> <li>\u5f53<code>ORDER BY</code>\u6216<code>GROUP BY</code>\u7684\u5217\u6765\u81ea\u4e8e\u8fde\u63a5\u67e5\u8be2\u4e2d\u7684\u975e\u9a71\u52a8\u8868\uff08\u975e\u7b2c\u4e00\u5f20\u8868\uff09\u65f6\u3002</li> <li>\u5f53\u6392\u5e8f\u6216\u5206\u7ec4\u7684\u5217\u6ca1\u6709\u5408\u9002\u7684\u7d22\u5f15\u53ef\u7528\uff0c\u6216\u8005\u6392\u5e8f\u65b9\u5411\u4e0e\u7d22\u5f15\u987a\u5e8f\u4e0d\u4e00\u81f4\u65f6\uff0cMySQL\u9700\u8981\u5c06\u7ed3\u679c\u96c6\u653e\u5165\u4e34\u65f6\u8868\u518d\u8fdb\u884c\u6392\u5e8f\u3002</li> </ul> </li> <li> <p>\u53bb\u91cd\uff08DISTINCT\uff09\u64cd\u4f5c\uff1a</p> <ul> <li>\u5f53<code>DISTINCT</code>\u5173\u952e\u5b57\u548c<code>ORDER BY</code>\u4e00\u8d77\u4f7f\u7528\u65f6\u3002</li> <li>\u5982\u679c<code>DISTINCT</code>\u64cd\u4f5c\u7684\u5217\u4e0a\u6ca1\u6709\u7d22\u5f15\uff0cMySQL\u53ef\u80fd\u9700\u8981\u4f7f\u7528\u4e34\u65f6\u8868\u6765\u5e2e\u52a9\u53bb\u91cd\u3002</li> </ul> </li> <li> <p>UNION \u64cd\u4f5c\uff1a</p> <ul> <li><code>UNION</code>\u67e5\u8be2\u4f1a\u5408\u5e76\u591a\u4e2a<code>SELECT</code>\u8bed\u53e5\u7684\u7ed3\u679c\u96c6\u5e76\u53bb\u9664\u91cd\u590d\u7684\u884c\uff0c\u8fd9\u4e2a\u53bb\u91cd\u8fc7\u7a0b\u901a\u5e38\u9700\u8981\u4f7f\u7528\u4e34\u65f6\u8868\u6765\u5b8c\u6210\u3002</li> <li>\u76f8\u6bd4\u4e4b\u4e0b\uff0c<code>UNION ALL</code>\u4e0d\u8fdb\u884c\u53bb\u91cd\uff0c\u56e0\u6b64\u5728\u5f88\u591a\u60c5\u51b5\u4e0b\u53ef\u4ee5\u907f\u514d\u521b\u5efa\u4e34\u65f6\u8868\u3002</li> </ul> </li> <li> <p>\u5b50\u67e5\u8be2\u4e0e\u6d3e\u751f\u8868\uff1a</p> <ul> <li>FROM\u5b50\u53e5\u4e2d\u7684\u5b50\u67e5\u8be2\uff08\u6d3e\u751f\u8868\uff09\u7684\u7ed3\u679c\u901a\u5e38\u4f1a\u88ab\u7269\u5316\u5230\u4e00\u4e2a\u5185\u90e8\u4e34\u65f6\u8868\u4e2d\u3002</li> <li>\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u4e3a\u4e86\u4f18\u5316<code>IN</code>\u6216<code>EXISTS</code>\u5b50\u53e5\u4e2d\u7684\u5b50\u67e5\u8be2\uff0cMySQL\u4e5f\u53ef\u80fd\u4f1a\u5c06\u5176\u7ed3\u679c\u5b58\u5165\u4e34\u65f6\u8868\u3002</li> </ul> </li> <li> <p>\u4f7f\u7528\u7279\u5b9a\u7b97\u6cd5\u6216\u89c6\u56fe\uff1a</p> <ul> <li>\u5f53\u89c6\u56fe\u7684\u7b97\u6cd5\u662f<code>TEMPTABLE</code>\u65f6\uff08\u5373\u65e0\u6cd5\u5c06\u89c6\u56fe\u7684\u67e5\u8be2\u903b\u8f91\u4e0e\u5916\u90e8\u67e5\u8be2\u5408\u5e76\uff09\u3002</li> <li>\u4f7f\u7528<code>UNION</code>\u6216\u805a\u5408\u51fd\u6570\u7684\u89c6\u56fe\u3002</li> </ul> </li> <li> <p>\u5176\u4ed6\u590d\u6742\u64cd\u4f5c\uff1a</p> <ul> <li>\u591a\u8868<code>UPDATE</code>\u8bed\u53e5\u3002</li> <li>\u8ba1\u7b97<code>COUNT(DISTINCT ...)</code>\u6216<code>GROUP_CONCAT()</code>\u8868\u8fbe\u5f0f\u65f6\u3002</li> <li>\u5728\u8bc4\u4f30\u7a97\u53e3\u51fd\u6570\u65f6\uff0c\u4e5f\u53ef\u80fd\u9700\u8981\u4e34\u65f6\u8868\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E4%BC%9A%E5%88%9B%E5%BB%BA%E4%B8%B4%E6%97%B6%E8%A1%A8/#_1","title":"\u5185\u5b58\u4e34\u65f6\u8868\u4e0e\u78c1\u76d8\u4e34\u65f6\u8868","text":"<p>MySQL\u521b\u5efa\u7684\u5185\u90e8\u4e34\u65f6\u8868\u9996\u5148\u4f1a\u5c1d\u8bd5\u5728\u5185\u5b58\u4e2d\u521b\u5efa\uff0c\u56e0\u4e3a\u8fd9\u6837\u901f\u5ea6\u6700\u5feb\u3002 \u5185\u5b58\u4e34\u65f6\u8868\u7531<code>TempTable</code>\u5b58\u50a8\u5f15\u64ce\uff08MySQL 8.0\u5f00\u59cb\u7684\u9ed8\u8ba4\u5f15\u64ce\uff09\u6216<code>MEMORY</code>\u5b58\u50a8\u5f15\u64ce\u7ba1\u7406\u3002</p> <p>\u4f46\u662f\uff0c\u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\uff0c\u5185\u5b58\u4e34\u65f6\u8868\u4f1a\u88ab\u8f6c\u6362\u4e3a\u78c1\u76d8\u4e34\u65f6\u8868\uff0c\u6216\u8005\u76f4\u63a5\u5728\u78c1\u76d8\u4e0a\u521b\u5efa\uff0c\u8fd9\u4f1a\u663e\u8457\u589e\u52a0I/O\u5f00\u9500\uff0c\u5f71\u54cd\u6027\u80fd\uff1a *   \u4e34\u65f6\u8868\u5927\u5c0f\u8d85\u8fc7\u9650\u5236\uff1a\u5f53\u5185\u5b58\u4e34\u65f6\u8868\u7684\u5927\u5c0f\u8d85\u8fc7\u4e86<code>tmp_table_size</code>\u548c<code>max_heap_table_size</code>\u4e24\u4e2a\u53c2\u6570\u4e2d\u7684\u8f83\u5c0f\u503c\u65f6\uff0c\u5b83\u4f1a\u81ea\u52a8\u8f6c\u6362\u4e3a\u78c1\u76d8\u8868\u3002 *   \u8868\u4e2d\u5305\u542b\u5927\u6570\u636e\u7c7b\u578b\uff1a\u5f53\u8868\u4e2d\u5b58\u5728<code>BLOB</code>\u6216<code>TEXT</code>\u7c7b\u578b\u7684\u5217\u65f6\u3002 *   \u5b57\u7b26\u4e32\u5217\u8fc7\u957f\uff1a\u5728<code>GROUP BY</code>\u6216<code>DISTINCT</code>\u7684\u5217\u4e2d\u5305\u542b\u957f\u5ea6\u8d85\u8fc7512\u5b57\u8282\u7684\u5b57\u7b26\u4e32\u5217\u3002 *   UNION\u67e5\u8be2\u4e2d\u7684\u5b57\u7b26\u4e32\u5217\u8fc7\u957f\uff1a<code>UNION</code>\u6216<code>UNION ALL</code>\u7684\u67e5\u8be2\u5217\u4e2d\u5b58\u5728\u6700\u5927\u957f\u5ea6\u8d85\u8fc7512\u7684\u5b57\u7b26\u4e32\u5217\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BB%80%E4%B9%88%E6%98%AF%E4%BA%8B%E5%8A%A1%EF%BC%8C%E4%BA%8B%E5%8A%A1%E6%9C%89%E5%93%AA%E5%87%A0%E7%A7%8D%E7%89%B9%E6%80%A7/","title":"\u4ec0\u4e48\u662f\u4e8b\u52a1\uff0c\u4e8b\u52a1\u6709\u54ea\u51e0\u79cd\u7279\u6027","text":"<p>\u4e8b\u52a1\uff08Transaction\uff09\u662f\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf\uff08DBMS\uff09\u6267\u884c\u8fc7\u7a0b\u4e2d\u7684\u4e00\u4e2a\u903b\u8f91\u5355\u4f4d\uff0c\u5b83\u7531\u4e00\u4e2a\u6216\u591a\u4e2a\u6570\u636e\u5e93\u64cd\u4f5c\u5e8f\u5217\u7ec4\u6210\u3002\u8fd9\u4e9b\u64cd\u4f5c\u5728\u903b\u8f91\u4e0a\u88ab\u89c6\u4e3a\u4e00\u4e2a\u4e0d\u53ef\u5206\u5272\u7684\u6574\u4f53\u5de5\u4f5c\u5355\u5143\u3002\u4e8b\u52a1\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u4fdd\u8bc1\u5373\u4f7f\u5728\u5e76\u53d1\u8bbf\u95ee\u548c\u7cfb\u7edf\u6545\u969c\u7684\u60c5\u51b5\u4e0b\uff0c\u6570\u636e\u5e93\u4e5f\u80fd\u4fdd\u6301\u6570\u636e\u7684\u5b8c\u6574\u6027\u548c\u4e00\u81f4\u6027\u3002</p> <p>\u4e00\u4e2a\u7ecf\u5178\u7684\u4e8b\u52a1\u4f8b\u5b50\u662f\u94f6\u884c\u8f6c\u8d26\uff1a\u4ece\u8d26\u6237A\u5411\u8d26\u6237B\u8f6c\u8d26100\u5143\u3002\u8fd9\u4e2a\u64cd\u4f5c\u5305\u542b\u4e24\u4e2a\u6b65\u9aa4\uff1a 1.  \u4ece\u8d26\u6237A\u7684\u4f59\u989d\u4e2d\u51cf\u53bb100\u5143\u3002 2.  \u5411\u8d26\u6237B\u7684\u4f59\u989d\u4e2d\u589e\u52a0100\u5143\u3002</p> <p>\u8fd9\u4e24\u4e2a\u6b65\u9aa4\u5fc5\u987b\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u6765\u6267\u884c\u3002\u5982\u679c\u53ea\u5b8c\u6210\u4e86\u7b2c\u4e00\u6b65\u800c\u7b2c\u4e8c\u6b65\u5931\u8d25\uff08\u4f8b\u5982\uff0c\u56e0\u4e3a\u7cfb\u7edf\u7a81\u7136\u5d29\u6e83\uff09\uff0c\u90a3\u4e48\u8d26\u6237A\u7684\u94b1\u51cf\u5c11\u4e86\uff0c\u4f46\u8d26\u6237B\u7684\u94b1\u6ca1\u6709\u589e\u52a0\uff0c\u603b\u91d1\u989d\u5c31\u4e0d\u5e73\u4e86\uff0c\u6570\u636e\u5c31\u5904\u4e8e\u4e0d\u4e00\u81f4\u72b6\u6001\u3002\u4e8b\u52a1\u673a\u5236\u786e\u4fdd\u4e86\u8fd9\u4e24\u4e2a\u64cd\u4f5c\u8981\u4e48\u90fd\u6210\u529f\u5b8c\u6210\uff0c\u8981\u4e48\u5982\u679c\u5176\u4e2d\u4efb\u4f55\u4e00\u6b65\u5931\u8d25\uff0c\u6240\u6709\u5df2\u505a\u7684\u4fee\u6539\u90fd\u4f1a\u88ab\u64a4\u9500\uff08\u56de\u6eda\uff09\uff0c\u4f7f\u6570\u636e\u5e93\u6062\u590d\u5230\u64cd\u4f5c\u5f00\u59cb\u524d\u7684\u72b6\u6001\u3002</p> <p>\u4e8b\u52a1\u6709\u56db\u79cd\u57fa\u672c\u7279\u6027\uff0c\u901a\u5e38\u88ab\u79f0\u4e3aACID\u7279\u6027\uff0c\u5b83\u4eec\u662f\u4fdd\u8bc1\u6570\u636e\u5e93\u53ef\u9760\u6027\u7684\u57fa\u77f3\uff1a</p> <ol> <li> <p>\u539f\u5b50\u6027\uff08Atomicity\uff09\uff1a</p> <ul> <li>\u5b9a\u4e49\uff1a\u539f\u5b50\u6027\u786e\u4fdd\u4e8b\u52a1\u4e2d\u7684\u6240\u6709\u64cd\u4f5c\u90fd\u662f\u4e00\u4e2a\u4e0d\u53ef\u5206\u5272\u7684\u5355\u5143\u3002\u8fd9\u4e9b\u64cd\u4f5c\u8981\u4e48\u5168\u90e8\u6210\u529f\u6267\u884c\uff0c\u8981\u4e48\u5728\u4efb\u4f55\u4e00\u4e2a\u64cd\u4f5c\u5931\u8d25\u65f6\u5168\u90e8\u56de\u6eda\uff0c\u6570\u636e\u5e93\u6062\u590d\u5230\u4e8b\u52a1\u5f00\u59cb\u524d\u7684\u72b6\u6001\u3002</li> <li>\u7406\u89e3\uff1a\u4e8b\u52a1\u5c31\u50cf\u4e00\u4e2a\u201c\u539f\u5b50\u201d\u64cd\u4f5c\uff0c\u4e0d\u53ef\u518d\u5206\u3002\u5bf9\u4e8e\u4e0a\u9762\u7684\u8f6c\u8d26\u4f8b\u5b50\uff0c\u539f\u5b50\u6027\u4fdd\u8bc1\u4e86\u4e0d\u4f1a\u53ea\u53d1\u751f\u201cA\u8d26\u6237\u6263\u6b3e\u201d\u800c\u6ca1\u6709\u201cB\u8d26\u6237\u6536\u6b3e\u201d\u7684\u60c5\u51b5\u3002</li> </ul> </li> <li> <p>\u4e00\u81f4\u6027\uff08Consistency\uff09\uff1a</p> <ul> <li>\u5b9a\u4e49\uff1a\u4e00\u81f4\u6027\u4fdd\u8bc1\u4e8b\u52a1\u7684\u6267\u884c\u5fc5\u987b\u4f7f\u6570\u636e\u5e93\u4ece\u4e00\u4e2a\u4e00\u81f4\u7684\u72b6\u6001\u8f6c\u53d8\u5230\u53e6\u4e00\u4e2a\u4e00\u81f4\u7684\u72b6\u6001\u3002\u5728\u4e8b\u52a1\u5f00\u59cb\u4e4b\u524d\u548c\u4e8b\u52a1\u7ed3\u675f\u4ee5\u540e\uff0c\u6570\u636e\u5e93\u7684\u5b8c\u6574\u6027\u7ea6\u675f\uff08\u5982\u4e3b\u952e\u3001\u5916\u952e\u3001\u552f\u4e00\u6027\u7ea6\u675f\u3001\u4e1a\u52a1\u89c4\u5219\u7b49\uff09\u6ca1\u6709\u88ab\u7834\u574f\u3002</li> <li>\u7406\u89e3\uff1a\u4e00\u81f4\u6027\u662f\u4e8b\u52a1\u7684\u6700\u7ec8\u76ee\u6807\u3002\u5bf9\u4e8e\u8f6c\u8d26\u4f8b\u5b50\uff0c\u4e00\u81f4\u6027\u610f\u5473\u7740\u65e0\u8bba\u4e8b\u52a1\u6210\u529f\u4e0e\u5426\uff0c\u94f6\u884c\u7cfb\u7edf\u4e2d\u6240\u6709\u8d26\u6237\u7684\u603b\u91d1\u989d\u5e94\u8be5\u4fdd\u6301\u4e0d\u53d8\u3002\u5982\u679c\u4e8b\u52a1\u6210\u529f\uff0c\u662fA\u51cf\u5c11100\uff0cB\u589e\u52a0100\uff0c\u603b\u989d\u4e0d\u53d8\uff1b\u5982\u679c\u4e8b\u52a1\u5931\u8d25\u56de\u6eda\uff0cA\u548cB\u7684\u4f59\u989d\u90fd\u56de\u5230\u521d\u59cb\u72b6\u6001\uff0c\u603b\u989d\u4e5f\u4e0d\u53d8\u3002\u539f\u5b50\u6027\u3001\u9694\u79bb\u6027\u548c\u6301\u4e45\u6027\u90fd\u662f\u4e3a\u4e86\u4fdd\u8bc1\u4e00\u81f4\u6027\u800c\u670d\u52a1\u7684\u3002</li> </ul> </li> <li> <p>\u9694\u79bb\u6027\uff08Isolation\uff09\uff1a</p> <ul> <li>\u5b9a\u4e49\uff1a\u9694\u79bb\u6027\u8981\u6c42\u5e76\u53d1\u6267\u884c\u7684\u591a\u4e2a\u4e8b\u52a1\u4e4b\u95f4\u5e94\u8be5\u662f\u76f8\u4e92\u9694\u79bb\u7684\uff0c\u5373\u4e00\u4e2a\u4e8b\u52a1\u7684\u6267\u884c\u4e0d\u5e94\u88ab\u5176\u4ed6\u5e76\u53d1\u6267\u884c\u7684\u4e8b\u52a1\u5e72\u6270\u3002\u4ece\u6bcf\u4e2a\u4e8b\u52a1\u7684\u89d2\u5ea6\u770b\uff0c\u5b83\u90fd\u611f\u89c9\u4e0d\u5230\u5176\u4ed6\u4e8b\u52a1\u7684\u5b58\u5728\uff0c\u5c31\u597d\u50cf\u7cfb\u7edf\u4e2d\u53ea\u6709\u5b83\u81ea\u5df1\u5728\u8fd0\u884c\u4e00\u6837\u3002</li> <li>\u7406\u89e3\uff1a\u5982\u679c\u8d26\u6237A\u540c\u65f6\u5728\u5411\u8d26\u6237B\u8f6c\u8d26\uff0c\u5e76\u4e14\u4e5f\u5728\u5411\u8d26\u6237C\u8f6c\u8d26\uff0c\u9694\u79bb\u6027\u786e\u4fdd\u4e86\u8fd9\u4e24\u4e2a\u8f6c\u8d26\u4e8b\u52a1\u4e0d\u4f1a\u76f8\u4e92\u5f71\u54cd\uff0c\u6bcf\u4e2a\u4e8b\u52a1\u770b\u5230\u7684\u6570\u636e\u72b6\u6001\u90fd\u662f\u72ec\u7acb\u7684\u3001\u4e00\u81f4\u7684\u3002\u9694\u79bb\u6027\u901a\u8fc7\u4e0d\u540c\u7684\u9694\u79bb\u7ea7\u522b\u6765\u5b9a\u4e49\u5176\u5f3a\u5ea6\uff0c\u4ee5\u9632\u6b62\u810f\u8bfb\u3001\u4e0d\u53ef\u91cd\u590d\u8bfb\u3001\u5e7b\u8bfb\u7b49\u5e76\u53d1\u95ee\u9898\u3002</li> </ul> </li> <li> <p>\u6301\u4e45\u6027\uff08Durability\uff09\uff1a</p> <ul> <li>\u5b9a\u4e49\uff1a\u6301\u4e45\u6027\u4fdd\u8bc1\u4e00\u65e6\u4e8b\u52a1\u6210\u529f\u63d0\u4ea4\uff08COMMIT\uff09\uff0c\u5b83\u5bf9\u6570\u636e\u5e93\u7684\u66f4\u6539\u5c31\u662f\u6c38\u4e45\u6027\u7684\u3002\u5373\u4f7f\u5728\u63d0\u4ea4\u4e4b\u540e\u7cfb\u7edf\u53d1\u751f\u6545\u969c\uff08\u5982\u65ad\u7535\u3001\u670d\u52a1\u5668\u5d29\u6e83\u7b49\uff09\uff0c\u5df2\u63d0\u4ea4\u7684\u4e8b\u52a1\u7ed3\u679c\u4e5f\u4e0d\u5e94\u4e22\u5931\u3002</li> <li>\u7406\u89e3\uff1a\u4e00\u65e6\u94f6\u884c\u7cfb\u7edf\u63d0\u793a\u8f6c\u8d26\u6210\u529f\uff0c\u90a3\u4e48\u8fd9\u4e2a\u8f6c\u8d26\u64cd\u4f5c\u7684\u7ed3\u679c\u5c31\u5fc5\u987b\u88ab\u6c38\u4e45\u8bb0\u5f55\u4e0b\u6765\u3002\u5373\u4f7f\u94f6\u884c\u7684\u670d\u52a1\u5668\u7acb\u5373\u5b95\u673a\u91cd\u542f\uff0c\u8fd9\u7b14\u8f6c\u8d26\u4e5f\u5e94\u8be5\u662f\u5b8c\u6210\u4e86\u7684\uff0c\u4e0d\u80fd\u51ed\u7a7a\u6d88\u5931\u3002\u6301\u4e45\u6027\u901a\u5e38\u901a\u8fc7\u6570\u636e\u5e93\u7684\u65e5\u5fd7\u7cfb\u7edf\uff08\u5982Redo Log\uff09\u548c\u6062\u590d\u673a\u5236\u6765\u5b9e\u73b0\u3002</li> </ul> </li> <li> <p>\u539f\u5b50\u6027\uff08Atomicity\uff09\uff1a\u8981\u4e48\u5168\u505a\uff0c\u8981\u4e48\u5168\u4e0d\u505a\u3002</p> </li> <li>\u4e00\u81f4\u6027\uff08Consistency\uff09\uff1a\u4e8b\u52a1\u524d\u540e\uff0c\u6570\u636e\u5b8c\u6574\u6027\u7ea6\u675f\u4fdd\u6301\u4e0d\u53d8\u3002</li> <li>\u9694\u79bb\u6027\uff08Isolation\uff09\uff1a\u5e76\u53d1\u4e8b\u52a1\u4e4b\u95f4\u4e92\u4e0d\u5e72\u6270\u3002</li> <li>\u6301\u4e45\u6027\uff08Durability\uff09\uff1a\u4e00\u65e6\u63d0\u4ea4\uff0c\u7ed3\u679c\u6c38\u4e45\u6709\u6548\u3002</li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BB%80%E4%B9%88%E6%A0%B7%E7%9A%84%E6%83%85%E5%86%B5%E9%9C%80%E8%A6%81%E8%AE%BE%E7%BD%AE%E7%B4%A2%E5%BC%95/","title":"\u4ec0\u4e48\u6837\u7684\u60c5\u51b5\u9700\u8981\u8bbe\u7f6e\u7d22\u5f15","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BB%80%E4%B9%88%E6%A0%B7%E7%9A%84%E6%83%85%E5%86%B5%E9%9C%80%E8%A6%81%E8%AE%BE%E7%BD%AE%E7%B4%A2%E5%BC%95/#_1","title":"\u4f55\u65f6\u9700\u8981\u521b\u5efa\u7d22\u5f15\uff1f","text":"<p>\u521b\u5efa\u7d22\u5f15\u7684\u4e3b\u8981\u76ee\u7684\u662f\u4e3a\u4e86\u52a0\u5feb\u6570\u636e\u7684\u68c0\u7d22\u901f\u5ea6\u3002 \u5728\u4ee5\u4e0b\u51e0\u79cd\u60c5\u51b5\u4e0b\uff0c\u4e3a\u5b57\u6bb5\u521b\u5efa\u7d22\u5f15\u901a\u5e38\u662f\u660e\u667a\u7684\u9009\u62e9\uff1a</p> <ul> <li>\u4e3b\u952e\u548c\u5916\u952e\uff1a \u4e3b\u952e\u5177\u6709\u552f\u4e00\u6027\uff0c\u662f\u6570\u636e\u8868\u4e2d\u6bcf\u4e00\u884c\u6570\u636e\u7684\u552f\u4e00\u6807\u8bc6\u3002\u4e3a\u4e3b\u952e\u521b\u5efa\u7d22\u5f15\u53ef\u4ee5\u6781\u5927\u5730\u63d0\u5347\u6570\u636e\u68c0\u7d22\u6548\u7387\u3002\u5916\u952e\u7528\u4e8e\u5efa\u7acb\u8868\u4e0e\u8868\u4e4b\u95f4\u7684\u5173\u8054\uff0c\u4e3a\u5176\u521b\u5efa\u7d22\u5f15\u53ef\u4ee5\u52a0\u901f\u8fde\u63a5\u67e5\u8be2\u3002</li> <li>\u7ecf\u5e38\u4f5c\u4e3a\u67e5\u8be2\u6761\u4ef6\u7684\u5b57\u6bb5\uff1a \u5982\u679c\u4e00\u4e2a\u5b57\u6bb5\u7ecf\u5e38\u51fa\u73b0\u5728<code>WHERE</code>\u5b50\u53e5\u4e2d\uff0c\u90a3\u4e48\u4e3a\u8be5\u5b57\u6bb5\u521b\u5efa\u7d22\u5f15\u5c06\u5927\u5927\u63d0\u9ad8\u67e5\u8be2\u6548\u7387\uff0c\u7279\u522b\u662f\u5728\u6570\u636e\u91cf\u5e9e\u5927\u7684\u8868\u4e2d\u3002</li> <li>\u7528\u4e8e\u6392\u5e8f\u548c\u5206\u7ec4\u7684\u5b57\u6bb5\uff1a \u5bf9\u7ecf\u5e38\u7528\u4e8e<code>ORDER BY</code>\u548c<code>GROUP BY</code>\u5b50\u53e5\u7684\u5b57\u6bb5\u5efa\u7acb\u7d22\u5f15\uff0c\u53ef\u4ee5\u6709\u6548\u63d0\u5347\u6392\u5e8f\u548c\u5206\u7ec4\u64cd\u4f5c\u7684\u6027\u80fd\uff0c\u56e0\u4e3a\u7d22\u5f15\u672c\u8eab\u5df2\u7ecf\u5bf9\u6570\u636e\u8fdb\u884c\u4e86\u6392\u5e8f\u3002</li> <li>\u5177\u6709\u552f\u4e00\u6027\u7ea6\u675f\u7684\u5b57\u6bb5\uff1a \u5bf9\u4e8e\u4e1a\u52a1\u4e0a\u8981\u6c42\u552f\u4e00\u7684\u5b57\u6bb5\uff0c\u5982\u7528\u6237\u90ae\u7bb1\u6216\u624b\u673a\u53f7\u7801\uff0c\u521b\u5efa\u552f\u4e00\u7d22\u5f15\u4e0d\u4ec5\u80fd\u4fdd\u8bc1\u6570\u636e\u7684\u552f\u4e00\u6027\uff0c\u8fd8\u80fd\u63d0\u9ad8\u67e5\u8be2\u901f\u5ea6\u3002</li> <li>\u8fde\u63a5\u67e5\u8be2\u4e2d\u7684\u5b57\u6bb5\uff1a \u5728\u591a\u8868\u8fde\u63a5\u67e5\u8be2\u4e2d\uff0c\u4e3a\u8fde\u63a5\u5b57\u6bb5\u521b\u5efa\u7d22\u5f15\u53ef\u4ee5\u663e\u8457\u63d0\u9ad8\u67e5\u8be2\u6027\u80fd\u3002</li> <li>\u5b57\u7b26\u4e32\u5b57\u6bb5\u7684\u524d\u7f00\uff1a \u5bf9\u4e8e\u8f83\u957f\u7684\u5b57\u7b26\u4e32\u5b57\u6bb5\uff0c\u53ef\u4ee5\u8003\u8651\u521b\u5efa\u524d\u7f00\u7d22\u5f15\uff0c\u5373\u53ea\u5bf9\u5b57\u7b26\u4e32\u7684\u524d\u51e0\u4e2a\u5b57\u7b26\u521b\u5efa\u7d22\u5f15\u3002\u8fd9\u6837\u65e2\u80fd\u8282\u7701\u5b58\u50a8\u7a7a\u95f4\uff0c\u53c8\u80fd\u63d0\u9ad8\u67e5\u8be2\u6548\u7387\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BB%80%E4%B9%88%E6%A0%B7%E7%9A%84%E6%83%85%E5%86%B5%E9%9C%80%E8%A6%81%E8%AE%BE%E7%BD%AE%E7%B4%A2%E5%BC%95/#_2","title":"\u4f55\u65f6\u4e0d\u9700\u8981\u521b\u5efa\u7d22\u5f15\uff1f","text":"<p>\u5c3d\u7ba1\u7d22\u5f15\u6709\u5f88\u591a\u4f18\u70b9\uff0c\u4f46\u6ee5\u7528\u7d22\u5f15\u4e5f\u4f1a\u5bf9\u6570\u636e\u5e93\u6027\u80fd\u4ea7\u751f\u8d1f\u9762\u5f71\u54cd\u3002 \u4ee5\u4e0b\u60c5\u51b5\u901a\u5e38\u4e0d\u5efa\u8bae\u521b\u5efa\u7d22\u5f15\uff1a</p> <ul> <li>\u8868\u8bb0\u5f55\u592a\u5c11\u7684\u8868\uff1a \u5bf9\u4e8e\u6570\u636e\u91cf\u975e\u5e38\u5c0f\u7684\u8868\uff0c\u5168\u8868\u626b\u63cf\u7684\u901f\u5ea6\u53ef\u80fd\u6bd4\u4f7f\u7528\u7d22\u5f15\u66f4\u5feb\u3002\u901a\u5e38\u5efa\u8bae\u5728\u6570\u636e\u91cf\u8d85\u8fc7300\u4e07\u65f6\u518d\u8003\u8651\u521b\u5efa\u7d22\u5f15\u3002</li> <li>\u9009\u62e9\u6027\u4f4e\u7684\u5b57\u6bb5\uff1a \u6240\u8c13\u9009\u62e9\u6027\u4f4e\uff0c\u662f\u6307\u5b57\u6bb5\u4e2d\u5b58\u5728\u5927\u91cf\u91cd\u590d\u7684\u503c\uff0c\u4f8b\u5982\u6027\u522b\u3001\u72b6\u6001\u7b49\u3002\u5bf9\u6b64\u7c7b\u5b57\u6bb5\u521b\u5efa\u7d22\u5f15\uff0c\u67e5\u8be2\u4f18\u5316\u5668\u5f88\u53ef\u80fd\u4f1a\u9009\u62e9\u5168\u8868\u626b\u63cf\uff0c\u7d22\u5f15\u7684\u610f\u4e49\u4e0d\u5927\u3002</li> <li>\u4e0d\u5e38\u4f5c\u4e3a\u67e5\u8be2\u6761\u4ef6\u7684\u5b57\u6bb5\uff1a \u5982\u679c\u4e00\u4e2a\u5b57\u6bb5\u5f88\u5c11\u5728<code>WHERE</code>\u3001<code>ORDER BY</code>\u6216<code>GROUP BY</code>\u5b50\u53e5\u4e2d\u4f7f\u7528\uff0c\u90a3\u4e48\u4e3a\u5176\u521b\u5efa\u7d22\u5f15\u53ea\u4f1a\u589e\u52a0\u4e0d\u5fc5\u8981\u7684\u5f00\u9500\u3002</li> <li>\u9891\u7e41\u66f4\u65b0\u7684\u5b57\u6bb5\uff1a \u6570\u636e\u5e93\u5728\u5bf9\u6570\u636e\u8fdb\u884c\u589e\u3001\u5220\u3001\u6539\u64cd\u4f5c\u65f6\uff0c\u4e5f\u9700\u8981\u52a8\u6001\u7ef4\u62a4\u7d22\u5f15\uff0c\u8fd9\u4f1a\u964d\u4f4e\u6570\u636e\u7ef4\u62a4\u7684\u901f\u5ea6\u3002\u56e0\u6b64\uff0c\u5bf9\u4e8e\u9700\u8981\u9891\u7e41\u66f4\u65b0\u7684\u5b57\u6bb5\uff0c\u5e94\u8c28\u614e\u521b\u5efa\u7d22\u5f15\u3002</li> <li>\u53c2\u4e0e\u5217\u8ba1\u7b97\u7684\u5b57\u6bb5\uff1a \u5982\u679c\u67e5\u8be2\u6761\u4ef6\u4e2d\u5bf9\u5b57\u6bb5\u8fdb\u884c\u4e86\u51fd\u6570\u8fd0\u7b97\u6216\u8868\u8fbe\u5f0f\u8ba1\u7b97\uff0c\u7d22\u5f15\u5c06\u4e0d\u4f1a\u751f\u6548\u3002</li> <li>\u65e0\u5e8f\u7684\u503c\uff1a \u50cfUUID\u3001MD5\u3001HASH\u8fd9\u7c7b\u65e0\u5e8f\u7684\u957f\u5b57\u7b26\u4e32\u4e0d\u5efa\u8bae\u4f5c\u4e3a\u7d22\u5f15\uff0c\u56e0\u4e3a\u5b83\u4eec\u5728\u63d2\u5165\u65f6\u53ef\u80fd\u4f1a\u5bfc\u81f4\u9875\u5206\u88c2\uff0c\u5f71\u54cd\u6027\u80fd\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2%E5%AD%98%E5%9C%A8%E4%BB%80%E4%B9%88%E9%97%AE%E9%A2%98%EF%BC%8C%E5%A6%82%E4%BD%95%E6%94%B9%E8%BF%9B/","title":"\u5206\u9875\u67e5\u8be2\u5b58\u5728\u4ec0\u4e48\u95ee\u9898\uff0c\u5982\u4f55\u6539\u8fdb","text":"<p>\u4f20\u7edf\u7684\u5206\u9875\u67e5\u8be2\u901a\u5e38\u4f9d\u8d56\u4e8e <code>LIMIT</code> \u548c <code>OFFSET</code>\uff08\u6216\u7c7b\u4f3c\u7684\u673a\u5236\uff09\u6765\u5b9e\u73b0\u3002\u5ba2\u6237\u7aef\u8bf7\u6c42\u7279\u5b9a\u7684\u9875\u7801\u548c\u6bcf\u9875\u7684\u6570\u636e\u91cf\uff0c\u670d\u52a1\u5668\u636e\u6b64\u8ba1\u7b97\u51fa\u504f\u79fb\u91cf\uff08OFFSET\uff09\u6765\u8df3\u8fc7\u76f8\u5e94\u6570\u91cf\u7684\u6570\u636e\u3002\u5c3d\u7ba1\u5b9e\u73b0\u7b80\u5355\uff0c\u4f46\u8fd9\u79cd\u65b9\u5f0f\u5728\u5904\u7406\u5927\u89c4\u6a21\u6570\u636e\u96c6\u65f6\u4f1a\u66b4\u9732\u51fa\u4e00\u7cfb\u5217\u95ee\u9898\uff1a</p> <ul> <li>\u6df1\u5ea6\u5206\u9875\u6027\u80fd\u4e0b\u964d\uff1a\u5f53\u7528\u6237\u8bf7\u6c42\u7684\u9875\u7801\u975e\u5e38\u9760\u540e\u65f6\uff08\u5373\u6df1\u5ea6\u5206\u9875\uff09\uff0c\u6570\u636e\u5e93\u9700\u8981\u626b\u63cf\u5e76\u8df3\u8fc7\u5927\u91cf\u7684\u8bb0\u5f55\u624d\u80fd\u5230\u8fbe\u6307\u5b9a\u7684\u504f\u79fb\u4f4d\u7f6e\uff0c\u8fd9\u4f1a\u5bfc\u81f4\u67e5\u8be2\u65f6\u95f4\u968f\u7740\u9875\u7801\u7684\u589e\u52a0\u800c\u7ebf\u6027\u589e\u957f\uff0c\u6781\u5927\u5730\u6d88\u8017\u6570\u636e\u5e93\u8d44\u6e90\u3002</li> <li>\u6570\u636e\u4e0d\u4e00\u81f4\uff1a\u5728\u7528\u6237\u6d4f\u89c8\u5206\u9875\u6570\u636e\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5982\u679c\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u53d1\u751f\u589e\u5220\u64cd\u4f5c\uff0c\u4f1a\u5bfc\u81f4\u540e\u7eed\u9875\u9762\u7684\u6570\u636e\u51fa\u73b0\u91cd\u590d\u6216\u9057\u6f0f\u3002 \u4f8b\u5982\uff0c\u5982\u679c\u5728\u7528\u6237\u52a0\u8f7d\u7b2c\u4e8c\u9875\u4e4b\u524d\uff0c\u7b2c\u4e00\u9875\u7684\u6570\u636e\u88ab\u5220\u9664\u6216\u6709\u65b0\u6570\u636e\u63d2\u5165\uff0c\u90a3\u4e48\u7b2c\u4e8c\u9875\u7684\u8d77\u59cb\u70b9\u5c31\u4f1a\u53d1\u751f\u6f02\u79fb\u3002</li> <li>\u8d44\u6e90\u6d88\u8017\u5927\uff1a\u5373\u4f7f\u53ea\u662f\u4e3a\u4e86\u8df3\u8fc7\uff0c\u6570\u636e\u5e93\u4ecd\u7136\u9700\u8981\u52a0\u8f7d\u5927\u91cf\u4e2d\u95f4\u6570\u636e\u5230\u5185\u5b58\u4e2d\uff0c\u8fd9\u4f1a\u589e\u52a0CPU\u548c\u5185\u5b58\u7684\u8d1f\u8f7d\uff0c\u5c24\u5176\u662f\u5728\u9ad8\u5e76\u53d1\u7684\u6df1\u5ea6\u5206\u9875\u573a\u666f\u4e0b\uff0c\u53ef\u80fd\u4f1a\u62d6\u57ae\u6570\u636e\u5e93\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2%E5%AD%98%E5%9C%A8%E4%BB%80%E4%B9%88%E9%97%AE%E9%A2%98%EF%BC%8C%E5%A6%82%E4%BD%95%E6%94%B9%E8%BF%9B/#_1","title":"\u57fa\u4e8e\u6e38\u6807\u7684\u4f18\u5316","text":"<p>\u4e3a\u4e86\u514b\u670d\u4f20\u7edf\u5206\u9875\u7684\u5f0a\u7aef\uff0c\u57fa\u4e8e\u6e38\u6807\u7684\u5206\u9875\uff08Cursor-based Pagination\uff09\uff0c\u4e5f\u5e38\u88ab\u79f0\u4e3a\u201c\u952e\u96c6\u5206\u9875\u201d\uff08Keyset Pagination\uff09\uff0c\u63d0\u4f9b\u4e86\u4e00\u79cd\u66f4\u4e3a\u9ad8\u6548\u548c\u7a33\u5065\u7684\u89e3\u51b3\u65b9\u6848\u3002</p> <p>\u57fa\u4e8e\u6e38\u6807\u7684\u5206\u9875\u4e0d\u4f7f\u7528\u9875\u7801\u548c\u504f\u79fb\u91cf\uff0c\u800c\u662f\u4f9d\u8d56\u4e8e\u4e00\u4e2a\u201c\u6e38\u6807\u201d\uff08Cursor\uff09\u6765\u5b9a\u4f4d\u6570\u636e\u3002\u8fd9\u4e2a\u6e38\u6807\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u6307\u5411\u4e0a\u4e00\u9875\u6700\u540e\u4e00\u6761\u8bb0\u5f55\u7684\u552f\u4e00\u6807\u8bc6\u7b26\u6216\u951a\u70b9\u3002 \u5f53\u5ba2\u6237\u7aef\u8bf7\u6c42\u4e0b\u4e00\u9875\u6570\u636e\u65f6\uff0c\u5b83\u4f1a\u5e26\u4e0a\u8fd9\u4e2a\u6e38\u6807\uff0c\u670d\u52a1\u5668\u7684\u67e5\u8be2\u8bed\u53e5\u5219\u4f1a\u5229\u7528\u8fd9\u4e2a\u6e38\u6807\u4f5c\u4e3a\u8d77\u70b9\uff0c\u83b7\u53d6\u7d27\u968f\u5176\u540e\u7684N\u6761\u8bb0\u5f55\u3002</p> <p>\u8fd9\u4e2a\u6e38\u6807\u901a\u5e38\u662f\u6570\u636e\u8868\u4e2d\u4e00\u4e2a\u5177\u6709\u552f\u4e00\u6027\u4e14\u6709\u5e8f\u7684\u5217\uff0c\u4f8b\u5982\u81ea\u589eID\u3001\u65f6\u95f4\u6233\uff0c\u6216\u8005\u662f\u591a\u4e2a\u5217\u7684\u7ec4\u5408\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2%E5%AD%98%E5%9C%A8%E4%BB%80%E4%B9%88%E9%97%AE%E9%A2%98%EF%BC%8C%E5%A6%82%E4%BD%95%E6%94%B9%E8%BF%9B/#_2","title":"\u57fa\u4e8e\u6e38\u6807\u5206\u9875\u7684\u5b9e\u73b0\u539f\u7406","text":"<p>\u5176\u6838\u5fc3\u601d\u60f3\u662f\u5c06 <code>OFFSET</code> \u67e5\u8be2\u8f6c\u5316\u4e3a\u4e00\u4e2a\u9ad8\u6548\u7684 <code>WHERE</code> \u6761\u4ef6\u67e5\u8be2\u3002</p> <p>\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u4e2a\u6309 <code>created_at</code> \u964d\u5e8f\u6392\u5217\u7684\u8ba2\u5355\u8868\uff0c\u6bcf\u9875\u663e\u793a10\u6761\u8bb0\u5f55\u3002</p> <ul> <li> <p>\u4f20\u7edf\u5206\u9875\u67e5\u8be2\uff08\u7b2c\u4e8c\u9875\uff09\uff1a <code>sql     SELECT * FROM orders ORDER BY created_at DESC LIMIT 10 OFFSET 10;</code>     \u8fd9\u6761\u67e5\u8be2\u4f1a\u5148\u6392\u5e8f\uff0c\u7136\u540e\u8df3\u8fc7\u524d10\u6761\uff0c\u518d\u53d610\u6761\u3002</p> </li> <li> <p>\u57fa\u4e8e\u6e38\u6807\u7684\u5206\u9875\u67e5\u8be2\uff08\u7b2c\u4e8c\u9875\uff09\uff1a</p> <ol> <li>\u7b2c\u4e00\u6b21\u67e5\u8be2\uff1a\u83b7\u53d6\u7b2c\u4e00\u9875\u6570\u636e\uff0c\u5e76\u8bb0\u5f55\u4e0b\u6700\u540e\u4e00\u6761\u6570\u636e\u7684 <code>created_at</code> \u503c\uff08\u4f8b\u5982 <code>2025-09-01 10:00:00</code>\uff09\u4f5c\u4e3a\u4e0b\u4e00\u9875\u7684\u6e38\u6807\u3002</li> <li>\u7b2c\u4e8c\u6b21\u67e5\u8be2\uff1a\u5ba2\u6237\u7aef\u8bf7\u6c42\u4e0b\u4e00\u9875\u65f6\uff0c\u5c06\u8be5\u6e38\u6807\u4f20\u9012\u7ed9\u670d\u52a1\u5668\u3002     <code>sql     SELECT * FROM orders WHERE created_at &lt; '2025-09-01 10:00:00' ORDER BY created_at DESC LIMIT 10;</code> \u8fd9\u6761\u67e5\u8be2\u76f4\u63a5\u4ece\u4e0a\u4e00\u6b21\u7ed3\u675f\u7684\u4f4d\u7f6e\u5f00\u59cb\u67e5\u627e\uff0c\u907f\u514d\u4e86\u626b\u63cf\u548c\u8df3\u8fc7\u5927\u91cf\u65e0\u5173\u6570\u636e\u3002</li> </ol> </li> </ul> <p>\u5904\u7406\u975e\u552f\u4e00\u6e38\u6807\uff1a\u5982\u679c\u4f5c\u4e3a\u6e38\u6807\u7684\u5217\uff08\u5982 <code>created_at</code>\uff09\u53ef\u80fd\u5b58\u5728\u91cd\u590d\u503c\uff0c\u53ef\u4ee5\u7ec4\u5408\u4e00\u4e2a\u552f\u4e00\u7684\u5217\uff08\u5982 <code>id</code>\uff09\u6765\u521b\u5efa\u590d\u5408\u6e38\u6807\uff0c\u786e\u4fdd\u5206\u9875\u7684\u51c6\u786e\u6027\u3002</p> <pre><code>SELECT * FROM orders WHERE (created_at, id) &lt; ('2025-09-01 10:00:00', 12345) ORDER BY created_at DESC, id DESC LIMIT 10;\n</code></pre>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2%E5%AD%98%E5%9C%A8%E4%BB%80%E4%B9%88%E9%97%AE%E9%A2%98%EF%BC%8C%E5%A6%82%E4%BD%95%E6%94%B9%E8%BF%9B/#_3","title":"\u57fa\u4e8e\u6e38\u6807\u5206\u9875\u7684\u4f18\u52bf","text":"<ol> <li>\u5353\u8d8a\u7684\u6027\u80fd\uff1a\u67e5\u8be2\u6027\u80fd\u4fdd\u6301\u7a33\u5b9a\uff0c\u4e0d\u4f1a\u56e0\u4e3a\u9875\u7801\u7684\u589e\u52a0\u800c\u4e0b\u964d\u3002\u6570\u636e\u5e93\u53ef\u4ee5\u76f4\u63a5\u5b9a\u4f4d\u5230\u6e38\u6807\u6307\u5b9a\u7684\u4f4d\u7f6e\uff0c\u6781\u5927\u5730\u63d0\u9ad8\u4e86\u6df1\u5206\u9875\u573a\u666f\u4e0b\u7684\u67e5\u8be2\u6548\u7387\u3002</li> <li>\u6570\u636e\u4e00\u81f4\u6027\uff1a\u7531\u4e8e\u5206\u9875\u662f\u57fa\u4e8e\u4e00\u4e2a\u7a33\u5b9a\u7684\u6570\u636e\u951a\u70b9\uff0c\u5373\u4f7f\u5728\u5206\u9875\u8fc7\u7a0b\u4e2d\u6709\u65b0\u6570\u636e\u63d2\u5165\u6216\u5220\u9664\uff0c\u4e5f\u4e0d\u4f1a\u5f71\u54cd\u524d\u540e\u9875\u9762\u7684\u8fde\u7eed\u6027\uff0c\u6709\u6548\u907f\u514d\u4e86\u6570\u636e\u91cd\u590d\u6216\u9057\u6f0f\u7684\u95ee\u9898\u3002</li> <li>\u9002\u7528\u4e8e\u65e0\u9650\u6eda\u52a8\uff1a\u8fd9\u79cd\u5206\u9875\u65b9\u5f0f\u975e\u5e38\u9002\u5408\u5b9e\u73b0\u201c\u65e0\u9650\u6eda\u52a8\u201d\u6216\u201c\u52a0\u8f7d\u66f4\u591a\u201d\u7684\u7528\u6237\u4f53\u9a8c\uff0c\u5ba2\u6237\u7aef\u53ea\u9700\u4e0d\u65ad\u8bf7\u6c42\u4e0b\u4e00\u9875\u7684\u6570\u636e\u5373\u53ef\u3002</li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2%E5%AD%98%E5%9C%A8%E4%BB%80%E4%B9%88%E9%97%AE%E9%A2%98%EF%BC%8C%E5%A6%82%E4%BD%95%E6%94%B9%E8%BF%9B/#_4","title":"\u57fa\u4e8e\u6e38\u6807\u5206\u9875\u7684\u5c40\u9650\u6027","text":"<ul> <li>\u65e0\u6cd5\u76f4\u63a5\u8df3\u8f6c\u5230\u7279\u5b9a\u9875\u9762\uff1a\u7528\u6237\u53ea\u80fd\u6309\u987a\u5e8f\u5411\u524d\u6216\u5411\u540e\u7ffb\u9875\uff0c\u65e0\u6cd5\u76f4\u63a5\u8df3\u8f6c\u5230\u6307\u5b9a\u7684\u9875\u7801\u3002</li> <li>\u5b9e\u73b0\u76f8\u5bf9\u590d\u6742\uff1a\u76f8\u6bd4\u4e8e\u7b80\u5355\u7684 <code>OFFSET</code>\uff0c\u57fa\u4e8e\u6e38\u6807\u7684\u5b9e\u73b0\u9700\u8981\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u4e4b\u95f4\u4f20\u9012\u548c\u5904\u7406\u6e38\u6807\uff0c\u903b\u8f91\u4e0a\u66f4\u4e3a\u590d\u6742\uff0c\u5c24\u5176\u662f\u5728\u5904\u7406\u591a\u5217\u6392\u5e8f\u65f6\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%93%AA%E4%BA%9B%E5%AD%97%E6%AE%B5%E9%80%82%E5%90%88%E5%8A%A0%E7%B4%A2%E5%BC%95%EF%BC%8C%E5%93%AA%E4%BA%9B%E4%B8%8D%E9%80%82%E5%90%88/","title":"\u54ea\u4e9b\u5b57\u6bb5\u9002\u5408\u52a0\u7d22\u5f15\uff0c\u54ea\u4e9b\u4e0d\u9002\u5408","text":"<ol> <li> <p>\u7ecf\u5e38\u4f5c\u4e3a\u67e5\u8be2\u6761\u4ef6\uff08<code>WHERE</code>\u5b50\u53e5\uff09\u7684\u5b57\u6bb5\uff1a</p> <ul> <li>\u8fd9\u662f\u6700\u57fa\u672c\u4e5f\u662f\u6700\u91cd\u8981\u7684\u539f\u5219\u3002\u4e3a<code>WHERE</code>\u5b50\u53e5\u4e2d\u9891\u7e41\u4f7f\u7528\u7684\u5217\u521b\u5efa\u7d22\u5f15\uff0c\u53ef\u4ee5\u6781\u5927\u5730\u63d0\u9ad8\u67e5\u8be2\u901f\u5ea6\uff0c\u907f\u514d\u5168\u8868\u626b\u63cf\u3002</li> </ul> </li> <li> <p>\u7ecf\u5e38\u4f5c\u4e3a\u8fde\u63a5\u6761\u4ef6\uff08<code>JOIN ON</code>\u5b50\u53e5\uff09\u7684\u5b57\u6bb5\uff1a</p> <ul> <li>\u4e3a\u8fde\u63a5\u64cd\u4f5c\u4e2d\u7684\u5173\u8054\u5b57\u6bb5\uff08\u901a\u5e38\u662f\u5916\u952e\uff09\u521b\u5efa\u7d22\u5f15\uff0c\u53ef\u4ee5\u663e\u8457\u52a0\u5feb<code>JOIN</code>\u64cd\u4f5c\u7684\u6548\u7387\u3002</li> </ul> </li> <li> <p>\u7ecf\u5e38\u4f5c\u4e3a\u6392\u5e8f\u4f9d\u636e\uff08<code>ORDER BY</code>\u5b50\u53e5\uff09\u7684\u5b57\u6bb5\uff1a</p> <ul> <li>\u4e3a<code>ORDER BY</code>\u5b50\u53e5\u4e2d\u7684\u5217\u521b\u5efa\u7d22\u5f15\uff0c\u53ef\u4ee5\u5229\u7528\u7d22\u5f15\u7684\u6709\u5e8f\u6027\u6765\u907f\u514d\u6602\u8d35\u7684\u6587\u4ef6\u6392\u5e8f\uff08filesort\uff09\u64cd\u4f5c\u3002\u5982\u679c\u6392\u5e8f\u65b9\u5411\u4e0e\u7d22\u5f15\u987a\u5e8f\u4e00\u81f4\uff0c\u6570\u636e\u5e93\u53ef\u4ee5\u76f4\u63a5\u6309\u7d22\u5f15\u987a\u5e8f\u8bfb\u53d6\u6570\u636e\u3002</li> </ul> </li> <li> <p>\u7ecf\u5e38\u4f5c\u4e3a\u5206\u7ec4\u4f9d\u636e\uff08<code>GROUP BY</code>\u5b50\u53e5\uff09\u7684\u5b57\u6bb5\uff1a</p> <ul> <li>\u4e3a<code>GROUP BY</code>\u5b50\u53e5\u4e2d\u7684\u5217\u521b\u5efa\u7d22\u5f15\uff0c\u53ef\u4ee5\u5e2e\u52a9\u6570\u636e\u5e93\u66f4\u5feb\u5730\u627e\u5230\u76f8\u540c\u7684\u5206\u7ec4\u503c\uff0c\u6709\u65f6\u4e5f\u53ef\u4ee5\u5229\u7528\u7d22\u5f15\u6765\u907f\u514d\u521b\u5efa\u4e34\u65f6\u8868\u8fdb\u884c\u5206\u7ec4\u3002</li> </ul> </li> <li> <p>\u9ad8\u9009\u62e9\u6027\uff08\u9ad8\u57fa\u6570\uff0cHigh Cardinality\uff09\u7684\u5b57\u6bb5\uff1a</p> <ul> <li>\u9009\u62e9\u6027\u662f\u6307\u5217\u4e2d\u4e0d\u540c\u503c\u7684\u6570\u91cf\u4e0e\u603b\u884c\u6570\u7684\u6bd4\u7387\u3002\u6bd4\u7387\u8d8a\u9ad8\uff0c\u9009\u62e9\u6027\u8d8a\u597d\u3002\u4f8b\u5982\uff0c\u5b58\u50a8\u7528\u6237ID\u3001\u624b\u673a\u53f7\u3001\u8eab\u4efd\u8bc1\u53f7\u7684\u5217\uff0c\u5176\u503c\u51e0\u4e4e\u90fd\u662f\u552f\u4e00\u7684\uff0c\u9009\u62e9\u6027\u975e\u5e38\u9ad8\uff0c\u975e\u5e38\u9002\u5408\u505a\u7d22\u5f15\u3002</li> <li>\u9ad8\u9009\u62e9\u6027\u7684\u7d22\u5f15\u53ef\u4ee5\u5feb\u901f\u5730\u5c06\u641c\u7d22\u8303\u56f4\u7f29\u5c0f\u5230\u5f88\u5c11\u7684\u51e0\u884c\u3002</li> </ul> </li> <li> <p>\u8986\u76d6\u7d22\u5f15\uff08Covering Index\uff09\u4e2d\u5305\u542b\u7684\u5b57\u6bb5\uff1a</p> <ul> <li>\u5982\u679c\u4e00\u4e2a\u67e5\u8be2\u6240\u9700\u8981\u7684\u6240\u6709\u5217\uff08<code>SELECT</code>\u5217\u8868\u548c<code>WHERE</code>\u5b50\u53e5\u4e2d\u7684\u5217\uff09\u90fd\u5305\u542b\u5728\u4e00\u4e2a\u7d22\u5f15\u4e2d\uff0c\u90a3\u4e48\u6570\u636e\u5e93\u53ef\u4ee5\u76f4\u63a5\u4ece\u8be5\u7d22\u5f15\u4e2d\u83b7\u53d6\u6240\u6709\u6570\u636e\uff0c\u800c\u65e0\u9700\u56de\u8868\u67e5\u8be2\u4e3b\u6570\u636e\u8868\u3002\u8fd9\u79cd\u7d22\u5f15\u79f0\u4e3a\u8986\u76d6\u7d22\u5f15\u3002</li> <li>\u5728\u8bbe\u8ba1\u7d22\u5f15\u65f6\uff0c\u53ef\u4ee5\u8003\u8651\u5c06\u4e00\u4e9b\u7ecf\u5e38\u4e0e\u67e5\u8be2\u6761\u4ef6\u4e00\u8d77\u88ab\u67e5\u8be2\u51fa\u6765\u7684\u3001\u957f\u5ea6\u4e0d\u5927\u7684\u5217\u52a0\u5165\u5230\u8054\u5408\u7d22\u5f15\u4e2d\uff0c\u4ee5\u521b\u5efa\u8986\u76d6\u7d22\u5f15\u3002</li> </ul> </li> <li> <p>\u5b57\u7b26\u4e32\u524d\u7f00\u7d22\u5f15\uff1a</p> <ul> <li>\u5bf9\u4e8e\u5f88\u957f\u7684\u5b57\u7b26\u4e32\u5217\uff08\u5982<code>VARCHAR</code>\u6216<code>TEXT</code>\uff09\uff0c\u4e3a\u6574\u4e2a\u5217\u521b\u5efa\u7d22\u5f15\u53ef\u80fd\u4f1a\u5360\u7528\u5927\u91cf\u78c1\u76d8\u7a7a\u95f4\u5e76\u4e14\u6548\u7387\u4e0d\u9ad8\u3002\u53ef\u4ee5\u53ea\u5bf9\u5b57\u7b26\u4e32\u7684\u524d\u7f00\u90e8\u5206\u521b\u5efa\u7d22\u5f15\u3002</li> <li>\u9009\u62e9\u524d\u7f00\u7684\u957f\u5ea6\u9700\u8981\u6743\u8861\u7d22\u5f15\u7684\u9009\u62e9\u6027\u548c\u5927\u5c0f\u3002\u53ef\u4ee5\u901a\u8fc7\u8ba1\u7b97\u4e0d\u540c\u524d\u7f00\u957f\u5ea6\u7684\u9009\u62e9\u6027\u6765\u51b3\u5b9a\u4e00\u4e2a\u5408\u9002\u7684\u503c\u3002</li> </ul> </li> <li> <p>\u8054\u5408\u7d22\u5f15\uff08Composite Index\uff09\uff1a</p> <ul> <li>\u5f53\u67e5\u8be2\u6761\u4ef6\u7ecf\u5e38\u6d89\u53ca\u591a\u4e2a\u5217\u65f6\uff0c\u521b\u5efa\u4e00\u4e2a\u5305\u542b\u8fd9\u4e9b\u5217\u7684\u8054\u5408\u7d22\u5f15\u901a\u5e38\u6bd4\u4e3a\u6bcf\u4e2a\u5217\u521b\u5efa\u5355\u5217\u7d22\u5f15\u66f4\u6709\u6548\u3002</li> <li>\u8054\u5408\u7d22\u5f15\u7684\u5217\u987a\u5e8f\u975e\u5e38\u91cd\u8981\uff0c\u5e94\u9075\u5faa\u6700\u5de6\u524d\u7f00\u539f\u5219\uff08Leftmost Prefix Principle\uff09\u3002\u5c06\u9009\u62e9\u6027\u6700\u9ad8\u3001\u6700\u5e38\u7528\u4e8e\u7b49\u503c\u67e5\u8be2\u7684\u5217\u653e\u5728\u6700\u524d\u9762\u3002</li> </ul> </li> </ol> <p>\u54ea\u4e9b\u5b57\u6bb5\u4e0d\u9002\u5408\u52a0\u7d22\u5f15\uff1f</p> <ol> <li> <p>\u9009\u62e9\u6027\u975e\u5e38\u4f4e\uff08\u4f4e\u57fa\u6570\uff0cLow Cardinality\uff09\u7684\u5b57\u6bb5\uff1a</p> <ul> <li>\u4f8b\u5982\uff0c\u5b58\u50a8\u201c\u6027\u522b\u201d\uff08\u7537/\u5973\uff09\u3001\u201c\u72b6\u6001\u201d\uff08\u6709\u6548/\u65e0\u6548\uff09\u3001\u201c\u5e03\u5c14\u503c\u201d\uff08true/false\uff09\u7684\u5217\u3002</li> <li>\u4e3a\u8fd9\u7c7b\u5217\u521b\u5efa\u7d22\u5f15\uff0c\u5176\u6548\u679c\u53ef\u80fd\u548c\u5168\u8868\u626b\u63cf\u5dee\u4e0d\u591a\uff0c\u56e0\u4e3a\u7d22\u5f15\u65e0\u6cd5\u6709\u6548\u5730\u8fc7\u6ee4\u6570\u636e\u3002\u6570\u636e\u5e93\u4f18\u5316\u5668\u751a\u81f3\u53ef\u80fd\u4f1a\u653e\u5f03\u4f7f\u7528\u8fd9\u7c7b\u7d22\u5f15\u3002</li> <li>\u540c\u65f6\uff0c\u7d22\u5f15\u8fd8\u4f1a\u5e26\u6765\u989d\u5916\u7684\u5b58\u50a8\u548c\u7ef4\u62a4\u5f00\u9500\u3002</li> </ul> </li> <li> <p>\u5f88\u5c11\u5728\u67e5\u8be2\u6761\u4ef6\u4e2d\u4f7f\u7528\u7684\u5b57\u6bb5\uff1a</p> <ul> <li>\u5982\u679c\u4e00\u4e2a\u5b57\u6bb5\u51e0\u4e4e\u4e0d\u51fa\u73b0\u5728<code>WHERE</code>, <code>JOIN</code>, <code>ORDER BY</code>, <code>GROUP BY</code>\u5b50\u53e5\u4e2d\uff0c\u4e3a\u5b83\u521b\u5efa\u7d22\u5f15\u5c31\u662f\u4e00\u79cd\u8d44\u6e90\u6d6a\u8d39\u3002</li> </ul> </li> <li> <p>\u88ab\u9891\u7e41\u66f4\u65b0\u7684\u5b57\u6bb5\uff1a</p> <ul> <li>\u6bcf\u6b21\u66f4\u65b0\u7d22\u5f15\u5217\u7684\u503c\uff0c\u90fd\u9700\u8981\u5bf9\u7d22\u5f15\u7ed3\u6784\u8fdb\u884c\u76f8\u5e94\u7684\u7ef4\u62a4\uff08\u5220\u9664\u65e7\u7684\u7d22\u5f15\u6761\u76ee\uff0c\u63d2\u5165\u65b0\u7684\u6761\u76ee\uff09\uff0c\u8fd9\u4f1a\u589e\u52a0\u5199\u64cd\u4f5c\u7684\u5f00\u9500\u3002</li> <li>\u5982\u679c\u4e00\u4e2a\u5b57\u6bb5\u88ab\u975e\u5e38\u9891\u7e41\u5730\u66f4\u65b0\uff0c\u90a3\u4e48\u7d22\u5f15\u5e26\u6765\u7684\u67e5\u8be2\u6027\u80fd\u63d0\u5347\u53ef\u80fd\u4e0d\u8db3\u4ee5\u62b5\u6d88\u5176\u7ef4\u62a4\u6210\u672c\u3002</li> </ul> </li> <li> <p>\u77ed\u5c0f\u7684\u8868\uff1a</p> <ul> <li>\u5982\u679c\u4e00\u4e2a\u8868\u7684\u6570\u636e\u91cf\u975e\u5e38\u5c0f\uff08\u4f8b\u5982\uff0c\u53ea\u6709\u51e0\u767e\u6216\u51e0\u5343\u884c\uff09\uff0c\u5168\u8868\u626b\u63cf\u7684\u901f\u5ea6\u53ef\u80fd\u6bd4\u901a\u8fc7\u7d22\u5f15\u67e5\u627e\u66f4\u5feb\uff0c\u56e0\u4e3a\u7d22\u5f15\u67e5\u627e\u672c\u8eab\u4e5f\u6709\u5f00\u9500\u3002\u4e3a\u5c0f\u8868\u521b\u5efa\u7d22\u5f15\u901a\u5e38\u6ca1\u6709\u5fc5\u8981\u3002</li> </ul> </li> <li> <p>\u8fc7\u957f\u7684\u6587\u672c\u5b57\u6bb5\uff08\u5982<code>TEXT</code>\u6216<code>BLOB</code>\u7c7b\u578b\uff09\uff1a</p> <ul> <li>\u76f4\u63a5\u4e3a\u8fd9\u4e9b\u957f\u5b57\u6bb5\u521b\u5efa\u7d22\u5f15\u662f\u4e0d\u5141\u8bb8\u7684\u6216\u8005\u6548\u7387\u6781\u4f4e\u3002\u5982\u679c\u9700\u8981\u5bf9\u8fd9\u7c7b\u5b57\u6bb5\u8fdb\u884c\u641c\u7d22\uff0c\u5e94\u8003\u8651\u4f7f\u7528\u524d\u7f00\u7d22\u5f15\u6216\u8005\u66f4\u4e13\u4e1a\u7684\u5168\u6587\u7d22\u5f15\uff08Full-Text Index\uff09\u3002</li> </ul> </li> <li> <p>\u53c2\u4e0e\u8ba1\u7b97\u6216\u51fd\u6570\u64cd\u4f5c\u7684\u5217\uff1a</p> <ul> <li>\u5982\u679c<code>WHERE</code>\u5b50\u53e5\u4e2d\u7684\u6761\u4ef6\u662f\u5bf9\u5217\u8fdb\u884c\u4e86\u51fd\u6570\u8fd0\u7b97\u6216\u8868\u8fbe\u5f0f\u8ba1\u7b97\uff0c\u4f8b\u5982 <code>WHERE YEAR(create_time) = 2023</code> \u6216 <code>WHERE amount * 1.1 &gt; 100</code>\uff0c\u90a3\u4e48<code>create_time</code>\u6216<code>amount</code>\u5217\u4e0a\u7684\u666e\u901a\u7d22\u5f15\u901a\u5e38\u4e0d\u4f1a\u88ab\u4f7f\u7528\u3002</li> <li>\u9700\u8981\u6539\u5199SQL\uff0c\u4f7f\u5217\u672c\u8eab\u4fdd\u6301\u201c\u5e72\u51c0\u201d\uff0c\u4f8b\u5982 <code>WHERE create_time &gt;= '2023-01-01' AND create_time &lt; '2024-01-01'</code>\u3002</li> </ul> </li> </ol> <p>\u521b\u5efa\u7d22\u5f15\u662f\u4e00\u79cd\u5728\u7a7a\u95f4\u548c\u5199\u6027\u80fd\u4e0e\u67e5\u8be2\u6027\u80fd\u4e4b\u95f4\u7684\u6743\u8861\u3002 *   \u9002\u5408\u52a0\u7d22\u5f15\u7684\u5b57\u6bb5\u901a\u5e38\u662f\uff1a\u9891\u7e41\u7528\u4e8e\u67e5\u8be2\u3001\u8fde\u63a5\u3001\u6392\u5e8f\u3001\u5206\u7ec4\u7684\uff0c\u5e76\u4e14\u5177\u6709\u9ad8\u9009\u62e9\u6027\u7684\u5217\u3002 *   \u4e0d\u9002\u5408\u52a0\u7d22\u5f15\u7684\u5b57\u6bb5\u901a\u5e38\u662f\uff1a\u9009\u62e9\u6027\u6781\u4f4e\u3001\u4e0d\u5e38\u7528\u4e8e\u67e5\u8be2\u3001\u88ab\u9891\u7e41\u66f4\u65b0\u7684\uff0c\u6216\u8005\u662f\u6570\u636e\u91cf\u5f88\u5c0f\u7684\u8868\u4e2d\u7684\u5217\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%AE%9E%E7%8E%B0%E4%B9%90%E8%A7%82%E9%94%81%E7%9A%84%E6%96%B9%E5%BC%8F%E6%9C%89%E4%BB%80%E4%B9%88%EF%BC%9F%E5%9C%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B1%82%E9%9D%A2%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%EF%BC%9F/","title":"\u5b9e\u73b0\u4e50\u89c2\u9501\u7684\u65b9\u5f0f\u6709\u4ec0\u4e48\uff1f\u5728\u6570\u636e\u5e93\u5c42\u9762\u5982\u4f55\u5b9e\u73b0\uff1f","text":"<p>\u4e50\u89c2\u9501\uff08Optimistic Locking\uff09\u662f\u4e00\u79cd\u5e76\u53d1\u63a7\u5236\u7b56\u7565\uff0c\u5b83\u5047\u8bbe\u591a\u4e2a\u4e8b\u52a1\u5728\u5904\u7406\u65f6\u4e0d\u4f1a\u5f7c\u6b64\u4e92\u76f8\u5f71\u54cd\uff0c\u56e0\u6b64\u5728\u6570\u636e\u5904\u7406\u8fc7\u7a0b\u4e2d\u4e0d\u52a0\u9501\uff0c\u800c\u662f\u5728\u63d0\u4ea4\u66f4\u65b0\u65f6\u624d\u68c0\u6d4b\u662f\u5426\u5b58\u5728\u51b2\u7a81\u3002\u5982\u679c\u68c0\u6d4b\u5230\u51b2\u7a81\uff0c\u5219\u5f53\u524d\u64cd\u4f5c\u4f1a\u5931\u8d25\u5e76\u901a\u5e38\u9700\u8981\u91cd\u8bd5\uff0c\u5426\u5219\u6267\u884c\u66f4\u65b0\u3002\u8fd9\u79cd\u7b56\u7565\u9002\u7528\u4e8e\u8bfb\u591a\u5199\u5c11\u7684\u573a\u666f\uff0c\u80fd\u591f\u63d0\u9ad8\u7cfb\u7edf\u7684\u5e76\u53d1\u6027\u80fd\uff0c\u56e0\u4e3a\u5b83\u51cf\u5c11\u4e86\u5bf9\u6570\u636e\u5e93\u8d44\u6e90\u7684\u7ade\u4e89\u548c\u9501\u7684\u5f00\u9500\u3002</p> <p>\u4e50\u89c2\u9501\u7684\u5b9e\u73b0\u65b9\u5f0f\u4e3b\u8981\u6709\u4ee5\u4e0b\u51e0\u79cd\uff1a</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%AE%9E%E7%8E%B0%E4%B9%90%E8%A7%82%E9%94%81%E7%9A%84%E6%96%B9%E5%BC%8F%E6%9C%89%E4%BB%80%E4%B9%88%EF%BC%9F%E5%9C%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B1%82%E9%9D%A2%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%EF%BC%9F/#1-version","title":"1. \u4f7f\u7528\u6570\u636e\u7248\u672c\uff08Version\uff09\u8bb0\u5f55\u673a\u5236","text":"<p>\u8fd9\u662f\u4e50\u89c2\u9501\u6700\u5e38\u7528\u7684\u4e00\u79cd\u5b9e\u73b0\u65b9\u5f0f\u3002</p> <ul> <li> <p>\u5b9e\u73b0\u539f\u7406\uff1a</p> <ol> <li>\u5728\u6570\u636e\u5e93\u8868\u4e2d\u4e3a\u6570\u636e\u589e\u52a0\u4e00\u4e2a\u6570\u5b57\u7c7b\u578b\u7684\u201cversion\u201d\u5b57\u6bb5\uff0c\u8868\u793a\u6570\u636e\u7684\u7248\u672c\u53f7\uff0c\u6216\u8005\u8bf4\u662f\u6570\u636e\u88ab\u4fee\u6539\u7684\u6b21\u6570\u3002</li> <li>\u5f53\u8bfb\u53d6\u6570\u636e\u65f6\uff0c\u5c06<code>version</code>\u5b57\u6bb5\u7684\u503c\u4e00\u540c\u8bfb\u51fa\u3002</li> <li>\u5f53\u9700\u8981\u66f4\u65b0\u6570\u636e\u65f6\uff0c\u5c06\u5ba2\u6237\u7aef\u6216\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4fdd\u5b58\u7684\u65e7\u7248\u672c\u53f7\u4e0e\u6570\u636e\u5e93\u4e2d\u5f53\u524d\u6570\u636e\u7684\u7248\u672c\u53f7\u8fdb\u884c\u6bd4\u5bf9\u3002</li> <li>\u5982\u679c\u4e24\u8005\u4e00\u81f4\uff0c\u5219\u6267\u884c\u66f4\u65b0\u64cd\u4f5c\uff0c\u5e76\u5c06\u6570\u636e\u5e93\u4e2d\u7684<code>version</code>\u503c\u52a0\u4e00\u3002</li> <li>\u5982\u679c\u4e24\u8005\u4e0d\u4e00\u81f4\uff0c\u8bf4\u660e\u6570\u636e\u5df2\u7ecf\u88ab\u5176\u4ed6\u4e8b\u52a1\u4fee\u6539\u8fc7\uff0c\u5f53\u524d\u66f4\u65b0\u64cd\u4f5c\u5931\u8d25\uff08\u901a\u5e38\u4f1a\u629b\u51fa\u5f02\u5e38\u6216\u8fd4\u56de\u9519\u8bef\u4fe1\u606f\uff0c\u8ba9\u7528\u6237\u51b3\u5b9a\u91cd\u8bd5\u6216\u5176\u4ed6\u5904\u7406\uff09\u3002</li> </ol> </li> <li> <p>\u6570\u636e\u5e93\u5c42\u9762\u5b9e\u73b0\uff1a     \u901a\u5e38\u5728<code>UPDATE</code>\u8bed\u53e5\u4e2d\u52a0\u5165<code>version</code>\u5b57\u6bb5\u4f5c\u4e3a<code>WHERE</code>\u6761\u4ef6\u3002</p> <p><code>sql UPDATE your_table SET     column1 = new_value1,     column2 = new_value2,     version = version + 1 -- \u7248\u672c\u53f7\u52a0\u4e00 WHERE     id = record_id AND version = current_version; -- \u6bd4\u8f83\u65e7\u7248\u672c\u53f7</code> \u5982\u679c\u8fd9\u6761SQL\u8bed\u53e5\u6267\u884c\u540e\u5f71\u54cd\u7684\u884c\u6570\u4e3a0\uff0c\u5219\u8868\u793a\u66f4\u65b0\u5931\u8d25\uff0c\u53d1\u751f\u4e86\u5e76\u53d1\u51b2\u7a81\u3002</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%AE%9E%E7%8E%B0%E4%B9%90%E8%A7%82%E9%94%81%E7%9A%84%E6%96%B9%E5%BC%8F%E6%9C%89%E4%BB%80%E4%B9%88%EF%BC%9F%E5%9C%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B1%82%E9%9D%A2%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%EF%BC%9F/#2-timestamp","title":"2. \u4f7f\u7528\u65f6\u95f4\u6233\uff08Timestamp\uff09\u673a\u5236","text":"<p>\u65f6\u95f4\u6233\u673a\u5236\u4e0e\u7248\u672c\u53f7\u7c7b\u4f3c\uff0c\u5229\u7528\u6570\u636e\u7684\u6700\u540e\u4fee\u6539\u65f6\u95f4\u6765\u5224\u65ad\u662f\u5426\u53d1\u751f\u51b2\u7a81\u3002</p> <ul> <li> <p>\u5b9e\u73b0\u539f\u7406\uff1a</p> <ol> <li>\u5728\u9700\u8981\u4e50\u89c2\u9501\u63a7\u5236\u7684\u8868\u4e2d\u589e\u52a0\u4e00\u4e2a\u65f6\u95f4\u6233\uff08<code>timestamp</code>\u6216<code>datetime</code>\uff09\u5b57\u6bb5\uff0c\u7528\u4e8e\u8bb0\u5f55\u6570\u636e\u6700\u540e\u4e00\u6b21\u88ab\u4fee\u6539\u7684\u65f6\u95f4\u3002</li> <li>\u5f53\u8bfb\u53d6\u6570\u636e\u65f6\uff0c\u5c06\u8be5\u65f6\u95f4\u6233\u5b57\u6bb5\u7684\u503c\u4e00\u540c\u8bfb\u51fa\u3002</li> <li>\u5f53\u9700\u8981\u66f4\u65b0\u6570\u636e\u65f6\uff0c\u5c06\u5ba2\u6237\u7aef\u6216\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4fdd\u5b58\u7684\u65e7\u65f6\u95f4\u6233\u4e0e\u6570\u636e\u5e93\u4e2d\u5f53\u524d\u6570\u636e\u7684\u6700\u65b0\u65f6\u95f4\u6233\u8fdb\u884c\u6bd4\u5bf9\u3002</li> <li>\u5982\u679c\u4e24\u8005\u4e00\u81f4\uff0c\u5219\u6267\u884c\u66f4\u65b0\u64cd\u4f5c\uff0c\u5e76\u66f4\u65b0\u65f6\u95f4\u6233\u5b57\u6bb5\u4e3a\u5f53\u524d\u7cfb\u7edf\u65f6\u95f4\u3002</li> <li>\u5982\u679c\u4e24\u8005\u4e0d\u4e00\u81f4\uff0c\u8bf4\u660e\u6570\u636e\u5df2\u88ab\u5176\u4ed6\u4e8b\u52a1\u4fee\u6539\uff0c\u5f53\u524d\u66f4\u65b0\u64cd\u4f5c\u5931\u8d25\u3002</li> </ol> </li> <li> <p>\u6570\u636e\u5e93\u5c42\u9762\u5b9e\u73b0\uff1a</p> <p><code>sql UPDATE your_table SET     column1 = new_value1,     column2 = new_value2,     last_modified_time = NOW() -- \u66f4\u65b0\u65f6\u95f4\u6233 WHERE     id = record_id AND last_modified_time = old_last_modified_time; -- \u6bd4\u8f83\u65e7\u65f6\u95f4\u6233</code> \u65f6\u95f4\u6233\u5929\u7136\u5177\u6709\u987a\u5e8f\u9012\u589e\u6027\uff0c\u56e0\u6b64\u53ef\u4ee5\u4f5c\u4e3a\u7248\u672c\u53f7\u7684\u66ff\u4ee3\u3002</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%AE%9E%E7%8E%B0%E4%B9%90%E8%A7%82%E9%94%81%E7%9A%84%E6%96%B9%E5%BC%8F%E6%9C%89%E4%BB%80%E4%B9%88%EF%BC%9F%E5%9C%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B1%82%E9%9D%A2%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%EF%BC%9F/#3-compare-and-swap-cas","title":"3. Compare And Swap (CAS) \u7b97\u6cd5","text":"<p>CAS\uff08Compare And Swap\uff09\u662f\u4e00\u79cd\u65e0\u9501\u539f\u5b50\u64cd\u4f5c\uff0c\u662f\u4e50\u89c2\u9501\u7684\u4e00\u79cd\u5b9e\u73b0\u65b9\u5f0f\u3002</p> <ul> <li> <p>\u5b9e\u73b0\u539f\u7406\uff1a CAS\u64cd\u4f5c\u6d89\u53ca\u4e09\u4e2a\u503c\uff1a</p> <ul> <li>V (Value)\uff1a \u5185\u5b58\u4e2d\u5f53\u524d\u53d8\u91cf\u7684\u503c\u3002</li> <li>A (Expected)\uff1a \u9884\u671f\u503c\uff08\u5373\u4f60\u8ba4\u4e3aV\u5e94\u8be5\u662f\u4ec0\u4e48\uff09\u3002</li> <li>B (New)\uff1a \u65b0\u503c\uff08\u5373\u4f60\u60f3\u5c06V\u66f4\u65b0\u4e3a\u4ec0\u4e48\uff09\u3002</li> <li>\u5f53\u4e14\u4ec5\u5f53V\u4e0eA\u76f8\u7b49\u65f6\uff0cCAS\u4f1a\u539f\u5b50\u5730\u5c06V\u66f4\u65b0\u4e3aB\u3002\u5426\u5219\uff0cV\u4fdd\u6301\u4e0d\u53d8\uff0c\u64cd\u4f5c\u5931\u8d25\u3002</li> </ul> </li> <li> <p>\u5728\u6570\u636e\u5e93\u5c42\u9762\uff1a     \u867d\u7136CAS\u672c\u8eab\u662fCPU\u6307\u4ee4\u7ea7\u522b\u7684\u539f\u5b50\u64cd\u4f5c\uff0c\u4f46\u5728\u6570\u636e\u5e93\u5c42\u9762\uff0c\u4e0a\u8ff0\u7684\u7248\u672c\u53f7\u548c\u65f6\u95f4\u6233\u673a\u5236\u90fd\u53ef\u4ee5\u88ab\u89c6\u4e3a\u9075\u5faaCAS\u601d\u60f3\u3002 <code>UPDATE ... WHERE version = old_version</code> \u8fd9\u6761SQL\u8bed\u53e5\u5728\u6267\u884c\u65f6\uff0c\u6570\u636e\u5e93\u4f1a\u5148\u68c0\u67e5<code>version</code>\u5b57\u6bb5\u7684\u503c\u662f\u5426\u7b49\u4e8e<code>old_version</code>\uff08\u6bd4\u8f83\uff09\uff0c\u5982\u679c\u76f8\u7b49\uff0c\u5219\u66f4\u65b0<code>column</code>\u548c<code>version</code>\u5b57\u6bb5\uff08\u4ea4\u6362\uff09\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u5728\u6570\u636e\u5e93\u5185\u90e8\u901a\u5e38\u662f\u539f\u5b50\u6027\u7684\u3002</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%AE%9E%E7%8E%B0%E4%B9%90%E8%A7%82%E9%94%81%E7%9A%84%E6%96%B9%E5%BC%8F%E6%9C%89%E4%BB%80%E4%B9%88%EF%BC%9F%E5%9C%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B1%82%E9%9D%A2%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%EF%BC%9F/#_1","title":"\u6570\u636e\u5e93\u5c42\u9762\u7684\u5176\u4ed6\u76f8\u5173\u6982\u5ff5","text":"<ul> <li>\u4e50\u89c2\u9501\u5e76\u975e\u6570\u636e\u5e93\u81ea\u5e26\uff0c\u901a\u5e38\u9700\u81ea\u884c\u5b9e\u73b0\u3002 \u4e50\u89c2\u9501\u7684\u5b9e\u73b0\u903b\u8f91\u901a\u5e38\u662f\u5728\u5e94\u7528\u7a0b\u5e8f\u5c42\u9762\u5b8c\u6210\u7684\uff0c\u901a\u8fc7\u5229\u7528\u6570\u636e\u5e93\u7684\u5b57\u6bb5\uff08\u5982\u7248\u672c\u53f7\u6216\u65f6\u95f4\u6233\uff09\u548c\u539f\u5b50\u66f4\u65b0\u64cd\u4f5c\u6765\u8fbe\u6210\u3002</li> <li>\u6570\u636e\u5e93\u5b58\u50a8\u8fc7\u7a0b\uff1a \u53ef\u4ee5\u5728\u6570\u636e\u5e93\u5b58\u50a8\u8fc7\u7a0b\u4e2d\u5b9e\u73b0\u4e50\u89c2\u9501\u7b56\u7565\uff0c\u5c06\u51b2\u7a81\u68c0\u6d4b\u548c\u6570\u636e\u66f4\u65b0\u903b\u8f91\u5c01\u88c5\u8d77\u6765\uff0c\u5bf9\u5916\u53ea\u5f00\u653e\u57fa\u4e8e\u5b58\u50a8\u8fc7\u7a0b\u7684\u6570\u636e\u66f4\u65b0\u9014\u5f84\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u5bf9\u5916\u516c\u5f00\u6570\u636e\u5e93\u8868\u3002</li> <li>\u591a\u7248\u672c\u5e76\u53d1\u63a7\u5236\uff08MVCC\uff09\uff1a<ul> <li>MVCC\uff08Multi-Version Concurrency Control\uff09\u662f\u4e00\u79cd\u6570\u636e\u5e93\u5e76\u53d1\u63a7\u5236\u6280\u672f\uff0c\u5b83\u901a\u8fc7\u4e3a\u6570\u636e\u8bb0\u5f55\u4fdd\u5b58\u591a\u4e2a\u7248\u672c\u6765\u63d0\u9ad8\u6570\u636e\u5e93\u7684\u5e76\u53d1\u6027\u80fd\u3002</li> <li>MVCC \u5141\u8bb8\u4e8b\u52a1\u8bfb\u53d6\u6570\u636e\u7684\u4e00\u4e2a\u5386\u53f2\u5feb\u7167\uff08\u79f0\u4e3a\u5feb\u7167\u8bfb\uff09\uff0c\u800c\u4e0d\u662f\u52a0\u9501\u963b\u585e\u5176\u4ed6\u5199\u64cd\u4f5c\uff0c\u4ece\u800c\u89e3\u51b3\u4e86\u8bfb\u5199\u51b2\u7a81\u3002</li> <li>MVCC \u4e0e\u4e50\u89c2\u9501\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u90fd\u4f53\u73b0\u4e86\u201c\u4e50\u89c2\u201d\u7684\u601d\u60f3\uff0c\u5373\u4e0d\u52a0\u9501\u5730\u5141\u8bb8\u8bfb\u64cd\u4f5c\u3002\u7136\u800c\uff0cMVCC \u4e3b\u8981\u5173\u6ce8\u8bfb\u5199\u51b2\u7a81\uff0c\u5141\u8bb8\u8bfb\u4e8b\u52a1\u5728\u4e0d\u963b\u585e\u5199\u4e8b\u52a1\u7684\u60c5\u51b5\u4e0b\u770b\u5230\u4e00\u81f4\u7684\u6570\u636e\u7248\u672c\uff1b\u800c\u4f20\u7edf\u7684\u4e50\u89c2\u9501\uff08\u5982\u7248\u672c\u53f7\u673a\u5236\uff09\u5219\u4e3b\u8981\u7528\u4e8e\u89e3\u51b3\u5199\u5199\u51b2\u7a81\uff0c\u786e\u4fdd\u5728\u66f4\u65b0\u6570\u636e\u65f6\u68c0\u6d4b\u5230\u5176\u4ed6\u5e76\u53d1\u7684\u4fee\u6539\u3002</li> <li>MySQL InnoDB \u5f15\u64ce\u5c31\u5b9e\u73b0\u4e86 MVCC\u3002\u5feb\u7167\u8bfb\u5c31\u662f\u901a\u8fc7 MVCC \u6765\u63a7\u5236\u7684\uff0c\u4e0d\u52a0\u9501\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%AF%B9%E8%B1%A1%E5%85%B3%E7%B3%BB%E6%98%A0%E5%B0%84%EF%BC%88ORM%EF%BC%89%E6%A1%86%E6%9E%B6%E4%BB%8B%E7%BB%8D/","title":"\u5bf9\u8c61\u5173\u7cfb\u6620\u5c04\uff08ORM\uff09\u6846\u67b6\u4ecb\u7ecd","text":"<p>ORM\u6846\u67b6\u63d0\u4f9b\u4e86\u4e00\u79cd\u673a\u5236\uff0c\u5c06\u6570\u636e\u5e93\u4e2d\u7684\u8868\u6620\u5c04\u5230\u7f16\u7a0b\u8bed\u8a00\u4e2d\u7684\u7c7b\uff0c\u5c06\u8868\u7684\u884c\u6620\u5c04\u5230\u7c7b\u7684\u5bf9\u8c61\uff08\u5b9e\u4f53\uff09\uff0c\u5c06\u8868\u7684\u5217\u6620\u5c04\u5230\u5bf9\u8c61\u7684\u5c5e\u6027\u3002\u901a\u8fc7\u8fd9\u79cd\u6620\u5c04\u5173\u7cfb\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u901a\u8fc7\u64cd\u4f5c\u5bf9\u8c61\u6765\u95f4\u63a5\u64cd\u4f5c\u6570\u636e\u5e93\u3002</p> <p>\u89e3\u51b3\u95ee\u9898\uff1a \u9762\u5411\u5bf9\u8c61\u8bed\u8a00\u548c\u5173\u7cfb\u578b\u6570\u636e\u5e93\u4e4b\u95f4\u5b58\u5728\u7740\u201c\u963b\u6297\u5931\u914d\u201d\uff08impedance mismatch\uff09\u3002 *   \u6570\u636e\u7ed3\u6784\u5dee\u5f02\uff1a \u5bf9\u8c61\u901a\u5e38\u4ee5\u56fe\u72b6\u7ed3\u6784\uff08\u5305\u542b\u5f15\u7528\u548c\u7ee7\u627f\uff09\u5b58\u5728\uff0c\u800c\u5173\u7cfb\u578b\u6570\u636e\u5e93\u4ee5\u6241\u5e73\u7684\u8868\u7ed3\u6784\uff08\u5305\u542b\u884c\u548c\u5217\uff09\u5b58\u50a8\u6570\u636e\u3002 *   \u6570\u636e\u64cd\u4f5c\u5dee\u5f02\uff1a \u5bf9\u8c61\u64cd\u4f5c\u662f\u57fa\u4e8e\u5bf9\u8c61\u7684\u65b9\u6cd5\u8c03\u7528\uff0c\u800c\u6570\u636e\u5e93\u64cd\u4f5c\u662f\u57fa\u4e8eSQL\u8bed\u53e5\u3002 *   \u7ee7\u627f\u3001\u591a\u6001\u7b49\u7279\u6027\uff1a \u6570\u636e\u5e93\u672c\u8eab\u6ca1\u6709\u76f4\u63a5\u5bf9\u5e94\u9762\u5411\u5bf9\u8c61\u7279\u6027\u7684\u6982\u5ff5\u3002</p> <p>ORM\u6846\u67b6\u7684\u76ee\u6807\u5c31\u662f\u5f25\u5408\u8fd9\u79cd\u5dee\u5f02\uff0c\u8ba9\u5f00\u53d1\u8005\u53ef\u4ee5\u4e13\u6ce8\u4e8e\u4e1a\u52a1\u903b\u8f91\uff0c\u800c\u5c06\u6570\u636e\u6301\u4e45\u5316\u7684\u7ec6\u8282\u4ea4\u7ed9ORM\u5904\u7406\u3002</p> <p>\u5e38\u89c1ORM\u6846\u67b6\uff1a *   Java: Hibernate, JPA (Java Persistence API - \u89c4\u8303\uff0cHibernate\u662f\u5176\u5b9e\u73b0\u4e4b\u4e00), EclipseLink *   Python: SQLAlchemy, Django ORM *   .NET: Entity Framework *   Ruby: ActiveRecord</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%AF%B9%E8%B1%A1%E5%85%B3%E7%B3%BB%E6%98%A0%E5%B0%84%EF%BC%88ORM%EF%BC%89%E6%A1%86%E6%9E%B6%E4%BB%8B%E7%BB%8D/#orm","title":"ORM\u5b9e\u73b0\u539f\u7406","text":"<p>ORM\u6846\u67b6\u7684\u5b9e\u73b0\u539f\u7406\u4e3b\u8981\u56f4\u7ed5\u4ee5\u4e0b\u51e0\u4e2a\u6838\u5fc3\u673a\u5236\u5c55\u5f00\uff1a</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%AF%B9%E8%B1%A1%E5%85%B3%E7%B3%BB%E6%98%A0%E5%B0%84%EF%BC%88ORM%EF%BC%89%E6%A1%86%E6%9E%B6%E4%BB%8B%E7%BB%8D/#metadata-mapping","title":"\u5143\u6570\u636e\u6620\u5c04 (Metadata Mapping)","text":"<p>ORM\u6846\u67b6\u9996\u5148\u9700\u8981\u77e5\u9053\u5982\u4f55\u5c06\u4e00\u4e2aJava\uff08\u6216Python, C#\u7b49\uff09\u7c7b\u6620\u5c04\u5230\u6570\u636e\u5e93\u4e2d\u7684\u8868\uff0c\u4ee5\u53ca\u7c7b\u7684\u5c5e\u6027\u5982\u4f55\u6620\u5c04\u5230\u8868\u7684\u5217\u3002\u8fd9\u901a\u5e38\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u8fdb\u884c\u914d\u7f6e\uff1a</p> <ul> <li>XML\u914d\u7f6e\u6587\u4ef6\uff1a \u65e9\u671fORM\u6846\u67b6\u5e38\u7528\uff0c\u901a\u8fc7XML\u6587\u4ef6\u5b9a\u4e49\u7c7b\u4e0e\u8868\u3001\u5c5e\u6027\u4e0e\u5217\u7684\u6620\u5c04\u5173\u7cfb\u3001\u4e3b\u952e\u3001\u5916\u952e\u3001\u5173\u7cfb\u7b49\u3002</li> <li>\u6ce8\u89e3 (Annotations)\uff1a \u73b0\u4ee3ORM\u6846\u67b6\u4e3b\u6d41\u65b9\u5f0f\uff0c\u76f4\u63a5\u5728\u5b9e\u4f53\u7c7b\u7684\u6e90\u4ee3\u7801\u4e2d\u4f7f\u7528\u6ce8\u89e3\uff08\u5982JPA\u7684<code>@Entity</code>, <code>@Table</code>, <code>@Id</code>, <code>@Column</code>, <code>@OneToMany</code>\u7b49\uff09\u6765\u58f0\u660e\u6620\u5c04\u5173\u7cfb\u3002</li> <li>\u4ee3\u7801\u914d\u7f6e\uff1a \u67d0\u4e9bORM\u5141\u8bb8\u901a\u8fc7\u7f16\u7a0bAPI\u6765\u914d\u7f6e\u6620\u5c04\u5173\u7cfb\u3002</li> </ul> <p>\u8fd9\u4e9b\u5143\u6570\u636e\u662fORM\u6846\u67b6\u5728\u8fd0\u884c\u65f6\u751f\u6210SQL\u8bed\u53e5\u548c\u5c06\u7ed3\u679c\u96c6\u6620\u5c04\u56de\u5bf9\u8c61\u7684\u4f9d\u636e\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%AF%B9%E8%B1%A1%E5%85%B3%E7%B3%BB%E6%98%A0%E5%B0%84%EF%BC%88ORM%EF%BC%89%E6%A1%86%E6%9E%B6%E4%BB%8B%E7%BB%8D/#sql-sql-generation-and-execution","title":"\u8fd0\u884c\u65f6SQL\u751f\u6210\u4e0e\u6267\u884c (SQL Generation and Execution)","text":"<p>\u8fd9\u662fORM\u7684\u6838\u5fc3\u529f\u80fd\u4e4b\u4e00\u3002\u5f53\u5f00\u53d1\u8005\u901a\u8fc7\u5bf9\u8c61\u8fdb\u884c\u6570\u636e\u5e93\u64cd\u4f5c\u65f6\uff1a</p> <ul> <li>\u63d2\u5165 (Insert)\uff1a \u5f53\u4fdd\u5b58\u4e00\u4e2a\u65b0\u5bf9\u8c61\u65f6\uff0cORM\u4f1a\u6839\u636e\u5bf9\u8c61\u7684\u7c7b\u548c\u5c5e\u6027\uff0c\u7ed3\u5408\u6620\u5c04\u5143\u6570\u636e\uff0c\u52a8\u6001\u751f\u6210<code>INSERT INTO ... VALUES (...)</code>\u8bed\u53e5\u3002</li> <li>\u67e5\u8be2 (Select)\uff1a \u5f53\u9700\u8981\u52a0\u8f7d\u5bf9\u8c61\u65f6\uff0cORM\u4f1a\u6839\u636e\u67e5\u8be2\u6761\u4ef6\uff08\u53ef\u4ee5\u662fHQL/JPQL/LinQQL\u7b49\u9762\u5411\u5bf9\u8c61\u7684\u67e5\u8be2\u8bed\u8a00\uff0c\u6216Criteria API\uff09\u751f\u6210<code>SELECT ... FROM ... WHERE ...</code>\u8bed\u53e5\u3002</li> <li>\u66f4\u65b0 (Update)\uff1a \u5f53\u4fee\u6539\u4e86\u5bf9\u8c61\u7684\u5c5e\u6027\u5e76\u63d0\u4ea4\u65f6\uff0cORM\u4f1a\u6839\u636e\u5bf9\u8c61\u7684\u65b0\u65e7\u72b6\u6001\uff08\u901a\u8fc7\u810f\u68c0\u67e5\uff09\u751f\u6210<code>UPDATE ... SET ... WHERE ...</code>\u8bed\u53e5\u3002</li> <li>\u5220\u9664 (Delete)\uff1a \u5f53\u5220\u9664\u4e00\u4e2a\u5bf9\u8c61\u65f6\uff0cORM\u4f1a\u751f\u6210<code>DELETE FROM ... WHERE ...</code>\u8bed\u53e5\u3002</li> </ul> <p>ORM\u6846\u67b6\u901a\u5e38\u4f1a\u7ef4\u62a4\u4e00\u4e2aSQL\u65b9\u8a00\u9002\u914d\u5668\uff0c\u4ee5\u652f\u6301\u4e0d\u540c\u7684\u6570\u636e\u5e93\u7cfb\u7edf\uff08\u5982MySQL, PostgreSQL, Oracle, SQL Server\u7b49\uff09\uff0c\u5c06\u751f\u6210\u7684\u901a\u7528SQL\u8bed\u53e5\u8f6c\u6362\u4e3a\u7279\u5b9a\u6570\u636e\u5e93\u53ef\u6267\u884c\u7684SQL\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%AF%B9%E8%B1%A1%E5%85%B3%E7%B3%BB%E6%98%A0%E5%B0%84%EF%BC%88ORM%EF%BC%89%E6%A1%86%E6%9E%B6%E4%BB%8B%E7%BB%8D/#result-set-mapping","title":"\u7ed3\u679c\u96c6\u6620\u5c04 (Result Set Mapping)","text":"<p>\u5f53ORM\u6267\u884c\u5b8cSQL\u67e5\u8be2\u5e76\u4ece\u6570\u636e\u5e93\u83b7\u5f97\u7ed3\u679c\u96c6\uff08ResultSet\uff09\u540e\uff0c\u5b83\u9700\u8981\u5c06\u8fd9\u4e9b\u6570\u636e\u8f6c\u6362\u56de\u5bf9\u5e94\u7684\u5bf9\u8c61\u3002</p> <ul> <li>\u53cd\u5c04 (Reflection)\uff1a ORM\u6846\u67b6\u5927\u91cf\u4f7f\u7528\u53cd\u5c04\u673a\u5236\u3002\u5b83\u4f1a\u901a\u8fc7\u53cd\u5c04\u83b7\u53d6\u5b9e\u4f53\u7c7b\u7684\u6784\u9020\u51fd\u6570\u6765\u521b\u5efa\u5bf9\u8c61\u5b9e\u4f8b\uff0c\u7136\u540e\u901a\u8fc7\u53cd\u5c04\u8c03\u7528setter\u65b9\u6cd5\u6216\u76f4\u63a5\u4fee\u6539\u5b57\u6bb5\uff0c\u5c06ResultSet\u4e2d\u7684\u6bcf\u4e00\u5217\u6570\u636e\u586b\u5145\u5230\u5bf9\u8c61\u7684\u5bf9\u5e94\u5c5e\u6027\u4e2d\u3002</li> <li>\u5b57\u8282\u7801\u589e\u5f3a (Bytecode Enhancement)\uff1a \u4e00\u4e9b\u9ad8\u6027\u80fd\u7684ORM\u6846\u67b6\uff08\u5982Hibernate\uff09\u4f1a\u4f7f\u7528\u5b57\u8282\u7801\u589e\u5f3a\u6280\u672f\uff08\u5982\u4f7f\u7528CGLIB\u6216Javassist\uff09\u5728\u8fd0\u884c\u65f6\u4fee\u6539\u6216\u751f\u6210\u5b9e\u4f53\u7c7b\u7684\u5b57\u8282\u7801\uff0c\u4ee5\u5b9e\u73b0\u66f4\u9ad8\u6548\u7684\u6570\u636e\u8bbf\u95ee\u548c\u5ef6\u8fdf\u52a0\u8f7d\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%AF%B9%E8%B1%A1%E5%85%B3%E7%B3%BB%E6%98%A0%E5%B0%84%EF%BC%88ORM%EF%BC%89%E6%A1%86%E6%9E%B6%E4%BB%8B%E7%BB%8D/#persistence-context-session","title":"\u6301\u4e45\u5316\u4e0a\u4e0b\u6587 (Persistence Context) / \u4f1a\u8bdd (Session)","text":"<p>ORM\u6846\u67b6\u901a\u5e38\u4f1a\u5f15\u5165\u4e00\u4e2a\u201c\u6301\u4e45\u5316\u4e0a\u4e0b\u6587\u201d\u6216\u201c\u4f1a\u8bdd\u201d\u7684\u6982\u5ff5\uff0c\u5b83\u662f\u5b9e\u4f53\u5bf9\u8c61\u548c\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u4e00\u4e2a\u6865\u6881\u3002</p> <ul> <li>\u4e00\u7ea7\u7f13\u5b58 (First-Level Cache) / \u8eab\u4efd\u6620\u5c04 (Identity Map)\uff1a \u5728\u4e00\u4e2a\u4f1a\u8bdd\u751f\u547d\u5468\u671f\u5185\uff0c\u5982\u679c\u540c\u4e00\u4e2a\u4e3b\u952e\u7684\u5b9e\u4f53\u88ab\u52a0\u8f7d\u591a\u6b21\uff0cORM\u4f1a\u76f4\u63a5\u4ece\u4e00\u7ea7\u7f13\u5b58\u4e2d\u8fd4\u56de\u5df2\u5b58\u5728\u7684\u5bf9\u8c61\u5b9e\u4f8b\uff0c\u800c\u4e0d\u662f\u91cd\u65b0\u67e5\u8be2\u6570\u636e\u5e93\u3002\u8fd9\u786e\u4fdd\u4e86\u5728\u540c\u4e00\u4e2a\u4f1a\u8bdd\u4e2d\uff0c\u6bcf\u4e2a\u6570\u636e\u5e93\u884c\u53ea\u6709\u4e00\u4e2a\u5bf9\u5e94\u7684Java\u5bf9\u8c61\u5b9e\u4f8b\uff0c\u907f\u514d\u4e86\u6570\u636e\u4e0d\u4e00\u81f4\u6027\uff0c\u5e76\u51cf\u5c11\u4e86\u6570\u636e\u5e93\u8bbf\u95ee\u3002</li> <li>\u810f\u68c0\u67e5 (Dirty Checking) / \u53d8\u66f4\u8ddf\u8e2a\uff1a \u5f53\u4e00\u4e2a\u53d7\u7ba1\uff08managed\uff09\u5bf9\u8c61\u88ab\u4fee\u6539\u540e\uff0cORM\u6846\u67b6\u4f1a\u5728\u4f1a\u8bdd\u63d0\u4ea4\u6216\u5237\u65b0\u65f6\u81ea\u52a8\u68c0\u6d4b\u5230\u8fd9\u4e9b\u6539\u53d8\uff0c\u5e76\u751f\u6210\u76f8\u5e94\u7684UPDATE\u8bed\u53e5\u3002\u5b83\u901a\u8fc7\u6bd4\u8f83\u5f53\u524d\u5bf9\u8c61\u7684\u72b6\u6001\u4e0e\u52a0\u8f7d\u65f6\u7684\u521d\u59cb\u72b6\u6001\u6765\u5224\u65ad\u662f\u5426\u6709\u5c5e\u6027\u88ab\u4fee\u6539\u3002</li> <li>\u4e8b\u52a1\u7ba1\u7406\uff1a ORM\u6846\u67b6\u4e0e\u4e8b\u52a1\u7ba1\u7406\u5668\uff08\u5982Spring\u7684\u4e8b\u52a1\u7ba1\u7406\u5668\uff09\u7d27\u5bc6\u96c6\u6210\uff0c\u786e\u4fdd\u6570\u636e\u5e93\u64cd\u4f5c\u7684\u539f\u5b50\u6027\u3001\u4e00\u81f4\u6027\u3001\u9694\u79bb\u6027\u548c\u6301\u4e45\u6027\uff08ACID\u7279\u6027\uff09\u3002\u4e00\u4e2a\u4f1a\u8bdd\u901a\u5e38\u4e0e\u4e00\u4e2a\u4e8b\u52a1\u7ed1\u5b9a\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%AF%B9%E8%B1%A1%E5%85%B3%E7%B3%BB%E6%98%A0%E5%B0%84%EF%BC%88ORM%EF%BC%89%E6%A1%86%E6%9E%B6%E4%BB%8B%E7%BB%8D/#association-handling","title":"\u5173\u8054\u5173\u7cfb\u5904\u7406 (Association Handling)","text":"<p>\u9762\u5411\u5bf9\u8c61\u6a21\u578b\u4e2d\u7684\u5bf9\u8c61\u4e4b\u95f4\u5b58\u5728\u4e00\u5bf9\u4e00\u3001\u4e00\u5bf9\u591a\u3001\u591a\u5bf9\u4e00\u3001\u591a\u5bf9\u591a\u7b49\u590d\u6742\u5173\u7cfb\uff0cORM\u6846\u67b6\u9700\u8981\u5c06\u8fd9\u4e9b\u5173\u7cfb\u6620\u5c04\u5230\u6570\u636e\u5e93\u7684\u5916\u952e\u548c\u8054\u63a5\u8868\u3002</p> <ul> <li>\u5ef6\u8fdf\u52a0\u8f7d (Lazy Loading)\uff1a \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5f53\u52a0\u8f7d\u4e00\u4e2a\u5b9e\u4f53\u65f6\uff0c\u5176\u5173\u8054\u7684\u5b9e\u4f53\uff08\u5982\u4e00\u4e2a\u8ba2\u5355\u7684\u5546\u54c1\u5217\u8868\uff09\u5e76\u4e0d\u4f1a\u7acb\u5373\u4ece\u6570\u636e\u5e93\u4e2d\u52a0\u8f7d\u3002\u53ea\u6709\u5f53\u771f\u6b63\u8bbf\u95ee\u8fd9\u4e9b\u5173\u8054\u5b9e\u4f53\u65f6\uff0cORM\u624d\u4f1a\u53d1\u51fa\u989d\u5916\u7684SQL\u67e5\u8be2\u53bb\u52a0\u8f7d\u5b83\u4eec\u3002\u8fd9\u51cf\u5c11\u4e86\u4e0d\u5fc5\u8981\u7684\u6570\u636e\u5e93\u67e5\u8be2\u548c\u5185\u5b58\u6d88\u8017\u3002</li> <li>\u6025\u5207\u52a0\u8f7d (Eager Loading)\uff1a \u5f00\u53d1\u8005\u4e5f\u53ef\u4ee5\u914d\u7f6eORM\uff0c\u4f7f\u5176\u5728\u52a0\u8f7d\u4e3b\u5b9e\u4f53\u65f6\uff0c\u7acb\u5373\u52a0\u8f7d\u6240\u6709\u5173\u8054\u7684\u5b9e\u4f53\u3002</li> <li>\u7ea7\u8054\u64cd\u4f5c (Cascading Operations)\uff1a \u5141\u8bb8\u5b9a\u4e49\u5f53\u5bf9\u4e00\u4e2a\u5b9e\u4f53\u6267\u884c\u67d0\u79cd\u64cd\u4f5c\uff08\u5982\u4fdd\u5b58\u3001\u5220\u9664\uff09\u65f6\uff0c\u5176\u5173\u8054\u5b9e\u4f53\u4e5f\u81ea\u52a8\u6267\u884c\u76f8\u540c\u7684\u64cd\u4f5c\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%84%8F%E5%90%91%E9%94%81%E4%BB%8B%E7%BB%8D/","title":"\u610f\u5411\u9501\u4ecb\u7ecd","text":"<p>\u610f\u5411\u9501\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u8868\u7ea7\u9501\uff0c\u5b83\u5e76\u4e0d\u4f1a\u76f4\u63a5\u9501\u5b9a\u6570\u636e\u884c\uff0c\u800c\u662f\u7528\u6765\u8868\u660e\u4e00\u4e2a\u4e8b\u52a1\u6253\u7b97\u5728\u8868\u4e2d\u7684\u67d0\u4e9b\u884c\u4e0a\u8bbe\u7f6e\u5171\u4eab\u9501\u6216\u6392\u4ed6\u9501\u3002 \u6211\u4eec\u53ef\u4ee5\u5c06\u5176\u7406\u89e3\u4e3a\u4e00\u4e2a\u201c\u4fe1\u53f7\u201d\u6216\u201c\u6807\u8bc6\u201d\uff0c\u5f53\u8fd9\u4e2a\u4fe1\u53f7\u5b58\u5728\u65f6\uff0c\u5176\u4ed6\u4e8b\u52a1\u5c31\u80fd\u5feb\u901f\u5730\u4e86\u89e3\u5230\u8868\u5185\u5df2\u7ecf\u5b58\u5728\u6216\u5373\u5c06\u5b58\u5728\u884c\u9501\uff0c\u800c\u65e0\u9700\u9010\u884c\u68c0\u67e5\u3002</p> <p>\u610f\u5411\u9501\u7531\u6570\u636e\u5e93\u5f15\u64ce\uff08\u5982MySQL\u7684InnoDB\uff09\u81ea\u52a8\u7ba1\u7406\u548c\u7ef4\u62a4\uff0c\u7528\u6237\u65e0\u6cd5\u4e5f\u65e0\u9700\u624b\u52a8\u8fdb\u884c\u64cd\u4f5c\u3002 \u5f53\u4e8b\u52a1\u9700\u8981\u7ed9\u67d0\u4e00\u884c\u6570\u636e\u52a0\u9501\u65f6\uff0c\u6570\u636e\u5e93\u4f1a\u81ea\u52a8\u5148\u4e3a\u8be5\u884c\u6240\u5728\u7684\u8868\u52a0\u4e0a\u76f8\u5e94\u7684\u610f\u5411\u9501\u3002</p> <p>\u610f\u5411\u9501\u4e3b\u8981\u5206\u4e3a\u4ee5\u4e0b\u4e24\u79cd\u7c7b\u578b\uff1a</p> <ul> <li>\u610f\u5411\u5171\u4eab\u9501 (Intention Shared Lock, IS): \u8868\u793a\u4e00\u4e2a\u4e8b\u52a1\u51c6\u5907\u6216\u8005\u5df2\u7ecf\u5bf9\u8868\u4e2d\u7684\u67d0\u4e9b\u884c\u8bbe\u7f6e\u4e86\u5171\u4eab\u9501\uff08S\u9501\uff0c\u4e5f\u79f0\u8bfb\u9501\uff09\u3002\u4f8b\u5982\uff0c\u6267\u884c <code>SELECT ... FOR SHARE</code> \u8bed\u53e5\u524d\uff0c\u4f1a\u5148\u5728\u8868\u4e0a\u52a0\u4e00\u4e2aIS\u9501\u3002</li> <li>\u610f\u5411\u6392\u4ed6\u9501 (Intention Exclusive Lock, IX): \u8868\u793a\u4e00\u4e2a\u4e8b\u52a1\u51c6\u5907\u6216\u8005\u5df2\u7ecf\u5bf9\u8868\u4e2d\u7684\u67d0\u4e9b\u884c\u8bbe\u7f6e\u4e86\u6392\u4ed6\u9501\uff08X\u9501\uff0c\u4e5f\u79f0\u5199\u9501\uff09\u3002\u4f8b\u5982\uff0c\u6267\u884c <code>UPDATE</code>, <code>DELETE</code>, <code>INSERT</code> \u6216 <code>SELECT ... FOR UPDATE</code> \u8bed\u53e5\u524d\uff0c\u4f1a\u5148\u5728\u8868\u4e0a\u52a0\u4e00\u4e2aIX\u9501\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%84%8F%E5%90%91%E9%94%81%E4%BB%8B%E7%BB%8D/#_1","title":"\u4e3a\u4ec0\u4e48\u9700\u8981\u610f\u5411\u9501\uff1f","text":"<p>\u610f\u5411\u9501\u7684\u51fa\u73b0\u4e3b\u8981\u662f\u4e3a\u4e86\u89e3\u51b3\u4e00\u4e2a\u6548\u7387\u95ee\u9898\uff1a\u5982\u4f55\u5728\u5b58\u5728\u884c\u9501\u7684\u60c5\u51b5\u4e0b\uff0c\u9ad8\u6548\u5730\u4e3a\u6574\u4e2a\u8868\u52a0\u9501\uff1f</p> <p>\u60f3\u8c61\u4e00\u4e2a\u6ca1\u6709\u610f\u5411\u9501\u7684\u573a\u666f\uff1a</p> <ol> <li>\u4e8b\u52a1A \u5bf9\u8868\u4e2d\u7684\u67d0\u4e00\u884c\u8bb0\u5f55\u52a0\u4e0a\u4e86\u6392\u4ed6\u9501\uff08\u884c\u9501\uff09\u3002</li> <li>\u6b64\u65f6\uff0c\u4e8b\u52a1B \u60f3\u8981\u5bf9\u6574\u4e2a\u8868\u52a0\u4e0a\u8868\u7ea7\u6392\u4ed6\u9501\uff08\u4f8b\u5982\u6267\u884c <code>LOCK TABLES ... WRITE;</code>\uff09\u3002</li> <li>\u4e3a\u4e86\u786e\u4fdd\u52a0\u9501\u7684\u5b89\u5168\u6027\uff0c\u4e8b\u52a1B\u5fc5\u987b\u786e\u8ba4\u8868\u91cc\u6ca1\u6709\u4efb\u4f55\u4e00\u884c\u88ab\u5176\u4ed6\u4e8b\u52a1\u9501\u4f4f\u3002</li> <li>\u56e0\u6b64\uff0c\u4e8b\u52a1B\u4e0d\u5f97\u4e0d\u904d\u5386\u8868\u4e2d\u7684\u6bcf\u4e00\u884c\uff0c\u53bb\u68c0\u67e5\u662f\u5426\u5b58\u5728\u4e0e\u5b83\u7684\u8868\u9501\u76f8\u51b2\u7a81\u7684\u884c\u9501\u3002</li> </ol> <p>\u5982\u679c\u8fd9\u5f20\u8868\u7684\u6570\u636e\u91cf\u975e\u5e38\u5927\uff08\u6bd4\u5982\u6709\u6570\u767e\u4e07\u884c\uff09\uff0c\u9010\u884c\u626b\u63cf\u7684\u5f00\u9500\u5c06\u662f\u5de8\u5927\u7684\uff0c\u8fd9\u4f1a\u4e25\u91cd\u5f71\u54cd\u6570\u636e\u5e93\u7684\u6027\u80fd\u3002</p> <p>\u5f15\u5165\u610f\u5411\u9501\u540e\u7684\u6d41\u7a0b\u5982\u4e0b\uff1a</p> <ol> <li>\u4e8b\u52a1A \u5728\u7ed9\u67d0\u4e00\u884c\u52a0\u6392\u4ed6\u9501\uff08\u884c\u9501\uff09\u4e4b\u524d\uff0c\u4f1a\u5148\u81ea\u52a8\u5730\u4e3a\u8be5\u8868\u52a0\u4e0a\u4e00\u4e2a\u610f\u5411\u6392\u4ed6\u9501\uff08IX\u9501\uff09\u3002</li> <li>\u5f53\u4e8b\u52a1B \u60f3\u8981\u5bf9\u6574\u4e2a\u8868\u52a0\u8868\u7ea7\u6392\u4ed6\u9501\u65f6\uff0c\u5b83\u4e0d\u518d\u9700\u8981\u9010\u884c\u626b\u63cf\u3002</li> <li>\u4e8b\u52a1B\u4f1a\u9996\u5148\u68c0\u67e5\u8be5\u8868\u662f\u5426\u5b58\u5728\u610f\u5411\u9501\u3002\u5b83\u53d1\u73b0\u8868\u4e0a\u5df2\u7ecf\u5b58\u5728\u4e00\u4e2aIX\u9501\u3002</li> <li>IX\u9501\u7684\u5b58\u5728\u544a\u8bc9\u4e8b\u52a1B\uff1a\u201c\u8868\u91cc\u80af\u5b9a\u6709\u67d0\u4e9b\u884c\u88ab\u52a0\u4e86\u6392\u4ed6\u9501\u201d\u3002\u7531\u4e8e\u8868\u7ea7\u6392\u4ed6\u9501\u4e0e\u884c\u7ea7\u6392\u4ed6\u9501\u662f\u51b2\u7a81\u7684\uff0c\u4e8b\u52a1B\u7684\u52a0\u9501\u8bf7\u6c42\u5c31\u4f1a\u88ab\u963b\u585e\uff0c\u76f4\u5230\u4e8b\u52a1A\u91ca\u653e\u5b83\u7684\u884c\u9501\uff08\u548c\u610f\u5411\u9501\uff09\u3002</li> </ol> <p>\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u6570\u636e\u5e93\u4ec5\u9700\u4e00\u6b21\u8868\u7ea7\u522b\u7684\u68c0\u67e5\uff0c\u5c31\u80fd\u5224\u65ad\u662f\u5426\u53ef\u4ee5\u5b89\u5168\u5730\u6388\u4e88\u8868\u9501\uff0c\u4ece\u800c\u907f\u514d\u4e86\u4ee3\u4ef7\u9ad8\u6602\u7684\u5168\u8868\u884c\u9501\u626b\u63cf\uff0c\u6781\u5927\u5730\u63d0\u5347\u4e86\u52a0\u9501\u5224\u65ad\u7684\u6548\u7387\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%84%8F%E5%90%91%E9%94%81%E4%BB%8B%E7%BB%8D/#_2","title":"\u610f\u5411\u9501\u7684\u517c\u5bb9\u6027","text":"<p>\u7406\u89e3\u610f\u5411\u9501\u7684\u5173\u952e\u5728\u4e8e\u5b83\u7684\u517c\u5bb9\u6027\u89c4\u5219\u3002\u610f\u5411\u9501\u4e4b\u95f4\u662f\u4e92\u76f8\u517c\u5bb9\u7684\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e00\u4e2a\u4e8b\u52a1\u83b7\u53d6\u4e86IS\u9501\uff0c\u53e6\u4e00\u4e2a\u4e8b\u52a1\u4ecd\u7136\u53ef\u4ee5\u83b7\u53d6IS\u6216IX\u9501\u3002 \u5b83\u4eec\u7684\u4e3b\u8981\u4f5c\u7528\u662f\u4e0e\u8868\u7ea7\u7684\u5171\u4eab\u9501\uff08S\uff09\u548c\u6392\u4ed6\u9501\uff08X\uff09\u4ea7\u751f\u51b2\u7a81\u3002</p> \u8868\u9501 X (\u6392\u4ed6) \u8868\u9501 S (\u5171\u4eab) \u610f\u5411\u9501 IX \u610f\u5411\u9501 IS \u8868\u9501 X (\u6392\u4ed6) \u51b2\u7a81 \u51b2\u7a81 \u51b2\u7a81 \u51b2\u7a81 \u8868\u9501 S (\u5171\u4eab) \u51b2\u7a81 \u517c\u5bb9 \u51b2\u7a81 \u517c\u5bb9 \u610f\u5411\u9501 IX \u51b2\u7a81 \u51b2\u7a81 \u517c\u5bb9 \u517c\u5bb9 \u610f\u5411\u9501 IS \u51b2\u7a81 \u517c\u5bb9 \u517c\u5bb9 \u517c\u5bb9"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%85%A2%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96%E6%80%9D%E8%B7%AF/","title":"\u6162\u67e5\u8be2\u4f18\u5316\u601d\u8def","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%85%A2%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96%E6%80%9D%E8%B7%AF/#troubleshooting-process","title":"\u6392\u67e5\u6d41\u7a0b (Troubleshooting Process)","text":"<p>\u5f53\u9047\u5230SQL\u67e5\u8be2\u53d8\u6162\u65f6\uff0c\u9996\u8981\u4efb\u52a1\u662f\u5b9a\u4f4d\u95ee\u9898\u3002</p> <ul> <li>\u5f00\u542f\u6162\u67e5\u8be2\u65e5\u5fd7 (Enable Slow Query Log): \u8bb0\u5f55\u6267\u884c\u65f6\u95f4\u8d85\u8fc7\u9608\u503c\u7684SQL\u8bed\u53e5\uff0c\u7528\u4e8e\u53d1\u73b0\u6709\u95ee\u9898\u7684\u67e5\u8be2\u3002</li> <li>\u4f7f\u7528 <code>EXPLAIN</code> \u5206\u6790\u6267\u884c\u8ba1\u5212: \u901a\u8fc7 <code>EXPLAIN</code> \u547d\u4ee4\u5206\u6790SQL\u8bed\u53e5\u7684\u6267\u884c\u8ba1\u5212\uff0c\u67e5\u770b\u662f\u5426\u4f7f\u7528\u4e86\u7d22\u5f15\u3001\u4f7f\u7528\u4e86\u54ea\u4e2a\u7d22\u5f15\u3001\u626b\u63cf\u4e86\u591a\u5c11\u884c\u7b49\u5173\u952e\u4fe1\u606f\uff0c\u5e2e\u52a9\u5b9a\u4f4d\u6027\u80fd\u74f6\u9888\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%85%A2%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96%E6%80%9D%E8%B7%AF/#sql-sql-statements","title":"SQL\u8bed\u53e5\u5c42\u9762 (SQL Statements)","text":"<p>\u4e0d\u5408\u7406\u7684SQL\u5199\u6cd5\u662f\u5bfc\u81f4\u6162\u67e5\u8be2\u7684\u5e38\u89c1\u539f\u56e0\u3002</p> <ul> <li>\u907f\u514d\u4f7f\u7528 <code>SELECT *</code>: \u67e5\u8be2\u4e0d\u5fc5\u8981\u7684\u5217\u4f1a\u589e\u52a0\u7f51\u7edc\u5f00\u9500\u548c\u5185\u5b58\u6d88\u8017\u3002\u5e94\u53ea\u67e5\u8be2\u9700\u8981\u7684\u5b57\u6bb5\uff0c\u8fd9\u5728\u8986\u76d6\u7d22\u5f15\u7684\u573a\u666f\u4e0b\u5c24\u5176\u91cd\u8981\u3002</li> <li>\u51cf\u5c11\u591a\u8868JOIN\u67e5\u8be2: \u8fc7\u591a\u7684JOIN\uff08\u4f8b\u5982\u8fde\u63a53\u30014\u5f20\u8868\uff09\u4f1a\u4f7f\u67e5\u8be2\u53d8\u5f97\u590d\u6742\uff0cMySQL\u9700\u8981\u5904\u7406\u66f4\u591a\u7684\u6570\u636e\u548c\u5173\u8054\u903b\u8f91\uff0c\u5bfc\u81f4\u6027\u80fd\u4e0b\u964d\u3002</li> <li>\u907f\u514d\u6ee5\u7528\u5b50\u67e5\u8be2: \u5b50\u67e5\u8be2\uff08\u5c24\u5176\u662f\u5728 <code>WHERE</code> \u5b50\u53e5\u4e2d\u7684\u5173\u8054\u5b50\u67e5\u8be2\uff09\u7684\u6267\u884c\u6548\u7387\u901a\u5e38\u8f83\u4f4e\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u6539\u5199\u4e3aJOIN\u6216\u8005\u5176\u4ed6\u66f4\u9ad8\u6548\u7684\u65b9\u5f0f\u3002</li> <li>\u5904\u7406\u6df1\u5ea6\u5206\u9875\u95ee\u9898: \u5f53\u5206\u9875\u67e5\u8be2\u7684\u504f\u79fb\u91cf\u8fc7\u5927\u65f6\uff0c\u5982 <code>LIMIT 1000000, 20</code>\uff0cMySQL\u9700\u8981\u626b\u63cf1000020\u6761\u8bb0\u5f55\u7136\u540e\u4e22\u5f03\u524d\u9762\u76841000000\u6761\uff0c\u975e\u5e38\u4f4e\u6548\u3002\u53ef\u4ee5\u4f18\u5316\u4e3a\u57fa\u4e8e\u7d22\u5f15\u7684\u201c\u4e66\u7b7e\u201d\u5f0f\u5206\u9875\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%85%A2%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96%E6%80%9D%E8%B7%AF/#indexes","title":"\u7d22\u5f15\u5c42\u9762 (Indexes)","text":"<p>\u7d22\u5f15\u662f\u63d0\u5347\u67e5\u8be2\u901f\u5ea6\u7684\u6838\u5fc3\uff0c\u4f46\u4f7f\u7528\u4e0d\u5f53\u4e5f\u4f1a\u5f15\u53d1\u95ee\u9898\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%85%A2%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96%E6%80%9D%E8%B7%AF/#1-index-invalidation","title":"1. \u7d22\u5f15\u5931\u6548 (Index Invalidation)","text":"<ul> <li>\u6392\u67e5\u7d22\u5f15\u5931\u6548\u7684\u539f\u56e0:<ul> <li>\u5bf9\u7d22\u5f15\u5217\u4f7f\u7528\u51fd\u6570\u6216\u8868\u8fbe\u5f0f: \u4f8b\u5982 <code>WHERE YEAR(time_column) = 2023</code>\uff0c\u8fd9\u4f1a\u5bfc\u81f4\u7d22\u5f15\u5931\u6548\u3002\u5e94\u6539\u9020\u4e3a <code>WHERE time_column &gt;= '2023-01-01' AND time_column &lt; '2024-01-01'</code>\u3002</li> <li>\u9690\u5f0f\u7c7b\u578b\u8f6c\u6362 (Implicit Type Conversion): \u8fd9\u662f\u975e\u5e38\u5e38\u89c1\u4e14\u5bb9\u6613\u5ffd\u7565\u7684\u95ee\u9898\u3002\u4f8b\u5982\uff0c\u5982\u679c <code>id</code> \u5b57\u6bb5\u662f <code>varchar</code> \u7c7b\u578b\uff0c\u4f46\u67e5\u8be2\u6761\u4ef6\u5199\u6210 <code>WHERE id = 123</code>\uff08\u6570\u5b57\uff09\uff0c\u6570\u636e\u5e93\u4f1a\u81ea\u52a8\u8fdb\u884c\u7c7b\u578b\u8f6c\u6362\uff0c\u5bfc\u81f4\u7d22\u5f15\u5931\u6548\u3002\u53cd\u8fc7\u6765\uff0c\u5982\u679c\u5b57\u6bb5\u662f\u6570\u5b57\u7c7b\u578b\uff0c\u67e5\u8be2\u6761\u4ef6\u662f\u5b57\u7b26\u4e32\uff0c\u5219\u901a\u5e38\u4e0d\u4f1a\u5931\u6548\u3002</li> <li>\u4e0d\u7b26\u5408\u6700\u5de6\u524d\u7f00\u6cd5\u5219 (Leftmost Prefix Rule): \u5bf9\u4e8e\u8054\u5408\u7d22\u5f15\uff0c\u67e5\u8be2\u5fc5\u987b\u4ece\u7d22\u5f15\u7684\u7b2c\u4e00\u4e2a\u5b57\u6bb5\u5f00\u59cb\uff0c\u5e76\u4e14\u4e0d\u80fd\u8df3\u8fc7\u4e2d\u95f4\u7684\u5b57\u6bb5\u3002</li> <li>\u5176\u4ed6\u60c5\u51b5: \u5982 <code>LIKE</code> \u67e5\u8be2\u4ee5 <code>%</code> \u5f00\u5934\u3001<code>OR</code> \u6761\u4ef6\u4e24\u8fb9\u7684\u5217\u6ca1\u6709\u90fd\u5efa\u7acb\u7d22\u5f15\u7b49\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%85%A2%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96%E6%80%9D%E8%B7%AF/#2-poor-index-design","title":"2. \u7d22\u5f15\u8bbe\u8ba1\u4e0d\u5408\u7406 (Poor Index Design)","text":"<ul> <li>\u7d22\u5f15\u533a\u5206\u5ea6\u4f4e: \u5e94\u8be5\u4e3a\u533a\u5206\u5ea6\u9ad8\uff08\u57fa\u6570\u5927\uff09\u7684\u5217\u5efa\u7acb\u7d22\u5f15\uff0c\u4f8b\u5982\u6027\u522b\u8fd9\u7c7b\u53ea\u6709\u51e0\u4e2a\u503c\u7684\u5217\uff0c\u5efa\u7acb\u7d22\u5f15\u7684\u6548\u679c\u4e0d\u4f73\u3002</li> <li>\u8054\u5408\u7d22\u5f15\u5b57\u6bb5\u987a\u5e8f\u4e0d\u5f53: \u521b\u5efa\u8054\u5408\u7d22\u5f15\u65f6\uff0c\u5e94\u5c06\u9009\u62e9\u5ea6\u9ad8\u3001\u66f4\u5e38\u7528\u7684\u67e5\u8be2\u5b57\u6bb5\u653e\u5728\u524d\u9762\u3002</li> <li>\u9ad8\u9891\u7684<code>where</code>\u8fc7\u6ee4\u7684\u5b57\u6bb5\u672a\u5efa\u7acb\u7d22\u5f15\u3002</li> <li><code>GROUP BY</code> \u6216 <code>ORDER BY</code> \u7684\u5b57\u6bb5\u6ca1\u6709\u7d22\u5f15: \u8fd9\u4f1a\u5bfc\u81f4MySQL\u4f7f\u7528\u4e34\u65f6\u8868\u548c\u6587\u4ef6\u6392\u5e8f\uff08filesort\uff09\uff0c\u4ea7\u751f\u78c1\u76d8I/O\uff0c\u975e\u5e38\u8017\u65f6\u3002\u4e3a\u8fd9\u4e9b\u5b57\u6bb5\u5efa\u7acb\u5408\u9002\u7684\u7d22\u5f15\u53ef\u4ee5\u663e\u8457\u63d0\u5347\u6027\u80fd\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%85%A2%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96%E6%80%9D%E8%B7%AF/#3","title":"3. \u7d22\u5f15\u4f18\u5316\u7b56\u7565","text":"<ul> <li>\u4f7f\u7528\u8986\u76d6\u7d22\u5f15 (Covering Index): \u5982\u679c\u7d22\u5f15\u4e2d\u5df2\u7ecf\u5305\u542b\u4e86\u6240\u6709\u9700\u8981\u67e5\u8be2\u7684\u5b57\u6bb5\uff0cMySQL\u5c31\u53ef\u4ee5\u76f4\u63a5\u4ece\u7d22\u5f15\u4e2d\u8fd4\u56de\u6570\u636e\uff0c\u800c\u65e0\u9700\u56de\u5230\u6570\u636e\u8868\u4e2d\u518d\u6b21\u67e5\u8be2\uff08\u8fd9\u4e2a\u8fc7\u7a0b\u79f0\u4e3a\u201c\u56de\u8868\u201d\uff09\u3002\u8fd9\u53ef\u4ee5\u6781\u5927\u5730\u51cf\u5c11I/O\u64cd\u4f5c\uff0c\u63d0\u5347\u67e5\u8be2\u6548\u7387\u3002</li> <li>\u907f\u514d\u56de\u8868 (Table Access by Index RowID): \u8054\u5408\u7d22\u5f15\u662f\u5b9e\u73b0\u8986\u76d6\u7d22\u5f15\u3001\u907f\u514d\u56de\u8868\u7684\u6709\u6548\u624b\u6bb5\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%85%A2%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96%E6%80%9D%E8%B7%AF/#database-design","title":"\u6570\u636e\u5e93\u8bbe\u8ba1\u5c42\u9762 (Database Design)","text":"<p>\u826f\u597d\u7684\u6570\u636e\u5e93\u8bbe\u8ba1\u662f\u9ad8\u6027\u80fd\u7684\u57fa\u77f3\u3002</p> <ul> <li>\u5b57\u6bb5\u7c7b\u578b\u5c3d\u91cf\u5c0f: \u5728\u6ee1\u8db3\u4e1a\u52a1\u9700\u6c42\u7684\u524d\u63d0\u4e0b\uff0c\u5e94\u4e3a\u6570\u636e\u8868\u5b57\u6bb5\u9009\u62e9\u5c3d\u53ef\u80fd\u5c0f\u7684\u6570\u636e\u7c7b\u578b\u3002\u4f8b\u5982\uff0c\u80fd\u7528 <code>INT</code> \u5c31\u4e0d\u7528 <code>BIGINT</code>\uff0c\u80fd\u7528 <code>VARCHAR(50)</code> \u5c31\u4e0d\u7528 <code>VARCHAR(255)</code>\u3002\u5b57\u6bb5\u7c7b\u578b\u8fc7\u5927\u4f1a\u5360\u7528\u66f4\u591a\u5b58\u50a8\u7a7a\u95f4\u548c\u5185\u5b58\uff0c\u5f71\u54cdI/O\u6548\u7387\u3002</li> <li>\u907f\u514d\u8303\u5f0f\u5316\u8fc7\u9ad8: \u8fc7\u9ad8\u7684\u8303\u5f0f\u5316\u4f1a\u5bfc\u81f4\u67e5\u8be2\u65f6\u9700\u8981\u8fdb\u884c\u5927\u91cf\u7684\u8868\u8fde\u63a5\uff08JOIN\uff09\u3002</li> <li>\u9002\u5f53\u8fdb\u884c\u53cd\u8303\u5f0f\u5316\u8bbe\u8ba1: \u53ef\u4ee5\u5728\u8868\u4e2d\u9002\u5f53\u589e\u52a0\u5197\u4f59\u5b57\u6bb5\uff0c\u4ee5\u7a7a\u95f4\u6362\u65f6\u95f4\uff0c\u51cf\u5c11\u67e5\u8be2\u65f6\u7684JOIN\u64cd\u4f5c\u3002</li> <li>\u5206\u5e93\u5206\u8868 (Sharding/Partitioning): \u5f53\u5355\u8868\u6570\u636e\u91cf\u8fc7\u5927\u65f6\uff08\u4f8b\u5982\u8fbe\u5230\u5343\u4e07\u7ea7\uff09\uff0c\u67e5\u8be2\u6027\u80fd\u4f1a\u6025\u5267\u4e0b\u964d\u3002\u6b64\u65f6\u53ef\u4ee5\u8003\u8651\u8fdb\u884c\u6c34\u5e73\u62c6\u5206\uff08\u5206\u5e93\u5206\u8868\uff09\u6765\u5206\u6563\u6570\u636e\u548c\u8bbf\u95ee\u538b\u529b\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%85%A2%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96%E6%80%9D%E8%B7%AF/#database-system-configuration","title":"\u6570\u636e\u5e93\u7cfb\u7edf\u914d\u7f6e (Database System Configuration)","text":"<ul> <li>\u7f13\u51b2\u6c60\u5927\u5c0f\u4e0d\u8db3 (Innodb_buffer_pool_size): \u7f13\u51b2\u6c60\uff08Buffer Pool\uff09\u53ef\u4ee5\u770b\u4f5c\u4e00\u4e2a\u5185\u5b58\u7f13\u5b58\u533a\uff0c\u7528\u4e8e\u5b58\u653e\u70ed\u70b9\u6570\u636e\u548c\u7d22\u5f15\u3002\u5982\u679c\u7f13\u51b2\u6c60\u592a\u5c0f\uff0c\u4f1a\u5bfc\u81f4\u6570\u636e\u9891\u7e41\u5730\u4ece\u78c1\u76d8\u8bfb\u53d6\uff0c\u4ea7\u751f\u5927\u91cf\u78c1\u76d8I/O\u3002</li> <li>\u8fde\u63a5\u6570\u914d\u7f6e\u4e0d\u5f53: \u8fde\u63a5\u6570\uff08<code>max_connections</code>\uff09\u8bbe\u7f6e\u8fc7\u4f4e\u4f1a\u4e0d\u591f\u7528\uff0c\u5bfc\u81f4\u5e94\u7528\u65e0\u6cd5\u8fde\u63a5\u6570\u636e\u5e93\uff1b\u8bbe\u7f6e\u8fc7\u9ad8\u5219\u4f1a\u6d88\u8017\u5927\u91cf\u670d\u52a1\u5668\u5185\u5b58\uff0c\u5e76\u53ef\u80fd\u56e0\u9891\u7e41\u7684\u4e0a\u4e0b\u6587\u5207\u6362\u5f00\u9500\u800c\u5bfc\u81f4\u9ad8\u5e76\u53d1\u65f6\u6027\u80fd\u4e0b\u964d\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%85%A2%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96%E6%80%9D%E8%B7%AF/#architecture-level","title":"\u67b6\u6784\u5c42\u9762 (Architecture Level)","text":"<p>\u5f53\u5355\u4e00\u6570\u636e\u5e93\u65e0\u6cd5\u6ee1\u8db3\u6027\u80fd\u8981\u6c42\u65f6\uff0c\u9700\u8981\u4ece\u67b6\u6784\u4e0a\u8fdb\u884c\u4f18\u5316\u3002</p> <ul> <li>\u8bfb\u5199\u5206\u79bb (Read/Write Splitting): \u901a\u8fc7\u4e3b\u4ece\u590d\u5236\uff0c\u5c06\u5199\u64cd\u4f5c\u548c\u8bfb\u64cd\u4f5c\u5206\u79bb\u5230\u4e0d\u540c\u7684\u6570\u636e\u5e93\u670d\u52a1\u5668\u4e0a\uff0c\u5206\u6563\u5355\u70b9\u6545\u969c\u548c\u8bfb\u5199\u538b\u529b\u3002</li> <li>\u5206\u5e93\u5206\u8868 (Database Sharding): \u89e3\u51b3\u5355\u5e93\u6216\u5355\u8868\u6570\u636e\u91cf\u8fc7\u5927\u5e26\u6765\u7684\u6027\u80fd\u74f6\u9888\u3002</li> <li>\u52a0\u7f13\u5b58 (Caching): \u5728\u6570\u636e\u5e93\u4e0a\u5c42\u589e\u52a0\u7f13\u5b58\u5c42\uff08\u5982Redis\u3001Memcached\uff09\uff0c\u7f13\u5b58\u70ed\u70b9\u6570\u636e\uff0c\u5927\u5e45\u5ea6\u7f13\u89e3\u6570\u636e\u5e93\u7684\u8bfb\u53d6\u538b\u529b\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%8C%83%E5%BC%8F/","title":"\u6570\u636e\u5e93\u8303\u5f0f","text":"<p>\u6570\u636e\u5e93\u8303\u5f0f\uff08Database Normal Form\uff09\uff0c\u662f\u5173\u7cfb\u6570\u636e\u5e93\u8bbe\u8ba1\u65f6\u9700\u8981\u9075\u5faa\u7684\u4e00\u7cfb\u5217\u89c4\u8303\u3002\u5176\u4e3b\u8981\u76ee\u6807\u662f\u51cf\u5c11\u6570\u636e\u5197\u4f59\u3001\u63d0\u9ad8\u6570\u636e\u4e00\u81f4\u6027\u548c\u5b8c\u6574\u6027\uff0c\u4ee5\u53ca\u4f18\u5316\u5b58\u50a8\u6548\u7387\u3002 </p> <p>\u8303\u5f0f\u4ece\u4f4e\u5230\u9ad8\u5448\u9012\u6b21\u89c4\u8303\uff0c\u8d8a\u9ad8\u7684\u8303\u5f0f\uff0c\u6570\u636e\u5e93\u7684\u5197\u4f59\u5ea6\u5c31\u8d8a\u5c0f\u3002 \u76ee\u524d\uff0c\u5173\u7cfb\u6570\u636e\u5e93\u4e2d\u4e3b\u8981\u7684\u8303\u5f0f\u6709\uff1a *   \u7b2c\u4e00\u8303\u5f0f (1NF) *   \u7b2c\u4e8c\u8303\u5f0f (2NF) *   \u7b2c\u4e09\u8303\u5f0f (3NF) *   \u5df4\u65af-\u79d1\u5fb7\u8303\u5f0f (BCNF) *   \u7b2c\u56db\u8303\u5f0f (4NF) *   \u7b2c\u4e94\u8303\u5f0f (5NF)</p> <p>\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u6700\u5e38\u9075\u5faa\u7684\u662f\u7b2c\u4e09\u8303\u5f0f\uff083NF\uff09\u6216BCNF\u3002 \u8fc7\u9ad8\u7684\u8303\u5f0f\u5316\u53ef\u80fd\u4f1a\u5bfc\u81f4\u8868\u8fc7\u5ea6\u62c6\u5206\uff0c\u589e\u52a0\u67e5\u8be2\u7684\u590d\u6742\u6027\u3002</p> <p>\u5728\u4e86\u89e3\u8303\u5f0f\u4e4b\u524d\uff0c\u9700\u8981\u5148\u7406\u89e3\u51e0\u4e2a\u57fa\u672c\u6982\u5ff5\uff1a *   \u51fd\u6570\u4f9d\u8d56\uff1a\u5728\u4e00\u4e2a\u5173\u7cfb\u4e2d\uff0c\u5982\u679c\u901a\u8fc7\u5c5e\u6027X\u7684\u503c\u53ef\u4ee5\u552f\u4e00\u786e\u5b9a\u5c5e\u6027Y\u7684\u503c\uff0c\u5219\u79f0Y\u51fd\u6570\u4f9d\u8d56\u4e8eX\uff0c\u8bb0\u4f5c X \u2192 Y\u3002 *   \u7801\uff08\u952e\uff09\uff1a\u53ef\u4ee5\u552f\u4e00\u6807\u8bc6\u8868\u4e2d\u6bcf\u4e00\u884c\u6570\u636e\u7684\u5c5e\u6027\u6216\u5c5e\u6027\u7ec4\u3002 *   \u4e3b\u5c5e\u6027\uff1a\u5305\u542b\u5728\u4efb\u4f55\u4e00\u4e2a\u5019\u9009\u7801\u4e2d\u7684\u5c5e\u6027\u3002 *   \u975e\u4e3b\u5c5e\u6027\uff1a\u4e0d\u5305\u542b\u5728\u4efb\u4f55\u5019\u9009\u7801\u4e2d\u7684\u5c5e\u6027\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%8C%83%E5%BC%8F/#1nf","title":"\u7b2c\u4e00\u8303\u5f0f (1NF)","text":"<p>\u5b9a\u4e49\uff1a\u786e\u4fdd\u6570\u636e\u8868\u4e2d\u7684\u6bcf\u4e00\u5217\uff08\u5b57\u6bb5\uff09\u90fd\u662f\u4e0d\u53ef\u5206\u5272\u7684\u539f\u5b50\u6570\u636e\u9879\u3002 \u8fd9\u662f\u5bf9\u5173\u7cfb\u6a21\u5f0f\u6700\u57fa\u672c\u7684\u8981\u6c42\uff0c\u6240\u6709\u5173\u7cfb\u578b\u6570\u636e\u5e93\u90fd\u5fc5\u987b\u6ee1\u8db3\u7b2c\u4e00\u8303\u5f0f\u3002</p> <p>\u6838\u5fc3\u8981\u6c42\uff1a\u5b57\u6bb5\u539f\u5b50\u6027\uff0c\u4e0d\u53ef\u518d\u5206\u3002</p> <p>\u793a\u4f8b\uff1a \u5047\u8bbe\u6709\u4e00\u4e2a\u8ba2\u5355\u4fe1\u606f\u8868\uff0c\u5176\u4e2d\u201c\u5546\u54c1\u4fe1\u606f\u201d\u5217\u5305\u542b\u4e86\u5546\u54c1\u540d\u79f0\u548c\u6570\u91cf\uff0c\u8fd9\u5c31\u4e0d\u7b26\u5408\u7b2c\u4e00\u8303\u5f0f\u3002</p> <p>\u4e0d\u7b26\u54081NF\u7684\u8868\uff1a | \u8ba2\u5355\u53f7 | \u5ba2\u6237 | \u5546\u54c1\u4fe1\u606f | | :--- | :--- | :--- | | 1001 | \u5f20\u4e09 | \u7535\u8111, 2\u53f0 | | 1002 | \u674e\u56db | \u952e\u76d8, 1\u4e2a; \u9f20\u6807, 1\u4e2a |</p> <p>\u5982\u4f55\u4fee\u6b63\uff1a \u5c06\u201c\u5546\u54c1\u4fe1\u606f\u201d\u62c6\u5206\u4e3a\u591a\u4e2a\u72ec\u7acb\u7684\u3001\u4e0d\u53ef\u518d\u5206\u7684\u5217\u3002</p> <p>\u7b26\u54081NF\u7684\u8868\uff1a | \u8ba2\u5355\u53f7 | \u5ba2\u6237 | \u5546\u54c1\u540d\u79f0 | \u6570\u91cf | | :--- | :--- | :--- | :--- | | 1001 | \u5f20\u4e09 | \u7535\u8111 | 2 | | 1002 | \u674e\u56db | \u952e\u76d8 | 1 | | 1002 | \u674e\u56db | \u9f20\u6807 | 1 |</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%8C%83%E5%BC%8F/#2nf","title":"\u7b2c\u4e8c\u8303\u5f0f (2NF)","text":"<p>\u5b9a\u4e49\uff1a\u5728\u6ee1\u8db3\u7b2c\u4e00\u8303\u5f0f\u7684\u57fa\u7840\u4e0a\uff0c\u8868\u4e2d\u6bcf\u4e00\u4e2a\u975e\u4e3b\u5c5e\u6027\u90fd\u5fc5\u987b\u5b8c\u5168\u51fd\u6570\u4f9d\u8d56\u4e8e\u5019\u9009\u7801\uff0c\u800c\u4e0d\u80fd\u53ea\u4f9d\u8d56\u4e8e\u5019\u9009\u7801\u7684\u4e00\u90e8\u5206\uff08\u6d88\u9664\u90e8\u5206\u51fd\u6570\u4f9d\u8d56\uff09\u3002</p> <p>\u6838\u5fc3\u8981\u6c42\uff1a\u6d88\u9664\u975e\u4e3b\u5c5e\u6027\u5bf9\u7801\u7684\u201c\u90e8\u5206\u51fd\u6570\u4f9d\u8d56\u201d\u3002 \u8fd9\u4e2a\u8303\u5f0f\u4e3b\u8981\u9488\u5bf9\u8054\u5408\u4e3b\u952e\u3002\u5982\u679c\u4e00\u4e2a\u8868\u7684\u4e3b\u952e\u53ea\u6709\u4e00\u4e2a\u5b57\u6bb5\uff0c\u90a3\u4e48\u5b83\u53ea\u8981\u7b26\u54081NF\uff0c\u5c31\u4e00\u5b9a\u7b26\u54082NF\u3002</p> <p>\u793a\u4f8b\uff1a \u5047\u8bbe\u6709\u4e00\u4e2a\u9009\u8bfe\u6210\u7ee9\u8868\uff0c\u4f7f\u7528\uff08\u5b66\u53f7, \u8bfe\u7a0b\u53f7\uff09\u4f5c\u4e3a\u8054\u5408\u4e3b\u952e\u3002</p> <p>\u4e0d\u7b26\u54082NF\u7684\u8868\uff1a (\u4e3b\u952e\u4e3a <code>\u5b66\u53f7</code> + <code>\u8bfe\u7a0b\u53f7</code>) | \u5b66\u53f7 | \u5b66\u751f\u59d3\u540d | \u8bfe\u7a0b\u53f7 | \u8bfe\u7a0b\u540d\u79f0 | \u6210\u7ee9 | | :--- | :--- | :--- | :--- | :--- | | S01 | \u5f20\u4e09 | C01 | \u6570\u636e\u5e93 | 85 | | S01 | \u5f20\u4e09 | C02 | \u64cd\u4f5c\u7cfb\u7edf | 90 | | S02 | \u674e\u56db | C01 | \u6570\u636e\u5e93 | 78 |</p> <p>\u5728\u8fd9\u4e2a\u8868\u4e2d\uff1a *   <code>\u6210\u7ee9</code> \u5b8c\u5168\u4f9d\u8d56\u4e8e <code>(\u5b66\u53f7, \u8bfe\u7a0b\u53f7)</code>\u3002 *   <code>\u5b66\u751f\u59d3\u540d</code> \u53ea\u4f9d\u8d56\u4e8e <code>\u5b66\u53f7</code>\uff0c\u662f\u90e8\u5206\u4f9d\u8d56\u3002 *   <code>\u8bfe\u7a0b\u540d\u79f0</code> \u53ea\u4f9d\u8d56\u4e8e <code>\u8bfe\u7a0b\u53f7</code>\uff0c\u4e5f\u662f\u90e8\u5206\u4f9d\u8d56\u3002</p> <p>\u8fd9\u4f1a\u5bfc\u81f4\u6570\u636e\u5197\u4f59\uff08\u5f20\u4e09\u548c\u6570\u636e\u5e93\u7684\u540d\u5b57\u91cd\u590d\u51fa\u73b0\uff09\u548c\u66f4\u65b0\u5f02\u5e38\u3002</p> <p>\u5982\u4f55\u4fee\u6b63\uff1a \u5c06\u8868\u62c6\u5206\uff0c\u6d88\u9664\u90e8\u5206\u4f9d\u8d56\u3002</p> <p>\u7b26\u54082NF\u7684\u8868\uff1a</p> <p>\u5b66\u751f\u8868\uff1a | \u5b66\u53f7 | \u5b66\u751f\u59d3\u540d | | :--- | :--- | | S01 | \u5f20\u4e09 | | S02 | \u674e\u56db |</p> <p>\u8bfe\u7a0b\u8868\uff1a | \u8bfe\u7a0b\u53f7 | \u8bfe\u7a0b\u540d\u79f0 | | :--- | :--- | | C01 | \u6570\u636e\u5e93 | | C02 | \u64cd\u4f5c\u7cfb\u7edf |</p> <p>\u6210\u7ee9\u8868\uff1a | \u5b66\u53f7 | \u8bfe\u7a0b\u53f7 | \u6210\u7ee9 | | :--- | :--- | :--- | | S01 | C01 | 85 | | S01 | C02 | 90 | | S02 | C01 | 78 |</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%8C%83%E5%BC%8F/#3nf","title":"\u7b2c\u4e09\u8303\u5f0f (3NF)","text":"<p>\u5b9a\u4e49\uff1a\u5728\u6ee1\u8db3\u7b2c\u4e8c\u8303\u5f0f\u7684\u57fa\u7840\u4e0a\uff0c\u4efb\u4f55\u975e\u4e3b\u5c5e\u6027\u90fd\u4e0d\u80fd\u4f9d\u8d56\u4e8e\u5176\u4ed6\u975e\u4e3b\u5c5e\u6027\uff08\u6d88\u9664\u4f20\u9012\u51fd\u6570\u4f9d\u8d56\uff09\u3002</p> <p>\u6838\u5fc3\u8981\u6c42\uff1a\u786e\u4fdd\u6bcf\u4e2a\u975e\u4e3b\u5c5e\u6027\u90fd\u76f4\u63a5\u4f9d\u8d56\u4e8e\u4e3b\u952e\uff0c\u800c\u4e0d\u662f\u95f4\u63a5\u4f9d\u8d56\u3002</p> <p>\u793a\u4f8b\uff1a \u5047\u8bbe\u6709\u4e00\u4e2a\u5458\u5de5\u4fe1\u606f\u8868\uff0c\u5176\u4e2d\u5305\u542b\u4e86\u90e8\u95e8\u4fe1\u606f\u3002</p> <p>\u4e0d\u7b26\u54083NF\u7684\u8868\uff1a (\u4e3b\u952e\u4e3a <code>\u5458\u5de5\u53f7</code>) | \u5458\u5de5\u53f7 | \u5458\u5de5\u59d3\u540d | \u90e8\u95e8\u53f7 | \u90e8\u95e8\u540d\u79f0 | \u90e8\u95e8\u7ecf\u7406 | | :--- | :--- | :--- | :--- | :--- | | E01 | \u5f20\u4e09 | D01 | \u7814\u53d1\u90e8 | \u738b\u4e94 | | E02 | \u674e\u56db | D02 | \u5e02\u573a\u90e8 | \u8d75\u516d | | E03 | \u5c0f\u660e | D01 | \u7814\u53d1\u90e8 | \u738b\u4e94 |</p> <p>\u5728\u8fd9\u4e2a\u8868\u4e2d\uff0c\u5b58\u5728\u4ee5\u4e0b\u4f9d\u8d56\u5173\u7cfb\uff1a <code>(\u5458\u5de5\u53f7) \u2192 (\u90e8\u95e8\u53f7) \u2192 (\u90e8\u95e8\u540d\u79f0, \u90e8\u95e8\u7ecf\u7406)</code> <code>\u90e8\u95e8\u540d\u79f0</code> \u548c <code>\u90e8\u95e8\u7ecf\u7406</code> \u4f9d\u8d56\u4e8e <code>\u90e8\u95e8\u53f7</code> (\u4e00\u4e2a\u975e\u4e3b\u5c5e\u6027)\uff0c\u800c <code>\u90e8\u95e8\u53f7</code> \u4f9d\u8d56\u4e8e <code>\u5458\u5de5\u53f7</code> (\u4e3b\u952e)\u3002\u8fd9\u5c31\u6784\u6210\u4e86\u4f20\u9012\u4f9d\u8d56\u3002</p> <p>\u5982\u4f55\u4fee\u6b63\uff1a \u5c06\u5b58\u5728\u4f20\u9012\u4f9d\u8d56\u7684\u5c5e\u6027\u62c6\u5206\u5230\u65b0\u7684\u8868\u4e2d\u3002</p> <p>\u7b26\u54083NF\u7684\u8868\uff1a</p> <p>\u5458\u5de5\u8868\uff1a | \u5458\u5de5\u53f7 | \u5458\u5de5\u59d3\u540d | \u90e8\u95e8\u53f7 | | :--- | :--- | :--- | | E01 | \u5f20\u4e09 | D01 | | E02 | \u674e\u56db | D02 | | E03 | \u5c0f\u660e | D01 |</p> <p>\u90e8\u95e8\u8868\uff1a | \u90e8\u95e8\u53f7 | \u90e8\u95e8\u540d\u79f0 | \u90e8\u95e8\u7ecf\u7406 | | :--- | :--- | :--- | | D01 | \u7814\u53d1\u90e8 | \u738b\u4e94 | | D02 | \u5e02\u573a\u90e8 | \u8d75\u516d |</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%8C%83%E5%BC%8F/#-bcnf","title":"\u5df4\u65af-\u79d1\u5fb7\u8303\u5f0f (BCNF)","text":"<p>\u5b9a\u4e49\uff1a\u5728\u6ee1\u8db3\u7b2c\u4e09\u8303\u5f0f\u7684\u57fa\u7840\u4e0a\uff0c\u5bf9\u4e8e\u8868\u4e2d\u4efb\u4f55\u4e00\u4e2a\u975e\u5e73\u51e1\u7684\u51fd\u6570\u4f9d\u8d56 X \u2192 Y\uff0cX\u90fd\u5fc5\u987b\u662f\u4e00\u4e2a\u8d85\u952e\uff08Super Key\uff09\u3002 BCNF\u901a\u5e38\u88ab\u8ba4\u4e3a\u662f\u4fee\u6b63\u7684\u7b2c\u4e09\u8303\u5f0f\uff0c\u6bd43NF\u7684\u8981\u6c42\u66f4\u4e25\u683c\u3002</p> <p>\u6838\u5fc3\u8981\u6c42\uff1a\u4efb\u4f55\u5c5e\u6027\uff08\u5305\u62ec\u4e3b\u5c5e\u6027\u548c\u975e\u4e3b\u5c5e\u6027\uff09\u90fd\u4e0d\u80fd\u88ab\u975e\u4e3b\u5c5e\u6027\u6240\u51b3\u5b9a\u3002 \u6362\u8a00\u4e4b\uff0c\u5b83\u6d88\u9664\u4e86\u4e3b\u5c5e\u6027\u5bf9\u4e8e\u7801\u7684\u90e8\u5206\u548c\u4f20\u9012\u4f9d\u8d56\u3002</p> <p>\u4e0e3NF\u7684\u533a\u522b\uff1a3NF\u5141\u8bb8\u4e3b\u5c5e\u6027\u88ab\u975e\u4e3b\u5c5e\u6027\u51b3\u5b9a\uff0c\u800cBCNF\u4e0d\u5141\u8bb8\u3002</p> <p>\u793a\u4f8b\uff1a \u5047\u8bbe\u6709\u4e00\u4e2a\u4ed3\u5e93\u7ba1\u7406\u8868\uff0c\u5176\u4e2d\u4e00\u4e2a\u4ed3\u5e93\u53ea\u6709\u4e00\u4e2a\u7ba1\u7406\u5458\uff0c\u4e00\u4e2a\u7ba1\u7406\u5458\u53ea\u8d1f\u8d23\u4e00\u4e2a\u4ed3\u5e93\uff1b\u4f46\u4e00\u4e2a\u4ed3\u5e93\u53ef\u4ee5\u5b58\u653e\u591a\u79cd\u7269\u54c1\uff0c\u4e00\u79cd\u7269\u54c1\u4e5f\u53ef\u4ee5\u88ab\u5b58\u653e\u5728\u591a\u4e2a\u4ed3\u5e93\uff0c\u4e14\u6709\u5bf9\u5e94\u7684\u6570\u91cf\u3002</p> <p>\u7b26\u54083NF\u4f46\u4e0d\u7b26\u5408BCNF\u7684\u8868\uff1a (\u5019\u9009\u952e\u4e3a <code>(\u4ed3\u5e93\u540d, \u7269\u54c1\u540d)</code>) | \u4ed3\u5e93\u540d | \u7ba1\u7406\u5458 | \u7269\u54c1\u540d | \u6570\u91cf | | :--- | :--- | :--- | :--- | | \u4ed3\u5e93A | \u5f20\u4e09 | \u7269\u54c1\u7532 | 100 | | \u4ed3\u5e93A | \u5f20\u4e09 | \u7269\u54c1\u4e59 | 200 | | \u4ed3\u5e93B | \u674e\u56db | \u7269\u54c1\u7532 | 150 |</p> <p>\u5728\u8fd9\u4e2a\u8868\u4e2d\uff1a *   <code>(\u4ed3\u5e93\u540d, \u7269\u54c1\u540d)</code> \u662f\u5019\u9009\u952e\uff0c\u53ef\u4ee5\u51b3\u5b9a\u6240\u6709\u5c5e\u6027\u3002 *   \u5b58\u5728\u4f9d\u8d56 <code>\u7ba1\u7406\u5458 \u2192 \u4ed3\u5e93\u540d</code>\u3002 *   <code>\u7ba1\u7406\u5458</code> \u4e0d\u662f\u8d85\u952e\uff0c\u4f46\u5b83\u51b3\u5b9a\u4e86 <code>\u4ed3\u5e93\u540d</code>\uff08\u4e3b\u5c5e\u6027\u7684\u4e00\u90e8\u5206\uff09\uff0c\u8fd9\u8fdd\u53cd\u4e86BCNF\u3002</p> <p>\u5982\u4f55\u4fee\u6b63\uff1a \u8fdb\u884c\u8868\u62c6\u5206\u3002</p> <p>\u7b26\u5408BCNF\u7684\u8868\uff1a</p> <p>\u4ed3\u5e93\u7ba1\u7406\u5458\u8868\uff1a | \u7ba1\u7406\u5458 | \u4ed3\u5e93\u540d | | :--- | :--- | | \u5f20\u4e09 | \u4ed3\u5e93A | | \u674e\u56db | \u4ed3\u5e93B |</p> <p>\u5e93\u5b58\u8868\uff1a | \u4ed3\u5e93\u540d | \u7269\u54c1\u540d | \u6570\u91cf | | :--- | :--- | :--- | | \u4ed3\u5e93A | \u7269\u54c1\u7532 | 100 | | \u4ed3\u5e93A | \u7269\u54c1\u4e59 | 200 | | \u4ed3\u5e93B | \u7269\u54c1\u7532 | 150 |</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%8C%83%E5%BC%8F/#_1","title":"\u66f4\u9ad8\u9636\u7684\u8303\u5f0f","text":"<ul> <li>\u7b2c\u56db\u8303\u5f0f (4NF)\uff1a\u5728BCNF\u7684\u57fa\u7840\u4e0a\uff0c\u6d88\u9664\u591a\u503c\u4f9d\u8d56\u3002</li> <li>\u7b2c\u4e94\u8303\u5f0f (5NF)\uff1a\u57284NF\u7684\u57fa\u7840\u4e0a\uff0c\u6d88\u9664\u8fde\u63a5\u4f9d\u8d56\uff0c\u786e\u4fdd\u8868\u4e2d\u7684\u4fe1\u606f\u65e0\u6cd5\u901a\u8fc7\u5176\u4ed6\u8868\u7684\u8fde\u63a5\u6765\u63a8\u5bfc\u3002</li> </ul> <p>4NF\u548c5NF\u5728\u5b9e\u9645\u7684\u6570\u636e\u5e93\u8bbe\u8ba1\u4e2d\u8f83\u5c11\u4f7f\u7528\uff0c\u56e0\u4e3a\u5b83\u4eec\u5904\u7406\u7684\u662f\u66f4\u590d\u6742\u7684\u6570\u636e\u4f9d\u8d56\u5173\u7cfb\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%8C%83%E5%BC%8F/#_2","title":"\u8303\u5f0f\u5316\u7684\u4f18\u7f3a\u70b9\u4e0e\u53cd\u8303\u5f0f\u5316","text":"<p>\u4f18\u70b9\uff1a *   \u51cf\u5c11\u6570\u636e\u5197\u4f59\uff1a\u6700\u5c0f\u5316\u6570\u636e\u7684\u91cd\u590d\u5b58\u50a8\uff0c\u8282\u7701\u5b58\u50a8\u7a7a\u95f4\u3002 *   \u63d0\u9ad8\u6570\u636e\u4e00\u81f4\u6027\uff1a\u6570\u636e\u53ea\u5b58\u50a8\u5728\u4e00\u5904\uff0c\u66f4\u65b0\u65f6\u4e0d\u6613\u4ea7\u751f\u6570\u636e\u4e0d\u4e00\u81f4\u7684\u60c5\u51b5\u3002 *   \u4f18\u5316\u5199\u5165\u64cd\u4f5c\uff1a\u7531\u4e8e\u51cf\u5c11\u4e86\u5197\u4f59\u6570\u636e\uff0c\u63d2\u5165\u3001\u66f4\u65b0\u548c\u5220\u9664\u64cd\u4f5c\u66f4\u5feb\u3002</p> <p>\u7f3a\u70b9\uff1a *   \u67e5\u8be2\u6027\u80fd\u53ef\u80fd\u4e0b\u964d\uff1a\u8fc7\u5ea6\u8303\u5f0f\u5316\u4f1a\u5bfc\u81f4\u8868\u7684\u6570\u91cf\u589e\u591a\uff0c\u67e5\u8be2\u65f6\u9700\u8981\u8fdb\u884c\u591a\u6b21\u8fde\u63a5\uff08JOIN\uff09\uff0c\u4ece\u800c\u5f71\u54cd\u67e5\u8be2\u6548\u7387\u3002 *   \u8bbe\u8ba1\u590d\u6742\u6027\u589e\u52a0\uff1a\u6570\u636e\u5e93\u7ed3\u6784\u53d8\u5f97\u66f4\u52a0\u590d\u6742\uff0c\u589e\u52a0\u4e86\u7406\u89e3\u548c\u7ef4\u62a4\u7684\u96be\u5ea6\u3002</p> <p>\u53cd\u8303\u5f0f\u5316\uff1a \u4e3a\u4e86\u63d0\u9ad8\u67e5\u8be2\u6027\u80fd\uff0c\u6709\u65f6\u4f1a\u6545\u610f\u8fdd\u53cd\u8303\u5f0f\u89c4\u5219\uff0c\u5728\u8868\u4e2d\u4fdd\u7559\u4e00\u4e9b\u5197\u4f59\u6570\u636e\uff0c\u4ee5\u51cf\u5c11\u67e5\u8be2\u65f6\u7684\u8fde\u63a5\u64cd\u4f5c\u3002\u8fd9\u662f\u4e00\u79cd\u7528\u7a7a\u95f4\u6362\u65f6\u95f4\u7684\u7b56\u7565\uff0c\u9700\u8981\u5728\u6570\u636e\u4e00\u81f4\u6027\u548c\u67e5\u8be2\u6548\u7387\u4e4b\u95f4\u505a\u51fa\u6743\u8861\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E7%B4%A2%E5%BC%95%E4%BB%8B%E7%BB%8D/","title":"\u7d22\u5f15\u4ecb\u7ecd","text":"<p>MySQL\u7d22\u5f15\u662f\u4e00\u79cd\u7528\u4e8e\u5feb\u901f\u67e5\u8be2\u548c\u68c0\u7d22\u6570\u636e\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5176\u672c\u8d28\u53ef\u4ee5\u770b\u4f5c\u662f\u4e00\u79cd\u6392\u5e8f\u597d\u7684\u6570\u636e\u7ed3\u6784\uff0c\u7c7b\u4f3c\u4e8e\u4e66\u7c4d\u7684\u76ee\u5f55\u3002\u901a\u8fc7\u7d22\u5f15\uff0c\u6570\u636e\u5e93\u53ef\u4ee5\u5927\u5e45\u51cf\u5c11\u9700\u8981\u626b\u63cf\u7684\u6570\u636e\u91cf\uff0c\u76f4\u63a5\u5b9a\u4f4d\u5230\u7b26\u5408\u6761\u4ef6\u7684\u8bb0\u5f55\uff0c\u4ece\u800c\u663e\u8457\u52a0\u5feb\u6570\u636e\u68c0\u7d22\u901f\u5ea6\uff0c\u51cf\u5c11\u78c1\u76d8I/O\u6b21\u6570\u3002</p> <p>\u7d22\u5f15\u7684\u5206\u7c7b\uff1a</p> <p>\u6839\u636e\u5e95\u5c42\u5b58\u50a8\u65b9\u5f0f\u548c\u7279\u6027\uff0cMySQL\u7d22\u5f15\u4e3b\u8981\u53ef\u4ee5\u5206\u4e3a\u4ee5\u4e0b\u51e0\u7c7b\uff1a</p> <ul> <li>B-Tree \u7d22\u5f15\uff1a MySQL\u4e2d\u9ed8\u8ba4\u548c\u6700\u5e38\u7528\u7684\u7d22\u5f15\u7c7b\u578b\uff0cInnoDB\u548cMyISAM\u5b58\u50a8\u5f15\u64ce\u90fd\u4f7f\u7528B+\u6811\u5b9e\u73b0B-Tree\u7d22\u5f15\u3002</li> <li>\u54c8\u5e0c\u7d22\u5f15 (Hash Index)\uff1a \u7c7b\u4f3c\u952e\u503c\u5bf9\u7684\u5f62\u5f0f\uff0c\u53ef\u4ee5\u4e00\u6b21\u5b9a\u4f4d\u5230\u6570\u636e\uff0c\u4f46\u4ec5\u9002\u7528\u4e8e\u7cbe\u786e\u67e5\u627e\uff0c\u4e0d\u652f\u6301\u8303\u56f4\u67e5\u8be2\u548c\u6392\u5e8f\u3002</li> <li>R-Tree \u7d22\u5f15\uff1a \u4e3b\u8981\u7528\u4e8e\u7a7a\u95f4\u6570\u636e\u7c7b\u578b\uff08\u5982<code>geometry</code>\uff09\uff0c\u4f18\u52bf\u5728\u4e8e\u8303\u56f4\u67e5\u627e\uff0c\u4f46\u6548\u7387\u76f8\u5bf9\u8f83\u4f4e\u3002</li> <li>\u5168\u6587\u7d22\u5f15 (Full-text Index)\uff1a \u7528\u4e8e\u5728\u6587\u672c\u6570\u636e\u4e2d\u8fdb\u884c\u5173\u952e\u8bcd\u641c\u7d22\u3002</li> </ul> <p>\u6839\u636e\u7d22\u5f15\u7ed3\u6784\u548c\u6570\u636e\u5b58\u653e\u65b9\u5f0f\uff0c\u7d22\u5f15\u53c8\u53ef\u4ee5\u5206\u4e3a\uff1a</p> <ul> <li>\u805a\u7c07\u7d22\u5f15 (Clustered Index)\uff1a \u7d22\u5f15\u7ed3\u6784\u548c\u6570\u636e\u4e00\u8d77\u5b58\u653e\u7684\u7d22\u5f15\u3002\u5728InnoDB\u4e2d\uff0c\u4e3b\u952e\u7d22\u5f15\u5c31\u662f\u805a\u7c07\u7d22\u5f15\u3002\u8868\u7684<code>.ibd</code>\u6587\u4ef6\u5305\u542b\u4e86\u7d22\u5f15\u548c\u6570\u636e\uff0cB+\u6811\u7684\u6bcf\u4e2a\u975e\u53f6\u5b50\u8282\u70b9\u5b58\u50a8\u7d22\u5f15\uff0c\u53f6\u5b50\u8282\u70b9\u5b58\u50a8\u7d22\u5f15\u548c\u5bf9\u5e94\u7684\u6570\u636e\u3002</li> <li>\u975e\u805a\u7c07\u7d22\u5f15 (Non-Clustered Index) / \u4e8c\u7ea7\u7d22\u5f15 (Secondary Index)\uff1a \u7d22\u5f15\u7ed3\u6784\u548c\u6570\u636e\u5206\u5f00\u5b58\u653e\u7684\u7d22\u5f15\u3002\u5728MySQL\u7684MyISAM\u5f15\u64ce\u4e2d\uff0c\u65e0\u8bba\u4e3b\u952e\u8fd8\u662f\u975e\u4e3b\u952e\uff0c\u90fd\u4f7f\u7528\u975e\u805a\u7c07\u7d22\u5f15\u3002\u5728InnoDB\u4e2d\uff0c\u4e8c\u7ea7\u7d22\u5f15\u7684\u53f6\u5b50\u8282\u70b9\u5b58\u653e\u7684\u662f\u4e3b\u952e\u503c\uff0c\u9700\u8981\u6839\u636e\u4e3b\u952e\u518d\u201c\u56de\u8868\u201d\u67e5\u8be2\u6570\u636e\u3002</li> </ul> <p>\u7d22\u5f15\u7684\u4f18\u70b9\uff1a</p> <ul> <li>\u63d0\u9ad8\u67e5\u8be2\u901f\u5ea6\uff1a \u7d22\u5f15\u53ef\u4ee5\u5e2e\u52a9MySQL\u5feb\u901f\u5b9a\u4f4d\u5230\u9700\u8981\u67e5\u8be2\u7684\u6570\u636e\uff0c\u51cf\u5c11\u78c1\u76d8I/O\u6b21\u6570\uff0c\u4ece\u800c\u663e\u8457\u52a0\u5feb\u6570\u636e\u68c0\u7d22\u901f\u5ea6\u3002</li> <li>\u4fdd\u8bc1\u6570\u636e\u552f\u4e00\u6027\uff1a \u901a\u8fc7\u521b\u5efa\u552f\u4e00\u7d22\u5f15\uff08Unique Index\uff09\u6216\u4e3b\u952e\u7d22\u5f15\uff08Primary Key\uff09\uff0c\u53ef\u4ee5\u786e\u4fdd\u8868\u4e2d\u7684\u67d0\u4e00\u5217\uff08\u6216\u51e0\u5217\u7ec4\u5408\uff09\u7684\u503c\u662f\u72ec\u4e00\u65e0\u4e8c\u7684\uff0c\u9632\u6b62\u91cd\u590d\u6570\u636e\u3002</li> <li>\u4f18\u5316\u6392\u5e8f\u548c\u5206\u7ec4\uff1a \u7d22\u5f15\u53ef\u4ee5\u5e2e\u52a9MySQL\u5feb\u901f\u8fdb\u884c\u6392\u5e8f\u548c\u5206\u7ec4\u64cd\u4f5c\uff0c\u63d0\u9ad8\u67e5\u8be2\u6548\u7387\u3002</li> <li>\u51cf\u5c11\u786c\u76d8I/O\u8bfb\u53d6\uff1a \u7d22\u5f15\u901a\u8fc7\u51cf\u5c11\u626b\u63cf\u5168\u8868\u6570\u636e\u7684\u6b21\u6570\u6765\u51cf\u5c11\u786c\u76d8I/O\u3002</li> </ul> <p>\u7d22\u5f15\u7684\u7f3a\u70b9\uff1a</p> <ul> <li>\u5360\u7528\u5b58\u50a8\u7a7a\u95f4\uff1a \u7d22\u5f15\u662f\u4e00\u79cd\u7528\u7a7a\u95f4\u6362\u65f6\u95f4\u7684\u505a\u6cd5\uff0c\u9700\u8981\u5360\u7528\u989d\u5916\u7684\u78c1\u76d8\u7a7a\u95f4\u3002</li> <li>\u964d\u4f4e\u589e\u5220\u6539\u6548\u7387\uff1a \u6bcf\u6b21\u5bf9\u8868\u8fdb\u884c\u589e\u5220\u6539\u64cd\u4f5c\u65f6\uff0cMySQL\u4e0d\u4ec5\u8981\u4fdd\u5b58\u6216\u66f4\u65b0\u6570\u636e\uff0c\u8fd8\u9700\u8981\u7ef4\u62a4\u5bf9\u5e94\u7684\u7d22\u5f15\u6587\u4ef6\uff0c\u8fd9\u4f1a\u964d\u4f4e\u8868\u7684DML\uff08\u6570\u636e\u64cd\u4f5c\u8bed\u8a00\uff09\u6548\u7387\u3002</li> <li>\u7ef4\u62a4\u6210\u672c\uff1a \u7ef4\u62a4\u7d22\u5f15\u9700\u8981\u6d88\u8017\u6570\u636e\u5e93\u8d44\u6e90\u3002</li> <li>\u4e0d\u5408\u7406\u7d22\u5f15\u53ef\u80fd\u964d\u4f4e\u6027\u80fd\uff1a \u5982\u679c\u7d22\u5f15\u5efa\u7acb\u4e0d\u5408\u7406\u6216\u8fc7\u591a\uff0c\u53cd\u800c\u53ef\u80fd\u5bfc\u81f4\u67e5\u8be2\u6027\u80fd\u4e0b\u964d\u3002</li> <li>\u5bf9\u5c0f\u8868\u53ef\u80fd\u6027\u80fd\u4e0b\u964d\uff1a \u5bf9\u4e8e\u6570\u636e\u91cf\u5f88\u5c0f\u7684\u8868\uff0c\u5efa\u7acb\u7d22\u5f15\u53ef\u80fd\u5bfc\u81f4\u67e5\u8be2\u6027\u80fd\u4e0b\u964d\uff0c\u56e0\u4e3a\u67e5\u8be2\u4f18\u5316\u5668\u53ef\u80fd\u8ba4\u4e3a\u76f4\u63a5\u5168\u8868\u626b\u63cf\u66f4\u9ad8\u6548\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E7%B4%A2%E5%BC%95%E4%BB%8B%E7%BB%8D/#b","title":"B+\u6811\u8be6\u7ec6\u4ecb\u7ecd","text":"<p>B+\u6811\u662f\u6570\u636e\u5e93\u7d22\u5f15\u548c\u6587\u4ef6\u7cfb\u7edf\u4e2d\u6700\u5e38\u89c1\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5e7f\u6cdb\u5e94\u7528\u4e8eMySQL\u7b49\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684\u7d22\u5f15\u5b9e\u73b0\u4e2d\u3002 \u5b83\u662fB-\u6811\u7684\u53d8\u79cd\uff0c\u5728B-\u6811\u7684\u57fa\u7840\u4e0a\u8fdb\u884c\u4e86\u4f18\u5316\u3002</p> <p>B+\u6811\u7684\u7ed3\u6784\u7279\u70b9\uff1a</p> <ul> <li>\u6240\u6709\u6570\u636e\u5b58\u50a8\u5728\u53f6\u5b50\u8282\u70b9\uff1a B+\u6811\u4e2d\uff0c\u975e\u53f6\u5b50\u8282\u70b9\u53ea\u5b58\u50a8\u952e\u503c\uff08\u7d22\u5f15\uff09\uff0c\u4e0d\u5b58\u50a8\u5b9e\u9645\u6570\u636e\u6307\u9488\uff1b\u6240\u6709\u7684\u6570\u636e\u90fd\u5b58\u50a8\u5728\u53f6\u5b50\u8282\u70b9\u4e2d\u3002</li> <li>\u53f6\u5b50\u8282\u70b9\u4e4b\u95f4\u901a\u8fc7\u6307\u9488\u8fde\u63a5\uff1a B+\u6811\u7684\u53f6\u5b50\u8282\u70b9\u4e4b\u95f4\u901a\u8fc7\u53cc\u5411\u94fe\u8868\u76f8\u4e92\u8fde\u63a5\uff0c\u5f62\u6210\u4e00\u4e2a\u6709\u5e8f\u94fe\u8868\uff0c\u4fbf\u4e8e\u987a\u5e8f\u8bbf\u95ee\u548c\u8303\u56f4\u67e5\u8be2\u3002</li> <li>\u975e\u53f6\u5b50\u8282\u70b9\u5197\u4f59\u952e\u503c\uff1a \u975e\u53f6\u5b50\u8282\u70b9\u4e2d\u7684\u7d22\u5f15\u952e\u503c\u4f1a\u5728\u53f6\u5b50\u8282\u70b9\u4e2d\u518d\u6b21\u51fa\u73b0\uff0c\u5e76\u4e14\u975e\u53f6\u5b50\u8282\u70b9\u6709\u591a\u5c11\u4e2a\u5b50\u8282\u70b9\uff0c\u5c31\u6709\u591a\u5c11\u4e2a\u7d22\u5f15\u3002</li> <li>\u5e73\u8861\u6811\uff1a B+\u6811\u662f\u5e73\u8861\u6811\uff0c\u4efb\u4f55\u67e5\u8be2\u4ece\u6839\u5230\u53f6\u5b50\u7684\u8def\u5f84\u957f\u5ea6\u90fd\u76f8\u540c\uff0c\u8fd9\u4fdd\u8bc1\u4e86\u67e5\u8be2\u6027\u80fd\u7684\u7a33\u5b9a\u6027\u3002</li> </ul> <p>B+\u6811\u7684\u5de5\u4f5c\u539f\u7406\uff08\u4ee5InnoDB\u805a\u7c07\u7d22\u5f15\u4e3a\u4f8b\uff09\uff1a</p> <p>\u5f53\u8868\u6709\u4e3b\u952e\u65f6\uff0cInnoDB\u4f1a\u4f7f\u7528\u4e3b\u952e\u521b\u5efa\u805a\u7c07\u7d22\u5f15\u3002\u805a\u7c07\u7d22\u5f15\u7684B+\u6811\u7684\u53f6\u5b50\u8282\u70b9\u5b58\u653e\u7684\u662f\u5b8c\u6574\u7684\u6570\u636e\u884c\u3002\u5982\u679c\u6ca1\u6709\u663e\u5f0f\u6307\u5b9a\u4e3b\u952e\uff0cInnoDB\u4f1a\u81ea\u52a8\u9009\u62e9\u4e00\u4e2a\u552f\u4e00\u975e\u7a7a\u7d22\u5f15\u4f5c\u4e3a\u4e3b\u952e\uff0c\u5982\u679c\u90fd\u6ca1\u6709\uff0c\u5219\u4f1a\u81ea\u52a8\u521b\u5efa\u4e00\u4e2a6\u5b57\u8282\u7684\u81ea\u589e\u4e3b\u952e\u3002</p> <p>\u5f53\u8fdb\u884c\u6570\u636e\u67e5\u627e\u65f6\uff0c\u4ece\u6839\u8282\u70b9\u5f00\u59cb\uff0c\u6839\u636e\u8981\u67e5\u627e\u7684\u952e\u503c\u4e0e\u5f53\u524d\u8282\u70b9\u7684\u952e\u503c\u8fdb\u884c\u6bd4\u8f83\uff0c\u9009\u62e9\u76f8\u5e94\u7684\u5b50\u8282\u70b9\u7ee7\u7eed\u67e5\u627e\uff0c\u76f4\u5230\u627e\u5230\u53f6\u5b50\u8282\u70b9\u3002\u56e0\u4e3a\u53f6\u5b50\u8282\u70b9\u5305\u542b\u4e86\u6240\u6709\u6570\u636e\uff0c\u4e00\u65e6\u5230\u8fbe\u53f6\u5b50\u8282\u70b9\uff0c\u5c31\u80fd\u83b7\u53d6\u5230\u6240\u9700\u7684\u6570\u636e\u3002</p> <p>\u5bf9\u4e8e\u975e\u4e3b\u952e\u7d22\u5f15\uff08\u4e8c\u7ea7\u7d22\u5f15\uff09\uff0c\u5176B+\u6811\u7684\u53f6\u5b50\u8282\u70b9\u5b58\u50a8\u7684\u662f\u4e3b\u952e\u503c\u800c\u4e0d\u662f\u5b9e\u9645\u6570\u636e\u3002\u56e0\u6b64\uff0c\u901a\u8fc7\u4e8c\u7ea7\u7d22\u5f15\u67e5\u627e\u6570\u636e\u65f6\uff0c\u9700\u8981\u5148\u5728\u4e8c\u7ea7\u7d22\u5f15B+\u6811\u4e2d\u627e\u5230\u5bf9\u5e94\u7684\u4e3b\u952e\u503c\uff0c\u7136\u540e\u6839\u636e\u4e3b\u952e\u503c\u518d\u5230\u805a\u7c07\u7d22\u5f15B+\u6811\u4e2d\u67e5\u627e\u5b9e\u9645\u7684\u6570\u636e\u884c\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u79f0\u4e3a\u201c\u56de\u8868\u201d\u3002</p> <p>B+\u6811\u7684\u4f18\u52bf\uff1a</p> <ul> <li>\u66f4\u9002\u5408\u78c1\u76d8\u5b58\u50a8\uff1a \u8282\u70b9\u5927\u5c0f\u901a\u5e38\u8bbe\u7f6e\u4e3a\u78c1\u76d8\u9875\uff08Page\uff09\u7684\u5927\u5c0f\uff08\u59824KB\u621616KB\uff09\uff0c\u4e00\u6b21\u78c1\u76d8I/O\u53ef\u4ee5\u8bfb\u53d6\u4e00\u4e2a\u5b8c\u6574\u7684\u8282\u70b9\u3002\u9ad8\u6247\u51fa\u7279\u6027\u4f7f\u5f97\u4e00\u6b21I/O\u80fd\u83b7\u53d6\u66f4\u591a\u8def\u5f84\u4fe1\u606f\uff0c\u6709\u6548\u51cf\u5c11I/O\u6b21\u6570\u3002</li> <li>\u7a33\u5b9a\u7684\u67e5\u8be2\u6027\u80fd\uff1a \u7531\u4e8e\u6240\u6709\u67e5\u8be2\u90fd\u5fc5\u987b\u5230\u8fbe\u53f6\u5b50\u8282\u70b9\u624d\u80fd\u83b7\u53d6\u6570\u636e\uff0c\u4e14\u6811\u7684\u9ad8\u5ea6\u662f\u5e73\u8861\u7684\uff0c\u6240\u4ee5B+\u6811\u7684\u67e5\u8be2\u6027\u80fd\u975e\u5e38\u7a33\u5b9a\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u7a33\u5b9a\u5728O(log<sub>m</sub>N)\u3002</li> <li>\u9ad8\u6548\u7684\u8303\u56f4\u67e5\u8be2\u548c\u987a\u5e8f\u626b\u63cf\uff1a \u53f6\u5b50\u8282\u70b9\u4e4b\u95f4\u901a\u8fc7\u94fe\u8868\u8fde\u63a5\uff0c\u4f7f\u5f97\u8303\u56f4\u67e5\u8be2\uff08\u5982<code>WHERE id BETWEEN 5 AND 10</code>\uff09\u975e\u5e38\u9ad8\u6548\uff0c\u53ea\u9700\u627e\u5230\u8d77\u59cb\u53f6\u5b50\u8282\u70b9\uff0c\u7136\u540e\u6cbf\u7740\u94fe\u8868\u987a\u5e8f\u904d\u5386\u5373\u53ef\u3002</li> <li>\u5145\u5206\u5229\u7528\u78c1\u76d8\u9884\u8bfb\u7279\u6027\uff1a \u8fde\u7eed\u7684\u53f6\u5b50\u8282\u70b9\u6570\u636e\u5728\u78c1\u76d8\u4e0a\u4e5f\u662f\u8fde\u7eed\u5b58\u653e\u7684\uff0c\u8fd9\u6709\u5229\u4e8e\u5229\u7528\u78c1\u76d8\u9884\u8bfb\u7684\u7279\u6027\uff0c\u63d0\u9ad8I/O\u6548\u7387\u3002</li> <li>\u66f4\u9ad8\u7684\u5e76\u53d1\u6027\uff1a \u975e\u53f6\u5b50\u8282\u70b9\u53ea\u5b58\u50a8\u7d22\u5f15\uff0c\u4e0d\u5b58\u50a8\u6570\u636e\uff0c\u51cf\u5c11\u4e86\u5bf9\u6570\u636e\u884c\u7684\u9501\u5b9a\u7ade\u4e89\uff0c\u63d0\u9ad8\u4e86\u5e76\u53d1\u8bbf\u95ee\u80fd\u529b\u3002</li> </ul> <p>B+\u6811\u7684\u52a3\u52bf\uff1a</p> <ul> <li>\u7a7a\u95f4\u5f00\u9500\u76f8\u5bf9\u8f83\u5927\uff1a \u975e\u53f6\u5b50\u8282\u70b9\u5b58\u50a8\u4e86\u5197\u4f59\u7684\u952e\uff08\u4f5c\u4e3a\u7d22\u5f15\uff09\uff0c\u8fd9\u4e9b\u952e\u5728\u53f6\u5b50\u8282\u70b9\u4e2d\u4e5f\u5b58\u5728\uff0c\u76f8\u6bd4B\u6811\u4f1a\u6709\u4e00\u5b9a\u7684\u7a7a\u95f4\u6d6a\u8d39\u3002</li> <li>\u5355\u70b9\u67e5\u8be2\u6027\u80fd\u53ef\u80fd\u7565\u4f4e\u4e8eB\u6811\uff08\u7406\u8bba\u4e0a\uff09\uff1a \u5728B\u6811\u4e2d\uff0c\u6570\u636e\u53ef\u80fd\u5b58\u50a8\u5728\u975e\u53f6\u5b50\u8282\u70b9\uff0c\u5982\u679c\u67e5\u8be2\u547d\u4e2d\u975e\u53f6\u5b50\u8282\u70b9\uff0c\u5219\u53ef\u4ee5\u66f4\u5feb\u8fd4\u56de\u3002\u4f46\u5728B+\u6811\u4e2d\uff0c\u6240\u6709\u67e5\u8be2\u90fd\u5fc5\u987b\u5230\u8fbe\u53f6\u5b50\u8282\u70b9\u3002\u7136\u800c\uff0c\u8003\u8651\u5230\u78c1\u76d8I/O\u662f\u4e3b\u8981\u74f6\u9888\uff0cB+\u6811\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\u901a\u5e38\u8868\u73b0\u66f4\u597d\u3002</li> <li>\u66f4\u65b0\u4ee3\u4ef7\uff1a \u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u53ef\u80fd\u5bfc\u81f4\u8282\u70b9\u7684\u5206\u88c2\u6216\u5408\u5e76\uff0c\u9700\u8981\u8c03\u6574\u6811\u7684\u7ed3\u6784\uff0c\u4ece\u800c\u5f15\u5165\u989d\u5916\u7684I/O\u548cCPU\u5f00\u9500\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E7%B4%A2%E5%BC%95%E5%A4%B1%E6%95%88%E7%9A%84%E5%9C%BA%E6%99%AF/","title":"\u7d22\u5f15\u5931\u6548\u7684\u573a\u666f","text":"<ol> <li> <p>\u5bf9\u7d22\u5f15\u5217\u8fdb\u884c\u8ba1\u7b97\u3001\u51fd\u6570\u64cd\u4f5c\u6216\u7c7b\u578b\u8f6c\u6362\uff1a</p> <ul> <li>\u8fd9\u662f\u6700\u5e38\u89c1\u4e5f\u6700\u5bb9\u6613\u88ab\u5ffd\u7565\u7684\u60c5\u51b5\u3002\u5982\u679c\u5728<code>WHERE</code>\u5b50\u53e5\u4e2d\uff0c\u5bf9\u7d22\u5f15\u5217\u5e94\u7528\u4e86\u4efb\u4f55\u51fd\u6570\uff08\u65e0\u8bba\u662f\u5185\u7f6e\u51fd\u6570\u8fd8\u662f\u81ea\u5b9a\u4e49\u51fd\u6570\uff09\u6216\u8fdb\u884c\u4e86\u8ba1\u7b97\uff0c\u90a3\u4e48\u7d22\u5f15\u5c06\u4e0d\u4f1a\u88ab\u4f7f\u7528\u3002</li> <li>\u539f\u56e0\uff1a\u7d22\u5f15\u4e2d\u5b58\u50a8\u7684\u662f\u539f\u59cb\u5217\u7684\u503c\uff0c\u800c\u7ecf\u8fc7\u51fd\u6570\u6216\u8ba1\u7b97\u540e\u7684\u503c\uff0c\u6570\u636e\u5e93\u65e0\u6cd5\u76f4\u63a5\u4e0e\u7d22\u5f15\u6811\u4e2d\u7684\u503c\u8fdb\u884c\u5339\u914d\u3002\u5b83\u9700\u8981\u5bf9\u8868\u4e2d\u7684\u6bcf\u4e00\u884c\u90fd\u6267\u884c\u4e00\u6b21\u51fd\u6570\u6216\u8ba1\u7b97\uff0c\u7136\u540e\u518d\u8fdb\u884c\u6bd4\u8f83\uff0c\u8fd9\u7b49\u540c\u4e8e\u5168\u8868\u626b\u63cf\u3002</li> <li>\u793a\u4f8b\uff1a<ul> <li>\u5931\u6548\uff1a<code>SELECT * FROM users WHERE YEAR(create_time) = 2023;</code> (\u4f7f\u7528\u4e86<code>YEAR()</code>\u51fd\u6570)</li> <li>\u6709\u6548\uff1a<code>SELECT * FROM users WHERE create_time &gt;= '2023-01-01' AND create_time &lt; '2024-01-01';</code> (\u5c06\u6761\u4ef6\u8f6c\u6362\u4e3a\u5bf9\u539f\u59cb\u5217\u7684\u8303\u56f4\u67e5\u8be2)</li> <li>\u5931\u6548\uff1a<code>SELECT * FROM users WHERE score / 10 = 9;</code> (\u8fdb\u884c\u4e86\u8ba1\u7b97)</li> <li>\u6709\u6548\uff1a<code>SELECT * FROM users WHERE score &gt;= 90 AND score &lt; 100;</code></li> <li>\u5931\u6548\uff08\u9690\u5f0f\u7c7b\u578b\u8f6c\u6362\uff09\uff1a<code>SELECT * FROM users WHERE phone = 1234567890;</code> (\u5047\u8bbe<code>phone</code>\u662f<code>VARCHAR</code>\u7c7b\u578b\uff0c\u800c\u67e5\u8be2\u6761\u4ef6\u662f\u6570\u5b57\uff0c\u6570\u636e\u5e93\u53ef\u80fd\u4f1a\u5c06\u5217\u7684\u503c\u8f6c\u6362\u4e3a\u6570\u5b57\u518d\u6bd4\u8f83\uff0c\u5bfc\u81f4\u7d22\u5f15\u5931\u6548)</li> <li>\u6709\u6548\uff1a<code>SELECT * FROM users WHERE phone = '1234567890';</code></li> </ul> </li> </ul> </li> <li> <p>\u4e0d\u7b26\u5408\u6700\u5de6\u524d\u7f00\u539f\u5219\uff08Leftmost Prefix Principle\uff09\uff1a</p> <ul> <li>\u8fd9\u4e3b\u8981\u9488\u5bf9\u8054\u5408\u7d22\u5f15\uff08Composite Index\uff09\u3002\u4f8b\u5982\uff0c\u6709\u4e00\u4e2a\u8054\u5408\u7d22\u5f15 <code>idx(a, b, c)</code>\u3002</li> <li>\u4f18\u5316\u5668\u8981\u4f7f\u7528\u8fd9\u4e2a\u7d22\u5f15\uff0c\u67e5\u8be2\u6761\u4ef6\u5fc5\u987b\u4ece\u7d22\u5f15\u7684\u6700\u5de6\u8fb9\u7684\u5217\u5f00\u59cb\uff0c\u5e76\u4e14\u4e0d\u80fd\u8df3\u8fc7\u4e2d\u95f4\u7684\u5217\u3002</li> <li>\u793a\u4f8b\uff08\u5bf9\u4e8e\u7d22\u5f15 <code>idx(a, b, c)</code>\uff09\uff1a<ul> <li>\u6709\u6548\uff1a<code>WHERE a = 1;</code></li> <li>\u6709\u6548\uff1a<code>WHERE a = 1 AND b = 2;</code></li> <li>\u6709\u6548\uff1a<code>WHERE a = 1 AND b = 2 AND c = 3;</code></li> <li>\u5931\u6548\uff1a<code>WHERE b = 2;</code> (\u6ca1\u6709\u4f7f\u7528\u6700\u5de6\u8fb9\u7684\u5217a)</li> <li>\u5931\u6548\uff1a<code>WHERE a = 1 AND c = 3;</code> (\u8df3\u8fc7\u4e86\u4e2d\u95f4\u7684\u5217b\uff0c\u53ea\u6709\u5217a\u90e8\u5206\u7684\u7d22\u5f15\u4f1a\u751f\u6548)</li> </ul> </li> </ul> </li> <li> <p>\u8303\u56f4\u67e5\u8be2\u53f3\u4fa7\u7684\u5217\u5931\u6548\uff1a</p> <ul> <li>\u5728\u4f7f\u7528\u8054\u5408\u7d22\u5f15\u65f6\uff0c\u5982\u679c\u5bf9\u67d0\u4e2a\u5217\u4f7f\u7528\u4e86\u8303\u56f4\u67e5\u8be2\uff08\u5982 <code>&gt;</code>\u3001<code>&lt;</code>\u3001<code>BETWEEN</code>\u3001<code>LIKE</code>\uff09\uff0c\u90a3\u4e48\u8be5\u5217\u53f3\u8fb9\u7684\u6240\u6709\u5217\u7684\u7d22\u5f15\u90fd\u5c06\u5931\u6548\u3002</li> <li>\u539f\u56e0\uff1a\u8303\u56f4\u67e5\u8be2\u4e4b\u540e\uff0c\u540e\u7eed\u5217\u7684\u7d22\u5f15\u987a\u5e8f\u5c31\u65e0\u6cd5\u4fdd\u8bc1\u4e86\uff0c\u4f18\u5316\u5668\u65e0\u6cd5\u7ee7\u7eed\u5229\u7528\u7d22\u5f15\u8fdb\u884c\u5feb\u901f\u5b9a\u4f4d\u3002</li> <li>\u793a\u4f8b\uff08\u5bf9\u4e8e\u7d22\u5f15 <code>idx(a, b, c)</code>\uff09\uff1a<ul> <li><code>WHERE a = 1 AND b &gt; 10 AND c = 3;</code></li> <li>\u8fd9\u4e2a\u67e5\u8be2\u4e2d\uff0c\u7d22\u5f15\u4f1a\u7528\u4e8e<code>a</code>\u5217\u7684\u7b49\u503c\u5339\u914d\u548c<code>b</code>\u5217\u7684\u8303\u56f4\u67e5\u627e\uff0c\u4f46<code>c</code>\u5217\u7684\u7d22\u5f15\u90e8\u5206\u5c06\u4e0d\u4f1a\u88ab\u4f7f\u7528\uff0c\u56e0\u4e3a<code>b</code>\u7684\u8303\u56f4\u67e5\u627e\u5df2\u7ecf\u4e2d\u65ad\u4e86\u7d22\u5f15\u7684\u6709\u5e8f\u6027\u3002</li> </ul> </li> </ul> </li> <li> <p>\u4e0d\u5f53\u7684<code>LIKE</code>\u67e5\u8be2\uff1a</p> <ul> <li>\u5f53<code>LIKE</code>\u67e5\u8be2\u7684\u6a21\u5f0f\u4ee5\u901a\u914d\u7b26<code>%</code>\u5f00\u5934\u65f6\uff0c\u7d22\u5f15\u4f1a\u5931\u6548\u3002</li> <li>\u539f\u56e0\uff1a\u7d22\u5f15\u662f\u6309\u4ece\u5de6\u5230\u53f3\u7684\u987a\u5e8f\u5efa\u7acb\u7684\uff0c\u5982\u679c\u5de6\u8fb9\u662f\u672a\u77e5\u7684\uff08<code>%</code>\uff09\uff0c\u6570\u636e\u5e93\u65e0\u6cd5\u5b9a\u4f4d\u7d22\u5f15\u7684\u8d77\u59cb\u70b9\u3002</li> <li>\u793a\u4f8b\uff1a<ul> <li>\u5931\u6548\uff1a<code>WHERE name LIKE '%john%';</code></li> <li>\u6709\u6548\uff1a<code>WHERE name LIKE 'john%';</code> (\u53ef\u4ee5\u4f7f\u7528<code>name</code>\u5217\u7684\u7d22\u5f15)</li> </ul> </li> </ul> </li> <li> <p>\u4f7f\u7528<code>OR</code>\u8fde\u63a5\u6761\u4ef6\uff1a</p> <ul> <li>\u5982\u679c<code>OR</code>\u8fde\u63a5\u7684\u591a\u4e2a\u6761\u4ef6\u4e2d\uff0c\u6709\u4efb\u4f55\u4e00\u4e2a\u6761\u4ef6\u6240\u5728\u7684\u5217\u6ca1\u6709\u7d22\u5f15\uff0c\u90a3\u4e48\u901a\u5e38\u6574\u4e2a\u67e5\u8be2\u90fd\u4f1a\u653e\u5f03\u4f7f\u7528\u7d22\u5f15\uff0c\u8f6c\u800c\u8fdb\u884c\u5168\u8868\u626b\u63cf\u3002</li> <li>\u539f\u56e0\uff1a\u4f18\u5316\u5668\u8ba4\u4e3a\uff0c\u5982\u679c\u4e00\u90e8\u5206\u6570\u636e\u9700\u8981\u5168\u8868\u626b\u63cf\u624d\u80fd\u627e\u5230\uff0c\u90a3\u4e48\u5408\u5e76\u4e24\u4e2a\u7ed3\u679c\u96c6\uff08\u4e00\u4e2a\u6765\u81ea\u7d22\u5f15\uff0c\u4e00\u4e2a\u6765\u81ea\u5168\u8868\u626b\u63cf\uff09\u7684\u6210\u672c\u53ef\u80fd\u6bd4\u76f4\u63a5\u4e00\u6b21\u6027\u5168\u8868\u626b\u63cf\u66f4\u9ad8\u3002</li> <li>\u4f18\u5316\uff1a\u786e\u4fdd<code>OR</code>\u4e24\u8fb9\u7684\u6240\u6709\u6761\u4ef6\u5217\u90fd\u6709\u7d22\u5f15\u3002</li> </ul> </li> <li> <p>\u4f7f\u7528<code>NOT</code>\u6216\u4e0d\u7b49\u4e8e\u64cd\u4f5c\uff1a</p> <ul> <li><code>!=</code>\u3001<code>&lt;&gt;</code>\u3001<code>NOT IN</code>\u3001<code>NOT EXISTS</code>\u7b49\u64cd\u4f5c\u901a\u5e38\u65e0\u6cd5\u6709\u6548\u5229\u7528\u7d22\u5f15\uff0c\u56e0\u4e3a\u5b83\u4eec\u4e0d\u6307\u5411\u4e00\u4e2a\u660e\u786e\u7684\u8303\u56f4\u6216\u503c\uff0c\u9700\u8981\u626b\u63cf\u5927\u90e8\u5206\u6570\u636e\u3002</li> <li><code>IS NULL</code> \u548c <code>IS NOT NULL</code>\uff1a\u5728\u65e9\u671f\u7684MySQL\u7248\u672c\u4e2d\uff0c<code>IS NULL</code>\u4e0d\u8d70\u7d22\u5f15\u3002\u73b0\u5728\u7248\u672c\u7684\u4f18\u5316\u5668\u5df2\u7ecf\u6709\u6240\u6539\u8fdb\uff0c\u4f46\u5982\u679c<code>NULL</code>\u503c\u975e\u5e38\u591a\uff0c\u4f18\u5316\u5668\u4e5f\u53ef\u80fd\u653e\u5f03\u7d22\u5f15\u3002</li> </ul> </li> <li> <p>\u4f18\u5316\u5668\u8ba4\u4e3a\u5168\u8868\u626b\u63cf\u66f4\u5feb\uff1a</p> <ul> <li>\u5373\u4f7f\u67e5\u8be2\u7b26\u5408\u6240\u6709\u4f7f\u7528\u7d22\u5f15\u7684\u89c4\u5219\uff0c\u4f18\u5316\u5668\u4e5f\u53ef\u80fd\u6700\u7ec8\u9009\u62e9\u4e0d\u4f7f\u7528\u7d22\u5f15\u3002</li> <li>\u539f\u56e0\uff1a<ul> <li>\u8868\u7684\u6570\u636e\u91cf\u975e\u5e38\u5c0f\uff1a\u5bf9\u4e8e\u5c0f\u8868\uff0c\u5168\u8868\u626b\u63cf\u7684\u6210\u672c\uff08\u4e3b\u8981\u662fCPU\uff09\u53ef\u80fd\u4f4e\u4e8e\u4f7f\u7528\u7d22\u5f15\u7684\u6210\u672c\uff08I/O + CPU\uff09\u3002</li> <li>\u7d22\u5f15\u7684\u9009\u62e9\u6027\uff08Cardinality\uff09\u5f88\u5dee\uff1a\u5982\u679c\u4e00\u4e2a\u7d22\u5f15\u5217\u7684\u503c\u91cd\u590d\u5ea6\u975e\u5e38\u9ad8\uff08\u5982\u6027\u522b\u5217\uff09\uff0c\u901a\u8fc7\u7d22\u5f15\u8fc7\u6ee4\u6389\u7684\u6570\u636e\u5f88\u5c11\u3002\u4f18\u5316\u5668\u4f30\u7b97\u5230\u5373\u4f7f\u4f7f\u7528\u7d22\u5f15\uff0c\u4ecd\u7136\u9700\u8981\u56de\u8868\u67e5\u8be2\u5927\u91cf\u7684\u6570\u636e\u884c\uff0c\u5176\u968f\u673aI/O\u7684\u6210\u672c\u53ef\u80fd\u9ad8\u4e8e\u4e00\u6b21\u987a\u5e8f\u7684\u5168\u8868\u626b\u63cf\u3002</li> <li>\u67e5\u8be2\u9700\u8981\u8fd4\u56de\u8868\u4e2d\u5927\u90e8\u5206\u7684\u6570\u636e\uff1a\u5f53\u4f18\u5316\u5668\u4f30\u7b97\u67e5\u8be2\u7ed3\u679c\u4f1a\u8986\u76d6\u8868\u4e2d\u5927\u90e8\u5206\u884c\u65f6\uff08\u4f8b\u5982\u8d85\u8fc720%-30%\uff09\uff0c\u5b83\u901a\u5e38\u4f1a\u9009\u62e9\u5168\u8868\u626b\u63cf\u3002</li> <li>\u6570\u636e\u5e93\u7684\u7edf\u8ba1\u4fe1\u606f\u4e0d\u51c6\u786e\uff1a\u4f18\u5316\u5668\u4f9d\u8d56\u4e8e\u8868\u7684\u7edf\u8ba1\u4fe1\u606f\uff08\u5982\u884c\u6570\u3001\u503c\u7684\u5206\u5e03\u7b49\uff09\u6765\u505a\u51b3\u7b56\u3002\u5982\u679c\u7edf\u8ba1\u4fe1\u606f\u8fc7\u65f6\u6216\u4e0d\u51c6\uff0c\u53ef\u80fd\u5bfc\u81f4\u5b83\u505a\u51fa\u9519\u8bef\u7684\u5224\u65ad\u3002</li> </ul> </li> </ul> </li> </ol> <p>\u5982\u4f55\u6392\u67e5\u548c\u89e3\u51b3\uff1a *   \u4f7f\u7528<code>EXPLAIN</code>\u547d\u4ee4\uff1a\u8fd9\u662f\u5206\u6790SQL\u67e5\u8be2\u662f\u5426\u4f7f\u7528\u7d22\u5f15\u4ee5\u53ca\u5982\u4f55\u4f7f\u7528\u7d22\u5f15\u7684\u6700\u91cd\u8981\u5de5\u5177\u3002\u901a\u8fc7\u67e5\u770b<code>EXPLAIN</code>\u7684\u8f93\u51fa\uff08\u7279\u522b\u662f<code>type</code>, <code>key</code>, <code>rows</code>, <code>Extra</code>\u7b49\u5b57\u6bb5\uff09\uff0c\u53ef\u4ee5\u6e05\u6670\u5730\u4e86\u89e3\u7d22\u5f15\u7684\u4f7f\u7528\u60c5\u51b5\u3002 *   \u4fdd\u6301\u7d22\u5f15\u5217\u7684\u201c\u5e72\u51c0\u201d\uff1a\u907f\u514d\u5728<code>WHERE</code>\u5b50\u53e5\u4e2d\u5bf9\u7d22\u5f15\u5217\u8fdb\u884c\u4efb\u4f55\u5f62\u5f0f\u7684\u8f6c\u6362\u6216\u8ba1\u7b97\u3002 *   \u7cbe\u5fc3\u8bbe\u8ba1\u7d22\u5f15\uff1a\u6839\u636e\u4e1a\u52a1\u67e5\u8be2\u6a21\u5f0f\u8bbe\u8ba1\u5408\u9002\u7684\u5355\u5217\u7d22\u5f15\u548c\u8054\u5408\u7d22\u5f15\uff0c\u5e76\u6ce8\u610f\u8054\u5408\u7d22\u5f15\u7684\u5217\u987a\u5e8f\u3002 *   \u5b9a\u671f\u66f4\u65b0\u7edf\u8ba1\u4fe1\u606f\uff1a\u4f7f\u7528<code>ANALYZE TABLE</code>\u7b49\u547d\u4ee4\u786e\u4fdd\u4f18\u5316\u5668\u6709\u51c6\u786e\u7684\u6570\u636e\u6765\u505a\u51b3\u7b56\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E8%AF%BB%E5%B7%B2%E6%8F%90%E4%BA%A4%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E4%B8%8B%E5%A6%82%E4%BD%95%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE/","title":"\u8bfb\u5df2\u63d0\u4ea4\u9694\u79bb\u7ea7\u522b\u4e0b\u5982\u4f55\u8bfb\u53d6\u6570\u636e","text":"<p>\u5728\u8bfb\u5df2\u63d0\u4ea4\uff08Read Committed\uff09\u9694\u79bb\u7ea7\u522b\u4e0b\uff0c\u8bfb\u53d6\u6570\u636e\u7684\u65b9\u5f0f\u5b8c\u5168\u4f9d\u8d56\u4e8eMVCC\uff08\u591a\u7248\u672c\u5e76\u53d1\u63a7\u5236\uff09\u673a\u5236\uff0c\u5176\u6838\u5fc3\u7684\u5b9e\u73b0\u7ec6\u8282\u5728\u4e8eReadView\uff08\u8bfb\u89c6\u56fe\uff09\u7684\u521b\u5efa\u65f6\u673a\u3002</p> <p>\u7b80\u5355\u6765\u8bf4\uff0c\u5b83\u7684\u8bfb\u53d6\u7b56\u7565\u53ef\u4ee5\u6982\u62ec\u4e3a\uff1a\u5728\u4e8b\u52a1\u4e2d\uff0c\u6bcf\u4e00\u6b21\u6267\u884c<code>SELECT</code>\u8bed\u53e5\uff0c\u90fd\u4f1a\u751f\u6210\u4e00\u4e2a\u65b0\u7684\u3001\u5373\u65f6\u7684\u201c\u6570\u636e\u5feb\u7167\u201d\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E8%AF%BB%E5%B7%B2%E6%8F%90%E4%BA%A4%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E4%B8%8B%E5%A6%82%E4%BD%95%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE/#selectreadview","title":"\u6838\u5fc3\u673a\u5236\uff1a\u4e3a\u6bcf\u4e2aSELECT\u8bed\u53e5\u521b\u5efaReadView","text":"<p>\u5728RC\u9694\u79bb\u7ea7\u522b\u4e0b\uff0c\u5f53\u4e00\u4e2a\u4e8b\u52a1\u6267\u884c\u4e00\u6761<code>SELECT</code>\u8bed\u53e5\u65f6\uff0cInnoDB\u4f1a\u4e3a\u8fd9\u6761\u8bed\u53e5\u521b\u5efa\u4e00\u4e2a\u5168\u65b0\u7684ReadView\u3002</p> <p>\u8fd9\u4e2aReadView\u53ef\u4ee5\u88ab\u7406\u89e3\u4e3a\u5728<code>SELECT</code>\u8bed\u53e5\u6267\u884c\u7684\u90a3\u4e00\u77ac\u95f4\uff0c\u6574\u4e2a\u6570\u636e\u5e93\u7684\u4e00\u4e2a\u201c\u5feb\u7167\u201d\u3002\u8fd9\u4e2a\u5feb\u7167\u5305\u542b\u4e86\u4ee5\u4e0b\u5173\u952e\u4fe1\u606f\uff1a *   \u5f53\u524d\u6240\u6709\u6d3b\u8dc3\uff08\u672a\u63d0\u4ea4\uff09\u7684\u4e8b\u52a1ID\u5217\u8868\u3002 *   \u6d3b\u8dc3\u4e8b\u52a1\u4e2d\u7684\u6700\u5c0fID\u3002 *   \u4e0b\u4e00\u4e2a\u5c06\u8981\u5206\u914d\u7684\u4e8b\u52a1ID\u3002</p> <p>\u8fd9\u4e2aReadView\u7684\u4f5c\u7528\u5c31\u662f\u4f5c\u4e3a\u4e00\u4e2a\u201c\u53ef\u89c1\u6027\u6807\u5c3a\u201d\uff0c\u7528\u6765\u5224\u65ad\u6570\u636e\u884c\u4e2d\u7684\u54ea\u4e2a\u7248\u672c\u5bf9\u5f53\u524d\u7684<code>SELECT</code>\u64cd\u4f5c\u662f\u53ef\u89c1\u7684\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E8%AF%BB%E5%B7%B2%E6%8F%90%E4%BA%A4%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E4%B8%8B%E5%A6%82%E4%BD%95%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE/#_1","title":"\u4e00\u4e2a\u5177\u4f53\u7684\u8bfb\u53d6\u6d41\u7a0b\u793a\u4f8b","text":"<p>\u4e3a\u4e86\u66f4\u597d\u5730\u7406\u89e3\uff0c\u6211\u4eec\u6765\u770b\u4e00\u4e2a\u7ecf\u5178\u7684\u201c\u4e0d\u53ef\u91cd\u590d\u8bfb\u201d\u573a\u666f\u662f\u5982\u4f55\u5728RC\u7ea7\u522b\u4e0b\u53d1\u751f\u7684\uff1a</p> <p>\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u4e2a\u8d26\u6237\u8868<code>accounts</code>\uff0c\u5176\u4e2d\u4e00\u884c\u6570\u636e\u4e3a <code>(id=1, balance=100)</code>\u3002</p> <ol> <li> <p>\u4e8b\u52a1A\u5f00\u542f\u3002     <code>START TRANSACTION;</code></p> </li> <li> <p>\u4e8b\u52a1A\u6267\u884c\u7b2c\u4e00\u6b21<code>SELECT</code> (T1\u65f6\u523b)\u3002     <code>SELECT balance FROM accounts WHERE id = 1;</code>     \u6b64\u65f6\uff0cInnoDB\u4e3a\u8fd9\u6761<code>SELECT</code>\u521b\u5efa\u4e86\u4e00\u4e2aReadView_1\u3002     ReadView_1\u53d1\u73b0\u5f53\u524d<code>balance=100</code>\u7684\u8fd9\u4e2a\u6570\u636e\u7248\u672c\uff0c\u662f\u5728\u5b83\u521b\u5efa\u4e4b\u524d\u5c31\u5df2\u7ecf\u63d0\u4ea4\u7684\uff0c\u56e0\u6b64\u662f\u53ef\u89c1\u7684\u3002     \u4e8b\u52a1A\u67e5\u8be2\u5230\u7684\u7ed3\u679c\u662f\uff1a<code>100</code>\u3002</p> </li> <li> <p>\u4e0e\u6b64\u540c\u65f6\uff0c\u4e8b\u52a1B\u5f00\u542f\uff0c\u4fee\u6539\u6570\u636e\u5e76\u63d0\u4ea4 (T2\u65f6\u523b)\u3002     <code>START TRANSACTION;</code> <code>UPDATE accounts SET balance = 150 WHERE id = 1;</code> <code>COMMIT;</code>     \u4e8b\u52a1B\u7684<code>UPDATE</code>\u64cd\u4f5c\u4f1a\u751f\u6210\u4e00\u4e2a\u65b0\u7684\u6570\u636e\u7248\u672c\uff0c<code>balance=150</code>\u3002\u65e7\u7248\u672c<code>balance=100</code>\u4f1a\u88ab\u653e\u5165Undo Log\u3002</p> </li> <li> <p>\u4e8b\u52a1A\u5728\u5185\u90e8\u7ee7\u7eed\u6267\u884c\uff0c\u5e76\u8fdb\u884c\u7b2c\u4e8c\u6b21<code>SELECT</code> (T3\u65f6\u523b)\u3002     <code>SELECT balance FROM accounts WHERE id = 1;</code>     \u8fd9\u662fRC\u7ea7\u522b\u6700\u5173\u952e\u7684\u4e00\u6b65\uff1a\u56e0\u4e3a\u8fd9\u662f\u4e00\u6761\u65b0\u7684<code>SELECT</code>\u8bed\u53e5\uff0cInnoDB\u4f1a\u91cd\u65b0\u521b\u5efa\u4e00\u4e2a\u5168\u65b0\u7684ReadView_2\u3002     \u5728\u521b\u5efaReadView_2\u7684\u8fd9\u4e00\u523b\uff0c\u4e8b\u52a1B\u5df2\u7ecf\u63d0\u4ea4\u4e86\u3002\u6240\u4ee5\uff0c\u5728ReadView_2\u7684\u201c\u6d3b\u8dc3\u4e8b\u52a1\u5217\u8868\u201d\u4e2d\uff0c\u5df2\u7ecf\u4e0d\u5305\u542b\u4e8b\u52a1B\u7684ID\u4e86\u3002</p> </li> <li> <p>\u53ef\u89c1\u6027\u5224\u65ad\uff1a     \u4e8b\u52a1A\u4f7f\u7528ReadView_2\u53bb\u8bfb\u53d6<code>id=1</code>\u7684\u8fd9\u884c\u6570\u636e\u3002\u5b83\u9996\u5148\u770b\u5230\u7684\u662f\u6700\u65b0\u7248\u672c\uff0c\u5373<code>balance=150</code>\uff0c\u8fd9\u4e2a\u7248\u672c\u662f\u7531\u4e8b\u52a1B\u4fee\u6539\u7684\u3002     \u5b83\u4f1a\u7528ReadView_2\u6765\u5224\u65ad\u8fd9\u4e2a\u7248\u672c\u7684\u53ef\u89c1\u6027\u3002\u5b83\u53d1\u73b0\uff0c\u4fee\u6539\u8fd9\u4e2a\u7248\u672c\u7684\u4e8b\u52a1B\uff0c\u5176ID\u4e0d\u5728ReadView_2\u7684\u6d3b\u8dc3\u4e8b\u52a1\u5217\u8868\u4e2d\u3002     \u6839\u636eMVCC\u89c4\u5219\uff0c\u8fd9\u610f\u5473\u7740\u4e8b\u52a1B\u662f\u4e00\u4e2a\u5df2\u7ecf\u63d0\u4ea4\u4e86\u7684\u4e8b\u52a1\uff0c\u6240\u4ee5\u5b83\u7684\u4fee\u6539\u5bf9\u5f53\u524d\u8fd9\u4e2a<code>SELECT</code>\u64cd\u4f5c\u662f\u53ef\u89c1\u7684\u3002     \u56e0\u6b64\uff0c\u4e8b\u52a1A\u7b2c\u4e8c\u6b21\u67e5\u8be2\u5230\u7684\u7ed3\u679c\u662f\uff1a<code>150</code>\u3002</p> </li> </ol> <p>\u901a\u8fc7\u4e0a\u9762\u7684\u6d41\u7a0b\uff0c\u6211\u4eec\u53ef\u4ee5\u6e05\u6670\u5730\u770b\u5230\uff1a *   RC\u7ea7\u522b\u5982\u4f55\u89e3\u51b3\u810f\u8bfb\uff1a\u5728\u4efb\u4f55\u4e00\u4e2aReadView\u4e2d\uff0c\u90fd\u53ea\u5305\u542b\u5df2\u63d0\u4ea4\u7684\u4e8b\u52a1\u4fe1\u606f\u3002\u56e0\u6b64\uff0c\u4e00\u4e2a\u4e8b\u52a1\u6c38\u8fdc\u4e0d\u4f1a\u8bfb\u5230\u53e6\u4e00\u4e2a\u4e8b\u52a1\u5c1a\u672a\u63d0\u4ea4\u7684\u6570\u636e\u3002 *   RC\u7ea7\u522b\u4e3a\u4f55\u4f1a\u4ea7\u751f\u4e0d\u53ef\u91cd\u590d\u8bfb\uff1a\u5728\u4e00\u4e2a\u4e8b\u52a1\u5185\u90e8\uff0c\u7531\u4e8e\u6bcf\u6b21<code>SELECT</code>\u90fd\u4f1a\u751f\u6210\u65b0\u7684ReadView\uff0c\u5982\u679c\u4e24\u6b21<code>SELECT</code>\u4e4b\u95f4\u6709\u5176\u4ed6\u4e8b\u52a1\u63d0\u4ea4\u4e86\u4fee\u6539\uff0c\u90a3\u4e48\u540e\u4e00\u4e2aReadView\u5c31\u80fd\u201c\u770b\u5230\u201d\u8fd9\u4e2a\u65b0\u63d0\u4ea4\u7684\u4fee\u6539\uff0c\u5bfc\u81f4\u4e24\u6b21\u8bfb\u53d6\u7684\u7ed3\u679c\u4e0d\u4e00\u81f4\u3002</p> <p>\u53ef\u4ee5\u505a\u4e00\u4e2a\u6bd4\u55bb\uff1a *   \u8bfb\u5df2\u63d0\u4ea4\uff08RC\uff09\u7684\u8bfb\u53d6\u65b9\u5f0f\uff0c\u5c31\u50cf\u662f\u4f60\u6bcf\u6b21\u60f3\u770b\u4e00\u4e2a\u4e1c\u897f\u65f6\uff0c\u90fd\u91cd\u65b0\u62cd\u4e00\u5f20\u7167\u7247\u6765\u770b\u3002\u4e24\u5f20\u7167\u7247\u4e4b\u95f4\uff0c\u4e1c\u897f\u53ef\u80fd\u5df2\u7ecf\u53d8\u4e86\u3002 *   \u800c\u53ef\u91cd\u590d\u8bfb\uff08RR\uff09\u7684\u8bfb\u53d6\u65b9\u5f0f\uff0c\u5c31\u50cf\u662f\u4f60\u53ea\u5728\u7b2c\u4e00\u6b21\u770b\u7684\u65f6\u5019\u62cd\u4e00\u5f20\u7167\u7247\uff0c\u4e4b\u540e\u65e0\u8bba\u518d\u770b\u591a\u5c11\u6b21\uff0c\u90fd\u53ea\u770b\u8fd9\u5f20\u65e7\u7167\u7247\u3002</p> <p>\u56e0\u6b64\uff0c\u8bfb\u5df2\u63d0\u4ea4\u9694\u79bb\u7ea7\u522b\u901a\u8fc7\u201c\u4e3a\u6bcf\u4e2a<code>SELECT</code>\u751f\u6210\u65b0\u5feb\u7167\u201d\u7684\u65b9\u5f0f\uff0c\u5728\u4fdd\u8bc1\u4e0d\u8bfb\u5230\u810f\u6570\u636e\u7684\u524d\u63d0\u4e0b\uff0c\u5b9e\u73b0\u4e86\u8f83\u9ad8\u7684\u5e76\u53d1\u6027\u80fd\uff0c\u662f\u8bb8\u591a\u6570\u636e\u5e93\u7cfb\u7edf\u7684\u9ed8\u8ba4\u9009\u62e9\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E9%97%B4%E9%9A%99%E9%94%81%E4%BB%8B%E7%BB%8D/","title":"\u95f4\u9699\u9501\u4ecb\u7ecd","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E9%97%B4%E9%9A%99%E9%94%81%E4%BB%8B%E7%BB%8D/#_1","title":"\u95f4\u9699\u9501","text":"<p>\u95f4\u9699\u9501\u662fInnoDB\u884c\u7ea7\u9501\u7684\u4e00\u79cd\u3002\u4e0e\u9501\u5b9a\u4e00\u6761\u5b9e\u9645\u8bb0\u5f55\u7684\u8bb0\u5f55\u9501\u4e0d\u540c\uff0c\u95f4\u9699\u9501\u9501\u5b9a\u7684\u662f\u4e00\u4e2a\u7d22\u5f15\u8bb0\u5f55\u4e4b\u95f4\u7684\u201c\u95f4\u9699\u201d\uff0c\u5b83\u662f\u4e00\u4e2a\u5de6\u5f00\u53f3\u5f00\u7684\u533a\u95f4\u3002</p> <p>\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5047\u8bbe\u4e00\u4e2a\u8868<code>products</code>\u7684<code>id</code>\u5217\u4e0a\u6709\u7d22\u5f15\uff0c\u5e76\u4e14\u6709<code>id</code>\u4e3a3\u548c8\u7684\u4e24\u6761\u8bb0\u5f55\u3002\u90a3\u4e48\uff0c\u95f4\u9699\u9501\u53ef\u4ee5\u9501\u5b9a(3, 8)\u8fd9\u4e2a\u533a\u95f4\u3002\u5f53\u8fd9\u4e2a\u95f4\u9699\u88ab\u9501\u4f4f\u65f6\uff0c\u4efb\u4f55\u5176\u4ed6\u4e8b\u52a1\u90fd\u4e0d\u80fd\u5728\u8fd9\u4e2a\u95f4\u9699\u5185<code>INSERT</code>\u65b0\u7684\u8bb0\u5f55\uff0c\u6bd4\u5982\u4e0d\u80fd\u63d2\u5165<code>id</code>\u4e3a4, 5, 6, 7\u7684\u8bb0\u5f55\u3002</p> <p>\u5b83\u7684\u6838\u5fc3\u76ee\u7684\u5c31\u662f\u9632\u6b62\u5176\u4ed6\u4e8b\u52a1\u5728\u67d0\u4e2a\u8303\u56f4\u5185\u63d2\u5165\u65b0\u7684\u6570\u636e\uff0c\u4ece\u800c\u907f\u514d\u5e7b\u8bfb\u73b0\u8c61\u7684\u53d1\u751f\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E9%97%B4%E9%9A%99%E9%94%81%E4%BB%8B%E7%BB%8D/#_2","title":"\u95f4\u9699\u9501\u9501\u4f4f\u7684\u65f6\u5019\u8fd8\u53ef\u4ee5\u8bfb\u5417\uff1f","text":"<ul> <li> <p>\u5feb\u7167\u8bfb (Snapshot Read)\uff1a\u8fd9\u662f\u6307\u4e0d\u52a0\u9501\u7684SELECT\u8bed\u53e5\u3002\u5728\u53ef\u91cd\u590d\u8bfb\uff08Repeatable Read\uff09\u9694\u79bb\u7ea7\u522b\u4e0b\uff0c\u5f53\u4e8b\u52a1\u5f00\u59cb\u65f6\uff0cInnoDB\u4f1a\u521b\u5efa\u4e00\u4e2a\u6570\u636e\u5feb\u7167\u3002\u540e\u7eed\u7684\u5feb\u7167\u8bfb\u5c06\u8bfb\u53d6\u8fd9\u4e2a\u5feb\u7167\u4e2d\u7684\u6570\u636e\uff0c\u800c\u4e0d\u4f1a\u53d7\u5230\u5176\u4ed6\u4e8b\u52a1\u63d0\u4ea4\u7684\u66f4\u65b0\u6216\u63d2\u5165\u7684\u5f71\u54cd\u3002\u56e0\u6b64\uff0c\u5373\u4f7f\u67d0\u4e2a\u8303\u56f4\u88ab\u95f4\u9699\u9501\u9501\u5b9a\uff0c\u5feb\u7167\u8bfb\u4ecd\u7136\u53ef\u4ee5\u8bfb\u53d6\u8be5\u8303\u56f4\u5185\u7684\u5df2\u6709\u6570\u636e\uff0c\u56e0\u4e3a\u5b83\u8bfb\u53d6\u7684\u662f\u4e8b\u52a1\u5f00\u59cb\u65f6\u7684\u7248\u672c\u3002</p> </li> <li> <p>\u5f53\u524d\u8bfb (Current Read)\uff1a\u8fd9\u662f\u6307\u4f1a\u52a0\u9501\u7684\u8bfb\u53d6\u64cd\u4f5c\uff0c\u4e3b\u8981\u5305\u62ec\uff1a</p> <ul> <li> <p>SELECT ... FOR UPDATE\u00a0(\u6392\u4ed6\u9501)</p> </li> <li> <p>SELECT ... LOCK IN SHARE MODE\u00a0(\u5171\u4eab\u9501)</p> </li> <li> <p>INSERT,\u00a0UPDATE,\u00a0DELETE\u00a0\u64cd\u4f5c</p> </li> </ul> </li> </ul> <p>\u8fd9\u4e9b\u201c\u5f53\u524d\u8bfb\u201d\u64cd\u4f5c\u4f1a\u8bfb\u53d6\u6570\u636e\u5e93\u4e2d\u6700\u65b0\u7684\u6570\u636e\uff0c\u5e76\u4e14\u4f1a\u5bf9\u8bfb\u53d6\u7684\u8bb0\u5f55\u6216\u8303\u56f4\u52a0\u9501\u3002\u5982\u679c\u8fd9\u4e9b\u64cd\u4f5c\u6d89\u53ca\u7684\u8303\u56f4\u88ab\u53e6\u4e00\u4e2a\u4e8b\u52a1\u7684\u95f4\u9699\u9501\u8986\u76d6\uff0c\u90a3\u4e48\u5b83\u4eec\u5c31\u4f1a\u88ab\u963b\u585e\uff0c\u76f4\u5230\u6301\u6709\u95f4\u9699\u9501\u7684\u4e8b\u52a1\u63d0\u4ea4\u6216\u56de\u6eda\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E9%97%B4%E9%9A%99%E9%94%81%E4%BB%8B%E7%BB%8D/#_3","title":"\u95f4\u9699\u9501\u53ef\u80fd\u4f1a\u9020\u6210\u6b7b\u9501\u5417\uff1f","text":"<p>\u662f\u7684\uff0c\u95f4\u9699\u9501\u662f\u9020\u6210\u6b7b\u9501\u7684\u4e00\u4e2a\u5e38\u89c1\u539f\u56e0\u3002</p> <p>\u4e00\u4e2a\u7ecf\u5178\u7684\u6b7b\u9501\u573a\u666f\u5982\u4e0b\uff1a \u5047\u8bbe<code>id</code>\u5217\u6709\u7d22\u5f15\uff0c\u4f46\u8868\u4e2d\u6ca1\u6709<code>id=5</code>\u7684\u8bb0\u5f55\u3002</p> <ul> <li> <p>\u4e8b\u52a1A: <code>UPDATE products SET name = 'A' WHERE id = 5;</code>     \u8fd9\u4e2a<code>UPDATE</code>\u64cd\u4f5c\u627e\u4e0d\u5230<code>id=5</code>\u7684\u8bb0\u5f55\uff0c\u4f46\u4e3a\u4e86\u9632\u6b62\u5e7b\u8bfb\uff0c\u5b83\u4f1a\u5728<code>id=5</code>\u6240\u5728\u7684\u90a3\u4e2a\u95f4\u9699\u4e0a\u52a0\u4e0a\u4e00\u4e2a\u95f4\u9699\u9501\u3002</p> </li> <li> <p>\u4e8b\u52a1B: <code>UPDATE products SET name = 'B' WHERE id = 5;</code>     \u4e8b\u52a1B\u4e5f\u60f3\u6267\u884c\u540c\u6837\u7684\u64cd\u4f5c\uff0c\u5b83\u4e5f\u9700\u8981\u5728\u540c\u4e00\u4e2a\u95f4\u9699\u4e0a\u52a0\u95f4\u9699\u9501\u3002     \u7531\u4e8e\u95f4\u9699\u9501\u4e4b\u95f4\u662f\u4e92\u76f8\u517c\u5bb9\u7684\uff0c\u4e8b\u52a1B\u53ef\u4ee5\u6210\u529f\u5730\u5728\u540c\u4e00\u4e2a\u95f4\u9699\u4e0a\u52a0\u4e0a\u81ea\u5df1\u7684\u95f4\u9699\u9501\u3002\u6b64\u65f6\uff0c\u4e8b\u52a1A\u548c\u4e8b\u52a1B\u90fd\u6301\u6709\u4e86\u540c\u4e00\u4e2a\u95f4\u9699\u7684\u9501\u3002</p> </li> <li> <p>\u6b7b\u9501\u53d1\u751f:     \u73b0\u5728\uff0c\u4e8b\u52a1A\u60f3\u63d2\u5165\u4e00\u6761<code>id=5</code>\u7684\u8bb0\u5f55\uff1a<code>INSERT INTO products (id, name) VALUES (5, 'A');</code>     \u8fd9\u4e2a\u63d2\u5165\u64cd\u4f5c\u9700\u8981\u83b7\u53d6\u4e00\u4e2a\u201c\u63d2\u5165\u610f\u5411\u9501\u201d\uff0c\u4f46\u662f\u8fd9\u4e2a\u63d2\u5165\u52a8\u4f5c\u88ab\u4e8b\u52a1B\u6301\u6709\u7684\u95f4\u9699\u9501\u963b\u585e\u4e86\u3002\u6240\u4ee5\u4e8b\u52a1A\u5f00\u59cb\u7b49\u5f85\u4e8b\u52a1B\u3002     \u540c\u65f6\uff0c\u4e8b\u52a1B\u4e5f\u60f3\u63d2\u5165\u4e00\u6761<code>id=5</code>\u7684\u8bb0\u5f55\uff1a<code>INSERT INTO products (id, name) VALUES (5, 'B');</code>     \u8fd9\u4e2a\u63d2\u5165\u52a8\u4f5c\u540c\u6837\u88ab\u4e8b\u52a1A\u6301\u6709\u7684\u95f4\u9699\u9501\u963b\u585e\u4e86\u3002\u6240\u4ee5\u4e8b\u52a1B\u5f00\u59cb\u7b49\u5f85\u4e8b\u52a1A\u3002</p> </li> </ul> <p>\u4e8e\u662f\uff0c\u4e8b\u52a1A\u7b49\u5f85\u4e8b\u52a1B\uff0c\u4e8b\u52a1B\u7b49\u5f85\u4e8b\u52a1A\uff0c\u6b7b\u9501\u5f62\u6210\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E9%97%B4%E9%9A%99%E9%94%81%E4%BB%8B%E7%BB%8D/#_4","title":"\u5982\u679c\u9501\u4f4f\u5f88\u5927\u8303\u56f4\u7684\u95f4\u9699\uff0c\u600e\u4e48\u89e3\u51b3\u6027\u80fd\u4e0a\u7684\u95ee\u9898\uff1f","text":"<p>\u5f53\u4e00\u4e2a\u67e5\u8be2\u6761\u4ef6\u6ca1\u6709\u547d\u4e2d\u7d22\u5f15\uff0c\u6216\u8005\u7d22\u5f15\u9009\u62e9\u6027\u5f88\u5dee\u65f6\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u626b\u63cf\u5927\u91cf\u8bb0\u5f55\u5e76\u9501\u5b9a\u4e00\u4e2a\u975e\u5e38\u5927\u7684\u95f4\u9699\uff0c\u8fd9\u4f1a\u4e25\u91cd\u5f71\u54cd\u5e76\u53d1\u6027\u80fd\u3002</p> <p>\u89e3\u51b3\u65b9\u6cd5\u4e3b\u8981\u6709\u4ee5\u4e0b\u51e0\u79cd\uff1a</p> <ol> <li> <p>\u4f18\u5316SQL\uff0c\u4f7f\u7528\u7cbe\u51c6\u7d22\u5f15\uff1a\u8fd9\u662f\u6700\u6839\u672c\u7684\u89e3\u51b3\u65b9\u6cd5\u3002\u786e\u4fdd\u4f60\u7684\u67e5\u8be2\u6761\u4ef6\u80fd\u591f\u7cbe\u786e\u5730\u547d\u4e2d\u4e00\u4e2a\u9ad8\u9009\u62e9\u6027\u7684\u7d22\u5f15\u3002\u6bd4\u5982\uff0c\u5982\u679c<code>WHERE</code>\u6761\u4ef6\u662f\u8303\u56f4\u67e5\u8be2\uff0c\u5c3d\u91cf\u7f29\u5c0f\u8303\u56f4\uff1b\u5982\u679c\u80fd\u7528\u552f\u4e00\u7d22\u5f15\u5b9a\u4f4d\uff0c\u5c31\u4e0d\u8981\u7528\u666e\u901a\u7d22\u5f15\u3002</p> </li> <li> <p>\u6309\u9700\u8c03\u6574\u4e1a\u52a1\u903b\u8f91\uff1a\u5982\u679c\u4e1a\u52a1\u4e0a\u65e0\u6cd5\u907f\u514d\u5927\u8303\u56f4\u7684\u9501\u5b9a\uff0c\u53ef\u4ee5\u8003\u8651\u5c06\u5927\u7684\u4e8b\u52a1\u62c6\u5206\u6210\u591a\u4e2a\u5c0f\u7684\u4e8b\u52a1\uff0c\u5c3d\u5feb\u63d0\u4ea4\uff0c\u4ee5\u7f29\u77ed\u9501\u7684\u6301\u6709\u65f6\u95f4\u3002</p> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E9%97%B4%E9%9A%99%E9%94%81%E4%BB%8B%E7%BB%8D/#_5","title":"\u600e\u4e48\u89e3\u51b3\u95f4\u9699\u9501\u4e4b\u95f4\u7684\u9501\u51b2\u7a81\uff1f","text":"<ol> <li> <p>\u4fdd\u6301\u4e00\u81f4\u7684\u52a0\u9501\u987a\u5e8f\uff1a\u786e\u4fdd\u6240\u6709\u5e76\u53d1\u7684\u4e8b\u52a1\u90fd\u4ee5\u76f8\u540c\u7684\u987a\u5e8f\u6765\u83b7\u53d6\u9501\u3002\u6bd4\u5982\uff0c\u603b\u662f\u5148\u66f4\u65b0<code>id</code>\u5c0f\u7684\u8bb0\u5f55\uff0c\u518d\u66f4\u65b0<code>id</code>\u5927\u7684\u8bb0\u5f55\u3002\u8fd9\u53ef\u4ee5\u4ece\u4e1a\u52a1\u903b\u8f91\u5c42\u9762\u89c4\u907f\u6b7b\u9501\u3002</p> </li> <li> <p>\u51cf\u5c11\u9501\u7684\u8303\u56f4\u548c\u6301\u6709\u65f6\u95f4\uff1a     \u5c3d\u91cf\u4e0d\u8981\u5728\u4e8b\u52a1\u4e2d\u6267\u884c\u8017\u65f6\u7684\u975eDB\u64cd\u4f5c\u3002     \u5c06<code>UPDATE</code>\u3001<code>DELETE</code>\u7b49\u52a0\u9501\u64cd\u4f5c\u5c3d\u53ef\u80fd\u5730\u653e\u5728\u4e8b\u52a1\u7684\u672b\u5c3e\u3002</p> </li> <li> <p>\u5f00\u542f\u6b7b\u9501\u68c0\u6d4b\u548c\u8bbe\u7f6e\u9501\u7b49\u5f85\u8d85\u65f6\uff1a     InnoDB\u9ed8\u8ba4\u5f00\u542f\u4e86\u6b7b\u9501\u68c0\u6d4b\uff08<code>innodb_deadlock_detect</code>\uff09\uff0c\u5f53\u68c0\u6d4b\u5230\u6b7b\u9501\u65f6\uff0c\u5b83\u4f1a\u81ea\u52a8\u56de\u6eda\u5176\u4e2d\u4e00\u4e2a\u4ee3\u4ef7\u8f83\u5c0f\u7684\u4e8b\u52a1\uff0c\u8ba9\u53e6\u4e00\u4e2a\u4e8b\u52a1\u7ee7\u7eed\u6267\u884c\u3002     \u8bbe\u7f6e\u4e00\u4e2a\u5408\u7406\u7684\u9501\u7b49\u5f85\u8d85\u65f6\u65f6\u95f4\uff08<code>innodb_lock_wait_timeout</code>\uff09\u3002\u5982\u679c\u4e00\u4e2a\u4e8b\u52a1\u7b49\u5f85\u9501\u7684\u65f6\u95f4\u8d85\u8fc7\u8fd9\u4e2a\u9608\u503c\uff0c\u5b83\u4f1a\u81ea\u52a8\u653e\u5f03\u5e76\u56de\u6eda\u3002\u8fd9\u662f\u4e00\u79cd\u515c\u5e95\u673a\u5236\uff0c\u53ef\u4ee5\u9632\u6b62\u7ebf\u7a0b\u88ab\u65e0\u9650\u671f\u5730\u6302\u8d77\u3002</p> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E9%99%A4%E4%BA%86%E5%8F%82%E6%95%B0%E5%8C%96%E6%9F%A5%E8%AF%A2%EF%BC%8C%E8%BF%98%E6%9C%89%E5%93%AA%E4%BA%9B%E6%9C%89%E6%95%88%E9%98%B2%E6%AD%A2SQL%E6%B3%A8%E5%85%A5%E7%9A%84%E6%89%8B%E6%AE%B5/","title":"\u9664\u4e86\u53c2\u6570\u5316\u67e5\u8be2\uff0c\u8fd8\u6709\u54ea\u4e9b\u6709\u6548\u9632\u6b62SQL\u6ce8\u5165\u7684\u624b\u6bb5","text":"<ol> <li> <p>\u8f93\u5165\u9a8c\u8bc1\u548c\u8fc7\u6ee4\uff1a</p> <ul> <li>\u767d\u540d\u5355\u8fc7\u6ee4\uff1a\u53ea\u5141\u8bb8\u5df2\u77e5\u5b89\u5168\u548c\u9884\u671f\u7684\u8f93\u5165\uff0c\u62d2\u7edd\u6240\u6709\u5176\u4ed6\u8f93\u5165\u3002\u4f8b\u5982\uff0c\u5982\u679c\u67d0\u4e2a\u5b57\u6bb5\u53ea\u63a5\u53d7\u6570\u5b57\uff0c\u5c31\u53ea\u5141\u8bb8\u6570\u5b57\u8f93\u5165\u3002</li> <li>\u6570\u636e\u7c7b\u578b\u68c0\u67e5\uff1a\u786e\u4fdd\u7528\u6237\u8f93\u5165\u7684\u6570\u636e\u7c7b\u578b\u4e0e\u9884\u671f\u7684\u6570\u636e\u5e93\u5b57\u6bb5\u7c7b\u578b\u5339\u914d\u3002</li> <li>\u957f\u5ea6\u6821\u9a8c\uff1a\u9650\u5236\u8f93\u5165\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff0c\u9632\u6b62\u8fc7\u957f\u7684\u6076\u610f\u8f93\u5165\u3002</li> <li>\u6b63\u5219\u8868\u8fbe\u5f0f\uff1a\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u6765\u9a8c\u8bc1\u8f93\u5165\u7684\u683c\u5f0f\uff0c\u4f8b\u5982\u90ae\u7bb1\u3001\u7535\u8bdd\u53f7\u7801\u7b49\u3002</li> <li>\u8f6c\u4e49\u7279\u6b8a\u5b57\u7b26\uff1a\u5bf9\u53ef\u80fd\u88ab\u89e3\u91ca\u4e3aSQL\u547d\u4ee4\u7684\u7279\u6b8a\u5b57\u7b26\uff08\u5982\u5355\u5f15\u53f7\u3001\u53cc\u5f15\u53f7\u3001\u53cd\u659c\u6760\u7b49\uff09\u8fdb\u884c\u8f6c\u4e49\u5904\u7406\uff0c\u4f7f\u5176\u6210\u4e3a\u666e\u901a\u5b57\u7b26\u4e32\u7684\u4e00\u90e8\u5206\uff0c\u800c\u4e0d\u662fSQL\u4ee3\u7801\u3002</li> </ul> </li> <li> <p>\u6700\u5c0f\u6743\u9650\u539f\u5219\uff1a</p> <ul> <li>\u6570\u636e\u5e93\u7528\u6237\u5e94\u8be5\u53ea\u62e5\u6709\u6267\u884c\u4ed6\u4eec\u9700\u8981\u6267\u884c\u7684\u64cd\u4f5c\u6240\u9700\u7684\u6700\u5c0f\u6743\u9650\u3002\u4f8b\u5982\uff0c\u4e00\u4e2aWeb\u5e94\u7528\u7684\u7528\u6237\u4e0d\u5e94\u8be5\u62e5\u6709DROP TABLE\u6216ALTER TABLE\u7b49\u6570\u636e\u5e93\u7ba1\u7406\u6743\u9650\u3002\u8fd9\u6837\uff0c\u5373\u4f7f\u653b\u51fb\u8005\u6210\u529f\u6ce8\u5165\u6076\u610fSQL\u4ee3\u7801\uff0c\u4ed6\u4eec\u4e5f\u53ea\u80fd\u8bbf\u95ee\u548c\u4fee\u6539\u53d7\u9650\u5236\u7684\u6570\u636e\u3002</li> </ul> </li> <li> <p>\u4f7f\u7528\u5b58\u50a8\u8fc7\u7a0b\uff08Stored Procedures\uff09\uff1a</p> <ul> <li>\u5728\u6570\u636e\u5e93\u4e2d\u9884\u7f16\u8bd1\u5b58\u50a8\u8fc7\u7a0b\uff0c\u5e76\u786e\u4fdd\u5b58\u50a8\u8fc7\u7a0b\u5185\u90e8\u4f7f\u7528\u53c2\u6570\u5316\u67e5\u8be2\u6765\u5904\u7406\u8f93\u5165\u3002\u5982\u679c\u5b58\u50a8\u8fc7\u7a0b\u5185\u90e8\u4ecd\u7136\u901a\u8fc7\u62fc\u63a5\u5b57\u7b26\u4e32\u6765\u6784\u5efaSQL\u8bed\u53e5\uff0c\u90a3\u4e48\u4f9d\u7136\u5b58\u5728SQL\u6ce8\u5165\u7684\u98ce\u9669\u3002</li> </ul> </li> <li> <p>\u907f\u514d\u52a8\u6001\u62fc\u63a5SQL\u8bed\u53e5\uff1a</p> <ul> <li>\u5c3d\u53ef\u80fd\u907f\u514d\u5728\u5e94\u7528\u7a0b\u5e8f\u4ee3\u7801\u4e2d\u76f4\u63a5\u4f7f\u7528\u5b57\u7b26\u4e32\u62fc\u63a5\u7684\u65b9\u5f0f\u6784\u5efaSQL\u8bed\u53e5\u3002\u5982\u679c\u5fc5\u987b\u52a8\u6001\u6784\u5efaSQL\uff0c\u52a1\u5fc5\u5bf9\u6240\u6709\u7528\u6237\u8f93\u5165\u8fdb\u884c\u4e25\u683c\u7684\u9a8c\u8bc1\u548c\u8f6c\u4e49\u3002</li> </ul> </li> <li> <p>\u4f7f\u7528ORM\u6846\u67b6\uff1a</p> <ul> <li>\u5bf9\u8c61\u5173\u7cfb\u6620\u5c04\uff08ORM\uff09\u6846\u67b6\uff08\u5982Hibernate\u3001MyBatis\u7b49\uff09\u901a\u5e38\u5185\u7f6e\u4e86\u53c2\u6570\u5316\u67e5\u8be2\u7684\u673a\u5236\uff0c\u53ef\u4ee5\u6709\u6548\u9632\u6b62SQL\u6ce8\u5165\u3002\u7136\u800c\uff0c\u5728\u4f7f\u7528ORM\u6846\u67b6\u65f6\uff0c\u4ecd\u9700\u6ce8\u610f\u5176\u63d0\u4f9b\u7684\u52a8\u6001SQL\u529f\u80fd\uff08\u5982MyBatis\u7684<code>$</code>\u7b26\u53f7\uff09\uff0c\u4e0d\u5f53\u4f7f\u7528\u4ecd\u53ef\u80fd\u5f15\u5165\u98ce\u9669\u3002</li> </ul> </li> <li> <p>\u5b89\u5168\u7f16\u7a0b\u5b9e\u8df5\uff1a</p> <ul> <li>\u5f00\u53d1\u4eba\u5458\u5e94\u9075\u5b88\u5b89\u5168\u7f16\u7a0b\u89c4\u8303\uff0c\u4e0d\u4fe1\u4efb\u4efb\u4f55\u7528\u6237\u8f93\u5165\u3002</li> <li>\u5b9a\u671f\u5bf9\u4ee3\u7801\u8fdb\u884c\u5b89\u5168\u5ba1\u8ba1\u548c\u6f0f\u6d1e\u626b\u63cf\u3002</li> </ul> </li> <li> <p>Web\u5e94\u7528\u9632\u706b\u5899\uff08WAF\uff09\u548c\u5165\u4fb5\u68c0\u6d4b\u7cfb\u7edf\uff08IDS\uff09\uff1a</p> <ul> <li>\u5728\u7f51\u7edc\u5c42\u9762\u90e8\u7f72WAF\u548cIDS\u53ef\u4ee5\u5e2e\u52a9\u68c0\u6d4b\u548c\u963b\u6b62\u5e38\u89c1\u7684Web\u653b\u51fb\uff0c\u5305\u62ecSQL\u6ce8\u5165\uff0c\u5373\u4f7f\u5e94\u7528\u7a0b\u5e8f\u4ee3\u7801\u5b58\u5728\u6f0f\u6d1e\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%95%B0%E6%8D%AE%E5%BA%93/%E9%99%A4%E4%BA%86%E5%8F%82%E6%95%B0%E5%8C%96%E6%9F%A5%E8%AF%A2%EF%BC%8C%E8%BF%98%E6%9C%89%E5%93%AA%E4%BA%9B%E6%9C%89%E6%95%88%E9%98%B2%E6%AD%A2SQL%E6%B3%A8%E5%85%A5%E7%9A%84%E6%89%8B%E6%AE%B5/#mybatis","title":"MyBatis\u4e2d<code>#</code>\u548c<code>$</code>\u7684\u533a\u522b","text":"<p>\u5728MyBatis\u4e2d\uff0c<code>#{}</code>\u548c<code>${}</code>\u662f\u7528\u4e8e\u5728SQL\u6620\u5c04\u6587\u4ef6\u4e2d\u5904\u7406\u53c2\u6570\u7684\u4e24\u79cd\u4e0d\u540c\u65b9\u5f0f\uff0c\u5b83\u4eec\u5728\u9632\u6b62SQL\u6ce8\u5165\u65b9\u9762\u7684\u8868\u73b0\u622a\u7136\u4e0d\u540c\uff1a</p> <ol> <li> <p><code>#{}</code>\uff08\u53c2\u6570\u5360\u4f4d\u7b26\uff09\uff1a</p> <ul> <li>\u539f\u7406\uff1a<code>#{}</code>\u4f1a\u5c06\u4f20\u5165\u7684\u53c2\u6570\u89c6\u4e3a\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5e76\u5728\u751f\u6210\u7684SQL\u8bed\u53e5\u4e2d\u81ea\u52a8\u4e3a\u5176\u6dfb\u52a0\u5f15\u53f7\u3002 \u5b83\u4f1a\u4f7f\u7528JDBC\u7684PreparedStatement\uff08\u9884\u7f16\u8bd1\u8bed\u53e5\uff09\u673a\u5236\u3002</li> <li>\u5b89\u5168\u6027\uff1a<code>#{}</code>\u80fd\u591f\u5f88\u5927\u7a0b\u5ea6\u4e0a\u9632\u6b62SQL\u6ce8\u5165\u3002\u5f53MyBatis\u9047\u5230<code>#{}</code>\u65f6\uff0c\u5b83\u4f1a\u9884\u7f16\u8bd1SQL\u8bed\u53e5\uff0c\u5c06<code>#{}</code>\u66ff\u6362\u4e3a<code>?</code>\u5360\u4f4d\u7b26\uff0c\u7136\u540e\u5c06\u5b9e\u9645\u53c2\u6570\u503c\u4f5c\u4e3a\u72ec\u7acb\u7684\u53c2\u6570\u4f20\u9012\u7ed9\u6570\u636e\u5e93\u3002\u6570\u636e\u5e93\u4f1a\u5c06\u53c2\u6570\u503c\u89c6\u4e3a\u6570\u636e\uff0c\u800c\u4e0d\u662f\u53ef\u6267\u884c\u7684SQL\u4ee3\u7801\u7684\u4e00\u90e8\u5206\u3002</li> <li>\u793a\u4f8b\uff1a\u5982\u679c\u4f20\u5165<code>username= 'admin' OR '1'='1'</code>\uff0c\u4f7f\u7528<code>WHERE username = #{username}</code>\uff0c\u6700\u7ec8\u6267\u884c\u7684SQL\u53ef\u80fd\u662f<code>WHERE username = 'admin'' OR ''1''=''1'</code>\uff0c\u6570\u636e\u5e93\u4f1a\u5c06\u5176\u4f5c\u4e3a\u4e00\u4e2a\u666e\u901a\u7684\u5b57\u7b26\u4e32\u503c\u8fdb\u884c\u5339\u914d\uff0c\u800c\u4e0d\u662f\u6267\u884c\u6076\u610f\u7684OR\u6761\u4ef6\u3002</li> </ul> </li> <li> <p><code>${}</code>\uff08\u5b57\u7b26\u4e32\u66ff\u6362\uff09\uff1a</p> <ul> <li>\u539f\u7406\uff1a<code>${}</code>\u4f1a\u5c06\u4f20\u5165\u7684\u53c2\u6570\u76f4\u63a5\u62fc\u63a5\u5230SQL\u8bed\u53e5\u4e2d\uff0c\u8fdb\u884c\u7b80\u5355\u7684\u5b57\u7b26\u4e32\u66ff\u6362\uff0c\u4e0d\u4f1a\u8fdb\u884c\u9884\u7f16\u8bd1\u6216\u53c2\u6570\u5904\u7406\uff0c\u4e5f\u4e0d\u4f1a\u81ea\u52a8\u6dfb\u52a0\u5f15\u53f7\u3002</li> <li>\u5b89\u5168\u6027\uff1a<code>${}</code>\u65e0\u6cd5\u9632\u6b62SQL\u6ce8\u5165\u3002\u56e0\u4e3a\u5b83\u76f4\u63a5\u5c06\u53c2\u6570\u503c\u539f\u6837\u5d4c\u5165SQL\u8bed\u53e5\uff0c\u5982\u679c\u53c2\u6570\u503c\u5305\u542b\u6076\u610fSQL\u4ee3\u7801\uff0c\u8fd9\u4e9b\u4ee3\u7801\u5c06\u88ab\u6570\u636e\u5e93\u76f4\u63a5\u6267\u884c\u3002</li> <li>\u7528\u9014\uff1a\u4e3b\u8981\u7528\u4e8e\u52a8\u6001\u5730\u66ff\u6362SQL\u8bed\u53e5\u4e2d\u7684\u6570\u636e\u5e93\u5bf9\u8c61\uff0c\u4f8b\u5982\u8868\u540d\u3001\u5217\u540d\u3001\u6392\u5e8f\u5b57\u6bb5\uff08<code>ORDER BY ${columnName}</code>\uff09\u7b49\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u90e8\u5206\u4e0d\u80fd\u4f5c\u4e3a\u9884\u7f16\u8bd1\u53c2\u6570\u3002</li> <li>\u793a\u4f8b\uff1a\u5982\u679c\u4f20\u5165<code>username= 'admin' OR '1'='1'</code>\uff0c\u4f7f\u7528<code>WHERE username = ${username}</code>\uff0c\u6700\u7ec8\u6267\u884c\u7684SQL\u53ef\u80fd\u662f<code>WHERE username = admin' OR '1'='1'</code>\uff0c\u8fd9\u53ef\u80fd\u5bfc\u81f4SQL\u6ce8\u5165\u653b\u51fb\uff0c\u7ed5\u8fc7\u8eab\u4efd\u9a8c\u8bc1\u3002</li> </ul> </li> </ol> <p>\u603b\u7ed3\uff1a</p> <ul> <li>\u63a8\u8350\u4f7f\u7528<code>#{}</code>\uff1a\u5728MyBatis\u4e2d\uff0c\u5e94\u59cb\u7ec8\u4f18\u5148\u4f7f\u7528<code>#{}</code>\u6765\u5904\u7406\u6240\u6709\u7528\u6237\u8f93\u5165\u7684\u53c2\u6570\uff0c\u4ee5\u786e\u4fddSQL\u8bed\u53e5\u7684\u5b89\u5168\u6027\uff0c\u9632\u6b62SQL\u6ce8\u5165\u3002</li> <li>\u8c28\u614e\u4f7f\u7528<code>${}</code>\uff1a\u5982\u679c\u786e\u5b9e\u9700\u8981\u4f7f\u7528<code>${}</code>\u6765\u52a8\u6001\u66ff\u6362\u8868\u540d\u3001\u5217\u540d\u7b49\u6570\u636e\u5e93\u5bf9\u8c61\uff0c\u5fc5\u987b\u5728\u5e94\u7528\u7a0b\u5e8f\u5c42\u9762\u624b\u52a8\u5bf9\u8fd9\u4e9b\u53c2\u6570\u8fdb\u884c\u4e25\u683c\u7684\u6821\u9a8c\u548c\u8fc7\u6ee4\uff0c\u4ee5\u9632\u6b62\u6f5c\u5728\u7684SQL\u6ce8\u5165\u98ce\u9669\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/RBAC%E6%A8%A1%E5%9E%8B%E5%92%8CABAC%E6%A8%A1%E5%9E%8B%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%8C%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB/","title":"RBAC\u6a21\u578b\u548cABAC\u6a21\u578b\u662f\u4ec0\u4e48\uff0c\u6709\u4ec0\u4e48\u533a\u522b","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/RBAC%E6%A8%A1%E5%9E%8B%E5%92%8CABAC%E6%A8%A1%E5%9E%8B%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%8C%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB/#rbac-role-based-access-control","title":"RBAC (Role-Based Access Control) \u57fa\u4e8e\u89d2\u8272\u7684\u8bbf\u95ee\u63a7\u5236","text":"<p>RBAC\u7684\u6838\u5fc3\u601d\u60f3\u662f\uff0c\u8bbf\u95ee\u6743\u9650\u4e0d\u76f4\u63a5\u6388\u4e88\u7528\u6237\uff0c\u800c\u662f\u6388\u4e88\u201c\u89d2\u8272\u201d\uff08Role\uff09\u3002\u7136\u540e\uff0c\u5c06\u7528\u6237\u5206\u914d\u5230\u76f8\u5e94\u7684\u89d2\u8272\u4e2d\u3002\u8fd9\u6837\uff0c\u7528\u6237\u5c31\u901a\u8fc7\u5176\u6240\u5c5e\u7684\u89d2\u8272\uff0c\u95f4\u63a5\u5730\u62e5\u6709\u4e86\u8be5\u89d2\u8272\u6240\u5305\u542b\u7684\u6240\u6709\u6743\u9650\u3002</p> <p>\u5b83\u7684\u5173\u7cfb\u53ef\u4ee5\u7b80\u5316\u4e3a\uff1a\u7528\u6237-\u89d2\u8272-\u6743\u9650 (Who -&gt; What roles -&gt; What permissions)\u3002\u6743\u9650\u7684\u96c6\u5408\u662f\u9759\u6001\u5730\u7ed1\u5b9a\u5728\u89d2\u8272\u4e0a\u7684\u3002</p> <p>\u8ba9\u6211\u4eec\u4ee5\u4e00\u4e2a\u5e38\u89c1\u7684\u5185\u5bb9\u7ba1\u7406\u7cfb\u7edf\uff08CMS\uff09\u4e3a\u4f8b\uff1a</p> <ul> <li> <p>\u7528\u6237 (Users): \u5f20\u4e09\u3001\u674e\u56db\u3001\u738b\u4e94</p> </li> <li> <p>\u89d2\u8272 (Roles):</p> <ul> <li> <p>\u7ba1\u7406\u5458 (Admin): \u62e5\u6709\u7cfb\u7edf\u7684\u6240\u6709\u6743\u9650\u3002</p> </li> <li> <p>\u7f16\u8f91 (Editor): \u53ef\u4ee5\u521b\u5efa\u3001\u4fee\u6539\u548c\u53d1\u5e03\u6587\u7ae0\u3002</p> </li> <li> <p>\u64b0\u7a3f\u4eba (Contributor): \u53ea\u80fd\u521b\u5efa\u548c\u4fee\u6539\u81ea\u5df1\u7684\u6587\u7ae0\u8349\u7a3f\uff0c\u4e0d\u80fd\u53d1\u5e03\u3002</p> </li> </ul> </li> <li> <p>\u6743\u9650 (Permissions):</p> <ul> <li> <p>post:create (\u521b\u5efa\u6587\u7ae0)</p> </li> <li> <p>post:edit (\u4fee\u6539\u6587\u7ae0)</p> </li> <li> <p>post:publish (\u53d1\u5e03\u6587\u7ae0)</p> </li> <li> <p>user:manage (\u7ba1\u7406\u7528\u6237)</p> </li> </ul> </li> </ul> <p>\u5728\u8fd9\u4e2a\u6a21\u578b\u4e2d\uff0c\u6211\u4eec\u7684\u6388\u6743\u903b\u8f91\u5982\u4e0b\uff1a</p> <ol> <li> <p>\u6211\u4eec\u5c06\u6743\u9650\u5206\u914d\u7ed9\u89d2\u8272\uff1a</p> <ul> <li> <p>\u7ba1\u7406\u5458\u89d2\u8272 \u62e5\u6709 post:create, post:edit, post:publish, user:manage \u6743\u9650\u3002</p> </li> <li> <p>\u7f16\u8f91\u89d2\u8272 \u62e5\u6709 post:create, post:edit, post:publish \u6743\u9650\u3002</p> </li> <li> <p>\u64b0\u7a3f\u4eba\u89d2\u8272 \u62e5\u6709 post:create, post:edit \u6743\u9650\u3002</p> </li> </ul> </li> <li> <p>\u6211\u4eec\u5c06\u7528\u6237\u5206\u914d\u7ed9\u89d2\u8272\uff1a</p> <ul> <li> <p>\u5f20\u4e09\u662f\u7ba1\u7406\u5458\u3002</p> </li> <li> <p>\u674e\u56db\u662f\u7f16\u8f91\u3002</p> </li> <li> <p>\u738b\u4e94\u662f\u64b0\u7a3f\u4eba\u3002</p> </li> </ul> </li> </ol> <p>\u73b0\u5728\uff0c\u5f53\u738b\u4e94\u5c1d\u8bd5\u53d1\u5e03\u6587\u7ae0\u65f6\uff0c\u7cfb\u7edf\u4f1a\u68c0\u67e5\uff1a\u738b\u4e94\u662f\u201c\u64b0\u7a3f\u4eba\u201d\u89d2\u8272 -&gt; \u201c\u64b0\u7a3f\u4eba\u201d\u89d2\u8272\u6ca1\u6709 post:publish \u6743\u9650 -&gt; \u62d2\u7edd\u64cd\u4f5c\u3002</p> <p>RBAC\u7684\u4f18\u70b9\u662f\u6a21\u578b\u6e05\u6670\uff0c\u6613\u4e8e\u7406\u89e3\u548c\u7ba1\u7406\u3002\u5728\u7528\u6237\u548c\u6743\u9650\u6570\u91cf\u4f17\u591a\u65f6\uff0c\u901a\u8fc7\u89d2\u8272\u8fd9\u4e2a\u4e2d\u95f4\u5c42\uff0c\u6781\u5927\u5730\u7b80\u5316\u4e86\u6388\u6743\u7ba1\u7406\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/RBAC%E6%A8%A1%E5%9E%8B%E5%92%8CABAC%E6%A8%A1%E5%9E%8B%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%8C%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB/#abac-attribute-based-access-control","title":"ABAC (Attribute-Based Access Control) \u57fa\u4e8e\u5c5e\u6027\u7684\u8bbf\u95ee\u63a7\u5236","text":"<p>ABAC\u662f\u4e00\u79cd\u66f4\u4e3a\u7075\u6d3b\u548c\u7cbe\u7ec6\u7684\u8bbf\u95ee\u63a7\u5236\u6a21\u578b\u3002\u5b83\u7684\u6838\u5fc3\u601d\u60f3\u662f\u57fa\u4e8e\u4e00\u7cfb\u5217\u201c\u5c5e\u6027\u201d\uff08Attribute\uff09\u6765\u52a8\u6001\u5730\u51b3\u5b9a\u662f\u5426\u6388\u4e88\u8bbf\u95ee\u6743\u9650\u3002\u8fd9\u4e9b\u5c5e\u6027\u53ef\u4ee5\u6765\u81ea\u4efb\u4f55\u5730\u65b9\u3002</p> <p>\u901a\u5e38\uff0cABAC\u7684\u51b3\u7b56\u903b\u8f91\u57fa\u4e8e\u4e00\u4e2a\u201c\u7b56\u7565\u201d\uff08Policy\uff09\uff0c\u8fd9\u4e2a\u7b56\u7565\u4f1a\u8bc4\u4f30\u4ee5\u4e0b\u56db\u7c7b\u5c5e\u6027\uff1a</p> <ul> <li> <p>\u4e3b\u4f53\u5c5e\u6027 (Subject attributes): \u5173\u4e8e\u53d1\u8d77\u8bf7\u6c42\u7684\u7528\u6237\u7684\u4fe1\u606f\uff0c\u5982\u5e74\u9f84\u3001\u90e8\u95e8\u3001\u5b89\u5168\u7b49\u7ea7\u3001\u804c\u4f4d\u7b49\u3002</p> </li> <li> <p>\u5ba2\u4f53/\u8d44\u6e90\u5c5e\u6027 (Object/Resource attributes): \u5173\u4e8e\u88ab\u8bbf\u95ee\u8d44\u6e90\u7684\u4fe1\u606f\uff0c\u5982\u6587\u4ef6\u7c7b\u578b\u3001\u654f\u611f\u5ea6\u3001\u6240\u5c5e\u9879\u76ee\u3001\u521b\u5efa\u65f6\u95f4\u7b49\u3002</p> </li> <li> <p>\u64cd\u4f5c\u5c5e\u6027 (Action attributes): \u5173\u4e8e\u6b63\u5728\u6267\u884c\u7684\u64cd\u4f5c\u7684\u4fe1\u606f\uff0c\u5982\u8bfb\u53d6\u3001\u5199\u5165\u3001\u5220\u9664\u3001\u5ba1\u6279\u7b49\u3002</p> </li> <li> <p>\u73af\u5883\u5c5e\u6027 (Environment attributes): \u5173\u4e8e\u8bbf\u95ee\u53d1\u751f\u65f6\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\uff0c\u5982\u65f6\u95f4\u3001\u5730\u70b9\uff08IP\u5730\u5740\uff09\u3001\u8bbe\u5907\u7c7b\u578b\u7b49\u3002</p> </li> </ul> <p>\u5b83\u7684\u51b3\u7b56\u53ef\u4ee5\u8868\u8ff0\u4e3a\uff1a\u5f53\u4e3b\u4f53\u7684\u5c5e\u6027\u3001\u5ba2\u4f53\u7684\u5c5e\u6027\u3001\u64cd\u4f5c\u548c\u73af\u5883\u5c5e\u6027\u6ee1\u8db3\u67d0\u4e2a\u7b56\u7565\u65f6\uff0c\u5141\u8bb8\u6216\u62d2\u7edd\u8bbf\u95ee\u3002</p> <p>\u6211\u4eec\u4ee5\u4e00\u4e2a\u4f01\u4e1a\u62a5\u9500\u7cfb\u7edf\u4e3a\u4f8b\uff0c\u8fd9\u4e2a\u573a\u666f\u7528RBAC\u4f1a\u975e\u5e38\u590d\u6742\uff1a</p> <p>\u5047\u8bbe\u6709\u4e00\u4e2a\u7b56\u7565 (Policy)\uff1a \u201c\u5141\u8bb8\u4e00\u4e2a\u7528\u6237\u5ba1\u6279\u62a5\u9500\u5355\uff0c\u5f53\u4e14\u4ec5\u5f53\uff1a</p> <ol> <li> <p>\u8be5\u7528\u6237\u7684\u89d2\u8272\u662f\u2018\u7ecf\u7406\u2019 (\u4e3b\u4f53\u5c5e\u6027)</p> </li> <li> <p>\u5e76\u4e14\u62a5\u9500\u5355\u7684\u91d1\u989d\u5c0f\u4e8e\u8be5\u7528\u6237\u81ea\u8eab\u7684\u2018\u5ba1\u6279\u989d\u5ea6\u2019\u5c5e\u6027 (\u4e3b\u4f53\u5c5e\u6027 vs \u5ba2\u4f53\u5c5e\u6027)</p> </li> <li> <p>\u5e76\u4e14\u62a5\u9500\u5355\u7684\u7c7b\u578b\u4e0d\u662f\u2018\u7279\u6b8a\u62a5\u9500\u2019 (\u5ba2\u4f53\u5c5e\u6027)</p> </li> <li> <p>\u5e76\u4e14\u5f53\u524d\u65f6\u95f4\u662f\u5de5\u4f5c\u65e5\u76849\u70b9\u523018\u70b9 (\u73af\u5883\u5c5e\u6027)\u201d</p> </li> </ol> <p>\u5728\u8fd9\u4e2a\u6a21\u578b\u4e0b\uff1a</p> <ul> <li> <p>\u7528\u6237A: \u89d2\u8272\u662f\u7ecf\u7406\uff0c\u5ba1\u6279\u989d\u5ea6\u662f5000\u5143\u3002</p> </li> <li> <p>\u7528\u6237B: \u89d2\u8272\u662f\u7ecf\u7406\uff0c\u5ba1\u6279\u989d\u5ea6\u662f10000\u5143\u3002</p> </li> <li> <p>\u62a5\u9500\u5355C: \u91d1\u989d4000\u5143\uff0c\u7c7b\u578b\u662f\u5dee\u65c5\u8d39\u3002</p> </li> <li> <p>\u62a5\u9500\u5355D: \u91d1\u989d8000\u5143\uff0c\u7c7b\u578b\u662f\u5dee\u65c5\u8d39\u3002</p> </li> </ul> <p>\u5f53\u7528\u6237A\u5c1d\u8bd5\u5ba1\u6279\u62a5\u9500\u5355C\u65f6\uff0c\u7cfb\u7edf\u8bc4\u4f30\uff1a</p> <ul> <li> <p>\u89d2\u8272\u662f\u7ecf\u7406\uff1f\u662f\u3002</p> </li> <li> <p>4000 &lt; 5000\uff1f\u662f\u3002</p> </li> <li> <p>\u7c7b\u578b\u4e0d\u662f\u7279\u6b8a\u62a5\u9500\uff1f\u662f\u3002</p> </li> <li> <p>\u5f53\u524d\u662f\u5de5\u4f5c\u65f6\u95f4\uff1f\u662f\u3002</p> </li> <li> <p>\u7ed3\u8bba\uff1a\u5141\u8bb8\u64cd\u4f5c\u3002</p> </li> </ul> <p>\u5f53\u7528\u6237A\u5c1d\u8bd5\u5ba1\u6279\u62a5\u9500\u5355D\u65f6\uff0c\u56e0\u4e3a 8000 \u4e0d\u5c0f\u4e8e 5000\uff0c\u64cd\u4f5c\u5c06\u88ab\u62d2\u7edd\u3002\u800c\u7528\u6237B\u5219\u53ef\u4ee5\u5ba1\u6279\u62a5\u9500\u5355D\u3002</p> <p>\u53ef\u4ee5\u770b\u5230\uff0cABAC\u4e0d\u9700\u8981\u4e3a\u201c5000\u5143\u989d\u5ea6\u7ecf\u7406\u201d\u548c\u201c10000\u5143\u989d\u5ea6\u7ecf\u7406\u201d\u521b\u5efa\u4e24\u4e2a\u4e0d\u540c\u7684\u89d2\u8272\uff0c\u800c\u662f\u901a\u8fc7\u52a8\u6001\u8bc4\u4f30\u5c5e\u6027\u6765\u5b9e\u73b0\u66f4\u7ec6\u7c92\u5ea6\u7684\u63a7\u5236\u3002</p> RBAC (\u57fa\u4e8e\u89d2\u8272\u7684\u8bbf\u95ee\u63a7\u5236) ABAC (\u57fa\u4e8e\u5c5e\u6027\u7684\u8bbf\u95ee\u63a7\u5236) \u6838\u5fc3\u601d\u60f3 \u4ee5\u201c\u89d2\u8272\u201d\u4e3a\u4e2d\u5fc3\uff0c\u6743\u9650\u9759\u6001\u5730\u8d4b\u4e88\u89d2\u8272\u3002 \u4ee5\u201c\u7b56\u7565\u201d\u548c\u201c\u5c5e\u6027\u201d\u4e3a\u4e2d\u5fc3\uff0c\u6743\u9650\u662f\u52a8\u6001\u8ba1\u7b97\u51fa\u6765\u7684\u3002 \u6388\u6743\u7c92\u5ea6 \u8f83\u7c97\u3002\u6743\u9650\u63a7\u5236\u5230\u89d2\u8272\u7ea7\u522b\u3002 \u975e\u5e38\u7cbe\u7ec6\u3002\u53ef\u4ee5\u63a7\u5236\u5230\u6bcf\u4e00\u6b21\u5177\u4f53\u8bbf\u95ee\u7684\u4e0a\u4e0b\u6587\u3002 \u7075\u6d3b\u6027 \u8f83\u4f4e\u3002\u5bf9\u4e8e\u8d85\u51fa\u89d2\u8272\u5b9a\u4e49\u7684\u573a\u666f\uff0c\u9700\u8981\u521b\u5efa\u65b0\u89d2\u8272\uff0c\u53ef\u80fd\u5bfc\u81f4\u201c\u89d2\u8272\u7206\u70b8\u201d\u3002 \u6781\u9ad8\u3002\u53ef\u4ee5\u7ec4\u5408\u65e0\u9650\u7684\u5c5e\u6027\u6765\u5b9a\u4e49\u590d\u6742\u7684\u8bbf\u95ee\u89c4\u5219\uff0c\u65e0\u9700\u4fee\u6539\u4e3b\u4f53\u6216\u5ba2\u4f53\u3002 \u7ba1\u7406\u590d\u6742\u5ea6 \u6982\u5ff5\u7b80\u5355\uff0c\u6613\u4e8e\u4e0a\u624b\u3002\u4f46\u5728\u590d\u6742\u573a\u666f\u4e0b\uff0c\u89d2\u8272\u7ba1\u7406\u4f1a\u53d8\u5f97\u56f0\u96be\u3002 \u521d\u671f\u8bbe\u7f6e\u590d\u6742\uff0c\u9700\u8981\u8bbe\u8ba1\u7b56\u7565\u5f15\u64ce\u548c\u5c5e\u6027\u6765\u6e90\u3002\u4f46\u5bf9\u4e8e\u590d\u6742\u89c4\u5219\uff0c\u957f\u671f\u7ef4\u62a4\u66f4\u6e05\u6670\u3002 \u9002\u7528\u573a\u666f \u9002\u7528\u4e8e\u4f01\u4e1a\u5185\u90e8\u7cfb\u7edf\u3001CMS\u7b49\u6743\u9650\u7ed3\u6784\u7a33\u5b9a\u3001\u5206\u5c42\u660e\u786e\u7684\u573a\u666f\u3002 \u9002\u7528\u4e8e\u91d1\u878d\u3001\u4e91\u8ba1\u7b97\u3001\u7269\u8054\u7f51\u7b49\u9700\u8981\u9ad8\u5ea6\u7075\u6d3b\u3001\u52a8\u6001\u548c\u4e0a\u4e0b\u6587\u611f\u77e5\u6743\u9650\u63a7\u5236\u7684\u573a\u666f\u3002"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E4%BB%8B%E7%BB%8D%E4%B8%80%E4%B8%8B%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8%EF%BC%8C%E4%BB%A5%E5%8F%8A%E4%BC%98%E5%8C%96%E6%8E%AA%E6%96%BD/","title":"\u4ecb\u7ecd\u4e00\u4e0b\u5e03\u9686\u8fc7\u6ee4\u5668\uff0c\u4ee5\u53ca\u4f18\u5316\u63aa\u65bd","text":"<p>\u5e03\u9686\u8fc7\u6ee4\u5668\uff08Bloom Filter\uff09\u662f\u4e00\u79cd\u7a7a\u95f4\u6548\u7387\u6781\u9ad8\u7684\u6982\u7387\u578b\u6570\u636e\u7ed3\u6784\uff0c\u7531Burton Howard Bloom\u57281970\u5e74\u63d0\u51fa\u3002 \u5b83\u88ab\u7528\u6765\u6d4b\u8bd5\u4e00\u4e2a\u5143\u7d20\u662f\u5426\u5728\u4e00\u4e2a\u96c6\u5408\u4e2d\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E4%BB%8B%E7%BB%8D%E4%B8%80%E4%B8%8B%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8%EF%BC%8C%E4%BB%A5%E5%8F%8A%E4%BC%98%E5%8C%96%E6%8E%AA%E6%96%BD/#_1","title":"\u5de5\u4f5c\u539f\u7406","text":"<p>\u5e03\u9686\u8fc7\u6ee4\u5668\u7684\u6838\u5fc3\u662f\u4e00\u4e2a\u5f88\u957f\u7684\u4e8c\u8fdb\u5236\u5411\u91cf\uff08\u4f4d\u6570\u7ec4\uff09\u548c\u4e00\u7cfb\u5217\u968f\u673a\u6620\u5c04\u7684\u54c8\u5e0c\u51fd\u6570\u3002</p> <ul> <li>\u6dfb\u52a0\u5143\u7d20\uff1a\u5f53\u4e00\u4e2a\u5143\u7d20\u88ab\u6dfb\u52a0\u5230\u96c6\u5408\u4e2d\u65f6\uff0c\u4f1a\u7528K\u4e2a\u4e0d\u540c\u7684\u54c8\u5e0c\u51fd\u6570\u5bf9\u8be5\u5143\u7d20\u8fdb\u884c\u54c8\u5e0c\u8ba1\u7b97\uff0c\u5f97\u5230K\u4e2a\u54c8\u5e0c\u503c\u3002\u7136\u540e\uff0c\u5c06\u4f4d\u6570\u7ec4\u4e2d\u8fd9K\u4e2a\u54c8\u5e0c\u503c\u5bf9\u5e94\u7684\u4f4d\u7f6e\u90fd\u7f6e\u4e3a1\u3002</li> <li>\u67e5\u8be2\u5143\u7d20\uff1a\u5f53\u9700\u8981\u67e5\u8be2\u4e00\u4e2a\u5143\u7d20\u662f\u5426\u5b58\u5728\u4e8e\u96c6\u5408\u4e2d\u65f6\uff0c\u540c\u6837\u7528\u8fd9K\u4e2a\u54c8\u5e0c\u51fd\u6570\u5bf9\u8be5\u5143\u7d20\u8fdb\u884c\u8ba1\u7b97\uff0c\u5f97\u5230K\u4e2a\u4f4d\u7f6e\u3002\u63a5\u7740\uff0c\u68c0\u67e5\u4f4d\u6570\u7ec4\u4e2d\u8fd9\u4e9b\u4f4d\u7f6e\u7684\u503c\u3002<ul> <li>\u5982\u679c\u8fd9\u4e9b\u4f4d\u7f6e\u4e2d\uff0c\u53ea\u8981\u6709\u4e00\u4e2a\u662f0\uff0c\u90a3\u4e48\u8be5\u5143\u7d20\u5c31\u4e00\u5b9a\u4e0d\u5b58\u5728\u4e8e\u96c6\u5408\u4e2d\u3002</li> <li>\u5982\u679c\u6240\u6709\u4f4d\u7f6e\u90fd\u4e3a1\uff0c\u90a3\u4e48\u8be5\u5143\u7d20\u53ef\u80fd\u5b58\u5728\u4e8e\u96c6\u5408\u4e2d\u3002</li> </ul> </li> </ul> <p>\u56e0\u4e3a\u4e0d\u540c\u7684\u5143\u7d20\u7ecf\u8fc7\u54c8\u5e0c\u8ba1\u7b97\u540e\uff0c\u53ef\u80fd\u4f1a\u6620\u5c04\u5230\u4f4d\u6570\u7ec4\u7684\u76f8\u540c\u4f4d\u7f6e\u4e0a\u3002 \u6bd4\u5982\uff0c\u5143\u7d20A\u548c\u5143\u7d20B\u53ef\u80fd\u5728\u67d0\u4e2a\u54c8\u5e0c\u51fd\u6570\u8ba1\u7b97\u540e\uff0c\u90fd\u6307\u5411\u4e86\u4f4d\u6570\u7ec4\u7684\u7b2c10\u4e2a\u4f4d\u7f6e\u3002\u5f53\u67e5\u8be2\u4e00\u4e2a\u4ece\u672a\u6dfb\u52a0\u8fc7\u7684\u5143\u7d20C\u65f6\uff0c\u5982\u679c\u5b83\u7ecf\u8fc7\u54c8\u5e0c\u8ba1\u7b97\u540e\u6307\u5411\u7684\u4f4d\u7f6e\u90fd\u6070\u597d\u88ab\u5176\u4ed6\u5143\u7d20\u7f6e\u4e3a\u4e861\uff0c\u90a3\u4e48\u5e03\u9686\u8fc7\u6ee4\u5668\u5c31\u4f1a\u8bef\u5224\uff0c\u8ba4\u4e3a\u5143\u7d20C\u5b58\u5728\u3002</p> <p>\u8fd9\u5c31\u662f\u5e03\u9686\u8fc7\u6ee4\u5668\u7684\u7279\u70b9\uff1a\u5b83\u53ef\u80fd\u4f1a\u53d1\u751f\u8bef\u5224\uff08False Positive\uff09\uff0c\u4f46\u7edd\u4e0d\u4f1a\u6f0f\u5224\uff08False Negative\uff09\u3002 \u5373\uff0c\u5b83\u8bf4\u4e00\u4e2a\u5143\u7d20\u5728\u96c6\u5408\u91cc\uff0c\u8fd9\u4e2a\u5143\u7d20\u4e0d\u4e00\u5b9a\u5728\uff1b\u4f46\u5b83\u8bf4\u4e00\u4e2a\u5143\u7d20\u4e0d\u5728\uff0c\u90a3\u8fd9\u4e2a\u5143\u7d20\u5c31\u80af\u5b9a\u4e0d\u5728\u3002</p> <p>\u4f18\u70b9\uff1a *   \u7a7a\u95f4\u6548\u7387\u9ad8\uff1a\u76f8\u6bd4\u4e8e\u5176\u4ed6\u6570\u636e\u7ed3\u6784\uff0c\u5b83\u4e0d\u9700\u8981\u5b58\u50a8\u5143\u7d20\u672c\u8eab\uff0c\u56e0\u6b64\u5360\u7528\u7684\u7a7a\u95f4\u975e\u5e38\u5c0f\u3002 *   \u67e5\u8be2\u901f\u5ea6\u5feb\uff1a\u63d2\u5165\u548c\u67e5\u8be2\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u90fd\u662fO(k)\uff0c\u5176\u4e2dk\u662f\u54c8\u5e0c\u51fd\u6570\u7684\u6570\u91cf\u3002 *   \u4fdd\u5bc6\u6027\u597d\uff1a\u7531\u4e8e\u4e0d\u5b58\u50a8\u539f\u59cb\u5143\u7d20\uff0c\u5728\u4e00\u4e9b\u5bf9\u6570\u636e\u4fdd\u5bc6\u8981\u6c42\u4e25\u683c\u7684\u573a\u5408\u9002\u7528\u3002</p> <p>\u7f3a\u70b9\uff1a *   \u5b58\u5728\u8bef\u5224\u7387\uff1a\u968f\u7740\u5b58\u5165\u7684\u5143\u7d20\u589e\u591a\uff0c\u8bef\u5224\u7387\u4f1a\u968f\u4e4b\u589e\u52a0\u3002 *   \u4e00\u822c\u65e0\u6cd5\u5220\u9664\u5143\u7d20\uff1a\u56e0\u4e3a\u5220\u9664\u67d0\u4e2a\u5143\u7d20\u5bf9\u5e94\u7684\u4f4d\uff0c\u53ef\u80fd\u4f1a\u5f71\u54cd\u5230\u5176\u4ed6\u5143\u7d20\u3002 \u5982\u679c\u591a\u4e2a\u5143\u7d20\u5171\u4eab\u4e86\u4f4d\u6570\u7ec4\u7684\u67d0\u4e00\u4f4d\uff0c\u5220\u9664\u5b83\u4f1a\u5bfc\u81f4\u5176\u4ed6\u5143\u7d20\u7684\u67e5\u8be2\u7ed3\u679c\u51fa\u9519\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E4%BB%8B%E7%BB%8D%E4%B8%80%E4%B8%8B%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8%EF%BC%8C%E4%BB%A5%E5%8F%8A%E4%BC%98%E5%8C%96%E6%8E%AA%E6%96%BD/#_2","title":"\u4f18\u5316\u63aa\u65bd","text":"<p>\u9488\u5bf9\u6807\u51c6\u5e03\u9686\u8fc7\u6ee4\u5668\u7684\u7f3a\u70b9\uff0c\u51fa\u73b0\u4e86\u4e00\u4e9b\u4f18\u5316\u548c\u53d8\u79cd\uff1a</p> <ol> <li> <p>\u8ba1\u6570\u5e03\u9686\u8fc7\u6ee4\u5668\uff08Counting Bloom Filter\uff09     \u8fd9\u662f\u5bf9\u6807\u51c6\u5e03\u9686\u8fc7\u6ee4\u5668\u6700\u5e38\u89c1\u7684\u6539\u8fdb\uff0c\u4e3b\u8981\u662f\u4e3a\u4e86\u89e3\u51b3\u65e0\u6cd5\u5220\u9664\u5143\u7d20\u7684\u95ee\u9898\u3002 \u5b83\u5c06\u4f4d\u6570\u7ec4\u7684\u6bcf\u4e00\u4f4d\u6269\u5c55\u4e3a\u4e00\u4e2a\u5c0f\u7684\u8ba1\u6570\u5668\u3002</p> <ul> <li>\u6dfb\u52a0\u5143\u7d20\u65f6\uff1a\u5c06\u5bf9\u5e94\u4f4d\u7f6e\u7684\u8ba1\u6570\u5668\u52a01\u3002</li> <li>\u5220\u9664\u5143\u7d20\u65f6\uff1a\u5c06\u5bf9\u5e94\u4f4d\u7f6e\u7684\u8ba1\u6570\u5668\u51cf1\u3002 \u8fd9\u6837\u5c31\u5b9e\u73b0\u4e86\u5b89\u5168\u7684\u5220\u9664\u64cd\u4f5c\u3002\u4e0d\u8fc7\uff0c\u8fd9\u4e5f\u5e26\u6765\u4e86\u989d\u5916\u7684\u7a7a\u95f4\u5f00\u9500\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u4f4d\u7f6e\u9700\u8981\u66f4\u591a\u7684\u4f4d\u6765\u5b58\u50a8\u8ba1\u6570\u503c\u3002</li> </ul> </li> <li> <p>\u5e03\u8c37\u9e1f\u8fc7\u6ee4\u5668\uff08Cuckoo Filter\uff09     \u8fd9\u662f\u5e03\u9686\u8fc7\u6ee4\u5668\u7684\u53e6\u4e00\u79cd\u53d8\u4f53\uff0c\u540c\u6837\u652f\u6301\u52a8\u6001\u5220\u9664\u5143\u7d20\u3002 \u5b83\u57fa\u4e8e\u5e03\u8c37\u9e1f\u54c8\u5e0c\u7b97\u6cd5\uff0c\u901a\u5e38\u5728\u7a7a\u95f4\u6548\u7387\u4e0a\u6bd4\u8ba1\u6570\u5e03\u9686\u8fc7\u6ee4\u5668\u66f4\u9ad8\uff0c\u5c24\u5176\u662f\u5728\u8981\u6c42\u8f83\u4f4e\u8bef\u5224\u7387\u7684\u573a\u666f\u4e0b\u3002 \u4e0d\u8fc7\uff0c\u5b83\u7684\u5b9e\u73b0\u76f8\u5bf9\u66f4\u590d\u6742\uff0c\u5e76\u4e14\u5728\u8fc7\u6ee4\u5668\u63a5\u8fd1\u5bb9\u91cf\u9971\u548c\u65f6\uff0c\u63d2\u5165\u6027\u80fd\u53ef\u80fd\u4f1a\u4e0b\u964d\u3002</p> </li> <li> <p>\u53c2\u6570\u7684\u4f18\u5316\u9009\u62e9     \u5e03\u9686\u8fc7\u6ee4\u5668\u7684\u6027\u80fd\uff08\u4e3b\u8981\u662f\u8bef\u5224\u7387\u548c\u7a7a\u95f4\u5360\u7528\uff09\u53d7\u5230\u4e09\u4e2a\u5173\u952e\u53c2\u6570\u7684\u5f71\u54cd\uff1a\u4f4d\u6570\u7ec4\u5927\u5c0f\uff08m\uff09\u3001\u54c8\u5e0c\u51fd\u6570\u4e2a\u6570\uff08k\uff09\u4ee5\u53ca\u8981\u63d2\u5165\u7684\u5143\u7d20\u6570\u91cf\uff08n\uff09\u3002</p> <ul> <li>\u4e3a\u4e86\u83b7\u5f97\u6700\u4f18\u7684\u51c6\u786e\u7387\uff0c\u53ef\u4ee5\u901a\u8fc7\u6570\u5b66\u516c\u5f0f\u6839\u636e\u9884\u671f\u7684\u5143\u7d20\u6570\u91cfn\u548c\u53ef\u63a5\u53d7\u7684\u8bef\u5224\u7387p\u6765\u8ba1\u7b97\u51fa\u6700\u4f18\u7684\u4f4d\u6570\u7ec4\u5927\u5c0fm\u548c\u54c8\u5e0c\u51fd\u6570\u4e2a\u6570k\u3002</li> <li>\u54c8\u5e0c\u51fd\u6570\u7684\u9009\u62e9\u4e5f\u5f88\u91cd\u8981\uff0c\u901a\u5e38\u4f1a\u9009\u62e9\u50cfMurmurHash\u8fd9\u7c7b\u6027\u80fd\u9ad8\u4e14\u51b2\u7a81\u7387\u4f4e\u7684\u975e\u52a0\u5bc6\u54c8\u5e0c\u7b97\u6cd5\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E4%BB%8B%E7%BB%8D%E4%B8%80%E4%B8%8B%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8%EF%BC%8C%E4%BB%A5%E5%8F%8A%E4%BC%98%E5%8C%96%E6%8E%AA%E6%96%BD/#_3","title":"\u5178\u578b\u5e94\u7528\u573a\u666f","text":"<p>\u7531\u4e8e\u5176\u9ad8\u6548\u7684\u7279\u6027\uff0c\u5e03\u9686\u8fc7\u6ee4\u5668\u5728\u5f88\u591a\u573a\u666f\u4e0b\u90fd\u6709\u5e94\u7528\uff1a *   \u7f13\u5b58\u7a7f\u900f\u95ee\u9898\uff1a\u5728\u67e5\u8be2\u6570\u636e\u5e93\u524d\uff0c\u5148\u7528\u5e03\u9686\u8fc7\u6ee4\u5668\u68c0\u67e5\u67d0\u4e2akey\u662f\u5426\u5b58\u5728\u3002\u5982\u679c\u8fc7\u6ee4\u5668\u5224\u65ad\u4e0d\u5b58\u5728\uff0c\u5c31\u76f4\u63a5\u8fd4\u56de\uff0c\u907f\u514d\u4e86\u5bf9\u5e95\u5c42\u6570\u636e\u5e93\u7684\u65e0\u6548\u67e5\u8be2\u3002 *   \u5927\u89c4\u6a21\u6570\u636e\u53bb\u91cd\uff1a\u4f8b\u5982\u5728\u7f51\u7edc\u722c\u866b\u4e2d\uff0c\u7528\u6765\u5224\u65ad\u4e00\u4e2aURL\u662f\u5426\u5df2\u7ecf\u88ab\u722c\u53d6\u8fc7\u3002 *   \u5783\u573e\u90ae\u4ef6\u8fc7\u6ee4\uff1a\u7528\u5e03\u9686\u8fc7\u6ee4\u5668\u5b58\u50a8\u5783\u573e\u90ae\u4ef6\u5730\u5740\u7684\u54c8\u5e0c\uff0c\u5feb\u901f\u5224\u65ad\u4e00\u5c01\u90ae\u4ef6\u662f\u5426\u662f\u5783\u573e\u90ae\u4ef6\u3002 *   \u6570\u636e\u5e93\u7cfb\u7edf\uff1a\u50cfGoogle Bigtable\u3001HBase\u7b49\u6570\u636e\u5e93\u4f7f\u7528\u5e03\u9686\u8fc7\u6ee4\u5668\u6765\u51cf\u5c11\u5bf9\u4e0d\u5b58\u5728\u7684\u884c\u6216\u5217\u7684\u78c1\u76d8\u67e5\u627e\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E5%B8%B8%E7%94%A8%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E6%9C%89%E4%BB%80%E4%B9%88/","title":"\u5e38\u7528\u7684Linux\u547d\u4ee4\u6709\u4ec0\u4e48","text":"<ol> <li> <p>\u6587\u4ef6\u548c\u76ee\u5f55\u64cd\u4f5c\u547d\u4ee4</p> </li> <li> <p><code>ls</code>: \u5217\u51fa\u76ee\u5f55\u5185\u5bb9\u3002\u5e38\u7528\u53c2\u6570\uff1a</p> <ul> <li><code>-l</code>: \u663e\u793a\u8be6\u7ec6\u4fe1\u606f\uff08\u6743\u9650\u3001\u6240\u6709\u8005\u3001\u5927\u5c0f\u3001\u4fee\u6539\u65f6\u95f4\u7b49\uff09\u3002</li> <li><code>-a</code>: \u663e\u793a\u6240\u6709\u6587\u4ef6\uff0c\u5305\u62ec\u9690\u85cf\u6587\u4ef6\uff08\u4ee5<code>.</code>\u5f00\u5934\uff09\u3002</li> <li><code>-h</code>: \u4ee5\u4eba\u7c7b\u53ef\u8bfb\u7684\u683c\u5f0f\u663e\u793a\u6587\u4ef6\u5927\u5c0f\uff08\u5982K, M, G\uff09\u3002</li> <li><code>-t</code>: \u6309\u4fee\u6539\u65f6\u95f4\u6392\u5e8f\u3002</li> </ul> </li> <li><code>cd</code>: \u5207\u6362\u76ee\u5f55\u3002<code>cd ..</code>\u8fd4\u56de\u4e0a\u4e00\u7ea7\u76ee\u5f55\uff0c<code>cd ~</code>\u6216<code>cd</code>\u56de\u5230\u5f53\u524d\u7528\u6237\u7684\u4e3b\u76ee\u5f55\u3002</li> <li><code>pwd</code>: \u663e\u793a\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u7684\u7edd\u5bf9\u8def\u5f84\u3002</li> <li><code>mkdir</code>: \u521b\u5efa\u65b0\u76ee\u5f55\u3002<code>-p</code>\u53ef\u4ee5\u9012\u5f52\u521b\u5efa\u591a\u7ea7\u76ee\u5f55\u3002</li> <li><code>rm</code>: \u5220\u9664\u6587\u4ef6\u6216\u76ee\u5f55\u3002<ul> <li><code>-r</code>: \u9012\u5f52\u5220\u9664\u76ee\u5f55\u53ca\u5176\u5185\u5bb9\u3002</li> <li><code>-f</code>: \u5f3a\u5236\u5220\u9664\uff0c\u4e0d\u8fdb\u884c\u63d0\u793a\u3002</li> <li>\u4f7f\u7528<code>rm -rf</code>\u65f6\u9700\u8981\u683c\u5916\u5c0f\u5fc3\u3002</li> </ul> </li> <li><code>cp</code>: \u590d\u5236\u6587\u4ef6\u6216\u76ee\u5f55\u3002<code>-r</code>\u7528\u4e8e\u590d\u5236\u76ee\u5f55\u3002</li> <li><code>mv</code>: \u79fb\u52a8\u6216\u91cd\u547d\u540d\u6587\u4ef6/\u76ee\u5f55\u3002</li> <li><code>touch</code>: \u521b\u5efa\u4e00\u4e2a\u7a7a\u6587\u4ef6\uff0c\u6216\u8005\u66f4\u65b0\u4e00\u4e2a\u5df2\u5b58\u5728\u6587\u4ef6\u7684\u65f6\u95f4\u6233\u3002</li> <li><code>find</code>: \u5728\u6307\u5b9a\u76ee\u5f55\u4e0b\u67e5\u627e\u6587\u4ef6\u3002\u529f\u80fd\u5f3a\u5927\uff0c\u53ef\u4ee5\u6309\u540d\u79f0\u3001\u5927\u5c0f\u3001\u7c7b\u578b\u3001\u4fee\u6539\u65f6\u95f4\u7b49\u591a\u79cd\u6761\u4ef6\u67e5\u627e\u3002<ul> <li>\u4f8b\u5982\uff1a<code>find /path/to/search -name \"*.log\" -mtime -7</code> (\u67e5\u627e7\u5929\u5185\u4fee\u6539\u8fc7\u7684log\u6587\u4ef6)\u3002</li> </ul> </li> <li> <p><code>ln</code>: \u521b\u5efa\u94fe\u63a5\u3002<code>-s</code>\u521b\u5efa\u8f6f\u94fe\u63a5\uff08\u7b26\u53f7\u94fe\u63a5\uff09\u3002</p> </li> <li> <p>\u6587\u4ef6\u5185\u5bb9\u67e5\u770b\u4e0e\u7f16\u8f91\u547d\u4ee4</p> </li> <li> <p><code>cat</code>: \u67e5\u770b\u5e76\u8fde\u63a5\u6587\u4ef6\u5185\u5bb9\uff0c\u4e00\u6b21\u6027\u663e\u793a\u6574\u4e2a\u6587\u4ef6\u3002</p> </li> <li><code>more</code>: \u5206\u9875\u663e\u793a\u6587\u4ef6\u5185\u5bb9\uff0c\u53ea\u80fd\u5411\u4e0b\u7ffb\u9875\u3002</li> <li><code>less</code>: \u66f4\u5f3a\u5927\u7684\u5206\u9875\u663e\u793a\u5de5\u5177\uff0c\u53ef\u4ee5\u5411\u4e0a/\u4e0b\u7ffb\u9875\uff0c\u652f\u6301\u641c\u7d22\u3002</li> <li><code>head</code>: \u663e\u793a\u6587\u4ef6\u7684\u5f00\u5934\u90e8\u5206\uff08\u9ed8\u8ba4\u524d10\u884c\uff09\u3002<code>-n</code>\u6307\u5b9a\u884c\u6570\u3002</li> <li><code>tail</code>: \u663e\u793a\u6587\u4ef6\u7684\u7ed3\u5c3e\u90e8\u5206\uff08\u9ed8\u8ba4\u540e10\u884c\uff09\u3002<ul> <li><code>-n</code>: \u6307\u5b9a\u884c\u6570\u3002</li> <li><code>-f</code>: \u5b9e\u65f6\u8ddf\u8e2a\u6587\u4ef6\u7684\u672b\u5c3e\u5185\u5bb9\uff0c\u975e\u5e38\u9002\u5408\u67e5\u770b\u5b9e\u65f6\u65e5\u5fd7\u3002</li> </ul> </li> <li><code>grep</code>: \u5728\u6587\u4ef6\u4e2d\u641c\u7d22\u5305\u542b\u6307\u5b9a\u6a21\u5f0f\u7684\u884c\u3002\u529f\u80fd\u5f3a\u5927\uff0c\u5e38\u4e0e\u6b63\u5219\u8868\u8fbe\u5f0f\u7ed3\u5408\u4f7f\u7528\u3002<ul> <li><code>-i</code>: \u5ffd\u7565\u5927\u5c0f\u5199\u3002</li> <li><code>-v</code>: \u663e\u793a\u4e0d\u5339\u914d\u7684\u884c\u3002</li> <li><code>-r</code>\u6216<code>-R</code>: \u9012\u5f52\u641c\u7d22\u76ee\u5f55\u3002</li> <li><code>-C &lt;num&gt;</code>, <code>-B &lt;num&gt;</code>, <code>-A &lt;num&gt;</code>: \u663e\u793a\u5339\u914d\u884c\u53ca\u5176\u4e0a\u4e0b\u6587\u3002</li> </ul> </li> <li><code>vi</code>/<code>vim</code>: \u529f\u80fd\u5f3a\u5927\u7684\u6587\u672c\u7f16\u8f91\u5668\uff0c\u662fLinux\u4e0b\u5fc5\u5907\u7684\u7f16\u8f91\u5de5\u5177\u3002</li> <li> <p><code>wc</code>: \u7edf\u8ba1\u6587\u4ef6\u7684\u884c\u6570\u3001\u5355\u8bcd\u6570\u3001\u5b57\u8282\u6570\u3002<code>-l</code>\u53ea\u7edf\u8ba1\u884c\u6570\u3002</p> </li> <li> <p>\u7cfb\u7edf\u4fe1\u606f\u4e0e\u6027\u80fd\u76d1\u63a7\u547d\u4ee4</p> </li> <li> <p><code>top</code>: \u5b9e\u65f6\u52a8\u6001\u5730\u67e5\u770b\u7cfb\u7edf\u7684\u6574\u4f53\u8fd0\u884c\u60c5\u51b5\uff0c\u5305\u62ec\u8fdb\u7a0b\u4fe1\u606f\u3001CPU\u4f7f\u7528\u7387\u3001\u5185\u5b58\u4f7f\u7528\u7387\u7b49\u3002</p> </li> <li><code>htop</code>: <code>top</code>\u7684\u589e\u5f3a\u7248\uff0c\u4ea4\u4e92\u66f4\u53cb\u597d\uff0c\u4fe1\u606f\u66f4\u4e30\u5bcc\u3002</li> <li><code>ps</code>: \u67e5\u770b\u5f53\u524d\u7cfb\u7edf\u7684\u8fdb\u7a0b\u72b6\u6001\u3002<ul> <li><code>ps aux</code>\u6216<code>ps -ef</code>: \u663e\u793a\u6240\u6709\u8fdb\u7a0b\u7684\u8be6\u7ec6\u4fe1\u606f\u3002\u5e38\u4e0e<code>grep</code>\u7ed3\u5408\u4f7f\u7528\u6765\u67e5\u627e\u7279\u5b9a\u8fdb\u7a0b\u3002</li> </ul> </li> <li><code>df</code>: \u67e5\u770b\u78c1\u76d8\u7a7a\u95f4\u4f7f\u7528\u60c5\u51b5\u3002<code>-h</code>\u4ee5\u53ef\u8bfb\u683c\u5f0f\u663e\u793a\u3002</li> <li><code>du</code>: \u67e5\u770b\u6587\u4ef6\u6216\u76ee\u5f55\u5360\u7528\u7684\u78c1\u76d8\u7a7a\u95f4\u5927\u5c0f\u3002<ul> <li><code>-h</code>: \u4ee5\u53ef\u8bfb\u683c\u5f0f\u663e\u793a\u3002</li> <li><code>-s</code>: \u53ea\u663e\u793a\u603b\u8ba1\u5927\u5c0f\u3002</li> </ul> </li> <li><code>free</code>: \u67e5\u770b\u5185\u5b58\u548c\u4ea4\u6362\u7a7a\u95f4\u7684\u4f7f\u7528\u60c5\u51b5\u3002<code>-m</code>\u6216<code>-g</code>\u4ee5MB\u6216GB\u4e3a\u5355\u4f4d\u663e\u793a\u3002</li> <li><code>vmstat</code>: \u62a5\u544a\u865a\u62df\u5185\u5b58\u7edf\u8ba1\u4fe1\u606f\uff0c\u4e5f\u53ef\u4ee5\u62a5\u544a\u8fdb\u7a0b\u3001I/O\u3001CPU\u6d3b\u52a8\u7b49\u3002</li> <li><code>iostat</code>: \u62a5\u544aCPU\u7edf\u8ba1\u4fe1\u606f\u548c\u8f93\u5165/\u8f93\u51fa\u7edf\u8ba1\u4fe1\u606f\u3002</li> <li><code>netstat</code>: \u663e\u793a\u7f51\u7edc\u8fde\u63a5\u3001\u8def\u7531\u8868\u3001\u63a5\u53e3\u7edf\u8ba1\u7b49\u4fe1\u606f\u3002<ul> <li><code>-anp</code>: \u663e\u793a\u6240\u6709\u8fde\u63a5\u3001\u4ee5\u6570\u5b57\u5f62\u5f0f\u663e\u793a\u5730\u5740\u548c\u7aef\u53e3\u3001\u5e76\u663e\u793a\u8fdb\u7a0bID\u548c\u540d\u79f0\u3002</li> </ul> </li> <li><code>ss</code>: <code>netstat</code>\u7684\u66ff\u4ee3\u54c1\uff0c\u529f\u80fd\u66f4\u5f3a\u5927\uff0c\u901f\u5ea6\u66f4\u5feb\u3002<code>ss -tuln</code>\u662f\u5e38\u7528\u7ec4\u5408\u3002</li> <li><code>uptime</code>: \u663e\u793a\u7cfb\u7edf\u5df2\u7ecf\u8fd0\u884c\u4e86\u591a\u957f\u65f6\u95f4\u3001\u5f53\u524d\u7528\u6237\u6570\u4ee5\u53ca\u7cfb\u7edf\u5e73\u5747\u8d1f\u8f7d\u3002</li> <li><code>uname</code>: \u663e\u793a\u7cfb\u7edf\u5185\u6838\u4fe1\u606f\u3002<code>-a</code>\u663e\u793a\u6240\u6709\u4fe1\u606f\u3002</li> <li> <p><code>lsof</code>: \u5217\u51fa\u5f53\u524d\u7cfb\u7edf\u6253\u5f00\u7684\u6587\u4ef6\u3002<code>-i</code>\u53ef\u4ee5\u67e5\u770b\u7f51\u7edc\u8fde\u63a5\u3002</p> </li> <li> <p>\u7f51\u7edc\u547d\u4ee4</p> </li> <li> <p><code>ping</code>: \u6d4b\u8bd5\u4e0e\u76ee\u6807\u4e3b\u673a\u7684\u7f51\u7edc\u8fde\u901a\u6027\u3002</p> </li> <li><code>telnet</code>/<code>nc</code> (netcat): \u7528\u4e8e\u6d4b\u8bd5\u8fdc\u7a0b\u4e3b\u673a\u7684\u7aef\u53e3\u662f\u5426\u5f00\u653e\u3002</li> <li><code>curl</code>/<code>wget</code>: \u7528\u4e8e\u4ece\u7f51\u7edc\u4e0b\u8f7d\u6587\u4ef6\u6216\u6d4b\u8bd5HTTP/HTTPS\u63a5\u53e3\u3002<code>curl</code>\u529f\u80fd\u66f4\u5f3a\u5927\uff0c\u5e38\u7528\u4e8eAPI\u8c03\u8bd5\u3002</li> <li><code>ifconfig</code>/<code>ip addr</code>: \u67e5\u770b\u548c\u914d\u7f6e\u7f51\u7edc\u63a5\u53e3\u4fe1\u606f\u3002<code>ip</code>\u547d\u4ee4\u662f\u65b0\u4e00\u4ee3\u7684\u7f51\u7edc\u914d\u7f6e\u5de5\u5177\u3002</li> <li> <p><code>route</code>/<code>ip route</code>: \u67e5\u770b\u548c\u7ba1\u7406\u8def\u7531\u8868\u3002</p> </li> <li> <p>\u538b\u7f29\u4e0e\u89e3\u538b\u547d\u4ee4</p> </li> <li> <p><code>tar</code>: \u6253\u5305\u548c\u89e3\u5305\u6587\u4ef6\u3002\u5e38\u4e0e\u538b\u7f29\u547d\u4ee4\u7ed3\u5408\u4f7f\u7528\u3002</p> <ul> <li><code>-cvf</code>: \u521b\u5efa\u4e00\u4e2atar\u5305\u3002</li> <li><code>-xvf</code>: \u89e3\u5f00\u4e00\u4e2atar\u5305\u3002</li> <li><code>-z</code>: \u4f7f\u7528gzip\u8fdb\u884c\u538b\u7f29/\u89e3\u538b\uff08.tar.gz\uff09\u3002</li> <li><code>-j</code>: \u4f7f\u7528bzip2\u8fdb\u884c\u538b\u7f29/\u89e3\u538b\uff08.tar.bz2\uff09\u3002</li> </ul> </li> <li><code>gzip</code>/<code>gunzip</code>: .gz\u6587\u4ef6\u7684\u538b\u7f29\u4e0e\u89e3\u538b\u3002</li> <li> <p><code>zip</code>/<code>unzip</code>: .zip\u6587\u4ef6\u7684\u538b\u7f29\u4e0e\u89e3\u538b\u3002</p> </li> <li> <p>\u6743\u9650\u7ba1\u7406\u547d\u4ee4</p> </li> <li> <p><code>chmod</code>: \u4fee\u6539\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u6743\u9650\u3002</p> </li> <li> <p><code>chown</code>: \u4fee\u6539\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u6240\u6709\u8005\u548c\u6240\u5c5e\u7ec4\u3002</p> </li> <li> <p>\u7ba1\u9053\u4e0e\u91cd\u5b9a\u5411</p> </li> <li> <p><code>|</code> (\u7ba1\u9053): \u5c06\u4e00\u4e2a\u547d\u4ee4\u7684\u8f93\u51fa\u4f5c\u4e3a\u53e6\u4e00\u4e2a\u547d\u4ee4\u7684\u8f93\u5165\u3002\u8fd9\u662f\u7ec4\u5408\u547d\u4ee4\u5b9e\u73b0\u590d\u6742\u529f\u80fd\u7684\u5173\u952e\u3002</p> <ul> <li>\u4f8b\u5982\uff1a<code>ps aux | grep java</code> (\u67e5\u627eJava\u8fdb\u7a0b)\u3002</li> </ul> </li> <li><code>&gt;</code> (\u8f93\u51fa\u91cd\u5b9a\u5411): \u5c06\u547d\u4ee4\u7684\u8f93\u51fa\u5199\u5165\u5230\u6587\u4ef6\u4e2d\uff08\u8986\u76d6\uff09\u3002</li> <li><code>&gt;&gt;</code> (\u8f93\u51fa\u91cd\u5b9a\u5411): \u5c06\u547d\u4ee4\u7684\u8f93\u51fa\u8ffd\u52a0\u5230\u6587\u4ef6\u4e2d\u3002</li> <li> <p><code>&lt;</code> (\u8f93\u5165\u91cd\u5b9a\u5411): \u5c06\u6587\u4ef6\u7684\u5185\u5bb9\u4f5c\u4e3a\u547d\u4ee4\u7684\u8f93\u5165\u3002</p> </li> <li> <p>\u5176\u4ed6\u5e38\u7528\u547d\u4ee4</p> </li> <li> <p><code>ssh</code>: \u5b89\u5168\u5730\u8fdc\u7a0b\u767b\u5f55\u5230\u53e6\u4e00\u53f0\u4e3b\u673a\u3002</p> </li> <li><code>scp</code>: \u5728\u672c\u5730\u548c\u8fdc\u7a0b\u4e3b\u673a\u4e4b\u95f4\u5b89\u5168\u5730\u590d\u5236\u6587\u4ef6\u3002</li> <li><code>systemctl</code>/<code>service</code>: \u7ba1\u7406\u7cfb\u7edf\u670d\u52a1\uff08\u542f\u52a8\u3001\u505c\u6b62\u3001\u91cd\u542f\u3001\u67e5\u770b\u72b6\u6001\uff09\uff0c\u9002\u7528\u4e8e\u4f7f\u7528systemd\u6216SysVinit\u7684\u7cfb\u7edf\u3002</li> <li><code>crontab</code>: \u8bbe\u7f6e\u5b9a\u65f6\u4efb\u52a1\u3002</li> <li><code>history</code>: \u67e5\u770b\u547d\u4ee4\u5386\u53f2\u8bb0\u5f55\u3002</li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E5%B8%B8%E7%94%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D/","title":"\u5e38\u7528\u8bbe\u8ba1\u6a21\u5f0f\u4ecb\u7ecd","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E5%B8%B8%E7%94%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D/#creational-patterns","title":"\u521b\u5efa\u578b\u6a21\u5f0f (Creational Patterns)","text":"<p>\u8fd9\u7c7b\u6a21\u5f0f\u4e3b\u8981\u5173\u6ce8\u5bf9\u8c61\u7684\u521b\u5efa\u8fc7\u7a0b\uff0c\u65e8\u5728\u5c06\u5bf9\u8c61\u7684\u521b\u5efa\u4e0e\u4f7f\u7528\u5206\u79bb\uff0c\u4ece\u800c\u964d\u4f4e\u7cfb\u7edf\u7684\u8026\u5408\u5ea6\u3002 \u5b83\u5bf9\u7c7b\u7684\u5b9e\u4f8b\u5316\u8fc7\u7a0b\u8fdb\u884c\u4e86\u62bd\u8c61\uff0c\u4f7f\u5f97\u7a0b\u5e8f\u5728\u9700\u8981\u521b\u5efa\u54ea\u4e9b\u5bf9\u8c61\u65f6\u66f4\u52a0\u7075\u6d3b\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E5%B8%B8%E7%94%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D/#1-singleton-pattern","title":"1. \u5355\u4f8b\u6a21\u5f0f (Singleton Pattern)","text":"<ul> <li>\u5b9e\u73b0\u601d\u8def: \u4fdd\u8bc1\u4e00\u4e2a\u7c7b\u5728\u4efb\u4f55\u60c5\u51b5\u4e0b\u90fd\u7edd\u5bf9\u53ea\u6709\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u5e76\u63d0\u4f9b\u4e00\u4e2a\u5168\u5c40\u8bbf\u95ee\u70b9\u3002\u901a\u5e38\u7684\u505a\u6cd5\u662f\u5c06\u6784\u9020\u51fd\u6570\u79c1\u6709\u5316\uff0c\u4ee5\u9632\u6b62\u5916\u90e8\u901a\u8fc7 <code>new</code> \u521b\u5efa\u5b9e\u4f8b\uff0c\u7136\u540e\u5728\u7c7b\u7684\u5185\u90e8\u521b\u5efa\u4e00\u4e2a\u9759\u6001\u5b9e\u4f8b\uff0c\u5e76\u63d0\u4f9b\u4e00\u4e2a\u9759\u6001\u65b9\u6cd5\u4f9b\u5916\u754c\u83b7\u53d6\u8be5\u5b9e\u4f8b\u3002</li> <li>\u4f7f\u7528\u573a\u666f:<ul> <li>\u9700\u8981\u9891\u7e41\u5b9e\u4f8b\u5316\u7136\u540e\u9500\u6bc1\u7684\u5bf9\u8c61\uff0c\u4f8b\u5982\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u3001\u7ebf\u7a0b\u6c60\u3002</li> <li>\u521b\u5efa\u5bf9\u8c61\u65f6\u8017\u65f6\u8fc7\u591a\u6216\u8017\u8d39\u8d44\u6e90\u8fc7\u591a\uff0c\u4f46\u53c8\u7ecf\u5e38\u7528\u5230\u7684\u5bf9\u8c61\u3002</li> <li>\u6709\u72b6\u6001\u7684\u5de5\u5177\u7c7b\u5bf9\u8c61\uff0c\u4f8b\u5982\u65e5\u5fd7\u8bb0\u5f55\u5668\u3001\u7f51\u7ad9\u8ba1\u6570\u5668\u3002</li> <li>\u9700\u8981\u5168\u5c40\u5171\u4eab\u4fe1\u606f\u7684\u573a\u666f\uff0c\u5982\u5e94\u7528\u7a0b\u5e8f\u7684\u914d\u7f6e\u5bf9\u8c61\u3002</li> </ul> </li> <li>\u4f18\u70b9:<ul> <li>\u53ea\u6709\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u51cf\u5c11\u4e86\u5185\u5b58\u5f00\u9500\u548c\u7cfb\u7edf\u6027\u80fd\u6d88\u8017\u3002</li> <li>\u907f\u514d\u4e86\u5bf9\u8d44\u6e90\u7684\u591a\u91cd\u5360\u7528\u3002</li> <li>\u63d0\u4f9b\u4e86\u5bf9\u552f\u4e00\u5b9e\u4f8b\u7684\u5168\u5c40\u8bbf\u95ee\u70b9\uff0c\u65b9\u4fbf\u7ba1\u7406\u3002</li> </ul> </li> <li>\u7f3a\u70b9:<ul> <li>\u6269\u5c55\u56f0\u96be\uff0c\u56e0\u4e3a\u6ca1\u6709\u63a5\u53e3\uff0c\u4e0d\u80fd\u7ee7\u627f\u3002</li> <li>\u5bf9\u6d4b\u8bd5\u4e0d\u5229\uff0c\u5728\u5e76\u884c\u5f00\u53d1\u73af\u5883\u4e2d\uff0c\u5982\u679c\u5355\u4f8b\u6ca1\u6709\u5b8c\u6210\uff0c\u90a3\u4e48\u4e0d\u80fd\u8fdb\u884c\u6d4b\u8bd5\u3002</li> <li>\u4e0e\u5355\u4e00\u804c\u8d23\u539f\u5219\u6709\u51b2\u7a81\uff0c\u4e00\u4e2a\u7c7b\u5e94\u8be5\u53ea\u5173\u5fc3\u5185\u90e8\u903b\u8f91\uff0c\u800c\u4e0d\u5e94\u5173\u5fc3\u81ea\u5df1\u5728\u5916\u9762\u662f\u5982\u4f55\u88ab\u5b9e\u4f8b\u5316\u7684\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E5%B8%B8%E7%94%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D/#2-factory-method-pattern","title":"2. \u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f (Factory Method Pattern)","text":"<ul> <li>\u5b9e\u73b0\u601d\u8def: \u5b9a\u4e49\u4e00\u4e2a\u7528\u4e8e\u521b\u5efa\u5bf9\u8c61\u7684\u63a5\u53e3\uff08\u5de5\u5382\u63a5\u53e3\uff09\uff0c\u4f46\u8ba9\u5b9e\u73b0\u8be5\u63a5\u53e3\u7684\u5b50\u7c7b\uff08\u5177\u4f53\u5de5\u5382\uff09\u6765\u51b3\u5b9a\u5b9e\u4f8b\u5316\u54ea\u4e00\u4e2a\u7c7b\u3002\u5ba2\u6237\u7aef\u4ee3\u7801\u53ea\u4e0e\u5de5\u5382\u63a5\u53e3\u548c\u4ea7\u54c1\u63a5\u53e3\u4ea4\u4e92\uff0c\u65e0\u9700\u5173\u5fc3\u5177\u4f53\u7684\u4ea7\u54c1\u521b\u5efa\u8fc7\u7a0b\u3002</li> <li>\u4f7f\u7528\u573a\u666f:<ul> <li>\u5f53\u4e00\u4e2a\u7c7b\u4e0d\u77e5\u9053\u5b83\u6240\u9700\u8981\u7684\u5bf9\u8c61\u7684\u7c7b\u65f6\u3002</li> <li>\u5f53\u4e00\u4e2a\u7c7b\u5e0c\u671b\u7531\u5b83\u7684\u5b50\u7c7b\u6765\u6307\u5b9a\u5b83\u6240\u521b\u5efa\u7684\u5bf9\u8c61\u65f6\u3002</li> <li>\u5c06\u521b\u5efa\u5bf9\u8c61\u7684\u4efb\u52a1\u59d4\u6258\u7ed9\u591a\u4e2a\u5e2e\u52a9\u5b50\u7c7b\u4e2d\u7684\u67d0\u4e00\u4e2a\uff0c\u5ba2\u6237\u7aef\u5728\u4f7f\u7528\u65f6\u65e0\u9700\u5173\u5fc3\u4f7f\u7528\u54ea\u4e2a\u5b50\u7c7b\u3002</li> </ul> </li> <li>\u4f18\u70b9:<ul> <li>\u7528\u6237\u53ea\u9700\u8981\u5173\u5fc3\u6240\u9700\u4ea7\u54c1\u5bf9\u5e94\u7684\u5de5\u5382\uff0c\u65e0\u9700\u5173\u5fc3\u521b\u5efa\u7ec6\u8282\u3002</li> <li>\u9075\u5faa\u201c\u5f00\u95ed\u539f\u5219\u201d\uff0c\u5f53\u589e\u52a0\u65b0\u4ea7\u54c1\u65f6\uff0c\u53ea\u9700\u589e\u52a0\u4e00\u4e2a\u5177\u4f53\u4ea7\u54c1\u7c7b\u548c\u5bf9\u5e94\u7684\u5177\u4f53\u5de5\u5382\u7c7b\uff0c\u65e0\u9700\u4fee\u6539\u539f\u6709\u5de5\u5382\u4ee3\u7801\u3002</li> <li>\u5178\u578b\u7684\u89e3\u8026\u6846\u67b6\uff0c\u7b26\u5408\u677e\u8026\u5408\u601d\u60f3\u3002</li> </ul> </li> <li>\u7f3a\u70b9:<ul> <li>\u6bcf\u6b21\u589e\u52a0\u4e00\u4e2a\u4ea7\u54c1\u65f6\uff0c\u90fd\u9700\u8981\u589e\u52a0\u4e00\u4e2a\u5177\u4f53\u7c7b\u548c\u5bf9\u8c61\u5b9e\u73b0\u5de5\u5382\uff0c\u4f7f\u5f97\u7cfb\u7edf\u4e2d\u7c7b\u7684\u4e2a\u6570\u6210\u500d\u589e\u52a0\uff0c\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u589e\u52a0\u4e86\u7cfb\u7edf\u7684\u590d\u6742\u5ea6\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E5%B8%B8%E7%94%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D/#3-abstract-factory-pattern","title":"3. \u62bd\u8c61\u5de5\u5382\u6a21\u5f0f (Abstract Factory Pattern)","text":"<ul> <li>\u5b9e\u73b0\u601d\u8def: \u63d0\u4f9b\u4e00\u4e2a\u63a5\u53e3\uff0c\u7528\u4e8e\u521b\u5efa\u4e00\u7cfb\u5217\u76f8\u5173\u6216\u76f8\u4e92\u4f9d\u8d56\u7684\u5bf9\u8c61\uff0c\u800c\u65e0\u9700\u6307\u5b9a\u5b83\u4eec\u5177\u4f53\u7684\u7c7b\u3002\u5b83\u5904\u7406\u7684\u662f\u201c\u4ea7\u54c1\u65cf\u201d\u7684\u521b\u5efa\u95ee\u9898\u3002\u4f8b\u5982\uff0c\u4e00\u4e2a\u5de5\u5382\u53ef\u4ee5\u521b\u5efa\u4e00\u5957\u76ae\u80a4\uff08\u6309\u94ae\u3001\u6587\u672c\u6846\u7b49\uff09\uff0c\u6362\u4e00\u4e2a\u5de5\u5382\u5c31\u53ef\u4ee5\u521b\u5efa\u53e6\u4e00\u5957\u5b8c\u5168\u4e0d\u540c\u98ce\u683c\u7684\u76ae\u80a4\u3002</li> <li>\u4f7f\u7528\u573a\u666f:<ul> <li>\u4e00\u4e2a\u7cfb\u7edf\u8981\u72ec\u7acb\u4e8e\u5b83\u7684\u4ea7\u54c1\u7684\u521b\u5efa\u3001\u7ec4\u5408\u548c\u8868\u793a\u65f6\u3002</li> <li>\u7cfb\u7edf\u4e2d\u6709\u591a\u4e8e\u4e00\u4e2a\u7684\u4ea7\u54c1\u65cf\uff0c\u800c\u6bcf\u6b21\u53ea\u4f7f\u7528\u5176\u4e2d\u67d0\u4e00\u4ea7\u54c1\u65cf\u3002</li> <li>\u5c5e\u4e8e\u540c\u4e00\u4e2a\u4ea7\u54c1\u65cf\u7684\u4ea7\u54c1\u5c06\u5728\u4e00\u8d77\u4f7f\u7528\u3002</li> </ul> </li> <li>\u4f18\u70b9:<ul> <li>\u5c06\u5177\u4f53\u4ea7\u54c1\u7684\u521b\u5efa\u8fc7\u7a0b\u4e0e\u5ba2\u6237\u7aef\u5206\u79bb\uff0c\u5ba2\u6237\u7aef\u901a\u8fc7\u62bd\u8c61\u63a5\u53e3\u6765\u64cd\u4f5c\uff0c\u65e0\u9700\u5173\u5fc3\u5177\u4f53\u5b9e\u73b0\u3002</li> <li>\u5f53\u4e00\u4e2a\u4ea7\u54c1\u65cf\u4e2d\u7684\u591a\u4e2a\u5bf9\u8c61\u88ab\u8bbe\u8ba1\u6210\u4e00\u8d77\u5de5\u4f5c\u65f6\uff0c\u5b83\u80fd\u4fdd\u8bc1\u5ba2\u6237\u7aef\u59cb\u7ec8\u53ea\u4f7f\u7528\u540c\u4e00\u4e2a\u4ea7\u54c1\u65cf\u4e2d\u7684\u5bf9\u8c61\u3002</li> </ul> </li> <li>\u7f3a\u70b9:<ul> <li>\u6269\u5c55\u65b0\u7684\u4ea7\u54c1\u7b49\u7ea7\u7ed3\u6784\uff08\u5373\u589e\u52a0\u65b0\u7684\u4ea7\u54c1\u79cd\u7c7b\uff09\u975e\u5e38\u56f0\u96be\uff0c\u56e0\u4e3a\u9700\u8981\u4fee\u6539\u62bd\u8c61\u5de5\u5382\u548c\u6240\u6709\u5177\u4f53\u5de5\u5382\u7684\u63a5\u53e3\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E5%B8%B8%E7%94%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D/#4-builder-pattern","title":"4. \u5efa\u9020\u8005\u6a21\u5f0f (Builder Pattern)","text":"<ul> <li>\u5b9e\u73b0\u601d\u8def: \u5c06\u4e00\u4e2a\u590d\u6742\u5bf9\u8c61\u7684\u6784\u5efa\u8fc7\u7a0b\u4e0e\u5176\u8868\u793a\u5206\u79bb\uff0c\u4f7f\u5f97\u540c\u6837\u7684\u6784\u5efa\u8fc7\u7a0b\u53ef\u4ee5\u521b\u5efa\u4e0d\u540c\u7684\u8868\u793a\u3002 \u5b83\u901a\u8fc7\u4e00\u6b65\u4e00\u6b65\u5730\u521b\u5efa\u590d\u6742\u5bf9\u8c61\uff0c\u5141\u8bb8\u7528\u6237\u53ea\u901a\u8fc7\u6307\u5b9a\u590d\u6742\u5bf9\u8c61\u7684\u7c7b\u578b\u548c\u5185\u5bb9\u5c31\u53ef\u4ee5\u6784\u5efa\u5b83\u4eec\uff0c\u7528\u6237\u4e0d\u9700\u8981\u77e5\u9053\u5185\u90e8\u7684\u5177\u4f53\u6784\u5efa\u7ec6\u8282\u3002</li> <li>\u4f7f\u7528\u573a\u666f:<ul> <li>\u5f53\u4e00\u4e2a\u5bf9\u8c61\u7684\u6784\u5efa\u8fc7\u7a0b\u975e\u5e38\u590d\u6742\uff0c\u5305\u542b\u591a\u4e2a\u90e8\u5206\uff0c\u4e14\u8fd9\u4e9b\u90e8\u5206\u7684\u6784\u5efa\u987a\u5e8f\u4f1a\u5f71\u54cd\u6700\u7ec8\u7ed3\u679c\u65f6\u3002</li> <li>\u5f53\u9700\u8981\u521b\u5efa\u7684\u5bf9\u8c61\u5177\u6709\u8bb8\u591a\u53ef\u9009\u53c2\u6570\u6216\u914d\u7f6e\u65f6\uff0c\u53ef\u4ee5\u907f\u514d\u51fa\u73b0\u5927\u91cf\u7684\u6784\u9020\u51fd\u6570\u91cd\u8f7d\u3002</li> <li>\u9700\u8981\u751f\u6210\u7684\u5bf9\u8c61\u5185\u90e8\u5c5e\u6027\u672c\u8eab\u76f8\u4e92\u4f9d\u8d56\u7684\u573a\u666f\u3002</li> </ul> </li> <li>\u4f18\u70b9:<ul> <li>\u5c01\u88c5\u6027\u597d\uff0c\u6784\u5efa\u548c\u8868\u793a\u5206\u79bb\uff0c\u5ba2\u6237\u7aef\u4e0d\u5fc5\u77e5\u9053\u4ea7\u54c1\u5185\u90e8\u7ec4\u6210\u7684\u7ec6\u8282\u3002</li> <li>\u6269\u5c55\u6027\u597d\uff0c\u5177\u4f53\u7684\u5efa\u9020\u8005\u7c7b\u4e4b\u95f4\u76f8\u4e92\u72ec\u7acb\uff0c\u5bb9\u6613\u6269\u5c55\u3002</li> <li>\u53ef\u4ee5\u66f4\u597d\u5730\u63a7\u5236\u5bf9\u8c61\u7684\u6784\u5efa\u8fc7\u7a0b\uff0c\u56e0\u4e3a\u662f\u5728\u4e00\u6b65\u4e00\u6b65\u5730\u5b8c\u6210\u521b\u5efa\u3002</li> </ul> </li> <li>\u7f3a\u70b9:<ul> <li>\u4f1a\u4ea7\u751f\u591a\u4f59\u7684 Builder \u5bf9\u8c61\u4ee5\u53ca Director \u5bf9\u8c61\uff0c\u6d88\u8017\u5185\u5b58\u3002</li> <li>\u5982\u679c\u4ea7\u54c1\u5185\u90e8\u53d8\u5316\u590d\u6742\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u9700\u8981\u5b9a\u4e49\u5f88\u591a\u5177\u4f53\u5efa\u9020\u8005\u7c7b\u6765\u5b9e\u73b0\u8fd9\u79cd\u53d8\u5316\uff0c\u5bfc\u81f4\u7cfb\u7edf\u53d8\u5f97\u5e9e\u5927\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E5%B8%B8%E7%94%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D/#structural-patterns","title":"\u7ed3\u6784\u578b\u6a21\u5f0f (Structural Patterns)","text":"<p>\u8fd9\u7c7b\u6a21\u5f0f\u5173\u6ce8\u5982\u4f55\u5c06\u7c7b\u6216\u5bf9\u8c61\u7ec4\u5408\u5728\u4e00\u8d77\u5f62\u6210\u66f4\u5927\u7684\u7ed3\u6784\uff0c\u540c\u65f6\u4fdd\u6301\u7ed3\u6784\u7684\u7075\u6d3b\u6027\u548c\u6548\u7387\u3002 \u5b83\u5206\u4e3a\u7c7b\u7ed3\u6784\u578b\u6a21\u5f0f\uff08\u4f7f\u7528\u7ee7\u627f\uff09\u548c\u5bf9\u8c61\u7ed3\u6784\u578b\u6a21\u5f0f\uff08\u4f7f\u7528\u7ec4\u5408/\u805a\u5408\uff09\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E5%B8%B8%E7%94%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D/#1-adapter-pattern","title":"1. \u9002\u914d\u5668\u6a21\u5f0f (Adapter Pattern)","text":"<ul> <li>\u5b9e\u73b0\u601d\u8def: \u5c06\u4e00\u4e2a\u7c7b\u7684\u63a5\u53e3\u8f6c\u6362\u6210\u5ba2\u6237\u7aef\u5e0c\u671b\u7684\u53e6\u5916\u4e00\u4e2a\u63a5\u53e3\uff0c\u4f7f\u5f97\u539f\u672c\u7531\u4e8e\u63a5\u53e3\u4e0d\u517c\u5bb9\u800c\u4e0d\u80fd\u4e00\u8d77\u5de5\u4f5c\u7684\u90a3\u4e9b\u7c7b\u53ef\u4ee5\u4e00\u8d77\u5de5\u4f5c\u3002 \u5c31\u50cf\u4e00\u4e2a\u7535\u6e90\u8f6c\u63a5\u5934\uff0c\u8ba9\u4e0d\u540c\u6807\u51c6\u7684\u63d2\u5934\u53ef\u4ee5\u5728\u63d2\u5ea7\u4e0a\u4f7f\u7528\u3002</li> <li>\u4f7f\u7528\u573a\u666f:<ul> <li>\u7cfb\u7edf\u9700\u8981\u4f7f\u7528\u73b0\u6709\u7684\u7c7b\uff0c\u800c\u6b64\u7c7b\u7684\u63a5\u53e3\u4e0d\u7b26\u5408\u7cfb\u7edf\u7684\u9700\u8981\u3002</li> <li>\u60f3\u8981\u5efa\u7acb\u4e00\u4e2a\u53ef\u4ee5\u91cd\u590d\u4f7f\u7528\u7684\u7c7b\uff0c\u7528\u4e8e\u4e0e\u4e00\u4e9b\u5f7c\u6b64\u4e4b\u95f4\u6ca1\u6709\u592a\u5927\u5173\u8054\u7684\u4e00\u4e9b\u7c7b\u534f\u540c\u5de5\u4f5c\u3002</li> <li>\u9700\u8981\u4e00\u4e2a\u7edf\u4e00\u7684\u8f93\u51fa\u63a5\u53e3\uff0c\u800c\u8f93\u5165\u7aef\u7684\u7c7b\u578b\u4e0d\u53ef\u9884\u77e5\u3002</li> </ul> </li> <li>\u4f18\u70b9:<ul> <li>\u53ef\u4ee5\u8ba9\u4efb\u4f55\u4e24\u4e2a\u6ca1\u6709\u5173\u8054\u7684\u7c7b\u4e00\u8d77\u8fd0\u884c\uff0c\u63d0\u9ad8\u4e86\u7c7b\u7684\u590d\u7528\u6027\u3002</li> <li>\u589e\u52a0\u4e86\u7c7b\u7684\u900f\u660e\u5ea6\u3002</li> <li>\u7075\u6d3b\u6027\u597d\uff0c\u4e0d\u4f1a\u7834\u574f\u539f\u6709\u7cfb\u7edf\u3002</li> </ul> </li> <li>\u7f3a\u70b9:<ul> <li>\u8fc7\u591a\u5730\u4f7f\u7528\u9002\u914d\u5668\uff0c\u4f1a\u8ba9\u7cfb\u7edf\u975e\u5e38\u96f6\u4e71\uff0c\u4e0d\u6613\u6574\u4f53\u8fdb\u884c\u628a\u63e1\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E5%B8%B8%E7%94%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D/#2-decorator-pattern","title":"2. \u88c5\u9970\u5668\u6a21\u5f0f (Decorator Pattern)","text":"<ul> <li>\u5b9e\u73b0\u601d\u8def: \u52a8\u6001\u5730\u7ed9\u4e00\u4e2a\u5bf9\u8c61\u6dfb\u52a0\u4e00\u4e9b\u989d\u5916\u7684\u804c\u8d23\uff0c\u5c31\u589e\u52a0\u529f\u80fd\u6765\u8bf4\uff0c\u88c5\u9970\u5668\u6a21\u5f0f\u76f8\u6bd4\u751f\u6210\u5b50\u7c7b\u66f4\u4e3a\u7075\u6d3b\u3002 \u5b83\u5141\u8bb8\u5411\u4e00\u4e2a\u73b0\u6709\u7684\u5bf9\u8c61\u6dfb\u52a0\u65b0\u7684\u529f\u80fd\uff0c\u540c\u65f6\u53c8\u4e0d\u6539\u53d8\u5176\u7ed3\u6784\u3002</li> <li>\u4f7f\u7528\u573a\u666f:<ul> <li>\u5728\u4e0d\u5f71\u54cd\u5176\u4ed6\u5bf9\u8c61\u7684\u60c5\u51b5\u4e0b\uff0c\u4ee5\u52a8\u6001\u3001\u900f\u660e\u7684\u65b9\u5f0f\u7ed9\u5355\u4e2a\u5bf9\u8c61\u6dfb\u52a0\u804c\u8d23\u3002</li> <li>\u9700\u8981\u52a8\u6001\u5730\u7ed9\u4e00\u4e2a\u5bf9\u8c61\u589e\u52a0\u529f\u80fd\uff0c\u8fd9\u4e9b\u529f\u80fd\u53ef\u4ee5\u518d\u52a8\u6001\u5730\u64a4\u9500\u3002</li> <li>\u5f53\u4e0d\u80fd\u91c7\u7528\u7ee7\u627f\u7684\u65b9\u5f0f\u5bf9\u7cfb\u7edf\u8fdb\u884c\u6269\u5c55\u6216\u8005\u91c7\u7528\u7ee7\u627f\u4e0d\u5229\u4e8e\u7cfb\u7edf\u6269\u5c55\u548c\u7ef4\u62a4\u65f6\u3002</li> </ul> </li> <li>\u4f18\u70b9:<ul> <li>\u6bd4\u7ee7\u627f\u66f4\u7075\u6d3b\uff0c\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u5730\u589e\u5220\u529f\u80fd\u3002</li> <li>\u53ef\u4ee5\u5c06\u6838\u5fc3\u804c\u8d23\u548c\u88c5\u9970\u529f\u80fd\u5206\u79bb\u5f00\uff0c\u7b80\u5316\u4e86\u9ad8\u5c42\u4ee3\u7801\u3002</li> </ul> </li> <li>\u7f3a\u70b9:<ul> <li>\u4f1a\u4ea7\u751f\u8bb8\u591a\u7ec6\u5c0f\u7684\u5bf9\u8c61\uff0c\u589e\u52a0\u4e86\u7cfb\u7edf\u7684\u590d\u6742\u5ea6\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E5%B8%B8%E7%94%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D/#3-proxy-pattern","title":"3. \u4ee3\u7406\u6a21\u5f0f (Proxy Pattern)","text":"<ul> <li>\u5b9e\u73b0\u601d\u8def: \u4e3a\u5176\u4ed6\u5bf9\u8c61\u63d0\u4f9b\u4e00\u79cd\u4ee3\u7406\u4ee5\u63a7\u5236\u5bf9\u8fd9\u4e2a\u5bf9\u8c61\u7684\u8bbf\u95ee\u3002 \u4ee3\u7406\u5bf9\u8c61\u548c\u76ee\u6807\u5bf9\u8c61\u901a\u5e38\u5b9e\u73b0\u76f8\u540c\u7684\u63a5\u53e3\uff0c\u5ba2\u6237\u7aef\u4e0e\u4ee3\u7406\u5bf9\u8c61\u4ea4\u4e92\uff0c\u4ee3\u7406\u5bf9\u8c61\u5185\u90e8\u518d\u4e0e\u76ee\u6807\u5bf9\u8c61\u4ea4\u4e92\u3002</li> <li>\u4f7f\u7528\u573a\u666f:<ul> <li>\u8fdc\u7a0b\u4ee3\u7406\uff1a\u4e3a\u4e00\u4e2a\u5bf9\u8c61\u5728\u4e0d\u540c\u7684\u5730\u5740\u7a7a\u95f4\u63d0\u4f9b\u5c40\u90e8\u4ee3\u8868\u3002</li> <li>\u865a\u62df\u4ee3\u7406\uff1a\u6839\u636e\u9700\u8981\u521b\u5efa\u5f00\u9500\u5f88\u5927\u7684\u5bf9\u8c61\uff0c\u4f8b\u5982\u663e\u793a\u4e00\u5f20\u5927\u56fe\uff0c\u53ef\u4ee5\u5148\u7528\u4ee3\u7406\u663e\u793a\u7f29\u7565\u56fe\uff0c\u771f\u6b63\u9700\u8981\u65f6\u518d\u52a0\u8f7d\u539f\u56fe\u3002</li> <li>\u5b89\u5168\u4ee3\u7406\uff1a\u7528\u6765\u63a7\u5236\u771f\u5b9e\u5bf9\u8c61\u8bbf\u95ee\u65f6\u7684\u6743\u9650\u3002</li> <li>\u667a\u80fd\u6307\u5f15\uff1a\u5f53\u8c03\u7528\u771f\u5b9e\u7684\u5bf9\u8c61\u65f6\uff0c\u4ee3\u7406\u5904\u7406\u53e6\u5916\u4e00\u4e9b\u4e8b\u3002</li> </ul> </li> <li>\u4f18\u70b9:<ul> <li>\u804c\u8d23\u6e05\u6670\uff0c\u4ee3\u7406\u6a21\u5f0f\u53ef\u4ee5\u4f5c\u4e3a\u5ba2\u6237\u7aef\u548c\u76ee\u6807\u5bf9\u8c61\u4e4b\u95f4\u7684\u4e2d\u4ecb\uff0c\u8d77\u5230\u4fdd\u62a4\u76ee\u6807\u5bf9\u8c61\u7684\u4f5c\u7528\u3002</li> <li>\u53ef\u4ee5\u6269\u5c55\u76ee\u6807\u5bf9\u8c61\u7684\u529f\u80fd\u3002</li> <li>\u9ad8\u6269\u5c55\u6027\u3001\u667a\u80fd\u5316\u3002</li> </ul> </li> <li>\u7f3a\u70b9:<ul> <li>\u7531\u4e8e\u5728\u5ba2\u6237\u7aef\u548c\u771f\u5b9e\u4e3b\u9898\u4e4b\u95f4\u589e\u52a0\u4e86\u4ee3\u7406\u5bf9\u8c61\uff0c\u53ef\u80fd\u4f1a\u9020\u6210\u8bf7\u6c42\u7684\u5904\u7406\u901f\u5ea6\u53d8\u6162\u3002</li> <li>\u5b9e\u73b0\u4ee3\u7406\u6a21\u5f0f\u9700\u8981\u989d\u5916\u7684\u5de5\u4f5c\uff0c\u6709\u4e9b\u5b9e\u73b0\u4f1a\u975e\u5e38\u590d\u6742\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E5%B8%B8%E7%94%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D/#4-facade-pattern","title":"4. \u5916\u89c2\u6a21\u5f0f (Facade Pattern)","text":"<ul> <li>\u5b9e\u73b0\u601d\u8def: \u4e3a\u5b50\u7cfb\u7edf\u4e2d\u7684\u4e00\u7ec4\u63a5\u53e3\u63d0\u4f9b\u4e00\u4e2a\u7edf\u4e00\u7684\u9ad8\u5c42\u63a5\u53e3\uff0c\u4f7f\u5f97\u5b50\u7cfb\u7edf\u66f4\u5bb9\u6613\u4f7f\u7528\u3002 \u5b83\u9690\u85cf\u4e86\u7cfb\u7edf\u7684\u590d\u6742\u6027\uff0c\u5e76\u5411\u5ba2\u6237\u7aef\u63d0\u4f9b\u4e86\u4e00\u4e2a\u53ef\u4ee5\u8bbf\u95ee\u7cfb\u7edf\u7684\u63a5\u53e3\u3002</li> <li>\u4f7f\u7528\u573a\u666f:<ul> <li>\u5f53\u4f60\u8981\u4e3a\u4e00\u4e2a\u590d\u6742\u5b50\u7cfb\u7edf\u63d0\u4f9b\u4e00\u4e2a\u7b80\u5355\u63a5\u53e3\u65f6\u3002</li> <li>\u5ba2\u6237\u7aef\u4e0e\u591a\u4e2a\u5b50\u7cfb\u7edf\u4e4b\u95f4\u5b58\u5728\u5927\u91cf\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u5e0c\u671b\u901a\u8fc7\u4e00\u4e2a\u7edf\u4e00\u5165\u53e3\u964d\u4f4e\u8026\u5408\u3002</li> <li>\u5728\u5c42\u6b21\u5316\u7ed3\u6784\u4e2d\uff0c\u53ef\u4ee5\u7528\u5916\u89c2\u6a21\u5f0f\u5b9a\u4e49\u6bcf\u4e00\u5c42\u7684\u5165\u53e3\u3002</li> </ul> </li> <li>\u4f18\u70b9:<ul> <li>\u51cf\u5c11\u4e86\u5ba2\u6237\u7aef\u4e0e\u5b50\u7cfb\u7edf\u4e4b\u95f4\u7684\u8026\u5408\uff0c\u8ba9\u5b50\u7cfb\u7edf\u5185\u90e8\u7684\u6a21\u5757\u66f4\u5bb9\u6613\u7ef4\u62a4\u548c\u6269\u5c55\u3002</li> <li>\u5ba2\u6237\u7aef\u65e0\u987b\u5173\u5fc3\u5b50\u7cfb\u7edf\u5185\u90e8\u7684\u5b9e\u73b0\uff0c\u53ea\u9700\u8981\u548c\u5916\u89c2\u5bf9\u8c61\u4ea4\u4e92\u5373\u53ef\u3002</li> </ul> </li> <li>\u7f3a\u70b9:<ul> <li>\u4e0d\u7b26\u5408\u5f00\u95ed\u539f\u5219\uff0c\u5982\u679c\u9700\u8981\u4fee\u6539\u5916\u89c2\u7c7b\uff0c\u53ef\u80fd\u9700\u8981\u6539\u52a8\u5927\u91cf\u5ba2\u6237\u7aef\u4ee3\u7801\u3002</li> <li>\u5916\u89c2\u7c7b\u53ef\u80fd\u4f1a\u53d8\u6210\u4e00\u4e2a\u5305\u542b\u6240\u6709\u529f\u80fd\u7684\u201c\u4e0a\u5e1d\u5bf9\u8c61\u201d\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E5%B8%B8%E7%94%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D/#behavioral-patterns","title":"\u884c\u4e3a\u578b\u6a21\u5f0f (Behavioral Patterns)","text":"<p>\u8fd9\u7c7b\u6a21\u5f0f\u7279\u522b\u5173\u6ce8\u5bf9\u8c61\u4e4b\u95f4\u7684\u901a\u4fe1\uff0c\u6d89\u53ca\u5230\u7b97\u6cd5\u548c\u5bf9\u8c61\u95f4\u804c\u8d23\u7684\u5206\u914d\u3002 \u5b83\u4eec\u63cf\u8ff0\u4e86\u5728\u4e0d\u540c\u7684\u5bf9\u8c61\u4e4b\u95f4\u5212\u5206\u8d23\u4efb\u548c\u7b97\u6cd5\u7684\u62bd\u8c61\u5316\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E5%B8%B8%E7%94%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D/#1-strategy-pattern","title":"1. \u7b56\u7565\u6a21\u5f0f (Strategy Pattern)","text":"<ul> <li>\u5b9e\u73b0\u601d\u8def: \u5b9a\u4e49\u4e00\u7cfb\u5217\u7684\u7b97\u6cd5\uff0c\u628a\u5b83\u4eec\u4e00\u4e2a\u4e2a\u5c01\u88c5\u8d77\u6765\uff0c\u5e76\u4e14\u4f7f\u5b83\u4eec\u53ef\u4ee5\u76f8\u4e92\u66ff\u6362\u3002\u8be5\u6a21\u5f0f\u4f7f\u5f97\u7b97\u6cd5\u53ef\u72ec\u7acb\u4e8e\u4f7f\u7528\u5b83\u7684\u5ba2\u6237\u800c\u53d8\u5316\u3002</li> <li>\u4f7f\u7528\u573a\u666f:<ul> <li>\u5982\u679c\u5728\u4e00\u4e2a\u7cfb\u7edf\u91cc\u9762\u6709\u8bb8\u591a\u7c7b\uff0c\u5b83\u4eec\u4e4b\u95f4\u7684\u533a\u522b\u4ec5\u5728\u4e8e\u5b83\u4eec\u7684\u884c\u4e3a\uff0c\u90a3\u4e48\u4f7f\u7528\u7b56\u7565\u6a21\u5f0f\u53ef\u4ee5\u52a8\u6001\u5730\u8ba9\u4e00\u4e2a\u5bf9\u8c61\u5728\u8bb8\u591a\u884c\u4e3a\u4e2d\u9009\u62e9\u4e00\u79cd\u884c\u4e3a\u3002</li> <li>\u4e00\u4e2a\u7cfb\u7edf\u9700\u8981\u52a8\u6001\u5730\u5728\u51e0\u79cd\u7b97\u6cd5\u4e2d\u9009\u62e9\u4e00\u79cd\u3002</li> <li>\u5982\u679c\u4e00\u4e2a\u5bf9\u8c61\u6709\u5f88\u591a\u7684\u884c\u4e3a\uff0c\u5982\u679c\u4e0d\u7528\u6070\u5f53\u7684\u6a21\u5f0f\uff0c\u8fd9\u4e9b\u884c\u4e3a\u5c31\u53ea\u597d\u4f7f\u7528\u591a\u91cd\u7684\u6761\u4ef6\u9009\u62e9\u8bed\u53e5\u6765\u5b9e\u73b0\u3002</li> </ul> </li> <li>\u4f18\u70b9:<ul> <li>\u7b97\u6cd5\u53ef\u4ee5\u81ea\u7531\u5207\u6362\uff0c\u5e76\u4e14\u6613\u4e8e\u6269\u5c55\u3002</li> <li>\u907f\u514d\u4f7f\u7528\u591a\u91cd\u6761\u4ef6\u5224\u65ad\u3002</li> <li>\u6bcf\u4e2a\u7b56\u7565\u90fd\u662f\u72ec\u7acb\u7684\uff0c\u7b26\u5408\u5355\u4e00\u804c\u8d23\u539f\u5219\u3002</li> </ul> </li> <li>\u7f3a\u70b9:<ul> <li>\u5ba2\u6237\u7aef\u5fc5\u987b\u77e5\u9053\u6240\u6709\u7684\u7b56\u7565\u7c7b\uff0c\u5e76\u81ea\u884c\u51b3\u5b9a\u4f7f\u7528\u54ea\u4e00\u4e2a\u3002</li> <li>\u7b56\u7565\u7c7b\u4f1a\u589e\u591a\uff0c\u6240\u6709\u7b56\u7565\u7c7b\u90fd\u9700\u8981\u5bf9\u5916\u66b4\u9732\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E5%B8%B8%E7%94%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D/#2-observer-pattern","title":"2. \u89c2\u5bdf\u8005\u6a21\u5f0f (Observer Pattern)","text":"<ul> <li>\u5b9e\u73b0\u601d\u8def: \u5b9a\u4e49\u5bf9\u8c61\u95f4\u7684\u4e00\u79cd\u4e00\u5bf9\u591a\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u5f53\u4e00\u4e2a\u5bf9\u8c61\u7684\u72b6\u6001\u53d1\u751f\u6539\u53d8\u65f6\uff0c\u6240\u6709\u4f9d\u8d56\u4e8e\u5b83\u7684\u5bf9\u8c61\u90fd\u5c06\u5f97\u5230\u901a\u77e5\u5e76\u81ea\u52a8\u66f4\u65b0\u3002\u5b83\u5305\u62ec\u201c\u4e3b\u9898\u201d\uff08Subject\uff09\u548c\u201c\u89c2\u5bdf\u8005\u201d\uff08Observer\uff09\u4e24\u4e2a\u6838\u5fc3\u89d2\u8272\u3002</li> <li>\u4f7f\u7528\u573a\u666f:<ul> <li>\u4e00\u4e2a\u62bd\u8c61\u6a21\u578b\u6709\u4e24\u4e2a\u65b9\u9762\uff0c\u5176\u4e2d\u4e00\u4e2a\u65b9\u9762\u4f9d\u8d56\u4e8e\u53e6\u4e00\u4e2a\u65b9\u9762\u3002\u5c06\u8fd9\u4e8c\u8005\u5c01\u88c5\u5728\u72ec\u7acb\u7684\u5bf9\u8c61\u4e2d\u4ee5\u4f7f\u5b83\u4eec\u53ef\u4ee5\u5404\u81ea\u72ec\u7acb\u5730\u6539\u53d8\u548c\u590d\u7528\u3002</li> <li>\u4e00\u4e2a\u5bf9\u8c61\u7684\u6539\u53d8\u5c06\u5bfc\u81f4\u5176\u4ed6\u4e00\u4e2a\u6216\u591a\u4e2a\u5bf9\u8c61\u4e5f\u53d1\u751f\u6539\u53d8\uff0c\u800c\u4e0d\u77e5\u9053\u5177\u4f53\u6709\u591a\u5c11\u5bf9\u8c61\u5c06\u53d1\u751f\u6539\u53d8\u3002</li> <li>\u4e00\u4e2a\u5bf9\u8c61\u5fc5\u987b\u901a\u77e5\u5176\u4ed6\u5bf9\u8c61\uff0c\u800c\u5b83\u53c8\u4e0d\u80fd\u5047\u5b9a\u5176\u4ed6\u5bf9\u8c61\u662f\u8c01\u3002</li> </ul> </li> <li>\u4f18\u70b9:<ul> <li>\u5728\u89c2\u5bdf\u8005\u548c\u88ab\u89c2\u5bdf\u8005\u4e4b\u95f4\u5efa\u7acb\u4e86\u4e00\u5957\u89e6\u53d1\u673a\u5236\uff0c\u5b9e\u73b0\u4e86\u677e\u8026\u5408\u3002</li> <li>\u652f\u6301\u5e7f\u64ad\u901a\u4fe1\u3002</li> </ul> </li> <li>\u7f3a\u70b9:<ul> <li>\u5982\u679c\u4e00\u4e2a\u88ab\u89c2\u5bdf\u8005\u5bf9\u8c61\u6709\u5f88\u591a\u7684\u76f4\u63a5\u548c\u95f4\u63a5\u7684\u89c2\u5bdf\u8005\u7684\u8bdd\uff0c\u5c06\u6240\u6709\u7684\u89c2\u5bdf\u8005\u90fd\u901a\u77e5\u5230\u4f1a\u82b1\u8d39\u5f88\u591a\u65f6\u95f4\u3002</li> <li>\u5982\u679c\u89c2\u5bdf\u8005\u548c\u4e3b\u9898\u4e4b\u95f4\u6709\u5faa\u73af\u4f9d\u8d56\uff0c\u53ef\u80fd\u5bfc\u81f4\u7cfb\u7edf\u5d29\u6e83\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E5%B8%B8%E7%94%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D/#3-command-pattern","title":"3. \u547d\u4ee4\u6a21\u5f0f (Command Pattern)","text":"<ul> <li>\u5b9e\u73b0\u601d\u8def: \u5c06\u4e00\u4e2a\u8bf7\u6c42\u5c01\u88c5\u4e3a\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4ece\u800c\u4f7f\u4f60\u53ef\u7528\u4e0d\u540c\u7684\u8bf7\u6c42\u5bf9\u5ba2\u6237\u8fdb\u884c\u53c2\u6570\u5316\uff1b\u5bf9\u8bf7\u6c42\u6392\u961f\u6216\u8bb0\u5f55\u8bf7\u6c42\u65e5\u5fd7\uff0c\u4ee5\u53ca\u652f\u6301\u53ef\u64a4\u9500\u7684\u64cd\u4f5c\u3002</li> <li>\u4f7f\u7528\u573a\u666f:<ul> <li>\u7cfb\u7edf\u9700\u8981\u5c06\u8bf7\u6c42\u7684\u8c03\u7528\u8005\u548c\u63a5\u6536\u8005\u89e3\u8026\uff0c\u4f7f\u5f97\u8c03\u7528\u8005\u548c\u63a5\u6536\u8005\u4e0d\u76f4\u63a5\u4ea4\u4e92\u3002</li> <li>\u9700\u8981\u5c06\u8bf7\u6c42\u6392\u961f\u3001\u8bb0\u5f55\u65e5\u5fd7\u6216\u652f\u6301\u64a4\u9500/\u91cd\u505a\u64cd\u4f5c\u3002</li> </ul> </li> <li>\u4f18\u70b9:<ul> <li>\u964d\u4f4e\u4e86\u7cfb\u7edf\u7684\u8026\u5408\u5ea6\u3002</li> <li>\u65b0\u7684\u547d\u4ee4\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u52a0\u5165\u5230\u7cfb\u7edf\u4e2d\uff0c\u7b26\u5408\u5f00\u95ed\u539f\u5219\u3002</li> <li>\u53ef\u4ee5\u6bd4\u8f83\u5bb9\u6613\u5730\u8bbe\u8ba1\u4e00\u4e2a\u547d\u4ee4\u961f\u5217\u6216\u5b8f\u547d\u4ee4\uff08\u7ec4\u5408\u547d\u4ee4\uff09\u3002</li> </ul> </li> <li>\u7f3a\u70b9:<ul> <li>\u4f7f\u7528\u547d\u4ee4\u6a21\u5f0f\u53ef\u80fd\u4f1a\u5bfc\u81f4\u67d0\u4e9b\u7cfb\u7edf\u6709\u8fc7\u591a\u7684\u5177\u4f53\u547d\u4ee4\u7c7b\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E5%B8%B8%E7%94%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D/#4-state-pattern","title":"4. \u72b6\u6001\u6a21\u5f0f (State Pattern)","text":"<ul> <li>\u5b9e\u73b0\u601d\u8def: \u5141\u8bb8\u4e00\u4e2a\u5bf9\u8c61\u5728\u5176\u5185\u90e8\u72b6\u6001\u6539\u53d8\u65f6\u6539\u53d8\u5b83\u7684\u884c\u4e3a\uff0c\u5bf9\u8c61\u770b\u8d77\u6765\u4f3c\u4e4e\u4fee\u6539\u4e86\u5b83\u7684\u7c7b\u3002 \u5b83\u5c06\u4e0e\u7279\u5b9a\u72b6\u6001\u76f8\u5173\u7684\u884c\u4e3a\u5c40\u90e8\u5316\uff0c\u5e76\u4e14\u5c06\u4e0d\u540c\u72b6\u6001\u7684\u884c\u4e3a\u5206\u5272\u5f00\u6765\u3002</li> <li>\u4f7f\u7528\u573a\u666f:<ul> <li>\u4e00\u4e2a\u5bf9\u8c61\u7684\u884c\u4e3a\u53d6\u51b3\u4e8e\u5b83\u7684\u72b6\u6001\uff0c\u5e76\u4e14\u5b83\u5fc5\u987b\u5728\u8fd0\u884c\u65f6\u6839\u636e\u72b6\u6001\u6539\u53d8\u5b83\u7684\u884c\u4e3a\u3002</li> <li>\u4ee3\u7801\u4e2d\u5305\u542b\u5927\u91cf\u4e0e\u5bf9\u8c61\u72b6\u6001\u6709\u5173\u7684\u6761\u4ef6\u8bed\u53e5\u3002</li> </ul> </li> <li>\u4f18\u70b9:<ul> <li>\u5c06\u6240\u6709\u4e0e\u67d0\u4e2a\u72b6\u6001\u6709\u5173\u7684\u884c\u4e3a\u653e\u5230\u4e00\u4e2a\u7c7b\u4e2d\uff0c\u5e76\u4e14\u53ef\u4ee5\u65b9\u4fbf\u5730\u589e\u52a0\u65b0\u7684\u72b6\u6001\u3002</li> <li>\u4f7f\u5f97\u72b6\u6001\u8f6c\u6362\u53d8\u5f97\u660e\u786e\uff0c\u51cf\u5c11\u4e86\u5bf9\u8c61\u95f4\u7684\u76f8\u4e92\u4f9d\u8d56\u3002</li> </ul> </li> <li>\u7f3a\u70b9:<ul> <li>\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u91cc\u6709\u5927\u91cf\u7684\u72b6\u6001\u7c7b\uff0c\u589e\u52a0\u4e86\u7cfb\u7edf\u7684\u590d\u6742\u6027\u3002</li> <li>\u72b6\u6001\u6a21\u5f0f\u7684\u7ed3\u6784\u4e0e\u5b9e\u73b0\u90fd\u8f83\u4e3a\u590d\u6742\uff0c\u5982\u679c\u4f7f\u7528\u4e0d\u5f53\u5c06\u5bfc\u81f4\u7a0b\u5e8f\u7ed3\u6784\u548c\u4ee3\u7801\u7684\u6df7\u4e71\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E5%B8%B8%E7%94%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D/#5-chain-of-responsibility-pattern","title":"5. \u8d23\u4efb\u94fe\u6a21\u5f0f (Chain of Responsibility Pattern)","text":"<ul> <li>\u5b9e\u73b0\u601d\u8def: \u4e3a\u8bf7\u6c42\u521b\u5efa\u4e86\u4e00\u4e2a\u63a5\u6536\u8005\u5bf9\u8c61\u7684\u94fe\u3002\u8fd9\u79cd\u6a21\u5f0f\u7ed9\u4e88\u8bf7\u6c42\u7684\u7c7b\u578b\uff0c\u5bf9\u8bf7\u6c42\u7684\u53d1\u9001\u8005\u548c\u63a5\u6536\u8005\u8fdb\u884c\u89e3\u8026\u3002\u6bcf\u4e2a\u63a5\u6536\u8005\u90fd\u5305\u542b\u5bf9\u53e6\u4e00\u4e2a\u63a5\u6536\u8005\u7684\u5f15\u7528\u3002\u5982\u679c\u4e00\u4e2a\u5bf9\u8c61\u4e0d\u80fd\u5904\u7406\u8be5\u8bf7\u6c42\uff0c\u90a3\u4e48\u5b83\u4f1a\u628a\u76f8\u540c\u7684\u8bf7\u6c42\u4f20\u7ed9\u4e0b\u4e00\u4e2a\u63a5\u6536\u8005\uff0c\u4f9d\u6b64\u7c7b\u63a8\u3002</li> <li>\u4f7f\u7528\u573a\u666f:<ul> <li>\u6709\u591a\u4e2a\u5bf9\u8c61\u53ef\u4ee5\u5904\u7406\u540c\u4e00\u4e2a\u8bf7\u6c42\uff0c\u5177\u4f53\u54ea\u4e2a\u5bf9\u8c61\u5904\u7406\u8be5\u8bf7\u6c42\u7531\u8fd0\u884c\u65f6\u523b\u81ea\u52a8\u786e\u5b9a\u3002</li> <li>\u5728\u4e0d\u660e\u786e\u6307\u5b9a\u63a5\u6536\u8005\u7684\u60c5\u51b5\u4e0b\uff0c\u5411\u591a\u4e2a\u5bf9\u8c61\u4e2d\u7684\u4e00\u4e2a\u63d0\u4ea4\u4e00\u4e2a\u8bf7\u6c42\u3002</li> <li>\u53ef\u52a8\u6001\u6307\u5b9a\u4e00\u7ec4\u5bf9\u8c61\u5904\u7406\u8bf7\u6c42\u3002</li> </ul> </li> <li>\u4f18\u70b9:<ul> <li>\u964d\u4f4e\u8026\u5408\u5ea6\uff0c\u8bf7\u6c42\u8005\u65e0\u9700\u77e5\u9053\u662f\u54ea\u4e2a\u5bf9\u8c61\u5904\u7406\u4e86\u4ed6\u7684\u8bf7\u6c42\u3002</li> <li>\u53ef\u7b80\u5316\u5bf9\u8c61\u7684\u76f8\u4e92\u8fde\u63a5\uff0c\u589e\u5f3a\u4e86\u7ed9\u5bf9\u8c61\u6307\u6d3e\u804c\u8d23\u7684\u7075\u6d3b\u6027\u3002</li> <li>\u589e\u52a0\u65b0\u7684\u8bf7\u6c42\u5904\u7406\u7c7b\u5f88\u65b9\u4fbf\u3002</li> </ul> </li> <li>\u7f3a\u70b9:<ul> <li>\u4e0d\u80fd\u4fdd\u8bc1\u8bf7\u6c42\u4e00\u5b9a\u88ab\u63a5\u6536\u3002</li> <li>\u5bf9\u94fe\u7684\u6027\u80fd\u6709\u5f71\u54cd\uff0c\u800c\u4e14\u8c03\u8bd5\u65f6\u4e0d\u5bb9\u6613\u89c2\u5bdf\u8fd0\u884c\u65f6\u7684\u7279\u5f81\u3002   </li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E6%B6%88%E8%B4%B9%E9%98%9F%E5%88%97%E7%9A%84%E5%B8%B8%E8%A7%81%E8%AF%AD%E4%B9%89/","title":"\u6d88\u8d39\u961f\u5217\u7684\u5e38\u89c1\u8bed\u4e49","text":"<p>\u6d88\u606f\u961f\u5217\u7684\u6d88\u8d39\u8bed\u4e49\u662f\u6307\u6d88\u606f\u961f\u5217\u7cfb\u7edf\u5728\u751f\u4ea7\u8005\u3001\u6d88\u8d39\u8005\u548c\u961f\u5217\u672c\u8eab\u4e4b\u95f4\u63d0\u4f9b\u7684\u5173\u4e8e\u6d88\u606f\u6295\u9012\u6b21\u6570\u7684\u627f\u8bfa\u3002\u901a\u5e38\u5206\u4e3a\u4ee5\u4e0b\u4e09\u79cd\u7ea7\u522b\uff1a</p> <ol> <li> <p>At-most-once (\u6700\u591a\u4e00\u6b21)</p> <ul> <li>\u542b\u4e49\uff1a\u6d88\u606f\u6700\u591a\u88ab\u6295\u9012\u4e00\u6b21\uff0c\u4f46\u53ef\u80fd\u4f1a\u4e22\u5931\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5b83\u8981\u4e48\u88ab\u6210\u529f\u5904\u7406\u4e00\u6b21\uff0c\u8981\u4e48\u5c31\u5e72\u8106\u4e22\u5931\u4e86\u3002</li> <li>\u5b9e\u73b0\u65b9\u5f0f\uff1a\u6d88\u8d39\u8005\u4ece\u961f\u5217\u4e2d\u62c9\u53d6\u6d88\u606f\u540e\uff0c\u5728\u5904\u7406\u4e1a\u52a1\u903b\u8f91\u4e4b\u524d\uff0c\u7acb\u5373\u5411\u961f\u5217\u53d1\u9001\u786e\u8ba4\uff08ACK\uff09\u3002\u5982\u679c\u6b64\u65f6\u6d88\u8d39\u8005\u5e94\u7528\u5d29\u6e83\uff0c\u800c\u4e1a\u52a1\u903b\u8f91\u5c1a\u672a\u6267\u884c\uff0c\u90a3\u4e48\u8fd9\u6761\u6d88\u606f\u5c31\u6c38\u4e45\u4e22\u5931\u4e86\u3002</li> <li>\u4f18\u70b9\uff1a\u6027\u80fd\u6700\u9ad8\uff0c\u56e0\u4e3a\u6ca1\u6709\u91cd\u8bd5\u7b49\u989d\u5916\u5f00\u9500\u3002</li> <li>\u7f3a\u70b9\uff1a\u4f1a\u4e22\u5931\u6570\u636e\u3002</li> <li>\u9002\u7528\u573a\u666f\uff1a\u5bf9\u6570\u636e\u4e22\u5931\u4e0d\u654f\u611f\u7684\u573a\u666f\uff0c\u5982\u65e5\u5fd7\u6536\u96c6\u3001\u76d1\u63a7\u6307\u6807\u4e0a\u62a5\u7b49\u3002</li> </ul> </li> <li> <p>At-least-once (\u6700\u5c11\u4e00\u6b21)</p> <ul> <li>\u542b\u4e49\uff1a\u6d88\u606f\u4fdd\u8bc1\u81f3\u5c11\u88ab\u6295\u9012\u4e00\u6b21\uff0c\u7edd\u4e0d\u4f1a\u4e22\u5931\uff0c\u4f46\u53ef\u80fd\u4f1a\u88ab\u91cd\u590d\u6295\u9012\u548c\u5904\u7406\u3002</li> <li>\u5b9e\u73b0\u65b9\u5f0f\uff1a\u8fd9\u662f\u5927\u591a\u6570\u6d88\u606f\u961f\u5217\u9ed8\u8ba4\u7684\u8bed\u4e49\u3002\u6d88\u8d39\u8005\u62c9\u53d6\u6d88\u606f\u540e\uff0c\u5148\u6267\u884c\u4e1a\u52a1\u903b\u8f91\uff0c\u5f53\u4e1a\u52a1\u903b\u8f91\u6210\u529f\u5b8c\u6210\u540e\uff0c\u518d\u5411\u961f\u5217\u53d1\u9001\u786e\u8ba4\uff08ACK\uff09\u3002\u5982\u679c\u5728\u4e1a\u52a1\u5904\u7406\u5b8c\u4f46\u53d1\u9001ACK\u524d\uff0c\u6d88\u8d39\u8005\u5d29\u6e83\u4e86\uff0c\u961f\u5217\u4f1a\u8ba4\u4e3a\u8be5\u6d88\u606f\u6ca1\u6709\u88ab\u6210\u529f\u6d88\u8d39\uff0c\u4ece\u800c\u4f1a\u91cd\u65b0\u6295\u9012\u8fd9\u6761\u6d88\u606f\u7ed9\u5176\u4ed6\u6d88\u8d39\u8005\u3002</li> <li>\u4f18\u70b9\uff1a\u4fdd\u8bc1\u6570\u636e\u4e0d\u4e22\u5931\u3002</li> <li>\u7f3a\u70b9\uff1a\u4f1a\u4ea7\u751f\u91cd\u590d\u6d88\u606f\uff0c\u9700\u8981\u6d88\u8d39\u7aef\u6709\u80fd\u529b\u5904\u7406\u91cd\u590d\u6570\u636e\u3002</li> <li>\u9002\u7528\u573a\u666f\uff1a\u7edd\u5927\u591a\u6570\u8981\u6c42\u6570\u636e\u5b8c\u6574\u6027\u7684\u4e1a\u52a1\u573a\u666f\uff0c\u5982\u8ba2\u5355\u5904\u7406\u3001\u652f\u4ed8\u901a\u77e5\u7b49\u3002</li> </ul> </li> <li> <p>Exactly-once (\u7cbe\u786e\u4e00\u6b21)</p> <ul> <li>\u542b\u4e49\uff1a\u8fd9\u662f\u6700\u7406\u60f3\u7684\u72b6\u6001\uff0c\u6d88\u606f\u65e2\u4e0d\u4e22\u5931\uff0c\u4e5f\u4e0d\u91cd\u590d\uff0c\u6bcf\u4e00\u6761\u6d88\u606f\u90fd\u88ab\u7cbe\u786e\u5730\u5904\u7406\u4e00\u6b21\u3002</li> <li>\u73b0\u5b9e\u60c5\u51b5\uff1a\u4e25\u683c\u610f\u4e49\u4e0a\u7684\u201c\u7cbe\u786e\u4e00\u6b21\u201d\u5728\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\u662f\u6781\u96be\u5b9e\u73b0\u7684\u3002\u6211\u4eec\u901a\u5e38\u6240\u8bf4\u7684\u201c\u7cbe\u786e\u4e00\u6b21\u201d\uff0c\u5b9e\u9645\u4e0a\u662f\u901a\u8fc7\u201c\u6700\u5c11\u4e00\u6b21\u201d\u7684\u6295\u9012\u673a\u5236\uff0c\u518d\u52a0\u4e0a\u6d88\u8d39\u7aef\u7684\u5e42\u7b49\u6027\u5904\u7406\uff0c\u5171\u540c\u8fbe\u6210\u7684\u6700\u7ec8\u4e1a\u52a1\u6548\u679c\u4e0a\u7684\u201c\u7cbe\u786e\u4e00\u6b21\u201d\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E6%B6%88%E8%B4%B9%E9%98%9F%E5%88%97%E7%9A%84%E5%B8%B8%E8%A7%81%E8%AF%AD%E4%B9%89/#_1","title":"\u5982\u4f55\u5b9e\u73b0\u201c\u6d88\u8d39\u4e14\u4ec5\u4ec5\u6d88\u8d39\u4e00\u6b21\u201d","text":"<p>\u6b63\u5982\u4e0a\u9762\u6240\u8bf4\uff0c\u5b9e\u73b0\u201c\u7cbe\u786e\u4e00\u6b21\u201d\u6d88\u8d39\u7684\u6838\u5fc3\u601d\u60f3\u662f\uff1a<code>Exactly-Once = At-Least-Once + \u5e42\u7b49\u6027\u5904\u7406</code>\u3002</p> <p>\u4e0b\u9762\u662f\u5b9e\u73b0\u8fd9\u4e00\u76ee\u6807\u7684\u5177\u4f53\u6b65\u9aa4\u548c\u5e38\u89c1\u65b9\u6848\uff1a</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E6%B6%88%E8%B4%B9%E9%98%9F%E5%88%97%E7%9A%84%E5%B8%B8%E8%A7%81%E8%AF%AD%E4%B9%89/#_2","title":"\u7b2c\u4e00\u6b65\uff1a\u786e\u4fdd\u6d88\u606f\u961f\u5217\u7684\u6295\u9012\u8bed\u4e49\u4e3a\u201c\u6700\u5c11\u4e00\u6b21\u201d","text":"<p>\u8fd9\u662f\u5b9e\u73b0\u7cbe\u786e\u4e00\u6b21\u6d88\u8d39\u7684\u57fa\u7840\u3002\u4f60\u9700\u8981\u786e\u4fdd\u4f60\u7684\u6d88\u606f\u961f\u5217\u914d\u7f6e\u548c\u6d88\u8d39\u8005\u4ee3\u7801\u903b\u8f91\u9075\u5faa\u201c\u5148\u5904\u7406\u4e1a\u52a1\uff0c\u540e\u786e\u8ba4\u6d88\u606f\u201d\u7684\u539f\u5219\u3002\u8fd9\u4fdd\u8bc1\u4e86\u5373\u4f7f\u53d1\u751f\u6545\u969c\uff0c\u6d88\u606f\u4e5f\u4e0d\u4f1a\u4e22\u5931\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E6%B6%88%E8%B4%B9%E9%98%9F%E5%88%97%E7%9A%84%E5%B8%B8%E8%A7%81%E8%AF%AD%E4%B9%89/#_3","title":"\u7b2c\u4e8c\u6b65\uff1a\u5728\u6d88\u8d39\u7aef\u5b9e\u73b0\u5e42\u7b49\u6027","text":"<p>\u5e42\u7b49\u6027\uff08Idempotence\uff09\u6307\u7684\u662f\u4e00\u4e2a\u64cd\u4f5c\u65e0\u8bba\u6267\u884c\u4e00\u6b21\u8fd8\u662f\u6267\u884c\u591a\u6b21\uff0c\u5176\u4ea7\u751f\u7684\u5f71\u54cd\u548c\u7ed3\u679c\u90fd\u662f\u76f8\u540c\u7684\u3002\u7531\u4e8e\u201c\u6700\u5c11\u4e00\u6b21\u201d\u8bed\u4e49\u53ef\u80fd\u5bfc\u81f4\u6d88\u606f\u91cd\u590d\uff0c\u6d88\u8d39\u7aef\u7684\u4e1a\u52a1\u903b\u8f91\u5fc5\u987b\u88ab\u8bbe\u8ba1\u6210\u5e42\u7b49\u7684\uff0c\u4ee5\u5e94\u5bf9\u91cd\u590d\u6d88\u606f\u3002</p> <p>\u4ee5\u4e0b\u662f\u51e0\u79cd\u5b9e\u73b0\u5e42\u7b49\u6027\u7684\u5e38\u89c1\u65b9\u6cd5\uff1a</p> <ol> <li> <p>\u4f7f\u7528\u552f\u4e00ID + \u6301\u4e45\u5316\u5b58\u50a8     \u8fd9\u662f\u6700\u901a\u7528\u548c\u5e38\u89c1\u7684\u65b9\u6848\u3002</p> <ul> <li>\u673a\u5236\uff1a\u4e3a\u6bcf\u4e00\u6761\u6d88\u606f\u751f\u6210\u4e00\u4e2a\u5168\u5c40\u552f\u4e00\u7684\u4e1a\u52a1ID\uff08\u4f8b\u5982\u8ba2\u5355ID\u3001\u652f\u4ed8\u6d41\u6c34\u53f7\uff09\u3002\u6d88\u8d39\u8005\u5728\u5904\u7406\u6d88\u606f\u65f6\uff0c\u5148\u67e5\u8be2\u8fd9\u4e2a\u552f\u4e00ID\u662f\u5426\u5df2\u7ecf\u88ab\u5904\u7406\u8fc7\u3002</li> <li>\u6d41\u7a0b\uff1a<ol> <li>\u6d88\u8d39\u8005\u6536\u5230\u6d88\u606f\uff0c\u63d0\u53d6\u51fa\u552f\u4e00ID\u3002</li> <li>\u53bb\u4e00\u4e2a\u6301\u4e45\u5316\u5b58\u50a8\uff08\u5982Redis\u3001\u6570\u636e\u5e93\uff09\u4e2d\u67e5\u8be2\u8fd9\u4e2aID\u662f\u5426\u5b58\u5728\u3002</li> <li>\u5982\u679c\u5b58\u5728\uff0c\u8bf4\u660e\u662f\u91cd\u590d\u6d88\u606f\uff0c\u76f4\u63a5\u5ffd\u7565\u5e76\u624b\u52a8ACK\u3002</li> <li>\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u5219\u6267\u884c\u4e1a\u52a1\u903b\u8f91\uff0c\u5e76\u5c06\u8fd9\u4e2a\u552f\u4e00ID\u5b58\u5165\u6301\u4e45\u5316\u5b58\u50a8\u4e2d\u3002\u6700\u540e\u518dACK\u6d88\u606f\u3002</li> </ol> </li> <li>\u6ce8\u610f\uff1a\u4e1a\u52a1\u903b\u8f91\u7684\u6267\u884c\u548c\u552f\u4e00ID\u7684\u5b58\u50a8\u8fd9\u4e24\u4e2a\u6b65\u9aa4\uff0c\u6700\u597d\u80fd\u653e\u5728\u540c\u4e00\u4e2a\u672c\u5730\u4e8b\u52a1\u4e2d\uff0c\u4ee5\u4fdd\u8bc1\u539f\u5b50\u6027\u3002</li> </ul> </li> <li> <p>\u5229\u7528\u6570\u636e\u5e93\u7684\u552f\u4e00\u7ea6\u675f     \u5982\u679c\u4f60\u7684\u4e1a\u52a1\u903b\u8f91\u662f\u5411\u6570\u636e\u5e93\u4e2d\u63d2\u5165\u4e00\u6761\u6570\u636e\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u975e\u5e38\u7b80\u5355\u9ad8\u6548\u3002</p> <ul> <li>\u673a\u5236\uff1a\u5c06\u6d88\u606f\u7684\u552f\u4e00ID\u4f5c\u4e3a\u6570\u636e\u5e93\u8868\u7684\u4e3b\u952e\u6216\u552f\u4e00\u7d22\u5f15\u3002</li> <li>\u6d41\u7a0b\uff1a<ol> <li>\u6d88\u8d39\u8005\u6536\u5230\u6d88\u606f\uff0c\u76f4\u63a5\u5c1d\u8bd5\u5c06\u6570\u636e\u63d2\u5165\u6570\u636e\u5e93\u3002</li> <li>\u5982\u679c\u63d2\u5165\u6210\u529f\uff0c\u8bf4\u660e\u662f\u65b0\u6d88\u606f\uff0c\u4e1a\u52a1\u5904\u7406\u5b8c\u6210\u3002</li> <li>\u5982\u679c\u63d2\u5165\u5931\u8d25\uff08\u56e0\u4e3a\u4e3b\u952e\u6216\u552f\u4e00\u952e\u51b2\u7a81\uff09\uff0c\u8bf4\u660e\u662f\u91cd\u590d\u6d88\u606f\u3002\u6b64\u65f6\u6355\u83b7\u8fd9\u4e2a\u5f02\u5e38\uff0c\u5c06\u5b83\u89c6\u4e3a\u4e1a\u52a1\u5904\u7406\u6210\u529f\uff0c\u7136\u540eACK\u6d88\u606f\u5373\u53ef\u3002</li> </ol> </li> </ul> </li> <li> <p>\u4f7f\u7528\u72b6\u6001\u673a\u6216\u7248\u672c\u53f7\uff08\u4e50\u89c2\u9501\uff09     \u8fd9\u79cd\u65b9\u6cd5\u9002\u7528\u4e8e\u66f4\u65b0\u64cd\u4f5c\u3002</p> <ul> <li>\u673a\u5236\uff1a\u4e3a\u9700\u8981\u66f4\u65b0\u7684\u6570\u636e\u5f15\u5165\u4e00\u4e2a\u7248\u672c\u53f7\uff08version\uff09\u6216\u8005\u72b6\u6001\uff08status\uff09\u3002\u6bcf\u6b21\u66f4\u65b0\u65f6\uff0c\u90fd\u8981\u6c42\u7248\u672c\u53f7\u6216\u72b6\u6001\u5fc5\u987b\u662f\u67d0\u4e2a\u524d\u7f6e\u503c\u3002</li> <li>\u6d41\u7a0b\uff1a<ol> <li>\u4f8b\u5982\uff0c\u4e00\u4e2a\u8ba2\u5355\u6709\u201c\u5f85\u652f\u4ed8\u201d\u3001\u201c\u5df2\u652f\u4ed8\u201d\u3001\u201c\u5df2\u53d1\u8d27\u201d\u7b49\u72b6\u6001\u3002\u4e00\u4e2a\u652f\u4ed8\u6210\u529f\u7684\u6d88\u606f\uff0c\u53ea\u4f1a\u5c06\u201c\u5f85\u652f\u4ed8\u201d\u72b6\u6001\u7684\u8ba2\u5355\u66f4\u65b0\u4e3a\u201c\u5df2\u652f\u4ed8\u201d\u3002</li> <li>SQL\u793a\u4f8b\uff1a<code>UPDATE orders SET status = '\u5df2\u652f\u4ed8' WHERE order_id = ? AND status = '\u5f85\u652f\u4ed8';</code></li> <li>\u5f53\u91cd\u590d\u7684\u652f\u4ed8\u6d88\u606f\u5230\u6765\u65f6\uff0c\u7531\u4e8e\u8ba2\u5355\u72b6\u6001\u5df2\u7ecf\u4e0d\u662f\u201c\u5f85\u652f\u4ed8\u201d\uff0c\u8fd9\u6761SQL\u8bed\u53e5\u4f1a\u6267\u884c\u6210\u529f\u4f46\u5f71\u54cd\u7684\u884c\u6570\u4e3a0\u3002\u6d88\u8d39\u8005\u68c0\u67e5\u53d7\u5f71\u54cd\u7684\u884c\u6570\uff0c\u5c31\u77e5\u9053\u8fd9\u4e2a\u91cd\u590d\u64cd\u4f5c\u6ca1\u6709\u4ea7\u751f\u526f\u4f5c\u7528\u3002</li> </ol> </li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E6%B6%88%E8%B4%B9%E9%98%9F%E5%88%97%E7%9A%84%E5%B8%B8%E8%A7%81%E8%AF%AD%E4%B9%89/#offset","title":"\u7b2c\u4e09\u6b65\uff1a\u5c06\u4e1a\u52a1\u64cd\u4f5c\u548c\u6d88\u606f\u786e\u8ba4\uff08\u6216Offset\u63d0\u4ea4\uff09\u539f\u5b50\u5316","text":"<p>\u8fd9\u662f\u6700\u53ef\u9760\u7684\u65b9\u6848\uff0c\u901a\u5e38\u7528\u4e8e\u5bf9\u4e00\u81f4\u6027\u8981\u6c42\u6781\u9ad8\u7684\u91d1\u878d\u7b49\u573a\u666f\u3002</p> <ul> <li>\u95ee\u9898\u70b9\uff1a\u5728\u6807\u51c6\u7684\u201c\u5148\u5904\u7406\u4e1a\u52a1\uff0c\u540eACK\u201d\u6d41\u7a0b\u4e2d\uff0c\u5982\u679c\u5728\u4e1a\u52a1\u63d0\u4ea4\u4e4b\u540e\u3001ACK\u4e4b\u524d\u7cfb\u7edf\u5d29\u6e83\uff0c\u5c31\u4f1a\u5bfc\u81f4\u6d88\u606f\u91cd\u590d\u3002</li> <li> <p>\u89e3\u51b3\u65b9\u6848\uff1a\u5c06\u4e1a\u52a1\u64cd\u4f5c\u7684\u6570\u636e\u5e93\u4e8b\u52a1\u548c\u6d88\u606f\u7684ACK\uff08\u5728Kafka\u4e2d\u662f\u63d0\u4ea4Offset\uff09\u7ed1\u5b9a\u6210\u4e00\u4e2a\u539f\u5b50\u64cd\u4f5c\u3002</p> <ul> <li>\u6d41\u7a0b\uff1a<ol> <li>\u6d88\u8d39\u8005\u5f00\u542f\u6570\u636e\u5e93\u4e8b\u52a1\u3002</li> <li>\u5728\u4e8b\u52a1\u4e2d\u6267\u884c\u6240\u6709\u4e1a\u52a1SQL\u3002</li> <li>\u5728\u540c\u4e00\u4e2a\u4e8b\u52a1\u4e2d\uff0c\u5c06\u6d88\u606f\u7684\u6d88\u8d39\u72b6\u6001\uff08\u6216Kafka\u7684Offset\uff09\u4e5f\u8bb0\u5f55\u5230\u4e00\u5f20\u6570\u636e\u5e93\u8868\u4e2d\u3002</li> <li>\u63d0\u4ea4\u6570\u636e\u5e93\u4e8b\u52a1\u3002</li> <li>\u53ea\u6709\u5f53\u6570\u636e\u5e93\u4e8b\u52a1\u6210\u529f\u63d0\u4ea4\u540e\uff0c\u624d\u8ba4\u4e3a\u6d88\u606f\u5904\u7406\u6210\u529f\uff08\u6b64\u65f6\u53ef\u4ee5\u5f02\u6b65\u5730ACK\u6d88\u606f\uff0c\u5373\u4f7fACK\u5931\u8d25\uff0c\u7531\u4e8e\u6d88\u8d39\u72b6\u6001\u5df2\u8bb0\u5f55\u5728\u6570\u636e\u5e93\uff0c\u4e0b\u6b21\u91cd\u590d\u6d88\u8d39\u65f6\u53ef\u4ee5\u67e5\u8be2\u6570\u636e\u5e93\u5f97\u77e5\u5df2\u5904\u7406\u8fc7\uff09\u3002</li> </ol> </li> </ul> <p>\u8fd9\u79cd\u65b9\u5f0f\u5229\u7528\u4e86\u6570\u636e\u5e93\u4e8b\u52a1\u7684ACID\u7279\u6027\uff0c\u6765\u4fdd\u8bc1\u4e1a\u52a1\u5904\u7406\u548c\u6d88\u8d39\u72b6\u6001\u8bb0\u5f55\u7684\u6700\u7ec8\u4e00\u81f4\u6027\uff0c\u4ece\u800c\u5b9e\u73b0\u4e86\u4e8b\u5b9e\u4e0a\u7684\u201c\u7cbe\u786e\u4e00\u6b21\u201d\u6d88\u8d39\u3002\u8bb8\u591a\u73b0\u4ee3\u7684\u6d88\u606f\u7cfb\u7edf\uff08\u5982Kafka\uff09\u7684\u4e8b\u52a1\u6027\u6d88\u606f\u529f\u80fd\uff0c\u5c31\u662f\u4e3a\u4e86\u7b80\u5316\u8fd9\u79cd\u6a21\u5f0f\u7684\u5b9e\u73b0\u3002</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E9%99%A4%E4%BA%86%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%EF%BC%8C%E4%BD%A0%E8%BF%98%E4%BA%86%E8%A7%A3%E5%93%AA%E4%BA%9B%E5%85%B6%E4%BB%96%E7%9A%84%E7%B3%BB%E7%BB%9F%E8%A7%A3%E8%80%A6%E6%96%B9%E6%B3%95%EF%BC%9F%E5%AE%83%E4%BB%AC%E5%90%84%E8%87%AA%E9%80%82%E7%94%A8%E4%BA%8E%E4%BB%80%E4%B9%88%E5%9C%BA%E6%99%AF%EF%BC%8C%E4%BC%98%E7%BC%BA%E7%82%B9%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F/","title":"\u9664\u4e86\u6d88\u606f\u961f\u5217\uff0c\u4f60\u8fd8\u4e86\u89e3\u54ea\u4e9b\u5176\u4ed6\u7684\u7cfb\u7edf\u89e3\u8026\u65b9\u6cd5\uff1f\u5b83\u4eec\u5404\u81ea\u9002\u7528\u4e8e\u4ec0\u4e48\u573a\u666f\uff0c\u4f18\u7f3a\u70b9\u662f\u4ec0\u4e48\uff1f","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E9%99%A4%E4%BA%86%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%EF%BC%8C%E4%BD%A0%E8%BF%98%E4%BA%86%E8%A7%A3%E5%93%AA%E4%BA%9B%E5%85%B6%E4%BB%96%E7%9A%84%E7%B3%BB%E7%BB%9F%E8%A7%A3%E8%80%A6%E6%96%B9%E6%B3%95%EF%BC%9F%E5%AE%83%E4%BB%AC%E5%90%84%E8%87%AA%E9%80%82%E7%94%A8%E4%BA%8E%E4%BB%80%E4%B9%88%E5%9C%BA%E6%99%AF%EF%BC%8C%E4%BC%98%E7%BC%BA%E7%82%B9%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F/#_1","title":"\u4e8b\u4ef6\u9a71\u52a8\u67b6\u6784","text":"<ul> <li>\u63cf\u8ff0: \u4e8b\u4ef6\u9a71\u52a8\u67b6\u6784\u662f\u4e00\u79cd\u96c6\u6210\u67b6\u6784\u6a21\u5f0f\uff0c\u5176\u4e2d\u5e94\u7528\u3001\u7ec4\u4ef6\u6216\u670d\u52a1\u901a\u8fc7\u53d1\u5e03\u548c\u8ba2\u9605\u4e8b\u4ef6\u6765\u8fdb\u884c\u901a\u4fe1\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u8c03\u7528\u3002\u4e8b\u4ef6\u4ee3\u8868\u7cfb\u7edf\u4e2d\u53d1\u751f\u7684\u91cd\u8981\u72b6\u6001\u53d8\u5316\u3002\u53d1\u5e03\u8005\u53d1\u9001\u4e8b\u4ef6\uff0c\u8ba2\u9605\u8005\u63a5\u6536\u5e76\u5904\u7406\u611f\u5174\u8da3\u7684\u4e8b\u4ef6\uff0c\u4e24\u8005\u4e4b\u95f4\u5f7c\u6b64\u72ec\u7acb\uff0c\u4e0d\u77e5\u9053\u5bf9\u65b9\u7684\u5b58\u5728\u3002</li> <li>\u9002\u7528\u573a\u666f:<ul> <li>\u9700\u8981\u589e\u5f3a\u670d\u52a1\u97e7\u6027\uff0c\u4e0b\u6e38\u670d\u52a1\u5931\u8d25\u6216\u5b95\u673a\u4e0d\u5f71\u54cd\u4e0a\u6e38\u3002</li> <li>\u6570\u636e\u53d8\u5316\u901a\u77e5\uff0c\u4e00\u4e2a\u670d\u52a1\u7684\u6570\u636e\u53d8\u5316\u9700\u8981\u901a\u77e5\u591a\u4e2a\u5176\u4ed6\u670d\u52a1\u3002</li> <li>\u6784\u5efa\u5f00\u653e\u5f0f\u63a5\u53e3\uff0c\u4e8b\u4ef6\u63d0\u4f9b\u8005\u65e0\u9700\u5173\u5fc3\u8ba2\u9605\u8005\u3002</li> <li>\u4e8b\u4ef6\u6d41\u5904\u7406\u548c\u57fa\u4e8e\u4e8b\u4ef6\u89e6\u53d1\u7684\u54cd\u5e94\uff0c\u5982IoT\u6570\u636e\u5904\u7406\u3001\u5b9e\u65f6\u6570\u636e\u5206\u6790\u3002</li> <li>\u590d\u6742\u4e8b\u4ef6\u5904\u7406\u548c\u6247\u51fa\u4e0e\u5e76\u884c\u5904\u7406\u7684\u573a\u666f\u3002</li> </ul> </li> <li>\u4f18\u70b9:<ul> <li>\u9ad8\u5ea6\u89e3\u8026: \u53d1\u5e03\u8005\u548c\u8ba2\u9605\u8005\u4e4b\u95f4\u6ca1\u6709\u76f4\u63a5\u4f9d\u8d56\uff0c\u4ec5\u4f9d\u8d56\u4e8e\u4e8b\u4ef6\u548c\u4e8b\u4ef6\u603b\u7ebf\uff0c\u63d0\u9ad8\u4e86\u7cfb\u7edf\u7684\u7075\u6d3b\u6027\u3002</li> <li>\u9ad8\u5f39\u6027\u4e0e\u5bb9\u9519\u6027: \u5373\u4f7f\u90e8\u5206\u670d\u52a1\u5931\u8d25\uff0c\u5176\u4ed6\u670d\u52a1\u4e5f\u80fd\u7ee7\u7eed\u8fd0\u884c\uff0c\u56e0\u4e3a\u5b83\u4eec\u662f\u5f02\u6b65\u96c6\u6210\u7684\u3002</li> <li>\u53ef\u6269\u5c55\u6027: \u6613\u4e8e\u6dfb\u52a0\u65b0\u7684\u4e8b\u4ef6\u6d88\u8d39\u8005\uff0c\u5b9e\u73b0\u6247\u51fa\u4e0e\u5e76\u884c\u5904\u7406\u3002</li> <li>\u654f\u6377\u5f00\u53d1: \u51cf\u5c11\u4e86\u670d\u52a1\u95f4\u7e41\u7410\u7684\u534f\u8c03\u5de5\u4f5c\uff0c\u52a0\u901f\u5f00\u53d1\u6d41\u7a0b\u3002</li> <li>\u5ba1\u8ba1\u4e0e\u8ffd\u8e2a: \u4e8b\u4ef6\u6d41\u53ef\u4ee5\u4f5c\u4e3a\u4e1a\u52a1\u6d41\u7a0b\u7684\u8bb0\u5f55\uff0c\u4fbf\u4e8e\u5ba1\u8ba1\u548c\u95ee\u9898\u8ffd\u8e2a\u3002</li> </ul> </li> <li>\u7f3a\u70b9:<ul> <li>\u6700\u7ec8\u4e00\u81f4\u6027: \u96be\u4ee5\u4fdd\u8bc1\u5f3a\u4e00\u81f4\u6027\uff0c\u901a\u5e38\u9700\u8981\u8bbe\u8ba1\u8865\u507f\u673a\u5236\u3002</li> <li>\u8c03\u8bd5\u4e0e\u76d1\u63a7\u590d\u6742: \u7f3a\u4e4f\u76f4\u63a5\u8c03\u7528\u94fe\uff0c\u95ee\u9898\u8ffd\u8e2a\u548c\u8c03\u8bd5\u53ef\u80fd\u66f4\u52a0\u56f0\u96be\u3002</li> <li>\u4e8b\u4ef6\u5b9a\u4e49\u4e0e\u7ba1\u7406: \u9700\u8981\u7cbe\u5fc3\u8bbe\u8ba1\u4e8b\u4ef6\u7684Schema\u548c\u7248\u672c\u63a7\u5236\uff0c\u907f\u514d\u9690\u5f0f\u4f9d\u8d56\u3002</li> <li>\u90e8\u7f72\u590d\u6742: \u76f8\u6bd4\u4e8e\u76f4\u63a5\u8c03\u7528\uff0c\u4e8b\u4ef6\u9a71\u52a8\u67b6\u6784\u7684\u90e8\u7f72\u548c\u7ba1\u7406\u53ef\u80fd\u66f4\u590d\u6742\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E9%99%A4%E4%BA%86%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%EF%BC%8C%E4%BD%A0%E8%BF%98%E4%BA%86%E8%A7%A3%E5%93%AA%E4%BA%9B%E5%85%B6%E4%BB%96%E7%9A%84%E7%B3%BB%E7%BB%9F%E8%A7%A3%E8%80%A6%E6%96%B9%E6%B3%95%EF%BC%9F%E5%AE%83%E4%BB%AC%E5%90%84%E8%87%AA%E9%80%82%E7%94%A8%E4%BA%8E%E4%BB%80%E4%B9%88%E5%9C%BA%E6%99%AF%EF%BC%8C%E4%BC%98%E7%BC%BA%E7%82%B9%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F/#_2","title":"\u5fae\u670d\u52a1\u67b6\u6784","text":"<ul> <li>\u63cf\u8ff0: \u5fae\u670d\u52a1\u67b6\u6784\u5c06\u4e00\u4e2a\u5927\u578b\u7684\u3001\u590d\u6742\u7684\u5e94\u7528\u7a0b\u5e8f\u62c6\u5206\u4e3a\u4e00\u7cfb\u5217\u5c0f\u578b\u3001\u72ec\u7acb\u7684\u670d\u52a1\uff0c\u6bcf\u4e2a\u670d\u52a1\u90fd\u56f4\u7ed5\u7279\u5b9a\u7684\u4e1a\u52a1\u80fd\u529b\u6784\u5efa\uff0c\u5e76\u53ef\u4ee5\u72ec\u7acb\u5f00\u53d1\u3001\u90e8\u7f72\u548c\u6269\u5c55\u3002</li> <li>\u9002\u7528\u573a\u666f:<ul> <li>\u5927\u578b\u3001\u590d\u6742\u7684\u4e1a\u52a1\u7cfb\u7edf\uff0c\u9700\u8981\u9ad8\u53ef\u6269\u5c55\u6027\u548c\u9ad8\u53ef\u7ef4\u62a4\u6027\u3002</li> <li>\u9700\u8981\u652f\u6301\u591a\u79cd\u6280\u672f\u6808\u5f02\u6784\u7684\u573a\u666f\u3002</li> <li>\u56e2\u961f\u9700\u8981\u9ad8\u5ea6\u81ea\u6cbb\uff0c\u72ec\u7acb\u5f00\u53d1\u548c\u7ba1\u7406\u670d\u52a1\u7684\u573a\u666f\u3002</li> </ul> </li> <li>\u4f18\u70b9:<ul> <li>\u9ad8\u5ea6\u89e3\u8026\u4e0e\u72ec\u7acb\u6027: \u670d\u52a1\u56f4\u7ed5\u4e1a\u52a1\u80fd\u529b\u5212\u5206\uff0c\u72ec\u7acb\u5f00\u53d1\u3001\u6d4b\u8bd5\u3001\u90e8\u7f72\u548c\u8fd0\u7ef4\uff0c\u51cf\u5c11\u670d\u52a1\u95f4\u4f9d\u8d56\u3002</li> <li>\u53ef\u6269\u5c55\u6027: \u6bcf\u4e2a\u670d\u52a1\u90fd\u53ef\u4ee5\u72ec\u7acb\u6269\u5c55\uff0c\u63d0\u9ad8\u7cfb\u7edf\u6574\u4f53\u5f39\u6027\u3002</li> <li>\u6280\u672f\u5f02\u6784: \u5404\u4e2a\u670d\u52a1\u53ef\u4ee5\u4f7f\u7528\u4e0d\u540c\u7684\u7f16\u7a0b\u8bed\u8a00\u548c\u6570\u636e\u5b58\u50a8\uff0c\u9009\u62e9\u6700\u5408\u9002\u7684\u6280\u672f\u3002</li> <li>\u6545\u969c\u9694\u79bb: \u5355\u4e2a\u670d\u52a1\u6545\u969c\u4e0d\u4f1a\u5bfc\u81f4\u6574\u4e2a\u7cfb\u7edf\u5d29\u6e83\u3002</li> <li>\u6613\u4e8e\u7ef4\u62a4: \u670d\u52a1\u89c4\u6a21\u5c0f\uff0c\u66f4\u5bb9\u6613\u7406\u89e3\u548c\u7ef4\u62a4\u3002</li> </ul> </li> <li>\u7f3a\u70b9:<ul> <li>\u5206\u5e03\u5f0f\u590d\u6742\u6027: \u5f15\u5165\u4e86\u5206\u5e03\u5f0f\u4e8b\u52a1\u3001\u670d\u52a1\u95f4\u901a\u4fe1\u3001\u6570\u636e\u4e00\u81f4\u6027\u7b49\u590d\u6742\u95ee\u9898\u3002</li> <li>\u8fd0\u7ef4\u6311\u6218: \u90e8\u7f72\u3001\u76d1\u63a7\u3001\u65e5\u5fd7\u6536\u96c6\u548c\u8c03\u8bd5\u7684\u590d\u6742\u5ea6\u663e\u8457\u589e\u52a0\u3002</li> <li>\u6570\u636e\u7ba1\u7406\u590d\u6742: \u9700\u8981\u72ec\u7acb\u7ba1\u7406\u5404\u670d\u52a1\u7684\u6570\u636e\uff0c\u907f\u514d\u5171\u4eab\u6570\u636e\u5e93\u5e26\u6765\u7684\u8026\u5408\u3002</li> <li>\u670d\u52a1\u6cbb\u7406: \u9700\u8981\u670d\u52a1\u6ce8\u518c\u4e0e\u53d1\u73b0\u3001API\u7f51\u5173\u7b49\u989d\u5916\u7ec4\u4ef6\u8fdb\u884c\u6cbb\u7406\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E9%99%A4%E4%BA%86%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%EF%BC%8C%E4%BD%A0%E8%BF%98%E4%BA%86%E8%A7%A3%E5%93%AA%E4%BA%9B%E5%85%B6%E4%BB%96%E7%9A%84%E7%B3%BB%E7%BB%9F%E8%A7%A3%E8%80%A6%E6%96%B9%E6%B3%95%EF%BC%9F%E5%AE%83%E4%BB%AC%E5%90%84%E8%87%AA%E9%80%82%E7%94%A8%E4%BA%8E%E4%BB%80%E4%B9%88%E5%9C%BA%E6%99%AF%EF%BC%8C%E4%BC%98%E7%BC%BA%E7%82%B9%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F/#api","title":"API \u7f51\u5173","text":"<ul> <li>\u63cf\u8ff0: API \u7f51\u5173\u662f\u4f4d\u4e8e\u5ba2\u6237\u7aef\u548c\u540e\u7aef\u5fae\u670d\u52a1\u4e4b\u95f4\u7684\u4e00\u4e2a\u4e2d\u95f4\u5c42\uff0c\u4f5c\u4e3a\u6240\u6709\u5ba2\u6237\u7aef\u8bf7\u6c42\u7684\u5355\u4e00\u5165\u53e3\u70b9\u3002\u5b83\u8d1f\u8d23\u8bf7\u6c42\u8def\u7531\u3001\u534f\u8bae\u8f6c\u6362\u3001\u8ba4\u8bc1\u6388\u6743\u3001\u9650\u6d41\u7194\u65ad\u3001\u65e5\u5fd7\u76d1\u63a7\u3001\u6570\u636e\u805a\u5408\u7b49\u901a\u7528\u529f\u80fd\u3002</li> <li>\u9002\u7528\u573a\u666f:<ul> <li>\u5fae\u670d\u52a1\u67b6\u6784\uff0c\u9700\u8981\u7edf\u4e00\u7ba1\u7406\u548c\u66b4\u9732\u670d\u52a1\u63a5\u53e3\u3002</li> <li>\u9700\u8981\u5bf9\u4e0d\u540c\u5ba2\u6237\u7aef\uff08Web\u3001\u79fb\u52a8\u3001\u7b2c\u4e09\u65b9\uff09\u63d0\u4f9b\u5b9a\u5236\u5316API\u7684\u573a\u666f\u3002</li> <li>\u9700\u8981\u7edf\u4e00\u5904\u7406\u5b89\u5168\u3001\u9650\u6d41\u3001\u65e5\u5fd7\u7b49\u6a2a\u5207\u5173\u6ce8\u70b9\u3002</li> </ul> </li> <li>\u4f18\u70b9:<ul> <li>\u89e3\u8026\u5ba2\u6237\u7aef\u4e0e\u540e\u7aef\u670d\u52a1: \u5ba2\u6237\u7aef\u65e0\u9700\u611f\u77e5\u540e\u7aef\u670d\u52a1\u7684\u5177\u4f53\u62d3\u6251\u548c\u5b9e\u73b0\u7ec6\u8282\uff0c\u964d\u4f4e\u4e86\u8026\u5408\u5ea6\u3002</li> <li>\u7b80\u5316\u5ba2\u6237\u7aef\u5f00\u53d1: \u5ba2\u6237\u7aef\u53ea\u9700\u4e0e\u7f51\u5173\u4ea4\u4e92\uff0c\u7f51\u5173\u53ef\u805a\u5408\u591a\u4e2a\u670d\u52a1\u7684\u54cd\u5e94\uff0c\u51cf\u5c11\u5ba2\u6237\u7aef\u8bf7\u6c42\u6b21\u6570\u3002</li> <li>\u7edf\u4e00\u7ba1\u7406: \u96c6\u4e2d\u5904\u7406\u8ba4\u8bc1\u3001\u6388\u6743\u3001\u9650\u6d41\u3001\u76d1\u63a7\u7b49\u529f\u80fd\uff0c\u63d0\u9ad8\u5f00\u53d1\u6548\u7387\u548c\u7cfb\u7edf\u4e00\u81f4\u6027\u3002</li> <li>\u5b89\u5168\u589e\u5f3a: \u63d0\u4f9b\u7edf\u4e00\u7684\u5b89\u5168\u5165\u53e3\u548c\u9632\u62a4\u3002</li> <li>\u534f\u8bae\u8f6c\u6362: \u652f\u6301\u4e0d\u540c\u534f\u8bae\uff08\u5982HTTP/REST\u3001gRPC\uff09\u7684\u8f6c\u6362\u3002</li> </ul> </li> <li>\u7f3a\u70b9:<ul> <li>\u5355\u70b9\u6545\u969c\u98ce\u9669: \u7f51\u5173\u672c\u8eab\u53ef\u80fd\u6210\u4e3a\u7cfb\u7edf\u7684\u5355\u70b9\u6545\u969c\uff0c\u9700\u8981\u9ad8\u53ef\u7528\u8bbe\u8ba1\u3002</li> <li>\u589e\u52a0\u5ef6\u8fdf: \u589e\u52a0\u4e86\u4e00\u5c42\u7f51\u7edc\u8df3\u8dc3\u548c\u5904\u7406\uff0c\u53ef\u80fd\u7565\u5fae\u589e\u52a0\u8bf7\u6c42\u5ef6\u8fdf\u3002</li> <li>\u5f00\u53d1\u548c\u7ef4\u62a4\u6210\u672c: \u7f51\u5173\u7684\u5f00\u53d1\u3001\u90e8\u7f72\u548c\u7ef4\u62a4\u9700\u8981\u989d\u5916\u7684\u6295\u5165\u3002</li> <li>\u4e1a\u52a1\u903b\u8f91\u8513\u5ef6: \u4e0d\u5f53\u4f7f\u7528\u53ef\u80fd\u5bfc\u81f4\u7f51\u5173\u627f\u62c5\u8fc7\u591a\u4e1a\u52a1\u903b\u8f91\uff0c\u53d8\u6210\u65b0\u7684\u201c\u5de8\u77f3\u5e94\u7528\u201d\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E9%99%A4%E4%BA%86%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%EF%BC%8C%E4%BD%A0%E8%BF%98%E4%BA%86%E8%A7%A3%E5%93%AA%E4%BA%9B%E5%85%B6%E4%BB%96%E7%9A%84%E7%B3%BB%E7%BB%9F%E8%A7%A3%E8%80%A6%E6%96%B9%E6%B3%95%EF%BC%9F%E5%AE%83%E4%BB%AC%E5%90%84%E8%87%AA%E9%80%82%E7%94%A8%E4%BA%8E%E4%BB%80%E4%B9%88%E5%9C%BA%E6%99%AF%EF%BC%8C%E4%BC%98%E7%BC%BA%E7%82%B9%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F/#_3","title":"\u4f9d\u8d56\u6ce8\u5165","text":"<ul> <li>\u63cf\u8ff0: \u4f9d\u8d56\u6ce8\u5165\u662f\u4e00\u79cd\u8f6f\u4ef6\u8bbe\u8ba1\u6a21\u5f0f\uff0c\u5b83\u5c06\u5bf9\u8c61\u6240\u4f9d\u8d56\u7684\u5176\u4ed6\u5bf9\u8c61\uff08\u4f9d\u8d56\uff09\u4e0d\u662f\u7531\u5bf9\u8c61\u81ea\u8eab\u521b\u5efa\u6216\u83b7\u53d6\uff0c\u800c\u662f\u901a\u8fc7\u5916\u90e8\uff08\u901a\u5e38\u662fDI\u5bb9\u5668\u6216\u6846\u67b6\uff09\u5728\u8fd0\u884c\u65f6\u63d0\u4f9b\u7ed9\u5b83\u3002\u8fd9\u5b9e\u73b0\u4e86\u7ec4\u4ef6\u95f4\u7684\u677e\u8026\u5408\u3002</li> <li>\u9002\u7528\u573a\u666f:<ul> <li>\u4efb\u4f55\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u5c24\u5176\u662f\u5728\u9700\u8981\u9ad8\u53ef\u6d4b\u8bd5\u6027\u3001\u53ef\u7ef4\u62a4\u6027\u548c\u6a21\u5757\u5316\u7684\u5927\u578b\u9879\u76ee\u4e2d\u3002</li> <li>\u9700\u8981\u7075\u6d3b\u66ff\u6362\u7ec4\u4ef6\u5b9e\u73b0\uff08\u5982\u5207\u6362\u6570\u636e\u5e93\u8fde\u63a5\u3001\u90ae\u4ef6\u670d\u52a1\uff09\u7684\u573a\u666f\u3002</li> <li>\u6d4b\u8bd5\u9a71\u52a8\u5f00\u53d1\uff08TDD\uff09\u4e2d\uff0c\u4fbf\u4e8eMock\u4f9d\u8d56\u5bf9\u8c61\u3002</li> </ul> </li> <li>\u4f18\u70b9:<ul> <li>\u63d0\u9ad8\u6a21\u5757\u89e3\u8026\u6027: \u5bf9\u8c61\u4e4b\u95f4\u901a\u8fc7\u63a5\u53e3\u800c\u975e\u5177\u4f53\u5b9e\u73b0\u8fdb\u884c\u4f9d\u8d56\uff0c\u964d\u4f4e\u4e86\u76f8\u4e92\u4f9d\u8d56\u7684\u7a0b\u5ea6\u3002</li> <li>\u589e\u5f3a\u53ef\u6d4b\u8bd5\u6027: \u6613\u4e8e\u4e3a\u7ec4\u4ef6\u63d0\u4f9bMock\u6216Stub\u4f9d\u8d56\uff0c\u7b80\u5316\u5355\u5143\u6d4b\u8bd5\u3002</li> <li>\u63d0\u9ad8\u4ee3\u7801\u590d\u7528\u6027: \u7ec4\u4ef6\u53ef\u4ee5\u72ec\u7acb\u4e8e\u5176\u4f9d\u8d56\u800c\u5b58\u5728\u548c\u4f7f\u7528\u3002</li> <li>\u63d0\u9ad8\u53ef\u7ef4\u62a4\u6027: \u4f9d\u8d56\u5173\u7cfb\u6e05\u6670\uff0c\u4fee\u6539\u4e00\u4e2a\u7ec4\u4ef6\u4e0d\u5f71\u54cd\u5176\u4ed6\u7ec4\u4ef6\u3002</li> <li>\u66f4\u7075\u6d3b\u7684\u914d\u7f6e: \u4f9d\u8d56\u5173\u7cfb\u53ef\u4ee5\u5728\u5916\u90e8\u914d\u7f6e\uff0c\u65e0\u9700\u4fee\u6539\u4ee3\u7801\u3002</li> </ul> </li> <li>\u7f3a\u70b9:<ul> <li>\u5b66\u4e60\u66f2\u7ebf: \u5bf9\u4e8e\u521d\u5b66\u8005\u800c\u8a00\uff0c\u7406\u89e3DI\u7684\u6982\u5ff5\u548c\u5bb9\u5668\u7684\u914d\u7f6e\u53ef\u80fd\u9700\u8981\u65f6\u95f4\u3002</li> <li>\u589e\u52a0\u590d\u6742\u6027: \u9700\u8981\u5f15\u5165DI\u6846\u67b6\u6216\u624b\u52a8\u7ba1\u7406\u4f9d\u8d56\uff0c\u53ef\u80fd\u589e\u52a0\u4ee3\u7801\u91cf\u548c\u95f4\u63a5\u6027\u3002</li> <li>\u8fd0\u884c\u65f6\u5f00\u9500: DI\u5bb9\u5668\u5728\u542f\u52a8\u65f6\u9700\u8981\u8fdb\u884c\u4f9d\u8d56\u89e3\u6790\uff0c\u53ef\u80fd\u7565\u5fae\u589e\u52a0\u542f\u52a8\u65f6\u95f4\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E9%99%A4%E4%BA%86%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%EF%BC%8C%E4%BD%A0%E8%BF%98%E4%BA%86%E8%A7%A3%E5%93%AA%E4%BA%9B%E5%85%B6%E4%BB%96%E7%9A%84%E7%B3%BB%E7%BB%9F%E8%A7%A3%E8%80%A6%E6%96%B9%E6%B3%95%EF%BC%9F%E5%AE%83%E4%BB%AC%E5%90%84%E8%87%AA%E9%80%82%E7%94%A8%E4%BA%8E%E4%BB%80%E4%B9%88%E5%9C%BA%E6%99%AF%EF%BC%8C%E4%BC%98%E7%BC%BA%E7%82%B9%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F/#_4","title":"\u9762\u5411\u670d\u52a1\u67b6\u6784","text":"<ul> <li>\u63cf\u8ff0: SOA \u662f\u4e00\u79cd\u67b6\u6784\u98ce\u683c\uff0c\u5b83\u5c06\u5e94\u7528\u7a0b\u5e8f\u8bbe\u8ba1\u4e3a\u4e00\u7ec4\u76f8\u4e92\u72ec\u7acb\u3001\u7c97\u7c92\u5ea6\u7684\u670d\u52a1\uff0c\u8fd9\u4e9b\u670d\u52a1\u901a\u8fc7\u6807\u51c6\u5316\u63a5\u53e3\u8fdb\u884c\u901a\u4fe1\u3002SOA \u5f3a\u8c03\u670d\u52a1\u7684\u53ef\u91cd\u7528\u6027\u3001\u4e92\u64cd\u4f5c\u6027\u548c\u677e\u8026\u5408\u3002</li> <li>\u9002\u7528\u573a\u666f:<ul> <li>\u4f01\u4e1a\u7ea7\u5e94\u7528\u96c6\u6210\uff0c\u9700\u8981\u6574\u5408\u591a\u4e2a\u9057\u7559\u7cfb\u7edf\u6216\u8de8\u90e8\u95e8\u7cfb\u7edf\u3002</li> <li>\u9700\u8981\u6784\u5efa\u53ef\u590d\u7528\u4e1a\u52a1\u80fd\u529b\u7684\u573a\u666f\u3002</li> <li>\u5bf9\u670d\u52a1\u7c92\u5ea6\u8981\u6c42\u76f8\u5bf9\u8f83\u7c97\u7684\u573a\u666f\u3002</li> </ul> </li> <li>\u4f18\u70b9:<ul> <li>\u670d\u52a1\u91cd\u7528: \u4e1a\u52a1\u903b\u8f91\u88ab\u5c01\u88c5\u4e3a\u72ec\u7acb\u670d\u52a1\uff0c\u53ef\u5728\u591a\u4e2a\u5e94\u7528\u4e2d\u590d\u7528\u3002</li> <li>\u677e\u8026\u5408: \u670d\u52a1\u4e4b\u95f4\u901a\u8fc7\u63a5\u53e3\u901a\u4fe1\uff0c\u5b9e\u73b0\u6280\u672f\u6808\u89e3\u8026\u3002</li> <li>\u4e92\u64cd\u4f5c\u6027: \u901a\u5e38\u4f7f\u7528\u6807\u51c6\u534f\u8bae\uff08\u5982SOAP/REST\uff09\uff0c\u4fbf\u4e8e\u4e0d\u540c\u7cfb\u7edf\u96c6\u6210\u3002</li> <li>\u63d0\u9ad8\u7075\u6d3b\u6027: \u6613\u4e8e\u7ec4\u5408\u73b0\u6709\u670d\u52a1\u6765\u6784\u5efa\u65b0\u5e94\u7528\u3002</li> <li>\u7cfb\u7edf\u96c6\u6210: \u89e3\u51b3\u4e86\u4f01\u4e1a\u7cfb\u7edf\u95f4\u901a\u4fe1\u7684\u201c\u7f51\u72b6\u7ed3\u6784\u201d\u95ee\u9898\uff0c\u68b3\u7406\u6210\u201c\u661f\u5f62\u7ed3\u6784\u201d\u3002</li> </ul> </li> <li>\u7f3a\u70b9:<ul> <li>\u670d\u52a1\u7c92\u5ea6: \u7c97\u7c92\u5ea6\u670d\u52a1\u53ef\u80fd\u5bfc\u81f4\u670d\u52a1\u5185\u90e8\u4ecd\u5b58\u5728\u4e00\u5b9a\u8026\u5408\uff0c\u62c6\u5206\u4e0d\u591f\u5f7b\u5e95\u3002</li> <li>ESB\u590d\u6742\u6027: \u901a\u5e38\u4f9d\u8d56\u4f01\u4e1a\u670d\u52a1\u603b\u7ebf\uff08ESB\uff09\u8fdb\u884c\u670d\u52a1\u7f16\u6392\u548c\u7ba1\u7406\uff0cESB\u53ef\u80fd\u6210\u4e3a\u65b0\u7684\u5355\u70b9\u548c\u6027\u80fd\u74f6\u9888\u3002</li> <li>\u6cbb\u7406\u590d\u6742: \u670d\u52a1\u7684\u6ce8\u518c\u3001\u53d1\u73b0\u3001\u7248\u672c\u7ba1\u7406\u548c\u76d1\u63a7\u7b49\u6cbb\u7406\u95ee\u9898\u3002</li> <li>\u4e2d\u5fc3\u5316\u98ce\u9669: \u670d\u52a1\u4e2d\u5fc3\u5316\u53ef\u80fd\u5bfc\u81f4\u67d0\u4e9b\u670d\u52a1\u6545\u969c\u65f6\uff0c\u5f71\u54cd\u8303\u56f4\u6269\u5927\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E9%99%A4%E4%BA%86%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%EF%BC%8C%E4%BD%A0%E8%BF%98%E4%BA%86%E8%A7%A3%E5%93%AA%E4%BA%9B%E5%85%B6%E4%BB%96%E7%9A%84%E7%B3%BB%E7%BB%9F%E8%A7%A3%E8%80%A6%E6%96%B9%E6%B3%95%EF%BC%9F%E5%AE%83%E4%BB%AC%E5%90%84%E8%87%AA%E9%80%82%E7%94%A8%E4%BA%8E%E4%BB%80%E4%B9%88%E5%9C%BA%E6%99%AF%EF%BC%8C%E4%BC%98%E7%BC%BA%E7%82%B9%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F/#_5","title":"\u9886\u57df\u9a71\u52a8\u8bbe\u8ba1","text":"<ul> <li>\u63cf\u8ff0: DDD \u662f\u4e00\u79cd\u8f6f\u4ef6\u5f00\u53d1\u65b9\u6cd5\u8bba\uff0c\u5b83\u5f3a\u8c03\u5c06\u8f6f\u4ef6\u8bbe\u8ba1\u4e0e\u6838\u5fc3\u4e1a\u52a1\u9886\u57df\uff08Domain\uff09\u7d27\u5bc6\u7ed3\u5408\u3002\u901a\u8fc7\u901a\u7528\u8bed\u8a00\uff08Ubiquitous Language\uff09\u3001\u9650\u754c\u4e0a\u4e0b\u6587\uff08Bounded Context\uff09\u3001\u9886\u57df\u4e8b\u4ef6\uff08Domain Event\uff09\u7b49\u6982\u5ff5\uff0c\u6765\u5efa\u6a21\u590d\u6742\u7684\u4e1a\u52a1\u9886\u57df\uff0c\u5b9e\u73b0\u9ad8\u5185\u805a\u3001\u4f4e\u8026\u5408\u7684\u8bbe\u8ba1\u3002</li> <li>\u9002\u7528\u573a\u666f:<ul> <li>\u4e1a\u52a1\u903b\u8f91\u590d\u6742\u3001\u591a\u53d8\u7684\u7cfb\u7edf\uff0c\u9700\u8981\u6df1\u5165\u7406\u89e3\u4e1a\u52a1\u5e76\u5c06\u5176\u6620\u5c04\u5230\u4ee3\u7801\u6a21\u578b\u3002</li> <li>\u5fae\u670d\u52a1\u67b6\u6784\u8bbe\u8ba1\u4e2d\uff0c\u7528\u4e8e\u5212\u5206\u670d\u52a1\u8fb9\u754c\u548c\u5b9a\u4e49\u670d\u52a1\u95f4\u7684\u4ea4\u4e92\u65b9\u5f0f\u3002</li> <li>\u56e2\u961f\u9700\u8981\u9886\u57df\u4e13\u5bb6\u4e0e\u5f00\u53d1\u8005\u7d27\u5bc6\u534f\u4f5c\u7684\u573a\u666f\u3002</li> </ul> </li> <li>\u4f18\u70b9:<ul> <li>\u4e1a\u52a1\u4e0e\u6280\u672f\u5bf9\u9f50: \u786e\u4fdd\u8f6f\u4ef6\u51c6\u786e\u53cd\u6620\u4e1a\u52a1\u9700\u6c42\u548c\u89c4\u5219\uff0c\u51cf\u5c11\u6c9f\u901a\u6210\u672c\u3002</li> <li>\u9ad8\u5185\u805a\u4f4e\u8026\u5408: \u901a\u8fc7\u9650\u754c\u4e0a\u4e0b\u6587\u660e\u786e\u4e1a\u52a1\u8fb9\u754c\uff0c\u4f7f\u7cfb\u7edf\u6a21\u5757\u5185\u90e8\u7d27\u5bc6\u7ec4\u7ec7\uff0c\u5916\u90e8\u677e\u6563\u8026\u5408\u3002</li> <li>\u53ef\u6f14\u8fdb\u6027: \u9886\u57df\u6a21\u578b\u6e05\u6670\uff0c\u4fbf\u4e8e\u7cfb\u7edf\u968f\u7740\u4e1a\u52a1\u53d1\u5c55\u800c\u6f14\u8fdb\u3002</li> <li>\u63d0\u9ad8\u53ef\u7ef4\u62a4\u6027: \u4e1a\u52a1\u903b\u8f91\u96c6\u4e2d\u5728\u9886\u57df\u5c42\uff0c\u6613\u4e8e\u7406\u89e3\u548c\u4fee\u6539\u3002</li> <li>\u9886\u57df\u4e8b\u4ef6\u4fc3\u8fdb\u89e3\u8026: \u9886\u57df\u4e8b\u4ef6\u53ef\u4ee5\u4f5c\u4e3a\u9650\u754c\u4e0a\u4e0b\u6587\u4e4b\u95f4\u5f02\u6b65\u901a\u4fe1\u7684\u673a\u5236\uff0c\u8fdb\u4e00\u6b65\u89e3\u8026\u3002</li> </ul> </li> <li>\u7f3a\u70b9:<ul> <li>\u5b66\u4e60\u66f2\u7ebf\u9661\u5ced: DDD\u7684\u6982\u5ff5\u8f83\u591a\u4e14\u62bd\u8c61\uff0c\u9700\u8981\u56e2\u961f\u6210\u5458\u6df1\u5165\u7406\u89e3\u548c\u5b9e\u8df5\u3002</li> <li>\u524d\u671f\u6295\u5165\u5927: \u6218\u7565\u8bbe\u8ba1\u9636\u6bb5\u9700\u8981\u82b1\u8d39\u8f83\u591a\u65f6\u95f4\u8fdb\u884c\u9886\u57df\u5efa\u6a21\u548c\u8fb9\u754c\u5212\u5206\u3002</li> <li>\u4e0d\u9002\u7528\u4e8e\u7b80\u5355CRUD\u5e94\u7528: \u5bf9\u4e8e\u4e1a\u52a1\u903b\u8f91\u7b80\u5355\u7684\u7cfb\u7edf\uff0cDDD\u53ef\u80fd\u663e\u5f97\u8fc7\u4e8e\u590d\u6742\u3002</li> <li>\u8fc7\u5ea6\u8bbe\u8ba1\u98ce\u9669: \u6ee5\u7528DDD\u6a21\u5f0f\u53ef\u80fd\u5bfc\u81f4\u4e0d\u5fc5\u8981\u7684\u590d\u6742\u6027\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E9%99%A4%E4%BA%86%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%EF%BC%8C%E4%BD%A0%E8%BF%98%E4%BA%86%E8%A7%A3%E5%93%AA%E4%BA%9B%E5%85%B6%E4%BB%96%E7%9A%84%E7%B3%BB%E7%BB%9F%E8%A7%A3%E8%80%A6%E6%96%B9%E6%B3%95%EF%BC%9F%E5%AE%83%E4%BB%AC%E5%90%84%E8%87%AA%E9%80%82%E7%94%A8%E4%BA%8E%E4%BB%80%E4%B9%88%E5%9C%BA%E6%99%AF%EF%BC%8C%E4%BC%98%E7%BC%BA%E7%82%B9%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F/#_6","title":"\u6570\u636e\u89e3\u8026","text":"<ul> <li>\u63cf\u8ff0: \u6570\u636e\u89e3\u8026\u662f\u6307\u5c06\u4e0d\u540c\u4e1a\u52a1\u6a21\u5757\u6216\u670d\u52a1\u7684\u6570\u636e\u5b58\u50a8\u72ec\u7acb\u5f00\u6765\uff0c\u907f\u514d\u5171\u4eab\u540c\u4e00\u4e2a\u6570\u636e\u5e93\u5b9e\u4f8b\u6216\u5171\u4eab\u8fc7\u591a\u6570\u636e\u8868\u3002\u8fd9\u53ef\u4ee5\u901a\u8fc7\u201c\u6570\u636e\u5e93\u6bcf\u670d\u52a1\u201d\uff08Database per Service\uff09\u6a21\u5f0f\u3001\u6570\u636e\u5782\u76f4\u62c6\u5206\u6216\u6570\u636e\u670d\u52a1\u5316\u6765\u5b9e\u73b0\u3002</li> <li>\u9002\u7528\u573a\u666f:<ul> <li>\u5fae\u670d\u52a1\u67b6\u6784\uff0c\u6bcf\u4e2a\u670d\u52a1\u9700\u8981\u72ec\u7acb\u7ba1\u7406\u81ea\u5df1\u7684\u6570\u636e\u3002</li> <li>\u5927\u578b\u5355\u4f53\u5e94\u7528\u62c6\u5206\u521d\u671f\uff0c\u9700\u8981\u9010\u6b65\u89e3\u8026\u6570\u636e\u5e93\u3002</li> <li>\u9700\u8981\u89e3\u51b3\u6570\u636e\u5e93\u6027\u80fd\u74f6\u9888\u6216\u5355\u70b9\u6545\u969c\u7684\u573a\u666f\u3002</li> <li>\u516c\u5171\u6570\u636e\u8bbf\u95ee\u4e0b\u6c89\u670d\u52a1\u5316\uff0c\u907f\u514d\u591a\u4e2a\u4e1a\u52a1\u76f4\u8fde\u516c\u5171\u6570\u636e\u3002</li> </ul> </li> <li>\u4f18\u70b9:<ul> <li>\u6d88\u9664\u6570\u636e\u5e93\u5c42\u9762\u7684\u8026\u5408: \u907f\u514d\u4e00\u4e2a\u670d\u52a1\u7684\u6570\u636e\u5e93\u95ee\u9898\u5f71\u54cd\u5176\u4ed6\u670d\u52a1\u3002</li> <li>\u63d0\u9ad8\u670d\u52a1\u81ea\u6cbb\u6027: \u6bcf\u4e2a\u670d\u52a1\u53ef\u4ee5\u81ea\u7531\u9009\u62e9\u5408\u9002\u7684\u6570\u636e\u5e93\u6280\u672f\u3002</li> <li>\u72ec\u7acb\u6269\u5c55: \u5404\u670d\u52a1\u7684\u6570\u636e\u5b58\u50a8\u53ef\u4ee5\u72ec\u7acb\u6269\u5c55\uff0c\u63d0\u9ad8\u7cfb\u7edf\u6574\u4f53\u6027\u80fd\u3002</li> <li>\u6545\u969c\u9694\u79bb: \u5355\u4e2a\u6570\u636e\u5e93\u6545\u969c\u4e0d\u4f1a\u5bfc\u81f4\u6240\u6709\u4e1a\u52a1\u505c\u6446\u3002</li> </ul> </li> <li>\u7f3a\u70b9:<ul> <li>\u6570\u636e\u4e00\u81f4\u6027\u6311\u6218: \u8de8\u670d\u52a1/\u6570\u636e\u5e93\u7684\u4e8b\u52a1\u96be\u4ee5\u5b9e\u73b0\uff0c\u901a\u5e38\u9700\u8981\u91c7\u7528\u6700\u7ec8\u4e00\u81f4\u6027\u65b9\u6848\u3002</li> <li>\u6570\u636e\u5197\u4f59: \u67d0\u4e9b\u6570\u636e\u53ef\u80fd\u9700\u8981\u5728\u591a\u4e2a\u670d\u52a1\u4e2d\u5b58\u50a8\u526f\u672c\u3002</li> <li>\u6570\u636e\u805a\u5408\u590d\u6742: \u67e5\u8be2\u9700\u8981\u805a\u5408\u6765\u81ea\u591a\u4e2a\u670d\u52a1\u7684\u6570\u636e\u65f6\uff0c\u4f1a\u589e\u52a0\u590d\u6742\u6027\u3002</li> <li>\u8fd0\u7ef4\u6210\u672c: \u7ba1\u7406\u591a\u4e2a\u6570\u636e\u5e93\u5b9e\u4f8b\u4f1a\u589e\u52a0\u8fd0\u7ef4\u590d\u6742\u5ea6\u548c\u6210\u672c\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E9%99%A4%E4%BA%86%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%EF%BC%8C%E4%BD%A0%E8%BF%98%E4%BA%86%E8%A7%A3%E5%93%AA%E4%BA%9B%E5%85%B6%E4%BB%96%E7%9A%84%E7%B3%BB%E7%BB%9F%E8%A7%A3%E8%80%A6%E6%96%B9%E6%B3%95%EF%BC%9F%E5%AE%83%E4%BB%AC%E5%90%84%E8%87%AA%E9%80%82%E7%94%A8%E4%BA%8E%E4%BB%80%E4%B9%88%E5%9C%BA%E6%99%AF%EF%BC%8C%E4%BC%98%E7%BC%BA%E7%82%B9%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F/#_7","title":"\u5f02\u6b65\u901a\u4fe1","text":"<ul> <li>\u63cf\u8ff0: \u5f02\u6b65\u901a\u4fe1\u662f\u4e00\u79cd\u901a\u4fe1\u6a21\u5f0f\uff0c\u5141\u8bb8\u6d88\u606f\u7684\u53d1\u9001\u65b9\u5728\u4e0d\u7b49\u5f85\u63a5\u6536\u65b9\u54cd\u5e94\u7684\u60c5\u51b5\u4e0b\u7ee7\u7eed\u6267\u884c\u5176\u4ed6\u4efb\u52a1\u3002\u63a5\u6536\u65b9\u5728\u7a0d\u540e\u65f6\u95f4\u5904\u7406\u6d88\u606f\uff0c\u5b9e\u73b0\u53d1\u9001\u65b9\u548c\u63a5\u6536\u65b9\u7684\u65f6\u95f4\u89e3\u8026\u3002\u6d88\u606f\u961f\u5217\u662f\u5b9e\u73b0\u5f02\u6b65\u901a\u4fe1\u7684\u5178\u578b\u624b\u6bb5\uff0c\u4f46\u9664\u4e86MQ\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u5176\u4ed6\u65b9\u5f0f\uff08\u5982Future/Promise\u3001\u56de\u8c03\u51fd\u6570\u3001Reactor\u6a21\u5f0f\u3001\u534f\u7a0b\uff09\u5b9e\u73b0\u7cfb\u7edf\u5185\u90e8\u6216\u670d\u52a1\u95f4\u7684\u5f02\u6b65\u64cd\u4f5c\u3002</li> <li>\u9002\u7528\u573a\u666f:<ul> <li>\u9700\u8981\u524a\u5cf0\u586b\u8c37\uff0c\u5904\u7406\u7a81\u53d1\u6d41\u91cf\u3002</li> <li>\u8017\u65f6\u64cd\u4f5c\uff0c\u4e0d\u5e0c\u671b\u963b\u585e\u4e3b\u6d41\u7a0b\u3002</li> <li>\u4e8b\u4ef6\u901a\u77e5\uff0c\u4e0d\u9700\u8981\u7acb\u5373\u5f97\u5230\u54cd\u5e94\u3002</li> <li>\u63d0\u9ad8\u7cfb\u7edf\u541e\u5410\u91cf\u548c\u54cd\u5e94\u901f\u5ea6\u3002</li> </ul> </li> <li>\u4f18\u70b9:<ul> <li>\u63d0\u9ad8\u7cfb\u7edf\u54cd\u5e94\u901f\u5ea6: \u53d1\u9001\u65b9\u65e0\u9700\u7b49\u5f85\u54cd\u5e94\uff0c\u5feb\u901f\u91ca\u653e\u8d44\u6e90\u3002</li> <li>\u89e3\u8026: \u53d1\u9001\u65b9\u548c\u63a5\u6536\u65b9\u4e4b\u95f4\u65f6\u95f4\u4e0a\u89e3\u8026\uff0c\u964d\u4f4e\u76f4\u63a5\u4f9d\u8d56\u3002</li> <li>\u524a\u5cf0\u586b\u8c37: \u7f13\u51b2\u5927\u91cf\u8bf7\u6c42\uff0c\u5e73\u6ed1\u5904\u7406\u5cf0\u503c\u6d41\u91cf\u3002</li> <li>\u63d0\u9ad8\u7cfb\u7edf\u53ef\u7528\u6027: \u63a5\u6536\u65b9\u6545\u969c\u4e0d\u5f71\u54cd\u53d1\u9001\u65b9\uff0c\u5b9e\u73b0\u6545\u969c\u9694\u79bb\u3002</li> </ul> </li> <li>\u7f3a\u70b9:<ul> <li>\u589e\u52a0\u590d\u6742\u6027: \u9700\u8981\u5904\u7406\u6d88\u606f\u7684\u53ef\u9760\u6295\u9012\u3001\u987a\u5e8f\u6027\u3001\u91cd\u590d\u6d88\u8d39\u7b49\u95ee\u9898\u3002</li> <li>\u8c03\u8bd5\u56f0\u96be: \u8c03\u7528\u94fe\u4e0d\u76f4\u89c2\uff0c\u95ee\u9898\u8ffd\u8e2a\u76f8\u5bf9\u590d\u6742\u3002</li> <li>\u6700\u7ec8\u4e00\u81f4\u6027: \u96be\u4ee5\u4fdd\u8bc1\u5b9e\u65f6\u4e00\u81f4\u6027\uff0c\u53ef\u80fd\u9700\u8981\u8865\u507f\u673a\u5236\u3002</li> <li>\u7528\u6237\u4f53\u9a8c: \u5bf9\u4e8e\u9700\u8981\u5373\u65f6\u53cd\u9988\u7684\u4e1a\u52a1\uff0c\u53ef\u80fd\u4e0d\u9002\u7528\u6216\u9700\u8981\u989d\u5916\u8bbe\u8ba1\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E9%99%A4%E4%BA%86%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%EF%BC%8C%E4%BD%A0%E8%BF%98%E4%BA%86%E8%A7%A3%E5%93%AA%E4%BA%9B%E5%85%B6%E4%BB%96%E7%9A%84%E7%B3%BB%E7%BB%9F%E8%A7%A3%E8%80%A6%E6%96%B9%E6%B3%95%EF%BC%9F%E5%AE%83%E4%BB%AC%E5%90%84%E8%87%AA%E9%80%82%E7%94%A8%E4%BA%8E%E4%BB%80%E4%B9%88%E5%9C%BA%E6%99%AF%EF%BC%8C%E4%BC%98%E7%BC%BA%E7%82%B9%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F/#_8","title":"\u914d\u7f6e\u4e2d\u5fc3","text":"<ul> <li>\u63cf\u8ff0: \u914d\u7f6e\u4e2d\u5fc3\u5c06\u5e94\u7528\u7a0b\u5e8f\u7684\u914d\u7f6e\u4fe1\u606f\u4ece\u4ee3\u7801\u4e2d\u5265\u79bb\u51fa\u6765\uff0c\u96c6\u4e2d\u7ba1\u7406\uff0c\u5e76\u5141\u8bb8\u5e94\u7528\u7a0b\u5e8f\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u83b7\u53d6\u548c\u66f4\u65b0\u914d\u7f6e\uff0c\u800c\u65e0\u9700\u91cd\u542f\u670d\u52a1\u3002</li> <li>\u9002\u7528\u573a\u666f:<ul> <li>\u5fae\u670d\u52a1\u67b6\u6784\u4e2d\uff0c\u7ba1\u7406\u5927\u91cf\u670d\u52a1\u7684\u914d\u7f6e\u3002</li> <li>\u9700\u8981\u52a8\u6001\u8c03\u6574\u7cfb\u7edf\u53c2\u6570\uff08\u5982\u6570\u636e\u5e93\u8fde\u63a5\u3001\u5f00\u5173\u3001\u9650\u6d41\u9608\u503c\uff09\u7684\u573a\u666f\u3002</li> <li>\u591a\u73af\u5883\uff08\u5f00\u53d1\u3001\u6d4b\u8bd5\u3001\u751f\u4ea7\uff09\u914d\u7f6e\u5dee\u5f02\u5927\u7684\u573a\u666f\u3002</li> </ul> </li> <li>\u4f18\u70b9:<ul> <li>\u89e3\u8026\u4ee3\u7801\u4e0e\u914d\u7f6e: \u5e94\u7528\u7a0b\u5e8f\u4e0d\u518d\u786c\u7f16\u7801\u914d\u7f6e\uff0c\u63d0\u9ad8\u7075\u6d3b\u6027\u3002</li> <li>\u52a8\u6001\u66f4\u65b0: \u53ef\u4ee5\u5728\u4e0d\u91cd\u542f\u670d\u52a1\u7684\u60c5\u51b5\u4e0b\u4fee\u6539\u914d\u7f6e\uff0c\u5b9e\u73b0\u70ed\u66f4\u65b0\u3002</li> <li>\u7edf\u4e00\u7ba1\u7406: \u96c6\u4e2d\u7ba1\u7406\u6240\u6709\u670d\u52a1\u7684\u914d\u7f6e\uff0c\u4fbf\u4e8e\u7ef4\u62a4\u548c\u5ba1\u8ba1\u3002</li> <li>\u73af\u5883\u9694\u79bb: \u8f7b\u677e\u7ba1\u7406\u4e0d\u540c\u73af\u5883\u7684\u914d\u7f6e\u3002</li> </ul> </li> <li>\u7f3a\u70b9:<ul> <li>\u5f15\u5165\u989d\u5916\u7ec4\u4ef6: \u9700\u8981\u90e8\u7f72\u548c\u7ef4\u62a4\u914d\u7f6e\u4e2d\u5fc3\u670d\u52a1\u3002</li> <li>\u53ef\u7528\u6027\u8981\u6c42\u9ad8: \u914d\u7f6e\u4e2d\u5fc3\u662f\u6838\u5fc3\u57fa\u7840\u8bbe\u65bd\uff0c\u5fc5\u987b\u4fdd\u8bc1\u9ad8\u53ef\u7528\u3002</li> <li>\u5b89\u5168\u6027: \u9700\u8981\u8003\u8651\u914d\u7f6e\u4fe1\u606f\u7684\u5b89\u5168\u5b58\u50a8\u548c\u8bbf\u95ee\u63a7\u5236\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E9%99%A4%E4%BA%86%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%EF%BC%8C%E4%BD%A0%E8%BF%98%E4%BA%86%E8%A7%A3%E5%93%AA%E4%BA%9B%E5%85%B6%E4%BB%96%E7%9A%84%E7%B3%BB%E7%BB%9F%E8%A7%A3%E8%80%A6%E6%96%B9%E6%B3%95%EF%BC%9F%E5%AE%83%E4%BB%AC%E5%90%84%E8%87%AA%E9%80%82%E7%94%A8%E4%BA%8E%E4%BB%80%E4%B9%88%E5%9C%BA%E6%99%AF%EF%BC%8C%E4%BC%98%E7%BC%BA%E7%82%B9%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F/#sdk","title":"\u5171\u4eab\u5e93/SDK","text":"<ul> <li>\u63cf\u8ff0: \u5c06\u5e38\u7528\u7684\u3001\u901a\u7528\u7684\u529f\u80fd\u6216\u4e1a\u52a1\u903b\u8f91\u5c01\u88c5\u6210\u5171\u4eab\u5e93\u6216\u8f6f\u4ef6\u5f00\u53d1\u5de5\u5177\u5305\uff08SDK\uff09\uff0c\u4f9b\u5176\u4ed6\u6a21\u5757\u6216\u670d\u52a1\u5f15\u7528\u3002\u901a\u8fc7\u826f\u597d\u7684\u63a5\u53e3\u8bbe\u8ba1\u548c\u7248\u672c\u7ba1\u7406\uff0c\u53ef\u4ee5\u5b9e\u73b0\u6d88\u8d39\u8005\u4e0e\u5177\u4f53\u5b9e\u73b0\u7ec6\u8282\u7684\u89e3\u8026\u3002</li> <li>\u9002\u7528\u573a\u666f:<ul> <li>\u9700\u8981\u8de8\u591a\u4e2a\u9879\u76ee\u6216\u670d\u52a1\u590d\u7528\u901a\u7528\u529f\u80fd\uff08\u5982\u8ba4\u8bc1\u5de5\u5177\u3001\u65e5\u671f\u5904\u7406\u3001\u65e5\u5fd7\u5de5\u5177\uff09\u3002</li> <li>\u5c01\u88c5\u7b2c\u4e09\u65b9\u670d\u52a1\u63a5\u53e3\uff0c\u63d0\u4f9b\u7edf\u4e00\u62bd\u8c61\u3002</li> <li>\u63d0\u4f9b\u4e00\u5957\u6807\u51c6\u5316\u7684API\u548c\u6570\u636e\u7ed3\u6784\u7ed9\u5916\u90e8\u5f00\u53d1\u8005\u4f7f\u7528\u3002</li> </ul> </li> <li>\u4f18\u70b9:<ul> <li>\u4ee3\u7801\u590d\u7528: \u907f\u514d\u91cd\u590d\u9020\u8f6e\u5b50\uff0c\u63d0\u9ad8\u5f00\u53d1\u6548\u7387\u3002</li> <li>\u5c01\u88c5\u590d\u6742\u6027: \u5185\u90e8\u5b9e\u73b0\u7ec6\u8282\u5bf9\u4f7f\u7528\u8005\u900f\u660e\uff0c\u964d\u4f4e\u4f7f\u7528\u8005\u63a5\u5165\u6210\u672c\u3002</li> <li>\u6807\u51c6\u5316: \u63d0\u4f9b\u7edf\u4e00\u7684\u63a5\u53e3\u548c\u89c4\u8303\u3002</li> <li>\u4e00\u5b9a\u7a0b\u5ea6\u7684\u89e3\u8026: \u6d88\u8d39\u8005\u4ec5\u4f9d\u8d56\u4e8eSDK\u7684\u63a5\u53e3\uff0c\u4e0d\u76f4\u63a5\u4f9d\u8d56\u5176\u5185\u90e8\u5b9e\u73b0\u3002</li> </ul> </li> <li>\u7f3a\u70b9:<ul> <li>\u7248\u672c\u7ba1\u7406\u6311\u6218: SDK\u7684\u66f4\u65b0\u53ef\u80fd\u5f71\u54cd\u6240\u6709\u4f7f\u7528\u8005\uff0c\u9700\u8981\u4e25\u683c\u7684\u7248\u672c\u63a7\u5236\u548c\u517c\u5bb9\u6027\u7b56\u7565\u3002</li> <li>\u6f5c\u5728\u7684\u7d27\u8026\u5408: \u5982\u679cSDK\u8bbe\u8ba1\u4e0d\u5f53\uff0c\u66b4\u9732\u8fc7\u591a\u5185\u90e8\u7ec6\u8282\u6216\u9891\u7e41\u53d8\u66f4\uff0c\u53ef\u80fd\u5bfc\u81f4\u4f7f\u7528\u8005\u4e0eSDK\u7d27\u5bc6\u8026\u5408\u3002</li> <li>\u4f9d\u8d56\u4f20\u9012: SDK\u5f15\u5165\u7684\u7b2c\u4e09\u65b9\u4f9d\u8d56\u53ef\u80fd\u4f1a\u4f20\u9012\u7ed9\u4f7f\u7528\u8005\uff0c\u5bfc\u81f4\u4f9d\u8d56\u51b2\u7a81\u6216\u5305\u81a8\u80c0\u3002</li> <li>\u7ef4\u62a4\u6210\u672c: \u7ef4\u62a4\u4e00\u4e2a\u9ad8\u8d28\u91cf\u7684SDK\u9700\u8981\u6295\u5165\u6301\u7eed\u7684\u7cbe\u529b\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E7%9A%84%E4%B8%89%E5%A4%A7%E5%9F%BA%E6%9C%AC%E7%89%B9%E6%80%A7/","title":"\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u7684\u4e09\u5927\u57fa\u672c\u7279\u6027","text":"<p>\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\uff08Object-Oriented Programming, OOP\uff09\u662f\u4e00\u79cd\u91cd\u8981\u7684\u7f16\u7a0b\u8303\u5f0f\uff0c\u5b83\u57fa\u4e8e\u201c\u5bf9\u8c61\u201d\u7684\u6982\u5ff5\uff0c\u5c06\u6570\u636e\u548c\u64cd\u4f5c\u6570\u636e\u7684\u65b9\u6cd5\u5c01\u88c5\u5728\u4e00\u8d77\u3002 \u5176\u4e09\u5927\u57fa\u672c\u7279\u6027\u2014\u2014\u5c01\u88c5\u3001\u7ee7\u627f\u548c\u591a\u6001\uff0c\u5171\u540c\u6784\u6210\u4e86\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u7684\u6838\u5fc3\u601d\u60f3\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E7%9A%84%E4%B8%89%E5%A4%A7%E5%9F%BA%E6%9C%AC%E7%89%B9%E6%80%A7/#_1","title":"\u5c01\u88c5","text":"<p>\u5c01\u88c5\u662f\u9762\u5411\u5bf9\u8c61\u7684\u6838\u5fc3\u601d\u60f3\uff0c\u6307\u5c06\u5bf9\u8c61\u7684\u5c5e\u6027\uff08\u6570\u636e\uff09\u548c\u884c\u4e3a\uff08\u65b9\u6cd5\uff09\u7ed3\u5408\u5728\u4e00\u8d77\uff0c\u5f62\u6210\u4e00\u4e2a\u72ec\u7acb\u7684\u5b9e\u4f53\u2014\u2014\u7c7b\u3002 \u540c\u65f6\uff0c\u901a\u8fc7\u4fe1\u606f\u9690\u85cf\u7684\u624b\u6bb5\uff0c\u5c06\u5bf9\u8c61\u5185\u90e8\u7684\u5b9e\u73b0\u7ec6\u8282\u5bf9\u5916\u754c\u9690\u85cf\u8d77\u6765\uff0c\u53ea\u63d0\u4f9b\u6709\u9650\u7684\u516c\u5171\u63a5\u53e3\u4f9b\u5916\u90e8\u8bbf\u95ee\u3002</p> <p>\u6838\u5fc3\u601d\u60f3\uff1a *   \u6570\u636e\u9690\u85cf: \u5c06\u7c7b\u7684\u5185\u90e8\u6570\u636e\uff08\u5c5e\u6027\uff09\u6807\u8bb0\u4e3a\u79c1\u6709\uff08private\uff09\uff0c\u9632\u6b62\u5916\u90e8\u7a0b\u5e8f\u76f4\u63a5\u8bbf\u95ee\u548c\u4fee\u6539\uff0c\u4ece\u800c\u4fdd\u8bc1\u4e86\u6570\u636e\u7684\u5b89\u5168\u6027\u548c\u5b8c\u6574\u6027\u3002 *   \u63a5\u53e3\u66b4\u9732: \u53ea\u5bf9\u5916\u63d0\u4f9b\u516c\u5f00\uff08public\uff09\u7684\u65b9\u6cd5\u4f5c\u4e3a\u8bbf\u95ee\u5185\u90e8\u6570\u636e\u7684\u552f\u4e00\u9014\u5f84\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u63a7\u5236\u5916\u754c\u5982\u4f55\u4e0e\u5bf9\u8c61\u4ea4\u4e92\u3002 *   \u964d\u4f4e\u590d\u6742\u5ea6: \u5c01\u88c5\u4f7f\u5f97\u6bcf\u4e2a\u5bf9\u8c61\u90fd\u50cf\u4e00\u4e2a\u201c\u9ed1\u7bb1\u201d\uff0c\u4f7f\u7528\u8005\u65e0\u9700\u5173\u5fc3\u5176\u5185\u90e8\u590d\u6742\u7684\u5b9e\u73b0\u7ec6\u8282\uff0c\u53ea\u9700\u901a\u8fc7\u7b80\u5355\u7684\u63a5\u53e3\u8c03\u7528\u5373\u53ef\u5b8c\u6210\u64cd\u4f5c\uff0c\u4ece\u800c\u964d\u4f4e\u4e86\u7f16\u7a0b\u7684\u590d\u6742\u5ea6\u3002</p> <p>\u751f\u6d3b\u4e2d\u7684\u4f8b\u5b50\uff1a \u5c31\u50cf\u6211\u4eec\u4f7f\u7528\u9065\u63a7\u5668\u64cd\u4f5c\u7535\u89c6\u673a\u4e00\u6837\uff0c\u6211\u4eec\u53ea\u9700\u8981\u6309\u4e0b\u9065\u63a7\u5668\u4e0a\u7684\u6309\u94ae\uff08\u8c03\u7528\u516c\u5f00\u63a5\u53e3\uff09\uff0c\u5c31\u53ef\u4ee5\u5207\u6362\u9891\u9053\u6216\u8005\u8c03\u8282\u97f3\u91cf\uff0c\u800c\u4e0d\u9700\u8981\u4e86\u89e3\u7535\u89c6\u673a\u5185\u90e8\u590d\u6742\u7684\u7535\u8def\u662f\u5982\u4f55\u5de5\u4f5c\u7684\uff08\u9690\u85cf\u7684\u5b9e\u73b0\u7ec6\u8282\uff09\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E7%9A%84%E4%B8%89%E5%A4%A7%E5%9F%BA%E6%9C%AC%E7%89%B9%E6%80%A7/#_2","title":"\u7ee7\u627f","text":"<p>\u7ee7\u627f\u662f\u4e00\u79cd\u521b\u5efa\u65b0\u7c7b\u7684\u65b9\u5f0f\uff0c\u5b83\u5141\u8bb8\u4e00\u4e2a\u7c7b\uff08\u5b50\u7c7b\u6216\u6d3e\u751f\u7c7b\uff09\u83b7\u53d6\u53e6\u4e00\u4e2a\u7c7b\uff08\u7236\u7c7b\u3001\u8d85\u7c7b\u6216\u57fa\u7c7b\uff09\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u3002 \u5b50\u7c7b\u5728\u7ee7\u627f\u7236\u7c7b\u7684\u57fa\u7840\u4e0a\uff0c\u8fd8\u53ef\u4ee5\u6dfb\u52a0\u81ea\u5df1\u72ec\u6709\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u6216\u8005\u91cd\u5199\u7236\u7c7b\u7684\u65b9\u6cd5\u4ee5\u5b9e\u73b0\u4e0d\u540c\u7684\u529f\u80fd\u3002</p> <p>\u6838\u5fc3\u601d\u60f3\uff1a *   \u4ee3\u7801\u590d\u7528: \u7ee7\u627f\u662f\u5b9e\u73b0\u4ee3\u7801\u590d\u7528\u7684\u91cd\u8981\u624b\u6bb5\u3002\u901a\u8fc7\u7ee7\u627f\uff0c\u5b50\u7c7b\u53ef\u4ee5\u81ea\u52a8\u62e5\u6709\u7236\u7c7b\u7684\u529f\u80fd\uff0c\u65e0\u9700\u91cd\u590d\u7f16\u5199\u76f8\u540c\u7684\u4ee3\u7801\uff0c\u4ece\u800c\u63d0\u9ad8\u4e86\u5f00\u53d1\u6548\u7387\u3002 *   \u5efa\u7acb\u5c42\u6b21\u5173\u7cfb: \u7ee7\u627f\u80fd\u591f\u6e05\u6670\u5730\u8868\u8fbe\u7c7b\u4e0e\u7c7b\u4e4b\u95f4\u7684\u201cis-a\u201d\uff08\u662f\u4e00\u4e2a\uff09\u5173\u7cfb\uff0c\u5f62\u6210\u4e00\u4e2a\u5c42\u6b21\u5316\u7684\u7ed3\u6784\uff0c\u4f7f\u5f97\u7a0b\u5e8f\u7684\u8bbe\u8ba1\u66f4\u52a0\u7b26\u5408\u73b0\u5b9e\u4e16\u754c\u7684\u8ba4\u77e5\u3002\u4f8b\u5982\uff0c\u201c\u72d7\u201d\u662f\u4e00\u4e2a\u201c\u52a8\u7269\u201d\uff0c\u201c\u732b\u201d\u4e5f\u662f\u4e00\u4e2a\u201c\u52a8\u7269\u201d\uff0c\u5b83\u4eec\u90fd\u53ef\u4ee5\u7ee7\u627f\u81ea\u201c\u52a8\u7269\u201d\u7c7b\u3002 *   \u53ef\u6269\u5c55\u6027: \u5728\u4e0d\u4fee\u6539\u539f\u6709\u7c7b\u7684\u57fa\u7840\u4e0a\uff0c\u901a\u8fc7\u7ee7\u627f\u53ef\u4ee5\u65b9\u4fbf\u5730\u5bf9\u7c7b\u7684\u529f\u80fd\u8fdb\u884c\u6269\u5c55\uff0c\u589e\u52a0\u4e86\u4ee3\u7801\u7684\u7075\u6d3b\u6027\u548c\u53ef\u7ef4\u62a4\u6027\u3002</p> <p>\u7ee7\u627f\u7684\u79cd\u7c7b\uff1a *   \u5b9e\u73b0\u7ee7\u627f: \u5b50\u7c7b\u76f4\u63a5\u4f7f\u7528\u7236\u7c7b\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u3002 *   \u63a5\u53e3\u7ee7\u627f: \u5b50\u7c7b\u53ea\u7ee7\u627f\u7236\u7c7b\u65b9\u6cd5\u7684\u540d\u79f0\uff0c\u4f46\u5fc5\u987b\u81ea\u5df1\u63d0\u4f9b\u5177\u4f53\u7684\u5b9e\u73b0\u3002</p> <p>\u5728\u73b0\u4ee3\u9762\u5411\u5bf9\u8c61\u8bbe\u8ba1\u4e2d\uff0c\u4e3a\u4e86\u907f\u514d\u7ee7\u627f\u5e26\u6765\u7684\u590d\u6742\u6027\uff0c\u6709\u65f6\u4f1a\u63d0\u5021\u4f7f\u7528\u201c\u7ec4\u5408\u201d\u6765\u4ee3\u66ff\u7ee7\u627f\uff0c\u4ee5\u63d0\u9ad8\u4ee3\u7801\u7684\u7075\u6d3b\u6027\u548c\u53ef\u7ef4\u62a4\u6027\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E6%9D%82%E9%A1%B9/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E7%9A%84%E4%B8%89%E5%A4%A7%E5%9F%BA%E6%9C%AC%E7%89%B9%E6%80%A7/#_3","title":"\u591a\u6001","text":"<p>\u591a\u6001\u7684\u5b57\u9762\u610f\u601d\u662f\u201c\u591a\u79cd\u5f62\u6001\u201d\u3002\u5728\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u4e2d\uff0c\u591a\u6001\u5141\u8bb8\u4e0d\u540c\u7c7b\u7684\u5bf9\u8c61\u5bf9\u540c\u4e00\u6d88\u606f\u505a\u51fa\u4e0d\u540c\u7684\u54cd\u5e94\u3002 \u8fd9\u610f\u5473\u7740\uff0c\u540c\u4e00\u4e2a\u65b9\u6cd5\u8c03\u7528\u4f5c\u7528\u4e8e\u4e0d\u540c\u7684\u5bf9\u8c61\u4e0a\uff0c\u53ef\u80fd\u4f1a\u4ea7\u751f\u4e0d\u540c\u7684\u884c\u4e3a\u3002 \u591a\u6001\u6027\u662f\u5efa\u7acb\u5728\u5c01\u88c5\u548c\u7ee7\u627f\u4e4b\u4e0a\u7684\u3002</p> <p>\u6838\u5fc3\u601d\u60f3\uff1a *   \u4e00\u4e2a\u63a5\u53e3\uff0c\u591a\u79cd\u5b9e\u73b0: \u591a\u6001\u7684\u6838\u5fc3\u5728\u4e8e\u5b9a\u4e49\u4e00\u4e2a\u7edf\u4e00\u7684\u63a5\u53e3\uff0c\u8ba9\u4e0d\u540c\u7684\u7c7b\u53bb\u5b9e\u73b0\u8fd9\u4e2a\u63a5\u53e3\u3002\u5f53\u8c03\u7528\u8fd9\u4e2a\u63a5\u53e3\u65f6\uff0c\u4f1a\u6839\u636e\u5bf9\u8c61\u7684\u5b9e\u9645\u7c7b\u578b\u6765\u6267\u884c\u76f8\u5e94\u7684\u5b9e\u73b0\u3002 *   \u52a8\u6001\u7ed1\u5b9a: \u7a0b\u5e8f\u5728\u8fd0\u884c\u65f6\u624d\u786e\u5b9a\u8c03\u7528\u54ea\u4e2a\u5bf9\u8c61\u7684\u54ea\u4e2a\u65b9\u6cd5\uff0c\u800c\u4e0d\u662f\u5728\u7f16\u8bd1\u65f6\u5c31\u786e\u5b9a\u3002\u8fd9\u4f7f\u5f97\u7a0b\u5e8f\u5177\u6709\u66f4\u9ad8\u7684\u7075\u6d3b\u6027\u548c\u53ef\u6269\u5c55\u6027\u3002 *   \u4ee3\u7801\u7684\u901a\u7528\u6027: \u901a\u8fc7\u591a\u6001\uff0c\u53ef\u4ee5\u7f16\u5199\u66f4\u52a0\u901a\u7528\u7684\u4ee3\u7801\u3002\u4f8b\u5982\uff0c\u4e00\u4e2a\u51fd\u6570\u53ef\u4ee5\u63a5\u53d7\u4e00\u4e2a\u7236\u7c7b\u7c7b\u578b\u7684\u53c2\u6570\uff0c\u4f46\u5b9e\u9645\u4f20\u5165\u7684\u53ef\u4ee5\u662f\u4efb\u4f55\u4e00\u4e2a\u5b50\u7c7b\u7684\u5bf9\u8c61\uff0c\u51fd\u6570\u4f1a\u6839\u636e\u4f20\u5165\u5bf9\u8c61\u7684\u4e0d\u540c\u800c\u6267\u884c\u4e0d\u540c\u7684\u64cd\u4f5c\u3002</p> <p>\u5b9e\u73b0\u591a\u6001\u7684\u5fc5\u8981\u6761\u4ef6\uff1a *   \u5fc5\u987b\u5b58\u5728\u7ee7\u627f\u5173\u7cfb\u3002 *   \u5b50\u7c7b\u5fc5\u987b\u91cd\u5199\uff08override\uff09\u7236\u7c7b\u7684\u65b9\u6cd5\u3002 *   \u901a\u8fc7\u7236\u7c7b\u7684\u5f15\u7528\u6307\u5411\u5b50\u7c7b\u7684\u5bf9\u8c61\u3002</p> <p>\u751f\u6d3b\u4e2d\u7684\u4f8b\u5b50\uff1a \u6bd4\u5982\u201c\u7ed8\u56fe\u201d\u8fd9\u4e2a\u64cd\u4f5c\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u201c\u5706\u5f62\u201d\u5bf9\u8c61\uff0c\u6267\u884c\u201c\u7ed8\u56fe\u201d\u4f1a\u753b\u51fa\u4e00\u4e2a\u5706\u5f62\uff1b\u800c\u5bf9\u4e8e\u4e00\u4e2a\u201c\u6b63\u65b9\u5f62\u201d\u5bf9\u8c61\uff0c\u6267\u884c\u201c\u7ed8\u56fe\u201d\u5219\u4f1a\u753b\u51fa\u4e00\u4e2a\u6b63\u65b9\u5f62\u3002 \u201c\u7ed8\u56fe\u201d\u8fd9\u4e2a\u884c\u4e3a\u5177\u6709\u591a\u79cd\u4e0d\u540c\u7684\u8868\u73b0\u5f62\u5f0f\uff0c\u8fd9\u5c31\u662f\u591a\u6001\u7684\u4f53\u73b0\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E7%AE%97%E6%B3%95/%E5%B8%B8%E7%94%A8%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E4%BB%8B%E7%BB%8D/","title":"\u5e38\u7528\u6392\u5e8f\u7b97\u6cd5\u4ecb\u7ecd","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E7%AE%97%E6%B3%95/%E5%B8%B8%E7%94%A8%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E4%BB%8B%E7%BB%8D/#bubble-sort","title":"\u5192\u6ce1\u6392\u5e8f\uff08Bubble Sort\uff09","text":"<ul> <li> <p>\u5b9e\u73b0\u601d\u60f3\uff1a     \u91cd\u590d\u5730\u904d\u5386\u8981\u6392\u5e8f\u7684\u6570\u5217\uff0c\u4e00\u6b21\u6bd4\u8f83\u4e24\u4e2a\u76f8\u90bb\u7684\u5143\u7d20\uff0c\u5982\u679c\u5b83\u4eec\u7684\u987a\u5e8f\u9519\u8bef\u5c31\u628a\u5b83\u4eec\u4ea4\u6362\u8fc7\u6765\u3002\u904d\u5386\u6570\u5217\u7684\u5de5\u4f5c\u662f\u91cd\u590d\u5730\u8fdb\u884c\u76f4\u5230\u6ca1\u6709\u518d\u9700\u8981\u4ea4\u6362\uff0c\u4e5f\u5c31\u662f\u8bf4\u8be5\u6570\u5217\u5df2\u7ecf\u6392\u5e8f\u5b8c\u6210\u3002</p> </li> <li> <p>\u65f6\u95f4\u590d\u6742\u5ea6\uff1a</p> <ul> <li>\u6700\u597d\u60c5\u51b5\uff1aO(N)\u3002\u5f53\u8f93\u5165\u6570\u7ec4\u5df2\u7ecf\u662f\u6709\u5e8f\u7684\u65f6\uff0c\u53ea\u9700\u8981\u8fdb\u884c\u4e00\u8d9f\u904d\u5386\uff0c\u6bd4\u8f83N-1\u6b21\uff0c\u6ca1\u6709\u4ea4\u6362\u3002</li> <li>\u6700\u574f\u60c5\u51b5\uff1aO(N^2)\u3002\u5f53\u8f93\u5165\u6570\u7ec4\u662f\u9006\u5e8f\u7684\u65f6\uff0c\u9700\u8981\u8fdb\u884cN-1\u8d9f\u904d\u5386\uff0c\u6bcf\u8d9f\u904d\u5386\u90fd\u9700\u8981\u8fdb\u884c\u591a\u6b21\u6bd4\u8f83\u548c\u4ea4\u6362\u3002</li> <li>\u5e73\u5747\u60c5\u51b5\uff1aO(N^2)\u3002</li> </ul> </li> <li> <p>\u590d\u6742\u5ea6\u8ba1\u7b97\u8bf4\u660e\uff1a</p> <ul> <li>\u5916\u5c42\u5faa\u73af\u9700\u8981\u6267\u884cN-1\u6b21\uff08\u6216N\u6b21\uff09\u3002</li> <li>\u5185\u5c42\u5faa\u73af\u5728\u6700\u574f\u60c5\u51b5\u4e0b\uff0c\u7b2c\u4e00\u6b21\u6267\u884cN-1\u6b21\u6bd4\u8f83\uff0c\u7b2c\u4e8c\u6b21N-2\u6b21\uff0c...\uff0c\u6700\u540e\u4e00\u6b211\u6b21\u3002\u603b\u6bd4\u8f83\u6b21\u6570\u7ea6\u4e3a <code>(N-1 + 1) * (N-1) / 2</code>\uff0c\u5373 <code>N*(N-1)/2</code>\uff0c\u6240\u4ee5\u662fO(N^2)\u3002\u4ea4\u6362\u6b21\u6570\u7c7b\u4f3c\u3002</li> </ul> </li> <li> <p>\u7a33\u5b9a\u6027\uff1a\u7a33\u5b9a\u3002</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E7%AE%97%E6%B3%95/%E5%B8%B8%E7%94%A8%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E4%BB%8B%E7%BB%8D/#selection-sort","title":"\u9009\u62e9\u6392\u5e8f\uff08Selection Sort\uff09","text":"<ul> <li> <p>\u5b9e\u73b0\u601d\u60f3\uff1a     \u9996\u5148\u5728\u672a\u6392\u5e8f\u5e8f\u5217\u4e2d\u627e\u5230\u6700\u5c0f\uff08\u6216\u6700\u5927\uff09\u5143\u7d20\uff0c\u5b58\u653e\u5230\u6392\u5e8f\u5e8f\u5217\u7684\u8d77\u59cb\u4f4d\u7f6e\uff0c\u7136\u540e\uff0c\u518d\u4ece\u5269\u4f59\u672a\u6392\u5e8f\u5143\u7d20\u4e2d\u7ee7\u7eed\u5bfb\u627e\u6700\u5c0f\uff08\u6216\u6700\u5927\uff09\u5143\u7d20\uff0c\u7136\u540e\u653e\u5230\u5df2\u6392\u5e8f\u5e8f\u5217\u7684\u672b\u5c3e\u3002\u4ee5\u6b64\u7c7b\u63a8\uff0c\u76f4\u5230\u6240\u6709\u5143\u7d20\u5747\u6392\u5e8f\u5b8c\u6bd5\u3002</p> </li> <li> <p>\u65f6\u95f4\u590d\u6742\u5ea6\uff1a</p> <ul> <li>\u6700\u597d\u60c5\u51b5\u3001\u6700\u574f\u60c5\u51b5\u3001\u5e73\u5747\u60c5\u51b5\u90fd\u662fO(N^2)\u3002</li> <li>\u65e0\u8bba\u8f93\u5165\u6570\u636e\u662f\u4ec0\u4e48\u6837\u7684\uff0c\u9009\u62e9\u6392\u5e8f\u7684\u6bd4\u8f83\u6b21\u6570\u90fd\u662f\u56fa\u5b9a\u7684\u3002</li> </ul> </li> <li> <p>\u590d\u6742\u5ea6\u8ba1\u7b97\u8bf4\u660e\uff1a</p> <ul> <li>\u5916\u5c42\u5faa\u73af\u9700\u8981\u6267\u884cN-1\u6b21\u3002</li> <li>\u5185\u5c42\u5faa\u73af\u5728\u7b2c\u4e00\u6b21\u9700\u8981\u8fdb\u884cN-1\u6b21\u6bd4\u8f83\uff0c\u7b2c\u4e8c\u6b21N-2\u6b21\uff0c...\uff0c\u6700\u540e\u4e00\u6b211\u6b21\u3002\u603b\u6bd4\u8f83\u6b21\u6570\u662f <code>N*(N-1)/2</code>\uff0c\u6240\u4ee5\u662fO(N^2)\u3002</li> <li>\u4ea4\u6362\u6b21\u6570\u6700\u591a\u662fN-1\u6b21\u3002</li> </ul> </li> <li> <p>\u7a33\u5b9a\u6027\uff1a\u4e0d\u7a33\u5b9a\u3002\uff08\u4f8b\u5982\uff0c\u5e8f\u5217<code>5 8 5 2 9</code>\uff0c\u7b2c\u4e00\u8d9f\u4f1a\u5c06\u7b2c\u4e00\u4e2a<code>5</code>\u548c<code>2</code>\u4ea4\u6362\uff0c\u5bfc\u81f4\u4e24\u4e2a<code>5</code>\u7684\u76f8\u5bf9\u987a\u5e8f\u6539\u53d8\uff09</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E7%AE%97%E6%B3%95/%E5%B8%B8%E7%94%A8%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E4%BB%8B%E7%BB%8D/#insertion-sort","title":"\u63d2\u5165\u6392\u5e8f\uff08Insertion Sort\uff09","text":"<ul> <li> <p>\u5b9e\u73b0\u601d\u60f3\uff1a     \u6784\u5efa\u6709\u5e8f\u5e8f\u5217\uff0c\u5bf9\u4e8e\u672a\u6392\u5e8f\u6570\u636e\uff0c\u5728\u5df2\u6392\u5e8f\u5e8f\u5217\u4e2d\u4ece\u540e\u5411\u524d\u626b\u63cf\uff0c\u627e\u5230\u76f8\u5e94\u4f4d\u7f6e\u5e76\u63d2\u5165\u3002\u5b83\u5c31\u50cf\u6211\u4eec\u6253\u6251\u514b\u724c\u65f6\uff0c\u4e00\u5f20\u4e00\u5f20\u5730\u5c06\u65b0\u724c\u63d2\u5165\u5230\u5df2\u6709\u5e8f\u7684\u624b\u724c\u4e2d\u3002</p> </li> <li> <p>\u65f6\u95f4\u590d\u6742\u5ea6\uff1a</p> <ul> <li>\u6700\u597d\u60c5\u51b5\uff1aO(N)\u3002\u5f53\u8f93\u5165\u6570\u7ec4\u5df2\u7ecf\u662f\u6709\u5e8f\u7684\u65f6\uff0c\u6bcf\u6b21\u63d2\u5165\u90fd\u53ea\u9700\u8981\u6bd4\u8f831\u6b21\uff0c\u603b\u5171\u6bd4\u8f83N-1\u6b21\u3002</li> <li>\u6700\u574f\u60c5\u51b5\uff1aO(N^2)\u3002\u5f53\u8f93\u5165\u6570\u7ec4\u662f\u9006\u5e8f\u7684\u65f6\uff0c\u7b2ci\u4e2a\u5143\u7d20\u9700\u8981\u4e0e\u524d\u9762i-1\u4e2a\u5143\u7d20\u90fd\u8fdb\u884c\u6bd4\u8f83\u548c\u79fb\u52a8\u3002</li> <li>\u5e73\u5747\u60c5\u51b5\uff1aO(N^2)\u3002</li> </ul> </li> <li> <p>\u590d\u6742\u5ea6\u8ba1\u7b97\u8bf4\u660e\uff1a</p> <ul> <li>\u5916\u5c42\u5faa\u73af\u4ece\u7b2c\u4e8c\u4e2a\u5143\u7d20\u5f00\u59cb\uff0c\u904d\u5386\u5230\u6700\u540e\u4e00\u4e2a\u5143\u7d20\uff0c\u5171N-1\u6b21\u3002</li> <li>\u5185\u5c42\u5faa\u73af\u5728\u6700\u574f\u60c5\u51b5\u4e0b\uff0c\u7b2ci\u4e2a\u5143\u7d20\u9700\u8981\u8fdb\u884ci-1\u6b21\u6bd4\u8f83\u548c\u79fb\u52a8\u3002\u603b\u64cd\u4f5c\u6b21\u6570\u7ea6\u4e3a <code>1 + 2 + ... + (N-1)</code>\uff0c\u5373 <code>N*(N-1)/2</code>\uff0c\u6240\u4ee5\u662fO(N^2)\u3002</li> </ul> </li> <li> <p>\u7a33\u5b9a\u6027\uff1a\u7a33\u5b9a\u3002</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E7%AE%97%E6%B3%95/%E5%B8%B8%E7%94%A8%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E4%BB%8B%E7%BB%8D/#merge-sort","title":"\u5f52\u5e76\u6392\u5e8f\uff08Merge Sort\uff09","text":"<ul> <li> <p>\u5b9e\u73b0\u601d\u60f3\uff1a     \u91c7\u7528\u5206\u6cbb\uff08Divide and Conquer\uff09\u7b56\u7565\u3002</p> <ol> <li>\u5206\u89e3\uff08Divide\uff09\uff1a\u5c06n\u4e2a\u5143\u7d20\u5206\u6210\u5404\u542bn/2\u4e2a\u5143\u7d20\u7684\u5b50\u5e8f\u5217\u3002</li> <li>\u89e3\u51b3\uff08Conquer\uff09\uff1a\u7528\u5f52\u5e76\u6392\u5e8f\u9012\u5f52\u5730\u6392\u5e8f\u4e24\u4e2a\u5b50\u5e8f\u5217\u3002</li> <li>\u5408\u5e76\uff08Combine\uff09\uff1a\u5c06\u4e24\u4e2a\u5df2\u6392\u5e8f\u7684\u5b50\u5e8f\u5217\u5408\u5e76\u6210\u4e00\u4e2a\u6700\u7ec8\u7684\u6392\u5e8f\u5e8f\u5217\u3002</li> </ol> </li> <li> <p>\u65f6\u95f4\u590d\u6742\u5ea6\uff1a</p> <ul> <li>\u6700\u597d\u60c5\u51b5\u3001\u6700\u574f\u60c5\u51b5\u3001\u5e73\u5747\u60c5\u51b5\u90fd\u662fO(N log N)\u3002</li> </ul> </li> <li> <p>\u590d\u6742\u5ea6\u8ba1\u7b97\u8bf4\u660e\uff1a</p> <ul> <li>\u5206\u89e3\u8fc7\u7a0b\uff1a\u6811\u7684\u6df1\u5ea6\u662f<code>log N</code>\u3002</li> <li>\u5408\u5e76\u8fc7\u7a0b\uff1a\u6bcf\u4e00\u5c42\u5408\u5e76\u65f6\uff0c\u6240\u6709\u5143\u7d20\u90fd\u4f1a\u88ab\u904d\u5386\u4e00\u6b21\uff0c\u6240\u4ee5\u6bcf\u4e00\u5c42\u7684\u5408\u5e76\u64cd\u4f5c\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662fO(N)\u3002</li> <li>\u603b\u65f6\u95f4\u590d\u6742\u5ea6 = \u6811\u7684\u6df1\u5ea6 * \u6bcf\u5c42\u5408\u5e76\u7684\u590d\u6742\u5ea6 = <code>log N * O(N) = O(N log N)</code>\u3002</li> </ul> </li> <li> <p>\u7a33\u5b9a\u6027\uff1a\u7a33\u5b9a\u3002</p> </li> <li>\u7a7a\u95f4\u590d\u6742\u5ea6\uff1aO(N)\uff0c\u56e0\u4e3a\u5408\u5e76\u8fc7\u7a0b\u9700\u8981\u4e00\u4e2a\u4e34\u65f6\u7684\u8f85\u52a9\u6570\u7ec4\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E7%AE%97%E6%B3%95/%E5%B8%B8%E7%94%A8%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E4%BB%8B%E7%BB%8D/#quick-sort","title":"\u5feb\u901f\u6392\u5e8f\uff08Quick Sort\uff09","text":"<ul> <li> <p>\u5b9e\u73b0\u601d\u60f3\uff1a     \u540c\u6837\u91c7\u7528\u5206\u6cbb\u7b56\u7565\u3002</p> <ol> <li>\u5206\u89e3\uff08Partition\uff09\uff1a\u6311\u9009\u4e00\u4e2a\u5143\u7d20\u4f5c\u4e3a\u201c\u57fa\u51c6\u201d\uff08pivot\uff09\uff0c\u5c06\u6570\u7ec4\u5206\u533a\uff08partition\uff09\uff0c\u4f7f\u5f97\u6240\u6709\u6bd4\u57fa\u51c6\u5c0f\u7684\u5143\u7d20\u90fd\u5728\u57fa\u51c6\u7684\u5de6\u8fb9\uff0c\u6240\u6709\u6bd4\u57fa\u51c6\u5927\u7684\u5143\u7d20\u90fd\u5728\u57fa\u51c6\u7684\u53f3\u8fb9\u3002</li> <li>\u89e3\u51b3\uff08Conquer\uff09\uff1a\u9012\u5f52\u5730\u5bf9\u57fa\u51c6\u5de6\u53f3\u4e24\u8fb9\u7684\u5b50\u6570\u7ec4\u8fdb\u884c\u5feb\u901f\u6392\u5e8f\u3002</li> <li>\u5408\u5e76\uff08Combine\uff09\uff1a\u56e0\u4e3a\u5b50\u6570\u7ec4\u662f\u539f\u5730\u6392\u5e8f\u7684\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u5408\u5e76\u6b65\u9aa4\u3002</li> </ol> </li> <li> <p>\u65f6\u95f4\u590d\u6742\u5ea6\uff1a</p> <ul> <li>\u6700\u597d\u60c5\u51b5\uff1aO(N log N)\u3002\u5f53\u6bcf\u6b21\u9009\u53d6\u7684\u57fa\u51c6\u90fd\u80fd\u5c06\u6570\u7ec4\u6070\u597d\u5e73\u5206\u4e3a\u4e24\u534a\u65f6\u3002</li> <li>\u6700\u574f\u60c5\u51b5\uff1aO(N^2)\u3002\u5f53\u8f93\u5165\u6570\u7ec4\u5df2\u7ecf\u6709\u5e8f\u6216\u9006\u5e8f\uff0c\u5e76\u4e14\u6bcf\u6b21\u90fd\u9009\u62e9\u7b2c\u4e00\u4e2a\u6216\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u4f5c\u4e3a\u57fa\u51c6\u65f6\uff0c\u5bfc\u81f4\u6bcf\u6b21\u5206\u533a\u90fd\u6781\u4e0d\u5e73\u8861\uff08\u4e00\u8fb9\u662f0\u4e2a\u5143\u7d20\uff0c\u53e6\u4e00\u8fb9\u662fN-1\u4e2a\u5143\u7d20\uff09\uff0c\u9012\u5f52\u6811\u9000\u5316\u6210\u94fe\u8868\u3002</li> <li>\u5e73\u5747\u60c5\u51b5\uff1aO(N log N)\u3002\u901a\u8fc7\u968f\u673a\u9009\u62e9\u57fa\u51c6\u7b49\u65b9\u6cd5\u53ef\u4ee5\u5927\u6982\u7387\u907f\u514d\u6700\u574f\u60c5\u51b5\u3002</li> </ul> </li> <li> <p>\u590d\u6742\u5ea6\u8ba1\u7b97\u8bf4\u660e\uff1a</p> <ul> <li>\u6700\u597d\u548c\u5e73\u5747\u60c5\u51b5\uff1a\u9012\u5f52\u6811\u7684\u6df1\u5ea6\u662f<code>log N</code>\u3002\u6bcf\u4e00\u5c42\u7684\u5206\u533a\u64cd\u4f5c\u90fd\u9700\u8981\u904d\u5386\u8be5\u5c42\u7684\u6240\u6709\u5143\u7d20\uff0c\u590d\u6742\u5ea6\u662fO(N)\u3002\u603b\u590d\u6742\u5ea6\u662f <code>O(N log N)</code>\u3002</li> <li>\u6700\u574f\u60c5\u51b5\uff1a\u9012\u5f52\u6811\u7684\u6df1\u5ea6\u662f<code>N</code>\u3002\u5206\u533a\u64cd\u4f5c\u7684\u5e73\u5747\u590d\u6742\u5ea6\u662fO(N)\uff0c\u603b\u590d\u6742\u5ea6\u662f <code>O(N^2)</code>\u3002</li> </ul> </li> <li> <p>\u7a33\u5b9a\u6027\uff1a\u4e0d\u7a33\u5b9a\u3002\uff08\u5728\u5206\u533a\u4ea4\u6362\u5143\u7d20\u65f6\uff0c\u53ef\u80fd\u6539\u53d8\u76f8\u7b49\u5143\u7d20\u7684\u76f8\u5bf9\u987a\u5e8f\uff09</p> </li> <li>\u7a7a\u95f4\u590d\u6742\u5ea6\uff1aO(log N) ~ O(N)\uff0c\u53d6\u51b3\u4e8e\u9012\u5f52\u6df1\u5ea6\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E7%AE%97%E6%B3%95/%E5%B8%B8%E7%94%A8%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E4%BB%8B%E7%BB%8D/#heap-sort","title":"\u5806\u6392\u5e8f\uff08Heap Sort\uff09","text":"<ul> <li> <p>\u5b9e\u73b0\u601d\u60f3\uff1a     \u5229\u7528\u5806\uff08Heap\uff09\u8fd9\u79cd\u6570\u636e\u7ed3\u6784\u3002\u5806\u662f\u4e00\u4e2a\u8fd1\u4f3c\u5b8c\u5168\u4e8c\u53c9\u6811\u7684\u7ed3\u6784\uff0c\u5e76\u540c\u65f6\u6ee1\u8db3\u5806\u7684\u6027\u8d28\uff1a\u5373\u5b50\u8282\u70b9\u7684\u952e\u503c\u6216\u7d22\u5f15\u603b\u662f\u5c0f\u4e8e\uff08\u6216\u8005\u5927\u4e8e\uff09\u5b83\u7684\u7236\u8282\u70b9\u3002</p> <ol> <li>\u5efa\u5806\uff1a\u5c06\u65e0\u5e8f\u5e8f\u5217\u6784\u5efa\u6210\u4e00\u4e2a\u5927\u9876\u5806\uff08\u6216\u5c0f\u9876\u5806\uff09\u3002</li> <li>\u6392\u5e8f\uff1a\u5c06\u5806\u9876\u5143\u7d20\uff08\u6700\u5927\u503c\u6216\u6700\u5c0f\u503c\uff09\u4e0e\u672b\u5c3e\u5143\u7d20\u4ea4\u6362\uff0c\u7136\u540e\u5c06\u5269\u4f59\u7684N-1\u4e2a\u5143\u7d20\u91cd\u65b0\u8c03\u6574\u6210\u4e00\u4e2a\u5806\uff0c\u91cd\u590d\u6b64\u8fc7\u7a0b\uff0c\u76f4\u5230\u6240\u6709\u5143\u7d20\u6392\u5e8f\u5b8c\u6bd5\u3002</li> </ol> </li> <li> <p>\u65f6\u95f4\u590d\u6742\u5ea6\uff1a</p> <ul> <li>\u6700\u597d\u60c5\u51b5\u3001\u6700\u574f\u60c5\u51b5\u3001\u5e73\u5747\u60c5\u51b5\u90fd\u662fO(N log N)\u3002</li> </ul> </li> <li> <p>\u590d\u6742\u5ea6\u8ba1\u7b97\u8bf4\u660e\uff1a</p> <ul> <li>\u5efa\u5806\u8fc7\u7a0b\uff1a\u65f6\u95f4\u590d\u6742\u5ea6\u662fO(N)\u3002</li> <li>\u8c03\u6574\u5806\u8fc7\u7a0b\uff1a\u9700\u8981\u8fdb\u884cN-1\u6b21\u5faa\u73af\uff0c\u6bcf\u6b21\u5faa\u73af\u90fd\u9700\u8981\u8fdb\u884c\u4e00\u6b21\u5806\u9876\u5143\u7d20\u4e0b\u6c89\u7684\u8c03\u6574\uff0c\u8fd9\u4e2a\u8c03\u6574\u64cd\u4f5c\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662fO(log N)\uff08\u4e0e\u5806\u7684\u9ad8\u5ea6\u76f8\u5173\uff09\u3002</li> <li>\u603b\u65f6\u95f4\u590d\u6742\u5ea6 = O(N) + (N-1) * O(log N) = <code>O(N log N)</code>\u3002</li> </ul> </li> <li> <p>\u7a33\u5b9a\u6027\uff1a\u4e0d\u7a33\u5b9a\u3002</p> </li> <li>\u7a7a\u95f4\u590d\u6742\u5ea6\uff1aO(1)\uff0c\u56e0\u4e3a\u662f\u539f\u5730\u6392\u5e8f\u3002</li> </ul> \u6392\u5e8f\u7b97\u6cd5 \u5e73\u5747\u65f6\u95f4\u590d\u6742\u5ea6 \u6700\u597d\u60c5\u51b5 \u6700\u574f\u60c5\u51b5 \u7a7a\u95f4\u590d\u6742\u5ea6 \u7a33\u5b9a\u6027 \u5192\u6ce1\u6392\u5e8f O(N^2) O(N) O(N^2) O(1) \u7a33\u5b9a \u9009\u62e9\u6392\u5e8f O(N^2) O(N^2) O(N^2) O(1) \u4e0d\u7a33\u5b9a \u63d2\u5165\u6392\u5e8f O(N^2) O(N) O(N^2) O(1) \u7a33\u5b9a \u5f52\u5e76\u6392\u5e8f O(N log N) O(N log N) O(N log N) O(N) \u7a33\u5b9a \u5feb\u901f\u6392\u5e8f O(N log N) O(N log N) O(N^2) O(log N)~O(N) \u4e0d\u7a33\u5b9a \u5806\u6392\u5e8f O(N log N) O(N log N) O(N log N) O(1) \u4e0d\u7a33\u5b9a"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/Https%E7%9A%84%E5%8A%A0%E5%AF%86%E6%96%B9%E5%BC%8F%E4%BB%8B%E7%BB%8D/","title":"Https\u7684\u52a0\u5bc6\u65b9\u5f0f\u4ecb\u7ecd","text":"<p>HTTPS\u7684\u52a0\u5bc6\u65b9\u5f0f\u662f\u4e00\u79cd\u7ed3\u5408\u4e86\u4e24\u79cd\u52a0\u5bc6\u6280\u672f\u7684\u6df7\u5408\u52a0\u5bc6\u673a\u5236\uff0c\u5b83\u540c\u65f6\u5229\u7528\u4e86\u201c\u975e\u5bf9\u79f0\u52a0\u5bc6\u201d\u548c\u201c\u5bf9\u79f0\u52a0\u5bc6\u201d\u7684\u4f18\u70b9\uff0c\u4ee5\u786e\u4fdd\u6570\u636e\u4f20\u8f93\u7684\u5b89\u5168\u3002</p> <p>\u6574\u4e2a\u8fc7\u7a0b\u7684\u6838\u5fc3\u662fSSL/TLS\u63e1\u624b (SSL/TLS Handshake)\u3002 SSL\u662f\u65e9\u671f\u7684\u534f\u8bae\uff0c\u73b0\u5728\u57fa\u672c\u4e0a\u90fd\u88ab\u5176\u7ee7\u4efb\u8005TLS (Transport Layer Security) \u6240\u53d6\u4ee3\uff0c\u4f46\u4eba\u4eec\u4e60\u60ef\u4e0a\u4ecd\u4f1a\u8bf4SSL\u63e1\u624b\u3002 \u8fd9\u4e2a\u63e1\u624b\u8fc7\u7a0b\u7684\u76ee\u6807\u4e3b\u8981\u6709\u4e09\u4e2a\uff1a 1.  \u9a8c\u8bc1\u670d\u52a1\u5668\u7684\u8eab\u4efd\uff0c\u786e\u4fdd\u4f60\u6b63\u5728\u4e0e\u6b63\u786e\u7684\u7f51\u7ad9\u901a\u4fe1\u800c\u4e0d\u662f\u5192\u540d\u9876\u66ff\u8005\u3002 2.  \u534f\u5546\u51fa\u4e00\u5957\u53cc\u65b9\u90fd\u652f\u6301\u7684\u52a0\u5bc6\u7b97\u6cd5\u3002 3.  \u5b89\u5168\u5730\u751f\u6210\u5e76\u4ea4\u6362\u7528\u4e8e\u540e\u7eed\u901a\u4fe1\u7684\u201c\u4f1a\u8bdd\u5bc6\u94a5\u201d\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/Https%E7%9A%84%E5%8A%A0%E5%AF%86%E6%96%B9%E5%BC%8F%E4%BB%8B%E7%BB%8D/#asymmetric-encryption","title":"\u975e\u5bf9\u79f0\u52a0\u5bc6 (Asymmetric Encryption)","text":"<p>\u975e\u5bf9\u79f0\u52a0\u5bc6\u4f7f\u7528\u4e00\u5bf9\u5bc6\u94a5\uff1a\u4e00\u4e2a\u516c\u94a5\u548c\u4e00\u4e2a\u79c1\u94a5\u3002 *   \u516c\u94a5 (Public Key)\uff1a\u53ef\u4ee5\u516c\u5f00\u7ed9\u4efb\u4f55\u4eba\u3002\u7528\u516c\u94a5\u52a0\u5bc6\u7684\u6570\u636e\uff0c\u53ea\u6709\u5bf9\u5e94\u7684\u79c1\u94a5\u624d\u80fd\u89e3\u5f00\u3002 *   \u79c1\u94a5 (Private Key)\uff1a\u7531\u670d\u52a1\u5668\u79d8\u5bc6\u4fdd\u7ba1\u3002</p> <p>\u5b83\u7684\u4f18\u70b9\u662f\u89e3\u51b3\u4e86\u5bc6\u94a5\u4ea4\u6362\u7684\u96be\u9898\uff0c\u975e\u5e38\u5b89\u5168\uff0c\u4f46\u7f3a\u70b9\u662f\u8ba1\u7b97\u91cf\u5927\uff0c\u52a0\u5bc6\u548c\u89e3\u5bc6\u7684\u901f\u5ea6\u8f83\u6162\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/Https%E7%9A%84%E5%8A%A0%E5%AF%86%E6%96%B9%E5%BC%8F%E4%BB%8B%E7%BB%8D/#symmetric-encryption","title":"\u5bf9\u79f0\u52a0\u5bc6 (Symmetric Encryption)","text":"<p>\u5bf9\u79f0\u52a0\u5bc6\u4f7f\u7528\u540c\u4e00\u4e2a\u5bc6\u94a5\u8fdb\u884c\u52a0\u5bc6\u548c\u89e3\u5bc6\u3002 \u5b83\u7684\u4f18\u70b9\u662f\u901f\u5ea6\u5feb\uff0c\u6548\u7387\u9ad8\uff0c\u9002\u5408\u52a0\u5bc6\u5927\u91cf\u6570\u636e\u3002 \u7f3a\u70b9\u662f\u5728\u4e0d\u5b89\u5168\u7684\u7f51\u7edc\u4e2d\uff0c\u5982\u4f55\u5c06\u8fd9\u4e2a\u552f\u4e00\u7684\u5bc6\u94a5\u5b89\u5168\u5730\u4ece\u4e00\u65b9\u4f20\u8f93\u7ed9\u53e6\u4e00\u65b9\u662f\u4e00\u4e2a\u5f88\u5927\u7684\u95ee\u9898\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/Https%E7%9A%84%E5%8A%A0%E5%AF%86%E6%96%B9%E5%BC%8F%E4%BB%8B%E7%BB%8D/#https-ssltls","title":"HTTPS\u7684\u6df7\u5408\u52a0\u5bc6\u6d41\u7a0b (SSL/TLS \u63e1\u624b)","text":"<p>HTTPS\u5de7\u5999\u5730\u7ed3\u5408\u4e86\u4e0a\u8ff0\u4e24\u79cd\u65b9\u5f0f\u7684\u4f18\u70b9\uff1a\u4f7f\u7528\u975e\u5bf9\u79f0\u52a0\u5bc6\u6765\u5b89\u5168\u5730\u534f\u5546\u548c\u4ea4\u6362\u5bf9\u79f0\u52a0\u5bc6\u6240\u9700\u7684\u5bc6\u94a5\uff0c\u7136\u540e\u4f7f\u7528\u5bf9\u79f0\u52a0\u5bc6\u6765\u9ad8\u6548\u5730\u4f20\u8f93\u5b9e\u9645\u7684\u7f51\u9875\u6570\u636e\u3002</p> <ol> <li> <p>\u5ba2\u6237\u7aef\u53d1\u8d77\u8bf7\u6c42 (Client Hello)</p> <ul> <li>\u5f53\u4f60\u5728\u6d4f\u89c8\u5668\u8f93\u5165\u4e00\u4e2a<code>https://</code>\u5f00\u5934\u7684\u7f51\u5740\u65f6\uff0c\u6d4f\u89c8\u5668\uff08\u5ba2\u6237\u7aef\uff09\u4f1a\u5411\u670d\u52a1\u5668\u53d1\u9001\u4e00\u4e2a\u201c\u4f60\u597d\u201d\u7684\u6d88\u606f\u3002</li> <li>\u8fd9\u4e2a\u6d88\u606f\u5305\u542b\u4e86\u5ba2\u6237\u7aef\u652f\u6301\u7684TLS\u7248\u672c\u3001\u4e00\u4e2a\u968f\u673a\u6570\uff08\u5ba2\u6237\u7aef\u968f\u673a\u6570\uff09\uff0c\u4ee5\u53ca\u4e00\u4e2a\u5ba2\u6237\u7aef\u652f\u6301\u7684\u52a0\u5bc6\u7b97\u6cd5\u5957\u4ef6\u5217\u8868\uff08Cipher Suites\uff09\u3002</li> </ul> </li> <li> <p>\u670d\u52a1\u5668\u54cd\u5e94 (Server Hello)</p> <ul> <li>\u670d\u52a1\u5668\u6536\u5230\u6d88\u606f\u540e\uff0c\u4f1a\u56de\u590d\u4e00\u4e2a\u201c\u4f60\u597d\u201d\u6d88\u606f\u3002</li> <li>\u6b64\u6d88\u606f\u4f1a\u4ece\u5ba2\u6237\u7aef\u7684\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a\u53cc\u65b9\u90fd\u652f\u6301\u7684\u52a0\u5bc6\u7b97\u6cd5\u5957\u4ef6\uff0c\u5e76\u9644\u4e0a\u53e6\u4e00\u4e2a\u968f\u673a\u6570\uff08\u670d\u52a1\u5668\u968f\u673a\u6570\uff09\u3002</li> <li>\u6700\u91cd\u8981\u7684\u4e00\u6b65\u662f\uff0c\u670d\u52a1\u5668\u4f1a\u5c06\u5176\u201cSSL\u8bc1\u4e66\u201d\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\u3002 \u8fd9\u4e2a\u8bc1\u4e66\u91cc\u5305\u542b\u4e86\u7f51\u7ad9\u7684\u4fe1\u606f\u548c\u670d\u52a1\u5668\u7684\u516c\u94a5\u3002\u8be5\u8bc1\u4e66\u7531\u53d7\u4fe1\u4efb\u7684\u7b2c\u4e09\u65b9\u673a\u6784\uff08CA\uff0c\u8bc1\u4e66\u9881\u53d1\u673a\u6784\uff09\u7b7e\u53d1\uff0c\u7528\u4e8e\u8bc1\u660e\u670d\u52a1\u5668\u7684\u8eab\u4efd\u3002</li> </ul> </li> <li> <p>\u5ba2\u6237\u7aef\u9a8c\u8bc1\u4e0e\u5bc6\u94a5\u4ea4\u6362</p> <ul> <li>\u5ba2\u6237\u7aef\u7684\u6d4f\u89c8\u5668\u4f1a\u9a8c\u8bc1\u6536\u5230\u7684\u8bc1\u4e66\u662f\u5426\u6709\u6548\u3001\u662f\u5426\u7531\u53d7\u4fe1\u4efb\u7684CA\u9881\u53d1\u3001\u662f\u5426\u8fc7\u671f\u4ee5\u53ca\u57df\u540d\u662f\u5426\u5339\u914d\u3002</li> <li>\u9a8c\u8bc1\u901a\u8fc7\u540e\uff0c\u5ba2\u6237\u7aef\u4f1a\u751f\u6210\u53e6\u4e00\u4e2a\u968f\u673a\u6570\uff0c\u8fd9\u4e2a\u968f\u673a\u6570\u88ab\u79f0\u4e3a\u201c\u9884\u4e3b\u5bc6\u94a5\u201d(Pre-Master Secret)\u3002</li> <li>\u5ba2\u6237\u7aef\u7528\u4ece\u670d\u52a1\u5668\u8bc1\u4e66\u4e2d\u83b7\u53d6\u7684\u516c\u94a5\uff0c\u5bf9\u8fd9\u4e2a\u201c\u9884\u4e3b\u5bc6\u94a5\u201d\u8fdb\u884c\u52a0\u5bc6\uff0c\u7136\u540e\u53d1\u9001\u7ed9\u670d\u52a1\u5668\u3002</li> </ul> </li> <li> <p>\u751f\u6210\u4f1a\u8bdd\u5bc6\u94a5</p> <ul> <li>\u670d\u52a1\u5668\u6536\u5230\u88ab\u516c\u94a5\u52a0\u5bc6\u7684\u201c\u9884\u4e3b\u5bc6\u94a5\u201d\u540e\uff0c\u7528\u81ea\u5df1\u7684\u79c1\u94a5\u8fdb\u884c\u89e3\u5bc6\uff0c\u4ece\u800c\u5f97\u5230\u539f\u59cb\u7684\u201c\u9884\u4e3b\u5bc6\u94a5\u201d\u3002</li> <li>\u73b0\u5728\uff0c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u53cc\u65b9\u90fd\u62e5\u6709\u4e86\u4e09\u4e2a\u76f8\u540c\u7684\u968f\u673a\u6570\uff1a\u5ba2\u6237\u7aef\u968f\u673a\u6570\u3001\u670d\u52a1\u5668\u968f\u673a\u6570\u548c\u9884\u4e3b\u5bc6\u94a5\u3002</li> <li>\u53cc\u65b9\u4f1a\u4f7f\u7528\u4e4b\u524d\u534f\u5546\u597d\u7684\u7b97\u6cd5\uff0c\u901a\u8fc7\u8fd9\u4e09\u4e2a\u968f\u673a\u6570\u5404\u81ea\u72ec\u7acb\u5730\u8ba1\u7b97\u51fa\u672c\u6b21\u901a\u4fe1\u6240\u4f7f\u7528\u7684\u201c\u4f1a\u8bdd\u5bc6\u94a5\u201d(Session Key)\u3002 \u8fd9\u4e2a\u4f1a\u8bdd\u5bc6\u94a5\u662f\u5bf9\u79f0\u52a0\u5bc6\u5bc6\u94a5\u3002</li> </ul> </li> <li> <p>\u63e1\u624b\u5b8c\u6210\uff0c\u5f00\u59cb\u52a0\u5bc6\u901a\u4fe1</p> <ul> <li>\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u5404\u81ea\u5411\u5bf9\u65b9\u53d1\u9001\u4e00\u6761\u201c\u63e1\u624b\u7ed3\u675f\u201d\u7684\u6d88\u606f\uff0c\u8fd9\u6761\u6d88\u606f\u4f1a\u7528\u521a\u521a\u751f\u6210\u7684\u201c\u4f1a\u8bdd\u5bc6\u94a5\u201d\u8fdb\u884c\u52a0\u5bc6\u3002</li> <li>\u5bf9\u65b9\u6536\u5230\u540e\uff0c\u7528\u540c\u6837\u7684\u4f1a\u8bdd\u5bc6\u94a5\u89e3\u5bc6\u3002\u5982\u679c\u89e3\u5bc6\u6210\u529f\uff0c\u5219\u4ee3\u8868\u63e1\u624b\u8fc7\u7a0b\u987a\u5229\u5b8c\u6210\uff0c\u53cc\u65b9\u90fd\u62e5\u6709\u4e86\u6b63\u786e\u7684\u4f1a\u8bdd\u5bc6\u94a5\u3002</li> <li>\u4ece\u8fd9\u4e00\u523b\u8d77\uff0c\u76f4\u5230\u4f60\u5173\u95ed\u7f51\u9875\u6216\u4f1a\u8bdd\u7ed3\u675f\uff0c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u4e4b\u95f4\u7684\u6240\u6709HTTP\u6570\u636e\u90fd\u5c06\u4f7f\u7528\u8fd9\u4e2a\u5bf9\u79f0\u7684\u201c\u4f1a\u8bdd\u5bc6\u94a5\u201d\u8fdb\u884c\u52a0\u5bc6\u548c\u89e3\u5bc6\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/Http%E8%AF%B7%E6%B1%82%E6%9C%89%E5%93%AA%E4%BA%9B%E8%AF%B7%E6%B1%82%E6%96%B9%E5%BC%8F/","title":"Http\u8bf7\u6c42\u6709\u54ea\u4e9b\u8bf7\u6c42\u65b9\u5f0f","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/Http%E8%AF%B7%E6%B1%82%E6%9C%89%E5%93%AA%E4%BA%9B%E8%AF%B7%E6%B1%82%E6%96%B9%E5%BC%8F/#get","title":"GET (\u83b7\u53d6\u8d44\u6e90)","text":"<p>\u8fd9\u662f\u6700\u5e38\u89c1\u7684\u65b9\u6cd5\u3002\u5b83\u7528\u4e8e\u4ece\u670d\u52a1\u5668\u8bf7\u6c42\u83b7\u53d6\u6307\u5b9a\u8d44\u6e90\u3002 *   \u7279\u70b9\uff1a     *   \u4e3b\u8981\u7528\u4e8e\u201c\u8bfb\u53d6\u201d\u6216\u201c\u67e5\u8be2\u201d\u6570\u636e\uff0c\u4e0d\u5e94\u8be5\u6539\u53d8\u670d\u52a1\u5668\u4e0a\u7684\u6570\u636e\u3002     *   \u8bf7\u6c42\u53c2\u6570\u4f1a\u9644\u52a0\u5728URL\u7684\u672b\u5c3e (\u4f8b\u5982 <code>?key1=value1&amp;key2=value2</code>)\uff0c\u56e0\u6b64\u4e0d\u9002\u5408\u4f20\u8f93\u654f\u611f\u4fe1\u606f\u3002     *   \u8bf7\u6c42\u662f\u5e42\u7b49\u7684\uff0c\u610f\u5473\u7740\u591a\u6b21\u53d1\u9001\u540c\u6837\u7684GET\u8bf7\u6c42\uff0c\u5176\u7ed3\u679c\u548c\u53ea\u53d1\u9001\u4e00\u6b21\u662f\u76f8\u540c\u7684\u3002     *   \u8bf7\u6c42\u662f\u53ef\u7f13\u5b58\u7684\uff0c\u53ef\u4ee5\u88ab\u6d4f\u89c8\u5668\u6216\u4ee3\u7406\u670d\u52a1\u5668\u7f13\u5b58\u3002</p> <pre><code>\u4f8b\u5b50\uff1a\u5728\u6d4f\u89c8\u5668\u5730\u5740\u680f\u8f93\u5165\u7f51\u5740\u8bbf\u95ee\u7f51\u9875\uff0c\u70b9\u51fb\u94fe\u63a5\u8df3\u8f6c\uff0c\u67e5\u770b\u5546\u54c1\u5217\u8868\u3002\n</code></pre>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/Http%E8%AF%B7%E6%B1%82%E6%9C%89%E5%93%AA%E4%BA%9B%E8%AF%B7%E6%B1%82%E6%96%B9%E5%BC%8F/#post","title":"POST (\u521b\u5efa\u8d44\u6e90)","text":"<p>\u7528\u4e8e\u5411\u670d\u52a1\u5668\u63d0\u4ea4\u6570\u636e\uff0c\u8bf7\u6c42\u670d\u52a1\u5668\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u8d44\u6e90\u3002 *   \u7279\u70b9\uff1a     *   \u6570\u636e\u5305\u542b\u5728\u8bf7\u6c42\u4f53(Request Body)\u4e2d\uff0c\u800c\u4e0d\u662fURL\u4e2d\uff0c\u56e0\u6b64\u53ef\u4ee5\u53d1\u9001\u5927\u91cf\u6570\u636e\uff0c\u4e5f\u6bd4GET\u66f4\u5b89\u5168\uff0c\u9002\u5408\u4f20\u8f93\u654f\u611f\u4fe1\u606f\uff08\u5982\u5bc6\u7801\uff09\u3002     *   POST\u8bf7\u6c42\u4e0d\u662f\u5e42\u7b49\u7684\u3002\u5982\u679c\u8fde\u7eed\u4e24\u6b21\u63d0\u4ea4\u540c\u6837\u7684POST\u8bf7\u6c42\uff0c\u670d\u52a1\u5668\u4e0a\u53ef\u80fd\u4f1a\u521b\u5efa\u4e24\u4e2a\u65b0\u7684\u8d44\u6e90\u3002     *   \u8bf7\u6c42\u9ed8\u8ba4\u662f\u4e0d\u53ef\u7f13\u5b58\u7684\u3002</p> <pre><code>\u4f8b\u5b50\uff1a\u7528\u6237\u6ce8\u518c\u65f6\u63d0\u4ea4\u8868\u5355\uff0c\u53d1\u8868\u4e00\u7bc7\u65b0\u6587\u7ae0\uff0c\u4e0b\u8ba2\u5355\u3002\n</code></pre>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/Http%E8%AF%B7%E6%B1%82%E6%9C%89%E5%93%AA%E4%BA%9B%E8%AF%B7%E6%B1%82%E6%96%B9%E5%BC%8F/#put","title":"PUT (\u66f4\u65b0/\u66ff\u6362\u8d44\u6e90)","text":"<p>\u7528\u4e8e\u5411\u670d\u52a1\u5668\u53d1\u9001\u6570\u636e\uff0c\u4ee5\u66f4\u65b0\u6216\u5b8c\u5168\u66ff\u6362\u4e00\u4e2a\u5df2\u7ecf\u5b58\u5728\u7684\u8d44\u6e90\u3002 *   \u7279\u70b9\uff1a     *   \u4e0ePOST\u7c7b\u4f3c\uff0c\u6570\u636e\u4e5f\u5305\u542b\u5728\u8bf7\u6c42\u4f53\u4e2d\u3002     *   PUT\u8bf7\u6c42\u662f\u5e42\u7b49\u7684\u3002\u65e0\u8bba\u4f60\u7528\u540c\u6837\u7684\u6570\u636e\u53d1\u9001\u4e00\u6b21\u8fd8\u662f\u591a\u6b21PUT\u8bf7\u6c42\u5230\u540c\u4e00\u4e2aURL\uff0c\u6700\u7ec8\u670d\u52a1\u5668\u4e0a\u8be5\u8d44\u6e90\u7684\u72b6\u6001\u90fd\u662f\u4e00\u6837\u7684\u3002     *   \u5b83\u8981\u6c42\u5ba2\u6237\u7aef\u63d0\u4f9b\u5b8c\u6574\u7684\u8d44\u6e90\u6570\u636e\uff0c\u4f1a\u5bf9\u6574\u4e2a\u8d44\u6e90\u8fdb\u884c\u66ff\u6362\u3002</p> <pre><code>\u4f8b\u5b50\uff1a\u66f4\u65b0\u4e00\u4e2a\u7528\u6237\u7684\u5b8c\u6574\u4e2a\u4eba\u8d44\u6599\u4fe1\u606f\uff08\u59d3\u540d\u3001\u5e74\u9f84\u3001\u5730\u5740\u7b49\u5168\u90e8\u4fe1\u606f\uff09\u3002\n</code></pre>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/Http%E8%AF%B7%E6%B1%82%E6%9C%89%E5%93%AA%E4%BA%9B%E8%AF%B7%E6%B1%82%E6%96%B9%E5%BC%8F/#delete","title":"DELETE (\u5220\u9664\u8d44\u6e90)","text":"<p>\u7528\u4e8e\u8bf7\u6c42\u670d\u52a1\u5668\u5220\u9664\u6307\u5b9a\u7684\u8d44\u6e90\u3002 *   \u7279\u70b9\uff1a     *   DELETE\u8bf7\u6c42\u662f\u5e42\u7b49\u7684\u3002\u4e00\u6b21\u6216\u591a\u6b21\u5220\u9664\u540c\u4e00\u4e2a\u8d44\u6e90\uff0c\u6700\u7ec8\u7ed3\u679c\u90fd\u662f\u8be5\u8d44\u6e90\u4e0d\u5b58\u5728\u3002     *   \u64cd\u4f5c\u901a\u5e38\u662f\u4e0d\u53ef\u9006\u7684\u3002</p> <pre><code>\u4f8b\u5b50\uff1a\u5220\u9664\u4e00\u7bc7\u6587\u7ae0\uff0c\u53d6\u6d88\u4e00\u4e2a\u8ba2\u5355\u3002\n</code></pre> \u65b9\u6cd5 \u4e3b\u8981\u7528\u9014 \u662f\u5426\u5e42\u7b49(Idempotent) \u662f\u5426\u5b89\u5168(Safe) \u6570\u636e\u4f4d\u7f6e GET \u67e5\u8be2/\u83b7\u53d6\u8d44\u6e90 \u662f \u662f URL POST \u521b\u5efa\u65b0\u8d44\u6e90 \u5426 \u5426 \u8bf7\u6c42\u4f53 PUT \u5b8c\u6574\u66f4\u65b0\u8d44\u6e90 \u662f \u5426 \u8bf7\u6c42\u4f53 DELETE \u5220\u9664\u8d44\u6e90 \u662f \u5426 URL PATCH \u90e8\u5206\u66f4\u65b0\u8d44\u6e90 \u4e0d\u4e00\u5b9a \u5426 \u8bf7\u6c42\u4f53 HEAD \u83b7\u53d6\u8d44\u6e90\u5143\u6570\u636e \u662f \u662f URL OPTIONS \u67e5\u8be2\u652f\u6301\u65b9\u6cd5 \u662f \u662f N/A"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/TCP%E6%8B%A5%E5%A1%9E%E7%AA%97%E5%8F%A3%E6%98%AF%E4%BB%80%E4%B9%88/","title":"TCP\u62e5\u585e\u7a97\u53e3\u662f\u4ec0\u4e48","text":"<p>TCP\u62e5\u585e\u7a97\u53e3\uff08<code>cwnd</code>\uff09\u662fTCP\u534f\u8bae\u4e2d\u62e5\u585e\u63a7\u5236\u673a\u5236\u7684\u6838\u5fc3\u7ec4\u6210\u90e8\u5206\u3002\u5b83\u662f\u4e00\u4e2a\u7531\u53d1\u9001\u65b9\u7ef4\u62a4\u7684\u72b6\u6001\u53d8\u91cf\uff0c\u7528\u6765\u4f30\u7b97\u5728\u9020\u6210\u7f51\u7edc\u62e5\u585e\u4e4b\u524d\uff0c\u53ef\u4ee5\u5411\u7f51\u7edc\u4e2d\u53d1\u9001\u591a\u5c11\u6570\u636e\u3002\u7b80\u800c\u8a00\u4e4b\uff0c<code>cwnd</code>\u662f\u53d1\u9001\u65b9\u6839\u636e\u81ea\u5df1\u611f\u77e5\u7684\u7f51\u7edc\u62e5\u585e\u7a0b\u5ea6\u800c\u52a8\u6001\u8c03\u6574\u7684\u201c\u53d1\u9001\u8bb8\u53ef\u201d\u5927\u5c0f\u3002</p> <p>\u4e3a\u4e86\u907f\u514d\u8fc7\u591a\u7684\u6570\u636e\u6ce8\u5165\u7f51\u7edc\u5bfc\u81f4\u8def\u7531\u5668\u6216\u94fe\u8def\u8fc7\u8f7d\uff0cTCP\u53d1\u9001\u65b9\u5728\u4efb\u4f55\u65f6\u523b\u7684\u5b9e\u9645\u53d1\u9001\u7a97\u53e3\u5927\u5c0f\u53d6\u51b3\u4e8e\u4e24\u4e2a\u56e0\u7d20\uff1a\u62e5\u585e\u7a97\u53e3\uff08<code>cwnd</code>\uff09\u548c\u63a5\u6536\u65b9\u901a\u544a\u7684\u63a5\u6536\u7a97\u53e3\uff08<code>rwnd</code>\uff09\u3002</p> <p>\u53d1\u9001\u7a97\u53e3 (<code>swnd</code>) = min(<code>cwnd</code>, <code>rwnd</code>)</p> <ul> <li>\u63a5\u6536\u7a97\u53e3 (<code>rwnd</code>)\uff1a\u53cd\u6620\u4e86\u63a5\u6536\u65b9\u7684\u63a5\u6536\u80fd\u529b\uff0c\u7528\u4e8e\u6d41\u91cf\u63a7\u5236\uff0c\u9632\u6b62\u53d1\u9001\u65b9\u53d1\u9001\u7684\u6570\u636e\u91cf\u8d85\u8fc7\u63a5\u6536\u65b9\u7f13\u51b2\u533a\u7684\u5904\u7406\u80fd\u529b\u3002</li> <li>\u62e5\u585e\u7a97\u53e3 (<code>cwnd</code>)\uff1a\u53cd\u6620\u4e86\u53d1\u9001\u65b9\u5bf9\u7f51\u7edc\u72b6\u51b5\u7684\u8bc4\u4f30\uff0c\u7528\u4e8e\u62e5\u585e\u63a7\u5236\uff0c\u9632\u6b62\u8fc7\u591a\u7684\u6570\u636e\u5305\u5bfc\u81f4\u7f51\u7edc\u62e5\u585e\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/TCP%E6%8B%A5%E5%A1%9E%E7%AA%97%E5%8F%A3%E6%98%AF%E4%BB%80%E4%B9%88/#_1","title":"\u62e5\u585e\u7a97\u53e3\u5982\u4f55\u5de5\u4f5c\uff1f","text":"<p>\u62e5\u585e\u7a97\u53e3\u7684\u5927\u5c0f\u5e76\u975e\u56fa\u5b9a\u4e0d\u53d8\uff0c\u800c\u662f\u6839\u636e\u7f51\u7edc\u7684\u5b9e\u65f6\u72b6\u51b5\u52a8\u6001\u8c03\u6574\u3002\u5176\u57fa\u672c\u8c03\u8282\u539f\u5219\u662f\uff1a</p> <ul> <li>\u7f51\u7edc\u901a\u7545\u65f6\uff1a\u5982\u679c\u6ca1\u6709\u68c0\u6d4b\u5230\u62e5\u585e\uff08\u5373\u80fd\u591f\u6309\u65f6\u6536\u5230\u786e\u8ba4ACK\uff09\uff0c\u5c31\u589e\u5927<code>cwnd</code>\uff0c\u4ee5\u63d0\u9ad8\u6570\u636e\u53d1\u9001\u901f\u7387\u548c\u7f51\u7edc\u5229\u7528\u7387\u3002</li> <li>\u7f51\u7edc\u62e5\u585e\u65f6\uff1a\u5982\u679c\u68c0\u6d4b\u5230\u62e5\u585e\uff08\u901a\u5e38\u8868\u73b0\u4e3a\u6570\u636e\u5305\u4e22\u5931\uff09\uff0c\u5c31\u51cf\u5c0f<code>cwnd</code>\uff0c\u4ee5\u964d\u4f4e\u6570\u636e\u53d1\u9001\u901f\u7387\uff0c\u7f13\u89e3\u7f51\u7edc\u538b\u529b\u3002</li> </ul> <p>TCP\u901a\u8fc7\u4e00\u5957\u590d\u6742\u7684\u7b97\u6cd5\u6765\u7ba1\u7406<code>cwnd</code>\u7684\u53d8\u5316\uff0c\u8fd9\u5957\u7b97\u6cd5\u901a\u5e38\u5305\u62ec\u56db\u4e2a\u4e3b\u8981\u9636\u6bb5\uff1a\u6162\u542f\u52a8\uff08Slow Start\uff09\u3001\u62e5\u585e\u907f\u514d\uff08Congestion Avoidance\uff09\u3001\u5feb\u901f\u91cd\u4f20\uff08Fast Retransmit\uff09\u548c\u5feb\u901f\u6062\u590d\uff08Fast Recovery\uff09\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/TCP%E6%8B%A5%E5%A1%9E%E7%AA%97%E5%8F%A3%E6%98%AF%E4%BB%80%E4%B9%88/#_2","title":"\u62e5\u585e\u7a97\u53e3\u7684\u56db\u4e2a\u63a7\u5236\u9636\u6bb5","text":"<p>\u8fd9\u56db\u4e2a\u9636\u6bb5\u5171\u540c\u534f\u4f5c\uff0c\u7cbe\u7ec6\u5730\u8c03\u8282<code>cwnd</code>\u7684\u5927\u5c0f\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/TCP%E6%8B%A5%E5%A1%9E%E7%AA%97%E5%8F%A3%E6%98%AF%E4%BB%80%E4%B9%88/#1-slow-start","title":"1. \u6162\u542f\u52a8 (Slow Start)","text":"<p>\u5f53TCP\u8fde\u63a5\u521a\u5efa\u7acb\u65f6\uff0c\u53d1\u9001\u65b9\u5bf9\u7f51\u7edc\u72b6\u51b5\u4e00\u65e0\u6240\u77e5\u3002\u4e3a\u4e86\u907f\u514d\u4e00\u5f00\u59cb\u5c31\u53d1\u9001\u5927\u91cf\u6570\u636e\u5305\u5bfc\u81f4\u7f51\u7edc\u762b\u75ea\uff0c\u5b83\u4f1a\u91c7\u7528\u4e00\u79cd\u4fdd\u5b88\u7684\u63a2\u6d4b\u65b9\u5f0f\uff0c\u8fd9\u4e2a\u9636\u6bb5\u5c31\u662f\u201c\u6162\u542f\u52a8\u201d\u3002</p> <ul> <li>\u521d\u59cb\u503c\uff1a\u8fde\u63a5\u5efa\u7acb\u4e4b\u521d\uff0c<code>cwnd</code>\u88ab\u521d\u59cb\u5316\u4e3a\u4e00\u4e2a\u8f83\u5c0f\u7684\u503c\uff0c\u901a\u5e38\u662f1\u4e2aMSS\uff08Maximum Segment Size\uff0c\u6700\u5927\u62a5\u6587\u6bb5\u5927\u5c0f\uff09\u3002</li> <li>\u6307\u6570\u589e\u957f\uff1a\u6bcf\u5f53\u53d1\u9001\u65b9\u6536\u5230\u4e00\u4e2a\u5bf9\u65b0\u6570\u636e\u7684ACK\u786e\u8ba4\u65f6\uff0c<code>cwnd</code>\u5c31\u4f1a\u589e\u52a0\u4e00\u4e2aMSS\u3002\u5b9e\u9645\u6548\u679c\u662f\uff0c\u6bcf\u7ecf\u8fc7\u4e00\u4e2a\u5f80\u8fd4\u65f6\u95f4\uff08RTT\uff09\uff0c<code>cwnd</code>\u7684\u5927\u5c0f\u5c31\u4f1a\u7ffb\u500d\uff08\u6307\u6570\u7ea7\u589e\u957f\uff09\u3002</li> <li>\u201c\u6162\u201d\u7684\u8bef\u89e3\uff1a\u6162\u542f\u52a8\u7684\u201c\u6162\u201d\u6307\u7684\u662f\u521d\u59cb\u7a97\u53e3\u5c0f\uff0c\u800c\u975e\u589e\u957f\u901f\u5ea6\u6162\u3002\u5b9e\u9645\u4e0a\uff0c\u5b83\u7684\u6307\u6570\u589e\u957f\u901f\u5ea6\u975e\u5e38\u5feb\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/TCP%E6%8B%A5%E5%A1%9E%E7%AA%97%E5%8F%A3%E6%98%AF%E4%BB%80%E4%B9%88/#2-congestion-avoidance","title":"2. \u62e5\u585e\u907f\u514d (Congestion Avoidance)","text":"<p>\u6307\u6570\u589e\u957f\u4e0d\u80fd\u65e0\u9650\u6301\u7eed\uff0c\u5426\u5219\u5f88\u5feb\u4f1a\u5360\u6ee1\u7f51\u7edc\u5e26\u5bbd\u5e76\u5bfc\u81f4\u62e5\u585e\u3002\u4e3a\u6b64\uff0c\u9700\u8981\u4e00\u4e2a\u72b6\u6001\u53d8\u91cf\u53eb\u505a\u6162\u542f\u52a8\u9608\u503c\uff08<code>ssthresh</code>\uff09\u3002</p> <ul> <li>\u8fdb\u5165\u6761\u4ef6\uff1a\u5f53<code>cwnd</code>\u7684\u5927\u5c0f\u589e\u957f\u5230<code>ssthresh</code>\u65f6\uff0c\u6162\u542f\u52a8\u9636\u6bb5\u7ed3\u675f\uff0c\u8fdb\u5165\u62e5\u585e\u907f\u514d\u9636\u6bb5\u3002</li> <li>\u7ebf\u6027\u589e\u957f\uff1a\u8fdb\u5165\u62e5\u585e\u907f\u514d\u9636\u6bb5\u540e\uff0c<code>cwnd</code>\u7684\u589e\u957f\u65b9\u5f0f\u53d8\u5f97\u66f4\u52a0\u7f13\u548c\u3002\u4e0d\u518d\u662f\u6307\u6570\u589e\u957f\uff0c\u800c\u662f\u6bcf\u7ecf\u8fc7\u4e00\u4e2aRTT\uff0c<code>cwnd</code>\u53ea\u589e\u52a0\u4e00\u4e2aMSS\u7684\u5927\u5c0f\uff08\u52a0\u6cd5\u589e\u5927\uff09\u3002\u8fd9\u79cd\u7ebf\u6027\u589e\u957f\u7684\u65b9\u5f0f\u53ef\u4ee5\u66f4\u6e29\u548c\u5730\u63a2\u6d4b\u53ef\u7528\u5e26\u5bbd\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/TCP%E6%8B%A5%E5%A1%9E%E7%AA%97%E5%8F%A3%E6%98%AF%E4%BB%80%E4%B9%88/#3","title":"3. \u62e5\u585e\u53d1\u751f\u65f6\u7684\u5904\u7406","text":"<p>\u5f53\u7f51\u7edc\u4e2d\u53d1\u751f\u6570\u636e\u5305\u4e22\u5931\u65f6\uff0cTCP\u4f1a\u5c06\u5176\u89c6\u4e3a\u7f51\u7edc\u62e5\u585e\u7684\u4fe1\u53f7\uff0c\u5e76\u7acb\u5373\u91c7\u53d6\u63aa\u65bd\u51cf\u5c0f<code>cwnd</code>\u3002\u4e22\u5305\u7684\u5224\u65ad\u4e3b\u8981\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a</p> <ul> <li> <p>\u8d85\u65f6\u91cd\u4f20 (Timeout Retransmission)\uff1a\u8fd9\u662f\u7f51\u7edc\u62e5\u585e\u7684\u5f3a\u70c8\u4fe1\u53f7\u3002\u5982\u679c\u53d1\u9001\u65b9\u5728\u7b49\u5f85\u4e00\u4e2aACK\u65f6\u53d1\u751f\u8d85\u65f6\uff0cTCP\u4f1a\u8ba4\u4e3a\u7f51\u7edc\u72b6\u51b5\u975e\u5e38\u7cdf\u7cd5\u3002</p> <ul> <li><code>ssthresh</code>\u4f1a\u51cf\u4e3a\u5f53\u524d<code>cwnd</code>\u7684\u4e00\u534a\u3002</li> <li><code>cwnd</code>\u4f1a\u9aa4\u964d\u81f3\u521d\u59cb\u503c1\u4e2aMSS\u3002</li> <li>\u53d1\u9001\u65b9\u91cd\u65b0\u8fdb\u5165\u6162\u542f\u52a8\u9636\u6bb5\u3002</li> </ul> </li> <li> <p>\u5feb\u901f\u91cd\u4f20 (Fast Retransmit)\uff1a\u8fd9\u662f\u76f8\u5bf9\u8f83\u5f31\u7684\u62e5\u585e\u4fe1\u53f7\u3002\u5f53\u53d1\u9001\u65b9\u8fde\u7eed\u6536\u5230\u4e09\u4e2a\u6216\u4ee5\u4e0a\u76f8\u540c\u7684\uff08\u91cd\u590d\u7684\uff09ACK\u65f6\uff0c\u5b83\u4f1a\u8ba4\u4e3a\u8fd9\u4e2aACK\u5bf9\u5e94\u7684\u5e8f\u5217\u53f7\u4e4b\u540e\u7684\u6570\u636e\u5305\u5f88\u53ef\u80fd\u4e22\u5931\u4e86\uff0c\u4f46\u7f51\u7edc\u5e76\u672a\u5b8c\u5168\u762b\u75ea\uff0c\u56e0\u4e3a\u540e\u7eed\u7684\u6570\u636e\u5305\u8fd8\u80fd\u5230\u8fbe\u63a5\u6536\u65b9\u3002</p> <ul> <li>\u53d1\u9001\u65b9\u4e0d\u7b49\u8d85\u65f6\u8ba1\u65f6\u5668\u7ed3\u675f\uff0c\u7acb\u5373\u91cd\u4f20\u4e22\u5931\u7684\u6570\u636e\u5305\u3002</li> <li>\u8fd9\u89e6\u53d1\u4e86\u5feb\u901f\u6062\u590d\u9636\u6bb5\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/TCP%E6%8B%A5%E5%A1%9E%E7%AA%97%E5%8F%A3%E6%98%AF%E4%BB%80%E4%B9%88/#4-fast-recovery","title":"4. \u5feb\u901f\u6062\u590d (Fast Recovery)","text":"<p>\u5feb\u901f\u91cd\u4f20\u89e6\u53d1\u540e\uff0cTCP\u8ba4\u4e3a\u6ca1\u6709\u5fc5\u8981\u50cf\u8d85\u65f6\u91cd\u4f20\u90a3\u6837 drastic\u5730\u5c06<code>cwnd</code>\u964d\u4e3a1\uff0c\u56e0\u4e3a\u8fde\u7eed\u7684\u91cd\u590dACK\u8868\u660e\u7f51\u7edc\u4e2d\u4ecd\u6709\u6570\u636e\u5728\u6b63\u5e38\u4f20\u8f93\u3002</p> <ul> <li>\u4e58\u6cd5\u51cf\u5c0f\uff1a<code>ssthresh</code>\u548c<code>cwnd</code>\u90fd\u4f1a\u88ab\u8bbe\u7f6e\u4e3a\u5f53\u524d<code>cwnd</code>\u503c\u7684\u4e00\u534a\uff08\u4e58\u6cd5\u51cf\u5c0f\uff09\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u964d\u4e3a1\u3002</li> <li>\u907f\u514d\u6162\u542f\u52a8\uff1a\u4e4b\u540e\uff0cTCP\u4e0d\u4f1a\u8fdb\u5165\u6162\u542f\u52a8\u9636\u6bb5\uff0c\u800c\u662f\u76f4\u63a5\u5f00\u59cb\u62e5\u585e\u907f\u514d\u9636\u6bb5\u7684\u7ebf\u6027\u589e\u957f\u3002 \u6709\u4e9b\u5b9e\u73b0\u4e2d\uff0c\u5728\u6536\u5230\u91cd\u590dACK\u65f6\u8fd8\u4f1a\u4e34\u65f6\u6027\u5730\u589e\u52a0<code>cwnd</code>\uff0c\u4ee5\u53d1\u9001\u65b0\u7684\u6570\u636e\u5305\uff0c\u5c3d\u5feb\u586b\u8865\u7f51\u7edc\u7ba1\u9053\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/TCP%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E7%9A%84/","title":"TCP\u662f\u5982\u4f55\u5b9e\u73b0\u53ef\u9760\u4f20\u8f93\u7684","text":"<p>TCP (Transmission Control Protocol, \u4f20\u8f93\u63a7\u5236\u534f\u8bae) \u4e4b\u6240\u4ee5\u80fd\u591f\u5b9e\u73b0\u201c\u53ef\u9760\u4f20\u8f93\u201d\uff0c\u662f\u56e0\u4e3a\u5b83\u8bbe\u8ba1\u4e86\u4e00\u5957\u7cbe\u5bc6\u7684\u3001\u73af\u73af\u76f8\u6263\u7684\u673a\u5236\u6765\u5e94\u5bf9\u7f51\u7edc\u4e2d\u53ef\u80fd\u51fa\u73b0\u7684\u5404\u79cd\u95ee\u9898\uff0c\u5982\u6570\u636e\u5305\u4e22\u5931\u3001\u91cd\u590d\u3001\u4e71\u5e8f\u6216\u635f\u574f\u3002</p> <p>IP\u534f\u8bae\u672c\u8eab\u662f\u201c\u5c3d\u529b\u800c\u4e3a\u201d\u7684\uff0c\u4e0d\u4fdd\u8bc1\u6570\u636e\u80fd\u9001\u8fbe\uff0c\u800cTCP\u6b63\u662f\u5728IP\u534f\u8bae\u4e4b\u4e0a\u6784\u5efa\u4e86\u4e00\u4e2a\u53ef\u9760\u7684\u901a\u4fe1\u5c42\u3002\u5176\u53ef\u9760\u6027\u4e3b\u8981\u901a\u8fc7\u4ee5\u4e0b\u51e0\u4e2a\u6838\u5fc3\u673a\u5236\u6765\u5b9e\u73b0\uff1a</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/TCP%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E7%9A%84/#sequence-numbers","title":"\u5e8f\u5217\u53f7 (Sequence Numbers)","text":"<p>\u8fd9\u662fTCP\u5b9e\u73b0\u6709\u5e8f\u4f20\u8f93\u548c\u6570\u636e\u5b8c\u6574\u6027\u68c0\u67e5\u7684\u57fa\u7840\u3002</p> <ul> <li> <p>\u5de5\u4f5c\u539f\u7406\uff1a     TCP\u5728\u53d1\u9001\u6570\u636e\u65f6\uff0c\u4f1a\u5c06\u6570\u636e\u5206\u5272\u6210\u4e00\u4e2a\u4e2a\u5927\u5c0f\u5408\u9002\u7684\u62a5\u6587\u6bb5 (Segment)\u3002\u5b83\u4f1a\u4e3a\u6bcf\u4e2a\u62a5\u6587\u6bb5\u4e2d\u7684\u7b2c\u4e00\u4e2a\u5b57\u8282\u5206\u914d\u4e00\u4e2a\u5e8f\u5217\u53f7\u3002\u4f8b\u5982\uff0c\u7b2c\u4e00\u4e2a\u62a5\u6587\u6bb5\u7684\u5e8f\u5217\u53f7\u662f1\uff0c\u5305\u542b1000\u5b57\u8282\u7684\u6570\u636e\uff0c\u90a3\u4e48\u4e0b\u4e00\u4e2a\u62a5\u6587\u6bb5\u7684\u5e8f\u5217\u53f7\u5c31\u4f1a\u662f1001\u3002</p> </li> <li> <p>\u5982\u4f55\u4fdd\u8bc1\u53ef\u9760\u6027\uff1a</p> <ul> <li>\u89e3\u51b3\u4e71\u5e8f\u95ee\u9898\uff1a\u7f51\u7edc\u4f20\u8f93\u4e2d\uff0c\u540e\u53d1\u7684\u6570\u636e\u5305\u53ef\u80fd\u5148\u5230\u3002\u63a5\u6536\u65b9\u53ef\u4ee5\u6839\u636e\u5e8f\u5217\u53f7\u5bf9\u63a5\u6536\u5230\u7684\u62a5\u6587\u6bb5\u8fdb\u884c\u91cd\u65b0\u6392\u5e8f\uff0c\u4ece\u800c\u6062\u590d\u51fa\u539f\u59cb\u7684\u3001\u6709\u5e8f\u7684\u6570\u636e\u6d41\u3002</li> <li>\u89e3\u51b3\u91cd\u590d\u95ee\u9898\uff1a\u5982\u679c\u63a5\u6536\u65b9\u6536\u5230\u4e86\u4e24\u4e2a\u5e8f\u5217\u53f7\u76f8\u540c\u7684\u62a5\u6587\u6bb5\uff0c\u5b83\u5c31\u77e5\u9053\u5176\u4e2d\u4e00\u4e2a\u662f\u91cd\u590d\u7684\uff0c\u4f1a\u76f4\u63a5\u4e22\u5f03\u91cd\u590d\u7684\u90a3\u4e2a\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/TCP%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E7%9A%84/#acknowledgements-acks","title":"\u786e\u8ba4\u5e94\u7b54\u673a\u5236 (Acknowledgements, ACKs)","text":"<p>\u8fd9\u4e2a\u673a\u5236\u7528\u6765\u786e\u8ba4\u6570\u636e\u662f\u5426\u88ab\u5bf9\u65b9\u6210\u529f\u63a5\u6536\u3002</p> <ul> <li> <p>\u5de5\u4f5c\u539f\u7406\uff1a     \u5f53\u63a5\u6536\u65b9\u6536\u5230\u6765\u81ea\u53d1\u9001\u65b9\u7684\u6570\u636e\u540e\uff0c\u4f1a\u53d1\u9001\u4e00\u4e2a\u786e\u8ba4(ACK)\u62a5\u6587\u6bb5\u4f5c\u4e3a\u56de\u5e94\u3002\u8fd9\u4e2aACK\u62a5\u6587\u4e2d\u5305\u542b\u4e00\u4e2a\u201c\u786e\u8ba4\u53f7\u201d\uff0c\u8fd9\u4e2a\u53f7\u7801\u7684\u6570\u503c\u662f\u201c\u63a5\u6536\u65b9\u671f\u671b\u6536\u5230\u7684\u4e0b\u4e00\u4e2a\u5b57\u8282\u7684\u5e8f\u5217\u53f7\u201d\u3002\u4f8b\u5982\uff0c\u63a5\u6536\u65b9\u6210\u529f\u6536\u5230\u4e86\u5e8f\u5217\u53f7\u4e3a1\u52301000\u7684\u6570\u636e\uff0c\u5b83\u5c31\u4f1a\u56de\u590d\u4e00\u4e2aACK\uff0c\u786e\u8ba4\u53f7\u4e3a1001\u3002</p> </li> <li> <p>\u5982\u4f55\u4fdd\u8bc1\u53ef\u9760\u6027\uff1a</p> <ul> <li>\u786e\u8ba4\u6570\u636e\u5230\u8fbe\uff1a\u53d1\u9001\u65b9\u6536\u5230ACK\u540e\uff0c\u5c31\u77e5\u9053\u4e4b\u524d\u53d1\u9001\u7684\u6570\u636e\u5df2\u7ecf\u88ab\u5bf9\u65b9\u6210\u529f\u63a5\u6536\u3002\u8fd9\u79cd\u4e00\u53d1\u4e00\u6536\u7684\u786e\u8ba4\u6a21\u5f0f\u662f\u53ef\u9760\u6027\u7684\u6838\u5fc3\u3002\u8fd9\u79cd\u7d2f\u8ba1\u786e\u8ba4\u7684\u673a\u5236\u6548\u7387\u5f88\u9ad8\uff0c\u786e\u8ba4\u4e861001\uff0c\u5c31\u4ee3\u88681001\u4e4b\u524d\u7684\u6240\u6709\u6570\u636e\u90fd\u6536\u5230\u4e86\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/TCP%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E7%9A%84/#timeout-and-retransmission","title":"\u8d85\u65f6\u91cd\u4f20 (Timeout and Retransmission)","text":"<p>\u5f53TCP\u53d1\u9001\u4e00\u4e2a\u6570\u636e\u6bb5\uff08Segment\uff09\u540e\uff0c\u5b83\u4f1a\u542f\u52a8\u4e00\u4e2a\u8ba1\u65f6\u5668\uff0c\u5e76\u5c06\u8be5\u6570\u636e\u6bb5\u653e\u5165\u91cd\u4f20\u961f\u5217\u3002</p> <ul> <li>\u786e\u8ba4\u673a\u5236 (Acknowledgement - ACK)\uff1a\u63a5\u6536\u65b9\u5728\u6536\u5230\u6570\u636e\u540e\u4f1a\u5411\u53d1\u9001\u65b9\u53d1\u9001\u4e00\u4e2a\u786e\u8ba4\u6d88\u606f\uff08ACK\uff09\u3002\u8fd9\u4e2aACK\u6d88\u606f\u5305\u542b\u4e0b\u4e00\u4e2a\u671f\u671b\u63a5\u6536\u7684\u5b57\u8282\u7684\u5e8f\u5217\u53f7\u3002</li> <li>\u91cd\u4f20\u5b9a\u65f6\u5668 (Retransmission Timer)\uff1a\u53d1\u9001\u65b9\u4e3a\u6bcf\u4e2a\u53d1\u9001\u7684\u6570\u636e\u6bb5\u8bbe\u7f6e\u4e00\u4e2a\u91cd\u4f20\u5b9a\u65f6\u5668\u3002\u5982\u679c\u5728\u5b9a\u65f6\u5668\u5230\u671f\u4e4b\u524d\u6ca1\u6709\u6536\u5230\u5bf9\u5e94\u6570\u636e\u6bb5\u7684ACK\uff0c\u53d1\u9001\u65b9\u5c31\u4f1a\u8ba4\u4e3a\u8be5\u6570\u636e\u6bb5\u4e22\u5931\uff0c\u5e76\u91cd\u65b0\u53d1\u9001\u8be5\u6570\u636e\u6bb5\u3002</li> <li>\u52a8\u6001\u8c03\u6574RTO (Retransmission Timeout)\uff1a\u91cd\u4f20\u8d85\u65f6\u65f6\u95f4\uff08RTO\uff09\u7684\u8bbe\u5b9a\u81f3\u5173\u91cd\u8981\u3002\u5982\u679cRTO\u592a\u77ed\uff0c\u53ef\u80fd\u5bfc\u81f4\u4e0d\u5fc5\u8981\u7684\u91cd\u4f20\uff1b\u5982\u679cRTO\u592a\u957f\uff0c\u4f1a\u964d\u4f4e\u4f20\u8f93\u6548\u7387\u3002TCP\u4f1a\u6839\u636e\u7f51\u7edc\u72b6\u51b5\uff08\u5982\u5f80\u8fd4\u65f6\u95f4RTT\uff09\u52a8\u6001\u5730\u8ba1\u7b97\u548c\u8c03\u6574RTO\u3002<ul> <li>TCP\u901a\u8fc7\u6d4b\u91cf\u53d1\u9001\u6570\u636e\u5230\u63a5\u6536\u5230ACK\u7684\u5f80\u8fd4\u65f6\u95f4\uff08RTT\uff09\u6765\u4f30\u7b97\u7f51\u7edc\u7684\u5ef6\u8fdf\u3002</li> <li>\u5b83\u4f1a\u7ef4\u62a4\u4e00\u4e2a\u5e73\u6ed1\u7684RTT\u4f30\u7b97\u503c\uff08SRTT\uff09\u548c\u4e00\u4e2a\u5e73\u5747\u504f\u5dee\u4f30\u7b97\u503c\uff0c\u5229\u7528\u8fd9\u4e9b\u503c\u6765\u8ba1\u7b97\u51fa\u66f4\u5408\u9002\u7684RTO\u3002</li> <li>\u5728\u6bcf\u6b21\u91cd\u4f20\u4e4b\u540e\uff0cRTO\u901a\u5e38\u4f1a\u6307\u6570\u7ea7\u5730\u589e\u52a0\uff0c\u8fd9\u88ab\u79f0\u4e3a\u201c\u6307\u6570\u9000\u907f\u201d\uff08Exponential Backoff\uff09\uff0c\u4ee5\u5e94\u5bf9\u6301\u7eed\u7684\u7f51\u7edc\u95ee\u9898\u3002</li> </ul> </li> <li>\u5feb\u901f\u91cd\u4f20 (Fast Retransmit)\uff1a\u4e3a\u4e86\u66f4\u53ca\u65f6\u5730\u5904\u7406\u4e22\u5305\uff0cTCP\u8fd8\u5f15\u5165\u4e86\u5feb\u901f\u91cd\u4f20\u673a\u5236\u3002\u5982\u679c\u53d1\u9001\u65b9\u6536\u5230\u4e09\u4e2a\u6216\u66f4\u591a\u91cd\u590d\u7684ACK\uff08Duplicate ACKs\uff09\uff0c\u5b83\u4f1a\u7acb\u5373\u91cd\u4f20\u4e22\u5931\u7684\u6570\u636e\u6bb5\uff0c\u800c\u65e0\u9700\u7b49\u5f85\u91cd\u4f20\u5b9a\u65f6\u5668\u8d85\u65f6\u3002\u8fd9\u901a\u5e38\u8868\u660e\u67d0\u4e2a\u6570\u636e\u6bb5\u5728\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u4e22\u5931\uff0c\u4f46\u540e\u7eed\u7684\u6570\u636e\u6bb5\u5df2\u7ecf\u5230\u8fbe\u63a5\u6536\u65b9\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/TCP%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E7%9A%84/#flow-control","title":"\u6d41\u91cf\u63a7\u5236 (Flow Control)","text":"<p>\u6d41\u91cf\u63a7\u5236\u662f\u4e3a\u4e86\u9632\u6b62\u53d1\u9001\u65b9\u53d1\u9001\u6570\u636e\u8fc7\u5feb\uff0c\u5bfc\u81f4\u63a5\u6536\u65b9\u7684\u7f13\u51b2\u533a\u6ea2\u51fa\uff0c\u4ece\u800c\u9020\u6210\u6570\u636e\u4e22\u5931\u3002TCP\u901a\u8fc7\u201c\u6ed1\u52a8\u7a97\u53e3\u534f\u8bae\u201d\uff08Sliding Window Protocol\uff09\u5b9e\u73b0\u6d41\u91cf\u63a7\u5236\u3002</p> <ul> <li>\u63a5\u6536\u7a97\u53e3 (Receive Window - rwnd)\uff1a\u63a5\u6536\u65b9\u5728\u5176\u53d1\u9001\u7684\u6bcf\u4e2aACK\u62a5\u6587\u4e2d\uff0c\u90fd\u4f1a\u5305\u542b\u4e00\u4e2a\u201c\u63a5\u6536\u7a97\u53e3\u5927\u5c0f\u201d\uff08rwnd\uff09\u5b57\u6bb5\u3002\u8fd9\u4e2a\u5b57\u6bb5\u8868\u793a\u63a5\u6536\u65b9\u5f53\u524d\u80fd\u591f\u63a5\u6536\u7684\u5b57\u8282\u6570\u91cf\uff0c\u4e5f\u5c31\u662f\u5176\u7f13\u51b2\u533a\u4e2d\u5269\u4f59\u7684\u53ef\u7528\u7a7a\u95f4\u3002</li> <li>\u53d1\u9001\u65b9\u7684\u9650\u5236\uff1a\u53d1\u9001\u65b9\u4f1a\u6839\u636e\u63a5\u6536\u65b9\u901a\u544a\u7684\u63a5\u6536\u7a97\u53e3\u5927\u5c0f\u6765\u8c03\u6574\u5176\u53d1\u9001\u6570\u636e\u91cf\uff0c\u786e\u4fdd\u53d1\u9001\u7684\u6570\u636e\u4e0d\u4f1a\u8d85\u8fc7\u63a5\u6536\u65b9\u5f53\u524d\u7684\u5904\u7406\u80fd\u529b\u548c\u7f13\u51b2\u533a\u5bb9\u91cf\u3002</li> <li>\u6ed1\u52a8\u7a97\u53e3\uff1a\u53d1\u9001\u65b9\u7ef4\u62a4\u4e00\u4e2a\u201c\u53d1\u9001\u7a97\u53e3\u201d\uff0c\u4ee3\u8868\u5b83\u53ef\u4ee5\u5728\u672a\u6536\u5230ACK\u7684\u60c5\u51b5\u4e0b\u53d1\u9001\u7684\u6570\u636e\u91cf\u3002\u968f\u7740\u6570\u636e\u7684\u53d1\u9001\u548cACK\u7684\u63a5\u6536\uff0c\u8fd9\u4e2a\u7a97\u53e3\u4f1a\u5728\u5e8f\u5217\u53f7\u7a7a\u95f4\u4e0a\u5411\u524d\u201c\u6ed1\u52a8\u201d\u3002</li> <li>\u96f6\u7a97\u53e3 (Zero Window)\uff1a\u5982\u679c\u63a5\u6536\u65b9\u7684\u7f13\u51b2\u533a\u5df2\u6ee1\uff0c\u5b83\u4f1a\u901a\u544a\u4e00\u4e2a\u96f6\u7a97\u53e3\u5927\u5c0f\u3002\u6b64\u65f6\uff0c\u53d1\u9001\u65b9\u5c06\u505c\u6b62\u53d1\u9001\u6570\u636e\uff0c\u76f4\u5230\u63a5\u6536\u65b9\u901a\u544a\u4e00\u4e2a\u975e\u96f6\u7684\u7a97\u53e3\u5927\u5c0f\uff0c\u8868\u793a\u7f13\u51b2\u533a\u6709\u53ef\u7528\u7a7a\u95f4\u3002\u4e3a\u4e86\u907f\u514d\u6b7b\u9501\uff0cTCP\u4f1a\u4f7f\u7528\u4e00\u4e2a\u201c\u6301\u4e45\u8ba1\u65f6\u5668\u201d\uff08Persist Timer\uff09\uff0c\u5f53\u63a5\u6536\u65b9\u901a\u544a\u96f6\u7a97\u53e3\u65f6\uff0c\u53d1\u9001\u65b9\u4f1a\u5468\u671f\u6027\u5730\u53d1\u9001\u5c0f\u63a2\u6d4b\u62a5\u6587\uff08probe segment\uff09\uff0c\u4ee5\u83b7\u53d6\u63a5\u6536\u65b9\u6700\u65b0\u7684\u7a97\u53e3\u5927\u5c0f\u4fe1\u606f\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/TCP%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E7%9A%84/#congestion-control","title":"\u62e5\u585e\u63a7\u5236 (Congestion Control)","text":"<p>\u62e5\u585e\u63a7\u5236\u662f\u4e3a\u4e86\u9632\u6b62\u8fc7\u591a\u7684\u6570\u636e\u6ce8\u5165\u5230\u7f51\u7edc\u4e2d\uff0c\u5bfc\u81f4\u7f51\u7edc\u6027\u80fd\u4e0b\u964d\uff08\u5982\u4e22\u5305\u3001\u5ef6\u8fdf\u589e\u52a0\uff09\uff0c\u751a\u81f3\u51fa\u73b0\u201c\u62e5\u585e\u5d29\u6e83\u201d\uff08Congestive Collapse\uff09\u3002\u6d41\u91cf\u63a7\u5236\u662f\u70b9\u5bf9\u70b9\uff08\u53d1\u9001\u65b9\u5230\u63a5\u6536\u65b9\uff09\u7684\uff0c\u800c\u62e5\u585e\u63a7\u5236\u662f\u5168\u5c40\u7684\uff08\u8003\u8651\u6574\u4e2a\u7f51\u7edc\uff09\u3002TCP\u62e5\u585e\u63a7\u5236\u4e3b\u8981\u901a\u8fc7\u56db\u4e2a\u9636\u6bb5\u5b9e\u73b0\uff1a\u6162\u542f\u52a8\u3001\u62e5\u585e\u907f\u514d\u3001\u5feb\u901f\u91cd\u4f20\u548c\u5feb\u901f\u6062\u590d\u3002</p> <ul> <li>\u62e5\u585e\u7a97\u53e3 (Congestion Window - cwnd)\uff1a\u9664\u4e86\u63a5\u6536\u7a97\u53e3\u5916\uff0c\u53d1\u9001\u65b9\u8fd8\u7ef4\u62a4\u4e00\u4e2a\u201c\u62e5\u585e\u7a97\u53e3\u201d\uff08cwnd\uff09\u3002\u5b9e\u9645\u53d1\u9001\u7684\u6570\u636e\u91cf\u662f\u63a5\u6536\u7a97\u53e3\u548c\u62e5\u585e\u7a97\u53e3\u4e2d\u7684\u8f83\u5c0f\u503c\u3002\u62e5\u585e\u7a97\u53e3\u7531\u53d1\u9001\u65b9\u6839\u636e\u7f51\u7edc\u62e5\u585e\u60c5\u51b5\u52a8\u6001\u8c03\u6574\u3002</li> <li>\u6162\u542f\u52a8 (Slow Start)\uff1a<ul> <li>\u5f53TCP\u8fde\u63a5\u5efa\u7acb\u65f6\uff0c\u62e5\u585e\u7a97\u53e3\u521d\u59cb\u5316\u4e3a\u4e00\u4e2a\u8f83\u5c0f\u7684\u503c\uff08\u901a\u5e38\u4e3a1\u62162\u4e2aTCP\u6bb5\uff09\u3002</li> <li>\u6bcf\u5f53\u53d1\u9001\u65b9\u6536\u5230\u4e00\u4e2aACK\uff0c\u62e5\u585e\u7a97\u53e3\u5c31\u4f1a\u6307\u6570\u7ea7\u5730\u589e\u957f\u3002\u4f8b\u5982\uff0c\u521d\u59cb\u53d1\u90011\u4e2a\u6bb5\uff0c\u6536\u5230ACK\u540e\u53d1\u90012\u4e2a\u6bb5\uff0c\u518d\u6536\u5230ACK\u540e\u53d1\u90014\u4e2a\u6bb5\uff0c\u4ee5\u6b64\u7c7b\u63a8\uff0c\u5448\u6307\u6570\u589e\u957f\u3002</li> <li>\u8fd9\u4e2a\u9636\u6bb5\u4f1a\u6301\u7eed\u5230\u62e5\u585e\u7a97\u53e3\u8fbe\u5230\u4e00\u4e2a\u9884\u8bbe\u7684\u201c\u6162\u542f\u52a8\u9608\u503c\u201d\uff08ssthresh\uff09\uff0c\u6216\u8005\u68c0\u6d4b\u5230\u4e22\u5305\u3002</li> </ul> </li> <li>\u62e5\u585e\u907f\u514d (Congestion Avoidance)\uff1a<ul> <li>\u5f53\u62e5\u585e\u7a97\u53e3\u8fbe\u5230\u6216\u8d85\u8fc7\u6162\u542f\u52a8\u9608\u503c\uff08ssthresh\uff09\u540e\uff0cTCP\u8fdb\u5165\u62e5\u585e\u907f\u514d\u9636\u6bb5\u3002</li> <li>\u5728\u8fd9\u4e2a\u9636\u6bb5\uff0c\u62e5\u585e\u7a97\u53e3\u7684\u589e\u957f\u53d8\u4e3a\u7ebf\u6027\u3002\u6bcf\u5f53\u6536\u5230\u4e00\u4e2aRTT\u5185\u6240\u6709\u5df2\u53d1\u9001\u6570\u636e\u7684ACK\u65f6\uff0c\u62e5\u585e\u7a97\u53e3\u53ea\u589e\u52a0\u4e00\u4e2aTCP\u6bb5\u7684\u91cf\u3002\u8fd9\u79cd\u673a\u5236\u88ab\u79f0\u4e3a\u201c\u52a0\u6cd5\u589e\u5927\u201d\uff08Additive Increase\uff09\u3002</li> <li>\u5982\u679c\u68c0\u6d4b\u5230\u4e22\u5305\uff08\u901a\u8fc7\u8d85\u65f6\u6216\u91cd\u590dACK\uff09\uff0c\u901a\u5e38\u4f1a\u5047\u5b9a\u7f51\u7edc\u53d1\u751f\u4e86\u62e5\u585e\u3002</li> </ul> </li> <li>\u62e5\u585e\u68c0\u6d4b\u4e0e\u6062\u590d\uff1a<ul> <li>\u8d85\u65f6\u89e6\u53d1\uff1a\u5982\u679c\u53d1\u751f\u91cd\u4f20\u8d85\u65f6\uff0c\u8fd9\u88ab\u8ba4\u4e3a\u662f\u4e25\u91cd\u7684\u62e5\u585e\u8ff9\u8c61\u3002TCP\u4f1a\u5c06\u6162\u542f\u52a8\u9608\u503c\uff08ssthresh\uff09\u8bbe\u7f6e\u4e3a\u5f53\u524d\u62e5\u585e\u7a97\u53e3\u7684\u4e00\u534a\uff0c\u7136\u540e\u5c06\u62e5\u585e\u7a97\u53e3\u91cd\u7f6e\u4e3a\u521d\u59cb\u7684\u8f83\u5c0f\u503c\uff0c\u518d\u6b21\u8fdb\u5165\u6162\u542f\u52a8\u9636\u6bb5\u3002</li> <li>\u5feb\u901f\u6062\u590d (Fast Recovery)\uff1a\u5f53\u6536\u5230\u4e09\u4e2a\u91cd\u590dACK\u65f6\uff0c\u8fd9\u8868\u660e\u6709\u4e22\u5305\uff0c\u4f46\u7f51\u7edc\u53ef\u80fd\u5e76\u672a\u4e25\u91cd\u62e5\u585e\uff08\u56e0\u4e3a\u8fd8\u6709\u540e\u7eed\u6570\u636e\u5230\u8fbe\uff09\u3002<ul> <li>\u6b64\u65f6\uff0cTCP\u5c06\u6162\u542f\u52a8\u9608\u503c\uff08ssthresh\uff09\u8bbe\u7f6e\u4e3a\u5f53\u524d\u62e5\u585e\u7a97\u53e3\u7684\u4e00\u534a\u3002</li> <li>\u62e5\u585e\u7a97\u53e3\u51cf\u5c0f\u5230\u65b0\u7684ssthresh\u503c\u3002</li> <li>\u7136\u540e\uff0cTCP\u8fdb\u5165\u5feb\u901f\u6062\u590d\u9636\u6bb5\uff0c\u5728\u6bcf\u4e2a\u6536\u5230\u91cd\u590dACK\u65f6\uff0c\u62e5\u585e\u7a97\u53e3\u4f1a\u7ebf\u6027\u589e\u52a0\uff0c\u76f4\u5230\u6536\u5230\u65b0\u7684ACK\u786e\u8ba4\u4e86\u6240\u6709\u4e4b\u524d\u4e22\u5931\u7684\u6570\u636e\u3002\u8fd9\u907f\u514d\u4e86\u5b8c\u5168\u56de\u5230\u6162\u542f\u52a8\u7684\u4f4e\u6548\u7387\u3002\u8fd9\u79cd\u673a\u5236\u88ab\u79f0\u4e3a\u201c\u4e58\u6cd5\u51cf\u5c0f\u201d\uff08Multiplicative Decrease\uff09\u3002</li> </ul> </li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/TCP%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E7%9A%84/#checksum","title":"\u6821\u9a8c\u548c (Checksum)","text":"<p>\u8fd9\u4e2a\u673a\u5236\u7528\u6765\u68c0\u6d4b\u6570\u636e\u5728\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u662f\u5426\u53d1\u751f\u4e86\u635f\u574f\u3002</p> <ul> <li> <p>\u5de5\u4f5c\u539f\u7406\uff1a     \u53d1\u9001\u65b9\u5728\u53d1\u9001\u6570\u636e\u524d\uff0c\u4f1a\u6839\u636eTCP\u5934\u90e8\u548c\u6570\u636e\u5185\u5bb9\u8ba1\u7b97\u51fa\u4e00\u4e2a16\u4f4d\u7684\u6821\u9a8c\u548c\u503c\u3002\u63a5\u6536\u65b9\u6536\u5230\u6570\u636e\u540e\uff0c\u4f1a\u7528\u540c\u6837\u7684\u65b9\u6cd5\u8fdb\u884c\u8ba1\u7b97\u3002\u5982\u679c\u8ba1\u7b97\u51fa\u7684\u6821\u9a8c\u548c\u4e0e\u6536\u5230\u7684\u4e0d\u4e00\u81f4\uff0c\u5c31\u8bf4\u660e\u6570\u636e\u5728\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u88ab\u7be1\u6539\u6216\u635f\u574f\u4e86\u3002</p> </li> <li> <p>\u5982\u4f55\u4fdd\u8bc1\u53ef\u9760\u6027\uff1a</p> <ul> <li>\u4fdd\u8bc1\u6570\u636e\u5b8c\u6574\u6027\uff1a\u5982\u679c\u63a5\u6536\u65b9\u53d1\u73b0\u6821\u9a8c\u548c\u4e0d\u5339\u914d\uff0c\u5b83\u4f1a\u76f4\u63a5\u4e22\u5f03\u8fd9\u4e2a\u635f\u574f\u7684\u62a5\u6587\u6bb5\uff0c\u5e76\u4e14\u4e0d\u4f1a\u53d1\u9001ACK\u3002\u8fd9\u6837\uff0c\u53d1\u9001\u65b9\u5c31\u4f1a\u56e0\u4e3a\u8d85\u65f6\u800c\u91cd\u4f20\u8fd9\u4e2a\u62a5\u6587\u6bb5\uff0c\u786e\u4fdd\u4e86\u6700\u7ec8\u6570\u636e\u7684\u6b63\u786e\u6027\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/VPN%E5%8E%9F%E7%90%86%E6%98%AF%E4%BB%80%E4%B9%88/","title":"VPN\u539f\u7406\u662f\u4ec0\u4e48","text":"<p>\u865a\u62df\u4e13\u7528\u7f51\u7edc\uff08VPN\uff09\u662f\u4e00\u79cd\u901a\u8fc7\u5728\u516c\u5171\u7f51\u7edc\uff08\u5982\u4e92\u8054\u7f51\uff09\u4e0a\u5efa\u7acb\u4e00\u4e2a\u4e34\u65f6\u7684\u3001\u5b89\u5168\u7684\u8fde\u63a5\uff0c\u4ece\u800c\u521b\u5efa\u4e00\u4e2a\u7a7f\u8d8a\u6df7\u4e71\u516c\u7528\u7f51\u7edc\u7684\u5b89\u5168\u3001\u7a33\u5b9a\u96a7\u9053\u7684\u6280\u672f\u3002 \u7b80\u5355\u6765\u8bf4\uff0cVPN\u7684\u6838\u5fc3\u4f5c\u7528\u662f\u5728\u60a8\u7684\u8bbe\u5907\u548c\u8fdc\u7a0b\u670d\u52a1\u5668\u4e4b\u95f4\u521b\u5efa\u4e00\u4e2a\u52a0\u5bc6\u7684\u865a\u62df\u901a\u9053\uff0c\u901a\u8fc7\u8fd9\u4e2a\u901a\u9053\u4f20\u8f93\u60a8\u7684\u6240\u6709\u7f51\u7edc\u6d41\u91cf\u3002 \u8fd9\u79cd\u6280\u672f\u4e0d\u4ec5\u80fd\u52a0\u5bc6\u60a8\u7684\u4e92\u8054\u7f51\u6d41\u91cf\u3001\u9690\u85cf\u60a8\u7684\u5728\u7ebf\u8eab\u4efd\uff0c\u8fd8\u80fd\u8ba9\u7b2c\u4e09\u65b9\u96be\u4ee5\u76d1\u63a7\u60a8\u7684\u5728\u7ebf\u6d3b\u52a8\u548c\u7a83\u53d6\u6570\u636e\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/VPN%E5%8E%9F%E7%90%86%E6%98%AF%E4%BB%80%E4%B9%88/#vpn","title":"VPN\u7684\u6838\u5fc3\u5de5\u4f5c\u539f\u7406","text":"<p>VPN\u7684\u5b9e\u73b0\u4e3b\u8981\u4f9d\u8d56\u4e8e\u4e09\u5927\u6838\u5fc3\u6280\u672f\uff1a\u96a7\u9053\u6280\u672f\u3001\u52a0\u5bc6\u6280\u672f\u548c\u8ba4\u8bc1\u6280\u672f\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/VPN%E5%8E%9F%E7%90%86%E6%98%AF%E4%BB%80%E4%B9%88/#1-tunneling","title":"1. \u96a7\u9053\u6280\u672f (Tunneling)","text":"<p>\u96a7\u9053\u6280\u672f\u662fVPN\u7684\u57fa\u7840\u3002 \u5b83\u7684\u539f\u7406\u662f\u5c06\u4e00\u79cd\u7f51\u7edc\u534f\u8bae\u7684\u6570\u636e\u5305\u5c01\u88c5\u5728\u53e6\u4e00\u79cd\u534f\u8bae\u7684\u6570\u636e\u5305\u4e4b\u5185\uff0c\u7136\u540e\u5728\u516c\u5171\u7f51\u7edc\u4e0a\u4f20\u8f93\u3002 \u5bf9\u4e8eVPN\u800c\u8a00\uff0c\u5b83\u4f1a\u5728\u60a8\u7684\u8bbe\u5907\u548cVPN\u670d\u52a1\u5668\u4e4b\u95f4\u5efa\u7acb\u4e00\u4e2a\u52a0\u5bc6\u7684\u201c\u96a7\u9053\u201d\u3002 \u60a8\u7684\u6240\u6709\u7f51\u7edc\u6570\u636e\uff0c\u5728\u79bb\u5f00\u60a8\u7684\u8bbe\u5907\u4e4b\u524d\uff0c\u90fd\u4f1a\u88ab\u5c01\u88c5\u5728\u8fd9\u4e2a\u96a7\u9053\u91cc\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u786e\u4fdd\u4e86\u6570\u636e\u5728\u516c\u5171\u7f51\u7edc\uff08\u5982\u60a8\u5bb6\u4e2d\u7684Wi-Fi\u6216\u516c\u5171Wi-Fi\uff09\u4e0a\u4f20\u8f93\u65f6\u7684\u79c1\u5bc6\u6027\u548c\u5b8c\u6574\u6027\u3002 \u5373\u4f7f\u6570\u636e\u88ab\u622a\u83b7\uff0c\u7531\u4e8e\u5176\u88ab\u5c01\u88c5\u548c\u52a0\u5bc6\uff0c\u9ed1\u5ba2\u4e5f\u65e0\u6cd5\u8bfb\u53d6\u5176\u771f\u5b9e\u5185\u5bb9\u3002</p> <p>\u5b9e\u73b0\u8fc7\u7a0b\uff1a *   \u6570\u636e\u5c01\u88c5\uff1a \u5f53\u60a8\u901a\u8fc7VPN\u53d1\u9001\u6570\u636e\u65f6\uff0c\u60a8\u7684\u8bbe\u5907\uff08VPN\u5ba2\u6237\u7aef\uff09\u4f1a\u5c06\u539f\u59cb\u6570\u636e\u5305\uff08\u4f8b\u5982\uff0c\u4e00\u4e2aHTTP\u8bf7\u6c42\uff09\u8fdb\u884c\u5c01\u88c5\uff0c\u6dfb\u52a0VPN\u534f\u8bae\u7684\u5934\u90e8\u4fe1\u606f\uff0c\u4ece\u800c\u521b\u5efa\u4e00\u4e2a\u65b0\u7684VPN\u6570\u636e\u5305\u3002 *   \u8def\u7531\u4f20\u8f93\uff1a \u8fd9\u4e2a\u65b0\u7684\u6570\u636e\u5305\u4f1a\u901a\u8fc7\u516c\u5171\u4e92\u8054\u7f51\u88ab\u53d1\u9001\u5230VPN\u670d\u52a1\u5668\u3002 *   \u89e3\u5c01\u88c5\uff1a VPN\u670d\u52a1\u5668\u6536\u5230\u6570\u636e\u5305\u540e\uff0c\u4f1a\u201c\u89e3\u5f00\u201d\u5916\u5c42\u5c01\u88c5\uff0c\u63d0\u53d6\u51fa\u539f\u59cb\u7684\u6570\u636e\u5305\uff0c\u7136\u540e\u5c06\u5176\u53d1\u9001\u5230\u6700\u7ec8\u7684\u76ee\u6807\u7f51\u7ad9\u6216\u670d\u52a1\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/VPN%E5%8E%9F%E7%90%86%E6%98%AF%E4%BB%80%E4%B9%88/#2-encryption","title":"2. \u52a0\u5bc6\u6280\u672f (Encryption)","text":"<p>\u52a0\u5bc6\u662f\u786e\u4fddVPN\u5b89\u5168\u6027\u7684\u5173\u952e\u73af\u8282\u3002VPN\u901a\u8fc7\u4f7f\u7528\u52a0\u5bc6\u7b97\u6cd5\uff0c\u5c06\u60a8\u7684\u6570\u636e\u8f6c\u6362\u6210\u770b\u4f3c\u968f\u673a\u7684\u4e71\u7801\uff0c\u53ea\u6709\u62e5\u6709\u6b63\u786e\u5bc6\u94a5\u7684\u8bbe\u5907\uff08\u5373\u60a8\u7684\u8bbe\u5907\u548cVPN\u670d\u52a1\u5668\uff09\u624d\u80fd\u89e3\u5bc6\u5e76\u8bfb\u53d6\u539f\u59cb\u5185\u5bb9\u3002</p> <p>\u5b9e\u73b0\u8fc7\u7a0b\uff1a *   \u5bc6\u94a5\u4ea4\u6362\u4e0e\u534f\u5546\uff1a \u5f53\u60a8\u7684\u8bbe\u5907\u8fde\u63a5\u5230VPN\u670d\u52a1\u5668\u65f6\uff0c\u4f1a\u8fdb\u884c\u4e00\u4e2a\u201c\u63e1\u624b\u201d\u8fc7\u7a0b\u3002 \u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u53cc\u65b9\u4f1a\u5b89\u5168\u5730\u534f\u5546\u5e76\u4ea4\u6362\u52a0\u5bc6\u5bc6\u94a5\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u901a\u5e38\u91c7\u7528\u975e\u5bf9\u79f0\u52a0\u5bc6\uff08\u4f7f\u7528\u516c\u94a5\u548c\u79c1\u94a5\u5bf9\uff09\u6765\u5b89\u5168\u5730\u751f\u6210\u548c\u4ea4\u6362\u4e00\u4e2a\u5168\u65b0\u7684\u3001\u4e00\u6b21\u6027\u7684\u5bf9\u79f0\u52a0\u5bc6\u5bc6\u94a5\u3002 *   \u6570\u636e\u52a0\u5bc6\u4e0e\u89e3\u5bc6\uff1a \u968f\u540e\u7684\u6240\u6709\u6570\u636e\u4f20\u8f93\u90fd\u5c06\u4f7f\u7528\u8fd9\u4e2a\u5bf9\u79f0\u5bc6\u94a5\u8fdb\u884c\u52a0\u5bc6\u548c\u89e3\u5bc6\u3002\u5e38\u7528\u7684\u52a0\u5bc6\u7b97\u6cd5\u5305\u62ec\u9ad8\u7ea7\u52a0\u5bc6\u6807\u51c6\uff08AES\uff09\uff0c\u5b83\u88ab\u8ba4\u4e3a\u662f\u76ee\u524d\u6700\u5b89\u5168\u7684\u52a0\u5bc6\u6807\u51c6\u4e4b\u4e00\u3002 *   \u6570\u636e\u5b8c\u6574\u6027\u9a8c\u8bc1\uff1a \u4e3a\u4e86\u9632\u6b62\u6570\u636e\u5728\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u88ab\u7be1\u6539\uff0cVPN\u8fd8\u4f1a\u4f7f\u7528\u54c8\u5e0c\u7b97\u6cd5\uff08\u5982SHA\u7cfb\u5217\uff09\u4e3a\u6570\u636e\u5305\u521b\u5efa\u6458\u8981\u3002\u63a5\u6536\u65b9\u4f1a\u91cd\u65b0\u8ba1\u7b97\u6458\u8981\u5e76\u4e0e\u6536\u5230\u7684\u6458\u8981\u8fdb\u884c\u6bd4\u5bf9\uff0c\u4ee5\u786e\u4fdd\u6570\u636e\u7684\u5b8c\u6574\u6027\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/VPN%E5%8E%9F%E7%90%86%E6%98%AF%E4%BB%80%E4%B9%88/#3-authentication","title":"3. \u8ba4\u8bc1\u6280\u672f (Authentication)","text":"<p>\u8ba4\u8bc1\u6280\u672f\u7528\u4e8e\u9a8c\u8bc1\u8bd5\u56fe\u8fde\u63a5\u5230VPN\u7f51\u7edc\u7684\u7528\u6237\u6216\u8bbe\u5907\u7684\u8eab\u4efd\uff0c\u786e\u4fdd\u53ea\u6709\u6388\u6743\u7684\u7528\u6237\u624d\u80fd\u8bbf\u95ee\u3002</p> <p>\u5e38\u89c1\u7684\u8ba4\u8bc1\u65b9\u6cd5\u5305\u62ec\uff1a *   \u7528\u6237\u540d\u548c\u5bc6\u7801\uff1a \u8fd9\u662f\u6700\u57fa\u7840\u7684\u8ba4\u8bc1\u65b9\u5f0f\u3002 *   \u9884\u5171\u4eab\u5bc6\u94a5 (Pre-Shared Key)\uff1a \u5728\u8fde\u63a5\u5efa\u7acb\u524d\uff0c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u9884\u5148\u914d\u7f6e\u597d\u4e00\u4e2a\u76f8\u540c\u7684\u5bc6\u94a5\uff0c\u7528\u4e8e\u53cc\u65b9\u7684\u8eab\u4efd\u9a8c\u8bc1\u3002 *   \u6570\u5b57\u8bc1\u4e66\uff1a \u4f7f\u7528\u6570\u5b57\u8bc1\u4e66\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u6bd4\u4f20\u7edf\u7684\u7528\u6237\u540d\u5bc6\u7801\u65b9\u5f0f\u66f4\u5b89\u5168\uff0c\u56e0\u4e3a\u8bc1\u4e66\u66f4\u96be\u4f2a\u9020\u3002 *   \u591a\u56e0\u7d20\u8ba4\u8bc1 (MFA)\uff1a \u8981\u6c42\u7528\u6237\u63d0\u4f9b\u4e24\u79cd\u6216\u4ee5\u4e0a\u7684\u9a8c\u8bc1\u65b9\u5f0f\uff0c\u4f8b\u5982\u5bc6\u7801\u52a0\u4e0a\u53d1\u9001\u5230\u624b\u673a\u7684\u4e00\u6b21\u6027\u9a8c\u8bc1\u7801\uff0c\u6781\u5927\u5730\u589e\u5f3a\u4e86\u5b89\u5168\u6027\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/VPN%E5%8E%9F%E7%90%86%E6%98%AF%E4%BB%80%E4%B9%88/#vpn_1","title":"\u4e3b\u6d41VPN\u534f\u8bae\u7684\u5b9e\u73b0","text":"<p>VPN\u7684\u539f\u7406\u6700\u7ec8\u9700\u8981\u901a\u8fc7\u5177\u4f53\u7684VPN\u534f\u8bae\u6765\u5b9e\u73b0\u3002\u4e0d\u540c\u7684\u534f\u8bae\u5728\u5b89\u5168\u6027\u3001\u901f\u5ea6\u548c\u517c\u5bb9\u6027\u65b9\u9762\u5404\u6709\u7279\u70b9\u3002 \u4ee5\u4e0b\u662f\u4e24\u79cd\u4e3b\u6d41\u7684VPN\u534f\u8bae\uff1a</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/VPN%E5%8E%9F%E7%90%86%E6%98%AF%E4%BB%80%E4%B9%88/#1-openvpn","title":"1. OpenVPN","text":"<p>OpenVPN\u662f\u4e00\u4e2a\u57fa\u4e8eSSL/TLS\u534f\u8bae\u7684\u5f00\u6e90VPN\u89e3\u51b3\u65b9\u6848\uff0c\u4ee5\u5176\u9ad8\u5ea6\u7684\u7075\u6d3b\u6027\u3001\u5f3a\u5927\u7684\u5b89\u5168\u6027\u548c\u8de8\u5e73\u53f0\u517c\u5bb9\u6027\u800c\u5e7f\u53d7\u8ba4\u53ef\u3002</p> <ul> <li>\u5de5\u4f5c\u539f\u7406\uff1a OpenVPN\u5728\u8bbe\u5907\uff08\u5ba2\u6237\u7aef\uff09\u548c\u8fdc\u7a0bVPN\u670d\u52a1\u5668\u4e4b\u95f4\u5efa\u7acb\u4e00\u4e2a\u5b89\u5168\u7684\u52a0\u5bc6\u901a\u9053\u3002 \u5b83\u5229\u7528OpenSSL\u52a0\u5bc6\u5e93\u6765\u8fdb\u884c\u6570\u636e\u7684\u52a0\u5bc6\u548c\u89e3\u5bc6\uff0c\u80fd\u591f\u4f7f\u7528\u5305\u62ecAES\u5728\u5185\u7684\u591a\u79cd\u52a0\u5bc6\u7b97\u6cd5\u3002</li> <li>\u5b9e\u73b0\u6b65\u9aa4\uff1a<ol> <li>\u8fde\u63a5\u5efa\u7acb\uff1a \u5ba2\u6237\u7aef\u5411OpenVPN\u670d\u52a1\u5668\u53d1\u9001\u8fde\u63a5\u8bf7\u6c42\u3002</li> <li>\u8eab\u4efd\u9a8c\u8bc1\u4e0e\u5bc6\u94a5\u4ea4\u6362\uff1a \u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u901a\u8fc7\u4ea4\u6362\u8bc1\u4e66\u6216\u4f7f\u7528\u7528\u6237\u540d/\u5bc6\u7801\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u5e76\u5728\u6b64\u8fc7\u7a0b\u4e2d\u5b89\u5168\u5730\u534f\u5546\u52a0\u5bc6\u5bc6\u94a5\u3002</li> <li>\u6570\u636e\u4f20\u8f93\uff1a \u5efa\u7acb\u8fde\u63a5\u540e\uff0c\u6240\u6709\u6570\u636e\u90fd\u901a\u8fc7\u8fd9\u4e2a\u52a0\u5bc6\u7684SSL/TLS\u96a7\u9053\u8fdb\u884c\u4f20\u8f93\u3002</li> </ol> </li> <li>\u6280\u672f\u6838\u5fc3\uff1a OpenVPN\u7684\u6280\u672f\u6838\u5fc3\u662f\u865a\u62df\u7f51\u5361\u548cSSL\u534f\u8bae\u7684\u5b9e\u73b0\u3002\u5b83\u4f1a\u5728\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u521b\u5efa\u4e00\u4e2a\u865a\u62df\u7684\u7f51\u7edc\u63a5\u53e3\uff0c\u6240\u6709\u9700\u8981\u901a\u8fc7VPN\u4f20\u8f93\u7684\u6570\u636e\u90fd\u4f1a\u88ab\u8def\u7531\u5230\u8fd9\u4e2a\u865a\u62df\u7f51\u5361\uff0c\u7136\u540e\u7531OpenVPN\u8f6f\u4ef6\u8fdb\u884c\u52a0\u5bc6\u548c\u5c01\u88c5\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/VPN%E5%8E%9F%E7%90%86%E6%98%AF%E4%BB%80%E4%B9%88/#2-ipsec-internet-protocol-security","title":"2. IPsec (Internet Protocol Security)","text":"<p>IPsec\u662f\u4e00\u5957\u7528\u4e8e\u4fdd\u62a4IP\u7f51\u7edc\u901a\u4fe1\u7684\u534f\u8bae\u7c07\uff0c\u5b83\u901a\u8fc7\u5bf9IP\u6570\u636e\u5305\u8fdb\u884c\u52a0\u5bc6\u548c\u8ba4\u8bc1\u6765\u63d0\u4f9b\u5b89\u5168\u670d\u52a1\uff0c\u5e38\u7528\u4e8e\u6784\u5efaVPN\u3002</p> <ul> <li>\u5de5\u4f5c\u539f\u7406\uff1a IPsec\u5728IP\u5c42\u8fd0\u4f5c\uff0c\u53ef\u4ee5\u4fdd\u62a4\u6240\u6709\u4e0a\u5c42\u534f\u8bae\uff08\u5982TCP\u3001UDP\uff09\u7684\u6570\u636e\u3002\u5b83\u4e3b\u8981\u901a\u8fc7\u4e24\u4e2a\u5b89\u5168\u534f\u8bae\u6765\u5b9e\u73b0\uff1a<ul> <li>\u8ba4\u8bc1\u5934 (AH)\uff1a \u63d0\u4f9b\u6570\u636e\u6e90\u8ba4\u8bc1\u3001\u6570\u636e\u5b8c\u6574\u6027\u6821\u9a8c\u548c\u9632\u91cd\u653e\u653b\u51fb\u529f\u80fd\uff0c\u4f46\u672c\u8eab\u4e0d\u63d0\u4f9b\u52a0\u5bc6\u3002</li> <li>\u5c01\u88c5\u5b89\u5168\u8f7d\u8377 (ESP)\uff1a \u63d0\u4f9b\u6570\u636e\u52a0\u5bc6\u3001\u6570\u636e\u6e90\u8ba4\u8bc1\u548c\u6570\u636e\u5b8c\u6574\u6027\u6821\u9a8c\u529f\u80fd\u3002</li> </ul> </li> <li>\u5b9e\u73b0\u6b65\u9aa4\uff08\u901a\u8fc7IKE\u534f\u5546\uff09\uff1a IPsec\u7684\u8fde\u63a5\u5efa\u7acb\u901a\u5e38\u901a\u8fc7\u4e92\u8054\u7f51\u5bc6\u94a5\u4ea4\u6362\u534f\u8bae\uff08IKE\uff09\u81ea\u52a8\u5b8c\u6210\u3002<ol> <li>\u7b2c\u4e00\u9636\u6bb5 (IKE SA\u5efa\u7acb)\uff1a \u901a\u4fe1\u53cc\u65b9\u534f\u5546\u5efa\u7acb\u4e00\u4e2a\u5b89\u5168\u7684\u901a\u9053\uff0c\u7528\u4e8e\u540e\u7eed\u7684\u5bc6\u94a5\u4ea4\u6362\u548c\u534f\u5546\u3002\u8fd9\u4e2a\u9636\u6bb5\u4f1a\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002</li> <li>\u7b2c\u4e8c\u9636\u6bb5 (IPsec SA\u5efa\u7acb)\uff1a \u5229\u7528\u7b2c\u4e00\u9636\u6bb5\u5efa\u7acb\u7684\u5b89\u5168\u901a\u9053\uff0c\u534f\u5546\u5177\u4f53\u7684IPsec\u5b89\u5168\u7b56\u7565\uff08\u5982\u4f7f\u7528\u54ea\u79cd\u52a0\u5bc6\u548c\u8ba4\u8bc1\u7b97\u6cd5\uff09\uff0c\u5e76\u4e3a\u6570\u636e\u7684\u5b89\u5168\u4f20\u8f93\u5efa\u7acb\u6700\u7ec8\u7684IPsec\u5b89\u5168\u8054\u76df\uff08SA\uff09\u3002</li> </ol> </li> <li>\u5c01\u88c5\u6a21\u5f0f\uff1a<ul> <li>\u4f20\u8f93\u6a21\u5f0f\uff1a \u53ea\u5bf9IP\u6570\u636e\u5305\u7684\u6709\u6548\u8f7d\u8377\uff08\u6570\u636e\u90e8\u5206\uff09\u8fdb\u884c\u52a0\u5bc6\u6216\u8ba4\u8bc1\uff0cIP\u5934\u90e8\u4fdd\u6301\u4e0d\u53d8\u3002\u901a\u5e38\u7528\u4e8e\u4e24\u53f0\u4e3b\u673a\u4e4b\u95f4\u7684\u901a\u4fe1\u3002</li> <li>\u96a7\u9053\u6a21\u5f0f\uff1a \u5bf9\u6574\u4e2a\u539f\u59cbIP\u6570\u636e\u5305\u8fdb\u884c\u52a0\u5bc6\u548c\u8ba4\u8bc1\uff0c\u5e76\u4e3a\u5176\u6dfb\u52a0\u4e00\u4e2a\u65b0\u7684IP\u5934\u90e8\u3002\u8fd9\u662f\u6700\u5e38\u89c1\u7684VPN\u5b9e\u73b0\u65b9\u5f0f\uff0c\u5c24\u5176\u9002\u7528\u4e8e\u4fdd\u62a4\u4e24\u4e2a\u7f51\u7edc\uff08\u5982\u516c\u53f8\u603b\u90e8\u548c\u5206\u652f\u673a\u6784\uff09\u4e4b\u95f4\u7684\u901a\u4fe1\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/https%20%E5%92%8C%20http%20%E5%8C%BA%E5%88%AB/","title":"Https \u548c http \u533a\u522b","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/https%20%E5%92%8C%20http%20%E5%8C%BA%E5%88%AB/#_1","title":"\u533a\u522b","text":"<p>\u53ef\u4ee5\u5148\u7528\u4e00\u4e2a\u7b80\u5355\u7684\u6bd4\u55bb\u6765\u6982\u62ec\uff1aHTTP\u901a\u4fe1\u5c31\u50cf\u662f\u5bc4\u4e00\u5f20\u660e\u4fe1\u7247\uff0c\u5185\u5bb9\u662f\u516c\u5f00\u7684\uff0c\u5728\u6295\u9012\u8fc7\u7a0b\u4e2d\u7684\u4efb\u4f55\u4eba\u90fd\u53ef\u80fd\u770b\u5230\uff1b\u800cHTTPS\u901a\u4fe1\u5219\u50cf\u628a\u4fe1\u4ef6\u653e\u8fdb\u4e00\u4e2a\u7528\u5f3a\u529b\u80f6\u6c34\u5c01\u597d\u7684\u3001\u4e0a\u4e86\u9501\u7684\u4fdd\u9669\u7bb1\u91cc\u8fdb\u884c\u90ae\u5bc4\uff0c\u53ea\u6709\u62e5\u6709\u94a5\u5319\u7684\u6536\u4ef6\u4eba\u624d\u80fd\u6253\u5f00\u3002</p> <p>\u5b83\u4eec\u7684\u4e3b\u8981\u533a\u522b\u4f53\u73b0\u5728\u4ee5\u4e0b\u51e0\u4e2a\u65b9\u9762\uff1a</p> <ol> <li> <p>\u5b89\u5168\u6027\uff08Security\uff09\uff1a\u8fd9\u662f\u6700\u6838\u5fc3\u7684\u533a\u522b\u3002</p> <ul> <li>HTTP\uff08HyperText Transfer Protocol\uff09\u662f\u8d85\u6587\u672c\u4f20\u8f93\u534f\u8bae\uff0c\u5b83\u4ee5\u660e\u6587\u65b9\u5f0f\u4f20\u8f93\u6570\u636e\uff0c\u4e0d\u63d0\u4f9b\u4efb\u4f55\u5f62\u5f0f\u7684\u52a0\u5bc6\u3002\u8fd9\u610f\u5473\u7740\u5728\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u7684\u4efb\u4f55\u73af\u8282\uff08\u5982\u8def\u7531\u5668\u3001ISP\u7b49\uff09\uff0c\u6570\u636e\u90fd\u53ef\u80fd\u88ab\u7a83\u542c\u3001\u7be1\u6539\u6216\u5192\u5145\uff0c\u4fd7\u79f0\u201c\u88f8\u5954\u201d\u3002</li> <li>HTTPS\uff08HTTP Secure\uff09\u53ef\u4ee5\u7406\u89e3\u4e3a\u662fHTTP\u7684\u5b89\u5168\u7248\u3002\u5b83\u5728HTTP\u4e4b\u4e0b\u3001TCP\u4e4b\u4e0a\uff0c\u589e\u52a0\u4e86\u4e00\u4e2aSSL/TLS\u5b89\u5168\u5c42\u3002\u6240\u6709HTTP\u7684\u62a5\u6587\u5728\u53d1\u9001\u524d\u90fd\u4f1a\u7ecf\u8fc7\u8fd9\u4e2a\u5b89\u5168\u5c42\u7684\u52a0\u5bc6\uff0c\u4ece\u800c\u4fdd\u8bc1\u4e86\u6570\u636e\u4f20\u8f93\u7684\u673a\u5bc6\u6027\u3001\u5b8c\u6574\u6027\u548c\u8eab\u4efd\u8ba4\u8bc1\u3002</li> </ul> </li> <li> <p>\u8fde\u63a5\u65b9\u5f0f\u4e0e\u7aef\u53e3\uff1a</p> <ul> <li>HTTP\u4f7f\u7528\u6807\u51c6\u768480\u7aef\u53e3\u3002</li> <li>HTTPS\u4f7f\u7528\u6807\u51c6\u7684443\u7aef\u53e3\u3002</li> </ul> </li> <li> <p>\u8d44\u6e90\u6d88\u8017\u4e0e\u6027\u80fd\uff1a</p> <ul> <li>HTTP\uff1a\u534f\u8bae\u672c\u8eab\u5f00\u9500\u5c0f\uff0c\u8fde\u63a5\u7b80\u5355\u5feb\u6377\u3002</li> <li>HTTPS\uff1a\u9700\u8981\u8fdb\u884cTLS\u63e1\u624b\u8fc7\u7a0b\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u6d89\u53ca\u5230\u591a\u6b21\u7f51\u7edc\u5f80\u8fd4\u548c\u975e\u5bf9\u79f0\u52a0\u89e3\u5bc6\u8ba1\u7b97\uff0c\u56e0\u6b64\u4f1a\u6d88\u8017\u66f4\u591a\u7684\u670d\u52a1\u5668\u8d44\u6e90\u548c\u5e26\u6765\u4e00\u5b9a\u7684\u8fde\u63a5\u5ef6\u8fdf\u3002\u4e0d\u8fc7\uff0c\u968f\u7740\u786c\u4ef6\u6027\u80fd\u7684\u63d0\u5347\u548cHTTP/2\u7b49\u534f\u8bae\u7684\u666e\u53ca\uff08HTTP/2\u901a\u5e38\u5f3a\u5236\u8981\u6c42\u4f7f\u7528HTTPS\uff09\uff0c\u8fd9\u4e2a\u6027\u80fd\u5dee\u8ddd\u5df2\u7ecf\u53d8\u5f97\u5f88\u5c0f\uff0c\u751a\u81f3\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0cHTTPS\u7684\u6027\u80fd\u4f1a\u56e0\u4e3a\u534f\u8bae\u4f18\u5316\u800c\u53cd\u8d85HTTP\u3002</li> </ul> </li> <li> <p>\u8bc1\u4e66\u8981\u6c42\uff1a</p> <ul> <li>HTTP\u4e0d\u9700\u8981\u4efb\u4f55\u8bc1\u4e66\u3002</li> <li>HTTPS\u5fc5\u987b\u4f7f\u7528\u7531\u53d7\u4fe1\u4efb\u7684\u8bc1\u4e66\u9881\u53d1\u673a\u6784\uff08CA, Certificate Authority\uff09\u7b7e\u53d1\u7684\u6570\u5b57\u8bc1\u4e66\u3002\u8fd9\u4e2a\u8bc1\u4e66\u7528\u6765\u8bc1\u660e\u670d\u52a1\u5668\u7684\u8eab\u4efd\uff0c\u5e76\u5305\u542b\u4e86\u7528\u4e8e\u52a0\u5bc6\u7684\u516c\u94a5\u3002\u7533\u8bf7\u548c\u7ef4\u62a4\u8bc1\u4e66\u9700\u8981\u4e00\u5b9a\u7684\u6210\u672c\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/https%20%E5%92%8C%20http%20%E5%8C%BA%E5%88%AB/#https","title":"HTTPS\u52a0\u5bc6\u7684\u5b9e\u73b0","text":"<p>HTTPS\u7684\u5b89\u5168\u4fdd\u969c\u5b8c\u5168\u4f9d\u8d56\u4e8e\u5176\u5e95\u5c42\u7684TLS/SSL\u534f\u8bae\u3002\u8fd9\u4e2a\u534f\u8bae\u7684\u6838\u5fc3\u76ee\u6807\u662f\u5b89\u5168\u5730\u534f\u5546\u51fa\u4e00\u4e2a\u5bf9\u79f0\u52a0\u5bc6\u5bc6\u94a5\uff0c\u7136\u540e\u7528\u8fd9\u4e2a\u5bc6\u94a5\u6765\u52a0\u5bc6\u540e\u7eed\u7684HTTP\u901a\u4fe1\u5185\u5bb9\u3002</p> <p>\u4e3a\u4ec0\u4e48\u4e0d\u76f4\u63a5\u7528\u975e\u5bf9\u79f0\u52a0\u5bc6\uff1f\u56e0\u4e3a\u975e\u5bf9\u79f0\u52a0\u5bc6\u7684\u8ba1\u7b97\u5f00\u9500\u975e\u5e38\u5927\uff0c\u6027\u80fd\u5f88\u5dee\uff0c\u53ea\u9002\u5408\u7528\u6765\u52a0\u5bc6\u5c11\u91cf\u5173\u952e\u6570\u636e\uff08\u6bd4\u5982\u5bc6\u94a5\u672c\u8eab\uff09\uff0c\u800c\u4e0d\u9002\u5408\u52a0\u5bc6\u5927\u91cf\u7684\u4e1a\u52a1\u6570\u636e\u3002\u800c\u5bf9\u79f0\u52a0\u5bc6\u901f\u5ea6\u5feb\uff0c\u6027\u80fd\u597d\uff0c\u9002\u5408\u52a0\u5bc6\u4e1a\u52a1\u6570\u636e\u3002</p> <p>\u6240\u4ee5\uff0cHTTPS\u7684\u5b9e\u73b0\u539f\u7406\u53ef\u4ee5\u6982\u62ec\u4e3a\uff1a\u7528\u975e\u5bf9\u79f0\u52a0\u5bc6\u6765\u5b89\u5168\u5730\u4ea4\u6362\u5bf9\u79f0\u52a0\u5bc6\u7684\u5bc6\u94a5\uff0c\u7136\u540e\u7528\u5bf9\u79f0\u52a0\u5bc6\u6765\u9ad8\u6548\u5730\u52a0\u5bc6\u901a\u4fe1\u5185\u5bb9\u3002</p> <p>\u8fd9\u4e2a\u8fc7\u7a0b\u4e3b\u8981\u901a\u8fc7TLS\u63e1\u624b\uff08Handshake\uff09\u6765\u5b8c\u6210\uff0c\u4e0b\u9762\u662f\u4e00\u4e2a\u7b80\u5316\u7684\u3001\u6838\u5fc3\u7684\u63e1\u624b\u6b65\u9aa4\uff1a</p> <ol> <li> <p>\u5ba2\u6237\u7aef\u53d1\u8d77\u8bf7\u6c42 (Client Hello)</p> <ul> <li>\u6d4f\u89c8\u5668\uff08\u5ba2\u6237\u7aef\uff09\u5411\u670d\u52a1\u5668\u7684443\u7aef\u53e3\u53d1\u8d77\u8bf7\u6c42\u3002</li> <li>\u8bf7\u6c42\u4e2d\u5305\u542b\u4e86\u5b83\u652f\u6301\u7684TLS\u7248\u672c\u3001\u4e00\u4e2a\u5ba2\u6237\u7aef\u751f\u6210\u7684\u968f\u673a\u6570\uff08<code>client_random</code>\uff09\uff0c\u4ee5\u53ca\u5b83\u652f\u6301\u7684\u5bc6\u7801\u5957\u4ef6\uff08Cipher Suite\uff09\u5217\u8868\u3002\u5bc6\u7801\u5957\u4ef6\u662f\u6307\u52a0\u5bc6\u7b97\u6cd5\u7684\u7ec4\u5408\uff0c\u5982\u52a0\u5bc6\u7b97\u6cd5\u3001\u5bc6\u94a5\u4ea4\u6362\u7b97\u6cd5\u3001\u54c8\u5e0c\u7b97\u6cd5\u7b49\u3002</li> </ul> </li> <li> <p>\u670d\u52a1\u5668\u54cd\u5e94 (Server Hello &amp; Certificate)</p> <ul> <li>\u670d\u52a1\u5668\u4ece\u5ba2\u6237\u7aef\u7684\u5bc6\u7801\u5957\u4ef6\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a\u53cc\u65b9\u90fd\u652f\u6301\u7684\u5957\u4ef6\u3002</li> <li>\u670d\u52a1\u5668\u8fd4\u56de\u5b83\u7684TLS\u7248\u672c\u3001\u4e00\u4e2a\u670d\u52a1\u5668\u751f\u6210\u7684\u968f\u673a\u6570\uff08<code>server_random</code>\uff09\u3002</li> <li>\u5173\u952e\u4e00\u6b65\uff1a\u670d\u52a1\u5668\u5c06\u81ea\u5df1\u7684\u6570\u5b57\u8bc1\u4e66\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\u3002\u8fd9\u4e2a\u8bc1\u4e66\u91cc\u5305\u542b\u4e86\u670d\u52a1\u5668\u7684\u516c\u94a5\u3001\u57df\u540d\u4fe1\u606f\u3001\u9881\u53d1\u673a\u6784\u7b49\u3002</li> </ul> </li> <li> <p>\u5ba2\u6237\u7aef\u9a8c\u8bc1\u8bc1\u4e66\u4e0e\u751f\u6210\u5bc6\u94a5</p> <ul> <li>\u5ba2\u6237\u7aef\u6536\u5230\u8bc1\u4e66\u540e\uff0c\u4f1a\u8fdb\u884c\u4e25\u683c\u7684\u9a8c\u8bc1\uff1a<ul> <li>\u68c0\u67e5\u8bc1\u4e66\u662f\u5426\u7531\u6d4f\u89c8\u5668\u4fe1\u4efb\u7684\u6839CA\u7b7e\u53d1\uff08\u9a8c\u8bc1\u7b7e\u540d\u94fe\uff09\u3002</li> <li>\u68c0\u67e5\u8bc1\u4e66\u662f\u5426\u8fc7\u671f\u3002</li> <li>\u68c0\u67e5\u8bc1\u4e66\u4e0a\u7684\u57df\u540d\u662f\u5426\u4e0e\u5f53\u524d\u8bbf\u95ee\u7684\u57df\u540d\u4e00\u81f4\u3002</li> </ul> </li> <li>\u5982\u679c\u8bc1\u4e66\u9a8c\u8bc1\u901a\u8fc7\uff0c\u5ba2\u6237\u7aef\u5c31\u786e\u8ba4\u4e86\u670d\u52a1\u5668\u7684\u8eab\u4efd\u662f\u53ef\u4fe1\u7684\u3002</li> <li>\u5ba2\u6237\u7aef\u518d\u751f\u6210\u7b2c\u4e09\u4e2a\u968f\u673a\u6570\uff0c\u79f0\u4e3a\u201c\u9884\u4e3b\u5bc6\u94a5\u201d\uff08<code>pre-master secret</code>\uff09\u3002</li> <li>\u5ba2\u6237\u7aef\u4f7f\u7528\u4ece\u670d\u52a1\u5668\u8bc1\u4e66\u4e2d\u83b7\u53d6\u7684\u516c\u94a5\uff0c\u5bf9\u8fd9\u4e2a\u201c\u9884\u4e3b\u5bc6\u94a5\u201d\u8fdb\u884c\u52a0\u5bc6\uff0c\u7136\u540e\u53d1\u9001\u7ed9\u670d\u52a1\u5668\u3002</li> </ul> </li> <li> <p>\u670d\u52a1\u5668\u89e3\u5bc6\u4e0e\u751f\u6210\u4f1a\u8bdd\u5bc6\u94a5</p> <ul> <li>\u670d\u52a1\u5668\u6536\u5230\u88ab\u52a0\u5bc6\u7684\u201c\u9884\u4e3b\u5bc6\u94a5\u201d\u540e\uff0c\u4f7f\u7528\u81ea\u5df1\u7684\u79c1\u94a5\u8fdb\u884c\u89e3\u5bc6\uff0c\u4ece\u800c\u5f97\u5230\u4e86\u539f\u59cb\u7684\u201c\u9884\u4e3b\u5bc6\u94a5\u201d\u3002</li> <li>\u73b0\u5728\uff0c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u53cc\u65b9\u90fd\u62e5\u6709\u4e86\u76f8\u540c\u7684\u4e09\u4e2a\u4fe1\u606f\uff1a<code>client_random</code>\u3001<code>server_random</code> \u548c <code>pre-master secret</code>\u3002</li> <li>\u53cc\u65b9\u4f7f\u7528\u4e4b\u524d\u7ea6\u5b9a\u597d\u7684\u5bc6\u7801\u5957\u4ef6\u4e2d\u7684\u7b97\u6cd5\uff0c\u72ec\u7acb\u5730\u3001\u540c\u6b65\u5730\u5c06\u8fd9\u4e09\u4e2a\u968f\u673a\u6570\u6df7\u5408\u8ba1\u7b97\uff0c\u751f\u6210\u4e00\u4e2a\u6700\u7ec8\u7684\u3001\u72ec\u4e00\u65e0\u4e8c\u7684\u5bf9\u79f0\u52a0\u5bc6\u5bc6\u94a5\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a\u201c\u4f1a\u8bdd\u5bc6\u94a5\u201d\uff08Session Key\uff09\u3002</li> </ul> </li> <li> <p>\u63e1\u624b\u5b8c\u6210\uff0c\u5f00\u59cb\u52a0\u5bc6\u901a\u4fe1</p> <ul> <li>\u53cc\u65b9\u5404\u81ea\u5411\u5bf9\u65b9\u53d1\u9001\u4e00\u6761\u201cFinished\u201d\u6d88\u606f\uff0c\u8fd9\u6761\u6d88\u606f\u662f\u7528\u521a\u521a\u751f\u6210\u7684\u4f1a\u8bdd\u5bc6\u94a5\u52a0\u5bc6\u7684\uff0c\u7528\u4ee5\u9a8c\u8bc1\u63e1\u624b\u8fc7\u7a0b\u662f\u5426\u6210\u529f\u3002</li> <li>\u5982\u679c\u9a8c\u8bc1\u901a\u8fc7\uff0cTLS\u63e1\u624b\u5c31\u6b63\u5f0f\u5b8c\u6210\u3002</li> <li>\u6b64\u540e\uff0c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u4e4b\u95f4\u7684\u6240\u6709HTTP\u901a\u4fe1\uff0c\u90fd\u4f7f\u7528\u8fd9\u4e2a\u4f1a\u8bdd\u5bc6\u94a5\u8fdb\u884c\u5bf9\u79f0\u52a0\u5bc6\u548c\u89e3\u5bc6\uff0c\u4fdd\u8bc1\u4e86\u901a\u4fe1\u7684\u5b89\u5168\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/http%E5%93%8D%E5%BA%94%E7%A0%81/","title":"Http\u54cd\u5e94\u7801","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/http%E5%93%8D%E5%BA%94%E7%A0%81/#1xx-informational","title":"1xx - \u4fe1\u606f\u6027\u72b6\u6001\u7801 (Informational)","text":"<p>\u8fd9\u7c7b\u72b6\u6001\u7801\u8868\u793a\u670d\u52a1\u5668\u5df2\u7ecf\u63a5\u6536\u5230\u4e86\u8bf7\u6c42\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u7ee7\u7eed\u53d1\u9001\u8bf7\u6c42\u7684\u5269\u4f59\u90e8\u5206\uff0c\u6216\u8005\u5982\u679c\u8bf7\u6c42\u5df2\u7ecf\u5b8c\u6210\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u5ffd\u7565\u8fd9\u4e2a\u54cd\u5e94\u3002\u5728\u65e5\u5e38\u5f00\u53d1\u4e2d\u6211\u4eec\u76f4\u63a5\u63a5\u89e6\u5f97\u6bd4\u8f83\u5c11\u3002</p> <ul> <li> <p>100 Continue:</p> <p>\u8fd9\u4e2a\u72b6\u6001\u7801\u8868\u793a\u670d\u52a1\u5668\u5df2\u7ecf\u6536\u5230\u4e86\u8bf7\u6c42\u5934\uff0c\u5e76\u4e14\u5ba2\u6237\u7aef\u5e94\u8be5\u7ee7\u7eed\u53d1\u9001\u8bf7\u6c42\u4f53\u3002\u8fd9\u662f\u4e00\u79cd\u4f18\u5316\u673a\u5236\uff0c\u6bd4\u5982\u5728\u5ba2\u6237\u7aef\u8981\u4e0a\u4f20\u4e00\u4e2a\u975e\u5e38\u5927\u7684\u6587\u4ef6\u65f6\uff0c\u5b83\u53ef\u4ee5\u5148\u53d1\u9001\u4e00\u4e2a\u5e26\u6709Expect: 100-continue\u5934\u4fe1\u606f\u7684\u8bf7\u6c42\uff0c\u670d\u52a1\u5668\u5982\u679c\u613f\u610f\u63a5\u6536\uff0c\u5c31\u8fd4\u56de100\uff0c\u5ba2\u6237\u7aef\u518d\u5f00\u59cb\u4f20\u8f93\u6587\u4ef6\u4e3b\u4f53\u3002\u5982\u679c\u670d\u52a1\u5668\u4e0d\u63a5\u53d7\uff0c\u5c31\u53ef\u4ee5\u76f4\u63a5\u62d2\u7edd\uff0c\u907f\u514d\u4e86\u5927\u91cf\u6570\u636e\u7684\u65e0\u6548\u4f20\u8f93\u3002</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/http%E5%93%8D%E5%BA%94%E7%A0%81/#2xx-success","title":"2xx - \u6210\u529f\u72b6\u6001\u7801 (Success)","text":"<p>\u8fd9\u7c7b\u72b6\u6001\u7801\u8868\u793a\u670d\u52a1\u5668\u5df2\u6210\u529f\u63a5\u6536\u3001\u7406\u89e3\u5e76\u5904\u7406\u4e86\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u3002\u8fd9\u662f\u6211\u4eec\u6700\u671f\u671b\u770b\u5230\u7684\u7ed3\u679c\u3002</p> <ul> <li> <p>200 OK:</p> <p>\u8fd9\u662f\u6700\u5e38\u89c1\u7684\u6210\u529f\u72b6\u6001\u7801\u3002\u8868\u793a\u8bf7\u6c42\u5df2\u6210\u529f\uff0c\u54cd\u5e94\u4f53\u4e2d\u5305\u542b\u4e86\u8bf7\u6c42\u7684\u8d44\u6e90\u3002</p> <ul> <li>\u573a\u666f\uff1a<code>GET /api/users/1</code> \u8bf7\u6c42\u6210\u529f\uff0c\u670d\u52a1\u5668\u8fd4\u56de\u7528\u62371\u7684\u4fe1\u606f\uff0c\u72b6\u6001\u7801\u5c31\u662f200\u3002</li> </ul> </li> <li> <p>201 Created:</p> <p>\u8868\u793a\u8bf7\u6c42\u5df2\u7ecf\u88ab\u6210\u529f\u5904\u7406\uff0c\u5e76\u4e14\u5728\u670d\u52a1\u5668\u4e0a\u521b\u5efa\u4e86\u4e00\u4e2a\u65b0\u7684\u8d44\u6e90\u3002\u54cd\u5e94\u5934\u4e2d\u7684Location\u5b57\u6bb5\u901a\u5e38\u4f1a\u5305\u542b\u65b0\u8d44\u6e90\u7684URL\u3002</p> <ul> <li>\u573a\u666f\uff1a<code>POST /api/users</code> \u8bf7\u6c42\u521b\u5efa\u4e00\u4e2a\u65b0\u7528\u6237\u3002\u670d\u52a1\u5668\u6210\u529f\u521b\u5efa\u540e\uff0c\u8fd4\u56de201\uff0c\u5e76\u5728<code>Location</code>\u5934\u4e2d\u9644\u4e0a\u65b0\u7528\u6237\u7684\u5730\u5740\uff0c\u5982<code>/api/users/123</code>\u3002</li> </ul> </li> <li> <p>202 Accepted:</p> <p>\u8868\u793a\u670d\u52a1\u5668\u5df2\u7ecf\u63a5\u53d7\u4e86\u8bf7\u6c42\uff0c\u4f46\u5c1a\u672a\u5b8c\u6210\u5904\u7406\u3002\u8fd9\u4e2a\u72b6\u6001\u7801\u7528\u4e8e\u5f02\u6b65\u4efb\u52a1\u3002\u670d\u52a1\u5668\u544a\u8bc9\u5ba2\u6237\u7aef\uff1a\u201c\u4f60\u7684\u8bf7\u6c42\u6211\u5df2\u7ecf\u6536\u4e0b\u4e86\uff0c\u6b63\u5728\u6392\u961f\u5904\u7406\uff0c\u4f46\u8fd8\u6ca1\u5904\u7406\u5b8c\u3002\u201d</p> <ul> <li>\u573a\u666f\uff1a\u7528\u6237\u8bf7\u6c42\u5bfc\u51fa\u4e00\u4e2a\u5927\u578b\u62a5\u8868\u3002\u8fd9\u662f\u4e00\u4e2a\u8017\u65f6\u64cd\u4f5c\uff0c\u540e\u7aef\u670d\u52a1\u53ef\u4ee5\u7acb\u5373\u8fd4\u56de202\uff0c\u8868\u793a\u4efb\u52a1\u5df2\u63d0\u4ea4\u3002\u5ba2\u6237\u7aef\u53ef\u4ee5\u901a\u8fc7\u8f6e\u8be2\u53e6\u4e00\u4e2a\u63a5\u53e3\u6765\u67e5\u8be2\u4efb\u52a1\u72b6\u6001\u3002</li> </ul> </li> <li> <p>204 No Content:</p> <p>\u8868\u793a\u670d\u52a1\u5668\u6210\u529f\u5904\u7406\u4e86\u8bf7\u6c42\uff0c\u4f46\u6ca1\u6709\u8fd4\u56de\u4efb\u4f55\u5185\u5bb9\uff08\u54cd\u5e94\u4f53\u4e3a\u7a7a\uff09\u3002</p> <ul> <li>\u573a\u666f\uff1a<code>DELETE /api/users/1</code> \u8bf7\u6c42\u5220\u9664\u4e00\u4e2a\u7528\u6237\u3002\u64cd\u4f5c\u6210\u529f\u540e\uff0c\u670d\u52a1\u5668\u4e0d\u9700\u8981\u8fd4\u56de\u989d\u5916\u4fe1\u606f\uff0c\u53ea\u9700\u544a\u8bc9\u5ba2\u6237\u7aef\u201c\u5220\u6389\u4e86\u201d\uff0c\u6b64\u65f6\u8fd4\u56de204\u975e\u5e38\u5408\u9002\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/http%E5%93%8D%E5%BA%94%E7%A0%81/#3xx-redirection","title":"3xx - \u91cd\u5b9a\u5411\u72b6\u6001\u7801 (Redirection)","text":"<p>\u8fd9\u7c7b\u72b6\u6001\u7801\u8868\u793a\u5ba2\u6237\u7aef\u9700\u8981\u91c7\u53d6\u8fdb\u4e00\u6b65\u7684\u64cd\u4f5c\u624d\u80fd\u5b8c\u6210\u8bf7\u6c42\uff0c\u901a\u5e38\u662f\u9700\u8981\u8bbf\u95ee\u53e6\u4e00\u4e2aURL\u3002</p> <ul> <li> <p>301 Moved Permanently:</p> <p>\u8868\u793a\u8bf7\u6c42\u7684\u8d44\u6e90\u5df2\u88ab\u6c38\u4e45\u79fb\u52a8\u5230\u65b0\u7684URL\u3002\u6d4f\u89c8\u5668\u548c\u641c\u7d22\u5f15\u64ce\u4f1a\u8bb0\u4f4f\u8fd9\u4e2a\u65b0\u5730\u5740\u3002</p> <ul> <li>\u573a\u666f\uff1a\u7f51\u7ad9\u8fdb\u884c\u57df\u540d\u66f4\u6362\uff0c\u6bd4\u5982\u4ece<code>http://example.com</code>\u8fc1\u79fb\u5230<code>https://www.example.com</code>\uff0c\u914d\u7f6e301\u91cd\u5b9a\u5411\u540e\uff0c\u641c\u7d22\u5f15\u64ce\u4f1a\u66f4\u65b0\u5b83\u7684\u7d22\u5f15\u3002</li> </ul> </li> <li> <p>302 Found (\u6216 Moved Temporarily):</p> <p>\u8868\u793a\u8d44\u6e90\u88ab\u4e34\u65f6\u79fb\u52a8\u5230\u4e86\u53e6\u4e00\u4e2aURL\u3002\u5ba2\u6237\u7aef\u5728\u540e\u7eed\u7684\u8bf7\u6c42\u4e2d\u5e94\u8be5\u7ee7\u7eed\u4f7f\u7528\u539f\u59cbURL\u3002</p> <ul> <li>\u573a\u666f\uff1a\u6700\u5e38\u89c1\u7684\u672a\u767b\u5f55\u8df3\u8f6c\u3002\u7528\u6237\u8bbf\u95ee\u4e00\u4e2a\u9700\u8981\u767b\u5f55\u7684\u9875\u9762\uff0c\u670d\u52a1\u5668\u53d1\u73b0\u7528\u6237\u672a\u767b\u5f55\uff0c\u8fd4\u56de302\uff0c\u5e76<code>Location</code>\u5230\u767b\u5f55\u9875\u3002\u7528\u6237\u767b\u5f55\u6210\u529f\u540e\uff0c\u518d\u88ab\u91cd\u5b9a\u5411\u56de\u6765\u3002</li> </ul> </li> <li> <p>304 Not Modified:</p> <p>\u8fd9\u662f\u4e00\u79cd\u7f13\u5b58\u4f18\u5316\u673a\u5236\u3002\u5f53\u5ba2\u6237\u7aef\u8fdb\u884c\u6761\u4ef6\u8bf7\u6c42\uff08\u6bd4\u5982\u8bf7\u6c42\u5934\u4e2d\u5e26\u6709If-None-Match\u6216If-Modified-Since\u5b57\u6bb5\uff09\u65f6\uff0c\u670d\u52a1\u5668\u53d1\u73b0\u8d44\u6e90\u81ea\u4e0a\u6b21\u8bf7\u6c42\u4ee5\u6765\u6ca1\u6709\u53d1\u751f\u53d8\u5316\uff0c\u5c31\u4f1a\u8fd4\u56de304\uff0c\u544a\u8bc9\u5ba2\u6237\u7aef\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u672c\u5730\u7f13\u5b58\uff0c\u4ece\u800c\u8282\u7701\u5e26\u5bbd\u3002</p> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/http%E5%93%8D%E5%BA%94%E7%A0%81/#4xx-client-error","title":"4xx - \u5ba2\u6237\u7aef\u9519\u8bef\u72b6\u6001\u7801 (Client Error)","text":"<p>\u8fd9\u7c7b\u72b6\u6001\u7801\u8868\u793a\u8bf7\u6c42\u5305\u542b\u4e86\u9519\u8bef\u7684\u8bed\u6cd5\u6216\u65e0\u6cd5\u88ab\u6267\u884c\uff0c\u95ee\u9898\u51fa\u5728\u5ba2\u6237\u7aef\u8fd9\u8fb9\u3002</p> <ul> <li> <p>400 Bad Request:</p> <p>\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u901a\u7528\u7684\u5ba2\u6237\u7aef\u9519\u8bef\u7801\uff0c\u8868\u793a\u670d\u52a1\u5668\u65e0\u6cd5\u7406\u89e3\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u3002</p> <ul> <li>\u573a\u666f\uff1a\u8bf7\u6c42\u53c2\u6570\u683c\u5f0f\u9519\u8bef\uff0c\u6bd4\u5982\u8981\u6c42\u662fJSON\u683c\u5f0f\uff0c\u4f46\u5ba2\u6237\u7aef\u53d1\u9001\u4e86\u9519\u8bef\u7684\u683c\u5f0f\uff1b\u6216\u8005\u8bf7\u6c42\u7684\u53c2\u6570\u4e0d\u6ee1\u8db3\u6821\u9a8c\u89c4\u5219\uff0c\u6bd4\u5982\u90ae\u7bb1\u683c\u5f0f\u4e0d\u6b63\u786e\u3002</li> </ul> </li> <li> <p>401 Unauthorized:</p> <p>\u8868\u793a\u8bf7\u6c42\u9700\u8981\u7528\u6237\u8ba4\u8bc1\u3002\u867d\u7136\u540d\u5b57\u53eb\u201c\u672a\u6388\u6743\u201d\uff0c\u4f46\u5b83\u7684\u51c6\u786e\u542b\u4e49\u662f\u201c\u672a\u8ba4\u8bc1\u201d\u3002\u670d\u52a1\u5668\u4e0d\u77e5\u9053\u4f60\u662f\u8c01\u3002\u54cd\u5e94\u5934\u4e2d\u901a\u5e38\u4f1a\u5305\u542bWWW-Authenticate\u5b57\u6bb5\uff0c\u7528\u4ee5\u63d0\u793a\u8ba4\u8bc1\u65b9\u5f0f\u3002</p> <ul> <li>\u573a\u666f\uff1a\u7528\u6237\u672a\u767b\u5f55\uff08\u6ca1\u6709\u63d0\u4f9bToken\u6216Cookie\uff09\u5c31\u5c1d\u8bd5\u8bbf\u95ee\u9700\u8981\u767b\u5f55\u624d\u80fd\u67e5\u770b\u7684\u63a5\u53e3\u3002</li> </ul> </li> <li> <p>403 Forbidden:</p> <p>\u8868\u793a\u670d\u52a1\u5668\u5df2\u7ecf\u7406\u89e3\u4e86\u8bf7\u6c42\uff0c\u4f46\u662f\u62d2\u7edd\u6267\u884c\u3002\u4e0e401\u4e0d\u540c\uff0c\u670d\u52a1\u5668\u77e5\u9053\u4f60\u662f\u8c01\uff0c\u4f46\u4f60\u5c31\u662f\u6ca1\u6709\u6743\u9650\u8bbf\u95ee\u8fd9\u4e2a\u8d44\u6e90\u3002</p> <ul> <li>\u573a\u666f\uff1a\u4e00\u4e2a\u666e\u901a\u7528\u6237\u5c1d\u8bd5\u8bbf\u95ee\u53ea\u6709\u7ba1\u7406\u5458\u624d\u80fd\u8bbf\u95ee\u7684\u7ba1\u7406\u540e\u53f0\u63a5\u53e3\uff0c\u5373\u4f7f\u4ed6\u5df2\u7ecf\u767b\u5f55\uff0c\u4e5f\u4f1a\u6536\u5230403\u3002</li> </ul> </li> <li> <p>404 Not Found:</p> <p>\u8fd9\u662f\u6700\u5e7f\u4e3a\u4eba\u77e5\u7684\u72b6\u6001\u7801\u4e86\uff0c\u8868\u793a\u670d\u52a1\u5668\u4e0a\u6ca1\u6709\u627e\u5230\u8bf7\u6c42\u7684\u8d44\u6e90\u3002</p> <ul> <li>\u573a\u666f\uff1a\u8bbf\u95ee\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684URL\uff0c\u6bd4\u5982<code>GET /api/users/non-exist-user</code>\u3002</li> </ul> </li> <li> <p>405 Method Not Allowed:</p> <p>\u8868\u793a\u8bf7\u6c42\u884c\u4e2d\u6307\u5b9a\u7684\u8bf7\u6c42\u65b9\u6cd5\uff08\u5982GET\u3001POST\uff09\u4e0d\u88ab\u76ee\u6807\u8d44\u6e90\u6240\u652f\u6301\u3002</p> <ul> <li>\u573a\u666f\uff1a\u4e00\u4e2a\u53ea\u5141\u8bb8GET\u8bf7\u6c42\u7684\u63a5\u53e3\uff0c\u5ba2\u6237\u7aef\u5374\u7528\u4e86POST\u65b9\u6cd5\u53bb\u8c03\u7528\u3002</li> </ul> </li> <li> <p>409 Conflict:</p> <p>\u8868\u793a\u8bf7\u6c42\u4e0e\u670d\u52a1\u5668\u5f53\u524d\u7684\u72b6\u6001\u5b58\u5728\u51b2\u7a81\uff0c\u5bfc\u81f4\u8bf7\u6c42\u65e0\u6cd5\u5b8c\u6210\u3002</p> <ul> <li>\u573a\u666f\uff1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7528\u6237\u65f6\uff0c\u6307\u5b9a\u7684\u7528\u6237\u540d\u6216\u90ae\u7bb1\u5df2\u7ecf\u88ab\u5176\u4ed6\u4eba\u6ce8\u518c\u4e86\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/http%E5%93%8D%E5%BA%94%E7%A0%81/#5xx-server-error","title":"5xx - \u670d\u52a1\u5668\u7aef\u9519\u8bef\u72b6\u6001\u7801 (Server Error)","text":"<p>\u8fd9\u7c7b\u72b6\u6001\u7801\u8868\u793a\u670d\u52a1\u5668\u5728\u5904\u7406\u4e00\u4e2a\u770b\u4f3c\u6709\u6548\u7684\u8bf7\u6c42\u65f6\uff0c\u5185\u90e8\u53d1\u751f\u4e86\u9519\u8bef\u3002\u95ee\u9898\u51fa\u5728\u670d\u52a1\u5668\u8fd9\u8fb9\u3002</p> <ul> <li> <p>500 Internal Server Error:</p> <p>\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u901a\u7528\u7684\u670d\u52a1\u5668\u9519\u8bef\u7801\uff0c\u8868\u793a\u670d\u52a1\u5668\u5185\u90e8\u9047\u5230\u4e86\u4e00\u4e2a\u65e0\u6cd5\u5904\u7406\u7684\u610f\u5916\u60c5\u51b5\u3002</p> <ul> <li>\u573a\u666f\uff1a\u4ee3\u7801\u4e2d\u51fa\u73b0\u4e86\u4e00\u4e2a\u672a\u88ab\u6355\u83b7\u7684\u5f02\u5e38\uff08\u6bd4\u5982\u7a7a\u6307\u9488\uff09\uff0c\u5bfc\u81f4\u7a0b\u5e8f\u5d29\u6e83\u3002\u8fd9\u662f\u4e00\u4e2a\u201c\u515c\u5e95\u201d\u7684\u9519\u8bef\u7801\u3002</li> </ul> </li> <li> <p>502 Bad Gateway:</p> <p>\u901a\u5e38\u7528\u5728\u6709\u7f51\u5173\u6216\u4ee3\u7406\u7684\u67b6\u6784\u4e2d\u3002\u5b83\u8868\u793a\u4f5c\u4e3a\u7f51\u5173\u6216\u4ee3\u7406\u7684\u670d\u52a1\u5668\uff0c\u4ece\u4e0a\u6e38\u670d\u52a1\u5668\uff08\u6bd4\u5982\u5e94\u7528\u670d\u52a1\u5668\uff09\u6536\u5230\u4e86\u4e00\u4e2a\u65e0\u6548\u7684\u54cd\u5e94\u3002</p> <ul> <li>\u573a\u666f\uff1aNginx\u4f5c\u4e3a\u53cd\u5411\u4ee3\u7406\uff0c\u540e\u9762\u7684\u5e94\u7528\u670d\u52a1\uff08\u6bd4\u5982Tomcat\uff09\u6302\u4e86\u6216\u8005\u6ca1\u6709\u6b63\u5e38\u54cd\u5e94\uff0cNginx\u5c31\u4f1a\u8fd4\u56de502\u3002</li> </ul> </li> <li> <p>503 Service Unavailable:</p> <p>\u8868\u793a\u670d\u52a1\u5668\u5f53\u524d\u65e0\u6cd5\u5904\u7406\u8bf7\u6c42\u3002\u8fd9\u901a\u5e38\u662f\u4e34\u65f6\u7684\uff0c\u53ef\u80fd\u662f\u56e0\u4e3a\u670d\u52a1\u5668\u8fc7\u8f7d\u6216\u6b63\u5728\u8fdb\u884c\u505c\u673a\u7ef4\u62a4\u3002</p> <ul> <li>\u573a\u666f\uff1a\u670d\u52a1\u6b63\u5728\u8fdb\u884c\u7248\u672c\u53d1\u5e03\uff1b\u6216\u8005\u7531\u4e8e\u6d41\u91cf\u6d2a\u5cf0\uff0c\u5bfc\u81f4\u670d\u52a1\u5668\u8d44\u6e90\u8017\u5c3d\uff0c\u65e0\u6cd5\u518d\u63a5\u53d7\u65b0\u7684\u8bf7\u6c42\u3002</li> </ul> </li> <li> <p>504 Gateway Timeout:</p> <p>\u540c\u6837\u7528\u4e8e\u7f51\u5173\u6216\u4ee3\u7406\u3002\u5b83\u8868\u793a\u4f5c\u4e3a\u7f51\u5173\u7684\u670d\u52a1\u5668\uff0c\u5728\u89c4\u5b9a\u65f6\u95f4\u5185\u6ca1\u6709\u6536\u5230\u6765\u81ea\u4e0a\u6e38\u670d\u52a1\u5668\u7684\u54cd\u5e94\u3002</p> <ul> <li>\u573a\u666f\uff1aNginx\u53cd\u5411\u4ee3\u7406\u4e86\u4e00\u4e2a\u8bf7\u6c42\u7ed9\u5e94\u7528\u670d\u52a1\u5668\uff0c\u4f46\u5e94\u7528\u670d\u52a1\u5668\u56e0\u4e3a\u6267\u884c\u4e00\u4e2a\u975e\u5e38\u6162\u7684\u6570\u636e\u5e93\u67e5\u8be2\u800c\u957f\u65f6\u95f4\u6ca1\u6709\u8fd4\u56de\u7ed3\u679c\uff0c\u8d85\u51fa\u4e86Nginx\u7684\u7b49\u5f85\u8d85\u65f6\u65f6\u95f4\u3002</li> </ul> </li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/tcp%20udp%E4%BB%8B%E7%BB%8D%E5%B9%B6%E8%AF%B4%E6%98%8E%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF/","title":"Tcp udp\u4ecb\u7ecd\u5e76\u8bf4\u660e\u4f7f\u7528\u573a\u666f","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/tcp%20udp%E4%BB%8B%E7%BB%8D%E5%B9%B6%E8%AF%B4%E6%98%8E%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF/#tcptransmission-control-protocol","title":"TCP\uff08Transmission Control Protocol\uff0c\u4f20\u8f93\u63a7\u5236\u534f\u8bae\uff09","text":"<p>TCP\u662f\u4e00\u4e2a\u9762\u5411\u8fde\u63a5\u7684\u3001\u53ef\u9760\u7684\u3001\u57fa\u4e8e\u5b57\u8282\u6d41\u7684\u4f20\u8f93\u5c42\u534f\u8bae\u3002\u5b83\u7684\u8bbe\u8ba1\u76ee\u6807\u662f\u201c\u8d28\u91cf\u4f18\u5148\u201d\uff0c\u786e\u4fdd\u6570\u636e\u80fd\u591f\u51c6\u786e\u65e0\u8bef\u5730\u4ece\u4e00\u7aef\u4f20\u8f93\u5230\u53e6\u4e00\u7aef\u3002</p> <p>\u5b83\u7684\u6838\u5fc3\u7279\u70b9\u53ef\u4ee5\u6982\u62ec\u4e3a\u4ee5\u4e0b\u51e0\u70b9\uff1a</p> <ol> <li>\u9762\u5411\u8fde\u63a5\uff1a\u5728\u6570\u636e\u4f20\u8f93\u4e4b\u524d\uff0c\u5fc5\u987b\u901a\u8fc7\u201c\u4e09\u6b21\u63e1\u624b\u201d\u5efa\u7acb\u4e00\u4e2a\u865a\u62df\u7684\u8fde\u63a5\u3002\u6570\u636e\u4f20\u8f93\u5b8c\u6bd5\u540e\uff0c\u9700\u8981\u901a\u8fc7\u201c\u56db\u6b21\u6325\u624b\u201d\u6765\u65ad\u5f00\u8fde\u63a5\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u786e\u4fdd\u4e86\u901a\u4fe1\u53cc\u65b9\u90fd\u51c6\u5907\u597d\u4e86\u6570\u636e\u7684\u6536\u53d1\u3002</li> <li>\u53ef\u9760\u4f20\u8f93\uff1aTCP\u901a\u8fc7\u591a\u79cd\u673a\u5236\u6765\u4fdd\u8bc1\u6570\u636e\u7684\u53ef\u9760\u6027\uff1a<ul> <li>\u5e8f\u5217\u53f7\u548c\u786e\u8ba4\u5e94\u7b54\uff08ACK\uff09\uff1aTCP\u5c06\u6570\u636e\u62c6\u5206\u6210\u591a\u4e2a\u6709\u5e8f\u7684\u6570\u636e\u6bb5\uff0c\u5e76\u4e3a\u6bcf\u4e2a\u6570\u636e\u6bb5\u5206\u914d\u4e00\u4e2a\u5e8f\u5217\u53f7\u3002\u63a5\u6536\u65b9\u6536\u5230\u6570\u636e\u540e\u4f1a\u53d1\u9001\u4e00\u4e2aACK\u786e\u8ba4\uff0c\u544a\u77e5\u53d1\u9001\u65b9\u5df2\u7ecf\u6536\u5230\u4e86\u54ea\u4e9b\u6570\u636e\u3002</li> <li>\u8d85\u65f6\u91cd\u4f20\uff1a\u5982\u679c\u53d1\u9001\u65b9\u5728\u4e00\u5b9a\u65f6\u95f4\u5185\u6ca1\u6709\u6536\u5230\u67d0\u4e2a\u6570\u636e\u6bb5\u7684ACK\uff0c\u5c31\u4f1a\u8ba4\u4e3a\u8be5\u6570\u636e\u6bb5\u4e22\u5931\uff0c\u5e76\u91cd\u65b0\u53d1\u9001\u3002</li> <li>\u6570\u636e\u6821\u9a8c\uff1a\u901a\u8fc7\u6821\u9a8c\u548c\u6765\u68c0\u67e5\u6570\u636e\u5728\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u662f\u5426\u51fa\u9519\u3002</li> </ul> </li> <li>\u6d41\u91cf\u63a7\u5236\uff1a\u901a\u8fc7\u201c\u6ed1\u52a8\u7a97\u53e3\u201d\u673a\u5236\uff0c\u63a5\u6536\u65b9\u53ef\u4ee5\u544a\u8bc9\u53d1\u9001\u65b9\u81ea\u5df1\u8fd8\u6709\u591a\u5c11\u7f13\u51b2\u533a\u53ef\u4ee5\u63a5\u6536\u6570\u636e\uff0c\u9632\u6b62\u53d1\u9001\u65b9\u53d1\u9001\u8fc7\u5feb\u5bfc\u81f4\u63a5\u6536\u65b9\u5904\u7406\u4e0d\u8fc7\u6765\u3002</li> <li>\u62e5\u585e\u63a7\u5236\uff1a\u5f53\u7f51\u7edc\u51fa\u73b0\u62e5\u5835\u65f6\uff0cTCP\u4f1a\u81ea\u52a8\u964d\u4f4e\u53d1\u9001\u6570\u636e\u7684\u901f\u7387\uff0c\u4ee5\u7f13\u89e3\u7f51\u7edc\u538b\u529b\u3002\u8fd9\u5305\u62ec\u6162\u542f\u52a8\u3001\u62e5\u585e\u907f\u514d\u3001\u5feb\u91cd\u4f20\u3001\u5feb\u6062\u590d\u7b49\u7b97\u6cd5\u3002</li> <li>\u5b57\u8282\u6d41\uff1aTCP\u4e0d\u4fdd\u7559\u62a5\u6587\u7684\u8fb9\u754c\u3002\u53d1\u9001\u65b9\u5206\u4e24\u6b21\u53d1\u900110\u5b57\u8282\u548c20\u5b57\u8282\u7684\u6570\u636e\uff0c\u63a5\u6536\u65b9\u53ef\u80fd\u4e00\u6b21\u6027\u6536\u523030\u5b57\u8282\u3002</li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/tcp%20udp%E4%BB%8B%E7%BB%8D%E5%B9%B6%E8%AF%B4%E6%98%8E%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF/#udpuser-datagram-protocol","title":"UDP\uff08User Datagram Protocol\uff0c\u7528\u6237\u6570\u636e\u62a5\u534f\u8bae\uff09","text":"<p>UDP\u662f\u4e00\u4e2a\u9762\u5411\u65e0\u8fde\u63a5\u7684\u3001\u4e0d\u53ef\u9760\u7684\u3001\u9762\u5411\u62a5\u6587\u7684\u4f20\u8f93\u5c42\u534f\u8bae\u3002\u5b83\u7684\u8bbe\u8ba1\u76ee\u6807\u662f\u201c\u901f\u5ea6\u4f18\u5148\u201d\uff0c\u4ee5\u6700\u5feb\u7684\u901f\u5ea6\u3001\u6700\u5c0f\u7684\u5f00\u9500\u53d1\u9001\u6570\u636e\uff0c\u4f46\u4e0d\u5bf9\u6570\u636e\u7684\u5230\u8fbe\u505a\u4efb\u4f55\u4fdd\u8bc1\u3002</p> <p>\u5b83\u7684\u6838\u5fc3\u7279\u70b9\u5982\u4e0b\uff1a</p> <ol> <li>\u65e0\u8fde\u63a5\uff1a\u53d1\u9001\u6570\u636e\u524d\u4e0d\u9700\u8981\u5efa\u7acb\u8fde\u63a5\uff0c\u76f4\u63a5\u5c06\u6570\u636e\u6253\u5305\u6210\u6570\u636e\u62a5\uff08Datagram\uff09\u53d1\u9001\u51fa\u53bb\u3002</li> <li>\u4e0d\u53ef\u9760\uff1aUDP\u662f\u201c\u5c3d\u529b\u800c\u4e3a\u201d\uff08Best-Effort\uff09\u7684\u4f20\u8f93\u3002\u5b83\u4e0d\u4fdd\u8bc1\u6570\u636e\u5305\u4f1a\u5230\u8fbe\uff0c\u4e0d\u4fdd\u8bc1\u6570\u636e\u5305\u7684\u5230\u8fbe\u987a\u5e8f\uff0c\u4e5f\u4e0d\u4fdd\u8bc1\u6570\u636e\u5305\u4e0d\u91cd\u590d\u3002</li> <li>\u9762\u5411\u62a5\u6587\uff1aUDP\u4fdd\u7559\u4e86\u5e94\u7528\u7a0b\u5e8f\u53d1\u9001\u65f6\u7684\u6570\u636e\u8fb9\u754c\u3002\u53d1\u9001\u65b9\u53d1\u9001\u4e86\u4e00\u4e2a100\u5b57\u8282\u7684\u6570\u636e\u5305\uff0c\u63a5\u6536\u65b9\u5982\u679c\u6536\u5230\uff0c\u5c31\u4e00\u5b9a\u4f1a\u6536\u5230\u4e00\u4e2a\u5b8c\u6574\u7684100\u5b57\u8282\u7684\u6570\u636e\u5305\u3002</li> <li>\u5f00\u9500\u5c0f\uff0c\u901f\u5ea6\u5feb\uff1aUDP\u7684\u5934\u90e8\u53ea\u67098\u4e2a\u5b57\u8282\uff0c\u76f8\u6bd4TCP\u768420\u4e2a\u5b57\u8282\u8d77\u6b65\u8981\u5c0f\u5f97\u591a\u3002\u5b83\u6ca1\u6709\u5efa\u7acb\u8fde\u63a5\u3001\u786e\u8ba4\u3001\u91cd\u4f20\u7b49\u590d\u6742\u7684\u673a\u5236\uff0c\u56e0\u6b64\u4f20\u8f93\u5ef6\u8fdf\u4f4e\uff0c\u6548\u7387\u9ad8\u3002</li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/tcp%20udp%E4%BB%8B%E7%BB%8D%E5%B9%B6%E8%AF%B4%E6%98%8E%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF/#_1","title":"\u4f7f\u7528\u573a\u666f\u5206\u6790","text":"<p>\u7406\u89e3\u4e86\u5b83\u4eec\u7684\u7279\u70b9\u540e\uff0c\u9009\u62e9\u54ea\u4e2a\u534f\u8bae\u5c31\u53d8\u6210\u4e86\u4e00\u4e2a\u5728\u201c\u53ef\u9760\u6027\u201d\u548c\u201c\u5b9e\u65f6\u6027/\u6548\u7387\u201d\u4e4b\u95f4\u7684\u6743\u8861\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/tcp%20udp%E4%BB%8B%E7%BB%8D%E5%B9%B6%E8%AF%B4%E6%98%8E%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF/#tcp","title":"TCP\u7684\u9002\u7528\u573a\u666f\uff08\u5bf9\u6570\u636e\u5b8c\u6574\u6027\u548c\u987a\u5e8f\u8981\u6c42\u6781\u9ad8\u7684\u573a\u666f\uff09","text":"<ol> <li>\u6587\u4ef6\u4f20\u8f93\uff1aFTP\u3001SCP\u7b49\u3002\u6587\u4ef6\u7684\u4efb\u4f55\u4e00\u4e2a\u5b57\u8282\u51fa\u9519\u90fd\u4f1a\u5bfc\u81f4\u6574\u4e2a\u6587\u4ef6\u635f\u574f\uff0c\u5fc5\u987b\u4f7f\u7528TCP\u3002</li> <li>\u7f51\u9875\u6d4f\u89c8\uff1aHTTP/HTTPS\u3002\u7f51\u9875\u7684HTML\u3001CSS\u3001JS\u6587\u4ef6\u5fc5\u987b\u5b8c\u6574\u65e0\u8bef\u5730\u52a0\u8f7d\uff0c\u624d\u80fd\u6b63\u786e\u6e32\u67d3\u9875\u9762\u3002</li> <li>\u7535\u5b50\u90ae\u4ef6\uff1aSMTP\u3001POP3\u3001IMAP\u3002\u90ae\u4ef6\u5185\u5bb9\u4e0d\u5bb9\u6709\u5931\u3002</li> <li>\u6570\u636e\u5e93\u8fde\u63a5\uff1a\u51e0\u4e4e\u6240\u6709\u7684\u6570\u636e\u5e93\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u4e4b\u95f4\u7684\u901a\u4fe1\u90fd\u4f7f\u7528TCP\uff0c\u4fdd\u8bc1SQL\u6307\u4ee4\u548c\u6570\u636e\u7684\u51c6\u786e\u6027\u3002</li> <li>\u8fdc\u7a0b\u767b\u5f55\uff1aSSH\u3001Telnet\u3002\u4f60\u8f93\u5165\u7684\u6bcf\u4e00\u4e2a\u547d\u4ee4\u5b57\u7b26\u90fd\u5fc5\u987b\u6309\u5e8f\u3001\u51c6\u786e\u5730\u4f20\u5230\u670d\u52a1\u5668\u3002</li> </ol> <p>\u603b\u7ed3\uff1a\u5728\u8fd9\u4e9b\u573a\u666f\u4e0b\uff0c\u6211\u4eec\u613f\u610f\u4e3a\u4e86\u6570\u636e\u7684\u51c6\u786e\u53ef\u9760\uff0c\u727a\u7272\u4e00\u70b9\u70b9\u7684\u4f20\u8f93\u5ef6\u8fdf\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/tcp%20udp%E4%BB%8B%E7%BB%8D%E5%B9%B6%E8%AF%B4%E6%98%8E%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF/#udp","title":"UDP\u7684\u9002\u7528\u573a\u666f\uff08\u5bf9\u5b9e\u65f6\u6027\u8981\u6c42\u9ad8\uff0c\u80fd\u5bb9\u5fcd\u5c11\u91cf\u6570\u636e\u4e22\u5931\u7684\u573a\u666f\uff09","text":"<ol> <li>\u5728\u7ebf\u76f4\u64ad\u3001\u89c6\u9891\u4f1a\u8bae\uff1a\u5982WebRTC\u3002\u5728\u8fd9\u79cd\u573a\u666f\u4e0b\uff0c\u5b9e\u65f6\u6027\u662f\u7b2c\u4e00\u4f4d\u7684\u3002\u5982\u679c\u56e0\u4e3a\u7f51\u7edc\u6296\u52a8\u4e22\u4e86\u67d0\u4e00\u5e27\u753b\u9762\uff0c\u4e0e\u5176\u5361\u4f4f\u7b49\u5f85\u91cd\u4f20\uff0c\u4e0d\u5982\u76f4\u63a5\u64ad\u653e\u4e0b\u4e00\u5e27\uff0c\u7528\u6237\u4f53\u9a8c\u4f1a\u66f4\u597d\u3002\u4e22\u4e00\u5e27\u7684\u5f71\u54cd\u8fdc\u5c0f\u4e8e\u753b\u9762\u5361\u987f\u3002</li> <li>\u7f51\u7edc\u6e38\u620f\uff1a\u7279\u522b\u662fFPS\uff08\u7b2c\u4e00\u4eba\u79f0\u5c04\u51fb\uff09\u3001MOBA\uff08\u591a\u4eba\u5728\u7ebf\u6218\u672f\u7ade\u6280\uff09\u7b49\u6e38\u620f\u3002\u73a9\u5bb6\u7684\u4f4d\u7f6e\u3001\u52a8\u4f5c\u7b49\u4fe1\u606f\u9700\u8981\u4ee5\u6781\u4f4e\u7684\u5ef6\u8fdf\u5e7f\u64ad\u7ed9\u5176\u4ed6\u73a9\u5bb6\u3002\u5982\u679c\u4e00\u4e2a\u4f4d\u7f6e\u4fe1\u606f\u5305\u4e22\u5931\u4e86\uff0c\u670d\u52a1\u5668\u4f1a\u5f88\u5feb\u53d1\u9001\u4e0b\u4e00\u4e2a\u66f4\u65b0\u7684\u4f4d\u7f6e\u4fe1\u606f\uff0c\u65e7\u7684\u90a3\u4e2a\u5c31\u65e0\u6240\u8c13\u4e86\u3002</li> <li>DNS\uff08\u57df\u540d\u7cfb\u7edf\uff09\uff1aDNS\u67e5\u8be2\u5c31\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u8bf7\u6c42-\u54cd\u5e94\u8fc7\u7a0b\u3002\u6570\u636e\u5305\u5f88\u5c0f\uff0c\u903b\u8f91\u7b80\u5355\u3002\u5982\u679c\u8bf7\u6c42\u5931\u8d25\uff0c\u5ba2\u6237\u7aef\u7b80\u5355\u5730\u91cd\u65b0\u53d1\u8d77\u4e00\u6b21\u8bf7\u6c42\u5373\u53ef\u3002\u4f7f\u7528TCP\u7684\u63e1\u624b\u6325\u624b\u5f00\u9500\u663e\u5f97\u8fc7\u4e8e\u7b28\u91cd\u3002</li> <li>VoIP\uff08\u7f51\u7edc\u7535\u8bdd\uff09\uff1a\u548c\u89c6\u9891\u4f1a\u8bae\u7c7b\u4f3c\uff0c\u4fdd\u8bc1\u901a\u8bdd\u7684\u6d41\u7545\u6027\u6bd4\u4fdd\u8bc1\u6bcf\u4e2a\u97f3\u9891\u6570\u636e\u5305\u90fd\u5b8c\u6574\u5230\u8fbe\u66f4\u91cd\u8981\u3002</li> <li>\u7269\u8054\u7f51\uff08IoT\uff09\u8bbe\u5907\u6570\u636e\u4e0a\u62a5\uff1a\u5927\u91cf\u4f20\u611f\u5668\u4ee5\u9ad8\u9891\u7387\u4e0a\u62a5\u6570\u636e\uff0c\u8fd9\u4e9b\u6570\u636e\u901a\u5e38\u662f\u65f6\u5e8f\u6027\u7684\uff0c\u4e22\u6389\u4e00\u4e24\u4e2a\u6570\u636e\u70b9\u5bf9\u6574\u4f53\u8d8b\u52bf\u5206\u6790\u5f71\u54cd\u4e0d\u5927\u3002</li> </ol> <p>\u603b\u7ed3\uff1a\u5728\u8fd9\u4e9b\u573a\u666f\u4e0b\uff0c\u6211\u4eec\u4f18\u5148\u4fdd\u8bc1\u4f4e\u5ef6\u8fdf\u548c\u9ad8\u6548\u7387\uff0c\u5e94\u7528\u5c42\u81ea\u5df1\u4f1a\u5904\u7406\u5c11\u91cf\u7684\u6570\u636e\u4e22\u5931\uff08\u6bd4\u5982\u63d2\u503c\u3001\u5ffd\u7565\u7b49\uff09\u3002</p> <p>\u6700\u540e\uff0c\u503c\u5f97\u4e00\u63d0\u7684\u662f\uff0c\u73b0\u4ee3\u7f51\u7edc\u534f\u8bae\u7684\u53d1\u5c55\u4e5f\u5728\u8bd5\u56fe\u7ed3\u5408\u4e24\u8005\u7684\u4f18\u70b9\uff0c\u6bd4\u5982\u57fa\u4e8eUDP\u7684QUIC\u534f\u8bae\uff08HTTP/3\u7684\u6838\u5fc3\uff09\uff0c\u5b83\u5728UDP\u4e4b\u4e0a\u5b9e\u73b0\u4e86\u4e00\u5957\u53ef\u9760\u7684\u3001\u591a\u8def\u590d\u7528\u7684\u4f20\u8f93\u673a\u5236\uff0c\u65e2\u6709UDP\u7684\u4f4e\u5ef6\u8fdf\uff0c\u53c8\u6709\u7c7b\u4f3cTCP\u7684\u53ef\u9760\u6027\uff0c\u8fd9\u662f\u7f51\u7edc\u534f\u8bae\u6f14\u8fdb\u7684\u4e00\u4e2a\u91cd\u8981\u65b9\u5411\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/tcp%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%98%AF%E4%BB%80%E4%B9%88/","title":"Tcp\u6ed1\u52a8\u7a97\u53e3\u662f\u4ec0\u4e48","text":"<p>TCP\u6ed1\u52a8\u7a97\u53e3\u662f\u4e00\u79cd\u6d41\u91cf\u63a7\u5236\u6280\u672f\uff0c\u5b83\u5141\u8bb8\u53d1\u9001\u65b9\u5728\u6536\u5230\u786e\u8ba4\u5e94\u7b54\uff08ACK\uff09\u4e4b\u524d\u8fde\u7eed\u53d1\u9001\u591a\u4e2a\u6570\u636e\u5305\uff0c\u4ece\u800c\u663e\u8457\u63d0\u9ad8\u4e86\u6570\u636e\u4f20\u8f93\u7684\u6548\u7387\u548c\u7f51\u7edc\u541e\u5410\u91cf\u3002 \u5982\u679c\u6ca1\u6709\u6ed1\u52a8\u7a97\u53e3\uff0c\u53d1\u9001\u65b9\u6bcf\u53d1\u9001\u4e00\u4e2a\u6570\u636e\u5305\u5c31\u5fc5\u987b\u505c\u4e0b\u6765\u7b49\u5f85\u63a5\u6536\u65b9\u7684\u786e\u8ba4\uff0c\u8fd9\u5728\u5b58\u5728\u7f51\u7edc\u5ef6\u8fdf\u7684\u60c5\u51b5\u4e0b\u4f1a\u6781\u5927\u5730\u6d6a\u8d39\u5e26\u5bbd\u3002</p> <p>\u6ed1\u52a8\u7a97\u53e3\u673a\u5236\u5728\u901a\u4fe1\u53cc\u65b9\uff08\u53d1\u9001\u65b9\u548c\u63a5\u6536\u65b9\uff09\u7684\u5185\u5b58\u4e2d\u90fd\u7ef4\u6301\u7740\u4e00\u4e2a\u201c\u7a97\u53e3\u201d\uff0c\u8fd9\u4e2a\u7a97\u53e3\u5b9a\u4e49\u4e86\u5728\u4efb\u610f\u65f6\u523b\u53ef\u4ee5\u53d1\u9001\u6216\u63a5\u6536\u7684\u6570\u636e\u91cf\u3002\u968f\u7740\u6570\u636e\u7684\u53d1\u9001\u548c\u786e\u8ba4\uff0c\u8fd9\u4e2a\u7a97\u53e3\u4f1a\u5728\u6570\u636e\u6d41\u4e0a\u201c\u6ed1\u52a8\u201d\uff0c\u56e0\u6b64\u5f97\u540d\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/tcp%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%98%AF%E4%BB%80%E4%B9%88/#_1","title":"\u6ed1\u52a8\u7a97\u53e3\u7684\u5de5\u4f5c\u539f\u7406","text":"<p>TCP\u662f\u53cc\u5de5\u534f\u8bae\uff0c\u901a\u4fe1\u53cc\u65b9\u90fd\u540c\u65f6\u62e5\u6709\u53d1\u9001\u7a97\u53e3\u548c\u63a5\u6536\u7a97\u53e3\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/tcp%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%98%AF%E4%BB%80%E4%B9%88/#_2","title":"\u53d1\u9001\u7a97\u53e3","text":"<p>\u53d1\u9001\u65b9\u7684\u6ed1\u52a8\u7a97\u53e3\u662f\u5176\u53d1\u9001\u7f13\u51b2\u533a\u7684\u4e00\u90e8\u5206\uff0c\u7528\u4e8e\u7ba1\u7406\u6b63\u5728\u53d1\u9001\u548c\u7b49\u5f85\u786e\u8ba4\u7684\u6570\u636e\u3002\u53d1\u9001\u7a97\u53e3\u5185\u7684\u6570\u636e\u53ef\u4ee5\u5206\u4e3a\u56db\u4e2a\u90e8\u5206\uff1a 1.  \u5df2\u53d1\u9001\u4e14\u5df2\u6536\u5230ACK\u786e\u8ba4\uff1a\u8fd9\u90e8\u5206\u6570\u636e\u5df2\u7ecf\u6210\u529f\u9001\u8fbe\u5e76\u88ab\u63a5\u6536\u65b9\u786e\u8ba4\uff0c\u53d1\u9001\u65b9\u4e0d\u518d\u9700\u8981\u4fdd\u7559\u3002 2.  \u5df2\u53d1\u9001\u4f46\u5c1a\u672a\u6536\u5230ACK\u786e\u8ba4\uff1a\u8fd9\u90e8\u5206\u6570\u636e\u5df2\u7ecf\u53d1\u51fa\uff0c\u4f46\u8fd8\u5728\u201c\u98de\u884c\u201d\u9014\u4e2d\uff0c\u6216\u8005\u63a5\u6536\u65b9\u5df2\u7ecf\u6536\u5230\u4f46ACK\u8fd8\u6ca1\u8fd4\u56de\u3002\u53d1\u9001\u65b9\u5fc5\u987b\u5728\u7f13\u51b2\u533a\u4e2d\u4fdd\u7559\u8fd9\u4e9b\u6570\u636e\u4ee5\u5907\u91cd\u4f20\u3002 3.  \u672a\u53d1\u9001\u4f46\u63a5\u6536\u65b9\u5141\u8bb8\u53d1\u9001\uff1a\u8fd9\u90e8\u5206\u6570\u636e\u4f4d\u4e8e\u53d1\u9001\u7a97\u53e3\u5185\uff0c\u53ef\u4ee5\u7acb\u5373\u53d1\u9001\u3002\u8fd9\u90e8\u5206\u4e5f\u88ab\u79f0\u4e3a\u201c\u53ef\u7528\u7a97\u53e3\u201d\u3002 4.  \u672a\u53d1\u9001\u4e14\u63a5\u6536\u65b9\u4e0d\u5141\u8bb8\u53d1\u9001\uff1a\u8fd9\u90e8\u5206\u6570\u636e\u8d85\u51fa\u4e86\u5f53\u524d\u53d1\u9001\u7a97\u53e3\u7684\u8303\u56f4\uff0c\u6682\u65f6\u4e0d\u80fd\u53d1\u9001\u3002</p> <p>\u5f53\u53d1\u9001\u65b9\u6536\u5230\u63a5\u6536\u65b9\u53d1\u6765\u7684ACK\u65f6\uff0c\u53d1\u9001\u7a97\u53e3\u5c31\u4f1a\u5411\u53f3\u6ed1\u52a8\u3002\u4f8b\u5982\uff0c\u5982\u679c\u6536\u5230\u4e86\u5bf9\u4e4b\u524d\u53d1\u9001\u7684\u7b2c1\u5230100\u5b57\u8282\u7684\u786e\u8ba4\uff0c\u90a3\u4e48\u53d1\u9001\u7a97\u53e3\u7684\u5de6\u8fb9\u754c\u5c31\u4f1a\u79fb\u52a8\u5230\u7b2c101\u5b57\u8282\uff0c\u540c\u65f6\u5141\u8bb8\u53d1\u9001\u66f4\u591a\u7684\u6570\u636e\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/tcp%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%98%AF%E4%BB%80%E4%B9%88/#_3","title":"\u63a5\u6536\u7a97\u53e3","text":"<p>\u63a5\u6536\u65b9\u7684\u6ed1\u52a8\u7a97\u53e3\u540c\u6837\u662f\u5176\u63a5\u6536\u7f13\u51b2\u533a\u7684\u4e00\u90e8\u5206\uff0c\u7528\u4e8e\u7ba1\u7406\u63a5\u6536\u5230\u7684\u6570\u636e\u3002\u63a5\u6536\u7a97\u53e3\u5185\u7684\u6570\u636e\u53ef\u5206\u4e3a\u4e09\u7c7b\uff1a 1.  \u5df2\u63a5\u6536\u5e76\u5df2\u53d1\u9001\u786e\u8ba4\uff1a\u8fd9\u90e8\u5206\u6570\u636e\u5df2\u7ecf\u88ab\u5e94\u7528\u7a0b\u5e8f\u8bfb\u53d6\uff0c\u7f13\u51b2\u533a\u7a7a\u95f4\u53ef\u4ee5\u88ab\u91ca\u653e\u3002 2.  \u672a\u63a5\u6536\u4f46\u51c6\u5907\u63a5\u6536\uff1a\u8fd9\u662f\u63a5\u6536\u7a97\u53e3\u7684\u4e3b\u4f53\uff0c\u8868\u793a\u53ef\u4ee5\u63a5\u6536\u7684\u6570\u636e\u5e8f\u5217\u53f7\u8303\u56f4\u3002 3.  \u5df2\u63a5\u6536\u4f46\u672a\u6309\u5e8f\u5230\u8fbe\uff1a\u5982\u679c\u63a5\u6536\u65b9\u6536\u5230\u4e86\u4e00\u4e2a\u5e8f\u5217\u53f7\u5728\u7a97\u53e3\u5185\u4f46\u4e0d\u662f\u671f\u671b\u7684\u4e0b\u4e00\u4e2a\u5e8f\u5217\u53f7\u7684\u6570\u636e\u5305\uff08\u4f8b\u5982\uff0c\u5148\u6536\u5230\u4e86\u7b2c201-300\u5b57\u8282\uff0c\u4f46\u8fd8\u5728\u7b49\u5f85101-200\u5b57\u8282\uff09\uff0c\u5b83\u4f1a\u5148\u5c06\u8fd9\u4e2a\u4e71\u5e8f\u7684\u6570\u636e\u5305\u7f13\u5b58\u8d77\u6765\uff0c\u7b49\u5f85\u7f3a\u5931\u7684\u6570\u636e\u5305\u5230\u8fbe\u3002</p> <p>\u63a5\u6536\u7a97\u53e3\u7684\u5927\u5c0f\u53d6\u51b3\u4e8e\u5e94\u7528\u7a0b\u5e8f\u3001\u64cd\u4f5c\u7cfb\u7edf\u548c\u786c\u4ef6\u7684\u9650\u5236\u3002\u63a5\u6536\u65b9\u4f1a\u901a\u8fc7TCP\u62a5\u5934\u4e2d\u7684\u201c\u7a97\u53e3\u5927\u5c0f\u201d\u5b57\u6bb5\uff0c\u5c06\u81ea\u5df1\u5f53\u524d\u53ef\u7528\u7684\u7f13\u51b2\u533a\u5927\u5c0f\uff08\u5373\u63a5\u6536\u7a97\u53e3\u5927\u5c0f\uff09\u544a\u77e5\u53d1\u9001\u65b9\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/tcp%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%98%AF%E4%BB%80%E4%B9%88/#_4","title":"\u6ed1\u52a8\u7a97\u53e3\u5982\u4f55\u5b9e\u73b0\u6d41\u91cf\u63a7\u5236","text":"<p>\u6d41\u91cf\u63a7\u5236\u7684\u76ee\u7684\u662f\u9632\u6b62\u53d1\u9001\u65b9\u53d1\u9001\u6570\u636e\u7684\u901f\u5ea6\u8fc7\u5feb\uff0c\u5bfc\u81f4\u63a5\u6536\u65b9\u6765\u4e0d\u53ca\u5904\u7406\uff0c\u4ece\u800c\u9020\u6210\u6570\u636e\u4e22\u5931\u3002 \u6ed1\u52a8\u7a97\u53e3\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u5b9e\u73b0\u6d41\u91cf\u63a7\u5236\uff1a</p> <ul> <li>\u63a5\u6536\u65b9\u901a\u544a\u7a97\u53e3\u5927\u5c0f\uff1a\u63a5\u6536\u65b9\u5728\u6bcf\u6b21\u53d1\u9001ACK\u65f6\uff0c\u90fd\u4f1a\u5728TCP\u5934\u90e8\u634e\u5e26\u4e0a\u81ea\u5df1\u5f53\u524d\u7684\u63a5\u6536\u7a97\u53e3\u5927\u5c0f\uff08rwnd\uff09\u3002</li> <li>\u53d1\u9001\u65b9\u8c03\u6574\u53d1\u9001\u901f\u7387\uff1a\u53d1\u9001\u65b9\u6839\u636e\u6536\u5230\u7684rwnd\u503c\u6765\u8c03\u6574\u81ea\u5df1\u7684\u53d1\u9001\u7a97\u53e3\u5927\u5c0f\uff0c\u786e\u4fdd\u53d1\u9001\u7684\u6570\u636e\u91cf\u4e0d\u4f1a\u8d85\u8fc7\u63a5\u6536\u65b9\u7684\u5904\u7406\u80fd\u529b\u3002</li> <li>\u96f6\u7a97\u53e3\u4e0e\u7a97\u53e3\u63a2\u6d4b\uff1a\u5982\u679c\u63a5\u6536\u65b9\u7684\u7f13\u51b2\u533a\u6ee1\u4e86\uff0c\u5b83\u4f1a\u901a\u544a\u4e00\u4e2a\u5927\u5c0f\u4e3a0\u7684\u7a97\u53e3\u3002\u6b64\u65f6\uff0c\u53d1\u9001\u65b9\u4f1a\u505c\u6b62\u53d1\u9001\u6570\u636e\uff0c\u5e76\u542f\u52a8\u4e00\u4e2a\u6301\u7eed\u8ba1\u65f6\u5668\uff0c\u5b9a\u671f\u53d1\u9001\u4e00\u4e2a\u5c0f\u7684\u201c\u7a97\u53e3\u63a2\u6d4b\u201d\u5305\uff0c\u4ee5\u67e5\u8be2\u63a5\u6536\u65b9\u7684\u7a97\u53e3\u662f\u5426\u5df2\u7ecf\u66f4\u65b0\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/tcp%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%98%AF%E4%BB%80%E4%B9%88/#_5","title":"\u6ed1\u52a8\u7a97\u53e3\u4e0e\u62e5\u585e\u63a7\u5236","text":"<p>\u9664\u4e86\u70b9\u5bf9\u70b9\u7684\u6d41\u91cf\u63a7\u5236\uff0c\u6ed1\u52a8\u7a97\u53e3\u4e5f\u662fTCP\u62e5\u585e\u63a7\u5236\u673a\u5236\u7684\u57fa\u7840\u3002\u62e5\u585e\u63a7\u5236\u7684\u76ee\u7684\u662f\u9632\u6b62\u8fc7\u591a\u7684\u6570\u636e\u6ce8\u5165\u5230\u7f51\u7edc\u4e2d\uff0c\u5bfc\u81f4\u7f51\u7edc\u4e2d\u7684\u8def\u7531\u5668\u6216\u94fe\u8def\u8fc7\u8f7d\u3002</p> <p>TCP\u5f15\u5165\u4e86\u4e00\u4e2a\u540d\u4e3a\u201c\u62e5\u585e\u7a97\u53e3\u201d\uff08cwnd\uff09\u7684\u72b6\u6001\u53d8\u91cf\u3002\u53d1\u9001\u65b9\u5b9e\u9645\u7684\u53d1\u9001\u7a97\u53e3\u5927\u5c0f\u662f \u53d6\u62e5\u585e\u7a97\u53e3\uff08cwnd\uff09\u548c\u63a5\u6536\u65b9\u901a\u544a\u7684\u7a97\u53e3\uff08rwnd\uff09\u4e2d\u7684\u8f83\u5c0f\u503c\u3002</p> <ul> <li>\u6162\u542f\u52a8\uff1a\u8fde\u63a5\u521a\u5efa\u7acb\u65f6\uff0ccwnd\u901a\u5e38\u88ab\u8bbe\u7f6e\u4e3a\u4e00\u4e2a\u8f83\u5c0f\u7684\u503c\uff08\u4f8b\u59821\u4e2aMSS\uff09\uff0c\u7136\u540e\u968f\u7740\u6bcf\u4e2aACK\u7684\u63a5\u6536\u5448\u6307\u6570\u7ea7\u589e\u957f\u3002</li> <li>\u62e5\u585e\u907f\u514d\uff1a\u5f53cwnd\u589e\u957f\u5230\u4e00\u5b9a\u9608\u503c\uff08ssthresh\uff09\u540e\uff0c\u5176\u589e\u957f\u65b9\u5f0f\u53d8\u4e3a\u7ebf\u6027\uff0c\u4ee5\u66f4\u6162\u7684\u901f\u5ea6\u63a2\u6d4b\u7f51\u7edc\u5e26\u5bbd\u3002</li> <li>\u62e5\u585e\u53d1\u751f\uff1a\u5f53\u7f51\u7edc\u51fa\u73b0\u62e5\u585e\uff08\u4f8b\u5982\u53d1\u751f\u4e22\u5305\uff09\uff0c\u53d1\u9001\u65b9\u4f1a\u51cf\u5c0fcwnd\uff0c\u4ece\u800c\u964d\u4f4e\u53d1\u9001\u901f\u7387\u3002</li> </ul> <p>\u901a\u8fc7\u52a8\u6001\u8c03\u6574\u62e5\u585e\u7a97\u53e3\uff0cTCP\u80fd\u591f\u9002\u5e94\u7f51\u7edc\u72b6\u51b5\u7684\u53d8\u5316\uff0c\u6709\u6548\u5730\u907f\u514d\u548c\u7f13\u89e3\u7f51\u7edc\u62e5\u585e\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/tcp%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%98%AF%E4%BB%80%E4%B9%88/#_6","title":"\u4e22\u5305\u4e0e\u91cd\u4f20\u673a\u5236","text":"<p>\u6ed1\u52a8\u7a97\u53e3\u673a\u5236\u4e0eTCP\u7684\u91cd\u4f20\u7b56\u7565\u7d27\u5bc6\u7ed3\u5408\uff0c\u786e\u4fdd\u4e86\u6570\u636e\u7684\u53ef\u9760\u4f20\u8f93\u3002</p> <ul> <li>\u8d85\u65f6\u91cd\u4f20\uff1a\u53d1\u9001\u65b9\u4e3a\u6bcf\u4e2a\u53d1\u9001\u7684\u6570\u636e\u5305\u90fd\u8bbe\u7f6e\u4e00\u4e2a\u8ba1\u65f6\u5668\u3002\u5982\u679c\u5728\u89c4\u5b9a\u65f6\u95f4\u5185\u6ca1\u6709\u6536\u5230\u5bf9\u5e94\u7684ACK\uff0c\u5c31\u4f1a\u8ba4\u4e3a\u8be5\u6570\u636e\u5305\u5df2\u7ecf\u4e22\u5931\uff0c\u5e76\u8fdb\u884c\u91cd\u4f20\u3002</li> <li>\u5feb\u901f\u91cd\u4f20\uff1a\u5982\u679c\u53d1\u9001\u65b9\u8fde\u7eed\u6536\u5230\u4e09\u4e2a\u6216\u4ee5\u4e0a\u76f8\u540c\u7684ACK\uff08\u91cd\u590dACK\uff09\uff0c\u5b83\u4f1a\u5224\u65ad\u8fd9\u4e2aACK\u5bf9\u5e94\u7684\u5e8f\u5217\u53f7\u4e4b\u540e\u7684\u6570\u636e\u5305\u5f88\u53ef\u80fd\u5df2\u7ecf\u4e22\u5931\uff0c\u4e8e\u662f\u5728\u8d85\u65f6\u8ba1\u65f6\u5668\u5230\u671f\u524d\u5c31\u7acb\u5373\u91cd\u4f20\u8be5\u6570\u636e\u5305\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/websocket%E6%98%AF%E4%BB%80%E4%B9%88/","title":"Websocket\u662f\u4ec0\u4e48","text":"<p>WebSocket \u662f\u4e00\u79cd\u5148\u8fdb\u7684\u7f51\u7edc\u901a\u4fe1\u534f\u8bae\uff0c\u5b83\u5728\u5355\u4e2a TCP \u8fde\u63a5\u4e0a\u63d0\u4f9b\u5168\u53cc\u5de5\u3001\u53cc\u5411\u7684\u901a\u4fe1\u901a\u9053\u3002 \u4e0e\u4f20\u7edf\u7684 HTTP \u534f\u8bae\u7684\u8bf7\u6c42-\u54cd\u5e94\u6a21\u5f0f\u4e0d\u540c\uff0cWebSocket \u5141\u8bb8\u670d\u52a1\u5668\u4e3b\u52a8\u5411\u5ba2\u6237\u7aef\u53d1\u9001\u6570\u636e\uff0c\u4ece\u800c\u5b9e\u73b0\u4e86\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u4e4b\u95f4\u771f\u6b63\u7684\u5b9e\u65f6\u6570\u636e\u4ea4\u6362\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/websocket%E6%98%AF%E4%BB%80%E4%B9%88/#websocket","title":"WebSocket \u7684\u5de5\u4f5c\u539f\u7406","text":"<p>WebSocket \u7684\u901a\u4fe1\u8fc7\u7a0b\u59cb\u4e8e\u4e00\u4e2a HTTP\u201c\u63e1\u624b\u201d\u3002\u5ba2\u6237\u7aef\u5411\u670d\u52a1\u5668\u53d1\u9001\u4e00\u4e2a\u7279\u6b8a\u7684 HTTP \u8bf7\u6c42\uff0c\u8bf7\u6c42\u5c06\u8fde\u63a5\u5347\u7ea7\u5230 WebSocket\u3002 \u5982\u679c\u670d\u52a1\u5668\u652f\u6301 WebSocket\uff0c\u5b83\u4f1a\u540c\u610f\u8fd9\u4e2a\u8bf7\u6c42\uff0c\u4e4b\u540e\u8fd9\u6761\u5df2\u7ecf\u5efa\u7acb\u7684 TCP \u8fde\u63a5\u5c31\u4f1a\u4ece HTTP \u534f\u8bae\u8f6c\u6362\u5230 WebSocket \u534f\u8bae\u3002</p> <p>\u4e00\u65e6\u8fde\u63a5\u5efa\u7acb\uff0c\u5b83\u5c06\u4fdd\u6301\u6301\u4e45\u6253\u5f00\u72b6\u6001\uff0c\u5141\u8bb8\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u968f\u65f6\u53cc\u5411\u53d1\u9001\u6570\u636e\uff0c\u76f4\u5230\u5176\u4e2d\u4e00\u65b9\u5173\u95ed\u8fde\u63a5\u3002 \u8fd9\u79cd\u6301\u4e45\u6027\u8fde\u63a5\u907f\u514d\u4e86 HTTP \u534f\u8bae\u4e2d\u4e3a\u6bcf\u4e2a\u8bf7\u6c42\u548c\u54cd\u5e94\u91cd\u590d\u5efa\u7acb\u548c\u5173\u95ed\u8fde\u63a5\u7684\u5f00\u9500\uff0c\u4ece\u800c\u5927\u5927\u964d\u4f4e\u4e86\u5ef6\u8fdf\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/websocket%E6%98%AF%E4%BB%80%E4%B9%88/#websocket-http","title":"WebSocket \u4e0e HTTP \u7684\u4e3b\u8981\u533a\u522b","text":"\u7279\u6027 WebSocket HTTP \u901a\u4fe1\u65b9\u5f0f \u5168\u53cc\u5de5\u53cc\u5411\u901a\u4fe1 \u5355\u5411\u8bf7\u6c42-\u54cd\u5e94\u6a21\u5f0f \u8fde\u63a5\u72b6\u6001 \u6709\u72b6\u6001\u534f\u8bae\uff0c\u4fdd\u6301\u6301\u4e45\u8fde\u63a5 \u65e0\u72b6\u6001\u534f\u8bae\uff0c\u6bcf\u4e2a\u8bf7\u6c42-\u54cd\u5e94\u5468\u671f\u540e\u8fde\u63a5\u5173\u95ed \u6570\u636e\u53d1\u8d77\u65b9 \u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u5747\u53ef\u4e3b\u52a8\u53d1\u9001\u6570\u636e \u53ea\u80fd\u7531\u5ba2\u6237\u7aef\u53d1\u8d77\u8bf7\u6c42 \u5ef6\u8fdf \u4f4e\u5ef6\u8fdf \u76f8\u5bf9\u8f83\u9ad8\u7684\u5ef6\u8fdf \u5934\u90e8\u5f00\u9500 \u5934\u90e8\u4fe1\u606f\u5c11\uff0c\u901a\u5e38\u53ea\u67092\u5b57\u8282\u5de6\u53f3\uff0c\u8282\u7701\u5e26\u5bbd \u6bcf\u4e2a\u8bf7\u6c42\u90fd\u6709\u8f83\u5927\u7684\u5934\u90e8\u4fe1\u606f \u9002\u7528\u573a\u666f \u5b9e\u65f6\u5e94\u7528\uff0c\u5982\u5728\u7ebf\u6e38\u620f\u3001\u804a\u5929\u5ba4\u3001\u5b9e\u65f6\u6570\u636e\u66f4\u65b0 \u4f20\u7edf\u7684\u7f51\u9875\u6d4f\u89c8\u3001\u8868\u5355\u63d0\u4ea4\u548c\u9759\u6001\u8d44\u6e90\u83b7\u53d6 URI \u65b9\u6848 <code>ws://</code> (\u672a\u52a0\u5bc6) \u548c <code>wss://</code> (\u52a0\u5bc6) <code>http://</code> (\u672a\u52a0\u5bc6) \u548c <code>https://</code> (\u52a0\u5bc6)"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/websocket%E6%98%AF%E4%BB%80%E4%B9%88/#_1","title":"\u4f18\u52bf","text":"<ul> <li>\u771f\u6b63\u7684\u5b9e\u65f6\u901a\u4fe1: \u7531\u4e8e\u670d\u52a1\u5668\u53ef\u4ee5\u4e3b\u52a8\u63a8\u9001\u6570\u636e\uff0c\u4fe1\u606f\u53ef\u4ee5\u5373\u65f6\u4f20\u9012\u7ed9\u5ba2\u6237\u7aef\uff0c\u8fd9\u5bf9\u4e8e\u9700\u8981\u5feb\u901f\u54cd\u5e94\u7684\u5e94\u7528\u81f3\u5173\u91cd\u8981\u3002</li> <li>\u4f4e\u5ef6\u8fdf\u548c\u9ad8\u6027\u80fd: \u6301\u4e45\u8fde\u63a5\u548c\u8f83\u5c0f\u7684\u5934\u90e8\u5f00\u9500\u663e\u8457\u51cf\u5c11\u4e86\u7f51\u7edc\u5ef6\u8fdf\uff0c\u63d0\u9ad8\u4e86\u6570\u636e\u4f20\u8f93\u6548\u7387\u3002</li> <li>\u66f4\u5c11\u7684\u7f51\u7edc\u6d41\u91cf: \u4e00\u65e6\u8fde\u63a5\u5efa\u7acb\uff0c\u540e\u7eed\u7684\u6570\u636e\u5e27\u5934\u90e8\u5f88\u5c0f\uff0c\u4e0e HTTP \u8bf7\u6c42\u76f8\u6bd4\uff0c\u5927\u5927\u51cf\u5c11\u4e86\u5e26\u5bbd\u6d88\u8017\u3002</li> <li>\u8d44\u6e90\u5229\u7528\u7387\u66f4\u9ad8: \u51cf\u5c11\u4e86\u670d\u52a1\u5668\u4e3a\u5904\u7406\u9891\u7e41\u7684 HTTP \u8bf7\u6c42\u800c\u9700\u8981\u4e0d\u65ad\u5efa\u7acb\u548c\u5173\u95ed\u8fde\u63a5\u7684\u5f00\u9500\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/websocket%E6%98%AF%E4%BB%80%E4%B9%88/#_2","title":"\u5e94\u7528\u573a\u666f","text":"<p>WebSocket \u7684\u5b9e\u65f6\u548c\u53cc\u5411\u901a\u4fe1\u7279\u6027\u4f7f\u5176\u6210\u4e3a\u4f17\u591a\u73b0\u4ee3\u7f51\u7edc\u5e94\u7528\u7684\u7406\u60f3\u9009\u62e9\uff0c\u5305\u62ec\uff1a</p> <ul> <li>\u5728\u7ebf\u804a\u5929\u5e94\u7528: \u80fd\u591f\u5373\u65f6\u53d1\u9001\u548c\u63a5\u6536\u6d88\u606f\uff0c\u5e76\u663e\u793a\u7528\u6237\u7684\u5728\u7ebf\u72b6\u6001\u548c\u8f93\u5165\u72b6\u6001\u3002</li> <li>\u591a\u4eba\u5728\u7ebf\u6e38\u620f: \u786e\u4fdd\u6240\u6709\u73a9\u5bb6\u7684\u6e38\u620f\u72b6\u6001\u80fd\u591f\u5b9e\u65f6\u540c\u6b65\u3002</li> <li>\u5b9e\u65f6\u6570\u636e\u4eea\u8868\u76d8: \u4f8b\u5982\uff0c\u91d1\u878d\u5e94\u7528\u7684\u80a1\u7968\u62a5\u4ef7\u3001\u4f53\u80b2\u8d5b\u4e8b\u7684\u5b9e\u65f6\u6bd4\u5206\u66f4\u65b0\u7b49\u3002</li> <li>\u534f\u540c\u7f16\u8f91\u5de5\u5177: \u5141\u8bb8\u591a\u4e2a\u7528\u6237\u540c\u65f6\u7f16\u8f91\u540c\u4e00\u4e2a\u6587\u6863\uff0c\u5e76\u5b9e\u65f6\u770b\u5230\u5bf9\u65b9\u7684\u4fee\u6539\u3002</li> <li>\u5b9e\u65f6\u5730\u7406\u4f4d\u7f6e\u8ddf\u8e2a: \u5728\u5171\u4eab\u51fa\u884c\u6216\u5916\u5356\u5e94\u7528\u4e2d\u5b9e\u65f6\u66f4\u65b0\u8f66\u8f86\u6216\u914d\u9001\u5458\u7684\u4f4d\u7f6e\u3002</li> <li>\u5373\u65f6\u901a\u77e5: \u5411\u7528\u6237\u63a8\u9001\u6700\u65b0\u7684\u6d88\u606f\u3001\u66f4\u65b0\u6216\u8b66\u62a5\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E4%BB%8E%E8%BE%93%E5%85%A5%20URL%20%E5%88%B0%E9%A1%B5%E9%9D%A2%E5%B1%95%E7%A4%BA%E5%88%B0%E5%BA%95%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/","title":"\u4ece\u8f93\u5165 URL \u5230\u9875\u9762\u5c55\u793a\u5230\u5e95\u53d1\u751f\u4e86\u4ec0\u4e48","text":"<ol> <li> <p>URL\u89e3\u6790\u4e0e\u9884\u5904\u7406\uff1a</p> <ul> <li>\u7528\u6237\u8f93\u5165\uff1a\u7528\u6237\u5728\u6d4f\u89c8\u5668\u5730\u5740\u680f\u8f93\u5165URL\uff08\u4f8b\u5982 <code>http://www.example.com/path?query=value#fragment</code>\uff09\u5e76\u6309\u4e0b\u56de\u8f66\u3002</li> <li>\u8bed\u6cd5\u68c0\u67e5\u4e0e\u7f16\u7801\uff1a\u6d4f\u89c8\u5668\u9996\u5148\u68c0\u67e5URL\u7684\u8bed\u6cd5\u662f\u5426\u6b63\u786e\u3002\u5982\u679c\u5305\u542b\u975eASCII\u5b57\u7b26\uff0c\u6d4f\u89c8\u5668\u4f1a\u8fdb\u884c\u7f16\u7801\uff08\u5982Punycode\u5904\u7406\u57df\u540d\uff0c\u5bf9\u8def\u5f84\u548c\u67e5\u8be2\u53c2\u6570\u8fdb\u884c\u767e\u5206\u53f7\u7f16\u7801\uff09\u3002</li> <li>HSTS\u68c0\u67e5\uff1a\u6d4f\u89c8\u5668\u4f1a\u68c0\u67e5\u8bbf\u95ee\u7684\u57df\u540d\u662f\u5426\u5728HSTS\uff08HTTP Strict Transport Security\uff09\u5217\u8868\u4e2d\u3002\u5982\u679c\u5728\uff0c\u5e76\u4e14\u5f53\u524d\u662fHTTP\u8bf7\u6c42\uff0c\u6d4f\u89c8\u5668\u4f1a\u5f3a\u5236\u5c06\u8bf7\u6c42\u5347\u7ea7\u4e3aHTTPS\u3002</li> <li>\u6d4f\u89c8\u5668\u7f13\u5b58\u68c0\u67e5\uff1a\u5728\u53d1\u8d77\u7f51\u7edc\u8bf7\u6c42\u4e4b\u524d\uff0c\u6d4f\u89c8\u5668\u4f1a\u68c0\u67e5\u5176\u672c\u5730\u7f13\u5b58\uff08\u5305\u62ec\u5f3a\u7f13\u5b58\u5982Expires, Cache-Control: max-age\uff0c\u548c\u534f\u5546\u7f13\u5b58\u5982Last-Modified/If-Modified-Since, ETag/If-None-Match\uff09\u3002\u5982\u679c\u8bf7\u6c42\u7684\u8d44\u6e90\u5728\u7f13\u5b58\u4e2d\u4e14\u672a\u8fc7\u671f\uff08\u6216\u534f\u5546\u540e\u4ecd\u6709\u6548\uff09\uff0c\u6d4f\u89c8\u5668\u53ef\u80fd\u76f4\u63a5\u4ece\u7f13\u5b58\u52a0\u8f7d\uff0c\u8df3\u8fc7\u540e\u7eed\u5927\u90e8\u5206\u7f51\u7edc\u6b65\u9aa4\u3002</li> </ul> </li> <li> <p>DNS\u67e5\u8be2\uff08\u57df\u540d\u89e3\u6790\uff09\uff1a</p> <ul> <li>\u5982\u679c\u7f13\u5b58\u672a\u547d\u4e2d\u6216\u9700\u8981\u9a8c\u8bc1\uff0c\u6d4f\u89c8\u5668\u9700\u8981\u5c06URL\u4e2d\u7684\u57df\u540d\uff08\u5982 <code>www.example.com</code>\uff09\u89e3\u6790\u4e3aIP\u5730\u5740\u3002</li> <li>\u67e5\u627e\u987a\u5e8f\u901a\u5e38\u662f\uff1a     a.  \u6d4f\u89c8\u5668\u81ea\u8eab\u7684DNS\u7f13\u5b58\u3002     b.  \u64cd\u4f5c\u7cfb\u7edf\u7684DNS\u7f13\u5b58\uff08\u5305\u62ec\u672c\u5730hosts\u6587\u4ef6\uff09\u3002     c.  \u8def\u7531\u5668\u7684DNS\u7f13\u5b58\uff08\u5982\u679c\u914d\u7f6e\u4e86\uff09\u3002     d.  \u5411\u672c\u5730\u914d\u7f6e\u7684DNS\u670d\u52a1\u5668\uff08\u901a\u5e38\u7531ISP\u63d0\u4f9b\uff09\u53d1\u8d77\u9012\u5f52\u67e5\u8be2\u8bf7\u6c42\u3002     e.  \u672c\u5730DNS\u670d\u52a1\u5668\u4f1a\u8d1f\u8d23\u4ece\u6839DNS\u670d\u52a1\u5668\u5f00\u59cb\uff0c\u9010\u7ea7\u67e5\u8be2\u9876\u7ea7\u57df\uff08TLD\uff09DNS\u670d\u52a1\u5668\u3001\u6743\u5a01DNS\u670d\u52a1\u5668\uff0c\u76f4\u5230\u627e\u5230\u57df\u540d\u5bf9\u5e94\u7684IP\u5730\u5740\u3002</li> <li>DNS\u670d\u52a1\u5668\u8fd4\u56deIP\u5730\u5740\u7ed9\u64cd\u4f5c\u7cfb\u7edf\uff0c\u64cd\u4f5c\u7cfb\u7edf\u518d\u8fd4\u56de\u7ed9\u6d4f\u89c8\u5668\u3002</li> </ul> </li> <li> <p>\u5efa\u7acbTCP\u8fde\u63a5\uff1a</p> <ul> <li>\u83b7\u53d6\u5230\u670d\u52a1\u5668IP\u5730\u5740\u540e\uff0c\u6d4f\u89c8\u5668\u4f1a\u4e0e\u670d\u52a1\u5668\u4e4b\u95f4\u5efa\u7acbTCP\u8fde\u63a5\u3002\u8fd9\u901a\u5e38\u901a\u8fc7\u4e09\u6b21\u63e1\u624b\u5b8c\u6210\uff1a     a.  \u5ba2\u6237\u7aef\uff08\u6d4f\u89c8\u5668\uff09\u53d1\u9001SYN\u5305\uff08\u540c\u6b65\u5e8f\u5217\u7f16\u53f7\uff09\u5230\u670d\u52a1\u5668\u3002     b.  \u670d\u52a1\u5668\u56de\u590dSYN-ACK\u5305\uff08\u540c\u6b65\u786e\u8ba4\uff09\u3002     c.  \u5ba2\u6237\u7aef\u518d\u53d1\u9001ACK\u5305\uff08\u786e\u8ba4\uff09\uff0cTCP\u8fde\u63a5\u5efa\u7acb\u3002</li> <li>\u5982\u679cURL\u662fHTTPS\u534f\u8bae\uff0c\u5728TCP\u8fde\u63a5\u5efa\u7acb\u4e4b\u540e\uff0c\u8fd8\u9700\u8981\u8fdb\u884cTLS/SSL\u63e1\u624b\u4ee5\u5efa\u7acb\u5b89\u5168\u7684\u52a0\u5bc6\u901a\u9053\uff1a     a.  \u5ba2\u6237\u7aef\u53d1\u9001ClientHello\uff08\u5305\u542b\u652f\u6301\u7684TLS\u7248\u672c\u3001\u52a0\u5bc6\u5957\u4ef6\u3001\u4e00\u4e2a\u968f\u673a\u6570\u7b49\uff09\u3002     b.  \u670d\u52a1\u5668\u56de\u590dServerHello\uff08\u9009\u62e9\u7684TLS\u7248\u672c\u548c\u52a0\u5bc6\u5957\u4ef6\u3001\u53e6\u4e00\u4e2a\u968f\u673a\u6570\u3001\u670d\u52a1\u5668\u7684\u6570\u5b57\u8bc1\u4e66\uff09\u3002     c.  \u5ba2\u6237\u7aef\u9a8c\u8bc1\u670d\u52a1\u5668\u8bc1\u4e66\u7684\u6709\u6548\u6027\uff08\u9881\u53d1\u673a\u6784\u3001\u6709\u6548\u671f\u3001\u57df\u540d\u5339\u914d\u7b49\uff09\u3002     d.  \u5ba2\u6237\u7aef\u751f\u6210\u9884\u4e3b\u5bc6\u94a5\uff08Pre-Master Secret\uff09\uff0c\u7528\u670d\u52a1\u5668\u8bc1\u4e66\u4e2d\u7684\u516c\u94a5\u52a0\u5bc6\u540e\u53d1\u9001\u7ed9\u670d\u52a1\u5668\u3002     e.  \u670d\u52a1\u5668\u7528\u5176\u79c1\u94a5\u89e3\u5bc6\u5f97\u5230\u9884\u4e3b\u5bc6\u94a5\u3002     f.  \u53cc\u65b9\u6839\u636e\u9884\u4e3b\u5bc6\u94a5\u3001\u5ba2\u6237\u7aef\u968f\u673a\u6570\u3001\u670d\u52a1\u5668\u968f\u673a\u6570\u5171\u540c\u751f\u6210\u4f1a\u8bdd\u5bc6\u94a5\uff08\u5bf9\u79f0\u5bc6\u94a5\uff09\u3002     g.  \u53cc\u65b9\u4e92\u53d1Finished\u6d88\u606f\uff0c\u7528\u4f1a\u8bdd\u5bc6\u94a5\u52a0\u5bc6\uff0c\u9a8c\u8bc1\u63e1\u624b\u8fc7\u7a0b\u5b8c\u6210\u3002\u6b64\u540e\u6240\u6709HTTP\u6570\u636e\u90fd\u5c06\u901a\u8fc7\u6b64\u4f1a\u8bdd\u5bc6\u94a5\u52a0\u5bc6\u4f20\u8f93\u3002</li> </ul> </li> <li> <p>\u53d1\u9001HTTP\u8bf7\u6c42\uff1a</p> <ul> <li>TCP\uff08\u548cTLS/SSL\uff09\u8fde\u63a5\u5efa\u7acb\u540e\uff0c\u6d4f\u89c8\u5668\u6784\u9020\u4e00\u4e2aHTTP\u8bf7\u6c42\u62a5\u6587\u3002</li> <li>\u8bf7\u6c42\u62a5\u6587\u5305\u542b\uff1a     a.  \u8bf7\u6c42\u884c\uff08Request Line\uff09\uff1a\u5982 <code>GET /path?query=value HTTP/1.1</code>\u3002     b.  \u8bf7\u6c42\u5934\uff08Headers\uff09\uff1a\u5305\u542bHost\uff08\u76ee\u6807\u670d\u52a1\u5668\u57df\u540d\u548c\u7aef\u53e3\uff09\u3001User-Agent\uff08\u6d4f\u89c8\u5668\u4fe1\u606f\uff09\u3001Accept\uff08\u53ef\u63a5\u53d7\u7684\u5185\u5bb9\u7c7b\u578b\uff09\u3001Connection\uff08\u5982keep-alive\uff09\u3001Cookie\uff08\u5982\u679c\u4e4b\u524d\u6709\u8bbe\u7f6e\uff09\u7b49\u3002     c.  \u8bf7\u6c42\u4f53\uff08Body\uff09\uff1a\u5bf9\u4e8ePOST\u3001PUT\u7b49\u8bf7\u6c42\uff0c\u4f1a\u5305\u542b\u8981\u63d0\u4ea4\u7684\u6570\u636e\u3002GET\u8bf7\u6c42\u901a\u5e38\u6ca1\u6709\u8bf7\u6c42\u4f53\u3002</li> <li>\u6d4f\u89c8\u5668\u5c06HTTP\u8bf7\u6c42\u62a5\u6587\u901a\u8fc7\u5df2\u5efa\u7acb\u7684\u8fde\u63a5\u53d1\u9001\u7ed9\u670d\u52a1\u5668\u3002</li> </ul> </li> <li> <p>\u670d\u52a1\u5668\u5904\u7406\u8bf7\u6c42\u5e76\u8fd4\u56deHTTP\u54cd\u5e94\uff1a</p> <ul> <li>\u670d\u52a1\u5668\uff08\u5982Nginx\u3001Apache\u7b49Web\u670d\u52a1\u5668\uff09\u63a5\u6536\u5230HTTP\u8bf7\u6c42\u3002</li> <li>\u670d\u52a1\u5668\u53ef\u80fd\u4f1a\u6839\u636e\u914d\u7f6e\u5c06\u8bf7\u6c42\u8f6c\u53d1\u7ed9\u5e94\u7528\u670d\u52a1\u5668\uff08\u5982Tomcat\u3001Node.js\u3001Django/Flask\u7b49\uff09\u8fdb\u884c\u4e1a\u52a1\u903b\u8f91\u5904\u7406\u3002</li> <li>\u670d\u52a1\u5668\u7aef\u7a0b\u5e8f\u6267\u884c\u76f8\u5173\u903b\u8f91\uff0c\u53ef\u80fd\u6d89\u53ca\u6570\u636e\u5e93\u67e5\u8be2\u3001\u8c03\u7528\u5176\u4ed6\u670d\u52a1\u3001\u6587\u4ef6\u8bfb\u53d6\u7b49\u3002</li> <li>\u5904\u7406\u5b8c\u6210\u540e\uff0c\u670d\u52a1\u5668\u6784\u9020\u4e00\u4e2aHTTP\u54cd\u5e94\u62a5\u6587\u3002</li> <li>\u54cd\u5e94\u62a5\u6587\u5305\u542b\uff1a     a.  \u72b6\u6001\u884c\uff08Status Line\uff09\uff1a\u5982 <code>HTTP/1.1 200 OK</code> \u6216 <code>HTTP/1.1 404 Not Found</code>\u3002     b.  \u54cd\u5e94\u5934\uff08Headers\uff09\uff1a\u5305\u542bContent-Type\uff08\u54cd\u5e94\u5185\u5bb9\u7c7b\u578b\uff0c\u5982text/html\uff09\u3001Content-Length\uff08\u54cd\u5e94\u4f53\u957f\u5ea6\uff09\u3001Set-Cookie\uff08\u5982\u679c\u9700\u8981\u8bbe\u7f6ecookie\uff09\u3001Cache-Control\uff08\u7f13\u5b58\u7b56\u7565\uff09\u7b49\u3002     c.  \u54cd\u5e94\u4f53\uff08Body\uff09\uff1a\u5b9e\u9645\u7684\u8d44\u6e90\u5185\u5bb9\uff0c\u5982HTML\u6587\u6863\u3001CSS\u6587\u4ef6\u3001JavaScript\u4ee3\u7801\u3001\u56fe\u7247\u6570\u636e\u7b49\u3002</li> <li>\u670d\u52a1\u5668\u5c06HTTP\u54cd\u5e94\u62a5\u6587\u901a\u8fc7\u8fde\u63a5\u53d1\u9001\u56de\u6d4f\u89c8\u5668\u3002</li> </ul> </li> <li> <p>\u6d4f\u89c8\u5668\u63a5\u6536\u5e76\u5904\u7406\u54cd\u5e94\uff1a</p> <ul> <li>\u6d4f\u89c8\u5668\u63a5\u6536\u5230\u670d\u52a1\u5668\u8fd4\u56de\u7684HTTP\u54cd\u5e94\u62a5\u6587\u3002</li> <li>\u6839\u636e\u54cd\u5e94\u5934\u4e2d\u7684Content-Type\uff0c\u6d4f\u89c8\u5668\u77e5\u9053\u5982\u4f55\u5904\u7406\u54cd\u5e94\u4f53\u3002\u4f8b\u5982\uff0c<code>text/html</code> \u8868\u793a\u8fd9\u662f\u4e00\u4e2aHTML\u6587\u6863\u3002</li> <li>\u5982\u679c\u72b6\u6001\u7801\u662f\u91cd\u5b9a\u5411\uff08\u5982301, 302\uff09\uff0c\u6d4f\u89c8\u5668\u4f1a\u6839\u636e\u54cd\u5e94\u5934\u4e2d\u7684Location\u5b57\u6bb5\u53d1\u8d77\u65b0\u7684URL\u8bf7\u6c42\u3002</li> <li>\u6d4f\u89c8\u5668\u5173\u95ed\u6216\u4fdd\u6301TCP\u8fde\u63a5\uff08\u6839\u636eConnection\u5934\uff09\u3002HTTP/1.1\u9ed8\u8ba4\u662f\u6301\u4e45\u8fde\u63a5\uff08keep-alive\uff09\uff0cHTTP/2\u5219\u4f7f\u7528\u591a\u8def\u590d\u7528\u3002</li> </ul> </li> <li> <p>\u6d4f\u89c8\u5668\u6e32\u67d3\u9875\u9762\uff1a     \u8fd9\u662f\u5c06\u63a5\u6536\u5230\u7684\u8d44\u6e90\uff08\u4e3b\u8981\u662fHTML\u3001CSS\u3001JavaScript\uff09\u8f6c\u6362\u4e3a\u7528\u6237\u53ef\u89c1\u9875\u9762\u7684\u8fc7\u7a0b\uff0c\u4e3b\u8981\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ul> <li>\u89e3\u6790HTML\u6784\u5efaDOM\u6811\uff08Document Object Model\uff09\uff1a\u6d4f\u89c8\u5668\u5c06HTML\u6587\u672c\u81ea\u4e0a\u800c\u4e0b\u89e3\u6790\uff0c\u751f\u6210DOM\u8282\u70b9\uff0c\u6784\u6210DOM\u6811\u3002</li> <li>\u89e3\u6790CSS\u6784\u5efaCSSOM\u6811\uff08CSS Object Model\uff09\uff1a\u6d4f\u89c8\u5668\u89e3\u6790HTML\u4e2d\u5f15\u7528\u7684CSS\u6587\u4ef6\uff08\u901a\u8fc7<code>&lt;link&gt;</code>\u6807\u7b7e\uff09\u6216\u5185\u8054\u6837\u5f0f\uff08<code>&lt;style&gt;</code>\u6807\u7b7e\uff09\uff0c\u751f\u6210CSSOM\u6811\uff0c\u5b83\u5305\u542b\u4e86\u6240\u6709\u5143\u7d20\u7684\u6837\u5f0f\u4fe1\u606f\u3002</li> <li>\u6784\u5efa\u6e32\u67d3\u6811\uff08Render Tree\uff09\uff1a\u6d4f\u89c8\u5668\u5c06DOM\u6811\u548cCSSOM\u6811\u7ed3\u5408\u8d77\u6765\uff0c\u53ea\u5305\u542b\u9700\u8981\u663e\u793a\u7684\u8282\u70b9\u53ca\u5176\u6837\u5f0f\u4fe1\u606f\uff0c\u5f62\u6210\u6e32\u67d3\u6811\u3002\u4e0d\u53ef\u89c1\u7684\u5143\u7d20\uff08\u5982<code>&lt;head&gt;</code>\u6807\u7b7e\u5185\u5bb9\uff0c\u6216<code>display: none;</code>\u7684\u5143\u7d20\uff09\u4e0d\u4f1a\u5728\u6e32\u67d3\u6811\u4e2d\u3002</li> <li>\u5e03\u5c40\uff08Layout / Reflow\uff09\uff1a\u6839\u636e\u6e32\u67d3\u6811\uff0c\u6d4f\u89c8\u5668\u8ba1\u7b97\u6bcf\u4e2a\u8282\u70b9\u5728\u5c4f\u5e55\u4e0a\u7684\u786e\u5207\u4f4d\u7f6e\u548c\u5927\u5c0f\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u4e5f\u79f0\u4e3a\u56de\u6d41\u6216\u91cd\u6392\u3002</li> <li>\u7ed8\u5236\uff08Painting / Repaint\uff09\uff1a\u6839\u636e\u5e03\u5c40\u9636\u6bb5\u8ba1\u7b97\u51fa\u7684\u4fe1\u606f\uff0c\u6d4f\u89c8\u5668\u5c06\u5404\u4e2a\u8282\u70b9\u7ed8\u5236\u5230\u5c4f\u5e55\u4e0a\uff0c\u5305\u62ec\u6587\u672c\u3001\u989c\u8272\u3001\u8fb9\u6846\u3001\u56fe\u7247\u7b49\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u4e5f\u79f0\u4e3a\u91cd\u7ed8\u3002</li> <li>\u5408\u6210\uff08Compositing\uff09\uff1a\u5bf9\u4e8e\u590d\u6742\u7684\u9875\u9762\uff0c\u6d4f\u89c8\u5668\u53ef\u80fd\u4f1a\u5c06\u9875\u9762\u7684\u4e0d\u540c\u90e8\u5206\u7ed8\u5236\u5728\u4e0d\u540c\u7684\u56fe\u5c42\uff08Layers\uff09\u4e0a\uff0c\u7136\u540e\u5c06\u8fd9\u4e9b\u56fe\u5c42\u5408\u6210\u4e3a\u6700\u7ec8\u7684\u5c4f\u5e55\u56fe\u50cf\u3002\u8fd9\u6709\u52a9\u4e8e\u63d0\u9ad8\u6eda\u52a8\u548c\u52a8\u753b\u7684\u6027\u80fd\uff08\u5229\u7528GPU\uff09\u3002</li> <li>JavaScript\u6267\u884c\uff1a\u5728HTML\u89e3\u6790\u8fc7\u7a0b\u4e2d\uff0c\u5982\u679c\u9047\u5230<code>&lt;script&gt;</code>\u6807\u7b7e\uff0cHTML\u89e3\u6790\u5668\u4f1a\u6682\u505c\uff08\u9664\u975e\u811a\u672c\u662f<code>async</code>\u6216<code>defer</code>\u7684\uff09\uff0c\u4e0b\u8f7d\u5e76\u6267\u884cJavaScript\u4ee3\u7801\u3002JavaScript\u53ef\u4ee5\u4fee\u6539DOM\u548cCSSOM\uff0c\u8fd9\u53ef\u80fd\u4f1a\u89e6\u53d1\u65b0\u7684\u5e03\u5c40\uff08reflow\uff09\u548c\u7ed8\u5236\uff08repaint\uff09\u3002</li> </ul> </li> <li> <p>\u540e\u7eed\u4ea4\u4e92\uff1a</p> <ul> <li>\u9875\u9762\u52a0\u8f7d\u5b8c\u6210\u540e\uff08<code>DOMContentLoaded</code>\u4e8b\u4ef6\u901a\u5e38\u5728DOM\u6811\u6784\u5efa\u5b8c\u6210\u65f6\u89e6\u53d1\uff0c<code>load</code>\u4e8b\u4ef6\u5728\u6240\u6709\u8d44\u6e90\u5982\u56fe\u7247\u52a0\u8f7d\u5b8c\u6bd5\u540e\u89e6\u53d1\uff09\uff0c\u7528\u6237\u53ef\u4ee5\u4e0e\u9875\u9762\u8fdb\u884c\u4ea4\u4e92\uff08\u70b9\u51fb\u3001\u6eda\u52a8\u3001\u8f93\u5165\u7b49\uff09\u3002</li> <li>JavaScript\u4f1a\u54cd\u5e94\u8fd9\u4e9b\u7528\u6237\u4e8b\u4ef6\uff0c\u53ef\u80fd\u4f1a\u53d1\u8d77\u65b0\u7684AJAX/Fetch\u8bf7\u6c42\u83b7\u53d6\u6570\u636e\u3001\u52a8\u6001\u4fee\u6539\u9875\u9762\u5185\u5bb9\uff0c\u518d\u6b21\u89e6\u53d1\u6e32\u67d3\u6d41\u7a0b\u7684\u67d0\u4e9b\u90e8\u5206\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AE%80%E8%BF%B0TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B%EF%BC%8C%E4%B8%BA%E4%BB%80%E4%B9%88%E6%8F%A1%E6%89%8B%E6%98%AF%E4%B8%89%E6%AC%A1%EF%BC%8C%E6%8C%A5%E6%89%8B%E6%98%AF%E5%9B%9B%E6%AC%A1/","title":"\u7b80\u8ff0TCP\u4e09\u6b21\u63e1\u624b\u56db\u6b21\u6325\u624b\uff0c\u4e3a\u4ec0\u4e48\u63e1\u624b\u662f\u4e09\u6b21\uff0c\u6325\u624b\u662f\u56db\u6b21","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AE%80%E8%BF%B0TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B%EF%BC%8C%E4%B8%BA%E4%BB%80%E4%B9%88%E6%8F%A1%E6%89%8B%E6%98%AF%E4%B8%89%E6%AC%A1%EF%BC%8C%E6%8C%A5%E6%89%8B%E6%98%AF%E5%9B%9B%E6%AC%A1/#tcp","title":"TCP\u4e09\u6b21\u63e1\u624b\uff08\u5efa\u7acb\u8fde\u63a5\uff09","text":"<p>\u4e09\u6b21\u63e1\u624b\u7684\u6838\u5fc3\u76ee\u6807\u662f\u540c\u6b65\u53cc\u65b9\u7684\u521d\u59cb\u5e8f\u5217\u53f7\uff08ISN\uff09\u5e76\u786e\u8ba4\u53cc\u65b9\u7684\u6536\u53d1\u80fd\u529b\u90fd\u6b63\u5e38\u3002\u53ef\u4ee5\u628a\u5b83\u60f3\u8c61\u6210\u4e00\u4e2a\u6253\u7535\u8bdd\u786e\u8ba4\u4fe1\u53f7\u7684\u8fc7\u7a0b\u3002</p> <ol> <li> <p>\u7b2c\u4e00\u6b21\u63e1\u624b (SYN)\uff1a</p> <ul> <li>\u5ba2\u6237\u7aef\u60f3\u548c\u670d\u52a1\u5668\u5efa\u7acb\u8fde\u63a5\uff0c\u5b83\u4f1a\u5411\u670d\u52a1\u5668\u53d1\u9001\u4e00\u4e2a\u7279\u6b8a\u7684TCP\u62a5\u6587\uff0c\u5176\u4e2d<code>SYN</code>\u6807\u5fd7\u4f4d\u88ab\u7f6e\u4e3a1\u3002</li> <li>\u8fd9\u4e2a\u62a5\u6587\u4e2d\u8fd8\u5305\u542b\u4e00\u4e2a\u5ba2\u6237\u7aef\u81ea\u5df1\u751f\u6210\u7684\u968f\u673a\u521d\u59cb\u5e8f\u5217\u53f7 <code>seq=x</code>\u3002</li> <li>\u6b64\u65f6\u5ba2\u6237\u7aef\u8fdb\u5165 <code>SYN_SENT</code> \u72b6\u6001\u3002</li> </ul> </li> <li> <p>\u7b2c\u4e8c\u6b21\u63e1\u624b (SYN+ACK)\uff1a</p> <ul> <li>\u670d\u52a1\u5668\u6536\u5230\u5ba2\u6237\u7aef\u7684<code>SYN</code>\u62a5\u6587\u540e\uff0c\u5982\u679c\u540c\u610f\u8fde\u63a5\uff0c\u4f1a\u56de\u590d\u4e00\u4e2a\u62a5\u6587\u3002</li> <li>\u8fd9\u4e2a\u62a5\u6587\u5305\u542b\u4e24\u4e2a\u91cd\u8981\u7684\u4fe1\u606f\uff1a<ol> <li>\u540c\u610f\u5efa\u7acb\u8fde\u63a5\uff0c<code>SYN</code>\u6807\u5fd7\u4f4d\u7f6e\u4e3a1\u3002</li> <li>\u786e\u8ba4\u6536\u5230\u4e86\u5ba2\u6237\u7aef\u7684\u62a5\u6587\uff0c<code>ACK</code>\u6807\u5fd7\u4f4d\u7f6e\u4e3a1\u3002</li> </ol> </li> <li>\u670d\u52a1\u5668\u4e5f\u4f1a\u751f\u6210\u81ea\u5df1\u7684\u521d\u59cb\u5e8f\u5217\u53f7 <code>seq=y</code>\uff0c\u5e76\u7528\u786e\u8ba4\u53f7 <code>ack=x+1</code> \u6765\u544a\u77e5\u5ba2\u6237\u7aef\u201c\u4f60\u7684\u7b2c\u4e00\u4e2a\u62a5\u6587\u6211\u6536\u5230\u4e86\u201d\u3002</li> <li>\u6b64\u65f6\u670d\u52a1\u5668\u8fdb\u5165 <code>SYN_RCVD</code> \u72b6\u6001\u3002</li> </ul> </li> <li> <p>\u7b2c\u4e09\u6b21\u63e1\u624b (ACK)\uff1a</p> <ul> <li>\u5ba2\u6237\u7aef\u6536\u5230\u670d\u52a1\u5668\u7684<code>SYN+ACK</code>\u62a5\u6587\u540e\uff0c\u5c31\u77e5\u9053\u670d\u52a1\u5668\u7684\u63a5\u6536\u548c\u53d1\u9001\u80fd\u529b\u90fd\u6b63\u5e38\u4e86\u3002</li> <li>\u5ba2\u6237\u7aef\u4f1a\u518d\u53d1\u9001\u4e00\u4e2a\u786e\u8ba4\u62a5\u6587\uff0c<code>ACK</code>\u6807\u5fd7\u4f4d\u7f6e\u4e3a1\uff0c\u5e76\u7528\u786e\u8ba4\u53f7 <code>ack=y+1</code> \u6765\u544a\u77e5\u670d\u52a1\u5668\u201c\u4f60\u7684\u62a5\u6587\u6211\u4e5f\u6536\u5230\u4e86\u201d\u3002</li> <li>\u8fd9\u4e2a\u62a5\u6587\u53d1\u9001\u5b8c\u6bd5\u540e\uff0c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u90fd\u8fdb\u5165 <code>ESTABLISHED</code> \u72b6\u6001\uff0c\u8fde\u63a5\u5efa\u7acb\u6210\u529f\uff0c\u53ef\u4ee5\u5f00\u59cb\u4f20\u8f93\u6570\u636e\u4e86\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AE%80%E8%BF%B0TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B%EF%BC%8C%E4%B8%BA%E4%BB%80%E4%B9%88%E6%8F%A1%E6%89%8B%E6%98%AF%E4%B8%89%E6%AC%A1%EF%BC%8C%E6%8C%A5%E6%89%8B%E6%98%AF%E5%9B%9B%E6%AC%A1/#tcp_1","title":"TCP\u56db\u6b21\u6325\u624b\uff08\u65ad\u5f00\u8fde\u63a5\uff09","text":"<p>\u56db\u6b21\u6325\u624b\u7684\u6838\u5fc3\u76ee\u6807\u662f\u786e\u4fdd\u53cc\u65b9\u90fd\u6ca1\u6709\u6570\u636e\u8981\u53d1\u9001\u4e86\uff0c\u7136\u540e\u5b89\u5168\u5730\u5173\u95ed\u8fde\u63a5\u3002</p> <ol> <li> <p>\u7b2c\u4e00\u6b21\u6325\u624b (FIN)\uff1a</p> <ul> <li>\u5ba2\u6237\u7aef\uff08\u6216\u670d\u52a1\u5668\uff0c\u4efb\u4f55\u4e00\u65b9\u90fd\u53ef\u4ee5\u5148\u53d1\u8d77\uff09\u51b3\u5b9a\u5173\u95ed\u8fde\u63a5\uff0c\u5b83\u4f1a\u5411\u5bf9\u65b9\u53d1\u9001\u4e00\u4e2a<code>FIN</code>\u6807\u5fd7\u4f4d\u7f6e\u4e3a1\u7684\u62a5\u6587\u3002</li> <li>\u6b64\u65f6\uff0c\u53d1\u8d77\u65b9\u8fdb\u5165 <code>FIN_WAIT_1</code> \u72b6\u6001\u3002</li> </ul> </li> <li> <p>\u7b2c\u4e8c\u6b21\u6325\u624b (ACK)\uff1a</p> <ul> <li>\u63a5\u6536\u65b9\u6536\u5230<code>FIN</code>\u62a5\u6587\u540e\uff0c\u77e5\u9053\u5bf9\u65b9\u5df2\u7ecf\u4e0d\u6253\u7b97\u518d\u53d1\u9001\u6570\u636e\u4e86\u3002</li> <li>\u5b83\u4f1a\u7acb\u5373\u56de\u590d\u4e00\u4e2a<code>ACK</code>\u786e\u8ba4\u62a5\u6587\u3002</li> <li>\u6b64\u65f6\uff0c\u63a5\u6536\u65b9\u8fdb\u5165 <code>CLOSE_WAIT</code> \u72b6\u6001\u3002\u53d1\u8d77\u65b9\u6536\u5230\u8fd9\u4e2aACK\u540e\uff0c\u8fdb\u5165 <code>FIN_WAIT_2</code> \u72b6\u6001\u3002\u8fd9\u65f6\u8fde\u63a5\u5904\u4e8e\u534a\u5173\u95ed\uff08Half-Close\uff09\u72b6\u6001\uff0c\u5373\u53d1\u8d77\u65b9\u4e0d\u80fd\u518d\u53d1\u9001\u6570\u636e\uff0c\u4f46\u63a5\u6536\u65b9\u5982\u679c\u8fd8\u6709\u6570\u636e\u6ca1\u53d1\u5b8c\uff0c\u4ecd\u7136\u53ef\u4ee5\u7ee7\u7eed\u53d1\u9001\u3002</li> </ul> </li> <li> <p>\u7b2c\u4e09\u6b21\u6325\u624b (FIN)\uff1a</p> <ul> <li>\u63a5\u6536\u65b9\u5728\u786e\u8ba4\u81ea\u5df1\u6240\u6709\u7684\u6570\u636e\u4e5f\u90fd\u53d1\u9001\u5b8c\u6bd5\u540e\uff0c\u4f1a\u5411\u53d1\u8d77\u65b9\u53d1\u9001\u4e00\u4e2a<code>FIN</code>\u62a5\u6587\u3002</li> <li>\u6b64\u65f6\uff0c\u63a5\u6536\u65b9\u8fdb\u5165 <code>LAST_ACK</code> \u72b6\u6001\u3002</li> </ul> </li> <li> <p>\u7b2c\u56db\u6b21\u6325\u624b (ACK)\uff1a</p> <ul> <li>\u53d1\u8d77\u65b9\u6536\u5230\u63a5\u6536\u65b9\u7684<code>FIN</code>\u62a5\u6587\u540e\uff0c\u56de\u590d\u6700\u540e\u4e00\u4e2a<code>ACK</code>\u786e\u8ba4\u62a5\u6587\u3002</li> <li>\u53d1\u8d77\u65b9\u5728\u53d1\u9001\u5b8c\u8fd9\u4e2a<code>ACK</code>\u540e\uff0c\u4e0d\u4f1a\u7acb\u5373\u5173\u95ed\uff0c\u800c\u662f\u4f1a\u8fdb\u5165 <code>TIME_WAIT</code> \u72b6\u6001\uff0c\u7b49\u5f852MSL\uff08\u6700\u5927\u62a5\u6587\u6bb5\u751f\u5b58\u65f6\u95f4\uff09\u540e\u624d\u6b63\u5f0f\u5173\u95ed\u3002\u8fd9\u662f\u4e3a\u4e86\u786e\u4fdd\u5bf9\u65b9\u80fd\u6536\u5230\u8fd9\u4e2a\u6700\u540e\u7684ACK\uff0c\u5e76\u9632\u6b62\u5df2\u5931\u6548\u7684\u8fde\u63a5\u8bf7\u6c42\u62a5\u6587\u6bb5\u51fa\u73b0\u5728\u672c\u8fde\u63a5\u4e2d\u3002</li> <li>\u63a5\u6536\u65b9\u4e00\u65e6\u6536\u5230\u8fd9\u4e2aACK\uff0c\u5c31\u7acb\u5373\u5173\u95ed\u8fde\u63a5\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AE%80%E8%BF%B0TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B%EF%BC%8C%E4%B8%BA%E4%BB%80%E4%B9%88%E6%8F%A1%E6%89%8B%E6%98%AF%E4%B8%89%E6%AC%A1%EF%BC%8C%E6%8C%A5%E6%89%8B%E6%98%AF%E5%9B%9B%E6%AC%A1/#_1","title":"\u4e3a\u4ec0\u4e48\u63e1\u624b\u662f\u4e09\u6b21\uff0c\u800c\u6325\u624b\u662f\u56db\u6b21\uff1f","text":"<p>\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u5173\u952e\u7684\u533a\u522b\uff0c\u6839\u6e90\u5728\u4e8e\u8fde\u63a5\u5efa\u7acb\u548c\u8fde\u63a5\u65ad\u5f00\u65f6\uff0c\u670d\u52a1\u5668\u7aef\u7684\u72b6\u6001\u548c\u9700\u6c42\u4e0d\u540c\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AE%80%E8%BF%B0TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B%EF%BC%8C%E4%B8%BA%E4%BB%80%E4%B9%88%E6%8F%A1%E6%89%8B%E6%98%AF%E4%B8%89%E6%AC%A1%EF%BC%8C%E6%8C%A5%E6%89%8B%E6%98%AF%E5%9B%9B%E6%AC%A1/#_2","title":"\u4e3a\u4ec0\u4e48\u63e1\u624b\u4e0d\u80fd\u662f\u4e24\u6b21\uff1f","text":"<p>\u6700\u4e3b\u8981\u7684\u539f\u56e0\u662f\u9632\u6b62\u5df2\u5931\u6548\u7684\u8fde\u63a5\u8bf7\u6c42\u62a5\u6587\u6bb5\u7a81\u7136\u53c8\u4f20\u9001\u5230\u4e86\u670d\u52a1\u5668\uff0c\u4ece\u800c\u4ea7\u751f\u9519\u8bef\u8fde\u63a5\u3002 *   \u60f3\u8c61\u4e00\u4e2a\u573a\u666f\uff1a\u5ba2\u6237\u7aef\u53d1\u9001\u7684\u7b2c\u4e00\u4e2a<code>SYN</code>\u56e0\u4e3a\u7f51\u7edc\u5ef6\u8fdf\uff0c\u6ede\u7559\u4e86\u5f88\u4e45\u3002\u5ba2\u6237\u7aef\u8d85\u65f6\u540e\uff0c\u53c8\u91cd\u53d1\u4e86\u4e00\u4e2a<code>SYN</code>\uff0c\u8fd9\u6b21\u6b63\u5e38\u5efa\u7acb\u4e86\u8fde\u63a5\uff0c\u901a\u4fe1\u5b8c\u5e76\u5173\u95ed\u4e86\u3002 *   \u8fd9\u65f6\uff0c\u90a3\u4e2a\u65e9\u5df2\u5931\u6548\u7684<code>SYN</code>\u62a5\u6587\u7ec8\u4e8e\u5230\u8fbe\u4e86\u670d\u52a1\u5668\u3002\u5982\u679c\u662f\u4e24\u6b21\u63e1\u624b\uff0c\u670d\u52a1\u5668\u6536\u5230<code>SYN</code>\u540e\u4f1a\u7acb\u5373\u5efa\u7acb\u8fde\u63a5\u5e76\u5206\u914d\u8d44\u6e90\uff0c\u7136\u540e\u7b49\u5f85\u5ba2\u6237\u7aef\u53d1\u9001\u6570\u636e\u3002\u4f46\u5ba2\u6237\u7aef\u6b64\u65f6\u6839\u672c\u4e0d\u77e5\u9053\u8fd9\u4e2a\u8fde\u63a5\u7684\u5b58\u5728\uff0c\u4e5f\u4e0d\u4f1a\u53d1\u9001\u4efb\u4f55\u6570\u636e\uff0c\u8fd9\u5c31\u4f1a\u5bfc\u81f4\u670d\u52a1\u5668\u767d\u767d\u6d6a\u8d39\u8d44\u6e90\u3002 *   \u800c\u4e09\u6b21\u63e1\u624b\u89e3\u51b3\u4e86\u8fd9\u4e2a\u95ee\u9898\u3002\u670d\u52a1\u5668\u6536\u5230\u90a3\u4e2a\u5931\u6548\u7684<code>SYN</code>\u540e\uff0c\u4f1a\u56de\u590d<code>SYN+ACK</code>\u3002\u4f46\u5ba2\u6237\u7aef\u7684\u5f53\u524d\u72b6\u6001\u4e0e\u8fd9\u4e2a<code>SYN+ACK</code>\u4e0d\u5339\u914d\uff0c\u4f1a\u76f4\u63a5\u5ffd\u7565\u6216\u53d1\u9001\u4e00\u4e2a<code>RST</code>\u62a5\u6587\uff0c\u670d\u52a1\u5668\u5c31\u77e5\u9053\u8fd9\u662f\u4e00\u4e2a\u65e0\u6548\u8bf7\u6c42\uff0c\u4e0d\u4f1a\u5efa\u7acb\u8fde\u63a5\u3002 *   \u603b\u7ed3\uff1a\u7b2c\u4e09\u6b21\u63e1\u624b\u662f\u4e3a\u4e86\u8ba9\u670d\u52a1\u5668\u786e\u8ba4\u201c\u5ba2\u6237\u7aef\u4e5f\u6536\u5230\u4e86\u6211\u7684\u540c\u6b65\u4fe1\u53f7\u201d\uff0c\u4ece\u800c\u786e\u4fdd\u8fd9\u662f\u4e00\u4e2a\u771f\u5b9e\u3001\u6709\u6548\u7684\u8fde\u63a5\u8bf7\u6c42\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AE%80%E8%BF%B0TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B%EF%BC%8C%E4%B8%BA%E4%BB%80%E4%B9%88%E6%8F%A1%E6%89%8B%E6%98%AF%E4%B8%89%E6%AC%A1%EF%BC%8C%E6%8C%A5%E6%89%8B%E6%98%AF%E5%9B%9B%E6%AC%A1/#_3","title":"\u4e3a\u4ec0\u4e48\u6325\u624b\u5fc5\u987b\u662f\u56db\u6b21\uff1f","text":"<p>\u6838\u5fc3\u539f\u56e0\u5728\u4e8eTCP\u7684\u534a\u5173\u95ed\uff08Half-Close\uff09\u7279\u6027\u3002 *   TCP\u662f\u5168\u53cc\u5de5\u901a\u4fe1\uff0c\u610f\u5473\u7740\u6570\u636e\u53ef\u4ee5\u5728\u4e24\u4e2a\u65b9\u5411\u4e0a\u72ec\u7acb\u4f20\u8f93\u3002 *   \u5f53\u4e00\u65b9\uff08\u6bd4\u5982\u5ba2\u6237\u7aef\uff09\u53d1\u9001<code>FIN</code>\u8bf4\u201c\u6211\u6ca1\u6570\u636e\u8981\u53d1\u4e86\u201d\uff0c\u8fd9\u4ec5\u4ec5\u4ee3\u8868\u5b83\u5355\u65b9\u9762\u5730\u5173\u95ed\u4e86\u53d1\u9001\u901a\u9053\u3002 *   \u6b64\u65f6\uff0c\u670d\u52a1\u5668\u53ef\u80fd\u8fd8\u6709\u6570\u636e\u6ca1\u6709\u53d1\u9001\u5b8c\u3002\u5b83\u4e0d\u80fd\u5728\u56de\u590d<code>ACK</code>\u7684\u540c\u65f6\uff0c\u4e5f\u7acb\u523b\u53d1\u9001\u81ea\u5df1\u7684<code>FIN</code>\u3002\u5b83\u5fc5\u987b\u5148\u7528<code>ACK</code>\uff08\u7b2c\u4e8c\u6b21\u6325\u624b\uff09\u544a\u8bc9\u5ba2\u6237\u7aef\u201c\u4f60\u7684\u5173\u95ed\u8bf7\u6c42\u6211\u6536\u5230\u4e86\u201d\uff0c\u7136\u540e\u7ee7\u7eed\u5904\u7406\u5e76\u53d1\u9001\u81ea\u5df1\u5269\u4f59\u7684\u6570\u636e\u3002 *   \u76f4\u5230\u670d\u52a1\u5668\u786e\u8ba4\u81ea\u5df1\u7684\u6240\u6709\u6570\u636e\u90fd\u53d1\u9001\u5b8c\u6bd5\u540e\uff0c\u5b83\u624d\u80fd\u53d1\u9001\u81ea\u5df1\u7684<code>FIN</code>\uff08\u7b2c\u4e09\u6b21\u6325\u624b\uff09\uff0c\u544a\u8bc9\u5ba2\u6237\u7aef\u201c\u6211\u8fd9\u8fb9\u4e5f\u51c6\u5907\u597d\u4e86\uff0c\u53ef\u4ee5\u5173\u95ed\u4e86\u201d\u3002 *   \u603b\u7ed3\uff1a\u6325\u624b\u8fc7\u7a0b\u4e2d\u7684<code>ACK</code>\u548c<code>FIN</code>\u662f\u5206\u5f00\u7684\uff0c\u56e0\u4e3a\u670d\u52a1\u5668\u5728\u6536\u5230\u5bf9\u65b9\u7684\u5173\u95ed\u8bf7\u6c42\u540e\uff0c\u53ef\u80fd\u8fd8\u9700\u8981\u53d1\u9001\u6570\u636e\uff0c\u6240\u4ee5\u4e0d\u80fd\u5c06\u786e\u8ba4\u548c\u5173\u95ed\u8bf7\u6c42\u5408\u5e76\u5728\u4e00\u4e2a\u62a5\u6587\u4e2d\u3002\u8fd9\u5c31\u6bd4\u63e1\u624b\u591a\u51fa\u4e86\u4e00\u6b21\u4ea4\u4e92\u3002</p> <p>\u7b80\u5355\u6765\u8bf4\uff1a *   \u63e1\u624b\u65f6\uff0c\u670d\u52a1\u5668\u7684<code>ACK</code>\u548c<code>SYN</code>\u53ef\u4ee5\u5408\u5e76\u4e3a\u4e00\u6b21\u53d1\u9001\uff0c\u56e0\u4e3a\u670d\u52a1\u5668\u5728\u786e\u8ba4\u5bf9\u65b9\u7684\u540c\u65f6\uff0c\u4e5f\u9700\u8981\u7acb\u523b\u540c\u6b65\u81ea\u5df1\u7684\u5e8f\u5217\u53f7\uff0c\u8fd9\u662f\u4e2a\u539f\u5b50\u6027\u7684\u9700\u6c42\u3002 *   \u6325\u624b\u65f6\uff0c\u670d\u52a1\u5668\u7684<code>ACK</code>\u548c<code>FIN</code>\u5fc5\u987b\u5206\u5f00\uff0c\u56e0\u4e3a\u786e\u8ba4\u5bf9\u65b9\u5173\u95ed\u548c\u81ea\u5df1\u51c6\u5907\u597d\u5173\u95ed\u662f\u4e24\u4e2a\u72ec\u7acb\u7684\u4e8b\u4ef6\uff0c\u4e2d\u95f4\u53ef\u80fd\u9694\u7740\u6570\u636e\u4f20\u8f93\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E7%9A%84%E5%88%86%E5%B1%82%E7%BB%93%E6%9E%84/","title":"\u7f51\u7edc\u7684\u5206\u5c42\u7ed3\u6784","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E7%9A%84%E5%88%86%E5%B1%82%E7%BB%93%E6%9E%84/#osi","title":"OSI\u4e03\u5c42\u6a21\u578b","text":"<p>\u5f00\u653e\u5f0f\u7cfb\u7edf\u4e92\u8fde\uff08OSI\uff09\u6a21\u578b\u662f\u7531\u56fd\u9645\u6807\u51c6\u5316\u7ec4\u7ec7\uff08ISO\uff09\u63d0\u51fa\u7684\u4e00\u4e2a\u6982\u5ff5\u6027\u6846\u67b6\uff0c\u65e8\u5728\u4e3a\u5404\u79cd\u8ba1\u7b97\u673a\u7f51\u7edc\u534f\u8bae\u7684\u5236\u5b9a\u63d0\u4f9b\u4e00\u4e2a\u5171\u540c\u7684\u57fa\u7840\u3002 \u8be5\u6a21\u578b\u5c06\u7f51\u7edc\u901a\u4fe1\u5212\u5206\u4e3a\u4e03\u4e2a\u72ec\u7acb\u7684\u5c42\u6b21\uff0c\u81ea\u4e0b\u800c\u4e0a\u5206\u522b\u662f\uff1a</p> \u5c42\u6b21 \u540d\u79f0 \u4e3b\u8981\u529f\u80fd \u7b2c7\u5c42 \u5e94\u7528\u5c42 (Application Layer) \u4e3a\u5e94\u7528\u7a0b\u5e8f\u63d0\u4f9b\u7f51\u7edc\u670d\u52a1\uff0c\u662f\u7528\u6237\u4e0e\u7f51\u7edc\u7684\u63a5\u53e3\u3002\u5e38\u89c1\u7684\u534f\u8bae\u6709HTTP\u3001HTTPS\u3001FTP\u3001SMTP\u7b49\u3002 \u7b2c6\u5c42 \u8868\u793a\u5c42 (Presentation Layer) \u8d1f\u8d23\u6570\u636e\u7684\u683c\u5f0f\u8f6c\u6362\u3001\u52a0\u5bc6\u548c\u89e3\u5bc6\u3001\u538b\u7f29\u548c\u89e3\u538b\u7f29\uff0c\u786e\u4fdd\u4e00\u4e2a\u7cfb\u7edf\u7684\u5e94\u7528\u5c42\u6240\u53d1\u9001\u7684\u4fe1\u606f\u53ef\u4ee5\u88ab\u53e6\u4e00\u4e2a\u7cfb\u7edf\u7684\u5e94\u7528\u5c42\u8bfb\u53d6\u3002 \u7b2c5\u5c42 \u4f1a\u8bdd\u5c42 (Session Layer) \u8d1f\u8d23\u5efa\u7acb\u3001\u7ba1\u7406\u548c\u7ec8\u6b62\u4e0d\u540c\u8bbe\u5907\u4e0a\u5e94\u7528\u7a0b\u5e8f\u4e4b\u95f4\u7684\u4f1a\u8bdd\u6216\u8fde\u63a5\u3002 \u7b2c4\u5c42 \u4f20\u8f93\u5c42 (Transport Layer) \u63d0\u4f9b\u7aef\u5230\u7aef\u7684\u53ef\u9760\u6216\u4e0d\u53ef\u9760\u7684\u6570\u636e\u4f20\u8f93\u670d\u52a1\uff0c\u8fdb\u884c\u6d41\u91cf\u63a7\u5236\u548c\u5dee\u9519\u6821\u9a8c\u3002\u4e3b\u8981\u534f\u8bae\u6709TCP\u548cUDP\u3002 \u7b2c3\u5c42 \u7f51\u7edc\u5c42 (Network Layer) \u8d1f\u8d23\u5c06\u6570\u636e\u5305\u4ece\u6e90\u5730\u5740\u8def\u7531\u5230\u76ee\u6807\u5730\u5740\uff0c\u5b9e\u73b0\u903b\u8f91\u5bfb\u5740\u548c\u8def\u5f84\u9009\u62e9\u3002\u6838\u5fc3\u534f\u8bae\u662fIP\u534f\u8bae\u3002 \u7b2c2\u5c42 \u6570\u636e\u94fe\u8def\u5c42 (Data Link Layer) \u5728\u7269\u7406\u94fe\u8def\u4e0a\u63d0\u4f9b\u53ef\u9760\u7684\u6570\u636e\u4f20\u8f93\uff0c\u5c06\u6bd4\u7279\u6d41\u7ec4\u7ec7\u6210\u5e27\uff0c\u5e76\u8fdb\u884c\u7269\u7406\u5bfb\u5740\uff08MAC\u5730\u5740\uff09\u548c\u9519\u8bef\u68c0\u6d4b\u3002 \u7b2c1\u5c42 \u7269\u7406\u5c42 (Physical Layer) \u8d1f\u8d23\u5728\u7269\u7406\u5a92\u4ecb\u4e0a\u4f20\u8f93\u539f\u59cb\u7684\u6bd4\u7279\u6d41\uff0c\u5b9a\u4e49\u4e86\u63a5\u53e3\u548c\u4f20\u8f93\u4ecb\u8d28\u7684\u7269\u7406\u7279\u6027\uff0c\u5982\u7535\u538b\u3001\u9488\u811a\u3001\u7ebf\u7f06\u7b49\u3002"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E7%9A%84%E5%88%86%E5%B1%82%E7%BB%93%E6%9E%84/#tcpip","title":"TCP/IP\u56db\u5c42\u6a21\u578b","text":"<p>TCP/IP\u6a21\u578b\u662f\u4e92\u8054\u7f51\u5b9e\u9645\u4f7f\u7528\u7684\u534f\u8bae\u65cf\u7684\u5206\u5c42\u6a21\u578b\uff0c\u7531\u7f8e\u56fd\u56fd\u9632\u90e8\u63d0\u51fa\uff0c\u76f8\u8f83\u4e8eOSI\u6a21\u578b\u66f4\u4e3a\u7b80\u6d01\u548c\u5b9e\u7528\u3002 \u5b83\u901a\u5e38\u88ab\u5212\u5206\u4e3a\u56db\u4e2a\u5c42\u6b21\uff1a</p> \u5c42\u6b21 \u540d\u79f0 \u5bf9\u5e94OSI\u6a21\u578b\u5c42\u6b21 \u4e3b\u8981\u529f\u80fd \u7b2c4\u5c42 \u5e94\u7528\u5c42 (Application Layer) \u5e94\u7528\u5c42\u3001\u8868\u793a\u5c42\u3001\u4f1a\u8bdd\u5c42 \u4e3a\u7528\u6237\u548c\u5e94\u7528\u7a0b\u5e8f\u63d0\u4f9b\u63a5\u53e3\uff0c\u5305\u542b\u4e86\u591a\u79cd\u7f51\u7edc\u5e94\u7528\u534f\u8bae\uff0c\u5982HTTP\u3001FTP\u3001DNS\u7b49\u3002 \u7b2c3\u5c42 \u4f20\u8f93\u5c42 (Transport Layer) \u4f20\u8f93\u5c42 \u8d1f\u8d23\u63d0\u4f9b\u7aef\u5230\u7aef\u7684\u901a\u4fe1\uff0c\u786e\u4fdd\u6570\u636e\u7684\u53ef\u9760\u4f20\u8f93\uff08TCP\uff09\u6216\u63d0\u4f9b\u5c3d\u529b\u800c\u4e3a\u7684\u4f20\u8f93\uff08UDP\uff09\u3002 \u7b2c2\u5c42 \u7f51\u7edc\u5c42 (Network Layer) / \u7f51\u9645\u5c42 (Internet Layer) \u7f51\u7edc\u5c42 \u8d1f\u8d23\u6570\u636e\u5305\u7684\u9009\u8def\u548c\u8f6c\u53d1\uff0c\u5c06\u6570\u636e\u5305\u4ece\u6e90\u4e3b\u673a\u53d1\u9001\u5230\u76ee\u6807\u4e3b\u673a\u3002 \u7b2c1\u5c42 \u7f51\u7edc\u63a5\u53e3\u5c42 (Network Interface Layer) \u6570\u636e\u94fe\u8def\u5c42\u3001\u7269\u7406\u5c42 \u8d1f\u8d23\u5728\u7269\u7406\u7f51\u7edc\u4e0a\u4f20\u8f93\u6570\u636e\uff0c\u5904\u7406\u4e0e\u7269\u7406\u5a92\u4ecb\u76f8\u5173\u7684\u7ec6\u8282\u3002"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E7%9A%84%E5%88%86%E5%B1%82%E7%BB%93%E6%9E%84/#_1","title":"\u4e94\u5c42\u53c2\u8003\u6a21\u578b","text":"<p>\u4e3a\u4e86\u4fbf\u4e8e\u5b66\u4e60\u548c\u7406\u89e3\uff0c\u5728\u6559\u5b66\u4e2d\u5e38\u5e38\u4f1a\u91c7\u7528\u4e00\u4e2a\u7efc\u5408\u4e86OSI\u548cTCP/IP\u4f18\u70b9\u7684\u4e94\u5c42\u53c2\u8003\u6a21\u578b\u3002\u8be5\u6a21\u578b\u5728TCP/IP\u56db\u5c42\u6a21\u578b\u7684\u57fa\u7840\u4e0a\uff0c\u5c06\u7f51\u7edc\u63a5\u53e3\u5c42\u91cd\u65b0\u5212\u5206\u4e3a\u6570\u636e\u94fe\u8def\u5c42\u548c\u7269\u7406\u5c42\uff0c\u5176\u7ed3\u6784\u5982\u4e0b\uff1a</p> <ol> <li>\u5e94\u7528\u5c42</li> <li>\u4f20\u8f93\u5c42</li> <li>\u7f51\u7edc\u5c42</li> <li>\u6570\u636e\u94fe\u8def\u5c42</li> <li>\u7269\u7406\u5c42</li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%A7%A3%E9%87%8A%20DNS%20%E7%9A%84%E4%BD%9C%E7%94%A8%E5%92%8C%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/","title":"\u89e3\u91ca DNS \u7684\u4f5c\u7528\u548c\u5de5\u4f5c\u539f\u7406","text":"<p>DNS\uff0c\u5168\u79f0 Domain Name System\uff08\u57df\u540d\u7cfb\u7edf\uff09\uff0c\u662f\u4e92\u8054\u7f51\u7684\u4e00\u9879\u6838\u5fc3\u670d\u52a1\u3002\u5b83\u7684\u4e3b\u8981\u4f5c\u7528\u662f\u5c06\u4eba\u7c7b\u53ef\u8bfb\u7684\u57df\u540d\uff08\u4f8b\u5982 <code>www.google.com</code>\uff09\u8f6c\u6362\uff08\u89e3\u6790\uff09\u4e3a\u673a\u5668\u53ef\u8bfb\u7684IP\u5730\u5740\uff08\u4f8b\u5982 <code>172.217.160.142</code>\uff09\u3002\u8fd9\u6837\uff0c\u7528\u6237\u5c31\u53ef\u4ee5\u901a\u8fc7\u65b9\u4fbf\u8bb0\u5fc6\u7684\u57df\u540d\u8bbf\u95ee\u4e92\u8054\u7f51\u4e0a\u7684\u5404\u79cd\u8d44\u6e90\uff0c\u800c\u65e0\u9700\u8bb0\u4f4f\u590d\u6742\u7684IP\u5730\u5740\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%A7%A3%E9%87%8A%20DNS%20%E7%9A%84%E4%BD%9C%E7%94%A8%E5%92%8C%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/#_1","title":"\u4f5c\u7528","text":"<ol> <li>\u57df\u540d\u5230IP\u5730\u5740\u7684\u89e3\u6790\uff1a\u8fd9\u662f\u6700\u6838\u5fc3\u7684\u529f\u80fd\uff0c\u4f7f\u5f97\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u57df\u540d\u8bbf\u95ee\u7f51\u7ad9\u548c\u670d\u52a1\u3002</li> <li>IP\u5730\u5740\u5230\u57df\u540d\u7684\u53cd\u5411\u89e3\u6790\uff1a\u867d\u7136\u4e0d\u5e38\u7528\uff0c\u4f46DNS\u4e5f\u652f\u6301\u901a\u8fc7IP\u5730\u5740\u67e5\u627e\u5bf9\u5e94\u7684\u57df\u540d\u3002</li> <li>\u8d1f\u8f7d\u5747\u8861\uff1aDNS\u53ef\u4ee5\u914d\u7f6e\u5c06\u4e00\u4e2a\u57df\u540d\u89e3\u6790\u5230\u591a\u4e2aIP\u5730\u5740\uff08\u5bf9\u5e94\u591a\u53f0\u670d\u52a1\u5668\uff09\uff0c\u6bcf\u6b21\u89e3\u6790\u65f6\u53ef\u4ee5\u6839\u636e\u4e00\u5b9a\u7684\u7b56\u7565\uff08\u5982\u8f6e\u8be2\u3001\u5730\u7406\u4f4d\u7f6e\u3001\u670d\u52a1\u5668\u8d1f\u8f7d\u7b49\uff09\u8fd4\u56de\u4e0d\u540c\u7684IP\u5730\u5740\uff0c\u4ece\u800c\u5c06\u8bbf\u95ee\u6d41\u91cf\u5206\u53d1\u5230\u4e0d\u540c\u7684\u670d\u52a1\u5668\u4e0a\uff0c\u5b9e\u73b0\u8d1f\u8f7d\u5747\u8861\u3002</li> <li>\u90ae\u4ef6\u8def\u7531\uff1a\u90ae\u4ef6\u4ea4\u6362\uff08MX\uff09\u8bb0\u5f55\u662fDNS\u7684\u4e00\u79cd\u8bb0\u5f55\u7c7b\u578b\uff0c\u5b83\u6307\u5b9a\u4e86\u8d1f\u8d23\u63a5\u6536\u53d1\u9001\u5230\u67d0\u4e2a\u57df\u540d\u7684\u7535\u5b50\u90ae\u4ef6\u7684\u90ae\u4ef6\u670d\u52a1\u5668\u3002</li> <li>\u670d\u52a1\u53d1\u73b0\uff1aDNS\u7684SRV\u8bb0\u5f55\u53ef\u4ee5\u7528\u6765\u53d1\u73b0\u7279\u5b9a\u670d\u52a1\uff08\u5982LDAP\u3001XMPP\uff09\u5728\u7f51\u7edc\u4e2d\u7684\u4f4d\u7f6e\u548c\u7aef\u53e3\u3002</li> <li>\u522b\u540d\u89e3\u6790\uff08CNAME\uff09\uff1a\u5141\u8bb8\u4e00\u4e2a\u57df\u540d\u4f5c\u4e3a\u53e6\u4e00\u4e2a\u57df\u540d\u7684\u522b\u540d\u3002</li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%A7%A3%E9%87%8A%20DNS%20%E7%9A%84%E4%BD%9C%E7%94%A8%E5%92%8C%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/#_2","title":"\u5206\u5c42\u3001\u5206\u5e03\u5f0f\u7684\u67e5\u8be2","text":"<ol> <li> <p>DNS\u7684\u5c42\u6b21\u7ed3\u6784\uff1a     DNS\u7cfb\u7edf\u91c7\u7528\u6811\u72b6\u7684\u5c42\u6b21\u7ed3\u6784\u3002</p> <ul> <li>\u6839\u57df\u540d\u670d\u52a1\u5668\uff08Root DNS Servers\uff09\uff1a\u4f4d\u4e8eDNS\u5c42\u6b21\u7ed3\u6784\u7684\u9876\u7aef\uff0c\u5168\u7403\u5171\u670913\u7ec4\uff08\u903b\u8f91\u4e0a\uff09\u6839\u670d\u52a1\u5668\uff0c\u5b83\u4eec\u5e76\u4e0d\u76f4\u63a5\u89e3\u6790\u57df\u540d\uff0c\u800c\u662f\u544a\u8bc9\u67e5\u8be2\u8005\u53bb\u54ea\u91cc\u67e5\u627e\u9876\u7ea7\u57df\uff08TLD\uff09\u670d\u52a1\u5668\u3002</li> <li>\u9876\u7ea7\u57dfDNS\u670d\u52a1\u5668\uff08Top-Level Domain, TLD Servers\uff09\uff1a\u8d1f\u8d23\u7ba1\u7406\u9876\u7ea7\u57df\u540d\uff0c\u5982 <code>.com</code>, <code>.org</code>, <code>.net</code>, <code>.cn</code>, <code>.uk</code> \u7b49\u3002\u5b83\u4eec\u4f1a\u6307\u5f15\u67e5\u8be2\u5230\u5bf9\u5e94\u7684\u6743\u5a01\u57df\u540d\u670d\u52a1\u5668\u3002</li> <li>\u6743\u5a01\u57df\u540d\u670d\u52a1\u5668\uff08Authoritative DNS Servers\uff09\uff1a\u771f\u6b63\u5b58\u50a8\u7279\u5b9a\u57df\u540d\uff08\u5982 <code>example.com</code>\uff09\u7684DNS\u8bb0\u5f55\uff08\u5982A\u8bb0\u5f55\u3001MX\u8bb0\u5f55\u3001CNAME\u8bb0\u5f55\u7b49\uff09\u7684\u670d\u52a1\u5668\u3002\u4e00\u4e2a\u57df\u540d\u53ef\u4ee5\u6709\u591a\u4e2a\u6743\u5a01\u670d\u52a1\u5668\u4ee5\u63d0\u9ad8\u53ef\u7528\u6027\u3002</li> </ul> </li> <li> <p>DNS\u67e5\u8be2\u7c7b\u578b\uff1a</p> <ul> <li>\u9012\u5f52\u67e5\u8be2\uff08Recursive Query\uff09\uff1a\u901a\u5e38\u53d1\u751f\u5728\u5ba2\u6237\u7aef\uff08\u5982\u7528\u6237\u7684PC\u6216\u624b\u673a\uff09\u4e0e\u672c\u5730DNS\u670d\u52a1\u5668\uff08LDNS\uff0c\u901a\u5e38\u7531ISP\u63d0\u4f9b\u6216\u7528\u6237\u624b\u52a8\u914d\u7f6e\uff0c\u5982Google Public DNS <code>8.8.8.8</code>\uff09\u4e4b\u95f4\u3002\u5ba2\u6237\u7aef\u5411LDNS\u53d1\u8d77\u8bf7\u6c42\uff0cLDNS\u6709\u8d23\u4efb\u8fd4\u56de\u6700\u7ec8\u7684IP\u5730\u5740\u6216\u4e00\u4e2a\u9519\u8bef\u4fe1\u606f\u3002LDNS\u4f1a\u4ee3\u66ff\u5ba2\u6237\u7aef\u53bb\u9010\u7ea7\u67e5\u8be2\u3002</li> <li>\u8fed\u4ee3\u67e5\u8be2\uff08Iterative Query\uff09\uff1a\u901a\u5e38\u53d1\u751f\u5728LDNS\u4e0e\u5176\u4ed6DNS\u670d\u52a1\u5668\uff08\u6839\u3001TLD\u3001\u6743\u5a01\u670d\u52a1\u5668\uff09\u4e4b\u95f4\u3002\u5f53LDNS\u5411\u4e00\u4e2aDNS\u670d\u52a1\u5668\u67e5\u8be2\u65f6\uff0c\u5982\u679c\u8be5\u670d\u52a1\u5668\u6ca1\u6709\u6700\u7ec8\u7b54\u6848\uff0c\u5b83\u4f1a\u8fd4\u56de\u4e00\u4e2a\u6307\u5411\u4e0b\u4e00\u7ea7\u66f4\u53ef\u80fd\u77e5\u9053\u7b54\u6848\u7684DNS\u670d\u52a1\u5668\u7684\u5730\u5740\uff08\u6216\u8005\u8bf4\uff0c\u5b83\u4f1a\u544a\u8bc9LDNS\uff1a\u201c\u6211\u4e0d\u77e5\u9053\uff0c\u4f46\u4f60\u53ef\u4ee5\u53bb\u95ee\u5b83\u201d\uff09\u3002LDNS\u4f1a\u4e0d\u65ad\u5411\u8fd9\u4e9b\u88ab\u63a8\u8350\u7684\u670d\u52a1\u5668\u53d1\u8d77\u65b0\u7684\u67e5\u8be2\uff0c\u76f4\u5230\u627e\u5230\u6743\u5a01\u670d\u52a1\u5668\u5e76\u83b7\u5f97\u6700\u7ec8\u7ed3\u679c\u3002</li> </ul> </li> <li> <p>DNS\u67e5\u8be2\u8fc7\u7a0b\uff08\u4ee5\u7528\u6237\u5728\u6d4f\u89c8\u5668\u8f93\u5165 <code>www.example.com</code> \u4e3a\u4f8b\uff09\uff1a</p> <p>a.  \u7528\u6237\u4e3b\u673a\u68c0\u67e5\u672c\u5730\u7f13\u5b58\uff1a     *   \u6d4f\u89c8\u5668DNS\u7f13\u5b58\uff1a\u6d4f\u89c8\u5668\u9996\u5148\u68c0\u67e5\u81ea\u8eab\u7684DNS\u7f13\u5b58\u4e2d\u662f\u5426\u6709 <code>www.example.com</code> \u7684IP\u5730\u5740\u3002     *   \u64cd\u4f5c\u7cfb\u7edfDNS\u7f13\u5b58\uff1a\u5982\u679c\u6d4f\u89c8\u5668\u7f13\u5b58\u6ca1\u6709\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u68c0\u67e5\u5176DNS\u7f13\u5b58\uff08\u5982Windows\u7684DNS Client\u670d\u52a1\u7f13\u5b58\uff0c\u6216Linux\u7684nscd/systemd-resolved\u7f13\u5b58\uff09\u4ee5\u53ca\u672c\u5730\u7684 <code>hosts</code> \u6587\u4ef6\u3002</p> <p>b.  \u5411\u672c\u5730DNS\u670d\u52a1\u5668\u53d1\u8d77\u9012\u5f52\u67e5\u8be2\uff1a     *   \u5982\u679c\u672c\u5730\u7f13\u5b58\u90fd\u6ca1\u6709\u627e\u5230\uff0c\u7528\u6237\u4e3b\u673a\u4f1a\u5c06DNS\u67e5\u8be2\u8bf7\u6c42\u53d1\u9001\u7ed9\u914d\u7f6e\u7684\u672c\u5730DNS\u670d\u52a1\u5668\uff08LDNS\uff09\u3002</p> <p>c.  \u672c\u5730DNS\u670d\u52a1\u5668\u6267\u884c\u8fed\u4ee3\u67e5\u8be2\uff08\u5982\u679c\u5176\u7f13\u5b58\u4e2d\u4e5f\u6ca1\u6709\uff09\uff1a     i.  LDNS\u5411\u6839\u57df\u540d\u670d\u52a1\u5668\u53d1\u8d77\u67e5\u8be2\uff0c\u95ee\uff1a\u201c<code>www.example.com</code> \u7684IP\u5730\u5740\u662f\u4ec0\u4e48\uff1f\u201d     ii. \u6839\u670d\u52a1\u5668\u56de\u590d\uff1a\u201c\u6211\u4e0d\u77e5\u9053\uff0c\u4f46\u6211\u77e5\u9053 <code>.com</code> TLD\u670d\u52a1\u5668\u7684\u5730\u5740\uff0c\u4f60\u53bb\u95ee\u5b83\u3002\u201d \uff08\u8fd4\u56de <code>.com</code> TLD\u670d\u52a1\u5668\u7684IP\u5217\u8868\uff09     iii.LDNS\u5411\u5176\u4e2d\u4e00\u4e2a <code>.com</code> TLD\u670d\u52a1\u5668\u53d1\u8d77\u67e5\u8be2\uff0c\u95ee\uff1a\u201c<code>www.example.com</code> \u7684IP\u5730\u5740\u662f\u4ec0\u4e48\uff1f\u201d     iv. <code>.com</code> TLD\u670d\u52a1\u5668\u56de\u590d\uff1a\u201c\u6211\u4e0d\u77e5\u9053\uff0c\u4f46\u6211\u77e5\u9053 <code>example.com</code> \u8fd9\u4e2a\u57df\u540d\u7684\u6743\u5a01DNS\u670d\u52a1\u5668\u7684\u5730\u5740\uff0c\u4f60\u53bb\u95ee\u5b83\u3002\u201d \uff08\u8fd4\u56de <code>example.com</code> \u6743\u5a01\u670d\u52a1\u5668\u7684IP\u5217\u8868\uff09     v.  LDNS\u5411\u5176\u4e2d\u4e00\u4e2a <code>example.com</code> \u7684\u6743\u5a01DNS\u670d\u52a1\u5668\u53d1\u8d77\u67e5\u8be2\uff0c\u95ee\uff1a\u201c<code>www.example.com</code> \u7684IP\u5730\u5740\u662f\u4ec0\u4e48\uff1f\u201d     vi. <code>example.com</code> \u7684\u6743\u5a01DNS\u670d\u52a1\u5668\u5728\u5176\u533a\u57df\u6587\u4ef6\u4e2d\u67e5\u627e <code>www.example.com</code> \u7684A\u8bb0\u5f55\uff08\u6216\u5176\u4ed6\u76f8\u5173\u8bb0\u5f55\uff09\uff0c\u627e\u5230\u5bf9\u5e94\u7684IP\u5730\u5740\u3002     vii.\u6743\u5a01DNS\u670d\u52a1\u5668\u5c06\u8fd9\u4e2aIP\u5730\u5740\u56de\u590d\u7ed9LDNS\u3002</p> <p>d.  \u672c\u5730DNS\u670d\u52a1\u5668\u54cd\u5e94\u5ba2\u6237\u7aef\u5e76\u5c06\u7ed3\u679c\u7f13\u5b58\uff1a     *   LDNS\u6536\u5230\u6743\u5a01\u670d\u52a1\u5668\u8fd4\u56de\u7684IP\u5730\u5740\u540e\uff0c\u5c06\u8fd9\u4e2a\u89e3\u6790\u7ed3\u679c\u5b58\u50a8\u5728\u81ea\u5df1\u7684\u7f13\u5b58\u4e2d\uff08\u8bbe\u7f6e\u4e00\u4e2aTTL\uff0cTime-To-Live\uff0c\u5373\u7f13\u5b58\u6709\u6548\u671f\uff09\u3002     *   LDNS\u5c06IP\u5730\u5740\u8fd4\u56de\u7ed9\u7528\u6237\u7684\u64cd\u4f5c\u7cfb\u7edf\u3002</p> <p>e.  \u64cd\u4f5c\u7cfb\u7edf\u5c06\u7ed3\u679c\u8fd4\u56de\u7ed9\u5e94\u7528\u7a0b\u5e8f\uff08\u6d4f\u89c8\u5668\uff09\uff1a     *   \u64cd\u4f5c\u7cfb\u7edf\u63a5\u6536\u5230IP\u5730\u5740\u540e\uff0c\u4e5f\u53ef\u80fd\u5c06\u5176\u7f13\u5b58\uff0c\u5e76\u6700\u7ec8\u5c06IP\u5730\u5740\u4f20\u9012\u7ed9\u53d1\u8d77\u8bf7\u6c42\u7684\u6d4f\u89c8\u5668\u3002</p> <p>f.  \u6d4f\u89c8\u5668\u4f7f\u7528IP\u5730\u5740\u53d1\u8d77HTTP(S)\u8fde\u63a5\uff1a     *   \u6d4f\u89c8\u5668\u5f97\u5230IP\u5730\u5740\u540e\uff0c\u5c31\u53ef\u4ee5\u5411\u8be5IP\u5730\u5740\u5bf9\u5e94\u7684\u670d\u52a1\u5668\u53d1\u8d77TCP\u8fde\u63a5\uff0c\u8fdb\u800c\u53d1\u9001HTTP(S)\u8bf7\u6c42\u3002</p> </li> <li> <p>DNS\u8bb0\u5f55\u7c7b\u578b\uff1a     DNS\u4e0d\u4ec5\u4ec5\u5b58\u50a8IP\u5730\u5740\uff0c\u8fd8\u5b58\u50a8\u591a\u79cd\u7c7b\u578b\u7684\u8bb0\u5f55\uff0c\u5e38\u89c1\u7684\u6709\uff1a</p> <ul> <li>A\u8bb0\u5f55 (Address Record)\uff1a\u5c06\u57df\u540d\u6307\u5411\u4e00\u4e2aIPv4\u5730\u5740\u3002</li> <li>AAAA\u8bb0\u5f55 (IPv6 Address Record)\uff1a\u5c06\u57df\u540d\u6307\u5411\u4e00\u4e2aIPv6\u5730\u5740\u3002</li> <li>CNAME\u8bb0\u5f55 (Canonical Name Record)\uff1a\u5c06\u4e00\u4e2a\u57df\u540d\u6307\u5411\u53e6\u4e00\u4e2a\u57df\u540d\uff08\u522b\u540d\uff09\u3002\u6700\u7ec8\u89e3\u6790\u4f1a\u8ffd\u8e2a\u5230\u76ee\u6807\u57df\u540d\u7684A\u6216AAAA\u8bb0\u5f55\u3002</li> <li>MX\u8bb0\u5f55 (Mail Exchange Record)\uff1a\u6307\u5b9a\u90ae\u4ef6\u670d\u52a1\u5668\u7684\u5730\u5740\uff0c\u7528\u4e8e\u90ae\u4ef6\u8def\u7531\u3002</li> <li>NS\u8bb0\u5f55 (Name Server Record)\uff1a\u6307\u5b9a\u8d1f\u8d23\u67d0\u4e2a\u57df\u7684\u6743\u5a01DNS\u670d\u52a1\u5668\u3002</li> <li>PTR\u8bb0\u5f55 (Pointer Record)\uff1a\u7528\u4e8e\u53cd\u5411DNS\u67e5\u8be2\uff0c\u5c06IP\u5730\u5740\u6620\u5c04\u5230\u57df\u540d\u3002</li> <li>TXT\u8bb0\u5f55 (Text Record)\uff1a\u5141\u8bb8\u7ba1\u7406\u5458\u4e3a\u57df\u540d\u5b58\u50a8\u4efb\u610f\u6587\u672c\u4fe1\u606f\uff0c\u5e38\u7528\u4e8eSPF\uff08Sender Policy Framework\uff09\u8bb0\u5f55\u3001DKIM\uff08DomainKeys Identified Mail\uff09\u7b7e\u540d\u7b49\u3002</li> <li>SRV\u8bb0\u5f55 (Service Record)\uff1a\u6307\u5b9a\u63d0\u4f9b\u7279\u5b9a\u670d\u52a1\u7684\u4e3b\u673a\u540d\u548c\u7aef\u53e3\u53f7\u3002</li> </ul> </li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%A7%A3%E9%87%8A%20DNS%20%E7%9A%84%E4%BD%9C%E7%94%A8%E5%92%8C%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/#httpdns","title":"HTTPDNS","text":"<p>HTTPDNS \u662f\u4e00\u79cd\u4f7f\u7528 HTTP \u534f\u8bae\u8fdb\u884c\u57df\u540d\u89e3\u6790\u7684\u670d\u52a1\u3002 \u5b83\u4e3b\u8981\u662f\u4e3a\u4e86\u89e3\u51b3\u4f20\u7edf DNS \u89e3\u6790\u4e2d\u5b58\u5728\u7684\u4e00\u4e9b\u95ee\u9898\uff0c\u7279\u522b\u662f\u57df\u540d\u52ab\u6301\u548c\u89e3\u6790\u5ef6\u8fdf\u3002</p> <p>HTTPDNS \u7684\u5de5\u4f5c\u539f\u7406\u4e0e\u4f20\u7edf DNS \u6709\u6240\u4e0d\u540c\uff1a</p> <ol> <li>\u5ba2\u6237\u7aef\u53d1\u8d77\u8bf7\u6c42\uff1a\u79fb\u52a8\u5e94\u7528\u6216\u5ba2\u6237\u7aef\u8f6f\u4ef6\u4f1a\u901a\u8fc7\u96c6\u6210\u7684 HTTPDNS SDK\uff0c\u76f4\u63a5\u5411 HTTPDNS \u670d\u52a1\u5668\u53d1\u8d77\u57df\u540d\u89e3\u6790\u7684 HTTP \u8bf7\u6c42\u3002</li> <li>\u7ed5\u8fc7\u672c\u5730 DNS\uff1a\u8fd9\u4e2a\u8bf7\u6c42\u7ed5\u8fc7\u4e86\u8fd0\u8425\u5546\u7684\u672c\u5730 DNS \u670d\u52a1\u5668\uff0c\u4ece\u800c\u907f\u514d\u4e86\u57df\u540d\u88ab\u52ab\u6301\u7684\u98ce\u9669\u3002</li> <li>\u7cbe\u51c6\u8c03\u5ea6\uff1aHTTPDNS \u670d\u52a1\u5668\u53ef\u4ee5\u6839\u636e\u5ba2\u6237\u7aef\u7684 IP \u5730\u5740\u548c\u7f51\u7edc\u73af\u5883\uff0c\u8fd4\u56de\u4e00\u4e2a\u6700\u4f18\u7684\u670d\u52a1\u5668 IP \u5730\u5740\uff0c\u5b9e\u73b0\u7cbe\u51c6\u7684\u6d41\u91cf\u8c03\u5ea6\u3002</li> <li>\u8fd4\u56de\u7ed3\u679c\uff1aHTTPDNS \u670d\u52a1\u5668\u5c06\u89e3\u6790\u5f97\u5230\u7684 IP \u5730\u5740\u5217\u8868\u901a\u8fc7 HTTP \u54cd\u5e94\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u3002</li> <li>\u5ba2\u6237\u7aef\u8fde\u63a5\uff1a\u5ba2\u6237\u7aef\u6536\u5230 IP \u5730\u5740\u540e\uff0c\u76f4\u63a5\u5411\u8be5 IP \u5730\u5740\u53d1\u8d77\u670d\u52a1\u8bf7\u6c42\u3002</li> </ol>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%A7%A3%E9%87%8A%20DNS%20%E7%9A%84%E4%BD%9C%E7%94%A8%E5%92%8C%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/#_3","title":"\u4f18\u52bf","text":"<ul> <li>\u9632\u6b62\u57df\u540d\u52ab\u6301\uff1a\u901a\u8fc7\u7ed5\u8fc7\u8fd0\u8425\u5546\u7684\u672c\u5730 DNS\uff0c\u6709\u6548\u907f\u514d\u4e86\u56e0\u672c\u5730 DNS \u6545\u969c\u6216\u6076\u610f\u653b\u51fb\u5bfc\u81f4\u7684\u57df\u540d\u52ab\u6301\u95ee\u9898\u3002</li> <li>\u7cbe\u51c6\u8c03\u5ea6\uff1a\u80fd\u591f\u6839\u636e\u7528\u6237\u7684\u5730\u7406\u4f4d\u7f6e\u548c\u7f51\u7edc\u72b6\u51b5\uff0c\u63d0\u4f9b\u66f4\u7cbe\u786e\u7684\u89e3\u6790\u7ed3\u679c\uff0c\u5c06\u7528\u6237\u5bfc\u5411\u6700\u8fd1\u3001\u6700\u5feb\u7684\u670d\u52a1\u5668\u8282\u70b9\u3002</li> <li>\u5b9e\u65f6\u751f\u6548\uff1a\u7531\u4e8e\u7ed5\u8fc7\u4e86\u5404\u7ea7 DNS \u670d\u52a1\u5668\u7684\u7f13\u5b58\uff0c\u57df\u540d\u89e3\u6790\u8bb0\u5f55\u7684\u4fee\u6539\u53ef\u4ee5\u66f4\u5feb\u5730\u5728\u5ba2\u6237\u7aef\u751f\u6548\u3002</li> <li>\u63d0\u5347\u89e3\u6790\u901f\u5ea6\uff1a\u901a\u8fc7\u4f18\u5316\u7684\u7f51\u7edc\u8def\u5f84\u548c\u534f\u8bae\uff0c\u53ef\u4ee5\u964d\u4f4e\u57df\u540d\u89e3\u6790\u7684\u5ef6\u8fdf\u3002</li> </ul>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%B8%B8%E7%94%A8%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D/","title":"\u5e38\u7528\u7684\u8bbe\u8ba1\u6a21\u5f0f\u4ecb\u7ecd","text":""},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%B8%B8%E7%94%A8%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D/#creational-patterns","title":"\u521b\u5efa\u578b\u6a21\u5f0f (Creational Patterns)","text":"<p>\u6b64\u7c7b\u6a21\u5f0f\u4e3b\u8981\u5173\u6ce8\u5bf9\u8c61\u7684\u521b\u5efa\u8fc7\u7a0b\uff0c\u65e8\u5728\u5c06\u5bf9\u8c61\u7684\u521b\u5efa\u4e0e\u4f7f\u7528\u89e3\u8026\uff0c\u63d0\u5347\u7cfb\u7edf\u7684\u7075\u6d3b\u6027\u548c\u53ef\u6269\u5c55\u6027\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%B8%B8%E7%94%A8%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D/#1-singleton-pattern","title":"1. \u5355\u4f8b\u6a21\u5f0f (Singleton Pattern)","text":"<p>\u6838\u5fc3\u601d\u60f3\uff1a \u786e\u4fdd\u4e00\u4e2a\u7c7b\u5728\u6574\u4e2a\u7cfb\u7edf\u4e2d\u53ea\u6709\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u5e76\u63d0\u4f9b\u4e00\u4e2a\u5168\u5c40\u8bbf\u95ee\u70b9\u6765\u83b7\u53d6\u8fd9\u4e2a\u5b9e\u4f8b\u3002</p> <p>\u4f7f\u7528\u573a\u666f\uff1a *   \u8d44\u6e90\u5171\u4eab\u4e0e\u63a7\u5236\uff1a \u5f53\u591a\u4e2a\u6a21\u5757\u9700\u8981\u5171\u4eab\u540c\u4e00\u4e2a\u8d44\u6e90\uff0c\u4e14\u9700\u8981\u96c6\u4e2d\u63a7\u5236\u65f6\uff0c\u4f8b\u5982\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u3001\u7ebf\u7a0b\u6c60\u7b49\u3002 *   \u5168\u5c40\u914d\u7f6e\u4fe1\u606f\uff1a \u5e94\u7528\u7a0b\u5e8f\u7684\u914d\u7f6e\u6587\u4ef6\u901a\u5e38\u662f\u552f\u4e00\u7684\uff0c\u9002\u5408\u7528\u5355\u4f8b\u6a21\u5f0f\u6765\u8bfb\u53d6\u548c\u7ba1\u7406\u3002 *   \u9891\u7e41\u521b\u5efa\u4e0e\u9500\u6bc1\u7684\u5bf9\u8c61\uff1a \u5bf9\u4e8e\u90a3\u4e9b\u521b\u5efa\u548c\u9500\u6bc1\u5f00\u9500\u5927\u7684\u5bf9\u8c61\uff0c\u4f7f\u7528\u5355\u4f8b\u6a21\u5f0f\u53ef\u4ee5\u663e\u8457\u63d0\u5347\u6027\u80fd\uff0c\u4f8b\u5982\u65e5\u5fd7\u8bb0\u5f55\u5668\u3002 *   \u64cd\u4f5c\u7cfb\u7edf\u7ec4\u4ef6\uff1a \u4f8b\u5982Windows\u7684\u4efb\u52a1\u7ba1\u7406\u5668\u548c\u56de\u6536\u7ad9\uff0c\u90fd\u662f\u5178\u578b\u7684\u5355\u4f8b\u5e94\u7528\uff0c\u786e\u4fdd\u5728\u7cfb\u7edf\u4e2d\u53ea\u5b58\u5728\u4e00\u4e2a\u5b9e\u4f8b\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%B8%B8%E7%94%A8%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D/#2-factory-method-pattern","title":"2. \u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f (Factory Method Pattern)","text":"<p>\u6838\u5fc3\u601d\u60f3\uff1a \u5b9a\u4e49\u4e00\u4e2a\u7528\u4e8e\u521b\u5efa\u5bf9\u8c61\u7684\u63a5\u53e3\uff0c\u4f46\u5c06\u5177\u4f53\u7684\u5b9e\u4f8b\u5316\u8fc7\u7a0b\u5ef6\u8fdf\u5230\u5b50\u7c7b\u4e2d\u8fdb\u884c\u3002</p> <p>\u4f7f\u7528\u573a\u666f\uff1a *   \u4e0d\u786e\u5b9a\u5177\u4f53\u5bf9\u8c61\u7c7b\u578b\uff1a \u5f53\u4e00\u4e2a\u7c7b\u65e0\u6cd5\u9884\u77e5\u9700\u8981\u521b\u5efa\u7684\u5bf9\u8c61\u7684\u5177\u4f53\u7c7b\u522b\u65f6\uff0c\u53ef\u4ee5\u5c06\u521b\u5efa\u4efb\u52a1\u4ea4\u7ed9\u5b50\u7c7b\u5b8c\u6210\u3002 *   \u9700\u8981\u89e3\u8026\u521b\u5efa\u8005\u4e0e\u4ea7\u54c1\uff1a \u5e0c\u671b\u5c06\u5bf9\u8c61\u7684\u521b\u5efa\u548c\u4f7f\u7528\u5206\u79bb\u5f00\uff0c\u964d\u4f4e\u5b83\u4eec\u4e4b\u95f4\u7684\u8026\u5408\u5ea6\u3002 *   \u6269\u5c55\u6027\u8981\u6c42\u9ad8\u7684\u573a\u666f\uff1a \u5f53\u9700\u8981\u589e\u52a0\u65b0\u7684\u4ea7\u54c1\u65f6\uff0c\u53ea\u9700\u6dfb\u52a0\u5bf9\u5e94\u7684\u5de5\u5382\u5b50\u7c7b\u5373\u53ef\uff0c\u65e0\u9700\u4fee\u6539\u73b0\u6709\u4ee3\u7801\uff0c\u7b26\u5408\u201c\u5f00\u95ed\u539f\u5219\u201d\u3002 *   \u8de8\u5e73\u53f0UI\u5e93\uff1a \u4f8b\u5982\uff0c\u4e00\u4e2aUI\u6846\u67b6\u53ef\u4ee5\u5b9a\u4e49\u4e00\u4e2a\u521b\u5efa\u6309\u94ae\u7684\u5de5\u5382\u65b9\u6cd5\uff0c\u5177\u4f53\u7684Windows\u6309\u94ae\u548cHTML\u6309\u94ae\u7531\u4e0d\u540c\u7684\u5b50\u7c7b\u5de5\u5382\u6765\u521b\u5efa\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%B8%B8%E7%94%A8%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D/#3-builder-pattern","title":"3. \u5efa\u9020\u8005\u6a21\u5f0f (Builder Pattern)","text":"<p>\u6838\u5fc3\u601d\u60f3\uff1a \u5c06\u4e00\u4e2a\u590d\u6742\u5bf9\u8c61\u7684\u6784\u5efa\u8fc7\u7a0b\u4e0e\u5176\u8868\u793a\u5206\u79bb\uff0c\u4f7f\u5f97\u540c\u6837\u7684\u6784\u5efa\u8fc7\u7a0b\u53ef\u4ee5\u521b\u5efa\u51fa\u4e0d\u540c\u7684\u8868\u793a\u3002</p> <p>\u4f7f\u7528\u573a\u666f\uff1a *   \u590d\u6742\u5bf9\u8c61\u7684\u6784\u5efa\uff1a \u5f53\u4e00\u4e2a\u5bf9\u8c61\u7684\u521b\u5efa\u8fc7\u7a0b\u5305\u542b\u591a\u4e2a\u6b65\u9aa4\u6216\u9700\u8981\u8bbe\u7f6e\u5927\u91cf\u53c2\u6570\u65f6\uff0c\u4f7f\u7528\u5efa\u9020\u8005\u6a21\u5f0f\u53ef\u4ee5\u4f7f\u4ee3\u7801\u66f4\u6e05\u6670\u3002 *   \u5c5e\u6027\u95f4\u5b58\u5728\u4f9d\u8d56\u6216\u987a\u5e8f\u8981\u6c42\uff1a \u5982\u679c\u5bf9\u8c61\u7684\u67d0\u4e9b\u5c5e\u6027\u9700\u8981\u6309\u7167\u7279\u5b9a\u7684\u987a\u5e8f\u6765\u8bbe\u7f6e\uff0c\u6216\u8005\u5c5e\u6027\u4e4b\u95f4\u5b58\u5728\u4f9d\u8d56\u5173\u7cfb\uff0c\u5efa\u9020\u8005\u6a21\u5f0f\u53ef\u4ee5\u5f88\u597d\u5730\u63a7\u5236\u6784\u5efa\u8fc7\u7a0b\u3002 *   \u521b\u5efa\u4e0d\u540c\u8868\u793a\u7684\u5bf9\u8c61\uff1a \u5f53\u9700\u8981\u4f7f\u7528\u76f8\u540c\u7684\u6784\u5efa\u6d41\u7a0b\u521b\u5efa\u51fa\u4e0d\u540c\u914d\u7f6e\u6216\u5f62\u6001\u7684\u5bf9\u8c61\u65f6\u3002\u4f8b\u5982\uff0c\u80af\u5fb7\u57fa\u5957\u9910\u7684\u6784\u5efa\uff0c\u670d\u52a1\u5458\uff08\u6307\u6325\u8005\uff09\u6309\u7167\u56fa\u5b9a\u7684\u6d41\u7a0b\uff08\u6784\u5efa\u8fc7\u7a0b\uff09\u7ec4\u5408\u4e0d\u540c\u7684\u6c49\u5821\u3001\u996e\u6599\uff08\u5177\u4f53\u7ec4\u4ef6\uff09\uff0c\u6700\u7ec8\u751f\u6210\u4e0d\u540c\u7684\u5957\u9910\uff08\u4ea7\u54c1\uff09\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%B8%B8%E7%94%A8%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D/#structural-patterns","title":"\u7ed3\u6784\u578b\u6a21\u5f0f (Structural Patterns)","text":"<p>\u8fd9\u7c7b\u6a21\u5f0f\u4e3b\u8981\u5173\u6ce8\u5982\u4f55\u5c06\u7c7b\u548c\u5bf9\u8c61\u7ec4\u5408\u6210\u66f4\u5927\u7684\u7ed3\u6784\uff0c\u540c\u65f6\u4fdd\u6301\u7ed3\u6784\u7684\u7075\u6d3b\u6027\u548c\u9ad8\u6548\u6027\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%B8%B8%E7%94%A8%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D/#1-adapter-pattern","title":"1. \u9002\u914d\u5668\u6a21\u5f0f (Adapter Pattern)","text":"<p>\u6838\u5fc3\u601d\u60f3\uff1a \u4f5c\u4e3a\u4e24\u4e2a\u4e0d\u517c\u5bb9\u63a5\u53e3\u4e4b\u95f4\u7684\u6865\u6881\uff0c\u4f7f\u5f97\u539f\u672c\u7531\u4e8e\u63a5\u53e3\u4e0d\u517c\u5bb9\u800c\u4e0d\u80fd\u4e00\u8d77\u5de5\u4f5c\u7684\u7c7b\u53ef\u4ee5\u534f\u540c\u5de5\u4f5c\u3002</p> <p>\u4f7f\u7528\u573a\u666f\uff1a *   \u7cfb\u7edf\u96c6\u6210\u4e0e\u590d\u7528\uff1a \u5f53\u9700\u8981\u590d\u7528\u4e00\u4e2a\u5df2\u7ecf\u5b58\u5728\u7684\u7c7b\uff0c\u4f46\u5176\u63a5\u53e3\u4e0e\u5f53\u524d\u7cfb\u7edf\u7684\u9700\u6c42\u4e0d\u5339\u914d\u65f6\u3002 *   \u7b2c\u4e09\u65b9\u5e93\u7684\u96c6\u6210\uff1a \u5728\u6574\u5408\u5916\u90e8\u5e93\u6216API\u65f6\uff0c\u7531\u4e8e\u5176\u63a5\u53e3\u53ef\u80fd\u4e0e\u7cfb\u7edf\u4e0d\u4e00\u81f4\uff0c\u53ef\u4ee5\u901a\u8fc7\u9002\u914d\u5668\u8fdb\u884c\u8f6c\u6362\u3002 *   \u63a5\u53e3\u7edf\u4e00\uff1a \u5f53\u7cfb\u7edf\u4e2d\u5b58\u5728\u591a\u4e2a\u529f\u80fd\u7c7b\u4f3c\u4f46\u63a5\u53e3\u4e0d\u540c\u7684\u7ec4\u4ef6\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u9002\u914d\u5668\u6a21\u5f0f\u63d0\u4f9b\u4e00\u4e2a\u7edf\u4e00\u7684\u63a5\u53e3\u3002 *   \u517c\u5bb9\u65e7\u7248\u672c\u63a5\u53e3\uff1a \u5728\u7cfb\u7edf\u5347\u7ea7\u8fc7\u7a0b\u4e2d\uff0c\u4e3a\u4e86\u517c\u5bb9\u65e7\u7248\u672c\u7684\u63a5\u53e3\uff0c\u53ef\u4ee5\u4f7f\u7528\u9002\u914d\u5668\u6a21\u5f0f\u3002 *   \u5177\u4f53\u6848\u4f8b\uff1a \u5e38\u89c1\u7684\u7535\u6e90\u9002\u914d\u5668\uff0c\u53ef\u4ee5\u5c06220V\u7684\u7535\u538b\u8f6c\u6362\u4e3a110V\uff0c\u8ba9\u7535\u5668\u5728\u4e0d\u540c\u7535\u538b\u6807\u51c6\u4e0b\u6b63\u5e38\u5de5\u4f5c\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%B8%B8%E7%94%A8%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D/#2-decorator-pattern","title":"2. \u88c5\u9970\u5668\u6a21\u5f0f (Decorator Pattern)","text":"<p>\u6838\u5fc3\u601d\u60f3\uff1a \u52a8\u6001\u5730\u4e3a\u4e00\u4e2a\u5bf9\u8c61\u6dfb\u52a0\u989d\u5916\u7684\u804c\u8d23\uff0c\u5c31\u6269\u5c55\u529f\u80fd\u800c\u8a00\uff0c\u5b83\u6bd4\u751f\u6210\u5b50\u7c7b\u7684\u65b9\u5f0f\u66f4\u4e3a\u7075\u6d3b\u3002</p> <p>\u4f7f\u7528\u573a\u666f\uff1a *   \u52a8\u6001\u6dfb\u52a0\u6216\u64a4\u9500\u529f\u80fd\uff1a \u9700\u8981\u5728\u8fd0\u884c\u65f6\u4e3a\u4e00\u4e2a\u5bf9\u8c61\u52a8\u6001\u5730\u6dfb\u52a0\u6216\u79fb\u9664\u529f\u80fd\uff0c\u800c\u4e0d\u60f3\u901a\u8fc7\u7ee7\u627f\u6765\u9759\u6001\u5730\u5b9e\u73b0\u3002 *   \u907f\u514d\u5b50\u7c7b\u7206\u70b8\uff1a \u5f53\u9700\u8981\u4e3a\u5bf9\u8c61\u6dfb\u52a0\u591a\u79cd\u529f\u80fd\uff0c\u800c\u8fd9\u4e9b\u529f\u80fd\u7684\u7ec4\u5408\u4f1a\u5bfc\u81f4\u4ea7\u751f\u5927\u91cf\u7684\u5b50\u7c7b\u65f6\uff0c\u4f7f\u7528\u88c5\u9970\u5668\u6a21\u5f0f\u53ef\u4ee5\u6709\u6548\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\u3002 *   \u529f\u80fd\u589e\u5f3a\uff1a \u5728\u4e0d\u6539\u53d8\u539f\u6709\u5bf9\u8c61\u7ed3\u6784\u7684\u60c5\u51b5\u4e0b\uff0c\u4e3a\u5176\u589e\u52a0\u65b0\u7684\u529f\u80fd\u3002 *   \u5177\u4f53\u6848\u4f8b\uff1a \u5b59\u609f\u7a7a\u7684\u4e03\u5341\u4e8c\u53d8\uff0c\u5b59\u609f\u7a7a\u672c\u8eab\uff08\u5177\u4f53\u7ec4\u4ef6\uff09\u901a\u8fc7\u4e0d\u540c\u7684\u53d8\u5316\uff08\u5177\u4f53\u88c5\u9970\u5668\uff09\u6765\u83b7\u5f97\u65b0\u7684\u80fd\u529b\u3002 \u53e6\u4e00\u4e2a\u4f8b\u5b50\u662f\u4e3a\u4e00\u5e45\u753b\u6dfb\u52a0\u753b\u6846\u548c\u73bb\u7483\uff0c\u753b\u672c\u8eab\u7684\u529f\u80fd\u6ca1\u6709\u6539\u53d8\uff0c\u4f46\u901a\u8fc7\u88c5\u9970\u589e\u5f3a\u4e86\u5176\u5c55\u793a\u6548\u679c\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%B8%B8%E7%94%A8%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D/#3-proxy-pattern","title":"3. \u4ee3\u7406\u6a21\u5f0f (Proxy Pattern)","text":"<p>\u6838\u5fc3\u601d\u60f3\uff1a \u4e3a\u5176\u4ed6\u5bf9\u8c61\u63d0\u4f9b\u4e00\u79cd\u4ee3\u7406\u4ee5\u63a7\u5236\u5bf9\u8fd9\u4e2a\u5bf9\u8c61\u7684\u8bbf\u95ee\u3002</p> <p>\u4f7f\u7528\u573a\u666f\uff1a *   \u8bbf\u95ee\u63a7\u5236\uff1a \u5f53\u9700\u8981\u5bf9\u5bf9\u8c61\u7684\u8bbf\u95ee\u8fdb\u884c\u6743\u9650\u63a7\u5236\u65f6\uff0c\u53ef\u4ee5\u5728\u4ee3\u7406\u4e2d\u8fdb\u884c\u68c0\u67e5\u3002 *   \u5ef6\u8fdf\u521d\u59cb\u5316\uff08\u865a\u62df\u4ee3\u7406\uff09\uff1a \u5bf9\u4e8e\u521b\u5efa\u5f00\u9500\u5927\u7684\u5bf9\u8c61\uff0c\u53ef\u4ee5\u5ef6\u8fdf\u5176\u5b9e\u4f8b\u5316\uff0c\u76f4\u5230\u771f\u6b63\u9700\u8981\u4f7f\u7528\u65f6\u624d\u521b\u5efa\u3002 *   \u8fdc\u7a0b\u4ee3\u7406\uff1a \u5f53\u9700\u8981\u8bbf\u95ee\u4f4d\u4e8e\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u7684\u5bf9\u8c61\u65f6\uff0c\u4ee3\u7406\u53ef\u4ee5\u5728\u672c\u5730\u4ee3\u8868\u8fdc\u7a0b\u5bf9\u8c61\uff0c\u5904\u7406\u7f51\u7edc\u901a\u4fe1\u7b49\u7ec6\u8282\u3002 *   \u65e5\u5fd7\u8bb0\u5f55\u4e0e\u76d1\u63a7\uff1a \u53ef\u4ee5\u5728\u4e0d\u4fee\u6539\u4e1a\u52a1\u4ee3\u7801\u7684\u60c5\u51b5\u4e0b\uff0c\u901a\u8fc7\u4ee3\u7406\u8bb0\u5f55\u65b9\u6cd5\u7684\u8c03\u7528\u65e5\u5fd7\u6216\u76d1\u63a7\u5176\u6027\u80fd\u3002 *   \u5177\u4f53\u6848\u4f8b\uff1a Windows\u7cfb\u7edf\u4e2d\u7684\u5feb\u6377\u65b9\u5f0f\uff0c\u5b83\u4f5c\u4e3a\u6587\u4ef6\u6216\u7a0b\u5e8f\u7684\u4ee3\u7406\u5b58\u5728\u3002 \u53e6\u4e00\u4e2a\u4f8b\u5b50\u662f\u4fe1\u7528\u5361\uff0c\u5b83\u662f\u94f6\u884c\u8d26\u6237\u4e2d\u8d44\u91d1\u7684\u4ee3\u7406\uff0c\u5728\u4ea4\u6613\u4e2d\u4ee3\u66ff\u73b0\u91d1\u8fdb\u884c\u652f\u4ed8\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%B8%B8%E7%94%A8%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D/#behavioral-patterns","title":"\u884c\u4e3a\u578b\u6a21\u5f0f (Behavioral Patterns)","text":"<p>\u8fd9\u7c7b\u6a21\u5f0f\u4e3b\u8981\u5173\u6ce8\u5bf9\u8c61\u4e4b\u95f4\u7684\u901a\u4fe1\u4ee5\u53ca\u804c\u8d23\u7684\u5206\u914d\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%B8%B8%E7%94%A8%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D/#1-observer-pattern","title":"1. \u89c2\u5bdf\u8005\u6a21\u5f0f (Observer Pattern)","text":"<p>\u6838\u5fc3\u601d\u60f3\uff1a \u5b9a\u4e49\u5bf9\u8c61\u4e4b\u95f4\u4e00\u79cd\u4e00\u5bf9\u591a\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u5f53\u4e00\u4e2a\u5bf9\u8c61\u7684\u72b6\u6001\u53d1\u751f\u6539\u53d8\u65f6\uff0c\u6240\u6709\u4f9d\u8d56\u4e8e\u5b83\u7684\u5bf9\u8c61\u90fd\u5c06\u5f97\u5230\u901a\u77e5\u5e76\u81ea\u52a8\u66f4\u65b0\u3002</p> <p>\u4f7f\u7528\u573a\u666f\uff1a *   \u4e8b\u4ef6\u9a71\u52a8\u7cfb\u7edf\uff1a \u5f53\u4e00\u4e2a\u5bf9\u8c61\u7684\u6539\u53d8\u9700\u8981\u89e6\u53d1\u5176\u4ed6\u591a\u4e2a\u5bf9\u8c61\u7684\u64cd\u4f5c\u65f6\uff0c\u4f8b\u5982GUI\u4e2d\u7684\u4e8b\u4ef6\u76d1\u542c\u3002 *   \u53d1\u5e03-\u8ba2\u9605\u7cfb\u7edf\uff1a \u6d88\u606f\u7684\u53d1\u5e03\u8005\u4e0d\u9700\u8981\u77e5\u9053\u5177\u4f53\u7684\u8ba2\u9605\u8005\uff0c\u4e24\u8005\u89e3\u8026\u3002\u4f8b\u5982\u90ae\u4ef6\u8ba2\u9605\u3001\u65b0\u95fb\u63a8\u9001\u7b49\u3002 *   MVC\u67b6\u6784\uff1a \u5728MVC\uff08\u6a21\u578b-\u89c6\u56fe-\u63a7\u5236\u5668\uff09\u6a21\u5f0f\u4e2d\uff0c\u6a21\u578b\uff08Model\uff09\u4f5c\u4e3a\u88ab\u89c2\u5bdf\u8005\uff0c\u5f53\u5176\u6570\u636e\u53d8\u5316\u65f6\u4f1a\u901a\u77e5\u89c6\u56fe\uff08View\uff0c\u89c2\u5bdf\u8005\uff09\u8fdb\u884c\u66f4\u65b0\u3002 *   \u5177\u4f53\u6848\u4f8b\uff1a \u62cd\u5356\u7cfb\u7edf\u4e2d\uff0c\u5f53\u6709\u65b0\u7684\u51fa\u4ef7\u65f6\uff0c\u6240\u6709\u53c2\u4e0e\u62cd\u5356\u7684\u4eba\u90fd\u4f1a\u6536\u5230\u901a\u77e5\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%B8%B8%E7%94%A8%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D/#2-strategy-pattern","title":"2. \u7b56\u7565\u6a21\u5f0f (Strategy Pattern)","text":"<p>\u6838\u5fc3\u601d\u60f3\uff1a \u5b9a\u4e49\u4e00\u7cfb\u5217\u7b97\u6cd5\uff0c\u5e76\u5c06\u6bcf\u4e00\u4e2a\u7b97\u6cd5\u5c01\u88c5\u8d77\u6765\uff0c\u4f7f\u5b83\u4eec\u53ef\u4ee5\u76f8\u4e92\u66ff\u6362\u3002\u6b64\u6a21\u5f0f\u8ba9\u7b97\u6cd5\u7684\u53d8\u5316\u72ec\u7acb\u4e8e\u4f7f\u7528\u7b97\u6cd5\u7684\u5ba2\u6237\u3002</p> <p>\u4f7f\u7528\u573a\u666f\uff1a *   \u591a\u79cd\u7b97\u6cd5\u9009\u62e9\uff1a \u5f53\u4e00\u4e2a\u7cfb\u7edf\u9700\u8981\u52a8\u6001\u5730\u5728\u591a\u79cd\u7b97\u6cd5\u4e2d\u9009\u62e9\u4e00\u79cd\u65f6\uff0c\u4f8b\u5982\u4e0d\u540c\u7684\u6392\u5e8f\u7b97\u6cd5\u3001\u538b\u7f29\u7b97\u6cd5\u7b49\u3002 *   \u907f\u514d\u591a\u91cd\u6761\u4ef6\u5224\u65ad\uff1a \u5f53\u4ee3\u7801\u4e2d\u5b58\u5728\u5927\u91cf\u4e0e\u7b97\u6cd5\u9009\u62e9\u76f8\u5173\u7684<code>if-else</code>\u6216<code>switch</code>\u8bed\u53e5\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u7b56\u7565\u6a21\u5f0f\u6765\u7b80\u5316\u548c\u4f18\u5316\u7ed3\u6784\u3002 *   \u6269\u5c55\u6027\u8981\u6c42\uff1a \u5f53\u9700\u8981\u65b9\u4fbf\u5730\u589e\u52a0\u65b0\u7684\u7b97\u6cd5\u65f6\uff0c\u53ea\u9700\u6dfb\u52a0\u65b0\u7684\u7b56\u7565\u7c7b\u5373\u53ef\u3002 *   \u5177\u4f53\u6848\u4f8b\uff1a \u7535\u5546\u7f51\u7ad9\u7684\u652f\u4ed8\u529f\u80fd\uff0c\u53ef\u4ee5\u9009\u62e9\u652f\u4ed8\u5b9d\u652f\u4ed8\u3001\u5fae\u4fe1\u652f\u4ed8\u6216\u94f6\u884c\u5361\u652f\u4ed8\uff0c\u6bcf\u79cd\u652f\u4ed8\u65b9\u5f0f\u90fd\u662f\u4e00\u79cd\u72ec\u7acb\u7684\u7b56\u7565\u3002 \u53e6\u4e00\u4e2a\u4f8b\u5b50\u662f\u51fa\u884c\u65b9\u5f0f\u7684\u9009\u62e9\uff0c\u53ef\u4ee5\u9009\u62e9\u9a91\u81ea\u884c\u8f66\u3001\u4e58\u5750\u516c\u4ea4\u6216\u5f00\u8f66\uff0c\u6bcf\u79cd\u65b9\u5f0f\u5bf9\u5e94\u4e0d\u540c\u7684\u7b56\u7565\u3002</p>"},{"location":"%E9%9D%A2%E7%BB%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%B8%B8%E7%94%A8%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D/#3-template-method-pattern","title":"3. \u6a21\u677f\u65b9\u6cd5\u6a21\u5f0f (Template Method Pattern)","text":"<p>\u6838\u5fc3\u601d\u60f3\uff1a \u5728\u4e00\u4e2a\u65b9\u6cd5\u4e2d\u5b9a\u4e49\u4e00\u4e2a\u7b97\u6cd5\u7684\u9aa8\u67b6\uff0c\u800c\u5c06\u67d0\u4e9b\u6b65\u9aa4\u5ef6\u8fdf\u5230\u5b50\u7c7b\u4e2d\u5b9e\u73b0\u3002\u6a21\u677f\u65b9\u6cd5\u4f7f\u5f97\u5b50\u7c7b\u53ef\u4ee5\u4e0d\u6539\u53d8\u4e00\u4e2a\u7b97\u6cd5\u7684\u7ed3\u6784\u5373\u53ef\u91cd\u5b9a\u4e49\u8be5\u7b97\u6cd5\u7684\u67d0\u4e9b\u7279\u5b9a\u6b65\u9aa4\u3002</p> <p>\u4f7f\u7528\u573a\u666f\uff1a *   \u7b97\u6cd5\u9aa8\u67b6\u56fa\u5b9a\uff0c\u7ec6\u8282\u53ef\u53d8\uff1a \u5f53\u591a\u4e2a\u5b50\u7c7b\u6709\u5171\u540c\u7684\u6267\u884c\u6d41\u7a0b\uff0c\u4f46\u67d0\u4e9b\u5177\u4f53\u7684\u6b65\u9aa4\u5b9e\u73b0\u4e0d\u540c\u65f6\u3002 *   \u4ee3\u7801\u590d\u7528\uff1a \u5c06\u591a\u4e2a\u5b50\u7c7b\u4e2d\u91cd\u590d\u7684\u4ee3\u7801\u63d0\u53d6\u5230\u7236\u7c7b\u7684\u6a21\u677f\u65b9\u6cd5\u4e2d\uff0c\u4fbf\u4e8e\u7ef4\u62a4\u3002 *   \u63a7\u5236\u5b50\u7c7b\u6269\u5c55\uff1a \u6a21\u677f\u65b9\u6cd5\u6a21\u5f0f\u901a\u8fc7\u5728\u7236\u7c7b\u4e2d\u5b9a\u4e49\u7b97\u6cd5\u6846\u67b6\uff0c\u6765\u63a7\u5236\u5b50\u7c7b\u7684\u884c\u4e3a\uff0c\u901a\u5e38\u6a21\u677f\u65b9\u6cd5\u4f1a\u7528<code>final</code>\u5173\u952e\u5b57\u4fee\u9970\uff0c\u9632\u6b62\u88ab\u5b50\u7c7b\u91cd\u5199\u3002 *   \u5177\u4f53\u6848\u4f8b\uff1a \u6ce1\u8336\u548c\u51b2\u5496\u5561\u7684\u6d41\u7a0b\u7c7b\u4f3c\uff08\u70e7\u6c34\u3001\u51b2\u6ce1\u3001\u5012\u5165\u676f\u4e2d\u3001\u52a0\u6599\uff09\uff0c\u53ef\u4ee5\u5c06\u5171\u540c\u7684\u6b65\u9aa4\u5b9a\u4e49\u5728\u6a21\u677f\u65b9\u6cd5\u4e2d\uff0c\u800c\u5177\u4f53\u7684\u51b2\u6ce1\u5185\u5bb9\u548c\u6dfb\u52a0\u7684\u8c03\u6599\u5219\u7531\u5b50\u7c7b\u6765\u5b9e\u73b0\u3002</p>"}]}