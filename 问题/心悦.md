

### **第一部分：实习经历 (Internship Experience)**

#### **模块一：用户权限管控 (RBAC & Sa-Token)**

**第一轮提问**

- **问题 1.1.1：** 我看到你写到“负责用户权限管控模块的实现，采用 RBAC 模型”，你能具体讲讲你是如何设计数据库表的吗？至少需要哪些核心表，它们之间的关系是怎样的？

**(假设你回答了用户表、角色表、权限表，以及它们之间的关联表)**

- **追问 1.1.3：** 你提到“支持用户、角色、权限、资源的灵活配置与管理”。这里的“资源”具体是指什么？它和“权限”有什么区别和联系？请举个例子。
- **追问 1.1.4：** 当一个用户同时拥有多个角色，而这些角色又有一些重叠或冲突的权限时（比如角色A有“编辑文章”权限，角色B没有），你的系统是如何判断该用户最终是否拥有“编辑文章”的权限的？
- **追问 1.1.5：** 简历中提到了 Sa-Token 框架。当时为什么选择 Sa-Token，而不是更主流的比如 Spring Security 或者 Shiro？你做了哪些技术选型上的对比？
- **追问 1.1.6：** Sa-Token 的 Token 是默认存储在内存中的。在生产环境下，如果服务是集群部署，这会带来什么问题？你是如何解决的？
- **追问 1.1.7：** 你实现了“在线用户实时监控”功能，能具体描述一下它的技术实现方案吗？前端是如何实时获取到在线用户列表的？是轮询、长连接还是 WebSocket？
- **追问 1.1.8：** “强制下线”功能，当管理员点击按钮后，服务端是如何通知到指定用户使其会话失效的？这个信令(Signaling)是怎么传递的？如果用户当时正好在进行一个长时间的 API 请求，会发生什么？

---

#### **模块二：多级缓存架构 (Redis + Caffeine)**

**第二轮提问**

- **问题 1.2.1：** 接下来我们聊聊缓存。你设计了 Redis+Caffeine 的多级缓存，可以解释一下为什么需要两级缓存吗？Caffeine 和 Redis 在这个架构里分别扮演什么角色？缓存的数据具体有哪些？
- **追问 1.2.2：** 当一个请求进来需要查询用户信息时，整个缓存的查询路径是怎样的？请描述一下从请求到命中/未命中，再到最终返回数据的完整流程。
- **追问 1.2.3：** 你提到了“通过 Spring 的事务感知机制，确保缓存操作与数据库事务保持同步”。能具体讲讲这个“事务感知机制”是如何实现的吗？是监听了 Spring 的哪个具体的事件或者扩展点？
- **追问 1.2.4：** 你使用了“双写机制”来更新缓存。如果数据库事务提交成功，但在写缓存的环节，比如写 Redis 时，网络抖动导致写入失败了，这时数据一致性就被破坏了，你有什么机制来处理这种情况吗？
- **追问 1.2.5：** 你有没有考虑过，相比于你用的这种“事务提交后同步双写”的方案，采用订阅数据库变更日志（比如 Canal）来异步更新缓存的方案？你认为这两种方案各有什么优缺点？
- **追问 1.2.6：** 简历提到“结合 SA-Token 用户行为监听器在用户状态变更时主动清理相关缓存”，这是一个很好的实践。请问，除了用户主动登出或者被强制下线，还有哪些场景可能会导致缓存需要被“主动”清理？你是如何处理的？
- **追问 1.2.7：** 在使用多级缓存时，有没有遇到过缓存穿透、缓存击穿或缓存雪崩的问题？如果遇到了，你会如何设计解决方案？

---

#### **模块三：心理量表测评系统**

**第三轮提问**

- **问题 1.3.1：** 我们来看下量表测评系统。你提到了“多类型题目设计”，比如选择题、填空题、量表题等，在数据库层面你是如何设计表结构来兼容这些不同类型的题目的？
- **追问 1.3.2：** 假设一张问卷有 100 道题，用户在答题过程中，每答一题就自动保存一次。你是如何设计这个“答题数据收集”接口的？是每个题目提交一次请求，还是在前端暂存，最后统一提交？这两种方式你如何权衡？
- **追-追问 1.3.3：** 如果采用统一提交，当用户答到第99题时浏览器突然崩溃了，如何保证用户答题数据的最大化保留？
- **追问 1.3.4：** 关于“数据导出”功能，如果需要导出一份包含上万份答卷的 Excel 报表，直接在主线程里查询数据库、用 POI/EasyExcel 生成文件，可能会导致接口超时和内存溢出。你是如何处理这种大数据量导出的场景的？
- **追问 1.3.5：** 这个模块的“统计分析”功能，具体都分析了哪些指标？这些分析是实时计算的，还是通过离线定时任务来预计算的？为什么选择你所说的这种方式？

---

#### **模块四：文件上传与解析**

**第四轮提问**

- **问题 1.4.1：** 请详细描述一下文件上传的完整流程。从用户在前端点击上传按钮，到最终文件出现在阿里云OSS上，前后端分别做了哪些事情？
- **追问 1.4.2：** 在这个流程中，文件数据是先上传到你的应用服务器，再由应用服务器转发到OSS，还是前端直接向OSS上传？这两种方案有什么区别？你选择了哪种，为什么？
- **追问 1.4.3：** 如果是前端直传OSS，那OSS的访问凭证（Access Key）暴露在前端会非常不安全。你是如何解决这个安全问题的？（提示：STS临时授权）
- **追问 1.4.4：** 对于大文件（比如超过 100MB 的 Excel 报表）的上传，你做了哪些优化来提升稳定性和用户体验？比如断点续传、分片上传等，有实现吗？
- **追问 1.4.5：** 你提到了“解析 Excel 报表”，这个解析操作是在文件上传的同步请求中完成的，还是一个异步任务？如果一个 Excel 有十万行数据，解析过程非常耗时，同步处理会有什么问题？异步处理的话，如何通知用户解析完成了？

---

#### **模块五：项目整体与个人成长**

**第五轮提问**

- **问题 1.5.1：** 在这段实习中，你认为你遇到的最困难、最有挑战性的一个技术难题是什么？请描述一下问题背景、你的排查思路、最终解决方案以及你的反思。
- **追问 1.5.2：** 在整个后台管理系统的开发中，你主要承担的是独立开发者的角色，还是团队协作者的角色？你如何与前端、产品或其他后端同学进行沟通和协作的？
- **追问 1.5.3：** 你觉得这段实习经历给你带来了哪些具体的、可量化的成长？在技术深度、工程化思维或者软技能方面，你认为哪方面收获最大？

---

### **
---

### **第三部分：技术栈与技能掌握 (Technical Stack & Skills)**

（基于简历中项目所用技术进行深入考察）

**第七轮提问**

- **问题 3.1.1：** 我们来聊聊Java基础。你项目中用到了多级缓存，这和并发关系密切。能聊聊你对 Java 内存模型（JMM）的理解吗？它解决了什么问题？`volatile` 关键字是如何保证可见性的？
- **追问 3.1.2：** 既然提到了并发，讲讲 `ConcurrentHashMap` 在 Java 1.8 中的实现原理？它相比于 `Hashtable` 或者 `Collections.synchronizedMap`，在性能上好在哪里？
- **问题 3.2.1：** 你大量用到了 Spring。能讲讲 Spring AOP 的实现原理吗？JDK 动态代理和 CGLIB 动态代理有什么区别，Spring 是如何选择的？
- **追问 3.2.2：** Spring 是如何解决循环依赖问题的？如果构造器注入出现了循环依赖，能解决吗？为什么？
- **问题 3.3.1：** 你的项目中重度使用了 Redis。除了用作缓存，你还了解 Redis 的哪些应用场景？每种场景下，你会选择哪种数据结构去实现？
- **追问 3.3.2：** 如果要你用 Redis 实现一个分布式锁，你会怎么设计？需要注意哪些问题，比如锁的超时、如何保证加锁和设置超时的原子性、以及锁的释放如何避免误删？
- **问题 3.4.1：** 你项目的数据最终都落到数据库，我们假设是 MySQL。能讲讲 InnoDB 存储引擎的事务隔离级别吗？你们线上一般用哪个级别？为什么？
- **追问 3.4.2：** 什么是 MVCC (多版本并发控制)？它是如何实现的，跟事务隔离级别有什么关系？

---

### **第四部分：教育背景与其他亮点 (Education & Other Highlights)**

**第八轮提问**

- **问题 4.1.1：** 我们来考一个算法题吧。既然你做过权限系统，我们来设计一个类似的功能。给定一个公司所有员工的上下级关系（可以看作一个 N 叉树，CEO是根节点），和一个权限列表，如果一个员工拥有某个权限，他的所有下属（直接和间接）都将自动继承这个权限。现在给你一个员工 ID，请设计一个函数，返回该员工拥有的所有权限列表。
- **问题 4.2.1：** 聊点基础的计算机网络。当用户在浏览器发起一个对你系统的请求，比如登录，到服务器返回响应，这个过程中，在网络层面都发生了什么？请尽可能详细地描述（DNS、TCP、HTTP等）。
- **问题 4.3.1：** 操作系统层面，进程和线程的区别是什么？你所用的 Java Web 服务器（比如 Tomcat）是如何利用线程来处理大量并发请求的？
- **问题 4.4.1：** 看你平时是通过什么方式来学习新技术的？可以分享一下你最近在关注或者学习的某项后端技术吗？
- **问题 4.5.1：** 你有什么问题想问我的吗？

