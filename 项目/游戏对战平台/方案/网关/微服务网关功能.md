微服务网关（Microservice Gateway），也常被称为API网关（API Gateway），是微服务架构中的一个重要组件。它作为所有客户端请求的唯入口点，统一处理与服务调用相关的横切关注点。

**常见微服务网关具有的功能：**

1.  **请求路由 (Request Routing):**
    *   根据请求的路径、头部、参数等信息，将请求转发到后端的相应微服务。
    *   支持动态路由，可以根据配置或服务发现动态更新路由规则。

2.  **认证与授权 (Authentication & Authorization):**
    *   对客户端请求进行身份验证（如：OAuth2, JWT, API Key）。
    *   验证通过后，进行权限校验，判断客户端是否有权限访问目标服务或资源。

3.  **限流与熔断 (Rate Limiting & Circuit Breaking):**
    *   **限流 (Rate Limiting):** 防止恶意攻击或突发流量冲垮后端服务，对单位时间内的请求数量进行限制。
    *   **熔断 (Circuit Breaking):** 当某个后端服务出现故障或响应过慢时，暂时阻止对该服务的进一步请求，快速失败，避免雪崩效应，并在服务恢复后自动重试。

4.  **协议转换 (Protocol Translation):**
    *   客户端可能使用HTTP/REST，而内部服务可能使用gRPC、Thrift、AMQP等不同协议。网关可以进行协议间的转换。
    *   例如，将外部的HTTP请求转换为内部的gRPC调用。

5.  **请求/响应转换 (Request/Response Transformation):**
    *   修改请求头、请求体、查询参数。
    *   修改响应头、响应体，以适应不同客户端的需求或隐藏内部实现细节。
    *   例如，聚合来自多个微服务的数据，或者对数据格式进行转换（XML to JSON）。

6.  **负载均衡 (Load Balancing):**
    *   当一个微服务有多个实例时，网关可以将请求分发到这些实例上，实现负载均衡。
    *   虽然底层的服务发现和负载均衡器（如Kubernetes Service, Nginx, Ribbon）也会做，但网关层面可以实现更细粒度的策略。

7.  **日志记录与监控 (Logging & Monitoring):**
    *   集中记录所有通过网关的请求和响应日志，便于审计和问题排查。
    *   收集关键性能指标（KPIs），如请求延迟、错误率、吞吐量等，并集成到监控系统（如Prometheus, ELK Stack）。
    *   支持分布式追踪（Distributed Tracing），如集成Zipkin或Jaeger。

8.  **SSL/TLS 终止 (SSL/TLS Termination):**
    *   客户端与网关之间使用HTTPS加密通信，网关终止SSL/TLS连接，然后以HTTP（或其他协议）与内部服务通信，减轻后端服务的SSL处理负担。

9.  **缓存 (Caching):**
    *   对频繁请求且不经常变化的数据进行缓存，减少对后端服务的调用，提高响应速度。

10. **API组合/编排 (API Composition/Orchestration):**
    *   将多个原子性的微服务调用聚合成一个对客户端暴露的粗粒度API，简化客户端调用。

11. **静态内容服务 (Static Content Serving):**
    *   有些网关可以直接提供静态资源（如HTML, CSS, JavaScript文件）。

12. **A/B测试、灰度发布、蓝绿部署支持 (Canary Releasing, Blue/Green Deployments):**
    *   通过控制流量分发，将一部分用户流量导向新版本的服务，实现平滑发布和测试。

13. **API文档化 (API Documentation):**
    *   集成Swagger/OpenAPI等工具，自动生成或展示API文档。

**核心功能：**

在上述众多功能中，以下几项通常被认为是微服务网关的**核心功能**：

1.  **请求路由 (Request Routing):**
    *   **原因:** 这是网关最基本也是最根本的职责。没有路由，请求无法到达正确的微服务。它是网关存在的首要前提。

2.  **安全认证与授权 (Authentication & Authorization):**
    *   **原因:** 在微服务架构中，服务暴露在网络中，安全是首要考虑的问题。网关作为统一入口，是实施安全策略（如身份验证、权限控制）的最佳位置，保护后端服务不被未授权访问。

3.  **限流与熔断 (Rate Limiting & Circuit Breaking):**
    *   **原因:** 这是保障整个微服务系统稳定性和韧性的关键。限流可以防止系统被流量冲垮，熔断可以防止故障扩散，避免雪崩效应。

4.  **监控与日志 (Monitoring & Logging - 至少是基础的):**
    *   **原因:** 对于通过网关的所有流量进行有效的监控和日志记录，是运维、问题排查、性能分析的基础。了解系统的运行状态至关重要。

5.  **协议转换 (Protocol Translation - 基础的转换，如HTTP到内部协议):**
    *   **原因:** 虽然不是所有场景都必须，但在异构系统中，客户端与服务端协议不一致是很常见的情况。网关能够解耦客户端与服务端的通信协议，使得两者可以独立演进。

这些核心功能构成了微服务网关的骨架，解决了微服务架构中面临的共性问题。其他功能则是在此基础上根据具体业务需求和场景选择性添加的增强功能。